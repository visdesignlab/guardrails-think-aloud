var cze=Object.defineProperty;var dze=(e,t,n)=>t in e?cze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var fze=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Cl=(e,t,n)=>dze(e,typeof t!="symbol"?t+"":t,n);var ehn=fze((ipn,Kse)=>{function hze(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function _1e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var w1e={exports:{}},PL={},E1e={exports:{}},Xn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk=Symbol.for("react.element"),pze=Symbol.for("react.portal"),mze=Symbol.for("react.fragment"),gze=Symbol.for("react.strict_mode"),yze=Symbol.for("react.profiler"),vze=Symbol.for("react.provider"),bze=Symbol.for("react.context"),_ze=Symbol.for("react.forward_ref"),wze=Symbol.for("react.suspense"),Eze=Symbol.for("react.memo"),xze=Symbol.for("react.lazy"),poe=Symbol.iterator;function Sze(e){return e===null||typeof e!="object"?null:(e=poe&&e[poe]||e["@@iterator"],typeof e=="function"?e:null)}var x1e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S1e=Object.assign,T1e={};function Jx(e,t,n){this.props=e,this.context=t,this.refs=T1e,this.updater=n||x1e}Jx.prototype.isReactComponent={};Jx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Jx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function C1e(){}C1e.prototype=Jx.prototype;function WW(e,t,n){this.props=e,this.context=t,this.refs=T1e,this.updater=n||x1e}var GW=WW.prototype=new C1e;GW.constructor=WW;S1e(GW,Jx.prototype);GW.isPureReactComponent=!0;var moe=Array.isArray,A1e=Object.prototype.hasOwnProperty,YW={current:null},I1e={key:!0,ref:!0,__self:!0,__source:!0};function k1e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)A1e.call(t,r)&&!I1e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:pk,type:e,key:s,ref:o,props:i,_owner:YW.current}}function Tze(e,t){return{$$typeof:pk,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function KW(e){return typeof e=="object"&&e!==null&&e.$$typeof===pk}function Cze(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var goe=/\/+/g;function B5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Cze(""+e.key):t.toString(36)}function IO(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case pk:case pze:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+B5(o,0):r,moe(i)?(n="",e!=null&&(n=e.replace(goe,"$&/")+"/"),IO(i,t,n,"",function(u){return u})):i!=null&&(KW(i)&&(i=Tze(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(goe,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",moe(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+B5(s,a);o+=IO(s,t,n,l,i)}else if(l=Sze(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+B5(s,a++),o+=IO(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function IP(e,t,n){if(e==null)return e;var r=[],i=0;return IO(e,r,"","",function(s){return t.call(n,s,i++)}),r}function Aze(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var yl={current:null},kO={transition:null},Ize={ReactCurrentDispatcher:yl,ReactCurrentBatchConfig:kO,ReactCurrentOwner:YW};function R1e(){throw Error("act(...) is not supported in production builds of React.")}Xn.Children={map:IP,forEach:function(e,t,n){IP(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return IP(e,function(){t++}),t},toArray:function(e){return IP(e,function(t){return t})||[]},only:function(e){if(!KW(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Xn.Component=Jx;Xn.Fragment=mze;Xn.Profiler=yze;Xn.PureComponent=WW;Xn.StrictMode=gze;Xn.Suspense=wze;Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ize;Xn.act=R1e;Xn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=S1e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=YW.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)A1e.call(t,l)&&!I1e.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:pk,type:e.type,key:i,ref:s,props:r,_owner:o}};Xn.createContext=function(e){return e={$$typeof:bze,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vze,_context:e},e.Consumer=e};Xn.createElement=k1e;Xn.createFactory=function(e){var t=k1e.bind(null,e);return t.type=e,t};Xn.createRef=function(){return{current:null}};Xn.forwardRef=function(e){return{$$typeof:_ze,render:e}};Xn.isValidElement=KW;Xn.lazy=function(e){return{$$typeof:xze,_payload:{_status:-1,_result:e},_init:Aze}};Xn.memo=function(e,t){return{$$typeof:Eze,type:e,compare:t===void 0?null:t}};Xn.startTransition=function(e){var t=kO.transition;kO.transition={};try{e()}finally{kO.transition=t}};Xn.unstable_act=R1e;Xn.useCallback=function(e,t){return yl.current.useCallback(e,t)};Xn.useContext=function(e){return yl.current.useContext(e)};Xn.useDebugValue=function(){};Xn.useDeferredValue=function(e){return yl.current.useDeferredValue(e)};Xn.useEffect=function(e,t){return yl.current.useEffect(e,t)};Xn.useId=function(){return yl.current.useId()};Xn.useImperativeHandle=function(e,t,n){return yl.current.useImperativeHandle(e,t,n)};Xn.useInsertionEffect=function(e,t){return yl.current.useInsertionEffect(e,t)};Xn.useLayoutEffect=function(e,t){return yl.current.useLayoutEffect(e,t)};Xn.useMemo=function(e,t){return yl.current.useMemo(e,t)};Xn.useReducer=function(e,t,n){return yl.current.useReducer(e,t,n)};Xn.useRef=function(e){return yl.current.useRef(e)};Xn.useState=function(e){return yl.current.useState(e)};Xn.useSyncExternalStore=function(e,t,n){return yl.current.useSyncExternalStore(e,t,n)};Xn.useTransition=function(){return yl.current.useTransition()};Xn.version="18.3.1";E1e.exports=Xn;var I=E1e.exports;const ls=mu(I),YD=hze({__proto__:null,default:ls},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kze=I,Rze=Symbol.for("react.element"),Pze=Symbol.for("react.fragment"),Nze=Object.prototype.hasOwnProperty,Oze=kze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dze={key:!0,ref:!0,__self:!0,__source:!0};function P1e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Nze.call(t,r)&&!Dze.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Rze,type:e,key:s,ref:o,props:i,_owner:Oze.current}}PL.Fragment=Pze;PL.jsx=P1e;PL.jsxs=P1e;w1e.exports=PL;var v=w1e.exports,Zz={},N1e={exports:{}},dc={},O1e={exports:{}},D1e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(z,U){var O=z.length;z.push(U);e:for(;0<O;){var V=O-1>>>1,W=z[V];if(0<i(W,U))z[V]=U,z[O]=W,O=V;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var U=z[0],O=z.pop();if(O!==U){z[0]=O;e:for(var V=0,W=z.length,j=W>>>1;V<j;){var H=2*(V+1)-1,G=z[H],J=H+1,se=z[J];if(0>i(G,O))J<W&&0>i(se,G)?(z[V]=se,z[J]=O,V=J):(z[V]=G,z[H]=O,V=H);else if(J<W&&0>i(se,O))z[V]=se,z[J]=O,V=J;else break e}}return U}function i(z,U){var O=z.sortIndex-U.sortIndex;return O!==0?O:z.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var U=n(u);U!==null;){if(U.callback===null)r(u);else if(U.startTime<=z)r(u),U.sortIndex=U.expirationTime,t(l,U);else break;U=n(u)}}function w(z){if(m=!1,_(z),!p)if(n(l)!==null)p=!0,M(E);else{var U=n(u);U!==null&&B(w,U.startTime-z)}}function E(z,U){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var O=f;try{for(_(U),d=n(l);d!==null&&(!(d.expirationTime>U)||z&&!P());){var V=d.callback;if(typeof V=="function"){d.callback=null,f=d.priorityLevel;var W=V(d.expirationTime<=U);U=e.unstable_now(),typeof W=="function"?d.callback=W:d===n(l)&&r(l),_(U)}else r(l);d=n(l)}if(d!==null)var j=!0;else{var H=n(u);H!==null&&B(w,H.startTime-U),j=!1}return j}finally{d=null,f=O,h=!1}}var x=!1,S=null,C=-1,A=5,R=-1;function P(){return!(e.unstable_now()-R<A)}function L(){if(S!==null){var z=e.unstable_now();R=z;var U=!0;try{U=S(!0,z)}finally{U?k():(x=!1,S=null)}}else x=!1}var k;if(typeof b=="function")k=function(){b(L)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,D=$.port2;$.port1.onmessage=L,k=function(){D.postMessage(null)}}else k=function(){g(L,0)};function M(z){S=z,x||(x=!0,k())}function B(z,U){C=g(function(){z(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(z){z.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(E))},e.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<z?Math.floor(1e3/z):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(z){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var O=f;f=U;try{return z()}finally{f=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(z,U){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var O=f;f=z;try{return U()}finally{f=O}},e.unstable_scheduleCallback=function(z,U,O){var V=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?V+O:V):O=V,z){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=O+W,z={id:c++,callback:U,priorityLevel:z,startTime:O,expirationTime:W,sortIndex:-1},O>V?(z.sortIndex=O,t(u,z),n(l)===null&&z===n(u)&&(m?(y(C),C=-1):m=!0,B(w,O-V))):(z.sortIndex=W,t(l,z),p||h||(p=!0,M(E))),z},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(z){var U=f;return function(){var O=f;f=U;try{return z.apply(this,arguments)}finally{f=O}}}})(D1e);O1e.exports=D1e;var Mze=O1e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $ze=I,Gu=Mze;function at(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var M1e=new Set,wA={};function Lb(e,t){PE(e,t),PE(e+"Capture",t)}function PE(e,t){for(wA[e]=t,e=0;e<t.length;e++)M1e.add(t[e])}var km=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),e7=Object.prototype.hasOwnProperty,Lze=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yoe={},voe={};function Fze(e){return e7.call(voe,e)?!0:e7.call(yoe,e)?!1:Lze.test(e)?voe[e]=!0:(yoe[e]=!0,!1)}function jze(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Bze(e,t,n,r){if(t===null||typeof t>"u"||jze(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function vl(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Xo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Xo[e]=new vl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Xo[t]=new vl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Xo[e]=new vl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Xo[e]=new vl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Xo[e]=new vl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Xo[e]=new vl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Xo[e]=new vl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Xo[e]=new vl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Xo[e]=new vl(e,5,!1,e.toLowerCase(),null,!1,!1)});var XW=/[\-:]([a-z])/g;function QW(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(XW,QW);Xo[t]=new vl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(XW,QW);Xo[t]=new vl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(XW,QW);Xo[t]=new vl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Xo[e]=new vl(e,1,!1,e.toLowerCase(),null,!1,!1)});Xo.xlinkHref=new vl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Xo[e]=new vl(e,1,!1,e.toLowerCase(),null,!0,!0)});function JW(e,t,n,r){var i=Xo.hasOwnProperty(t)?Xo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Bze(t,n,i,r)&&(n=null),r||i===null?Fze(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var eg=$ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,kP=Symbol.for("react.element"),bw=Symbol.for("react.portal"),_w=Symbol.for("react.fragment"),ZW=Symbol.for("react.strict_mode"),t7=Symbol.for("react.profiler"),$1e=Symbol.for("react.provider"),L1e=Symbol.for("react.context"),eG=Symbol.for("react.forward_ref"),n7=Symbol.for("react.suspense"),r7=Symbol.for("react.suspense_list"),tG=Symbol.for("react.memo"),Vg=Symbol.for("react.lazy"),F1e=Symbol.for("react.offscreen"),boe=Symbol.iterator;function yT(e){return e===null||typeof e!="object"?null:(e=boe&&e[boe]||e["@@iterator"],typeof e=="function"?e:null)}var Yi=Object.assign,z5;function wC(e){if(z5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);z5=t&&t[1]||""}return`
`+z5+e}var U5=!1;function V5(e,t){if(!e||U5)return"";U5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{U5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wC(e):""}function zze(e){switch(e.tag){case 5:return wC(e.type);case 16:return wC("Lazy");case 13:return wC("Suspense");case 19:return wC("SuspenseList");case 0:case 2:case 15:return e=V5(e.type,!1),e;case 11:return e=V5(e.type.render,!1),e;case 1:return e=V5(e.type,!0),e;default:return""}}function i7(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case _w:return"Fragment";case bw:return"Portal";case t7:return"Profiler";case ZW:return"StrictMode";case n7:return"Suspense";case r7:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case L1e:return(e.displayName||"Context")+".Consumer";case $1e:return(e._context.displayName||"Context")+".Provider";case eG:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tG:return t=e.displayName||null,t!==null?t:i7(e.type)||"Memo";case Vg:t=e._payload,e=e._init;try{return i7(e(t))}catch{}}return null}function Uze(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return i7(t);case 8:return t===ZW?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Q0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function j1e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vze(e){var t=j1e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function RP(e){e._valueTracker||(e._valueTracker=Vze(e))}function B1e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=j1e(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function KD(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function s7(e,t){var n=t.checked;return Yi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function _oe(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Q0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function z1e(e,t){t=t.checked,t!=null&&JW(e,"checked",t,!1)}function o7(e,t){z1e(e,t);var n=Q0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?a7(e,t.type,n):t.hasOwnProperty("defaultValue")&&a7(e,t.type,Q0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function woe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function a7(e,t,n){(t!=="number"||KD(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var EC=Array.isArray;function Ww(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Q0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function l7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(at(91));return Yi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Eoe(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(at(92));if(EC(n)){if(1<n.length)throw Error(at(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Q0(n)}}function U1e(e,t){var n=Q0(t.value),r=Q0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function xoe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function V1e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function u7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?V1e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var PP,H1e=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(PP=PP||document.createElement("div"),PP.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=PP.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function EA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var _2={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hze=["Webkit","ms","Moz","O"];Object.keys(_2).forEach(function(e){Hze.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_2[t]=_2[e]})});function q1e(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||_2.hasOwnProperty(e)&&_2[e]?(""+t).trim():t+"px"}function W1e(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=q1e(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var qze=Yi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function c7(e,t){if(t){if(qze[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(at(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(at(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(at(61))}if(t.style!=null&&typeof t.style!="object")throw Error(at(62))}}function d7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var f7=null;function nG(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var h7=null,Gw=null,Yw=null;function Soe(e){if(e=yk(e)){if(typeof h7!="function")throw Error(at(280));var t=e.stateNode;t&&(t=$L(t),h7(e.stateNode,e.type,t))}}function G1e(e){Gw?Yw?Yw.push(e):Yw=[e]:Gw=e}function Y1e(){if(Gw){var e=Gw,t=Yw;if(Yw=Gw=null,Soe(e),t)for(e=0;e<t.length;e++)Soe(t[e])}}function K1e(e,t){return e(t)}function X1e(){}var H5=!1;function Q1e(e,t,n){if(H5)return e(t,n);H5=!0;try{return K1e(e,t,n)}finally{H5=!1,(Gw!==null||Yw!==null)&&(X1e(),Y1e())}}function xA(e,t){var n=e.stateNode;if(n===null)return null;var r=$L(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(at(231,t,typeof n));return n}var p7=!1;if(km)try{var vT={};Object.defineProperty(vT,"passive",{get:function(){p7=!0}}),window.addEventListener("test",vT,vT),window.removeEventListener("test",vT,vT)}catch{p7=!1}function Wze(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var w2=!1,XD=null,QD=!1,m7=null,Gze={onError:function(e){w2=!0,XD=e}};function Yze(e,t,n,r,i,s,o,a,l){w2=!1,XD=null,Wze.apply(Gze,arguments)}function Kze(e,t,n,r,i,s,o,a,l){if(Yze.apply(this,arguments),w2){if(w2){var u=XD;w2=!1,XD=null}else throw Error(at(198));QD||(QD=!0,m7=u)}}function Fb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function J1e(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Toe(e){if(Fb(e)!==e)throw Error(at(188))}function Xze(e){var t=e.alternate;if(!t){if(t=Fb(e),t===null)throw Error(at(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Toe(i),e;if(s===r)return Toe(i),t;s=s.sibling}throw Error(at(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(at(189))}}if(n.alternate!==r)throw Error(at(190))}if(n.tag!==3)throw Error(at(188));return n.stateNode.current===n?e:t}function Z1e(e){return e=Xze(e),e!==null?ebe(e):null}function ebe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ebe(e);if(t!==null)return t;e=e.sibling}return null}var tbe=Gu.unstable_scheduleCallback,Coe=Gu.unstable_cancelCallback,Qze=Gu.unstable_shouldYield,Jze=Gu.unstable_requestPaint,_s=Gu.unstable_now,Zze=Gu.unstable_getCurrentPriorityLevel,rG=Gu.unstable_ImmediatePriority,nbe=Gu.unstable_UserBlockingPriority,JD=Gu.unstable_NormalPriority,e7e=Gu.unstable_LowPriority,rbe=Gu.unstable_IdlePriority,NL=null,Ih=null;function t7e(e){if(Ih&&typeof Ih.onCommitFiberRoot=="function")try{Ih.onCommitFiberRoot(NL,e,void 0,(e.current.flags&128)===128)}catch{}}var tf=Math.clz32?Math.clz32:i7e,n7e=Math.log,r7e=Math.LN2;function i7e(e){return e>>>=0,e===0?32:31-(n7e(e)/r7e|0)|0}var NP=64,OP=4194304;function xC(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ZD(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=xC(a):(s&=o,s!==0&&(r=xC(s)))}else o=n&~i,o!==0?r=xC(o):s!==0&&(r=xC(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tf(t),i=1<<n,r|=e[n],t&=~i;return r}function s7e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o7e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-tf(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=s7e(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function g7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ibe(){var e=NP;return NP<<=1,!(NP&4194240)&&(NP=64),e}function q5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mk(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tf(t),e[t]=n}function a7e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-tf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function iG(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Yr=0;function sbe(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var obe,sG,abe,lbe,ube,y7=!1,DP=[],C0=null,A0=null,I0=null,SA=new Map,TA=new Map,Jg=[],l7e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Aoe(e,t){switch(e){case"focusin":case"focusout":C0=null;break;case"dragenter":case"dragleave":A0=null;break;case"mouseover":case"mouseout":I0=null;break;case"pointerover":case"pointerout":SA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":TA.delete(t.pointerId)}}function bT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=yk(t),t!==null&&sG(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function u7e(e,t,n,r,i){switch(t){case"focusin":return C0=bT(C0,e,t,n,r,i),!0;case"dragenter":return A0=bT(A0,e,t,n,r,i),!0;case"mouseover":return I0=bT(I0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return SA.set(s,bT(SA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,TA.set(s,bT(TA.get(s)||null,e,t,n,r,i)),!0}return!1}function cbe(e){var t=p1(e.target);if(t!==null){var n=Fb(t);if(n!==null){if(t=n.tag,t===13){if(t=J1e(n),t!==null){e.blockedOn=t,ube(e.priority,function(){abe(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function RO(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=v7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);f7=r,n.target.dispatchEvent(r),f7=null}else return t=yk(n),t!==null&&sG(t),e.blockedOn=n,!1;t.shift()}return!0}function Ioe(e,t,n){RO(e)&&n.delete(t)}function c7e(){y7=!1,C0!==null&&RO(C0)&&(C0=null),A0!==null&&RO(A0)&&(A0=null),I0!==null&&RO(I0)&&(I0=null),SA.forEach(Ioe),TA.forEach(Ioe)}function _T(e,t){e.blockedOn===t&&(e.blockedOn=null,y7||(y7=!0,Gu.unstable_scheduleCallback(Gu.unstable_NormalPriority,c7e)))}function CA(e){function t(i){return _T(i,e)}if(0<DP.length){_T(DP[0],e);for(var n=1;n<DP.length;n++){var r=DP[n];r.blockedOn===e&&(r.blockedOn=null)}}for(C0!==null&&_T(C0,e),A0!==null&&_T(A0,e),I0!==null&&_T(I0,e),SA.forEach(t),TA.forEach(t),n=0;n<Jg.length;n++)r=Jg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Jg.length&&(n=Jg[0],n.blockedOn===null);)cbe(n),n.blockedOn===null&&Jg.shift()}var Kw=eg.ReactCurrentBatchConfig,eM=!0;function d7e(e,t,n,r){var i=Yr,s=Kw.transition;Kw.transition=null;try{Yr=1,oG(e,t,n,r)}finally{Yr=i,Kw.transition=s}}function f7e(e,t,n,r){var i=Yr,s=Kw.transition;Kw.transition=null;try{Yr=4,oG(e,t,n,r)}finally{Yr=i,Kw.transition=s}}function oG(e,t,n,r){if(eM){var i=v7(e,t,n,r);if(i===null)t8(e,t,r,tM,n),Aoe(e,r);else if(u7e(i,e,t,n,r))r.stopPropagation();else if(Aoe(e,r),t&4&&-1<l7e.indexOf(e)){for(;i!==null;){var s=yk(i);if(s!==null&&obe(s),s=v7(e,t,n,r),s===null&&t8(e,t,r,tM,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else t8(e,t,r,null,n)}}var tM=null;function v7(e,t,n,r){if(tM=null,e=nG(r),e=p1(e),e!==null)if(t=Fb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=J1e(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return tM=e,null}function dbe(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zze()){case rG:return 1;case nbe:return 4;case JD:case e7e:return 16;case rbe:return 536870912;default:return 16}default:return 16}}var u0=null,aG=null,PO=null;function fbe(){if(PO)return PO;var e,t=aG,n=t.length,r,i="value"in u0?u0.value:u0.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return PO=i.slice(e,1<r?1-r:void 0)}function NO(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function MP(){return!0}function koe(){return!1}function fc(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?MP:koe,this.isPropagationStopped=koe,this}return Yi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=MP)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=MP)},persist:function(){},isPersistent:MP}),t}var Zx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lG=fc(Zx),gk=Yi({},Zx,{view:0,detail:0}),h7e=fc(gk),W5,G5,wT,OL=Yi({},gk,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uG,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==wT&&(wT&&e.type==="mousemove"?(W5=e.screenX-wT.screenX,G5=e.screenY-wT.screenY):G5=W5=0,wT=e),W5)},movementY:function(e){return"movementY"in e?e.movementY:G5}}),Roe=fc(OL),p7e=Yi({},OL,{dataTransfer:0}),m7e=fc(p7e),g7e=Yi({},gk,{relatedTarget:0}),Y5=fc(g7e),y7e=Yi({},Zx,{animationName:0,elapsedTime:0,pseudoElement:0}),v7e=fc(y7e),b7e=Yi({},Zx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_7e=fc(b7e),w7e=Yi({},Zx,{data:0}),Poe=fc(w7e),E7e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},x7e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S7e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function T7e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=S7e[e])?!!t[e]:!1}function uG(){return T7e}var C7e=Yi({},gk,{key:function(e){if(e.key){var t=E7e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=NO(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?x7e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uG,charCode:function(e){return e.type==="keypress"?NO(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?NO(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),A7e=fc(C7e),I7e=Yi({},OL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Noe=fc(I7e),k7e=Yi({},gk,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uG}),R7e=fc(k7e),P7e=Yi({},Zx,{propertyName:0,elapsedTime:0,pseudoElement:0}),N7e=fc(P7e),O7e=Yi({},OL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),D7e=fc(O7e),M7e=[9,13,27,32],cG=km&&"CompositionEvent"in window,E2=null;km&&"documentMode"in document&&(E2=document.documentMode);var $7e=km&&"TextEvent"in window&&!E2,hbe=km&&(!cG||E2&&8<E2&&11>=E2),Ooe=" ",Doe=!1;function pbe(e,t){switch(e){case"keyup":return M7e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mbe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ww=!1;function L7e(e,t){switch(e){case"compositionend":return mbe(t);case"keypress":return t.which!==32?null:(Doe=!0,Ooe);case"textInput":return e=t.data,e===Ooe&&Doe?null:e;default:return null}}function F7e(e,t){if(ww)return e==="compositionend"||!cG&&pbe(e,t)?(e=fbe(),PO=aG=u0=null,ww=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return hbe&&t.locale!=="ko"?null:t.data;default:return null}}var j7e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Moe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!j7e[e.type]:t==="textarea"}function gbe(e,t,n,r){G1e(r),t=nM(t,"onChange"),0<t.length&&(n=new lG("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var x2=null,AA=null;function B7e(e){Abe(e,0)}function DL(e){var t=Sw(e);if(B1e(t))return e}function z7e(e,t){if(e==="change")return t}var ybe=!1;if(km){var K5;if(km){var X5="oninput"in document;if(!X5){var $oe=document.createElement("div");$oe.setAttribute("oninput","return;"),X5=typeof $oe.oninput=="function"}K5=X5}else K5=!1;ybe=K5&&(!document.documentMode||9<document.documentMode)}function Loe(){x2&&(x2.detachEvent("onpropertychange",vbe),AA=x2=null)}function vbe(e){if(e.propertyName==="value"&&DL(AA)){var t=[];gbe(t,AA,e,nG(e)),Q1e(B7e,t)}}function U7e(e,t,n){e==="focusin"?(Loe(),x2=t,AA=n,x2.attachEvent("onpropertychange",vbe)):e==="focusout"&&Loe()}function V7e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return DL(AA)}function H7e(e,t){if(e==="click")return DL(t)}function q7e(e,t){if(e==="input"||e==="change")return DL(t)}function W7e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gf=typeof Object.is=="function"?Object.is:W7e;function IA(e,t){if(gf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!e7.call(t,i)||!gf(e[i],t[i]))return!1}return!0}function Foe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function joe(e,t){var n=Foe(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Foe(n)}}function bbe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?bbe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function _be(){for(var e=window,t=KD();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=KD(e.document)}return t}function dG(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function G7e(e){var t=_be(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&bbe(n.ownerDocument.documentElement,n)){if(r!==null&&dG(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=joe(n,s);var o=joe(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Y7e=km&&"documentMode"in document&&11>=document.documentMode,Ew=null,b7=null,S2=null,_7=!1;function Boe(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_7||Ew==null||Ew!==KD(r)||(r=Ew,"selectionStart"in r&&dG(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),S2&&IA(S2,r)||(S2=r,r=nM(b7,"onSelect"),0<r.length&&(t=new lG("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Ew)))}function $P(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xw={animationend:$P("Animation","AnimationEnd"),animationiteration:$P("Animation","AnimationIteration"),animationstart:$P("Animation","AnimationStart"),transitionend:$P("Transition","TransitionEnd")},Q5={},wbe={};km&&(wbe=document.createElement("div").style,"AnimationEvent"in window||(delete xw.animationend.animation,delete xw.animationiteration.animation,delete xw.animationstart.animation),"TransitionEvent"in window||delete xw.transitionend.transition);function ML(e){if(Q5[e])return Q5[e];if(!xw[e])return e;var t=xw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in wbe)return Q5[e]=t[n];return e}var Ebe=ML("animationend"),xbe=ML("animationiteration"),Sbe=ML("animationstart"),Tbe=ML("transitionend"),Cbe=new Map,zoe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fy(e,t){Cbe.set(e,t),Lb(t,[e])}for(var J5=0;J5<zoe.length;J5++){var Z5=zoe[J5],K7e=Z5.toLowerCase(),X7e=Z5[0].toUpperCase()+Z5.slice(1);Fy(K7e,"on"+X7e)}Fy(Ebe,"onAnimationEnd");Fy(xbe,"onAnimationIteration");Fy(Sbe,"onAnimationStart");Fy("dblclick","onDoubleClick");Fy("focusin","onFocus");Fy("focusout","onBlur");Fy(Tbe,"onTransitionEnd");PE("onMouseEnter",["mouseout","mouseover"]);PE("onMouseLeave",["mouseout","mouseover"]);PE("onPointerEnter",["pointerout","pointerover"]);PE("onPointerLeave",["pointerout","pointerover"]);Lb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Lb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Lb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Lb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Lb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Lb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var SC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q7e=new Set("cancel close invalid load scroll toggle".split(" ").concat(SC));function Uoe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Kze(r,t,void 0,e),e.currentTarget=null}function Abe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Uoe(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Uoe(i,a,u),s=l}}}if(QD)throw e=m7,QD=!1,m7=null,e}function wi(e,t){var n=t[T7];n===void 0&&(n=t[T7]=new Set);var r=e+"__bubble";n.has(r)||(Ibe(t,e,2,!1),n.add(r))}function e8(e,t,n){var r=0;t&&(r|=4),Ibe(n,e,r,t)}var LP="_reactListening"+Math.random().toString(36).slice(2);function kA(e){if(!e[LP]){e[LP]=!0,M1e.forEach(function(n){n!=="selectionchange"&&(Q7e.has(n)||e8(n,!1,e),e8(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[LP]||(t[LP]=!0,e8("selectionchange",!1,t))}}function Ibe(e,t,n,r){switch(dbe(t)){case 1:var i=d7e;break;case 4:i=f7e;break;default:i=oG}n=i.bind(null,t,n,e),i=void 0,!p7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function t8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=p1(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Q1e(function(){var u=s,c=nG(n),d=[];e:{var f=Cbe.get(e);if(f!==void 0){var h=lG,p=e;switch(e){case"keypress":if(NO(n)===0)break e;case"keydown":case"keyup":h=A7e;break;case"focusin":p="focus",h=Y5;break;case"focusout":p="blur",h=Y5;break;case"beforeblur":case"afterblur":h=Y5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Roe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=m7e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=R7e;break;case Ebe:case xbe:case Sbe:h=v7e;break;case Tbe:h=N7e;break;case"scroll":h=h7e;break;case"wheel":h=D7e;break;case"copy":case"cut":case"paste":h=_7e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Noe}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?f!==null?f+"Capture":null:f;m=[];for(var b=u,_;b!==null;){_=b;var w=_.stateNode;if(_.tag===5&&w!==null&&(_=w,y!==null&&(w=xA(b,y),w!=null&&m.push(RA(b,w,_)))),g)break;b=b.return}0<m.length&&(f=new h(f,p,null,n,c),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==f7&&(p=n.relatedTarget||n.fromElement)&&(p1(p)||p[Rm]))break e;if((h||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=u,p=p?p1(p):null,p!==null&&(g=Fb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=u),h!==p)){if(m=Roe,w="onMouseLeave",y="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(m=Noe,w="onPointerLeave",y="onPointerEnter",b="pointer"),g=h==null?f:Sw(h),_=p==null?f:Sw(p),f=new m(w,b+"leave",h,n,c),f.target=g,f.relatedTarget=_,w=null,p1(c)===u&&(m=new m(y,b+"enter",p,n,c),m.target=_,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,b=0,_=m;_;_=S_(_))b++;for(_=0,w=y;w;w=S_(w))_++;for(;0<b-_;)m=S_(m),b--;for(;0<_-b;)y=S_(y),_--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=S_(m),y=S_(y)}m=null}else m=null;h!==null&&Voe(d,f,h,m,!1),p!==null&&g!==null&&Voe(d,g,p,m,!0)}}e:{if(f=u?Sw(u):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var E=z7e;else if(Moe(f))if(ybe)E=q7e;else{E=V7e;var x=U7e}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=H7e);if(E&&(E=E(e,u))){gbe(d,E,n,c);break e}x&&x(e,f,u),e==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&a7(f,"number",f.value)}switch(x=u?Sw(u):window,e){case"focusin":(Moe(x)||x.contentEditable==="true")&&(Ew=x,b7=u,S2=null);break;case"focusout":S2=b7=Ew=null;break;case"mousedown":_7=!0;break;case"contextmenu":case"mouseup":case"dragend":_7=!1,Boe(d,n,c);break;case"selectionchange":if(Y7e)break;case"keydown":case"keyup":Boe(d,n,c)}var S;if(cG)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else ww?pbe(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(hbe&&n.locale!=="ko"&&(ww||C!=="onCompositionStart"?C==="onCompositionEnd"&&ww&&(S=fbe()):(u0=c,aG="value"in u0?u0.value:u0.textContent,ww=!0)),x=nM(u,C),0<x.length&&(C=new Poe(C,e,null,n,c),d.push({event:C,listeners:x}),S?C.data=S:(S=mbe(n),S!==null&&(C.data=S)))),(S=$7e?L7e(e,n):F7e(e,n))&&(u=nM(u,"onBeforeInput"),0<u.length&&(c=new Poe("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=S))}Abe(d,t)})}function RA(e,t,n){return{instance:e,listener:t,currentTarget:n}}function nM(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=xA(e,n),s!=null&&r.unshift(RA(e,s,i)),s=xA(e,t),s!=null&&r.push(RA(e,s,i))),e=e.return}return r}function S_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Voe(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=xA(n,s),l!=null&&o.unshift(RA(n,l,a))):i||(l=xA(n,s),l!=null&&o.push(RA(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var J7e=/\r\n?/g,Z7e=/\u0000|\uFFFD/g;function Hoe(e){return(typeof e=="string"?e:""+e).replace(J7e,`
`).replace(Z7e,"")}function FP(e,t,n){if(t=Hoe(t),Hoe(e)!==t&&n)throw Error(at(425))}function rM(){}var w7=null,E7=null;function x7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var S7=typeof setTimeout=="function"?setTimeout:void 0,eUe=typeof clearTimeout=="function"?clearTimeout:void 0,qoe=typeof Promise=="function"?Promise:void 0,tUe=typeof queueMicrotask=="function"?queueMicrotask:typeof qoe<"u"?function(e){return qoe.resolve(null).then(e).catch(nUe)}:S7;function nUe(e){setTimeout(function(){throw e})}function n8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),CA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);CA(t)}function k0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Woe(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var eS=Math.random().toString(36).slice(2),ch="__reactFiber$"+eS,PA="__reactProps$"+eS,Rm="__reactContainer$"+eS,T7="__reactEvents$"+eS,rUe="__reactListeners$"+eS,iUe="__reactHandles$"+eS;function p1(e){var t=e[ch];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Rm]||n[ch]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Woe(e);e!==null;){if(n=e[ch])return n;e=Woe(e)}return t}e=n,n=e.parentNode}return null}function yk(e){return e=e[ch]||e[Rm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(at(33))}function $L(e){return e[PA]||null}var C7=[],Tw=-1;function jy(e){return{current:e}}function Ii(e){0>Tw||(e.current=C7[Tw],C7[Tw]=null,Tw--)}function gi(e,t){Tw++,C7[Tw]=e.current,e.current=t}var J0={},Ma=jy(J0),Gl=jy(!1),Y1=J0;function NE(e,t){var n=e.type.contextTypes;if(!n)return J0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Yl(e){return e=e.childContextTypes,e!=null}function iM(){Ii(Gl),Ii(Ma)}function Goe(e,t,n){if(Ma.current!==J0)throw Error(at(168));gi(Ma,t),gi(Gl,n)}function kbe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(at(108,Uze(e)||"Unknown",i));return Yi({},n,r)}function sM(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||J0,Y1=Ma.current,gi(Ma,e),gi(Gl,Gl.current),!0}function Yoe(e,t,n){var r=e.stateNode;if(!r)throw Error(at(169));n?(e=kbe(e,t,Y1),r.__reactInternalMemoizedMergedChildContext=e,Ii(Gl),Ii(Ma),gi(Ma,e)):Ii(Gl),gi(Gl,n)}var Wp=null,LL=!1,r8=!1;function Rbe(e){Wp===null?Wp=[e]:Wp.push(e)}function sUe(e){LL=!0,Rbe(e)}function By(){if(!r8&&Wp!==null){r8=!0;var e=0,t=Yr;try{var n=Wp;for(Yr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Wp=null,LL=!1}catch(i){throw Wp!==null&&(Wp=Wp.slice(e+1)),tbe(rG,By),i}finally{Yr=t,r8=!1}}return null}var Cw=[],Aw=0,oM=null,aM=0,Ac=[],Ic=0,K1=null,rm=1,im="";function zv(e,t){Cw[Aw++]=aM,Cw[Aw++]=oM,oM=e,aM=t}function Pbe(e,t,n){Ac[Ic++]=rm,Ac[Ic++]=im,Ac[Ic++]=K1,K1=e;var r=rm;e=im;var i=32-tf(r)-1;r&=~(1<<i),n+=1;var s=32-tf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,rm=1<<32-tf(t)+i|n<<i|r,im=s+e}else rm=1<<s|n<<i|r,im=e}function fG(e){e.return!==null&&(zv(e,1),Pbe(e,1,0))}function hG(e){for(;e===oM;)oM=Cw[--Aw],Cw[Aw]=null,aM=Cw[--Aw],Cw[Aw]=null;for(;e===K1;)K1=Ac[--Ic],Ac[Ic]=null,im=Ac[--Ic],Ac[Ic]=null,rm=Ac[--Ic],Ac[Ic]=null}var Uu=null,Du=null,Mi=!1,Fd=null;function Nbe(e,t){var n=$c(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Koe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Uu=e,Du=k0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Uu=e,Du=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=K1!==null?{id:rm,overflow:im}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=$c(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Uu=e,Du=null,!0):!1;default:return!1}}function A7(e){return(e.mode&1)!==0&&(e.flags&128)===0}function I7(e){if(Mi){var t=Du;if(t){var n=t;if(!Koe(e,t)){if(A7(e))throw Error(at(418));t=k0(n.nextSibling);var r=Uu;t&&Koe(e,t)?Nbe(r,n):(e.flags=e.flags&-4097|2,Mi=!1,Uu=e)}}else{if(A7(e))throw Error(at(418));e.flags=e.flags&-4097|2,Mi=!1,Uu=e}}}function Xoe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Uu=e}function jP(e){if(e!==Uu)return!1;if(!Mi)return Xoe(e),Mi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!x7(e.type,e.memoizedProps)),t&&(t=Du)){if(A7(e))throw Obe(),Error(at(418));for(;t;)Nbe(e,t),t=k0(t.nextSibling)}if(Xoe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(at(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Du=k0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Du=null}}else Du=Uu?k0(e.stateNode.nextSibling):null;return!0}function Obe(){for(var e=Du;e;)e=k0(e.nextSibling)}function OE(){Du=Uu=null,Mi=!1}function pG(e){Fd===null?Fd=[e]:Fd.push(e)}var oUe=eg.ReactCurrentBatchConfig;function ET(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(at(309));var r=n.stateNode}if(!r)throw Error(at(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(at(284));if(!n._owner)throw Error(at(290,e))}return e}function BP(e,t){throw e=Object.prototype.toString.call(t),Error(at(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qoe(e){var t=e._init;return t(e._payload)}function Dbe(e){function t(y,b){if(e){var _=y.deletions;_===null?(y.deletions=[b],y.flags|=16):_.push(b)}}function n(y,b){if(!e)return null;for(;b!==null;)t(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function i(y,b){return y=O0(y,b),y.index=0,y.sibling=null,y}function s(y,b,_){return y.index=_,e?(_=y.alternate,_!==null?(_=_.index,_<b?(y.flags|=2,b):_):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,b,_,w){return b===null||b.tag!==6?(b=c8(_,y.mode,w),b.return=y,b):(b=i(b,_),b.return=y,b)}function l(y,b,_,w){var E=_.type;return E===_w?c(y,b,_.props.children,w,_.key):b!==null&&(b.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vg&&Qoe(E)===b.type)?(w=i(b,_.props),w.ref=ET(y,b,_),w.return=y,w):(w=jO(_.type,_.key,_.props,null,y.mode,w),w.ref=ET(y,b,_),w.return=y,w)}function u(y,b,_,w){return b===null||b.tag!==4||b.stateNode.containerInfo!==_.containerInfo||b.stateNode.implementation!==_.implementation?(b=d8(_,y.mode,w),b.return=y,b):(b=i(b,_.children||[]),b.return=y,b)}function c(y,b,_,w,E){return b===null||b.tag!==7?(b=P1(_,y.mode,w,E),b.return=y,b):(b=i(b,_),b.return=y,b)}function d(y,b,_){if(typeof b=="string"&&b!==""||typeof b=="number")return b=c8(""+b,y.mode,_),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case kP:return _=jO(b.type,b.key,b.props,null,y.mode,_),_.ref=ET(y,null,b),_.return=y,_;case bw:return b=d8(b,y.mode,_),b.return=y,b;case Vg:var w=b._init;return d(y,w(b._payload),_)}if(EC(b)||yT(b))return b=P1(b,y.mode,_,null),b.return=y,b;BP(y,b)}return null}function f(y,b,_,w){var E=b!==null?b.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return E!==null?null:a(y,b,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case kP:return _.key===E?l(y,b,_,w):null;case bw:return _.key===E?u(y,b,_,w):null;case Vg:return E=_._init,f(y,b,E(_._payload),w)}if(EC(_)||yT(_))return E!==null?null:c(y,b,_,w,null);BP(y,_)}return null}function h(y,b,_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(_)||null,a(b,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case kP:return y=y.get(w.key===null?_:w.key)||null,l(b,y,w,E);case bw:return y=y.get(w.key===null?_:w.key)||null,u(b,y,w,E);case Vg:var x=w._init;return h(y,b,_,x(w._payload),E)}if(EC(w)||yT(w))return y=y.get(_)||null,c(b,y,w,E,null);BP(b,w)}return null}function p(y,b,_,w){for(var E=null,x=null,S=b,C=b=0,A=null;S!==null&&C<_.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var R=f(y,S,_[C],w);if(R===null){S===null&&(S=A);break}e&&S&&R.alternate===null&&t(y,S),b=s(R,b,C),x===null?E=R:x.sibling=R,x=R,S=A}if(C===_.length)return n(y,S),Mi&&zv(y,C),E;if(S===null){for(;C<_.length;C++)S=d(y,_[C],w),S!==null&&(b=s(S,b,C),x===null?E=S:x.sibling=S,x=S);return Mi&&zv(y,C),E}for(S=r(y,S);C<_.length;C++)A=h(S,y,C,_[C],w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),b=s(A,b,C),x===null?E=A:x.sibling=A,x=A);return e&&S.forEach(function(P){return t(y,P)}),Mi&&zv(y,C),E}function m(y,b,_,w){var E=yT(_);if(typeof E!="function")throw Error(at(150));if(_=E.call(_),_==null)throw Error(at(151));for(var x=E=null,S=b,C=b=0,A=null,R=_.next();S!==null&&!R.done;C++,R=_.next()){S.index>C?(A=S,S=null):A=S.sibling;var P=f(y,S,R.value,w);if(P===null){S===null&&(S=A);break}e&&S&&P.alternate===null&&t(y,S),b=s(P,b,C),x===null?E=P:x.sibling=P,x=P,S=A}if(R.done)return n(y,S),Mi&&zv(y,C),E;if(S===null){for(;!R.done;C++,R=_.next())R=d(y,R.value,w),R!==null&&(b=s(R,b,C),x===null?E=R:x.sibling=R,x=R);return Mi&&zv(y,C),E}for(S=r(y,S);!R.done;C++,R=_.next())R=h(S,y,C,R.value,w),R!==null&&(e&&R.alternate!==null&&S.delete(R.key===null?C:R.key),b=s(R,b,C),x===null?E=R:x.sibling=R,x=R);return e&&S.forEach(function(L){return t(y,L)}),Mi&&zv(y,C),E}function g(y,b,_,w){if(typeof _=="object"&&_!==null&&_.type===_w&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case kP:e:{for(var E=_.key,x=b;x!==null;){if(x.key===E){if(E=_.type,E===_w){if(x.tag===7){n(y,x.sibling),b=i(x,_.props.children),b.return=y,y=b;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Vg&&Qoe(E)===x.type){n(y,x.sibling),b=i(x,_.props),b.ref=ET(y,x,_),b.return=y,y=b;break e}n(y,x);break}else t(y,x);x=x.sibling}_.type===_w?(b=P1(_.props.children,y.mode,w,_.key),b.return=y,y=b):(w=jO(_.type,_.key,_.props,null,y.mode,w),w.ref=ET(y,b,_),w.return=y,y=w)}return o(y);case bw:e:{for(x=_.key;b!==null;){if(b.key===x)if(b.tag===4&&b.stateNode.containerInfo===_.containerInfo&&b.stateNode.implementation===_.implementation){n(y,b.sibling),b=i(b,_.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else t(y,b);b=b.sibling}b=d8(_,y.mode,w),b.return=y,y=b}return o(y);case Vg:return x=_._init,g(y,b,x(_._payload),w)}if(EC(_))return p(y,b,_,w);if(yT(_))return m(y,b,_,w);BP(y,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,b!==null&&b.tag===6?(n(y,b.sibling),b=i(b,_),b.return=y,y=b):(n(y,b),b=c8(_,y.mode,w),b.return=y,y=b),o(y)):n(y,b)}return g}var DE=Dbe(!0),Mbe=Dbe(!1),lM=jy(null),uM=null,Iw=null,mG=null;function gG(){mG=Iw=uM=null}function yG(e){var t=lM.current;Ii(lM),e._currentValue=t}function k7(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xw(e,t){uM=e,mG=Iw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ul=!0),e.firstContext=null)}function Gc(e){var t=e._currentValue;if(mG!==e)if(e={context:e,memoizedValue:t,next:null},Iw===null){if(uM===null)throw Error(at(308));Iw=e,uM.dependencies={lanes:0,firstContext:e}}else Iw=Iw.next=e;return t}var m1=null;function vG(e){m1===null?m1=[e]:m1.push(e)}function $be(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,vG(t)):(n.next=i.next,i.next=n),t.interleaved=n,Pm(e,r)}function Pm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Hg=!1;function bG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lbe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function pm(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function R0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Er&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Pm(e,n)}return i=r.interleaved,i===null?(t.next=t,vG(r)):(t.next=i.next,i.next=t),r.interleaved=t,Pm(e,n)}function OO(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iG(e,n)}}function Joe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function cM(e,t,n,r){var i=e.updateQueue;Hg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(f=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Yi({},d,f);break e;case 2:Hg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=h,l=d):c=c.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Q1|=o,e.lanes=o,e.memoizedState=d}}function Zoe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(at(191,i));i.call(r)}}}var vk={},kh=jy(vk),NA=jy(vk),OA=jy(vk);function g1(e){if(e===vk)throw Error(at(174));return e}function _G(e,t){switch(gi(OA,t),gi(NA,e),gi(kh,vk),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:u7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=u7(t,e)}Ii(kh),gi(kh,t)}function ME(){Ii(kh),Ii(NA),Ii(OA)}function Fbe(e){g1(OA.current);var t=g1(kh.current),n=u7(t,e.type);t!==n&&(gi(NA,e),gi(kh,n))}function wG(e){NA.current===e&&(Ii(kh),Ii(NA))}var Hi=jy(0);function dM(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var i8=[];function EG(){for(var e=0;e<i8.length;e++)i8[e]._workInProgressVersionPrimary=null;i8.length=0}var DO=eg.ReactCurrentDispatcher,s8=eg.ReactCurrentBatchConfig,X1=0,Wi=null,Us=null,ho=null,fM=!1,T2=!1,DA=0,aUe=0;function ua(){throw Error(at(321))}function xG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!gf(e[n],t[n]))return!1;return!0}function SG(e,t,n,r,i,s){if(X1=s,Wi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,DO.current=e===null||e.memoizedState===null?dUe:fUe,e=n(r,i),T2){s=0;do{if(T2=!1,DA=0,25<=s)throw Error(at(301));s+=1,ho=Us=null,t.updateQueue=null,DO.current=hUe,e=n(r,i)}while(T2)}if(DO.current=hM,t=Us!==null&&Us.next!==null,X1=0,ho=Us=Wi=null,fM=!1,t)throw Error(at(300));return e}function TG(){var e=DA!==0;return DA=0,e}function eh(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ho===null?Wi.memoizedState=ho=e:ho=ho.next=e,ho}function Yc(){if(Us===null){var e=Wi.alternate;e=e!==null?e.memoizedState:null}else e=Us.next;var t=ho===null?Wi.memoizedState:ho.next;if(t!==null)ho=t,Us=e;else{if(e===null)throw Error(at(310));Us=e,e={memoizedState:Us.memoizedState,baseState:Us.baseState,baseQueue:Us.baseQueue,queue:Us.queue,next:null},ho===null?Wi.memoizedState=ho=e:ho=ho.next=e}return ho}function MA(e,t){return typeof t=="function"?t(e):t}function o8(e){var t=Yc(),n=t.queue;if(n===null)throw Error(at(311));n.lastRenderedReducer=e;var r=Us,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((X1&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Wi.lanes|=c,Q1|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,gf(r,t.memoizedState)||(Ul=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Wi.lanes|=s,Q1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function a8(e){var t=Yc(),n=t.queue;if(n===null)throw Error(at(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);gf(s,t.memoizedState)||(Ul=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function jbe(){}function Bbe(e,t){var n=Wi,r=Yc(),i=t(),s=!gf(r.memoizedState,i);if(s&&(r.memoizedState=i,Ul=!0),r=r.queue,CG(Vbe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ho!==null&&ho.memoizedState.tag&1){if(n.flags|=2048,$A(9,Ube.bind(null,n,r,i,t),void 0,null),Eo===null)throw Error(at(349));X1&30||zbe(n,t,i)}return i}function zbe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Wi.updateQueue,t===null?(t={lastEffect:null,stores:null},Wi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ube(e,t,n,r){t.value=n,t.getSnapshot=r,Hbe(t)&&qbe(e)}function Vbe(e,t,n){return n(function(){Hbe(t)&&qbe(e)})}function Hbe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!gf(e,n)}catch{return!0}}function qbe(e){var t=Pm(e,1);t!==null&&nf(t,e,1,-1)}function eae(e){var t=eh();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:MA,lastRenderedState:e},t.queue=e,e=e.dispatch=cUe.bind(null,Wi,e),[t.memoizedState,e]}function $A(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Wi.updateQueue,t===null?(t={lastEffect:null,stores:null},Wi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Wbe(){return Yc().memoizedState}function MO(e,t,n,r){var i=eh();Wi.flags|=e,i.memoizedState=$A(1|t,n,void 0,r===void 0?null:r)}function FL(e,t,n,r){var i=Yc();r=r===void 0?null:r;var s=void 0;if(Us!==null){var o=Us.memoizedState;if(s=o.destroy,r!==null&&xG(r,o.deps)){i.memoizedState=$A(t,n,s,r);return}}Wi.flags|=e,i.memoizedState=$A(1|t,n,s,r)}function tae(e,t){return MO(8390656,8,e,t)}function CG(e,t){return FL(2048,8,e,t)}function Gbe(e,t){return FL(4,2,e,t)}function Ybe(e,t){return FL(4,4,e,t)}function Kbe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Xbe(e,t,n){return n=n!=null?n.concat([e]):null,FL(4,4,Kbe.bind(null,t,e),n)}function AG(){}function Qbe(e,t){var n=Yc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jbe(e,t){var n=Yc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&xG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zbe(e,t,n){return X1&21?(gf(n,t)||(n=ibe(),Wi.lanes|=n,Q1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ul=!0),e.memoizedState=n)}function lUe(e,t){var n=Yr;Yr=n!==0&&4>n?n:4,e(!0);var r=s8.transition;s8.transition={};try{e(!1),t()}finally{Yr=n,s8.transition=r}}function e_e(){return Yc().memoizedState}function uUe(e,t,n){var r=N0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},t_e(e))n_e(t,n);else if(n=$be(e,t,n,r),n!==null){var i=ol();nf(n,e,r,i),r_e(n,t,r)}}function cUe(e,t,n){var r=N0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(t_e(e))n_e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,gf(a,o)){var l=t.interleaved;l===null?(i.next=i,vG(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=$be(e,t,i,r),n!==null&&(i=ol(),nf(n,e,r,i),r_e(n,t,r))}}function t_e(e){var t=e.alternate;return e===Wi||t!==null&&t===Wi}function n_e(e,t){T2=fM=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function r_e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iG(e,n)}}var hM={readContext:Gc,useCallback:ua,useContext:ua,useEffect:ua,useImperativeHandle:ua,useInsertionEffect:ua,useLayoutEffect:ua,useMemo:ua,useReducer:ua,useRef:ua,useState:ua,useDebugValue:ua,useDeferredValue:ua,useTransition:ua,useMutableSource:ua,useSyncExternalStore:ua,useId:ua,unstable_isNewReconciler:!1},dUe={readContext:Gc,useCallback:function(e,t){return eh().memoizedState=[e,t===void 0?null:t],e},useContext:Gc,useEffect:tae,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,MO(4194308,4,Kbe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return MO(4194308,4,e,t)},useInsertionEffect:function(e,t){return MO(4,2,e,t)},useMemo:function(e,t){var n=eh();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=eh();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=uUe.bind(null,Wi,e),[r.memoizedState,e]},useRef:function(e){var t=eh();return e={current:e},t.memoizedState=e},useState:eae,useDebugValue:AG,useDeferredValue:function(e){return eh().memoizedState=e},useTransition:function(){var e=eae(!1),t=e[0];return e=lUe.bind(null,e[1]),eh().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Wi,i=eh();if(Mi){if(n===void 0)throw Error(at(407));n=n()}else{if(n=t(),Eo===null)throw Error(at(349));X1&30||zbe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,tae(Vbe.bind(null,r,s,e),[e]),r.flags|=2048,$A(9,Ube.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=eh(),t=Eo.identifierPrefix;if(Mi){var n=im,r=rm;n=(r&~(1<<32-tf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=DA++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=aUe++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},fUe={readContext:Gc,useCallback:Qbe,useContext:Gc,useEffect:CG,useImperativeHandle:Xbe,useInsertionEffect:Gbe,useLayoutEffect:Ybe,useMemo:Jbe,useReducer:o8,useRef:Wbe,useState:function(){return o8(MA)},useDebugValue:AG,useDeferredValue:function(e){var t=Yc();return Zbe(t,Us.memoizedState,e)},useTransition:function(){var e=o8(MA)[0],t=Yc().memoizedState;return[e,t]},useMutableSource:jbe,useSyncExternalStore:Bbe,useId:e_e,unstable_isNewReconciler:!1},hUe={readContext:Gc,useCallback:Qbe,useContext:Gc,useEffect:CG,useImperativeHandle:Xbe,useInsertionEffect:Gbe,useLayoutEffect:Ybe,useMemo:Jbe,useReducer:a8,useRef:Wbe,useState:function(){return a8(MA)},useDebugValue:AG,useDeferredValue:function(e){var t=Yc();return Us===null?t.memoizedState=e:Zbe(t,Us.memoizedState,e)},useTransition:function(){var e=a8(MA)[0],t=Yc().memoizedState;return[e,t]},useMutableSource:jbe,useSyncExternalStore:Bbe,useId:e_e,unstable_isNewReconciler:!1};function Nd(e,t){if(e&&e.defaultProps){t=Yi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function R7(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Yi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var jL={isMounted:function(e){return(e=e._reactInternals)?Fb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ol(),i=N0(e),s=pm(r,i);s.payload=t,n!=null&&(s.callback=n),t=R0(e,s,i),t!==null&&(nf(t,e,i,r),OO(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ol(),i=N0(e),s=pm(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=R0(e,s,i),t!==null&&(nf(t,e,i,r),OO(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ol(),r=N0(e),i=pm(n,r);i.tag=2,t!=null&&(i.callback=t),t=R0(e,i,r),t!==null&&(nf(t,e,r,n),OO(t,e,r))}};function nae(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!IA(n,r)||!IA(i,s):!0}function i_e(e,t,n){var r=!1,i=J0,s=t.contextType;return typeof s=="object"&&s!==null?s=Gc(s):(i=Yl(t)?Y1:Ma.current,r=t.contextTypes,s=(r=r!=null)?NE(e,i):J0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=jL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function rae(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&jL.enqueueReplaceState(t,t.state,null)}function P7(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},bG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Gc(s):(s=Yl(t)?Y1:Ma.current,i.context=NE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(R7(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&jL.enqueueReplaceState(i,i.state,null),cM(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function $E(e,t){try{var n="",r=t;do n+=zze(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function l8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function N7(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pUe=typeof WeakMap=="function"?WeakMap:Map;function s_e(e,t,n){n=pm(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){mM||(mM=!0,U7=r),N7(e,t)},n}function o_e(e,t,n){n=pm(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){N7(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){N7(e,t),typeof r!="function"&&(P0===null?P0=new Set([this]):P0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function iae(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new pUe;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=IUe.bind(null,e,t,n),t.then(e,e))}function sae(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function oae(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=pm(-1,1),t.tag=2,R0(n,t,1))),n.lanes|=1),e)}var mUe=eg.ReactCurrentOwner,Ul=!1;function Ka(e,t,n,r){t.child=e===null?Mbe(t,null,n,r):DE(t,e.child,n,r)}function aae(e,t,n,r,i){n=n.render;var s=t.ref;return Xw(t,i),r=SG(e,t,n,r,s,i),n=TG(),e!==null&&!Ul?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nm(e,t,i)):(Mi&&n&&fG(t),t.flags|=1,Ka(e,t,r,i),t.child)}function lae(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!MG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,a_e(e,t,s,r,i)):(e=jO(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:IA,n(o,r)&&e.ref===t.ref)return Nm(e,t,i)}return t.flags|=1,e=O0(s,r),e.ref=t.ref,e.return=t,t.child=e}function a_e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(IA(s,r)&&e.ref===t.ref)if(Ul=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ul=!0);else return t.lanes=e.lanes,Nm(e,t,i)}return O7(e,t,n,r,i)}function l_e(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},gi(Rw,Cu),Cu|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,gi(Rw,Cu),Cu|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,gi(Rw,Cu),Cu|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,gi(Rw,Cu),Cu|=r;return Ka(e,t,i,n),t.child}function u_e(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function O7(e,t,n,r,i){var s=Yl(n)?Y1:Ma.current;return s=NE(t,s),Xw(t,i),n=SG(e,t,n,r,s,i),r=TG(),e!==null&&!Ul?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Nm(e,t,i)):(Mi&&r&&fG(t),t.flags|=1,Ka(e,t,n,i),t.child)}function uae(e,t,n,r,i){if(Yl(n)){var s=!0;sM(t)}else s=!1;if(Xw(t,i),t.stateNode===null)$O(e,t),i_e(t,n,r),P7(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Gc(u):(u=Yl(n)?Y1:Ma.current,u=NE(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&rae(t,o,r,u),Hg=!1;var f=t.memoizedState;o.state=f,cM(t,r,o,i),l=t.memoizedState,a!==r||f!==l||Gl.current||Hg?(typeof c=="function"&&(R7(t,n,c,r),l=t.memoizedState),(a=Hg||nae(t,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Lbe(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Nd(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Gc(l):(l=Yl(n)?Y1:Ma.current,l=NE(t,l));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&rae(t,o,r,l),Hg=!1,f=t.memoizedState,o.state=f,cM(t,r,o,i);var p=t.memoizedState;a!==d||f!==p||Gl.current||Hg?(typeof h=="function"&&(R7(t,n,h,r),p=t.memoizedState),(u=Hg||nae(t,n,u,r,f,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return D7(e,t,n,r,s,i)}function D7(e,t,n,r,i,s){u_e(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Yoe(t,n,!1),Nm(e,t,s);r=t.stateNode,mUe.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=DE(t,e.child,null,s),t.child=DE(t,null,a,s)):Ka(e,t,a,s),t.memoizedState=r.state,i&&Yoe(t,n,!0),t.child}function c_e(e){var t=e.stateNode;t.pendingContext?Goe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Goe(e,t.context,!1),_G(e,t.containerInfo)}function cae(e,t,n,r,i){return OE(),pG(i),t.flags|=256,Ka(e,t,n,r),t.child}var M7={dehydrated:null,treeContext:null,retryLane:0};function $7(e){return{baseLanes:e,cachePool:null,transitions:null}}function d_e(e,t,n){var r=t.pendingProps,i=Hi.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),gi(Hi,i&1),e===null)return I7(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=UL(o,r,0,null),e=P1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=$7(n),t.memoizedState=M7,e):IG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return gUe(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=O0(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=O0(a,s):(s=P1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?$7(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=M7,r}return s=e.child,e=s.sibling,r=O0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function IG(e,t){return t=UL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function zP(e,t,n,r){return r!==null&&pG(r),DE(t,e.child,null,n),e=IG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function gUe(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=l8(Error(at(422))),zP(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=UL({mode:"visible",children:r.children},i,0,null),s=P1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&DE(t,e.child,null,o),t.child.memoizedState=$7(o),t.memoizedState=M7,s);if(!(t.mode&1))return zP(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(at(419)),r=l8(s,r,void 0),zP(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ul||a){if(r=Eo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Pm(e,i),nf(r,e,i,-1))}return DG(),r=l8(Error(at(421))),zP(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=kUe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Du=k0(i.nextSibling),Uu=t,Mi=!0,Fd=null,e!==null&&(Ac[Ic++]=rm,Ac[Ic++]=im,Ac[Ic++]=K1,rm=e.id,im=e.overflow,K1=t),t=IG(t,r.children),t.flags|=4096,t)}function dae(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),k7(e.return,t,n)}function u8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function f_e(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ka(e,t,r.children,n),r=Hi.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&dae(e,n,t);else if(e.tag===19)dae(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(gi(Hi,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&dM(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),u8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&dM(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}u8(t,!0,n,null,s);break;case"together":u8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $O(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Nm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Q1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(at(153));if(t.child!==null){for(e=t.child,n=O0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=O0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yUe(e,t,n){switch(t.tag){case 3:c_e(t),OE();break;case 5:Fbe(t);break;case 1:Yl(t.type)&&sM(t);break;case 4:_G(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;gi(lM,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(gi(Hi,Hi.current&1),t.flags|=128,null):n&t.child.childLanes?d_e(e,t,n):(gi(Hi,Hi.current&1),e=Nm(e,t,n),e!==null?e.sibling:null);gi(Hi,Hi.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return f_e(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),gi(Hi,Hi.current),r)break;return null;case 22:case 23:return t.lanes=0,l_e(e,t,n)}return Nm(e,t,n)}var h_e,L7,p_e,m_e;h_e=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};L7=function(){};p_e=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,g1(kh.current);var s=null;switch(n){case"input":i=s7(e,i),r=s7(e,r),s=[];break;case"select":i=Yi({},i,{value:void 0}),r=Yi({},r,{value:void 0}),s=[];break;case"textarea":i=l7(e,i),r=l7(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=rM)}c7(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(wA.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(wA.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&wi("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};m_e=function(e,t,n,r){n!==r&&(t.flags|=4)};function xT(e,t){if(!Mi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ca(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vUe(e,t,n){var r=t.pendingProps;switch(hG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ca(t),null;case 1:return Yl(t.type)&&iM(),ca(t),null;case 3:return r=t.stateNode,ME(),Ii(Gl),Ii(Ma),EG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(jP(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Fd!==null&&(q7(Fd),Fd=null))),L7(e,t),ca(t),null;case 5:wG(t);var i=g1(OA.current);if(n=t.type,e!==null&&t.stateNode!=null)p_e(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(at(166));return ca(t),null}if(e=g1(kh.current),jP(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ch]=t,r[PA]=s,e=(t.mode&1)!==0,n){case"dialog":wi("cancel",r),wi("close",r);break;case"iframe":case"object":case"embed":wi("load",r);break;case"video":case"audio":for(i=0;i<SC.length;i++)wi(SC[i],r);break;case"source":wi("error",r);break;case"img":case"image":case"link":wi("error",r),wi("load",r);break;case"details":wi("toggle",r);break;case"input":_oe(r,s),wi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},wi("invalid",r);break;case"textarea":Eoe(r,s),wi("invalid",r)}c7(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&FP(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&FP(r.textContent,a,e),i=["children",""+a]):wA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&wi("scroll",r)}switch(n){case"input":RP(r),woe(r,s,!0);break;case"textarea":RP(r),xoe(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=rM)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=V1e(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ch]=t,e[PA]=r,h_e(e,t,!1,!1),t.stateNode=e;e:{switch(o=d7(n,r),n){case"dialog":wi("cancel",e),wi("close",e),i=r;break;case"iframe":case"object":case"embed":wi("load",e),i=r;break;case"video":case"audio":for(i=0;i<SC.length;i++)wi(SC[i],e);i=r;break;case"source":wi("error",e),i=r;break;case"img":case"image":case"link":wi("error",e),wi("load",e),i=r;break;case"details":wi("toggle",e),i=r;break;case"input":_oe(e,r),i=s7(e,r),wi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Yi({},r,{value:void 0}),wi("invalid",e);break;case"textarea":Eoe(e,r),i=l7(e,r),wi("invalid",e);break;default:i=r}c7(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?W1e(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&H1e(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&EA(e,l):typeof l=="number"&&EA(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(wA.hasOwnProperty(s)?l!=null&&s==="onScroll"&&wi("scroll",e):l!=null&&JW(e,s,l,o))}switch(n){case"input":RP(e),woe(e,r,!1);break;case"textarea":RP(e),xoe(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Q0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ww(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ww(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=rM)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ca(t),null;case 6:if(e&&t.stateNode!=null)m_e(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(at(166));if(n=g1(OA.current),g1(kh.current),jP(t)){if(r=t.stateNode,n=t.memoizedProps,r[ch]=t,(s=r.nodeValue!==n)&&(e=Uu,e!==null))switch(e.tag){case 3:FP(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&FP(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ch]=t,t.stateNode=r}return ca(t),null;case 13:if(Ii(Hi),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Mi&&Du!==null&&t.mode&1&&!(t.flags&128))Obe(),OE(),t.flags|=98560,s=!1;else if(s=jP(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(at(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(at(317));s[ch]=t}else OE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ca(t),s=!1}else Fd!==null&&(q7(Fd),Fd=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Hi.current&1?Xs===0&&(Xs=3):DG())),t.updateQueue!==null&&(t.flags|=4),ca(t),null);case 4:return ME(),L7(e,t),e===null&&kA(t.stateNode.containerInfo),ca(t),null;case 10:return yG(t.type._context),ca(t),null;case 17:return Yl(t.type)&&iM(),ca(t),null;case 19:if(Ii(Hi),s=t.memoizedState,s===null)return ca(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)xT(s,!1);else{if(Xs!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=dM(e),o!==null){for(t.flags|=128,xT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return gi(Hi,Hi.current&1|2),t.child}e=e.sibling}s.tail!==null&&_s()>LE&&(t.flags|=128,r=!0,xT(s,!1),t.lanes=4194304)}else{if(!r)if(e=dM(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Mi)return ca(t),null}else 2*_s()-s.renderingStartTime>LE&&n!==1073741824&&(t.flags|=128,r=!0,xT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=_s(),t.sibling=null,n=Hi.current,gi(Hi,r?n&1|2:n&1),t):(ca(t),null);case 22:case 23:return OG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Cu&1073741824&&(ca(t),t.subtreeFlags&6&&(t.flags|=8192)):ca(t),null;case 24:return null;case 25:return null}throw Error(at(156,t.tag))}function bUe(e,t){switch(hG(t),t.tag){case 1:return Yl(t.type)&&iM(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ME(),Ii(Gl),Ii(Ma),EG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wG(t),null;case 13:if(Ii(Hi),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(at(340));OE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ii(Hi),null;case 4:return ME(),null;case 10:return yG(t.type._context),null;case 22:case 23:return OG(),null;case 24:return null;default:return null}}var UP=!1,xa=!1,_Ue=typeof WeakSet=="function"?WeakSet:Set,kt=null;function kw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){is(e,t,r)}else n.current=null}function F7(e,t,n){try{n()}catch(r){is(e,t,r)}}var fae=!1;function wUe(e,t){if(w7=eM,e=_be(),dG(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(E7={focusedElem:e,selectionRange:n},eM=!1,kt=t;kt!==null;)if(t=kt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,kt=e;else for(;kt!==null;){t=kt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:Nd(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(at(163))}}catch(w){is(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,kt=e;break}kt=t.return}return p=fae,fae=!1,p}function C2(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&F7(t,n,s)}i=i.next}while(i!==r)}}function BL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function j7(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function g_e(e){var t=e.alternate;t!==null&&(e.alternate=null,g_e(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ch],delete t[PA],delete t[T7],delete t[rUe],delete t[iUe])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function y_e(e){return e.tag===5||e.tag===3||e.tag===4}function hae(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||y_e(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function B7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=rM));else if(r!==4&&(e=e.child,e!==null))for(B7(e,t,n),e=e.sibling;e!==null;)B7(e,t,n),e=e.sibling}function z7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(z7(e,t,n),e=e.sibling;e!==null;)z7(e,t,n),e=e.sibling}var $o=null,Dd=!1;function Tg(e,t,n){for(n=n.child;n!==null;)v_e(e,t,n),n=n.sibling}function v_e(e,t,n){if(Ih&&typeof Ih.onCommitFiberUnmount=="function")try{Ih.onCommitFiberUnmount(NL,n)}catch{}switch(n.tag){case 5:xa||kw(n,t);case 6:var r=$o,i=Dd;$o=null,Tg(e,t,n),$o=r,Dd=i,$o!==null&&(Dd?(e=$o,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):$o.removeChild(n.stateNode));break;case 18:$o!==null&&(Dd?(e=$o,n=n.stateNode,e.nodeType===8?n8(e.parentNode,n):e.nodeType===1&&n8(e,n),CA(e)):n8($o,n.stateNode));break;case 4:r=$o,i=Dd,$o=n.stateNode.containerInfo,Dd=!0,Tg(e,t,n),$o=r,Dd=i;break;case 0:case 11:case 14:case 15:if(!xa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&F7(n,t,o),i=i.next}while(i!==r)}Tg(e,t,n);break;case 1:if(!xa&&(kw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){is(n,t,a)}Tg(e,t,n);break;case 21:Tg(e,t,n);break;case 22:n.mode&1?(xa=(r=xa)||n.memoizedState!==null,Tg(e,t,n),xa=r):Tg(e,t,n);break;default:Tg(e,t,n)}}function pae(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new _Ue),t.forEach(function(r){var i=RUe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function _d(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:$o=a.stateNode,Dd=!1;break e;case 3:$o=a.stateNode.containerInfo,Dd=!0;break e;case 4:$o=a.stateNode.containerInfo,Dd=!0;break e}a=a.return}if($o===null)throw Error(at(160));v_e(s,o,i),$o=null,Dd=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){is(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)b_e(t,e),t=t.sibling}function b_e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(_d(t,e),Gf(e),r&4){try{C2(3,e,e.return),BL(3,e)}catch(m){is(e,e.return,m)}try{C2(5,e,e.return)}catch(m){is(e,e.return,m)}}break;case 1:_d(t,e),Gf(e),r&512&&n!==null&&kw(n,n.return);break;case 5:if(_d(t,e),Gf(e),r&512&&n!==null&&kw(n,n.return),e.flags&32){var i=e.stateNode;try{EA(i,"")}catch(m){is(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&z1e(i,s),d7(a,o);var u=d7(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?W1e(i,d):c==="dangerouslySetInnerHTML"?H1e(i,d):c==="children"?EA(i,d):JW(i,c,d,u)}switch(a){case"input":o7(i,s);break;case"textarea":U1e(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ww(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ww(i,!!s.multiple,s.defaultValue,!0):Ww(i,!!s.multiple,s.multiple?[]:"",!1))}i[PA]=s}catch(m){is(e,e.return,m)}}break;case 6:if(_d(t,e),Gf(e),r&4){if(e.stateNode===null)throw Error(at(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){is(e,e.return,m)}}break;case 3:if(_d(t,e),Gf(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{CA(t.containerInfo)}catch(m){is(e,e.return,m)}break;case 4:_d(t,e),Gf(e);break;case 13:_d(t,e),Gf(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(PG=_s())),r&4&&pae(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(xa=(u=xa)||c,_d(t,e),xa=u):_d(t,e),Gf(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(kt=e,c=e.child;c!==null;){for(d=kt=c;kt!==null;){switch(f=kt,h=f.child,f.tag){case 0:case 11:case 14:case 15:C2(4,f,f.return);break;case 1:kw(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){is(r,n,m)}}break;case 5:kw(f,f.return);break;case 22:if(f.memoizedState!==null){gae(d);continue}}h!==null?(h.return=f,kt=h):gae(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=q1e("display",o))}catch(m){is(e,e.return,m)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){is(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:_d(t,e),Gf(e),r&4&&pae(e);break;case 21:break;default:_d(t,e),Gf(e)}}function Gf(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(y_e(n)){var r=n;break e}n=n.return}throw Error(at(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(EA(i,""),r.flags&=-33);var s=hae(e);z7(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=hae(e);B7(e,a,o);break;default:throw Error(at(161))}}catch(l){is(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function EUe(e,t,n){kt=e,__e(e)}function __e(e,t,n){for(var r=(e.mode&1)!==0;kt!==null;){var i=kt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||UP;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||xa;a=UP;var u=xa;if(UP=o,(xa=l)&&!u)for(kt=i;kt!==null;)o=kt,l=o.child,o.tag===22&&o.memoizedState!==null?yae(i):l!==null?(l.return=o,kt=l):yae(i);for(;s!==null;)kt=s,__e(s),s=s.sibling;kt=i,UP=a,xa=u}mae(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,kt=s):mae(e)}}function mae(e){for(;kt!==null;){var t=kt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:xa||BL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!xa)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Nd(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Zoe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Zoe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&CA(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(at(163))}xa||t.flags&512&&j7(t)}catch(f){is(t,t.return,f)}}if(t===e){kt=null;break}if(n=t.sibling,n!==null){n.return=t.return,kt=n;break}kt=t.return}}function gae(e){for(;kt!==null;){var t=kt;if(t===e){kt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,kt=n;break}kt=t.return}}function yae(e){for(;kt!==null;){var t=kt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{BL(4,t)}catch(l){is(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){is(t,i,l)}}var s=t.return;try{j7(t)}catch(l){is(t,s,l)}break;case 5:var o=t.return;try{j7(t)}catch(l){is(t,o,l)}}}catch(l){is(t,t.return,l)}if(t===e){kt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,kt=a;break}kt=t.return}}var xUe=Math.ceil,pM=eg.ReactCurrentDispatcher,kG=eg.ReactCurrentOwner,Vc=eg.ReactCurrentBatchConfig,Er=0,Eo=null,Ms=null,Wo=0,Cu=0,Rw=jy(0),Xs=0,LA=null,Q1=0,zL=0,RG=0,A2=null,$l=null,PG=0,LE=1/0,Up=null,mM=!1,U7=null,P0=null,VP=!1,c0=null,gM=0,I2=0,V7=null,LO=-1,FO=0;function ol(){return Er&6?_s():LO!==-1?LO:LO=_s()}function N0(e){return e.mode&1?Er&2&&Wo!==0?Wo&-Wo:oUe.transition!==null?(FO===0&&(FO=ibe()),FO):(e=Yr,e!==0||(e=window.event,e=e===void 0?16:dbe(e.type)),e):1}function nf(e,t,n,r){if(50<I2)throw I2=0,V7=null,Error(at(185));mk(e,n,r),(!(Er&2)||e!==Eo)&&(e===Eo&&(!(Er&2)&&(zL|=n),Xs===4&&Zg(e,Wo)),Kl(e,r),n===1&&Er===0&&!(t.mode&1)&&(LE=_s()+500,LL&&By()))}function Kl(e,t){var n=e.callbackNode;o7e(e,t);var r=ZD(e,e===Eo?Wo:0);if(r===0)n!==null&&Coe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Coe(n),t===1)e.tag===0?sUe(vae.bind(null,e)):Rbe(vae.bind(null,e)),tUe(function(){!(Er&6)&&By()}),n=null;else{switch(sbe(r)){case 1:n=rG;break;case 4:n=nbe;break;case 16:n=JD;break;case 536870912:n=rbe;break;default:n=JD}n=I_e(n,w_e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function w_e(e,t){if(LO=-1,FO=0,Er&6)throw Error(at(327));var n=e.callbackNode;if(Qw()&&e.callbackNode!==n)return null;var r=ZD(e,e===Eo?Wo:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=yM(e,r);else{t=r;var i=Er;Er|=2;var s=x_e();(Eo!==e||Wo!==t)&&(Up=null,LE=_s()+500,R1(e,t));do try{CUe();break}catch(a){E_e(e,a)}while(!0);gG(),pM.current=s,Er=i,Ms!==null?t=0:(Eo=null,Wo=0,t=Xs)}if(t!==0){if(t===2&&(i=g7(e),i!==0&&(r=i,t=H7(e,i))),t===1)throw n=LA,R1(e,0),Zg(e,r),Kl(e,_s()),n;if(t===6)Zg(e,r);else{if(i=e.current.alternate,!(r&30)&&!SUe(i)&&(t=yM(e,r),t===2&&(s=g7(e),s!==0&&(r=s,t=H7(e,s))),t===1))throw n=LA,R1(e,0),Zg(e,r),Kl(e,_s()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(at(345));case 2:Uv(e,$l,Up);break;case 3:if(Zg(e,r),(r&130023424)===r&&(t=PG+500-_s(),10<t)){if(ZD(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ol(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=S7(Uv.bind(null,e,$l,Up),t);break}Uv(e,$l,Up);break;case 4:if(Zg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-tf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=_s()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*xUe(r/1960))-r,10<r){e.timeoutHandle=S7(Uv.bind(null,e,$l,Up),r);break}Uv(e,$l,Up);break;case 5:Uv(e,$l,Up);break;default:throw Error(at(329))}}}return Kl(e,_s()),e.callbackNode===n?w_e.bind(null,e):null}function H7(e,t){var n=A2;return e.current.memoizedState.isDehydrated&&(R1(e,t).flags|=256),e=yM(e,t),e!==2&&(t=$l,$l=n,t!==null&&q7(t)),e}function q7(e){$l===null?$l=e:$l.push.apply($l,e)}function SUe(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!gf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zg(e,t){for(t&=~RG,t&=~zL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tf(t),r=1<<n;e[n]=-1,t&=~r}}function vae(e){if(Er&6)throw Error(at(327));Qw();var t=ZD(e,0);if(!(t&1))return Kl(e,_s()),null;var n=yM(e,t);if(e.tag!==0&&n===2){var r=g7(e);r!==0&&(t=r,n=H7(e,r))}if(n===1)throw n=LA,R1(e,0),Zg(e,t),Kl(e,_s()),n;if(n===6)throw Error(at(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Uv(e,$l,Up),Kl(e,_s()),null}function NG(e,t){var n=Er;Er|=1;try{return e(t)}finally{Er=n,Er===0&&(LE=_s()+500,LL&&By())}}function J1(e){c0!==null&&c0.tag===0&&!(Er&6)&&Qw();var t=Er;Er|=1;var n=Vc.transition,r=Yr;try{if(Vc.transition=null,Yr=1,e)return e()}finally{Yr=r,Vc.transition=n,Er=t,!(Er&6)&&By()}}function OG(){Cu=Rw.current,Ii(Rw)}function R1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,eUe(n)),Ms!==null)for(n=Ms.return;n!==null;){var r=n;switch(hG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&iM();break;case 3:ME(),Ii(Gl),Ii(Ma),EG();break;case 5:wG(r);break;case 4:ME();break;case 13:Ii(Hi);break;case 19:Ii(Hi);break;case 10:yG(r.type._context);break;case 22:case 23:OG()}n=n.return}if(Eo=e,Ms=e=O0(e.current,null),Wo=Cu=t,Xs=0,LA=null,RG=zL=Q1=0,$l=A2=null,m1!==null){for(t=0;t<m1.length;t++)if(n=m1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}m1=null}return e}function E_e(e,t){do{var n=Ms;try{if(gG(),DO.current=hM,fM){for(var r=Wi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fM=!1}if(X1=0,ho=Us=Wi=null,T2=!1,DA=0,kG.current=null,n===null||n.return===null){Xs=1,LA=t,Ms=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=Wo,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=sae(o);if(h!==null){h.flags&=-257,oae(h,o,a,s,t),h.mode&1&&iae(s,u,t),t=h,l=u;var p=t.updateQueue;if(p===null){var m=new Set;m.add(l),t.updateQueue=m}else p.add(l);break e}else{if(!(t&1)){iae(s,u,t),DG();break e}l=Error(at(426))}}else if(Mi&&a.mode&1){var g=sae(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),oae(g,o,a,s,t),pG($E(l,a));break e}}s=l=$E(l,a),Xs!==4&&(Xs=2),A2===null?A2=[s]:A2.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=s_e(s,l,t);Joe(s,y);break e;case 1:a=l;var b=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof b.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(P0===null||!P0.has(_)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=o_e(s,a,t);Joe(s,w);break e}}s=s.return}while(s!==null)}T_e(n)}catch(E){t=E,Ms===n&&n!==null&&(Ms=n=n.return);continue}break}while(!0)}function x_e(){var e=pM.current;return pM.current=hM,e===null?hM:e}function DG(){(Xs===0||Xs===3||Xs===2)&&(Xs=4),Eo===null||!(Q1&268435455)&&!(zL&268435455)||Zg(Eo,Wo)}function yM(e,t){var n=Er;Er|=2;var r=x_e();(Eo!==e||Wo!==t)&&(Up=null,R1(e,t));do try{TUe();break}catch(i){E_e(e,i)}while(!0);if(gG(),Er=n,pM.current=r,Ms!==null)throw Error(at(261));return Eo=null,Wo=0,Xs}function TUe(){for(;Ms!==null;)S_e(Ms)}function CUe(){for(;Ms!==null&&!Qze();)S_e(Ms)}function S_e(e){var t=A_e(e.alternate,e,Cu);e.memoizedProps=e.pendingProps,t===null?T_e(e):Ms=t,kG.current=null}function T_e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=bUe(n,t),n!==null){n.flags&=32767,Ms=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Xs=6,Ms=null;return}}else if(n=vUe(n,t,Cu),n!==null){Ms=n;return}if(t=t.sibling,t!==null){Ms=t;return}Ms=t=e}while(t!==null);Xs===0&&(Xs=5)}function Uv(e,t,n){var r=Yr,i=Vc.transition;try{Vc.transition=null,Yr=1,AUe(e,t,n,r)}finally{Vc.transition=i,Yr=r}return null}function AUe(e,t,n,r){do Qw();while(c0!==null);if(Er&6)throw Error(at(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(at(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(a7e(e,s),e===Eo&&(Ms=Eo=null,Wo=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||VP||(VP=!0,I_e(JD,function(){return Qw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Vc.transition,Vc.transition=null;var o=Yr;Yr=1;var a=Er;Er|=4,kG.current=null,wUe(e,n),b_e(n,e),G7e(E7),eM=!!w7,E7=w7=null,e.current=n,EUe(n),Jze(),Er=a,Yr=o,Vc.transition=s}else e.current=n;if(VP&&(VP=!1,c0=e,gM=i),s=e.pendingLanes,s===0&&(P0=null),t7e(n.stateNode),Kl(e,_s()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mM)throw mM=!1,e=U7,U7=null,e;return gM&1&&e.tag!==0&&Qw(),s=e.pendingLanes,s&1?e===V7?I2++:(I2=0,V7=e):I2=0,By(),null}function Qw(){if(c0!==null){var e=sbe(gM),t=Vc.transition,n=Yr;try{if(Vc.transition=null,Yr=16>e?16:e,c0===null)var r=!1;else{if(e=c0,c0=null,gM=0,Er&6)throw Error(at(331));var i=Er;for(Er|=4,kt=e.current;kt!==null;){var s=kt,o=s.child;if(kt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(kt=u;kt!==null;){var c=kt;switch(c.tag){case 0:case 11:case 15:C2(8,c,s)}var d=c.child;if(d!==null)d.return=c,kt=d;else for(;kt!==null;){c=kt;var f=c.sibling,h=c.return;if(g_e(c),c===u){kt=null;break}if(f!==null){f.return=h,kt=f;break}kt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}kt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,kt=o;else e:for(;kt!==null;){if(s=kt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:C2(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,kt=y;break e}kt=s.return}}var b=e.current;for(kt=b;kt!==null;){o=kt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,kt=_;else e:for(o=b;kt!==null;){if(a=kt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:BL(9,a)}}catch(E){is(a,a.return,E)}if(a===o){kt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,kt=w;break e}kt=a.return}}if(Er=i,By(),Ih&&typeof Ih.onPostCommitFiberRoot=="function")try{Ih.onPostCommitFiberRoot(NL,e)}catch{}r=!0}return r}finally{Yr=n,Vc.transition=t}}return!1}function bae(e,t,n){t=$E(n,t),t=s_e(e,t,1),e=R0(e,t,1),t=ol(),e!==null&&(mk(e,1,t),Kl(e,t))}function is(e,t,n){if(e.tag===3)bae(e,e,n);else for(;t!==null;){if(t.tag===3){bae(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(P0===null||!P0.has(r))){e=$E(n,e),e=o_e(t,e,1),t=R0(t,e,1),e=ol(),t!==null&&(mk(t,1,e),Kl(t,e));break}}t=t.return}}function IUe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ol(),e.pingedLanes|=e.suspendedLanes&n,Eo===e&&(Wo&n)===n&&(Xs===4||Xs===3&&(Wo&130023424)===Wo&&500>_s()-PG?R1(e,0):RG|=n),Kl(e,t)}function C_e(e,t){t===0&&(e.mode&1?(t=OP,OP<<=1,!(OP&130023424)&&(OP=4194304)):t=1);var n=ol();e=Pm(e,t),e!==null&&(mk(e,t,n),Kl(e,n))}function kUe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),C_e(e,n)}function RUe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(at(314))}r!==null&&r.delete(t),C_e(e,n)}var A_e;A_e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Gl.current)Ul=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ul=!1,yUe(e,t,n);Ul=!!(e.flags&131072)}else Ul=!1,Mi&&t.flags&1048576&&Pbe(t,aM,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;$O(e,t),e=t.pendingProps;var i=NE(t,Ma.current);Xw(t,n),i=SG(null,t,r,e,i,n);var s=TG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yl(r)?(s=!0,sM(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,bG(t),i.updater=jL,t.stateNode=i,i._reactInternals=t,P7(t,r,e,n),t=D7(null,t,r,!0,s,n)):(t.tag=0,Mi&&s&&fG(t),Ka(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch($O(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=NUe(r),e=Nd(r,e),i){case 0:t=O7(null,t,r,e,n);break e;case 1:t=uae(null,t,r,e,n);break e;case 11:t=aae(null,t,r,e,n);break e;case 14:t=lae(null,t,r,Nd(r.type,e),n);break e}throw Error(at(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Nd(r,i),O7(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Nd(r,i),uae(e,t,r,i,n);case 3:e:{if(c_e(t),e===null)throw Error(at(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Lbe(e,t),cM(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=$E(Error(at(423)),t),t=cae(e,t,r,n,i);break e}else if(r!==i){i=$E(Error(at(424)),t),t=cae(e,t,r,n,i);break e}else for(Du=k0(t.stateNode.containerInfo.firstChild),Uu=t,Mi=!0,Fd=null,n=Mbe(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(OE(),r===i){t=Nm(e,t,n);break e}Ka(e,t,r,n)}t=t.child}return t;case 5:return Fbe(t),e===null&&I7(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,x7(r,i)?o=null:s!==null&&x7(r,s)&&(t.flags|=32),u_e(e,t),Ka(e,t,o,n),t.child;case 6:return e===null&&I7(t),null;case 13:return d_e(e,t,n);case 4:return _G(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=DE(t,null,r,n):Ka(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Nd(r,i),aae(e,t,r,i,n);case 7:return Ka(e,t,t.pendingProps,n),t.child;case 8:return Ka(e,t,t.pendingProps.children,n),t.child;case 12:return Ka(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,gi(lM,r._currentValue),r._currentValue=o,s!==null)if(gf(s.value,o)){if(s.children===i.children&&!Gl.current){t=Nm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=pm(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),k7(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(at(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),k7(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ka(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Xw(t,n),i=Gc(i),r=r(i),t.flags|=1,Ka(e,t,r,n),t.child;case 14:return r=t.type,i=Nd(r,t.pendingProps),i=Nd(r.type,i),lae(e,t,r,i,n);case 15:return a_e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Nd(r,i),$O(e,t),t.tag=1,Yl(r)?(e=!0,sM(t)):e=!1,Xw(t,n),i_e(t,r,i),P7(t,r,i,n),D7(null,t,r,!0,e,n);case 19:return f_e(e,t,n);case 22:return l_e(e,t,n)}throw Error(at(156,t.tag))};function I_e(e,t){return tbe(e,t)}function PUe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $c(e,t,n,r){return new PUe(e,t,n,r)}function MG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function NUe(e){if(typeof e=="function")return MG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eG)return 11;if(e===tG)return 14}return 2}function O0(e,t){var n=e.alternate;return n===null?(n=$c(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function jO(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")MG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case _w:return P1(n.children,i,s,t);case ZW:o=8,i|=8;break;case t7:return e=$c(12,n,t,i|2),e.elementType=t7,e.lanes=s,e;case n7:return e=$c(13,n,t,i),e.elementType=n7,e.lanes=s,e;case r7:return e=$c(19,n,t,i),e.elementType=r7,e.lanes=s,e;case F1e:return UL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case $1e:o=10;break e;case L1e:o=9;break e;case eG:o=11;break e;case tG:o=14;break e;case Vg:o=16,r=null;break e}throw Error(at(130,e==null?e:typeof e,""))}return t=$c(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function P1(e,t,n,r){return e=$c(7,e,r,t),e.lanes=n,e}function UL(e,t,n,r){return e=$c(22,e,r,t),e.elementType=F1e,e.lanes=n,e.stateNode={isHidden:!1},e}function c8(e,t,n){return e=$c(6,e,null,t),e.lanes=n,e}function d8(e,t,n){return t=$c(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function OUe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q5(0),this.expirationTimes=q5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $G(e,t,n,r,i,s,o,a,l){return e=new OUe(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=$c(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},bG(s),e}function DUe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function k_e(e){if(!e)return J0;e=e._reactInternals;e:{if(Fb(e)!==e||e.tag!==1)throw Error(at(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(at(171))}if(e.tag===1){var n=e.type;if(Yl(n))return kbe(e,n,t)}return t}function R_e(e,t,n,r,i,s,o,a,l){return e=$G(n,r,!0,e,i,s,o,a,l),e.context=k_e(null),n=e.current,r=ol(),i=N0(n),s=pm(r,i),s.callback=t??null,R0(n,s,i),e.current.lanes=i,mk(e,i,r),Kl(e,r),e}function VL(e,t,n,r){var i=t.current,s=ol(),o=N0(i);return n=k_e(n),t.context===null?t.context=n:t.pendingContext=n,t=pm(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=R0(i,t,o),e!==null&&(nf(e,i,o,s),OO(e,i,o)),o}function vM(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function _ae(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function LG(e,t){_ae(e,t),(e=e.alternate)&&_ae(e,t)}function MUe(){return null}var P_e=typeof reportError=="function"?reportError:function(e){console.error(e)};function FG(e){this._internalRoot=e}HL.prototype.render=FG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(at(409));VL(e,t,null,null)};HL.prototype.unmount=FG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;J1(function(){VL(null,e,null,null)}),t[Rm]=null}};function HL(e){this._internalRoot=e}HL.prototype.unstable_scheduleHydration=function(e){if(e){var t=lbe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Jg.length&&t!==0&&t<Jg[n].priority;n++);Jg.splice(n,0,e),n===0&&cbe(e)}};function jG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function wae(){}function $Ue(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=vM(o);s.call(u)}}var o=R_e(t,r,e,0,null,!1,!1,"",wae);return e._reactRootContainer=o,e[Rm]=o.current,kA(e.nodeType===8?e.parentNode:e),J1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=vM(l);a.call(u)}}var l=$G(e,0,!1,null,null,!1,!1,"",wae);return e._reactRootContainer=l,e[Rm]=l.current,kA(e.nodeType===8?e.parentNode:e),J1(function(){VL(t,l,n,r)}),l}function WL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=vM(o);a.call(l)}}VL(t,o,e,i)}else o=$Ue(n,t,e,i,r);return vM(o)}obe=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=xC(t.pendingLanes);n!==0&&(iG(t,n|1),Kl(t,_s()),!(Er&6)&&(LE=_s()+500,By()))}break;case 13:J1(function(){var r=Pm(e,1);if(r!==null){var i=ol();nf(r,e,1,i)}}),LG(e,1)}};sG=function(e){if(e.tag===13){var t=Pm(e,134217728);if(t!==null){var n=ol();nf(t,e,134217728,n)}LG(e,134217728)}};abe=function(e){if(e.tag===13){var t=N0(e),n=Pm(e,t);if(n!==null){var r=ol();nf(n,e,t,r)}LG(e,t)}};lbe=function(){return Yr};ube=function(e,t){var n=Yr;try{return Yr=e,t()}finally{Yr=n}};h7=function(e,t,n){switch(t){case"input":if(o7(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=$L(r);if(!i)throw Error(at(90));B1e(r),o7(r,i)}}}break;case"textarea":U1e(e,n);break;case"select":t=n.value,t!=null&&Ww(e,!!n.multiple,t,!1)}};K1e=NG;X1e=J1;var LUe={usingClientEntryPoint:!1,Events:[yk,Sw,$L,G1e,Y1e,NG]},ST={findFiberByHostInstance:p1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},FUe={bundleType:ST.bundleType,version:ST.version,rendererPackageName:ST.rendererPackageName,rendererConfig:ST.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:eg.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Z1e(e),e===null?null:e.stateNode},findFiberByHostInstance:ST.findFiberByHostInstance||MUe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var HP=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!HP.isDisabled&&HP.supportsFiber)try{NL=HP.inject(FUe),Ih=HP}catch{}}dc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LUe;dc.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jG(t))throw Error(at(200));return DUe(e,t,null,n)};dc.createRoot=function(e,t){if(!jG(e))throw Error(at(299));var n=!1,r="",i=P_e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=$G(e,1,!1,null,null,n,!1,r,i),e[Rm]=t.current,kA(e.nodeType===8?e.parentNode:e),new FG(t)};dc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(at(188)):(e=Object.keys(e).join(","),Error(at(268,e)));return e=Z1e(t),e=e===null?null:e.stateNode,e};dc.flushSync=function(e){return J1(e)};dc.hydrate=function(e,t,n){if(!qL(t))throw Error(at(200));return WL(null,e,t,!0,n)};dc.hydrateRoot=function(e,t,n){if(!jG(e))throw Error(at(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=P_e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=R_e(t,null,e,1,n??null,i,!1,s,o),e[Rm]=t.current,kA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new HL(t)};dc.render=function(e,t,n){if(!qL(t))throw Error(at(200));return WL(null,e,t,!1,n)};dc.unmountComponentAtNode=function(e){if(!qL(e))throw Error(at(40));return e._reactRootContainer?(J1(function(){WL(null,null,e,!1,function(){e._reactRootContainer=null,e[Rm]=null})}),!0):!1};dc.unstable_batchedUpdates=NG;dc.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!qL(n))throw Error(at(200));if(e==null||e._reactInternals===void 0)throw Error(at(38));return WL(e,t,n,!1,r)};dc.version="18.3.1-next-f1338f8080-20240426";function N_e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(N_e)}catch(e){console.error(e)}}N_e(),N1e.exports=dc;var tS=N1e.exports;const jUe=mu(tS);var Eae=tS;Zz.createRoot=Eae.createRoot,Zz.hydrateRoot=Eae.hydrateRoot;var dh=function(){return dh=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},dh.apply(this,arguments)};function bk(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Xp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})}function xae(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function BUe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function lr(e){return this instanceof lr?(this.v=e,this):new lr(e)}function y1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||l(h,m)})},p&&(i[h]=p(i[h])))}function l(h,p){try{u(r[h](p))}catch(m){f(s[0][3],m)}}function u(h){h.value instanceof lr?Promise.resolve(h.value.v).then(c,d):f(s[0][2],h)}function c(h){l("next",h)}function d(h){l("throw",h)}function f(h,p){h(p),s.shift(),s.length&&l(s[0][0],s[0][1])}}function f8(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:lr(e[i](o)),done:!1}:s?s(o):o}:s}}function k2(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof xae=="function"?xae(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,l){o=e[s](o),i(a,l,o.done,o.value)})}}function i(s,o,a,l){Promise.resolve(l).then(function(u){s({value:u,done:a})},o)}}var BO="right-scroll-bar-position",zO="width-before-scroll-bar",zUe="with-scroll-bars-hidden",UUe="--removed-body-scroll-bar-size";function h8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function VUe(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var HUe=typeof window<"u"?I.useLayoutEffect:I.useEffect,Sae=new WeakMap;function qUe(e,t){var n=VUe(null,function(r){return e.forEach(function(i){return h8(i,r)})});return HUe(function(){var r=Sae.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||h8(a,null)}),s.forEach(function(a){i.has(a)||h8(a,o)})}Sae.set(n,e)},[e]),n}function WUe(e){return e}function GUe(e,t){t===void 0&&(t=WUe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var l=function(){var c=o;o=[],c.forEach(s)},u=function(){return Promise.resolve().then(l)};u(),n={push:function(c){o.push(c),u()},filter:function(c){return o=o.filter(c),n}}}};return i}function YUe(e){e===void 0&&(e={});var t=GUe(null);return t.options=dh({async:!0,ssr:!1},e),t}var O_e=function(e){var t=e.sideCar,n=bk(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,dh({},n))};O_e.isSideCarExport=!0;function KUe(e,t){return e.useMedium(t),O_e}var D_e=YUe(),p8=function(){},GL=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:p8,onWheelCapture:p8,onTouchMoveCapture:p8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,l=e.className,u=e.removeScrollBar,c=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,b=e.gapMode,_=bk(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=f,E=qUe([n,t]),x=dh(dh({},_),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:D_e,removeScrollBar:u,shards:d,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:b}),o?I.cloneElement(I.Children.only(a),dh(dh({},x),{ref:E})):I.createElement(y,dh({},x,{className:l,ref:E}),a))});GL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};GL.classNames={fullWidth:zO,zeroRight:BO};var XUe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function QUe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=XUe();return t&&e.setAttribute("nonce",t),e}function JUe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function ZUe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var eVe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=QUe())&&(JUe(t,n),ZUe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tVe=function(){var e=eVe();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},M_e=function(){var e=tVe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},nVe={left:0,top:0,right:0,gap:0},m8=function(e){return parseInt(e||"",10)||0},rVe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[m8(n),m8(r),m8(i)]},iVe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return nVe;var t=rVe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},sVe=M_e(),Jw="data-scroll-locked",oVe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(zUe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(Jw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(BO,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(zO,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(BO," .").concat(BO,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(zO," .").concat(zO,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(Jw,`] {
    `).concat(UUe,": ").concat(a,`px;
  }
`)},Tae=function(){var e=parseInt(document.body.getAttribute(Jw)||"0",10);return isFinite(e)?e:0},aVe=function(){I.useEffect(function(){return document.body.setAttribute(Jw,(Tae()+1).toString()),function(){var e=Tae()-1;e<=0?document.body.removeAttribute(Jw):document.body.setAttribute(Jw,e.toString())}},[])},lVe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;aVe();var s=I.useMemo(function(){return iVe(i)},[i]);return I.createElement(sVe,{styles:oVe(s,!t,i,n?"":"!important")})},W7=!1;if(typeof window<"u")try{var qP=Object.defineProperty({},"passive",{get:function(){return W7=!0,!0}});window.addEventListener("test",qP,qP),window.removeEventListener("test",qP,qP)}catch{W7=!1}var T_=W7?{passive:!1}:!1,uVe=function(e){return e.tagName==="TEXTAREA"},$_e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!uVe(e)&&n[t]==="visible")},cVe=function(e){return $_e(e,"overflowY")},dVe=function(e){return $_e(e,"overflowX")},Cae=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=L_e(e,r);if(i){var s=F_e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},fVe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},hVe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},L_e=function(e,t){return e==="v"?cVe(t):dVe(t)},F_e=function(e,t){return e==="v"?fVe(t):hVe(t)},pVe=function(e,t){return e==="h"&&t==="rtl"?-1:1},mVe=function(e,t,n,r,i){var s=pVe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,l=t.contains(a),u=!1,c=o>0,d=0,f=0;do{var h=F_e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&L_e(e,a)&&(d+=y,f+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!l&&a!==document.body||l&&(t.contains(a)||t===a));return(c&&(Math.abs(d)<1||!i)||!c&&(Math.abs(f)<1||!i))&&(u=!0),u},WP=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Aae=function(e){return[e.deltaX,e.deltaY]},Iae=function(e){return e&&"current"in e?e.current:e},gVe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},yVe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vVe=0,C_=[];function bVe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(vVe++)[0],s=I.useState(M_e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=BUe([e.lockRef.current],(e.shards||[]).map(Iae),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=WP(m),b=n.current,_="deltaX"in m?m.deltaX:b[0]-y[0],w="deltaY"in m?m.deltaY:b[1]-y[1],E,x=m.target,S=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&x.type==="range")return!1;var C=Cae(S,x);if(!C)return!0;if(C?E=S:(E=S==="v"?"h":"v",C=Cae(S,x)),!C)return!1;if(!r.current&&"changedTouches"in m&&(_||w)&&(r.current=E),!E)return!0;var A=r.current||E;return mVe(A,g,m,A==="h"?_:w,!0)},[]),l=I.useCallback(function(m){var g=m;if(!(!C_.length||C_[C_.length-1]!==s)){var y="deltaY"in g?Aae(g):WP(g),b=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&gVe(E.delta,y)})[0];if(b&&b.should){g.cancelable&&g.preventDefault();return}if(!b){var _=(o.current.shards||[]).map(Iae).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=_.length>0?a(g,_[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),u=I.useCallback(function(m,g,y,b){var _={name:m,delta:g,target:y,should:b,shadowParent:_Ve(y)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),c=I.useCallback(function(m){n.current=WP(m),r.current=void 0},[]),d=I.useCallback(function(m){u(m.type,Aae(m),m.target,a(m,e.lockRef.current))},[]),f=I.useCallback(function(m){u(m.type,WP(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return C_.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",l,T_),document.addEventListener("touchmove",l,T_),document.addEventListener("touchstart",c,T_),function(){C_=C_.filter(function(m){return m!==s}),document.removeEventListener("wheel",l,T_),document.removeEventListener("touchmove",l,T_),document.removeEventListener("touchstart",c,T_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:yVe(i)}):null,h?I.createElement(lVe,{gapMode:e.gapMode}):null)}function _Ve(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const wVe=KUe(D_e,bVe);var YL=I.forwardRef(function(e,t){return I.createElement(GL,dh({},e,{ref:t,sideCar:wVe}))});YL.classNames=GL.classNames;function Gi(e){return Object.keys(e)}function g8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function BG(e,t){const n={...e},r=t;return g8(e)&&g8(t)&&Object.keys(t).forEach(i=>{g8(r[i])&&i in e?n[i]=BG(n[i],r[i]):n[i]=r[i]}),n}function EVe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function xVe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function G7(e){const t=xVe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function y8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function j_e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?y8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?y8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?y8(s):s}}return r}return n}const Se=j_e("rem",{shouldScale:!0}),bM=j_e("em");function nS(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function B_e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function tg(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function Fs(e){const t=I.createContext(null);return[({children:i,value:s})=>v.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function jb(e=null){const t=I.createContext(e);return[({children:i,value:s})=>v.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function _M(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function wM(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function SVe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function TVe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function CVe(e,t,n){return wM(e,n)===wM(t,n)}function zG({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const l=Array.from(((p=wM(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>CVe(a.currentTarget,m,e)),u=l.findIndex(m=>a.currentTarget===m),c=TVe(u,l,r),d=SVe(u,l,r),f=s==="rtl"?d:c,h=s==="rtl"?c:d;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[f].focus(),i&&l[f].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),l[h].focus(),i&&l[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[d].focus(),i&&l[d].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),l[c].focus(),i&&l[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!l[0].disabled&&l[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=l.length-1;!l[m].disabled&&l[m].focus();break}}}}const AVe={app:100,modal:200,popover:300,overlay:400,max:9999};function ad(e){return AVe[e]}const IVe=()=>{};function kVe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||IVe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Jt(e,t="size",n=!0){if(e!==void 0)return B_e(e)?n?Se(e):e:`var(--${t}-${e})`}function ru(e){return Jt(e,"mantine-spacing")}function Pr(e){return e===void 0?"var(--mantine-radius-default)":Jt(e,"mantine-radius")}function Zs(e){return Jt(e,"mantine-font-size")}function z_e(e){return Jt(e,"mantine-line-height",!1)}function UG(e){if(e)return Jt(e,"mantine-shadow",!1)}function Vo(e,t){return n=>{e==null||e(n),t==null||t(n)}}function VG(e,t){return e in t.breakpoints?G7(t.breakpoints[e]):G7(e)}function EM(e,t){const n=e.map(r=>({value:r,px:VG(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function TC(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function RVe(e,t,n){var r;return n?Array.from(((r=wM(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function PVe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Lc(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function R2(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function e0(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function KL(e,t){const n=e0(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const kae=["mousedown","touchstart"];function NVe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(u=>!!u&&!s.composedPath().includes(u))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||kae).forEach(s=>document.addEventListener(s,i)),()=>{(t||kae).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function OVe({timeout:e=2e3}={}){const[t,n]=I.useState(null),[r,i]=I.useState(!1),[s,o]=I.useState(null),a=c=>{window.clearTimeout(s),o(window.setTimeout(()=>i(!1),e)),i(c)};return{copy:c=>{"clipboard"in navigator?navigator.clipboard.writeText(c).then(()=>a(!0)).catch(d=>n(d)):n(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{i(!1),n(null),window.clearTimeout(s)},error:t,copied:r}}function DVe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function MVe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function FA(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:MVe(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),DVe(s.current,o=>i(o.matches))},[e]),r}function $Ve(e,t){return FA("(prefers-color-scheme: dark)",e==="dark",t)?"dark":"light"}function U_e(e,t,n={leading:!1}){const[r,i]=I.useState(e),s=I.useRef(!1),o=I.useRef(null),a=I.useRef(!1),l=()=>window.clearTimeout(o.current);return I.useEffect(()=>{s.current&&(!a.current&&n.leading?(a.current=!0,i(e)):(l(),o.current=window.setTimeout(()=>{a.current=!1,i(e)},t)))},[e,n.leading,t]),I.useEffect(()=>(s.current=!0,l),[]),[r,l]}const Bb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Yu(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function V_e({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Yu(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function LVe(e,t="body > :not(script)"){const n=R2(),r=Array.from(document.querySelectorAll(t)).map(i=>{var l;if((l=i==null?void 0:i.shadowRoot)!=null&&l.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const FVe=/input|select|textarea|button|object/,H_e="a, input, select, textarea, button, object, [tabindex]";function jVe(e){return e.style.display==="none"}function BVe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(jVe(n))return!1;n=n.parentNode}return!0}function q_e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function Y7(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(q_e(e));return(FVe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&BVe(e)}function W_e(e){const t=q_e(e);return(Number.isNaN(t)||t>=0)&&Y7(e)}function zVe(e){return Array.from(e.querySelectorAll(H_e)).filter(W_e)}function UVe(e,t){const n=zVe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const l=n[t.shiftKey?n.length-1:0];l&&l.focus()}function VVe(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(H_e));o=a.find(W_e)||a.find(Y7)||null,!o&&Y7(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=LVe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&UVe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const HVe=ls.useId||(()=>{});function qVe(){const e=HVe();return e?`mantine-${e.replace(/:/g,"")}`:""}function ta(e){const t=qVe(),[n,r]=I.useState(t);return Bb(()=>{r(R2())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function G_e(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function HG(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Y_e(...e){return t=>{e.forEach(n=>HG(n,t))}}function ps(...e){return I.useCallback(Y_e(...e),e)}function K_e(e){return{x:Lc(e.x,0,1),y:Lc(e.y,0,1)}}function XL(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,l]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var b,_;const u=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const x=r.current.getBoundingClientRect();if(x.width&&x.height){const S=Lc((w-x.left)/x.width,0,1);e({x:n==="ltr"?S:1-S,y:Lc((E-x.top)/x.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},d=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},f=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),l(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,l(!1),d(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{f(),w.preventDefault(),m(w)},m=w=>u({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),f(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),u({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(b=r.current)==null||b.addEventListener("mousedown",p),(_=r.current)==null||_.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ji({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...l)=>{s(a),r==null||r(a,...l)};return e!==void 0?[e,r,!0]:[i,o,!1]}function Cg(e,t){const n=t-e+1;return Array.from({length:n},(r,i)=>i+e)}const GP="dots";function WVe({total:e,siblings:t=1,boundaries:n=1,page:r,initialPage:i=1,onChange:s}){const o=Math.max(Math.trunc(e),0),[a,l]=ji({value:r,onChange:s,defaultValue:i,finalValue:i}),u=m=>{m<=0?l(1):m>o?l(o):l(m)},c=()=>u(a+1),d=()=>u(a-1),f=()=>u(1),h=()=>u(o);return{range:I.useMemo(()=>{if(t*2+3+n*2>=o)return Cg(1,o);const g=Math.max(a-t,n),y=Math.min(a+t,o-n),b=g>n+2,_=y<o-(n+1);if(!b&&_){const w=t*2+n+2;return[...Cg(1,w),GP,...Cg(o-(n-1),o)]}if(b&&!_){const w=n+1+2*t;return[...Cg(1,n),GP,...Cg(o-w,o)]}return[...Cg(1,n),GP,...Cg(g,y),GP,...Cg(o-n+1,o)]},[o,t,a]),active:a,setPage:u,next:c,previous:d,first:f,last:h}}function qG(e,t){return FA("(prefers-reduced-motion: reduce)",e,t)}const GVe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function _k(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(GVe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function YVe(e){const[t,{width:n,height:r}]=_k(e);return{ref:t,width:n,height:r}}function KVe(){const[e,t]=I.useState(!1),n=I.useRef(null),r=I.useCallback(()=>t(!0),[]),i=I.useCallback(()=>t(!1),[]);return I.useEffect(()=>{if(n.current)return n.current.addEventListener("mouseenter",r),n.current.addEventListener("mouseleave",i),()=>{var s,o;(s=n.current)==null||s.removeEventListener("mouseenter",r),(o=n.current)==null||o.removeEventListener("mouseleave",i)}},[]),{ref:n,hovered:e}}function N1(e=!1,t){const{onOpen:n,onClose:r}=t||{},[i,s]=I.useState(e),o=I.useCallback(()=>{s(u=>u||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(u=>u&&(r==null||r(),!1))},[r]),l=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:l}]}function XVe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function QVe(e){const t=I.useRef();return I.useEffect(()=>{t.current=e},[e]),t.current}function JVe(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function ZVe(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function eHe(e,t){const n=e0(e),r=I.useRef(),i=I.useRef(),s=I.useRef(!0),o=I.useRef(t),a=I.useRef(-1),l=()=>window.clearTimeout(a.current),u=I.useCallback((...f)=>{n(...f),r.current=f,i.current=f,s.current=!1},[n]),c=I.useCallback(()=>{r.current&&r.current!==i.current?(u(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[u]),d=I.useCallback((...f)=>{s.current?(u(...f),a.current=window.setTimeout(c,o.current)):r.current=f},[u,c]);return I.useEffect(()=>{o.current=t},[t]),[d,l]}function tHe(e,t){const[n,r]=I.useState(e),[i,s]=eHe(r,t);return I.useEffect(()=>s,[]),[n,i]}function nHe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function rHe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Bb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>nHe(`${e}:${String(r)}`,i[0])}return[t,n]}var iHe={};function X_e(){return typeof process<"u"&&iHe?"production":"development"}function Q_e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Q_e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function vt(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Q_e(e))&&(r&&(r+=" "),r+=t);return r}const sHe={};function oHe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=vt(t[r],i):t[r]=i})}),t}function QL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||sHe);return oHe(s)}function xM({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const WG=I.createContext(null);function zy(){const e=I.useContext(WG);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function aHe(){return zy().cssVariablesResolver}function lHe(){return zy().classNamesPrefix}function JL(){return zy().getStyleNonce}function uHe(){return zy().withStaticClasses}function cHe(){return zy().headless}function dHe(){var e;return(e=zy().stylesTransform)==null?void 0:e.sx}function fHe(){var e;return(e=zy().stylesTransform)==null?void 0:e.styles}function hHe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function pHe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function mHe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function gHe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,l=r/60,u=a*(1-Math.abs(l%2-1)),c=s-a/2;let d,f,h;return l>=0&&l<1?(d=a,f=u,h=0):l>=1&&l<2?(d=u,f=a,h=0):l>=2&&l<3?(d=0,f=a,h=u):l>=3&&l<4?(d=0,f=u,h=a):l>=4&&l<5?(d=u,f=0,h=a):(d=a,f=0,h=u),{r:Math.round((d+c)*255),g:Math.round((f+c)*255),b:Math.round((h+c)*255),a:o||1}}function ZL(e){return hHe(e)?pHe(e):e.startsWith("rgb")?mHe(e):e.startsWith("hsl")?gHe(e):{r:0,g:0,b:0,a:1}}function CC(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=ZL(e),o=1-t,a=l=>Math.round(l*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function jA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function v8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function yHe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function vHe(e){if(e.startsWith("oklch("))return(yHe(e)||0)/100;const{r:t,g:n,b:r}=ZL(e),i=t/255,s=n/255,o=r/255,a=v8(i),l=v8(s),u=v8(o);return .2126*a+.7152*l+.0722*u}function TT(e,t=.179){return e.startsWith("var(")?!1:vHe(e)>t}function Ku({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:TT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:TT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:TT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][jA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:TT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:TT(e,t.luminanceThreshold),shade:s,variable:void 0}}function zr(e,t){const n=Ku({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function K7(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=zr(n.from,t),i=zr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Sc(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=ZL(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const A_=Sc,bHe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Ku({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Se(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Se(1)} solid transparent`}:{background:e,hover:CC(e,.1),color:a,border:`${Se(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Se(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Sc(a,.1),hover:Sc(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Se(1)} solid transparent`}}return{background:Sc(e,.1),hover:Sc(e,.12),color:e,border:`${Se(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Se(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Sc(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Se(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Sc(e,.05),color:e,border:`${Se(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Se(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Sc(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Se(1)} solid transparent`}}return{background:"transparent",hover:Sc(e,.12),color:e,border:`${Se(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Se(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Se(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Se(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:CC(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Se(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:CC(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Se(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:CC(t.white,.01),color:e,border:`${Se(1)} solid transparent`}:n==="gradient"?{background:K7(r,t),hover:K7(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Se(1)} solid var(--mantine-color-default-border)`}:{}},_He={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Rae="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",GG={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:_He,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:bHe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Rae,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Rae,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Se(34),lineHeight:"1.3"},h2:{fontSize:Se(26),lineHeight:"1.35"},h3:{fontSize:Se(22),lineHeight:"1.4"},h4:{fontSize:Se(18),lineHeight:"1.45"},h5:{fontSize:Se(16),lineHeight:"1.5"},h6:{fontSize:Se(14),lineHeight:"1.5"}}},fontSizes:{xs:Se(12),sm:Se(14),md:Se(16),lg:Se(18),xl:Se(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Se(2),sm:Se(4),md:Se(8),lg:Se(16),xl:Se(32)},spacing:{xs:Se(10),sm:Se(12),md:Se(16),lg:Se(20),xl:Se(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), 0 ${Se(1)} ${Se(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(10)} ${Se(15)} ${Se(-5)}, rgba(0, 0, 0, 0.04) 0 ${Se(7)} ${Se(7)} ${Se(-5)}`,md:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(20)} ${Se(25)} ${Se(-5)}, rgba(0, 0, 0, 0.04) 0 ${Se(10)} ${Se(10)} ${Se(-5)}`,lg:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(28)} ${Se(23)} ${Se(-7)}, rgba(0, 0, 0, 0.04) 0 ${Se(12)} ${Se(12)} ${Se(-7)}`,xl:`0 ${Se(1)} ${Se(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Se(36)} ${Se(28)} ${Se(-7)}, rgba(0, 0, 0, 0.04) 0 ${Se(17)} ${Se(17)} ${Se(-7)}`},other:{},components:{}};function Pae(e){return e==="auto"||e==="dark"||e==="light"}function wHe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Pae(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Pae(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const EHe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",Nae="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function b8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Oae(e){if(!(e.primaryColor in e.colors))throw new Error(EHe);if(typeof e.primaryShade=="object"&&(!b8(e.primaryShade.dark)||!b8(e.primaryShade.light)))throw new Error(Nae);if(typeof e.primaryShade=="number"&&!b8(e.primaryShade))throw new Error(Nae)}function xHe(e,t){var r;if(!t)return Oae(e),e;const n=BG(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Oae(n),n}const YG=I.createContext(null),SHe=()=>I.useContext(YG)||GG;function As(){const e=I.useContext(YG);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function J_e({theme:e,children:t,inherit:n=!0}){const r=SHe(),i=I.useMemo(()=>xHe(n?r:GG,e),[e,r,n]);return v.jsx(YG.Provider,{value:i,children:t})}J_e.displayName="@mantine/core/MantineThemeProvider";function THe(){const e=As(),t=JL(),n=Gi(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=G7(e.breakpoints[i]),a=s?`${o-.1}px`:bM(o-.1),l=s?`${o}px`:bM(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${l}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return v.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function _8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function CT(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function CHe(e,t){const n=_8(e.variables),r=n?CT(t,n):"",i=_8(e.dark),s=_8(e.light),o=i?CT(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?CT(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function ap({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Ku({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Dae(e,t){return ap({color:e.colors[e.primaryColor][jA(e,t)],theme:e,autoContrast:null})}function YP({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=jA(e,"light"),l={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:A_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:A_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:A_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...l}:l}const s=jA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:A_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:A_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:A_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function AHe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function I_(e,t,n){Gi(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Z_e=e=>{const t=jA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Se(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Dae(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Dae(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};I_(r.variables,e.breakpoints,"breakpoint"),I_(r.variables,e.spacing,"spacing"),I_(r.variables,e.fontSizes,"font-size"),I_(r.variables,e.lineHeights,"line-height"),I_(r.variables,e.shadows,"shadow"),I_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Gi(e.colors).forEach(s=>{const o=e.colors[s];if(AHe(o)){Object.assign(r.light,YP({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,YP({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,l)=>{r.variables[`--mantine-color-${s}-${l}`]=a}),Object.assign(r.light,YP({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,YP({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Gi(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function IHe({theme:e,generator:t}){const n=Z_e(e),r=t==null?void 0:t(e);return r?BG(n,r):n}const w8=Z_e(GG);function kHe(e){const t={variables:{},light:{},dark:{}};return Gi(e.variables).forEach(n=>{w8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Gi(e.light).forEach(n=>{w8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Gi(e.dark).forEach(n=>{w8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function RHe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function ewe({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=As(),r=JL(),i=aHe(),s=IHe({theme:n,generator:i}),o=e===":root"&&t,a=o?kHe(s):s,l=CHe(a,e);return l?v.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${l}${o?"":RHe(e)}`}}):null}ewe.displayName="@mantine/CssVariables";function PHe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function k_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function NHe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,l=I.useCallback(c=>{r||(k_(c,n),o(c),e.set(c))},[e.set,a,r]),u=I.useCallback(()=>{o(t),k_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(l),e.unsubscribe),[e.subscribe,e.unsubscribe]),Bb(()=>{k_(e.get(t),n)},[]),I.useEffect(()=>{var d;if(r)return k_(r,n),()=>{};r===void 0&&k_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=f=>{s==="auto"&&k_(f.matches?"dark":"light",n)};return(d=i.current)==null||d.addEventListener("change",c),()=>{var f;return(f=i.current)==null?void 0:f.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:l,clearColorScheme:u}}function OHe({respectReducedMotion:e,getRootElement:t}){Bb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}PHe();function twe({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:l="mantine",colorSchemeManager:u=wHe(),defaultColorScheme:c="light",getRootElement:d=()=>document.documentElement,cssVariablesResolver:f,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=NHe({defaultColorScheme:c,forceColorScheme:h,manager:u,getRootElement:d});return OHe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:d}),v.jsx(WG.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:d,classNamesPrefix:l,getStyleNonce:n,cssVariablesResolver:f,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:v.jsxs(J_e,{theme:e,children:[o&&v.jsx(ewe,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&v.jsx(THe,{}),t]})})}twe.displayName="@mantine/core/MantineProvider";function lp({classNames:e,styles:t,props:n,stylesCtx:r}){const i=As();return{resolvedClassNames:QL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:xM({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const DHe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function MHe({theme:e,options:t,unstyled:n}){return vt((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||DHe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function $He({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return QL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Mae({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return QL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function LHe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function FHe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function jHe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function BHe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=QL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function zHe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function UHe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:l,rootSelector:u,props:c,stylesCtx:d,withStaticClasses:f,headless:h,transformedStyles:p}){return vt(MHe({theme:e,options:t,unstyled:a||h}),BHe({theme:e,themeName:n,selector:r,props:c,stylesCtx:d}),zHe({options:t,classes:o,selector:r,unstyled:a}),Mae({selector:r,stylesCtx:d,theme:e,classNames:s,props:c}),Mae({selector:r,stylesCtx:d,theme:e,classNames:p,props:c}),$He({selector:r,stylesCtx:d,options:t,props:c,theme:e}),LHe({rootSelector:u,selector:r,className:l}),FHe({selector:r,classes:o,unstyled:a||h}),f&&!h&&jHe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function VHe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return xM({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function X7({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...X7({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function HHe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...nS(n[r])}}),t),{})}function qHe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var l;return(l=HHe([a?{}:t==null?void 0:t(n,r,i),...o.map(u=>{var c,d,f;return(f=(d=(c=n.components)==null?void 0:c[u])==null?void 0:d.vars)==null?void 0:f.call(d,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:l[s]}function WHe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:l,vars:u,varsResolver:c,headless:d,withStylesTransform:f}){return{...!f&&VHe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!f&&xM({theme:e,styles:a,props:i,stylesCtx:s})[n],...!f&&xM({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...qHe({theme:e,props:i,stylesCtx:s,vars:u,varsResolver:c,selector:n,themeName:t,headless:d}),...o===n?X7({style:l,theme:e}):null,...X7({style:r==null?void 0:r.style,theme:e})}}function GHe({props:e,stylesCtx:t,themeName:n}){var o;const r=As(),i=(o=fHe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(u=>i(u,{props:e,theme:r,ctx:t})),...n.map(u=>{var c;return i((c=r.components[u])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function mt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:l,styles:u,vars:c,varsResolver:d}){const f=As(),h=lHe(),p=uHe(),m=cHe(),g=(Array.isArray(e)?e:[e]).filter(_=>_),{withStylesTransform:y,getTransformedStyles:b}=GHe({props:n,stylesCtx:r,themeName:g});return(_,w)=>({className:UHe({theme:f,options:w,themeName:g,selector:_,classNamesPrefix:h,classNames:l,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:b([w==null?void 0:w.styles,u])}),style:WHe({theme:f,themeName:g,selector:_,options:w,props:n,stylesCtx:r,rootSelector:o,styles:u,style:s,vars:c,varsResolver:d,headless:m,withStylesTransform:y})})}function YHe(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, white ${t*100}%)`;const{r:n,g:r,b:i,a:s}=ZL(e),o=a=>Math.round(a+(255-a)*t);return`rgba(${o(n)}, ${o(r)}, ${o(i)}, ${s})`}function Uy(e,t){return typeof e=="boolean"?e:t.autoContrast}function $ae(e){const t=document.createElement("style");return t.setAttribute("data-mantine-styles","inline"),t.innerHTML="*, *::before, *::after {transition: none !important;}",t.setAttribute("data-mantine-disable-transition","true"),e&&t.setAttribute("nonce",e),document.head.appendChild(t),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(r=>r.remove())}function KHe({keepTransitions:e}={}){const t=I.useRef(),n=I.useRef(),r=I.useContext(WG),i=JL(),s=I.useRef(i==null?void 0:i());if(!r)throw new Error("[@mantine/core] MantineProvider was not found in tree");const o=d=>{r.setColorScheme(d),t.current=e?()=>{}:$ae(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var f;(f=t.current)==null||f.call(t)},10)},a=()=>{r.clearColorScheme(),t.current=e?()=>{}:$ae(s.current),window.clearTimeout(n.current),n.current=window.setTimeout(()=>{var d;(d=t.current)==null||d.call(t)},10)},l=$Ve("light",{getInitialValueInEffect:!1}),u=r.colorScheme==="auto"?l:r.colorScheme,c=I.useCallback(()=>o(u==="light"?"dark":"light"),[o,u]);return I.useEffect(()=>()=>{var d;(d=t.current)==null||d.call(t),window.clearTimeout(n.current)},[]),{colorScheme:r.colorScheme,setColorScheme:o,clearColorScheme:a,toggleColorScheme:c}}function we(e,t,n){var o;const r=As(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...nS(n)}}function E8(e){return Gi(e).reduce((t,n)=>e[n]!==void 0?`${t}${EVe(n)}:${e[n]};`:t,"").trim()}function XHe({selector:e,styles:t,media:n,container:r}){const i=t?E8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${E8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${E8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function wk(e){const t=JL();return v.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:XHe(e)}})}function zb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:y,ps:b,bd:_,bg:w,c:E,opacity:x,ff:S,fz:C,fw:A,lts:R,ta:P,lh:L,fs:k,tt:$,td:D,w:M,miw:B,maw:z,h:U,mih:O,mah:V,bgsz:W,bgp:j,bgr:H,bga:G,pos:J,top:se,left:ie,bottom:ne,right:ue,inset:xe,display:de,flex:Ke,hiddenFrom:je,visibleFrom:Oe,lightHidden:Fe,darkHidden:Ae,sx:fe,...Pe}=e;return{styleProps:nS({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:l,ms:u,p:c,px:d,py:f,pt:h,pb:p,pl:m,pr:g,pe:y,ps:b,bd:_,bg:w,c:E,opacity:x,ff:S,fz:C,fw:A,lts:R,ta:P,lh:L,fs:k,tt:$,td:D,w:M,miw:B,maw:z,h:U,mih:O,mah:V,bgsz:W,bgp:j,bgr:H,bga:G,pos:J,top:se,left:ie,bottom:ne,right:ue,inset:xe,display:de,flex:Ke,hiddenFrom:je,visibleFrom:Oe,lightHidden:Fe,darkHidden:Ae,sx:fe}),rest:Pe}}const QHe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function KG(e,t){const n=Ku({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function JHe(e,t){const n=Ku({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:KG(e,t)}function ZHe(e,t){if(typeof e=="number")return Se(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Se(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${KG(i.join(" "),t)}`),s.trim()}return e}const Lae={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function eqe(e){return typeof e=="string"&&e in Lae?Lae[e]:e}const tqe=["h1","h2","h3","h4","h5","h6"];function nqe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&tqe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Se(e):e}function rqe(e){return e}const iqe=["h1","h2","h3","h4","h5","h6"];function sqe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&iqe.includes(e)?`var(--mantine-${e}-line-height)`:e}function oqe(e){return typeof e=="number"?Se(e):e}function aqe(e,t){if(typeof e=="number")return Se(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Se(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const x8={color:KG,textColor:JHe,fontSize:nqe,spacing:aqe,identity:rqe,size:oqe,lineHeight:sqe,fontFamily:eqe,border:ZHe};function Fae(e){return e.replace("(min-width: ","").replace("em)","")}function lqe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Fae(i))-Number(Fae(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function uqe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function cqe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function dqe(e){return typeof e=="object"&&e!==null?Gi(e).filter(t=>t!=="base"):[]}function fqe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function nwe({styleProps:e,data:t,theme:n}){return lqe(Gi(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=cqe(e[i]);if(!uqe(e[i]))return o.forEach(u=>{r.inlineStyles[u]=x8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const l=dqe(e[i]);return o.forEach(u=>{a&&(r.styles[u]=x8[s.type](a,n)),l.forEach(c=>{const d=`(min-width: ${n.breakpoints[c]})`;r.media[d]={...r.media[d],[u]:x8[s.type](fqe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function eF(){return`__m__-${I.useId().replace(/:/g,"")}`}function XG(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...XG(r,t)}),{}):typeof e=="function"?e(t):e??{}}function rwe(e){return e.startsWith("data-")?e:`data-${e}`}function hqe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[rwe(n)]=e[n]),t},{})}function iwe(e){return e?typeof e=="string"?{[rwe(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...iwe(n)}),{}):hqe(e):null}function Q7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...Q7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function pqe({theme:e,style:t,vars:n,styleProps:r}){const i=Q7(t,e),s=Q7(n,e);return{...i,...s,...r}}const swe=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:l,lightHidden:u,darkHidden:c,renderRoot:d,__size:f,...h},p)=>{var C;const m=As(),g=e||"div",{styleProps:y,rest:b}=zb(h),_=dHe(),w=(C=_==null?void 0:_())==null?void 0:C(y.sx),E=eF(),x=nwe({styleProps:y,theme:m,data:QHe}),S={ref:p,style:pqe({theme:m,style:t,vars:n,styleProps:x.inlineStyles}),className:vt(r,w,{[E]:x.hasResponsiveStyles,"mantine-light-hidden":u,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${l}`]:l}),"data-variant":i,"data-size":B_e(o)?void 0:o||void 0,size:f,...iwe(s),...b};return v.jsxs(v.Fragment,{children:[x.hasResponsiveStyles&&v.jsx(wk,{selector:`.${E}`,styles:x.styles,media:x.media}),typeof d=="function"?d(S):v.jsx(g,{...S})]})});swe.displayName="@mantine/core/Box";const ge=swe;function owe(e){return e}function Le(e){const t=I.forwardRef(e);return t.extend=owe,t.withProps=n=>{const r=I.forwardRef((i,s)=>v.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Is(e){const t=I.forwardRef(e);return t.withProps=n=>{const r=I.forwardRef((i,s)=>v.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=owe,t}const mqe=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function bl(){return I.useContext(mqe)}function gqe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function S8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const AT=typeof window<"u"&&window.requestAnimationFrame;function yqe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,l]=I.useState(r?{}:o),u=p=>{tS.flushSync(()=>l(p))},c=p=>{u(m=>({...m,...p}))};function d(p){const m=e||gqe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Yu(()=>{typeof AT=="function"&&AT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),AT(()=>{const p=S8(i);c({...d(p),height:p})})}:()=>{const p=S8(i);c({...d(p),willChange:"height",height:p}),AT(()=>c({height:s,overflow:"hidden"}))})},[r]);const f=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=S8(i);m===a.height?u({}):c({height:m}),n()}else a.height===s&&(u(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:Y_e(i,y),onTransitionEnd:f,style:{boxSizing:"border-box",...p,...a}}}return h}const vqe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},Vy=Le((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:l,...u}=we("Collapse",vqe,e),c=As(),d=qG(),h=(c.respectReducedMotion?d:!1)?0:i,p=yqe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?v.jsx(ge,{...u,children:n}):null:v.jsx(ge,{...p({style:{opacity:r||!l?1:0,transition:l?`opacity ${h}ms ${s}`:"none",...XG(o,c)},ref:t,...u}),children:n})});Vy.displayName="@mantine/core/Collapse";const[bqe,ld]=Fs("ScrollArea.Root component was not found in tree");function FE(e,t){const n=e0(t);Bb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const _qe=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=ld(),[s,o]=I.useState(0),[a,l]=I.useState(0),u=!!(s&&a);return FE(i.scrollbarX,()=>{var d;const c=((d=i.scrollbarX)==null?void 0:d.offsetHeight)||0;i.onCornerHeightChange(c),l(c)}),FE(i.scrollbarY,()=>{var d;const c=((d=i.scrollbarY)==null?void 0:d.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),u?v.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),wqe=I.forwardRef((e,t)=>{const n=ld(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?v.jsx(_qe,{...e,ref:t}):null}),Eqe={scrollHideDelay:1e3,type:"hover"},awe=I.forwardRef((e,t)=>{const n=we("ScrollAreaRoot",Eqe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,l]=I.useState(null),[u,c]=I.useState(null),[d,f]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,b]=I.useState(0),[_,w]=I.useState(0),[E,x]=I.useState(!1),[S,C]=I.useState(!1),A=ps(t,R=>l(R));return v.jsx(bqe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:u,onViewportChange:c,content:d,onContentChange:f,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:x,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:b,onCornerHeightChange:w},children:v.jsx(ge,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${_}px`}})})});awe.displayName="@mantine/core/ScrollAreaRoot";function lwe(e,t){const n=e/t;return Number.isNaN(n)?0:n}function tF(e){const t=lwe(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function uwe(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function xqe(e,[t,n]){return Math.min(n,Math.max(t,e))}function jae(e,t,n="ltr"){const r=tF(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,l=n==="ltr"?[0,o]:[o*-1,0],u=xqe(e,l);return uwe([0,o],[0,a])(u)}function Sqe(e,t,n,r="ltr"){const i=tF(n),s=i/2,o=t||s,a=i-o,l=n.scrollbar.paddingStart+o,u=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,d=r==="ltr"?[0,c]:[c*-1,0];return uwe([l,u],d)(e)}function cwe(e,t){return e>0&&e<t}function SM(e){return e?parseInt(e,10):0}function O1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[Tqe,dwe]=Fs("ScrollAreaScrollbar was not found in tree"),fwe=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:l,onWheelScroll:u,onResize:c,...d}=e,f=ld(),[h,p]=I.useState(null),m=ps(t,C=>p(C)),g=I.useRef(null),y=I.useRef(""),{viewport:b}=f,_=n.content-n.viewport,w=e0(u),E=e0(a),x=KL(c,10),S=C=>{if(g.current){const A=C.clientX-g.current.left,R=C.clientY-g.current.top;l({x:A,y:R})}};return I.useEffect(()=>{const C=A=>{const R=A.target;(h==null?void 0:h.contains(R))&&w(A,_)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[b,h,_,w]),I.useEffect(E,[n,E]),FE(h,x),FE(f.content,x),v.jsx(Tqe,{value:{scrollbar:h,hasThumb:r,onThumbChange:e0(i),onThumbPointerUp:e0(s),onThumbPositionChange:E,onThumbPointerDown:e0(o)},children:v.jsx("div",{...d,ref:m,style:{position:"absolute",...d.style},onPointerDown:O1(e.onPointerDown,C=>{C.preventDefault(),C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",document.body.style.pointerEvents="none",S(C))}),onPointerMove:O1(e.onPointerMove,S),onPointerUp:O1(e.onPointerUp,C=>{C.preventDefault();const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,document.body.style.pointerEvents="auto",g.current=null})})})}),Cqe=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=ld(),[a,l]=I.useState(),u=I.useRef(null),c=ps(t,u,o.onScrollbarXChange);return I.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),v.jsx(fwe,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${tF(n)}px`},onThumbPointerDown:d=>e.onThumbPointerDown(d.x),onDragScroll:d=>e.onDragScroll(d.x),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollLeft+d.deltaX;e.onWheelScroll(h),cwe(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:SM(a.paddingLeft),paddingEnd:SM(a.paddingRight)}})}})}),Aqe=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=ld(),[a,l]=I.useState(),u=I.useRef(null),c=ps(t,u,o.onScrollbarYChange);return I.useEffect(()=>{u.current&&l(window.getComputedStyle(u.current))},[]),v.jsx(fwe,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${tF(n)}px`,...i},onThumbPointerDown:d=>e.onThumbPointerDown(d.y),onDragScroll:d=>e.onDragScroll(d.y),onWheelScroll:(d,f)=>{if(o.viewport){const h=o.viewport.scrollTop+d.deltaY;e.onWheelScroll(h),cwe(h,f)&&d.preventDefault()}},onResize:()=>{u.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:SM(a.paddingTop),paddingEnd:SM(a.paddingBottom)}})}})}),QG=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=bl(),s=ld(),o=I.useRef(null),a=I.useRef(0),[l,u]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=lwe(l.viewport,l.content),d={...r,sizes:l,onSizesChange:u,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},f=(h,p)=>Sqe(h,a.current,l,p);return n==="horizontal"?v.jsx(Cqe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=jae(h,l,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=f(h,i))}}):n==="vertical"?v.jsx(Aqe,{...d,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=jae(h,l);l.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=f(h))}}):null}),hwe=I.forwardRef((e,t)=>{const n=ld(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",l=KL(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?u:c)}},10);return FE(n.viewport,l),FE(n.content,l),r||s?v.jsx(QG,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Iqe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ld(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let l=0;if(a){const u=()=>{window.clearTimeout(l),o(!0)},c=()=>{l=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",u),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(l),a.removeEventListener("pointerenter",u),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?v.jsx(hwe,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),kqe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ld(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),l=KL(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const u=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(u)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:u}=i,c=s?"scrollLeft":"scrollTop";if(u){let d=u[c];const f=()=>{const h=u[c];d!==h&&(a("scrolling"),l()),d=h};return u.addEventListener("scroll",f),()=>u.removeEventListener("scroll",f)}},[i.viewport,s,l]),n||o!=="hidden"?v.jsx(QG,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:O1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:O1(e.onPointerLeave,()=>a("idle"))}):null}),Bae=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ld(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?v.jsx(Iqe,{...r,ref:t,forceMount:n}):i.type==="scroll"?v.jsx(kqe,{...r,ref:t,forceMount:n}):i.type==="auto"?v.jsx(hwe,{...r,ref:t,forceMount:n}):i.type==="always"?v.jsx(QG,{...r,ref:t}):null});function Rqe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Pqe=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=ld(),s=dwe(),{onThumbPositionChange:o}=s,a=ps(t,c=>s.onThumbChange(c)),l=I.useRef(),u=KL(()=>{l.current&&(l.current(),l.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const d=()=>{if(u(),!l.current){const f=Rqe(c,o);l.current=f,o()}};return o(),c.addEventListener("scroll",d),()=>c.removeEventListener("scroll",d)}},[i.viewport,u,o]),v.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:O1(e.onPointerDownCapture,c=>{const f=c.target.getBoundingClientRect(),h=c.clientX-f.left,p=c.clientY-f.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:O1(e.onPointerUp,s.onThumbPointerUp)})}),zae=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=dwe();return n||i.hasThumb?v.jsx(Pqe,{ref:t,...r}):null}),pwe=I.forwardRef(({children:e,style:t,...n},r)=>{const i=ld(),s=ps(r,i.onViewportChange);return v.jsx(ge,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:v.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});pwe.displayName="@mantine/core/ScrollAreaViewport";var JG={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const mwe={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},Nqe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Se(t)}}),Hy=Le((e,t)=>{const n=we("ScrollArea",mwe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:l,vars:u,type:c,scrollHideDelay:d,viewportProps:f,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...b}=n,[_,w]=I.useState(!1),E=mt({name:"ScrollArea",props:n,classes:JG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nqe});return v.jsxs(awe,{type:c==="never"?"always":c,scrollHideDelay:d,ref:t,scrollbars:y,...E("root"),...b,children:[v.jsx(pwe,{...f,...E("viewport",{style:f==null?void 0:f.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:x=>{var S;(S=f==null?void 0:f.onScroll)==null||S.call(f,x),p==null||p({x:x.currentTarget.scrollLeft,y:x.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&v.jsx(Bae,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:v.jsx(zae,{...E("thumb")})}),(y==="xy"||y==="y")&&v.jsx(Bae,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:v.jsx(zae,{...E("thumb")})}),v.jsx(wqe,{...E("corner"),"data-hovered":_||void 0,"data-hidden":c==="never"||void 0})]})});Hy.displayName="@mantine/core/ScrollArea";const ZG=Le((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...b}=we("ScrollAreaAutosize",mwe,e);return v.jsx(ge,{...b,ref:t,style:[{display:"flex",overflow:"auto"},g],children:v.jsx(ge,{style:{display:"flex",flexDirection:"column",flex:1},children:v.jsx(Hy,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:l,offsetScrollbars:u,viewportRef:c,onScrollPositionChange:d,unstyled:f,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Hy.classes=JG;ZG.displayName="@mantine/core/ScrollAreaAutosize";ZG.classes=JG;Hy.Autosize=ZG;var gwe={root:"m_87cf2631"};const Oqe={__staticSelector:"UnstyledButton"},ds=Is((e,t)=>{const n=we("UnstyledButton",Oqe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:l,style:u,...c}=n,d=mt({name:s,props:n,classes:gwe,className:r,style:u,classNames:a,styles:l,unstyled:o});return v.jsx(ge,{...d("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});ds.classes=gwe;ds.displayName="@mantine/core/UnstyledButton";var ywe={root:"m_515a97f8"};const Dqe={},eY=Le((e,t)=>{const n=we("VisuallyHidden",Dqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,...u}=n,c=mt({name:"VisuallyHidden",classes:ywe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return v.jsx(ge,{component:"span",ref:t,...c("root"),...u})});eY.classes=ywe;eY.displayName="@mantine/core/VisuallyHidden";var vwe={root:"m_1b7284a3"};const Mqe={},$qe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Pr(t),"--paper-shadow":UG(n)}}),Z1=Is((e,t)=>{const n=we("Paper",Mqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:l,vars:u,radius:c,shadow:d,variant:f,mod:h,...p}=n,m=mt({name:"Paper",props:n,classes:vwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$qe});return v.jsx(ge,{ref:t,mod:[{"data-with-border":l},h],...m("root"),variant:f,...p})});Z1.classes=vwe;Z1.displayName="@mantine/core/Paper";function rS(e){return bwe(e)?(e.nodeName||"").toLowerCase():"#document"}function Xl(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ng(e){var t;return(t=(bwe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function bwe(e){return e instanceof Node||e instanceof Xl(e).Node}function $i(e){return e instanceof Element||e instanceof Xl(e).Element}function Xu(e){return e instanceof HTMLElement||e instanceof Xl(e).HTMLElement}function J7(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Xl(e).ShadowRoot}function Ek(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Kc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Lqe(e){return["table","td","th"].includes(rS(e))}function nF(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function tY(e){const t=nY(),n=Kc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Fqe(e){let t=Om(e);for(;Xu(t)&&!Z0(t);){if(nF(t))return null;if(tY(t))return t;t=Om(t)}return null}function nY(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Z0(e){return["html","body","#document"].includes(rS(e))}function Kc(e){return Xl(e).getComputedStyle(e)}function rF(e){return $i(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Om(e){if(rS(e)==="html")return e;const t=e.assignedSlot||e.parentNode||J7(e)&&e.host||ng(e);return J7(t)?t.host:t}function _we(e){const t=Om(e);return Z0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Xu(t)&&Ek(t)?t:_we(t)}function mm(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=_we(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Xl(i);return s?t.concat(o,o.visualViewport||[],Ek(i)?i:[],o.frameElement&&n?mm(o.frameElement):[]):t.concat(i,mm(i,[],n))}function Uae(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function BA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&J7(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function wwe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Ewe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function jqe(e){return Uqe()?!1:!Vae()&&e.width===0&&e.height===0||Vae()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function Bqe(){return/apple/i.test(navigator.vendor)}function Vae(){const e=/android/i;return e.test(wwe())||e.test(Ewe())}function zqe(){return wwe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Uqe(){return Ewe().includes("jsdom/")}function Z7(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function Vqe(e){return"nativeEvent"in e}function Hqe(e){return e.matches("html,body")}function v1(e){return(e==null?void 0:e.ownerDocument)||document}function T8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function tw(e){return"composedPath"in e?e.composedPath()[0]:e.target}const qqe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Wqe(e){return Xu(e)&&e.matches(qqe)}const Mu=Math.min,Sa=Math.max,TM=Math.round,KP=Math.floor,ey=e=>({x:e,y:e}),Gqe={left:"right",right:"left",bottom:"top",top:"bottom"},Yqe={start:"end",end:"start"};function eU(e,t,n){return Sa(e,Mu(t,n))}function Dm(e,t){return typeof e=="function"?e(t):e}function yf(e){return e.split("-")[0]}function iS(e){return e.split("-")[1]}function rY(e){return e==="x"?"y":"x"}function iY(e){return e==="y"?"height":"width"}function Mm(e){return["top","bottom"].includes(yf(e))?"y":"x"}function sY(e){return rY(Mm(e))}function Kqe(e,t,n){n===void 0&&(n=!1);const r=iS(e),i=sY(e),s=iY(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=CM(o)),[o,CM(o)]}function Xqe(e){const t=CM(e);return[tU(e),t,tU(t)]}function tU(e){return e.replace(/start|end/g,t=>Yqe[t])}function Qqe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function Jqe(e,t,n,r){const i=iS(e);let s=Qqe(yf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(tU)))),s}function CM(e){return e.replace(/left|right|bottom|top/g,t=>Gqe[t])}function Zqe(e){return{top:0,right:0,bottom:0,left:0,...e}}function oY(e){return typeof e!="number"?Zqe(e):{top:e,right:e,bottom:e,left:e}}function jE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Hae(e,t,n){let{reference:r,floating:i}=e;const s=Mm(t),o=sY(t),a=iY(o),l=yf(t),u=s==="y",c=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(l){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(iS(t)){case"start":h[o]-=f*(n&&u?-1:1);break;case"end":h[o]+=f*(n&&u?-1:1);break}return h}const eWe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),l=await(o.isRTL==null?void 0:o.isRTL(t));let u=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:d}=Hae(u,r,l),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:b,y:_,data:w,reset:E}=await y({x:c,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:u,platform:o,elements:{reference:e,floating:t}});c=b??c,d=_??d,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(f=E.placement),E.rects&&(u=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:d}=Hae(u,f,l)),m=-1)}return{x:c,y:d,placement:f,strategy:i,middlewareData:h}};async function aY(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:l}=e,{boundary:u="clippingAncestors",rootBoundary:c="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Dm(t,e),p=oY(h),g=a[f?d==="floating"?"reference":"floating":d],y=jE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:u,rootBoundary:c,strategy:l})),b=d==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,_=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(_))?await(s.getScale==null?void 0:s.getScale(_))||{x:1,y:1}:{x:1,y:1},E=jE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:b,offsetParent:_,strategy:l}):b);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const tWe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:l}=t,{element:u,padding:c=0}=Dm(e,t)||{};if(u==null)return{};const d=oY(c),f={x:n,y:r},h=sY(i),p=iY(h),m=await o.getDimensions(u),g=h==="y",y=g?"top":"left",b=g?"bottom":"right",_=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-f[h]-s.floating[p],E=f[h]-s.reference[h],x=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u));let S=x?x[_]:0;(!S||!await(o.isElement==null?void 0:o.isElement(x)))&&(S=a.floating[_]||s.floating[p]);const C=w/2-E/2,A=S/2-m[p]/2-1,R=Mu(d[y],A),P=Mu(d[b],A),L=R,k=S-m[p]-P,$=S/2-m[p]/2+C,D=eU(L,$,k),M=!l.arrow&&iS(i)!=null&&$!==D&&s.reference[p]/2-($<L?R:P)-m[p]/2<0,B=M?$<L?$-L:$-k:0;return{[h]:f[h]+B,data:{[h]:D,centerOffset:$-D-B,...M&&{alignmentOffset:B}},reset:M}}}),nWe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:l,elements:u}=t,{mainAxis:c=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Dm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=yf(i),b=Mm(a),_=yf(a)===a,w=await(l.isRTL==null?void 0:l.isRTL(u.floating)),E=f||(_||!m?[CM(a)]:Xqe(a)),x=p!=="none";!f&&x&&E.push(...Jqe(a,m,p,w));const S=[a,...E],C=await aY(t,g),A=[];let R=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&A.push(C[y]),d){const $=Kqe(i,o,w);A.push(C[$[0]],C[$[1]])}if(R=[...R,{placement:i,overflows:A}],!A.every($=>$<=0)){var P,L;const $=(((P=s.flip)==null?void 0:P.index)||0)+1,D=S[$];if(D)return{data:{index:$,overflows:R},reset:{placement:D}};let M=(L=R.filter(B=>B.overflows[0]<=0).sort((B,z)=>B.overflows[1]-z.overflows[1])[0])==null?void 0:L.placement;if(!M)switch(h){case"bestFit":{var k;const B=(k=R.filter(z=>{if(x){const U=Mm(z.placement);return U===b||U==="y"}return!0}).map(z=>[z.placement,z.overflows.filter(U=>U>0).reduce((U,O)=>U+O,0)]).sort((z,U)=>z[1]-U[1])[0])==null?void 0:k[0];B&&(M=B);break}case"initialPlacement":M=a;break}if(i!==M)return{reset:{placement:M}}}return{}}}};function xwe(e){const t=Mu(...e.map(s=>s.left)),n=Mu(...e.map(s=>s.top)),r=Sa(...e.map(s=>s.right)),i=Sa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function rWe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>jE(xwe(i)))}const iWe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:l,y:u}=Dm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),d=rWe(c),f=jE(xwe(c)),h=oY(a);function p(){if(d.length===2&&d[0].left>d[1].right&&l!=null&&u!=null)return d.find(g=>l>g.left-h.left&&l<g.right+h.right&&u>g.top-h.top&&u<g.bottom+h.bottom)||f;if(d.length>=2){if(Mm(n)==="y"){const R=d[0],P=d[d.length-1],L=yf(n)==="top",k=R.top,$=P.bottom,D=L?R.left:P.left,M=L?R.right:P.right,B=M-D,z=$-k;return{top:k,bottom:$,left:D,right:M,width:B,height:z,x:D,y:k}}const g=yf(n)==="left",y=Sa(...d.map(R=>R.right)),b=Mu(...d.map(R=>R.left)),_=d.filter(R=>g?R.left===b:R.right===y),w=_[0].top,E=_[_.length-1].bottom,x=b,S=y,C=S-x,A=E-w;return{top:w,bottom:E,left:x,right:S,width:C,height:A,x,y:w}}return f}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function sWe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=yf(n),a=iS(n),l=Mm(n)==="y",u=["left","top"].includes(o)?-1:1,c=s&&l?-1:1,d=Dm(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),l?{x:h*c,y:f*u}:{x:f*u,y:h*c}}const oWe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,l=await sWe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:o}}}}},aWe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:b}=g;return{x:y,y:b}}},...l}=Dm(e,t),u={x:n,y:r},c=await aY(t,l),d=Mm(yf(i)),f=rY(d);let h=u[f],p=u[d];if(s){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",b=h+c[g],_=h-c[y];h=eU(b,h,_)}if(o){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",b=p+c[g],_=p-c[y];p=eU(b,p,_)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},lWe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:l=!0,crossAxis:u=!0}=Dm(e,t),c={x:n,y:r},d=Mm(i),f=rY(d);let h=c[f],p=c[d];const m=Dm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(l){const _=f==="y"?"height":"width",w=s.reference[f]-s.floating[_]+g.mainAxis,E=s.reference[f]+s.reference[_]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(u){var y,b;const _=f==="y"?"width":"height",w=["top","left"].includes(yf(i)),E=s.reference[d]-s.floating[_]+(w&&((y=o.offset)==null?void 0:y[d])||0)+(w?0:g.crossAxis),x=s.reference[d]+s.reference[_]+(w?0:((b=o.offset)==null?void 0:b[d])||0)-(w?g.crossAxis:0);p<E?p=E:p>x&&(p=x)}return{[f]:h,[d]:p}}}},uWe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Dm(e,t),l=await aY(t,a),u=yf(n),c=iS(n),d=Mm(n)==="y",{width:f,height:h}=r.floating;let p,m;u==="top"||u==="bottom"?(p=u,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=u,p=c==="end"?"top":"bottom");const g=h-l.top-l.bottom,y=f-l.left-l.right,b=Mu(h-l[p],g),_=Mu(f-l[m],y),w=!t.middlewareData.shift;let E=b,x=_;if(d?x=c||w?Mu(_,y):y:E=c||w?Mu(b,g):g,w&&!c){const C=Sa(l.left,0),A=Sa(l.right,0),R=Sa(l.top,0),P=Sa(l.bottom,0);d?x=f-2*(C!==0||A!==0?C+A:Sa(l.left,l.right)):E=h-2*(R!==0||P!==0?R+P:Sa(l.top,l.bottom))}await o({...t,availableWidth:x,availableHeight:E});const S=await i.getDimensions(s.floating);return f!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Swe(e){const t=Kc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Xu(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=TM(n)!==s||TM(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function lY(e){return $i(e)?e:e.contextElement}function Zw(e){const t=lY(e);if(!Xu(t))return ey(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Swe(t);let o=(s?TM(n.width):n.width)/r,a=(s?TM(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const cWe=ey(0);function Twe(e){const t=Xl(e);return!nY()||!t.visualViewport?cWe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function dWe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Xl(e)?!1:t}function eb(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=lY(e);let o=ey(1);t&&(r?$i(r)&&(o=Zw(r)):o=Zw(e));const a=dWe(s,n,r)?Twe(s):ey(0);let l=(i.left+a.x)/o.x,u=(i.top+a.y)/o.y,c=i.width/o.x,d=i.height/o.y;if(s){const f=Xl(s),h=r&&$i(r)?Xl(r):r;let p=f,m=p.frameElement;for(;m&&r&&h!==p;){const g=Zw(m),y=m.getBoundingClientRect(),b=Kc(m),_=y.left+(m.clientLeft+parseFloat(b.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(b.paddingTop))*g.y;l*=g.x,u*=g.y,c*=g.x,d*=g.y,l+=_,u+=w,p=Xl(m),m=p.frameElement}}return jE({width:c,height:d,x:l,y:u})}function fWe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=ng(r),a=t?nF(t.floating):!1;if(r===o||a&&s)return n;let l={scrollLeft:0,scrollTop:0},u=ey(1);const c=ey(0),d=Xu(r);if((d||!d&&!s)&&((rS(r)!=="body"||Ek(o))&&(l=rF(r)),Xu(r))){const f=eb(r);u=Zw(r),c.x=f.x+r.clientLeft,c.y=f.y+r.clientTop}return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-l.scrollLeft*u.x+c.x,y:n.y*u.y-l.scrollTop*u.y+c.y}}function hWe(e){return Array.from(e.getClientRects())}function Cwe(e){return eb(ng(e)).left+rF(e).scrollLeft}function pWe(e){const t=ng(e),n=rF(e),r=e.ownerDocument.body,i=Sa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Sa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Cwe(e);const a=-n.scrollTop;return Kc(r).direction==="rtl"&&(o+=Sa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function mWe(e,t){const n=Xl(e),r=ng(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;const u=nY();(!u||u&&t==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a,y:l}}function gWe(e,t){const n=eb(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Xu(e)?Zw(e):ey(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,l=i*s.x,u=r*s.y;return{width:o,height:a,x:l,y:u}}function qae(e,t,n){let r;if(t==="viewport")r=mWe(e,n);else if(t==="document")r=pWe(ng(e));else if($i(t))r=gWe(t,n);else{const i=Twe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return jE(r)}function Awe(e,t){const n=Om(e);return n===t||!$i(n)||Z0(n)?!1:Kc(n).position==="fixed"||Awe(n,t)}function yWe(e,t){const n=t.get(e);if(n)return n;let r=mm(e,[],!1).filter(a=>$i(a)&&rS(a)!=="body"),i=null;const s=Kc(e).position==="fixed";let o=s?Om(e):e;for(;$i(o)&&!Z0(o);){const a=Kc(o),l=tY(o);!l&&a.position==="fixed"&&(i=null),(s?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Ek(o)&&!l&&Awe(e,o))?r=r.filter(c=>c!==o):i=a,o=Om(o)}return t.set(e,r),r}function vWe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?nF(t)?[]:yWe(t,this._c):[].concat(n),r],a=o[0],l=o.reduce((u,c)=>{const d=qae(t,c,i);return u.top=Sa(d.top,u.top),u.right=Mu(d.right,u.right),u.bottom=Mu(d.bottom,u.bottom),u.left=Sa(d.left,u.left),u},qae(t,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function bWe(e){const{width:t,height:n}=Swe(e);return{width:t,height:n}}function _We(e,t,n){const r=Xu(t),i=ng(t),s=n==="fixed",o=eb(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const l=ey(0);if(r||!r&&!s)if((rS(t)!=="body"||Ek(i))&&(a=rF(t)),r){const d=eb(t,!0,s,t);l.x=d.x+t.clientLeft,l.y=d.y+t.clientTop}else i&&(l.x=Cwe(i));const u=o.left+a.scrollLeft-l.x,c=o.top+a.scrollTop-l.y;return{x:u,y:c,width:o.width,height:o.height}}function C8(e){return Kc(e).position==="static"}function Wae(e,t){return!Xu(e)||Kc(e).position==="fixed"?null:t?t(e):e.offsetParent}function Iwe(e,t){const n=Xl(e);if(nF(e))return n;if(!Xu(e)){let i=Om(e);for(;i&&!Z0(i);){if($i(i)&&!C8(i))return i;i=Om(i)}return n}let r=Wae(e,t);for(;r&&Lqe(r)&&C8(r);)r=Wae(r,t);return r&&Z0(r)&&C8(r)&&!tY(r)?n:r||Fqe(e)||n}const wWe=async function(e){const t=this.getOffsetParent||Iwe,n=this.getDimensions,r=await n(e.floating);return{reference:_We(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function EWe(e){return Kc(e).direction==="rtl"}const xWe={convertOffsetParentRelativeRectToViewportRelativeRect:fWe,getDocumentElement:ng,getClippingRect:vWe,getOffsetParent:Iwe,getElementRects:wWe,getClientRects:hWe,getDimensions:bWe,getScale:Zw,isElement:$i,isRTL:EWe};function SWe(e,t){let n=null,r;const i=ng(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,l){a===void 0&&(a=!1),l===void 0&&(l=1),s();const{left:u,top:c,width:d,height:f}=e.getBoundingClientRect();if(a||t(),!d||!f)return;const h=KP(c),p=KP(i.clientWidth-(u+d)),m=KP(i.clientHeight-(c+f)),g=KP(u),b={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:Sa(0,Mu(1,l))||1};let _=!0;function w(E){const x=E[0].intersectionRatio;if(x!==l){if(!_)return o();x?o(!1,x):r=setTimeout(()=>{o(!1,1e-7)},1e3)}_=!1}try{n=new IntersectionObserver(w,{...b,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,b)}n.observe(e)}return o(!0),s}function TWe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,u=lY(e),c=i||s?[...u?mm(u):[],...mm(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const d=u&&a?SWe(u,n):null;let f=-1,h=null;o&&(h=new ResizeObserver(y=>{let[b]=y;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(f),f=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),u&&!l&&h.observe(u),h.observe(t));let p,m=l?eb(e):null;l&&g();function g(){const y=eb(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(b=>{i&&b.removeEventListener("scroll",n),s&&b.removeEventListener("resize",n)}),d==null||d(),(y=h)==null||y.disconnect(),h=null,l&&cancelAnimationFrame(p)}}const CWe=oWe,AWe=aWe,IWe=nWe,kWe=uWe,Gae=tWe,RWe=iWe,PWe=lWe,NWe=(e,t,n)=>{const r=new Map,i={platform:xWe,...n},s={...i.platform,_c:r};return eWe(e,t,{...i,platform:s})};var UO=typeof document<"u"?I.useLayoutEffect:I.useEffect;function AM(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!AM(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!AM(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function kwe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Yae(e,t){const n=kwe(e);return Math.round(t*n)/n}function Kae(e){const t=I.useRef(e);return UO(()=>{t.current=e}),t}function OWe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:l,open:u}=e,[c,d]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[f,h]=I.useState(r);AM(f,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),b=I.useCallback(B=>{B!==x.current&&(x.current=B,m(B))},[]),_=I.useCallback(B=>{B!==S.current&&(S.current=B,y(B))},[]),w=s||p,E=o||g,x=I.useRef(null),S=I.useRef(null),C=I.useRef(c),A=l!=null,R=Kae(l),P=Kae(i),L=I.useCallback(()=>{if(!x.current||!S.current)return;const B={placement:t,strategy:n,middleware:f};P.current&&(B.platform=P.current),NWe(x.current,S.current,B).then(z=>{const U={...z,isPositioned:!0};k.current&&!AM(C.current,U)&&(C.current=U,tS.flushSync(()=>{d(U)}))})},[f,t,n,P]);UO(()=>{u===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,d(B=>({...B,isPositioned:!1})))},[u]);const k=I.useRef(!1);UO(()=>(k.current=!0,()=>{k.current=!1}),[]),UO(()=>{if(w&&(x.current=w),E&&(S.current=E),w&&E){if(R.current)return R.current(w,E,L);L()}},[w,E,L,R,A]);const $=I.useMemo(()=>({reference:x,floating:S,setReference:b,setFloating:_}),[b,_]),D=I.useMemo(()=>({reference:w,floating:E}),[w,E]),M=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!D.floating)return B;const z=Yae(D.floating,c.x),U=Yae(D.floating,c.y);return a?{...B,transform:"translate("+z+"px, "+U+"px)",...kwe(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:z,top:U}},[n,a,D.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:L,refs:$,elements:D,floatingStyles:M}),[c,L,$,D,M])}const DWe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Gae({element:r.current,padding:i}).fn(n):{}:r?Gae({element:r,padding:i}).fn(n):{}}}},Rwe=(e,t)=>({...CWe(e),options:[e,t]}),uY=(e,t)=>({...AWe(e),options:[e,t]}),Xae=(e,t)=>({...PWe(e),options:[e,t]}),nU=(e,t)=>({...IWe(e),options:[e,t]}),MWe=(e,t)=>({...kWe(e),options:[e,t]}),rU=(e,t)=>({...RWe(e),options:[e,t]}),Pwe=(e,t)=>({...DWe(e),options:[e,t]}),Nwe={...YD},$We=Nwe.useInsertionEffect,LWe=$We||(e=>e());function t0(e){const t=I.useRef(()=>{});return LWe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Rh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let Qae=!1,FWe=0;const Jae=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+FWe++;function jWe(){const[e,t]=I.useState(()=>Qae?Jae():void 0);return Rh(()=>{e==null&&t(Jae())},[]),I.useEffect(()=>{Qae=!0},[]),e}const BWe=Nwe.useId,Owe=BWe||jWe;function zWe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const UWe=I.createContext(null),VWe=I.createContext(null),cY=()=>{var e;return((e=I.useContext(UWe))==null?void 0:e.id)||null},dY=()=>I.useContext(VWe);function fY(e){return"data-floating-ui-"+e}function A8(e){const t=I.useRef(e);return Rh(()=>{t.current=e}),t}const Zae=fY("safe-polygon");function VO(e,t,n){return n&&!Z7(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function HWe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:l=0,handleClose:u=null,mouseOnly:c=!1,restMs:d=0,move:f=!0}=t,h=dY(),p=cY(),m=A8(u),g=A8(l),y=A8(n),b=I.useRef(),_=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),x=I.useRef(!0),S=I.useRef(!1),C=I.useRef(()=>{}),A=I.useCallback(()=>{var D;const M=(D=i.current.openEvent)==null?void 0:D.type;return(M==null?void 0:M.includes("mouse"))&&M!=="mousedown"},[i]);I.useEffect(()=>{if(!a)return;function D(M){let{open:B}=M;B||(clearTimeout(_.current),clearTimeout(E.current),x.current=!0)}return s.on("openchange",D),()=>{s.off("openchange",D)}},[a,s]),I.useEffect(()=>{if(!a||!m.current||!n)return;function D(B){A()&&r(!1,B,"hover")}const M=v1(o.floating).documentElement;return M.addEventListener("mouseleave",D),()=>{M.removeEventListener("mouseleave",D)}},[o.floating,n,r,a,m,A]);const R=I.useCallback(function(D,M,B){M===void 0&&(M=!0),B===void 0&&(B="hover");const z=VO(g.current,"close",b.current);z&&!w.current?(clearTimeout(_.current),_.current=window.setTimeout(()=>r(!1,D,B),z)):M&&(clearTimeout(_.current),r(!1,D,B))},[g,r]),P=t0(()=>{C.current(),w.current=void 0}),L=t0(()=>{if(S.current){const D=v1(o.floating).body;D.style.pointerEvents="",D.removeAttribute(Zae),S.current=!1}});I.useEffect(()=>{if(!a)return;function D(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function M(O){if(clearTimeout(_.current),x.current=!1,c&&!Z7(b.current)||d>0&&!VO(g.current,"open"))return;const V=VO(g.current,"open",b.current);V?_.current=window.setTimeout(()=>{y.current||r(!0,O,"hover")},V):r(!0,O,"hover")}function B(O){if(D())return;C.current();const V=v1(o.floating);if(clearTimeout(E.current),m.current&&i.current.floatingContext){n||clearTimeout(_.current),w.current=m.current({...i.current.floatingContext,tree:h,x:O.clientX,y:O.clientY,onClose(){L(),P(),R(O,!0,"safe-polygon")}});const j=w.current;V.addEventListener("mousemove",j),C.current=()=>{V.removeEventListener("mousemove",j)};return}(b.current==="touch"?!BA(o.floating,O.relatedTarget):!0)&&R(O)}function z(O){D()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:O.clientX,y:O.clientY,onClose(){L(),P(),R(O)}})(O))}if($i(o.domReference)){var U;const O=o.domReference;return n&&O.addEventListener("mouseleave",z),(U=o.floating)==null||U.addEventListener("mouseleave",z),f&&O.addEventListener("mousemove",M,{once:!0}),O.addEventListener("mouseenter",M),O.addEventListener("mouseleave",B),()=>{var V;n&&O.removeEventListener("mouseleave",z),(V=o.floating)==null||V.removeEventListener("mouseleave",z),f&&O.removeEventListener("mousemove",M),O.removeEventListener("mouseenter",M),O.removeEventListener("mouseleave",B)}}},[o,a,e,c,d,f,R,P,L,r,n,y,h,g,m,i]),Rh(()=>{var D;if(a&&n&&(D=m.current)!=null&&D.__options.blockPointerEvents&&A()){const B=v1(o.floating).body;B.setAttribute(Zae,""),B.style.pointerEvents="none",S.current=!0;const z=o.floating;if($i(o.domReference)&&z){var M;const U=o.domReference,O=h==null||(M=h.nodesRef.current.find(V=>V.id===p))==null||(M=M.context)==null?void 0:M.elements.floating;return O&&(O.style.pointerEvents=""),U.style.pointerEvents="auto",z.style.pointerEvents="auto",()=>{U.style.pointerEvents="",z.style.pointerEvents=""}}}},[a,n,p,o,h,m,A]),Rh(()=>{n||(b.current=void 0,P(),L())},[n,P,L]),I.useEffect(()=>()=>{P(),clearTimeout(_.current),clearTimeout(E.current),L()},[a,o.domReference,P,L]);const k=I.useMemo(()=>{function D(M){b.current=M.pointerType}return{onPointerDown:D,onPointerEnter:D,onMouseMove(M){const{nativeEvent:B}=M;function z(){!x.current&&!y.current&&r(!0,B,"hover")}c&&!Z7(b.current)||n||d===0||(clearTimeout(E.current),b.current==="touch"?z():E.current=window.setTimeout(z,d))}}},[c,r,n,y,d]),$=I.useMemo(()=>({onMouseEnter(){clearTimeout(_.current)},onMouseLeave(D){R(D.nativeEvent,!1)}}),[R]);return I.useMemo(()=>a?{reference:k,floating:$}:{},[a,k,$])}const iU=()=>{},Dwe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:iU,setState:iU,isInstantPhase:!1}),Mwe=()=>I.useContext(Dwe);function qWe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((l,u)=>({...l,...u}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(l=>{s({currentId:l})},[]);return Rh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(Dwe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function WWe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Mwe(),{currentId:l,setCurrentId:u,initialDelay:c,setState:d,timeoutMs:f}=a;return Rh(()=>{l&&(d({delay:{open:1,close:VO(c,"close")}}),l!==o&&r(!1))},[o,r,d,l,c]),Rh(()=>{function h(){r(!1),d({delay:c,currentId:null})}if(l&&!n&&l===o){if(f){const p=window.setTimeout(h,f);return()=>{clearTimeout(p)}}h()}},[n,d,l,o,r,c,f]),Rh(()=>{u===iU||!n||u(o)},[n,u,o]),a}function I8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const GWe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},YWe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},ele=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function KWe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:l=!0,outsidePressEvent:u="pointerdown",referencePress:c=!1,referencePressEvent:d="pointerdown",ancestorScroll:f=!1,bubbles:h,capture:p}=t,m=dY(),g=t0(typeof l=="function"?l:()=>!1),y=typeof l=="function"?g:l,b=I.useRef(!1),_=I.useRef(!1),{escapeKey:w,outsidePress:E}=ele(h),{escapeKey:x,outsidePress:S}=ele(p),C=t0($=>{var D;if(!n||!o||!a||$.key!=="Escape")return;const M=(D=s.current.floatingContext)==null?void 0:D.nodeId,B=m?I8(m.nodesRef.current,M):[];if(!w&&($.stopPropagation(),B.length>0)){let z=!0;if(B.forEach(U=>{var O;if((O=U.context)!=null&&O.open&&!U.context.dataRef.current.__escapeKeyBubbles){z=!1;return}}),!z)return}r(!1,Vqe($)?$.nativeEvent:$,"escape-key")}),A=t0($=>{var D;const M=()=>{var B;C($),(B=tw($))==null||B.removeEventListener("keydown",M)};(D=tw($))==null||D.addEventListener("keydown",M)}),R=t0($=>{var D;const M=b.current;b.current=!1;const B=_.current;if(_.current=!1,u==="click"&&B||M||typeof y=="function"&&!y($))return;const z=tw($),U="["+fY("inert")+"]",O=v1(i.floating).querySelectorAll(U);let V=$i(z)?z:null;for(;V&&!Z0(V);){const G=Om(V);if(Z0(G)||!$i(G))break;V=G}if(O.length&&$i(z)&&!Hqe(z)&&!BA(z,i.floating)&&Array.from(O).every(G=>!BA(V,G)))return;if(Xu(z)&&k){const G=z.clientWidth>0&&z.scrollWidth>z.clientWidth,J=z.clientHeight>0&&z.scrollHeight>z.clientHeight;let se=J&&$.offsetX>z.clientWidth;if(J&&Kc(z).direction==="rtl"&&(se=$.offsetX<=z.offsetWidth-z.clientWidth),se||G&&$.offsetY>z.clientHeight)return}const W=(D=s.current.floatingContext)==null?void 0:D.nodeId,j=m&&I8(m.nodesRef.current,W).some(G=>{var J;return T8($,(J=G.context)==null?void 0:J.elements.floating)});if(T8($,i.floating)||T8($,i.domReference)||j)return;const H=m?I8(m.nodesRef.current,W):[];if(H.length>0){let G=!0;if(H.forEach(J=>{var se;if((se=J.context)!=null&&se.open&&!J.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),P=t0($=>{var D;const M=()=>{var B;R($),(B=tw($))==null||B.removeEventListener(u,M)};(D=tw($))==null||D.addEventListener(u,M)});I.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=E;function $(B){r(!1,B,"ancestor-scroll")}const D=v1(i.floating);a&&D.addEventListener("keydown",x?A:C,x),y&&D.addEventListener(u,S?P:R,S);let M=[];return f&&($i(i.domReference)&&(M=mm(i.domReference)),$i(i.floating)&&(M=M.concat(mm(i.floating))),!$i(i.reference)&&i.reference&&i.reference.contextElement&&(M=M.concat(mm(i.reference.contextElement)))),M=M.filter(B=>{var z;return B!==((z=D.defaultView)==null?void 0:z.visualViewport)}),M.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{a&&D.removeEventListener("keydown",x?A:C,x),y&&D.removeEventListener(u,S?P:R,S),M.forEach(B=>{B.removeEventListener("scroll",$)})}},[s,i,a,y,u,n,r,f,o,w,E,C,x,A,R,S,P]),I.useEffect(()=>{b.current=!1},[y,u]);const L=I.useMemo(()=>({onKeyDown:C,[GWe[d]]:$=>{c&&r(!1,$.nativeEvent,"reference-press")}}),[C,r,c,d]),k=I.useMemo(()=>({onKeyDown:C,onMouseDown(){_.current=!0},onMouseUp(){_.current=!0},[YWe[u]]:()=>{b.current=!0}}),[C,u]);return I.useMemo(()=>o?{reference:L,floating:k}:{},[o,L,k])}function XWe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Owe(),s=I.useRef({}),[o]=I.useState(()=>zWe()),a=cY()!=null,[l,u]=I.useState(r.reference),c=t0((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),d=I.useMemo(()=>({setPositionReference:u}),[]),f=I.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:f,events:o,floatingId:i,refs:d}),[t,c,f,o,i,d])}function hY(e){e===void 0&&(e={});const{nodeId:t}=e,n=XWe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,l]=I.useState(null),c=(i==null?void 0:i.reference)||s,d=I.useRef(null),f=dY();Rh(()=>{c&&(d.current=c)},[c]);const h=OWe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(_=>{const w=$i(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;l(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(_=>{($i(_)||_===null)&&(d.current=_,o(_)),($i(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!$i(_))&&h.refs.setReference(_)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:d}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),b=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Rh(()=>{r.dataRef.current.floatingContext=b;const _=f==null?void 0:f.nodesRef.current.find(w=>w.id===t);_&&(_.context=b)}),I.useMemo(()=>({...h,context:b,refs:g,elements:y}),[h,g,y,b])}function QWe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:l=!0}=t,u=I.useRef(!1),c=I.useRef(),d=I.useRef(!0);I.useEffect(()=>{if(!a)return;const h=Xl(o.domReference);function p(){!n&&Xu(o.domReference)&&o.domReference===Uae(v1(o.domReference))&&(u.current=!0)}function m(){d.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),I.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(u.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]);const f=I.useMemo(()=>({onPointerDown(h){jqe(h.nativeEvent)||(d.current=!1)},onMouseLeave(){u.current=!1},onFocus(h){if(u.current)return;const p=tw(h.nativeEvent);if(l&&$i(p))try{if(Bqe()&&zqe())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!d.current&&!Wqe(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){u.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=$i(p)&&p.hasAttribute(fY("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var y;const b=Uae(o.domReference?o.domReference.ownerDocument:document);!p&&b===o.domReference||BA((y=s.current.floatingContext)==null?void 0:y.refs.floating.current,b)||BA(o.domReference,b)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,l]);return I.useMemo(()=>a?{reference:f}:{},[a,f])}const tle="active",nle="selected";function k8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[tle]:o,[nle]:a,...l}=e;s=l}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(l=>{let[u,c]=l;if(!(i&&[tle,nle].includes(u)))if(u.indexOf("on")===0){if(r.has(u)||r.set(u,[]),typeof c=="function"){var d;(d=r.get(u))==null||d.push(c),o[u]=function(){for(var f,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(f=r.get(u))==null?void 0:f.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[u]=c}),o),{})}}function JWe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=I.useCallback(a=>k8(a,e,"reference"),t),s=I.useCallback(a=>k8(a,e,"floating"),n),o=I.useCallback(a=>k8(a,e,"item"),r);return I.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const ZWe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function eGe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=ZWe.get(o))!=null?n:o,l=Owe(),c=cY()!=null,d=I.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:l},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,l,o]),f=I.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":l}}},[a,i,l,o]),h=I.useCallback(p=>{let{active:m,selected:g}=p;const y={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...y,"aria-selected":m&&g};case"combobox":return{...y,...m&&{"aria-selected":!0}}}return{}},[i,o]);return I.useMemo(()=>s?{reference:d,floating:f,item:h}:{},[s,d,f,h])}function $we(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function rle(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function ile(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const tGe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function nGe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[l,u="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[tGe[l]]:r},d=-t/2;return l==="left"?{...c,...rle(u,o,n,i),right:d,borderLeftColor:"transparent",borderBottomColor:"transparent"}:l==="right"?{...c,...rle(u,o,n,i),left:d,borderRightColor:"transparent",borderTopColor:"transparent"}:l==="top"?{...c,...ile(u,s,n,i,a),bottom:d,borderTopColor:"transparent",borderLeftColor:"transparent"}:l==="bottom"?{...c,...ile(u,s,n,i,a),top:d,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const pY=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:l,...u},c)=>{const{dir:d}=bl();return s?v.jsx("div",{...u,ref:c,style:{...l,...nGe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:d,arrowX:o,arrowY:a})}}):null});pY.displayName="@mantine/core/FloatingArrow";const[rGe,Lwe]=Fs("Popover component was not found in the tree");function iF({children:e,active:t=!0,refProp:n="ref"}){const r=VVe(t),i=ps(r,e==null?void 0:e.ref);return tg(e)?I.cloneElement(e,{[n]:i}):e}function Fwe(e){return v.jsx(eY,{tabIndex:-1,"data-autofocus":!0,...e})}iF.displayName="@mantine/core/FocusTrap";Fwe.displayName="@mantine/core/FocusTrapInitialFocus";iF.InitialFocus=Fwe;function iGe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const sGe={},jwe=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=we("Portal",sGe,e),[s,o]=I.useState(!1),a=I.useRef(null);return Bb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:iGe(i),HG(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:tS.createPortal(v.jsx(v.Fragment,{children:n}),a.current)});jwe.displayName="@mantine/core/Portal";function xk({withinPortal:e=!0,children:t,...n}){return e?v.jsx(jwe,{...n,children:t}):v.jsx(v.Fragment,{children:t})}xk.displayName="@mantine/core/OptionalPortal";const IT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Se(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),XP={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Se(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Se(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Se(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Se(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Se(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Se(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Se(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Se(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...IT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...IT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...IT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...IT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...IT("top"),common:{transformOrigin:"top right"}}},sle={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function oGe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in XP?{transitionProperty:XP[e].transitionProperty,...i,...XP[e].common,...XP[e][sle[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[sle[t]]}}function aGe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:l,exitDelay:u}){const c=As(),d=qG(),f=c.respectReducedMotion?d:!1,[h,p]=I.useState(f?0:e),[m,g]=I.useState(r?"entered":"exited"),y=I.useRef(-1),b=I.useRef(-1),_=I.useRef(-1),w=x=>{const S=x?i:s,C=x?o:a;window.clearTimeout(y.current);const A=f?0:x?e:t;p(A),A===0?(typeof S=="function"&&S(),typeof C=="function"&&C(),g(x?"entered":"exited")):_.current=requestAnimationFrame(()=>{jUe.flushSync(()=>{g(x?"pre-entering":"pre-exiting")}),_.current=requestAnimationFrame(()=>{typeof S=="function"&&S(),g(x?"entering":"exiting"),y.current=window.setTimeout(()=>{typeof C=="function"&&C(),g(x?"entered":"exited")},A)})})},E=x=>{if(window.clearTimeout(b.current),typeof(x?l:u)!="number"){w(x);return}b.current=window.setTimeout(()=>{w(x)},x?l:u)};return Yu(()=>{E(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(_.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function Nf({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=aGe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:l,onEnter:u,onExited:c,enterDelay:d,exitDelay:f});return h===0?i?v.jsx(v.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:v.jsx(v.Fragment,{children:s(oGe({transition:t,duration:h,state:p,timingFunction:m}))})}Nf.displayName="@mantine/core/Transition";var Bwe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const lGe={},mY=Le((e,t)=>{var g,y,b,_;const n=we("PopoverDropdown",lGe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:l,classNames:u,styles:c,...d}=n,f=Lwe(),h=V_e({opened:f.opened,shouldReturnFocus:f.returnFocus}),p=f.withRoles?{"aria-labelledby":f.getTargetId(),id:f.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ps(t,f.floating);return f.disabled?null:v.jsx(xk,{...f.portalProps,withinPortal:f.withinPortal,children:v.jsx(Nf,{mounted:f.opened,...f.transitionProps,transition:((g=f.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=f.transitionProps)==null?void 0:y.duration)??150,keepMounted:f.keepMounted,exitDuration:typeof((b=f.transitionProps)==null?void 0:b.exitDuration)=="number"?f.transitionProps.exitDuration:(_=f.transitionProps)==null?void 0:_.duration,children:w=>v.jsx(iF,{active:f.trapFocus,children:v.jsxs(ge,{...p,...d,variant:l,ref:m,onKeyDownCapture:kVe(f.onClose,{active:f.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":f.placement,"data-fixed":f.floatingStrategy==="fixed"||void 0,...f.getStyles("dropdown",{className:r,props:n,classNames:u,styles:c,style:[{...w,zIndex:f.zIndex,top:f.y??0,left:f.x??0,width:f.width==="target"?void 0:Se(f.width)},i]}),children:[o,v.jsx(pY,{ref:f.arrowRef,arrowX:f.arrowX,arrowY:f.arrowY,visible:f.withArrow,position:f.placement,arrowSize:f.arrowSize,arrowRadius:f.arrowRadius,arrowOffset:f.arrowOffset,arrowPosition:f.arrowPosition,...f.getStyles("arrow",{props:n,classNames:u,styles:c})})]})})})})});mY.classes=Bwe;mY.displayName="@mantine/core/PopoverDropdown";const uGe={refProp:"ref",popupType:"dialog"},zwe=Le((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=we("PopoverTarget",uGe,e);if(!tg(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Lwe(),l=ps(a.reference,n.ref,t),u=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...u,...a.targetProps,className:vt(a.targetProps.className,o.className,n.props.className),[r]:l,...a.controlled?null:{onClick:a.onToggle}})});zwe.displayName="@mantine/core/PopoverTarget";function Uwe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return TWe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Yu(()=>{t.update()},r),Yu(()=>{s(o=>o+1)},[e])}function cGe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function dGe(e,t){const n=cGe(e.middlewares),r=[Rwe(e.offset)];return n.shift&&r.push(uY(typeof n.shift=="boolean"?{limiter:Xae(),padding:5}:{limiter:Xae(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?nU():nU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?rU():rU(n.inline)),r.push(Pwe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(MWe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var u;const l=((u=t().refs.floating.current)==null?void 0:u.style)??{};n.size&&Object.assign(l,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(l,{width:`${i.reference.width}px`})}})),r}function fGe(e){const[t,n]=ji({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=hY({strategy:e.strategy,placement:e.position,middleware:dGe(e,()=>s)});return Uwe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Yu(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Yu(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const hGe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:ad("popover"),__staticSelector:"Popover",width:"max-content"},pGe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Pr(t),"--popover-shadow":UG(n)}});function hn(e){var Ae,fe,Pe,He,ft,Ee;const t=we("Popover",hGe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:l,width:u,middlewares:c,withArrow:d,arrowSize:f,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:b,closeOnClickOutside:_,withinPortal:w,portalProps:E,closeOnEscape:x,clickOutsideEvents:S,trapFocus:C,onClose:A,onOpen:R,onChange:P,zIndex:L,radius:k,shadow:$,id:D,defaultOpened:M,__staticSelector:B,withRoles:z,disabled:U,returnFocus:O,variant:V,keepMounted:W,vars:j,floatingStrategy:H,...G}=t,J=mt({name:B,props:t,classes:Bwe,classNames:y,styles:b,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:pGe}),se=I.useRef(null),[ie,ne]=I.useState(null),[ue,xe]=I.useState(null),{dir:de}=bl(),Ke=ta(D),je=fGe({middlewares:c,width:u,position:$we(de,r),offset:typeof i=="number"?i+(d?f/2:0):i,arrowRef:se,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:P,onOpen:R,onClose:A,strategy:H});NVe(()=>_&&je.onClose(),S,[ie,ue]);const Oe=I.useCallback(he=>{ne(he),je.floating.refs.setReference(he)},[je.floating.refs.setReference]),Fe=I.useCallback(he=>{xe(he),je.floating.refs.setFloating(he)},[je.floating.refs.setFloating]);return v.jsx(rGe,{value:{returnFocus:O,disabled:U,controlled:je.controlled,reference:Oe,floating:Fe,x:je.floating.x,y:je.floating.y,arrowX:(Pe=(fe=(Ae=je.floating)==null?void 0:Ae.middlewareData)==null?void 0:fe.arrow)==null?void 0:Pe.x,arrowY:(Ee=(ft=(He=je.floating)==null?void 0:He.middlewareData)==null?void 0:ft.arrow)==null?void 0:Ee.y,opened:je.opened,arrowRef:se,transitionProps:l,width:u,withArrow:d,arrowSize:f,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:je.floating.placement,trapFocus:C,withinPortal:w,portalProps:E,zIndex:L,radius:k,shadow:$,closeOnEscape:x,onClose:je.onClose,onToggle:je.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:z,targetProps:G,__staticSelector:B,classNames:y,styles:b,unstyled:g,variant:V,keepMounted:W,getStyles:J,floatingStrategy:H},children:n})}hn.Target=zwe;hn.Dropdown=mY;hn.displayName="@mantine/core/Popover";hn.extend=e=>e;var Yd={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const mGe=I.forwardRef(({className:e,...t},n)=>v.jsxs(ge,{component:"span",className:vt(Yd.barsLoader,e),...t,ref:n,children:[v.jsx("span",{className:Yd.bar}),v.jsx("span",{className:Yd.bar}),v.jsx("span",{className:Yd.bar})]})),gGe=I.forwardRef(({className:e,...t},n)=>v.jsxs(ge,{component:"span",className:vt(Yd.dotsLoader,e),...t,ref:n,children:[v.jsx("span",{className:Yd.dot}),v.jsx("span",{className:Yd.dot}),v.jsx("span",{className:Yd.dot})]})),yGe=I.forwardRef(({className:e,...t},n)=>v.jsx(ge,{component:"span",className:vt(Yd.ovalLoader,e),...t,ref:n})),Vwe={bars:mGe,oval:yGe,dots:gGe},vGe={loaders:Vwe,type:"oval"},bGe=(e,{size:t,color:n})=>({root:{"--loader-size":Jt(t,"loader-size"),"--loader-color":n?zr(n,e):void 0}}),Os=Le((e,t)=>{const n=we("Loader",vGe,e),{size:r,color:i,type:s,vars:o,className:a,style:l,classNames:u,styles:c,unstyled:d,loaders:f,variant:h,children:p,...m}=n,g=mt({name:"Loader",props:n,classes:Yd,className:a,style:l,classNames:u,styles:c,unstyled:d,vars:o,varsResolver:bGe});return p?v.jsx(ge,{...g("root"),ref:t,...m,children:p}):v.jsx(ge,{...g("root"),ref:t,component:f[s],variant:h,size:r,...m})});Os.defaultLoaders=Vwe;Os.classes=Yd;Os.displayName="@mantine/core/Loader";var sF={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const ole={orientation:"horizontal"},_Ge=(e,{borderWidth:t})=>({group:{"--ai-border-width":Se(t)}}),gY=Le((e,t)=>{const n=we("ActionIconGroup",ole,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=we("ActionIconGroup",ole,e),p=mt({name:"ActionIconGroup",props:n,classes:sF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:_Ge,rootSelector:"group"});return v.jsx(ge,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});gY.classes=sF;gY.displayName="@mantine/core/ActionIconGroup";const wGe={},EGe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Jt(t,"ai-size"),"--ai-radius":n===void 0?void 0:Pr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Bn=Is((e,t)=>{const n=we("ActionIcon",wGe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:l,loading:u,loaderProps:c,size:d,color:f,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:b,"data-disabled":_,autoContrast:w,mod:E,...x}=n,S=mt({name:["ActionIcon",p],props:n,className:r,style:l,classes:sF,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:EGe});return v.jsxs(ds,{...S("root",{active:!b&&!u&&!_}),...x,unstyled:i,variant:s,size:d,disabled:b||u,ref:t,mod:[{loading:u,disabled:b||_},E],children:[v.jsx(Nf,{mounted:!!u,transition:"slide-down",duration:150,children:C=>v.jsx(ge,{component:"span",...S("loader",{style:C}),"aria-hidden":!0,children:v.jsx(Os,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),v.jsx(ge,{component:"span",mod:{loading:u},...S("icon"),children:y})]})});Bn.classes=sF;Bn.displayName="@mantine/core/ActionIcon";Bn.Group=gY;const Hwe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>v.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:v.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Hwe.displayName="@mantine/core/CloseIcon";var qwe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const xGe={variant:"subtle"},SGe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Jt(t,"cb-size"),"--cb-radius":n===void 0?void 0:Pr(n),"--cb-icon-size":Se(r)}}),rg=Is((e,t)=>{const n=we("CloseButton",xGe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:l,style:u,styles:c,unstyled:d,"data-disabled":f,disabled:h,variant:p,icon:m,mod:g,...y}=n,b=mt({name:"CloseButton",props:n,className:a,style:u,classes:qwe,classNames:l,styles:c,unstyled:d,vars:s,varsResolver:SGe});return v.jsxs(ds,{ref:t,...y,unstyled:d,variant:p,disabled:h,mod:[{disabled:h||f},g],...b("root",{variant:p,active:!h&&!f}),children:[m||v.jsx(Hwe,{}),i]})});rg.classes=qwe;rg.displayName="@mantine/core/CloseButton";function TGe(e){return I.Children.toArray(e).filter(Boolean)}var Wwe={root:"m_4081bf90"};const CGe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},AGe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":ru(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Ln=Le((e,t)=>{const n=we("Group",CGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:l,gap:u,align:c,justify:d,wrap:f,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:b,..._}=n,w=TGe(l),E=w.length,x=ru(u??"md"),C={childWidth:`calc(${100/E}% - (${x} - ${x} / ${E}))`},A=mt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:Wwe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:AGe});return v.jsx(ge,{...A("root"),ref:t,variant:g,mod:[{grow:h},b],size:y,..._,children:w})});Ln.classes=Wwe;Ln.displayName="@mantine/core/Group";var Gwe={root:"m_9814e45f"};const IGe={zIndex:ad("modal")},kGe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Sc(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Se(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Pr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),zA=Is((e,t)=>{const n=we("Overlay",IGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fixed:u,center:c,children:d,radius:f,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:b,..._}=n,w=mt({name:"Overlay",props:n,classes:Gwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:kGe});return v.jsx(ge,{ref:t,...w("root"),mod:[{center:c,fixed:u},b],..._,children:d})});zA.classes=Gwe;zA.displayName="@mantine/core/Overlay";const[RGe,ig]=Fs("ModalBase component was not found in tree");function PGe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=qG()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function NGe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=ta(e),[l,u]=I.useState(!1),[c,d]=I.useState(!1),f=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=PGe({opened:n,transitionDuration:f});return G_e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),V_e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:l,bodyMounted:c,shouldLockScroll:h,setTitleMounted:u,setBodyMounted:d}}const Ywe=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:l,withinPortal:u,portalProps:c,lockScroll:d,children:f,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:b,..._},w)=>{const{_id:E,titleMounted:x,bodyMounted:S,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:R}=NGe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a}),{key:P,...L}=b||{};return v.jsx(xk,{...c,withinPortal:u,children:v.jsx(RGe,{value:{opened:t,onClose:n,closeOnClickOutside:l,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:x,bodyMounted:S,setTitleMounted:A,setBodyMounted:R,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:v.jsx(YL,{enabled:C&&d,...L,children:v.jsx(ge,{ref:w,..._,__vars:{...g,"--mb-z-index":(h||ad("modal")).toString(),"--mb-shadow":UG(p),"--mb-padding":ru(m)},children:f})},P)})})});function OGe(){const e=ig();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var BE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const yY=I.forwardRef(({className:e,...t},n)=>{const r=OGe(),i=ig();return v.jsx(ge,{ref:n,...t,id:r,className:vt({[BE.body]:!i.unstyled},e)})});yY.displayName="@mantine/core/ModalBaseBody";const vY=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=ig();return v.jsx(rg,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:vt({[BE.close]:!i.unstyled},e),unstyled:i.unstyled})});vY.displayName="@mantine/core/ModalBaseCloseButton";const Kwe=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=ig();return v.jsx(Nf,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:l=>v.jsx("div",{...n,className:vt({[BE.inner]:!a.unstyled},n.className),children:v.jsx(iF,{active:a.opened&&a.trapFocus,children:v.jsx(Z1,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,l],className:vt({[BE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),bY=I.forwardRef(({className:e,...t},n)=>{const r=ig();return v.jsx(ge,{component:"header",ref:n,className:vt({[BE.header]:!r.unstyled},e),...t})});bY.displayName="@mantine/core/ModalBaseHeader";const DGe={duration:200,timingFunction:"ease",transition:"fade"};function MGe(e){const t=ig();return{...DGe,...t.transitionProps,...e}}const _Y=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=ig(),o=MGe(t);return v.jsx(Nf,{mounted:s.opened,...o,transition:"fade",children:a=>v.jsx(zA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:l=>{e==null||e(l),s.closeOnClickOutside&&s.onClose()},...r})})});_Y.displayName="@mantine/core/ModalBaseOverlay";function $Ge(){const e=ig();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const wY=I.forwardRef(({className:e,...t},n)=>{const r=$Ge(),i=ig();return v.jsx(ge,{component:"h2",ref:n,className:vt({[BE.title]:!i.unstyled},e),...t,id:r})});wY.displayName="@mantine/core/ModalBaseTitle";function Xwe({children:e}){return v.jsx(v.Fragment,{children:e})}const[LGe,sS]=jb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var ud={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const ale={},FGe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${Zs(t)} - ${Se(2)})`}}),oF=Le((e,t)=>{const n=we("InputDescription",ale,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=we("InputDescription",ale,n),p=sS(),m=mt({name:["InputWrapper",c],props:n,classes:ud,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:l,varsResolver:FGe}),g=d&&(p==null?void 0:p.getStyles)||m;return v.jsx(ge,{component:"p",ref:t,variant:f,size:u,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});oF.classes=ud;oF.displayName="@mantine/core/InputDescription";const jGe={},BGe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${Zs(t)} - ${Se(2)})`}}),aF=Le((e,t)=>{const n=we("InputError",jGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,__staticSelector:c,__inheritStyles:d=!0,variant:f,...h}=n,p=mt({name:["InputWrapper",c],props:n,classes:ud,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:l,varsResolver:BGe}),m=sS(),g=d&&(m==null?void 0:m.getStyles)||p;return v.jsx(ge,{component:"p",ref:t,variant:f,size:u,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});aF.classes=ud;aF.displayName="@mantine/core/InputError";const lle={labelElement:"label"},zGe=(e,{size:t})=>({label:{"--input-label-size":Zs(t),"--input-asterisk-color":void 0}}),lF=Le((e,t)=>{const n=we("InputLabel",lle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,labelElement:u,size:c,required:d,htmlFor:f,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...b}=we("InputLabel",lle,n),_=mt({name:["InputWrapper",m],props:n,classes:ud,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:l,varsResolver:zGe}),w=sS(),E=(w==null?void 0:w.getStyles)||_;return v.jsxs(ge,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:u,variant:g,size:c,ref:t,htmlFor:u==="label"?f:void 0,mod:[{required:d},y],onMouseDown:x=>{h==null||h(x),!x.defaultPrevented&&x.detail>1&&x.preventDefault()},...b,children:[p,d&&v.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});lF.classes=ud;lF.displayName="@mantine/core/InputLabel";const ule={},EY=Le((e,t)=>{const n=we("InputPlaceholder",ule,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,variant:c,error:d,mod:f,...h}=we("InputPlaceholder",ule,n),p=mt({name:["InputPlaceholder",u],props:n,classes:ud,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return v.jsx(ge,{...p("placeholder"),mod:[{error:!!d},f],component:"span",variant:c,ref:t,...h})});EY.classes=ud;EY.displayName="@mantine/core/InputPlaceholder";function UGe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(l=>l==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const VGe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},HGe=(e,{size:t})=>({label:{"--input-label-size":Zs(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${Zs(t)} - ${Se(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${Zs(t)} - ${Se(2)})`}}),xY=Le((e,t)=>{const n=we("InputWrapper",VGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,variant:c,__staticSelector:d,inputContainer:f,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:b,errorProps:_,labelElement:w,children:E,withAsterisk:x,id:S,required:C,__stylesApiProps:A,mod:R,...P}=n,L=mt({name:["InputWrapper",d],props:A||n,classes:ud,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:HGe}),k={size:u,variant:c,__staticSelector:d},$=ta(S),D=typeof x=="boolean"?x:C,M=(_==null?void 0:_.id)||`${$}-error`,B=(b==null?void 0:b.id)||`${$}-description`,z=$,U=!!m&&typeof m!="boolean",O=!!g,V=`${U?M:""} ${O?B:""}`,W=V.trim().length>0?V.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,H=p&&v.jsx(lF,{labelElement:w,id:j,htmlFor:z,required:D,...k,...y,children:p},"label"),G=O&&v.jsx(oF,{...b,...k,size:(b==null?void 0:b.size)||k.size,id:(b==null?void 0:b.id)||B,children:g},"description"),J=v.jsx(I.Fragment,{children:f(E)},"input"),se=U&&I.createElement(aF,{..._,...k,size:(_==null?void 0:_.size)||k.size,key:"error",id:(_==null?void 0:_.id)||M},m),ie=h.map(ne=>{switch(ne){case"label":return H;case"input":return J;case"description":return G;case"error":return se;default:return null}});return v.jsx(LGe,{value:{getStyles:L,describedBy:W,inputId:z,labelId:j,...UGe(h,{hasDescription:O,hasError:U})},children:v.jsx(ge,{ref:t,variant:c,size:u,mod:[{error:!!m},R],...L("root"),...P,children:ie})})});xY.classes=ud;xY.displayName="@mantine/core/InputWrapper";const qGe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},WGe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Jt(t.size,"input-height"),"--input-fz":Zs(t.size),"--input-radius":t.radius===void 0?void 0:Pr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Se(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Se(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Jt(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),Kr=Is((e,t)=>{const n=we("Input",qGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:l,__staticSelector:u,__stylesApiProps:c,size:d,wrapperProps:f,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:b,rightSectionProps:_,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:x,variant:S,vars:C,pointer:A,multiline:R,radius:P,id:L,withAria:k,withErrorStyles:$,mod:D,inputSize:M,...B}=n,{styleProps:z,rest:U}=zb(B),O=sS(),V={offsetBottom:O==null?void 0:O.offsetBottom,offsetTop:O==null?void 0:O.offsetTop},W=mt({name:["Input",u],props:c||n,classes:ud,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:V,rootSelector:"wrapper",vars:C,varsResolver:WGe}),j=k?{required:l,disabled:p,"aria-invalid":!!h,"aria-describedby":O==null?void 0:O.describedBy,id:(O==null?void 0:O.inputId)||L}:{};return v.jsxs(ge,{...W("wrapper"),...z,...f,mod:[{error:!!h&&$,pointer:A,disabled:p,multiline:R,"data-with-right-section":!!b,"data-with-left-section":!!m},D],variant:S,size:d,children:[m&&v.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),v.jsx(ge,{component:"input",...U,...j,ref:t,required:l,mod:{disabled:p,error:!!h&&$},variant:S,__size:M,...W("input")}),b&&v.jsx("div",{..._,"data-position":"right",...W("section",{className:_==null?void 0:_.className,style:_==null?void 0:_.style}),children:b})]})});Kr.classes=ud;Kr.Wrapper=xY;Kr.Label=lF;Kr.Error=aF;Kr.Description=oF;Kr.Placeholder=EY;Kr.displayName="@mantine/core/Input";function SY(e,t,n){const r=we(e,t,n),{label:i,description:s,error:o,required:a,classNames:l,styles:u,className:c,unstyled:d,__staticSelector:f,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:b,size:_,style:w,inputContainer:E,inputWrapperOrder:x,withAsterisk:S,variant:C,vars:A,mod:R,...P}=r,{styleProps:L,rest:k}=zb(P),$={label:i,description:s,error:o,required:a,classNames:l,className:c,__staticSelector:f,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:d,styles:u,size:_,style:w,inputContainer:E,inputWrapperOrder:x,withAsterisk:S,variant:C,id:b,mod:R,...y};return{...k,classNames:l,styles:u,unstyled:d,wrapperProps:{...$,...L},inputProps:{required:a,classNames:l,styles:u,unstyled:d,size:_,__staticSelector:f,__stylesApiProps:h||r,error:o,variant:C,id:b}}}const GGe={__staticSelector:"InputBase",withAria:!0},gu=Is((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=SY("InputBase",GGe,e);return v.jsx(Kr.Wrapper,{...r,children:v.jsx(Kr,{...n,...i,ref:t})})});gu.classes={...Kr.classes,...Kr.Wrapper.classes};gu.displayName="@mantine/core/InputBase";const YGe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Qwe={root:"m_8bffd616"};const KGe={},Ct=Is((e,t)=>{const n=we("Flex",KGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m,...g}=n,y=mt({name:"Flex",classes:Qwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l}),b=As(),_=eF(),w=nwe({styleProps:{gap:u,rowGap:c,columnGap:d,align:f,justify:h,wrap:p,direction:m},theme:b,data:YGe});return v.jsxs(v.Fragment,{children:[w.hasResponsiveStyles&&v.jsx(wk,{selector:`.${_}`,styles:w.styles,media:w.media}),v.jsx(ge,{ref:t,...y("root",{className:_,style:nS(w.inlineStyles)}),...g})]})});Ct.classes=Qwe;Ct.displayName="@mantine/core/Flex";function XGe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function QGe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,l]=I.useState(typeof r=="boolean"?r:!1),u=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),u(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},d=I.useRef(),f=I.useRef();return I.useEffect(()=>{if(u(),e)return d.current=new ResizeObserver(c),d.current.observe(e),t&&(f.current=new ResizeObserver(c),f.current.observe(t)),()=>{var h,p;(h=d.current)==null||h.disconnect(),(p=f.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{XGe(p.target,t)&&(c(),l(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),XVe(()=>{X_e()!=="test"&&o(!0)},20,{autoInvoke:!0}),JVe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Jwe={root:"m_96b553a6"};const JGe={},ZGe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),TY=Le((e,t)=>{const n=we("FloatingIndicator",JGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,target:u,parent:c,transitionDuration:d,mod:f,displayAfterTransitionEnd:h,...p}=n,m=mt({name:"FloatingIndicator",classes:Jwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:ZGe}),g=I.useRef(null),{initialized:y,hidden:b}=QGe({target:u,parent:c,ref:g,displayAfterTransitionEnd:h}),_=ps(t,g);return!u||!c?null:v.jsx(ge,{ref:_,mod:[{initialized:y,hidden:b},f],...m("root"),...p})});TY.displayName="@mantine/core/FloatingIndicator";TY.classes=Jwe;const[eYe,CY]=Fs("Accordion component was not found in the tree");function zE({style:e,size:t=16,...n}){return v.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Se(t),height:Se(t),display:"block"},...n,children:v.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}zE.displayName="@mantine/core/AccordionChevron";const[tYe,Zwe]=Fs("Accordion.Item component was not found in the tree");var Sk={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const nYe={},AY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:l,onClick:u,onKeyDown:c,children:d,disabled:f,mod:h,...p}=we("AccordionControl",nYe,e),{value:m}=Zwe(),g=CY(),y=g.isItemActive(m),b=typeof g.order=="number",_=`h${g.order}`,w=v.jsxs(ds,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:f},h],ref:t,onClick:E=>{u==null||u(E),g.onChange(m)},type:"button",disabled:f,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:zG({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[v.jsx(ge,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),v.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:d}),l&&v.jsx(ge,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:l})]});return b?v.jsx(_,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});AY.displayName="@mantine/core/AccordionControl";AY.classes=Sk;const rYe={},IY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:l,...u}=we("AccordionItem",rYe,e),c=CY();return v.jsx(tYe,{value:{value:a},children:v.jsx(ge,{ref:t,mod:[{active:c.isItemActive(a)},l],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...u})})});IY.displayName="@mantine/core/AccordionItem";IY.classes=Sk;const iYe={},kY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...l}=we("AccordionPanel",iYe,e),{value:u}=Zwe(),c=CY();return v.jsx(Vy,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...l,in:c.isItemActive(u),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(u),"aria-labelledby":c.getControlId(u),children:v.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});kY.displayName="@mantine/core/AccordionPanel";kY.classes=Sk;const sYe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:v.jsx(zE,{})},oYe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Se(n),"--accordion-radius":r===void 0?void 0:Pr(r)}});function Ol(e){const t=we("Accordion",sYe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:l,multiple:u,value:c,defaultValue:d,onChange:f,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:b,order:_,chevron:w,variant:E,radius:x,...S}=t,C=ta(h),[A,R]=ji({value:c,defaultValue:d,finalValue:u?[]:null,onChange:f}),P=$=>Array.isArray(A)?A.includes($):$===A,L=$=>{const D=Array.isArray(A)?A.includes($)?A.filter(M=>M!==$):[...A,$]:$===A?null:$;R(D)},k=mt({name:"Accordion",classes:Sk,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:oYe});return v.jsx(eYe,{value:{isItemActive:P,onChange:L,getControlId:_M(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:_M(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:_,chevron:w,loop:p,getStyles:k,variant:E,unstyled:o},children:v.jsx(ge,{...k("root"),id:C,...S,variant:E,"data-accordion":!0,children:l})})}const aYe=e=>e;Ol.extend=aYe;Ol.classes=Sk;Ol.displayName="@mantine/core/Accordion";Ol.Item=IY;Ol.Panel=kY;Ol.Control=AY;Ol.Chevron=zE;var eEe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const lYe={},uYe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Pr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},oS=Le((e,t)=>{const n=we("Alert",lYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,title:d,children:f,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:b,autoContrast:_,...w}=n,E=mt({name:"Alert",classes:eEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:uYe}),x=ta(h),S=d&&`${x}-title`||void 0,C=`${x}-body`;return v.jsx(ge,{id:x,...E("root",{variant:b}),variant:b,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":S,children:v.jsxs("div",{...E("wrapper"),children:[p&&v.jsx("div",{...E("icon"),children:p}),v.jsxs("div",{...E("body"),children:[d&&v.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:v.jsx("span",{id:S,...E("label"),children:d})}),f&&v.jsx("div",{id:C,...E("message"),"data-variant":b,children:f})]}),m&&v.jsx(rg,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});oS.classes=eEe;oS.displayName="@mantine/core/Alert";var tEe={root:"m_b6d8b162"};function cYe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const dYe={inherit:!1},fYe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":Zs(i),"--text-lh":z_e(i),"--text-gradient":t==="gradient"?K7(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?zr(s,e):void 0}}),Xe=Is((e,t)=>{const n=we("Text",dYe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:l,__staticSelector:u,vars:c,className:d,style:f,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:b,..._}=n,w=mt({name:["Text",u],props:n,classes:tEe,className:d,style:f,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:fYe});return v.jsx(ge,{...w("root",{focusable:!0}),ref:t,component:l?"span":"p",variant:g,mod:[{"data-truncate":cYe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:b,..._})});Xe.classes=tEe;Xe.displayName="@mantine/core/Text";var nEe={root:"m_849cf0da"};const hYe={underline:"hover"},qy=Is((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=we("Anchor",hYe,e);return v.jsx(Xe,{component:"a",ref:t,className:vt({[nEe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});qy.classes=nEe;qy.displayName="@mantine/core/Anchor";const[pYe,aS]=Fs("AppShell was not found in tree");var Wy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const mYe={},RY=Le((e,t)=>{const n=we("AppShellAside",mYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=aS();return h.disabled?null:v.jsx(ge,{component:"aside",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});RY.classes=Wy;RY.displayName="@mantine/core/AppShellAside";const gYe={},PY=Le((e,t)=>{var p;const n=we("AppShellFooter",gYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=aS();return h.disabled?null:v.jsx(ge,{component:"footer",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("footer",{className:vt({[YL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});PY.classes=Wy;PY.displayName="@mantine/core/AppShellFooter";const yYe={},NY=Le((e,t)=>{var p;const n=we("AppShellHeader",yYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=aS();return h.disabled?null:v.jsx(ge,{component:"header",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("header",{className:vt({[YL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});NY.classes=Wy;NY.displayName="@mantine/core/AppShellHeader";const vYe={},OY=Le((e,t)=>{const n=we("AppShellMain",vYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=aS();return v.jsx(ge,{component:"main",ref:t,...u.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...l})});OY.classes=Wy;OY.displayName="@mantine/core/AppShellMain";function Tk(e){return typeof e=="object"?e.base:e}function Ck(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function Ak(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function bYe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var l,u,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((l=r==null?void 0:r.collapsed)!=null&&l.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),Ck(s)){const d=Se(Tk(s));e["--app-shell-aside-width"]=d,e["--app-shell-aside-offset"]=d}if(Ak(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Se(s.base),e["--app-shell-aside-offset"]=Se(s.base)),Gi(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-aside-width"]=Se(s[d]),t[d]["--app-shell-aside-offset"]=Se(s[d]))})),(u=r==null?void 0:r.collapsed)!=null&&u.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-aside-transform"]=o,t[d]["--app-shell-aside-transform-rtl"]=a,t[d]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=VG(r.breakpoint,i)-.1;n[d]=n[d]||{},n[d]["--app-shell-aside-width"]="100%",n[d]["--app-shell-aside-offset"]="0px",n[d]["--app-shell-aside-transform"]=o,n[d]["--app-shell-aside-transform-rtl"]=a}}function _Ye({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(Ck(r)){const o=Se(Tk(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}Ak(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Se(r.base),s&&(e["--app-shell-footer-offset"]=Se(r.base))),Gi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Se(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Se(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function wYe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(Ck(r)){const o=Se(Tk(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}Ak(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Se(r.base),s&&(e["--app-shell-header-offset"]=Se(r.base))),Gi(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Se(r[o]),s&&(t[o]["--app-shell-header-offset"]=Se(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function EYe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var l,u,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((l=r==null?void 0:r.collapsed)!=null&&l.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),Ck(s)){const d=Se(Tk(s));e["--app-shell-navbar-width"]=d,e["--app-shell-navbar-offset"]=d}if(Ak(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Se(s.base),e["--app-shell-navbar-offset"]=Se(s.base)),Gi(s).forEach(d=>{d!=="base"&&(t[d]=t[d]||{},t[d]["--app-shell-navbar-width"]=Se(s[d]),t[d]["--app-shell-navbar-offset"]=Se(s[d]))})),(u=r==null?void 0:r.collapsed)!=null&&u.desktop){const d=r.breakpoint;t[d]=t[d]||{},t[d]["--app-shell-navbar-transform"]=o,t[d]["--app-shell-navbar-transform-rtl"]=a,t[d]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const d=VG(r.breakpoint,i)-.1;n[d]=n[d]||{},n[d]["--app-shell-navbar-width"]="100%",n[d]["--app-shell-navbar-offset"]="0px",n[d]["--app-shell-navbar-transform"]=o,n[d]["--app-shell-navbar-transform-rtl"]=a}}function R8(e){return Number(e)===0?"0px":ru(e)}function xYe({padding:e,baseStyles:t,minMediaStyles:n}){Ck(e)&&(t["--app-shell-padding"]=R8(Tk(e))),Ak(e)&&(e.base&&(t["--app-shell-padding"]=R8(e.base)),Gi(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=R8(e[r]))}))}function SYe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},l={};EYe({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),bYe({baseStyles:l,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),wYe({baseStyles:l,minMediaStyles:o,header:t}),_Ye({baseStyles:l,minMediaStyles:o,footer:n}),xYe({baseStyles:l,minMediaStyles:o,padding:i});const u=EM(Gi(o),s).map(f=>({query:`(min-width: ${bM(f.px)})`,styles:o[f.value]})),c=EM(Gi(a),s).map(f=>({query:`(max-width: ${bM(f.px)})`,styles:a[f.value]})),d=[...u,...c];return{baseStyles:l,media:d}}function TYe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=As(),o=zy(),{media:a,baseStyles:l}=SYe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return v.jsx(wk,{media:a,styles:l,selector:o.cssVariablesSelector})}const CYe={},DY=Le((e,t)=>{const n=we("AppShellNavbar",CYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,withBorder:u,zIndex:c,mod:d,...f}=n,h=aS();return h.disabled?null:v.jsx(ge,{component:"nav",ref:t,mod:[{"with-border":u??h.withBorder},d],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...f,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});DY.classes=Wy;DY.displayName="@mantine/core/AppShellNavbar";const AYe={},MY=Is((e,t)=>{const n=we("AppShellSection",AYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:l,mod:u,...c}=n,d=aS();return v.jsx(ge,{ref:t,mod:[{grow:l},u],...d.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});MY.classes=Wy;MY.displayName="@mantine/core/AppShellSection";function IYe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return G_e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Bb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const kYe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:ad("app")},RYe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),Ir=Le((e,t)=>{const n=we("AppShell",kYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,navbar:u,withBorder:c,padding:d,transitionDuration:f,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:b,footer:_,offsetScrollbars:w,mod:E,...x}=n,S=mt({name:"AppShell",classes:Wy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:RYe}),C=IYe({disabled:y,transitionDuration:f});return v.jsxs(pYe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[v.jsx(TYe,{navbar:u,header:p,aside:b,footer:_,padding:d}),v.jsx(ge,{ref:t,...S("root"),mod:[{resizing:C,layout:g,disabled:y},E],...x})]})});Ir.classes=Wy;Ir.displayName="@mantine/core/AppShell";Ir.Navbar=DY;Ir.Header=NY;Ir.Main=OY;Ir.Aside=RY;Ir.Footer=PY;Ir.Section=MY;function rEe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>rEe(t))}:e}function $Y(e){return e?e.map(t=>rEe(t)):[]}function uF(e){return e.reduce((t,n)=>"group"in n?{...t,...uF(n.items)}:(t[n.value]=n,t),{})}var iu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const PYe={error:null},NYe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Jt(t,"combobox-chevron-size")}}),LY=Le((e,t)=>{const n=we("ComboboxChevron",PYe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,mod:d,...f}=n,h=mt({name:"ComboboxChevron",classes:iu,props:n,style:s,className:o,classNames:a,styles:l,unstyled:u,vars:c,varsResolver:NYe,rootSelector:"chevron"});return v.jsx(ge,{component:"svg",...f,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},d],ref:t,children:v.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});LY.classes=iu;LY.displayName="@mantine/core/ComboboxChevron";const[OYe,cd]=Fs("Combobox component was not found in tree"),iEe=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>v.jsx(rg,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));iEe.displayName="@mantine/core/ComboboxClearButton";const DYe={},FY=Le((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=we("ComboboxDropdown",DYe,e),l=cd();return v.jsx(hn.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...l.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});FY.classes=iu;FY.displayName="@mantine/core/ComboboxDropdown";const MYe={refProp:"ref"},sEe=Le((e,t)=>{const{children:n,refProp:r}=we("ComboboxDropdownTarget",MYe,e);if(cd(),!tg(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return v.jsx(hn.Target,{ref:t,refProp:r,children:n})});sEe.displayName="@mantine/core/ComboboxDropdownTarget";const $Ye={},jY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("ComboboxEmpty",$Ye,e),l=cd();return v.jsx(ge,{ref:t,...l.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});jY.classes=iu;jY.displayName="@mantine/core/ComboboxEmpty";function BY({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=cd(),[a,l]=I.useState(null),u=d=>{if(e==null||e(d),!o.readOnly&&t){if(d.nativeEvent.isComposing)return;if(d.nativeEvent.code==="ArrowDown"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="ArrowUp"&&(d.preventDefault(),o.store.dropdownOpened?l(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),l(o.store.selectActiveOption()))),d.nativeEvent.code==="Enter"||d.nativeEvent.code==="NumpadEnter"){if(d.nativeEvent.keyCode===229)return;const f=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&f!==-1?(d.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(d.preventDefault(),o.store.openDropdown("keyboard"))}d.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),d.nativeEvent.code==="Space"&&i==="button"&&(d.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:u}}const LYe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},oEe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=we("ComboboxEventsTarget",LYe,e);if(!tg(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=cd(),d=BY({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l});return I.cloneElement(n,{...d,...u,[r]:ps(t,c.store.targetRef,n==null?void 0:n.ref)})});oEe.displayName="@mantine/core/ComboboxEventsTarget";const FYe={},zY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("ComboboxFooter",FYe,e),l=cd();return v.jsx(ge,{ref:t,...l.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});zY.classes=iu;zY.displayName="@mantine/core/ComboboxFooter";const jYe={},UY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:l,...u}=we("ComboboxGroup",jYe,e),c=cd();return v.jsxs(ge,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...u,children:[l&&v.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:l}),a]})});UY.classes=iu;UY.displayName="@mantine/core/ComboboxGroup";const BYe={},VY=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("ComboboxHeader",BYe,e),l=cd();return v.jsx(ge,{ref:t,...l.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:u=>{u.preventDefault()}})});VY.classes=iu;VY.displayName="@mantine/core/ComboboxHeader";function aEe({value:e,valuesDivider:t=",",...n}){return v.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}aEe.displayName="@mantine/core/ComboboxHiddenInput";const zYe={},HY=Le((e,t)=>{const n=we("ComboboxOption",zYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:l,id:u,active:c,onMouseDown:d,onMouseOver:f,disabled:h,selected:p,mod:m,...g}=n,y=cd(),b=I.useId(),_=u||b;return v.jsx(ge,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:_,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),l==null||l(w))},onMouseDown:w=>{w.preventDefault(),d==null||d(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),f==null||f(w)}})});HY.classes=iu;HY.displayName="@mantine/core/ComboboxOption";const UYe={},qY=Le((e,t)=>{const n=we("ComboboxOptions",UYe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:l,labelledBy:u,...c}=n,d=cd(),f=ta(a);return I.useEffect(()=>{d.store.setListId(f)},[f]),v.jsx(ge,{ref:t,...d.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:f,role:"listbox","aria-labelledby":u,onMouseDown:h=>{h.preventDefault(),l==null||l(h)}})});qY.classes=iu;qY.displayName="@mantine/core/ComboboxOptions";const VYe={withAriaAttributes:!0,withKeyboardNavigation:!0},WY=Le((e,t)=>{const n=we("ComboboxSearch",VYe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:l,withKeyboardNavigation:u,size:c,...d}=n,f=cd(),h=f.getStyles("search"),p=BY({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:u,withExpandedAttribute:!1,onKeyDown:l,autoComplete:"off"});return v.jsx(Kr,{ref:ps(t,f.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||f.size,...p,...d,__staticSelector:"Combobox"})});WY.classes=iu;WY.displayName="@mantine/core/ComboboxSearch";const HYe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},lEe=Le((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:l,...u}=we("ComboboxTarget",HYe,e);if(!tg(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=cd(),d=BY({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:l}),f=I.cloneElement(n,{...d,...u});return v.jsx(hn.Target,{ref:ps(t,c.store.targetRef),children:f})});lEe.displayName="@mantine/core/ComboboxTarget";function qYe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function WYe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function GYe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function Ik({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,l]=ji({value:t,defaultValue:e,finalValue:!1,onChange:n}),u=I.useRef(null),c=I.useRef(-1),d=I.useRef(null),f=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((M="unknown")=>{a||(l(!0),i==null||i(M))},[l,i,a]),y=I.useCallback((M="unknown")=>{a&&(l(!1),r==null||r(M))},[l,r,a]),b=I.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),_=I.useCallback(()=>{const M=document.querySelector(`#${u.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),w=I.useCallback(M=>{const B=document.getElementById(u.current),z=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!z)return null;const U=M>=z.length?0:M<0?z.length-1:M;return c.current=U,z!=null&&z[U]&&!z[U].hasAttribute("data-combobox-disabled")?(_(),z[U].setAttribute("data-combobox-selected","true"),z[U].setAttribute("aria-selected","true"),z[U].scrollIntoView({block:"nearest",behavior:o}),z[U].id):null},[o,_]),E=I.useCallback(()=>{const M=document.querySelector(`#${u.current} [data-combobox-active]`);if(M){const B=document.querySelectorAll(`#${u.current} [data-combobox-option]`),z=Array.from(B).findIndex(U=>U===M);return w(z)}return w(0)},[w]),x=I.useCallback(()=>w(WYe(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[w,s]),S=I.useCallback(()=>w(qYe(c.current,document.querySelectorAll(`#${u.current} [data-combobox-option]`),s)),[w,s]),C=I.useCallback(()=>w(GYe(document.querySelectorAll(`#${u.current} [data-combobox-option]`))),[w]),A=I.useCallback((M="selected",B)=>{m.current=window.setTimeout(()=>{var O;const z=document.querySelectorAll(`#${u.current} [data-combobox-option]`),U=Array.from(z).findIndex(V=>V.hasAttribute(`data-combobox-${M}`));c.current=U,B!=null&&B.scrollIntoView&&((O=z[U])==null||O.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),R=I.useCallback(()=>{c.current=-1,_()},[_]),P=I.useCallback(()=>{const M=document.querySelectorAll(`#${u.current} [data-combobox-option]`),B=M==null?void 0:M[c.current];B==null||B.click()},[]),L=I.useCallback(M=>{u.current=M},[]),k=I.useCallback(()=>{h.current=window.setTimeout(()=>d.current.focus(),0)},[]),$=I.useCallback(()=>{p.current=window.setTimeout(()=>f.current.focus(),0)},[]),D=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:b,selectedOptionIndex:c.current,getSelectedOptionIndex:D,selectOption:w,selectFirstOption:C,selectActiveOption:E,selectNextOption:x,selectPreviousOption:S,resetSelectedOption:R,updateSelectedOptionIndex:A,listId:u.current,setListId:L,clickSelectedOption:P,searchRef:d,focusSearchInput:k,targetRef:f,focusTarget:$}}const YYe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},KYe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":Zs(t),"--combobox-option-padding":Jt(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Se(n),"--combobox-option-fz":Zs(t),"--combobox-option-padding":Jt(t,"combobox-option-padding")}});function sn(e){const t=we("Combobox",YYe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:l,onClose:u,size:c,dropdownPadding:d,resetSelectionOnOptionHover:f,__staticSelector:h,readOnly:p,...m}=t,g=Ik(),y=o||g,b=mt({name:h||"Combobox",classes:iu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:KYe}),_=()=>{u==null||u(),y.closeDropdown()};return v.jsx(OYe,{value:{getStyles:b,store:y,onOptionSubmit:l,size:c,resetSelectionOnOptionHover:f,readOnly:p},children:v.jsx(hn,{opened:y.dropdownOpened,...m,onClose:_,withRoles:!1,unstyled:i,children:s})})}const XYe=e=>e;sn.extend=XYe;sn.classes=iu;sn.displayName="@mantine/core/Combobox";sn.Target=lEe;sn.Dropdown=FY;sn.Options=qY;sn.Option=HY;sn.Search=WY;sn.Empty=jY;sn.Chevron=LY;sn.Footer=zY;sn.Header=VY;sn.EventsTarget=oEe;sn.DropdownTarget=sEe;sn.Group=UY;sn.ClearButton=iEe;sn.HiddenInput=aEe;var uEe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const cEe=uEe,cF=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:l,id:u,disabled:c,error:d,size:f,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:b,mod:_,...w},E)=>{const x=mt({name:e,props:t,className:n,style:y,classes:uEe,classNames:r,styles:i,unstyled:s});return v.jsx(ge,{...x("root"),ref:E,__vars:{"--label-fz":Zs(f),"--label-lh":Jt(f,"label-lh")},mod:[{"label-position":h},_],variant:g,size:f,...w,children:v.jsxs(ge,{component:p,htmlFor:p==="label"?u:void 0,...x("body"),children:[o,v.jsxs("div",{...x("labelWrapper"),"data-disabled":c||void 0,children:[a&&v.jsx(ge,{component:m,htmlFor:m==="label"?u:void 0,...x("label"),"data-disabled":c||void 0,children:a}),l&&v.jsx(Kr.Description,{size:f,__inheritStyles:!1,...x("description"),children:l}),d&&typeof d!="boolean"&&v.jsx(Kr.Error,{size:f,__inheritStyles:!1,...x("error"),children:d})]})]})})});cF.displayName="@mantine/core/InlineInput";const dEe=I.createContext(null),QYe=dEe.Provider,fEe=()=>I.useContext(dEe),[JYe,ZYe]=jb();var hEe={card:"m_26775b0a"};const eKe={withBorder:!0},tKe=(e,{radius:t})=>({card:{"--card-radius":Pr(t)}}),GY=Le((e,t)=>{const n=we("CheckboxCard",eKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,...p}=n,m=mt({name:"CheckboxCard",classes:hEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:tKe,rootSelector:"card"}),g=fEe(),y=typeof u=="boolean"?u:(g==null?void 0:g.value.includes(f||""))||!1;return v.jsx(JYe,{value:{checked:y},children:v.jsx(ds,{ref:t,mod:[{"with-border":d,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:b=>{h==null||h(b),g==null||g.onChange(f||"")}})})});GY.displayName="@mantine/core/CheckboxCard";GY.classes=hEe;function YY({children:e,role:t}){const n=sS();return n?v.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):v.jsx(v.Fragment,{children:e})}const nKe={},KY=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=we("CheckboxGroup",nKe,e),[c,d]=ji({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return v.jsx(QYe,{value:{value:c,onChange:f,size:s},children:v.jsx(Kr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"CheckboxGroup",children:v.jsx(YY,{role:"group",children:a})})})});KY.classes=Kr.Wrapper.classes;KY.displayName="@mantine/core/CheckboxGroup";function pEe({size:e,style:t,...n}){const r=e!==void 0?{width:Se(e),height:Se(e),...t}:t;return v.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:v.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function mEe({indeterminate:e,...t}){return e?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:v.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):v.jsx(pEe,{...t})}var gEe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const rKe={icon:mEe},iKe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ku({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Jt(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Pr(t),"--checkbox-color":s==="outline"?l:zr(n,e),"--checkbox-icon-color":i?zr(i,e):Uy(o,e)?ap({color:n,theme:e,autoContrast:o}):void 0}}},XY=Le((e,t)=>{const n=we("CheckboxIndicator",rKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,indeterminate:c,radius:d,color:f,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:b,..._}=n,w=u,E=mt({name:"CheckboxIndicator",classes:gEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:iKe,rootSelector:"indicator"}),x=ZYe(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(x==null?void 0:x.checked)||!1;return v.jsx(ge,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:b},g],..._,children:v.jsx(w,{indeterminate:c,...E("icon")})})});XY.displayName="@mantine/core/CheckboxIndicator";XY.classes=gEe;var yEe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const sKe={labelPosition:"right",icon:mEe},oKe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ku({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Jt(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Pr(t),"--checkbox-color":s==="outline"?l:zr(n,e),"--checkbox-icon-color":i?zr(i,e):Uy(o,e)?ap({color:n,theme:e,autoContrast:o}):void 0}}},Qu=Le((e,t)=>{const n=we("Checkbox",sKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,id:d,size:f,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:b,error:_,disabled:w,variant:E,indeterminate:x,icon:S,rootRef:C,iconColor:A,onChange:R,autoContrast:P,mod:L,...k}=n,$=fEe(),D=f||($==null?void 0:$.size),M=S,B=mt({name:"Checkbox",props:n,classes:yEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:oKe}),{styleProps:z,rest:U}=zb(k),O=ta(d),V=$?{checked:$.value.includes(U.value),onChange:W=>{$.onChange(W),R==null||R(W)}}:{};return v.jsx(cF,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:O,size:D,labelPosition:y,label:c,description:b,error:_,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":V.checked||g||void 0,variant:E,ref:C,mod:L,...z,...p,children:v.jsxs(ge,{...B("inner"),mod:{"data-label-position":y},children:[v.jsx(ge,{component:"input",id:O,ref:t,checked:g,disabled:w,mod:{error:!!_,indeterminate:x},...B("input",{focusable:!0,variant:E}),onChange:R,...U,...V,type:"checkbox"}),v.jsx(M,{indeterminate:x,...B("icon")})]})})});Qu.classes={...yEe,...cEe};Qu.displayName="@mantine/core/Checkbox";Qu.Group=KY;Qu.Indicator=XY;Qu.Card=GY;function UE(e){return"group"in e}function vEe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;UE(o)&&i.push({group:o.group,items:vEe({options:o.items,search:t,limit:n-i.length})}),UE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function aKe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function bEe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(UE(n))bEe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function lKe(e,t){return Array.isArray(e)?e.includes(t):e===t}function _Ee({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!UE(e)){const a=lKe(n,e.value),l=t&&a&&v.jsx(pEe,{className:iu.optionsDropdownCheckIcon}),u=v.jsxs(v.Fragment,{children:[r==="left"&&l,v.jsx("span",{children:e.label}),r==="right"&&l]});return v.jsx(sn.Option,{value:e.value,disabled:e.disabled,className:vt({[iu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):u})}const o=e.items.map(a=>v.jsx(_Ee,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return v.jsx(sn.Group,{label:e.group,children:o})}function QY({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:l=!0,withCheckIcon:u=!1,value:c,checkIconPosition:d,nothingFoundMessage:f,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){bEe(e);const _=typeof i=="string"?(r||vEe)({options:e,search:l?i:"",limit:s??1/0}):e,w=aKe(_),E=_.map(x=>v.jsx(_Ee,{data:x,withCheckIcon:u,value:c,checkIconPosition:d,unstyled:h,renderOption:m},UE(x)?x.group:x.value));return v.jsx(sn.Dropdown,{hidden:t||n&&w,children:v.jsxs(sn.Options,{labelledBy:p,"aria-label":y,children:[a?v.jsx(Hy.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&f&&v.jsx(sn.Empty,{children:f})]})})}const uKe={},JY=Le((e,t)=>{const n=we("Autocomplete",uKe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:u,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:b,onOptionSubmit:_,comboboxProps:w,readOnly:E,disabled:x,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:R,size:P,id:L,renderOption:k,autoComplete:$,scrollAreaProps:D,...M}=n,B=ta(L),z=$Y(m),U=uF(z),[O,V]=ji({value:g,defaultValue:y,finalValue:"",onChange:p}),W=Ik({opened:a,defaultOpened:l,onDropdownOpen:c,onDropdownClose:()=>{u==null||u(),W.resetSelectedOption()}}),{resolvedClassNames:j,resolvedStyles:H}=lp({props:n,styles:i,classNames:r});return I.useEffect(()=>{b&&W.selectFirstOption()},[b,O]),v.jsxs(sn,{store:W,__staticSelector:"Autocomplete",classNames:j,styles:H,unstyled:s,readOnly:E,onOptionSubmit:G=>{_==null||_(G),V(U[G].label),W.closeDropdown()},size:P,...w,children:[v.jsx(sn.Target,{autoComplete:$,children:v.jsx(gu,{ref:t,...M,size:P,__staticSelector:"Autocomplete",disabled:x,readOnly:E,value:O,onChange:G=>{V(G.currentTarget.value),W.openDropdown(),b&&W.selectFirstOption()},onFocus:G=>{W.openDropdown(),d==null||d(G)},onBlur:G=>{W.closeDropdown(),f==null||f(G)},onClick:G=>{W.openDropdown(),h==null||h(G)},classNames:j,styles:H,unstyled:s,id:B})}),v.jsx(QY,{data:z,hidden:E||x,filter:S,search:O,limit:C,hiddenWhenEmpty:!0,withScrollArea:A,maxDropdownHeight:R,unstyled:s,labelId:M.label?`${B}-label`:void 0,"aria-label":M.label?void 0:M["aria-label"],renderOption:k,scrollAreaProps:D})]})});JY.classes={...gu.classes,...sn.classes};JY.displayName="@mantine/core/Autocomplete";var wEe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const cKe={},dKe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Jt(s,"badge-height"),"--badge-padding-x":Jt(s,"badge-padding-x"),"--badge-fz":Jt(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Pr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?zr(n,e):void 0}}},rf=Is((e,t)=>{const n=we("Badge",cKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,radius:u,color:c,gradient:d,leftSection:f,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:b,mod:_,...w}=n,E=mt({name:"Badge",props:n,classes:wEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:dKe});return v.jsxs(ge,{variant:m,mod:[{block:g,circle:b},_],...E("root",{variant:m}),ref:t,...w,children:[f&&v.jsx("span",{...E("section"),"data-position":"left",children:f}),v.jsx("span",{...E("label"),children:p}),h&&v.jsx("span",{...E("section"),"data-position":"right",children:h})]})});rf.classes=wEe;rf.displayName="@mantine/core/Badge";var EEe={root:"m_ddec01c0",icon:"m_dde7bd57",cite:"m_dde51a35"};const fKe={iconSize:48},hKe=(e,{color:t,iconSize:n,radius:r})=>{const i=Ku({color:t||e.primaryColor,theme:e,colorScheme:"dark"}),s=Ku({color:t||e.primaryColor,theme:e,colorScheme:"light"});return{root:{"--bq-bg-light":Sc(s.value,.07),"--bq-bg-dark":Sc(i.value,.06),"--bq-bd":zr(t,e),"--bq-icon-size":Se(n),"--bq-radius":Pr(r)}}},ZY=Le((e,t)=>{const n=we("Blockquote",fKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,icon:c,iconSize:d,cite:f,...h}=n,p=mt({name:"Blockquote",classes:EEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:hKe});return v.jsxs(ge,{component:"blockquote",ref:t,...p("root"),...h,children:[c&&v.jsx("span",{...p("icon"),children:c}),u,f&&v.jsx("cite",{...p("cite"),children:f})]})});ZY.classes=EEe;ZY.displayName="@mantine/core/Blockquote";var xEe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const pKe={},mKe=(e,{color:t,size:n,lineSize:r,transitionDuration:i,transitionTimingFunction:s})=>({root:{"--burger-color":t?zr(t,e):void 0,"--burger-size":Jt(n,"burger-size"),"--burger-line-size":r?Se(r):void 0,"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":s}}),eK=Le((e,t)=>{const n=we("Burger",pKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,opened:u,children:c,transitionDuration:d,transitionTimingFunction:f,...h}=n,p=mt({name:"Burger",classes:xEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:mKe});return v.jsxs(ds,{...p("root"),ref:t,...h,children:[v.jsx(ge,{mod:["reduce-motion",{opened:u}],...p("burger")}),c]})});eK.classes=xEe;eK.displayName="@mantine/core/Burger";var dF={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const cle={orientation:"horizontal"},gKe=(e,{borderWidth:t})=>({group:{"--button-border-width":Se(t)}}),tK=Le((e,t)=>{const n=we("ButtonGroup",cle,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:l,vars:u,borderWidth:c,variant:d,mod:f,...h}=we("ButtonGroup",cle,e),p=mt({name:"ButtonGroup",props:n,classes:dF,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:u,varsResolver:gKe,rootSelector:"group"});return v.jsx(ge,{...p("group"),ref:t,variant:d,mod:[{"data-orientation":l},f],role:"group",...h})});tK.classes=dF;tK.displayName="@mantine/core/ButtonGroup";const yKe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Se(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},vKe={},bKe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const l=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Jt(s,"button-height"),"--button-padding-x":Jt(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?Zs(s.replace("compact-","")):Zs(s),"--button-radius":t===void 0?void 0:Pr(t),"--button-bg":n||i?l.background:void 0,"--button-hover":n||i?l.hover:void 0,"--button-color":l.color,"--button-bd":n||i?l.border:void 0,"--button-hover-color":n||i?l.hoverColor:void 0}}},xn=Is((e,t)=>{const n=we("Button",vKe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:l,leftSection:u,rightSection:c,fullWidth:d,variant:f,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:b,unstyled:_,"data-disabled":w,autoContrast:E,mod:x,...S}=n,C=mt({name:"Button",props:n,classes:dF,className:s,style:r,classNames:y,styles:b,unstyled:_,vars:i,varsResolver:bKe}),A=!!u,R=!!c;return v.jsxs(ds,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:_,variant:f,disabled:a||p,mod:[{disabled:a||w,loading:p,block:d,"with-left-section":A,"with-right-section":R},x],...S,children:[v.jsx(Nf,{mounted:!!p,transition:yKe,duration:150,children:P=>v.jsx(ge,{component:"span",...C("loader",{style:P}),"aria-hidden":!0,children:v.jsx(Os,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),v.jsxs("span",{...C("inner"),children:[u&&v.jsx(ge,{component:"span",...C("section"),mod:{position:"left"},children:u}),v.jsx(ge,{component:"span",mod:{loading:p},...C("label"),children:l}),c&&v.jsx(ge,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});xn.classes=dF;xn.displayName="@mantine/core/Button";xn.Group=tK;const[_Ke,wKe]=Fs("Card component was not found in tree");var nK={root:"m_e615b15f",section:"m_599a2148"};const EKe={},fF=Is((e,t)=>{const n=we("CardSection",EKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:l,inheritPadding:u,mod:c,...d}=n,f=wKe();return v.jsx(ge,{ref:t,mod:[{"with-border":l,"inherit-padding":u},c],...f.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...d})});fF.classes=nK;fF.displayName="@mantine/core/CardSection";const xKe={},SKe=(e,{padding:t})=>({root:{"--card-padding":ru(t)}}),Ub=Is((e,t)=>{const n=we("Card",xKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,padding:c,...d}=n,f=mt({name:"Card",props:n,classes:nK,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:SKe}),h=I.Children.toArray(u),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===fF?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return v.jsx(_Ke,{value:{getStyles:f},children:v.jsx(Z1,{ref:t,unstyled:a,...f("root"),...d,children:p})})});Ub.classes=nK;Ub.displayName="@mantine/core/Card";Ub.Section=fF;var SEe={root:"m_4451eb3a"};const TKe={},Ju=Is((e,t)=>{const n=we("Center",TKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,inline:u,mod:c,...d}=n,f=mt({name:"Center",props:n,classes:SEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l});return v.jsx(ge,{ref:t,mod:[{inline:u},c],...f("root"),...d})});Ju.classes=SEe;Ju.displayName="@mantine/core/Center";var TEe={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const dle={withShadow:!0},CKe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Pr(t),"--cs-size":Se(n)}}),Ph=Is((e,t)=>{const n=we("ColorSwatch",dle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,size:c,radius:d,withShadow:f,children:h,variant:p,...m}=we("ColorSwatch",dle,n),g=mt({name:"ColorSwatch",props:n,classes:TEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:CKe});return v.jsxs(ge,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[v.jsx("span",{...g("alphaOverlay")}),f&&v.jsx("span",{...g("shadowOverlay")}),v.jsx("span",{...g("colorOverlay",{style:{backgroundColor:u}})}),v.jsx("span",{...g("childrenOverlay"),children:h})]})});Ph.classes=TEe;Ph.displayName="@mantine/core/ColorSwatch";const[AKe,rK]=jb(null),iK=I.forwardRef(({position:e,...t},n)=>v.jsx(ge,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));iK.displayName="@mantine/core/ColorPickerThumb";var sK={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const IKe={},oK=Le((e,t)=>{var z;const n=we("ColorSlider",IKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,onChange:u,onChangeEnd:c,maxValue:d,round:f,size:h="md",focusable:p=!0,value:m,overlays:g,thumbColor:y="transparent",onScrubStart:b,onScrubEnd:_,__staticSelector:w="ColorPicker",...E}=n,x=mt({name:w,classes:sK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a}),C=((z=rK())==null?void 0:z.getStyles)||x,A=As(),[R,P]=I.useState({y:0,x:m/d}),L=I.useRef(R),k=U=>f?Math.round(U*d):U*d,{ref:$}=XL(({x:U,y:O})=>{L.current={x:U,y:O},u==null||u(k(U))},{onScrubEnd:()=>{const{x:U}=L.current;c==null||c(k(U)),_==null||_()},onScrubStart:b});Yu(()=>{P({y:0,x:m/d})},[m]);const D=(U,O)=>{U.preventDefault();const V=K_e(O);u==null||u(k(V.x)),c==null||c(k(V.x))},M=U=>{switch(U.key){case"ArrowRight":{D(U,{x:R.x+.05,y:R.y});break}case"ArrowLeft":{D(U,{x:R.x-.05,y:R.y});break}}},B=g.map((U,O)=>I.createElement("div",{...C("sliderOverlay"),style:U,key:O}));return v.jsxs(ge,{...E,ref:ps($,t),...C("slider"),role:"slider","aria-valuenow":m,"aria-valuemax":d,"aria-valuemin":0,tabIndex:p?0:-1,onKeyDown:M,"data-focus-ring":A.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${h})`},children:[B,v.jsx(iK,{position:R,...C("thumb",{style:{top:Se(1),background:y}})})]})});oK.displayName="@mantine/core/ColorSlider";function Fc(e,t=0,n=10**t){return Math.round(n*e)/n}function kKe({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const RKe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function PKe(e,t="deg"){return Number(e)*(RKe[t]||1)}const NKe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function fle(e){const t=NKe.exec(e);return t?kKe({h:PKe(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function sU({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:Fc(60*(o<0?o+6:o),3),s:Fc(i?s/i*100:0,3),v:Fc(i/255*100,3),a:r}}function oU(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?sU({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):sU({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function OKe(e){const t=e[0]==="#"?e.slice(1):e,n=o=>Fc(parseInt(o,16)/255,3);if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return{...oU(o),a}}const r=t.slice(0,6),i=n(t.slice(6,8));return{...oU(r),a:i}}const DKe=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function hle(e){const t=DKe.exec(e);return t?sU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const CEe={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},MKe={hex:oU,hexa:OKe,rgb:hle,rgba:hle,hsl:fle,hsla:fle};function $Ke(e){for(const[,t]of Object.entries(CEe))if(t.test(e))return!0;return!1}function QP(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(CEe))if(r.test(t))return MKe[n](t);return{h:0,s:0,v:0,a:1}}const LKe={},AEe=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=we("AlphaSlider",LKe,e);return v.jsx(oK,{...o,ref:t,value:n,onChange:a=>r==null?void 0:r(Fc(a,2)),onChangeEnd:a=>i==null?void 0:i(Fc(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${Se(8)} ${Se(8)}`,backgroundPosition:`0 0, 0 ${Se(4)}, ${Se(4)} ${Se(-4)}, ${Se(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Se(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Se(4)} inset`}]})});AEe.displayName="@mantine/core/AlphaSlider";function IEe({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),l=o*(1-s),u=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),d=a%6;return{r:Fc([o,u,l,l,c,o][d]*255),g:Fc([c,o,o,u,l,l][d]*255),b:Fc([l,l,c,o,o,u][d]*255),a:Fc(r,2)}}function ple(e,t){const{r:n,g:r,b:i,a:s}=IEe(e);return t?`rgba(${n}, ${r}, ${i}, ${Fc(s,2)})`:`rgb(${n}, ${r}, ${i})`}function mle({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${Fc(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function HO(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function kEe(e){const{r:t,g:n,b:r}=IEe(e);return`#${HO(t)}${HO(n)}${HO(r)}`}function FKe(e){const t=Math.round(e.a*255);return`${kEe(e)}${HO(t)}`}const P8={hex:kEe,hexa:e=>FKe(e),rgb:e=>ple(e,!1),rgba:e=>ple(e,!0),hsl:e=>mle(e,!1),hsla:e=>mle(e,!0)};function Mg(e,t){return t?e in P8?P8[e](t):P8.hex(t):"#000000"}const REe=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=we("HueSlider",{},e);return v.jsx(oK,{...o,ref:t,value:n,onChange:r,onChangeEnd:i,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${Se(1)} inset, rgb(0, 0, 0, .15) 0 0 ${Se(4)} inset`}]})});REe.displayName="@mantine/core/HueSlider";function PEe({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:i,focusable:s=!0,size:o,color:a,onScrubStart:l,onScrubEnd:u,...c}){const{getStyles:d}=rK(),[f,h]=I.useState({x:r.s/100,y:1-r.v/100}),p=I.useRef(f),{ref:m}=XL(({x:b,y:_})=>{p.current={x:b,y:_},t({s:Math.round(b*100),v:Math.round((1-_)*100)})},{onScrubEnd:()=>{const{x:b,y:_}=p.current;n({s:Math.round(b*100),v:Math.round((1-_)*100)}),u==null||u()},onScrubStart:l});I.useEffect(()=>{h({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const g=(b,_)=>{b.preventDefault();const w=K_e(_);t({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)}),n({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)})},y=b=>{switch(b.key){case"ArrowUp":{g(b,{y:f.y-.05,x:f.x});break}case"ArrowDown":{g(b,{y:f.y+.05,x:f.x});break}case"ArrowRight":{g(b,{x:f.x+.05,y:f.y});break}case"ArrowLeft":{g(b,{x:f.x-.05,y:f.y});break}}};return v.jsxs(ge,{...d("saturation"),ref:m,...c,role:"slider","aria-label":i,"aria-valuenow":f.x,"aria-valuetext":Mg("rgba",r),tabIndex:s?0:-1,onKeyDown:y,children:[v.jsx("div",{...d("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),v.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),v.jsx("div",{...d("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),v.jsx(iK,{position:f,...d("thumb",{style:{backgroundColor:a}})})]})}PEe.displayName="@mantine/core/Saturation";const NEe=I.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:i,focusable:s,data:o,swatchesPerRow:a,...l},u)=>{const c=rK(),d=o.map((f,h)=>I.createElement(Ph,{...c.getStyles("swatch"),unstyled:c.unstyled,component:"button",type:"button",color:f,key:h,radius:"sm",onClick:()=>{n(f),r==null||r(f)},"aria-label":f,tabIndex:s?0:-1,"data-swatch":!0}));return v.jsx(ge,{...c.getStyles("swatches"),ref:u,...l,children:d})});NEe.displayName="@mantine/core/Swatches";const jKe={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},BKe=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":Jt(t,"cp-preview-size"),"--cp-width":Jt(t,"cp-width"),"--cp-body-spacing":ru(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":Jt(t,"cp-thumb-size"),"--cp-saturation-height":Jt(t,"cp-saturation-height")}}),aK=Le((e,t)=>{const n=we("ColorPicker",jKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,format:u,value:c,defaultValue:d,onChange:f,onChangeEnd:h,withPicker:p,size:m,saturationLabel:g,hueLabel:y,alphaLabel:b,focusable:_,swatches:w,swatchesPerRow:E,fullWidth:x,onColorSwatchClick:S,__staticSelector:C,mod:A,...R}=n,P=mt({name:C,props:n,classes:sK,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"wrapper",vars:l,varsResolver:BKe}),L=I.useRef(u),k=I.useRef(),$=I.useRef(-1),D=I.useRef(!1),M=u==="hexa"||u==="rgba"||u==="hsla",[B,z,U]=ji({value:c,defaultValue:d,finalValue:"#FFFFFF",onChange:f}),[O,V]=I.useState(QP(B)),W=()=>{window.clearTimeout($.current),D.current=!0},j=()=>{window.clearTimeout($.current),$.current=window.setTimeout(()=>{D.current=!1},200)},H=G=>{V(J=>{const se={...J,...G};return k.current=Mg(L.current,se),se}),z(k.current)};return Yu(()=>{$Ke(c)&&!D.current&&V(QP(c))},[c]),Yu(()=>{L.current=u,z(Mg(u,O))},[u]),v.jsx(AKe,{value:{getStyles:P,unstyled:a},children:v.jsxs(ge,{ref:t,...P("wrapper"),size:m,mod:[{"full-width":x},A],...R,children:[p&&v.jsxs(v.Fragment,{children:[v.jsx(PEe,{value:O,onChange:H,onChangeEnd:({s:G,v:J})=>h==null?void 0:h(Mg(L.current,{...O,s:G,v:J})),color:B,size:m,focusable:_,saturationLabel:g,onScrubStart:W,onScrubEnd:j}),v.jsxs("div",{...P("body"),children:[v.jsxs("div",{...P("sliders"),children:[v.jsx(REe,{value:O.h,onChange:G=>H({h:G}),onChangeEnd:G=>h==null?void 0:h(Mg(L.current,{...O,h:G})),size:m,focusable:_,"aria-label":y,onScrubStart:W,onScrubEnd:j}),M&&v.jsx(AEe,{value:O.a,onChange:G=>H({a:G}),onChangeEnd:G=>{h==null||h(Mg(L.current,{...O,a:G}))},size:m,color:Mg("hex",O),focusable:_,"aria-label":b,onScrubStart:W,onScrubEnd:j})]}),M&&v.jsx(Ph,{color:B,radius:"sm",size:"var(--cp-preview-size)",...P("preview")})]})]}),Array.isArray(w)&&v.jsx(NEe,{data:w,swatchesPerRow:E,focusable:_,setValue:z,onChangeEnd:G=>{const J=Mg(u,QP(G));S==null||S(J),h==null||h(J),U||V(QP(G))}})]})})});aK.classes=sK;aK.displayName="@mantine/core/ColorPicker";var OEe={root:"m_7485cace"};const zKe={},UKe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Jt(t,"container-size")}}),Of=Le((e,t)=>{const n=we("Container",zKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,fluid:u,mod:c,...d}=n,f=mt({name:"Container",classes:OEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:UKe});return v.jsx(ge,{ref:t,mod:[{fluid:u},c],...f("root"),...d})});Of.classes=OEe;Of.displayName="@mantine/core/Container";const VKe={timeout:1e3};function DEe(e){const{children:t,timeout:n,value:r,...i}=we("CopyButton",VKe,e),s=OVe({timeout:n}),o=()=>s.copy(r);return v.jsx(v.Fragment,{children:t({copy:o,copied:s.copied,...i})})}DEe.displayName="@mantine/core/CopyButton";var MEe={root:"m_3eebeb36",label:"m_9e365f20"};const HKe={orientation:"horizontal"},qKe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?zr(t,e):void 0,"--divider-border-style":n,"--divider-size":Jt(r,"divider-size")}}),D0=Le((e,t)=>{const n=we("Divider",HKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,orientation:c,label:d,labelPosition:f,mod:h,...p}=n,m=mt({name:"Divider",classes:MEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:qKe});return v.jsx(ge,{ref:t,mod:[{orientation:c,"with-label":!!d},h],...m("root"),...p,role:"separator",children:d&&v.jsx(ge,{component:"span",mod:{position:f},...m("label"),children:d})})});D0.classes=MEe;D0.displayName="@mantine/core/Divider";const[WKe,lS]=Fs("Drawer component was not found in tree");var sg={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const GKe={},hF=Le((e,t)=>{const n=we("DrawerBody",GKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=lS();return v.jsx(yY,{ref:t,...u.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});hF.classes=sg;hF.displayName="@mantine/core/DrawerBody";const YKe={},pF=Le((e,t)=>{const n=we("DrawerCloseButton",YKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=lS();return v.jsx(vY,{ref:t,...u.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});pF.classes=sg;pF.displayName="@mantine/core/DrawerCloseButton";const KKe={},mF=Le((e,t)=>{const n=we("DrawerContent",KKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,radius:u,...c}=n,d=lS(),f=d.scrollAreaComponent||Xwe;return v.jsx(Kwe,{...d.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:d.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:u||d.radius||0,children:v.jsx(f,{style:{height:"100vh"},children:l})})});mF.classes=sg;mF.displayName="@mantine/core/DrawerContent";const XKe={},gF=Le((e,t)=>{const n=we("DrawerHeader",XKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=lS();return v.jsx(bY,{ref:t,...u.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});gF.classes=sg;gF.displayName="@mantine/core/DrawerHeader";const QKe={},yF=Le((e,t)=>{const n=we("DrawerOverlay",QKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=lS();return v.jsx(_Y,{ref:t,...u.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});yF.classes=sg;yF.displayName="@mantine/core/DrawerOverlay";function JKe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function ZKe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const eXe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},tXe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},nXe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ad("modal"),position:"left"},rXe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":Jt(n,"drawer-size"),"--drawer-flex":ZKe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":JKe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Se(r)}}),vF=Le((e,t)=>{const n=we("DrawerRoot",nXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,scrollAreaComponent:u,position:c,transitionProps:d,radius:f,...h}=n,{dir:p}=bl(),m=mt({name:"Drawer",classes:sg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:rXe}),g=(p==="rtl"?tXe:eXe)[c];return v.jsx(WKe,{value:{scrollAreaComponent:u,getStyles:m,radius:f},children:v.jsx(Ywe,{ref:t,...m("root"),transitionProps:{transition:g,...d},unstyled:a,...h})})});vF.classes=sg;vF.displayName="@mantine/core/DrawerRoot";const iXe={},bF=Le((e,t)=>{const n=we("DrawerTitle",iXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=lS();return v.jsx(wY,{ref:t,...u.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});bF.classes=sg;bF.displayName="@mantine/core/DrawerTitle";const sXe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ad("modal"),withOverlay:!0,withCloseButton:!0},up=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...l}=we("Drawer",sXe,e),u=!!n||s;return v.jsxs(vF,{ref:t,...l,children:[r&&v.jsx(yF,{...i}),v.jsxs(mF,{children:[u&&v.jsxs(gF,{children:[n&&v.jsx(bF,{children:n}),s&&v.jsx(pF,{...o})]}),v.jsx(hF,{children:a})]})]})});up.classes=sg;up.displayName="@mantine/core/Drawer";up.Root=vF;up.Overlay=yF;up.Content=mF;up.Body=hF;up.Header=gF;up.Title=bF;up.CloseButton=pF;function $Ee({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},l=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:l}}const[oXe,LEe]=Fs("Grid component was not found in tree"),aU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,gle=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":aU(e,t),yle=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},vle=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function aXe({span:e,order:t,offset:n,selector:r}){var f;const i=As(),s=LEe(),a=TC(e)===void 0?12:TC(e),l=nS({"--col-order":(f=TC(t))==null?void 0:f.toString(),"--col-flex-grow":yle(a,s.grow),"--col-flex-basis":aU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":gle(a,s.columns,s.grow),"--col-offset":vle(TC(n),s.columns)}),u=Gi(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=yle(e[p],s.grow),h[p]["--col-flex-basis"]=aU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=gle(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=vle(n[p],s.columns)),h},{}),d=EM(Gi(u),i).filter(h=>Gi(u[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:u[h.value]}));return v.jsx(wk,{styles:l,media:d,selector:r})}var lK={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const lXe={span:12},uK=Le((e,t)=>{const n=we("GridCol",lXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:l,order:u,offset:c,...d}=n,f=LEe(),h=eF();return v.jsxs(v.Fragment,{children:[v.jsx(aXe,{selector:`.${h}`,span:l,order:u,offset:c}),v.jsx(ge,{ref:t,...f.getStyles("col",{className:vt(i,h),style:s,classNames:r,styles:o}),...d})]})});uK.classes=lK;uK.displayName="@mantine/core/GridCol";function uXe({gutter:e,selector:t}){const n=As(),r=nS({"--grid-gutter":ru(TC(e))}),i=Gi(n.breakpoints).reduce((a,l)=>(a[l]||(a[l]={}),typeof e=="object"&&e[l]!==void 0&&(a[l]["--grid-gutter"]=ru(e[l])),a),{}),o=EM(Gi(i),n).filter(a=>Gi(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return v.jsx(wk,{styles:r,media:o,selector:t})}const cXe={gutter:"md",grow:!1,columns:12},dXe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),rl=Le((e,t)=>{const n=we("Grid",cXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,grow:u,gutter:c,columns:d,align:f,justify:h,children:p,...m}=n,g=mt({name:"Grid",classes:lK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:dXe}),y=eF();return v.jsxs(oXe,{value:{getStyles:g,grow:u,columns:d},children:[v.jsx(uXe,{selector:`.${y}`,...n}),v.jsx(ge,{ref:t,...g("root",{className:y}),...m,children:v.jsx("div",{...g("inner"),children:p})})]})});rl.classes=lK;rl.displayName="@mantine/core/Grid";rl.Col=uK;function ble({color:e,theme:t,defaultShade:n}){const r=Ku({color:e,theme:t});return r.isThemeColor?r.shade===void 0?`var(--mantine-color-${r.color}-${n})`:`var(${r.variable})`:e}var FEe={root:"m_bcb3f3c2"};const fXe={color:"yellow"},hXe=(e,{color:t})=>({root:{"--mark-bg-dark":ble({color:t,theme:e,defaultShade:5}),"--mark-bg-light":ble({color:t,theme:e,defaultShade:2})}}),cK=Le((e,t)=>{const n=we("Mark",fXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,variant:c,...d}=n,f=mt({name:"Mark",props:n,className:i,style:s,classes:FEe,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:hXe});return v.jsx(ge,{component:"mark",ref:t,variant:c,...f("root"),...d})});cK.classes=FEe;cK.displayName="@mantine/core/Mark";function _le(e){return e.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")}function pXe(e,t){if(t==null)return[{chunk:e,highlighted:!1}];const n=Array.isArray(t)?t.map(_le):_le(t);if(!(Array.isArray(n)?n.filter(a=>a.trim().length>0).length>0:n.trim()!==""))return[{chunk:e,highlighted:!1}];const i=typeof n=="string"?n.trim():n.filter(a=>a.trim().length!==0).map(a=>a.trim()).sort((a,l)=>l.length-a.length).join("|"),s=new RegExp(`(${i})`,"gi");return e.split(s).map(a=>({chunk:a,highlighted:s.test(a)})).filter(({chunk:a})=>a)}const mXe={},dK=Is((e,t)=>{const{unstyled:n,children:r,highlight:i,highlightStyles:s,color:o,...a}=we("Highlight",mXe,e),l=pXe(r,i);return v.jsx(Xe,{unstyled:n,ref:t,...a,__staticSelector:"Highlight",children:l.map(({chunk:u,highlighted:c},d)=>c?v.jsx(cK,{unstyled:n,color:o,style:s,"data-highlight":u,children:u},d):v.jsx("span",{children:u},d))})});dK.classes=Xe.classes;dK.displayName="@mantine/core/Highlight";const[gXe,jEe]=Fs("HoverCard component was not found in the tree"),yXe={};function BEe(e){const{children:t,onMouseEnter:n,onMouseLeave:r,...i}=we("HoverCardDropdown",yXe,e),s=jEe(),o=Vo(n,s.openDropdown),a=Vo(r,s.closeDropdown);return v.jsx(hn.Dropdown,{onMouseEnter:o,onMouseLeave:a,...i,children:t})}BEe.displayName="@mantine/core/HoverCardDropdown";const vXe={refProp:"ref"},zEe=I.forwardRef((e,t)=>{const{children:n,refProp:r,eventPropsWrapperName:i,...s}=we("HoverCardTarget",vXe,e);if(!tg(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=jEe(),a=Vo(n.props.onMouseEnter,o.openDropdown),l=Vo(n.props.onMouseLeave,o.closeDropdown),u={onMouseEnter:a,onMouseLeave:l};return v.jsx(hn.Target,{refProp:r,ref:t,...s,children:I.cloneElement(n,i?{[i]:u}:u)})});zEe.displayName="@mantine/core/HoverCardTarget";const bXe={openDelay:0,closeDelay:150,initiallyOpened:!1};function D1(e){const{children:t,onOpen:n,onClose:r,openDelay:i,closeDelay:s,initiallyOpened:o,...a}=we("HoverCard",bXe,e),[l,{open:u,close:c}]=N1(o,{onClose:r,onOpen:n}),{openDropdown:d,closeDropdown:f}=$Ee({open:u,close:c,openDelay:i,closeDelay:s});return v.jsx(gXe,{value:{openDropdown:d,closeDropdown:f},children:v.jsx(hn,{...a,opened:l,__staticSelector:"HoverCard",children:t})})}D1.displayName="@mantine/core/HoverCard";D1.Target=zEe;D1.Dropdown=BEe;D1.extend=e=>e;var UEe={root:"m_9e117634"};const _Xe={},wXe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Pr(t),"--image-object-fit":n}}),Gy=Is((e,t)=>{const n=we("Image",_Xe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,onError:u,src:c,radius:d,fit:f,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const b=mt({name:"Image",classes:UEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:wXe});return g&&h?v.jsx(ge,{component:"img",ref:t,src:h,...b("root"),onError:u,mod:["fallback",p],...m}):v.jsx(ge,{component:"img",ref:t,...b("root"),src:c,onError:_=>{u==null||u(_),y(!0)},mod:p,...m})});Gy.classes=UEe;Gy.displayName="@mantine/core/Image";function EXe(e="top-end",t=0){const n={"--indicator-top":void 0,"--indicator-bottom":void 0,"--indicator-left":void 0,"--indicator-right":void 0,"--indicator-translate-x":void 0,"--indicator-translate-y":void 0},r=Se(t),[i,s]=e.split("-");return i==="top"&&(n["--indicator-top"]=r,n["--indicator-translate-y"]="-50%"),i==="middle"&&(n["--indicator-top"]="50%",n["--indicator-translate-y"]="-50%"),i==="bottom"&&(n["--indicator-bottom"]=r,n["--indicator-translate-y"]="50%"),s==="start"&&(n["--indicator-left"]=r,n["--indicator-translate-x"]="-50%"),s==="center"&&(n["--indicator-left"]="50%",n["--indicator-translate-x"]="-50%"),s==="end"&&(n["--indicator-right"]=r,n["--indicator-translate-x"]="50%"),n}var VEe={root:"m_e5262200",indicator:"m_760d1fb1",processing:"m_885901b1"};const xXe={position:"top-end",offset:0,inline:!1,withBorder:!1,disabled:!1,processing:!1},SXe=(e,{color:t,position:n,offset:r,size:i,radius:s,zIndex:o,autoContrast:a})=>({root:{"--indicator-color":t?zr(t,e):void 0,"--indicator-text-color":Uy(a,e)?ap({color:t,theme:e,autoContrast:a}):void 0,"--indicator-size":Se(i),"--indicator-radius":s===void 0?void 0:Pr(s),"--indicator-z-index":o==null?void 0:o.toString(),...EXe(n,r)}}),fK=Le((e,t)=>{const n=we("Indicator",xXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,position:c,offset:d,inline:f,label:h,radius:p,color:m,withBorder:g,disabled:y,processing:b,zIndex:_,autoContrast:w,mod:E,...x}=n,S=mt({name:"Indicator",classes:VEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:SXe});return v.jsxs(ge,{ref:t,...S("root"),mod:[{inline:f},E],...x,children:[!y&&v.jsx(v.Fragment,{children:v.jsx(ge,{mod:{"with-label":!!h,"with-border":g,processing:b},...S("indicator"),children:h})}),u]})});fK.classes=VEe;fK.displayName="@mantine/core/Indicator";function lU(){return lU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lU.apply(null,arguments)}function TXe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var CXe=I.useLayoutEffect,AXe=function(t){var n=I.useRef(t);return CXe(function(){n.current=t}),n},wle=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},IXe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&wle(r.current,null),r.current=n,n&&wle(n,i)},[n])},Ele={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},kXe=function(t){Object.keys(Ele).forEach(function(n){t.style.setProperty(n,Ele[n],"important")})},xle=kXe,Ha=null,Sle=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function RXe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ha||(Ha=document.createElement("textarea"),Ha.setAttribute("tabindex","-1"),Ha.setAttribute("aria-hidden","true"),xle(Ha)),Ha.parentNode===null&&document.body.appendChild(Ha);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(f){var h=f;Ha.style[h]=o[h]}),xle(Ha),Ha.value=t;var l=Sle(Ha,e);Ha.value=t,l=Sle(Ha,e),Ha.value="x";var u=Ha.scrollHeight-i,c=u*n;a==="border-box"&&(c=c+i+s),l=Math.max(c,l);var d=u*r;return a==="border-box"&&(d=d+i+s),l=Math.min(d,l),[l,u]}var Tle=function(){},PXe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},NXe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],OXe=!!document.documentElement.currentStyle,DXe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=PXe(NXe,n),i=r.boxSizing;if(i==="")return null;OXe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},MXe=DXe;function HEe(e,t,n){var r=AXe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var $Xe=function(t){HEe(window,"resize",t)},LXe=function(t){HEe(document.fonts,"loadingdone",t)},FXe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],jXe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Tle:o,l=t.onHeightChange,u=l===void 0?Tle:l,c=TXe(t,FXe),d=c.value!==void 0,f=I.useRef(null),h=IXe(f,n),p=I.useRef(0),m=I.useRef(),g=function(){var _=f.current,w=r&&m.current?m.current:MXe(_);if(w){m.current=w;var E=RXe(w,_.value||_.placeholder||"x",s,i),x=E[0],S=E[1];p.current!==x&&(p.current=x,_.style.setProperty("height",x+"px","important"),u(x,{rowHeight:S}))}},y=function(_){d||g(),a(_)};return I.useLayoutEffect(g),$Xe(g),LXe(g),I.createElement("textarea",lU({},c,{onChange:y,ref:h}))},BXe=I.forwardRef(jXe);const zXe={},UA=Le((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=we("Textarea",zXe,e),l=n&&X_e()!=="test",u=l?{maxRows:r,minRows:i}:{};return v.jsx(gu,{component:l?BXe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...u})});UA.classes=gu.classes;UA.displayName="@mantine/core/Textarea";const[UXe,VXe]=Fs("List component was not found in tree");var hK={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const HXe={},pK=Le((e,t)=>{const n=we("ListItem",HXe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:l,children:u,mod:c,...d}=n,f=VXe(),h=l||f.icon,p={classNames:r,styles:o};return v.jsx(ge,{...f.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:f.center},c],ref:t,...d,children:v.jsxs("div",{...f.getStyles("itemWrapper",p),children:[h&&v.jsx("span",{...f.getStyles("itemIcon",p),children:h}),v.jsx("span",{...f.getStyles("itemLabel",p),children:u})]})})});pK.classes=hK;pK.displayName="@mantine/core/ListItem";const qXe={type:"unordered"},WXe=(e,{size:t,spacing:n})=>({root:{"--list-fz":Zs(t),"--list-lh":z_e(t),"--list-spacing":ru(n)}}),sf=Le((e,t)=>{const n=we("List",qXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,type:c,withPadding:d,icon:f,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,b=mt({name:"List",classes:hK,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:WXe});return v.jsx(UXe,{value:{center:p,icon:f,getStyles:b},children:v.jsx(ge,{...b("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":d},g],ref:t,...y,children:u})})});sf.classes=hK;sf.displayName="@mantine/core/List";sf.Item=pK;var qEe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Cle={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:ad("overlay")},GXe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),su=Le((e,t)=>{const n=we("LoadingOverlay",Cle,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,transitionProps:u,loaderProps:c,overlayProps:d,visible:f,zIndex:h,...p}=n,m=As(),g=mt({name:"LoadingOverlay",classes:qEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:GXe}),y={...Cle.overlayProps,...d};return v.jsx(Nf,{transition:"fade",...u,mounted:!!f,children:b=>v.jsxs(ge,{...g("root",{style:b}),ref:t,...p,children:[v.jsx(Os,{...g("loader"),unstyled:a,...c}),v.jsx(zA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.white}),v.jsx(zA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(d==null?void 0:d.color)||m.colors.dark[5]})]})})});su.classes=qEe;su.displayName="@mantine/core/LoadingOverlay";const[YXe,kk]=Fs("Menu component was not found in the tree");var uS={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const KXe={},mK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("MenuDivider",KXe,e),l=kk();return v.jsx(ge,{ref:t,...l.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});mK.classes=uS;mK.displayName="@mantine/core/MenuDivider";const XXe={},gK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:l,children:u,...c}=we("MenuDropdown",XXe,e),d=I.useRef(null),f=kk(),h=g=>{var y,b;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(b=(y=d.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||b.focus())},p=Vo(a,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.openDropdown()),m=Vo(l,()=>(f.trigger==="hover"||f.trigger==="click-hover")&&f.closeDropdown());return v.jsxs(hn.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ps(t,d),...f.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[v.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),u]})});gK.classes=uS;gK.displayName="@mantine/core/MenuDropdown";const QXe={},VA=Is((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:l,leftSection:u,rightSection:c,children:d,disabled:f,...h}=we("MenuItem",QXe,e),p=kk(),m=As(),{dir:g}=bl(),y=I.useRef(),b=p.getItemIndex(y.current),_=h,w=Vo(_.onMouseLeave,()=>p.setHovered(-1)),E=Vo(_.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),x=Vo(_.onClick,()=>{typeof l=="boolean"?l&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=Vo(_.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?Ku({color:a,theme:m}):null;return v.jsxs(ds,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ps(y,t),role:"menuitem",disabled:f,"data-menu-item":!0,"data-disabled":f||void 0,"data-hovered":p.hovered===b?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:x,onKeyDown:zG({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:_.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[u&&v.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:u}),d&&v.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:d}),c&&v.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});VA.classes=uS;VA.displayName="@mantine/core/MenuItem";const JXe={},yK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("MenuLabel",JXe,e),l=kk();return v.jsx(ge,{ref:t,...l.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});yK.classes=uS;yK.displayName="@mantine/core/MenuLabel";const ZXe={refProp:"ref"},WEe=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=we("MenuTarget",ZXe,e);if(!tg(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=kk(),o=Vo(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Vo(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),l=Vo(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return v.jsx(hn.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:l,"data-expanded":s.opened?!0:void 0})})});WEe.displayName="@mantine/core/MenuTarget";const eQe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function dn(e){const t=we("Menu",eQe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:l,closeOnItemClick:u,loop:c,closeOnEscape:d,trigger:f,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:b,vars:_,menuItemTabIndex:w,keepMounted:E,...x}=t,S=mt({name:"Menu",classes:uS,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:R}]=PVe(),[P,L]=ji({value:s,defaultValue:o,finalValue:!1,onChange:l}),[k,$]=I.useState(!1),D=()=>{L(!1),$(!1),P&&(i==null||i())},M=()=>{L(!0),!P&&(r==null||r())},B=()=>{P?D():M()},{openDropdown:z,closeDropdown:U}=$Ee({open:M,close:D,closeDelay:p,openDelay:h}),O=j=>RVe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:V,resolvedStyles:W}=lp({classNames:m,styles:g,props:t});return Yu(()=>{R()},[P]),v.jsx(YXe,{value:{getStyles:S,opened:P,toggleDropdown:B,getItemIndex:O,hovered:C,setHovered:A,openedViaClick:k,setOpenedViaClick:$,closeOnItemClick:u,closeDropdown:f==="click"?D:U,openDropdown:f==="click"?M:z,closeDropdownImmediately:D,loop:c,trigger:f,unstyled:y,menuItemTabIndex:w},children:v.jsx(hn,{...x,opened:P,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:d,__staticSelector:"Menu",classNames:V,styles:W,unstyled:y,variant:b,keepMounted:E,children:n})})}dn.extend=e=>e;dn.classes=uS;dn.displayName="@mantine/core/Menu";dn.Item=VA;dn.Label=yK;dn.Dropdown=gK;dn.Target=WEe;dn.Divider=mK;const[tQe,cS]=Fs("Modal component was not found in tree");var og={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const nQe={},_F=Le((e,t)=>{const n=we("ModalBody",nQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return v.jsx(yY,{ref:t,...u.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...l})});_F.classes=og;_F.displayName="@mantine/core/ModalBody";const rQe={},wF=Le((e,t)=>{const n=we("ModalCloseButton",rQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return v.jsx(vY,{ref:t,...u.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...l})});wF.classes=og;wF.displayName="@mantine/core/ModalCloseButton";const iQe={},EF=Le((e,t)=>{const n=we("ModalContent",iQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:l,...u}=n,c=cS(),d=c.scrollAreaComponent||Xwe;return v.jsx(Kwe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...u,children:v.jsx(d,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Se(c.yOffset)} * 2))`},children:l})})});EF.classes=og;EF.displayName="@mantine/core/ModalContent";const sQe={},xF=Le((e,t)=>{const n=we("ModalHeader",sQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return v.jsx(bY,{ref:t,...u.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...l})});xF.classes=og;xF.displayName="@mantine/core/ModalHeader";const oQe={},SF=Le((e,t)=>{const n=we("ModalOverlay",oQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return v.jsx(_Y,{ref:t,...u.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...l})});SF.classes=og;SF.displayName="@mantine/core/ModalOverlay";const aQe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ad("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},lQe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Pr(t),"--modal-size":Jt(n,"modal-size"),"--modal-y-offset":Se(r),"--modal-x-offset":Se(i)}}),TF=Le((e,t)=>{const n=we("ModalRoot",aQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,yOffset:u,scrollAreaComponent:c,radius:d,fullScreen:f,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=mt({name:m,classes:og,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:lQe});return v.jsx(tQe,{value:{yOffset:u,scrollAreaComponent:c,getStyles:y,fullScreen:f},children:v.jsx(Ywe,{ref:t,...y("root"),"data-full-screen":f||void 0,"data-centered":h||void 0,unstyled:a,...g})})});TF.classes=og;TF.displayName="@mantine/core/ModalRoot";const uQe={},CF=Le((e,t)=>{const n=we("ModalTitle",uQe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...l}=n,u=cS();return v.jsx(wY,{ref:t,...u.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...l})});CF.classes=og;CF.displayName="@mantine/core/ModalTitle";const cQe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:ad("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},xs=Le((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:l,...u}=we("Modal",cQe,e),c=!!n||s;return v.jsxs(TF,{ref:t,radius:l,...u,children:[r&&v.jsx(SF,{...i}),v.jsxs(EF,{radius:l,children:[c&&v.jsxs(xF,{children:[n&&v.jsx(CF,{children:n}),s&&v.jsx(wF,{...o})]}),v.jsx(_F,{children:a})]})]})});xs.classes=og;xs.displayName="@mantine/core/Modal";xs.Root=TF;xs.Overlay=SF;xs.Content=EF;xs.Body=_F;xs.Header=xF;xs.Title=CF;xs.CloseButton=wF;const[dQe,vK]=jb(),[fQe,hQe]=jb();var AF={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const pQe={},mQe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Jt(t):Jt(n,"pg-gap")}}),bK=Le((e,t)=>{const n=we("PillGroup",pQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,disabled:c,...d}=n,f=vK(),h=(f==null?void 0:f.size)||u||void 0,p=mt({name:"PillGroup",classes:AF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:mQe,stylesCtx:{size:h},rootSelector:"group"});return v.jsx(fQe,{value:{size:h,disabled:c},children:v.jsx(ge,{ref:t,size:h,...p("group"),...d})})});bK.classes=AF;bK.displayName="@mantine/core/PillGroup";const gQe={variant:"default"},yQe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Jt(n,"pill-fz"),"--pill-height":Jt(n,"pill-height"),"--pill-radius":t===void 0?void 0:Pr(t)}}),tb=Le((e,t)=>{const n=we("Pill",gQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,variant:u,children:c,withRemoveButton:d,onRemove:f,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...b}=n,_=hQe(),w=vK(),E=m||(_==null?void 0:_.size)||void 0,x=(w==null?void 0:w.variant)==="filled"?"contrast":u||"default",S=mt({name:"Pill",classes:AF,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:yQe,stylesCtx:{size:E}});return v.jsxs(ge,{component:"span",ref:t,variant:x,size:E,...S("root",{variant:x}),mod:[{"with-remove":d&&!g,disabled:g||(_==null?void 0:_.disabled)},y],...b,children:[v.jsx("span",{...S("label"),children:c}),d&&v.jsx(rg,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),f==null||f(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});tb.classes=AF;tb.displayName="@mantine/core/Pill";tb.Group=bK;var GEe={field:"m_45c4369d"};const vQe={type:"visible"},_K=Le((e,t)=>{const n=we("PillsInputField",vQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,type:u,disabled:c,id:d,pointer:f,mod:h,...p}=n,m=vK(),g=sS(),y=mt({name:"PillsInputField",classes:GEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),b=c||(m==null?void 0:m.disabled);return v.jsx(ge,{component:"input",ref:ps(t,m==null?void 0:m.fieldRef),"data-type":u,disabled:b,mod:[{disabled:b,pointer:f},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||d,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:_=>!f&&_.stopPropagation()})});_K.classes=GEe;_K.displayName="@mantine/core/PillsInputField";const bQe={},VE=Le((e,t)=>{const n=we("PillsInput",bQe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:l,error:u,variant:c,...d}=n,f=I.useRef();return v.jsx(dQe,{value:{fieldRef:f,size:o,disabled:a,hasError:!!u,variant:c},children:v.jsx(gu,{size:o,error:u,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=f.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=f.current)==null||p.focus()},...d,multiline:!0,disabled:a,__staticSelector:l||"PillsInput",withAria:!1,children:r})})});VE.displayName="@mantine/core/PillsInput";VE.Field=_K;function _Qe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(UE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const wQe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},IF=Le((e,t)=>{const n=we("MultiSelect",wQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,size:u,value:c,defaultValue:d,onChange:f,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:b,onDropdownClose:_,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:x,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:R,searchValue:P,defaultSearchValue:L,onSearchChange:k,readOnly:$,disabled:D,onFocus:M,onBlur:B,onPaste:z,radius:U,rightSection:O,rightSectionWidth:V,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:J,leftSectionProps:se,inputContainer:ie,inputWrapperOrder:ne,withAsterisk:ue,labelProps:xe,descriptionProps:de,errorProps:Ke,wrapperProps:je,description:Oe,label:Fe,error:Ae,maxValues:fe,searchable:Pe,nothingFoundMessage:He,withCheckIcon:ft,checkIconPosition:Ee,hidePickedOptions:he,withErrorStyles:Ue,name:nt,form:ye,id:Re,clearable:Ge,clearButtonProps:Qe,hiddenInputProps:xt,placeholder:An,hiddenInputValuesDivider:gr,required:yr,mod:Nr,renderOption:Xt,onRemove:Dn,onClear:rr,scrollAreaProps:ir,...ao}=n,Pi=ta(Re),zi=$Y(m),Un=uF(zi),Wn=Ik({opened:g,defaultOpened:y,onDropdownOpen:b,onDropdownClose:()=>{_==null||_(),Wn.resetSelectedOption()}}),{styleProps:Qi,rest:{type:vd,autoComplete:Ua,...mc}}=zb(ao),[gt,ci]=ji({value:c,defaultValue:d,finalValue:[],onChange:f}),[wn,Lr]=ji({value:P,defaultValue:L,finalValue:"",onChange:k}),ni=mt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:ri,resolvedStyles:le}=lp({props:n,styles:o,classNames:r}),te=dt=>{h==null||h(dt),dt.key===" "&&!Pe&&(dt.preventDefault(),Wn.toggleDropdown()),dt.key==="Backspace"&&wn.length===0&&gt.length>0&&(Dn==null||Dn(gt[gt.length-1]),ci(gt.slice(0,gt.length-1)))},pe=gt.map((dt,Rt)=>{var rn,Gn;return v.jsx(tb,{withRemoveButton:!$&&!((rn=Un[dt])!=null&&rn.disabled),onRemove:()=>{ci(gt.filter(Qn=>dt!==Qn)),Dn==null||Dn(dt)},unstyled:a,disabled:D,...ni("pill"),children:((Gn=Un[dt])==null?void 0:Gn.label)||dt},`${dt}-${Rt}`)});I.useEffect(()=>{w&&Wn.selectFirstOption()},[w,gt]);const Ie=Ge&&gt.length>0&&!D&&!$&&v.jsx(sn.ClearButton,{size:u,...Qe,onClear:()=>{rr==null||rr(),ci([]),Lr("")}}),ke=_Qe({data:zi,value:gt});return v.jsxs(v.Fragment,{children:[v.jsxs(sn,{store:Wn,classNames:ri,styles:le,unstyled:a,size:u,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:dt=>{E==null||E(dt),Lr(""),Wn.updateSelectedOptionIndex("selected"),gt.includes(Un[dt].value)?(ci(gt.filter(Rt=>Rt!==Un[dt].value)),Dn==null||Dn(Un[dt].value)):gt.length<fe&&ci([...gt,Un[dt].value])},...x,children:[v.jsx(sn.DropdownTarget,{children:v.jsx(VE,{...Qi,__staticSelector:"MultiSelect",classNames:ri,styles:le,unstyled:a,size:u,className:i,style:s,variant:p,disabled:D,radius:U,rightSection:O||Ie||v.jsx(sn.Chevron,{size:u,error:Ae,unstyled:a}),rightSectionPointerEvents:W||(Ie?"all":"none"),rightSectionWidth:V,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:J,leftSectionProps:se,inputContainer:ie,inputWrapperOrder:ne,withAsterisk:ue,labelProps:xe,descriptionProps:de,errorProps:Ke,wrapperProps:je,description:Oe,label:Fe,error:Ae,multiline:!0,withErrorStyles:Ue,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ie?"all":"none"),multiline:!0},pointer:!Pe,onClick:()=>Pe?Wn.openDropdown():Wn.toggleDropdown(),"data-expanded":Wn.dropdownOpened||void 0,id:Pi,required:yr,mod:Nr,children:v.jsxs(tb.Group,{disabled:D,unstyled:a,...ni("pillsList"),children:[pe,v.jsx(sn.EventsTarget,{autoComplete:Ua,children:v.jsx(VE.Field,{...mc,ref:t,id:Pi,placeholder:An,type:!Pe&&!An?"hidden":"visible",...ni("inputField"),unstyled:a,onFocus:dt=>{M==null||M(dt),Pe&&Wn.openDropdown()},onBlur:dt=>{B==null||B(dt),Wn.closeDropdown(),Lr("")},onKeyDown:te,value:wn,onChange:dt=>{Lr(dt.currentTarget.value),Pe&&Wn.openDropdown(),w&&Wn.selectFirstOption()},disabled:D,readOnly:$||!Pe,pointer:!Pe})})]})})}),v.jsx(QY,{data:he?ke:zi,hidden:$||D,filter:S,search:wn,limit:C,hiddenWhenEmpty:!He,withScrollArea:A,maxDropdownHeight:R,filterOptions:Pe,value:gt,checkIconPosition:Ee,withCheckIcon:ft,nothingFoundMessage:He,unstyled:a,labelId:Fe?`${Pi}-label`:void 0,"aria-label":Fe?void 0:ao["aria-label"],renderOption:Xt,scrollAreaProps:ir})]}),v.jsx(sn.HiddenInput,{name:nt,valuesDivider:gr,value:gt,form:ye,disabled:D,...xt})]})});IF.classes={...gu.classes,...sn.classes};IF.displayName="@mantine/core/MultiSelect";var YEe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const EQe={},xQe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":ru(r)}}},kF=Is((e,t)=>{const n=we("NavLink",EQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,opened:u,defaultOpened:c,onChange:d,children:f,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:b,description:_,disableRightSectionRotation:w,noWrap:E,childrenOffset:x,onKeyDown:S,autoContrast:C,mod:A,...R}=n,P=mt({name:"NavLink",props:n,classes:YEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xQe}),[L,k]=ji({value:u,defaultValue:c,finalValue:!1,onChange:d}),$=!!f,D=M=>{h==null||h(M),$&&(M.preventDefault(),k(!L))};return v.jsxs(v.Fragment,{children:[v.jsxs(ds,{...P("root"),component:"a",ref:t,onClick:D,onKeyDown:M=>{S==null||S(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),k(!L))},unstyled:a,mod:[{disabled:m,active:p,expanded:L},A],...R,children:[g&&v.jsx(ge,{component:"span",...P("section"),mod:{position:"left"},children:g}),v.jsxs(ge,{...P("body"),mod:{"no-wrap":E},children:[v.jsx(ge,{component:"span",...P("label"),children:b}),v.jsx(ge,{component:"span",mod:{active:p},...P("description"),children:_})]}),($||y)&&v.jsx(ge,{...P("section"),component:"span",mod:{rotate:L&&!w,position:"right"},children:$?y||v.jsx(zE,{...P("chevron")}):y})]}),v.jsx(Vy,{in:L,...P("collapse"),children:v.jsx("div",{...P("children"),children:f})})]})});kF.classes=YEe;kF.displayName="@mantine/core/NavLink";function KEe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var HA;(function(e){e.event="event",e.props="prop"})(HA||(HA={}));function n0(){}function SQe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function qA(e){return!!(e||"").match(/\d/)}function eE(e){return e==null}function TQe(e){return typeof e=="number"&&isNaN(e)}function XEe(e){return eE(e)||TQe(e)||typeof e=="number"&&!isFinite(e)}function QEe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function CQe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function AQe(e,t,n){var r=CQe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function IQe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function wK(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function kQe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function JEe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Ale(e,t){return Array(t+1).join(e)}function ZEe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Ale("0",Math.abs(o))+i:o>=a?i=i+Ale("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Ile(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=wK(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,l=parseFloat("0."+(o||"0")),u=o.length<=t?"0."+o:l.toFixed(t),c=u.split("."),d=s;s&&Number(c[0])&&(d=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var f=JEe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+d+p+f}function t1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var exe=SQe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),RQe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function PQe(e,t,n){return Math.min(Math.max(e,t),n)}function N8(e){return Math.max(e.selectionStart,e.selectionEnd)}function NQe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function OQe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function DQe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function MQe(e,t,n,r,i,s,o){o===void 0&&(o=DQe);var a=i.findIndex(function(w){return w}),l=e.slice(0,a);!t&&!n.startsWith(l)&&(t=l,n=l+n,r=r+l.length);for(var u=n.length,c=e.length,d={},f=new Array(u),h=0;h<u;h++){f[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&d[p]!==!0){f[h]=p,d[p]=!0;break}}}for(var y=r;y<u&&(f[y]===-1||!s(n[y]));)y++;var b=y===u||f[y]===-1?c:f[y];for(y=r-1;y>0&&f[y]===-1;)y--;var _=y===-1||f[y]===-1?0:f[y]+1;return _>b?b:r-_<b-r?_:b}function kle(e,t,n,r){var i=e.length;if(t=PQe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function $Qe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(qA(e[n])||qA(e[n-1]));return t}function txe(e,t,n,r,i,s){s===void 0&&(s=n0);var o=IQe(function(p,m){var g,y;return XEe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?ZEe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(eE(e)?t:e,n)}),l=a[0],u=a[1],c=function(p,m){p.formattedValue!==l.formattedValue&&u({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},d=e,f=n;eE(e)&&(d=l.numAsString,f=!0);var h=o(d,f);return I.useMemo(function(){u(h)},[h.formattedValue]),[l,c]}function LQe(e){return e.replace(/[^0-9]/g,"")}function FQe(e){return e}function jQe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=FQe);var a=e.removeFormatting;a===void 0&&(a=LQe);var l=e.defaultValue,u=e.valueIsNumericString,c=e.onValueChange,d=e.isAllowed,f=e.onChange;f===void 0&&(f=n0);var h=e.onKeyDown;h===void 0&&(h=n0);var p=e.onMouseUp;p===void 0&&(p=n0);var m=e.onFocus;m===void 0&&(m=n0);var g=e.onBlur;g===void 0&&(g=n0);var y=e.value,b=e.getCaretBoundary;b===void 0&&(b=$Qe);var _=e.isValidInputCharacter;_===void 0&&(_=qA);var w=e.isCharacterSame,E=KEe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),x=txe(y,l,!!u,o,a,c),S=x[0],C=S.formattedValue,A=S.numAsString,R=x[1],P=I.useRef(),L=I.useRef({formattedValue:C,numAsString:A}),k=function(Ae,fe){L.current={formattedValue:Ae.formattedValue,numAsString:Ae.value},R(Ae,fe)},$=I.useState(!1),D=$[0],M=$[1],B=I.useRef(null),z=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return M(!0),function(){clearTimeout(z.current.setCaretTimeout),clearTimeout(z.current.focusTimeout)}},[]);var U=o,O=function(Ae,fe){var Pe=parseFloat(fe);return{formattedValue:Ae,value:fe,floatValue:isNaN(Pe)?void 0:Pe}},V=function(Ae,fe,Pe){Ae.selectionStart===0&&Ae.selectionEnd===Ae.value.length||(t1(Ae,fe),z.current.setCaretTimeout=setTimeout(function(){Ae.value===Pe&&Ae.selectionStart!==fe&&t1(Ae,fe)},0))},W=function(Ae,fe,Pe){return kle(Ae,fe,b(Ae),Pe)},j=function(Ae,fe,Pe){var He=b(fe),ft=MQe(fe,C,Ae,Pe,He,_,w);return ft=kle(fe,ft,He),ft},H=function(Ae){var fe=Ae.formattedValue;fe===void 0&&(fe="");var Pe=Ae.input,He=Ae.source,ft=Ae.event,Ee=Ae.numAsString,he;if(Pe){var Ue=Ae.inputValue||Pe.value,nt=N8(Pe);Pe.value=fe,he=j(Ue,fe,nt),he!==void 0&&V(Pe,he,fe)}fe!==C&&k(O(fe,Ee),{event:ft,source:He})};I.useEffect(function(){var Ae=L.current,fe=Ae.formattedValue,Pe=Ae.numAsString;(C!==fe||A!==Pe)&&k(O(C,A),{event:void 0,source:HA.props})},[C,A]);var G=B.current?N8(B.current):void 0,J=typeof window<"u"?I.useLayoutEffect:I.useEffect;J(function(){var Ae=B.current;if(C!==L.current.formattedValue&&Ae){var fe=j(L.current.formattedValue,C,G);Ae.value=C,V(Ae,fe,C)}},[C]);var se=function(Ae,fe,Pe){var He=fe.target,ft=P.current?RQe(P.current,He.selectionEnd):exe(C,Ae),Ee=Object.assign(Object.assign({},ft),{lastValue:C}),he=a(Ae,Ee),Ue=U(he);if(he=a(Ue,void 0),d&&!d(O(Ue,he))){var nt=fe.target,ye=N8(nt),Re=j(Ae,C,ye);return nt.value=C,V(nt,Re,C),!1}return H({formattedValue:Ue,numAsString:he,inputValue:Ae,event:fe,source:Pe,input:fe.target}),!0},ie=function(Ae,fe){fe===void 0&&(fe=0);var Pe=Ae.selectionStart,He=Ae.selectionEnd;P.current={selectionStart:Pe,selectionEnd:He+fe}},ne=function(Ae){var fe=Ae.target,Pe=fe.value,He=se(Pe,Ae,HA.event);He&&f(Ae),P.current=void 0},ue=function(Ae){var fe=Ae.target,Pe=Ae.key,He=fe.selectionStart,ft=fe.selectionEnd,Ee=fe.value;Ee===void 0&&(Ee="");var he;Pe==="ArrowLeft"||Pe==="Backspace"?he=Math.max(He-1,0):Pe==="ArrowRight"?he=Math.min(He+1,Ee.length):Pe==="Delete"&&(he=He);var Ue=0;Pe==="Delete"&&He===ft&&(Ue=1);var nt=Pe==="ArrowLeft"||Pe==="ArrowRight";if(he===void 0||He!==ft&&!nt){h(Ae),ie(fe,Ue);return}var ye=he;if(nt){var Re=Pe==="ArrowLeft"?"left":"right";ye=W(Ee,he,Re),ye!==he&&Ae.preventDefault()}else Pe==="Delete"&&!_(Ee[he])?ye=W(Ee,he,"right"):Pe==="Backspace"&&!_(Ee[he])&&(ye=W(Ee,he,"left"));ye!==he&&V(fe,ye,Ee),h(Ae),ie(fe,Ue)},xe=function(Ae){var fe=Ae.target,Pe=function(){var He=fe.selectionStart,ft=fe.selectionEnd,Ee=fe.value;if(Ee===void 0&&(Ee=""),He===ft){var he=W(Ee,He);he!==He&&V(fe,he,Ee)}};Pe(),requestAnimationFrame(function(){Pe()}),p(Ae),ie(fe)},de=function(Ae){Ae.persist&&Ae.persist();var fe=Ae.target,Pe=Ae.currentTarget;B.current=fe,z.current.focusTimeout=setTimeout(function(){var He=fe.selectionStart,ft=fe.selectionEnd,Ee=fe.value;Ee===void 0&&(Ee="");var he=W(Ee,He);he!==He&&!(He===0&&ft===Ee.length)&&V(fe,he,Ee),m(Object.assign(Object.assign({},Ae),{currentTarget:Pe}))},0)},Ke=function(Ae){B.current=null,clearTimeout(z.current.focusTimeout),clearTimeout(z.current.setCaretTimeout),g(Ae)},je=D&&NQe()?"numeric":void 0,Oe=Object.assign({inputMode:je},E,{type:t,value:C,onChange:ne,onKeyDown:ue,onMouseUp:xe,onFocus:de,onBlur:Ke});if(n==="text")return i?ls.createElement(ls.Fragment,null,i(C,E)||null):ls.createElement("span",Object.assign({},E,{ref:s}),C);if(r){var Fe=r;return ls.createElement(Fe,Object.assign({},Oe,{ref:s}))}return ls.createElement("input",Object.assign({},Oe,{ref:s}))}function Rle(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var l=RF(t),u=l.thousandSeparator,c=l.decimalSeparator,d=n!==0&&e.indexOf(".")!==-1||n&&r,f=wK(e,o),h=f.beforeDecimal,p=f.afterDecimal,m=f.addNegation;return n!==void 0&&(p=JEe(p,n,!!r)),u&&(h=AQe(h,u,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(d&&c||"")+p,e}function RF(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function BQe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function zQe(e,t){return new RegExp("(^-)|[0-9]|"+QEe(e),"g")}function UQe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function VQe(e,t,n){var r;t===void 0&&(t=OQe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,l=t.from,u=t.to,c=u.start,d=u.end,f=RF(n),h=f.allowedDecimalSeparators,p=f.decimalSeparator,m=e[d]===p;if(qA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(d-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,z,U){var O=!1,V=!1;s.startsWith("-")?O=!1:B.startsWith("--")?(O=!1,V=!0):o.startsWith("-")&&B.length===o.length?O=!1:B[0]==="-"&&(O=!0);var W=O?1:0;return V&&(W=2),W&&(B=B.substring(W),z-=W,U-=W),{value:B,start:z,end:U,hasNegation:O}},b=y(e,c,d),_=b.hasNegation;r=b,e=r.value,c=r.start,d=r.end;var w=y(t.lastValue,l.start,l.end),E=w.start,x=w.end,S=w.value,C=e.substring(c,d);e.length&&S.length&&(E>S.length-o.length||x<s.length)&&!(C&&o.startsWith(C))&&(e=S);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),d-=A;var R=e.length,P=e.length-o.length;e.endsWith(o)?R=P:(d>P||d>e.length-o.length)&&(R=d),e=e.substring(0,R),e=BQe(_?"-"+e:e,i),e=(e.match(zQe(p))||[]).join("");var L=e.indexOf(p);e=e.replace(new RegExp(QEe(p),"g"),function(B,z){return z===L?".":""});var k=wK(e,i),$=k.beforeDecimal,D=k.afterDecimal,M=k.addNegation;return u.end-u.start<l.end-l.start&&$===""&&m&&!parseFloat(D)&&(e=M?"-":""),e}function HQe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function qQe(e){var t=RF(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function WQe(e){e=qQe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=n0);var s=e.onBlur;s===void 0&&(s=n0);var o=e.thousandSeparator,a=e.decimalScale,l=e.fixedDecimalScale,u=e.prefix;u===void 0&&(u="");var c=e.defaultValue,d=e.value,f=e.valueIsNumericString,h=e.onValueChange,p=KEe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=RF(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,b=function(M){return Rle(M,e)},_=function(M,B){return VQe(M,B,e)},w=eE(d)?c:d,E=f??UQe(w,u,t);eE(d)?eE(c)||(E=E||typeof c=="number"):E=E||typeof d=="number";var x=function(M){return XEe(M)?M:(typeof M=="number"&&(M=ZEe(M)),E&&typeof a=="number"?Ile(M,a,!!l):M)},S=txe(x(d),x(c),!!E,b,_,h),C=S[0],A=C.numAsString,R=C.formattedValue,P=S[1],L=function(M){var B=M.target,z=M.key,U=B.selectionStart,O=B.selectionEnd,V=B.value;if(V===void 0&&(V=""),(z==="Backspace"||z==="Delete")&&O<u.length){M.preventDefault();return}if(U!==O){i(M);return}z==="Backspace"&&V[0]==="-"&&U===u.length+1&&n&&t1(B,1),a&&l&&(z==="Backspace"&&V[U-1]===g?(t1(B,U-1),M.preventDefault()):z==="Delete"&&V[U]===g&&M.preventDefault()),y!=null&&y.includes(z)&&V[U]===g&&t1(B,U+1);var W=o===!0?",":o;z==="Backspace"&&V[U-1]===W&&t1(B,U-1),z==="Delete"&&V[U]===W&&t1(B,U+1),i(M)},k=function(M){var B=A;if(B.match(/\d/g)||(B=""),r||(B=kQe(B)),l&&a&&(B=Ile(B,a,l)),B!==A){var z=Rle(B,e);P({formattedValue:z,value:B,floatValue:parseFloat(B)},{event:M,source:HA.event})}s(M)},$=function(M){return M===g?!0:qA(M)},D=function(M){var B=M.currentValue,z=M.lastValue,U=M.formattedValue,O=M.currentValueIndex,V=M.formattedValueIndex,W=B[O],j=U[V],H=exe(z,B),G=H.to;return O>=G.start&&O<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:R,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:D,onValueChange:P,format:b,removeFormatting:_,getCaretBoundary:function(M){return HQe(M,e)},onKeyDown:L,onBlur:k})}function GQe(e){var t=WQe(e);return ls.createElement(jQe,Object.assign({},t))}function Ple({direction:e,style:t,...n}){return v.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:v.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var uU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const YQe=/^(0\.0*|-0(\.0*)?)$/,KQe=/^-?0\d+(\.\d+)?\.?$/;function XQe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Nle(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const QQe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},JQe=(e,{size:t})=>({controls:{"--ni-chevron-size":Jt(t,"ni-chevron-size")}}),EK=Le((e,t)=>{const n=we("NumberInput",QQe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:l,onValueChange:u,value:c,defaultValue:d,max:f,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:b,onBlur:_,allowDecimal:w,decimalScale:E,onKeyDown:x,onKeyDownCapture:S,handlersRef:C,startValue:A,disabled:R,rightSectionPointerEvents:P,allowNegative:L,readOnly:k,size:$,rightSectionWidth:D,stepHoldInterval:M,stepHoldDelay:B,allowLeadingZeros:z,withKeyboardEvents:U,trimLeadingZeroesOnBlur:O,...V}=n,W=mt({name:"NumberInput",classes:uU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:JQe}),{resolvedClassNames:j,resolvedStyles:H}=lp({classNames:i,styles:s,props:n}),[G,J]=ji({value:c,defaultValue:d,onChange:l}),se=B!==void 0&&M!==void 0,ie=I.useRef(null),ne=I.useRef(null),ue=I.useRef(0),xe=(he,Ue)=>{Ue.source==="event"&&J(XQe(he.floatValue)&&!YQe.test(he.value)&&!(z&&KQe.test(he.value))?he.floatValue:he.value),u==null||u(he,Ue)},de=he=>{const Ue=String(he).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Ue?Math.max(0,(Ue[1]?Ue[1].length:0)-(Ue[2]?+Ue[2]:0)):0},Ke=he=>{ie.current&&typeof he<"u"&&ie.current.setSelectionRange(he,he)},je=I.useRef();je.current=()=>{let he;const Ue=de(G),nt=de(p),ye=Math.max(Ue,nt),Re=10**ye;if(typeof G!="number"||Number.isNaN(G))he=Lc(A,h,f);else if(f!==void 0){const Qe=(Math.round(G*Re)+Math.round(p*Re))/Re;he=Qe<=f?Qe:f}else he=(Math.round(G*Re)+Math.round(p*Re))/Re;const Ge=he.toFixed(ye);J(parseFloat(Ge)),u==null||u({floatValue:parseFloat(Ge),formattedValue:Ge,value:Ge},{source:"increment"}),setTimeout(()=>{var Qe;return Ke((Qe=ie.current)==null?void 0:Qe.value.length)},0)};const Oe=I.useRef();Oe.current=()=>{let he;const Ue=h!==void 0?h:L?Number.MIN_SAFE_INTEGER:0,nt=de(G),ye=de(p),Re=Math.max(nt,ye),Ge=10**Re;if(typeof G!="number"||Number.isNaN(G))he=Lc(A,Ue,f);else{const xt=(Math.round(G*Ge)-Math.round(p*Ge))/Ge;he=Ue!==void 0&&xt<Ue?Ue:xt}const Qe=he.toFixed(Re);J(parseFloat(Qe)),u==null||u({floatValue:parseFloat(Qe),formattedValue:Qe,value:Qe},{source:"decrement"}),setTimeout(()=>{var xt;return Ke((xt=ie.current)==null?void 0:xt.value.length)},0)};const Fe=he=>{x==null||x(he),!(k||!U)&&(he.key==="ArrowUp"&&(he.preventDefault(),je.current()),he.key==="ArrowDown"&&(he.preventDefault(),Oe.current()))},Ae=he=>{if(S==null||S(he),he.key==="Backspace"){const Ue=ie.current;Ue.selectionStart===0&&Ue.selectionStart===Ue.selectionEnd&&(he.preventDefault(),window.setTimeout(()=>Ke(0),0))}};HG(C,{increment:je.current,decrement:Oe.current});const fe=he=>{he?je.current():Oe.current(),ue.current+=1},Pe=he=>{if(fe(he),se){const Ue=typeof M=="number"?M:M(ue.current);ne.current=window.setTimeout(()=>Pe(he),Ue)}},He=(he,Ue)=>{var nt;he.preventDefault(),(nt=ie.current)==null||nt.focus(),fe(Ue),se&&(ne.current=window.setTimeout(()=>Pe(Ue),B))},ft=()=>{ne.current&&window.clearTimeout(ne.current),ne.current=null,ue.current=0},Ee=v.jsxs("div",{...W("controls"),children:[v.jsx(ds,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof G=="number"&&f!==void 0&&G>=f,mod:{direction:"up"},onMouseDown:he=>he.preventDefault(),onPointerDown:he=>{He(he,!0)},onPointerUp:ft,onPointerLeave:ft,children:v.jsx(Ple,{direction:"up"})}),v.jsx(ds,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:he=>he.preventDefault(),onPointerDown:he=>{He(he,!1)},onPointerUp:ft,onPointerLeave:ft,children:v.jsx(Ple,{direction:"down"})})]});return v.jsx(gu,{component:GQe,allowNegative:L,className:vt(uU.root,r),size:$,...V,readOnly:k,disabled:R,value:G,getInputRef:ps(t,ie),onValueChange:xe,rightSection:m||k?g:g||Ee,classNames:j,styles:H,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:Fe,onKeyDownCapture:Ae,rightSectionPointerEvents:P??(R?"none":void 0),rightSectionWidth:D??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:z,onBlur:he=>{if(_==null||_(he),b==="blur"&&typeof G=="number"&&Lc(G,h,f)!==G&&J(Lc(G,h,f)),O&&typeof G=="string"){const Ue=G.replace(/^0+/,""),nt=parseFloat(Ue);J(Number.isNaN(nt)||nt>Number.MAX_SAFE_INTEGER?Ue:nt)}},isAllowed:he=>b==="strict"?y?y(he)&&Nle(he.floatValue,h,f):Nle(he.floatValue,h,f):y?y(he):!0})});EK.classes={...gu.classes,...uU};EK.displayName="@mantine/core/NumberInput";const[ZQe,PF]=Fs("Pagination.Root component was not found in tree");var Rk={root:"m_4addd315",control:"m_326d024a",dots:"m_4ad7767d"};const eJe={withPadding:!0},Pk=Le((e,t)=>{const n=we("PaginationControl",eJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,active:l,disabled:u,withPadding:c,mod:d,...f}=n,h=PF(),p=u||h.disabled;return v.jsx(ds,{ref:t,disabled:p,mod:[{active:l,disabled:p,"with-padding":c},d],...h.getStyles("control",{className:i,style:s,classNames:r,styles:o,active:!p}),...f})});Pk.classes=Rk;Pk.displayName="@mantine/core/PaginationControl";function Nk({style:e,children:t,path:n,...r}){return v.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)",...e},...r,children:v.jsx("path",{d:n,fill:"currentColor"})})}const tJe=e=>v.jsx(Nk,{...e,path:"M8.781 8l-3.3-3.3.943-.943L10.667 8l-4.243 4.243-.943-.943 3.3-3.3z"}),nJe=e=>v.jsx(Nk,{...e,path:"M7.219 8l3.3 3.3-.943.943L5.333 8l4.243-4.243.943.943-3.3 3.3z"}),rJe=e=>v.jsx(Nk,{...e,path:"M6.85355 3.85355C7.04882 3.65829 7.04882 3.34171 6.85355 3.14645C6.65829 2.95118 6.34171 2.95118 6.14645 3.14645L2.14645 7.14645C1.95118 7.34171 1.95118 7.65829 2.14645 7.85355L6.14645 11.8536C6.34171 12.0488 6.65829 12.0488 6.85355 11.8536C7.04882 11.6583 7.04882 11.3417 6.85355 11.1464L3.20711 7.5L6.85355 3.85355ZM12.8536 3.85355C13.0488 3.65829 13.0488 3.34171 12.8536 3.14645C12.6583 2.95118 12.3417 2.95118 12.1464 3.14645L8.14645 7.14645C7.95118 7.34171 7.95118 7.65829 8.14645 7.85355L12.1464 11.8536C12.3417 12.0488 12.6583 12.0488 12.8536 11.8536C13.0488 11.6583 13.0488 11.3417 12.8536 11.1464L9.20711 7.5L12.8536 3.85355Z"}),iJe=e=>v.jsx(Nk,{...e,path:"M2.14645 11.1464C1.95118 11.3417 1.95118 11.6583 2.14645 11.8536C2.34171 12.0488 2.65829 12.0488 2.85355 11.8536L6.85355 7.85355C7.04882 7.65829 7.04882 7.34171 6.85355 7.14645L2.85355 3.14645C2.65829 2.95118 2.34171 2.95118 2.14645 3.14645C1.95118 3.34171 1.95118 3.65829 2.14645 3.85355L5.79289 7.5L2.14645 11.1464ZM8.14645 11.1464C7.95118 11.3417 7.95118 11.6583 8.14645 11.8536C8.34171 12.0488 8.65829 12.0488 8.85355 11.8536L12.8536 7.85355C13.0488 7.65829 13.0488 7.34171 12.8536 7.14645L8.85355 3.14645C8.65829 2.95118 8.34171 2.95118 8.14645 3.14645C7.95118 3.34171 7.95118 3.65829 8.14645 3.85355L11.7929 7.5L8.14645 11.1464Z"}),sJe=e=>v.jsx(Nk,{...e,path:"M2 8c0-.733.6-1.333 1.333-1.333.734 0 1.334.6 1.334 1.333s-.6 1.333-1.334 1.333C2.6 9.333 2 8.733 2 8zm9.333 0c0-.733.6-1.333 1.334-1.333C13.4 6.667 14 7.267 14 8s-.6 1.333-1.333 1.333c-.734 0-1.334-.6-1.334-1.333zM6.667 8c0-.733.6-1.333 1.333-1.333s1.333.6 1.333 1.333S8.733 9.333 8 9.333 6.667 8.733 6.667 8z"}),oJe={icon:sJe},NF=Le((e,t)=>{const n=we("PaginationDots",oJe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:l,...u}=n,c=PF(),d=l;return v.jsx(ge,{ref:t,...c.getStyles("dots",{className:i,style:s,styles:o,classNames:r}),...u,children:v.jsx(d,{style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});NF.classes=Rk;NF.displayName="@mantine/core/PaginationDots";function OF({icon:e,name:t,action:n,type:r}){const i={icon:e},s=I.forwardRef((o,a)=>{const{icon:l,...u}=we(t,i,o),c=l,d=PF(),f=r==="next"?d.active===d.total:d.active===1;return v.jsx(Pk,{disabled:d.disabled||f,ref:a,onClick:d[n],withPadding:!1,...u,children:v.jsx(c,{className:"mantine-rotate-rtl",style:{width:"calc(var(--pagination-control-size) / 1.8)",height:"calc(var(--pagination-control-size) / 1.8)"}})})});return s.displayName=`@mantine/core/${t}`,s}const nxe=OF({icon:tJe,name:"PaginationNext",action:"onNext",type:"next"}),rxe=OF({icon:nJe,name:"PaginationPrevious",action:"onPrevious",type:"previous"}),ixe=OF({icon:rJe,name:"PaginationFirst",action:"onFirst",type:"previous"}),sxe=OF({icon:iJe,name:"PaginationLast",action:"onLast",type:"next"});function xK({dotsIcon:e}){const t=PF(),n=t.range.map((r,i)=>{var s;return r==="dots"?v.jsx(NF,{icon:e},i):v.jsx(Pk,{active:r===t.active,"aria-current":r===t.active?"page":void 0,onClick:()=>t.onChange(r),disabled:t.disabled,...(s=t.getItemProps)==null?void 0:s.call(t,r),children:r},i)});return v.jsx(v.Fragment,{children:n})}xK.displayName="@mantine/core/PaginationItems";const aJe={siblings:1,boundaries:1},lJe=(e,{size:t,radius:n,color:r,autoContrast:i})=>({root:{"--pagination-control-radius":n===void 0?void 0:Pr(n),"--pagination-control-size":Jt(t,"pagination-control-size"),"--pagination-control-fz":Zs(t),"--pagination-active-bg":r?zr(r,e):void 0,"--pagination-active-color":Uy(i,e)?ap({color:r,theme:e,autoContrast:i}):void 0}}),DF=Le((e,t)=>{const n=we("PaginationRoot",aJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,total:u,value:c,defaultValue:d,onChange:f,disabled:h,siblings:p,boundaries:m,color:g,radius:y,onNextPage:b,onPreviousPage:_,onFirstPage:w,onLastPage:E,getItemProps:x,autoContrast:S,...C}=n,A=mt({name:"Pagination",classes:Rk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:lJe}),{range:R,setPage:P,next:L,previous:k,active:$,first:D,last:M}=WVe({page:c,initialPage:d,onChange:f,total:u,siblings:p,boundaries:m}),B=Vo(b,L),z=Vo(_,k),U=Vo(w,D),O=Vo(E,M);return v.jsx(ZQe,{value:{total:u,range:R,active:$,disabled:h,getItemProps:x,onChange:P,onNext:B,onPrevious:z,onFirst:U,onLast:O,getStyles:A},children:v.jsx(ge,{ref:t,...A("root"),...C})})});DF.classes=Rk;DF.displayName="@mantine/core/PaginationRoot";const uJe={withControls:!0,siblings:1,boundaries:1,gap:8},Df=Le((e,t)=>{const n=we("Pagination",uJe,e),{withEdges:r,withControls:i,getControlProps:s,nextIcon:o,previousIcon:a,lastIcon:l,firstIcon:u,dotsIcon:c,total:d,gap:f,hideWithOnePage:h,...p}=n;return d<=0||h&&d===1?null:v.jsx(DF,{ref:t,total:d,...p,children:v.jsxs(Ln,{gap:f,children:[r&&v.jsx(ixe,{icon:u,...s==null?void 0:s("first")}),i&&v.jsx(rxe,{icon:a,...s==null?void 0:s("previous")}),v.jsx(xK,{dotsIcon:c}),i&&v.jsx(nxe,{icon:o,...s==null?void 0:s("next")}),r&&v.jsx(sxe,{icon:l,...s==null?void 0:s("last")})]})})});Df.classes=Rk;Df.displayName="@mantine/core/Pagination";Df.Root=DF;Df.Control=Pk;Df.Dots=NF;Df.First=ixe;Df.Last=sxe;Df.Next=nxe;Df.Previous=rxe;Df.Items=xK;const[cJe,oxe]=Fs("Progress.Root component was not found in tree");var Ok={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const dJe={},SK=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("ProgressLabel",dJe,e),l=oxe();return v.jsx(ge,{ref:t,...l.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});SK.classes=Ok;SK.displayName="@mantine/core/ProgressLabel";const fJe={},hJe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Jt(t,"progress-size"),"--progress-radius":n===void 0?void 0:Pr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),MF=Le((e,t)=>{const n=we("ProgressRoot",fJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,autoContrast:u,transitionDuration:c,...d}=n,f=mt({name:"Progress",classes:Ok,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:hJe});return v.jsx(cJe,{value:{getStyles:f,autoContrast:u},children:v.jsx(ge,{ref:t,...f("root"),...d})})});MF.classes=Ok;MF.displayName="@mantine/core/ProgressRoot";const pJe={withAria:!0},$F=Le((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:l,color:u,striped:c,animated:d,mod:f,...h}=we("ProgressSection",pJe,e),p=oxe(),m=As(),g=l?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return v.jsx(ge,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||d,animated:d},f],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":zr(u,m),"--progress-label-color":Uy(p.autoContrast,m)?ap({color:u,theme:m,autoContrast:p.autoContrast}):void 0}})});$F.classes=Ok;$F.displayName="@mantine/core/ProgressSection";const mJe={},Vb=Le((e,t)=>{const n=we("Progress",mJe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:l,animated:u,"aria-label":c,...d}=n,{resolvedClassNames:f,resolvedStyles:h}=lp({classNames:i,styles:s,props:n});return v.jsx(MF,{ref:t,classNames:f,styles:h,vars:o,...d,children:v.jsx($F,{value:r,color:a,striped:l,animated:u,"aria-label":c})})});Vb.classes=Ok;Vb.displayName="@mantine/core/Progress";Vb.Section=$F;Vb.Root=MF;Vb.Label=SK;const[gJe,axe]=jb(),[yJe,vJe]=jb();var lxe={card:"m_9dc8ae12"};const bJe={withBorder:!0},_Je=(e,{radius:t})=>({card:{"--card-radius":Pr(t)}}),TK=Le((e,t)=>{const n=we("RadioCard",bJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,checked:u,mod:c,withBorder:d,value:f,onClick:h,name:p,onKeyDown:m,...g}=n,y=mt({name:"RadioCard",classes:lxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_Je,rootSelector:"card"}),{dir:b}=bl(),_=axe(),w=typeof u=="boolean"?u:(_==null?void 0:_.value)===f||!1,E=p||(_==null?void 0:_.name),x=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),A=C.findIndex(L=>L===S.target),R=A+1>=C.length?0:A+1,P=A-1<0?C.length-1:A-1;S.nativeEvent.code==="ArrowDown"&&(C[R].focus(),C[R].click()),S.nativeEvent.code==="ArrowUp"&&(C[P].focus(),C[P].click()),S.nativeEvent.code==="ArrowLeft"&&(C[b==="ltr"?P:R].focus(),C[b==="ltr"?P:R].click()),S.nativeEvent.code==="ArrowRight"&&(C[b==="ltr"?R:P].focus(),C[b==="ltr"?R:P].click())}};return v.jsx(yJe,{value:{checked:w},children:v.jsx(ds,{ref:t,mod:[{"with-border":d,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:S=>{h==null||h(S),_==null||_.onChange(f||"")},onKeyDown:x})})});TK.displayName="@mantine/core/RadioCard";TK.classes=lxe;const wJe={},CK=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:l,readOnly:u,...c}=we("RadioGroup",wJe,e),d=ta(l),[f,h]=ji({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!u&&h(typeof m=="string"?m:m.currentTarget.value);return v.jsx(gJe,{value:{value:f,onChange:p,size:s,name:d},children:v.jsx(Kr.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:v.jsx(YY,{role:"radiogroup",children:a})})})});CK.classes=Kr.Wrapper.classes;CK.displayName="@mantine/core/RadioGroup";function uxe({size:e,style:t,...n}){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Se(e),height:Se(e),...t},"aria-hidden":!0,...n,children:v.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var cxe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const EJe={icon:uxe},xJe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ku({color:n||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Jt(r,"radio-size"),"--radio-radius":t===void 0?void 0:Pr(t),"--radio-color":s==="outline"?l:zr(n,e),"--radio-icon-size":Jt(r,"radio-icon-size"),"--radio-icon-color":i?zr(i,e):Uy(o,e)?ap({color:n,theme:e,autoContrast:o}):void 0}}},AK=Le((e,t)=>{const n=we("RadioIndicator",EJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,icon:u,radius:c,color:d,iconColor:f,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...b}=n,_=u,w=mt({name:"RadioIndicator",classes:cxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:xJe,rootSelector:"indicator"}),E=vJe(),x=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return v.jsx(ge,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:x,disabled:y},m],...b,children:v.jsx(_,{...w("icon")})})});AK.displayName="@mantine/core/RadioIndicator";AK.classes=cxe;var dxe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const SJe={labelPosition:"right"},TJe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Ku({color:r||e.primaryColor,theme:e}),l=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Jt(t,"radio-size"),"--radio-radius":n===void 0?void 0:Pr(n),"--radio-color":s==="outline"?l:zr(r,e),"--radio-icon-color":i?zr(i,e):Uy(o,e)?ap({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Jt(t,"radio-icon-size")}}},ty=Le((e,t)=>{const n=we("Radio",SJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,id:u,size:c,label:d,labelPosition:f,description:h,error:p,radius:m,color:g,variant:y,disabled:b,wrapperProps:_,icon:w=uxe,rootRef:E,iconColor:x,onChange:S,mod:C,...A}=n,R=mt({name:"Radio",classes:dxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:TJe}),P=axe(),L=(P==null?void 0:P.size)??c,k=n.size?c:L,{styleProps:$,rest:D}=zb(A),M=ta(u),B=P?{checked:P.value===D.value,name:D.name??P.name,onChange:z=>{P.onChange(z),S==null||S(z)}}:{};return v.jsx(cF,{...R("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:k,labelPosition:f,label:d,description:h,error:p,disabled:b,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:C,...$,..._,children:v.jsxs(ge,{...R("inner"),mod:{"label-position":f},children:[v.jsx(ge,{...R("radio",{focusable:!0,variant:y}),onChange:S,...D,...B,component:"input",mod:{error:!!p},ref:t,id:M,disabled:b,type:"radio"}),v.jsx(w,{...R("icon"),"aria-hidden":!0})]})})});ty.classes=dxe;ty.displayName="@mantine/core/Radio";ty.Group=CK;ty.Card=TK;ty.Indicator=AK;const CJe={duration:100,transition:"fade"};function AJe(e,t){return{...CJe,...t,...e}}function IJe({offset:e,position:t,defaultOpened:n}){const[r,i]=I.useState(n),s=I.useRef(),{x:o,y:a,elements:l,refs:u,update:c,placement:d}=hY({placement:t,middleware:[uY({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=d.includes("right")?e:t.includes("left")?e*-1:0,h=d.includes("bottom")?e:t.includes("top")?e*-1:0,p=I.useCallback(({clientX:m,clientY:g})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+f,top:g+h,right:m,bottom:g}}})},[l.reference]);return I.useEffect(()=>{if(u.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=mm(u.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[l.reference,u.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:u.setFloating}}var LF={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const kJe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:ad("popover")},RJe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Pr(t),"--tooltip-bg":n?zr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),IK=Le((e,t)=>{const n=we("TooltipFloating",kJe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:l,styles:u,unstyled:c,radius:d,color:f,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:b,defaultOpened:_,variant:w,vars:E,portalProps:x,...S}=n,C=As(),A=mt({name:"TooltipFloating",props:n,classes:LF,className:a,style:o,classNames:l,styles:u,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:RJe}),{handleMouseMove:R,x:P,y:L,opened:k,boundaryRef:$,floating:D,setOpened:M}=IJe({offset:p,position:m,defaultOpened:_});if(!tg(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const B=ps($,r.ref,t),z=O=>{var V,W;(W=(V=r.props).onMouseEnter)==null||W.call(V,O),R(O),M(!0)},U=O=>{var V,W;(W=(V=r.props).onMouseLeave)==null||W.call(V,O),M(!1)};return v.jsxs(v.Fragment,{children:[v.jsx(xk,{...x,withinPortal:s,children:v.jsx(ge,{...S,...A("tooltip",{style:{...XG(o,C),zIndex:y,display:!b&&k?"block":"none",top:(L&&Math.round(L))??"",left:(P&&Math.round(P))??""}}),variant:w,ref:D,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:B,onMouseEnter:z,onMouseLeave:U})]})});IK.classes=LF;IK.displayName="@mantine/core/TooltipFloating";const fxe=I.createContext(!1),PJe=fxe.Provider,NJe=()=>I.useContext(fxe),OJe={openDelay:0,closeDelay:0};function hxe(e){const{openDelay:t,closeDelay:n,children:r}=we("TooltipGroup",OJe,e);return v.jsx(PJe,{value:!0,children:v.jsx(qWe,{delay:{open:t,close:n},children:r})})}hxe.displayName="@mantine/core/TooltipGroup";function DJe(e){var x,S,C;const[t,n]=I.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=NJe(),o=ta(),{delay:a,currentId:l,setCurrentId:u}=Mwe(),c=I.useCallback(A=>{n(A),A&&u(o)},[u,o]),{x:d,y:f,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:b}={}}}=hY({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Rwe(e.offset),uY({padding:8}),nU(),Pwe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[rU()]:[]]}),{getReferenceProps:_,getFloatingProps:w}=JWe([HWe(h,{enabled:(x=e.events)==null?void 0:x.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),QWe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),eGe(h,{role:"tooltip"}),KWe(h,{enabled:typeof e.opened>"u"}),WWe(h,{id:o})]);Uwe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Yu(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const E=i&&l&&l!==o;return{x:d,y:f,arrowX:y,arrowY:b,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:_,isGroupPhase:E,opened:i,placement:g}}const Ole={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:ad("popover"),positionDependencies:[]},MJe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Pr(t),"--tooltip-bg":n?zr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),on=Le((e,t)=>{const n=we("Tooltip",Ole,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:l,onPositionChange:u,opened:c,defaultOpened:d,withinPortal:f,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:b,className:_,withArrow:w,arrowSize:E,arrowOffset:x,arrowRadius:S,arrowPosition:C,offset:A,transitionProps:R,multiline:P,events:L,zIndex:k,disabled:$,positionDependencies:D,onClick:M,onMouseEnter:B,onMouseLeave:z,inline:U,variant:O,keepMounted:V,vars:W,portalProps:j,mod:H,floatingStrategy:G,...J}=we("Tooltip",Ole,n),{dir:se}=bl(),ie=I.useRef(null),ne=DJe({position:$we(se,i),closeDelay:l,openDelay:a,onPositionChange:u,opened:c,defaultOpened:d,events:L,arrowRef:ie,arrowOffset:x,offset:typeof A=="number"?A+(w?E/2:0):A,positionDependencies:[...D,r],inline:U,strategy:G}),ue=mt({name:"Tooltip",props:n,classes:LF,className:_,style:b,classNames:m,styles:g,unstyled:y,rootSelector:"tooltip",vars:W,varsResolver:MJe});if(!tg(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const xe=ps(ne.reference,r.ref,t),de=AJe(R,{duration:100,transition:"fade"});return v.jsxs(v.Fragment,{children:[v.jsx(xk,{...j,withinPortal:f,children:v.jsx(Nf,{...de,keepMounted:V,mounted:!$&&!!ne.opened,duration:ne.isGroupPhase?10:de.duration,children:Ke=>v.jsxs(ge,{...J,variant:O,mod:[{multiline:P},H],...ne.getFloatingProps({ref:ne.floating,className:ue("tooltip").className,style:{...ue("tooltip").style,...Ke,zIndex:k,top:ne.y??0,left:ne.x??0}}),children:[o,v.jsx(pY,{ref:ie,arrowX:ne.arrowX,arrowY:ne.arrowY,visible:w,position:ne.placement,arrowSize:E,arrowOffset:x,arrowRadius:S,arrowPosition:C,...ue("arrow")})]})})}),I.cloneElement(r,ne.getReferenceProps({onClick:M,onMouseEnter:B,onMouseLeave:z,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:xe,className:vt(_,r.props.className),...r.props}))]})});on.classes=LF;on.displayName="@mantine/core/Tooltip";on.Floating=IK;on.Group=hxe;var pxe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const $Je={withItemsBorders:!0},LJe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Pr(t),"--sc-color":n?zr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Jt(i,"sc-padding"),"--sc-font-size":Zs(i)}}),IM=Le((e,t)=>{var J,se;const n=we("SegmentedControl",$Je,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,data:u,value:c,defaultValue:d,onChange:f,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:b,radius:_,color:w,transitionDuration:E,transitionTimingFunction:x,variant:S,autoContrast:C,withItemsBorders:A,mod:R,...P}=n,L=mt({name:"SegmentedControl",props:n,classes:pxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:LJe}),k=As(),$=u.map(ie=>typeof ie=="string"?{label:ie,value:ie}:ie),D=ZVe(),[M,B]=I.useState(null),[z,U]=I.useState({}),O=(ie,ne)=>{z[ne]=ie,U(z)},[V,W]=ji({value:c,defaultValue:d,finalValue:Array.isArray(u)?((J=$.find(ie=>!ie.disabled))==null?void 0:J.value)??((se=u[0])==null?void 0:se.value)??null:null,onChange:f}),j=ta(p),H=$.map(ie=>I.createElement(ge,{...L("control"),mod:{active:V===ie.value,orientation:b},key:ie.value},I.createElement("input",{...L("input"),disabled:m||ie.disabled,type:"radio",name:j,value:ie.value,id:`${j}-${ie.value}`,checked:V===ie.value,onChange:()=>!g&&W(ie.value),"data-focus-ring":k.focusRing,key:`${ie.value}-input`}),I.createElement(ge,{component:"label",...L("label"),mod:{active:V===ie.value&&!(m||ie.disabled),disabled:m||ie.disabled,"read-only":g},htmlFor:`${j}-${ie.value}`,ref:ne=>O(ne,ie.value),__vars:{"--sc-label-color":w!==void 0?ap({color:w,theme:k,autoContrast:C}):void 0},key:`${ie.value}-label`},v.jsx("span",{...L("innerLabel"),children:ie.label})))),G=ps(t,ie=>B(ie));return u.length===0?null:v.jsxs(ge,{...L("root"),variant:S,size:h,ref:G,mod:[{"full-width":y,orientation:b,initialized:D,"with-items-borders":A},R],...P,role:"radiogroup",children:[typeof V=="string"&&v.jsx(TY,{target:z[V],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...L("indicator")}),H]})});IM.classes=pxe;IM.displayName="@mantine/core/SegmentedControl";const FJe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},vf=Le((e,t)=>{const n=we("Select",FJe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:l,onDropdownClose:u,onDropdownOpen:c,onFocus:d,onBlur:f,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:b,onOptionSubmit:_,comboboxProps:w,readOnly:E,disabled:x,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:R,size:P,searchable:L,rightSection:k,checkIconPosition:$,withCheckIcon:D,nothingFoundMessage:M,name:B,form:z,searchValue:U,defaultSearchValue:O,onSearchChange:V,allowDeselect:W,error:j,rightSectionPointerEvents:H,id:G,clearable:J,clearButtonProps:se,hiddenInputProps:ie,renderOption:ne,onClear:ue,autoComplete:xe,scrollAreaProps:de,...Ke}=n,je=I.useMemo(()=>$Y(m),[m]),Oe=I.useMemo(()=>uF(je),[je]),Fe=ta(G),[Ae,fe,Pe]=ji({value:g,defaultValue:y,finalValue:null,onChange:p}),He=typeof Ae=="string"?Oe[Ae]:void 0,ft=QVe(He),[Ee,he]=ji({value:U,defaultValue:O,finalValue:He?He.label:"",onChange:V}),Ue=Ik({opened:a,defaultOpened:l,onDropdownOpen:()=>{c==null||c(),Ue.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{u==null||u(),Ue.resetSelectedOption()}}),{resolvedClassNames:nt,resolvedStyles:ye}=lp({props:n,styles:i,classNames:r});I.useEffect(()=>{b&&Ue.selectFirstOption()},[b,Ae]),I.useEffect(()=>{g===null&&he(""),typeof g=="string"&&He&&((ft==null?void 0:ft.value)!==He.value||(ft==null?void 0:ft.label)!==He.label)&&he(He.label)},[g,He]);const Re=J&&!!Ae&&!x&&!E&&v.jsx(sn.ClearButton,{size:P,...se,onClear:()=>{fe(null,null),he(""),ue==null||ue()}});return v.jsxs(v.Fragment,{children:[v.jsxs(sn,{store:Ue,__staticSelector:"Select",classNames:nt,styles:ye,unstyled:s,readOnly:E,onOptionSubmit:Ge=>{_==null||_(Ge);const Qe=W&&Oe[Ge].value===Ae?null:Oe[Ge],xt=Qe?Qe.value:null;xt!==Ae&&fe(xt,Qe),!Pe&&he(typeof xt=="string"&&(Qe==null?void 0:Qe.label)||""),Ue.closeDropdown()},size:P,...w,children:[v.jsx(sn.Target,{targetType:L?"input":"button",autoComplete:xe,children:v.jsx(gu,{id:Fe,ref:t,rightSection:k||Re||v.jsx(sn.Chevron,{size:P,error:j,unstyled:s}),rightSectionPointerEvents:H||(Re?"all":"none"),...Ke,size:P,__staticSelector:"Select",disabled:x,readOnly:E||!L,value:Ee,onChange:Ge=>{he(Ge.currentTarget.value),Ue.openDropdown(),b&&Ue.selectFirstOption()},onFocus:Ge=>{L&&Ue.openDropdown(),d==null||d(Ge)},onBlur:Ge=>{var Qe;L&&Ue.closeDropdown(),he(Ae!=null&&((Qe=Oe[Ae])==null?void 0:Qe.label)||""),f==null||f(Ge)},onClick:Ge=>{L?Ue.openDropdown():Ue.toggleDropdown(),h==null||h(Ge)},classNames:nt,styles:ye,unstyled:s,pointer:!L,error:j})}),v.jsx(QY,{data:je,hidden:E||x,filter:S,search:Ee,limit:C,hiddenWhenEmpty:!M,withScrollArea:A,maxDropdownHeight:R,filterOptions:L&&(He==null?void 0:He.label)!==Ee,value:Ae,checkIconPosition:$,withCheckIcon:D,nothingFoundMessage:M,unstyled:s,labelId:Ke.label?`${Fe}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:ne,scrollAreaProps:de})]}),v.jsx(sn.HiddenInput,{value:Ae,name:B,form:z,disabled:x,...ie})]})});vf.classes={...gu.classes,...sn.classes};vf.displayName="@mantine/core/Select";var mxe={root:"m_18320242","skeleton-fade":"m_299c329c"};const jJe={visible:!0,animate:!0},BJe=(e,{width:t,height:n,radius:r,circle:i})=>({root:{"--skeleton-height":Se(n),"--skeleton-width":Se(i?n:t),"--skeleton-radius":i?"1000px":r===void 0?void 0:Pr(r)}}),kK=Le((e,t)=>{const n=we("Skeleton",jJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,width:u,height:c,circle:d,visible:f,radius:h,animate:p,mod:m,...g}=n,y=mt({name:"Skeleton",classes:mxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:BJe});return v.jsx(ge,{ref:t,...y("root"),mod:[{visible:f,animate:p},m],...g})});kK.classes=mxe;kK.displayName="@mantine/core/Skeleton";const[gxe,FF]=Fs("SliderProvider was not found in tree"),RK=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:l}=FF();return v.jsx(ge,{tabIndex:-1,variant:n,size:e,ref:a,...l("root"),...o})});RK.displayName="@mantine/core/SliderRoot";const kM=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:l,labelAlwaysOn:u,thumbLabel:c,onFocus:d,onBlur:f,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:b}=FF(),[_,w]=I.useState(!1),E=u||s||_||h&&p;return v.jsxs(ge,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...b("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof d=="function"&&d()},onBlur:()=>{w(!1),typeof f=="function"&&f()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:x=>x.stopPropagation(),children:[m,v.jsx(Nf,{mounted:i!=null&&!!E,transition:"fade",duration:0,...l,children:x=>v.jsx("div",{...b("label",{style:x}),children:i})})]})});kM.displayName="@mantine/core/SliderThumb";function RM({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function zJe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function yxe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=FF();if(!e)return null;const l=e.map((u,c)=>I.createElement(ge,{...a("markWrapper"),__vars:{"--mark-offset":`${RM({value:u.value,min:t,max:n})}%`},key:c},v.jsx(ge,{...a("mark"),mod:{filled:zJe({mark:u,value:i,offset:s,inverted:o}),disabled:r}}),u.label&&v.jsx("div",{...a("markLabel"),children:u.label})));return v.jsx("div",{children:l})}yxe.displayName="@mantine/core/SliderMarks";function PK({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:l}=FF();return v.jsx(v.Fragment,{children:v.jsx(ge,{...l("trackContainer"),mod:{disabled:r},...o,children:v.jsxs(ge,{...l("track"),mod:{inverted:s,disabled:r},children:[v.jsx(ge,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...l("bar")}),t,v.jsx(yxe,{...a,offset:i,disabled:r,inverted:s})]})})})}PK.displayName="@mantine/core/SliderTrack";function cU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),l=(a!==0?Math.round(a/i)*i:0)+n,u=Math.max(l,n);return s!==void 0?Number(u.toFixed(s)):u}function Tc(e,t){return parseFloat(e.toFixed(t))}function vxe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var jF={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const UJe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},VJe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Jt(t,"slider-size"),"--slider-color":n?zr(n,e):void 0,"--slider-radius":i===void 0?void 0:Pr(i),"--slider-thumb-size":r!==void 0?Se(r):"calc(var(--slider-size) * 2)"}}),NK=Le((e,t)=>{const n=we("Slider",UJe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:u,max:c,step:d,precision:f,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:b,thumbLabel:_,showLabelOnHover:w,thumbChildren:E,disabled:x,unstyled:S,scale:C,inverted:A,className:R,style:P,vars:L,hiddenInputProps:k,...$}=n,D=mt({name:"Slider",props:n,classes:jF,classNames:r,className:R,styles:i,style:P,vars:L,varsResolver:VJe,unstyled:S}),{dir:M}=bl(),[B,z]=I.useState(!1),[U,O]=ji({value:typeof s=="number"?Lc(s,u,c):s,defaultValue:typeof h=="number"?Lc(h,u,c):h,finalValue:Lc(0,u,c),onChange:o}),V=I.useRef(U),W=I.useRef(),j=I.useRef(),H=RM({value:U,min:u,max:c}),G=C(U),J=typeof g=="function"?g(G):g,se=f??vxe(d),ie=I.useCallback(({x:de})=>{if(!x){const Ke=cU({value:de,min:u,max:c,step:d,precision:se});O(Ke),V.current=Ke}},[x,u,c,d,se,O]),{ref:ne,active:ue}=XL(ie,{onScrubEnd:()=>a==null?void 0:a(V.current)},M),xe=de=>{var Ke,je,Oe,Fe,Ae,fe;if(!x)switch(de.key){case"ArrowUp":{de.preventDefault(),(Ke=j.current)==null||Ke.focus();const Pe=Tc(Math.min(Math.max(U+d,u),c),se);O(Pe),a==null||a(Pe);break}case"ArrowRight":{de.preventDefault(),(je=j.current)==null||je.focus();const Pe=Tc(Math.min(Math.max(M==="rtl"?U-d:U+d,u),c),se);O(Pe),a==null||a(Pe);break}case"ArrowDown":{de.preventDefault(),(Oe=j.current)==null||Oe.focus();const Pe=Tc(Math.min(Math.max(U-d,u),c),se);O(Pe),a==null||a(Pe);break}case"ArrowLeft":{de.preventDefault(),(Fe=j.current)==null||Fe.focus();const Pe=Tc(Math.min(Math.max(M==="rtl"?U+d:U-d,u),c),se);O(Pe),a==null||a(Pe);break}case"Home":{de.preventDefault(),(Ae=j.current)==null||Ae.focus(),O(u),a==null||a(u);break}case"End":{de.preventDefault(),(fe=j.current)==null||fe.focus(),O(c),a==null||a(c);break}}};return v.jsx(gxe,{value:{getStyles:D},children:v.jsxs(RK,{...$,ref:ps(t,W),onKeyDownCapture:xe,onMouseDownCapture:()=>{var de;return(de=W.current)==null?void 0:de.focus()},size:l,disabled:x,children:[v.jsx(PK,{inverted:A,offset:0,filled:H,marks:m,min:u,max:c,value:G,disabled:x,containerProps:{ref:ne,onMouseEnter:w?()=>z(!0):void 0,onMouseLeave:w?()=>z(!1):void 0},children:v.jsx(kM,{max:c,min:u,value:G,position:H,dragging:ue,label:J,ref:j,labelTransitionProps:y,labelAlwaysOn:b,thumbLabel:_,showLabelOnHover:w,isHovered:B,disabled:x,children:E})}),v.jsx("input",{type:"hidden",name:p,value:G,...k})]})})});NK.classes=jF;NK.displayName="@mantine/core/Slider";function HJe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const qJe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Jt(t,"slider-size"),"--slider-color":n?zr(n,e):void 0,"--slider-radius":i===void 0?void 0:Pr(i),"--slider-thumb-size":r!==void 0?Se(r):"calc(var(--slider-size) * 2)"}}),WJe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},BF=Le((e,t)=>{const n=we("RangeSlider",WJe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:l,min:u,max:c,minRange:d,maxRange:f,step:h,precision:p,defaultValue:m,name:g,marks:y,label:b,labelTransitionProps:_,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:x,showLabelOnHover:S,thumbChildren:C,disabled:A,unstyled:R,scale:P,inverted:L,className:k,style:$,vars:D,hiddenInputProps:M,...B}=n,z=mt({name:"Slider",props:n,classes:jF,classNames:r,className:k,styles:i,style:$,vars:D,varsResolver:qJe,unstyled:R}),{dir:U}=bl(),[O,V]=I.useState(-1),[W,j]=I.useState(!1),[H,G]=ji({value:s,defaultValue:m,finalValue:[u,c],onChange:o}),J=I.useRef(H),se=I.useRef([]),ie=I.useRef(void 0),ne=[RM({value:H[0],min:u,max:c}),RM({value:H[1],min:u,max:c})],ue=p??vxe(h),xe=Ee=>{G(Ee),J.current=Ee};I.useEffect(()=>{Array.isArray(s)&&(J.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const de=(Ee,he,Ue)=>{const nt=[...J.current];nt[he]=Ee,he===0&&(Ee>nt[1]-(d-1e-9)&&(nt[1]=Math.min(Ee+d,c)),Ee>(c-(d-1e-9)||u)&&(nt[he]=J.current[he]),nt[1]-Ee>f&&(nt[1]=Ee+f)),he===1&&(Ee<nt[0]+d&&(nt[0]=Math.max(Ee-d,u)),Ee<nt[0]+d&&(nt[he]=J.current[he]),Ee-nt[0]>f&&(nt[0]=Ee-f)),nt[0]=Tc(nt[0],ue),nt[1]=Tc(nt[1],ue),xe(nt),Ue&&(a==null||a(J.current))},Ke=Ee=>{if(!A){const he=cU({value:Ee,min:u,max:c,step:h,precision:ue});de(he,ie.current,!1)}},{ref:je,active:Oe}=XL(({x:Ee})=>Ke(Ee),{onScrubEnd:()=>a==null?void 0:a(J.current)},U);function Fe(Ee){ie.current=Ee}const Ae=Ee=>{je.current.focus();const he=je.current.getBoundingClientRect(),Ue=HJe(Ee.nativeEvent),nt=cU({value:Ue-he.left,max:c,min:u,step:h,containerWidth:he.width}),ye=Math.abs(H[0]-nt)>Math.abs(H[1]-nt)?1:0,Re=U==="ltr"?ye:ye===1?0:1;ie.current=Re},fe=()=>O!==1&&O!==0?(V(0),0):O,Pe=Ee=>{if(!A)switch(Ee.key){case"ArrowUp":{Ee.preventDefault();const he=fe();se.current[he].focus(),de(Tc(Math.min(Math.max(J.current[he]+h,u),c),ue),he,!0);break}case"ArrowRight":{Ee.preventDefault();const he=fe();se.current[he].focus(),de(Tc(Math.min(Math.max(U==="rtl"?J.current[he]-h:J.current[he]+h,u),c),ue),he,!0);break}case"ArrowDown":{Ee.preventDefault();const he=fe();se.current[he].focus(),de(Tc(Math.min(Math.max(J.current[he]-h,u),c),ue),he,!0);break}case"ArrowLeft":{Ee.preventDefault();const he=fe();se.current[he].focus(),de(Tc(Math.min(Math.max(U==="rtl"?J.current[he]+h:J.current[he]-h,u),c),ue),he,!0);break}}},He={max:c,min:u,size:l,labelTransitionProps:_,labelAlwaysOn:w,onBlur:()=>V(-1)},ft=Array.isArray(C);return v.jsx(gxe,{value:{getStyles:z},children:v.jsxs(RK,{...B,size:l,ref:t,disabled:A,children:[v.jsxs(PK,{offset:ne[0],marksOffset:H[0],filled:ne[1]-ne[0],marks:y,inverted:L,min:u,max:c,value:H[1],disabled:A,containerProps:{ref:je,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,onTouchStartCapture:Ae,onTouchEndCapture:()=>{ie.current=-1},onMouseDownCapture:Ae,onMouseUpCapture:()=>{ie.current=-1},onKeyDownCapture:Pe},children:[v.jsx(kM,{...He,value:P(H[0]),position:ne[0],dragging:Oe,label:typeof b=="function"?b(Tc(P(H[0]),ue)):b,ref:Ee=>{se.current[0]=Ee},thumbLabel:E,onMouseDown:()=>Fe(0),onFocus:()=>V(0),showLabelOnHover:S,isHovered:W,disabled:A,children:ft?C[0]:C}),v.jsx(kM,{...He,thumbLabel:x,value:P(H[1]),position:ne[1],dragging:Oe,label:typeof b=="function"?b(Tc(P(H[1]),ue)):b,ref:Ee=>{se.current[1]=Ee},onMouseDown:()=>Fe(1),onFocus:()=>V(1),showLabelOnHover:S,isHovered:W,disabled:A,children:ft?C[1]:C})]}),v.jsx("input",{type:"hidden",name:`${g}_from`,value:H[0],...M}),v.jsx("input",{type:"hidden",name:`${g}_to`,value:H[1],...M})]})})});BF.classes=jF;BF.displayName="@mantine/core/RangeSlider";const GJe={},Hc=Le((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=we("Space",GJe,e);return v.jsx(ge,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Hc.displayName="@mantine/core/Space";var bxe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const YJe={maxHeight:100,initialState:!1},KJe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),OK=Le((e,t)=>{const n=we("Spoiler",YJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,initialState:u,maxHeight:c,hideLabel:d,showLabel:f,children:h,controlRef:p,transitionDuration:m,id:g,expanded:y,onExpandedChange:b,..._}=n,w=mt({name:"Spoiler",classes:bxe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:KJe}),E=ta(g),x=`${E}-region`,[S,C]=ji({value:y,defaultValue:u,finalValue:!1,onChange:b}),{ref:A,height:R}=YVe(),P=S?d:f,L=P!==null&&c<R;return v.jsxs(ge,{...w("root"),id:E,ref:t,"data-has-spoiler":L||void 0,..._,children:[L&&v.jsx(qy,{component:"button",type:"button",ref:p,onClick:()=>C(!S),"aria-expanded":S,"aria-controls":x,...w("control"),children:P}),v.jsx("div",{...w("content",{style:{maxHeight:S?R?Se(R):void 0:Se(c)}}),"data-reduce-motion":!0,role:"region",id:x,children:v.jsx("div",{ref:A,children:h})})]})});OK.classes=bxe;OK.displayName="@mantine/core/Spoiler";var _xe={root:"m_6d731127"};const XJe={gap:"md",align:"stretch",justify:"flex-start"},QJe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":ru(t),"--stack-align":n,"--stack-justify":r}}),Es=Le((e,t)=>{const n=we("Stack",XJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,align:u,justify:c,gap:d,variant:f,...h}=n,p=mt({name:"Stack",props:n,classes:_xe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:QJe});return v.jsx(ge,{ref:t,...p("root"),variant:f,...h})});Es.classes=_xe;Es.displayName="@mantine/core/Stack";const wxe=I.createContext(null),JJe=wxe.Provider,ZJe=()=>I.useContext(wxe),eZe={},DK=Le((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:l,...u}=we("SwitchGroup",eZe,e),[c,d]=ji({value:n,defaultValue:r,finalValue:[],onChange:i}),f=h=>{const p=h.currentTarget.value;!l&&d(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return v.jsx(JJe,{value:{value:c,onChange:f,size:s},children:v.jsx(Kr.Wrapper,{size:s,ref:t,...o,...u,labelElement:"div",__staticSelector:"SwitchGroup",children:v.jsx(YY,{role:"group",children:a})})})});DK.classes=Kr.Wrapper.classes;DK.displayName="@mantine/core/SwitchGroup";var Exe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const tZe={labelPosition:"right"},nZe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Pr(t),"--switch-height":Jt(r,"switch-height"),"--switch-width":Jt(r,"switch-width"),"--switch-thumb-size":Jt(r,"switch-thumb-size"),"--switch-label-font-size":Jt(r,"switch-label-font-size"),"--switch-track-label-padding":Jt(r,"switch-track-label-padding"),"--switch-color":n?zr(n,e):void 0}}),M0=Le((e,t)=>{const n=we("Switch",tZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,color:u,label:c,offLabel:d,onLabel:f,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:b,checked:_,defaultChecked:w,onChange:E,labelPosition:x,description:S,error:C,disabled:A,variant:R,rootRef:P,mod:L,...k}=n,$=ZJe(),D=p||($==null?void 0:$.size),M=mt({name:"Switch",props:n,classes:Exe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:nZe}),{styleProps:B,rest:z}=zb(k),U=ta(h),O=$?{checked:$.value.includes(z.value),onChange:$.onChange}:{},[V,W]=ji({value:O.checked??_,defaultValue:w,finalValue:!1});return v.jsxs(cF,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:U,size:D,labelPosition:x,label:c,description:S,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":O.checked||void 0,variant:R,ref:P,mod:L,...B,...g,children:[v.jsx("input",{...z,disabled:A,checked:V,onChange:j=>{var H;$?(H=O.onChange)==null||H.call(O,j):E==null||E(j),W(j.currentTarget.checked)},id:U,ref:t,type:"checkbox",role:"switch",...M("input")}),v.jsxs(ge,{"aria-hidden":"true",mod:{error:C,"label-position":x},...M("track"),children:[v.jsx(ge,{component:"span",mod:"reduce-motion",...M("thumb"),children:b}),v.jsx("span",{...M("trackLabel"),children:V?f:d})]})]})});M0.classes={...Exe,...cEe};M0.displayName="@mantine/core/Switch";M0.Group=DK;const[rZe,iZe]=Fs("Table component was not found in the tree");var Dk={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function sZe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Hb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Le((i,s)=>{const o=we(n,{},i),{classNames:a,className:l,style:u,styles:c,...d}=o,f=iZe();return v.jsx(ge,{component:e,ref:s,...sZe(f,t),...f.getStyles(e,{className:l,classNames:a,style:u,styles:c,props:o}),...d})});return r.displayName=`@mantine/core/${n}`,r.classes=Dk,r}const HE=Hb("th",{columnBorder:!0}),zF=Hb("td",{columnBorder:!0}),gm=Hb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),MK=Hb("thead",{stickyHeader:!0}),P2=Hb("tbody"),$K=Hb("tfoot"),xxe=Hb("caption",{captionSide:!0});function LK({data:e}){return v.jsxs(v.Fragment,{children:[e.caption&&v.jsx(xxe,{children:e.caption}),e.head&&v.jsx(MK,{children:v.jsx(gm,{children:e.head.map((t,n)=>v.jsx(HE,{children:t},n))})}),e.body&&v.jsx(P2,{children:e.body.map((t,n)=>v.jsx(gm,{children:t.map((r,i)=>v.jsx(zF,{children:r},i))},n))}),e.foot&&v.jsx($K,{children:v.jsx(gm,{children:e.foot.map((t,n)=>v.jsx(HE,{children:t},n))})})]})}LK.displayName="@mantine/core/TableDataRenderer";const oZe={type:"scrollarea"},aZe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Se(t),"--table-overflow":n==="native"?"auto":void 0}}),FK=Le((e,t)=>{const n=we("TableScrollContainer",oZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,children:u,minWidth:c,type:d,...f}=n,h=mt({name:"TableScrollContainer",classes:Dk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:aZe,rootSelector:"scrollContainer"});return v.jsx(ge,{component:d==="scrollarea"?Hy:"div",...d==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...f,children:v.jsx("div",{...h("scrollContainerInner"),children:u})})});FK.classes=Dk;FK.displayName="@mantine/core/TableScrollContainer";const lZe={withRowBorders:!0,verticalSpacing:7},uZe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:l,highlightOnHover:u,stickyHeaderOffset:c,stickyHeader:d})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":ru(r),"--table-vertical-spacing":ru(i),"--table-border-color":s?zr(s,e):void 0,"--table-striped-color":l&&o?zr(o,e):void 0,"--table-highlight-on-hover-color":u&&a?zr(a,e):void 0,"--table-sticky-header-offset":d?Se(c):void 0}}),or=Le((e,t)=>{const n=we("Table",lZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,horizontalSpacing:u,verticalSpacing:c,captionSide:d,stripedColor:f,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:b,borderColor:_,layout:w,variant:E,data:x,children:S,stickyHeader:C,stickyHeaderOffset:A,mod:R,...P}=n,L=mt({name:"Table",props:n,className:i,style:s,classes:Dk,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:l,varsResolver:uZe});return v.jsx(rZe,{value:{getStyles:L,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:d||"bottom"},children:v.jsx(ge,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":b},R],...L("table"),...P,children:S||!!x&&v.jsx(LK,{data:x})})})});or.classes=Dk;or.displayName="@mantine/core/Table";or.Td=zF;or.Th=HE;or.Tr=gm;or.Thead=MK;or.Tbody=P2;or.Tfoot=$K;or.Caption=xxe;or.ScrollContainer=FK;or.DataRenderer=LK;const[cZe,jK]=Fs("Tabs component was not found in the tree");var Mk={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const dZe={},BK=Le((e,t)=>{const n=we("TabsList",dZe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:l,style:u,mod:c,...d}=n,f=jK();return v.jsx(ge,{...d,...f.getStyles("list",{className:i,style:u,classNames:a,styles:l,props:n,variant:f.variant}),ref:t,role:"tablist",variant:f.variant,mod:[{grow:s,orientation:f.orientation,placement:f.orientation==="vertical"&&f.placement,inverted:f.inverted},c],"aria-orientation":f.orientation,__vars:{"--tabs-justify":o},children:r})});BK.classes=Mk;BK.displayName="@mantine/core/TabsList";const fZe={},zK=Le((e,t)=>{const n=we("TabsPanel",fZe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:l,mod:u,...c}=n,d=jK(),f=d.value===s,h=d.keepMounted||n.keepMounted||f?r:null;return v.jsx(ge,{...c,...d.getStyles("panel",{className:i,classNames:o,styles:a,style:[l,f?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:d.orientation},u],role:"tabpanel",id:d.getPanelId(s),"aria-labelledby":d.getTabId(s),children:h})});zK.classes=Mk;zK.displayName="@mantine/core/TabsPanel";const hZe={},UK=Le((e,t)=>{const n=we("TabsTab",hZe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:l,onKeyDown:u,disabled:c,color:d,style:f,classNames:h,styles:p,vars:m,mod:g,...y}=n,b=As(),{dir:_}=bl(),w=jK(),E=a===w.value,x=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),l==null||l(C)},S={classNames:h,styles:p,props:n};return v.jsxs(ds,{...y,...w.getStyles("tab",{className:r,style:f,variant:w.variant,...S}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:x,__vars:{"--tabs-color":d?zr(d,b):void 0},onKeyDown:zG({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:_,onKeyDown:u}),children:[o&&v.jsx("span",{...w.getStyles("tabSection",S),"data-position":"left",children:o}),i&&v.jsx("span",{...w.getStyles("tabLabel",S),children:i}),s&&v.jsx("span",{...w.getStyles("tabSection",S),"data-position":"right",children:s})]})});UK.classes=Mk;UK.displayName="@mantine/core/TabsTab";const Dle="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",pZe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},mZe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Pr(t),"--tabs-color":zr(n,e),"--tabs-text-color":Uy(r,e)?ap({color:n,theme:e,autoContrast:r}):void 0}}),es=Le((e,t)=>{const n=we("Tabs",pZe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:l,id:u,activateTabWithKeyboard:c,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:b,styles:_,unstyled:w,className:E,style:x,vars:S,autoContrast:C,mod:A,...R}=n,P=ta(u),[L,k]=ji({value:i,defaultValue:r,finalValue:null,onChange:s}),$=mt({name:"Tabs",props:n,classes:Mk,className:E,style:x,classNames:b,styles:_,unstyled:w,vars:S,varsResolver:mZe});return v.jsx(cZe,{value:{placement:g,value:L,orientation:o,id:P,loop:l,activateTabWithKeyboard:c,getTabId:_M(`${P}-tab`,Dle),getPanelId:_M(`${P}-panel`,Dle),onChange:k,allowTabDeactivation:d,variant:f,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:v.jsx(ge,{ref:t,id:P,variant:f,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...$("root"),...R,children:a})})});es.classes=Mk;es.displayName="@mantine/core/Tabs";es.Tab=UK;es.Panel=zK;es.List=BK;const gZe={},of=Le((e,t)=>{const n=we("TextInput",gZe,e);return v.jsx(gu,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});of.classes=gu.classes;of.displayName="@mantine/core/TextInput";const yZe=["h1","h2","h3","h4","h5","h6"];function vZe(e,t){const n=t!==void 0?t:`h${e}`;return yZe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Se(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Sxe={root:"m_8a5d1357"};const bZe={order:1},_Ze=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=vZe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},xi=Le((e,t)=>{const n=we("Title",bZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:l,vars:u,size:c,variant:d,lineClamp:f,textWrap:h,mod:p,...m}=n,g=mt({name:"Title",props:n,classes:Sxe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ze});return[1,2,3,4,5,6].includes(l)?v.jsx(ge,{...g("root"),component:`h${l}`,variant:d,ref:t,mod:[{order:l,"data-line-clamp":typeof f=="number"},p],size:c,...m}):null});xi.classes=Sxe;xi.displayName="@mantine/core/Title";var Txe={root:"m_d6493fad"};const wZe={},Pw=Le((e,t)=>{const n=we("TypographyStylesProvider",wZe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,...l}=n,u=mt({name:"TypographyStylesProvider",classes:Txe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return v.jsx(ge,{ref:t,...u("root"),...l})});Pw.classes=Txe;Pw.displayName="@mantine/core/TypographyStylesProvider";const Cxe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),ki=()=>I.useContext(Cxe);function EZe({children:e}){const[t,n]=ls.useState(void 0),r=ls.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return v.jsx(Cxe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function WA(){return WA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WA.apply(this,arguments)}var d0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(d0||(d0={}));const Mle="popstate";function xZe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return dU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:PM(i)}return TZe(t,n,null,e)}function Ss(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Axe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function SZe(){return Math.random().toString(36).substr(2,8)}function $le(e,t){return{usr:e.state,key:e.key,idx:t}}function dU(e,t,n,r){return n===void 0&&(n=null),WA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?dS(t):t,{state:n,key:t&&t.key||r||SZe()})}function PM(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function dS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function TZe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=d0.Pop,l=null,u=c();u==null&&(u=0,o.replaceState(WA({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function d(){a=d0.Pop;let g=c(),y=g==null?null:g-u;u=g,l&&l({action:a,location:m.location,delta:y})}function f(g,y){a=d0.Push;let b=dU(m.location,g,y);u=c()+1;let _=$le(b,u),w=m.createHref(b);try{o.pushState(_,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&l&&l({action:a,location:m.location,delta:1})}function h(g,y){a=d0.Replace;let b=dU(m.location,g,y);u=c();let _=$le(b,u),w=m.createHref(b);o.replaceState(_,"",w),s&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:PM(g);return b=b.replace(/ $/,"%20"),Ss(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Mle,d),l=g,()=>{i.removeEventListener(Mle,d),l=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:f,replace:h,go(g){return o.go(g)}};return m}var Lle;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Lle||(Lle={}));function CZe(e,t,n){return n===void 0&&(n="/"),AZe(e,t,n,!1)}function AZe(e,t,n,r){let i=typeof t=="string"?dS(t):t,s=VK(i.pathname||"/",n);if(s==null)return null;let o=Ixe(e);IZe(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=jZe(s);a=LZe(o[l],u,r)}return a}function Ixe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Ss(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let u=$0([r,l.relativePath]),c=n.concat(l);s.children&&s.children.length>0&&(Ss(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Ixe(s.children,t,c,u)),!(s.path==null&&!s.index)&&t.push({path:u,score:MZe(u,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of kxe(s.path))i(s,o,l)}),t}function kxe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=kxe(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function IZe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$Ze(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const kZe=/^:[\w-]+$/,RZe=3,PZe=2,NZe=1,OZe=10,DZe=-2,Fle=e=>e==="*";function MZe(e,t){let n=e.split("/"),r=n.length;return n.some(Fle)&&(r+=DZe),t&&(r+=PZe),n.filter(i=>!Fle(i)).reduce((i,s)=>i+(kZe.test(s)?RZe:s===""?NZe:OZe),r)}function $Ze(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function LZe(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",d=jle({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!d&&u&&n&&!r[r.length-1].route.index&&(d=jle({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:$0([s,d.pathname]),pathnameBase:VZe($0([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=$0([s,d.pathnameBase]))}return o}function jle(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=FZe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,c,d)=>{let{paramName:f,isOptional:h}=c;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:e}}function FZe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Axe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function jZe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Axe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function VK(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function BZe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?dS(e):e;return{pathname:n?n.startsWith("/")?n:zZe(n,t):t,search:HZe(r),hash:qZe(i)}}function zZe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function O8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function UZe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function HK(e,t){let n=UZe(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function qK(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=dS(e):(i=WA({},e),Ss(!i.pathname||!i.pathname.includes("?"),O8("?","pathname","search",i)),Ss(!i.pathname||!i.pathname.includes("#"),O8("#","pathname","hash",i)),Ss(!i.search||!i.search.includes("#"),O8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let l=BZe(i,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const $0=e=>e.join("/").replace(/\/\/+/g,"/"),VZe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HZe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qZe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WZe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Rxe=["post","put","patch","delete"];new Set(Rxe);const GZe=["get",...Rxe];new Set(GZe);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function GA(){return GA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GA.apply(this,arguments)}const WK=I.createContext(null),YZe=I.createContext(null),Yy=I.createContext(null),UF=I.createContext(null),cp=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Pxe=I.createContext(null);function GK(e,t){let{relative:n}=t===void 0?{}:t;fS()||Ss(!1);let{basename:r,navigator:i}=I.useContext(Yy),{hash:s,pathname:o,search:a}=Oxe(e,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:$0([r,o])),i.createHref({pathname:l,search:a,hash:s})}function fS(){return I.useContext(UF)!=null}function ag(){return fS()||Ss(!1),I.useContext(UF).location}function Nxe(e){I.useContext(Yy).static||I.useLayoutEffect(e)}function hc(){let{isDataRoute:e}=I.useContext(cp);return e?uet():KZe()}function KZe(){fS()||Ss(!1);let e=I.useContext(WK),{basename:t,future:n,navigator:r}=I.useContext(Yy),{matches:i}=I.useContext(cp),{pathname:s}=ag(),o=JSON.stringify(HK(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return Nxe(()=>{a.current=!0}),I.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){r.go(u);return}let d=qK(u,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:$0([t,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[t,r,o,s,e])}const XZe=I.createContext(null);function QZe(e){let t=I.useContext(cp).outlet;return t&&I.createElement(XZe.Provider,{value:e},t)}function bf(){let{matches:e}=I.useContext(cp),t=e[e.length-1];return t?t.params:{}}function Oxe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(Yy),{matches:i}=I.useContext(cp),{pathname:s}=ag(),o=JSON.stringify(HK(i,r.v7_relativeSplatPath));return I.useMemo(()=>qK(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function Dxe(e,t){return JZe(e,t)}function JZe(e,t,n,r){fS()||Ss(!1);let{navigator:i}=I.useContext(Yy),{matches:s}=I.useContext(cp),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=ag(),c;if(t){var d;let g=typeof t=="string"?dS(t):t;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||Ss(!1),c=g}else c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=CZe(e,{pathname:h}),m=ret(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:$0([l,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:$0([l,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(UF.Provider,{value:{location:GA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:d0.Pop}},m):m}function ZZe(){let e=aet(),t=WZe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const eet=I.createElement(ZZe,null);class tet extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(cp.Provider,{value:this.props.routeContext},I.createElement(Pxe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function net(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(WK);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(cp.Provider,{value:t},r)}function ret(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);c>=0||Ss(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let d=o[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=c),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,d,f)=>{let h,p=!1,m=null,g=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||eet,l&&(u<0&&f===0?(p=!0,g=null):u===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,f+1)),b=()=>{let _;return h?_=m:p?_=g:d.route.Component?_=I.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=c,I.createElement(net,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?I.createElement(tet,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var Mxe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Mxe||{}),NM=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(NM||{});function iet(e){let t=I.useContext(WK);return t||Ss(!1),t}function set(e){let t=I.useContext(YZe);return t||Ss(!1),t}function oet(e){let t=I.useContext(cp);return t||Ss(!1),t}function $xe(e){let t=oet(),n=t.matches[t.matches.length-1];return n.route.id||Ss(!1),n.route.id}function aet(){var e;let t=I.useContext(Pxe),n=set(NM.UseRouteError),r=$xe(NM.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function uet(){let{router:e}=iet(Mxe.UseNavigateStable),t=$xe(NM.UseNavigateStable),n=I.useRef(!1);return Nxe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,GA({fromRouteId:t},s)))},[e,t])}function YK(e){let{to:t,replace:n,state:r,relative:i}=e;fS()||Ss(!1);let{future:s,static:o}=I.useContext(Yy),{matches:a}=I.useContext(cp),{pathname:l}=ag(),u=hc(),c=qK(t,HK(a,s.v7_relativeSplatPath),l,i==="path"),d=JSON.stringify(c);return I.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function cet(e){return QZe(e.context)}function Bp(e){Ss(!1)}function det(e){let{basename:t="/",children:n=null,location:r,navigationType:i=d0.Pop,navigator:s,static:o=!1,future:a}=e;fS()&&Ss(!1);let l=t.replace(/^\/*/,"/"),u=I.useMemo(()=>({basename:l,navigator:s,static:o,future:GA({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=dS(r));let{pathname:c="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=VK(c,l);return g==null?null:{location:{pathname:g,search:d,hash:f,state:h,key:p},navigationType:i}},[l,c,d,f,h,p,i]);return m==null?null:I.createElement(Yy.Provider,{value:u},I.createElement(UF.Provider,{children:n,value:m}))}function fet(e){let{children:t,location:n}=e;return Dxe(fU(t),n)}new Promise(()=>{});function fU(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,fU(r.props.children,s));return}r.type!==Bp&&Ss(!1),!r.props.index||!r.props.children||Ss(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=fU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hU(){return hU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hU.apply(this,arguments)}function het(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function pet(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function met(e,t){return e.button===0&&(!t||t==="_self")&&!pet(e)}function pU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function get(e,t){let n=pU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const yet=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],vet="6";try{window.__reactRouterVersion=vet}catch{}const bet="startTransition",Ble=YD[bet];function _et(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=xZe({window:i,v5Compat:!0}));let o=s.current,[a,l]=I.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},c=I.useCallback(d=>{u&&Ble?Ble(()=>l(d)):l(d)},[l,u]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(det,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const wet=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Eet=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,KK=I.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:c,unstable_viewTransition:d}=t,f=het(t,yet),{basename:h}=I.useContext(Yy),p,m=!1;if(typeof u=="string"&&Eet.test(u)&&(p=u,wet))try{let _=new URL(window.location.href),w=u.startsWith("//")?new URL(_.protocol+u):new URL(u),E=VK(w.pathname,h);w.origin===_.origin&&E!=null?u=E+w.search+w.hash:m=!0}catch{}let g=GK(u,{relative:i}),y=xet(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:i,unstable_viewTransition:d});function b(_){r&&r(_),_.defaultPrevented||y(_)}return I.createElement("a",hU({},f,{href:p||g,onClick:m||s?r:b,ref:n,target:l}))});var zle;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(zle||(zle={}));var Ule;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Ule||(Ule={}));function xet(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,l=hc(),u=ag(),c=Oxe(e,{relative:o});return I.useCallback(d=>{if(met(d,n)){d.preventDefault();let f=r!==void 0?r:PM(u)===PM(c);l(e,{replace:f,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[u,l,c,r,i,n,e,s,o,a])}function XK(e){let t=I.useRef(pU(e)),n=I.useRef(!1),r=ag(),i=I.useMemo(()=>get(r.search,n.current?null:t.current),[r.search]),s=hc(),o=I.useCallback((a,l)=>{const u=pU(typeof a=="function"?a(i):a);n.current=!0,s("?"+u,l)},[s,i]);return[i,o]}const QK=I.createContext(null);QK.displayName="@mantine/modals/ModalsContext";function Tet(){const e=I.useContext(QK);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function Cet({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:l,children:u}){const{cancel:c,confirm:d}=r,f=Tet(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&f.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof l=="function"&&l(),i&&f.closeModal(e)};return v.jsxs(v.Fragment,{children:[u&&v.jsx(ge,{mb:"md",children:u}),v.jsxs(Ln,{mt:u?0:"md",justify:"flex-end",...o,children:[v.jsx(xn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),v.jsx(xn,{...n,onClick:p,children:(n==null?void 0:n.children)||d})]})]})}const[Aet,VF]=rHe("mantine-modals");VF("openModal");VF("closeModal");VF("closeAllModals");const mU=VF("openConfirmModal");function Vle(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function Iet(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Vle(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Vle(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function ket(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c,...d}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:l,groupProps:u,labels:c},modalProps:{id:t,...d}}}function Ret({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(Iet,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),l=I.useCallback(({modalId:g,...y})=>{const b=g||R2();return s({type:"OPEN",modal:{id:b,type:"content",props:y}}),b},[s]),u=I.useCallback(({modalId:g,...y})=>{const b=g||R2();return s({type:"OPEN",modal:{id:b,type:"confirm",props:y}}),b},[s]),c=I.useCallback((g,{modalId:y,...b})=>{const _=y||R2();return s({type:"OPEN",modal:{id:_,type:"context",props:b,ctx:g}}),_},[s]),d=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);Aet({openModal:l,openConfirmModal:u,openContextModal:({modal:g,...y})=>c(g,y),closeModal:d,closeContextModal:d,closeAllModals:a});const f={modals:i.modals,openModal:l,openConfirmModal:u,openContextModal:c,closeModal:d,closeContextModal:d,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...b}=g.props,_=r[g.ctx];return{modalProps:b,content:v.jsx(_,{innerProps:y,context:f,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:b}=ket(g.props);return{modalProps:y,content:v.jsx(Cet,{...b,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...b}=g.props;return{modalProps:b,content:v.jsx(v.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return v.jsxs(QK.Provider,{value:f,children:[v.jsx(xs,{zIndex:ad("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return d((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Pet={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:l,className:u,children:c,...d},f)=>I.createElement("svg",{ref:f,...Pet[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...d},[l&&I.createElement("title",{key:"svg-title"},l),...r.map(([h,p])=>I.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Net=Pt("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hle=Pt("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Oet=Pt("outline","arrow-autofit-content","IconArrowAutofitContent",[["path",{d:"M6 4l-3 3l3 3",key:"svg-0"}],["path",{d:"M18 4l3 3l-3 3",key:"svg-1"}],["path",{d:"M4 14m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v2a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-2"}],["path",{d:"M10 7h-7",key:"svg-3"}],["path",{d:"M21 7h-7",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Det=Pt("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Met=Pt("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $et=Pt("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Let=Pt("outline","arrows-sort","IconArrowsSort",[["path",{d:"M3 9l4 -4l4 4m-4 -4v14",key:"svg-0"}],["path",{d:"M21 15l-4 4l-4 -4m4 4v-14",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fet=Pt("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jet=Pt("outline","baseline-density-large","IconBaselineDensityLarge",[["path",{d:"M4 4h16",key:"svg-0"}],["path",{d:"M4 20h16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bet=Pt("outline","baseline-density-medium","IconBaselineDensityMedium",[["path",{d:"M4 20h16",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M4 4h16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zet=Pt("outline","baseline-density-small","IconBaselineDensitySmall",[["path",{d:"M4 3h16",key:"svg-0"}],["path",{d:"M4 9h16",key:"svg-1"}],["path",{d:"M4 15h16",key:"svg-2"}],["path",{d:"M4 21h16",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uet=Pt("outline","box-multiple","IconBoxMultiple",[["path",{d:"M7 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M17 17v2a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-10a2 2 0 0 1 2 -2h2",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vet=Pt("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Het=Pt("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qet=Pt("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Wet=Pt("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lxe=Pt("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Get=Pt("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yet=Pt("outline","chevron-left-pipe","IconChevronLeftPipe",[["path",{d:"M7 6v12",key:"svg-0"}],["path",{d:"M18 6l-6 6l6 6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ket=Pt("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xet=Pt("outline","chevron-right-pipe","IconChevronRightPipe",[["path",{d:"M6 6l6 6l-6 6",key:"svg-0"}],["path",{d:"M17 5v13",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Qet=Pt("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Jet=Pt("outline","chevrons-down","IconChevronsDown",[["path",{d:"M7 7l5 5l5 -5",key:"svg-0"}],["path",{d:"M7 13l5 5l5 -5",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zet=Pt("outline","circle-x","IconCircleX",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M10 10l4 4m0 -4l-4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ett=Pt("outline","clear-all","IconClearAll",[["path",{d:"M8 6h12",key:"svg-0"}],["path",{d:"M6 12h12",key:"svg-1"}],["path",{d:"M4 18h12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ttt=Pt("outline","columns","IconColumns",[["path",{d:"M4 6l5.5 0",key:"svg-0"}],["path",{d:"M4 10l5.5 0",key:"svg-1"}],["path",{d:"M4 14l5.5 0",key:"svg-2"}],["path",{d:"M4 18l5.5 0",key:"svg-3"}],["path",{d:"M14.5 6l5.5 0",key:"svg-4"}],["path",{d:"M14.5 10l5.5 0",key:"svg-5"}],["path",{d:"M14.5 14l5.5 0",key:"svg-6"}],["path",{d:"M14.5 18l5.5 0",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ntt=Pt("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rtt=Pt("outline","device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Fxe=Pt("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var itt=Pt("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jxe=Pt("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var stt=Pt("outline","eye-off","IconEyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ott=Pt("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var att=Pt("outline","filter-cog","IconFilterCog",[["path",{d:"M12 20l-3 1v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v1.5",key:"svg-0"}],["path",{d:"M19.001 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M19.001 15.5v1.5",key:"svg-2"}],["path",{d:"M19.001 21v1.5",key:"svg-3"}],["path",{d:"M22.032 17.25l-1.299 .75",key:"svg-4"}],["path",{d:"M17.27 20l-1.3 .75",key:"svg-5"}],["path",{d:"M15.97 17.25l1.3 .75",key:"svg-6"}],["path",{d:"M20.733 20l1.3 .75",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ltt=Pt("outline","filter-off","IconFilterOff",[["path",{d:"M8 4h12v2.172a2 2 0 0 1 -.586 1.414l-3.914 3.914m-.5 3.5v4l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var utt=Pt("outline","filter","IconFilter",[["path",{d:"M4 4h16v2.172a2 2 0 0 1 -.586 1.414l-4.414 4.414v7l-6 2v-8.5l-4.48 -4.928a2 2 0 0 1 -.52 -1.345v-2.227z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ctt=Pt("outline","grip-horizontal","IconGripHorizontal",[["path",{d:"M5 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M5 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}],["path",{d:"M12 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-3"}],["path",{d:"M19 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-4"}],["path",{d:"M19 15m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Bxe=Pt("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dtt=Pt("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ftt=Pt("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var htt=Pt("outline","maximize","IconMaximize",[["path",{d:"M4 8v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M4 16v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M16 20h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ptt=Pt("outline","minimize","IconMinimize",[["path",{d:"M15 19v-2a2 2 0 0 1 2 -2h2",key:"svg-0"}],["path",{d:"M15 5v2a2 2 0 0 0 2 2h2",key:"svg-1"}],["path",{d:"M5 15h2a2 2 0 0 1 2 2v2",key:"svg-2"}],["path",{d:"M5 9h2a2 2 0 0 0 2 -2v-2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mtt=Pt("outline","pinned-off","IconPinnedOff",[["path",{d:"M3 3l18 18",key:"svg-0"}],["path",{d:"M15 4.5l-3.249 3.249m-2.57 1.433l-2.181 .818l-1.5 1.5l7 7l1.5 -1.5l.82 -2.186m1.43 -2.563l3.25 -3.251",key:"svg-1"}],["path",{d:"M9 15l-4.5 4.5",key:"svg-2"}],["path",{d:"M14.5 4l5.5 5.5",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gtt=Pt("outline","pinned","IconPinned",[["path",{d:"M9 4v6l-2 4v2h10v-2l-2 -4v-6",key:"svg-0"}],["path",{d:"M12 16l0 5",key:"svg-1"}],["path",{d:"M8 4l8 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qle=Pt("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ytt=Pt("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zxe=Pt("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vtt=Pt("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var btt=Pt("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _tt=Pt("outline","search-off","IconSearchOff",[["path",{d:"M5.039 5.062a7 7 0 0 0 9.91 9.89m1.584 -2.434a7 7 0 0 0 -9.038 -9.057",key:"svg-0"}],["path",{d:"M3 3l18 18",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Uxe=Pt("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vxe=Pt("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wtt=Pt("outline","sort-ascending","IconSortAscending",[["path",{d:"M4 6l7 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l9 0",key:"svg-2"}],["path",{d:"M15 9l3 -3l3 3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ett=Pt("outline","sort-descending","IconSortDescending",[["path",{d:"M4 6l9 0",key:"svg-0"}],["path",{d:"M4 12l7 0",key:"svg-1"}],["path",{d:"M4 18l7 0",key:"svg-2"}],["path",{d:"M15 15l3 3l3 -3",key:"svg-3"}],["path",{d:"M18 6l0 12",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xtt=Pt("outline","sticker-2","IconSticker2",[["path",{d:"M6 4h12a2 2 0 0 1 2 2v7h-5a2 2 0 0 0 -2 2v5h-7a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M20 13v.172a2 2 0 0 1 -.586 1.414l-4.828 4.828a2 2 0 0 1 -1.414 .586h-.172",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Hxe=Pt("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Stt=Pt("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qxe=Pt("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JK=Pt("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HF=Pt("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ttt=Pt("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ctt=Pt("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Att=Pt("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function Wxe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const dd="/guardrails-think-aloud/";function Wle(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Gxe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const Itt=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ktt=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Rtt={};function Gle(e,t){return(Rtt.jsx?ktt:Itt).test(e)}const Ptt=/[ \t\n\f\r]/g;function Ntt(e){return typeof e=="object"?e.type==="text"?Yle(e.value):!1:Yle(e)}function Yle(e){return e.replace(Ptt,"")===""}let $k=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};$k.prototype.property={};$k.prototype.normal={};$k.prototype.space=null;function Yxe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new $k(n,r,t)}function YA(e){return e.toLowerCase()}let fd=class{constructor(t,n){this.property=t,this.attribute=n}};fd.prototype.space=null;fd.prototype.boolean=!1;fd.prototype.booleanish=!1;fd.prototype.overloadedBoolean=!1;fd.prototype.number=!1;fd.prototype.commaSeparated=!1;fd.prototype.spaceSeparated=!1;fd.prototype.commaOrSpaceSeparated=!1;fd.prototype.mustUseProperty=!1;fd.prototype.defined=!1;let Ott=0;const Rn=qb(),Ps=qb(),Kxe=qb(),lt=qb(),mi=qb(),tE=qb(),xu=qb();function qb(){return 2**++Ott}const gU=Object.freeze(Object.defineProperty({__proto__:null,boolean:Rn,booleanish:Ps,commaOrSpaceSeparated:xu,commaSeparated:tE,number:lt,overloadedBoolean:Kxe,spaceSeparated:mi},Symbol.toStringTag,{value:"Module"})),D8=Object.keys(gU);class ZK extends fd{constructor(t,n,r,i){let s=-1;if(super(t,n),Kle(this,"space",i),typeof r=="number")for(;++s<D8.length;){const o=D8[s];Kle(this,D8[s],(r&gU[o])===gU[o])}}}ZK.prototype.defined=!0;function Kle(e,t,n){n&&(e[t]=n)}const Dtt={}.hasOwnProperty;function hS(e){const t={},n={};let r;for(r in e.properties)if(Dtt.call(e.properties,r)){const i=e.properties[r],s=new ZK(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[YA(r)]=r,n[YA(s.attribute)]=r}return new $k(t,n,e.space)}const Xxe=hS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Qxe=hS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Jxe(e,t){return t in e?e[t]:t}function Zxe(e,t){return Jxe(e,t.toLowerCase())}const eSe=hS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Zxe,properties:{xmlns:null,xmlnsXLink:null}}),tSe=hS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Ps,ariaAutoComplete:null,ariaBusy:Ps,ariaChecked:Ps,ariaColCount:lt,ariaColIndex:lt,ariaColSpan:lt,ariaControls:mi,ariaCurrent:null,ariaDescribedBy:mi,ariaDetails:null,ariaDisabled:Ps,ariaDropEffect:mi,ariaErrorMessage:null,ariaExpanded:Ps,ariaFlowTo:mi,ariaGrabbed:Ps,ariaHasPopup:null,ariaHidden:Ps,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:mi,ariaLevel:lt,ariaLive:null,ariaModal:Ps,ariaMultiLine:Ps,ariaMultiSelectable:Ps,ariaOrientation:null,ariaOwns:mi,ariaPlaceholder:null,ariaPosInSet:lt,ariaPressed:Ps,ariaReadOnly:Ps,ariaRelevant:null,ariaRequired:Ps,ariaRoleDescription:mi,ariaRowCount:lt,ariaRowIndex:lt,ariaRowSpan:lt,ariaSelected:Ps,ariaSetSize:lt,ariaSort:null,ariaValueMax:lt,ariaValueMin:lt,ariaValueNow:lt,ariaValueText:null,role:null}}),Mtt=hS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Zxe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:tE,acceptCharset:mi,accessKey:mi,action:null,allow:null,allowFullScreen:Rn,allowPaymentRequest:Rn,allowUserMedia:Rn,alt:null,as:null,async:Rn,autoCapitalize:null,autoComplete:mi,autoFocus:Rn,autoPlay:Rn,blocking:mi,capture:null,charSet:null,checked:Rn,cite:null,className:mi,cols:lt,colSpan:null,content:null,contentEditable:Ps,controls:Rn,controlsList:mi,coords:lt|tE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Rn,defer:Rn,dir:null,dirName:null,disabled:Rn,download:Kxe,draggable:Ps,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Rn,formTarget:null,headers:mi,height:lt,hidden:Rn,high:lt,href:null,hrefLang:null,htmlFor:mi,httpEquiv:mi,id:null,imageSizes:null,imageSrcSet:null,inert:Rn,inputMode:null,integrity:null,is:null,isMap:Rn,itemId:null,itemProp:mi,itemRef:mi,itemScope:Rn,itemType:mi,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Rn,low:lt,manifest:null,max:null,maxLength:lt,media:null,method:null,min:null,minLength:lt,multiple:Rn,muted:Rn,name:null,nonce:null,noModule:Rn,noValidate:Rn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Rn,optimum:lt,pattern:null,ping:mi,placeholder:null,playsInline:Rn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Rn,referrerPolicy:null,rel:mi,required:Rn,reversed:Rn,rows:lt,rowSpan:lt,sandbox:mi,scope:null,scoped:Rn,seamless:Rn,selected:Rn,shadowRootClonable:Rn,shadowRootDelegatesFocus:Rn,shadowRootMode:null,shape:null,size:lt,sizes:null,slot:null,span:lt,spellCheck:Ps,src:null,srcDoc:null,srcLang:null,srcSet:null,start:lt,step:null,style:null,tabIndex:lt,target:null,title:null,translate:null,type:null,typeMustMatch:Rn,useMap:null,value:Ps,width:lt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:mi,axis:null,background:null,bgColor:null,border:lt,borderColor:null,bottomMargin:lt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Rn,declare:Rn,event:null,face:null,frame:null,frameBorder:null,hSpace:lt,leftMargin:lt,link:null,longDesc:null,lowSrc:null,marginHeight:lt,marginWidth:lt,noResize:Rn,noHref:Rn,noShade:Rn,noWrap:Rn,object:null,profile:null,prompt:null,rev:null,rightMargin:lt,rules:null,scheme:null,scrolling:Ps,standby:null,summary:null,text:null,topMargin:lt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:lt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Rn,disableRemotePlayback:Rn,prefix:null,property:null,results:lt,security:null,unselectable:null}}),$tt=hS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Jxe,properties:{about:xu,accentHeight:lt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:lt,amplitude:lt,arabicForm:null,ascent:lt,attributeName:null,attributeType:null,azimuth:lt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:lt,by:null,calcMode:null,capHeight:lt,className:mi,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:lt,diffuseConstant:lt,direction:null,display:null,dur:null,divisor:lt,dominantBaseline:null,download:Rn,dx:null,dy:null,edgeMode:null,editable:null,elevation:lt,enableBackground:null,end:null,event:null,exponent:lt,externalResourcesRequired:null,fill:null,fillOpacity:lt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:tE,g2:tE,glyphName:tE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:lt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:lt,horizOriginX:lt,horizOriginY:lt,id:null,ideographic:lt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:lt,k:lt,k1:lt,k2:lt,k3:lt,k4:lt,kernelMatrix:xu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:lt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:lt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:lt,overlineThickness:lt,paintOrder:null,panose1:null,path:null,pathLength:lt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:mi,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:lt,pointsAtY:lt,pointsAtZ:lt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:xu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:xu,rev:xu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:xu,requiredFeatures:xu,requiredFonts:xu,requiredFormats:xu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:lt,specularExponent:lt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:lt,strikethroughThickness:lt,string:null,stroke:null,strokeDashArray:xu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:lt,strokeOpacity:lt,strokeWidth:null,style:null,surfaceScale:lt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:xu,tabIndex:lt,tableValues:null,target:null,targetX:lt,targetY:lt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:xu,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:lt,underlineThickness:lt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:lt,values:null,vAlphabetic:lt,vMathematical:lt,vectorEffect:null,vHanging:lt,vIdeographic:lt,version:null,vertAdvY:lt,vertOriginX:lt,vertOriginY:lt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:lt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),Ltt=/^data[-\w.:]+$/i,Xle=/-[a-z]/g,Ftt=/[A-Z]/g;function qF(e,t){const n=YA(t);let r=t,i=fd;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&Ltt.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Xle,Btt);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Xle.test(s)){let o=s.replace(Ftt,jtt);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=ZK}return new i(r,t)}function jtt(e){return"-"+e.toLowerCase()}function Btt(e){return e.charAt(1).toUpperCase()}const ztt={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Lk=Yxe([Qxe,Xxe,eSe,tSe,Mtt],"html"),Ky=Yxe([Qxe,Xxe,eSe,tSe,$tt],"svg");function Qle(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function nSe(e){return e.join(" ").trim()}var rSe={},Jle=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Utt=/\n/g,Vtt=/^\s*/,Htt=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,qtt=/^:\s*/,Wtt=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Gtt=/^[;\s]*/,Ytt=/^\s+|\s+$/g,Ktt=`
`,Zle="/",eue="*",n1="",Xtt="comment",Qtt="declaration",Jtt=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(Utt);m&&(n+=m.length);var g=p.lastIndexOf(Ktt);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),u(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function l(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function u(){l(Vtt)}function c(p){var m;for(p=p||[];m=d();)m!==!1&&p.push(m);return p}function d(){var p=s();if(!(Zle!=e.charAt(0)||eue!=e.charAt(1))){for(var m=2;n1!=e.charAt(m)&&(eue!=e.charAt(m)||Zle!=e.charAt(m+1));)++m;if(m+=2,n1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Xtt,comment:g})}}function f(){var p=s(),m=l(Htt);if(m){if(d(),!l(qtt))return a("property missing ':'");var g=l(Wtt),y=p({type:Qtt,property:tue(m[0].replace(Jle,n1)),value:g?tue(g[0].replace(Jle,n1)):n1});return l(Gtt),y}}function h(){var p=[];c(p);for(var m;m=f();)m!==!1&&(p.push(m),c(p));return p}return u(),h()};function tue(e){return e?e.replace(Ytt,n1):n1}var Ztt=Ks&&Ks.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(rSe,"__esModule",{value:!0});var ent=Ztt(Jtt);function tnt(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,ent.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var nue=rSe.default=tnt;const nnt=nue.default||nue,WF=iSe("end"),dp=iSe("start");function iSe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function rnt(e){const t=dp(e),n=WF(e);if(t&&n)return{start:t,end:n}}function N2(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?rue(e.position):"start"in e||"end"in e?rue(e):"line"in e||"column"in e?yU(e):""}function yU(e){return iue(e&&e.line)+":"+iue(e&&e.column)}function rue(e){return yU(e&&e.start)+"-"+yU(e&&e.end)}function iue(e){return e&&typeof e=="number"?e:1}class Ba extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const l=r.indexOf(":");l===-1?s.ruleId=r:(s.source=r.slice(0,l),s.ruleId=r.slice(l+1))}if(!s.place&&s.ancestors&&s.ancestors){const l=s.ancestors[s.ancestors.length-1];l&&(s.place=l.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=N2(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ba.prototype.file="";Ba.prototype.name="";Ba.prototype.reason="";Ba.prototype.message="";Ba.prototype.stack="";Ba.prototype.column=void 0;Ba.prototype.line=void 0;Ba.prototype.ancestors=void 0;Ba.prototype.cause=void 0;Ba.prototype.fatal=void 0;Ba.prototype.place=void 0;Ba.prototype.ruleId=void 0;Ba.prototype.source=void 0;const eX={}.hasOwnProperty,int=new Map,snt=/[A-Z]/g,ont=/-([a-z])/g,ant=new Set(["table","tbody","thead","tfoot","tr"]),lnt=new Set(["td","th"]),sSe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function unt(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=ynt(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=gnt(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Ky:Lk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=oSe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function oSe(e,t,n){if(t.type==="element")return cnt(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return dnt(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return hnt(e,t,n);if(t.type==="mdxjsEsm")return fnt(e,t);if(t.type==="root")return pnt(e,t,n);if(t.type==="text")return mnt(e,t)}function cnt(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Ky,e.schema=i),e.ancestors.push(t);const s=lSe(e,t.tagName,!1),o=vnt(e,t);let a=nX(e,t);return ant.has(t.tagName)&&(a=a.filter(function(l){return typeof l=="string"?!Ntt(l):!0})),aSe(e,o,s,t),tX(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function dnt(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}KA(e,t.position)}function fnt(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);KA(e,t.position)}function hnt(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Ky,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:lSe(e,t.name,!0),o=bnt(e,t),a=nX(e,t);return aSe(e,o,s,t),tX(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function pnt(e,t,n){const r={};return tX(r,nX(e,t)),e.create(t,e.Fragment,r,n)}function mnt(e,t){return t.value}function aSe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function tX(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function gnt(e,t,n){return r;function r(i,s,o,a){const u=Array.isArray(o.children)?n:t;return a?u(s,o,a):u(s,o)}}function ynt(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),l=dp(r);return t(i,s,o,a,{columnNumber:l?l.column-1:void 0,fileName:e,lineNumber:l?l.line:void 0},void 0)}}function vnt(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&eX.call(t.properties,i)){const s=_nt(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&lnt.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function bnt(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else KA(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else KA(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function nX(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:int;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const l=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(l){const u=i.get(l)||0;o=l+"-"+u,i.set(l,u+1)}}const a=oSe(e,s,o);a!==void 0&&n.push(a)}return n}function _nt(e,t,n){const r=qF(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Gxe(n):nSe(n)),r.property==="style"){let i=typeof n=="object"?n:wnt(e,String(n));return e.stylePropertyNameCase==="css"&&(i=Ent(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?ztt[r.property]||r.property:r.attribute,n]}}function wnt(e,t){const n={};try{nnt(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ba("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=sSe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(ont,Snt)),n[o]=s}}function lSe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Gle(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Gle(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return eX.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);KA(e)}function KA(e,t){const n=new Ba("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=sSe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Ent(e){const t={};let n;for(n in e)eX.call(e,n)&&(t[xnt(n)]=e[n]);return t}function xnt(e){let t=e.replace(snt,Tnt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function Snt(e,t){return t.toUpperCase()}function Tnt(e){return"-"+e.toLowerCase()}const M8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Cnt={};function Ant(e,t){const n=Cnt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return uSe(e,r,i)}function uSe(e,t,n){if(Int(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return sue(e.children,t,n)}return Array.isArray(e)?sue(e,t,n):""}function sue(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=uSe(e[i],t,n);return r.join("")}function Int(e){return!!(e&&typeof e=="object")}const oue=document.createElement("i");function rX(e){const t="&"+e+";";oue.innerHTML=t;const n=oue.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function $m(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function kc(e,t){return e.length>0?($m(e,e.length,0,t),e):t}const aue={}.hasOwnProperty;function knt(e){const t={};let n=-1;for(;++n<e.length;)Rnt(t,e[n]);return t}function Rnt(e,t){let n;for(n in t){const i=(aue.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){aue.call(i,o)||(i[o]=[]);const a=s[o];Pnt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function Pnt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);$m(e,0,0,r)}function cSe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function nE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const fh=Xy(/[A-Za-z]/),$u=Xy(/[\dA-Za-z]/),Nnt=Xy(/[#-'*+\--9=?A-Z^-~]/);function vU(e){return e!==null&&(e<32||e===127)}const bU=Xy(/\d/),Ont=Xy(/[\dA-Fa-f]/),Dnt=Xy(/[!-/:-@[-`{-~]/);function pn(e){return e!==null&&e<-2}function Ql(e){return e!==null&&(e<0||e===32)}function Mr(e){return e===-2||e===-1||e===32}const Mnt=Xy(new RegExp("\\p{P}|\\p{S}","u")),$nt=Xy(/\s/);function Xy(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function pS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&$u(e.charCodeAt(n+1))&&$u(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function yi(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(l){return Mr(l)?(e.enter(n),a(l)):t(l)}function a(l){return Mr(l)&&s++<i?(e.consume(l),a):(e.exit(n),t(l))}}const Lnt={tokenize:Fnt};function Fnt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),yi(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const l=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=l),n=l,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return pn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const jnt={tokenize:Bnt},lue={tokenize:znt};function Bnt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(_){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,l,u)(_)}return u(_)}function l(_){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&b();const w=t.events.length;let E=w,x;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){x=t.events[E][1].end;break}y(r);let S=w;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},x),S++;return $m(t.events,E+1,0,t.events.slice(w)),t.events.length=S,u(_)}return a(_)}function u(_){if(r===n.length){if(!i)return f(_);if(i.currentConstruct&&i.currentConstruct.concrete)return p(_);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(lue,c,d)(_)}function c(_){return i&&b(),y(r),f(_)}function d(_){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(_)}function f(_){return t.containerState={},e.attempt(lue,h,p)(_)}function h(_){return r++,n.push([t.currentConstruct,t.containerState]),f(_)}function p(_){if(_===null){i&&b(),y(0),e.consume(_);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(_)}function m(_){if(_===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(_);return}return pn(_)?(e.consume(_),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(_),m)}function g(_,w){const E=t.sliceStream(_);if(w&&E.push(null),_.previous=s,s&&(s.next=_),s=_,i.defineSkip(_.start),i.write(E),t.parser.lazy[_.start.line]){let x=i.events.length;for(;x--;)if(i.events[x][1].start.offset<o&&(!i.events[x][1].end||i.events[x][1].end.offset>o))return;const S=t.events.length;let C=S,A,R;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){R=t.events[C][1].end;break}A=!0}for(y(r),x=S;x<t.events.length;)t.events[x][1].end=Object.assign({},R),x++;$m(t.events,C+1,0,t.events.slice(S)),t.events.length=x}}function y(_){let w=n.length;for(;w-- >_;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=_}function b(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function znt(e,t,n){return yi(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function uue(e){if(e===null||Ql(e)||$nt(e))return 1;if(Mnt(e))return 2}function iX(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const _U={name:"attention",tokenize:Vnt,resolveAll:Unt};function Unt(e,t){let n=-1,r,i,s,o,a,l,u,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;l=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const d=Object.assign({},e[r][1].end),f=Object.assign({},e[n][1].start);cue(d,-l),cue(f,l),o={type:l>1?"strongSequence":"emphasisSequence",start:d,end:Object.assign({},e[r][1].end)},a={type:l>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:f},s={type:l>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:l>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),u=[],e[r][1].end.offset-e[r][1].start.offset&&(u=kc(u,[["enter",e[r][1],t],["exit",e[r][1],t]])),u=kc(u,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),u=kc(u,iX(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),u=kc(u,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,u=kc(u,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,$m(e,r-1,n-r+3,u),n=r+u.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function Vnt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=uue(r);let s;return o;function o(l){return s=l,e.enter("attentionSequence"),a(l)}function a(l){if(l===s)return e.consume(l),a;const u=e.exit("attentionSequence"),c=uue(l),d=!c||c===2&&i||n.includes(l),f=!i||i===2&&c||n.includes(r);return u._open=!!(s===42?d:d&&(i||!f)),u._close=!!(s===42?f:f&&(c||!d)),t(l)}}function cue(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Hnt={name:"autolink",tokenize:qnt};function qnt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return fh(h)?(e.consume(h),o):h===64?n(h):u(h)}function o(h){return h===43||h===45||h===46||$u(h)?(r=1,a(h)):u(h)}function a(h){return h===58?(e.consume(h),r=0,l):(h===43||h===45||h===46||$u(h))&&r++<32?(e.consume(h),a):(r=0,u(h))}function l(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||vU(h)?n(h):(e.consume(h),l)}function u(h){return h===64?(e.consume(h),c):Nnt(h)?(e.consume(h),u):n(h)}function c(h){return $u(h)?d(h):n(h)}function d(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):f(h)}function f(h){if((h===45||$u(h))&&r++<63){const p=h===45?f:d;return e.consume(h),p}return n(h)}}const GF={tokenize:Wnt,partial:!0};function Wnt(e,t,n){return r;function r(s){return Mr(s)?yi(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||pn(s)?t(s):n(s)}}const dSe={name:"blockQuote",tokenize:Gnt,continuation:{tokenize:Ynt},exit:Knt};function Gnt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Mr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Ynt(e,t,n){const r=this;return i;function i(o){return Mr(o)?yi(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(dSe,t,n)(o)}}function Knt(e){e.exit("blockQuote")}const fSe={name:"characterEscape",tokenize:Xnt};function Xnt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return Dnt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const hSe={name:"characterReference",tokenize:Qnt};function Qnt(e,t,n){const r=this;let i=0,s,o;return a;function a(d){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),l}function l(d){return d===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(d),e.exit("characterReferenceMarkerNumeric"),u):(e.enter("characterReferenceValue"),s=31,o=$u,c(d))}function u(d){return d===88||d===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(d),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=Ont,c):(e.enter("characterReferenceValue"),s=7,o=bU,c(d))}function c(d){if(d===59&&i){const f=e.exit("characterReferenceValue");return o===$u&&!rX(r.sliceSerialize(f))?n(d):(e.enter("characterReferenceMarker"),e.consume(d),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(d)&&i++<s?(e.consume(d),c):n(d)}}const due={tokenize:Znt,partial:!0},fue={name:"codeFenced",tokenize:Jnt,concrete:!0};function Jnt(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return l;function l(x){return u(x)}function u(x){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=x,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(x)}function c(x){return x===a?(o++,e.consume(x),c):o<3?n(x):(e.exit("codeFencedFenceSequence"),Mr(x)?yi(e,d,"whitespace")(x):d(x))}function d(x){return x===null||pn(x)?(e.exit("codeFencedFence"),r.interrupt?t(x):e.check(due,m,w)(x)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),f(x))}function f(x){return x===null||pn(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),d(x)):Mr(x)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),yi(e,h,"whitespace")(x)):x===96&&x===a?n(x):(e.consume(x),f)}function h(x){return x===null||pn(x)?d(x):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(x))}function p(x){return x===null||pn(x)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),d(x)):x===96&&x===a?n(x):(e.consume(x),p)}function m(x){return e.attempt(i,w,g)(x)}function g(x){return e.enter("lineEnding"),e.consume(x),e.exit("lineEnding"),y}function y(x){return s>0&&Mr(x)?yi(e,b,"linePrefix",s+1)(x):b(x)}function b(x){return x===null||pn(x)?e.check(due,m,w)(x):(e.enter("codeFlowValue"),_(x))}function _(x){return x===null||pn(x)?(e.exit("codeFlowValue"),b(x)):(e.consume(x),_)}function w(x){return e.exit("codeFenced"),t(x)}function E(x,S,C){let A=0;return R;function R(D){return x.enter("lineEnding"),x.consume(D),x.exit("lineEnding"),P}function P(D){return x.enter("codeFencedFence"),Mr(D)?yi(x,L,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):L(D)}function L(D){return D===a?(x.enter("codeFencedFenceSequence"),k(D)):C(D)}function k(D){return D===a?(A++,x.consume(D),k):A>=o?(x.exit("codeFencedFenceSequence"),Mr(D)?yi(x,$,"whitespace")(D):$(D)):C(D)}function $(D){return D===null||pn(D)?(x.exit("codeFencedFence"),S(D)):C(D)}}}function Znt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const $8={name:"codeIndented",tokenize:trt},ert={tokenize:nrt,partial:!0};function trt(e,t,n){const r=this;return i;function i(u){return e.enter("codeIndented"),yi(e,s,"linePrefix",5)(u)}function s(u){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?l(u):pn(u)?e.attempt(ert,o,l)(u):(e.enter("codeFlowValue"),a(u))}function a(u){return u===null||pn(u)?(e.exit("codeFlowValue"),o(u)):(e.consume(u),a)}function l(u){return e.exit("codeIndented"),t(u)}}function nrt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):pn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):yi(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):pn(o)?i(o):n(o)}}const rrt={name:"codeText",tokenize:ort,resolve:irt,previous:srt};function irt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function srt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function ort(e,t,n){let r=0,i,s;return o;function o(d){return e.enter("codeText"),e.enter("codeTextSequence"),a(d)}function a(d){return d===96?(e.consume(d),r++,a):(e.exit("codeTextSequence"),l(d))}function l(d){return d===null?n(d):d===32?(e.enter("space"),e.consume(d),e.exit("space"),l):d===96?(s=e.enter("codeTextSequence"),i=0,c(d)):pn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),l):(e.enter("codeTextData"),u(d))}function u(d){return d===null||d===32||d===96||pn(d)?(e.exit("codeTextData"),l(d)):(e.consume(d),u)}function c(d){return d===96?(e.consume(d),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(d)):(s.type="codeTextData",u(d))}}class art{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&kT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),kT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),kT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);kT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);kT(this.left,n.reverse())}}}function kT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function pSe(e){const t={};let n=-1,r,i,s,o,a,l,u;const c=new art(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(l=r[1]._tokenizer.events,s=0,s<l.length&&l[s][1].type==="lineEndingBlank"&&(s+=2),s<l.length&&l[s][1].type==="content"))for(;++s<l.length&&l[s][1].type!=="content";)l[s][1].type==="chunkText"&&(l[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,lrt(c,n)),n=t[n],u=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return $m(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function lrt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,l=[],u={};let c,d,f=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),d&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),d=h,h=h.next}for(h=n;++f<a.length;)a[f][0]==="exit"&&a[f-1][0]==="enter"&&a[f][1].type===a[f-1][1].type&&a[f][1].start.line!==a[f][1].end.line&&(m=f+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),f=g.length;f--;){const y=a.slice(g[f],g[f+1]),b=s.pop();l.push([b,b+y.length-1]),e.splice(b,2,y)}for(l.reverse(),f=-1;++f<l.length;)u[p+l[f][0]]=p+l[f][1],p+=l[f][1]-l[f][0]-1;return u}const urt={tokenize:frt,resolve:drt},crt={tokenize:hrt,partial:!0};function drt(e){return pSe(e),e}function frt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):pn(a)?e.check(crt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function hrt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),yi(e,s,"linePrefix")}function s(o){if(o===null||pn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function mSe(e,t,n,r,i,s,o,a,l){const u=l||Number.POSITIVE_INFINITY;let c=0;return d;function d(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),f):y===null||y===32||y===41||vU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function f(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),f(y)):y===null||y===60||pn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Ql(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<u&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||vU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function gSe(e,t,n,r,i,s){const o=this;let a=0,l;return u;function u(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!l||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):pn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(h))}function d(h){return h===null||h===91||h===93||pn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),l||(l=!Mr(h)),h===92?f:d)}function f(h){return h===91||h===92||h===93?(e.consume(h),a++,d):d(h)}}function ySe(e,t,n,r,i,s){let o;return a;function a(f){return f===34||f===39||f===40?(e.enter(r),e.enter(i),e.consume(f),e.exit(i),o=f===40?41:f,l):n(f)}function l(f){return f===o?(e.enter(i),e.consume(f),e.exit(i),e.exit(r),t):(e.enter(s),u(f))}function u(f){return f===o?(e.exit(s),l(o)):f===null?n(f):pn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),yi(e,u,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||pn(f)?(e.exit("chunkString"),u(f)):(e.consume(f),f===92?d:c)}function d(f){return f===o||f===92?(e.consume(f),c):c(f)}}function O2(e,t){let n;return r;function r(i){return pn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Mr(i)?yi(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const prt={name:"definition",tokenize:grt},mrt={tokenize:yrt,partial:!0};function grt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return gSe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=nE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),l):n(h)}function l(h){return Ql(h)?O2(e,u)(h):u(h)}function u(h){return mSe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(mrt,d,d)(h)}function d(h){return Mr(h)?yi(e,f,"whitespace")(h):f(h)}function f(h){return h===null||pn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function yrt(e,t,n){return r;function r(a){return Ql(a)?O2(e,i)(a):n(a)}function i(a){return ySe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Mr(a)?yi(e,o,"whitespace")(a):o(a)}function o(a){return a===null||pn(a)?t(a):n(a)}}const vrt={name:"hardBreakEscape",tokenize:brt};function brt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return pn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const _rt={name:"headingAtx",tokenize:Ert,resolve:wrt};function wrt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},$m(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function Ert(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Ql(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),l(c)):c===null||pn(c)?(e.exit("atxHeading"),t(c)):Mr(c)?yi(e,a,"whitespace")(c):(e.enter("atxHeadingText"),u(c))}function l(c){return c===35?(e.consume(c),l):(e.exit("atxHeadingSequence"),a(c))}function u(c){return c===null||c===35||Ql(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),u)}}const xrt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],hue=["pre","script","style","textarea"],Srt={name:"htmlFlow",tokenize:Irt,resolveTo:Art,concrete:!0},Trt={tokenize:Rrt,partial:!0},Crt={tokenize:krt,partial:!0};function Art(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function Irt(e,t,n){const r=this;let i,s,o,a,l;return u;function u(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),d}function d(j){return j===33?(e.consume(j),f):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:O):fh(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function f(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):fh(j)?(e.consume(j),i=4,r.interrupt?t:O):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:O):n(j)}function p(j){const H="CDATA[";return j===H.charCodeAt(a++)?(e.consume(j),a===H.length?r.interrupt?t:L:p):n(j)}function m(j){return fh(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Ql(j)){const H=j===47,G=o.toLowerCase();return!H&&!s&&hue.includes(G)?(i=1,r.interrupt?t(j):L(j)):xrt.includes(o.toLowerCase())?(i=6,H?(e.consume(j),y):r.interrupt?t(j):L(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?b(j):_(j))}return j===45||$u(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:L):n(j)}function b(j){return Mr(j)?(e.consume(j),b):R(j)}function _(j){return j===47?(e.consume(j),R):j===58||j===95||fh(j)?(e.consume(j),w):Mr(j)?(e.consume(j),_):R(j)}function w(j){return j===45||j===46||j===58||j===95||$u(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),x):Mr(j)?(e.consume(j),E):_(j)}function x(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),l=j,S):Mr(j)?(e.consume(j),x):C(j)}function S(j){return j===l?(e.consume(j),l=null,A):j===null||pn(j)?n(j):(e.consume(j),S)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Ql(j)?E(j):(e.consume(j),C)}function A(j){return j===47||j===62||Mr(j)?_(j):n(j)}function R(j){return j===62?(e.consume(j),P):n(j)}function P(j){return j===null||pn(j)?L(j):Mr(j)?(e.consume(j),P):n(j)}function L(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),V):j===63&&i===3?(e.consume(j),O):j===93&&i===5?(e.consume(j),U):pn(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(Trt,W,k)(j)):j===null||pn(j)?(e.exit("htmlFlowData"),k(j)):(e.consume(j),L)}function k(j){return e.check(Crt,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),D}function D(j){return j===null||pn(j)?k(j):(e.enter("htmlFlowData"),L(j))}function M(j){return j===45?(e.consume(j),O):L(j)}function B(j){return j===47?(e.consume(j),o="",z):L(j)}function z(j){if(j===62){const H=o.toLowerCase();return hue.includes(H)?(e.consume(j),V):L(j)}return fh(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),z):L(j)}function U(j){return j===93?(e.consume(j),O):L(j)}function O(j){return j===62?(e.consume(j),V):j===45&&i===2?(e.consume(j),O):L(j)}function V(j){return j===null||pn(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),V)}function W(j){return e.exit("htmlFlow"),t(j)}}function krt(e,t,n){const r=this;return i;function i(o){return pn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function Rrt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(GF,t,n)}}const Prt={name:"htmlText",tokenize:Nrt};function Nrt(e,t,n){const r=this;let i,s,o;return a;function a(O){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(O),l}function l(O){return O===33?(e.consume(O),u):O===47?(e.consume(O),E):O===63?(e.consume(O),_):fh(O)?(e.consume(O),C):n(O)}function u(O){return O===45?(e.consume(O),c):O===91?(e.consume(O),s=0,p):fh(O)?(e.consume(O),b):n(O)}function c(O){return O===45?(e.consume(O),h):n(O)}function d(O){return O===null?n(O):O===45?(e.consume(O),f):pn(O)?(o=d,B(O)):(e.consume(O),d)}function f(O){return O===45?(e.consume(O),h):d(O)}function h(O){return O===62?M(O):O===45?f(O):d(O)}function p(O){const V="CDATA[";return O===V.charCodeAt(s++)?(e.consume(O),s===V.length?m:p):n(O)}function m(O){return O===null?n(O):O===93?(e.consume(O),g):pn(O)?(o=m,B(O)):(e.consume(O),m)}function g(O){return O===93?(e.consume(O),y):m(O)}function y(O){return O===62?M(O):O===93?(e.consume(O),y):m(O)}function b(O){return O===null||O===62?M(O):pn(O)?(o=b,B(O)):(e.consume(O),b)}function _(O){return O===null?n(O):O===63?(e.consume(O),w):pn(O)?(o=_,B(O)):(e.consume(O),_)}function w(O){return O===62?M(O):_(O)}function E(O){return fh(O)?(e.consume(O),x):n(O)}function x(O){return O===45||$u(O)?(e.consume(O),x):S(O)}function S(O){return pn(O)?(o=S,B(O)):Mr(O)?(e.consume(O),S):M(O)}function C(O){return O===45||$u(O)?(e.consume(O),C):O===47||O===62||Ql(O)?A(O):n(O)}function A(O){return O===47?(e.consume(O),M):O===58||O===95||fh(O)?(e.consume(O),R):pn(O)?(o=A,B(O)):Mr(O)?(e.consume(O),A):M(O)}function R(O){return O===45||O===46||O===58||O===95||$u(O)?(e.consume(O),R):P(O)}function P(O){return O===61?(e.consume(O),L):pn(O)?(o=P,B(O)):Mr(O)?(e.consume(O),P):A(O)}function L(O){return O===null||O===60||O===61||O===62||O===96?n(O):O===34||O===39?(e.consume(O),i=O,k):pn(O)?(o=L,B(O)):Mr(O)?(e.consume(O),L):(e.consume(O),$)}function k(O){return O===i?(e.consume(O),i=void 0,D):O===null?n(O):pn(O)?(o=k,B(O)):(e.consume(O),k)}function $(O){return O===null||O===34||O===39||O===60||O===61||O===96?n(O):O===47||O===62||Ql(O)?A(O):(e.consume(O),$)}function D(O){return O===47||O===62||Ql(O)?A(O):n(O)}function M(O){return O===62?(e.consume(O),e.exit("htmlTextData"),e.exit("htmlText"),t):n(O)}function B(O){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(O),e.exit("lineEnding"),z}function z(O){return Mr(O)?yi(e,U,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(O):U(O)}function U(O){return e.enter("htmlTextData"),o(O)}}const sX={name:"labelEnd",tokenize:Frt,resolveTo:Lrt,resolveAll:$rt},Ort={tokenize:jrt},Drt={tokenize:Brt},Mrt={tokenize:zrt};function $rt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function Lrt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const l={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},u={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",l,t],["enter",u,t]],a=kc(a,e.slice(s+1,s+r+3)),a=kc(a,[["enter",c,t]]),a=kc(a,iX(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=kc(a,[["exit",c,t],e[o-2],e[o-1],["exit",u,t]]),a=kc(a,e.slice(o+1)),a=kc(a,[["exit",l,t]]),$m(e,s,e.length,a),e}function Frt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(f){return s?s._inactive?d(f):(o=r.parser.defined.includes(nE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(f),e.exit("labelMarker"),e.exit("labelEnd"),l):n(f)}function l(f){return f===40?e.attempt(Ort,c,o?c:d)(f):f===91?e.attempt(Drt,c,o?u:d)(f):o?c(f):d(f)}function u(f){return e.attempt(Mrt,c,d)(f)}function c(f){return t(f)}function d(f){return s._balanced=!0,n(f)}}function jrt(e,t,n){return r;function r(d){return e.enter("resource"),e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),i}function i(d){return Ql(d)?O2(e,s)(d):s(d)}function s(d){return d===41?c(d):mSe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(d)}function o(d){return Ql(d)?O2(e,l)(d):c(d)}function a(d){return n(d)}function l(d){return d===34||d===39||d===40?ySe(e,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(d):c(d)}function u(d){return Ql(d)?O2(e,c)(d):c(d)}function c(d){return d===41?(e.enter("resourceMarker"),e.consume(d),e.exit("resourceMarker"),e.exit("resource"),t):n(d)}}function Brt(e,t,n){const r=this;return i;function i(a){return gSe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(nE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function zrt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const Urt={name:"labelStartImage",tokenize:Vrt,resolveAll:sX.resolveAll};function Vrt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Hrt={name:"labelStartLink",tokenize:qrt,resolveAll:sX.resolveAll};function qrt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const L8={name:"lineEnding",tokenize:Wrt};function Wrt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),yi(e,t,"linePrefix")}}const qO={name:"thematicBreak",tokenize:Grt};function Grt(e,t,n){let r=0,i;return s;function s(u){return e.enter("thematicBreak"),o(u)}function o(u){return i=u,a(u)}function a(u){return u===i?(e.enter("thematicBreakSequence"),l(u)):r>=3&&(u===null||pn(u))?(e.exit("thematicBreak"),t(u)):n(u)}function l(u){return u===i?(e.consume(u),r++,l):(e.exit("thematicBreakSequence"),Mr(u)?yi(e,a,"whitespace")(u):a(u))}}const kl={name:"list",tokenize:Xrt,continuation:{tokenize:Qrt},exit:Zrt},Yrt={tokenize:eit,partial:!0},Krt={tokenize:Jrt,partial:!0};function Xrt(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:bU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(qO,n,u)(h):u(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),l(h)}return n(h)}function l(h){return bU(h)&&++o<10?(e.consume(h),l):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),u(h)):n(h)}function u(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(GF,r.interrupt?n:c,e.attempt(Yrt,f,d))}function c(h){return r.containerState.initialBlankLine=!0,s++,f(h)}function d(h){return Mr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),f):n(h)}function f(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function Qrt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(GF,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,yi(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Mr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Krt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,yi(e,e.attempt(kl,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Jrt(e,t,n){const r=this;return yi(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Zrt(e){e.exit(this.containerState.type)}function eit(e,t,n){const r=this;return yi(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Mr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const pue={name:"setextUnderline",tokenize:nit,resolveTo:tit};function tit(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function nit(e,t,n){const r=this;let i;return s;function s(u){let c=r.events.length,d;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){d=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||d)?(e.enter("setextHeadingLine"),i=u,o(u)):n(u)}function o(u){return e.enter("setextHeadingLineSequence"),a(u)}function a(u){return u===i?(e.consume(u),a):(e.exit("setextHeadingLineSequence"),Mr(u)?yi(e,l,"lineSuffix")(u):l(u))}function l(u){return u===null||pn(u)?(e.exit("setextHeadingLine"),t(u)):n(u)}}const rit={tokenize:iit};function iit(e){const t=this,n=e.attempt(GF,r,e.attempt(this.parser.constructs.flowInitial,i,yi(e,e.attempt(this.parser.constructs.flow,i,e.attempt(urt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const sit={resolveAll:bSe()},oit=vSe("string"),ait=vSe("text");function vSe(e){return{tokenize:t,resolveAll:bSe(e==="text"?lit:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return u(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),l}function l(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),l)}function u(c){if(c===null)return!0;const d=i[c];let f=-1;if(d)for(;++f<d.length;){const h=d[f];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function bSe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function lit(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,l;for(;s--;){const u=i[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(u===-2)l=!0,a++;else if(u!==-1){s++;break}}if(a){const u={type:n===e.length||l||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},u.start),r.start.offset===r.end.offset?Object.assign(r,u):(e.splice(n,0,["enter",u,t],["exit",u,t]),n+=2)}n++}return e}function uit(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const l={consume:b,enter:_,exit:w,attempt:S(E),check:S(x),interrupt:S(x,{interrupt:!0})},u={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:f,now:p,defineSkip:m,write:d};let c=t.tokenize.call(u,l);return t.resolveAll&&s.push(t),u;function d(P){return o=kc(o,P),g(),o[o.length-1]!==null?[]:(C(t,0),u.events=iX(s,u.events,u),u.events)}function f(P,L){return dit(h(P),L)}function h(P){return cit(o,P)}function p(){const{line:P,column:L,offset:k,_index:$,_bufferIndex:D}=r;return{line:P,column:L,offset:k,_index:$,_bufferIndex:D}}function m(P){i[P.line]=P.column,R()}function g(){let P;for(;r._index<o.length;){const L=o[r._index];if(typeof L=="string")for(P=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===P&&r._bufferIndex<L.length;)y(L.charCodeAt(r._bufferIndex));else y(L)}}function y(P){c=c(P)}function b(P){pn(P)?(r.line++,r.column=1,r.offset+=P===-3?2:1,R()):P!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),u.previous=P}function _(P,L){const k=L||{};return k.type=P,k.start=p(),u.events.push(["enter",k,u]),a.push(k),k}function w(P){const L=a.pop();return L.end=p(),u.events.push(["exit",L,u]),L}function E(P,L){C(P,L.from)}function x(P,L){L.restore()}function S(P,L){return k;function k($,D,M){let B,z,U,O;return Array.isArray($)?W($):"tokenize"in $?W([$]):V($);function V(J){return se;function se(ie){const ne=ie!==null&&J[ie],ue=ie!==null&&J.null,xe=[...Array.isArray(ne)?ne:ne?[ne]:[],...Array.isArray(ue)?ue:ue?[ue]:[]];return W(xe)(ie)}}function W(J){return B=J,z=0,J.length===0?M:j(J[z])}function j(J){return se;function se(ie){return O=A(),U=J,J.partial||(u.currentConstruct=J),J.name&&u.parser.constructs.disable.null.includes(J.name)?G():J.tokenize.call(L?Object.assign(Object.create(u),L):u,l,H,G)(ie)}}function H(J){return P(U,O),D}function G(J){return O.restore(),++z<B.length?j(B[z]):M}}}function C(P,L){P.resolveAll&&!s.includes(P)&&s.push(P),P.resolve&&$m(u.events,L,u.events.length-L,P.resolve(u.events.slice(L),u)),P.resolveTo&&(u.events=P.resolveTo(u.events,u))}function A(){const P=p(),L=u.previous,k=u.currentConstruct,$=u.events.length,D=Array.from(a);return{restore:M,from:$};function M(){r=P,u.previous=L,u.currentConstruct=k,u.events.length=$,a=D,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function cit(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function dit(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const fit={42:kl,43:kl,45:kl,48:kl,49:kl,50:kl,51:kl,52:kl,53:kl,54:kl,55:kl,56:kl,57:kl,62:dSe},hit={91:prt},pit={[-2]:$8,[-1]:$8,32:$8},mit={35:_rt,42:qO,45:[pue,qO],60:Srt,61:pue,95:qO,96:fue,126:fue},git={38:hSe,92:fSe},yit={[-5]:L8,[-4]:L8,[-3]:L8,33:Urt,38:hSe,42:_U,60:[Hnt,Prt],91:Hrt,92:[vrt,fSe],93:sX,95:_U,96:rrt},vit={null:[_U,sit]},bit={null:[42,95]},_it={null:[]},wit=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:bit,contentInitial:hit,disable:_it,document:fit,flow:mit,flowInitial:pit,insideSpan:vit,string:git,text:yit},Symbol.toStringTag,{value:"Module"}));function Eit(e){const n=knt([wit,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(Lnt),document:i(jnt),flow:i(rit),string:i(oit),text:i(ait)};return r;function i(s){return o;function o(a){return uit(r,s,a)}}}function xit(e){for(;!pSe(e););return e}const mue=/[\0\t\n\r]/g;function Sit(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const l=[];let u,c,d,f,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),d=0,t="",n&&(s.charCodeAt(0)===65279&&d++,n=void 0);d<s.length;){if(mue.lastIndex=d,u=mue.exec(s),f=u&&u.index!==void 0?u.index:s.length,h=s.charCodeAt(f),!u){t=s.slice(d);break}if(h===10&&d===f&&r)l.push(-3),r=void 0;else switch(r&&(l.push(-5),r=void 0),d<f&&(l.push(s.slice(d,f)),e+=f-d),h){case 0:{l.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,l.push(-2);e++<c;)l.push(-1);break}case 10:{l.push(-4),e=1;break}default:r=!0,e=1}d=f+1}return a&&(r&&l.push(-5),t&&l.push(t),l.push(null)),l}}const Tit=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Cit(e){return e.replace(Tit,Ait)}function Ait(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return cSe(n.slice(s?2:1),s?16:10)}return rX(n)||e}const _Se={}.hasOwnProperty;function Iit(e,t,n){return typeof t!="string"&&(n=t,t=void 0),kit(n)(xit(Eit(n).document().write(Sit()(e,t,!0))))}function kit(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Pe),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(Oe),blockQuote:s(ue),characterEscape:A,characterReference:A,codeFenced:s(xe),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(xe,o),codeText:s(de,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(je),hardBreakEscape:s(Fe),hardBreakTrailing:s(Fe),htmlFlow:s(Ae,o),htmlFlowData:A,htmlText:s(Ae,o),htmlTextData:A,image:s(fe),label:o,link:s(Pe),listItem:s(ft),listItemValue:f,listOrdered:s(He,d),listUnordered:s(He),paragraph:s(Ee),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Oe),strong:s(he),thematicBreak:s(nt)},exit:{atxHeading:l(),atxHeadingSequence:E,autolink:l(),autolinkEmail:ne,autolinkProtocol:ie,blockQuote:l(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:J,characterReference:se,codeFenced:l(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:R,codeIndented:l(y),codeText:l(D),codeTextData:R,data:R,definition:l(),definitionDestinationString:w,definitionLabelString:b,definitionTitleString:_,emphasis:l(),hardBreakEscape:l(L),hardBreakTrailing:l(L),htmlFlow:l(k),htmlFlowData:R,htmlText:l($),htmlTextData:R,image:l(B),label:U,labelText:z,lineEnding:P,link:l(M),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:H,resourceDestinationString:O,resourceTitleString:V,resource:W,setextHeading:l(C),setextHeadingLineSequence:S,setextHeadingText:x,strong:l(),thematicBreak:l()}};wSe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ye){let Re={type:"root",children:[]};const Ge={stack:[Re],tokenStack:[],config:t,enter:a,exit:u,buffer:o,resume:c,data:n},Qe=[];let xt=-1;for(;++xt<ye.length;)if(ye[xt][1].type==="listOrdered"||ye[xt][1].type==="listUnordered")if(ye[xt][0]==="enter")Qe.push(xt);else{const An=Qe.pop();xt=i(ye,An,xt)}for(xt=-1;++xt<ye.length;){const An=t[ye[xt][0]];_Se.call(An,ye[xt][1].type)&&An[ye[xt][1].type].call(Object.assign({sliceSerialize:ye[xt][2].sliceSerialize},Ge),ye[xt][1])}if(Ge.tokenStack.length>0){const An=Ge.tokenStack[Ge.tokenStack.length-1];(An[1]||gue).call(Ge,void 0,An[0])}for(Re.position={start:Ag(ye.length>0?ye[0][1].start:{line:1,column:1,offset:0}),end:Ag(ye.length>0?ye[ye.length-2][1].end:{line:1,column:1,offset:0})},xt=-1;++xt<t.transforms.length;)Re=t.transforms[xt](Re)||Re;return Re}function i(ye,Re,Ge){let Qe=Re-1,xt=-1,An=!1,gr,yr,Nr,Xt;for(;++Qe<=Ge;){const Dn=ye[Qe];switch(Dn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Dn[0]==="enter"?xt++:xt--,Xt=void 0;break}case"lineEndingBlank":{Dn[0]==="enter"&&(gr&&!Xt&&!xt&&!Nr&&(Nr=Qe),Xt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Xt=void 0}if(!xt&&Dn[0]==="enter"&&Dn[1].type==="listItemPrefix"||xt===-1&&Dn[0]==="exit"&&(Dn[1].type==="listUnordered"||Dn[1].type==="listOrdered")){if(gr){let rr=Qe;for(yr=void 0;rr--;){const ir=ye[rr];if(ir[1].type==="lineEnding"||ir[1].type==="lineEndingBlank"){if(ir[0]==="exit")continue;yr&&(ye[yr][1].type="lineEndingBlank",An=!0),ir[1].type="lineEnding",yr=rr}else if(!(ir[1].type==="linePrefix"||ir[1].type==="blockQuotePrefix"||ir[1].type==="blockQuotePrefixWhitespace"||ir[1].type==="blockQuoteMarker"||ir[1].type==="listItemIndent"))break}Nr&&(!yr||Nr<yr)&&(gr._spread=!0),gr.end=Object.assign({},yr?ye[yr][1].start:Dn[1].end),ye.splice(yr||Qe,0,["exit",gr,Dn[2]]),Qe++,Ge++}if(Dn[1].type==="listItemPrefix"){const rr={type:"listItem",_spread:!1,start:Object.assign({},Dn[1].start),end:void 0};gr=rr,ye.splice(Qe,0,["enter",rr,Dn[2]]),Qe++,Ge++,Nr=void 0,Xt=!0}}}return ye[Re][1]._spread=An,Ge}function s(ye,Re){return Ge;function Ge(Qe){a.call(this,ye(Qe),Qe),Re&&Re.call(this,Qe)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ye,Re,Ge){this.stack[this.stack.length-1].children.push(ye),this.stack.push(ye),this.tokenStack.push([Re,Ge]),ye.position={start:Ag(Re.start),end:void 0}}function l(ye){return Re;function Re(Ge){ye&&ye.call(this,Ge),u.call(this,Ge)}}function u(ye,Re){const Ge=this.stack.pop(),Qe=this.tokenStack.pop();if(Qe)Qe[0].type!==ye.type&&(Re?Re.call(this,ye,Qe[0]):(Qe[1]||gue).call(this,ye,Qe[0]));else throw new Error("Cannot close `"+ye.type+"` ("+N2({start:ye.start,end:ye.end})+"): its not open");Ge.position.end=Ag(ye.end)}function c(){return Ant(this.stack.pop())}function d(){this.data.expectingFirstListItemValue=!0}function f(ye){if(this.data.expectingFirstListItemValue){const Re=this.stack[this.stack.length-2];Re.start=Number.parseInt(this.sliceSerialize(ye),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.lang=ye}function p(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.meta=ye}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ye.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ye.replace(/(\r?\n|\r)$/g,"")}function b(ye){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.label=Re,Ge.identifier=nE(this.sliceSerialize(ye)).toLowerCase()}function _(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.title=ye}function w(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.url=ye}function E(ye){const Re=this.stack[this.stack.length-1];if(!Re.depth){const Ge=this.sliceSerialize(ye).length;Re.depth=Ge}}function x(){this.data.setextHeadingSlurpLineEnding=!0}function S(ye){const Re=this.stack[this.stack.length-1];Re.depth=this.sliceSerialize(ye).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(ye){const Ge=this.stack[this.stack.length-1].children;let Qe=Ge[Ge.length-1];(!Qe||Qe.type!=="text")&&(Qe=Ue(),Qe.position={start:Ag(ye.start),end:void 0},Ge.push(Qe)),this.stack.push(Qe)}function R(ye){const Re=this.stack.pop();Re.value+=this.sliceSerialize(ye),Re.position.end=Ag(ye.end)}function P(ye){const Re=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ge=Re.children[Re.children.length-1];Ge.position.end=Ag(ye.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Re.type)&&(A.call(this,ye),R.call(this,ye))}function L(){this.data.atHardBreak=!0}function k(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ye}function $(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ye}function D(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.value=ye}function M(){const ye=this.stack[this.stack.length-1];if(this.data.inReference){const Re=this.data.referenceType||"shortcut";ye.type+="Reference",ye.referenceType=Re,delete ye.url,delete ye.title}else delete ye.identifier,delete ye.label;this.data.referenceType=void 0}function B(){const ye=this.stack[this.stack.length-1];if(this.data.inReference){const Re=this.data.referenceType||"shortcut";ye.type+="Reference",ye.referenceType=Re,delete ye.url,delete ye.title}else delete ye.identifier,delete ye.label;this.data.referenceType=void 0}function z(ye){const Re=this.sliceSerialize(ye),Ge=this.stack[this.stack.length-2];Ge.label=Cit(Re),Ge.identifier=nE(Re).toLowerCase()}function U(){const ye=this.stack[this.stack.length-1],Re=this.resume(),Ge=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ge.type==="link"){const Qe=ye.children;Ge.children=Qe}else Ge.alt=Re}function O(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.url=ye}function V(){const ye=this.resume(),Re=this.stack[this.stack.length-1];Re.title=ye}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function H(ye){const Re=this.resume(),Ge=this.stack[this.stack.length-1];Ge.label=Re,Ge.identifier=nE(this.sliceSerialize(ye)).toLowerCase(),this.data.referenceType="full"}function G(ye){this.data.characterReferenceType=ye.type}function J(ye){const Re=this.sliceSerialize(ye),Ge=this.data.characterReferenceType;let Qe;Ge?(Qe=cSe(Re,Ge==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Qe=rX(Re);const xt=this.stack[this.stack.length-1];xt.value+=Qe}function se(ye){const Re=this.stack.pop();Re.position.end=Ag(ye.end)}function ie(ye){R.call(this,ye);const Re=this.stack[this.stack.length-1];Re.url=this.sliceSerialize(ye)}function ne(ye){R.call(this,ye);const Re=this.stack[this.stack.length-1];Re.url="mailto:"+this.sliceSerialize(ye)}function ue(){return{type:"blockquote",children:[]}}function xe(){return{type:"code",lang:null,meta:null,value:""}}function de(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function je(){return{type:"emphasis",children:[]}}function Oe(){return{type:"heading",depth:0,children:[]}}function Fe(){return{type:"break"}}function Ae(){return{type:"html",value:""}}function fe(){return{type:"image",title:null,url:"",alt:null}}function Pe(){return{type:"link",title:null,url:"",children:[]}}function He(ye){return{type:"list",ordered:ye.type==="listOrdered",start:null,spread:ye._spread,children:[]}}function ft(ye){return{type:"listItem",spread:ye._spread,checked:null,children:[]}}function Ee(){return{type:"paragraph",children:[]}}function he(){return{type:"strong",children:[]}}function Ue(){return{type:"text",value:""}}function nt(){return{type:"thematicBreak"}}}function Ag(e){return{line:e.line,column:e.column,offset:e.offset}}function wSe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?wSe(e,r):Rit(e,r)}}function Rit(e,t){let n;for(n in t)if(_Se.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function gue(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+N2({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+N2({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+N2({start:t.start,end:t.end})+") is still open")}function Pit(e){const t=this;t.parser=n;function n(r){return Iit(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Nit(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Oit(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Dit(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function Mit(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function $it(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Lit(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=pS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,l);const u={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,u),e.applyData(t,u)}function Fit(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function jit(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function ESe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Bit(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ESe(e,t);const i={src:pS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function zit(e,t){const n={src:pS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Uit(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Vit(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return ESe(e,t);const i={href:pS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Hit(e,t){const n={href:pS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function qit(e,t,n){const r=e.all(t),i=n?Wit(n):xSe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let d;c&&c.type==="element"&&c.tagName==="p"?d=c:(d={type:"element",tagName:"p",properties:{},children:[]},r.unshift(d)),d.children.length>0&&d.children.unshift({type:"text",value:" "}),d.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const l=r[r.length-1];l&&(i||l.type!=="element"||l.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,u),e.applyData(t,u)}function Wit(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=xSe(n[r])}return t}function xSe(e){const t=e.spread;return t??e.children.length>1}function Git(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Yit(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Kit(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Xit(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Qit(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=dp(t.children[1]),l=WF(t.children[t.children.length-1]);a&&l&&(o.position={start:a,end:l}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Jit(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let l=-1;const u=[];for(;++l<a;){const d=t.children[l],f={},h=o?o[l]:void 0;h&&(f.align=h);let p={type:"element",tagName:s,properties:f,children:[]};d&&(p.children=e.all(d),e.patch(d,p),p=e.applyData(d,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(u,!0)};return e.patch(t,c),e.applyData(t,c)}function Zit(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const yue=9,vue=32;function est(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(bue(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(bue(t.slice(i),i>0,!1)),s.join("")}function bue(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===yue||s===vue;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===yue||s===vue;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function tst(e,t){const n={type:"text",value:est(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function nst(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const rst={blockquote:Nit,break:Oit,code:Dit,delete:Mit,emphasis:$it,footnoteReference:Lit,heading:Fit,html:jit,imageReference:Bit,image:zit,inlineCode:Uit,linkReference:Vit,link:Hit,listItem:qit,list:Git,paragraph:Yit,root:Kit,strong:Xit,table:Qit,tableCell:Zit,tableRow:Jit,text:tst,thematicBreak:nst,toml:JP,yaml:JP,definition:JP,footnoteDefinition:JP};function JP(){}const SSe=-1,YF=0,OM=1,DM=2,oX=3,aX=4,lX=5,uX=6,TSe=7,CSe=8,_ue=typeof self=="object"?self:globalThis,ist=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case YF:case SSe:return n(o,i);case OM:{const a=n([],i);for(const l of o)a.push(r(l));return a}case DM:{const a=n({},i);for(const[l,u]of o)a[r(l)]=r(u);return a}case oX:return n(new Date(o),i);case aX:{const{source:a,flags:l}=o;return n(new RegExp(a,l),i)}case lX:{const a=n(new Map,i);for(const[l,u]of o)a.set(r(l),r(u));return a}case uX:{const a=n(new Set,i);for(const l of o)a.add(r(l));return a}case TSe:{const{name:a,message:l}=o;return n(new _ue[a](l),i)}case CSe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new _ue[s](o),i)};return r},wue=e=>ist(new Map,e)(0),R_="",{toString:sst}={},{keys:ost}=Object,RT=e=>{const t=typeof e;if(t!=="object"||!e)return[YF,t];const n=sst.call(e).slice(8,-1);switch(n){case"Array":return[OM,R_];case"Object":return[DM,R_];case"Date":return[oX,R_];case"RegExp":return[aX,R_];case"Map":return[lX,R_];case"Set":return[uX,R_]}return n.includes("Array")?[OM,n]:n.includes("Error")?[TSe,n]:[DM,n]},ZP=([e,t])=>e===YF&&(t==="function"||t==="symbol"),ast=(e,t,n,r)=>{const i=(o,a)=>{const l=r.push(o)-1;return n.set(a,l),l},s=o=>{if(n.has(o))return n.get(o);let[a,l]=RT(o);switch(a){case YF:{let c=o;switch(l){case"bigint":a=CSe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+l);c=null;break;case"undefined":return i([SSe],o)}return i([a,c],o)}case OM:{if(l)return i([l,[...o]],o);const c=[],d=i([a,c],o);for(const f of o)c.push(s(f));return d}case DM:{if(l)switch(l){case"BigInt":return i([l,o.toString()],o);case"Boolean":case"Number":case"String":return i([l,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],d=i([a,c],o);for(const f of ost(o))(e||!ZP(RT(o[f])))&&c.push([s(f),s(o[f])]);return d}case oX:return i([a,o.toISOString()],o);case aX:{const{source:c,flags:d}=o;return i([a,{source:c,flags:d}],o)}case lX:{const c=[],d=i([a,c],o);for(const[f,h]of o)(e||!(ZP(RT(f))||ZP(RT(h))))&&c.push([s(f),s(h)]);return d}case uX:{const c=[],d=i([a,c],o);for(const f of o)(e||!ZP(RT(f)))&&c.push(s(f));return d}}const{message:u}=o;return i([a,{name:l,message:u}],o)};return s},Eue=(e,{json:t,lossy:n}={})=>{const r=[];return ast(!(t||n),!!t,new Map,r)(e),r},qE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?wue(Eue(e,t)):structuredClone(e):(e,t)=>wue(Eue(e,t));function lst(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function ust(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function cst(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||lst,r=e.options.footnoteBackLabel||ust,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let l=-1;for(;++l<e.footnoteOrder.length;){const u=e.footnoteById.get(e.footnoteOrder[l]);if(!u)continue;const c=e.all(u),d=String(u.identifier).toUpperCase(),f=pS(d.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(d);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let b=typeof n=="string"?n:n(l,h);typeof b=="string"&&(b={type:"text",value:b}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+f+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(l,h),className:["data-footnote-backref"]},children:Array.isArray(b)?b:[b]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const b=g.children[g.children.length-1];b&&b.type==="text"?b.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+f},children:e.wrap(c,!0)};e.patch(u,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...qE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const ASe=function(e){if(e==null)return pst;if(typeof e=="function")return KF(e);if(typeof e=="object")return Array.isArray(e)?dst(e):fst(e);if(typeof e=="string")return hst(e);throw new Error("Expected function, string, or object as test")};function dst(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=ASe(e[n]);return KF(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function fst(e){const t=e;return KF(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function hst(e){return KF(t);function t(n){return n&&n.type===e}}function KF(e){return t;function t(n,r,i){return!!(mst(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function pst(){return!0}function mst(e){return e!==null&&typeof e=="object"&&"type"in e}const ISe=[],gst=!0,xue=!1,yst="skip";function vst(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=ASe(i),o=r?-1:1;a(e,void 0,[])();function a(l,u,c){const d=l&&typeof l=="object"?l:{};if(typeof d.type=="string"){const h=typeof d.tagName=="string"?d.tagName:typeof d.name=="string"?d.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(l.type+(h?"<"+h+">":""))+")"})}return f;function f(){let h=ISe,p,m,g;if((!t||s(l,u,c[c.length-1]||void 0))&&(h=bst(n(l,c)),h[0]===xue))return h;if("children"in l&&l.children){const y=l;if(y.children&&h[0]!==yst)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const b=y.children[m];if(p=a(b,m,g)(),p[0]===xue)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function bst(e){return Array.isArray(e)?e:typeof e=="number"?[gst,e]:e==null?ISe:[e]}function cX(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),vst(e,s,a,i);function a(l,u){const c=u[u.length-1],d=c?c.children.indexOf(l):void 0;return o(l,d,c)}}const wU={}.hasOwnProperty,_st={};function wst(e,t){const n=t||_st,r=new Map,i=new Map,s=new Map,o={...rst,...n.handlers},a={all:u,applyData:xst,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:l,options:n,patch:Est,wrap:Tst};return cX(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const d=c.type==="definition"?r:i,f=String(c.identifier).toUpperCase();d.has(f)||d.set(f,c)}}),a;function l(c,d){const f=c.type,h=a.handlers[f];if(wU.call(a.handlers,f)&&h)return h(a,c,d);if(a.options.passThrough&&a.options.passThrough.includes(f)){if("children"in c){const{children:m,...g}=c,y=qE(g);return y.children=a.all(c),y}return qE(c)}return(a.options.unknownHandler||Sst)(a,c,d)}function u(c){const d=[];if("children"in c){const f=c.children;let h=-1;for(;++h<f.length;){const p=a.one(f[h],c);if(p){if(h&&f[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Sue(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Sue(m.value))}Array.isArray(p)?d.push(...p):d.push(p)}}}return d}}function Est(e,t){e.position&&(t.position=rnt(e))}function xst(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,qE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Sst(e,t){const n=t.data||{},r="value"in t&&!(wU.call(n,"hProperties")||wU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Tst(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Sue(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Tue(e,t){const n=wst(e,t),r=n.one(e,void 0),i=cst(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Cst(e,t){return e&&"run"in e?async function(n,r){const i=Tue(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Tue(n,{file:r,...t||e})}}function Cue(e){if(e)throw e}var WO=Object.prototype.hasOwnProperty,kSe=Object.prototype.toString,Aue=Object.defineProperty,Iue=Object.getOwnPropertyDescriptor,kue=function(t){return typeof Array.isArray=="function"?Array.isArray(t):kSe.call(t)==="[object Array]"},Rue=function(t){if(!t||kSe.call(t)!=="[object Object]")return!1;var n=WO.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&WO.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||WO.call(t,i)},Pue=function(t,n){Aue&&n.name==="__proto__"?Aue(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Nue=function(t,n){if(n==="__proto__")if(WO.call(t,n)){if(Iue)return Iue(t,n).value}else return;return t[n]},Ast=function e(){var t,n,r,i,s,o,a=arguments[0],l=1,u=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},l=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});l<u;++l)if(t=arguments[l],t!=null)for(n in t)r=Nue(a,n),i=Nue(t,n),a!==i&&(c&&i&&(Rue(i)||(s=kue(i)))?(s?(s=!1,o=r&&kue(r)?r:[]):o=r&&Rue(r)?r:{},Pue(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&Pue(a,{name:n,newValue:i}));return a};const F8=mu(Ast);function EU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ist(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(l,...u){const c=e[++s];let d=-1;if(l){o(l);return}for(;++d<i.length;)(u[d]===null||u[d]===void 0)&&(u[d]=i[d]);i=u,c?kst(c,a)(...u):o(null,...u)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function kst(e,t){let n;return r;function r(...o){const a=e.length>o.length;let l;a&&o.push(i);try{l=e.apply(this,o)}catch(u){const c=u;if(a&&n)throw c;return i(c)}a||(l&&l.then&&typeof l.then=="function"?l.then(s,i):l instanceof Error?i(l):s(l))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const th={basename:Rst,dirname:Pst,extname:Nst,join:Ost,sep:"/"};function Rst(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Fk(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Pst(e){if(Fk(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Nst(e){Fk(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Ost(...e){let t=-1,n;for(;++t<e.length;)Fk(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Dst(n)}function Dst(e){Fk(e);const t=e.codePointAt(0)===47;let n=Mst(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function Mst(e,t){let n="",r=0,i=-1,s=0,o=-1,a,l;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(l=n.lastIndexOf("/"),l!==n.length-1){l<0?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Fk(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const $st={cwd:Lst};function Lst(){return"/"}function xU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Fst(e){if(typeof e=="string")e=new URL(e);else if(!xU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return jst(e)}function jst(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const j8=["history","path","basename","stem","extname","dirname"];class RSe{constructor(t){let n;t?xU(t)?n={path:t}:typeof t=="string"||Bst(t)?n={value:t}:n=t:n={},this.cwd=$st.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<j8.length;){const s=j8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)j8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?th.basename(this.path):void 0}set basename(t){z8(t,"basename"),B8(t,"basename"),this.path=th.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?th.dirname(this.path):void 0}set dirname(t){Oue(this.basename,"dirname"),this.path=th.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?th.extname(this.path):void 0}set extname(t){if(B8(t,"extname"),Oue(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=th.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){xU(t)&&(t=Fst(t)),z8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?th.basename(this.path,this.extname):void 0}set stem(t){z8(t,"stem"),B8(t,"stem"),this.path=th.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ba(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function B8(e,t){if(e&&e.includes(th.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+th.sep+"`")}function z8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Oue(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Bst(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const zst=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Ust={}.hasOwnProperty;class dX extends zst{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ist()}copy(){const t=new dX;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(F8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(H8("data",this.frozen),this.namespace[t]=n,this):Ust.call(this.namespace,t)&&this.namespace[t]||void 0:t?(H8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=eN(t),r=this.parser||this.Parser;return U8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),U8("process",this.parser||this.Parser),V8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=eN(t),l=r.parse(a);r.run(l,a,function(c,d,f){if(c||!d||!f)return u(c);const h=d,p=r.stringify(h,f);qst(p)?f.value=p:f.result=p,u(c,f)});function u(c,d){c||!d?o(c):s?s(d):n(void 0,d)}}}processSync(t){let n=!1,r;return this.freeze(),U8("processSync",this.parser||this.Parser),V8("processSync",this.compiler||this.Compiler),this.process(t,i),Mue("processSync","process",n),r;function i(s,o){n=!0,Cue(s),r=o}}run(t,n,r){Due(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const l=eN(n);i.run(t,l,u);function u(c,d,f){const h=d||t;c?a(c):o?o(h):r(void 0,h,f)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Mue("runSync","run",r),i;function s(o,a){Cue(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=eN(n),i=this.compiler||this.Compiler;return V8("stringify",i),Due(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(H8("use",this.frozen),t!=null)if(typeof t=="function")l(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(u){if(typeof u=="function")l(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...d]=u;l(c,d)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(u.plugins),u.settings&&(i.settings=F8(!0,i.settings,u.settings))}function a(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const d=u[c];s(d)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function l(u,c){let d=-1,f=-1;for(;++d<r.length;)if(r[d][0]===u){f=d;break}if(f===-1)r.push([u,...c]);else if(c.length>0){let[h,...p]=c;const m=r[f][1];EU(m)&&EU(h)&&(h=F8(!0,m,h)),r[f]=[u,h,...p]}}}}const Vst=new dX().freeze();function U8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function V8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function H8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Due(e){if(!EU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Mue(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function eN(e){return Hst(e)?e:new RSe(e)}function Hst(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function qst(e){return typeof e=="string"||Wst(e)}function Wst(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Gst="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",$ue=[],Lue={allowDangerousHtml:!0},Yst=/^(https?|ircs?|mailto|xmpp)$/i,Kst=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Xst(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||$ue,l=e.remarkPlugins||$ue,u=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Lue}:Lue,c=e.skipHtml,d=e.unwrapDisallowed,f=e.urlTransform||Qst,h=Vst().use(Pit).use(l).use(Cst,u).use(a),p=new RSe;typeof r=="string"&&(p.value=r);for(const b of Kst)Object.hasOwn(e,b.from)&&(""+b.from+(b.to?"use `"+b.to+"` instead":"remove it")+Gst+b.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),cX(g,y),unt(g,{Fragment:v.Fragment,components:s,ignoreInvalidStyle:!0,jsx:v.jsx,jsxs:v.jsxs,passKeys:!0,passNode:!0});function y(b,_,w){if(b.type==="raw"&&w&&typeof _=="number")return c?w.children.splice(_,1):w.children[_]={type:"text",value:b.value},_;if(b.type==="element"){let E;for(E in M8)if(Object.hasOwn(M8,E)&&Object.hasOwn(b.properties,E)){const x=b.properties[E],S=M8[E];(S===null||S.includes(b.tagName))&&(b.properties[E]=f(String(x||""),E,b))}}if(b.type==="element"){let E=t?!t.includes(b.tagName):o?o.includes(b.tagName):!1;if(!E&&n&&typeof _=="number"&&(E=!n(b,_,w)),E&&w&&typeof _=="number")return d&&b.children?w.children.splice(_,1,...b.children):w.children.splice(_,1),_}}}function Qst(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Yst.test(e.slice(0,t))?e:""}const Fue=/[#.]/g;function Jst(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Fue.lastIndex=i;const a=Fue.exec(n),l=n.slice(i,a?a.index:n.length);l&&(s?s==="#"?r.id=l:Array.isArray(r.className)?r.className.push(l):r.className=[l]:o=l,i+=l.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Zst=new Set(["button","menu","reset","submit"]),SU={}.hasOwnProperty;function PSe(e,t,n){const r=n&&rot(n);function i(s,o,...a){let l=-1,u;if(s==null){u={type:"root",children:[]};const c=o;a.unshift(c)}else if(u=Jst(s,t),u.tagName=u.tagName.toLowerCase(),r&&SU.call(r,u.tagName)&&(u.tagName=r[u.tagName]),eot(o,u.tagName)){let c;for(c in o)SU.call(o,c)&&tot(e,u.properties,c,o[c])}else a.unshift(o);for(;++l<a.length;)TU(u.children,a[l]);return u.type==="element"&&u.tagName==="template"&&(u.content={type:"root",children:u.children},u.children=[]),u}return i}function eot(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Zst.has(e.type.toLowerCase()):!("value"in e)}function tot(e,t,n,r){const i=qF(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Qle(r):i.commaSeparated?o=Wle(r):i.commaOrSpaceSeparated?o=Qle(Wle(r).join(" ")):o=jue(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?not(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const l=jue(i,i.property,o[s]);a[s]=l}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function TU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)TU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?TU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function jue(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||YA(n)===YA(t)))return!0}return n}function not(e){const t=[];let n;for(n in e)SU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function rot(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const iot=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],sot=PSe(Lk,"div"),oot=PSe(Ky,"g",iot),q8=/\r?\n|\r/g;function aot(e){const t=String(e),n=[];for(q8.lastIndex=0;q8.test(t);)n.push(q8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const l=(n[o-2]||0)+a-1||0;if(l>-1&&l<n[n.length-1])return l}}}const b1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},NSe={}.hasOwnProperty,lot=Object.prototype;function uot(e,t){const n=t||{};return fX({file:n.file||void 0,location:!1,schema:n.space==="svg"?Ky:Lk,verbose:n.verbose||!1},e)}function fX(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},GO(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:OSe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=aot(s),a=o.toPoint(0),l=o.toPoint(s.length);n.position={start:a,end:l}}return n}case"#documentType":{const r=t;return n={type:"doctype"},GO(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},GO(e,r,n),n}default:return n=cot(e,t),n}}function OSe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=fX(e,t[n]);r.push(i)}return r}function cot(e,t){const n=e.schema;e.schema=t.namespaceURI===b1.svg?Ky:Lk;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],l=(a.prefix?a.prefix+":":"")+a.name;NSe.call(lot,l)||(i[l]=a.value)}const o=(e.schema.space==="svg"?oot:sot)(t.tagName,i,OSe(e,t.childNodes));if(GO(e,t,o),o.tagName==="template"){const a=t,l=a.sourceCodeLocation,u=l&&l.startTag&&Nw(l.startTag),c=l&&l.endTag&&Nw(l.endTag),d=fX(e,a.content);u&&c&&e.file&&(d.position={start:u.end,end:c.start}),o.content=d}return e.schema=n,o}function GO(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=dot(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function dot(e,t,n){const r=Nw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)NSe.call(n.attrs,o)&&(s[qF(e.schema,o).property]=Nw(n.attrs[o]));n.startTag;const a=Nw(n.startTag),l=n.endTag?Nw(n.endTag):void 0,u={opening:a};l&&(u.closing=l),u.properties=s,t.data={position:u}}}return r}function Nw(e){const t=Bue({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Bue({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Bue(e){return e.line&&e.column?e:void 0}const zue={}.hasOwnProperty;function DSe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&zue.call(i,e)){const l=String(i[e]);o=zue.call(a,l)?a[l]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const fot={},hot={}.hasOwnProperty,MSe=DSe("type",{handlers:{root:mot,element:_ot,text:vot,comment:bot,doctype:yot}});function pot(e,t){const r=(t||fot).space;return MSe(e,r==="svg"?Ky:Lk)}function mot(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=hX(e.children,n,t),mS(e,n),n}function got(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=hX(e.children,n,t),mS(e,n),n}function yot(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return mS(e,t),t}function vot(e){const t={nodeName:"#text",value:e.value,parentNode:null};return mS(e,t),t}function bot(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return mS(e,t),t}function _ot(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Ky);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&hot.call(e.properties,s)){const l=wot(r,s,e.properties[s]);l&&i.push(l)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:b1[o],childNodes:[],parentNode:null};return a.childNodes=hX(e.children,a,r),mS(e,a),e.tagName==="template"&&e.content&&(a.content=got(e.content,r)),a}function wot(e,t,n){const r=qF(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Gxe(n):nSe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=b1[r.space]}return i}function hX(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=MSe(e[r],n);s.parentNode=t,i.push(s)}return i}function mS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Eot=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],xot=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),Ni="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const Al={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function $Se(e){return e>=55296&&e<=57343}function Sot(e){return e>=56320&&e<=57343}function Tot(e,t){return(e-55296)*1024+9216+t}function LSe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function FSe(e){return e>=64976&&e<=65007||xot.has(e)}var De;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(De=De||(De={}));const Cot=65536;class Aot{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Cot,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Sot(n))return this.pos++,this._addGap(),Tot(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(De.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,$Se(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){LSe(t)?this._err(De.controlCharacterInInputStream):FSe(t)&&this._err(De.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Fn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Fn=Fn||(Fn={}));function jSe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const $g=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Iot=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var W8;const kot=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Rot=(W8=String.fromCodePoint)!==null&&W8!==void 0?W8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Pot(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=kot.get(e))!==null&&t!==void 0?t:e}var mo;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(mo||(mo={}));const Not=32;var wh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(wh||(wh={}));function CU(e){return e>=mo.ZERO&&e<=mo.NINE}function Oot(e){return e>=mo.UPPER_A&&e<=mo.UPPER_F||e>=mo.LOWER_A&&e<=mo.LOWER_F}function Dot(e){return e>=mo.UPPER_A&&e<=mo.UPPER_Z||e>=mo.LOWER_A&&e<=mo.LOWER_Z||CU(e)}function Mot(e){return e===mo.EQUALS||Dot(e)}var co;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(co||(co={}));var r1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(r1||(r1={}));class $ot{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=co.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=r1.Strict}startEntity(t){this.decodeMode=t,this.state=co.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case co.EntityStart:return t.charCodeAt(n)===mo.NUM?(this.state=co.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=co.NamedEntity,this.stateNamedEntity(t,n));case co.NumericStart:return this.stateNumericStart(t,n);case co.NumericDecimal:return this.stateNumericDecimal(t,n);case co.NumericHex:return this.stateNumericHex(t,n);case co.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Not)===mo.LOWER_X?(this.state=co.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=co.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(CU(i)||Oot(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(CU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===mo.SEMI)this.consumed+=1;else if(this.decodeMode===r1.Strict)return 0;return this.emitCodePoint(Pot(this.result),this.consumed),this.errors&&(t!==mo.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&wh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=zSe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===r1.Attribute&&(s===0||Mot(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&wh.VALUE_LENGTH)>>14,s!==0){if(o===mo.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==r1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&wh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~wh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case co.NamedEntity:return this.result!==0&&(this.decodeMode!==r1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case co.NumericDecimal:return this.emitNumericEntity(0,2);case co.NumericHex:return this.emitNumericEntity(0,3);case co.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case co.EntityStart:return 0}}}function BSe(e){let t="";const n=new $ot(e,r=>t+=Rot(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const u=n.write(i,a+1);if(u<0){o=a+n.end();break}o=a+u,a=u===0?o+1:o}const l=t+i.slice(o);return t="",l}}function zSe(e,t,n,r){const i=(t&wh.BRANCH_LENGTH)>>7,s=t&wh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const l=r-s;return l<0||l>=i?-1:e[n+l]-1}let o=n,a=o+i-1;for(;o<=a;){const l=o+a>>>1,u=e[l];if(u<r)o=l+1;else if(u>r)a=l-1;else return e[l+i]}return-1}BSe($g);BSe(Iot);var qe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(qe=qe||(qe={}));var L0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(L0=L0||(L0={}));var Iu;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(Iu=Iu||(Iu={}));var Ce;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ce=Ce||(Ce={}));var N;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(N=N||(N={}));const Lot=new Map([[Ce.A,N.A],[Ce.ADDRESS,N.ADDRESS],[Ce.ANNOTATION_XML,N.ANNOTATION_XML],[Ce.APPLET,N.APPLET],[Ce.AREA,N.AREA],[Ce.ARTICLE,N.ARTICLE],[Ce.ASIDE,N.ASIDE],[Ce.B,N.B],[Ce.BASE,N.BASE],[Ce.BASEFONT,N.BASEFONT],[Ce.BGSOUND,N.BGSOUND],[Ce.BIG,N.BIG],[Ce.BLOCKQUOTE,N.BLOCKQUOTE],[Ce.BODY,N.BODY],[Ce.BR,N.BR],[Ce.BUTTON,N.BUTTON],[Ce.CAPTION,N.CAPTION],[Ce.CENTER,N.CENTER],[Ce.CODE,N.CODE],[Ce.COL,N.COL],[Ce.COLGROUP,N.COLGROUP],[Ce.DD,N.DD],[Ce.DESC,N.DESC],[Ce.DETAILS,N.DETAILS],[Ce.DIALOG,N.DIALOG],[Ce.DIR,N.DIR],[Ce.DIV,N.DIV],[Ce.DL,N.DL],[Ce.DT,N.DT],[Ce.EM,N.EM],[Ce.EMBED,N.EMBED],[Ce.FIELDSET,N.FIELDSET],[Ce.FIGCAPTION,N.FIGCAPTION],[Ce.FIGURE,N.FIGURE],[Ce.FONT,N.FONT],[Ce.FOOTER,N.FOOTER],[Ce.FOREIGN_OBJECT,N.FOREIGN_OBJECT],[Ce.FORM,N.FORM],[Ce.FRAME,N.FRAME],[Ce.FRAMESET,N.FRAMESET],[Ce.H1,N.H1],[Ce.H2,N.H2],[Ce.H3,N.H3],[Ce.H4,N.H4],[Ce.H5,N.H5],[Ce.H6,N.H6],[Ce.HEAD,N.HEAD],[Ce.HEADER,N.HEADER],[Ce.HGROUP,N.HGROUP],[Ce.HR,N.HR],[Ce.HTML,N.HTML],[Ce.I,N.I],[Ce.IMG,N.IMG],[Ce.IMAGE,N.IMAGE],[Ce.INPUT,N.INPUT],[Ce.IFRAME,N.IFRAME],[Ce.KEYGEN,N.KEYGEN],[Ce.LABEL,N.LABEL],[Ce.LI,N.LI],[Ce.LINK,N.LINK],[Ce.LISTING,N.LISTING],[Ce.MAIN,N.MAIN],[Ce.MALIGNMARK,N.MALIGNMARK],[Ce.MARQUEE,N.MARQUEE],[Ce.MATH,N.MATH],[Ce.MENU,N.MENU],[Ce.META,N.META],[Ce.MGLYPH,N.MGLYPH],[Ce.MI,N.MI],[Ce.MO,N.MO],[Ce.MN,N.MN],[Ce.MS,N.MS],[Ce.MTEXT,N.MTEXT],[Ce.NAV,N.NAV],[Ce.NOBR,N.NOBR],[Ce.NOFRAMES,N.NOFRAMES],[Ce.NOEMBED,N.NOEMBED],[Ce.NOSCRIPT,N.NOSCRIPT],[Ce.OBJECT,N.OBJECT],[Ce.OL,N.OL],[Ce.OPTGROUP,N.OPTGROUP],[Ce.OPTION,N.OPTION],[Ce.P,N.P],[Ce.PARAM,N.PARAM],[Ce.PLAINTEXT,N.PLAINTEXT],[Ce.PRE,N.PRE],[Ce.RB,N.RB],[Ce.RP,N.RP],[Ce.RT,N.RT],[Ce.RTC,N.RTC],[Ce.RUBY,N.RUBY],[Ce.S,N.S],[Ce.SCRIPT,N.SCRIPT],[Ce.SECTION,N.SECTION],[Ce.SELECT,N.SELECT],[Ce.SOURCE,N.SOURCE],[Ce.SMALL,N.SMALL],[Ce.SPAN,N.SPAN],[Ce.STRIKE,N.STRIKE],[Ce.STRONG,N.STRONG],[Ce.STYLE,N.STYLE],[Ce.SUB,N.SUB],[Ce.SUMMARY,N.SUMMARY],[Ce.SUP,N.SUP],[Ce.TABLE,N.TABLE],[Ce.TBODY,N.TBODY],[Ce.TEMPLATE,N.TEMPLATE],[Ce.TEXTAREA,N.TEXTAREA],[Ce.TFOOT,N.TFOOT],[Ce.TD,N.TD],[Ce.TH,N.TH],[Ce.THEAD,N.THEAD],[Ce.TITLE,N.TITLE],[Ce.TR,N.TR],[Ce.TRACK,N.TRACK],[Ce.TT,N.TT],[Ce.U,N.U],[Ce.UL,N.UL],[Ce.SVG,N.SVG],[Ce.VAR,N.VAR],[Ce.WBR,N.WBR],[Ce.XMP,N.XMP]]);function gS(e){var t;return(t=Lot.get(e))!==null&&t!==void 0?t:N.UNKNOWN}const it=N,Fot={[qe.HTML]:new Set([it.ADDRESS,it.APPLET,it.AREA,it.ARTICLE,it.ASIDE,it.BASE,it.BASEFONT,it.BGSOUND,it.BLOCKQUOTE,it.BODY,it.BR,it.BUTTON,it.CAPTION,it.CENTER,it.COL,it.COLGROUP,it.DD,it.DETAILS,it.DIR,it.DIV,it.DL,it.DT,it.EMBED,it.FIELDSET,it.FIGCAPTION,it.FIGURE,it.FOOTER,it.FORM,it.FRAME,it.FRAMESET,it.H1,it.H2,it.H3,it.H4,it.H5,it.H6,it.HEAD,it.HEADER,it.HGROUP,it.HR,it.HTML,it.IFRAME,it.IMG,it.INPUT,it.LI,it.LINK,it.LISTING,it.MAIN,it.MARQUEE,it.MENU,it.META,it.NAV,it.NOEMBED,it.NOFRAMES,it.NOSCRIPT,it.OBJECT,it.OL,it.P,it.PARAM,it.PLAINTEXT,it.PRE,it.SCRIPT,it.SECTION,it.SELECT,it.SOURCE,it.STYLE,it.SUMMARY,it.TABLE,it.TBODY,it.TD,it.TEMPLATE,it.TEXTAREA,it.TFOOT,it.TH,it.THEAD,it.TITLE,it.TR,it.TRACK,it.UL,it.WBR,it.XMP]),[qe.MATHML]:new Set([it.MI,it.MO,it.MN,it.MS,it.MTEXT,it.ANNOTATION_XML]),[qe.SVG]:new Set([it.TITLE,it.FOREIGN_OBJECT,it.DESC]),[qe.XLINK]:new Set,[qe.XML]:new Set,[qe.XMLNS]:new Set};function USe(e){return e===it.H1||e===it.H2||e===it.H3||e===it.H4||e===it.H5||e===it.H6}Ce.STYLE,Ce.SCRIPT,Ce.XMP,Ce.IFRAME,Ce.NOEMBED,Ce.NOFRAMES,Ce.PLAINTEXT;const jot=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var Z;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(Z||(Z={}));const ws={DATA:Z.DATA,RCDATA:Z.RCDATA,RAWTEXT:Z.RAWTEXT,SCRIPT_DATA:Z.SCRIPT_DATA,PLAINTEXT:Z.PLAINTEXT,CDATA_SECTION:Z.CDATA_SECTION};function D2(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function AC(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Bot(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Lg(e){return Bot(e)||AC(e)}function AU(e){return Lg(e)||D2(e)}function VSe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function HSe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function zot(e){return D2(e)||VSe(e)||HSe(e)}function tN(e){return e+32}function qSe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Uot(e){return e===X.EQUALS_SIGN||AU(e)}function Uue(e){return qSe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Vot{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=Z.DATA,this.returnState=Z.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Aot(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Fn.START_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Fn.END_TAG,tagName:"",tagID:N.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Fn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Fn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(jSe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(De.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=gS(t.tagName),t.type===Fn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(De.endTagWithAttributes),t.selfClosing&&this._err(De.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Fn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Fn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Fn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Fn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=qSe(t)?Fn.WHITESPACE_CHARACTER:t===X.NULL?Fn.NULL_CHARACTER:Fn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Fn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=$g[0];s>=0&&(s=zSe($g,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=$g[s];const a=o&wh.VALUE_LENGTH;if(a){const l=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Uot(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=l):(n=l===0?[$g[s]&~wh.VALUE_LENGTH]:l===1?[$g[++s]]:[$g[++s],$g[++s]],r=0,i=t!==X.SEMICOLON),l===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(De.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===Z.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case Z.DATA:{this._stateData(t);break}case Z.RCDATA:{this._stateRcdata(t);break}case Z.RAWTEXT:{this._stateRawtext(t);break}case Z.SCRIPT_DATA:{this._stateScriptData(t);break}case Z.PLAINTEXT:{this._statePlaintext(t);break}case Z.TAG_OPEN:{this._stateTagOpen(t);break}case Z.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case Z.TAG_NAME:{this._stateTagName(t);break}case Z.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case Z.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case Z.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case Z.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case Z.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case Z.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case Z.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case Z.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case Z.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case Z.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case Z.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case Z.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case Z.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case Z.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case Z.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case Z.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case Z.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case Z.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case Z.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case Z.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case Z.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case Z.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case Z.BOGUS_COMMENT:{this._stateBogusComment(t);break}case Z.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case Z.COMMENT_START:{this._stateCommentStart(t);break}case Z.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case Z.COMMENT:{this._stateComment(t);break}case Z.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case Z.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case Z.COMMENT_END:{this._stateCommentEnd(t);break}case Z.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case Z.DOCTYPE:{this._stateDoctype(t);break}case Z.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case Z.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case Z.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case Z.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case Z.CDATA_SECTION:{this._stateCdataSection(t);break}case Z.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case Z.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case Z.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case Z.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case Z.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case Z.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case Z.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case Z.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case Z.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=Z.DATA,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=Z.RCDATA,this.state=Z.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=Z.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Ni);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Ni);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Ni);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Ni);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Lg(t))this._createStartTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=Z.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=Z.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(De.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(De.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(De.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=Z.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Lg(t))this._createEndTagToken(),this.state=Z.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(De.missingEndTagName),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(De.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.tagName+=Ni;break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(AC(t)?tN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=Z.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Lg(t)?(this.state=Z.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=Z.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=Z.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=Z.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=Z.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Lg(t)?(this.state=Z.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=Z.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=Z.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Lg(t)?(this.state=Z.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=Z.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Ni);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Ni);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_ESCAPED,this._emitChars(Ni);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Lg(t)?(this._emitChars("<"),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Lg(t)?(this.state=Z.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(Al.SCRIPT,!1)&&Uue(this.preprocessor.peek(Al.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Al.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this._emitChars(Ni);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ni);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=Z.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(Ni);break}case X.EOF:{this._err(De.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(Al.SCRIPT,!1)&&Uue(this.preprocessor.peek(Al.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<Al.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=Z.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=Z.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(De.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=Z.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=Z.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(De.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.name+=Ni;break}default:this.currentAttr.name+=String.fromCodePoint(AC(t)?tN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=Z.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=Z.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=Z.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingAttributeValue),this.state=Z.DATA,this.emitCurrentTagToken();break}default:this.state=Z.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.value+=Ni;break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.value+=Ni;break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=Z.ATTRIBUTE_VALUE_UNQUOTED,this.state=Z.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(De.unexpectedNullCharacter),this.currentAttr.value+=Ni;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(De.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=Z.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=Z.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this._err(De.missingWhitespaceBetweenAttributes),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=Z.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(De.eofInTag),this._emitEOFToken();break}default:this._err(De.unexpectedSolidusInTag),this.state=Z.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.data+=Ni;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(Al.DASH_DASH,!0)?(this._createCommentToken(Al.DASH_DASH.length+1),this.state=Z.COMMENT_START):this._consumeSequenceIfMatch(Al.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(Al.DOCTYPE.length+1),this.state=Z.DOCTYPE):this._consumeSequenceIfMatch(Al.CDATA_START,!0)?this.inForeignNode?this.state=Z.CDATA_SECTION:(this._err(De.cdataInHtmlContent),this._createCommentToken(Al.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=Z.BOGUS_COMMENT):this._ensureHibernation()||(this._err(De.incorrectlyOpenedComment),this._createCommentToken(2),this.state=Z.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptClosingOfEmptyComment),this.state=Z.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptClosingOfEmptyComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=Z.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.data+=Ni;break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=Z.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=Z.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=Z.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=Z.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(De.nestedComment),this.state=Z.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=Z.COMMENT_END;break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=Z.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=Z.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=Z.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(De.incorrectlyClosedComment),this.state=Z.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(De.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=Z.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(De.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingWhitespaceBeforeDoctypeName),this.state=Z.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(AC(t))this._createDoctypeToken(String.fromCharCode(tN(t))),this.state=Z.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(De.unexpectedNullCharacter),this._createDoctypeToken(Ni),this.state=Z.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=Z.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.name+=Ni;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(AC(t)?tN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(Al.PUBLIC,!1)?this.state=Z.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(Al.SYSTEM,!1)?this.state=Z.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(De.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(De.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(De.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=Z.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.publicId+=Ni;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.publicId+=Ni;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(De.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(De.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=Z.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(De.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(De.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=Z.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(De.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.systemId+=Ni;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=Z.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(De.unexpectedNullCharacter),n.systemId+=Ni;break}case X.GREATER_THAN_SIGN:{this._err(De.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.EOF:{this._err(De.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(De.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=Z.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=Z.DATA;break}case X.NULL:{this._err(De.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=Z.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(De.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=Z.CDATA_SECTION_END:(this._emitChars("]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=Z.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=Z.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=Z.NUMERIC_CHARACTER_REFERENCE:AU(t)?(this.state=Z.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=Z.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){AU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(De.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE_START:D2(t)?(this.state=Z.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(De.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){zot(t)?(this.state=Z.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(De.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){VSe(t)?this.charRefCode=this.charRefCode*16+t-55:HSe(t)?this.charRefCode=this.charRefCode*16+t-87:D2(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(De.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){D2(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=Z.NUMERIC_CHARACTER_REFERENCE_END:(this._err(De.missingSemicolonAfterCharacterReference),this.state=Z.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(De.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(De.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if($Se(this.charRefCode))this._err(De.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(FSe(this.charRefCode))this._err(De.noncharacterCharacterReference);else if(LSe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(De.controlCharacterReference);const n=jot.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const WSe=new Set([N.DD,N.DT,N.LI,N.OPTGROUP,N.OPTION,N.P,N.RB,N.RP,N.RT,N.RTC]),Vue=new Set([...WSe,N.CAPTION,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]),nN=new Map([[N.APPLET,qe.HTML],[N.CAPTION,qe.HTML],[N.HTML,qe.HTML],[N.MARQUEE,qe.HTML],[N.OBJECT,qe.HTML],[N.TABLE,qe.HTML],[N.TD,qe.HTML],[N.TEMPLATE,qe.HTML],[N.TH,qe.HTML],[N.ANNOTATION_XML,qe.MATHML],[N.MI,qe.MATHML],[N.MN,qe.MATHML],[N.MO,qe.MATHML],[N.MS,qe.MATHML],[N.MTEXT,qe.MATHML],[N.DESC,qe.SVG],[N.FOREIGN_OBJECT,qe.SVG],[N.TITLE,qe.SVG]]),Hot=[N.H1,N.H2,N.H3,N.H4,N.H5,N.H6],qot=[N.TR,N.TEMPLATE,N.HTML],Wot=[N.TBODY,N.TFOOT,N.THEAD,N.TEMPLATE,N.HTML],Got=[N.TABLE,N.TEMPLATE,N.HTML],Yot=[N.TD,N.TH];class Kot{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=N.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===N.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===qe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==qe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Hot,qe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Yot,qe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Got,qe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Wot,qe.HTML)}clearBackToTableRowContext(){this.clearBackTo(qot,qe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===N.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===N.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===qe.HTML)return!0;if(nN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(USe(n)&&r===qe.HTML)return!0;if(nN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===qe.HTML)return!0;if((r===N.UL||r===N.OL)&&i===qe.HTML||nN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===qe.HTML)return!0;if(r===N.BUTTON&&i===qe.HTML||nN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===qe.HTML){if(r===t)return!0;if(r===N.TABLE||r===N.TEMPLATE||r===N.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===qe.HTML){if(n===N.TBODY||n===N.THEAD||n===N.TFOOT)return!0;if(n===N.TABLE||n===N.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===qe.HTML){if(r===t)return!0;if(r!==N.OPTION&&r!==N.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;WSe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Vue.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Vue.has(this.currentTagId);)this.pop()}}const G8=3;var jd;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(jd=jd||(jd={}));const Hue={type:jd.Marker};class Xot{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const l=this.entries[a];if(l.type===jd.Marker)break;const{element:u}=l;if(this.treeAdapter.getTagName(u)===s&&this.treeAdapter.getNamespaceURI(u)===o){const c=this.treeAdapter.getAttrList(u);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<G8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<G8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(l=>i.get(l.name)===l.value)&&(s+=1,s>=G8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Hue)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:jd.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:jd.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Hue);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===jd.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===jd.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===jd.Element&&n.element===t)}}function que(e){return{nodeName:"#text",value:e,parentNode:null}}const nw={createDocument(){return{nodeName:"#document",mode:Iu.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};nw.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(nw.isTextNode(n)){n.value+=t;return}}nw.appendChild(e,que(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&nw.isTextNode(r)?r.value+=t:nw.insertBefore(e,que(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},GSe="html",Qot="about:legacy-compat",Jot="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",YSe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Zot=[...YSe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],eat=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),KSe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],tat=[...KSe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Wue(e,t){return t.some(n=>e.startsWith(n))}function nat(e){return e.name===GSe&&e.publicId===null&&(e.systemId===null||e.systemId===Qot)}function rat(e){if(e.name!==GSe)return Iu.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Jot)return Iu.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),eat.has(n))return Iu.QUIRKS;let r=t===null?Zot:YSe;if(Wue(n,r))return Iu.QUIRKS;if(r=t===null?KSe:tat,Wue(n,r))return Iu.LIMITED_QUIRKS}return Iu.NO_QUIRKS}const Gue={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},iat="definitionurl",sat="definitionURL",oat=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),aat=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:qe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:qe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:qe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:qe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:qe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:qe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:qe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:qe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:qe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:qe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:qe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:qe.XMLNS}]]),lat=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),uat=new Set([N.B,N.BIG,N.BLOCKQUOTE,N.BODY,N.BR,N.CENTER,N.CODE,N.DD,N.DIV,N.DL,N.DT,N.EM,N.EMBED,N.H1,N.H2,N.H3,N.H4,N.H5,N.H6,N.HEAD,N.HR,N.I,N.IMG,N.LI,N.LISTING,N.MENU,N.META,N.NOBR,N.OL,N.P,N.PRE,N.RUBY,N.S,N.SMALL,N.SPAN,N.STRONG,N.STRIKE,N.SUB,N.SUP,N.TABLE,N.TT,N.U,N.UL,N.VAR]);function cat(e){const t=e.tagID;return t===N.FONT&&e.attrs.some(({name:r})=>r===L0.COLOR||r===L0.SIZE||r===L0.FACE)||uat.has(t)}function XSe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===iat){e.attrs[t].name=sat;break}}function QSe(e){for(let t=0;t<e.attrs.length;t++){const n=oat.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function pX(e){for(let t=0;t<e.attrs.length;t++){const n=aat.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function dat(e){const t=lat.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=gS(e.tagName))}function fat(e,t){return t===qe.MATHML&&(e===N.MI||e===N.MO||e===N.MN||e===N.MS||e===N.MTEXT)}function hat(e,t,n){if(t===qe.MATHML&&e===N.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===L0.ENCODING){const i=n[r].value.toLowerCase();return i===Gue.TEXT_HTML||i===Gue.APPLICATION_XML}}return t===qe.SVG&&(e===N.FOREIGN_OBJECT||e===N.DESC||e===N.TITLE)}function pat(e,t,n,r){return(!r||r===qe.HTML)&&hat(e,t,n)||(!r||r===qe.MATHML)&&fat(e,t)}const mat="hidden",gat=8,yat=3;var ae;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ae||(ae={}));const vat={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},JSe=new Set([N.TABLE,N.TBODY,N.TFOOT,N.THEAD,N.TR]),Yue={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:nw,onParseError:null};let Kue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ae.INITIAL,this.originalInsertionMode=ae.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Yue,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Vot(this.options,this),this.activeFormattingElements=new Xot(this.treeAdapter),this.fragmentContextID=r?gS(this.treeAdapter.getTagName(r)):N.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Kot(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Yue,...n};t??(t=r.treeAdapter.createElement(Ce.TEMPLATE,qe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",qe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===N.TEMPLATE&&s.tmplInsertionModeStack.unshift(ae.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:vat,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===qe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,qe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ae.TEXT}switchToPlaintextParsing(){this.insertionMode=ae.TEXT,this.originalInsertionMode=ae.IN_BODY,this.tokenizer.state=ws.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ce.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==qe.HTML))switch(this.fragmentContextID){case N.TITLE:case N.TEXTAREA:{this.tokenizer.state=ws.RCDATA;break}case N.STYLE:case N.XMP:case N.IFRAME:case N.NOEMBED:case N.NOFRAMES:case N.NOSCRIPT:{this.tokenizer.state=ws.RAWTEXT;break}case N.SCRIPT:{this.tokenizer.state=ws.SCRIPT_DATA;break}case N.PLAINTEXT:{this.tokenizer.state=ws.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,qe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,qe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ce.HTML,qe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,N.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:l,endCol:u,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:l,endCol:u,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Fn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===N.SVG&&this.treeAdapter.getTagName(n)===Ce.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===qe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===N.MGLYPH||t.tagID===N.MALIGNMARK)&&!this._isIntegrationPoint(r,n,qe.HTML)}_processToken(t){switch(t.type){case Fn.CHARACTER:{this.onCharacter(t);break}case Fn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Fn.COMMENT:{this.onComment(t);break}case Fn.DOCTYPE:{this.onDoctype(t);break}case Fn.START_TAG:{this._processStartTag(t);break}case Fn.END_TAG:{this.onEndTag(t);break}case Fn.EOF:{this.onEof(t);break}case Fn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return pat(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===jd.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ae.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(N.P),this.openElements.popUntilTagNamePopped(N.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case N.TR:{this.insertionMode=ae.IN_ROW;return}case N.TBODY:case N.THEAD:case N.TFOOT:{this.insertionMode=ae.IN_TABLE_BODY;return}case N.CAPTION:{this.insertionMode=ae.IN_CAPTION;return}case N.COLGROUP:{this.insertionMode=ae.IN_COLUMN_GROUP;return}case N.TABLE:{this.insertionMode=ae.IN_TABLE;return}case N.BODY:{this.insertionMode=ae.IN_BODY;return}case N.FRAMESET:{this.insertionMode=ae.IN_FRAMESET;return}case N.SELECT:{this._resetInsertionModeForSelect(t);return}case N.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case N.HTML:{this.insertionMode=this.headElement?ae.AFTER_HEAD:ae.BEFORE_HEAD;return}case N.TD:case N.TH:{if(t>0){this.insertionMode=ae.IN_CELL;return}break}case N.HEAD:{if(t>0){this.insertionMode=ae.IN_HEAD;return}break}}this.insertionMode=ae.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===N.TEMPLATE)break;if(r===N.TABLE){this.insertionMode=ae.IN_SELECT_IN_TABLE;return}}this.insertionMode=ae.IN_SELECT}_isElementCausesFosterParenting(t){return JSe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case N.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===qe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case N.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Fot[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Ylt(this,t);return}switch(this.insertionMode){case ae.INITIAL:{PT(this,t);break}case ae.BEFORE_HTML:{M2(this,t);break}case ae.BEFORE_HEAD:{$2(this,t);break}case ae.IN_HEAD:{L2(this,t);break}case ae.IN_HEAD_NO_SCRIPT:{F2(this,t);break}case ae.AFTER_HEAD:{j2(this,t);break}case ae.IN_BODY:case ae.IN_CAPTION:case ae.IN_CELL:case ae.IN_TEMPLATE:{eTe(this,t);break}case ae.TEXT:case ae.IN_SELECT:case ae.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ae.IN_TABLE:case ae.IN_TABLE_BODY:case ae.IN_ROW:{Y8(this,t);break}case ae.IN_TABLE_TEXT:{oTe(this,t);break}case ae.IN_COLUMN_GROUP:{MM(this,t);break}case ae.AFTER_BODY:{$M(this,t);break}case ae.AFTER_AFTER_BODY:{YO(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Glt(this,t);return}switch(this.insertionMode){case ae.INITIAL:{PT(this,t);break}case ae.BEFORE_HTML:{M2(this,t);break}case ae.BEFORE_HEAD:{$2(this,t);break}case ae.IN_HEAD:{L2(this,t);break}case ae.IN_HEAD_NO_SCRIPT:{F2(this,t);break}case ae.AFTER_HEAD:{j2(this,t);break}case ae.TEXT:{this._insertCharacters(t);break}case ae.IN_TABLE:case ae.IN_TABLE_BODY:case ae.IN_ROW:{Y8(this,t);break}case ae.IN_COLUMN_GROUP:{MM(this,t);break}case ae.AFTER_BODY:{$M(this,t);break}case ae.AFTER_AFTER_BODY:{YO(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){IU(this,t);return}switch(this.insertionMode){case ae.INITIAL:case ae.BEFORE_HTML:case ae.BEFORE_HEAD:case ae.IN_HEAD:case ae.IN_HEAD_NO_SCRIPT:case ae.AFTER_HEAD:case ae.IN_BODY:case ae.IN_TABLE:case ae.IN_CAPTION:case ae.IN_COLUMN_GROUP:case ae.IN_TABLE_BODY:case ae.IN_ROW:case ae.IN_CELL:case ae.IN_SELECT:case ae.IN_SELECT_IN_TABLE:case ae.IN_TEMPLATE:case ae.IN_FRAMESET:case ae.AFTER_FRAMESET:{IU(this,t);break}case ae.IN_TABLE_TEXT:{NT(this,t);break}case ae.AFTER_BODY:{Tat(this,t);break}case ae.AFTER_AFTER_BODY:case ae.AFTER_AFTER_FRAMESET:{Cat(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ae.INITIAL:{Aat(this,t);break}case ae.BEFORE_HEAD:case ae.IN_HEAD:case ae.IN_HEAD_NO_SCRIPT:case ae.AFTER_HEAD:{this._err(t,De.misplacedDoctype);break}case ae.IN_TABLE_TEXT:{NT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,De.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Klt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ae.INITIAL:{PT(this,t);break}case ae.BEFORE_HTML:{Iat(this,t);break}case ae.BEFORE_HEAD:{Rat(this,t);break}case ae.IN_HEAD:{Mf(this,t);break}case ae.IN_HEAD_NO_SCRIPT:{Oat(this,t);break}case ae.AFTER_HEAD:{Mat(this,t);break}case ae.IN_BODY:{za(this,t);break}case ae.IN_TABLE:{WE(this,t);break}case ae.IN_TABLE_TEXT:{NT(this,t);break}case ae.IN_CAPTION:{Plt(this,t);break}case ae.IN_COLUMN_GROUP:{yX(this,t);break}case ae.IN_TABLE_BODY:{JF(this,t);break}case ae.IN_ROW:{ZF(this,t);break}case ae.IN_CELL:{Dlt(this,t);break}case ae.IN_SELECT:{uTe(this,t);break}case ae.IN_SELECT_IN_TABLE:{$lt(this,t);break}case ae.IN_TEMPLATE:{Flt(this,t);break}case ae.AFTER_BODY:{Blt(this,t);break}case ae.IN_FRAMESET:{zlt(this,t);break}case ae.AFTER_FRAMESET:{Vlt(this,t);break}case ae.AFTER_AFTER_BODY:{qlt(this,t);break}case ae.AFTER_AFTER_FRAMESET:{Wlt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Xlt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ae.INITIAL:{PT(this,t);break}case ae.BEFORE_HTML:{kat(this,t);break}case ae.BEFORE_HEAD:{Pat(this,t);break}case ae.IN_HEAD:{Nat(this,t);break}case ae.IN_HEAD_NO_SCRIPT:{Dat(this,t);break}case ae.AFTER_HEAD:{$at(this,t);break}case ae.IN_BODY:{QF(this,t);break}case ae.TEXT:{wlt(this,t);break}case ae.IN_TABLE:{XA(this,t);break}case ae.IN_TABLE_TEXT:{NT(this,t);break}case ae.IN_CAPTION:{Nlt(this,t);break}case ae.IN_COLUMN_GROUP:{Olt(this,t);break}case ae.IN_TABLE_BODY:{kU(this,t);break}case ae.IN_ROW:{lTe(this,t);break}case ae.IN_CELL:{Mlt(this,t);break}case ae.IN_SELECT:{cTe(this,t);break}case ae.IN_SELECT_IN_TABLE:{Llt(this,t);break}case ae.IN_TEMPLATE:{jlt(this,t);break}case ae.AFTER_BODY:{fTe(this,t);break}case ae.IN_FRAMESET:{Ult(this,t);break}case ae.AFTER_FRAMESET:{Hlt(this,t);break}case ae.AFTER_AFTER_BODY:{YO(this,t);break}}}onEof(t){switch(this.insertionMode){case ae.INITIAL:{PT(this,t);break}case ae.BEFORE_HTML:{M2(this,t);break}case ae.BEFORE_HEAD:{$2(this,t);break}case ae.IN_HEAD:{L2(this,t);break}case ae.IN_HEAD_NO_SCRIPT:{F2(this,t);break}case ae.AFTER_HEAD:{j2(this,t);break}case ae.IN_BODY:case ae.IN_TABLE:case ae.IN_CAPTION:case ae.IN_COLUMN_GROUP:case ae.IN_TABLE_BODY:case ae.IN_ROW:case ae.IN_CELL:case ae.IN_SELECT:case ae.IN_SELECT_IN_TABLE:{iTe(this,t);break}case ae.TEXT:{Elt(this,t);break}case ae.IN_TABLE_TEXT:{NT(this,t);break}case ae.IN_TEMPLATE:{dTe(this,t);break}case ae.AFTER_BODY:case ae.IN_FRAMESET:case ae.AFTER_FRAMESET:case ae.AFTER_AFTER_BODY:case ae.AFTER_AFTER_FRAMESET:{gX(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ae.IN_HEAD:case ae.IN_HEAD_NO_SCRIPT:case ae.AFTER_HEAD:case ae.TEXT:case ae.IN_COLUMN_GROUP:case ae.IN_SELECT:case ae.IN_SELECT_IN_TABLE:case ae.IN_FRAMESET:case ae.AFTER_FRAMESET:{this._insertCharacters(t);break}case ae.IN_BODY:case ae.IN_CAPTION:case ae.IN_CELL:case ae.IN_TEMPLATE:case ae.AFTER_BODY:case ae.AFTER_AFTER_BODY:case ae.AFTER_AFTER_FRAMESET:{ZSe(this,t);break}case ae.IN_TABLE:case ae.IN_TABLE_BODY:case ae.IN_ROW:{Y8(this,t);break}case ae.IN_TABLE_TEXT:{sTe(this,t);break}}}};function bat(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):rTe(e,t),n}function _at(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function wat(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),l=a&&s>=yat;!a||l?(l&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Eat(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Eat(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function xat(e,t,n){const r=e.treeAdapter.getTagName(t),i=gS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===N.TEMPLATE&&s===qe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Sat(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function mX(e,t){for(let n=0;n<gat;n++){const r=bat(e,t);if(!r)break;const i=_at(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=wat(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&xat(e,o,s),Sat(e,i,r)}}function IU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Tat(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Cat(e,t){e._appendCommentNode(t,e.document)}function gX(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Aat(e,t){e._setDocumentType(t);const n=t.forceQuirks?Iu.QUIRKS:rat(t);nat(t)||e._err(t,De.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ae.BEFORE_HTML}function PT(e,t){e._err(t,De.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,Iu.QUIRKS),e.insertionMode=ae.BEFORE_HTML,e._processToken(t)}function Iat(e,t){t.tagID===N.HTML?(e._insertElement(t,qe.HTML),e.insertionMode=ae.BEFORE_HEAD):M2(e,t)}function kat(e,t){const n=t.tagID;(n===N.HTML||n===N.HEAD||n===N.BODY||n===N.BR)&&M2(e,t)}function M2(e,t){e._insertFakeRootElement(),e.insertionMode=ae.BEFORE_HEAD,e._processToken(t)}function Rat(e,t){switch(t.tagID){case N.HTML:{za(e,t);break}case N.HEAD:{e._insertElement(t,qe.HTML),e.headElement=e.openElements.current,e.insertionMode=ae.IN_HEAD;break}default:$2(e,t)}}function Pat(e,t){const n=t.tagID;n===N.HEAD||n===N.BODY||n===N.HTML||n===N.BR?$2(e,t):e._err(t,De.endTagWithoutMatchingOpenElement)}function $2(e,t){e._insertFakeElement(Ce.HEAD,N.HEAD),e.headElement=e.openElements.current,e.insertionMode=ae.IN_HEAD,e._processToken(t)}function Mf(e,t){switch(t.tagID){case N.HTML:{za(e,t);break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:{e._appendElement(t,qe.HTML),t.ackSelfClosing=!0;break}case N.TITLE:{e._switchToTextParsing(t,ws.RCDATA);break}case N.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,ws.RAWTEXT):(e._insertElement(t,qe.HTML),e.insertionMode=ae.IN_HEAD_NO_SCRIPT);break}case N.NOFRAMES:case N.STYLE:{e._switchToTextParsing(t,ws.RAWTEXT);break}case N.SCRIPT:{e._switchToTextParsing(t,ws.SCRIPT_DATA);break}case N.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ae.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ae.IN_TEMPLATE);break}case N.HEAD:{e._err(t,De.misplacedStartTagForHeadElement);break}default:L2(e,t)}}function Nat(e,t){switch(t.tagID){case N.HEAD:{e.openElements.pop(),e.insertionMode=ae.AFTER_HEAD;break}case N.BODY:case N.BR:case N.HTML:{L2(e,t);break}case N.TEMPLATE:{Wb(e,t);break}default:e._err(t,De.endTagWithoutMatchingOpenElement)}}function Wb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==N.TEMPLATE&&e._err(t,De.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,De.endTagWithoutMatchingOpenElement)}function L2(e,t){e.openElements.pop(),e.insertionMode=ae.AFTER_HEAD,e._processToken(t)}function Oat(e,t){switch(t.tagID){case N.HTML:{za(e,t);break}case N.BASEFONT:case N.BGSOUND:case N.HEAD:case N.LINK:case N.META:case N.NOFRAMES:case N.STYLE:{Mf(e,t);break}case N.NOSCRIPT:{e._err(t,De.nestedNoscriptInHead);break}default:F2(e,t)}}function Dat(e,t){switch(t.tagID){case N.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ae.IN_HEAD;break}case N.BR:{F2(e,t);break}default:e._err(t,De.endTagWithoutMatchingOpenElement)}}function F2(e,t){const n=t.type===Fn.EOF?De.openElementsLeftAfterEof:De.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ae.IN_HEAD,e._processToken(t)}function Mat(e,t){switch(t.tagID){case N.HTML:{za(e,t);break}case N.BODY:{e._insertElement(t,qe.HTML),e.framesetOk=!1,e.insertionMode=ae.IN_BODY;break}case N.FRAMESET:{e._insertElement(t,qe.HTML),e.insertionMode=ae.IN_FRAMESET;break}case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{e._err(t,De.abandonedHeadElementChild),e.openElements.push(e.headElement,N.HEAD),Mf(e,t),e.openElements.remove(e.headElement);break}case N.HEAD:{e._err(t,De.misplacedStartTagForHeadElement);break}default:j2(e,t)}}function $at(e,t){switch(t.tagID){case N.BODY:case N.HTML:case N.BR:{j2(e,t);break}case N.TEMPLATE:{Wb(e,t);break}default:e._err(t,De.endTagWithoutMatchingOpenElement)}}function j2(e,t){e._insertFakeElement(Ce.BODY,N.BODY),e.insertionMode=ae.IN_BODY,XF(e,t)}function XF(e,t){switch(t.type){case Fn.CHARACTER:{eTe(e,t);break}case Fn.WHITESPACE_CHARACTER:{ZSe(e,t);break}case Fn.COMMENT:{IU(e,t);break}case Fn.START_TAG:{za(e,t);break}case Fn.END_TAG:{QF(e,t);break}case Fn.EOF:{iTe(e,t);break}}}function ZSe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function eTe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Lat(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Fat(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function jat(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,qe.HTML),e.insertionMode=ae.IN_FRAMESET)}function Bat(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,qe.HTML)}function zat(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),USe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,qe.HTML)}function Uat(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,qe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Vat(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,qe.HTML),n||(e.formElement=e.openElements.current))}function Hat(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===N.LI&&i===N.LI||(n===N.DD||n===N.DT)&&(i===N.DD||i===N.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==N.ADDRESS&&i!==N.DIV&&i!==N.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,qe.HTML)}function qat(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,qe.HTML),e.tokenizer.state=ws.PLAINTEXT}function Wat(e,t){e.openElements.hasInScope(N.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.framesetOk=!1}function Gat(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ce.A);n&&(mX(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Yat(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Kat(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(N.NOBR)&&(mX(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,qe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Xat(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function Qat(e,t){e.treeAdapter.getDocumentMode(e.document)!==Iu.QUIRKS&&e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._insertElement(t,qe.HTML),e.framesetOk=!1,e.insertionMode=ae.IN_TABLE}function tTe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,qe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function nTe(e){const t=jSe(e,L0.TYPE);return t!=null&&t.toLowerCase()===mat}function Jat(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,qe.HTML),nTe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Zat(e,t){e._appendElement(t,qe.HTML),t.ackSelfClosing=!0}function elt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._appendElement(t,qe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function tlt(e,t){t.tagName=Ce.IMG,t.tagID=N.IMG,tTe(e,t)}function nlt(e,t){e._insertElement(t,qe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=ws.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ae.TEXT}function rlt(e,t){e.openElements.hasInButtonScope(N.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,ws.RAWTEXT)}function ilt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,ws.RAWTEXT)}function Xue(e,t){e._switchToTextParsing(t,ws.RAWTEXT)}function slt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ae.IN_TABLE||e.insertionMode===ae.IN_CAPTION||e.insertionMode===ae.IN_TABLE_BODY||e.insertionMode===ae.IN_ROW||e.insertionMode===ae.IN_CELL?ae.IN_SELECT_IN_TABLE:ae.IN_SELECT}function olt(e,t){e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML)}function alt(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,qe.HTML)}function llt(e,t){e.openElements.hasInScope(N.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(N.RTC),e._insertElement(t,qe.HTML)}function ult(e,t){e._reconstructActiveFormattingElements(),XSe(t),pX(t),t.selfClosing?e._appendElement(t,qe.MATHML):e._insertElement(t,qe.MATHML),t.ackSelfClosing=!0}function clt(e,t){e._reconstructActiveFormattingElements(),QSe(t),pX(t),t.selfClosing?e._appendElement(t,qe.SVG):e._insertElement(t,qe.SVG),t.ackSelfClosing=!0}function Que(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,qe.HTML)}function za(e,t){switch(t.tagID){case N.I:case N.S:case N.B:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.SMALL:case N.STRIKE:case N.STRONG:{Yat(e,t);break}case N.A:{Gat(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{zat(e,t);break}case N.P:case N.DL:case N.OL:case N.UL:case N.DIV:case N.DIR:case N.NAV:case N.MAIN:case N.MENU:case N.ASIDE:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.DETAILS:case N.ADDRESS:case N.ARTICLE:case N.SECTION:case N.SUMMARY:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{Bat(e,t);break}case N.LI:case N.DD:case N.DT:{Hat(e,t);break}case N.BR:case N.IMG:case N.WBR:case N.AREA:case N.EMBED:case N.KEYGEN:{tTe(e,t);break}case N.HR:{elt(e,t);break}case N.RB:case N.RTC:{alt(e,t);break}case N.RT:case N.RP:{llt(e,t);break}case N.PRE:case N.LISTING:{Uat(e,t);break}case N.XMP:{rlt(e,t);break}case N.SVG:{clt(e,t);break}case N.HTML:{Lat(e,t);break}case N.BASE:case N.LINK:case N.META:case N.STYLE:case N.TITLE:case N.SCRIPT:case N.BGSOUND:case N.BASEFONT:case N.TEMPLATE:{Mf(e,t);break}case N.BODY:{Fat(e,t);break}case N.FORM:{Vat(e,t);break}case N.NOBR:{Kat(e,t);break}case N.MATH:{ult(e,t);break}case N.TABLE:{Qat(e,t);break}case N.INPUT:{Jat(e,t);break}case N.PARAM:case N.TRACK:case N.SOURCE:{Zat(e,t);break}case N.IMAGE:{tlt(e,t);break}case N.BUTTON:{Wat(e,t);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{Xat(e,t);break}case N.IFRAME:{ilt(e,t);break}case N.SELECT:{slt(e,t);break}case N.OPTION:case N.OPTGROUP:{olt(e,t);break}case N.NOEMBED:{Xue(e,t);break}case N.FRAMESET:{jat(e,t);break}case N.TEXTAREA:{nlt(e,t);break}case N.NOSCRIPT:{e.options.scriptingEnabled?Xue(e,t):Que(e,t);break}case N.PLAINTEXT:{qat(e,t);break}case N.COL:case N.TH:case N.TD:case N.TR:case N.HEAD:case N.FRAME:case N.TBODY:case N.TFOOT:case N.THEAD:case N.CAPTION:case N.COLGROUP:break;default:Que(e,t)}}function dlt(e,t){if(e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ae.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function flt(e,t){e.openElements.hasInScope(N.BODY)&&(e.insertionMode=ae.AFTER_BODY,fTe(e,t))}function hlt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function plt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(N.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(N.FORM):n&&e.openElements.remove(n))}function mlt(e){e.openElements.hasInButtonScope(N.P)||e._insertFakeElement(Ce.P,N.P),e._closePElement()}function glt(e){e.openElements.hasInListItemScope(N.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(N.LI),e.openElements.popUntilTagNamePopped(N.LI))}function ylt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function vlt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function blt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function _lt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ce.BR,N.BR),e.openElements.pop(),e.framesetOk=!1}function rTe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==N.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function QF(e,t){switch(t.tagID){case N.A:case N.B:case N.I:case N.S:case N.U:case N.EM:case N.TT:case N.BIG:case N.CODE:case N.FONT:case N.NOBR:case N.SMALL:case N.STRIKE:case N.STRONG:{mX(e,t);break}case N.P:{mlt(e);break}case N.DL:case N.UL:case N.OL:case N.DIR:case N.DIV:case N.NAV:case N.PRE:case N.MAIN:case N.MENU:case N.ASIDE:case N.BUTTON:case N.CENTER:case N.FIGURE:case N.FOOTER:case N.HEADER:case N.HGROUP:case N.DIALOG:case N.ADDRESS:case N.ARTICLE:case N.DETAILS:case N.SECTION:case N.SUMMARY:case N.LISTING:case N.FIELDSET:case N.BLOCKQUOTE:case N.FIGCAPTION:{hlt(e,t);break}case N.LI:{glt(e);break}case N.DD:case N.DT:{ylt(e,t);break}case N.H1:case N.H2:case N.H3:case N.H4:case N.H5:case N.H6:{vlt(e);break}case N.BR:{_lt(e);break}case N.BODY:{dlt(e,t);break}case N.HTML:{flt(e,t);break}case N.FORM:{plt(e);break}case N.APPLET:case N.OBJECT:case N.MARQUEE:{blt(e,t);break}case N.TEMPLATE:{Wb(e,t);break}default:rTe(e,t)}}function iTe(e,t){e.tmplInsertionModeStack.length>0?dTe(e,t):gX(e,t)}function wlt(e,t){var n;t.tagID===N.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Elt(e,t){e._err(t,De.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Y8(e,t){if(JSe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ae.IN_TABLE_TEXT,t.type){case Fn.CHARACTER:{oTe(e,t);break}case Fn.WHITESPACE_CHARACTER:{sTe(e,t);break}}else jk(e,t)}function xlt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,qe.HTML),e.insertionMode=ae.IN_CAPTION}function Slt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,qe.HTML),e.insertionMode=ae.IN_COLUMN_GROUP}function Tlt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ce.COLGROUP,N.COLGROUP),e.insertionMode=ae.IN_COLUMN_GROUP,yX(e,t)}function Clt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,qe.HTML),e.insertionMode=ae.IN_TABLE_BODY}function Alt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ce.TBODY,N.TBODY),e.insertionMode=ae.IN_TABLE_BODY,JF(e,t)}function Ilt(e,t){e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function klt(e,t){nTe(t)?e._appendElement(t,qe.HTML):jk(e,t),t.ackSelfClosing=!0}function Rlt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,qe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function WE(e,t){switch(t.tagID){case N.TD:case N.TH:case N.TR:{Alt(e,t);break}case N.STYLE:case N.SCRIPT:case N.TEMPLATE:{Mf(e,t);break}case N.COL:{Tlt(e,t);break}case N.FORM:{Rlt(e,t);break}case N.TABLE:{Ilt(e,t);break}case N.TBODY:case N.TFOOT:case N.THEAD:{Clt(e,t);break}case N.INPUT:{klt(e,t);break}case N.CAPTION:{xlt(e,t);break}case N.COLGROUP:{Slt(e,t);break}default:jk(e,t)}}function XA(e,t){switch(t.tagID){case N.TABLE:{e.openElements.hasInTableScope(N.TABLE)&&(e.openElements.popUntilTagNamePopped(N.TABLE),e._resetInsertionMode());break}case N.TEMPLATE:{Wb(e,t);break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:jk(e,t)}}function jk(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,XF(e,t),e.fosterParentingEnabled=n}function sTe(e,t){e.pendingCharacterTokens.push(t)}function oTe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function NT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)jk(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const aTe=new Set([N.CAPTION,N.COL,N.COLGROUP,N.TBODY,N.TD,N.TFOOT,N.TH,N.THEAD,N.TR]);function Plt(e,t){const n=t.tagID;aTe.has(n)?e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ae.IN_TABLE,WE(e,t)):za(e,t)}function Nlt(e,t){const n=t.tagID;switch(n){case N.CAPTION:case N.TABLE:{e.openElements.hasInTableScope(N.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(N.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ae.IN_TABLE,n===N.TABLE&&XA(e,t));break}case N.BODY:case N.COL:case N.COLGROUP:case N.HTML:case N.TBODY:case N.TD:case N.TFOOT:case N.TH:case N.THEAD:case N.TR:break;default:QF(e,t)}}function yX(e,t){switch(t.tagID){case N.HTML:{za(e,t);break}case N.COL:{e._appendElement(t,qe.HTML),t.ackSelfClosing=!0;break}case N.TEMPLATE:{Mf(e,t);break}default:MM(e,t)}}function Olt(e,t){switch(t.tagID){case N.COLGROUP:{e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ae.IN_TABLE);break}case N.TEMPLATE:{Wb(e,t);break}case N.COL:break;default:MM(e,t)}}function MM(e,t){e.openElements.currentTagId===N.COLGROUP&&(e.openElements.pop(),e.insertionMode=ae.IN_TABLE,e._processToken(t))}function JF(e,t){switch(t.tagID){case N.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,qe.HTML),e.insertionMode=ae.IN_ROW;break}case N.TH:case N.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ce.TR,N.TR),e.insertionMode=ae.IN_ROW,ZF(e,t);break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ae.IN_TABLE,WE(e,t));break}default:WE(e,t)}}function kU(e,t){const n=t.tagID;switch(t.tagID){case N.TBODY:case N.TFOOT:case N.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ae.IN_TABLE);break}case N.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ae.IN_TABLE,XA(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:case N.TR:break;default:XA(e,t)}}function ZF(e,t){switch(t.tagID){case N.TH:case N.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,qe.HTML),e.insertionMode=ae.IN_CELL,e.activeFormattingElements.insertMarker();break}case N.CAPTION:case N.COL:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ae.IN_TABLE_BODY,JF(e,t));break}default:WE(e,t)}}function lTe(e,t){switch(t.tagID){case N.TR:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ae.IN_TABLE_BODY);break}case N.TABLE:{e.openElements.hasInTableScope(N.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ae.IN_TABLE_BODY,kU(e,t));break}case N.TBODY:case N.TFOOT:case N.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(N.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ae.IN_TABLE_BODY,kU(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:case N.TD:case N.TH:break;default:XA(e,t)}}function Dlt(e,t){const n=t.tagID;aTe.has(n)?(e.openElements.hasInTableScope(N.TD)||e.openElements.hasInTableScope(N.TH))&&(e._closeTableCell(),ZF(e,t)):za(e,t)}function Mlt(e,t){const n=t.tagID;switch(n){case N.TD:case N.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ae.IN_ROW);break}case N.TABLE:case N.TBODY:case N.TFOOT:case N.THEAD:case N.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),lTe(e,t));break}case N.BODY:case N.CAPTION:case N.COL:case N.COLGROUP:case N.HTML:break;default:QF(e,t)}}function uTe(e,t){switch(t.tagID){case N.HTML:{za(e,t);break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e._insertElement(t,qe.HTML);break}case N.OPTGROUP:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop(),e._insertElement(t,qe.HTML);break}case N.INPUT:case N.KEYGEN:case N.TEXTAREA:case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),t.tagID!==N.SELECT&&e._processStartTag(t));break}case N.SCRIPT:case N.TEMPLATE:{Mf(e,t);break}}}function cTe(e,t){switch(t.tagID){case N.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===N.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===N.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===N.OPTGROUP&&e.openElements.pop();break}case N.OPTION:{e.openElements.currentTagId===N.OPTION&&e.openElements.pop();break}case N.SELECT:{e.openElements.hasInSelectScope(N.SELECT)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode());break}case N.TEMPLATE:{Wb(e,t);break}}}function $lt(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e._processStartTag(t)):uTe(e,t)}function Llt(e,t){const n=t.tagID;n===N.CAPTION||n===N.TABLE||n===N.TBODY||n===N.TFOOT||n===N.THEAD||n===N.TR||n===N.TD||n===N.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(N.SELECT),e._resetInsertionMode(),e.onEndTag(t)):cTe(e,t)}function Flt(e,t){switch(t.tagID){case N.BASE:case N.BASEFONT:case N.BGSOUND:case N.LINK:case N.META:case N.NOFRAMES:case N.SCRIPT:case N.STYLE:case N.TEMPLATE:case N.TITLE:{Mf(e,t);break}case N.CAPTION:case N.COLGROUP:case N.TBODY:case N.TFOOT:case N.THEAD:{e.tmplInsertionModeStack[0]=ae.IN_TABLE,e.insertionMode=ae.IN_TABLE,WE(e,t);break}case N.COL:{e.tmplInsertionModeStack[0]=ae.IN_COLUMN_GROUP,e.insertionMode=ae.IN_COLUMN_GROUP,yX(e,t);break}case N.TR:{e.tmplInsertionModeStack[0]=ae.IN_TABLE_BODY,e.insertionMode=ae.IN_TABLE_BODY,JF(e,t);break}case N.TD:case N.TH:{e.tmplInsertionModeStack[0]=ae.IN_ROW,e.insertionMode=ae.IN_ROW,ZF(e,t);break}default:e.tmplInsertionModeStack[0]=ae.IN_BODY,e.insertionMode=ae.IN_BODY,za(e,t)}}function jlt(e,t){t.tagID===N.TEMPLATE&&Wb(e,t)}function dTe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(N.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):gX(e,t)}function Blt(e,t){t.tagID===N.HTML?za(e,t):$M(e,t)}function fTe(e,t){var n;if(t.tagID===N.HTML){if(e.fragmentContext||(e.insertionMode=ae.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===N.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else $M(e,t)}function $M(e,t){e.insertionMode=ae.IN_BODY,XF(e,t)}function zlt(e,t){switch(t.tagID){case N.HTML:{za(e,t);break}case N.FRAMESET:{e._insertElement(t,qe.HTML);break}case N.FRAME:{e._appendElement(t,qe.HTML),t.ackSelfClosing=!0;break}case N.NOFRAMES:{Mf(e,t);break}}}function Ult(e,t){t.tagID===N.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==N.FRAMESET&&(e.insertionMode=ae.AFTER_FRAMESET))}function Vlt(e,t){switch(t.tagID){case N.HTML:{za(e,t);break}case N.NOFRAMES:{Mf(e,t);break}}}function Hlt(e,t){t.tagID===N.HTML&&(e.insertionMode=ae.AFTER_AFTER_FRAMESET)}function qlt(e,t){t.tagID===N.HTML?za(e,t):YO(e,t)}function YO(e,t){e.insertionMode=ae.IN_BODY,XF(e,t)}function Wlt(e,t){switch(t.tagID){case N.HTML:{za(e,t);break}case N.NOFRAMES:{Mf(e,t);break}}}function Glt(e,t){t.chars=Ni,e._insertCharacters(t)}function Ylt(e,t){e._insertCharacters(t),e.framesetOk=!1}function hTe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==qe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Klt(e,t){if(cat(t))hTe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===qe.MATHML?XSe(t):r===qe.SVG&&(dat(t),QSe(t)),pX(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Xlt(e,t){if(t.tagID===N.P||t.tagID===N.BR){hTe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===qe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ce.AREA,Ce.BASE,Ce.BASEFONT,Ce.BGSOUND,Ce.BR,Ce.COL,Ce.EMBED,Ce.FRAME,Ce.HR,Ce.IMG,Ce.INPUT,Ce.KEYGEN,Ce.LINK,Ce.META,Ce.PARAM,Ce.SOURCE,Ce.TRACK,Ce.WBR;const Qlt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Jue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function pTe(e,t){const n=aut(e),r=DSe("type",{handlers:{root:Jlt,element:Zlt,text:eut,comment:gTe,doctype:tut,raw:rut},unknown:iut}),i={parser:n?new Kue(Jue):Kue.getFragmentParser(void 0,Jue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),yS(i,dp());const s=n?i.parser.document:i.parser.getFragment(),o=uot(s,{file:i.options.file});return i.stitches&&cX(o,"comment",function(a,l,u){const c=a;if(c.value.stitch&&u&&l!==void 0){const d=u.children;return d[l]=c.value.stitch,l}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function mTe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Jlt(e,t){mTe(e.children,t)}function Zlt(e,t){sut(e,t),mTe(e.children,t),out(e,t)}function eut(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:Fn.CHARACTER,chars:e.value,location:Bk(e)};yS(t,dp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function tut(e,t){const n={type:Fn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:Bk(e)};yS(t,dp(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function nut(e,t){t.stitches=!0;const n=lut(e);if("children"in e&&"children"in n){const r=pTe({type:"root",children:e.children},t.options);n.children=r.children}gTe({type:"comment",value:{stitch:n}},t)}function gTe(e,t){const n=e.value,r={type:Fn.COMMENT,data:n,location:Bk(e)};yS(t,dp(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function rut(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,yTe(t,dp(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function iut(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))nut(n,t);else{let r="";throw Qlt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function yS(e,t){yTe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=ws.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function yTe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function sut(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===ws.PLAINTEXT)return;yS(t,dp(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:b1.html;i===b1.html&&n==="svg"&&(i=b1.svg);const s=pot({...e,children:[]},{space:i===b1.svg?"svg":"html"}),o={type:Fn.START_TAG,tagName:n,tagID:gS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:Bk(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function out(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Eot.includes(n)||t.parser.tokenizer.state===ws.PLAINTEXT)return;yS(t,WF(e));const r={type:Fn.END_TAG,tagName:n,tagID:gS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:Bk(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===ws.RCDATA||t.parser.tokenizer.state===ws.RAWTEXT||t.parser.tokenizer.state===ws.SCRIPT_DATA)&&(t.parser.tokenizer.state=ws.DATA)}function aut(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function Bk(e){const t=dp(e)||{line:void 0,column:void 0,offset:void 0},n=WF(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function lut(e){return"children"in e?qE({...e,children:[]}):qE(e)}function uut(e){return function(t,n){return pTe(t,{...e,file:n})}}function cl({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return v.jsx(Gy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return v.jsx(Xe,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return v.jsx(xi,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return v.jsx(xi,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return v.jsx(xi,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return v.jsx(xi,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return v.jsx(xi,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return v.jsx(xi,{...s,order:6,...s,pb:12})},a({node:i,...s}){return v.jsx(qy,{...s,ref:void 0})},ul({node:i,...s}){return v.jsx(sf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return v.jsx(sf,{type:"ordered",withPadding:!0,...o,pb:8})}};return v.jsx(Xst,{components:n,rehypePlugins:[uut],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function RU({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return v.jsx(cl,{text:n})}const cut="https://github.com/revisit-studies/study/tree/main/public/";function dut({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=hc();return v.jsx(Ir.Main,{children:v.jsxs(Of,{size:"xs",px:"xs",children:[v.jsx(Gy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${dd}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),v.jsx(Xe,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Wxe(i);return v.jsx(ds,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:v.jsxs(Ub,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?v.jsxs(v.Fragment,{children:[v.jsx(Xe,{fw:"bold",children:i}),v.jsxs(Ct,{align:"center",direction:"row",children:[v.jsx(Hle,{color:"red"}),v.jsx(Xe,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),v.jsx(RU,{issues:s.errors,type:"error"})]}):v.jsxs(v.Fragment,{children:[v.jsx(Xe,{fw:"bold",children:s.studyMetadata.title}),v.jsxs(Xe,{c:"dimmed",children:[v.jsx(Xe,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),v.jsx(Xe,{c:"dimmed",children:s.studyMetadata.description}),v.jsx(Xe,{c:"dimmed",ta:"right",style:{paddingRight:5},children:v.jsxs(qy,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${cut}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&v.jsxs(v.Fragment,{children:[v.jsxs(Ct,{align:"center",direction:"row",children:[v.jsx(Hle,{color:"orange"}),v.jsx(Xe,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),v.jsx(RU,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var vTe={exports:{}},bTe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zk=I;function fut(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hut=typeof Object.is=="function"?Object.is:fut,put=zk.useSyncExternalStore,mut=zk.useRef,gut=zk.useEffect,yut=zk.useMemo,vut=zk.useDebugValue;bTe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=mut(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=yut(function(){function l(h){if(!u){if(u=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return d=p}return d=h}if(p=d,hut(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,d=m)}var u=!1,c,d,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,r,i]);var a=put(e,s[0],s[1]);return gut(function(){o.hasValue=!0,o.value=a},[a]),vut(a),a};vTe.exports=bTe;var but=vTe.exports,Lu="default"in YD?ls:YD,Zue=Symbol.for("react-redux-context"),ece=typeof globalThis<"u"?globalThis:{};function _ut(){if(!Lu.createContext)return{};const e=ece[Zue]??(ece[Zue]=new Map);let t=e.get(Lu.createContext);return t||(t=Lu.createContext(null),e.set(Lu.createContext,t)),t}var ny=_ut(),wut=()=>{throw new Error("uSES not initialized!")};function vX(e=ny){return function(){return Lu.useContext(e)}}var _Te=vX(),wTe=wut,Eut=e=>{wTe=e},xut=(e,t)=>e===t;function Sut(e=ny){const t=e===ny?_Te:vX(e),n=(r,i={})=>{const{equalityFn:s=xut,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:l,getServerState:u,stabilityCheck:c,identityFunctionCheck:d}=t();Lu.useRef(!0);const f=Lu.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=wTe(l.addNestedSub,a.getState,u||a.getState,f,s);return Lu.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Tut=Sut();function Cut(e){e()}function Aut(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Cut(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var tce={notify(){},get:()=>[]};function Iut(e,t){let n,r=tce,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),d())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function u(){return s}function c(){i++,n||(n=e.subscribe(l),r=Aut())}function d(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=tce)}function f(){s||(s=!0,c())}function h(){s&&(s=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:u,trySubscribe:f,tryUnsubscribe:h,getListeners:()=>r};return p}var kut=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Rut=typeof navigator<"u"&&navigator.product==="ReactNative",Put=kut||Rut?Lu.useLayoutEffect:Lu.useEffect;function Nut({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Lu.useMemo(()=>{const u=Iut(e);return{store:e,subscription:u,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Lu.useMemo(()=>e.getState(),[e]);Put(()=>{const{subscription:u}=o;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),a!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[o,a]);const l=t||ny;return Lu.createElement(l.Provider,{value:o},n)}var Out=Nut;function ETe(e=ny){const t=e===ny?_Te:vX(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Dut=ETe();function Mut(e=ny){const t=e===ny?Dut:ETe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var xTe=Mut();Eut(but.useSyncExternalStoreWithSelector);function Mo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var $ut=typeof Symbol=="function"&&Symbol.observable||"@@observable",nce=$ut,K8=()=>Math.random().toString(36).substring(7).split("").join("."),Lut={INIT:`@@redux/INIT${K8()}`,REPLACE:`@@redux/REPLACE${K8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${K8()}`},LM=Lut;function bX(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function STe(e,t,n){if(typeof e!="function")throw new Error(Mo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Mo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Mo(1));return n(STe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,l=!1;function u(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(l)throw new Error(Mo(3));return i}function d(g){if(typeof g!="function")throw new Error(Mo(4));if(l)throw new Error(Mo(5));let y=!0;u();const b=a++;return o.set(b,g),function(){if(y){if(l)throw new Error(Mo(6));y=!1,u(),o.delete(b),s=null}}}function f(g){if(!bX(g))throw new Error(Mo(7));if(typeof g.type>"u")throw new Error(Mo(8));if(typeof g.type!="string")throw new Error(Mo(17));if(l)throw new Error(Mo(9));try{l=!0,i=r(i,g)}finally{l=!1}return(s=o).forEach(b=>{b()}),g}function h(g){if(typeof g!="function")throw new Error(Mo(10));r=g,f({type:LM.REPLACE})}function p(){const g=d;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Mo(11));function b(){const w=y;w.next&&w.next(c())}return b(),{unsubscribe:g(b)}},[nce](){return this}}}return f({type:LM.INIT}),{dispatch:f,subscribe:d,getState:c,replaceReducer:h,[nce]:p}}function Fut(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:LM.INIT})>"u")throw new Error(Mo(12));if(typeof n(void 0,{type:LM.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Mo(13))})}function jut(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Fut(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let l=!1;const u={};for(let c=0;c<r.length;c++){const d=r[c],f=n[d],h=o[d],p=f(h,a);if(typeof p>"u")throw a&&a.type,new Error(Mo(14));u[d]=p,l=l||p!==h}return l=l||r.length!==Object.keys(o).length,l?u:o}}function FM(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function But(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Mo(15))};const o={getState:i.getState,dispatch:(l,...u)=>s(l,...u)},a=e.map(l=>l(o));return s=FM(...a)(i.dispatch),{...i,dispatch:s}}}function zut(e){return bX(e)&&"type"in e&&typeof e.type=="string"}var TTe=Symbol.for("immer-nothing"),rce=Symbol.for("immer-draftable"),Zu=Symbol.for("immer-state");function Ud(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var GE=Object.getPrototypeOf;function ry(e){return!!e&&!!e[Zu]}function Lm(e){var t;return e?CTe(e)||Array.isArray(e)||!!e[rce]||!!((t=e.constructor)!=null&&t[rce])||t6(e)||n6(e):!1}var Uut=Object.prototype.constructor.toString();function CTe(e){if(!e||typeof e!="object")return!1;const t=GE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Uut}function jM(e,t){e6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function e6(e){const t=e[Zu];return t?t.type_:Array.isArray(e)?1:t6(e)?2:n6(e)?3:0}function PU(e,t){return e6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ATe(e,t,n){const r=e6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Vut(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function t6(e){return e instanceof Map}function n6(e){return e instanceof Set}function Vv(e){return e.copy_||e.base_}function NU(e,t){if(t6(e))return new Map(e);if(n6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=CTe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Zu];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(GE(e),r)}else{const r=GE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function _X(e,t=!1){return r6(e)||ry(e)||!Lm(e)||(e6(e)>1&&(e.set=e.add=e.clear=e.delete=Hut),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>_X(r,!0))),e}function Hut(){Ud(2)}function r6(e){return Object.isFrozen(e)}var qut={};function nb(e){const t=qut[e];return t||Ud(0,e),t}var QA;function ITe(){return QA}function Wut(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function ice(e,t){t&&(nb("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function OU(e){DU(e),e.drafts_.forEach(Gut),e.drafts_=null}function DU(e){e===QA&&(QA=e.parent_)}function sce(e){return QA=Wut(QA,e)}function Gut(e){const t=e[Zu];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function oce(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Zu].modified_&&(OU(t),Ud(4)),Lm(e)&&(e=BM(t,e),t.parent_||zM(t,e)),t.patches_&&nb("Patches").generateReplacementPatches_(n[Zu].base_,e,t.patches_,t.inversePatches_)):e=BM(t,n,[]),OU(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==TTe?e:void 0}function BM(e,t,n){if(r6(t))return t;const r=t[Zu];if(!r)return jM(t,(i,s)=>ace(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return zM(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),jM(s,(a,l)=>ace(e,r,i,a,l,n,o)),zM(e,i,!1),n&&e.patches_&&nb("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function ace(e,t,n,r,i,s,o){if(ry(i)){const a=s&&t&&t.type_!==3&&!PU(t.assigned_,r)?s.concat(r):void 0,l=BM(e,i,a);if(ATe(n,r,l),ry(l))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Lm(i)&&!r6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;BM(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&zM(e,i)}}function zM(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&_X(t,n)}function Yut(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:ITe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=wX;n&&(i=[r],s=JA);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var wX={get(e,t){if(t===Zu)return e;const n=Vv(e);if(!PU(n,t))return Kut(e,n,t);const r=n[t];return e.finalized_||!Lm(r)?r:r===X8(e.base_,t)?(Q8(e),e.copy_[t]=$U(r,e)):r},has(e,t){return t in Vv(e)},ownKeys(e){return Reflect.ownKeys(Vv(e))},set(e,t,n){const r=kTe(Vv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=X8(Vv(e),t),s=i==null?void 0:i[Zu];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Vut(n,i)&&(n!==void 0||PU(e.base_,t)))return!0;Q8(e),MU(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return X8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Q8(e),MU(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Vv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Ud(11)},getPrototypeOf(e){return GE(e.base_)},setPrototypeOf(){Ud(12)}},JA={};jM(wX,(e,t)=>{JA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});JA.deleteProperty=function(e,t){return JA.set.call(this,e,t,void 0)};JA.set=function(e,t,n){return wX.set.call(this,e[0],t,n,e[0])};function X8(e,t){const n=e[Zu];return(n?Vv(n):e)[t]}function Kut(e,t,n){var i;const r=kTe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function kTe(e,t){if(!(t in e))return;let n=GE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=GE(n)}}function MU(e){e.modified_||(e.modified_=!0,e.parent_&&MU(e.parent_))}function Q8(e){e.copy_||(e.copy_=NU(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Xut=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(l=s,...u){return o.produce(l,c=>n.call(this,c,...u))}}typeof n!="function"&&Ud(6),r!==void 0&&typeof r!="function"&&Ud(7);let i;if(Lm(t)){const s=sce(this),o=$U(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?OU(s):DU(s)}return ice(s,r),oce(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===TTe&&(i=void 0),this.autoFreeze_&&_X(i,!0),r){const s=[],o=[];nb("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Ud(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,l=>t(l,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Lm(e)||Ud(8),ry(e)&&(e=RTe(e));const t=sce(this),n=$U(e,void 0);return n[Zu].isManual_=!0,DU(t),n}finishDraft(e,t){const n=e&&e[Zu];(!n||!n.isManual_)&&Ud(9);const{scope_:r}=n;return ice(r,t),oce(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=nb("Patches").applyPatches_;return ry(e)?r(e,t):this.produce(e,i=>r(i,t))}};function $U(e,t){const n=t6(e)?nb("MapSet").proxyMap_(e,t):n6(e)?nb("MapSet").proxySet_(e,t):Yut(e,t);return(t?t.scope_:ITe()).drafts_.push(n),n}function RTe(e){return ry(e)||Ud(10,e),PTe(e)}function PTe(e){if(!Lm(e)||r6(e))return e;const t=e[Zu];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=NU(e,t.scope_.immer_.useStrictShallowCopy_)}else n=NU(e,!0);return jM(n,(r,i)=>{ATe(n,r,PTe(i))}),t&&(t.finalized_=!1),n}var ec=new Xut,NTe=ec.produce;ec.produceWithPatches.bind(ec);ec.setAutoFreeze.bind(ec);ec.setUseStrictShallowCopy.bind(ec);ec.applyPatches.bind(ec);ec.createDraft.bind(ec);ec.finishDraft.bind(ec);function Qut(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Jut(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Zut(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var lce=e=>Array.isArray(e)?e:[e];function ect(e){const t=Array.isArray(e[0])?e[0]:e;return Zut(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function tct(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var nct=class{constructor(e){this.value=e}deref(){return this.value}},rct=typeof WeakRef<"u"?WeakRef:nct,ict=0,uce=1;function rN(){return{s:ict,v:void 0,o:null,p:null}}function EX(e,t={}){let n=rN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var d;let a=n;const{length:l}=arguments;for(let f=0,h=l;f<h;f++){const p=arguments[f];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=rN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=rN(),m.set(p,a)):a=g}}const u=a;let c;if(a.s===uce)c=a.v;else if(c=e.apply(null,arguments),s++,r){const f=((d=i==null?void 0:i.deref)==null?void 0:d.call(i))??i;f!=null&&r(f,c)&&(c=f,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new rct(c):c}return u.s=uce,u.v=c,c}return o.clearCache=()=>{n=rN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function OTe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,l={},u=i.pop();typeof u=="object"&&(l=u,u=i.pop()),Qut(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const c={...n,...l},{memoize:d,memoizeOptions:f=[],argsMemoize:h=EX,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=lce(f),y=lce(p),b=ect(i),_=d(function(){return s++,u.apply(null,arguments)},...g),w=h(function(){o++;const x=tct(b,arguments);return a=_.apply(null,x),a},...y);return Object.assign(w,{resultFunc:u,memoizedResultFunc:_,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var sct=OTe(EX),oct=Object.assign((e,t=sct)=>{Jut(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>oct});function DTe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var act=DTe(),lct=DTe,uct=(...e)=>{const t=OTe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(ry(o)?RTe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};uct(EX);var cct=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?FM:FM.apply(null,arguments)};function YE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Jl(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>zut(r)&&r.type===e,n}var MTe=class IC extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,IC.prototype)}static get[Symbol.species](){return IC}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new IC(...t[0].concat(this)):new IC(...t.concat(this))}};function cce(e){return Lm(e)?NTe(e,()=>{}):e}function dce(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Jl(10));const r=n.insert(t,e);return e.set(t,r),r}function dct(e){return typeof e=="boolean"}var fct=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new MTe;return n&&(dct(n)?o.push(act):o.push(lct(n.extraArgument))),o},hct="RTK_autoBatch",$Te=e=>t=>{setTimeout(t,e)},pct=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:$Te(10),mct=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,l=e.type==="tick"?queueMicrotask:e.type==="raf"?pct:e.type==="callback"?e.queueNotification:$Te(e.timeout),u=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const d=()=>i&&c(),f=r.subscribe(d);return a.add(c),()=>{f(),a.delete(c)}},dispatch(c){var d;try{return i=!((d=c==null?void 0:c.meta)!=null&&d[hct]),s=!i,s&&(o||(o=!0,l(u))),r.dispatch(c)}finally{i=!0}}})},gct=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new MTe(e);return r&&i.push(mct(typeof r=="object"?r:void 0)),i},yct=!0;function vct(e){const t=fct(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(bX(n))a=jut(n);else throw new Error(Jl(1));let l;typeof r=="function"?l=r(t):l=t();let u=FM;i&&(u=cct({trace:!yct,...typeof i=="object"&&i}));const c=But(...l),d=gct(c);let f=typeof o=="function"?o(d):d();const h=u(...f);return STe(a,s,h)}function LTe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Jl(28));if(a in t)throw new Error(Jl(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function bct(e){return typeof e=="function"}function _ct(e,t){let[n,r,i]=LTe(t),s;if(bct(e))s=()=>cce(e());else{const a=cce(e);s=()=>a}function o(a=s(),l){let u=[n[l.type],...r.filter(({matcher:c})=>c(l)).map(({reducer:c})=>c)];return u.filter(c=>!!c).length===0&&(u=[i]),u.reduce((c,d)=>{if(d)if(ry(c)){const h=d(c,l);return h===void 0?c:h}else{if(Lm(c))return NTe(c,f=>d(f,l));{const f=d(c,l);if(f===void 0){if(c===null)return c;throw new Error(Jl(9))}return f}}return c},a)}return o.getInitialState=s,o}var wct="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Ect=(e=21)=>{let t="",n=e;for(;n--;)t+=wct[Math.random()*64|0];return t},xct=Symbol.for("rtk-slice-createasyncthunk");function Sct(e,t){return`${e}/${t}`}function Tct({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[xct];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Jl(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Ict()):i.reducers)||{},l=Object.keys(a),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(_,w){const E=typeof _=="string"?_:_.type;if(!E)throw new Error(Jl(12));if(E in u.sliceCaseReducersByType)throw new Error(Jl(13));return u.sliceCaseReducersByType[E]=w,c},addMatcher(_,w){return u.sliceMatchers.push({matcher:_,reducer:w}),c},exposeAction(_,w){return u.actionCreators[_]=w,c},exposeCaseReducer(_,w){return u.sliceCaseReducersByName[_]=w,c}};l.forEach(_=>{const w=a[_],E={reducerName:_,type:Sct(s,_),createNotation:typeof i.reducers=="function"};Rct(w)?Nct(E,w,c,t):kct(E,w,c)});function d(){const[_={},w=[],E=void 0]=typeof i.extraReducers=="function"?LTe(i.extraReducers):[i.extraReducers],x={..._,...u.sliceCaseReducersByType};return _ct(i.initialState,S=>{for(let C in x)S.addCase(C,x[C]);for(let C of u.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of w)S.addMatcher(C.matcher,C.reducer);E&&S.addDefaultCase(E)})}const f=_=>_,h=new Map;let p;function m(_,w){return p||(p=d()),p(_,w)}function g(){return p||(p=d()),p.getInitialState()}function y(_,w=!1){function E(S){let C=S[_];return typeof C>"u"&&w&&(C=g()),C}function x(S=f){const C=dce(h,w,{insert:()=>new WeakMap});return dce(C,S,{insert:()=>{const A={};for(const[R,P]of Object.entries(i.selectors??{}))A[R]=Cct(P,S,g,w);return A}})}return{reducerPath:_,getSelectors:x,get selectors(){return x(E)},selectSlice:E}}const b={name:s,reducer:m,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(_,{reducerPath:w,...E}={}){const x=w??o;return _.inject({reducerPath:x,reducer:m},E),{...b,...y(x,!0)}}};return b}}function Cct(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Act=Tct();function Ict(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function kct({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Pct(r))throw new Error(Jl(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?YE(e,o):YE(e))}function Rct(e){return e._reducerDefinitionType==="asyncThunk"}function Pct(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Nct({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Jl(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:l,settled:u,options:c}=n,d=i(e,s,c);r.exposeAction(t,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),u&&r.addMatcher(d.settled,u),r.exposeCaseReducer(t,{fulfilled:o||iN,pending:a||iN,rejected:l||iN,settled:u||iN})}function iN(){}var Oct=(e,t)=>{if(typeof e!="function")throw new Error(Jl(32))},xX="listenerMiddleware",Dct=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=YE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Jl(21));return Oct(s),{predicate:i,type:t,effect:s}},Mct=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Dct(e);return{id:Ect(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Jl(22))}}},{withTypes:()=>Mct}),$ct=Object.assign(YE(`${xX}/add`),{withTypes:()=>$ct});YE(`${xX}/removeAll`);var Lct=Object.assign(YE(`${xX}/remove`),{withTypes:()=>Lct});function Jl(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ei={};function Fct(e){return!!(e&&typeof e.then=="function")}function UM(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function jct(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function i6(){return Math.random().toString(36).substring(2)}var fce=0,J8=0;function s6(){var e=new Date().getTime();return e===fce?(J8++,e*1e3+J8):(fce=e,J8=0,e*1e3)}var Uk=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",Bct=s6,zct="native";function Uct(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function Vct(e){e.bc.close(),e.subFns=[]}function Hct(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function qct(e,t){e.messagesCallback=t}function Wct(){if(Uk&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function Gct(){return 150}const Yct={create:Uct,close:Vct,onMessage:qct,postMessage:Hct,canBeUsed:Wct,type:zct,averageResponseTime:Gct,microSeconds:Bct};var FTe=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,jTe()),this.set.add(t),setTimeout(function(){Kct(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function Kct(e){for(var t=jTe()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function jTe(){return new Date().getTime()}function o6(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var Xct=s6,Qct="pubkey.broadcast-channel-0-",Fm="messages",Jct="idb";function BTe(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function Zct(e){var t=BTe(),n=Qct+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(Fm,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function edt(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([Fm],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(u){return a(u)};var l=s.objectStore(Fm);l.add(i)})}function tdt(e,t){var n=e.transaction(Fm).objectStore(Fm),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function ndt(e,t){var n=e.transaction([Fm],"readwrite").objectStore(Fm).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function rdt(e,t){var n=new Date().getTime()-t,r=e.transaction(Fm).objectStore(Fm),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var l=a.value;if(l.time<n)i.push(l),a.continue();else{s(i);return}}else s(i)}})}function idt(e,t){return rdt(e,t).then(function(n){return Promise.all(n.map(function(r){return ndt(e,r.id)}))})}function sdt(e,t){return t=o6(t),Zct(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:i6(),eMIs:new FTe(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},zTe(r),r})}function zTe(e){e.closed||UTe(e).then(function(){return UM(e.options.idb.fallbackInterval)}).then(function(){return zTe(e)})}function odt(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function UTe(e){return e.closed||!e.messagesCallback?Promise.resolve():tdt(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return odt(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function adt(e){e.closed=!0,e.db.close()}function ldt(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return edt(e.db,e.uuid,t)}).then(function(){jct(0,10)===0&&idt(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function udt(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,UTe(e)}function cdt(){if(Uk)return!1;var e=BTe();return!!e}function ddt(e){return e.idb.fallbackInterval*2}const fdt={create:sdt,close:adt,onMessage:udt,postMessage:ldt,canBeUsed:cdt,type:Jct,averageResponseTime:ddt,microSeconds:Xct};var hdt=s6,pdt="pubkey.broadcastChannel-",mdt="localstorage";function VTe(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function HTe(e){return pdt+e}function gdt(e,t){return new Promise(function(n){UM().then(function(){var r=HTe(e.channelName),i={token:i6(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);VTe().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function ydt(e,t){var n=HTe(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function vdt(e){window.removeEventListener("storage",e)}function bdt(e,t){if(t=o6(t),!qTe())throw new Error("BroadcastChannel: localstorage cannot be used");var n=i6(),r=new FTe(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=ydt(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function _dt(e){vdt(e.listener)}function wdt(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function qTe(){if(Uk)return!1;var e=VTe();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function Edt(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const xdt={create:bdt,close:_dt,onMessage:wdt,postMessage:gdt,canBeUsed:qTe,type:mdt,averageResponseTime:Edt,microSeconds:hdt};var Sdt=s6,Tdt="simulate",SX=new Set;function Cdt(e){var t={name:e,messagesCallback:null};return SX.add(t),t}function Adt(e){SX.delete(e)}function Idt(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(SX);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function kdt(e,t){e.messagesCallback=t}function Rdt(){return!0}function Pdt(){return 5}const Ndt={create:Cdt,close:Adt,onMessage:kdt,postMessage:Idt,canBeUsed:Rdt,type:Tdt,averageResponseTime:Pdt,microSeconds:Sdt};var LU=[Yct,fdt,xdt];if(Uk){var hce=require("../../src/methods/node.js");typeof hce.canBeUsed=="function"&&LU.push(hce)}function WTe(e){var t=[].concat(e.methods,LU).filter(Boolean);if(e.type){if(e.type==="simulate")return Ndt;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!Uk&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(LU.map(function(i){return i.type})))}var TX=function(t,n){this.name=t,FU&&(n=FU),this.options=o6(n),this.method=WTe(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,Mdt(this)};TX._pubkey=!0;function Odt(e){e=o6(e);var t=WTe(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var FU;function Ddt(e){FU=e}TX.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return pce(this,"message",t)},postInternal:function(t){return pce(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};gce(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,mce(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};mce(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});gce(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function pce(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function Mdt(e){var t=e.method.create(e.name,e.options);Fct(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function GTe(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function mce(e,t,n){e._addEL[t].push(n),$dt(e)}function gce(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),Ldt(e)}function $dt(e){if(!e._iL&&GTe(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function Ldt(e){if(e._iL&&!GTe(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const Fdt=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function jdt(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const Bdt={add:jdt},YTe={},zdt=Object.freeze(Object.defineProperty({__proto__:null,default:YTe},Symbol.toStringTag,{value:"Module"}));var Udt=Fdt?YTe:Bdt,M1=new Set,yce=!1;function Vdt(){yce||(yce=!0,Udt.add(KTe))}function Hdt(e){if(Vdt(),typeof e!="function")throw new Error("Listener is no function");M1.add(e);var t={remove:function(){return M1.delete(e)},run:function(){return M1.delete(e),e()}};return t}function KTe(){var e=[];return M1.forEach(function(t){e.push(t()),M1.delete(t)}),Promise.all(e)}function qdt(){M1.clear()}function Wdt(){return M1.size}const Gdt={add:Hdt,runAll:KTe,removeAll:qdt,getSize:Wdt};var XTe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=i6(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};XTe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=_1(this,"apply").then(function(){return UM(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):_1(t,"apply")}).then(function(){return UM(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):_1(t)}).then(function(){return QTe(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=Ydt(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),_1(this,"death")}};function Ydt(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function _1(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function QTe(e){e.isLeader=!0;var t=Gdt.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&_1(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),_1(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),_1(e,"tell")}function Kdt(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function Xdt(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=Kdt(t,e);var n=new XTe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const Qdt=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:TX,beLeader:QTe,clearNodeFolder:Odt,createLeaderElection:Xdt,enforceOptions:Ddt},Symbol.toStringTag,{value:"Module"})),Jdt=_1e(Qdt);var CX,AX,IX;Object.defineProperty(Ei,"__esModule",{value:!0});var JTe=Ei.initMessageListener=IX=Ei.initStateWithPrevTab=AX=Ei.withReduxStateSync=Ei.createReduxStateSync=CX=Ei.createStateSyncMiddleware=Ei.WINDOW_STATE_SYNC_ID=Ei.INIT_MESSAGE_LISTENER=Ei.RECEIVE_INIT_STATE=Ei.SEND_INIT_STATE=Ei.GET_INIT_STATE=void 0;Ei.generateUuidForAction=tCe;Ei.isActionAllowed=nCe;Ei.isActionSynced=sft;Ei.MessageListener=rCe;var Zdt=Jdt,jU=0,kX=Ei.GET_INIT_STATE="&_GET_INIT_STATE",RX=Ei.SEND_INIT_STATE="&_SEND_INIT_STATE",PX=Ei.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",eft=Ei.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",BU={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(t){return t},receiveState:function(t,n){return n}},tft=function(){return{type:kX}},nft=function(){return{type:RX}},rft=function(t){return{type:PX,payload:t}},ift=function(){return{type:eft}};function Ig(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function ZTe(){return""+Ig()+Ig()+"-"+Ig()+"-"+Ig()+"-"+Ig()+"-"+Ig()+Ig()+Ig()}var eCe=Ei.WINDOW_STATE_SYNC_ID=ZTe();function tCe(e){var t=e;return t.$uuid=ZTe(),t.$wuid=eCe,t}function nCe(e){var t=e.predicate,n=e.blacklist,r=e.whitelist,i=function(){return!0};return t&&typeof t=="function"?i=t:Array.isArray(n)?i=function(o){return n.indexOf(o.type)<0}:Array.isArray(r)&&(i=function(o){return r.indexOf(o.type)>=0}),i}function sft(e){return!!e.$isSync}function rCe(e){var t=e.channel,n=e.dispatch,r=e.allowed,i=!1,s={};this.handleOnMessage=function(o){o.$wuid!==eCe&&o.type!==PX&&o.$uuid&&o.$uuid!==jU&&(o.type===kX&&!s[o.$wuid]?(s[o.$wuid]=!0,n(nft())):o.type===RX&&!s[o.$wuid]?i||(i=!0,n(rft(o.payload))):r(o)&&(jU=o.$uuid,n(Object.assign(o,{$isSync:!0}))))},this.messageChannel=t,this.messageChannel.onmessage=this.handleOnMessage}CX=Ei.createStateSyncMiddleware=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:BU,n=nCe(t),r=new Zdt.BroadcastChannel(t.channel,t.broadcastChannelOption),i=t.prepareState||BU.prepareState,s=null;return function(o){var a=o.getState,l=o.dispatch;return function(u){return function(c){if(s||(s=new rCe({channel:r,dispatch:l,allowed:n})),c&&!c.$uuid){var d=tCe(c);jU=d.$uuid;try{if(c.type===RX)return a()&&(d.payload=i(a()),r.postMessage(d)),u(c);(n(d)||c.type===kX)&&r.postMessage(d)}catch{console.error("Your browser doesn't support cross tab communication")}}return u(Object.assign(c,{$isSync:typeof c.$isSync>"u"?!1:c.$isSync}))}}}};var oft=Ei.createReduxStateSync=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:BU.receiveState;return function(r,i){var s=r;return i.type===PX&&(s=n(r,i.payload)),t(s,i)}};AX=Ei.withReduxStateSync=oft;IX=Ei.initStateWithPrevTab=function(t){var n=t.dispatch;n(tft())};JTe=Ei.initMessageListener=function(t){var n=t.dispatch;n(ift())};function Zl(e){return Array.isArray(e)?e:e.components.flatMap(t=>typeof t=="string"?t:Zl(t))}function iCe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:iCe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function sCe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Zl(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Zl(e).length-1}];r+=1}else{const o=sCe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function aft(e,t){const n=sCe(e,t,0);return typeof n=="number"?null:n}function oCe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=oCe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function lft(e,t){const n=oCe(e,t,0);return n.found?n.distance:-1}function NX(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...NX(i,`${t}-${s}`))}),n}async function uft(e,t,n,r,i){const s=Zl(n),o=Object.fromEntries(s.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),a=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),u={studyId:e,answers:Object.keys(i).length>0?i:o,isRecording:!1,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:a,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null,analysisParticipantName:null,analysisWaveformTime:0},c=Act({name:"storeSlice",initialState:u,reducers:{setConfig(h,p){h.config=p.payload},setIsRecording(h,p){h.isRecording=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setAnalysisTrialName:(h,p)=>{h.analysisTrialName=p.payload},setAnalysisParticipantName:(h,p)=>{h.analysisParticipantName=p.payload},setAnalysisWaveformTime:(h,p)=>{h.analysisWaveformTime=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveAnalysisState(h,{payload:p}){h.analysisProvState=p},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:b,provenanceGraph:_,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:b,provenanceGraph:_,windowEvents:w}}}}),d=CX({}),f=vct({reducer:AX(c.reducer),preloadedState:u,middleware:h=>h().prepend(d)});return JTe(f),IX(f),{store:f,actions:c.actions}}const aCe=I.createContext(null);function tc(){return I.useContext(aCe).actions}const Xc=xTe,Qo=Tut;function cft(e){return Qo(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function OX(){return Qo(e=>Zl(e.sequence))}function Gb(){const{studyId:e}=bf();return`${e}`}function lg(){const{index:e}=bf(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function fp(){const e=lg(),t=OX();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var VM={exports:{}};VM.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",l="[object Array]",u="[object AsyncFunction]",c="[object Boolean]",d="[object Date]",f="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",b="[object Object]",_="[object Proxy]",w="[object RegExp]",E="[object Set]",x="[object String]",S="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",P="[object Float32Array]",L="[object Float64Array]",k="[object Int8Array]",$="[object Int16Array]",D="[object Int32Array]",M="[object Uint8Array]",B="[object Uint8ClampedArray]",z="[object Uint16Array]",U="[object Uint32Array]",O=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[P]=j[L]=j[k]=j[$]=j[D]=j[M]=j[B]=j[z]=j[U]=!0,j[a]=j[l]=j[A]=j[c]=j[R]=j[d]=j[f]=j[h]=j[m]=j[g]=j[b]=j[w]=j[E]=j[x]=j[C]=!1;var H=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,G=typeof self=="object"&&self&&self.Object===Object&&self,J=H||G||Function("return this")(),se=t&&!t.nodeType&&t,ie=se&&!0&&e&&!e.nodeType&&e,ne=ie&&ie.exports===se,ue=ne&&H.process,xe=function(){try{var re=ie&&ie.require&&ie.require("util").types;return re||ue&&ue.binding&&ue.binding("util")}catch{}}(),de=xe&&xe.isTypedArray;function Ke(re,me,Ne){switch(Ne.length){case 0:return re.call(me);case 1:return re.call(me,Ne[0]);case 2:return re.call(me,Ne[0],Ne[1]);case 3:return re.call(me,Ne[0],Ne[1],Ne[2])}return re.apply(me,Ne)}function je(re,me){for(var Ne=-1,Ot=Array(re);++Ne<re;)Ot[Ne]=me(Ne);return Ot}function Oe(re){return function(me){return re(me)}}function Fe(re,me){return re==null?void 0:re[me]}function Ae(re,me){return function(Ne){return re(me(Ne))}}var fe=Array.prototype,Pe=Function.prototype,He=Object.prototype,ft=J["__core-js_shared__"],Ee=Pe.toString,he=He.hasOwnProperty,Ue=function(){var re=/[^.]+$/.exec(ft&&ft.keys&&ft.keys.IE_PROTO||"");return re?"Symbol(src)_1."+re:""}(),nt=He.toString,ye=Ee.call(Object),Re=RegExp("^"+Ee.call(he).replace(O,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ge=ne?J.Buffer:void 0,Qe=J.Symbol,xt=J.Uint8Array;Ge&&Ge.allocUnsafe;var An=Ae(Object.getPrototypeOf,Object),gr=Object.create,yr=He.propertyIsEnumerable,Nr=fe.splice,Xt=Qe?Qe.toStringTag:void 0,Dn=function(){try{var re=Ze(Object,"defineProperty");return re({},"",{}),re}catch{}}(),rr=Ge?Ge.isBuffer:void 0,ir=Math.max,ao=Date.now,Pi=Ze(J,"Map"),zi=Ze(Object,"create"),Un=function(){function re(){}return function(me){if(!Dp(me))return{};if(gr)return gr(me);re.prototype=me;var Ne=new re;return re.prototype=void 0,Ne}}();function Wn(re){var me=-1,Ne=re==null?0:re.length;for(this.clear();++me<Ne;){var Ot=re[me];this.set(Ot[0],Ot[1])}}function Qi(){this.__data__=zi?zi(null):{},this.size=0}function vd(re){var me=this.has(re)&&delete this.__data__[re];return this.size-=me?1:0,me}function Ua(re){var me=this.__data__;if(zi){var Ne=me[re];return Ne===r?void 0:Ne}return he.call(me,re)?me[re]:void 0}function mc(re){var me=this.__data__;return zi?me[re]!==void 0:he.call(me,re)}function gt(re,me){var Ne=this.__data__;return this.size+=this.has(re)?0:1,Ne[re]=zi&&me===void 0?r:me,this}Wn.prototype.clear=Qi,Wn.prototype.delete=vd,Wn.prototype.get=Ua,Wn.prototype.has=mc,Wn.prototype.set=gt;function ci(re){var me=-1,Ne=re==null?0:re.length;for(this.clear();++me<Ne;){var Ot=re[me];this.set(Ot[0],Ot[1])}}function wn(){this.__data__=[],this.size=0}function Lr(re){var me=this.__data__,Ne=dr(me,re);if(Ne<0)return!1;var Ot=me.length-1;return Ne==Ot?me.pop():Nr.call(me,Ne,1),--this.size,!0}function ni(re){var me=this.__data__,Ne=dr(me,re);return Ne<0?void 0:me[Ne][1]}function ri(re){return dr(this.__data__,re)>-1}function le(re,me){var Ne=this.__data__,Ot=dr(Ne,re);return Ot<0?(++this.size,Ne.push([re,me])):Ne[Ot][1]=me,this}ci.prototype.clear=wn,ci.prototype.delete=Lr,ci.prototype.get=ni,ci.prototype.has=ri,ci.prototype.set=le;function te(re){var me=-1,Ne=re==null?0:re.length;for(this.clear();++me<Ne;){var Ot=re[me];this.set(Ot[0],Ot[1])}}function pe(){this.size=0,this.__data__={hash:new Wn,map:new(Pi||ci),string:new Wn}}function Ie(re){var me=Je(this,re).delete(re);return this.size-=me?1:0,me}function ke(re){return Je(this,re).get(re)}function dt(re){return Je(this,re).has(re)}function Rt(re,me){var Ne=Je(this,re),Ot=Ne.size;return Ne.set(re,me),this.size+=Ne.size==Ot?0:1,this}te.prototype.clear=pe,te.prototype.delete=Ie,te.prototype.get=ke,te.prototype.has=dt,te.prototype.set=Rt;function rn(re){var me=this.__data__=new ci(re);this.size=me.size}function Gn(){this.__data__=new ci,this.size=0}function Qn(re){var me=this.__data__,Ne=me.delete(re);return this.size=me.size,Ne}function In(re){return this.__data__.get(re)}function vr(re){return this.__data__.has(re)}function Vr(re,me){var Ne=this.__data__;if(Ne instanceof ci){var Ot=Ne.__data__;if(!Pi||Ot.length<n-1)return Ot.push([re,me]),this.size=++Ne.size,this;Ne=this.__data__=new te(Ot)}return Ne.set(re,me),this.size=Ne.size,this}rn.prototype.clear=Gn,rn.prototype.delete=Qn,rn.prototype.get=In,rn.prototype.has=vr,rn.prototype.set=Vr;function Qt(re,me){var Ne=Np(re),Ot=!Ne&&Sl(re),Yn=!Ne&&!Ot&&Op(re),Fr=!Ne&&!Ot&&!Yn&&_P(re),si=Ne||Ot||Yn||Fr,Zn=si?je(re.length,String):[],oi=Zn.length;for(var gs in re)si&&(gs=="length"||Yn&&(gs=="offset"||gs=="parent")||Fr&&(gs=="buffer"||gs=="byteLength"||gs=="byteOffset")||It(gs,oi))||Zn.push(gs);return Zn}function br(re,me,Ne){(Ne!==void 0&&!yc(re[me],Ne)||Ne===void 0&&!(me in re))&&Ui(re,me,Ne)}function ii(re,me,Ne){var Ot=re[me];(!(he.call(re,me)&&yc(Ot,Ne))||Ne===void 0&&!(me in re))&&Ui(re,me,Ne)}function dr(re,me){for(var Ne=re.length;Ne--;)if(yc(re[Ne][0],me))return Ne;return-1}function Ui(re,me,Ne){me=="__proto__"&&Dn?Dn(re,me,{configurable:!0,enumerable:!0,value:Ne,writable:!0}):re[me]=Ne}var lo=Be();function di(re){return re==null?re===void 0?S:y:Xt&&Xt in Object(re)?et(re):sa(re)}function Ao(re){return Tl(re)&&di(re)==a}function Ji(re){if(!Dp(re)||Jn(re))return!1;var me=mT(re)?Re:V;return me.test(yP(re))}function Zi(re){return Tl(re)&&bP(re.length)&&!!j[di(re)]}function ia(re){if(!Dp(re))return qr(re);var me=Hr(re),Ne=[];for(var Ot in re)Ot=="constructor"&&(me||!he.call(re,Ot))||Ne.push(Ot);return Ne}function Va(re,me,Ne,Ot,Yn){re!==me&&lo(me,function(Fr,si){if(Yn||(Yn=new rn),Dp(Fr))uo(re,me,si,Ne,Va,Ot,Yn);else{var Zn=Ot?Ot(Pp(re,si),Fr,si+"",re,me,Yn):void 0;Zn===void 0&&(Zn=Fr),br(re,si,Zn)}},wv)}function uo(re,me,Ne,Ot,Yn,Fr,si){var Zn=Pp(re,Ne),oi=Pp(me,Ne),gs=si.get(oi);if(gs){br(re,Ne,gs);return}var oa=Fr?Fr(Zn,oi,Ne+"",re,me,si):void 0,xv=oa===void 0;if(xv){var Mp=Np(oi),__=!Mp&&Op(oi),w_=!Mp&&!__&&_P(oi);oa=oi,Mp||__||w_?Np(Zn)?oa=Zn:vP(Zn)?oa=be(Zn):__?(xv=!1,oa=Y(oi)):w_?(xv=!1,oa=ee(oi)):oa=[]:$5(oi)||Sl(oi)?(oa=Zn,Sl(Zn)?oa=_v(Zn):(!Dp(Zn)||mT(Zn))&&(oa=ct(oi))):xv=!1}xv&&(si.set(oi,oa),Yn(oa,oi,Ot,Fr,si),si.delete(oi)),br(re,Ne,oa)}function gc(re,me){return pT(Wf(re,me,Sg),re+"")}var qf=Dn?function(re,me){return Dn(re,"toString",{configurable:!0,enumerable:!1,value:Ev(me),writable:!0})}:Sg;function Y(re,me){return re.slice()}function ce(re){var me=new re.constructor(re.byteLength);return new xt(me).set(new xt(re)),me}function ee(re,me){var Ne=ce(re.buffer);return new re.constructor(Ne,re.byteOffset,re.length)}function be(re,me){var Ne=-1,Ot=re.length;for(me||(me=Array(Ot));++Ne<Ot;)me[Ne]=re[Ne];return me}function _e(re,me,Ne,Ot){var Yn=!Ne;Ne||(Ne={});for(var Fr=-1,si=me.length;++Fr<si;){var Zn=me[Fr],oi=void 0;oi===void 0&&(oi=re[Zn]),Yn?Ui(Ne,Zn,oi):ii(Ne,Zn,oi)}return Ne}function ve(re){return gc(function(me,Ne){var Ot=-1,Yn=Ne.length,Fr=Yn>1?Ne[Yn-1]:void 0,si=Yn>2?Ne[2]:void 0;for(Fr=re.length>3&&typeof Fr=="function"?(Yn--,Fr):void 0,si&&kn(Ne[0],Ne[1],si)&&(Fr=Yn<3?void 0:Fr,Yn=1),me=Object(me);++Ot<Yn;){var Zn=Ne[Ot];Zn&&re(me,Zn,Ot,Fr)}return me})}function Be(re){return function(me,Ne,Ot){for(var Yn=-1,Fr=Object(me),si=Ot(me),Zn=si.length;Zn--;){var oi=si[++Yn];if(Ne(Fr[oi],oi,Fr)===!1)break}return me}}function Je(re,me){var Ne=re.__data__;return Lt(me)?Ne[typeof me=="string"?"string":"hash"]:Ne.map}function Ze(re,me){var Ne=Fe(re,me);return Ji(Ne)?Ne:void 0}function et(re){var me=he.call(re,Xt),Ne=re[Xt];try{re[Xt]=void 0;var Ot=!0}catch{}var Yn=nt.call(re);return Ot&&(me?re[Xt]=Ne:delete re[Xt]),Yn}function ct(re){return typeof re.constructor=="function"&&!Hr(re)?Un(An(re)):{}}function It(re,me){var Ne=typeof re;return me=me??o,!!me&&(Ne=="number"||Ne!="symbol"&&W.test(re))&&re>-1&&re%1==0&&re<me}function kn(re,me,Ne){if(!Dp(Ne))return!1;var Ot=typeof me;return(Ot=="number"?b_(Ne)&&It(me,Ne.length):Ot=="string"&&me in Ne)?yc(Ne[me],re):!1}function Lt(re){var me=typeof re;return me=="string"||me=="number"||me=="symbol"||me=="boolean"?re!=="__proto__":re===null}function Jn(re){return!!Ue&&Ue in re}function Hr(re){var me=re&&re.constructor,Ne=typeof me=="function"&&me.prototype||He;return re===Ne}function qr(re){var me=[];if(re!=null)for(var Ne in Object(re))me.push(Ne);return me}function sa(re){return nt.call(re)}function Wf(re,me,Ne){return me=ir(me===void 0?re.length-1:me,0),function(){for(var Ot=arguments,Yn=-1,Fr=ir(Ot.length-me,0),si=Array(Fr);++Yn<Fr;)si[Yn]=Ot[me+Yn];Yn=-1;for(var Zn=Array(me+1);++Yn<me;)Zn[Yn]=Ot[Yn];return Zn[me]=Ne(si),Ke(re,this,Zn)}}function Pp(re,me){if(!(me==="constructor"&&typeof re[me]=="function")&&me!="__proto__")return re[me]}var pT=bv(qf);function bv(re){var me=0,Ne=0;return function(){var Ot=ao(),Yn=s-(Ot-Ne);if(Ne=Ot,Yn>0){if(++me>=i)return arguments[0]}else me=0;return re.apply(void 0,arguments)}}function yP(re){if(re!=null){try{return Ee.call(re)}catch{}try{return re+""}catch{}}return""}function yc(re,me){return re===me||re!==re&&me!==me}var Sl=Ao(function(){return arguments}())?Ao:function(re){return Tl(re)&&he.call(re,"callee")&&!yr.call(re,"callee")},Np=Array.isArray;function b_(re){return re!=null&&bP(re.length)&&!mT(re)}function vP(re){return Tl(re)&&b_(re)}var Op=rr||EP;function mT(re){if(!Dp(re))return!1;var me=di(re);return me==h||me==p||me==u||me==_}function bP(re){return typeof re=="number"&&re>-1&&re%1==0&&re<=o}function Dp(re){var me=typeof re;return re!=null&&(me=="object"||me=="function")}function Tl(re){return re!=null&&typeof re=="object"}function $5(re){if(!Tl(re)||di(re)!=b)return!1;var me=An(re);if(me===null)return!0;var Ne=he.call(me,"constructor")&&me.constructor;return typeof Ne=="function"&&Ne instanceof Ne&&Ee.call(Ne)==ye}var _P=de?Oe(de):Zi;function _v(re){return _e(re,wv(re))}function wv(re){return b_(re)?Qt(re):ia(re)}var wP=ve(function(re,me,Ne){Va(re,me,Ne)});function Ev(re){return function(){return re}}function Sg(re){return re}function EP(){return!1}e.exports=wP})(VM,VM.exports);var dft=VM.exports;const DX=mu(dft),OT="@REVISIT_COMMS",fft={minHeight:"500px",width:"100%",border:0};function hft({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=tc(),r=Xc(),i=xTe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=fp(),l=hc(),u=I.useCallback((c,d)=>{var f,h;(h=(f=s.current)==null?void 0:f.contentWindow)==null||h.postMessage({error:!1,type:`${OT}/${c}`,iframeId:o,message:d},"*")},[s,o]);return I.useEffect(()=>{const c=d=>{const{data:f}=d;if(typeof f=="object"&&o===f.iframeId)switch(f.type){case`${OT}/WINDOW_READY`:e.parameters&&u("STUDY_DATA",e.parameters);break;case`${OT}/READY`:s.current&&(s.current.style.height=`${f.message.documentHeight}px`);break;case`${OT}/ANSWERS`:r(t(f.message));break;case`${OT}/PROVENANCE`:r(n(f.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,l,e,u,t,n]),v.jsx("iframe",{ref:s,src:`${dd}${e.path}?trialid=${a}&id=${o}`,style:fft})}async function MX(e){const n=await(await fetch(`${dd}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function Vk({email:e,path:t}){const n=ag();return v.jsxs(Of,{fluid:!0,my:50,maw:800,mx:"auto",children:[v.jsx(xi,{order:2,children:v.jsx(Xe,{span:!0,c:"orange",children:"404"})}),v.jsxs(Xe,{children:[v.jsx(Xe,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),v.jsx(Hc,{h:"lg"}),v.jsxs(sf,{children:[v.jsx(sf.Item,{children:v.jsx(Xe,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),v.jsx(sf.Item,{children:v.jsxs(Xe,{children:["If you're a participant, please contact the study administrator"," ",e&&v.jsxs(v.Fragment,{children:["at"," ",v.jsxs(qy,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const pft={maxWidth:"100%"};function mft({currentConfig:e}){const t={...pft,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await MX(e.path);s(!!a),r(!1)}o()},[e]),n||i?v.jsx(Gy,{mx:"auto",src:`${dd}${e.path}`,style:t}):v.jsx(Vk,{path:e.path})}function gft({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await MX(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?v.jsx(cl,{text:t}):v.jsx(Vk,{path:e.path})}function _f(){return Qo(e=>e.config)}function $X(){const{answers:e}=Qo(i=>i),t=lg(),r=`${fp()}_${t}`;return e[r]}const yft=_1e(zdt);var vft=yft;function bft(e,t){var n,r="",i=0,s=!0,o=0,a;function l(){return a=e.charAt(o),o++,a}for(l(),a==="-"&&(r="-",l());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,l();if(s&&i--,a===".")for(r+=".";l()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,l(),(a==="-"||a==="+")&&(r+=a,l());a>="0"&&a<="9";)r+=a,l();for(;a&&a<=" ";)l();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function _ft(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function wft(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function Eft(e){return e.__COMMENTS__}function xft(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var a6={EOL:vft.EOL||`
`,tryParseNumber:bft,createComment:_ft,removeComment:wft,getComment:Eft,forceComment:xft},Sft="3.2.1";function Tft(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return vce}else if(e.length===0)return vce;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return Aft(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),Cft.bind(null,n)}function Cft(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function vce(){}function Aft(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function lCe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}lCe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function uCe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}uCe.description="parse hexadecimal numbers prefixed with 0x";function cCe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}cCe.description="support ISO dates";var LX={loadDsf:Tft,std:{math:lCe,hex:uCe,date:cCe}},Ift=function(e,t){var n=a6,r=LX,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},l,u;function c(){s=0,o=" "}function d($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function f($){var D,M=0,B=1;for(D=s-1;D>0&&i[D]!==`
`;D--,M++);for(;D>0;D--)i[D]===`
`&&B++;throw new Error($+" at line "+B+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var D="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&D.length===0?(h(),g()):D;if(o==="\\")if(h(),o==="u"){for(var B=0,z=0;z<4;z++){h();var U=o.charCodeAt(0),O;o>="0"&&o<="9"?O=U-48:o>="a"&&o<="f"?O=U-97+10:o>="A"&&o<="F"?O=U-65+10:f("Bad \\u char "+o),B=B*16+O}D+=String.fromCharCode(B)}else if(typeof a[o]=="string")D+=a[o];else break;else o===`
`||o==="\r"?f("Bad string containing newline"):D+=o}f("Bad string")}function g(){for(var $="",D=0,M=0;;){var B=p(-M-5);if(!B||B===`
`)break;M++}function z(){for(var U=M;o&&o<=" "&&o!==`
`&&U-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),z());;){if(!o)f("Bad multiline string");else if(o==="'"){if(D++,h(),D===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;D>0;)$+="'",D--;o===`
`?($+=`
`,h(),z()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",D=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=D+M,f("Found whitespace in your key name (use quotes to include)")):f("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):f("Found EOF while looking for a key name (check your syntax)"):d(o)?f("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function b(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function _(){var $=o;for(d(o)&&f("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var D=o==="\r"||o===`
`||o==="";if(D||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(D){$=$.trim();var z=u($);return z!==void 0?z:$}}$+=o}}function w($,D){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var B=i.substr($,M-$+1);for(M=0;M<B.length;M++)if(B[M]>" "){var z=B.indexOf(`
`);if(z>=0){var U=[B.substr(0,z),B.substr(z+1)];return D&&U[0].trim().length===0&&U.shift(),U}else return[B]}return[]}function E($){function D(B,z){var U,O,V,W;switch(typeof B){case"string":B.indexOf(z)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(U=0,V=B.length;U<V;U++)W=D(B[U],z)||W;else for(O in B)Object.prototype.hasOwnProperty.call(B,O)&&(W=D(B[O],z)||W)}return W}function M(B){var z=D($,B);return z?"found '"+B+`' in a string value, your mistake could be with:
  > `+z+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function x(){var $=[],D,M,B;try{if(l&&(D=n.createComment($,{a:[]})),h(),M=s,b(),D&&(B=w(M,!0).join(`
`)),o==="]")return h(),D&&(D.e=[B]),$;for(;o;){if($.push(C()),M=s,b(),o===","&&(h(),M=s,b()),D){var z=w(M);D.a.push([B||"",z[0]||""]),B=z[1]}if(o==="]")return h(),D&&(D.a[D.a.length-1][1]+=B||""),$;b()}f("End of input while parsing an array (missing ']')")}catch(U){throw U.hint=U.hint||E($),U}}function S($){var D="",M={},B,z,U;try{if(l&&(B=n.createComment(M,{c:{},o:[]})),$?z=1:(h(),z=s),b(),B&&(U=w(z,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[U]),h(),M;for(;o;){if(D=y(),b(),o!==":"&&f("Expected ':' instead of '"+o+"'"),h(),M[D]=C(),z=s,b(),o===","&&(h(),z=s,b()),B){var O=w(z);B.c[D]=[U||"",O[0]||""],U=O[1],B.o.push(D)}if(o==="}"&&!$)return h(),B&&(B.c[D][1]+=U||""),M;b()}if($)return M;f("End of input while parsing an object (missing '}')")}catch(V){throw V.hint=V.hint||E(M),V}}function C(){switch(b(),o){case"{":return S();case"[":return x();case"'":case'"':return m(!0);default:return _()}}function A($,D){var M=s;if(b(),o&&f("Syntax error, found trailing characters"),l){var B=D.join(`
`),z=w(M).join(`
`);if(z||B){var U=n.createComment($,n.getComment($));U.r=[B,z]}}return $}function R(){b();var $=l?w(1):null;switch(o){case"{":return A(S(),$);case"[":return A(x(),$);default:return A(C(),$)}}function P(){b();var $=l?w(1):null;switch(o){case"{":return A(S(),$);case"[":return A(x(),$)}try{return A(S(!0),$)}catch(D){c();try{return A(C(),$)}catch{throw D}}}if(typeof e!="string")throw new Error("source is not a string");var L=null,k=!0;return t&&typeof t=="object"&&(l=t.keepWsc,L=t.dsf,k=t.legacyRoot!==!1),u=r.loadDsf(L,"parse"),i=e,c(),k?P():R()},kft=function(e,t){var n=a6,r=LX,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,l=!1,u=!1,c=!1,d=0,f=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,d=t.condense||0,l=t.bracesSameLine,u=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?f=0:f=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,b=Object.keys(i);for(y=b.length-1;y>=0;y--){var _=b[y];g[_].push(i[_][0].length,i[_][1].length)}}var w,E="---\u2028--\uFEFF-",x=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(f===2?"	":"\b")+"\v\f-"+E+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),R={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},P=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,L="",k=0;function $(W,j){return k+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function D(W){return W.replace(x,function(j){var H=R[j];return typeof H=="string"?$(g.esc,H):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,H,G){return W?(S.lastIndex=0,A.lastIndex=0,c||H||S.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(x.lastIndex=0,C.lastIndex=0,x.test(W)?!C.test(W)&&!G&&f?B(W,j):$(g.qstr,D(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var H,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var J=s+j+g.mstr[0];for(H=0;H<G.length;H++)J+=s,G[H]&&(J+=j+G[H]);return J+s+j+g.mstr[1]}function z(W){return W?u||P.test(W)?(x.lastIndex=0,$(g.qkey,x.test(W)?D(W):W)):$(g.key,W):'""'}function U(W,j,H,G){function J(Xt){return Xt&&Xt[Xt[0]==="\r"?1:0]===`
`}function se(Xt){return Xt&&!J(Xt)}function ie(Xt,Dn,rr){if(!Xt)return"";Xt=n.forceComment(Xt);var ir,ao=Xt.length;for(ir=0;ir<ao&&Xt[ir]<=" ";ir++);return rr&&ir>0&&(Xt=Xt.substr(ir)),ir<ao?Dn+$(g.rem,Xt):Xt}var ne=w(W);if(ne!==void 0)return $(g.dsf,ne);switch(typeof W){case"string":return M(W,L,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ue;a&&(ue=n.getComment(W));var xe=Object.prototype.toString.apply(W)==="[object Array]",de=L;L+=o;var Ke=s+de,je=s+L,Oe=H||l?"":Ke,Fe=[],Ae,fe=d?[]:null,Pe=c,He=f,ft=h?"":g.com[0],Ee=0,he,Ue,nt,ye,Re,Ge,Qe,xt,An;if(xe){for(he=0,Ue=W.length;he<Ue;he++){if(Ae=he<Ue-1,ue?(Ge=ue.a[he]||[],Qe=se(Ge[1]),Fe.push(ie(Ge[0],`
`)+je),fe&&(Ge[0]||Ge[1]||Qe)&&(fe=null)):Fe.push(je),k=0,ye=W[he],Fe.push(U(ye,ue?Qe:!1,!0)+(Ae?h:"")),fe){switch(typeof ye){case"string":k=0,c=!0,f=0,fe.push(U(ye,!1,!0)+(Ae?g.com[0]:"")),c=Pe,f=He;break;case"object":if(ye){fe=null;break}default:fe.push(Fe[Fe.length-1]+(Ae?ft:""));break}Ae&&(k+=g.com[0].length-g.com[2]),Ee+=k}ue&&Ge[1]&&Fe.push(ie(Ge[1],Qe?" ":`
`,Qe))}Ue===0?ue&&ue.e&&Fe.push(ie(ue.e[0],`
`)+Ke):Fe.push(Ke),Fe.length===0?xt=$(g.arr,""):(xt=Oe+$(g.arr,Fe.join("")),fe&&(An=fe.join(" "),An.length-Ee<=d&&(xt=$(g.arr,An))))}else{var gr=ue?ue.o.slice():[],yr=[];for(nt in W)Object.prototype.hasOwnProperty.call(W,nt)&&gr.indexOf(nt)<0&&yr.push(nt);m&&yr.sort();var Nr=gr.concat(yr);for(he=0,Ue=Nr.length;he<Ue;he++)if(Ae=he<Ue-1,nt=Nr[he],ue?(Ge=ue.c[nt]||[],Qe=se(Ge[1]),Fe.push(ie(Ge[0],`
`)+je),fe&&(Ge[0]||Ge[1]||Qe)&&(fe=null)):Fe.push(je),k=0,ye=W[nt],Re=U(ye,ue&&Qe),Fe.push(z(nt)+g.col[0]+(J(Re)?"":" ")+Re+(Ae?h:"")),ue&&Ge[1]&&Fe.push(ie(Ge[1],Qe?" ":`
`,Qe)),fe){switch(typeof ye){case"string":k=0,c=!0,f=0,Re=U(ye,!1),c=Pe,f=He,fe.push(z(nt)+g.col[0]+" "+Re+(Ae?g.com[0]:""));break;case"object":if(ye){fe=null;break}default:fe.push(Fe[Fe.length-1]+(Ae?ft:""));break}k+=g.col[0].length-g.col[2],Ae&&(k+=g.com[0].length-g.com[2]),Ee+=k}Ue===0?ue&&ue.e&&Fe.push(ie(ue.e[0],`
`)+Ke):Fe.push(Ke),Fe.length===0?xt=$(g.obj,""):(xt=Oe+$(g.obj,Fe.join("")),fe&&(An=fe.join(" "),An.length-Ee<=d&&(xt=$(g.obj,An))))}return L=de,xt}}w=r.loadDsf(p,"stringify");var O="",V=a?V=(n.getComment(e)||{}).r:null;return V&&V[0]&&(O=V[0]+`
`),O+=U(e,null,!0,!0),V&&(O+=V[1]||""),O},rE=a6;function B2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function zU(e,t){if(!(e===null||typeof e!="object")){var n=rE.getComment(e);n&&rE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)bce(o.a,r,n.a[r],zU(e[r]))&&(s=!0);!s&&n.e&&(o.e=B2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,l=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(l).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=l,o.o=a,r=0,i=a.length;r<i;r++){var u=a[r];bce(o.s,u,n.c[u],zU(e[u]))&&(s=!0)}!s&&n.e&&(o.e=B2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=B2(n.r[0],n.r[1])),s?o:void 0}}function Rft(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Pft(e,t){var n=[];if(UU(e,t,n,[]),n.length>0){var r=HM(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Rft(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),HM(t,r,1)}}function bce(e,t,n,r){var i=B2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function z2(e,t){var n=B2(t.b,t.a);return n.path=e,n}function U2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(z2(s,o)),U2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var l=n.slice().concat([a]),u=e.s[a];u&&(t.push(z2(l,u)),U2(u.x,t,l))});e.e&&t.push(z2(n,e.e))}}function UU(e,t,n,r){if(e){if(t===null||typeof t!="object"){U2(e,n,r);return}var i,s=rE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var l=e.a[a];if(l){var u=r.slice().concat([i]);i<t.length?(s.a[i]=[l.b,l.a],UU(l.x,t[i],n,u)):(n.push(z2(u,l)),U2(l.x,n,u))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var d=r.slice().concat([c]),f=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),f&&(s.c[c]=[f.b,f.a],UU(f.x,t[c],n,d))):f&&(n.push(z2(d,f)),U2(f.x,n,d))}),e.e&&(s.e=[e.e.b,e.e.a])}}function HM(e,t,n){var r=rE.createComment(e,rE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=rE.forceComment(t)),r.r[n]||""}var Nft={extract:function(e){return zU(e,!0)},merge:Pft,header:function(e,t){return HM(e,t,0)},footer:function(e,t){return HM(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var _ce=a6,Oft=Sft,wce=Ift,Ece=kft,Dft=Nft,Mft=LX,FX={parse:wce,stringify:Ece,endOfLine:function(){return _ce.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(_ce.EOL=e)},version:Oft,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,wce(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Ece(e,t)}},comments:Dft,dsf:Mft.std},VU={exports:{}},dCe={},af={},KE={},Hk={},qn={},ZA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(b){if(super(),!e.IDENTIFIER.test(b))throw new Error("CodeGen: name must be a valid identifier");this.str=b}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(b){super(),this._items=typeof b=="string"?[b]:b}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const b=this._items[0];return b===""||b==='""'}get str(){var b;return(b=this._str)!==null&&b!==void 0?b:this._str=this._items.reduce((_,w)=>`${_}${w}`,"")}get names(){var b;return(b=this._names)!==null&&b!==void 0?b:this._names=this._items.reduce((_,w)=>(w instanceof n&&(_[w.str]=(_[w.str]||0)+1),_),{})}}e._Code=r,e.nil=new r("");function i(y,...b){const _=[y[0]];let w=0;for(;w<b.length;)a(_,b[w]),_.push(y[++w]);return new r(_)}e._=i;const s=new r("+");function o(y,...b){const _=[h(y[0])];let w=0;for(;w<b.length;)_.push(s),a(_,b[w]),_.push(s,h(y[++w]));return l(_),new r(_)}e.str=o;function a(y,b){b instanceof r?y.push(...b._items):b instanceof n?y.push(b):y.push(d(b))}e.addCodeArg=a;function l(y){let b=1;for(;b<y.length-1;){if(y[b]===s){const _=u(y[b-1],y[b+1]);if(_!==void 0){y.splice(b-1,3,_);continue}y[b++]="+"}b++}}function u(y,b){if(b==='""')return y;if(y==='""')return b;if(typeof y=="string")return b instanceof n||y[y.length-1]!=='"'?void 0:typeof b!="string"?`${y.slice(0,-1)}${b}"`:b[0]==='"'?y.slice(0,-1)+b.slice(1):void 0;if(typeof b=="string"&&b[0]==='"'&&!(y instanceof n))return`"${y}${b.slice(1)}`}function c(y,b){return b.emptyStr()?y:y.emptyStr()?b:o`${y}${b}`}e.strConcat=c;function d(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function f(y){return new r(h(y))}e.stringify=f;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(ZA);var HU={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=ZA;class n extends Error{constructor(u){super(`CodeGen: "code" for ${u} not defined`),this.value=u.value}}var r;(function(l){l[l.Started=0]="Started",l[l.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:u,parent:c}={}){this._names={},this._prefixes=u,this._parent=c}toName(u){return u instanceof t.Name?u:this.name(u)}name(u){return new t.Name(this._newName(u))}_newName(u){const c=this._names[u]||this._nameGroup(u);return`${u}${c.index++}`}_nameGroup(u){var c,d;if(!((d=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||d===void 0)&&d.has(u)||this._prefixes&&!this._prefixes.has(u))throw new Error(`CodeGen: prefix "${u}" is not allowed in this scope`);return this._names[u]={prefix:u,index:0}}}e.Scope=i;class s extends t.Name{constructor(u,c){super(c),this.prefix=u}setValue(u,{property:c,itemIndex:d}){this.value=u,this.scopePath=(0,t._)`.${new t.Name(c)}[${d}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(u){super(u),this._values={},this._scope=u.scope,this.opts={...u,_n:u.lines?o:t.nil}}get(){return this._scope}name(u){return new s(u,this._newName(u))}value(u,c){var d;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const f=this.toName(u),{prefix:h}=f,p=(d=c.key)!==null&&d!==void 0?d:c.ref;let m=this._values[h];if(m){const b=m.get(p);if(b)return b}else m=this._values[h]=new Map;m.set(p,f);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,f.setValue(c,{property:h,itemIndex:y}),f}getValue(u,c){const d=this._values[u];if(d)return d.get(c)}scopeRefs(u,c=this._values){return this._reduceValues(c,d=>{if(d.scopePath===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return(0,t._)`${u}${d.scopePath}`})}scopeCode(u=this._values,c,d){return this._reduceValues(u,f=>{if(f.value===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return f.value.code},c,d)}_reduceValues(u,c,d={},f){let h=t.nil;for(const p in u){const m=u[p];if(!m)continue;const g=d[p]=d[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let b=c(y);if(b){const _=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${_} ${y} = ${b};${this.opts._n}`}else if(b=f==null?void 0:f(y))h=(0,t._)`${h}${b}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(HU);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=ZA,n=HU;var r=ZA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=HU;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(H,G){return this}}class o extends s{constructor(H,G,J){super(),this.varKind=H,this.name=G,this.rhs=J}render({es5:H,_n:G}){const J=H?n.varKinds.var:this.varKind,se=this.rhs===void 0?"":` = ${this.rhs}`;return`${J} ${this.name}${se};`+G}optimizeNames(H,G){if(H[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,H,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(H,G,J){super(),this.lhs=H,this.rhs=G,this.sideEffects=J}render({_n:H}){return`${this.lhs} = ${this.rhs};`+H}optimizeNames(H,G){if(!(this.lhs instanceof t.Name&&!H[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,H,G),this}get names(){const H=this.lhs instanceof t.Name?{}:{...this.lhs.names};return k(H,this.rhs)}}class l extends a{constructor(H,G,J,se){super(H,J,se),this.op=G}render({_n:H}){return`${this.lhs} ${this.op}= ${this.rhs};`+H}}class u extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`${this.label}:`+H}}class c extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`break${this.label?` ${this.label}`:""};`+H}}class d extends s{constructor(H){super(),this.error=H}render({_n:H}){return`throw ${this.error};`+H}get names(){return this.error.names}}class f extends s{constructor(H){super(),this.code=H}render({_n:H}){return`${this.code};`+H}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(H,G){return this.code=$(this.code,H,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(H=[]){super(),this.nodes=H}render(H){return this.nodes.reduce((G,J)=>G+J.render(H),"")}optimizeNodes(){const{nodes:H}=this;let G=H.length;for(;G--;){const J=H[G].optimizeNodes();Array.isArray(J)?H.splice(G,1,...J):J?H[G]=J:H.splice(G,1)}return H.length>0?this:void 0}optimizeNames(H,G){const{nodes:J}=this;let se=J.length;for(;se--;){const ie=J[se];ie.optimizeNames(H,G)||(D(H,ie.names),J.splice(se,1))}return J.length>0?this:void 0}get names(){return this.nodes.reduce((H,G)=>L(H,G.names),{})}}class p extends h{render(H){return"{"+H._n+super.render(H)+"}"+H._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(H,G){super(G),this.condition=H}render(H){let G=`if(${this.condition})`+super.render(H);return this.else&&(G+="else "+this.else.render(H)),G}optimizeNodes(){super.optimizeNodes();const H=this.condition;if(H===!0)return this.nodes;let G=this.else;if(G){const J=G.optimizeNodes();G=this.else=Array.isArray(J)?new g(J):J}if(G)return H===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(H),G instanceof y?[G]:G.nodes);if(!(H===!1||!this.nodes.length))return this}optimizeNames(H,G){var J;if(this.else=(J=this.else)===null||J===void 0?void 0:J.optimizeNames(H,G),!!(super.optimizeNames(H,G)||this.else))return this.condition=$(this.condition,H,G),this}get names(){const H=super.names;return k(H,this.condition),this.else&&L(H,this.else.names),H}}y.kind="if";class b extends p{}b.kind="for";class _ extends b{constructor(H){super(),this.iteration=H}render(H){return`for(${this.iteration})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iteration=$(this.iteration,H,G),this}get names(){return L(super.names,this.iteration.names)}}class w extends b{constructor(H,G,J,se){super(),this.varKind=H,this.name=G,this.from=J,this.to=se}render(H){const G=H.es5?n.varKinds.var:this.varKind,{name:J,from:se,to:ie}=this;return`for(${G} ${J}=${se}; ${J}<${ie}; ${J}++)`+super.render(H)}get names(){const H=k(super.names,this.from);return k(H,this.to)}}class E extends b{constructor(H,G,J,se){super(),this.loop=H,this.varKind=G,this.name=J,this.iterable=se}render(H){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iterable=$(this.iterable,H,G),this}get names(){return L(super.names,this.iterable.names)}}class x extends p{constructor(H,G,J){super(),this.name=H,this.args=G,this.async=J}render(H){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(H)}}x.kind="func";class S extends h{render(H){return"return "+super.render(H)}}S.kind="return";class C extends p{render(H){let G="try"+super.render(H);return this.catch&&(G+=this.catch.render(H)),this.finally&&(G+=this.finally.render(H)),G}optimizeNodes(){var H,G;return super.optimizeNodes(),(H=this.catch)===null||H===void 0||H.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(H,G){var J,se;return super.optimizeNames(H,G),(J=this.catch)===null||J===void 0||J.optimizeNames(H,G),(se=this.finally)===null||se===void 0||se.optimizeNames(H,G),this}get names(){const H=super.names;return this.catch&&L(H,this.catch.names),this.finally&&L(H,this.finally.names),H}}class A extends p{constructor(H){super(),this.error=H}render(H){return`catch(${this.error})`+super.render(H)}}A.kind="catch";class R extends p{render(H){return"finally"+super.render(H)}}R.kind="finally";class P{constructor(H,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=H,this._scope=new n.Scope({parent:H}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(H){return this._scope.name(H)}scopeName(H){return this._extScope.name(H)}scopeValue(H,G){const J=this._extScope.value(H,G);return(this._values[J.prefix]||(this._values[J.prefix]=new Set)).add(J),J}getScopeValue(H,G){return this._extScope.getValue(H,G)}scopeRefs(H){return this._extScope.scopeRefs(H,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(H,G,J,se){const ie=this._scope.toName(G);return J!==void 0&&se&&(this._constants[ie.str]=J),this._leafNode(new o(H,ie,J)),ie}const(H,G,J){return this._def(n.varKinds.const,H,G,J)}let(H,G,J){return this._def(n.varKinds.let,H,G,J)}var(H,G,J){return this._def(n.varKinds.var,H,G,J)}assign(H,G,J){return this._leafNode(new a(H,G,J))}add(H,G){return this._leafNode(new l(H,e.operators.ADD,G))}code(H){return typeof H=="function"?H():H!==t.nil&&this._leafNode(new f(H)),this}object(...H){const G=["{"];for(const[J,se]of H)G.length>1&&G.push(","),G.push(J),(J!==se||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,se));return G.push("}"),new t._Code(G)}if(H,G,J){if(this._blockNode(new y(H)),G&&J)this.code(G).else().code(J).endIf();else if(G)this.code(G).endIf();else if(J)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(H){return this._elseNode(new y(H))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(H,G){return this._blockNode(H),G&&this.code(G).endFor(),this}for(H,G){return this._for(new _(H),G)}forRange(H,G,J,se,ie=this.opts.es5?n.varKinds.var:n.varKinds.let){const ne=this._scope.toName(H);return this._for(new w(ie,ne,G,J),()=>se(ne))}forOf(H,G,J,se=n.varKinds.const){const ie=this._scope.toName(H);if(this.opts.es5){const ne=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${ne}.length`,ue=>{this.var(ie,(0,t._)`${ne}[${ue}]`),J(ie)})}return this._for(new E("of",se,ie,G),()=>J(ie))}forIn(H,G,J,se=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(H,(0,t._)`Object.keys(${G})`,J);const ie=this._scope.toName(H);return this._for(new E("in",se,ie,G),()=>J(ie))}endFor(){return this._endBlockNode(b)}label(H){return this._leafNode(new u(H))}break(H){return this._leafNode(new c(H))}return(H){const G=new S;if(this._blockNode(G),this.code(H),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(H,G,J){if(!G&&!J)throw new Error('CodeGen: "try" without "catch" and "finally"');const se=new C;if(this._blockNode(se),this.code(H),G){const ie=this.name("e");this._currNode=se.catch=new A(ie),G(ie)}return J&&(this._currNode=se.finally=new R,this.code(J)),this._endBlockNode(A,R)}throw(H){return this._leafNode(new d(H))}block(H,G){return this._blockStarts.push(this._nodes.length),H&&this.code(H).endBlock(G),this}endBlock(H){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const J=this._nodes.length-G;if(J<0||H!==void 0&&J!==H)throw new Error(`CodeGen: wrong number of nodes: ${J} vs ${H} expected`);return this._nodes.length=G,this}func(H,G=t.nil,J,se){return this._blockNode(new x(H,G,J)),se&&this.code(se).endFunc(),this}endFunc(){return this._endBlockNode(x)}optimize(H=1){for(;H-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(H){return this._currNode.nodes.push(H),this}_blockNode(H){this._currNode.nodes.push(H),this._nodes.push(H)}_endBlockNode(H,G){const J=this._currNode;if(J instanceof H||G&&J instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${H.kind}/${G.kind}`:H.kind}"`)}_elseNode(H){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=H,this}get _root(){return this._nodes[0]}get _currNode(){const H=this._nodes;return H[H.length-1]}set _currNode(H){const G=this._nodes;G[G.length-1]=H}}e.CodeGen=P;function L(j,H){for(const G in H)j[G]=(j[G]||0)+(H[G]||0);return j}function k(j,H){return H instanceof t._CodeOrName?L(j,H.names):j}function $(j,H,G){if(j instanceof t.Name)return J(j);if(!se(j))return j;return new t._Code(j._items.reduce((ie,ne)=>(ne instanceof t.Name&&(ne=J(ne)),ne instanceof t._Code?ie.push(...ne._items):ie.push(ne),ie),[]));function J(ie){const ne=G[ie.str];return ne===void 0||H[ie.str]!==1?ie:(delete H[ie.str],ne)}function se(ie){return ie instanceof t._Code&&ie._items.some(ne=>ne instanceof t.Name&&H[ne.str]===1&&G[ne.str]!==void 0)}}function D(j,H){for(const G in H)j[G]=(j[G]||0)-(H[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const B=V(e.operators.AND);function z(...j){return j.reduce(B)}e.and=z;const U=V(e.operators.OR);function O(...j){return j.reduce(U)}e.or=O;function V(j){return(H,G)=>H===t.nil?G:G===t.nil?H:(0,t._)`${W(H)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(qn);var At={};Object.defineProperty(At,"__esModule",{value:!0});At.checkStrictMode=At.getErrorPath=At.Type=At.useFunc=At.setEvaluated=At.evaluatedPropsToName=At.mergeEvaluated=At.eachItem=At.unescapeJsonPointer=At.escapeJsonPointer=At.escapeFragment=At.unescapeFragment=At.schemaRefOrVal=At.schemaHasRulesButRef=At.schemaHasRules=At.checkUnknownRules=At.alwaysValidSchema=At.toHash=void 0;const li=qn,$ft=ZA;function Lft(e){const t={};for(const n of e)t[n]=!0;return t}At.toHash=Lft;function Fft(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(fCe(e,t),!hCe(t,e.self.RULES.all))}At.alwaysValidSchema=Fft;function fCe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||gCe(e,`unknown keyword: "${s}"`)}At.checkUnknownRules=fCe;function hCe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}At.schemaHasRules=hCe;function jft(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}At.schemaHasRulesButRef=jft;function Bft({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,li._)`${n}`}return(0,li._)`${e}${t}${(0,li.getProperty)(r)}`}At.schemaRefOrVal=Bft;function zft(e){return pCe(decodeURIComponent(e))}At.unescapeFragment=zft;function Uft(e){return encodeURIComponent(jX(e))}At.escapeFragment=Uft;function jX(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}At.escapeJsonPointer=jX;function pCe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}At.unescapeJsonPointer=pCe;function Vft(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}At.eachItem=Vft;function xce({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const l=o===void 0?s:o instanceof li.Name?(s instanceof li.Name?e(i,s,o):t(i,s,o),o):s instanceof li.Name?(t(i,o,s),s):n(s,o);return a===li.Name&&!(l instanceof li.Name)?r(i,l):l}}At.mergeEvaluated={props:xce({mergeNames:(e,t,n)=>e.if((0,li._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,li._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,li._)`${n} || {}`).code((0,li._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,li._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,li._)`${n} || {}`),BX(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:mCe}),items:xce({mergeNames:(e,t,n)=>e.if((0,li._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,li._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,li._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,li._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function mCe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,li._)`{}`);return t!==void 0&&BX(e,n,t),n}At.evaluatedPropsToName=mCe;function BX(e,t,n){Object.keys(n).forEach(r=>e.assign((0,li._)`${t}${(0,li.getProperty)(r)}`,!0))}At.setEvaluated=BX;const Sce={};function Hft(e,t){return e.scopeValue("func",{ref:t,code:Sce[t.code]||(Sce[t.code]=new $ft._Code(t.code))})}At.useFunc=Hft;var qU;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(qU||(At.Type=qU={}));function qft(e,t,n){if(e instanceof li.Name){const r=t===qU.Num;return n?r?(0,li._)`"[" + ${e} + "]"`:(0,li._)`"['" + ${e} + "']"`:r?(0,li._)`"/" + ${e}`:(0,li._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,li.getProperty)(e).toString():"/"+jX(e)}At.getErrorPath=qft;function gCe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}At.checkStrictMode=gCe;var hp={};Object.defineProperty(hp,"__esModule",{value:!0});const da=qn,Wft={data:new da.Name("data"),valCxt:new da.Name("valCxt"),instancePath:new da.Name("instancePath"),parentData:new da.Name("parentData"),parentDataProperty:new da.Name("parentDataProperty"),rootData:new da.Name("rootData"),dynamicAnchors:new da.Name("dynamicAnchors"),vErrors:new da.Name("vErrors"),errors:new da.Name("errors"),this:new da.Name("this"),self:new da.Name("self"),scope:new da.Name("scope"),json:new da.Name("json"),jsonPos:new da.Name("jsonPos"),jsonLen:new da.Name("jsonLen"),jsonPart:new da.Name("jsonPart")};hp.default=Wft;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=qn,n=At,r=hp;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,b,_){const{it:w}=g,{gen:E,compositeRule:x,allErrors:S}=w,C=d(g,y,b);_??(x||S)?l(E,C):u(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,b){const{it:_}=g,{gen:w,compositeRule:E,allErrors:x}=_,S=d(g,y,b);l(w,S),E||x||u(_,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:b,data:_,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const x=g.name("err");g.forRange("i",w,r.default.errors,S=>{g.const(x,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${x}.instancePath === undefined`,()=>g.assign((0,t._)`${x}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${x}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${x}.schema`,b),g.assign((0,t._)`${x}.data`,_))})}e.extendErrors=a;function l(g,y){const b=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${b}]`),(0,t._)`${r.default.vErrors}.push(${b})`),g.code((0,t._)`${r.default.errors}++`)}function u(g,y){const{gen:b,validateName:_,schemaEnv:w}=g;w.$async?b.throw((0,t._)`new ${g.ValidationError}(${y})`):(b.assign((0,t._)`${_}.errors`,y),b.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function d(g,y,b){const{createErrors:_}=g.it;return _===!1?(0,t._)`{}`:f(g,y,b)}function f(g,y,b={}){const{gen:_,it:w}=g,E=[h(w,b),p(g,b)];return m(g,y,E),_.object(...E)}function h({errorPath:g},{instancePath:y}){const b=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,b)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:b,parentSchema:_}){let w=_?y:(0,t.str)`${y}/${g}`;return b&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(b,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:b},_){const{keyword:w,data:E,schemaValue:x,it:S}=g,{opts:C,propertyName:A,topSchemaRef:R,schemaPath:P}=S;_.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&_.push([c.message,typeof b=="function"?b(g):b]),C.verbose&&_.push([c.schema,x],[c.parentSchema,(0,t._)`${R}${P}`],[r.default.data,E]),A&&_.push([c.propertyName,A])}})(Hk);Object.defineProperty(KE,"__esModule",{value:!0});KE.boolOrEmptySchema=KE.topBoolOrEmptySchema=void 0;const Gft=Hk,Yft=qn,Kft=hp,Xft={message:"boolean schema is false"};function Qft(e){const{gen:t,schema:n,validateName:r}=e;n===!1?yCe(e,!1):typeof n=="object"&&n.$async===!0?t.return(Kft.default.data):(t.assign((0,Yft._)`${r}.errors`,null),t.return(!0))}KE.topBoolOrEmptySchema=Qft;function Jft(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),yCe(e)):n.var(t,!0)}KE.boolOrEmptySchema=Jft;function yCe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Gft.reportError)(i,Xft,void 0,t)}var Vs={},rb={};Object.defineProperty(rb,"__esModule",{value:!0});rb.getRules=rb.isJSONType=void 0;const Zft=["string","number","integer","boolean","null","object","array"],eht=new Set(Zft);function tht(e){return typeof e=="string"&&eht.has(e)}rb.isJSONType=tht;function nht(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}rb.getRules=nht;var ym={};Object.defineProperty(ym,"__esModule",{value:!0});ym.shouldUseRule=ym.shouldUseGroup=ym.schemaHasRulesForType=void 0;function rht({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&vCe(e,r)}ym.schemaHasRulesForType=rht;function vCe(e,t){return t.rules.some(n=>bCe(e,n))}ym.shouldUseGroup=vCe;function bCe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}ym.shouldUseRule=bCe;Object.defineProperty(Vs,"__esModule",{value:!0});Vs.reportTypeError=Vs.checkDataTypes=Vs.checkDataType=Vs.coerceAndCheckDataType=Vs.getJSONTypes=Vs.getSchemaTypes=Vs.DataType=void 0;const iht=rb,sht=ym,oht=Hk,Mn=qn,_Ce=At;var iE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(iE||(Vs.DataType=iE={}));function aht(e){const t=wCe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Vs.getSchemaTypes=aht;function wCe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(iht.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Vs.getJSONTypes=wCe;function lht(e,t){const{gen:n,data:r,opts:i}=e,s=uht(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,sht.schemaHasRulesForType)(e,t[0]));if(o){const a=zX(t,r,i.strictNumbers,iE.Wrong);n.if(a,()=>{s.length?cht(e,t,s):UX(e)})}return o}Vs.coerceAndCheckDataType=lht;const ECe=new Set(["string","number","integer","boolean","null"]);function uht(e,t){return t?e.filter(n=>ECe.has(n)||t==="array"&&n==="array"):[]}function cht(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,Mn._)`typeof ${i}`),a=r.let("coerced",(0,Mn._)`undefined`);s.coerceTypes==="array"&&r.if((0,Mn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,Mn._)`${i}[0]`).assign(o,(0,Mn._)`typeof ${i}`).if(zX(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,Mn._)`${a} !== undefined`);for(const u of n)(ECe.has(u)||u==="array"&&s.coerceTypes==="array")&&l(u);r.else(),UX(e),r.endIf(),r.if((0,Mn._)`${a} !== undefined`,()=>{r.assign(i,a),dht(e,a)});function l(u){switch(u){case"string":r.elseIf((0,Mn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Mn._)`"" + ${i}`).elseIf((0,Mn._)`${i} === null`).assign(a,(0,Mn._)`""`);return;case"number":r.elseIf((0,Mn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,Mn._)`+${i}`);return;case"integer":r.elseIf((0,Mn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,Mn._)`+${i}`);return;case"boolean":r.elseIf((0,Mn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,Mn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,Mn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,Mn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,Mn._)`[${i}]`)}}}function dht({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,Mn._)`${t} !== undefined`,()=>e.assign((0,Mn._)`${t}[${n}]`,r))}function WU(e,t,n,r=iE.Correct){const i=r===iE.Correct?Mn.operators.EQ:Mn.operators.NEQ;let s;switch(e){case"null":return(0,Mn._)`${t} ${i} null`;case"array":s=(0,Mn._)`Array.isArray(${t})`;break;case"object":s=(0,Mn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,Mn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,Mn._)`typeof ${t} ${i} ${e}`}return r===iE.Correct?s:(0,Mn.not)(s);function o(a=Mn.nil){return(0,Mn.and)((0,Mn._)`typeof ${t} == "number"`,a,n?(0,Mn._)`isFinite(${t})`:Mn.nil)}}Vs.checkDataType=WU;function zX(e,t,n,r){if(e.length===1)return WU(e[0],t,n,r);let i;const s=(0,_Ce.toHash)(e);if(s.array&&s.object){const o=(0,Mn._)`typeof ${t} != "object"`;i=s.null?o:(0,Mn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=Mn.nil;s.number&&delete s.integer;for(const o in s)i=(0,Mn.and)(i,WU(o,t,n,r));return i}Vs.checkDataTypes=zX;const fht={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Mn._)`{type: ${e}}`:(0,Mn._)`{type: ${t}}`};function UX(e){const t=hht(e);(0,oht.reportError)(t,fht)}Vs.reportTypeError=UX;function hht(e){const{gen:t,data:n,schema:r}=e,i=(0,_Ce.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var l6={};Object.defineProperty(l6,"__esModule",{value:!0});l6.assignDefaults=void 0;const P_=qn,pht=At;function mht(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)Tce(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>Tce(e,s,i.default))}l6.assignDefaults=mht;function Tce(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,P_._)`${s}${(0,P_.getProperty)(t)}`;if(i){(0,pht.checkStrictMode)(e,`default is ignored for: ${a}`);return}let l=(0,P_._)`${a} === undefined`;o.useDefaults==="empty"&&(l=(0,P_._)`${l} || ${a} === null || ${a} === ""`),r.if(l,(0,P_._)`${a} = ${(0,P_.stringify)(n)}`)}var Eh={},Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.validateUnion=Vn.validateArray=Vn.usePattern=Vn.callValidateCode=Vn.schemaProperties=Vn.allSchemaProperties=Vn.noPropertyInData=Vn.propertyInData=Vn.isOwnProperty=Vn.hasPropFunc=Vn.reportMissingProp=Vn.checkMissingProp=Vn.checkReportMissingProp=void 0;const Si=qn,VX=At,kg=hp,ght=At;function yht(e,t){const{gen:n,data:r,it:i}=e;n.if(qX(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Si._)`${t}`},!0),e.error()})}Vn.checkReportMissingProp=yht;function vht({gen:e,data:t,it:{opts:n}},r,i){return(0,Si.or)(...r.map(s=>(0,Si.and)(qX(e,t,s,n.ownProperties),(0,Si._)`${i} = ${s}`)))}Vn.checkMissingProp=vht;function bht(e,t){e.setParams({missingProperty:t},!0),e.error()}Vn.reportMissingProp=bht;function xCe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Si._)`Object.prototype.hasOwnProperty`})}Vn.hasPropFunc=xCe;function HX(e,t,n){return(0,Si._)`${xCe(e)}.call(${t}, ${n})`}Vn.isOwnProperty=HX;function _ht(e,t,n,r){const i=(0,Si._)`${t}${(0,Si.getProperty)(n)} !== undefined`;return r?(0,Si._)`${i} && ${HX(e,t,n)}`:i}Vn.propertyInData=_ht;function qX(e,t,n,r){const i=(0,Si._)`${t}${(0,Si.getProperty)(n)} === undefined`;return r?(0,Si.or)(i,(0,Si.not)(HX(e,t,n))):i}Vn.noPropertyInData=qX;function SCe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Vn.allSchemaProperties=SCe;function wht(e,t){return SCe(t).filter(n=>!(0,VX.alwaysValidSchema)(e,t[n]))}Vn.schemaProperties=wht;function Eht({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,l,u){const c=u?(0,Si._)`${e}, ${t}, ${r}${i}`:t,d=[[kg.default.instancePath,(0,Si.strConcat)(kg.default.instancePath,s)],[kg.default.parentData,o.parentData],[kg.default.parentDataProperty,o.parentDataProperty],[kg.default.rootData,kg.default.rootData]];o.opts.dynamicRef&&d.push([kg.default.dynamicAnchors,kg.default.dynamicAnchors]);const f=(0,Si._)`${c}, ${n.object(...d)}`;return l!==Si.nil?(0,Si._)`${a}.call(${l}, ${f})`:(0,Si._)`${a}(${f})`}Vn.callValidateCode=Eht;const xht=(0,Si._)`new RegExp`;function Sht({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,Si._)`${i.code==="new RegExp"?xht:(0,ght.useFunc)(e,i)}(${n}, ${r})`})}Vn.usePattern=Sht;function Tht(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const l=t.const("len",(0,Si._)`${n}.length`);t.forRange("i",0,l,u=>{e.subschema({keyword:r,dataProp:u,dataPropType:VX.Type.Num},s),t.if((0,Si.not)(s),a)})}}Vn.validateArray=Tht;function Cht(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(l=>(0,VX.alwaysValidSchema)(i,l))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((l,u)=>{const c=e.subschema({keyword:r,schemaProp:u,compositeRule:!0},a);t.assign(o,(0,Si._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,Si.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Vn.validateUnion=Cht;Object.defineProperty(Eh,"__esModule",{value:!0});Eh.validateKeywordUsage=Eh.validSchemaType=Eh.funcKeywordCode=Eh.macroKeywordCode=void 0;const Xa=qn,i1=hp,Aht=Vn,Iht=Hk;function kht(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),l=TCe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const u=n.name("valid");e.subschema({schema:a,schemaPath:Xa.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:l,compositeRule:!0},u),e.pass(u,()=>e.error(!0))}Eh.macroKeywordCode=kht;function Rht(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:l}=e;Nht(l,t);const u=!a&&t.compile?t.compile.call(l.self,s,o,l):t.validate,c=TCe(r,i,u),d=r.let("valid");e.block$data(d,f),e.ok((n=t.valid)!==null&&n!==void 0?n:d);function f(){if(t.errors===!1)m(),t.modifying&&Cce(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Cce(e),g(()=>Pht(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Xa._)`await `),b=>r.assign(d,!1).if((0,Xa._)`${b} instanceof ${l.ValidationError}`,()=>r.assign(y,(0,Xa._)`${b}.errors`),()=>r.throw(b))),y}function p(){const y=(0,Xa._)`${c}.errors`;return r.assign(y,null),m(Xa.nil),y}function m(y=t.async?(0,Xa._)`await `:Xa.nil){const b=l.opts.passContext?i1.default.this:i1.default.self,_=!("compile"in t&&!a||t.schema===!1);r.assign(d,(0,Xa._)`${y}${(0,Aht.callValidateCode)(e,c,b,_)}`,t.modifying)}function g(y){var b;r.if((0,Xa.not)((b=t.valid)!==null&&b!==void 0?b:d),y)}}Eh.funcKeywordCode=Rht;function Cce(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Xa._)`${r.parentData}[${r.parentDataProperty}]`))}function Pht(e,t){const{gen:n}=e;n.if((0,Xa._)`Array.isArray(${t})`,()=>{n.assign(i1.default.vErrors,(0,Xa._)`${i1.default.vErrors} === null ? ${t} : ${i1.default.vErrors}.concat(${t})`).assign(i1.default.errors,(0,Xa._)`${i1.default.vErrors}.length`),(0,Iht.extendErrors)(e)},()=>e.error())}function Nht({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function TCe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Xa.stringify)(n)})}function Oht(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Eh.validSchemaType=Oht;function Dht({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const l=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(l);else throw new Error(l)}}Eh.validateKeywordUsage=Dht;var F0={};Object.defineProperty(F0,"__esModule",{value:!0});F0.extendSubschemaMode=F0.extendSubschemaData=F0.getSubschema=void 0;const hh=qn,CCe=At;function Mht(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,hh._)`${e.schemaPath}${(0,hh.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,hh._)`${e.schemaPath}${(0,hh.getProperty)(t)}${(0,hh.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,CCe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}F0.getSubschema=Mht;function $ht(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:u,dataPathArr:c,opts:d}=t,f=a.let("data",(0,hh._)`${t.data}${(0,hh.getProperty)(n)}`,!0);l(f),e.errorPath=(0,hh.str)`${u}${(0,CCe.getErrorPath)(n,r,d.jsPropertySyntax)}`,e.parentDataProperty=(0,hh._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const u=i instanceof hh.Name?i:a.let("data",i,!0);l(u),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function l(u){e.data=u,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,u]}}F0.extendSubschemaData=$ht;function Lht(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}F0.extendSubschemaMode=Lht;var Bo={},WX=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const KO=mu(WX);var ACe={exports:{}},f0=ACe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};XO(t,r,i,e,"",e)};f0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};f0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};f0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};f0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function XO(e,t,n,r,i,s,o,a,l,u){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,l,u);for(var c in r){var d=r[c];if(Array.isArray(d)){if(c in f0.arrayKeywords)for(var f=0;f<d.length;f++)XO(e,t,n,d[f],i+"/"+c+"/"+f,s,i,c,r,f)}else if(c in f0.propsKeywords){if(d&&typeof d=="object")for(var h in d)XO(e,t,n,d[h],i+"/"+c+"/"+Fht(h),s,i,c,r,h)}else(c in f0.keywords||e.allKeys&&!(c in f0.skipKeywords))&&XO(e,t,n,d,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,l,u)}}function Fht(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var jht=ACe.exports;Object.defineProperty(Bo,"__esModule",{value:!0});Bo.getSchemaRefs=Bo.resolveUrl=Bo.normalizeId=Bo._getFullPath=Bo.getFullPath=Bo.inlineRef=void 0;const Bht=At,zht=WX,Uht=jht,Vht=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Hht(e,t=!0){return typeof e=="boolean"?!0:t===!0?!GU(e):t?ICe(e)<=t:!1}Bo.inlineRef=Hht;const qht=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function GU(e){for(const t in e){if(qht.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(GU)||typeof n=="object"&&GU(n))return!0}return!1}function ICe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Vht.has(n)&&(typeof e[n]=="object"&&(0,Bht.eachItem)(e[n],r=>t+=ICe(r)),t===1/0))return 1/0}return t}function kCe(e,t="",n){n!==!1&&(t=sE(t));const r=e.parse(t);return RCe(e,r)}Bo.getFullPath=kCe;function RCe(e,t){return e.serialize(t).split("#")[0]+"#"}Bo._getFullPath=RCe;const Wht=/#\/?$/;function sE(e){return e?e.replace(Wht,""):""}Bo.normalizeId=sE;function Ght(e,t,n){return n=sE(n),e.resolve(t,n)}Bo.resolveUrl=Ght;const Yht=/^[a-z_][-a-z0-9._]*$/i;function Kht(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=sE(e[n]||t),s={"":i},o=kCe(r,i,!1),a={},l=new Set;return Uht(e,{allKeys:!0},(d,f,h,p)=>{if(p===void 0)return;const m=o+f;let g=s[p];typeof d[n]=="string"&&(g=y.call(this,d[n])),b.call(this,d.$anchor),b.call(this,d.$dynamicAnchor),s[f]=g;function y(_){const w=this.opts.uriResolver.resolve;if(_=sE(g?w(g,_):_),l.has(_))throw c(_);l.add(_);let E=this.refs[_];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?u(d,E.schema,_):_!==sE(m)&&(_[0]==="#"?(u(d,a[_],_),a[_]=d):this.refs[_]=m),_}function b(_){if(typeof _=="string"){if(!Yht.test(_))throw new Error(`invalid anchor "${_}"`);y.call(this,`#${_}`)}}}),a;function u(d,f,h){if(f!==void 0&&!zht(d,f))throw c(h)}function c(d){return new Error(`reference "${d}" resolves to more than one schema`)}}Bo.getSchemaRefs=Kht;Object.defineProperty(af,"__esModule",{value:!0});af.getData=af.KeywordCxt=af.validateFunctionCode=void 0;const PCe=KE,Ace=Vs,GX=ym,qM=Vs,Xht=l6,V2=Eh,Z8=F0,Ft=qn,yn=hp,Qht=Bo,vm=At,DT=Hk;function Jht(e){if(DCe(e)&&(MCe(e),OCe(e))){tpt(e);return}NCe(e,()=>(0,PCe.topBoolOrEmptySchema)(e))}af.validateFunctionCode=Jht;function NCe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Ft._)`${yn.default.data}, ${yn.default.valCxt}`,r.$async,()=>{e.code((0,Ft._)`"use strict"; ${Ice(n,i)}`),ept(e,i),e.code(s)}):e.func(t,(0,Ft._)`${yn.default.data}, ${Zht(i)}`,r.$async,()=>e.code(Ice(n,i)).code(s))}function Zht(e){return(0,Ft._)`{${yn.default.instancePath}="", ${yn.default.parentData}, ${yn.default.parentDataProperty}, ${yn.default.rootData}=${yn.default.data}${e.dynamicRef?(0,Ft._)`, ${yn.default.dynamicAnchors}={}`:Ft.nil}}={}`}function ept(e,t){e.if(yn.default.valCxt,()=>{e.var(yn.default.instancePath,(0,Ft._)`${yn.default.valCxt}.${yn.default.instancePath}`),e.var(yn.default.parentData,(0,Ft._)`${yn.default.valCxt}.${yn.default.parentData}`),e.var(yn.default.parentDataProperty,(0,Ft._)`${yn.default.valCxt}.${yn.default.parentDataProperty}`),e.var(yn.default.rootData,(0,Ft._)`${yn.default.valCxt}.${yn.default.rootData}`),t.dynamicRef&&e.var(yn.default.dynamicAnchors,(0,Ft._)`${yn.default.valCxt}.${yn.default.dynamicAnchors}`)},()=>{e.var(yn.default.instancePath,(0,Ft._)`""`),e.var(yn.default.parentData,(0,Ft._)`undefined`),e.var(yn.default.parentDataProperty,(0,Ft._)`undefined`),e.var(yn.default.rootData,yn.default.data),t.dynamicRef&&e.var(yn.default.dynamicAnchors,(0,Ft._)`{}`)})}function tpt(e){const{schema:t,opts:n,gen:r}=e;NCe(e,()=>{n.$comment&&t.$comment&&LCe(e),opt(e),r.let(yn.default.vErrors,null),r.let(yn.default.errors,0),n.unevaluated&&npt(e),$Ce(e),upt(e)})}function npt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ft._)`${n}.evaluated`),t.if((0,Ft._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ft._)`${e.evaluated}.props`,(0,Ft._)`undefined`)),t.if((0,Ft._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ft._)`${e.evaluated}.items`,(0,Ft._)`undefined`))}function Ice(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ft._)`/*# sourceURL=${n} */`:Ft.nil}function rpt(e,t){if(DCe(e)&&(MCe(e),OCe(e))){ipt(e,t);return}(0,PCe.boolOrEmptySchema)(e,t)}function OCe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function DCe(e){return typeof e.schema!="boolean"}function ipt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&LCe(e),apt(e),lpt(e);const s=r.const("_errs",yn.default.errors);$Ce(e,s),r.var(t,(0,Ft._)`${s} === ${yn.default.errors}`)}function MCe(e){(0,vm.checkUnknownRules)(e),spt(e)}function $Ce(e,t){if(e.opts.jtd)return kce(e,[],!1,t);const n=(0,Ace.getSchemaTypes)(e.schema),r=(0,Ace.coerceAndCheckDataType)(e,n);kce(e,n,!r,t)}function spt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,vm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function opt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,vm.checkStrictMode)(e,"default is ignored in the schema root")}function apt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Qht.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function lpt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function LCe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Ft._)`${yn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Ft.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Ft._)`${yn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function upt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Ft._)`${yn.default.errors} === 0`,()=>t.return(yn.default.data),()=>t.throw((0,Ft._)`new ${i}(${yn.default.vErrors})`)):(t.assign((0,Ft._)`${r}.errors`,yn.default.vErrors),s.unevaluated&&cpt(e),t.return((0,Ft._)`${yn.default.errors} === 0`))}function cpt({gen:e,evaluated:t,props:n,items:r}){n instanceof Ft.Name&&e.assign((0,Ft._)`${t}.props`,n),r instanceof Ft.Name&&e.assign((0,Ft._)`${t}.items`,r)}function kce(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:l,self:u}=e,{RULES:c}=u;if(s.$ref&&(l.ignoreKeywordsWithRef||!(0,vm.schemaHasRulesButRef)(s,c))){i.block(()=>BCe(e,"$ref",c.all.$ref.definition));return}l.jtd||dpt(e,t),i.block(()=>{for(const f of c.rules)d(f);d(c.post)});function d(f){(0,GX.shouldUseGroup)(s,f)&&(f.type?(i.if((0,qM.checkDataType)(f.type,o,l.strictNumbers)),Rce(e,f),t.length===1&&t[0]===f.type&&n&&(i.else(),(0,qM.reportTypeError)(e)),i.endIf()):Rce(e,f),a||i.if((0,Ft._)`${yn.default.errors} === ${r||0}`))}}function Rce(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,Xht.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,GX.shouldUseRule)(r,s)&&BCe(e,s.keyword,s.definition,t.type)})}function dpt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(fpt(e,t),e.opts.allowUnionTypes||hpt(e,t),ppt(e,e.dataTypes))}function fpt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{FCe(e.dataTypes,n)||YX(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),gpt(e,t)}}function hpt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&YX(e,"use allowUnionTypes to allow union type keyword")}function ppt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,GX.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>mpt(t,o))&&YX(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function mpt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function FCe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function gpt(e,t){const n=[];for(const r of e.dataTypes)FCe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function YX(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,vm.checkStrictMode)(e,t,e.opts.strictTypes)}class jCe{constructor(t,n,r){if((0,V2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,vm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",zCe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,V2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",yn.default.errors))}result(t,n,r){this.failResult((0,Ft.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ft.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ft._)`${n} !== undefined && (${(0,Ft.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?DT.reportExtraError:DT.reportError)(this,this.def.error,n)}$dataError(){(0,DT.reportError)(this,this.def.$dataError||DT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,DT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ft.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ft.nil,n=Ft.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Ft.or)((0,Ft._)`${i} === undefined`,n)),t!==Ft.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ft.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Ft.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ft.Name))throw new Error("ajv implementation error");const l=Array.isArray(r)?r:[r];return(0,Ft._)`${(0,qM.checkDataTypes)(l,n,s.opts.strictNumbers,qM.DataType.Wrong)}`}return Ft.nil}function a(){if(i.validateSchema){const l=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ft._)`!${l}(${n})`}return Ft.nil}}subschema(t,n){const r=(0,Z8.getSubschema)(this.it,t);(0,Z8.extendSubschemaData)(r,this.it,t),(0,Z8.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return rpt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=vm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=vm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ft.Name)),!0}}af.KeywordCxt=jCe;function BCe(e,t,n,r){const i=new jCe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,V2.funcKeywordCode)(i,n):"macro"in n?(0,V2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,V2.funcKeywordCode)(i,n)}const ypt=/^\/(?:[^~]|~0|~1)*$/,vpt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function zCe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return yn.default.rootData;if(e[0]==="/"){if(!ypt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=yn.default.rootData}else{const u=vpt.exec(e);if(!u)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+u[1];if(i=u[2],i==="#"){if(c>=t)throw new Error(l("property/index",c));return r[t-c]}if(c>t)throw new Error(l("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const u of a)u&&(s=(0,Ft._)`${s}${(0,Ft.getProperty)((0,vm.unescapeJsonPointer)(u))}`,o=(0,Ft._)`${o} && ${s}`);return o;function l(u,c){return`Cannot access ${u} ${c} levels up, current level is ${t}`}}af.getData=zCe;var qk={};Object.defineProperty(qk,"__esModule",{value:!0});class bpt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}qk.default=bpt;var vS={};Object.defineProperty(vS,"__esModule",{value:!0});const eB=Bo;class _pt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,eB.resolveUrl)(t,n,r),this.missingSchema=(0,eB.normalizeId)((0,eB.getFullPath)(t,this.missingRef))}}vS.default=_pt;var jl={};Object.defineProperty(jl,"__esModule",{value:!0});jl.resolveSchema=jl.getCompilingSchema=jl.resolveRef=jl.compileSchema=jl.SchemaEnv=void 0;const wd=qn,wpt=qk,Tv=hp,Vd=Bo,Pce=At,Ept=af;class u6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Vd.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}jl.SchemaEnv=u6;function KX(e){const t=UCe.call(this,e);if(t)return t;const n=(0,Vd.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new wd.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:wpt.default,code:(0,wd._)`require("ajv/dist/runtime/validation_error").default`}));const l=o.scopeName("validate");e.validateName=l;const u={gen:o,allErrors:this.opts.allErrors,data:Tv.default.data,parentData:Tv.default.parentData,parentDataProperty:Tv.default.parentDataProperty,dataNames:[Tv.default.data],dataPathArr:[wd.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,wd.stringify)(e.schema)}:{ref:e.schema}),validateName:l,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:wd.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,wd._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,Ept.validateFunctionCode)(u),o.optimize(this.opts.code.optimize);const d=o.toString();c=`${o.scopeRefs(Tv.default.scope)}return ${d}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Tv.default.self}`,`${Tv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(l,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:l,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=u;h.evaluated={props:p instanceof wd.Name?void 0:p,items:m instanceof wd.Name?void 0:m,dynamicProps:p instanceof wd.Name,dynamicItems:m instanceof wd.Name},h.source&&(h.source.evaluated=(0,wd.stringify)(h.evaluated))}return e.validate=h,e}catch(d){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),d}finally{this._compilations.delete(e)}}jl.compileSchema=KX;function xpt(e,t,n){var r;n=(0,Vd.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=Cpt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new u6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=Spt.call(this,s)}jl.resolveRef=xpt;function Spt(e){return(0,Vd.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:KX.call(this,e)}function UCe(e){for(const t of this._compilations)if(Tpt(t,e))return t}jl.getCompilingSchema=UCe;function Tpt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Cpt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||c6.call(this,e,t)}function c6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Vd._getFullPath)(this.opts.uriResolver,n);let i=(0,Vd.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return tB.call(this,n,e);const s=(0,Vd.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=c6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:tB.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||KX.call(this,o),s===(0,Vd.normalizeId)(t)){const{schema:a}=o,{schemaId:l}=this.opts,u=a[l];return u&&(i=(0,Vd.resolveUrl)(this.opts.uriResolver,i,u)),new u6({schema:a,schemaId:l,root:e,baseId:i})}return tB.call(this,n,o)}}jl.resolveSchema=c6;const Apt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function tB(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const l=n[(0,Pce.unescapeFragment)(a)];if(l===void 0)return;n=l;const u=typeof n=="object"&&n[this.opts.schemaId];!Apt.has(a)&&u&&(t=(0,Vd.resolveUrl)(this.opts.uriResolver,t,u))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Pce.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Vd.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=c6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new u6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Ipt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",kpt="Meta-schema for $data reference (JSON AnySchema extension proposal)",Rpt="object",Ppt=["$data"],Npt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},Opt=!1,Dpt={$id:Ipt,description:kpt,type:Rpt,required:Ppt,properties:Npt,additionalProperties:Opt};var XX={},YU={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Ks,function(n){function r(){for(var le=arguments.length,te=Array(le),pe=0;pe<le;pe++)te[pe]=arguments[pe];if(te.length>1){te[0]=te[0].slice(0,-1);for(var Ie=te.length-1,ke=1;ke<Ie;++ke)te[ke]=te[ke].slice(1,-1);return te[Ie]=te[Ie].slice(1),te.join("")}else return te[0]}function i(le){return"(?:"+le+")"}function s(le){return le===void 0?"undefined":le===null?"null":Object.prototype.toString.call(le).split(" ").pop().split("]").shift().toLowerCase()}function o(le){return le.toUpperCase()}function a(le){return le!=null?le instanceof Array?le:typeof le.length!="number"||le.split||le.setInterval||le.call?[le]:Array.prototype.slice.call(le):[]}function l(le,te){var pe=le;if(te)for(var Ie in te)pe[Ie]=te[Ie];return pe}function u(le){var te="[A-Za-z]",pe="[0-9]",Ie=r(pe,"[A-Fa-f]"),ke=i(i("%[EFef]"+Ie+"%"+Ie+Ie+"%"+Ie+Ie)+"|"+i("%[89A-Fa-f]"+Ie+"%"+Ie+Ie)+"|"+i("%"+Ie+Ie)),dt="[\\:\\/\\?\\#\\[\\]\\@]",Rt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",rn=r(dt,Rt),Gn=le?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Qn=le?"[\\uE000-\\uF8FF]":"[]",In=r(te,pe,"[\\-\\.\\_\\~]",Gn);i(te+r(te,pe,"[\\+\\-\\.]")+"*"),i(i(ke+"|"+r(In,Rt,"[\\:]"))+"*");var vr=i(i("25[0-5]")+"|"+i("2[0-4]"+pe)+"|"+i("1"+pe+pe)+"|"+i("0?[1-9]"+pe)+"|0?0?"+pe),Vr=i(vr+"\\."+vr+"\\."+vr+"\\."+vr),Qt=i(Ie+"{1,4}"),br=i(i(Qt+"\\:"+Qt)+"|"+Vr),ii=i(i(Qt+"\\:")+"{6}"+br),dr=i("\\:\\:"+i(Qt+"\\:")+"{5}"+br),Ui=i(i(Qt)+"?\\:\\:"+i(Qt+"\\:")+"{4}"+br),lo=i(i(i(Qt+"\\:")+"{0,1}"+Qt)+"?\\:\\:"+i(Qt+"\\:")+"{3}"+br),di=i(i(i(Qt+"\\:")+"{0,2}"+Qt)+"?\\:\\:"+i(Qt+"\\:")+"{2}"+br),Ao=i(i(i(Qt+"\\:")+"{0,3}"+Qt)+"?\\:\\:"+Qt+"\\:"+br),Ji=i(i(i(Qt+"\\:")+"{0,4}"+Qt)+"?\\:\\:"+br),Zi=i(i(i(Qt+"\\:")+"{0,5}"+Qt)+"?\\:\\:"+Qt),ia=i(i(i(Qt+"\\:")+"{0,6}"+Qt)+"?\\:\\:"),Va=i([ii,dr,Ui,lo,di,Ao,Ji,Zi,ia].join("|")),uo=i(i(In+"|"+ke)+"+");i("[vV]"+Ie+"+\\."+r(In,Rt,"[\\:]")+"+"),i(i(ke+"|"+r(In,Rt))+"*");var gc=i(ke+"|"+r(In,Rt,"[\\:\\@]"));return i(i(ke+"|"+r(In,Rt,"[\\@]"))+"+"),i(i(gc+"|"+r("[\\/\\?]",Qn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",te,pe,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",In,Rt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",In,Rt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",In,Rt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",In,Rt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",In,Rt,"[\\:\\@\\/\\?]",Qn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",In,Rt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",In,Rt),"g"),UNRESERVED:new RegExp(In,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",In,rn),"g"),PCT_ENCODED:new RegExp(ke,"g"),IPV4ADDRESS:new RegExp("^("+Vr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Va+")"+i(i("\\%25|\\%(?!"+Ie+"{2})")+"("+uo+")")+"?\\]?$")}}var c=u(!1),d=u(!0),f=function(){function le(te,pe){var Ie=[],ke=!0,dt=!1,Rt=void 0;try{for(var rn=te[Symbol.iterator](),Gn;!(ke=(Gn=rn.next()).done)&&(Ie.push(Gn.value),!(pe&&Ie.length===pe));ke=!0);}catch(Qn){dt=!0,Rt=Qn}finally{try{!ke&&rn.return&&rn.return()}finally{if(dt)throw Rt}}return Ie}return function(te,pe){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return le(te,pe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(le){if(Array.isArray(le)){for(var te=0,pe=Array(le.length);te<le.length;te++)pe[te]=le[te];return pe}else return Array.from(le)},p=2147483647,m=36,g=1,y=26,b=38,_=700,w=72,E=128,x="-",S=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},P=m-g,L=Math.floor,k=String.fromCharCode;function $(le){throw new RangeError(R[le])}function D(le,te){for(var pe=[],Ie=le.length;Ie--;)pe[Ie]=te(le[Ie]);return pe}function M(le,te){var pe=le.split("@"),Ie="";pe.length>1&&(Ie=pe[0]+"@",le=pe[1]),le=le.replace(A,".");var ke=le.split("."),dt=D(ke,te).join(".");return Ie+dt}function B(le){for(var te=[],pe=0,Ie=le.length;pe<Ie;){var ke=le.charCodeAt(pe++);if(ke>=55296&&ke<=56319&&pe<Ie){var dt=le.charCodeAt(pe++);(dt&64512)==56320?te.push(((ke&1023)<<10)+(dt&1023)+65536):(te.push(ke),pe--)}else te.push(ke)}return te}var z=function(te){return String.fromCodePoint.apply(String,h(te))},U=function(te){return te-48<10?te-22:te-65<26?te-65:te-97<26?te-97:m},O=function(te,pe){return te+22+75*(te<26)-((pe!=0)<<5)},V=function(te,pe,Ie){var ke=0;for(te=Ie?L(te/_):te>>1,te+=L(te/pe);te>P*y>>1;ke+=m)te=L(te/P);return L(ke+(P+1)*te/(te+b))},W=function(te){var pe=[],Ie=te.length,ke=0,dt=E,Rt=w,rn=te.lastIndexOf(x);rn<0&&(rn=0);for(var Gn=0;Gn<rn;++Gn)te.charCodeAt(Gn)>=128&&$("not-basic"),pe.push(te.charCodeAt(Gn));for(var Qn=rn>0?rn+1:0;Qn<Ie;){for(var In=ke,vr=1,Vr=m;;Vr+=m){Qn>=Ie&&$("invalid-input");var Qt=U(te.charCodeAt(Qn++));(Qt>=m||Qt>L((p-ke)/vr))&&$("overflow"),ke+=Qt*vr;var br=Vr<=Rt?g:Vr>=Rt+y?y:Vr-Rt;if(Qt<br)break;var ii=m-br;vr>L(p/ii)&&$("overflow"),vr*=ii}var dr=pe.length+1;Rt=V(ke-In,dr,In==0),L(ke/dr)>p-dt&&$("overflow"),dt+=L(ke/dr),ke%=dr,pe.splice(ke++,0,dt)}return String.fromCodePoint.apply(String,pe)},j=function(te){var pe=[];te=B(te);var Ie=te.length,ke=E,dt=0,Rt=w,rn=!0,Gn=!1,Qn=void 0;try{for(var In=te[Symbol.iterator](),vr;!(rn=(vr=In.next()).done);rn=!0){var Vr=vr.value;Vr<128&&pe.push(k(Vr))}}catch(Be){Gn=!0,Qn=Be}finally{try{!rn&&In.return&&In.return()}finally{if(Gn)throw Qn}}var Qt=pe.length,br=Qt;for(Qt&&pe.push(x);br<Ie;){var ii=p,dr=!0,Ui=!1,lo=void 0;try{for(var di=te[Symbol.iterator](),Ao;!(dr=(Ao=di.next()).done);dr=!0){var Ji=Ao.value;Ji>=ke&&Ji<ii&&(ii=Ji)}}catch(Be){Ui=!0,lo=Be}finally{try{!dr&&di.return&&di.return()}finally{if(Ui)throw lo}}var Zi=br+1;ii-ke>L((p-dt)/Zi)&&$("overflow"),dt+=(ii-ke)*Zi,ke=ii;var ia=!0,Va=!1,uo=void 0;try{for(var gc=te[Symbol.iterator](),qf;!(ia=(qf=gc.next()).done);ia=!0){var Y=qf.value;if(Y<ke&&++dt>p&&$("overflow"),Y==ke){for(var ce=dt,ee=m;;ee+=m){var be=ee<=Rt?g:ee>=Rt+y?y:ee-Rt;if(ce<be)break;var _e=ce-be,ve=m-be;pe.push(k(O(be+_e%ve,0))),ce=L(_e/ve)}pe.push(k(O(ce,0))),Rt=V(dt,Zi,br==Qt),dt=0,++br}}}catch(Be){Va=!0,uo=Be}finally{try{!ia&&gc.return&&gc.return()}finally{if(Va)throw uo}}++dt,++ke}return pe.join("")},H=function(te){return M(te,function(pe){return S.test(pe)?W(pe.slice(4).toLowerCase()):pe})},G=function(te){return M(te,function(pe){return C.test(pe)?"xn--"+j(pe):pe})},J={version:"2.1.0",ucs2:{decode:B,encode:z},decode:W,encode:j,toASCII:G,toUnicode:H},se={};function ie(le){var te=le.charCodeAt(0),pe=void 0;return te<16?pe="%0"+te.toString(16).toUpperCase():te<128?pe="%"+te.toString(16).toUpperCase():te<2048?pe="%"+(te>>6|192).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase():pe="%"+(te>>12|224).toString(16).toUpperCase()+"%"+(te>>6&63|128).toString(16).toUpperCase()+"%"+(te&63|128).toString(16).toUpperCase(),pe}function ne(le){for(var te="",pe=0,Ie=le.length;pe<Ie;){var ke=parseInt(le.substr(pe+1,2),16);if(ke<128)te+=String.fromCharCode(ke),pe+=3;else if(ke>=194&&ke<224){if(Ie-pe>=6){var dt=parseInt(le.substr(pe+4,2),16);te+=String.fromCharCode((ke&31)<<6|dt&63)}else te+=le.substr(pe,6);pe+=6}else if(ke>=224){if(Ie-pe>=9){var Rt=parseInt(le.substr(pe+4,2),16),rn=parseInt(le.substr(pe+7,2),16);te+=String.fromCharCode((ke&15)<<12|(Rt&63)<<6|rn&63)}else te+=le.substr(pe,9);pe+=9}else te+=le.substr(pe,3),pe+=3}return te}function ue(le,te){function pe(Ie){var ke=ne(Ie);return ke.match(te.UNRESERVED)?ke:Ie}return le.scheme&&(le.scheme=String(le.scheme).replace(te.PCT_ENCODED,pe).toLowerCase().replace(te.NOT_SCHEME,"")),le.userinfo!==void 0&&(le.userinfo=String(le.userinfo).replace(te.PCT_ENCODED,pe).replace(te.NOT_USERINFO,ie).replace(te.PCT_ENCODED,o)),le.host!==void 0&&(le.host=String(le.host).replace(te.PCT_ENCODED,pe).toLowerCase().replace(te.NOT_HOST,ie).replace(te.PCT_ENCODED,o)),le.path!==void 0&&(le.path=String(le.path).replace(te.PCT_ENCODED,pe).replace(le.scheme?te.NOT_PATH:te.NOT_PATH_NOSCHEME,ie).replace(te.PCT_ENCODED,o)),le.query!==void 0&&(le.query=String(le.query).replace(te.PCT_ENCODED,pe).replace(te.NOT_QUERY,ie).replace(te.PCT_ENCODED,o)),le.fragment!==void 0&&(le.fragment=String(le.fragment).replace(te.PCT_ENCODED,pe).replace(te.NOT_FRAGMENT,ie).replace(te.PCT_ENCODED,o)),le}function xe(le){return le.replace(/^0*(.*)/,"$1")||"0"}function de(le,te){var pe=le.match(te.IPV4ADDRESS)||[],Ie=f(pe,2),ke=Ie[1];return ke?ke.split(".").map(xe).join("."):le}function Ke(le,te){var pe=le.match(te.IPV6ADDRESS)||[],Ie=f(pe,3),ke=Ie[1],dt=Ie[2];if(ke){for(var Rt=ke.toLowerCase().split("::").reverse(),rn=f(Rt,2),Gn=rn[0],Qn=rn[1],In=Qn?Qn.split(":").map(xe):[],vr=Gn.split(":").map(xe),Vr=te.IPV4ADDRESS.test(vr[vr.length-1]),Qt=Vr?7:8,br=vr.length-Qt,ii=Array(Qt),dr=0;dr<Qt;++dr)ii[dr]=In[dr]||vr[br+dr]||"";Vr&&(ii[Qt-1]=de(ii[Qt-1],te));var Ui=ii.reduce(function(Zi,ia,Va){if(!ia||ia==="0"){var uo=Zi[Zi.length-1];uo&&uo.index+uo.length===Va?uo.length++:Zi.push({index:Va,length:1})}return Zi},[]),lo=Ui.sort(function(Zi,ia){return ia.length-Zi.length})[0],di=void 0;if(lo&&lo.length>1){var Ao=ii.slice(0,lo.index),Ji=ii.slice(lo.index+lo.length);di=Ao.join(":")+"::"+Ji.join(":")}else di=ii.join(":");return dt&&(di+="%"+dt),di}else return le}var je=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Oe="".match(/(){0}/)[1]===void 0;function Fe(le){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe={},Ie=te.iri!==!1?d:c;te.reference==="suffix"&&(le=(te.scheme?te.scheme+":":"")+"//"+le);var ke=le.match(je);if(ke){Oe?(pe.scheme=ke[1],pe.userinfo=ke[3],pe.host=ke[4],pe.port=parseInt(ke[5],10),pe.path=ke[6]||"",pe.query=ke[7],pe.fragment=ke[8],isNaN(pe.port)&&(pe.port=ke[5])):(pe.scheme=ke[1]||void 0,pe.userinfo=le.indexOf("@")!==-1?ke[3]:void 0,pe.host=le.indexOf("//")!==-1?ke[4]:void 0,pe.port=parseInt(ke[5],10),pe.path=ke[6]||"",pe.query=le.indexOf("?")!==-1?ke[7]:void 0,pe.fragment=le.indexOf("#")!==-1?ke[8]:void 0,isNaN(pe.port)&&(pe.port=le.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?ke[4]:void 0)),pe.host&&(pe.host=Ke(de(pe.host,Ie),Ie)),pe.scheme===void 0&&pe.userinfo===void 0&&pe.host===void 0&&pe.port===void 0&&!pe.path&&pe.query===void 0?pe.reference="same-document":pe.scheme===void 0?pe.reference="relative":pe.fragment===void 0?pe.reference="absolute":pe.reference="uri",te.reference&&te.reference!=="suffix"&&te.reference!==pe.reference&&(pe.error=pe.error||"URI is not a "+te.reference+" reference.");var dt=se[(te.scheme||pe.scheme||"").toLowerCase()];if(!te.unicodeSupport&&(!dt||!dt.unicodeSupport)){if(pe.host&&(te.domainHost||dt&&dt.domainHost))try{pe.host=J.toASCII(pe.host.replace(Ie.PCT_ENCODED,ne).toLowerCase())}catch(Rt){pe.error=pe.error||"Host's domain name can not be converted to ASCII via punycode: "+Rt}ue(pe,c)}else ue(pe,Ie);dt&&dt.parse&&dt.parse(pe,te)}else pe.error=pe.error||"URI can not be parsed.";return pe}function Ae(le,te){var pe=te.iri!==!1?d:c,Ie=[];return le.userinfo!==void 0&&(Ie.push(le.userinfo),Ie.push("@")),le.host!==void 0&&Ie.push(Ke(de(String(le.host),pe),pe).replace(pe.IPV6ADDRESS,function(ke,dt,Rt){return"["+dt+(Rt?"%25"+Rt:"")+"]"})),(typeof le.port=="number"||typeof le.port=="string")&&(Ie.push(":"),Ie.push(String(le.port))),Ie.length?Ie.join(""):void 0}var fe=/^\.\.?\//,Pe=/^\/\.(\/|$)/,He=/^\/\.\.(\/|$)/,ft=/^\/?(?:.|\n)*?(?=\/|$)/;function Ee(le){for(var te=[];le.length;)if(le.match(fe))le=le.replace(fe,"");else if(le.match(Pe))le=le.replace(Pe,"/");else if(le.match(He))le=le.replace(He,"/"),te.pop();else if(le==="."||le==="..")le="";else{var pe=le.match(ft);if(pe){var Ie=pe[0];le=le.slice(Ie.length),te.push(Ie)}else throw new Error("Unexpected dot segment condition")}return te.join("")}function he(le){var te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=te.iri?d:c,Ie=[],ke=se[(te.scheme||le.scheme||"").toLowerCase()];if(ke&&ke.serialize&&ke.serialize(le,te),le.host&&!pe.IPV6ADDRESS.test(le.host)){if(te.domainHost||ke&&ke.domainHost)try{le.host=te.iri?J.toUnicode(le.host):J.toASCII(le.host.replace(pe.PCT_ENCODED,ne).toLowerCase())}catch(rn){le.error=le.error||"Host's domain name can not be converted to "+(te.iri?"Unicode":"ASCII")+" via punycode: "+rn}}ue(le,pe),te.reference!=="suffix"&&le.scheme&&(Ie.push(le.scheme),Ie.push(":"));var dt=Ae(le,te);if(dt!==void 0&&(te.reference!=="suffix"&&Ie.push("//"),Ie.push(dt),le.path&&le.path.charAt(0)!=="/"&&Ie.push("/")),le.path!==void 0){var Rt=le.path;!te.absolutePath&&(!ke||!ke.absolutePath)&&(Rt=Ee(Rt)),dt===void 0&&(Rt=Rt.replace(/^\/\//,"/%2F")),Ie.push(Rt)}return le.query!==void 0&&(Ie.push("?"),Ie.push(le.query)),le.fragment!==void 0&&(Ie.push("#"),Ie.push(le.fragment)),Ie.join("")}function Ue(le,te){var pe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ie=arguments[3],ke={};return Ie||(le=Fe(he(le,pe),pe),te=Fe(he(te,pe),pe)),pe=pe||{},!pe.tolerant&&te.scheme?(ke.scheme=te.scheme,ke.userinfo=te.userinfo,ke.host=te.host,ke.port=te.port,ke.path=Ee(te.path||""),ke.query=te.query):(te.userinfo!==void 0||te.host!==void 0||te.port!==void 0?(ke.userinfo=te.userinfo,ke.host=te.host,ke.port=te.port,ke.path=Ee(te.path||""),ke.query=te.query):(te.path?(te.path.charAt(0)==="/"?ke.path=Ee(te.path):((le.userinfo!==void 0||le.host!==void 0||le.port!==void 0)&&!le.path?ke.path="/"+te.path:le.path?ke.path=le.path.slice(0,le.path.lastIndexOf("/")+1)+te.path:ke.path=te.path,ke.path=Ee(ke.path)),ke.query=te.query):(ke.path=le.path,te.query!==void 0?ke.query=te.query:ke.query=le.query),ke.userinfo=le.userinfo,ke.host=le.host,ke.port=le.port),ke.scheme=le.scheme),ke.fragment=te.fragment,ke}function nt(le,te,pe){var Ie=l({scheme:"null"},pe);return he(Ue(Fe(le,Ie),Fe(te,Ie),Ie,!0),Ie)}function ye(le,te){return typeof le=="string"?le=he(Fe(le,te),te):s(le)==="object"&&(le=Fe(he(le,te),te)),le}function Re(le,te,pe){return typeof le=="string"?le=he(Fe(le,pe),pe):s(le)==="object"&&(le=he(le,pe)),typeof te=="string"?te=he(Fe(te,pe),pe):s(te)==="object"&&(te=he(te,pe)),le===te}function Ge(le,te){return le&&le.toString().replace(!te||!te.iri?c.ESCAPE:d.ESCAPE,ie)}function Qe(le,te){return le&&le.toString().replace(!te||!te.iri?c.PCT_ENCODED:d.PCT_ENCODED,ne)}var xt={scheme:"http",domainHost:!0,parse:function(te,pe){return te.host||(te.error=te.error||"HTTP URIs must have a host."),te},serialize:function(te,pe){var Ie=String(te.scheme).toLowerCase()==="https";return(te.port===(Ie?443:80)||te.port==="")&&(te.port=void 0),te.path||(te.path="/"),te}},An={scheme:"https",domainHost:xt.domainHost,parse:xt.parse,serialize:xt.serialize};function gr(le){return typeof le.secure=="boolean"?le.secure:String(le.scheme).toLowerCase()==="wss"}var yr={scheme:"ws",domainHost:!0,parse:function(te,pe){var Ie=te;return Ie.secure=gr(Ie),Ie.resourceName=(Ie.path||"/")+(Ie.query?"?"+Ie.query:""),Ie.path=void 0,Ie.query=void 0,Ie},serialize:function(te,pe){if((te.port===(gr(te)?443:80)||te.port==="")&&(te.port=void 0),typeof te.secure=="boolean"&&(te.scheme=te.secure?"wss":"ws",te.secure=void 0),te.resourceName){var Ie=te.resourceName.split("?"),ke=f(Ie,2),dt=ke[0],Rt=ke[1];te.path=dt&&dt!=="/"?dt:void 0,te.query=Rt,te.resourceName=void 0}return te.fragment=void 0,te}},Nr={scheme:"wss",domainHost:yr.domainHost,parse:yr.parse,serialize:yr.serialize},Xt={},Dn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",rr="[0-9A-Fa-f]",ir=i(i("%[EFef]"+rr+"%"+rr+rr+"%"+rr+rr)+"|"+i("%[89A-Fa-f]"+rr+"%"+rr+rr)+"|"+i("%"+rr+rr)),ao="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Pi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",zi=r(Pi,'[\\"\\\\]'),Un="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Wn=new RegExp(Dn,"g"),Qi=new RegExp(ir,"g"),vd=new RegExp(r("[^]",ao,"[\\.]",'[\\"]',zi),"g"),Ua=new RegExp(r("[^]",Dn,Un),"g"),mc=Ua;function gt(le){var te=ne(le);return te.match(Wn)?te:le}var ci={scheme:"mailto",parse:function(te,pe){var Ie=te,ke=Ie.to=Ie.path?Ie.path.split(","):[];if(Ie.path=void 0,Ie.query){for(var dt=!1,Rt={},rn=Ie.query.split("&"),Gn=0,Qn=rn.length;Gn<Qn;++Gn){var In=rn[Gn].split("=");switch(In[0]){case"to":for(var vr=In[1].split(","),Vr=0,Qt=vr.length;Vr<Qt;++Vr)ke.push(vr[Vr]);break;case"subject":Ie.subject=Qe(In[1],pe);break;case"body":Ie.body=Qe(In[1],pe);break;default:dt=!0,Rt[Qe(In[0],pe)]=Qe(In[1],pe);break}}dt&&(Ie.headers=Rt)}Ie.query=void 0;for(var br=0,ii=ke.length;br<ii;++br){var dr=ke[br].split("@");if(dr[0]=Qe(dr[0]),pe.unicodeSupport)dr[1]=Qe(dr[1],pe).toLowerCase();else try{dr[1]=J.toASCII(Qe(dr[1],pe).toLowerCase())}catch(Ui){Ie.error=Ie.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ui}ke[br]=dr.join("@")}return Ie},serialize:function(te,pe){var Ie=te,ke=a(te.to);if(ke){for(var dt=0,Rt=ke.length;dt<Rt;++dt){var rn=String(ke[dt]),Gn=rn.lastIndexOf("@"),Qn=rn.slice(0,Gn).replace(Qi,gt).replace(Qi,o).replace(vd,ie),In=rn.slice(Gn+1);try{In=pe.iri?J.toUnicode(In):J.toASCII(Qe(In,pe).toLowerCase())}catch(br){Ie.error=Ie.error||"Email address's domain name can not be converted to "+(pe.iri?"Unicode":"ASCII")+" via punycode: "+br}ke[dt]=Qn+"@"+In}Ie.path=ke.join(",")}var vr=te.headers=te.headers||{};te.subject&&(vr.subject=te.subject),te.body&&(vr.body=te.body);var Vr=[];for(var Qt in vr)vr[Qt]!==Xt[Qt]&&Vr.push(Qt.replace(Qi,gt).replace(Qi,o).replace(Ua,ie)+"="+vr[Qt].replace(Qi,gt).replace(Qi,o).replace(mc,ie));return Vr.length&&(Ie.query=Vr.join("&")),Ie}},wn=/^([^\:]+)\:(.*)/,Lr={scheme:"urn",parse:function(te,pe){var Ie=te.path&&te.path.match(wn),ke=te;if(Ie){var dt=pe.scheme||ke.scheme||"urn",Rt=Ie[1].toLowerCase(),rn=Ie[2],Gn=dt+":"+(pe.nid||Rt),Qn=se[Gn];ke.nid=Rt,ke.nss=rn,ke.path=void 0,Qn&&(ke=Qn.parse(ke,pe))}else ke.error=ke.error||"URN can not be parsed.";return ke},serialize:function(te,pe){var Ie=pe.scheme||te.scheme||"urn",ke=te.nid,dt=Ie+":"+(pe.nid||ke),Rt=se[dt];Rt&&(te=Rt.serialize(te,pe));var rn=te,Gn=te.nss;return rn.path=(ke||pe.nid)+":"+Gn,rn}},ni=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ri={scheme:"urn:uuid",parse:function(te,pe){var Ie=te;return Ie.uuid=Ie.nss,Ie.nss=void 0,!pe.tolerant&&(!Ie.uuid||!Ie.uuid.match(ni))&&(Ie.error=Ie.error||"UUID is not valid."),Ie},serialize:function(te,pe){var Ie=te;return Ie.nss=(te.uuid||"").toLowerCase(),Ie}};se[xt.scheme]=xt,se[An.scheme]=An,se[yr.scheme]=yr,se[Nr.scheme]=Nr,se[ci.scheme]=ci,se[Lr.scheme]=Lr,se[ri.scheme]=ri,n.SCHEMES=se,n.pctEncChar=ie,n.pctDecChars=ne,n.parse=Fe,n.removeDotSegments=Ee,n.serialize=he,n.resolveComponents=Ue,n.resolve=nt,n.normalize=ye,n.equal=Re,n.escapeComponent=Ge,n.unescapeComponent=Qe,Object.defineProperty(n,"__esModule",{value:!0})})})(YU,YU.exports);var Mpt=YU.exports;Object.defineProperty(XX,"__esModule",{value:!0});const VCe=Mpt;VCe.code='require("ajv/dist/runtime/uri").default';XX.default=VCe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=af;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=qn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=qk,i=vS,s=rb,o=jl,a=qn,l=Bo,u=Vs,c=At,d=Dpt,f=XX,h=(O,V)=>new RegExp(O,V);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},b=200;function _(O){var V,W,j,H,G,J,se,ie,ne,ue,xe,de,Ke,je,Oe,Fe,Ae,fe,Pe,He,ft,Ee,he,Ue,nt;const ye=O.strict,Re=(V=O.code)===null||V===void 0?void 0:V.optimize,Ge=Re===!0||Re===void 0?1:Re||0,Qe=(j=(W=O.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,xt=(H=O.uriResolver)!==null&&H!==void 0?H:f.default;return{strictSchema:(J=(G=O.strictSchema)!==null&&G!==void 0?G:ye)!==null&&J!==void 0?J:!0,strictNumbers:(ie=(se=O.strictNumbers)!==null&&se!==void 0?se:ye)!==null&&ie!==void 0?ie:!0,strictTypes:(ue=(ne=O.strictTypes)!==null&&ne!==void 0?ne:ye)!==null&&ue!==void 0?ue:"log",strictTuples:(de=(xe=O.strictTuples)!==null&&xe!==void 0?xe:ye)!==null&&de!==void 0?de:"log",strictRequired:(je=(Ke=O.strictRequired)!==null&&Ke!==void 0?Ke:ye)!==null&&je!==void 0?je:!1,code:O.code?{...O.code,optimize:Ge,regExp:Qe}:{optimize:Ge,regExp:Qe},loopRequired:(Oe=O.loopRequired)!==null&&Oe!==void 0?Oe:b,loopEnum:(Fe=O.loopEnum)!==null&&Fe!==void 0?Fe:b,meta:(Ae=O.meta)!==null&&Ae!==void 0?Ae:!0,messages:(fe=O.messages)!==null&&fe!==void 0?fe:!0,inlineRefs:(Pe=O.inlineRefs)!==null&&Pe!==void 0?Pe:!0,schemaId:(He=O.schemaId)!==null&&He!==void 0?He:"$id",addUsedSchema:(ft=O.addUsedSchema)!==null&&ft!==void 0?ft:!0,validateSchema:(Ee=O.validateSchema)!==null&&Ee!==void 0?Ee:!0,validateFormats:(he=O.validateFormats)!==null&&he!==void 0?he:!0,unicodeRegExp:(Ue=O.unicodeRegExp)!==null&&Ue!==void 0?Ue:!0,int32range:(nt=O.int32range)!==null&&nt!==void 0?nt:!0,uriResolver:xt}}class w{constructor(V={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,V=this.opts={...V,..._(V)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=L(V.logger);const H=V.validateFormats;V.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,V,"NOT SUPPORTED"),E.call(this,y,V,"DEPRECATED","warn"),this._metaOpts=R.call(this),V.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),V.keywords&&A.call(this,V.keywords),typeof V.meta=="object"&&this.addMetaSchema(V.meta),S.call(this),V.validateFormats=H}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:V,meta:W,schemaId:j}=this.opts;let H=d;j==="id"&&(H={...d},H.id=H.$id,delete H.$id),W&&V&&this.addMetaSchema(H,H[j],!1)}defaultMeta(){const{meta:V,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof V=="object"?V[W]||V:void 0}validate(V,W){let j;if(typeof V=="string"){if(j=this.getSchema(V),!j)throw new Error(`no schema with key or ref "${V}"`)}else j=this.compile(V);const H=j(W);return"$async"in j||(this.errors=j.errors),H}compile(V,W){const j=this._addSchema(V,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(V,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return H.call(this,V,W);async function H(ue,xe){await G.call(this,ue.$schema);const de=this._addSchema(ue,xe);return de.validate||J.call(this,de)}async function G(ue){ue&&!this.getSchema(ue)&&await H.call(this,{$ref:ue},!0)}async function J(ue){try{return this._compileSchemaEnv(ue)}catch(xe){if(!(xe instanceof i.default))throw xe;return se.call(this,xe),await ie.call(this,xe.missingSchema),J.call(this,ue)}}function se({missingSchema:ue,missingRef:xe}){if(this.refs[ue])throw new Error(`AnySchema ${ue} is loaded but ${xe} cannot be resolved`)}async function ie(ue){const xe=await ne.call(this,ue);this.refs[ue]||await G.call(this,xe.$schema),this.refs[ue]||this.addSchema(xe,ue,W)}async function ne(ue){const xe=this._loading[ue];if(xe)return xe;try{return await(this._loading[ue]=j(ue))}finally{delete this._loading[ue]}}}addSchema(V,W,j,H=this.opts.validateSchema){if(Array.isArray(V)){for(const J of V)this.addSchema(J,void 0,j,H);return this}let G;if(typeof V=="object"){const{schemaId:J}=this.opts;if(G=V[J],G!==void 0&&typeof G!="string")throw new Error(`schema ${J} must be string`)}return W=(0,l.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(V,j,W,H,!0),this}addMetaSchema(V,W,j=this.opts.validateSchema){return this.addSchema(V,W,!0,j),this}validateSchema(V,W){if(typeof V=="boolean")return!0;let j;if(j=V.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const H=this.validate(j,V);if(!H&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return H}getSchema(V){let W;for(;typeof(W=x.call(this,V))=="string";)V=W;if(W===void 0){const{schemaId:j}=this.opts,H=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,H,V),!W)return;this.refs[V]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(V){if(V instanceof RegExp)return this._removeAllSchemas(this.schemas,V),this._removeAllSchemas(this.refs,V),this;switch(typeof V){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=x.call(this,V);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[V],delete this.refs[V],this}case"object":{const W=V;this._cache.delete(W);let j=V[this.opts.schemaId];return j&&(j=(0,l.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(V){for(const W of V)this.addKeyword(W);return this}addKeyword(V,W){let j;if(typeof V=="string")j=V,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof V=="object"&&W===void 0){if(W=V,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>D.call(this,G)),this;B.call(this,W);const H={...W,type:(0,u.getJSONTypes)(W.type),schemaType:(0,u.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,H.type.length===0?G=>D.call(this,G,H):G=>H.type.forEach(J=>D.call(this,G,H,J))),this}getKeyword(V){const W=this.RULES.all[V];return typeof W=="object"?W.definition:!!W}removeKeyword(V){const{RULES:W}=this;delete W.keywords[V],delete W.all[V];for(const j of W.rules){const H=j.rules.findIndex(G=>G.keyword===V);H>=0&&j.rules.splice(H,1)}return this}addFormat(V,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[V]=W,this}errorsText(V=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!V||V.length===0?"No errors":V.map(H=>`${j}${H.instancePath} ${H.message}`).reduce((H,G)=>H+W+G)}$dataMetaSchema(V,W){const j=this.RULES.all;V=JSON.parse(JSON.stringify(V));for(const H of W){const G=H.split("/").slice(1);let J=V;for(const se of G)J=J[se];for(const se in j){const ie=j[se];if(typeof ie!="object")continue;const{$data:ne}=ie.definition,ue=J[se];ne&&ue&&(J[se]=U(ue))}}return V}_removeAllSchemas(V,W){for(const j in V){const H=V[j];(!W||W.test(j))&&(typeof H=="string"?delete V[j]:H&&!H.meta&&(this._cache.delete(H.schema),delete V[j]))}}_addSchema(V,W,j,H=this.opts.validateSchema,G=this.opts.addUsedSchema){let J;const{schemaId:se}=this.opts;if(typeof V=="object")J=V[se];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof V!="boolean")throw new Error("schema must be object or boolean")}let ie=this._cache.get(V);if(ie!==void 0)return ie;j=(0,l.normalizeId)(J||j);const ne=l.getSchemaRefs.call(this,V,j);return ie=new o.SchemaEnv({schema:V,schemaId:se,meta:W,baseId:j,localRefs:ne}),this._cache.set(ie.schema,ie),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=ie),H&&this.validateSchema(V,!0),ie}_checkUnique(V){if(this.schemas[V]||this.refs[V])throw new Error(`schema with key or id "${V}" already exists`)}_compileSchemaEnv(V){if(V.meta?this._compileMetaSchema(V):o.compileSchema.call(this,V),!V.validate)throw new Error("ajv implementation error");return V.validate}_compileMetaSchema(V){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,V)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(O,V,W,j="error"){for(const H in O){const G=H;G in V&&this.logger[j](`${W}: option ${H}. ${O[G]}`)}}function x(O){return O=(0,l.normalizeId)(O),this.schemas[O]||this.refs[O]}function S(){const O=this.opts.schemas;if(O)if(Array.isArray(O))this.addSchema(O);else for(const V in O)this.addSchema(O[V],V)}function C(){for(const O in this.opts.formats){const V=this.opts.formats[O];V&&this.addFormat(O,V)}}function A(O){if(Array.isArray(O)){this.addVocabulary(O);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const V in O){const W=O[V];W.keyword||(W.keyword=V),this.addKeyword(W)}}function R(){const O={...this.opts};for(const V of p)delete O[V];return O}const P={log(){},warn(){},error(){}};function L(O){if(O===!1)return P;if(O===void 0)return console;if(O.log&&O.warn&&O.error)return O;throw new Error("logger must implement log, warn and error methods")}const k=/^[a-z_$][a-z0-9_$:-]*$/i;function $(O,V){const{RULES:W}=this;if((0,c.eachItem)(O,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!k.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!V&&V.$data&&!("code"in V||"validate"in V))throw new Error('$data keyword must have "code" or "validate" function')}function D(O,V,W){var j;const H=V==null?void 0:V.post;if(W&&H)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let J=H?G.post:G.rules.find(({type:ie})=>ie===W);if(J||(J={type:W,rules:[]},G.rules.push(J)),G.keywords[O]=!0,!V)return;const se={keyword:O,definition:{...V,type:(0,u.getJSONTypes)(V.type),schemaType:(0,u.getJSONTypes)(V.schemaType)}};V.before?M.call(this,J,se,V.before):J.rules.push(se),G.all[O]=se,(j=V.implements)===null||j===void 0||j.forEach(ie=>this.addKeyword(ie))}function M(O,V,W){const j=O.rules.findIndex(H=>H.keyword===W);j>=0?O.rules.splice(j,0,V):(O.rules.push(V),this.logger.warn(`rule ${W} is not defined`))}function B(O){let{metaSchema:V}=O;V!==void 0&&(O.$data&&this.opts.$data&&(V=U(V)),O.validateSchema=this.compile(V,!0))}const z={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function U(O){return{anyOf:[O,z]}}})(dCe);var QX={},JX={},ZX={};Object.defineProperty(ZX,"__esModule",{value:!0});const $pt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};ZX.default=$pt;var ib={};Object.defineProperty(ib,"__esModule",{value:!0});ib.callRef=ib.getValidate=void 0;const Lpt=vS,Nce=Vn,Pl=qn,N_=hp,Oce=jl,sN=At,Fpt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:l}=r,{root:u}=s;if((n==="#"||n==="#/")&&i===u.baseId)return d();const c=Oce.resolveRef.call(l,u,i,n);if(c===void 0)throw new Lpt.default(r.opts.uriResolver,i,n);if(c instanceof Oce.SchemaEnv)return f(c);return h(c);function d(){if(s===u)return QO(e,o,s,s.$async);const p=t.scopeValue("root",{ref:u});return QO(e,(0,Pl._)`${p}.validate`,u,u.$async)}function f(p){const m=HCe(e,p);QO(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Pl.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Pl.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function HCe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Pl._)`${n.scopeValue("wrapper",{ref:t})}.validate`}ib.getValidate=HCe;function QO(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:l}=s,u=l.passContext?N_.default.this:Pl.nil;r?c():d();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Pl._)`await ${(0,Nce.callValidateCode)(e,t,u)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Pl._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),f(m),o||i.assign(p,!1)}),e.ok(p)}function d(){e.result((0,Nce.callValidateCode)(e,t,u),()=>h(t),()=>f(t))}function f(p){const m=(0,Pl._)`${p}.errors`;i.assign(N_.default.vErrors,(0,Pl._)`${N_.default.vErrors} === null ? ${m} : ${N_.default.vErrors}.concat(${m})`),i.assign(N_.default.errors,(0,Pl._)`${N_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=sN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Pl._)`${p}.evaluated.props`);s.props=sN.mergeEvaluated.props(i,y,s.props,Pl.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=sN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Pl._)`${p}.evaluated.items`);s.items=sN.mergeEvaluated.items(i,y,s.items,Pl.Name)}}}ib.callRef=QO;ib.default=Fpt;Object.defineProperty(JX,"__esModule",{value:!0});const jpt=ZX,Bpt=ib,zpt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",jpt.default,Bpt.default];JX.default=zpt;var eQ={},tQ={};Object.defineProperty(tQ,"__esModule",{value:!0});const WM=qn,Rg=WM.operators,GM={maximum:{okStr:"<=",ok:Rg.LTE,fail:Rg.GT},minimum:{okStr:">=",ok:Rg.GTE,fail:Rg.LT},exclusiveMaximum:{okStr:"<",ok:Rg.LT,fail:Rg.GTE},exclusiveMinimum:{okStr:">",ok:Rg.GT,fail:Rg.LTE}},Upt={message:({keyword:e,schemaCode:t})=>(0,WM.str)`must be ${GM[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,WM._)`{comparison: ${GM[e].okStr}, limit: ${t}}`},Vpt={keyword:Object.keys(GM),type:"number",schemaType:"number",$data:!0,error:Upt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,WM._)`${n} ${GM[t].fail} ${r} || isNaN(${n})`)}};tQ.default=Vpt;var nQ={};Object.defineProperty(nQ,"__esModule",{value:!0});const H2=qn,Hpt={message:({schemaCode:e})=>(0,H2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,H2._)`{multipleOf: ${e}}`},qpt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Hpt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,H2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,H2._)`${o} !== parseInt(${o})`;e.fail$data((0,H2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};nQ.default=qpt;var rQ={},iQ={};Object.defineProperty(iQ,"__esModule",{value:!0});function qCe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}iQ.default=qCe;qCe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(rQ,"__esModule",{value:!0});const s1=qn,Wpt=At,Gpt=iQ,Ypt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,s1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,s1._)`{limit: ${e}}`},Kpt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Ypt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?s1.operators.GT:s1.operators.LT,o=i.opts.unicode===!1?(0,s1._)`${n}.length`:(0,s1._)`${(0,Wpt.useFunc)(e.gen,Gpt.default)}(${n})`;e.fail$data((0,s1._)`${o} ${s} ${r}`)}};rQ.default=Kpt;var sQ={};Object.defineProperty(sQ,"__esModule",{value:!0});const Xpt=Vn,YM=qn,Qpt={message:({schemaCode:e})=>(0,YM.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,YM._)`{pattern: ${e}}`},Jpt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Qpt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,YM._)`(new RegExp(${i}, ${o}))`:(0,Xpt.usePattern)(e,r);e.fail$data((0,YM._)`!${a}.test(${t})`)}};sQ.default=Jpt;var oQ={};Object.defineProperty(oQ,"__esModule",{value:!0});const q2=qn,Zpt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,q2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,q2._)`{limit: ${e}}`},emt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Zpt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?q2.operators.GT:q2.operators.LT;e.fail$data((0,q2._)`Object.keys(${n}).length ${i} ${r}`)}};oQ.default=emt;var aQ={};Object.defineProperty(aQ,"__esModule",{value:!0});const MT=Vn,W2=qn,tmt=At,nmt={message:({params:{missingProperty:e}})=>(0,W2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,W2._)`{missingProperty: ${e}}`},rmt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:nmt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const l=n.length>=a.loopRequired;if(o.allErrors?u():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,tmt.checkStrictMode)(o,y,o.opts.strictRequired)}}function u(){if(l||s)e.block$data(W2.nil,d);else for(const h of n)(0,MT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(l||s){const p=t.let("valid",!0);e.block$data(p,()=>f(h,p)),e.ok(p)}else t.if((0,MT.checkMissingProp)(e,n,h)),(0,MT.reportMissingProp)(e,h),t.else()}function d(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,MT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function f(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,MT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,W2.not)(p),()=>{e.error(),t.break()})},W2.nil)}}};aQ.default=rmt;var lQ={};Object.defineProperty(lQ,"__esModule",{value:!0});const G2=qn,imt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,G2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,G2._)`{limit: ${e}}`},smt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:imt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?G2.operators.GT:G2.operators.LT;e.fail$data((0,G2._)`${n}.length ${i} ${r}`)}};lQ.default=smt;var uQ={},Wk={};Object.defineProperty(Wk,"__esModule",{value:!0});const WCe=WX;WCe.code='require("ajv/dist/runtime/equal").default';Wk.default=WCe;Object.defineProperty(uQ,"__esModule",{value:!0});const nB=Vs,Do=qn,omt=At,amt=Wk,lmt={message:({params:{i:e,j:t}})=>(0,Do.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Do._)`{i: ${e}, j: ${t}}`},umt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:lmt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const l=t.let("valid"),u=s.items?(0,nB.getSchemaTypes)(s.items):[];e.block$data(l,c,(0,Do._)`${o} === false`),e.ok(l);function c(){const p=t.let("i",(0,Do._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(l,!0),t.if((0,Do._)`${p} > 1`,()=>(d()?f:h)(p,m))}function d(){return u.length>0&&!u.some(p=>p==="object"||p==="array")}function f(p,m){const g=t.name("item"),y=(0,nB.checkDataTypes)(u,g,a.opts.strictNumbers,nB.DataType.Wrong),b=t.const("indices",(0,Do._)`{}`);t.for((0,Do._)`;${p}--;`,()=>{t.let(g,(0,Do._)`${n}[${p}]`),t.if(y,(0,Do._)`continue`),u.length>1&&t.if((0,Do._)`typeof ${g} == "string"`,(0,Do._)`${g} += "_"`),t.if((0,Do._)`typeof ${b}[${g}] == "number"`,()=>{t.assign(m,(0,Do._)`${b}[${g}]`),e.error(),t.assign(l,!1).break()}).code((0,Do._)`${b}[${g}] = ${p}`)})}function h(p,m){const g=(0,omt.useFunc)(t,amt.default),y=t.name("outer");t.label(y).for((0,Do._)`;${p}--;`,()=>t.for((0,Do._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Do._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(l,!1).break(y)})))}}};uQ.default=umt;var cQ={};Object.defineProperty(cQ,"__esModule",{value:!0});const KU=qn,cmt=At,dmt=Wk,fmt={message:"must be equal to constant",params:({schemaCode:e})=>(0,KU._)`{allowedValue: ${e}}`},hmt={keyword:"const",$data:!0,error:fmt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,KU._)`!${(0,cmt.useFunc)(t,dmt.default)}(${n}, ${i})`):e.fail((0,KU._)`${s} !== ${n}`)}};cQ.default=hmt;var dQ={};Object.defineProperty(dQ,"__esModule",{value:!0});const kC=qn,pmt=At,mmt=Wk,gmt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,kC._)`{allowedValues: ${e}}`},ymt={keyword:"enum",schemaType:"array",$data:!0,error:gmt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let l;const u=()=>l??(l=(0,pmt.useFunc)(t,mmt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,d);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,kC.or)(...i.map((p,m)=>f(h,m)))}e.pass(c);function d(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,kC._)`${u()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function f(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,kC._)`${u()}(${n}, ${h}[${p}])`:(0,kC._)`${n} === ${m}`}}};dQ.default=ymt;Object.defineProperty(eQ,"__esModule",{value:!0});const vmt=tQ,bmt=nQ,_mt=rQ,wmt=sQ,Emt=oQ,xmt=aQ,Smt=lQ,Tmt=uQ,Cmt=cQ,Amt=dQ,Imt=[vmt.default,bmt.default,_mt.default,wmt.default,Emt.default,xmt.default,Smt.default,Tmt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Cmt.default,Amt.default];eQ.default=Imt;var fQ={},bS={};Object.defineProperty(bS,"__esModule",{value:!0});bS.validateAdditionalItems=void 0;const o1=qn,XU=At,kmt={message:({params:{len:e}})=>(0,o1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,o1._)`{limit: ${e}}`},Rmt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:kmt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,XU.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}GCe(e,r)}};function GCe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,o1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,o1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,XU.alwaysValidSchema)(o,r)){const u=n.var("valid",(0,o1._)`${a} <= ${t.length}`);n.if((0,o1.not)(u),()=>l(u)),e.ok(u)}function l(u){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:XU.Type.Num},u),o.allErrors||n.if((0,o1.not)(u),()=>n.break())})}}bS.validateAdditionalItems=GCe;bS.default=Rmt;var hQ={},_S={};Object.defineProperty(_S,"__esModule",{value:!0});_S.validateTuple=void 0;const Dce=qn,JO=At,Pmt=Vn,Nmt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return YCe(e,"additionalItems",t);n.items=!0,!(0,JO.alwaysValidSchema)(n,t)&&e.ok((0,Pmt.validateArray)(e))}};function YCe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=JO.mergeEvaluated.items(r,n.length,a.items));const l=r.name("valid"),u=r.const("len",(0,Dce._)`${s}.length`);n.forEach((d,f)=>{(0,JO.alwaysValidSchema)(a,d)||(r.if((0,Dce._)`${u} > ${f}`,()=>e.subschema({keyword:o,schemaProp:f,dataProp:f},l)),e.ok(l))});function c(d){const{opts:f,errSchemaPath:h}=a,p=n.length,m=p===d.minItems&&(p===d.maxItems||d[t]===!1);if(f.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,JO.checkStrictMode)(a,g,f.strictTuples)}}}_S.validateTuple=YCe;_S.default=Nmt;Object.defineProperty(hQ,"__esModule",{value:!0});const Omt=_S,Dmt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,Omt.validateTuple)(e,"items")};hQ.default=Dmt;var pQ={};Object.defineProperty(pQ,"__esModule",{value:!0});const Mce=qn,Mmt=At,$mt=Vn,Lmt=bS,Fmt={message:({params:{len:e}})=>(0,Mce.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Mce._)`{limit: ${e}}`},jmt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:Fmt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,Mmt.alwaysValidSchema)(r,t)&&(i?(0,Lmt.validateAdditionalItems)(e,i):e.ok((0,$mt.validateArray)(e)))}};pQ.default=jmt;var mQ={};Object.defineProperty(mQ,"__esModule",{value:!0});const Cc=qn,oN=At,Bmt={message:({params:{min:e,max:t}})=>t===void 0?(0,Cc.str)`must contain at least ${e} valid item(s)`:(0,Cc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Cc._)`{minContains: ${e}}`:(0,Cc._)`{minContains: ${e}, maxContains: ${t}}`},zmt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:Bmt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:l,maxContains:u}=r;s.opts.next?(o=l===void 0?1:l,a=u):o=1;const c=t.const("len",(0,Cc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,oN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,oN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,oN.alwaysValidSchema)(s,n)){let m=(0,Cc._)`${c} >= ${o}`;a!==void 0&&(m=(0,Cc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const d=t.name("valid");a===void 0&&o===1?h(d,()=>t.if(d,()=>t.break())):o===0?(t.let(d,!0),a!==void 0&&t.if((0,Cc._)`${i}.length > 0`,f)):(t.let(d,!1),f()),e.result(d,()=>e.reset());function f(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:oN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,Cc._)`${m}++`),a===void 0?t.if((0,Cc._)`${m} >= ${o}`,()=>t.assign(d,!0).break()):(t.if((0,Cc._)`${m} > ${a}`,()=>t.assign(d,!1).break()),o===1?t.assign(d,!0):t.if((0,Cc._)`${m} >= ${o}`,()=>t.assign(d,!0)))}}};mQ.default=zmt;var KCe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=qn,n=At,r=Vn;e.error={message:({params:{property:l,depsCount:u,deps:c}})=>{const d=u===1?"property":"properties";return(0,t.str)`must have ${d} ${c} when property ${l} is present`},params:({params:{property:l,depsCount:u,deps:c,missingProperty:d}})=>(0,t._)`{property: ${l},
    missingProperty: ${d},
    depsCount: ${u},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(l){const[u,c]=s(l);o(l,u),a(l,c)}};function s({schema:l}){const u={},c={};for(const d in l){if(d==="__proto__")continue;const f=Array.isArray(l[d])?u:c;f[d]=l[d]}return[u,c]}function o(l,u=l.schema){const{gen:c,data:d,it:f}=l;if(Object.keys(u).length===0)return;const h=c.let("missing");for(const p in u){const m=u[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,d,p,f.opts.ownProperties);l.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),f.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(l,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(l,m,h)})`),(0,r.reportMissingProp)(l,h),c.else())}}e.validatePropertyDeps=o;function a(l,u=l.schema){const{gen:c,data:d,keyword:f,it:h}=l,p=c.name("valid");for(const m in u)(0,n.alwaysValidSchema)(h,u[m])||(c.if((0,r.propertyInData)(c,d,m,h.opts.ownProperties),()=>{const g=l.subschema({keyword:f,schemaProp:m},p);l.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),l.ok(p))}e.validateSchemaDeps=a,e.default=i})(KCe);var gQ={};Object.defineProperty(gQ,"__esModule",{value:!0});const XCe=qn,Umt=At,Vmt={message:"property name must be valid",params:({params:e})=>(0,XCe._)`{propertyName: ${e.propertyName}}`},Hmt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:Vmt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,Umt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,XCe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};gQ.default=Hmt;var d6={};Object.defineProperty(d6,"__esModule",{value:!0});const aN=Vn,Cd=qn,qmt=hp,lN=At,Wmt={message:"must NOT have additional properties",params:({params:e})=>(0,Cd._)`{additionalProperty: ${e.additionalProperty}}`},Gmt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Wmt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:l}=o;if(o.props=!0,l.removeAdditional!=="all"&&(0,lN.alwaysValidSchema)(o,n))return;const u=(0,aN.allSchemaProperties)(r.properties),c=(0,aN.allSchemaProperties)(r.patternProperties);d(),e.ok((0,Cd._)`${s} === ${qmt.default.errors}`);function d(){t.forIn("key",i,g=>{!u.length&&!c.length?p(g):t.if(f(g),()=>p(g))})}function f(g){let y;if(u.length>8){const b=(0,lN.schemaRefOrVal)(o,r.properties,"properties");y=(0,aN.isOwnProperty)(t,b,g)}else u.length?y=(0,Cd.or)(...u.map(b=>(0,Cd._)`${g} === ${b}`)):y=Cd.nil;return c.length&&(y=(0,Cd.or)(y,...c.map(b=>(0,Cd._)`${(0,aN.usePattern)(e,b)}.test(${g})`))),(0,Cd.not)(y)}function h(g){t.code((0,Cd._)`delete ${i}[${g}]`)}function p(g){if(l.removeAdditional==="all"||l.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,lN.alwaysValidSchema)(o,n)){const y=t.name("valid");l.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Cd.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Cd.not)(y),()=>t.break()))}}function m(g,y,b){const _={keyword:"additionalProperties",dataProp:g,dataPropType:lN.Type.Str};b===!1&&Object.assign(_,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(_,y)}}};d6.default=Gmt;var yQ={};Object.defineProperty(yQ,"__esModule",{value:!0});const Ymt=af,$ce=Vn,rB=At,Lce=d6,Kmt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Lce.default.code(new Ymt.KeywordCxt(s,Lce.default,"additionalProperties"));const o=(0,$ce.allSchemaProperties)(n);for(const d of o)s.definedProperties.add(d);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=rB.mergeEvaluated.props(t,(0,rB.toHash)(o),s.props));const a=o.filter(d=>!(0,rB.alwaysValidSchema)(s,n[d]));if(a.length===0)return;const l=t.name("valid");for(const d of a)u(d)?c(d):(t.if((0,$ce.propertyInData)(t,i,d,s.opts.ownProperties)),c(d),s.allErrors||t.else().var(l,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(l);function u(d){return s.opts.useDefaults&&!s.compositeRule&&n[d].default!==void 0}function c(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},l)}}};yQ.default=Kmt;var vQ={};Object.defineProperty(vQ,"__esModule",{value:!0});const Fce=Vn,uN=qn,jce=At,Bce=At,Xmt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Fce.allSchemaProperties)(n),l=a.filter(m=>(0,jce.alwaysValidSchema)(s,n[m]));if(a.length===0||l.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const u=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof uN.Name)&&(s.props=(0,Bce.evaluatedPropsToName)(t,s.props));const{props:d}=s;f();function f(){for(const m of a)u&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in u)new RegExp(m).test(g)&&(0,jce.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,uN._)`${(0,Fce.usePattern)(e,m)}.test(${g})`,()=>{const y=l.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Bce.Type.Str},c),s.opts.unevaluated&&d!==!0?t.assign((0,uN._)`${d}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,uN.not)(c),()=>t.break())})})}}};vQ.default=Xmt;var bQ={};Object.defineProperty(bQ,"__esModule",{value:!0});const Qmt=At,Jmt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,Qmt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};bQ.default=Jmt;var _Q={};Object.defineProperty(_Q,"__esModule",{value:!0});const Zmt=Vn,egt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:Zmt.validateUnion,error:{message:"must match a schema in anyOf"}};_Q.default=egt;var wQ={};Object.defineProperty(wQ,"__esModule",{value:!0});const ZO=qn,tgt=At,ngt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,ZO._)`{passingSchemas: ${e.passing}}`},rgt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:ngt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),l=t.name("_valid");e.setParams({passing:a}),t.block(u),e.result(o,()=>e.reset(),()=>e.error(!0));function u(){s.forEach((c,d)=>{let f;(0,tgt.alwaysValidSchema)(i,c)?t.var(l,!0):f=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},l),d>0&&t.if((0,ZO._)`${l} && ${o}`).assign(o,!1).assign(a,(0,ZO._)`[${a}, ${d}]`).else(),t.if(l,()=>{t.assign(o,!0),t.assign(a,d),f&&e.mergeEvaluated(f,ZO.Name)})})}}};wQ.default=rgt;var EQ={};Object.defineProperty(EQ,"__esModule",{value:!0});const igt=At,sgt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,igt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};EQ.default=sgt;var xQ={};Object.defineProperty(xQ,"__esModule",{value:!0});const KM=qn,QCe=At,ogt={message:({params:e})=>(0,KM.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,KM._)`{failingKeyword: ${e.ifClause}}`},agt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:ogt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,QCe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=zce(r,"then"),s=zce(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(l(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,u("then",c),u("else",c))}else i?t.if(a,u("then")):t.if((0,KM.not)(a),u("else"));e.pass(o,()=>e.error(!0));function l(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function u(c,d){return()=>{const f=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(f,o),d?t.assign(d,(0,KM._)`${c}`):e.setParams({ifClause:c})}}}};function zce(e,t){const n=e.schema[t];return n!==void 0&&!(0,QCe.alwaysValidSchema)(e,n)}xQ.default=agt;var SQ={};Object.defineProperty(SQ,"__esModule",{value:!0});const lgt=At,ugt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,lgt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};SQ.default=ugt;Object.defineProperty(fQ,"__esModule",{value:!0});const cgt=bS,dgt=hQ,fgt=_S,hgt=pQ,pgt=mQ,mgt=KCe,ggt=gQ,ygt=d6,vgt=yQ,bgt=vQ,_gt=bQ,wgt=_Q,Egt=wQ,xgt=EQ,Sgt=xQ,Tgt=SQ;function Cgt(e=!1){const t=[_gt.default,wgt.default,Egt.default,xgt.default,Sgt.default,Tgt.default,ggt.default,ygt.default,mgt.default,vgt.default,bgt.default];return e?t.push(dgt.default,hgt.default):t.push(cgt.default,fgt.default),t.push(pgt.default),t}fQ.default=Cgt;var TQ={},CQ={};Object.defineProperty(CQ,"__esModule",{value:!0});const vs=qn,Agt={message:({schemaCode:e})=>(0,vs.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,vs._)`{format: ${e}}`},Igt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Agt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:l,errSchemaPath:u,schemaEnv:c,self:d}=a;if(!l.validateFormats)return;i?f():h();function f(){const p=n.scopeValue("formats",{ref:d.formats,code:l.code.formats}),m=n.const("fDef",(0,vs._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,vs._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,vs._)`${m}.type || "string"`).assign(y,(0,vs._)`${m}.validate`),()=>n.assign(g,(0,vs._)`"string"`).assign(y,m)),e.fail$data((0,vs.or)(b(),_()));function b(){return l.strictSchema===!1?vs.nil:(0,vs._)`${o} && !${y}`}function _(){const w=c.$async?(0,vs._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,vs._)`${y}(${r})`,E=(0,vs._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,vs._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=d.formats[s];if(!p){b();return}if(p===!0)return;const[m,g,y]=_(p);m===t&&e.pass(w());function b(){if(l.strictSchema===!1){d.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${u}"`}}function _(E){const x=E instanceof RegExp?(0,vs.regexpCode)(E):l.code.formats?(0,vs._)`${l.code.formats}${(0,vs.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:E,code:x});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,vs._)`${S}.validate`]:["string",E,S]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,vs._)`await ${y}(${r})`}return typeof g=="function"?(0,vs._)`${y}(${r})`:(0,vs._)`${y}.test(${r})`}}}};CQ.default=Igt;Object.defineProperty(TQ,"__esModule",{value:!0});const kgt=CQ,Rgt=[kgt.default];TQ.default=Rgt;var XE={};Object.defineProperty(XE,"__esModule",{value:!0});XE.contentVocabulary=XE.metadataVocabulary=void 0;XE.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];XE.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(QX,"__esModule",{value:!0});const Pgt=JX,Ngt=eQ,Ogt=fQ,Dgt=TQ,Uce=XE,Mgt=[Pgt.default,Ngt.default,(0,Ogt.default)(),Dgt.default,Uce.metadataVocabulary,Uce.contentVocabulary];QX.default=Mgt;var AQ={},f6={};Object.defineProperty(f6,"__esModule",{value:!0});f6.DiscrError=void 0;var Vce;(function(e){e.Tag="tag",e.Mapping="mapping"})(Vce||(f6.DiscrError=Vce={}));Object.defineProperty(AQ,"__esModule",{value:!0});const rw=qn,QU=f6,Hce=jl,$gt=vS,Lgt=At,Fgt={message:({params:{discrError:e,tagName:t}})=>e===QU.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,rw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},jgt={keyword:"discriminator",type:"object",schemaType:"object",error:Fgt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const l=t.let("valid",!1),u=t.const("tag",(0,rw._)`${n}${(0,rw.getProperty)(a)}`);t.if((0,rw._)`typeof ${u} == "string"`,()=>c(),()=>e.error(!1,{discrError:QU.DiscrError.Tag,tag:u,tagName:a})),e.ok(l);function c(){const h=f();t.if(!1);for(const p in h)t.elseIf((0,rw._)`${u} === ${p}`),t.assign(l,d(h[p]));t.else(),e.error(!1,{discrError:QU.DiscrError.Mapping,tag:u,tagName:a}),t.endIf()}function d(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,rw.Name),p}function f(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,Lgt.schemaHasRulesButRef)(E,s.self.RULES)){const S=E.$ref;if(E=Hce.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof Hce.SchemaEnv&&(E=E.schema),E===void 0)throw new $gt.default(s.opts.uriResolver,s.baseId,S)}const x=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof x!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),b(x,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function b(w,E){if(w.const)_(w.const,E);else if(w.enum)for(const x of w.enum)_(x,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function _(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};AQ.default=jgt;const Bgt="http://json-schema.org/draft-07/schema#",zgt="http://json-schema.org/draft-07/schema#",Ugt="Core schema meta-schema",Vgt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Hgt=["object","boolean"],qgt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},Wgt={$schema:Bgt,$id:zgt,title:Ugt,definitions:Vgt,type:Hgt,properties:qgt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=dCe,r=QX,i=AQ,s=Wgt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class l extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=l,e.exports=t=l,e.exports.Ajv=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var u=af;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return u.KeywordCxt}});var c=qn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var d=qk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return d.default}});var f=vS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return f.default}})})(VU,VU.exports);var Ggt=VU.exports;const JCe=mu(Ggt),Ygt="#/definitions/StudyConfig",Kgt="http://json-schema.org/draft-07/schema#",Xgt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},recordStudyAudio:{type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},tasksToNotRecordAudio:{items:{type:"string"},type:"array"},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},Qgt={$ref:Ygt,$schema:Kgt,definitions:Xgt},Jgt="#/definitions/GlobalConfig",Zgt="http://json-schema.org/draft-07/schema#",e0t={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},t0t={$ref:Jgt,$schema:Zgt,definitions:e0t},ZCe=new JCe;ZCe.addSchema(t0t);const qce=ZCe.getSchema("#/definitions/GlobalConfig"),e2e=new JCe;e2e.addSchema(Qgt);const iB=e2e.getSchema("#/definitions/StudyConfig");function n0t(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function h6(e){return e.baseComponent!==void 0}function r0t(e){const t=FX.parse(e),n=qce(t),r=n0t(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...qce.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function t2e(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):t2e(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function i0t(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;h6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=iCe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return t2e(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function s0t(e){let t=!1,n;try{n=FX.parse(e),t=iB(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=i0t(n);r=[...iB.errors||[],...s],i=o}else r=iB.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function n2e(){const e=lg(),{setAlertModal:t}=tc(),n=Xc();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var Wce=Object.prototype.hasOwnProperty;function Gce(e,t,n){for(n of e.keys())if(Y2(n,t))return n}function Y2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&Y2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Gce(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Gce(t,i),!i)||!Y2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(Wce.call(e,n)&&++r&&!Wce.call(t,n)||!(n in t)||!Y2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function o0t(e){var t=I.useRef(e),n=I.useRef(0);return Y2(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function a0t(e,t){return I.useEffect(e,o0t(t))}const Kd=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),l=I.useRef(),u=I.useRef(!1);I.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const c=I.useCallback((...d)=>{r("pending"),a(null);const f=Promise.resolve(e(...d)).then(h=>(u.current&&f===l.current&&(s(h),r("success")),h)).catch(h=>{throw u.current&&f===l.current&&(s(null),a(h),r("error")),h});return l.current=f,f},[e]);return a0t(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Yce=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],r2e=["participantId","trialId","trialOrder","responseId"];function IQ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function l0t(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Zl(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),l=n.components[o],u=h6(l)&&l.baseComponent&&n.baseComponents?DX({},n.baseComponents[l.baseComponent],l):l,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([f,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:f},m=u.response.find(b=>b.id===f);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=u.description),t.includes("instruction")&&(p.instruction=u.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const b=(y=(g=u.correctAnswer)==null?void 0:g.find(_=>_.id===f))==null?void 0:y.answer;p.correctAnswer=typeof b=="object"?JSON.stringify(b):b}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(u.meta,null,2)),p}).flat()}).flat()}async function u0t(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...r2e,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,u=(await Promise.all(t.map(async c=>await l0t(c,i,o[c.participantConfigHash])))).flat().sort((c,d)=>c!==d?c.participantId.localeCompare(d.participantId):c.trialOrder-d.trialOrder);return{header:a,rows:u}}function c0t({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...Yce].filter(h=>h!=="meta")),a=ki(),{value:l,status:u,error:c}=Kd(u0t,[s,r,a.storageEngine,i]),d=I.useCallback(()=>{if(!l)return;const h=[l.header.join(","),...l.rows.map(p=>l.header.map(m=>p[m]).join(","))].join(`
`);IQ(h,n)},[n,l]),f=I.useMemo(()=>{if(!l)return"";const h=l.rows.length>5?5:l.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${l.rows.length} row${p}.`},[l]);return v.jsxs(xs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[v.jsx(IF,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Yce],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:v.jsx(dtt,{}),variant:"filled"}),v.jsx(Hc,{h:"md"}),v.jsxs(ge,{mih:300,style:{width:"100%",overflow:"scroll"},children:[u==="success"&&l?v.jsxs(or,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[v.jsx(or.Thead,{children:v.jsx(or.Tr,{children:l.header.map(h=>v.jsx(or.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:v.jsxs(Ct,{direction:"row",justify:"space-between",align:"center",children:[h,!r2e.includes(h)&&v.jsx(Bn,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:v.jsx(HF,{size:16})})]})},h))})}),v.jsx(or.Tbody,{children:l.rows.slice(0,5).map((h,p)=>v.jsx(or.Tr,{children:l.header.map(m=>v.jsx(or.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):u==="error"&&c?v.jsx(oS,{variant:"light",children:c.message}):null,v.jsx(su,{visible:u==="pending"||u==="idle"})]}),v.jsx(Hc,{h:"sm"}),v.jsx(Ct,{justify:"center",fz:"sm",c:"dimmed",children:v.jsx(Xe,{children:f})}),v.jsx(Hc,{h:"md"}),v.jsxs(Ln,{justify:"right",children:[v.jsx(xn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),v.jsx(xn,{leftSection:v.jsx(Hxe,{}),onClick:()=>d(),"data-autofocus":!0,children:"Download"})]})]})}function i2e(){const e=_f(),{storageEngine:t}=ki(),{answers:n}=Qo(b=>b),[r,i]=I.useState(!1);I.useEffect(()=>{const b=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(b))},1e3)},[]),n2e();const[s,o]=I.useState(),[a,l]=I.useState(""),u=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function b(){if(t){const _=await t.getCurrentParticipantId(),w=await t.getParticipantData();l(_),o(w)}}b()},[t]);const c=I.useCallback(async()=>{IQ(JSON.stringify(s,null,2),`${u}_${a}.json`)},[u,s,a]),d=e.uiConfig.autoDownloadStudy||!1,f=d&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(f/1e3));I.useEffect(()=>{if(r){const b=setInterval(()=>{p(_=>_-1)},1e3);return h<=0?(d&&c(),clearInterval(b),()=>clearInterval(b)):()=>clearInterval(b)}return()=>{}},[d,r,h,c]);const m=Gb(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const _=await t.getModes(m);y(_.dataCollectionEnabled)}})()},[t,m]),v.jsx(Ju,{style:{height:"100%"},children:v.jsx(Ct,{direction:"column",children:r||!g?v.jsx(Xe,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?v.jsx(cl,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):v.jsxs(v.Fragment,{children:[v.jsx(Xe,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),v.jsx(Hc,{h:"lg"}),v.jsx(Ju,{children:v.jsx(Os,{color:"blue"})})]})})})}function Vu(e){return structuredClone(e)}const s2e=I.createContext(null);function d0t(){const e=I.useContext(s2e);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Kce(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function f0t(){const e=lg(),t=OX(),r=`${fp()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Qo(x=>x),a=Xc(),{saveTrialAnswer:l,setIframeAnswers:u}=tc(),{storageEngine:c}=ki(),d=Gb(),[f,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(d);h(S.dataCollectionEnabled)}})()},[c,d]);const p=cft(r),m=typeof e!="number"||!p,g=$X(),y=hc(),b=_f(),_=I.useMemo(()=>Date.now(),[]),w=d0t(),E=I.useCallback(()=>{if(typeof e!="number")return;const x=Vu(i[r]),S=Object.values(x).reduce((D,M)=>Object.hasOwn(M,"values")?{...D,...M.values}:D,{}),{provenanceGraph:C}=x,A=Date.now(),R=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];f&&!g.endTime&&(a(l({identifier:r,answer:S,startTime:_,endTime:A,provenanceGraph:C,windowEvents:R})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:_,endTime:A,provenanceGraph:C,windowEvents:R}}),a(u({})));let P=e+1;const L=aft(s,e),k=L!==null&&L.some(D=>Object.hasOwn(D.currentBlock,"skip")&&D.currentBlock.skip!==void 0),$={...o,[r]:{answer:S,startTime:_,endTime:A,provenanceGraph:C,windowEvents:R}};k&&[...L.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const z=Object.fromEntries(Object.entries($).filter(([O])=>{const V=parseInt(O.slice(O.lastIndexOf("_")+1),10);return V>=M.firstIndex&&V<=e})),U=M.check!=="block"?Object.entries(z).filter(([O])=>O.slice(0,O.lastIndexOf("_"))===M.name):Object.entries(z);if(U.length===0)return!1;if(U.some(([O,V])=>!V))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[O,V]=U[0];M.check==="response"?B=M.value!==V.answer[M.responseId]:B=!Kce(V.answer,O,b.components[O.slice(0,O.lastIndexOf("_"))],b)}else if(M.check==="block"||M.check==="repeatedComponent"){if(U.length<M.value)return!1;const O=U.map(([j,H])=>Kce(H.answer,j,b.components[j.slice(0,j.lastIndexOf("_"))],b)),V=O.filter(j=>j).length,W=O.length-V;B=M.condition==="numCorrect"&&V===M.value||M.condition==="numIncorrect"&&W===M.value}if(B){const O=t.indexOf(M.to),V=O===-1?lft(s,M.to):-1;return P=O===-1?V:O,!0}return!1}),y(`/${d}/${P}${window.location.search}`)},[i,r,w,g,e,s,o,_,y,d,a,l,c,u,b,t]);return{isNextDisabled:m,goToNextStep:E}}function h0t({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=f0t(),o=I.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return v.jsx(xn,{type:"submit",disabled:t||i,onClick:o,children:e})}function p0t(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const m0t=typeof window<"u"?I.useLayoutEffect:I.useEffect;function ko(e,t){m0t(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function g0t(e,t){e&&p0t(e),ko(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),ko(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),ko(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),ko(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),ko(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),ko(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),ko(`mantine-form:${e}:clear-errors`,t.clearErrors),ko(`mantine-form:${e}:reset`,t.reset),ko(`mantine-form:${e}:validate`,t.validate),ko(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),ko(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),ko(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),ko(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),ko(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),ko(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),ko(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),ko(`mantine-form:${e}:reset-touched`,t.resetTouched)}function y0t(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function JU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function v0t(e){const[t,n]=I.useState(JU(e)),r=I.useRef(t),i=I.useCallback(l=>{n(u=>{const c=JU(typeof l=="function"?l(u):l);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(l=>{r.current[l]!==void 0&&i(u=>{const c={...u};return delete c[l],c})},[t]),a=I.useCallback((l,u)=>{u==null||u===!1?o(l):r.current[l]!==u&&i(c=>({...c,[l]:u}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function o2e(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Xce(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Qce(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=o2e(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([l])=>{if(!l.startsWith(`${i}.`))return!1;const u=Xce(l,i);return Number.isNaN(u)?!1:u>=t}).forEach(([l,u])=>{const c=Xce(l,i),d=l.replace(`${i}.${c}`,`${i}.${c+r}`);o[d]=u,a.add(d),a.has(l)||delete o[l]}),o}function b0t(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let l,u;if(a.startsWith(i)&&(l=a,u=a.replace(i,s)),a.startsWith(s)&&(l=a.replace(s,i),u=a),l&&u){const c=o[l],d=o[u];return d===void 0?delete o[l]:o[l]=d,c===void 0?delete o[u]:o[u]=c,!1}return!0}),o}function Jce(e,t,n){typeof n.value=="object"&&(n.value=Ow(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function Ow(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(Ow(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(Ow(a),Ow(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(Ow(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Jce(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Jce(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function a2e(e){return typeof e!="string"?[]:e.split(".")}function Vl(e,t){const n=a2e(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function p6(e,t,n){const r=a2e(e);if(r.length===0)return n;const i=Ow(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function _0t(e,{from:t,to:n},r){const i=Vl(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),p6(e,s,r)}function w0t(e,t,n,r){const i=Vl(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),p6(e,s,r)}function E0t(e,t,n){const r=Vl(e,n);return Array.isArray(r)?p6(e,r.filter((i,s)=>s!==t),n):n}function x0t({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(l=>b0t(o,a,l)),e.setValues({values:_0t(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(l=>Qce(o,a,l,-1)),e.setValues({values:E0t(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,l)=>{n.clearFieldDirty(o),t.setErrors(u=>Qce(o,l,u,1)),e.setValues({values:w0t(o,a,l,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}function cN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function S0t({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),l=I.useRef(t),u=I.useRef(e),c=I.useCallback(E=>{const x=typeof E=="function"?E(l.current):E;l.current=x,n==="controlled"&&s(x)},[]),d=I.useCallback(E=>{const x=typeof E=="function"?E(u.current):E;u.current=x,n==="controlled"&&a(x)},[]),f=I.useCallback(()=>c({}),[]),h=E=>{const x=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(x),d({})},p=I.useCallback((E,x)=>{c(S=>cN(S,E)===x?S:{...S,[E]:x})},[]),m=I.useCallback((E,x)=>{d(S=>cN(S,E)===x?S:{...S,[E]:x})},[]),g=I.useCallback(E=>cN(l.current,E),[]),y=I.useCallback(E=>d(x=>{if(typeof E!="string")return x;const S=o2e(E,x);return delete S[E],KO(S,x)?x:S}),[]),b=I.useCallback(E=>{if(E){const S=Vl(E,u.current);if(typeof S=="boolean")return S;const C=Vl(E,r.refValues.current),A=Vl(E,r.valuesSnapshot.current);return!KO(C,A)}return Object.keys(u.current).length>0?cN(u.current):!KO(r.refValues.current,r.valuesSnapshot.current)},[]),_=I.useCallback(()=>u.current,[]),w=I.useCallback(()=>l.current,[]);return{touchedState:i,dirtyState:o,touchedRef:l,dirtyRef:u,setTouched:c,setDirty:d,resetDirty:h,resetTouched:f,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:b,getDirty:_,getTouched:w}}function T0t({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),l=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const b=o.current,_=p instanceof Function?p(o.current):p,w=y?{...b,..._}:_;o.current=w,g&&s(w),t==null||t(w,b),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:b}))},[t]),u=I.useCallback(p=>{var y;const m=Vl(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const b=o.current,_=p6(p.path,g,o.current);l({values:_,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:_,previousValues:b}))}},[l]),c=I.useCallback(p=>{a.current=p},[]),d=I.useCallback((p,m)=>{r.current||(r.current=!0,l({values:p,updateState:n==="controlled"}),c(p),m())},[l]),f=I.useCallback(()=>{l({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[l]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:l,setFieldValue:u,resetValues:f,setValuesSnapshot:c,initialize:d,getValues:h}}function C0t({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Vl(i,o.previousValues),value:Vl(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Zce(e,t){return e?`${e}-${t.toString()}`:t.toString()}function ede(e){const t=JU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function ZU(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,l=Vl(a,t);let u=!1;return typeof o=="function"&&(i[a]=o(l,t,a)),typeof o=="object"&&Array.isArray(l)&&(u=!0,l.forEach((c,d)=>ZU(o,t,`${a}.${d}`,i))),typeof o=="object"&&typeof l=="object"&&l!==null&&(u||ZU(o,t,a,i)),i},r)}function eV(e,t){return ede(typeof e=="function"?e(t):ZU(e,t))}function dN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=eV(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const A0t="__MANTINE_FORM_INDEX__";function tde(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${A0t}`)):!1:!1}function l2e({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:l=!1,onValuesChange:u,transformValues:c=h=>h,enhanceGetInputProps:d,validate:f}={}){const h=v0t(r),p=T0t({initialValues:n,onValuesChange:u,mode:t}),m=S0t({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=x0t({$values:p,$errors:h,$status:m}),y=C0t({$status:m}),[b,_]=I.useState(0),[w,E]=I.useState({}),x=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&_(O=>O+1)},[]),S=I.useCallback(O=>{p.initialize(O,()=>t==="uncontrolled"&&_(V=>V+1))},[]),C=I.useCallback((O,V,W)=>{const j=tde(O,a);m.clearFieldDirty(O),m.setFieldTouched(O,!0),!j&&o&&h.clearFieldError(O),p.setFieldValue({path:O,value:V,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(O),j?H=>{const G=dN(O,f,H.updatedValues);G.hasError?h.setFieldError(O,G.error):h.clearFieldError(O)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(H=>({...H,[O]:(H[O]||0)+1})):null]})},[u,f]),A=I.useCallback(O=>{const V=p.refValues.current;p.setValues({values:O,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&_(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Vl(W,p.refValues.current),H=Vl(W,V);j!==H&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:V,updatedValues:p.refValues.current}))})},[u,o]),R=I.useCallback(()=>{const O=eV(f,p.refValues.current);return h.setErrors(O.errors),O},[f]),P=I.useCallback(O=>{const V=dN(O,f,p.refValues.current);return V.hasError?h.setFieldError(O,V.error):h.clearFieldError(O),V},[f]),L=(O,{type:V="input",withError:W=!0,withFocus:j=!0,...H}={})=>{const J={onChange:y0t(se=>C(O,se,{forceUpdate:!1})),"data-path":Zce(e,O)};return W&&(J.error=h.errorsState[O]),V==="checkbox"?J[t==="controlled"?"checked":"defaultChecked"]=Vl(O,p.refValues.current):J[t==="controlled"?"value":"defaultValue"]=Vl(O,p.refValues.current),j&&(J.onFocus=()=>m.setFieldTouched(O,!0),J.onBlur=()=>{if(tde(O,l)){const se=dN(O,f,p.refValues.current);se.hasError?h.setFieldError(O,se.error):h.clearFieldError(O)}}),Object.assign(J,d==null?void 0:d({inputProps:J,field:O,options:{type:V,withError:W,withFocus:j,...H},form:U}))},k=(O,V)=>W=>{W==null||W.preventDefault();const j=R();j.hasErrors?V==null||V(j.errors,p.refValues.current,W):O==null||O(c(p.refValues.current),W)},$=O=>c(O||p.refValues.current),D=I.useCallback(O=>{O.preventDefault(),x()},[]),M=I.useCallback(O=>O?!dN(O,f,p.refValues.current).hasError:!eV(f,p.refValues.current).hasErrors,[f]),B=O=>`${b}-${O}-${w[O]||0}`,z=I.useCallback(O=>document.querySelector(`[data-path="${Zce(e,O)}"]`),[]),U={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:x,validate:R,validateField:P,getInputProps:L,onSubmit:k,onReset:D,isValid:M,getTransformedValues:$,key:B,getInputNode:z};return g0t(e,U),U}function I0t(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function k0t(e){return I0t(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const R0t=new URLSearchParams(window.location.search),P0t=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?R0t.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},N0t=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function O0t(e,t,n){const[r,i]=I.useState(null),s=l2e({initialValues:P0t(e,n),validate:N0t(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Yb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function D0t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:l}=e;return v.jsx(Qu.Group,{label:v.jsxs(Ct,{direction:"row",wrap:"nowrap",gap:4,children:[i&&v.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),v.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:v.jsx(cl,{text:s,required:o})})]}),description:l,...n,error:Yb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:v.jsx(Ln,{mt:"xs",children:a.map(u=>v.jsx(Qu,{disabled:t,value:u.value,label:u.label},u.value))})})}function M0t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:l,secondaryText:u}=e;return v.jsx(vf,{disabled:t,label:v.jsxs(Ct,{direction:"row",wrap:"nowrap",gap:4,children:[i&&v.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),v.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:v.jsx(cl,{text:o,required:a})})]}),description:u,placeholder:s,data:l,radius:"md",size:"md",...n,error:Yb(e,n,l)})}function $0t({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return v.jsx(Kr.Wrapper,{label:v.jsxs(Ct,{direction:"row",wrap:"nowrap",gap:4,children:[r&&v.jsx(ge,{style:{minWidth:"fit-content"},children:`${n}. `}),v.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:v.jsx(cl,{text:i,required:s})})]}),description:o,size:"md",children:v.jsx(sf,{children:Array.isArray(t.value)?t.value.map(a=>v.jsx(sf.Item,{children:a},a)):v.jsx(sf.Item,{children:t.value})})})}function u2e({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:l,rightLabel:u,secondaryText:c}=e;return v.jsx(ty.Group,{name:`radioInput${e.id}`,label:v.jsxs(Ct,{direction:"row",wrap:"nowrap",gap:4,children:[i&&v.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),v.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:v.jsx(cl,{text:s,required:o})})]}),description:c,...n,error:Yb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:v.jsxs(Ln,{mt:"xs",children:[l?v.jsx(Xe,{style:{textAlign:"center"},children:l}):null,a.map(d=>v.jsx(ty,{disabled:t,value:d.value,label:d.label},d.label)),v.jsx(Xe,{children:u})]})},e.id)}function L0t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let l=1;l<=+s;l+=1)o.push({label:`${l}`,value:`${l}`});const a={...e,type:"radio",options:o};return v.jsx(u2e,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function F0t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:l,placeholder:u,secondaryText:c}=e;return v.jsx(EK,{disabled:t,placeholder:u,label:v.jsxs(Ct,{direction:"row",wrap:"nowrap",gap:4,children:[i&&v.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),v.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:v.jsx(cl,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:l,...n,error:Yb(e,n)})}function j0t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:l}=e,u=Yb(e,n);return v.jsx(Kr.Wrapper,{label:v.jsxs(Ct,{direction:"row",wrap:"nowrap",gap:4,children:[i&&v.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),v.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:v.jsx(cl,{text:s,required:o})})]}),description:l,error:u,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:v.jsx(NK,{disabled:t,marks:a,...n,h:40})})}function B0t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l}=e;return v.jsx(of,{disabled:t,placeholder:s,label:v.jsxs(Ct,{direction:"row",wrap:"nowrap",gap:4,children:[i&&v.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),v.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:v.jsx(cl,{text:o,required:a})})]}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:Yb(e,n)})}function z0t({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:l}=e;return v.jsx(UA,{disabled:t,placeholder:s,label:v.jsxs(Ct,{direction:"row",wrap:"nowrap",gap:4,children:[i&&v.jsx(ge,{style:{minWidth:"fit-content"},children:`${r}. `}),v.jsx(ge,{style:{display:"block"},className:"no-last-child-bottom-padding",children:v.jsx(cl,{text:o,required:a})})]}),description:l,radius:"md",size:"md",...n,value:n.value||"",error:Yb(e,n)})}function U0t({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=XK(),l=_f().uiConfig.enumerateQuestions??!1,u=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return v.jsxs(ge,{mb:"md",children:[e.type==="numerical"&&v.jsx(F0t,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="shortText"&&v.jsx(B0t,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="longText"&&v.jsx(z0t,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="likert"&&v.jsx(L0t,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="dropdown"&&v.jsx(M0t,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="slider"&&v.jsx(j0t,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="radio"&&v.jsx(u2e,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="checkbox"&&v.jsx(D0t,{response:e,disabled:u,answer:i,index:r,enumerateQuestions:l}),e.type==="iframe"&&v.jsx($0t,{response:e,answer:i,index:r,enumerateQuestions:l})]})}function XM({config:e,location:t,status:n,style:r}){var w;const i=lg(),s=fp(),o=n==null?void 0:n.answer,a=e,l=I.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(x=>x.location?x.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),u=Xc(),{updateResponseBlockValidation:c}=tc(),d=O0t(l,i,o||{}),[f,h]=I.useState(void 0),[p,m]=I.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Qo(E=>E),b=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,_=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return I.useEffect(()=>{const E=l.find(x=>x.type==="iframe");if(g&&E){const x=E.id;d.setValues({...d.values,[x]:g[x]})}},[g]),I.useEffect(()=>{y&&h(y)},[y]),I.useEffect(()=>{u(c({location:t,identifier:`${s}_${i}`,status:d.isValid(),values:Vu(d.values),provenanceGraph:f}))},[d.values,s,i,t,u,c,f]),v.jsxs("div",{style:r,children:[l.map((E,x)=>{var S,C;return v.jsx(ls.Fragment,{children:E.hidden?"":v.jsxs(v.Fragment,{children:[v.jsx(U0t,{storedAnswer:o?o[E.id]:void 0,answer:{...d.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:x+1}),b&&p&&v.jsx(Xe,{children:`The correct answer is: ${(C=(S=a.correctAnswer)==null?void 0:S.find(A=>A.id===E.id))==null?void 0:C.answer}`})]})},`${E.id}-${i}`)}),v.jsxs(Ln,{justify:"right",gap:"xs",children:[b&&_&&v.jsx(xn,{onClick:()=>m(!0),disabled:!d.isValid(),children:"Check Answer"}),_&&v.jsx(h0t,{disabled:b&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const c2e=I.createContext(null),kQ=({id:e="waveform",children:t})=>ls.createElement("div",{id:e},t),V0t=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],H0t=e=>e?V0t.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};var q0t=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function W0t(e,t){return q0t(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})}function G0t(e){const t=e[0];if(t.some(n=>n>1||n<-1)){const n=t.length;let r=0;for(let i=0;i<n;i++){const s=Math.abs(t[i]);s>r&&(r=s)}for(const i of e)for(let s=0;s<n;s++)i[s]/=r}return e}function Y0t(e,t){return typeof e[0]=="number"&&(e=[e]),G0t(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}const sB={decode:W0t,createBuffer:Y0t};var nde=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};function K0t(e,t,n){var r,i;return nde(this,void 0,void 0,function*(){const s=yield fetch(e,n);{const o=(r=s.clone().body)===null||r===void 0?void 0:r.getReader(),a=Number((i=s.headers)===null||i===void 0?void 0:i.get("Content-Length"));let l=0;const u=(c,d)=>nde(this,void 0,void 0,function*(){if(c)return;l+=(d==null?void 0:d.length)||0;const f=Math.round(l/a*100);return t(f),o==null?void 0:o.read().then(({done:h,value:p})=>u(h,p))});o==null||o.read().then(({done:c,value:d})=>u(c,d))}return s.blob()})}const X0t={fetchBlob:K0t};class m6{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r!=null&&r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class Q0t extends m6{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onceMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n)}onceMediaEvent(t,n){return this.onMediaEvent(t,n,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}setSrc(t,n){if(this.getSrc()===t)return;this.revokeSrc();const i=n instanceof Blob?URL.createObjectURL(n):t;this.media.src=i,this.media.load()}destroy(){this.media.pause(),!this.isExternalMedia&&(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}function J0t(e,t,n,r,i=5){let s=()=>{};if(!e)return s;const o=a=>{if(a.button===2)return;a.preventDefault(),a.stopPropagation(),e.style.touchAction="none";let l=a.clientX,u=a.clientY,c=!1;const d=p=>{p.preventDefault(),p.stopPropagation();const m=p.clientX,g=p.clientY;if(c||Math.abs(m-l)>=i||Math.abs(g-u)>=i){const{left:y,top:b}=e.getBoundingClientRect();c||(c=!0,n==null||n(l-y,u-b)),t(m-l,g-u,m-y,g-b),l=m,u=g}},f=p=>{c&&(p.preventDefault(),p.stopPropagation())},h=()=>{e.style.touchAction="",c&&(r==null||r()),s()};document.addEventListener("pointermove",d),document.addEventListener("pointerup",h),document.addEventListener("pointerleave",h),document.addEventListener("click",f,!0),s=()=>{document.removeEventListener("pointermove",d),document.removeEventListener("pointerup",h),document.removeEventListener("pointerleave",h),setTimeout(()=>{document.removeEventListener("click",f,!0)},10)}};return e.addEventListener("pointerdown",o),()=>{s(),e.removeEventListener("pointerdown",o)}}let d2e=class f2e extends m6{constructor(t,n){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=r=>{const i=this.wrapper.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientX-i.left,a=s/i.width,l=o/i.height;return[a,l]};this.wrapper.addEventListener("click",r=>{const[i,s]=t(r);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",r=>{const[i,s]=t(r);this.emit("dblclick",i,s)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=r/i,a=(r+s)/i;this.emit("scroll",o,a)});const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n(()=>this.reRender())}),this.resizeObserver.observe(this.scrollContainer)}initDrag(){J0t(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(){return this.options.height==null?128:isNaN(Number(this.options.height))?this.options.height==="auto"&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight()}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var t;this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){const n={};return this.timeouts.push(n),r=>{n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(r,t)}}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),i=n.getContext("2d").createLinearGradient(0,0,0,n.height),s=1/(t.length-1);return t.forEach((o,a)=>{const l=a*s;i.addColorStop(l,o)}),i}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:l,height:u}=r.canvas,c=u/2,d=window.devicePixelRatio||1,f=n.barWidth?n.barWidth*d:1,h=n.barGap?n.barGap*d:n.barWidth?f/2:0,p=n.barRadius||0,m=l/(f+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,b=0,_=0;for(let w=0;w<=a;w++){const E=Math.round(w*m);if(E>y){const C=Math.round(b*c*i),A=Math.round(_*c*i),R=C+A||1;let P=c-C;n.barAlign==="top"?P=0:n.barAlign==="bottom"&&(P=u-R),r[g](y*(f+h),P,f,R,p),y=E,b=0,_=0}const x=Math.abs(s[w]||0),S=Math.abs(o[w]||0);x>b&&(b=x),S>_&&(_=S)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],l=a.length,{height:u}=r.canvas,c=u/2,d=r.canvas.width/l;r.moveTo(0,c);let f=0,h=0;for(let p=0;p<=l;p++){const m=Math.round(p*d);if(m>f){const y=Math.round(h*c*i)||1,b=c+y*(o===0?-1:1);r.lineTo(f,b),f=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(f,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction){n.renderFunction(t,r);return}let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}if(n.barWidth||n.barGap||n.barAlign){this.renderBarWaveform(t,n,r,i);return}this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a,l){const u=window.devicePixelRatio||1,c=document.createElement("canvas"),d=t[0].length;c.width=Math.round(r*(o-s)/d),c.height=i*u,c.style.width=`${Math.floor(c.width/u)}px`,c.style.height=`${i}px`,c.style.left=`${Math.floor(s*r/u/d)}px`,a.appendChild(c);const f=c.getContext("2d");if(this.renderWaveform(t.map(h=>h.slice(s,o)),n,f),c.width>0&&c.height>0){const h=c.cloneNode(),p=h.getContext("2d");p.drawImage(c,0,0),p.globalCompositeOperation="source-in",p.fillStyle=this.convertColorValues(n.progressColor),p.fillRect(0,0,c.width,c.height),l.appendChild(h)}}renderChannel(t,n,r){const i=document.createElement("div"),s=this.getHeight();i.style.height=`${s}px`,this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(i);const o=i.cloneNode();this.progressWrapper.appendChild(o);const{scrollLeft:a,scrollWidth:l,clientWidth:u}=this.scrollContainer,c=t[0].length,d=c/l;let f=Math.min(f2e.MAX_CANVAS_WIDTH,u);if(n.barWidth||n.barGap){const E=n.barWidth||.5,x=n.barGap||E/2,S=E+x;f%S!==0&&(f=Math.floor(f/S)*S)}const h=Math.floor(Math.abs(a)*d),p=Math.floor(h+f*d),m=p-h,g=(E,x)=>{this.renderSingleCanvas(t,n,r,s,Math.max(0,E),Math.min(x,c),i,o)},y=this.createDelay(),b=this.createDelay(),_=(E,x)=>{g(E,x),E>0&&y(()=>{_(E-m,x-m)})},w=(E,x)=>{g(E,x),x<c&&b(()=>{w(E+m,x+m)})};_(h,p),p<c&&w(p,p+m)}render(t){this.timeouts.forEach(a=>a.timeout&&clearTimeout(a.timeout)),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=window.devicePixelRatio||1,r=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrolling=i>r;const s=this.options.fillParent&&!this.isScrolling,o=(s?r:i)*n;if(this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let a=0;a<t.numberOfChannels;a++){const l=Object.assign(Object.assign({},this.options),this.options.splitChannels[a]);this.renderChannel([t.getChannelData(a)],l,o)}else{const a=[t.getChannelData(0)];t.numberOfChannels>1&&a.push(t.getChannelData(1)),this.renderChannel(a,this.options,o)}this.audioData=t,this.emit("render")}reRender(){if(!this.audioData)return;const t=this.progressWrapper.clientWidth;this.render(this.audioData);const n=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=n-t}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{clientWidth:r,scrollLeft:i,scrollWidth:s}=this.scrollContainer,o=s*t,a=r/2,l=n&&this.options.autoCenter&&!this.isDragging?a:r;if(o>i+l||o<i)if(this.options.autoCenter&&!this.isDragging){const u=a/20;o-(i+a)>=u&&o<i+r?this.scrollContainer.scrollLeft+=u:this.scrollContainer.scrollLeft=o-a}else this.isDragging?this.scrollContainer.scrollLeft=o<i?o-10:o-r+10:this.scrollContainer.scrollLeft=o;{const{scrollLeft:u}=this.scrollContainer,c=u/s,d=(u+r)/s;this.emit("scroll",c,d)}}renderProgress(t,n){if(isNaN(t))return;const r=t*100;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.marginLeft=Math.round(r)===100?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(t,n)}};d2e.MAX_CANVAS_WIDTH=4e3;let Z0t=class extends m6{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};var oB=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};class eyt extends m6{constructor(t=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return oB(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){this.currentSrc=t,fetch(t).then(n=>n.arrayBuffer()).then(n=>this.audioContext.decodeAudioData(n)).then(n=>{this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play()})}_play(){var t;this.paused&&(this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var t;this.paused||(this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return oB(this,void 0,void 0,function*(){this._play(),this.emit("play")})}pause(){this._pause(),this.emit("pause")}setSinkId(t){return oB(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){var t,n;return(n=(t=this.bufferNode)===null||t===void 0?void 0:t.playbackRate.value)!==null&&n!==void 0?n:1}set playbackRate(t){this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(t){this.emit("seeking"),this.paused?this.playedDuration=t:(this._pause(),this.playedDuration=t,this._play()),this.emit("timeupdate")}get duration(){var t;return((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}getGainNode(){return this.gainNode}}var O_=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{u(r.next(c))}catch(d){o(d)}}function l(c){try{u(r.throw(c))}catch(d){o(d)}}function u(c){c.done?s(c.value):i(c.value).then(a,l)}u((r=r.apply(e,t||[])).next())})};const tyt={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let nyt=class h2e extends Q0t{static create(t){return new h2e(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new eyt:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},tyt,t),this.timer=new Z0t;const r=n?void 0:this.getMediaElement();this.renderer=new d2e(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc();i?this.load(i,this.options.peaks,this.options.duration):this.options.peaks&&this.options.duration&&this.loadPredecoded()}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),!0),this.emit("timeupdate",t),this.emit("audioprocess",t)}))}initPlayerEvents(){this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n)=>{const r=this.getDuration();this.emit("scroll",t*r,n*r)}),this.renderer.on("render",()=>{this.emit("redraw")}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{this.options.interact&&(this.renderer.renderProgress(n),clearTimeout(t),t=setTimeout(()=>{this.seekTo(n)},this.isPlaying()?0:200),this.emit("interaction",n*this.getDuration()),this.emit("drag",n))}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t.init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadPredecoded(){return O_(this,void 0,void 0,function*(){this.options.peaks&&this.options.duration&&(this.decodedData=sB.createBuffer(this.options.peaks,this.options.duration),yield Promise.resolve(),this.renderDecoded())})}renderDecoded(){return O_(this,void 0,void 0,function*(){this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData))})}loadAudio(t,n,r,i){return O_(this,void 0,void 0,function*(){if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const s=o=>this.emit("loading",o);n=yield X0t.fetchBlob(t,s,this.options.fetchParams)}if(this.setSrc(t,n),i=(yield Promise.resolve(i||this.getDuration()))||(yield new Promise(s=>{this.onceMediaEvent("loadedmetadata",()=>s(this.getDuration()))}))||(yield Promise.resolve(0)),r)this.decodedData=sB.createBuffer(r,i);else if(n){const s=yield n.arrayBuffer();this.decodedData=yield sB.decode(s,this.options.sampleRate)}this.renderDecoded(),this.emit("ready",this.getDuration())})}load(t,n,r){return O_(this,void 0,void 0,function*(){yield this.loadAudio(t,void 0,n,r)})}loadBlob(t,n,r){return O_(this,void 0,void 0,function*(){yield this.loadAudio("blob",t,n,r)})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),l=[],u=Math.round(a.length/n);for(let c=0;c<n;c++){const d=a.slice(c*u,(c+1)*u),f=Math.max(...d);l.push(Math.round(f*r)/r)}s.push(l)}return s}getDuration(){let t=super.getDuration()||0;return(t===0||t===1/0)&&this.decodedData&&(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return O_(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}destroy(){this.emit("destroy"),this.plugins.forEach(t=>t.destroy()),this.subscriptions.forEach(t=>t()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};function ryt(e){return nyt.create(e)}function rde(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const iyt=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var syt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function p2e(e){var{container:t,plugins:n=[],onMount:r}=e,i=syt(e,["container","plugins","onMount"]);const s=I.useRef([]),[o,a]=I.useState(null);return I.useEffect(()=>{if(!t)return;let l=[];n&&(l=n.map(rde)),s.current=l;const u=ryt(Object.assign(Object.assign({container:t},i),{plugins:l}));return r==null||r(u),a(u),()=>{u.destroy()}},[t]),I.useEffect(()=>{if(o){const l=n.map(rde),{disabled:u,enabled:c}=iyt(s.current,l);s.current=l,u.forEach(d=>{d.name&&(o==null||o.destroyPlugin(d.name))}),c.forEach(d=>{d.name&&(o==null||o.addPlugin(d).initPlugin(d.name))})}},[n]),o}function oyt(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var ayt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const m2e=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=ayt(e,["children","plugins","onMount"]);const s=I.useMemo(()=>{let a={};return I.Children.forEach(t,l=>{if(typeof l!="object"||l===null||["string","number"].includes(typeof l)||!oyt(l))return;const{props:u,type:c}=l;if(c===kQ){const{id:d}=u;a=H0t(u),a=Object.assign(Object.assign({},a),{container:"#"+d})}}),a},[t]),o=p2e(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return ls.createElement(c2e.Provider,{value:o},t)};m2e.defaultProps={children:null,plugins:[]};function aB(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(d){d(c)})).then(o,a)}l((r=r.apply(e,[])).next())})}let lyt=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},uyt=class extends lyt{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};const cyt=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];let dyt=class g2e extends uyt{constructor(t){var n;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3})),this.stream=null,this.mediaRecorder=null}static create(t){return new g2e(t||{})}renderMicStream(t){const n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i);const s=i.frequencyBinCount,o=new Float32Array(s),a=s/n.sampleRate;let l;const u=()=>{i.getFloatTimeDomainData(o),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[o],a)),l=requestAnimationFrame(u)};return u(),()=>{cancelAnimationFrame(l),r==null||r.disconnect(),n==null||n.close()}}startMic(t){return aB(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(i){throw new Error("Error accessing the microphone: "+i.message)}const r=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return aB(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t)),r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||cyt.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=s=>{s.data.size>0&&i.push(s.data)},r.onstop=()=>{var s;const o=new Blob(i,{type:r.mimeType});this.emit("record-end",o),this.options.renderRecordedAudio!==!1&&((s=this.wavesurfer)===null||s===void 0||s.load(URL.createObjectURL(o)))},r.start(),this.emit("record-start")})}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}stopRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.stop())}pauseRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.pause(),this.emit("record-pause"))}resumeRecording(){var t;this.isPaused()&&((t=this.mediaRecorder)===null||t===void 0||t.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return aB(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}};function y2e({width:e=70,height:t=50}){const n=I.useRef(null),r=I.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin(dyt.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return v.jsx(ge,{style:{width:`${e}px`,height:`${t}px`},children:v.jsx(m2e,{onMount:r,children:v.jsx(kQ,{id:"waveform"})})})}function ide({parameters:e,setAnswer:t}){return I.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const l=a.frequencyBinCount,u=new Uint8Array(l);let c=!1;const d=()=>{if(!c){a.getByteFrequencyData(u);for(let f=0;f<l;f+=1)u[f]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(d)}};window.requestAnimationFrame(d)})},[t]),v.jsx(Ju,{style:{height:"70%",width:"100%"},children:v.jsxs(Es,{children:[v.jsx(Xe,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),v.jsx(Xe,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),v.jsx(Xe,{ta:"center",fw:700,children:"If you are not comfortable or able to speak English during this study, please close it now."}),v.jsx(Ju,{children:v.jsx(y2e,{height:200,width:400})})]})})}const fyt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:ide,default:ide},Symbol.toStringTag,{value:"Module"})),Ro={Purple:"#6D3E91",DarkOrange:"#C05917",LightTeal:"#58AC8C",Blue:"#286BBB",Maroon:"#883039",Camel:"#BC8E5A",MidnightBlue:"#00295B",DustyCoral:"#C15065",DarkOliveGreen:"#18470F",DarkCopper:"#9A5129",Peach:"#E56E5A",Mauve:"#A2559C",Turquoise:"#38AABA",OliveGreen:"#578145",Cherry:"#970046",Teal:"#00847E",RustyOrange:"#B13507",Denim:"#4C6A9C",Fuchsia:"#CF0A66",TealishGreen:"#00875E",Copper:"#B16214",DarkMauve:"#8C4569",Lime:"#3B8E1D",Coral:"#D73C50"},D_={DarkOrangeDarker:"#BE5915",PeachDarker:"#C4523E",LightTealDarker:"#2C8465",TurquoiseDarker:"#008291",CamelDarker:"#996D39",LimeDarker:"#338711"},RQ=[Ro.DustyCoral,D_.LightTealDarker,D_.DarkOrangeDarker,Ro.Purple,Ro.DarkOliveGreen,Ro.Blue,Ro.Maroon,D_.CamelDarker,Ro.MidnightBlue,Ro.DarkCopper,D_.PeachDarker,Ro.Mauve,D_.TurquoiseDarker,Ro.OliveGreen,Ro.Cherry,Ro.Teal,Ro.RustyOrange,Ro.Denim,Ro.TealishGreen,Ro.Copper,Ro.DarkMauve,D_.LimeDarker,Ro.Coral],hyt=Object.freeze(Object.defineProperty({__proto__:null,OwidDistinctLinesPalette:RQ},Symbol.toStringTag,{value:"Module"}));function bm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function pyt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function wS(e){let t,n,r;e.length!==2?(t=bm,n=(a,l)=>bm(e(a),l),r=(a,l)=>e(a)-l):(t=e===bm||e===pyt?e:myt,n=e,r=e);function i(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<0?u=d+1:c=d}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(a[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(a,l,u=0,c=a.length){const d=i(a,l,u,c-1);return d>u&&r(a[d-1],l)>-r(a[d],l)?d-1:d}return{left:i,center:o,right:s}}function myt(){return 0}function v2e(e){return e===null?NaN:+e}function*gyt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const b2e=wS(bm),iy=b2e.right,yyt=b2e.left;wS(v2e).center;function vyt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function byt(e,t){const n=vyt(e,t);return n&&Math.sqrt(n)}function ku(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class al{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class tV extends Map{constructor(t,n=E2e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(nV(this,t))}has(t){return super.has(nV(this,t))}set(t,n){return super.set(_2e(this,t),n)}delete(t){return super.delete(w2e(this,t))}}class QM extends Set{constructor(t,n=E2e){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(nV(this,t))}add(t){return super.add(_2e(this,t))}delete(t){return super.delete(w2e(this,t))}}function nV({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function _2e({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function w2e({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function E2e(e){return e!==null&&typeof e=="object"?e.valueOf():e}function _yt(e){return e}function wyt(e,t,...n){return Eyt(e,_yt,t,n)}function Eyt(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new tV,l=r[o++];let u=-1;for(const c of s){const d=l(c,++u,s),f=a.get(d);f?f.push(c):a.set(d,[c])}for(const[c,d]of a)a.set(c,i(d,o));return t(a)}(e,0)}function xyt(e,t){return Array.from(t,n=>e[n])}function Syt(e=bm){if(e===bm)return x2e;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function x2e(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Tyt=Math.sqrt(50),Cyt=Math.sqrt(10),Ayt=Math.sqrt(2);function JM(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Tyt?10:s>=Cyt?5:s>=Ayt?2:1;let a,l,u;return i<0?(u=Math.pow(10,-i)/o,a=Math.round(e*u),l=Math.round(t*u),a/u<e&&++a,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,a=Math.round(e/u),l=Math.round(t/u),a*u<e&&++a,l*u>t&&--l),l<a&&.5<=n&&n<2?JM(e,t,n*2):[a,l,u]}function rV(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?JM(t,e,n):JM(e,t,n);if(!(s>=i))return[];const a=s-i+1,l=new Array(a);if(r)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(i+u)/-o;else for(let u=0;u<a;++u)l[u]=(i+u)*o;return l}function iV(e,t,n){return t=+t,e=+e,n=+n,JM(e,t,n)[2]}function sy(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?iV(t,e,n):iV(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Nh(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function eI(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function S2e(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?x2e:Syt(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1),h=Math.max(n,Math.floor(t-u*d/l+f)),p=Math.min(r,Math.floor(t+(l-u)*d/l+f));S2e(e,t,h,p,i)}const s=e[t];let o=n,a=r;for($T(e,n,t),i(e[r],s)>0&&$T(e,n,r);o<a;){for($T(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?$T(e,n,a):(++a,$T(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function $T(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function oE(e,t,n){if(e=Float64Array.from(gyt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return eI(e);if(t>=1)return Nh(e);var r,i=(r-1)*t,s=Math.floor(i),o=Nh(S2e(e,s).subarray(0,s+1)),a=eI(e.subarray(s+1));return o+(a-o)*(i-s)}}function T2e(e,t,n=v2e){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Iyt(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function C2e(e,t){return oE(e,.5,t)}function*kyt(e){for(const t of e)yield*t}function A2e(e){return Array.from(kyt(e))}function Fu(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function tI(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Ryt(e,...t){e=new QM(e),t=t.map(Pyt);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Pyt(e){return e instanceof QM?e:new QM(e)}function Nyt(...e){const t=new QM;for(const n of e)for(const r of n)t.add(r);return t}var Oyt={value:()=>{}};function I2e(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new eD(n)}function eD(e){this._=e}function Dyt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}eD.prototype=I2e.prototype={constructor:eD,on:function(e,t){var n=this._,r=Dyt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Myt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=sde(n[i],e.name,t);else if(t==null)for(i in n)n[i]=sde(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new eD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Myt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function sde(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Oyt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}function ES(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Gk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qy(){}var sb=.7,QE=1/sb,aE="\\s*([+-]?\\d+)\\s*",nI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Oh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",$yt=/^#([0-9a-f]{3,8})$/,Lyt=new RegExp(`^rgb\\(${aE},${aE},${aE}\\)$`),Fyt=new RegExp(`^rgb\\(${Oh},${Oh},${Oh}\\)$`),jyt=new RegExp(`^rgba\\(${aE},${aE},${aE},${nI}\\)$`),Byt=new RegExp(`^rgba\\(${Oh},${Oh},${Oh},${nI}\\)$`),zyt=new RegExp(`^hsl\\(${nI},${Oh},${Oh}\\)$`),Uyt=new RegExp(`^hsla\\(${nI},${Oh},${Oh},${nI}\\)$`),ode={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ES(Qy,rI,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ade,formatHex:ade,formatHex8:Vyt,formatHsl:Hyt,formatRgb:lde,toString:lde});function ade(){return this.rgb().formatHex()}function Vyt(){return this.rgb().formatHex8()}function Hyt(){return k2e(this).formatHsl()}function lde(){return this.rgb().formatRgb()}function rI(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=$yt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ude(t):n===3?new yo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Lyt.exec(e))?new yo(t[1],t[2],t[3],1):(t=Fyt.exec(e))?new yo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jyt.exec(e))?fN(t[1],t[2],t[3],t[4]):(t=Byt.exec(e))?fN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=zyt.exec(e))?fde(t[1],t[2]/100,t[3]/100,1):(t=Uyt.exec(e))?fde(t[1],t[2]/100,t[3]/100,t[4]):ode.hasOwnProperty(e)?ude(ode[e]):e==="transparent"?new yo(NaN,NaN,NaN,0):null}function ude(e){return new yo(e>>16&255,e>>8&255,e&255,1)}function fN(e,t,n,r){return r<=0&&(e=t=n=NaN),new yo(e,t,n,r)}function PQ(e){return e instanceof Qy||(e=rI(e)),e?(e=e.rgb(),new yo(e.r,e.g,e.b,e.opacity)):new yo}function oy(e,t,n,r){return arguments.length===1?PQ(e):new yo(e,t,n,r??1)}function yo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ES(yo,oy,Gk(Qy,{brighter(e){return e=e==null?QE:Math.pow(QE,e),new yo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?sb:Math.pow(sb,e),new yo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new yo($1(this.r),$1(this.g),$1(this.b),ZM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:cde,formatHex:cde,formatHex8:qyt,formatRgb:dde,toString:dde}));function cde(){return`#${w1(this.r)}${w1(this.g)}${w1(this.b)}`}function qyt(){return`#${w1(this.r)}${w1(this.g)}${w1(this.b)}${w1((isNaN(this.opacity)?1:this.opacity)*255)}`}function dde(){const e=ZM(this.opacity);return`${e===1?"rgb(":"rgba("}${$1(this.r)}, ${$1(this.g)}, ${$1(this.b)}${e===1?")":`, ${e})`}`}function ZM(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function w1(e){return e=$1(e),(e<16?"0":"")+e.toString(16)}function fde(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Hd(e,t,n,r)}function k2e(e){if(e instanceof Hd)return new Hd(e.h,e.s,e.l,e.opacity);if(e instanceof Qy||(e=rI(e)),!e)return new Hd;if(e instanceof Hd)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,l=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=l<.5?s+i:2-s-i,o*=60):a=l>0&&l<1?0:o,new Hd(o,a,l,e.opacity)}function iI(e,t,n,r){return arguments.length===1?k2e(e):new Hd(e,t,n,r??1)}function Hd(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ES(Hd,iI,Gk(Qy,{brighter(e){return e=e==null?QE:Math.pow(QE,e),new Hd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?sb:Math.pow(sb,e),new Hd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new yo(lB(e>=240?e-240:e+120,i,r),lB(e,i,r),lB(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Hd(hde(this.h),hN(this.s),hN(this.l),ZM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=ZM(this.opacity);return`${e===1?"hsl(":"hsla("}${hde(this.h)}, ${hN(this.s)*100}%, ${hN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function hde(e){return e=(e||0)%360,e<0?e+360:e}function hN(e){return Math.max(0,Math.min(1,e||0))}function lB(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const R2e=Math.PI/180,P2e=180/Math.PI,e3=18,N2e=.96422,O2e=1,D2e=.82521,M2e=4/29,lE=6/29,$2e=3*lE*lE,Wyt=lE*lE*lE;function L2e(e){if(e instanceof Dh)return new Dh(e.l,e.a,e.b,e.opacity);if(e instanceof sm)return F2e(e);e instanceof yo||(e=PQ(e));var t=fB(e.r),n=fB(e.g),r=fB(e.b),i=uB((.2225045*t+.7168786*n+.0606169*r)/O2e),s,o;return t===n&&n===r?s=o=i:(s=uB((.4360747*t+.3850649*n+.1430804*r)/N2e),o=uB((.0139322*t+.0971045*n+.7141733*r)/D2e)),new Dh(116*i-16,500*(s-i),200*(i-o),e.opacity)}function t3(e,t,n,r){return arguments.length===1?L2e(e):new Dh(e,t,n,r??1)}function Dh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}ES(Dh,t3,Gk(Qy,{brighter(e){return new Dh(this.l+e3*(e??1),this.a,this.b,this.opacity)},darker(e){return new Dh(this.l-e3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=N2e*cB(t),e=O2e*cB(e),n=D2e*cB(n),new yo(dB(3.1338561*t-1.6168667*e-.4906146*n),dB(-.9787684*t+1.9161415*e+.033454*n),dB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function uB(e){return e>Wyt?Math.pow(e,1/3):e/$2e+M2e}function cB(e){return e>lE?e*e*e:$2e*(e-M2e)}function dB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function fB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Gyt(e){if(e instanceof sm)return new sm(e.h,e.c,e.l,e.opacity);if(e instanceof Dh||(e=L2e(e)),e.a===0&&e.b===0)return new sm(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*P2e;return new sm(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function n3(e,t,n,r){return arguments.length===1?Gyt(e):new sm(e,t,n,r??1)}function sm(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function F2e(e){if(isNaN(e.h))return new Dh(e.l,0,0,e.opacity);var t=e.h*R2e;return new Dh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}ES(sm,n3,Gk(Qy,{brighter(e){return new sm(this.h,this.c,this.l+e3*(e??1),this.opacity)},darker(e){return new sm(this.h,this.c,this.l-e3*(e??1),this.opacity)},rgb(){return F2e(this).rgb()}}));var j2e=-.14861,NQ=1.78277,OQ=-.29227,g6=-.90649,sI=1.97294,pde=sI*g6,mde=sI*NQ,gde=NQ*OQ-g6*j2e;function Yyt(e){if(e instanceof L1)return new L1(e.h,e.s,e.l,e.opacity);e instanceof yo||(e=PQ(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(gde*r+pde*t-mde*n)/(gde+pde-mde),s=r-i,o=(sI*(n-i)-OQ*s)/g6,a=Math.sqrt(o*o+s*s)/(sI*i*(1-i)),l=a?Math.atan2(o,s)*P2e-120:NaN;return new L1(l<0?l+360:l,a,i,e.opacity)}function sV(e,t,n,r){return arguments.length===1?Yyt(e):new L1(e,t,n,r??1)}function L1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ES(L1,sV,Gk(Qy,{brighter(e){return e=e==null?QE:Math.pow(QE,e),new L1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?sb:Math.pow(sb,e),new L1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*R2e,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new yo(255*(t+n*(j2e*r+NQ*i)),255*(t+n*(OQ*r+g6*i)),255*(t+n*(sI*r)),this.opacity)}}));function B2e(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function z2e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return B2e((n-r/t)*t,o,i,s,a)}}function U2e(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return B2e((n-r/t)*t,i,s,o,a)}}const y6=e=>()=>e;function V2e(e,t){return function(n){return e+n*t}}function Kyt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function v6(e,t){var n=t-e;return n?V2e(e,n>180||n<-180?n-360*Math.round(n/360):n):y6(isNaN(e)?t:e)}function Xyt(e){return(e=+e)==1?vo:function(t,n){return n-t?Kyt(t,n,e):y6(isNaN(t)?n:t)}}function vo(e,t){var n=t-e;return n?V2e(e,n):y6(isNaN(e)?t:e)}const oV=function e(t){var n=Xyt(t);function r(i,s){var o=n((i=oy(i)).r,(s=oy(s)).r),a=n(i.g,s.g),l=n(i.b,s.b),u=vo(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r}(1);function H2e(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=oy(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(l){return a.r=r(l),a.g=i(l),a.b=s(l),a+""}}}var Qyt=H2e(z2e),Jyt=H2e(U2e);function DQ(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function q2e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Zyt(e,t){return(q2e(t)?DQ:W2e)(e,t)}function W2e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Jy(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function G2e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Bd(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Y2e(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Jy(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var aV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,hB=new RegExp(aV.source,"g");function evt(e){return function(){return e}}function tvt(e){return function(t){return e(t)+""}}function K2e(e,t){var n=aV.lastIndex=hB.lastIndex=0,r,i,s,o=-1,a=[],l=[];for(e=e+"",t=t+"";(r=aV.exec(e))&&(i=hB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,l.push({i:o,x:Bd(r,i)})),n=hB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?tvt(l[0].x):evt(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)a[(d=l[c]).i]=d.x(u);return a.join("")})}function Jy(e,t){var n=typeof t,r;return t==null||n==="boolean"?y6(t):(n==="number"?Bd:n==="string"?(r=rI(t))?(t=r,oV):K2e:t instanceof rI?oV:t instanceof Date?G2e:q2e(t)?DQ:Array.isArray(t)?W2e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Y2e:Bd)(e,t)}function nvt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function rvt(e,t){var n=v6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Yk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var yde=180/Math.PI,lV={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function X2e(e,t,n,r,i,s){var o,a,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*yde,skewX:Math.atan(l)*yde,scaleX:o,scaleY:a}}var pN;function ivt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?lV:X2e(t.a,t.b,t.c,t.d,t.e,t.f)}function svt(e){return e==null||(pN||(pN=document.createElementNS("http://www.w3.org/2000/svg","g")),pN.setAttribute("transform",e),!(e=pN.transform.baseVal.consolidate()))?lV:(e=e.matrix,X2e(e.a,e.b,e.c,e.d,e.e,e.f))}function Q2e(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:Bd(u,d)},{i:m-2,x:Bd(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Bd(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function a(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Bd(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,h,p){if(u!==d||c!==f){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:Bd(u,d)},{i:m-2,x:Bd(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),s(u.translateX,u.translateY,c.translateX,c.translateY,d,f),o(u.rotate,c.rotate,d,f),a(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var p=-1,m=f.length,g;++p<m;)d[(g=f[p]).i]=g.x(h);return d.join("")}}}var ovt=Q2e(ivt,"px, ","px)","deg)"),avt=Q2e(svt,", ",")",")"),lvt=1e-12;function vde(e){return((e=Math.exp(e))+1/e)/2}function uvt(e){return((e=Math.exp(e))-1/e)/2}function cvt(e){return((e=Math.exp(2*e))-1)/(e+1)}const dvt=function e(t,n,r){function i(s,o){var a=s[0],l=s[1],u=s[2],c=o[0],d=o[1],f=o[2],h=c-a,p=d-l,m=h*h+p*p,g,y;if(m<lvt)y=Math.log(f/u)/t,g=function(S){return[a+S*h,l+S*p,u*Math.exp(t*S*y)]};else{var b=Math.sqrt(m),_=(f*f-u*u+r*m)/(2*u*n*b),w=(f*f-u*u-r*m)/(2*f*n*b),E=Math.log(Math.sqrt(_*_+1)-_),x=Math.log(Math.sqrt(w*w+1)-w);y=(x-E)/t,g=function(S){var C=S*y,A=vde(E),R=u/(n*b)*(A*cvt(t*C+E)-uvt(E));return[a+R*h,l+R*p,u*A/vde(t*C+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,l=a*a;return e(o,a,l)},i}(Math.SQRT2,2,4);function J2e(e){return function(t,n){var r=e((t=iI(t)).h,(n=iI(n)).h),i=vo(t.s,n.s),s=vo(t.l,n.l),o=vo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const fvt=J2e(v6);var hvt=J2e(vo);function pvt(e,t){var n=vo((e=t3(e)).l,(t=t3(t)).l),r=vo(e.a,t.a),i=vo(e.b,t.b),s=vo(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function Z2e(e){return function(t,n){var r=e((t=n3(t)).h,(n=n3(n)).h),i=vo(t.c,n.c),s=vo(t.l,n.l),o=vo(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const mvt=Z2e(v6);var gvt=Z2e(vo);function eAe(e){return function t(n){n=+n;function r(i,s){var o=e((i=sV(i)).h,(s=sV(s)).h),a=vo(i.s,s.s),l=vo(i.l,s.l),u=vo(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=l(Math.pow(c,n)),i.opacity=u(c),i+""}}return r.gamma=t,r}(1)}const yvt=eAe(v6);var vvt=eAe(vo);function MQ(e,t){t===void 0&&(t=e,e=Jy);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function bvt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const _vt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Jy,interpolateArray:Zyt,interpolateBasis:z2e,interpolateBasisClosed:U2e,interpolateCubehelix:yvt,interpolateCubehelixLong:vvt,interpolateDate:G2e,interpolateDiscrete:nvt,interpolateHcl:mvt,interpolateHclLong:gvt,interpolateHsl:fvt,interpolateHslLong:hvt,interpolateHue:rvt,interpolateLab:pvt,interpolateNumber:Bd,interpolateNumberArray:DQ,interpolateObject:Y2e,interpolateRgb:oV,interpolateRgbBasis:Qyt,interpolateRgbBasisClosed:Jyt,interpolateRound:Yk,interpolateString:K2e,interpolateTransformCss:ovt,interpolateTransformSvg:avt,interpolateZoom:dvt,piecewise:MQ,quantize:bvt},Symbol.toStringTag,{value:"Module"}));var JE=0,RC=0,LT=0,tAe=1e3,r3,PC,i3=0,ob=0,b6=0,oI=typeof performance=="object"&&performance.now?performance:Date,nAe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function $Q(){return ob||(nAe(wvt),ob=oI.now()+b6)}function wvt(){ob=0}function s3(){this._call=this._time=this._next=null}s3.prototype=rAe.prototype={constructor:s3,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?$Q():+n)+(t==null?0:+t),!this._next&&PC!==this&&(PC?PC._next=this:r3=this,PC=this),this._call=e,this._time=n,uV()},stop:function(){this._call&&(this._call=null,this._time=1/0,uV())}};function rAe(e,t,n){var r=new s3;return r.restart(e,t,n),r}function Evt(){$Q(),++JE;for(var e=r3,t;e;)(t=ob-e._time)>=0&&e._call.call(void 0,t),e=e._next;--JE}function bde(){ob=(i3=oI.now())+b6,JE=RC=0;try{Evt()}finally{JE=0,Svt(),ob=0}}function xvt(){var e=oI.now(),t=e-i3;t>tAe&&(b6-=t,i3=e)}function Svt(){for(var e,t=r3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:r3=n);PC=e,uV(r)}function uV(e){if(!JE){RC&&(RC=clearTimeout(RC));var t=e-ob;t>24?(e<1/0&&(RC=setTimeout(bde,e-oI.now()-b6)),LT&&(LT=clearInterval(LT))):(LT||(i3=oI.now(),LT=setInterval(xvt,tAe)),JE=1,nAe(bde))}}function Tvt(e,t,n){var r=new s3,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?$Q():+a,r._restart(function l(u){u+=i,r._restart(l,i+=o,a),s(u)},o,a)},r.restart(e,t,n),r)}const cV=Math.PI,dV=2*cV,Hv=1e-6,Cvt=dV-Hv;function iAe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Avt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return iAe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let LQ=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?iAe:Avt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,l=r-t,u=i-n,c=o-t,d=a-n,f=c*c+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(f>Hv)if(!(Math.abs(d*l-u*c)>Hv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=l*l+u*u,g=h*h+p*p,y=Math.sqrt(m),b=Math.sqrt(f),_=s*Math.tan((cV-Math.acos((m+f-g)/(2*y*b)))/2),w=_/b,E=_/y;Math.abs(w-1)>Hv&&this._append`L${t+w*c},${n+w*d}`,this._append`A${s},${s},0,0,${+(d*h>c*p)},${this._x1=t+E*l},${this._y1=n+E*u}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),l=r*Math.sin(i),u=t+a,c=n+l,d=1^o,f=o?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Hv||Math.abs(this._y1-c)>Hv)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%dV+dV),f>Cvt?this._append`A${r},${r},0,1,${d},${t-a},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=c}`:f>Hv&&this._append`A${r},${r},0,${+(f>=cV)},${d},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function _6(){return new LQ}_6.prototype=LQ.prototype;const _m=11102230246251565e-32,fa=134217729,Ivt=(3+8*_m)*_m;function pB(e,t,n,r,i){let s,o,a,l,u=t[0],c=r[0],d=0,f=0;c>u==c>-u?(s=u,u=t[++d]):(s=c,c=r[++f]);let h=0;if(d<e&&f<n)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=t[++d]):(o=c+s,a=s-(o-c),c=r[++f]),s=o,a!==0&&(i[h++]=a);d<e&&f<n;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f]),s=o,a!==0&&(i[h++]=a);for(;d<e;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=t[++d],s=o,a!==0&&(i[h++]=a);for(;f<n;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=r[++f],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function kvt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Kk(e){return new Float64Array(e)}const Rvt=(3+16*_m)*_m,Pvt=(2+12*_m)*_m,Nvt=(9+64*_m)*_m*_m,M_=Kk(4),_de=Kk(8),wde=Kk(12),Ede=Kk(16),qa=Kk(4);function Ovt(e,t,n,r,i,s,o){let a,l,u,c,d,f,h,p,m,g,y,b,_,w,E,x,S,C;const A=e-i,R=n-i,P=t-s,L=r-s;w=A*L,f=fa*A,h=f-(f-A),p=A-h,f=fa*L,m=f-(f-L),g=L-m,E=p*g-(w-h*m-p*m-h*g),x=P*R,f=fa*P,h=f-(f-P),p=P-h,f=fa*R,m=f-(f-R),g=R-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,d=E-y,M_[0]=E-(y+d)+(d-S),b=w+y,d=b-w,_=w-(b-d)+(y-d),y=_-x,d=_-y,M_[1]=_-(y+d)+(d-x),C=b+y,d=C-b,M_[2]=b-(C-d)+(y-d),M_[3]=C;let k=kvt(4,M_),$=Pvt*o;if(k>=$||-k>=$||(d=e-A,a=e-(A+d)+(d-i),d=n-R,u=n-(R+d)+(d-i),d=t-P,l=t-(P+d)+(d-s),d=r-L,c=r-(L+d)+(d-s),a===0&&l===0&&u===0&&c===0)||($=Nvt*o+Ivt*Math.abs(k),k+=A*c+L*a-(P*u+R*l),k>=$||-k>=$))return k;w=a*L,f=fa*a,h=f-(f-a),p=a-h,f=fa*L,m=f-(f-L),g=L-m,E=p*g-(w-h*m-p*m-h*g),x=l*R,f=fa*l,h=f-(f-l),p=l-h,f=fa*R,m=f-(f-R),g=R-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,d=E-y,qa[0]=E-(y+d)+(d-S),b=w+y,d=b-w,_=w-(b-d)+(y-d),y=_-x,d=_-y,qa[1]=_-(y+d)+(d-x),C=b+y,d=C-b,qa[2]=b-(C-d)+(y-d),qa[3]=C;const D=pB(4,M_,4,qa,_de);w=A*c,f=fa*A,h=f-(f-A),p=A-h,f=fa*c,m=f-(f-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),x=P*u,f=fa*P,h=f-(f-P),p=P-h,f=fa*u,m=f-(f-u),g=u-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,d=E-y,qa[0]=E-(y+d)+(d-S),b=w+y,d=b-w,_=w-(b-d)+(y-d),y=_-x,d=_-y,qa[1]=_-(y+d)+(d-x),C=b+y,d=C-b,qa[2]=b-(C-d)+(y-d),qa[3]=C;const M=pB(D,_de,4,qa,wde);w=a*c,f=fa*a,h=f-(f-a),p=a-h,f=fa*c,m=f-(f-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),x=l*u,f=fa*l,h=f-(f-l),p=l-h,f=fa*u,m=f-(f-u),g=u-m,S=p*g-(x-h*m-p*m-h*g),y=E-S,d=E-y,qa[0]=E-(y+d)+(d-S),b=w+y,d=b-w,_=w-(b-d)+(y-d),y=_-x,d=_-y,qa[1]=_-(y+d)+(d-x),C=b+y,d=C-b,qa[2]=b-(C-d)+(y-d),qa[3]=C;const B=pB(M,wde,4,qa,Ede);return Ede[B-1]}function mN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=Rvt*u?l:-Ovt(e,t,n,r,i,s,u)}const xde=Math.pow(2,-52),gN=new Uint32Array(512);class o3{static from(t,n=Fvt,r=jvt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new o3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let A=0;A<o;A++){const R=t[2*A],P=t[2*A+1];R<a&&(a=R),P<l&&(l=P),R>u&&(u=R),P>c&&(c=P),this._ids[A]=A}const d=(a+u)/2,f=(l+c)/2;let h,p,m;for(let A=0,R=1/0;A<o;A++){const P=mB(d,f,t[2*A],t[2*A+1]);P<R&&(h=A,R=P)}const g=t[2*h],y=t[2*h+1];for(let A=0,R=1/0;A<o;A++){if(A===h)continue;const P=mB(g,y,t[2*A],t[2*A+1]);P<R&&P>0&&(p=A,R=P)}let b=t[2*p],_=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const R=$vt(g,y,b,_,t[2*A],t[2*A+1]);R<w&&(m=A,w=R)}let E=t[2*m],x=t[2*m+1];if(w===1/0){for(let P=0;P<o;P++)this._dists[P]=t[2*P]-t[0]||t[2*P+1]-t[1];Dw(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let R=0;for(let P=0,L=-1/0;P<o;P++){const k=this._ids[P],$=this._dists[k];$>L&&(A[R++]=k,L=$)}this.hull=A.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(mN(g,y,b,_,E,x)<0){const A=p,R=b,P=_;p=m,b=E,_=x,m=A,E=R,x=P}const S=Lvt(g,y,b,_,E,x);this._cx=S.x,this._cy=S.y;for(let A=0;A<o;A++)this._dists[A]=mB(t[2*A],t[2*A+1],S.x,S.y);Dw(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(b,_)]=p,s[this._hashKey(E,x)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,R,P;A<this._ids.length;A++){const L=this._ids[A],k=t[2*L],$=t[2*L+1];if(A>0&&Math.abs(k-R)<=xde&&Math.abs($-P)<=xde||(R=k,P=$,L===h||L===p||L===m))continue;let D=0;for(let O=0,V=this._hashKey(k,$);O<this._hashSize&&(D=s[(V+O)%this._hashSize],!(D!==-1&&D!==r[D]));O++);D=n[D];let M=D,B;for(;B=r[M],mN(k,$,t[2*M],t[2*M+1],t[2*B],t[2*B+1])>=0;)if(M=B,M===D){M=-1;break}if(M===-1)continue;let z=this._addTriangle(M,L,r[M],-1,-1,i[M]);i[L]=this._legalize(z+2),i[M]=z,C++;let U=r[M];for(;B=r[U],mN(k,$,t[2*U],t[2*U+1],t[2*B],t[2*B+1])<0;)z=this._addTriangle(U,L,B,i[L],-1,i[U]),i[L]=this._legalize(z+2),r[U]=U,C--,U=B;if(M===D)for(;B=n[M],mN(k,$,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)z=this._addTriangle(B,L,M,-1,i[M],i[B]),this._legalize(z+2),i[B]=z,r[M]=M,C--,M=B;this._hullStart=n[L]=M,r[M]=n[U]=L,r[L]=U,s[this._hashKey(k,$)]=L,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(C);for(let A=0,R=this._hullStart;A<C;A++)this.hull[A]=R,R=r[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Dvt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],l=t-t%3;if(o=l+(t+2)%3,a===-1){if(s===0)break;t=gN[--s];continue}const u=a-a%3,c=l+(t+1)%3,d=u+(a+2)%3,f=n[o],h=n[t],p=n[c],m=n[d];if(Mvt(i[2*f],i[2*f+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=f;const y=r[d];if(y===-1){let _=this._hullStart;do{if(this._hullTri[_]===d){this._hullTri[_]=t;break}_=this._hullPrev[_]}while(_!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,d);const b=u+(a+1)%3;s<gN.length&&(gN[s++]=b)}else{if(s===0)break;t=gN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Dvt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function mB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Mvt(e,t,n,r,i,s,o,a){const l=e-o,u=t-a,c=n-o,d=r-a,f=i-o,h=s-a,p=l*l+u*u,m=c*c+d*d,g=f*f+h*h;return l*(d*g-m*h)-u*(c*g-m*f)+p*(c*h-d*f)<0}function $vt(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=(u*c-a*d)*f,p=(o*d-l*c)*f;return h*h+p*p}function Lvt(e,t,n,r,i,s){const o=n-e,a=r-t,l=i-e,u=s-t,c=o*o+a*a,d=l*l+u*u,f=.5/(o*u-a*l),h=e+(u*c-a*d)*f,p=t+(o*d-l*c)*f;return{x:h,y:p}}function Dw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;FT(e,i,s),t[e[n]]>t[e[r]]&&FT(e,n,r),t[e[s]]>t[e[r]]&&FT(e,s,r),t[e[n]]>t[e[s]]&&FT(e,n,s);const a=e[s],l=t[a];for(;;){do s++;while(t[e[s]]<l);do o--;while(t[e[o]]>l);if(o<s)break;FT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Dw(e,t,s,r),Dw(e,t,n,o-1)):(Dw(e,t,n,o-1),Dw(e,t,s,r))}}function FT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Fvt(e){return e[0]}function jvt(e){return e[1]}const Sde=1e-6;class E1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Sde||Math.abs(this._y1-s)>Sde)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class fV{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Bvt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,b,_;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,x=r[m+2]*2,S=t[w],C=t[w+1],A=t[E],R=t[E+1],P=t[x],L=t[x+1],k=A-S,$=R-C,D=P-S,M=L-C,B=(k*M-$*D)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const U of n)s+=t[U*2],o+=t[U*2+1];s/=n.length,o/=n.length}const z=1e9*Math.sign((s-S)*M-(o-C)*D);b=(S+P)/2-z*M,_=(C+L)/2+z*D}else{const z=1/B,U=k*k+$*$,O=D*D+M*M;b=S+(M*U-$*O)*z,_=C+(k*O-D*U)*z}a[g]=b,a[g+1]=_}let l=n[n.length-1],u,c=l*4,d,f=t[2*l],h,p=t[2*l+1];i.fill(0);for(let m=0;m<n.length;++m)l=n[m],u=c,d=f,h=p,c=l*4,f=t[2*l],p=t[2*l+1],i[u+2]=i[c]=h-p,i[u+3]=i[c+1]=f-d}render(t){const n=t==null?t=new E1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,d=r.length;c<d;++c){const f=r[c];if(f<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(f/3)*2,m=o[h],g=o[h+1],y=o[p],b=o[p+1];this._renderSegment(m,g,y,b,t)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const d=Math.floor(i[u]/3)*2,f=o[d],h=o[d+1],p=l*4,m=this._project(f,h,a[p+2],a[p+3]);m&&this._renderSegment(f,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new E1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new E1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new fV;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),l=this._regioncode(r,i);a===0&&l===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,l=i.length;a<l;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+l-2)%l]&&n[(s+3)%o]===i[(a+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==t)break;l=i[l]}while(l!==o&&l!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],l=n[r-1],u,c=this._regioncode(a,l),d,f=0;for(let h=0;h<r;h+=2)if(s=a,o=l,a=n[h],l=n[h+1],u=c,c=this._regioncode(a,l),u===0&&c===0)d=f,f=0,i?i.push(a,l):i=[a,l];else{let p,m,g,y,b;if(u===0){if((p=this._clipSegment(s,o,a,l,u,c))===null)continue;[m,g,y,b]=p}else{if((p=this._clipSegment(a,l,s,o,c,u))===null)continue;[y,b,m,g]=p,d=f,f=this._edgecode(m,g),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(m,g):i=[m,g]}d=f,f=this._edgecode(y,b),d&&f&&this._edge(t,d,f,i,i.length),i?i.push(y,b):i=[y,b]}if(i)d=f,f=this._edgecode(i[0],i[1]),d&&f&&this._edge(t,d,f,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let l,u,c=s||o;c&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):c&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):c&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),s?(t=l,n=u,s=this._regioncode(t,n)):(r=l,i=u,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),l;if((l=this._project(a[0],a[1],r,i))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(t,a))for(let u=0,c=a.length,d,f=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)d=f,f=this._edgecode(a[u],a[u+1]),d&&f&&(u=this._edge(t,d,f,a,u),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,l;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(l=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(l=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,l=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,l=n+(s=o)*i)}return[a,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const zvt=2*Math.PI,$_=Math.pow;function Uvt(e){return e[0]}function Vvt(e){return e[1]}function Hvt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function qvt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class FQ{static from(t,n=Uvt,r=Vvt,i){return new FQ("length"in t?Wvt(t,n,r,i):Float64Array.from(Gvt(t,n,r,i)))}constructor(t){this._delaunator=new o3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Hvt(t)){this.collinear=Int32Array.from({length:n.length/2},(f,h)=>h).sort((f,h)=>n[2*f]-n[2*h]||n[2*f+1]-n[2*h+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let f=0,h=n.length/2;f<h;++f){const p=qvt(n[2*f],n[2*f+1],d);n[2*f]=p[0],n[2*f+1]=p[1]}this._delaunator=new o3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(r[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=i.length;l<u;++l)a[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Bvt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const d=a.indexOf(t);d>0&&(yield a[d-1]),d<a.length-1&&(yield a[d+1]);return}const l=n[t];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==t)return;if(u=s[u],u===-1){const d=r[(i[t]+1)%r.length];d!==c&&(yield d);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let c=t,d=$_(n-u[t*2],2)+$_(r-u[t*2+1],2);const f=i[t];let h=f;do{let p=l[h];const m=$_(n-u[p*2],2)+$_(r-u[p*2+1],2);if(m<d&&(d=m,c=p),h=h%3===2?h-2:h+1,l[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&$_(n-u[h*2],2)+$_(r-u[h*2+1],2)<d)return h;break}}while(h!==f);return c}render(t){const n=t==null?t=new E1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const l=i[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new E1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],l=i[s+1];t.moveTo(a+n,l),t.arc(a,l,n,0,zvt)}return r&&r.value()}renderHull(t){const n=t==null?t=new E1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const l=2*r[a];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new fV;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new E1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,l=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new fV;return this.renderTriangle(t,n),n.value()}}function Wvt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Gvt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var Tde={},gB={},yB=34,jT=10,vB=13;function sAe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Yvt(e,t){var n=sAe(e);return function(r,i){return t(n(r),i,e)}}function Cde(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Rl(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Kvt(e){return e<0?"-"+Rl(-e,6):e>9999?"+"+Rl(e,6):Rl(e,4)}function Xvt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Kvt(e.getUTCFullYear())+"-"+Rl(e.getUTCMonth()+1,2)+"-"+Rl(e.getUTCDate(),2)+(i?"T"+Rl(t,2)+":"+Rl(n,2)+":"+Rl(r,2)+"."+Rl(i,3)+"Z":r?"T"+Rl(t,2)+":"+Rl(n,2)+":"+Rl(r,2)+"Z":n||t?"T"+Rl(t,2)+":"+Rl(n,2)+"Z":"")}function oAe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,f){var h,p,m=i(d,function(g,y){if(h)return h(g,y-1);p=g,h=f?Yvt(g,f):sAe(g)});return m.columns=p||[],m}function i(d,f){var h=[],p=d.length,m=0,g=0,y,b=p<=0,_=!1;d.charCodeAt(p-1)===jT&&--p,d.charCodeAt(p-1)===vB&&--p;function w(){if(b)return gB;if(_)return _=!1,Tde;var x,S=m,C;if(d.charCodeAt(S)===yB){for(;m++<p&&d.charCodeAt(m)!==yB||d.charCodeAt(++m)===yB;);return(x=m)>=p?b=!0:(C=d.charCodeAt(m++))===jT?_=!0:C===vB&&(_=!0,d.charCodeAt(m)===jT&&++m),d.slice(S+1,x-1).replace(/""/g,'"')}for(;m<p;){if((C=d.charCodeAt(x=m++))===jT)_=!0;else if(C===vB)_=!0,d.charCodeAt(m)===jT&&++m;else if(C!==n)continue;return d.slice(S,x)}return b=!0,d.slice(S,p)}for(;(y=w())!==gB;){for(var E=[];y!==Tde&&y!==gB;)E.push(y),y=w();f&&(E=f(E,g++))==null||h.push(E)}return h}function s(d,f){return d.map(function(h){return f.map(function(p){return c(h[p])}).join(e)})}function o(d,f){return f==null&&(f=Cde(d)),[f.map(c).join(e)].concat(s(d,f)).join(`
`)}function a(d,f){return f==null&&(f=Cde(d)),s(d,f).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(c).join(e)}function c(d){return d==null?"":d instanceof Date?Xvt(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:l,formatRow:u,formatValue:c}}var Qvt=oAe(","),Jvt=Qvt.parse;function Zvt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function e1t(e,t){return fetch(e,t).then(Zvt)}function t1t(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),e1t(t,n).then(function(i){return e(i,r)})}}var n1t=t1t(Jvt);function r1t(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-e)*r,u=(u/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function i1t(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return aAe(this.cover(t,n),t,n,e)}function aAe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,l=e._y0,u=e._x1,c=e._y1,d,f,h,p,m,g,y,b;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(d=(a+u)/2))?a=d:u=d,(g=n>=(f=(l+c)/2))?l=f:c=f;while((y=g<<1|m)===(b=(p>=f)<<1|h>=d));return i[b]=s,i[y]=o,e}function s1t(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),l=1/0,u=1/0,c=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>d&&(d=s));if(l>c||u>d)return this;for(this.cover(l,u).cover(c,d),n=0;n<r;++n)aAe(this,o[n],a[n],e[n]);return this}function o1t(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,l,u;n>e||e>=i||r>t||t>=s;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function a1t(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function l1t(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function nl(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function u1t(e,t,n){var r,i=this._x0,s=this._y0,o,a,l,u,c=this._x1,d=this._y1,f=[],h=this._root,p,m;for(h&&f.push(new nl(h,i,s,c,d)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,d=t+n,n*=n);p=f.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>d||(l=p.x1)<i||(u=p.y1)<s))if(h.length){var g=(o+l)/2,y=(a+u)/2;f.push(new nl(h[3],g,y,l,u),new nl(h[2],o,y,g,u),new nl(h[1],g,a,l,y),new nl(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=p)}else{var b=e-+this._x.call(null,h.data),_=t-+this._y.call(null,h.data),w=b*b+_*_;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,d=t+E,r=h.data}}return r}function c1t(e){if(isNaN(c=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,d,f,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(f=(o+l)/2))?o=f:l=f,(m=d>=(h=(a+u)/2))?a=h:u=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function d1t(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function f1t(){return this._root}function h1t(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function p1t(e){var t=[],n,r=this._root,i,s,o,a,l;for(r&&t.push(new nl(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&r.length){var u=(s+a)/2,c=(o+l)/2;(i=r[3])&&t.push(new nl(i,u,c,a,l)),(i=r[2])&&t.push(new nl(i,s,c,u,l)),(i=r[1])&&t.push(new nl(i,u,o,a,c)),(i=r[0])&&t.push(new nl(i,s,o,u,c))}return this}function m1t(e){var t=[],n=[],r;for(this._root&&t.push(new nl(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,l=r.x1,u=r.y1,c=(o+l)/2,d=(a+u)/2;(s=i[0])&&t.push(new nl(s,o,a,c,d)),(s=i[1])&&t.push(new nl(s,c,a,l,d)),(s=i[2])&&t.push(new nl(s,o,d,c,u)),(s=i[3])&&t.push(new nl(s,c,d,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function g1t(e){return e[0]}function y1t(e){return arguments.length?(this._x=e,this):this._x}function v1t(e){return e[1]}function b1t(e){return arguments.length?(this._y=e,this):this._y}function jQ(e,t,n){var r=new BQ(t??g1t,n??v1t,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function BQ(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Ade(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var _l=jQ.prototype=BQ.prototype;_l.copy=function(){var e=new BQ(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Ade(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Ade(r));return e};_l.add=i1t;_l.addAll=s1t;_l.cover=o1t;_l.data=a1t;_l.extent=l1t;_l.find=u1t;_l.remove=c1t;_l.removeAll=d1t;_l.root=f1t;_l.size=h1t;_l.visit=p1t;_l.visitAfter=m1t;_l.x=y1t;_l.y=b1t;function il(e){return function(){return e}}function h0(e){return(e()-.5)*1e-6}function _1t(e){return e.x+e.vx}function w1t(e){return e.y+e.vy}function E1t(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=il(e==null?1:+e));function o(){for(var u,c=t.length,d,f,h,p,m,g,y=0;y<s;++y)for(d=jQ(t,_1t,w1t).visitAfter(a),u=0;u<c;++u)f=t[u],m=n[f.index],g=m*m,h=f.x+f.vx,p=f.y+f.vy,d.visit(b);function b(_,w,E,x,S){var C=_.data,A=_.r,R=m+A;if(C){if(C.index>f.index){var P=h-C.x-C.vx,L=p-C.y-C.vy,k=P*P+L*L;k<R*R&&(P===0&&(P=h0(r),k+=P*P),L===0&&(L=h0(r),k+=L*L),k=(R-(k=Math.sqrt(k)))/k*i,f.vx+=(P*=k)*(R=(A*=A)/(g+A)),f.vy+=(L*=k)*R,C.vx-=P*(R=1-R),C.vy-=L*R)}return}return w>h+R||x<h-R||E>p+R||S<p-R}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(t){var u,c=t.length,d;for(n=new Array(c),u=0;u<c;++u)d=t[u],n[d.index]=+e(d,u,t)}}return o.initialize=function(u,c){t=u,r=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(i=+u,o):i},o.radius=function(u){return arguments.length?(e=typeof u=="function"?u:il(+u),l(),o):e},o}function x1t(e){return e.index}function Ide(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function S1t(e){var t=x1t,n=d,r,i=il(30),s,o,a,l,u,c=1;e==null&&(e=[]);function d(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function f(g){for(var y=0,b=e.length;y<c;++y)for(var _=0,w,E,x,S,C,A,R;_<b;++_)w=e[_],E=w.source,x=w.target,S=x.x+x.vx-E.x-E.vx||h0(u),C=x.y+x.vy-E.y-E.vy||h0(u),A=Math.sqrt(S*S+C*C),A=(A-s[_])/A*g*r[_],S*=A,C*=A,x.vx-=S*(R=l[_]),x.vy-=C*R,E.vx+=S*(R=1-R),E.vy+=C*R}function h(){if(o){var g,y=o.length,b=e.length,_=new Map(o.map((E,x)=>[t(E,x,o),E])),w;for(g=0,a=new Array(y);g<b;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Ide(_,w.source)),typeof w.target!="object"&&(w.target=Ide(_,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,l=new Array(b);g<b;++g)w=e[g],l[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(b),p(),s=new Array(b),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return f.initialize=function(g,y){o=g,u=y,h()},f.links=function(g){return arguments.length?(e=g,h(),f):e},f.id=function(g){return arguments.length?(t=g,f):t},f.iterations=function(g){return arguments.length?(c=+g,f):c},f.strength=function(g){return arguments.length?(n=typeof g=="function"?g:il(+g),p(),f):n},f.distance=function(g){return arguments.length?(i=typeof g=="function"?g:il(+g),m(),f):i},f}const T1t=1664525,C1t=1013904223,kde=4294967296;function A1t(){let e=1;return()=>(e=(T1t*e+C1t)%kde)/kde}function I1t(e){return e.x}function k1t(e){return e.y}var R1t=10,P1t=Math.PI*(3-Math.sqrt(5));function N1t(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,l=rAe(d),u=I2e("tick","end"),c=A1t();e==null&&(e=[]);function d(){f(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function f(m){var g,y=e.length,b;m===void 0&&(m=1);for(var _=0;_<m;++_)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)b=e[g],b.fx==null?b.x+=b.vx*=o:(b.x=b.fx,b.vx=0),b.fy==null?b.y+=b.vy*=o:(b.y=b.fy,b.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var b=R1t*Math.sqrt(.5+m),_=m*P1t;y.x=b*Math.cos(_),y.y=b*Math.sin(_)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:f,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var b=0,_=e.length,w,E,x,S,C;for(y==null?y=1/0:y*=y,b=0;b<_;++b)S=e[b],w=m-S.x,E=g-S.y,x=w*w+E*E,x<y&&(C=S,y=x);return C},on:function(m,g){return arguments.length>1?(u.on(m,g),t):u.on(m)}}}function O1t(){var e,t,n,r,i=il(-30),s,o=1,a=1/0,l=.81;function u(h){var p,m=e.length,g=jQ(e,I1t,k1t).visitAfter(d);for(r=h,p=0;p<m;++p)t=e[p],g.visit(f)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function d(h){var p=0,m,g,y=0,b,_,w;if(h.length){for(b=_=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,b+=g*m.x,_+=g*m.y);h.x=b/y,h.y=_/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function f(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,b=h.y-t.y,_=g-p,w=y*y+b*b;if(_*_/l<w)return w<a&&(y===0&&(y=h0(n),w+=y*y),b===0&&(b=h0(n),w+=b*b),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=b*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=h0(n),w+=y*y),b===0&&(b=h0(n),w+=b*b),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(_=s[h.data.index]*r/w,t.vx+=y*_,t.vy+=b*_);while(h=h.next)}return u.initialize=function(h,p){e=h,n=p,c()},u.strength=function(h){return arguments.length?(i=typeof h=="function"?h:il(+h),c(),u):i},u.distanceMin=function(h){return arguments.length?(o=h*h,u):Math.sqrt(o)},u.distanceMax=function(h){return arguments.length?(a=h*h,u):Math.sqrt(a)},u.theta=function(h){return arguments.length?(l=h*h,u):Math.sqrt(l)},u}function D1t(e){var t=il(.1),n,r,i;typeof e!="function"&&(e=il(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vx+=(i[l]-c.x)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:il(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:il(+a),o(),s):e},s}function M1t(e){var t=il(.1),n,r,i;typeof e!="function"&&(e=il(e==null?0:+e));function s(a){for(var l=0,u=n.length,c;l<u;++l)c=n[l],c.vy+=(i[l]-c.y)*r[l]*a}function o(){if(n){var a,l=n.length;for(r=new Array(l),i=new Array(l),a=0;a<l;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:il(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:il(+a),o(),s):e},s}function $1t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function a3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ZE(e){return e=a3(Math.abs(e)),e?e[1]:NaN}function L1t(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],l=0;i>0&&a>0&&(l+a+1>r&&(a=Math.max(1,r-l)),s.push(n.substring(i-=a,i+a)),!((l+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function F1t(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var j1t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ab(e){if(!(t=j1t.exec(e)))throw new Error("invalid format: "+e);var t;return new zQ({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ab.prototype=zQ.prototype;function zQ(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}zQ.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function B1t(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var lAe;function z1t(e,t){var n=a3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(lAe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+a3(e,Math.max(0,t+s-1))[0]}function Rde(e,t){var n=a3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Pde={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:$1t,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Rde(e*100,t),r:Rde,s:z1t,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Nde(e){return e}var Ode=Array.prototype.map,Dde=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function uAe(e){var t=e.grouping===void 0||e.thousands===void 0?Nde:L1t(Ode.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Nde:F1t(Ode.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=ab(d);var f=d.fill,h=d.align,p=d.sign,m=d.symbol,g=d.zero,y=d.width,b=d.comma,_=d.precision,w=d.trim,E=d.type;E==="n"?(b=!0,E="g"):Pde[E]||(_===void 0&&(_=12),w=!0,E="g"),(g||f==="0"&&h==="=")&&(g=!0,f="0",h="=");var x=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=m==="$"?r:/[%p]/.test(E)?o:"",C=Pde[E],A=/[defgprs%]/.test(E);_=_===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function R(P){var L=x,k=S,$,D,M;if(E==="c")k=C(P)+k,P="";else{P=+P;var B=P<0||1/P<0;if(P=isNaN(P)?l:C(Math.abs(P),_),w&&(P=B1t(P)),B&&+P==0&&p!=="+"&&(B=!1),L=(B?p==="("?p:a:p==="-"||p==="("?"":p)+L,k=(E==="s"?Dde[8+lAe/3]:"")+k+(B&&p==="("?")":""),A){for($=-1,D=P.length;++$<D;)if(M=P.charCodeAt($),48>M||M>57){k=(M===46?i+P.slice($+1):P.slice($))+k,P=P.slice(0,$);break}}}b&&!g&&(P=t(P,1/0));var z=L.length+P.length+k.length,U=z<y?new Array(y-z+1).join(f):"";switch(b&&g&&(P=t(U+P,U.length?y-k.length:1/0),U=""),h){case"<":P=L+P+k+U;break;case"=":P=L+U+P+k;break;case"^":P=U.slice(0,z=U.length>>1)+L+P+k+U.slice(z);break;default:P=U+L+P+k;break}return s(P)}return R.toString=function(){return d+""},R}function c(d,f){var h=u((d=ab(d),d.type="f",d)),p=Math.max(-8,Math.min(8,Math.floor(ZE(f)/3)))*3,m=Math.pow(10,-p),g=Dde[8+p/3];return function(y){return h(m*y)+g}}return{format:u,formatPrefix:c}}var yN,Mh,UQ;U1t({thousands:",",grouping:[3],currency:["$",""]});function U1t(e){return yN=uAe(e),Mh=yN.format,UQ=yN.formatPrefix,yN}function cAe(e){return Math.max(0,-ZE(Math.abs(e)))}function dAe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ZE(t)/3)))*3-ZE(Math.abs(e)))}function fAe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ZE(t)-ZE(e))+1}var Gt=1e-6,l3=1e-12,Hn=Math.PI,us=Hn/2,u3=Hn/4,dl=Hn*2,bs=180/Hn,jn=Hn/180,ur=Math.abs,xS=Math.atan,Qc=Math.atan2,Kt=Math.cos,vN=Math.ceil,hAe=Math.exp,hV=Math.hypot,c3=Math.log,bB=Math.pow,Ut=Math.sin,jc=Math.sign||function(e){return e>0?1:e<0?-1:0},fl=Math.sqrt,VQ=Math.tan;function pAe(e){return e>1?0:e<-1?Hn:Math.acos(e)}function ou(e){return e>1?us:e<-1?-us:Math.asin(e)}function Ho(){}function d3(e,t){e&&$de.hasOwnProperty(e.type)&&$de[e.type](e,t)}var Mde={Feature:function(e,t){d3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)d3(n[r].geometry,t)}},$de={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){pV(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pV(n[r],t,0)},Polygon:function(e,t){Lde(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Lde(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)d3(n[r],t)}};function pV(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Lde(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)pV(e[n],t,1);t.polygonEnd()}function Qp(e,t){e&&Mde.hasOwnProperty(e.type)?Mde[e.type](e,t):d3(e,t)}var f3=new al,h3=new al,mAe,gAe,mV,gV,yV,Wh={point:Ho,lineStart:Ho,lineEnd:Ho,polygonStart:function(){f3=new al,Wh.lineStart=V1t,Wh.lineEnd=H1t},polygonEnd:function(){var e=+f3;h3.add(e<0?dl+e:e),this.lineStart=this.lineEnd=this.point=Ho},sphere:function(){h3.add(dl)}};function V1t(){Wh.point=q1t}function H1t(){yAe(mAe,gAe)}function q1t(e,t){Wh.point=yAe,mAe=e,gAe=t,e*=jn,t*=jn,mV=e,gV=Kt(t=t/2+u3),yV=Ut(t)}function yAe(e,t){e*=jn,t*=jn,t=t/2+u3;var n=e-mV,r=n>=0?1:-1,i=r*n,s=Kt(t),o=Ut(t),a=yV*o,l=gV*s+a*Kt(i),u=a*r*Ut(i);f3.add(Qc(u,l)),mV=e,gV=s,yV=o}function W1t(e){return h3=new al,Qp(e,Wh),h3*2}function p3(e){return[Qc(e[1],e[0]),ou(e[2])]}function lb(e){var t=e[0],n=e[1],r=Kt(n);return[r*Kt(t),r*Ut(t),Ut(n)]}function bN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ex(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function _B(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function _N(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function m3(e){var t=fl(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Vi,Ll,ts,Ru,qv,vAe,bAe,uE,K2,qg,jm,Gp={point:vV,lineStart:Fde,lineEnd:jde,polygonStart:function(){Gp.point=wAe,Gp.lineStart=G1t,Gp.lineEnd=Y1t,K2=new al,Wh.polygonStart()},polygonEnd:function(){Wh.polygonEnd(),Gp.point=vV,Gp.lineStart=Fde,Gp.lineEnd=jde,f3<0?(Vi=-(ts=180),Ll=-(Ru=90)):K2>Gt?Ru=90:K2<-Gt&&(Ll=-90),jm[0]=Vi,jm[1]=ts},sphere:function(){Vi=-(ts=180),Ll=-(Ru=90)}};function vV(e,t){qg.push(jm=[Vi=e,ts=e]),t<Ll&&(Ll=t),t>Ru&&(Ru=t)}function _Ae(e,t){var n=lb([e*jn,t*jn]);if(uE){var r=ex(uE,n),i=[r[1],-r[0],0],s=ex(i,r);m3(s),s=p3(s);var o=e-qv,a=o>0?1:-1,l=s[0]*bs*a,u,c=ur(o)>180;c^(a*qv<l&&l<a*e)?(u=s[1]*bs,u>Ru&&(Ru=u)):(l=(l+360)%360-180,c^(a*qv<l&&l<a*e)?(u=-s[1]*bs,u<Ll&&(Ll=u)):(t<Ll&&(Ll=t),t>Ru&&(Ru=t))),c?e<qv?Au(Vi,e)>Au(Vi,ts)&&(ts=e):Au(e,ts)>Au(Vi,ts)&&(Vi=e):ts>=Vi?(e<Vi&&(Vi=e),e>ts&&(ts=e)):e>qv?Au(Vi,e)>Au(Vi,ts)&&(ts=e):Au(e,ts)>Au(Vi,ts)&&(Vi=e)}else qg.push(jm=[Vi=e,ts=e]);t<Ll&&(Ll=t),t>Ru&&(Ru=t),uE=n,qv=e}function Fde(){Gp.point=_Ae}function jde(){jm[0]=Vi,jm[1]=ts,Gp.point=vV,uE=null}function wAe(e,t){if(uE){var n=e-qv;K2.add(ur(n)>180?n+(n>0?360:-360):n)}else vAe=e,bAe=t;Wh.point(e,t),_Ae(e,t)}function G1t(){Wh.lineStart()}function Y1t(){wAe(vAe,bAe),Wh.lineEnd(),ur(K2)>Gt&&(Vi=-(ts=180)),jm[0]=Vi,jm[1]=ts,uE=null}function Au(e,t){return(t-=e)<0?t+360:t}function K1t(e,t){return e[0]-t[0]}function Bde(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function X1t(e){var t,n,r,i,s,o,a;if(Ru=ts=-(Vi=Ll=1/0),qg=[],Qp(e,Gp),n=qg.length){for(qg.sort(K1t),t=1,r=qg[0],s=[r];t<n;++t)i=qg[t],Bde(r,i[0])||Bde(r,i[1])?(Au(r[0],i[1])>Au(r[0],r[1])&&(r[1]=i[1]),Au(i[0],r[1])>Au(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=Au(r[1],i[0]))>o&&(o=a,Vi=i[0],ts=r[1])}return qg=jm=null,Vi===1/0||Ll===1/0?[[NaN,NaN],[NaN,NaN]]:[[Vi,Ll],[ts,Ru]]}var NC,g3,y3,v3,b3,_3,w3,E3,bV,_V,wV,EAe,xAe,Za,el,tl,Xd={sphere:Ho,point:HQ,lineStart:zde,lineEnd:Ude,polygonStart:function(){Xd.lineStart=Z1t,Xd.lineEnd=ebt},polygonEnd:function(){Xd.lineStart=zde,Xd.lineEnd=Ude}};function HQ(e,t){e*=jn,t*=jn;var n=Kt(t);Xk(n*Kt(e),n*Ut(e),Ut(t))}function Xk(e,t,n){++NC,y3+=(e-y3)/NC,v3+=(t-v3)/NC,b3+=(n-b3)/NC}function zde(){Xd.point=Q1t}function Q1t(e,t){e*=jn,t*=jn;var n=Kt(t);Za=n*Kt(e),el=n*Ut(e),tl=Ut(t),Xd.point=J1t,Xk(Za,el,tl)}function J1t(e,t){e*=jn,t*=jn;var n=Kt(t),r=n*Kt(e),i=n*Ut(e),s=Ut(t),o=Qc(fl((o=el*s-tl*i)*o+(o=tl*r-Za*s)*o+(o=Za*i-el*r)*o),Za*r+el*i+tl*s);g3+=o,_3+=o*(Za+(Za=r)),w3+=o*(el+(el=i)),E3+=o*(tl+(tl=s)),Xk(Za,el,tl)}function Ude(){Xd.point=HQ}function Z1t(){Xd.point=tbt}function ebt(){SAe(EAe,xAe),Xd.point=HQ}function tbt(e,t){EAe=e,xAe=t,e*=jn,t*=jn,Xd.point=SAe;var n=Kt(t);Za=n*Kt(e),el=n*Ut(e),tl=Ut(t),Xk(Za,el,tl)}function SAe(e,t){e*=jn,t*=jn;var n=Kt(t),r=n*Kt(e),i=n*Ut(e),s=Ut(t),o=el*s-tl*i,a=tl*r-Za*s,l=Za*i-el*r,u=hV(o,a,l),c=ou(u),d=u&&-c/u;bV.add(d*o),_V.add(d*a),wV.add(d*l),g3+=c,_3+=c*(Za+(Za=r)),w3+=c*(el+(el=i)),E3+=c*(tl+(tl=s)),Xk(Za,el,tl)}function nbt(e){NC=g3=y3=v3=b3=_3=w3=E3=0,bV=new al,_V=new al,wV=new al,Qp(e,Xd);var t=+bV,n=+_V,r=+wV,i=hV(t,n,r);return i<l3&&(t=_3,n=w3,r=E3,g3<Gt&&(t=y3,n=v3,r=b3),i=hV(t,n,r),i<l3)?[NaN,NaN]:[Qc(n,t)*bs,ou(r/i)*bs]}function EV(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function xV(e,t){return ur(e)>Hn&&(e-=Math.round(e/dl)*dl),[e,t]}xV.invert=xV;function TAe(e,t,n){return(e%=dl)?t||n?EV(Hde(e),qde(t,n)):Hde(e):t||n?qde(t,n):xV}function Vde(e){return function(t,n){return t+=e,ur(t)>Hn&&(t-=Math.round(t/dl)*dl),[t,n]}}function Hde(e){var t=Vde(e);return t.invert=Vde(-e),t}function qde(e,t){var n=Kt(e),r=Ut(e),i=Kt(t),s=Ut(t);function o(a,l){var u=Kt(l),c=Kt(a)*u,d=Ut(a)*u,f=Ut(l),h=f*n+c*r;return[Qc(d*i-h*s,c*n-f*r),ou(h*i+d*s)]}return o.invert=function(a,l){var u=Kt(l),c=Kt(a)*u,d=Ut(a)*u,f=Ut(l),h=f*i-d*s;return[Qc(d*i+f*s,c*n+h*r),ou(h*n-c*r)]},o}function rbt(e){e=TAe(e[0]*jn,e[1]*jn,e.length>2?e[2]*jn:0);function t(n){return n=e(n[0]*jn,n[1]*jn),n[0]*=bs,n[1]*=bs,n}return t.invert=function(n){return n=e.invert(n[0]*jn,n[1]*jn),n[0]*=bs,n[1]*=bs,n},t}function ibt(e,t,n,r,i,s){if(n){var o=Kt(t),a=Ut(t),l=r*n;i==null?(i=t+r*dl,s=t-l/2):(i=Wde(o,i),s=Wde(o,s),(r>0?i<s:i>s)&&(i+=r*dl));for(var u,c=i;r>0?c>s:c<s;c-=l)u=p3([o,-a*Kt(c),-a*Ut(c)]),e.point(u[0],u[1])}}function Wde(e,t){t=lb(t),t[0]-=e,m3(t);var n=pAe(-t[1]);return((-t[2]<0?-n:n)+dl-Gt)%dl}function CAe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Ho,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function tD(e,t){return ur(e[0]-t[0])<Gt&&ur(e[1]-t[1])<Gt}function wN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function AAe(e,t,n,r,i){var s=[],o=[],a,l;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],b;if(tD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Gt}s.push(b=new wN(g,p,null,!0)),o.push(b.o=new wN(g,null,b,!1)),s.push(b=new wN(y,p,null,!1)),o.push(b.o=new wN(y,null,b,!0))}}),!!s.length){for(o.sort(t),Gde(s),Gde(o),a=0,l=o.length;a<l;++a)o[a].e=n=!n;for(var u=s[0],c,d;;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,i.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(a=0,l=c.length;a<l;++a)i.point((d=c[a])[0],d[1]);else r(f.x,f.n.x,1,i);f=f.n}else{if(h)for(c=f.p.z,a=c.length-1;a>=0;--a)i.point((d=c[a])[0],d[1]);else r(f.x,f.p.x,-1,i);f=f.p}f=f.o,c=f.z,h=!h}while(!f.v);i.lineEnd()}}}function Gde(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function wB(e){return ur(e[0])<=Hn?e[0]:jc(e[0])*((ur(e[0])+Hn)%dl-Hn)}function sbt(e,t){var n=wB(t),r=t[1],i=Ut(r),s=[Ut(n),-Kt(n),0],o=0,a=0,l=new al;i===1?r=us+Gt:i===-1&&(r=-us-Gt);for(var u=0,c=e.length;u<c;++u)if(f=(d=e[u]).length)for(var d,f,h=d[f-1],p=wB(h),m=h[1]/2+u3,g=Ut(m),y=Kt(m),b=0;b<f;++b,p=w,g=x,y=S,h=_){var _=d[b],w=wB(_),E=_[1]/2+u3,x=Ut(E),S=Kt(E),C=w-p,A=C>=0?1:-1,R=A*C,P=R>Hn,L=g*x;if(l.add(Qc(L*A*Ut(R),y*S+L*Kt(R))),o+=P?C+A*dl:C,P^p>=n^w>=n){var k=ex(lb(h),lb(_));m3(k);var $=ex(s,k);m3($);var D=(P^C>=0?-1:1)*ou($[2]);(r>D||r===D&&(k[0]||k[1]))&&(a+=P^C>=0?1:-1)}}return(o<-Gt||o<Gt&&l<-l3)^a&1}function IAe(e,t,n,r){return function(i){var s=t(i),o=CAe(),a=t(o),l=!1,u,c,d,f={point:h,lineStart:m,lineEnd:g,polygonStart:function(){f.point=y,f.lineStart=b,f.lineEnd=_,c=[],u=[]},polygonEnd:function(){f.point=h,f.lineStart=m,f.lineEnd=g,c=A2e(c);var w=sbt(u,r);c.length?(l||(i.polygonStart(),l=!0),AAe(c,abt,w,n,i)):w&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){f.point=p,s.lineStart()}function g(){f.point=h,s.lineEnd()}function y(w,E){d.push([w,E]),a.point(w,E)}function b(){a.lineStart(),d=[]}function _(){y(d[0][0],d[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),x,S=E.length,C,A,R;if(d.pop(),u.push(d),d=null,!!S){if(w&1){if(A=E[0],(C=A.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),x=0;x<C;++x)i.point((R=A[x])[0],R[1]);i.lineEnd()}return}S>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(obt))}}return f}}function obt(e){return e.length>1}function abt(e,t){return((e=e.x)[0]<0?e[1]-us-Gt:us-e[1])-((t=t.x)[0]<0?t[1]-us-Gt:us-t[1])}const Yde=IAe(function(){return!0},lbt,cbt,[-Hn,-us]);function lbt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Hn:-Hn,l=ur(s-t);ur(l-Hn)<Gt?(e.point(t,n=(n+o)/2>0?us:-us),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&l>=Hn&&(ur(t-r)<Gt&&(t-=r*Gt),ur(s-a)<Gt&&(s-=a*Gt),n=ubt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function ubt(e,t,n,r){var i,s,o=Ut(e-n);return ur(o)>Gt?xS((Ut(t)*(s=Kt(r))*Ut(n)-Ut(r)*(i=Kt(t))*Ut(e))/(i*s*o)):(t+r)/2}function cbt(e,t,n,r){var i;if(e==null)i=n*us,r.point(-Hn,i),r.point(0,i),r.point(Hn,i),r.point(Hn,0),r.point(Hn,-i),r.point(0,-i),r.point(-Hn,-i),r.point(-Hn,0),r.point(-Hn,i);else if(ur(e[0]-t[0])>Gt){var s=e[0]<t[0]?Hn:-Hn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function dbt(e){var t=Kt(e),n=2*jn,r=t>0,i=ur(t)>Gt;function s(c,d,f,h){ibt(h,e,n,f,c,d)}function o(c,d){return Kt(c)*Kt(d)>t}function a(c){var d,f,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var b=[g,y],_,w=o(g,y),E=r?w?0:u(g,y):w?u(g+(g<0?Hn:-Hn),y):0;if(!d&&(p=h=w)&&c.lineStart(),w!==h&&(_=l(d,b),(!_||tD(d,_)||tD(b,_))&&(b[2]=1)),w!==h)m=0,w?(c.lineStart(),_=l(b,d),c.point(_[0],_[1])):(_=l(d,b),c.point(_[0],_[1],2),c.lineEnd()),d=_;else if(i&&d&&r^w){var x;!(E&f)&&(x=l(b,d,!0))&&(m=0,r?(c.lineStart(),c.point(x[0][0],x[0][1]),c.point(x[1][0],x[1][1]),c.lineEnd()):(c.point(x[1][0],x[1][1]),c.lineEnd(),c.lineStart(),c.point(x[0][0],x[0][1],3)))}w&&(!d||!tD(d,b))&&c.point(b[0],b[1]),d=b,h=w,f=E},lineEnd:function(){h&&c.lineEnd(),d=null},clean:function(){return m|(p&&h)<<1}}}function l(c,d,f){var h=lb(c),p=lb(d),m=[1,0,0],g=ex(h,p),y=bN(g,g),b=g[0],_=y-b*b;if(!_)return!f&&c;var w=t*y/_,E=-t*b/_,x=ex(m,g),S=_N(m,w),C=_N(g,E);_B(S,C);var A=x,R=bN(S,A),P=bN(A,A),L=R*R-P*(bN(S,S)-1);if(!(L<0)){var k=fl(L),$=_N(A,(-R-k)/P);if(_B($,S),$=p3($),!f)return $;var D=c[0],M=d[0],B=c[1],z=d[1],U;M<D&&(U=D,D=M,M=U);var O=M-D,V=ur(O-Hn)<Gt,W=V||O<Gt;if(!V&&z<B&&(U=B,B=z,z=U),W?V?B+z>0^$[1]<(ur($[0]-D)<Gt?B:z):B<=$[1]&&$[1]<=z:O>Hn^(D<=$[0]&&$[0]<=M)){var j=_N(A,(-R+k)/P);return _B(j,S),[$,p3(j)]}}}function u(c,d){var f=r?e:Hn-e,h=0;return c<-f?h|=1:c>f&&(h|=2),d<-f?h|=4:d>f&&(h|=8),h}return IAe(o,a,s,r?[0,-e]:[-Hn,e-Hn])}function fbt(e,t,n,r,i,s){var o=e[0],a=e[1],l=t[0],u=t[1],c=0,d=1,f=l-o,h=u-a,p;if(p=n-o,!(!f&&p>0)){if(p/=f,f<0){if(p<c)return;p<d&&(d=p)}else if(f>0){if(p>d)return;p>c&&(c=p)}if(p=i-o,!(!f&&p<0)){if(p/=f,f<0){if(p>d)return;p>c&&(c=p)}else if(f>0){if(p<c)return;p<d&&(d=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<d&&(d=p)}else if(h>0){if(p>d)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>d)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<d&&(d=p)}return c>0&&(e[0]=o+c*f,e[1]=a+c*h),d<1&&(t[0]=o+d*f,t[1]=a+d*h),!0}}}}}var OC=1e9,EN=-OC;function kAe(e,t,n,r){function i(u,c){return e<=u&&u<=n&&t<=c&&c<=r}function s(u,c,d,f){var h=0,p=0;if(u==null||(h=o(u,d))!==(p=o(c,d))||l(u,c)<0^d>0)do f.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+d+4)%4)!==p);else f.point(c[0],c[1])}function o(u,c){return ur(u[0]-e)<Gt?c>0?0:3:ur(u[0]-n)<Gt?c>0?2:1:ur(u[1]-t)<Gt?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var d=o(u,1),f=o(c,1);return d!==f?d-f:d===0?c[1]-u[1]:d===1?u[0]-c[0]:d===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,d=CAe(),f,h,p,m,g,y,b,_,w,E,x,S={point:C,lineStart:L,lineEnd:k,polygonStart:R,polygonEnd:P};function C(D,M){i(D,M)&&c.point(D,M)}function A(){for(var D=0,M=0,B=h.length;M<B;++M)for(var z=h[M],U=1,O=z.length,V=z[0],W,j,H=V[0],G=V[1];U<O;++U)W=H,j=G,V=z[U],H=V[0],G=V[1],j<=r?G>r&&(H-W)*(r-j)>(G-j)*(e-W)&&++D:G<=r&&(H-W)*(r-j)<(G-j)*(e-W)&&--D;return D}function R(){c=d,f=[],h=[],x=!0}function P(){var D=A(),M=x&&D,B=(f=A2e(f)).length;(M||B)&&(u.polygonStart(),M&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),B&&AAe(f,a,D,s,u),u.polygonEnd()),c=u,f=h=p=null}function L(){S.point=$,h&&h.push(p=[]),E=!0,w=!1,b=_=NaN}function k(){f&&($(m,g),y&&w&&d.rejoin(),f.push(d.result())),S.point=C,w&&c.lineEnd()}function $(D,M){var B=i(D,M);if(h&&p.push([D,M]),E)m=D,g=M,y=B,E=!1,B&&(c.lineStart(),c.point(D,M));else if(B&&w)c.point(D,M);else{var z=[b=Math.max(EN,Math.min(OC,b)),_=Math.max(EN,Math.min(OC,_))],U=[D=Math.max(EN,Math.min(OC,D)),M=Math.max(EN,Math.min(OC,M))];fbt(z,U,e,t,n,r)?(w||(c.lineStart(),c.point(z[0],z[1])),c.point(U[0],U[1]),B||c.lineEnd(),x=!1):B&&(c.lineStart(),c.point(D,M),x=!1)}b=D,_=M,w=B}return S}}function Kde(e,t,n){var r=Fu(e,t-Gt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Xde(e,t,n){var r=Fu(e,t-Gt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function hbt(){var e,t,n,r,i,s,o,a,l=10,u=l,c=90,d=360,f,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return Fu(vN(r/c)*c,n,c).map(p).concat(Fu(vN(a/d)*d,o,d).map(m)).concat(Fu(vN(t/l)*l,e,l).filter(function(_){return ur(_%c)>Gt}).map(f)).concat(Fu(vN(s/u)*u,i,u).filter(function(_){return ur(_%d)>Gt}).map(h))}return y.lines=function(){return b().map(function(_){return{type:"LineString",coordinates:_}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(_){return arguments.length?y.extentMajor(_).extentMinor(_):y.extentMinor()},y.extentMajor=function(_){return arguments.length?(r=+_[0][0],n=+_[1][0],a=+_[0][1],o=+_[1][1],r>n&&(_=r,r=n,n=_),a>o&&(_=a,a=o,o=_),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(_){return arguments.length?(t=+_[0][0],e=+_[1][0],s=+_[0][1],i=+_[1][1],t>e&&(_=t,t=e,e=_),s>i&&(_=s,s=i,i=_),y.precision(g)):[[t,s],[e,i]]},y.step=function(_){return arguments.length?y.stepMajor(_).stepMinor(_):y.stepMinor()},y.stepMajor=function(_){return arguments.length?(c=+_[0],d=+_[1],y):[c,d]},y.stepMinor=function(_){return arguments.length?(l=+_[0],u=+_[1],y):[l,u]},y.precision=function(_){return arguments.length?(g=+_,f=Kde(s,i,90),h=Xde(t,e,g),p=Kde(a,o,90),m=Xde(r,n,g),y):g},y.extentMajor([[-180,-90+Gt],[180,90-Gt]]).extentMinor([[-180,-80-Gt],[180,80+Gt]])}const aI=e=>e;var EB=new al,SV=new al,RAe,PAe,TV,CV,Jp={point:Ho,lineStart:Ho,lineEnd:Ho,polygonStart:function(){Jp.lineStart=pbt,Jp.lineEnd=gbt},polygonEnd:function(){Jp.lineStart=Jp.lineEnd=Jp.point=Ho,EB.add(ur(SV)),SV=new al},result:function(){var e=EB/2;return EB=new al,e}};function pbt(){Jp.point=mbt}function mbt(e,t){Jp.point=NAe,RAe=TV=e,PAe=CV=t}function NAe(e,t){SV.add(CV*e-TV*t),TV=e,CV=t}function gbt(){NAe(RAe,PAe)}var tx=1/0,x3=tx,lI=-tx,S3=lI,T3={point:ybt,lineStart:Ho,lineEnd:Ho,polygonStart:Ho,polygonEnd:Ho,result:function(){var e=[[tx,x3],[lI,S3]];return lI=S3=-(x3=tx=1/0),e}};function ybt(e,t){e<tx&&(tx=e),e>lI&&(lI=e),t<x3&&(x3=t),t>S3&&(S3=t)}var AV=0,IV=0,DC=0,C3=0,A3=0,Mw=0,kV=0,RV=0,MC=0,OAe,DAe,ph,mh,Oc={point:ub,lineStart:Qde,lineEnd:Jde,polygonStart:function(){Oc.lineStart=_bt,Oc.lineEnd=wbt},polygonEnd:function(){Oc.point=ub,Oc.lineStart=Qde,Oc.lineEnd=Jde},result:function(){var e=MC?[kV/MC,RV/MC]:Mw?[C3/Mw,A3/Mw]:DC?[AV/DC,IV/DC]:[NaN,NaN];return AV=IV=DC=C3=A3=Mw=kV=RV=MC=0,e}};function ub(e,t){AV+=e,IV+=t,++DC}function Qde(){Oc.point=vbt}function vbt(e,t){Oc.point=bbt,ub(ph=e,mh=t)}function bbt(e,t){var n=e-ph,r=t-mh,i=fl(n*n+r*r);C3+=i*(ph+e)/2,A3+=i*(mh+t)/2,Mw+=i,ub(ph=e,mh=t)}function Jde(){Oc.point=ub}function _bt(){Oc.point=Ebt}function wbt(){MAe(OAe,DAe)}function Ebt(e,t){Oc.point=MAe,ub(OAe=ph=e,DAe=mh=t)}function MAe(e,t){var n=e-ph,r=t-mh,i=fl(n*n+r*r);C3+=i*(ph+e)/2,A3+=i*(mh+t)/2,Mw+=i,i=mh*e-ph*t,kV+=i*(ph+e),RV+=i*(mh+t),MC+=i*3,ub(ph=e,mh=t)}function $Ae(e){this._context=e}$Ae.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,dl);break}}},result:Ho};var PV=new al,xB,LAe,FAe,$C,LC,uI={point:Ho,lineStart:function(){uI.point=xbt},lineEnd:function(){xB&&jAe(LAe,FAe),uI.point=Ho},polygonStart:function(){xB=!0},polygonEnd:function(){xB=null},result:function(){var e=+PV;return PV=new al,e}};function xbt(e,t){uI.point=jAe,LAe=$C=e,FAe=LC=t}function jAe(e,t){$C-=e,LC-=t,PV.add(fl($C*$C+LC*LC)),$C=e,LC=t}let Zde,I3,efe,tfe;class nfe{constructor(t){this._append=t==null?BAe:Sbt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==efe||this._append!==I3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,efe=r,I3=this._append,tfe=this._,this._=i}this._+=tfe;break}}}result(){const t=this._;return this._="",t.length?t:null}}function BAe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Sbt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return BAe;if(t!==Zde){const n=10**t;Zde=t,I3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return I3}function zAe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Qp(a,i(s))),s.result()}return o.area=function(a){return Qp(a,i(Jp)),Jp.result()},o.measure=function(a){return Qp(a,i(uI)),uI.result()},o.bounds=function(a){return Qp(a,i(T3)),T3.result()},o.centroid=function(a){return Qp(a,i(Oc)),Oc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,aI):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new nfe(n)):new $Ae(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const l=Math.floor(a);if(!(l>=0))throw new RangeError(`invalid digits: ${a}`);n=l}return t===null&&(s=new nfe(n)),o},o.projection(e).digits(n).context(t)}function w6(e){return function(t){var n=new NV;for(var r in e)n[r]=e[r];return n.stream=t,n}}function NV(){}NV.prototype={constructor:NV,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function qQ(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Qp(n,e.stream(T3)),t(T3.result()),r!=null&&e.clipExtent(r),e}function E6(e,t,n){return qQ(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,l])},n)}function WQ(e,t,n){return E6(e,[[0,0],t],n)}function GQ(e,t,n){return qQ(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function YQ(e,t,n){return qQ(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var rfe=16,Tbt=Kt(30*jn);function ife(e,t){return+t?Abt(e,t):Cbt(e)}function Cbt(e){return w6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Abt(e,t){function n(r,i,s,o,a,l,u,c,d,f,h,p,m,g){var y=u-r,b=c-i,_=y*y+b*b;if(_>4*t&&m--){var w=o+f,E=a+h,x=l+p,S=fl(w*w+E*E+x*x),C=ou(x/=S),A=ur(ur(x)-1)<Gt||ur(s-d)<Gt?(s+d)/2:Qc(E,w),R=e(A,C),P=R[0],L=R[1],k=P-r,$=L-i,D=b*k-y*$;(D*D/_>t||ur((y*k+b*$)/_-.5)>.3||o*f+a*h+l*p<Tbt)&&(n(r,i,s,o,a,l,P,L,A,w/=S,E/=S,x,m,g),g.point(P,L),n(P,L,A,w,E,x,u,c,d,f,h,p,m,g))}}return function(r){var i,s,o,a,l,u,c,d,f,h,p,m,g={point:y,lineStart:b,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=b}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function b(){d=NaN,g.point=_,r.lineStart()}function _(C,A){var R=lb([C,A]),P=e(C,A);n(d,f,c,h,p,m,d=P[0],f=P[1],c=C,h=R[0],p=R[1],m=R[2],rfe,r),r.point(d,f)}function w(){g.point=y,r.lineEnd()}function E(){b(),g.point=x,g.lineEnd=S}function x(C,A){_(i=C,A),s=d,o=f,a=h,l=p,u=m,g.point=_}function S(){n(d,f,c,h,p,m,s,o,i,a,l,u,rfe,r),g.lineEnd=w,w()}return g}}var Ibt=w6({point:function(e,t){this.stream.point(e*jn,t*jn)}});function kbt(e){return w6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Rbt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function sfe(e,t,n,r,i,s){if(!s)return Rbt(e,t,n,r,i);var o=Kt(s),a=Ut(s),l=o*e,u=a*e,c=o/e,d=a/e,f=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[l*m-u*g+t,n-u*m-l*g]}return p.invert=function(m,g){return[r*(c*m-d*g+f),i*(h-d*m-c*g)]},p}function pp(e){return UAe(function(){return e})()}function UAe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,l=0,u=0,c,d=0,f=1,h=1,p=null,m=Yde,g=null,y,b,_,w=aI,E=.5,x,S,C,A,R;function P(D){return C(D[0]*jn,D[1]*jn)}function L(D){return D=C.invert(D[0],D[1]),D&&[D[0]*bs,D[1]*bs]}P.stream=function(D){return A&&R===D?A:A=Ibt(kbt(c)(m(x(w(R=D)))))},P.preclip=function(D){return arguments.length?(m=D,p=void 0,$()):m},P.postclip=function(D){return arguments.length?(w=D,g=y=b=_=null,$()):w},P.clipAngle=function(D){return arguments.length?(m=+D?dbt(p=D*jn):(p=null,Yde),$()):p*bs},P.clipExtent=function(D){return arguments.length?(w=D==null?(g=y=b=_=null,aI):kAe(g=+D[0][0],y=+D[0][1],b=+D[1][0],_=+D[1][1]),$()):g==null?null:[[g,y],[b,_]]},P.scale=function(D){return arguments.length?(n=+D,k()):n},P.translate=function(D){return arguments.length?(r=+D[0],i=+D[1],k()):[r,i]},P.center=function(D){return arguments.length?(s=D[0]%360*jn,o=D[1]%360*jn,k()):[s*bs,o*bs]},P.rotate=function(D){return arguments.length?(a=D[0]%360*jn,l=D[1]%360*jn,u=D.length>2?D[2]%360*jn:0,k()):[a*bs,l*bs,u*bs]},P.angle=function(D){return arguments.length?(d=D%360*jn,k()):d*bs},P.reflectX=function(D){return arguments.length?(f=D?-1:1,k()):f<0},P.reflectY=function(D){return arguments.length?(h=D?-1:1,k()):h<0},P.precision=function(D){return arguments.length?(x=ife(S,E=D*D),$()):fl(E)},P.fitExtent=function(D,M){return E6(P,D,M)},P.fitSize=function(D,M){return WQ(P,D,M)},P.fitWidth=function(D,M){return GQ(P,D,M)},P.fitHeight=function(D,M){return YQ(P,D,M)};function k(){var D=sfe(n,0,0,f,h,d).apply(null,t(s,o)),M=sfe(n,r-D[0],i-D[1],f,h,d);return c=TAe(a,l,u),S=EV(t,M),C=EV(c,S),x=ife(S,E),$()}function $(){return A=R=null,P}return function(){return t=e.apply(this,arguments),P.invert=t.invert&&L,k()}}function KQ(e){var t=0,n=Hn/3,r=UAe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*jn,n=s[1]*jn):[t*bs,n*bs]},i}function Pbt(e){var t=Kt(e);function n(r,i){return[r*t,Ut(i)/t]}return n.invert=function(r,i){return[r/t,ou(i*t)]},n}function Nbt(e,t){var n=Ut(e),r=(n+Ut(t))/2;if(ur(r)<Gt)return Pbt(e);var i=1+n*(2*r-n),s=fl(i)/r;function o(a,l){var u=fl(i-2*r*Ut(l))/r;return[u*Ut(a*=r),s-u*Kt(a)]}return o.invert=function(a,l){var u=s-l,c=Qc(a,ur(u))*jc(u);return u*r<0&&(c-=Hn*jc(a)*jc(u)),[c/r,ou((i-(a*a+u*u)*r*r)/(2*r))]},o}function k3(){return KQ(Nbt).scale(155.424).center([0,33.6442])}function VAe(){return k3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Obt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Dbt(){var e,t,n=VAe(),r,i=k3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=k3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,l,u={point:function(f,h){l=[f,h]}};function c(f){var h=f[0],p=f[1];return l=null,r.point(h,p),l||(s.point(h,p),l)||(a.point(h,p),l)}c.invert=function(f){var h=n.scale(),p=n.translate(),m=(f[0]-p[0])/h,g=(f[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(f)},c.stream=function(f){return e&&t===f?e:e=Obt([n.stream(t=f),i.stream(f),o.stream(f)])},c.precision=function(f){return arguments.length?(n.precision(f),i.precision(f),o.precision(f),d()):n.precision()},c.scale=function(f){return arguments.length?(n.scale(f),i.scale(f*.35),o.scale(f),c.translate(n.translate())):n.scale()},c.translate=function(f){if(!arguments.length)return n.translate();var h=n.scale(),p=+f[0],m=+f[1];return r=n.translate(f).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(u),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Gt,m+.12*h+Gt],[p-.214*h-Gt,m+.234*h-Gt]]).stream(u),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Gt,m+.166*h+Gt],[p-.115*h-Gt,m+.234*h-Gt]]).stream(u),d()},c.fitExtent=function(f,h){return E6(c,f,h)},c.fitSize=function(f,h){return WQ(c,f,h)},c.fitWidth=function(f,h){return GQ(c,f,h)},c.fitHeight=function(f,h){return YQ(c,f,h)};function d(){return e=t=null,c}return c.scale(1070)}function HAe(e){return function(t,n){var r=Kt(t),i=Kt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ut(t),s*Ut(n)]}}function Qk(e){return function(t,n){var r=fl(t*t+n*n),i=e(r),s=Ut(i),o=Kt(i);return[Qc(t*s,r*o),ou(r&&n*s/r)]}}var qAe=HAe(function(e){return fl(2/(1+e))});qAe.invert=Qk(function(e){return 2*ou(e/2)});function Mbt(){return pp(qAe).scale(124.75).clipAngle(180-.001)}var WAe=HAe(function(e){return(e=pAe(e))&&e/Ut(e)});WAe.invert=Qk(function(e){return e});function $bt(){return pp(WAe).scale(79.4188).clipAngle(180-.001)}function x6(e,t){return[e,c3(VQ((us+t)/2))]}x6.invert=function(e,t){return[e,2*xS(hAe(t))-us]};function Lbt(){return GAe(x6).scale(961/dl)}function GAe(e){var t=pp(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,l,u;t.scale=function(d){return arguments.length?(r(d),c()):r()},t.translate=function(d){return arguments.length?(i(d),c()):i()},t.center=function(d){return arguments.length?(n(d),c()):n()},t.clipExtent=function(d){return arguments.length?(d==null?o=a=l=u=null:(o=+d[0][0],a=+d[0][1],l=+d[1][0],u=+d[1][1]),c()):o==null?null:[[o,a],[l,u]]};function c(){var d=Hn*r(),f=t(rbt(t.rotate()).invert([0,0]));return s(o==null?[[f[0]-d,f[1]-d],[f[0]+d,f[1]+d]]:e===x6?[[Math.max(f[0]-d,o),a],[Math.min(f[0]+d,l),u]]:[[o,Math.max(f[1]-d,a)],[l,Math.min(f[1]+d,u)]])}return c()}function xN(e){return VQ((us+e)/2)}function Fbt(e,t){var n=Kt(e),r=e===t?Ut(e):c3(n/Kt(t))/c3(xN(t)/xN(e)),i=n*bB(xN(e),r)/r;if(!r)return x6;function s(o,a){i>0?a<-us+Gt&&(a=-us+Gt):a>us-Gt&&(a=us-Gt);var l=i/bB(xN(a),r);return[l*Ut(r*o),i-l*Kt(r*o)]}return s.invert=function(o,a){var l=i-a,u=jc(r)*fl(o*o+l*l),c=Qc(o,ur(l))*jc(l);return l*r<0&&(c-=Hn*jc(o)*jc(l)),[c/r,2*xS(bB(i/u,1/r))-us]},s}function jbt(){return KQ(Fbt).scale(109.5).parallels([30,30])}function R3(e,t){return[e,t]}R3.invert=R3;function Bbt(){return pp(R3).scale(152.63)}function zbt(e,t){var n=Kt(e),r=e===t?Ut(e):(n-Kt(t))/(t-e),i=n/r+e;if(ur(r)<Gt)return R3;function s(o,a){var l=i-a,u=r*o;return[l*Ut(u),i-l*Kt(u)]}return s.invert=function(o,a){var l=i-a,u=Qc(o,ur(l))*jc(l);return l*r<0&&(u-=Hn*jc(o)*jc(l)),[u/r,i-jc(r)*fl(o*o+l*l)]},s}function Ubt(){return KQ(zbt).scale(131.154).center([0,13.9389])}var X2=1.340264,Q2=-.081106,J2=893e-6,Z2=.003796,P3=fl(3)/2,Vbt=12;function YAe(e,t){var n=ou(P3*Ut(t)),r=n*n,i=r*r*r;return[e*Kt(n)/(P3*(X2+3*Q2*r+i*(7*J2+9*Z2*r))),n*(X2+Q2*r+i*(J2+Z2*r))]}YAe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,l;s<Vbt&&(a=n*(X2+Q2*r+i*(J2+Z2*r))-t,l=X2+3*Q2*r+i*(7*J2+9*Z2*r),n-=o=a/l,r=n*n,i=r*r*r,!(ur(o)<l3));++s);return[P3*e*(X2+3*Q2*r+i*(7*J2+9*Z2*r))/Kt(n),ou(Ut(n)/P3)]};function Hbt(){return pp(YAe).scale(177.158)}function KAe(e,t){var n=Kt(t),r=Kt(e)*n;return[n*Ut(e)/r,Ut(t)/r]}KAe.invert=Qk(xS);function qbt(){return pp(KAe).scale(144.049).clipAngle(60)}function Wbt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,l=null,u,c,d,f=1,h=1,p=w6({point:function(w,E){var x=_([w,E]);this.stream.point(x[0],x[1])}}),m=aI,g,y;function b(){return f=e*r,h=e*i,g=y=null,_}function _(w){var E=w[0]*f,x=w[1]*h;if(s){var S=x*o-E*a;E=E*o+x*a,x=S}return[E+t,x+n]}return _.invert=function(w){var E=w[0]-t,x=w[1]-n;if(s){var S=x*o+E*a;E=E*o-x*a,x=S}return[E/f,x/h]},_.stream=function(w){return g&&y===w?g:g=p(m(y=w))},_.postclip=function(w){return arguments.length?(m=w,l=u=c=d=null,b()):m},_.clipExtent=function(w){return arguments.length?(m=w==null?(l=u=c=d=null,aI):kAe(l=+w[0][0],u=+w[0][1],c=+w[1][0],d=+w[1][1]),b()):l==null?null:[[l,u],[c,d]]},_.scale=function(w){return arguments.length?(e=+w,b()):e},_.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],b()):[t,n]},_.angle=function(w){return arguments.length?(s=w%360*jn,a=Ut(s),o=Kt(s),b()):s*bs},_.reflectX=function(w){return arguments.length?(r=w?-1:1,b()):r<0},_.reflectY=function(w){return arguments.length?(i=w?-1:1,b()):i<0},_.fitExtent=function(w,E){return E6(_,w,E)},_.fitSize=function(w,E){return WQ(_,w,E)},_.fitWidth=function(w,E){return GQ(_,w,E)},_.fitHeight=function(w,E){return YQ(_,w,E)},_}function XAe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}XAe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(ur(i)>Gt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Gbt(){return pp(XAe).scale(175.295)}function QAe(e,t){return[Kt(t)*Ut(e),Ut(t)]}QAe.invert=Qk(ou);function Ybt(){return pp(QAe).scale(249.5).clipAngle(90+Gt)}function JAe(e,t){var n=Kt(t),r=1+Kt(e)*n;return[n*Ut(e)/r,Ut(t)/r]}JAe.invert=Qk(function(e){return 2*xS(e)});function Kbt(){return pp(JAe).scale(250).clipAngle(142)}function ZAe(e,t){return[c3(VQ((us+t)/2)),-e]}ZAe.invert=function(e,t){return[-t,2*xS(hAe(e))-us]};function Xbt(){var e=GAe(ZAe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Qbt(e,t){return e.parent===t.parent?1:2}function Jbt(e){return e.reduce(Zbt,0)/e.length}function Zbt(e,t){return e+t.x}function e_t(e){return 1+e.reduce(t_t,0)}function t_t(e,t){return Math.max(e,t.y)}function n_t(e){for(var t;t=e.children;)e=t[0];return e}function r_t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function i_t(){var e=Qbt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(f){var h=f.children;h?(f.x=Jbt(h),f.y=e_t(h)):(f.x=o?a+=e(f,o):0,f.y=0,o=f)});var l=n_t(s),u=r_t(s),c=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return s.eachAfter(r?function(f){f.x=(f.x-s.x)*t,f.y=(s.y-f.y)*n}:function(f){f.x=(f.x-c)/(d-c)*t,f.y=(1-(s.y?f.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function s_t(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function o_t(){return this.eachAfter(s_t)}function a_t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function l_t(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function u_t(e,t){for(var n=this,r=[n],i=[],s,o,a,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function c_t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function d_t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function f_t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function h_t(e){for(var t=this,n=p_t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function p_t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function m_t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function g_t(){return Array.from(this)}function y_t(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function v_t(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*b_t(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function XQ(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=E_t)):t===void 0&&(t=w_t);for(var n=new nx(e),r,i=[n],s,o,a,l;r=i.pop();)if((o=t(r.data))&&(l=(o=Array.from(o)).length))for(r.children=o,a=l-1;a>=0;--a)i.push(s=o[a]=new nx(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(eIe)}function __t(){return XQ(this).eachBefore(x_t)}function w_t(e){return e.children}function E_t(e){return Array.isArray(e)?e[1]:null}function x_t(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function eIe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function nx(e){this.data=e,this.depth=this.height=0,this.parent=null}nx.prototype=XQ.prototype={constructor:nx,count:o_t,each:a_t,eachAfter:u_t,eachBefore:l_t,find:c_t,sum:d_t,sort:f_t,path:h_t,ancestors:m_t,descendants:g_t,leaves:y_t,links:v_t,copy:__t,[Symbol.iterator]:b_t};function nD(e){return e==null?null:tIe(e)}function tIe(e){if(typeof e!="function")throw new Error;return e}function a1(){return 0}function iw(e){return function(){return e}}const S_t=1664525,T_t=1013904223,ofe=4294967296;function C_t(){let e=1;return()=>(e=(S_t*e+T_t)%ofe)/ofe}function A_t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function I_t(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function k_t(e,t){for(var n=0,r=(e=I_t(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&nIe(o,s)?++n:(o=P_t(i=R_t(i,s)),n=0);return o}function R_t(e,t){var n,r;if(SB(t,e))return[t];for(n=0;n<e.length;++n)if(SN(t,e[n])&&SB(FC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(SN(FC(e[n],e[r]),t)&&SN(FC(e[n],t),e[r])&&SN(FC(e[r],t),e[n])&&SB(rIe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function SN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function nIe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function SB(e,t){for(var n=0;n<t.length;++n)if(!nIe(e,t[n]))return!1;return!0}function P_t(e){switch(e.length){case 1:return N_t(e[0]);case 2:return FC(e[0],e[1]);case 3:return rIe(e[0],e[1],e[2])}}function N_t(e){return{x:e.x,y:e.y,r:e.r}}function FC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,l=s-n,u=o-r,c=a-i,d=Math.sqrt(l*l+u*u);return{x:(n+s+l/d*c)/2,y:(r+o+u/d*c)/2,r:(d+i+a)/2}}function rIe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,l=t.r,u=n.x,c=n.y,d=n.r,f=r-o,h=r-u,p=i-a,m=i-c,g=l-s,y=d-s,b=r*r+i*i-s*s,_=b-o*o-a*a+l*l,w=b-u*u-c*c+d*d,E=h*p-f*m,x=(p*w-m*_)/(E*2)-r,S=(m*g-p*y)/E,C=(h*_-f*w)/(E*2)-i,A=(f*y-h*g)/E,R=S*S+A*A-1,P=2*(s+x*S+C*A),L=x*x+C*C-s*s,k=-(Math.abs(R)>1e-6?(P+Math.sqrt(P*P-4*R*L))/(2*R):L/P);return{x:r+x+S*k,y:i+C+A*k,r:k}}function afe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,l,u=r*r+o*o;u?(s=t.r+n.r,s*=s,l=e.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),a=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(u+s-l)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function lfe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function ufe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function TN(e){this._=e,this.next=null,this.previous=null}function O_t(e,t){if(!(s=(e=A_t(e)).length))return 0;var n,r,i,s,o,a,l,u,c,d,f;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;afe(r,n,i=e[2]),n=new TN(n),r=new TN(r),i=new TN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<s;++l){afe(n._,r._,i=e[l]),i=new TN(i),u=r.next,c=n.previous,d=r._.r,f=n._.r;do if(d<=f){if(lfe(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(lfe(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=ufe(n);(i=i.next)!==r;)(a=ufe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=k_t(n,t),l=0;l<s;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function D_t(e){return Math.sqrt(e.value)}function M_t(){var e=null,t=1,n=1,r=a1;function i(s){const o=C_t();return s.x=t/2,s.y=n/2,e?s.eachBefore(cfe(e)).eachAfter(TB(r,.5,o)).eachBefore(dfe(1)):s.eachBefore(cfe(D_t)).eachAfter(TB(a1,1,o)).eachAfter(TB(r,s.r/Math.min(t,n),o)).eachBefore(dfe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=nD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:iw(+s),i):r},i}function cfe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function TB(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=O_t(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function dfe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function iIe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Jk(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(r-t)/e.value;++a<l;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*u}function $_t(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(iIe),o}function s(o,a){return function(l){l.children&&Jk(l,l.x0,o*(l.depth+1)/a,l.x1,o*(l.depth+2)/a);var u=l.x0,c=l.y0,d=l.x1-n,f=l.y1-n;d<u&&(u=d=(u+d)/2),f<c&&(c=f=(c+f)/2),l.x0=u,l.y0=c,l.x1=d,l.y1=f}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var L_t={depth:-1},ffe={},CB={};function F_t(e){return e.id}function j_t(e){return e.parentId}function hfe(){var e=F_t,t=j_t,n;function r(i){var s=Array.from(i),o=e,a=t,l,u,c,d,f,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>B_t(n(w,E,i))),b=y.map(pfe),_=new Set(y).add("");for(const w of b)_.has(w)||(_.add(w),y.push(w),b.push(pfe(w)),s.push(CB));o=(w,E)=>y[E],a=(w,E)=>b[E]}for(c=0,l=s.length;c<l;++c)u=s[c],h=s[c]=new nx(u),(p=o(u,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?ffe:h)),(p=a(u,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<l;++c)if(h=s[c],p=h.parent){if(f=g.get(p),!f)throw new Error("missing: "+p);if(f===ffe)throw new Error("ambiguous: "+p);f.children?f.children.push(h):f.children=[h],h.parent=f}else{if(d)throw new Error("multiple roots");d=h}if(!d)throw new Error("no root");if(n!=null){for(;d.data===CB&&d.children.length===1;)d=d.children[0],--l;for(let y=s.length-1;y>=0&&(h=s[y],h.data===CB);--y)h.data=null}if(d.parent=L_t,d.eachBefore(function(y){y.depth=y.parent.depth+1,--l}).eachBefore(eIe),d.parent=null,l>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=nD(i),r):e},r.parentId=function(i){return arguments.length?(t=nD(i),r):t},r.path=function(i){return arguments.length?(n=nD(i),r):n},r}function B_t(e){e=`${e}`;let t=e.length;return OV(e,t-1)&&!OV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function pfe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!OV(e,t););return e.slice(0,t)}function OV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function z_t(e,t){return e.parent===t.parent?1:2}function AB(e){var t=e.children;return t?t[0]:e.t}function IB(e){var t=e.children;return t?t[t.length-1]:e.t}function U_t(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function V_t(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function H_t(e,t,n){return e.a.parent===t.parent?e.a:n}function rD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}rD.prototype=Object.create(nx.prototype);function q_t(e){for(var t=new rD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new rD(s[o],o)),i.parent=n;return(t.parent=new rD(null,0)).children=[t],t}function W_t(){var e=z_t,t=1,n=1,r=null;function i(u){var c=q_t(u);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)u.eachBefore(l);else{var d=u,f=u,h=u;u.eachBefore(function(b){b.x<d.x&&(d=b),b.x>f.x&&(f=b),b.depth>h.depth&&(h=b)});var p=d===f?1:e(d,f)/2,m=p-d.x,g=t/(f.x+p+m),y=n/(h.depth||1);u.eachBefore(function(b){b.x=(b.x+m)*g,b.y=b.depth*y})}return u}function s(u){var c=u.children,d=u.parent.children,f=u.i?d[u.i-1]:null;if(c){V_t(u);var h=(c[0].z+c[c.length-1].z)/2;f?(u.z=f.z+e(u._,f._),u.m=u.z-h):u.z=h}else f&&(u.z=f.z+e(u._,f._));u.parent.A=a(u,f,u.parent.A||d[0])}function o(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function a(u,c,d){if(c){for(var f=u,h=u,p=c,m=f.parent.children[0],g=f.m,y=h.m,b=p.m,_=m.m,w;p=IB(p),f=AB(f),p&&f;)m=AB(m),h=IB(h),h.a=u,w=p.z+b-f.z-g+e(p._,f._),w>0&&(U_t(H_t(p,u,d),u,w),g+=w,y+=w),b+=p.m,g+=f.m,_+=m.m,y+=h.m;p&&!IB(h)&&(h.t=p,h.m+=b-y),f&&!AB(m)&&(m.t=f,m.m+=g-_,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function S6(e,t,n,r,i){for(var s=e.children,o,a=-1,l=s.length,u=e.value&&(i-n)/e.value;++a<l;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*u}var sIe=(1+Math.sqrt(5))/2;function oIe(e,t,n,r,i,s){for(var o=[],a=t.children,l,u,c=0,d=0,f=a.length,h,p,m=t.value,g,y,b,_,w,E,x;c<f;){h=i-n,p=s-r;do g=a[d++].value;while(!g&&d<f);for(y=b=g,E=Math.max(p/h,h/p)/(m*e),x=g*g*E,w=Math.max(b/x,x/y);d<f;++d){if(g+=u=a[d].value,u<y&&(y=u),u>b&&(b=u),x=g*g*E,_=Math.max(b/x,x/y),_>w){g-=u;break}w=_}o.push(l={value:g,dice:h<p,children:a.slice(c,d)}),l.dice?Jk(l,n,r,i,m?r+=p*g/m:s):S6(l,n,r,m?n+=h*g/m:i,s),m-=g,c=d}return o}const aIe=function e(t){function n(r,i,s,o,a){oIe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(sIe);function G_t(){var e=aIe,t=!1,n=1,r=1,i=[0],s=a1,o=a1,a=a1,l=a1,u=a1;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],t&&f.eachBefore(iIe),f}function d(f){var h=i[f.depth],p=f.x0+h,m=f.y0+h,g=f.x1-h,y=f.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),f.x0=p,f.y0=m,f.x1=g,f.y1=y,f.children&&(h=i[f.depth+1]=s(f)/2,p+=u(f)-h,m+=o(f)-h,g-=a(f)-h,y-=l(f)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(f,p,m,g,y))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(e=tIe(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:iw(+f),c):s},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(o=typeof f=="function"?f:iw(+f),c):o},c.paddingRight=function(f){return arguments.length?(a=typeof f=="function"?f:iw(+f),c):a},c.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:iw(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:iw(+f),c):u},c}function Y_t(e,t,n,r,i){var s=e.children,o,a=s.length,l,u=new Array(a+1);for(u[0]=l=o=0;o<a;++o)u[o+1]=l+=s[o].value;c(0,a,e.value,t,n,r,i);function c(d,f,h,p,m,g,y){if(d>=f-1){var b=s[d];b.x0=p,b.y0=m,b.x1=g,b.y1=y;return}for(var _=u[d],w=h/2+_,E=d+1,x=f-1;E<x;){var S=E+x>>>1;u[S]<w?E=S+1:x=S}w-u[E-1]<u[E]-w&&d+1<E&&--E;var C=u[E]-_,A=h-C;if(g-p>y-m){var R=h?(p*A+g*C)/h:g;c(d,E,C,p,m,R,y),c(E,f,A,R,m,g,y)}else{var P=h?(m*A+y*C)/h:y;c(d,E,C,p,m,g,P),c(E,f,A,p,P,g,y)}}}function K_t(e,t,n,r,i){(e.depth&1?S6:Jk)(e,t,n,r,i)}const X_t=function e(t){function n(r,i,s,o,a){if((l=r._squarify)&&l.ratio===t)for(var l,u,c,d,f=-1,h,p=l.length,m=r.value;++f<p;){for(u=l[f],c=u.children,d=u.value=0,h=c.length;d<h;++d)u.value+=c[d].value;u.dice?Jk(u,i,s,o,m?s+=(a-s)*u.value/m:a):S6(u,i,s,m?i+=(o-i)*u.value/m:o,a),m-=u.value}else r._squarify=l=oIe(t,r,i,s,o,a),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(sIe);function mp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Zy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const DV=Symbol("implicit");function Zk(){var e=new tV,t=[],n=[],r=DV;function i(s){let o=e.get(s);if(o===void 0){if(r!==DV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new tV;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Zk(t,n).unknown(r)},mp.apply(i,arguments),i}function Q_t(e){return function(){return e}}function MV(e){return+e}var mfe=[0,1];function Hl(e){return e}function $V(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Q_t(isNaN(t)?NaN:.5)}function J_t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Z_t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=$V(i,r),s=n(o,s)):(r=$V(r,i),s=n(s,o)),function(a){return s(r(a))}}function ewt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=$V(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var l=iy(e,a,1,r)-1;return s[l](i[l](a))}}function eR(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function T6(){var e=mfe,t=mfe,n=Jy,r,i,s,o=Hl,a,l,u;function c(){var f=Math.min(e.length,t.length);return o!==Hl&&(o=J_t(e[0],e[f-1])),a=f>2?ewt:Z_t,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=a(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(i((u||(u=a(t,e.map(r),Bd)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,MV),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=Yk,c()},d.clamp=function(f){return arguments.length?(o=f?!0:Hl,c()):o!==Hl},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,h){return r=f,i=h,c()}}function lIe(){return T6()(Hl,Hl)}function uIe(e,t,n,r){var i=sy(e,t,n),s;switch(r=ab(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=dAe(i,o))&&(r.precision=s),UQ(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=fAe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=cAe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Mh(r)}function Kb(e){var t=e.domain;return e.ticks=function(n){var r=t();return rV(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return uIe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=i,i=s,s=u);c-- >0;){if(u=iV(o,a,n),u===l)return r[i]=o,r[s]=a,t(r);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return e},e}function Dc(){var e=lIe();return e.copy=function(){return eR(e,Dc())},mp.apply(e,arguments),Kb(e)}function cIe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,MV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return cIe(e).unknown(t)},e=arguments.length?Array.from(e,MV):[0,1],Kb(n)}function dIe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function gfe(e){return Math.log(e)}function yfe(e){return Math.exp(e)}function twt(e){return-Math.log(-e)}function nwt(e){return-Math.exp(-e)}function rwt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function iwt(e){return e===10?rwt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function swt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function vfe(e){return(t,n)=>-e(-t,n)}function QQ(e){const t=e(gfe,yfe),n=t.domain;let r=10,i,s;function o(){return i=swt(r),s=iwt(r),n()[0]<0?(i=vfe(i),s=vfe(s),e(twt,nwt)):e(gfe,yfe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=i(u),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-f<g){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(p=1;p<r;++p)if(m=f<0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}}else for(;f<=h;++f)for(p=r-1;p>=1;--p)if(m=f>0?p/s(-f):p*s(f),!(m<u)){if(m>c)break;y.push(m)}y.length*2<g&&(y=rV(u,c,g))}else y=rV(f,h,Math.min(h-f,g)).map(s);return d?y.reverse():y},t.tickFormat=(a,l)=>{if(a==null&&(a=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=ab(l)).precision==null&&(l.trim=!0),l=Mh(l)),a===1/0)return l;const u=Math.max(1,r*a/t.ticks().length);return c=>{let d=c/s(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},t.nice=()=>n(dIe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function fIe(){const e=QQ(T6()).domain([1,10]);return e.copy=()=>eR(e,fIe()).base(e.base()),mp.apply(e,arguments),e}function bfe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function _fe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function JQ(e){var t=1,n=e(bfe(t),_fe(t));return n.constant=function(r){return arguments.length?e(bfe(t=+r),_fe(t)):t},Kb(n)}function hIe(){var e=JQ(T6());return e.copy=function(){return eR(e,hIe()).constant(e.constant())},mp.apply(e,arguments)}function wfe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function owt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function awt(e){return e<0?-e*e:e*e}function ZQ(e){var t=e(Hl,Hl),n=1;function r(){return n===1?e(Hl,Hl):n===.5?e(owt,awt):e(wfe(n),wfe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Kb(t)}function eJ(){var e=ZQ(T6());return e.copy=function(){return eR(e,eJ()).exponent(e.exponent())},mp.apply(e,arguments),e}function lwt(){return eJ.apply(null,arguments).exponent(.5)}function pIe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=T2e(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[iy(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(bm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return pIe().domain(e).range(t).unknown(r)},mp.apply(s,arguments)}function mIe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(l){return l!=null&&l<=l?i[iy(r,l,0,n)]:s}function a(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,a()):[e,t]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,a()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return mIe().domain([e,t]).range(i).unknown(s)},mp.apply(Kb(o),arguments)}function gIe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[iy(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return gIe().domain(e).range(t).unknown(n)},mp.apply(i,arguments)}const kB=new Date,RB=new Date;function so(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const l=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return l;let u;do l.push(u=new Date(+s)),t(s,a),e(s);while(u<s&&s<o);return l},i.filter=s=>so(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(kB.setTime(+s),RB.setTime(+o),e(kB),e(RB),Math.floor(n(kB,RB))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const rx=so(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);rx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?so(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):rx);rx.range;const om=1e3,Bc=om*60,am=Bc*60,Bm=am*24,tJ=Bm*7,Efe=Bm*30,PB=Bm*365,lm=so(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*om)},(e,t)=>(t-e)/om,e=>e.getUTCSeconds());lm.range;const C6=so(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*om)},(e,t)=>{e.setTime(+e+t*Bc)},(e,t)=>(t-e)/Bc,e=>e.getMinutes());C6.range;const A6=so(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bc)},(e,t)=>(t-e)/Bc,e=>e.getUTCMinutes());A6.range;const I6=so(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*om-e.getMinutes()*Bc)},(e,t)=>{e.setTime(+e+t*am)},(e,t)=>(t-e)/am,e=>e.getHours());I6.range;const k6=so(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*am)},(e,t)=>(t-e)/am,e=>e.getUTCHours());k6.range;const wm=so(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bc)/Bm,e=>e.getDate()-1);wm.range;const j0=so(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bm,e=>e.getUTCDate()-1);j0.range;const yIe=so(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Bm,e=>Math.floor(e/Bm));yIe.range;function Xb(e){return so(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Bc)/tJ)}const SS=Xb(0),N3=Xb(1),uwt=Xb(2),cwt=Xb(3),ix=Xb(4),dwt=Xb(5),fwt=Xb(6);SS.range;N3.range;uwt.range;cwt.range;ix.range;dwt.range;fwt.range;function Qb(e){return so(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/tJ)}const TS=Qb(0),O3=Qb(1),hwt=Qb(2),pwt=Qb(3),sx=Qb(4),mwt=Qb(5),gwt=Qb(6);TS.range;O3.range;hwt.range;pwt.range;sx.range;mwt.range;gwt.range;const cI=so(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());cI.range;const dI=so(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());dI.range;const Gh=so(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Gh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:so(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Gh.range;const Yh=so(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Yh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:so(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Yh.range;function vIe(e,t,n,r,i,s){const o=[[lm,1,om],[lm,5,5*om],[lm,15,15*om],[lm,30,30*om],[s,1,Bc],[s,5,5*Bc],[s,15,15*Bc],[s,30,30*Bc],[i,1,am],[i,3,3*am],[i,6,6*am],[i,12,12*am],[r,1,Bm],[r,2,2*Bm],[n,1,tJ],[t,1,Efe],[t,3,3*Efe],[e,1,PB]];function a(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),p=h?h.range(u,+c+1):[];return f?p.reverse():p}function l(u,c,d){const f=Math.abs(c-u)/d,h=wS(([,,g])=>g).right(o,f);if(h===o.length)return e.every(sy(u/PB,c/PB,d));if(h===0)return rx.every(Math.max(sy(u,c,d),1));const[p,m]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return p.every(m)}return[a,l]}const[ywt,vwt]=vIe(Yh,dI,TS,yIe,k6,A6),[bwt,_wt]=vIe(Gh,cI,SS,wm,I6,C6);function NB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function OB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function BT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function bIe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,l=e.shortMonths,u=zT(i),c=UT(i),d=zT(s),f=UT(s),h=zT(o),p=UT(o),m=zT(a),g=UT(a),y=zT(l),b=UT(l),_={a:B,A:z,b:U,B:O,c:null,d:Ife,e:Ife,f:Vwt,g:Zwt,G:tEt,H:Bwt,I:zwt,j:Uwt,L:_Ie,m:Hwt,M:qwt,p:V,q:W,Q:Pfe,s:Nfe,S:Wwt,u:Gwt,U:Ywt,V:Kwt,w:Xwt,W:Qwt,x:null,X:null,y:Jwt,Y:eEt,Z:nEt,"%":Rfe},w={a:j,A:H,b:G,B:J,c:null,d:kfe,e:kfe,f:oEt,g:gEt,G:vEt,H:rEt,I:iEt,j:sEt,L:EIe,m:aEt,M:lEt,p:se,q:ie,Q:Pfe,s:Nfe,S:uEt,u:cEt,U:dEt,V:fEt,w:hEt,W:pEt,x:null,X:null,y:mEt,Y:yEt,Z:bEt,"%":Rfe},E={a:R,A:P,b:L,B:k,c:$,d:Cfe,e:Cfe,f:$wt,g:Tfe,G:Sfe,H:Afe,I:Afe,j:Nwt,L:Mwt,m:Pwt,M:Owt,p:A,q:Rwt,Q:Fwt,s:jwt,S:Dwt,u:Twt,U:Cwt,V:Awt,w:Swt,W:Iwt,x:D,X:M,y:Tfe,Y:Sfe,Z:kwt,"%":Lwt};_.x=x(n,_),_.X=x(r,_),_.c=x(t,_),w.x=x(n,w),w.X=x(r,w),w.c=x(t,w);function x(ne,ue){return function(xe){var de=[],Ke=-1,je=0,Oe=ne.length,Fe,Ae,fe;for(xe instanceof Date||(xe=new Date(+xe));++Ke<Oe;)ne.charCodeAt(Ke)===37&&(de.push(ne.slice(je,Ke)),(Ae=xfe[Fe=ne.charAt(++Ke)])!=null?Fe=ne.charAt(++Ke):Ae=Fe==="e"?" ":"0",(fe=ue[Fe])&&(Fe=fe(xe,Ae)),de.push(Fe),je=Ke+1);return de.push(ne.slice(je,Ke)),de.join("")}}function S(ne,ue){return function(xe){var de=BT(1900,void 0,1),Ke=C(de,ne,xe+="",0),je,Oe;if(Ke!=xe.length)return null;if("Q"in de)return new Date(de.Q);if("s"in de)return new Date(de.s*1e3+("L"in de?de.L:0));if(ue&&!("Z"in de)&&(de.Z=0),"p"in de&&(de.H=de.H%12+de.p*12),de.m===void 0&&(de.m="q"in de?de.q:0),"V"in de){if(de.V<1||de.V>53)return null;"w"in de||(de.w=1),"Z"in de?(je=OB(BT(de.y,0,1)),Oe=je.getUTCDay(),je=Oe>4||Oe===0?O3.ceil(je):O3(je),je=j0.offset(je,(de.V-1)*7),de.y=je.getUTCFullYear(),de.m=je.getUTCMonth(),de.d=je.getUTCDate()+(de.w+6)%7):(je=NB(BT(de.y,0,1)),Oe=je.getDay(),je=Oe>4||Oe===0?N3.ceil(je):N3(je),je=wm.offset(je,(de.V-1)*7),de.y=je.getFullYear(),de.m=je.getMonth(),de.d=je.getDate()+(de.w+6)%7)}else("W"in de||"U"in de)&&("w"in de||(de.w="u"in de?de.u%7:"W"in de?1:0),Oe="Z"in de?OB(BT(de.y,0,1)).getUTCDay():NB(BT(de.y,0,1)).getDay(),de.m=0,de.d="W"in de?(de.w+6)%7+de.W*7-(Oe+5)%7:de.w+de.U*7-(Oe+6)%7);return"Z"in de?(de.H+=de.Z/100|0,de.M+=de.Z%100,OB(de)):NB(de)}}function C(ne,ue,xe,de){for(var Ke=0,je=ue.length,Oe=xe.length,Fe,Ae;Ke<je;){if(de>=Oe)return-1;if(Fe=ue.charCodeAt(Ke++),Fe===37){if(Fe=ue.charAt(Ke++),Ae=E[Fe in xfe?ue.charAt(Ke++):Fe],!Ae||(de=Ae(ne,xe,de))<0)return-1}else if(Fe!=xe.charCodeAt(de++))return-1}return de}function A(ne,ue,xe){var de=u.exec(ue.slice(xe));return de?(ne.p=c.get(de[0].toLowerCase()),xe+de[0].length):-1}function R(ne,ue,xe){var de=h.exec(ue.slice(xe));return de?(ne.w=p.get(de[0].toLowerCase()),xe+de[0].length):-1}function P(ne,ue,xe){var de=d.exec(ue.slice(xe));return de?(ne.w=f.get(de[0].toLowerCase()),xe+de[0].length):-1}function L(ne,ue,xe){var de=y.exec(ue.slice(xe));return de?(ne.m=b.get(de[0].toLowerCase()),xe+de[0].length):-1}function k(ne,ue,xe){var de=m.exec(ue.slice(xe));return de?(ne.m=g.get(de[0].toLowerCase()),xe+de[0].length):-1}function $(ne,ue,xe){return C(ne,t,ue,xe)}function D(ne,ue,xe){return C(ne,n,ue,xe)}function M(ne,ue,xe){return C(ne,r,ue,xe)}function B(ne){return o[ne.getDay()]}function z(ne){return s[ne.getDay()]}function U(ne){return l[ne.getMonth()]}function O(ne){return a[ne.getMonth()]}function V(ne){return i[+(ne.getHours()>=12)]}function W(ne){return 1+~~(ne.getMonth()/3)}function j(ne){return o[ne.getUTCDay()]}function H(ne){return s[ne.getUTCDay()]}function G(ne){return l[ne.getUTCMonth()]}function J(ne){return a[ne.getUTCMonth()]}function se(ne){return i[+(ne.getUTCHours()>=12)]}function ie(ne){return 1+~~(ne.getUTCMonth()/3)}return{format:function(ne){var ue=x(ne+="",_);return ue.toString=function(){return ne},ue},parse:function(ne){var ue=S(ne+="",!1);return ue.toString=function(){return ne},ue},utcFormat:function(ne){var ue=x(ne+="",w);return ue.toString=function(){return ne},ue},utcParse:function(ne){var ue=S(ne+="",!0);return ue.toString=function(){return ne},ue}}}var xfe={"-":"",_:" ",0:"0"},To=/^\s*\d+/,wwt=/^%/,Ewt=/[\\^$*+?|[\]().{}]/g;function kr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function xwt(e){return e.replace(Ewt,"\\$&")}function zT(e){return new RegExp("^(?:"+e.map(xwt).join("|")+")","i")}function UT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Swt(e,t,n){var r=To.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Twt(e,t,n){var r=To.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Cwt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Awt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Iwt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Sfe(e,t,n){var r=To.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Tfe(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function kwt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Rwt(e,t,n){var r=To.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Pwt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Cfe(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Nwt(e,t,n){var r=To.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Afe(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Owt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Dwt(e,t,n){var r=To.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Mwt(e,t,n){var r=To.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function $wt(e,t,n){var r=To.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Lwt(e,t,n){var r=wwt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Fwt(e,t,n){var r=To.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function jwt(e,t,n){var r=To.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Ife(e,t){return kr(e.getDate(),t,2)}function Bwt(e,t){return kr(e.getHours(),t,2)}function zwt(e,t){return kr(e.getHours()%12||12,t,2)}function Uwt(e,t){return kr(1+wm.count(Gh(e),e),t,3)}function _Ie(e,t){return kr(e.getMilliseconds(),t,3)}function Vwt(e,t){return _Ie(e,t)+"000"}function Hwt(e,t){return kr(e.getMonth()+1,t,2)}function qwt(e,t){return kr(e.getMinutes(),t,2)}function Wwt(e,t){return kr(e.getSeconds(),t,2)}function Gwt(e){var t=e.getDay();return t===0?7:t}function Ywt(e,t){return kr(SS.count(Gh(e)-1,e),t,2)}function wIe(e){var t=e.getDay();return t>=4||t===0?ix(e):ix.ceil(e)}function Kwt(e,t){return e=wIe(e),kr(ix.count(Gh(e),e)+(Gh(e).getDay()===4),t,2)}function Xwt(e){return e.getDay()}function Qwt(e,t){return kr(N3.count(Gh(e)-1,e),t,2)}function Jwt(e,t){return kr(e.getFullYear()%100,t,2)}function Zwt(e,t){return e=wIe(e),kr(e.getFullYear()%100,t,2)}function eEt(e,t){return kr(e.getFullYear()%1e4,t,4)}function tEt(e,t){var n=e.getDay();return e=n>=4||n===0?ix(e):ix.ceil(e),kr(e.getFullYear()%1e4,t,4)}function nEt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+kr(t/60|0,"0",2)+kr(t%60,"0",2)}function kfe(e,t){return kr(e.getUTCDate(),t,2)}function rEt(e,t){return kr(e.getUTCHours(),t,2)}function iEt(e,t){return kr(e.getUTCHours()%12||12,t,2)}function sEt(e,t){return kr(1+j0.count(Yh(e),e),t,3)}function EIe(e,t){return kr(e.getUTCMilliseconds(),t,3)}function oEt(e,t){return EIe(e,t)+"000"}function aEt(e,t){return kr(e.getUTCMonth()+1,t,2)}function lEt(e,t){return kr(e.getUTCMinutes(),t,2)}function uEt(e,t){return kr(e.getUTCSeconds(),t,2)}function cEt(e){var t=e.getUTCDay();return t===0?7:t}function dEt(e,t){return kr(TS.count(Yh(e)-1,e),t,2)}function xIe(e){var t=e.getUTCDay();return t>=4||t===0?sx(e):sx.ceil(e)}function fEt(e,t){return e=xIe(e),kr(sx.count(Yh(e),e)+(Yh(e).getUTCDay()===4),t,2)}function hEt(e){return e.getUTCDay()}function pEt(e,t){return kr(O3.count(Yh(e)-1,e),t,2)}function mEt(e,t){return kr(e.getUTCFullYear()%100,t,2)}function gEt(e,t){return e=xIe(e),kr(e.getUTCFullYear()%100,t,2)}function yEt(e,t){return kr(e.getUTCFullYear()%1e4,t,4)}function vEt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?sx(e):sx.ceil(e),kr(e.getUTCFullYear()%1e4,t,4)}function bEt(){return"+0000"}function Rfe(){return"%"}function Pfe(e){return+e}function Nfe(e){return Math.floor(+e/1e3)}var L_,nJ,p0,tR,SIe;_Et({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _Et(e){return L_=bIe(e),nJ=L_.format,p0=L_.parse,tR=L_.utcFormat,SIe=L_.utcParse,L_}function wEt(e){return new Date(e)}function EEt(e){return e instanceof Date?+e:+new Date(+e)}function rJ(e,t,n,r,i,s,o,a,l,u){var c=lIe(),d=c.invert,f=c.domain,h=u(".%L"),p=u(":%S"),m=u("%I:%M"),g=u("%I %p"),y=u("%a %d"),b=u("%b %d"),_=u("%B"),w=u("%Y");function E(x){return(l(x)<x?h:a(x)<x?p:o(x)<x?m:s(x)<x?g:r(x)<x?i(x)<x?y:b:n(x)<x?_:w)(x)}return c.invert=function(x){return new Date(d(x))},c.domain=function(x){return arguments.length?f(Array.from(x,EEt)):f().map(wEt)},c.ticks=function(x){var S=f();return e(S[0],S[S.length-1],x??10)},c.tickFormat=function(x,S){return S==null?E:u(S)},c.nice=function(x){var S=f();return(!x||typeof x.range!="function")&&(x=t(S[0],S[S.length-1],x??10)),x?f(dIe(S,x)):c},c.copy=function(){return eR(c,rJ(e,t,n,r,i,s,o,a,l,u))},c}function ox(){return mp.apply(rJ(bwt,_wt,Gh,cI,SS,wm,I6,C6,lm,nJ).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xEt(){return mp.apply(rJ(ywt,vwt,Yh,dI,TS,j0,k6,A6,lm,tR).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function R6(){var e=0,t=1,n,r,i,s,o=Hl,a=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(s(d)-n)*i,a?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(a=!!d,u):a},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(f){var h,p;return arguments.length?([h,p]=f,o=d(h,p),u):[o(0),o(1)]}}return u.range=c(Jy),u.rangeRound=c(Yk),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return s=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function ev(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function iJ(){var e=Kb(R6()(Hl));return e.copy=function(){return ev(e,iJ())},Zy.apply(e,arguments)}function TIe(){var e=QQ(R6()).domain([1,10]);return e.copy=function(){return ev(e,TIe()).base(e.base())},Zy.apply(e,arguments)}function CIe(){var e=JQ(R6());return e.copy=function(){return ev(e,CIe()).constant(e.constant())},Zy.apply(e,arguments)}function sJ(){var e=ZQ(R6());return e.copy=function(){return ev(e,sJ()).exponent(e.exponent())},Zy.apply(e,arguments)}function SEt(){return sJ.apply(null,arguments).exponent(.5)}function P6(){var e=0,t=.5,n=1,r=1,i,s,o,a,l,u=Hl,c,d=!1,f;function h(m){return isNaN(m=+m)?f:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:l),u(d?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(d=!!m,h):d},h.interpolator=function(m){return arguments.length?(u=m,h):u};function p(m){return function(g){var y,b,_;return arguments.length?([y,b,_]=g,u=MQ(m,[y,b,_]),h):[u(0),u(.5),u(1)]}}return h.range=p(Jy),h.rangeRound=p(Yk),h.unknown=function(m){return arguments.length?(f=m,h):f},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),l=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function AIe(){var e=Kb(P6()(Hl));return e.copy=function(){return ev(e,AIe())},Zy.apply(e,arguments)}function IIe(){var e=QQ(P6()).domain([.1,1,10]);return e.copy=function(){return ev(e,IIe()).base(e.base())},Zy.apply(e,arguments)}function kIe(){var e=JQ(P6());return e.copy=function(){return ev(e,kIe()).constant(e.constant())},Zy.apply(e,arguments)}function oJ(){var e=ZQ(P6());return e.copy=function(){return ev(e,oJ()).exponent(e.exponent())},Zy.apply(e,arguments)}function TEt(){return oJ.apply(null,arguments).exponent(.5)}function gp(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const CEt=gp("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),AEt=gp("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),IEt=gp("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),kEt=gp("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),REt=gp("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),PEt=gp("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),NEt=gp("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),OEt=gp("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),DEt=gp("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),MEt=gp("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function jr(e){return function(){return e}}const Ofe=Math.abs,ha=Math.atan2,Cv=Math.cos,$Et=Math.max,DB=Math.min,Yf=Math.sin,x1=Math.sqrt,ya=1e-12,ax=Math.PI,D3=ax/2,RIe=2*ax;function LEt(e){return e>1?0:e<-1?ax:Math.acos(e)}function Dfe(e){return e>=1?D3:e<=-1?-D3:Math.asin(e)}function N6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new LQ(t)}function FEt(e){return e.innerRadius}function jEt(e){return e.outerRadius}function BEt(e){return e.startAngle}function zEt(e){return e.endAngle}function UEt(e){return e&&e.padAngle}function VEt(e,t,n,r,i,s,o,a){var l=n-e,u=r-t,c=o-i,d=a-s,f=d*l-c*u;if(!(f*f<ya))return f=(c*(t-s)-d*(e-i))/f,[e+f*l,t+f*u]}function CN(e,t,n,r,i,s,o){var a=e-n,l=t-r,u=(o?s:-s)/x1(a*a+l*l),c=u*l,d=-u*a,f=e+c,h=t+d,p=n+c,m=r+d,g=(f+p)/2,y=(h+m)/2,b=p-f,_=m-h,w=b*b+_*_,E=i-s,x=f*m-p*h,S=(_<0?-1:1)*x1($Et(0,E*E*w-x*x)),C=(x*_-b*S)/w,A=(-x*b-_*S)/w,R=(x*_+b*S)/w,P=(-x*b+_*S)/w,L=C-g,k=A-y,$=R-g,D=P-y;return L*L+k*k>$*$+D*D&&(C=R,A=P),{cx:C,cy:A,x01:-c,y01:-d,x11:C*(i/E-1),y11:A*(i/E-1)}}function HEt(){var e=FEt,t=jEt,n=jr(0),r=null,i=BEt,s=zEt,o=UEt,a=null,l=N6(u);function u(){var c,d,f=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-D3,m=s.apply(this,arguments)-D3,g=Ofe(m-p),y=m>p;if(a||(a=c=l()),h<f&&(d=h,h=f,f=d),!(h>ya))a.moveTo(0,0);else if(g>RIe-ya)a.moveTo(h*Cv(p),h*Yf(p)),a.arc(0,0,h,p,m,!y),f>ya&&(a.moveTo(f*Cv(m),f*Yf(m)),a.arc(0,0,f,m,p,y));else{var b=p,_=m,w=p,E=m,x=g,S=g,C=o.apply(this,arguments)/2,A=C>ya&&(r?+r.apply(this,arguments):x1(f*f+h*h)),R=DB(Ofe(h-f)/2,+n.apply(this,arguments)),P=R,L=R,k,$;if(A>ya){var D=Dfe(A/f*Yf(C)),M=Dfe(A/h*Yf(C));(x-=D*2)>ya?(D*=y?1:-1,w+=D,E-=D):(x=0,w=E=(p+m)/2),(S-=M*2)>ya?(M*=y?1:-1,b+=M,_-=M):(S=0,b=_=(p+m)/2)}var B=h*Cv(b),z=h*Yf(b),U=f*Cv(E),O=f*Yf(E);if(R>ya){var V=h*Cv(_),W=h*Yf(_),j=f*Cv(w),H=f*Yf(w),G;if(g<ax)if(G=VEt(B,z,j,H,V,W,U,O)){var J=B-G[0],se=z-G[1],ie=V-G[0],ne=W-G[1],ue=1/Yf(LEt((J*ie+se*ne)/(x1(J*J+se*se)*x1(ie*ie+ne*ne)))/2),xe=x1(G[0]*G[0]+G[1]*G[1]);P=DB(R,(f-xe)/(ue-1)),L=DB(R,(h-xe)/(ue+1))}else P=L=0}S>ya?L>ya?(k=CN(j,H,B,z,h,L,y),$=CN(V,W,U,O,h,L,y),a.moveTo(k.cx+k.x01,k.cy+k.y01),L<R?a.arc(k.cx,k.cy,L,ha(k.y01,k.x01),ha($.y01,$.x01),!y):(a.arc(k.cx,k.cy,L,ha(k.y01,k.x01),ha(k.y11,k.x11),!y),a.arc(0,0,h,ha(k.cy+k.y11,k.cx+k.x11),ha($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,L,ha($.y11,$.x11),ha($.y01,$.x01),!y))):(a.moveTo(B,z),a.arc(0,0,h,b,_,!y)):a.moveTo(B,z),!(f>ya)||!(x>ya)?a.lineTo(U,O):P>ya?(k=CN(U,O,V,W,f,-P,y),$=CN(B,z,j,H,f,-P,y),a.lineTo(k.cx+k.x01,k.cy+k.y01),P<R?a.arc(k.cx,k.cy,P,ha(k.y01,k.x01),ha($.y01,$.x01),!y):(a.arc(k.cx,k.cy,P,ha(k.y01,k.x01),ha(k.y11,k.x11),!y),a.arc(0,0,f,ha(k.cy+k.y11,k.cx+k.x11),ha($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,P,ha($.y11,$.x11),ha($.y01,$.x01),!y))):a.arc(0,0,f,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-ax/2;return[Cv(d)*c,Yf(d)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:jr(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:jr(+c),u):t},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:jr(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:jr(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:jr(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:jr(+c),u):s},u.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:jr(+c),u):o},u.context=function(c){return arguments.length?(a=c??null,u):a},u}function PIe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function NIe(e){this._context=e}NIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function aJ(e){return new NIe(e)}function OIe(e){return e[0]}function DIe(e){return e[1]}function cE(e,t){var n=jr(!0),r=null,i=aJ,s=null,o=N6(a);e=typeof e=="function"?e:e===void 0?OIe:jr(e),t=typeof t=="function"?t:t===void 0?DIe:jr(t);function a(l){var u,c=(l=PIe(l)).length,d,f=!1,h;for(r==null&&(s=i(h=o())),u=0;u<=c;++u)!(u<c&&n(d=l[u],u,l))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+e(d,u,l),+t(d,u,l));if(h)return s=null,h+""||null}return a.x=function(l){return arguments.length?(e=typeof l=="function"?l:jr(+l),a):e},a.y=function(l){return arguments.length?(t=typeof l=="function"?l:jr(+l),a):t},a.defined=function(l){return arguments.length?(n=typeof l=="function"?l:jr(!!l),a):n},a.curve=function(l){return arguments.length?(i=l,r!=null&&(s=i(r)),a):i},a.context=function(l){return arguments.length?(l==null?r=s=null:s=i(r=l),a):r},a}function O6(e,t,n){var r=null,i=jr(!0),s=null,o=aJ,a=null,l=N6(u);e=typeof e=="function"?e:e===void 0?OIe:jr(+e),t=typeof t=="function"?t:jr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?DIe:jr(+n);function u(d){var f,h,p,m=(d=PIe(d)).length,g,y=!1,b,_=new Array(m),w=new Array(m);for(s==null&&(a=o(b=l())),f=0;f<=m;++f){if(!(f<m&&i(g=d[f],f,d))===y)if(y=!y)h=f,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=f-1;p>=h;--p)a.point(_[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(_[f]=+e(g,f,d),w[f]=+t(g,f,d),a.point(r?+r(g,f,d):_[f],n?+n(g,f,d):w[f]))}if(b)return a=null,b+""||null}function c(){return cE().defined(i).curve(o).context(s)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:jr(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:jr(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:jr(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:jr(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:jr(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:jr(+d),u):n},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(n)},u.lineX1=function(){return c().x(r).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:jr(!!d),u):i},u.curve=function(d){return arguments.length?(o=d,s!=null&&(a=o(s)),u):o},u.context=function(d){return arguments.length?(d==null?s=a=null:a=o(s=d),u):s},u}const qEt={draw(e,t){const n=x1(t/ax);e.moveTo(n,0),e.arc(0,0,n,0,RIe)}};function WEt(e,t){let n=null,r=N6(i);e=typeof e=="function"?e:jr(e||qEt),t=typeof t=="function"?t:jr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:jr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:jr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function ay(){}function M3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function D6(e){this._context=e}D6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:M3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:M3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function S1(e){return new D6(e)}function MIe(e){this._context=e}MIe.prototype={areaStart:ay,areaEnd:ay,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:M3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function GEt(e){return new MIe(e)}function $Ie(e){this._context=e}$Ie.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:M3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function YEt(e){return new $Ie(e)}function LIe(e,t){this._basis=new D6(e),this._beta=t}LIe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,l;++a<=n;)l=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+l*s),this._beta*t[a]+(1-this._beta)*(i+l*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const KEt=function e(t){function n(r){return t===1?new D6(r):new LIe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function $3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function lJ(e,t){this._context=e,this._k=(1-t)/6}lJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:$3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:$3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const XEt=function e(t){function n(r){return new lJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function uJ(e,t){this._context=e,this._k=(1-t)/6}uJ.prototype={areaStart:ay,areaEnd:ay,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:$3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const QEt=function e(t){function n(r){return new uJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function cJ(e,t){this._context=e,this._k=(1-t)/6}cJ.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:$3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const JEt=function e(t){function n(r){return new cJ(r,t)}return n.tension=function(r){return e(+r)},n}(0);function dJ(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ya){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>ya){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*u+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*u+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function FIe(e,t){this._context=e,this._alpha=t}FIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:dJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ZEt=function e(t){function n(r){return t?new FIe(r,t):new lJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function jIe(e,t){this._context=e,this._alpha=t}jIe.prototype={areaStart:ay,areaEnd:ay,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:dJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const ext=function e(t){function n(r){return t?new jIe(r,t):new uJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function BIe(e,t){this._context=e,this._alpha=t}BIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dJ(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const txt=function e(t){function n(r){return t?new BIe(r,t):new cJ(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function zIe(e){this._context=e}zIe.prototype={areaStart:ay,areaEnd:ay,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function nxt(e){return new zIe(e)}function Mfe(e){return e<0?-1:1}function $fe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Mfe(s)+Mfe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Lfe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function MB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function L3(e){this._context=e}L3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:MB(this,this._t0,Lfe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,MB(this,Lfe(this,n=$fe(this,e,t)),n);break;default:MB(this,this._t0,n=$fe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function UIe(e){this._context=new VIe(e)}(UIe.prototype=Object.create(L3.prototype)).point=function(e,t){L3.prototype.point.call(this,t,e)};function VIe(e){this._context=e}VIe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function rxt(e){return new L3(e)}function ixt(e){return new UIe(e)}function HIe(e){this._context=e}HIe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ffe(e),i=Ffe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ffe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function sxt(e){return new HIe(e)}function M6(e,t){this._context=e,this._t=t}M6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function oxt(e){return new M6(e,.5)}function axt(e){return new M6(e,0)}function lxt(e){return new M6(e,1)}function jC(e,t,n){this.k=e,this.x=t,this.y=n}jC.prototype={constructor:jC,scale:function(e){return e===1?this:new jC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new jC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};jC.prototype;function qd(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ly(e){return!!e&&!!e[Di]}function zm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===yxt}(e)||Array.isArray(e)||!!e[qfe]||!!(!((t=e.constructor)===null||t===void 0)&&t[qfe])||fJ(e)||hJ(e))}function cb(e,t,n){n===void 0&&(n=!1),CS(e)===0?(n?Object.keys:fE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function CS(e){var t=e[Di];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:fJ(e)?2:hJ(e)?3:0}function dE(e,t){return CS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function uxt(e,t){return CS(e)===2?e.get(t):e[t]}function qIe(e,t,n){var r=CS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function WIe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function fJ(e){return mxt&&e instanceof Map}function hJ(e){return gxt&&e instanceof Set}function Wv(e){return e.o||e.t}function pJ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=YIe(e);delete t[Di];for(var n=fE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function mJ(e,t){return t===void 0&&(t=!1),gJ(e)||ly(e)||!zm(e)||(CS(e)>1&&(e.set=e.add=e.clear=e.delete=cxt),Object.freeze(e),t&&cb(e,function(n,r){return mJ(r,!0)},!0)),e}function cxt(){qd(2)}function gJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function $h(e){var t=BV[e];return t||qd(18,e),t}function dxt(e,t){BV[e]||(BV[e]=t)}function LV(){return fI}function $B(e,t){t&&($h("Patches"),e.u=[],e.s=[],e.v=t)}function F3(e){FV(e),e.p.forEach(fxt),e.p=null}function FV(e){e===fI&&(fI=e.l)}function jfe(e){return fI={p:[],l:fI,h:e,m:!0,_:0}}function fxt(e){var t=e[Di];t.i===0||t.i===1?t.j():t.g=!0}function LB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||$h("ES5").S(t,e,r),r?(n[Di].P&&(F3(t),qd(4)),zm(e)&&(e=j3(t,e),t.l||B3(t,e)),t.u&&$h("Patches").M(n[Di].t,e,t.u,t.s)):e=j3(t,n,[]),F3(t),t.u&&t.v(t.u,t.s),e!==GIe?e:void 0}function j3(e,t,n){if(gJ(t))return t;var r=t[Di];if(!r)return cb(t,function(a,l){return Bfe(e,r,t,a,l,n)},!0),t;if(r.A!==e)return t;if(!r.P)return B3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=pJ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),cb(s,function(a,l){return Bfe(e,r,i,a,l,n,o)}),B3(e,i,!1),n&&e.u&&$h("Patches").N(r,n,e.u,e.s)}return r.o}function Bfe(e,t,n,r,i,s,o){if(ly(i)){var a=j3(e,i,s&&t&&t.i!==3&&!dE(t.R,r)?s.concat(r):void 0);if(qIe(n,r,a),!ly(a))return;e.m=!1}else o&&n.add(i);if(zm(i)&&!gJ(i)){if(!e.h.D&&e._<1)return;j3(e,i),t&&t.A.l||B3(e,i)}}function B3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&mJ(t,n)}function FB(e,t){var n=e[Di];return(n?Wv(n):e)[t]}function zfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function r0(e){e.P||(e.P=!0,e.l&&r0(e.l))}function jB(e){e.o||(e.o=pJ(e.t))}function jV(e,t,n){var r=fJ(t)?$h("MapSet").F(t,n):hJ(t)?$h("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:LV(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=hI;o&&(l=[a],u=BC);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):$h("ES5").J(t,n);return(n?n.A:LV()).p.push(r),r}function hxt(e){return ly(e)||qd(22,e),function t(n){if(!zm(n))return n;var r,i=n[Di],s=CS(n);if(i){if(!i.P&&(i.i<4||!$h("ES5").K(i)))return i.t;i.I=!0,r=Ufe(n,s),i.I=!1}else r=Ufe(n,s);return cb(r,function(o,a){i&&uxt(i.t,o)===a||qIe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Ufe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return pJ(e)}function pxt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var l=this[Di];return hI.get(l,s)},set:function(l){var u=this[Di];hI.set(u,s,l)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Di];if(!a.P)switch(a.i){case 5:r(a)&&r0(a);break;case 4:n(a)&&r0(a)}}}function n(s){for(var o=s.t,a=s.k,l=fE(a),u=l.length-1;u>=0;u--){var c=l[u];if(c!==Di){var d=o[c];if(d===void 0&&!dE(o,c))return!0;var f=a[c],h=f&&f[Di];if(h?h.t!==d:!WIe(f,d))return!0}}var p=!!o[Di];return l.length!==fE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var l=0;l<o.length;l++)if(!o.hasOwnProperty(l))return!0;return!1}var i={};dxt("ES5",{J:function(s,o){var a=Array.isArray(s),l=function(c,d){if(c){for(var f=Array(d.length),h=0;h<d.length;h++)Object.defineProperty(f,""+h,e(h,!0));return f}var p=YIe(d);delete p[Di];for(var m=fE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(d),p)}(a,s),u={i:a?5:4,A:o?o.A:LV(),P:!1,I:!1,R:{},l:o,t:s,k:l,o:null,g:!1,C:!1};return Object.defineProperty(l,Di,{value:u,writable:!0}),l},S:function(s,o,a){a?ly(o)&&o[Di].A===s&&t(s.p):(s.u&&function l(u){if(u&&typeof u=="object"){var c=u[Di];if(c){var d=c.t,f=c.k,h=c.R,p=c.i;if(p===4)cb(f,function(_){_!==Di&&(d[_]!==void 0||dE(d,_)?h[_]||l(f[_]):(h[_]=!0,r0(c)))}),cb(d,function(_){f[_]!==void 0||dE(f,_)||(h[_]=!1,r0(c))});else if(p===5){if(r(c)&&(r0(c),h.length=!0),f.length<d.length)for(var m=f.length;m<d.length;m++)h[m]=!1;else for(var g=d.length;g<f.length;g++)h[g]=!0;for(var y=Math.min(f.length,d.length),b=0;b<y;b++)f.hasOwnProperty(b)||(h[b]=!0),h[b]===void 0&&l(f[b])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Vfe,fI,yJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",mxt=typeof Map<"u",gxt=typeof Set<"u",Hfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",GIe=yJ?Symbol.for("immer-nothing"):((Vfe={})["immer-nothing"]=!0,Vfe),qfe=yJ?Symbol.for("immer-draftable"):"__$immer_draftable",Di=yJ?Symbol.for("immer-state"):"__$immer_state",yxt=""+Object.prototype.constructor,fE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,YIe=Object.getOwnPropertyDescriptors||function(e){var t={};return fE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},BV={},hI={get:function(e,t){if(t===Di)return e;var n=Wv(e);if(!dE(n,t))return function(i,s,o){var a,l=zfe(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!zm(r)?r:r===FB(e.t,t)?(jB(e),e.o[t]=jV(e.A.h,r,e)):r},has:function(e,t){return t in Wv(e)},ownKeys:function(e){return Reflect.ownKeys(Wv(e))},set:function(e,t,n){var r=zfe(Wv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=FB(Wv(e),t),s=i==null?void 0:i[Di];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(WIe(n,i)&&(n!==void 0||dE(e.t,t)))return!0;jB(e),r0(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return FB(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,jB(e),r0(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Wv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){qd(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){qd(12)}},BC={};cb(hI,function(e,t){BC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),BC.deleteProperty=function(e,t){return BC.set.call(this,e,t,void 0)},BC.set=function(e,t,n){return hI.set.call(this,e[0],t,n,e[0])};var vxt=function(){function e(n){var r=this;this.O=Hfe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,b=Array(y>1?y-1:0),_=1;_<y;_++)b[_-1]=arguments[_];return l.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(b))})}}var u;if(typeof s!="function"&&qd(6),o!==void 0&&typeof o!="function"&&qd(7),zm(i)){var c=jfe(r),d=jV(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?F3(c):FV(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return $B(c,o),LB(m,c)},function(m){throw F3(c),m}):($B(c,o),LB(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===GIe&&(u=void 0),r.D&&mJ(u,!0),o){var h=[],p=[];$h("Patches").M(i,u,h,p),o(h,p)}return u}qd(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){zm(n)||qd(8),ly(n)&&(n=hxt(n));var r=jfe(this),i=jV(this,n,void 0);return i[Di].C=!0,FV(r),i},t.finishDraft=function(n,r){var i=n&&n[Di],s=i.A;return $B(s,r),LB(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Hfe&&qd(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=$h("Patches").$;return ly(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),nc=new vxt,bxt=nc.produce;nc.produceWithPatches.bind(nc);nc.setAutoFreeze.bind(nc);nc.setUseProxies.bind(nc);nc.applyPatches.bind(nc);nc.createDraft.bind(nc);nc.finishDraft.bind(nc);const KIe=bxt;function pI(e){"@babel/helpers - typeof";return pI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pI(e)}function _xt(e,t){if(pI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(pI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wxt(e){var t=_xt(e,"string");return pI(t)=="symbol"?t:t+""}function Ext(e,t,n){return(t=wxt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Gfe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wfe(Object(n),!0).forEach(function(r){Ext(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wfe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ba(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Yfe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),BB=function(){return Math.random().toString(36).substring(7).split("").join(".")},z3={INIT:"@@redux/INIT"+BB(),REPLACE:"@@redux/REPLACE"+BB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+BB()}};function xxt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function XIe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ba(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ba(1));return n(XIe)(e,t)}if(typeof e!="function")throw new Error(ba(2));var i=e,s=t,o=[],a=o,l=!1;function u(){a===o&&(a=o.slice())}function c(){if(l)throw new Error(ba(3));return s}function d(m){if(typeof m!="function")throw new Error(ba(4));if(l)throw new Error(ba(5));var g=!0;return u(),a.push(m),function(){if(g){if(l)throw new Error(ba(6));g=!1,u();var b=a.indexOf(m);a.splice(b,1),o=null}}}function f(m){if(!xxt(m))throw new Error(ba(7));if(typeof m.type>"u")throw new Error(ba(8));if(l)throw new Error(ba(9));try{l=!0,s=i(s,m)}finally{l=!1}for(var g=o=a,y=0;y<g.length;y++){var b=g[y];b()}return m}function h(m){if(typeof m!="function")throw new Error(ba(10));i=m,f({type:z3.REPLACE})}function p(){var m,g=d;return m={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(ba(11));function _(){b.next&&b.next(c())}_();var w=g(_);return{unsubscribe:w}}},m[Yfe]=function(){return this},m}return f({type:z3.INIT}),r={dispatch:f,subscribe:d,getState:c,replaceReducer:h},r[Yfe]=p,r}function Sxt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:z3.INIT});if(typeof r>"u")throw new Error(ba(12));if(typeof n(void 0,{type:z3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ba(13))})}function Txt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Sxt(n)}catch(a){o=a}return function(l,u){if(l===void 0&&(l={}),o)throw o;for(var c=!1,d={},f=0;f<s.length;f++){var h=s[f],p=n[h],m=l[h],g=p(m,u);if(typeof g>"u")throw u&&u.type,new Error(ba(14));d[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(l).length,c?d:l}}function U3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Cxt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ba(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(l){return l(o)});return s=U3.apply(void 0,a)(i.dispatch),Gfe(Gfe({},i),{},{dispatch:s})}}}function QIe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var zV=QIe();zV.withExtraArgument=QIe;var JIe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nR=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=u[0]&2?i.return:u[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,u[1])).done)return s;switch(i=0,s&&(u=[u[0]&2,s.value]),u[0]){case 0:case 1:s=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,i=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!s||u[1]>s[0]&&u[1]<s[3])){n.label=u[1];break}if(u[0]===6&&n.label<s[1]){n.label=s[1],s=u;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(u);break}s[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],i=0}finally{r=s=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},db=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},Axt=Object.defineProperty,Ixt=Object.defineProperties,kxt=Object.getOwnPropertyDescriptors,Kfe=Object.getOwnPropertySymbols,Rxt=Object.prototype.hasOwnProperty,Pxt=Object.prototype.propertyIsEnumerable,Xfe=function(e,t,n){return t in e?Axt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},B0=function(e,t){for(var n in t||(t={}))Rxt.call(t,n)&&Xfe(e,n,t[n]);if(Kfe)for(var r=0,i=Kfe(t);r<i.length;r++){var n=i[r];Pxt.call(t,n)&&Xfe(e,n,t[n])}return e},zB=function(e,t){return Ixt(e,kxt(t))},rR=function(e,t,n){return new Promise(function(r,i){var s=function(l){try{a(n.next(l))}catch(u){i(u)}},o=function(l){try{a(n.throw(l))}catch(u){i(u)}},a=function(l){return l.done?r(l.value):Promise.resolve(l.value).then(s,o)};a((n=n.apply(e,t)).next())})},Nxt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?U3:U3.apply(null,arguments)};function ZIe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var Oxt=function(e){return e&&typeof e.match=="function"};function Lh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return B0(B0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function Dxt(e){return ZIe(e)&&"type"in e}var Mxt=function(e){JIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,db([void 0],n[0].concat(this)))):new(t.bind.apply(t,db([void 0],n.concat(this))))},t}(Array),$xt=function(e){JIe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,db([void 0],n[0].concat(this)))):new(t.bind.apply(t,db([void 0],n.concat(this))))},t}(Array);function UV(e){return zm(e)?KIe(e,function(){}):e}function Lxt(e){return typeof e=="boolean"}function Fxt(){return function(t){return jxt(t)}}function jxt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new Mxt;return n&&(Lxt(n)?r.push(zV):r.push(zV.withExtraArgument(n.extraArgument))),r}var Bxt=!0;function zxt(e){var t=Fxt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,l=a===void 0?!0:a,u=n.preloadedState,c=u===void 0?void 0:u,d=n.enhancers,f=d===void 0?void 0:d,h;if(typeof i=="function")h=i;else if(ZIe(i))h=Txt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Cxt.apply(void 0,p),g=U3;l&&(g=Nxt(B0({trace:!Bxt},typeof l=="object"&&l)));var y=new $xt(m),b=y;Array.isArray(f)?b=db([m],f):typeof f=="function"&&(b=f(y));var _=g.apply(void 0,b);return XIe(h,c,_)}function eke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function Uxt(e){return typeof e=="function"}function Vxt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?eke(t):[t,n,r],s=i[0],o=i[1],a=i[2],l;if(Uxt(e))l=function(){return UV(e())};else{var u=UV(e);l=function(){return u}}function c(d,f){d===void 0&&(d=l());var h=db([s[f.type]],o.filter(function(p){var m=p.matcher;return m(f)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(ly(p)){var g=p,y=m(g,f);return y===void 0?p:y}else{if(zm(p))return KIe(p,function(b){return m(b,f)});var y=m(p,f);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},d)}return c.getInitialState=l,c}function Hxt(e,t){return e+"/"+t}function qxt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:UV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var d=r[c],f=Hxt(t,c),h,p;"reducer"in d?(h=d.reducer,p=d.prepare):h=d,s[c]=h,o[f]=h,a[c]=p?Lh(f,p):Lh(f)});function l(){var c=typeof e.extraReducers=="function"?eke(e.extraReducers):[e.extraReducers],d=c[0],f=d===void 0?{}:d,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=B0(B0({},f),o);return Vxt(n,function(b){for(var _ in y)b.addCase(_,y[_]);for(var w=0,E=p;w<E.length;w++){var x=E[w];b.addMatcher(x.matcher,x.reducer)}g&&b.addDefaultCase(g)})}var u;return{name:t,reducer:function(c,d){return u||(u=l()),u(c,d)},actions:a,caseReducers:s,getInitialState:function(){return u||(u=l()),u.getInitialState()}}}var Wxt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",tke=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=Wxt[Math.random()*64|0];return t},Gxt=["name","message","stack","code"],UB=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Qfe=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Yxt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Gxt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Lh(t+"/fulfilled",function(u,c,d,f){return{payload:u,meta:zB(B0({},f||{}),{arg:d,requestId:c,requestStatus:"fulfilled"})}}),s=Lh(t+"/pending",function(u,c,d){return{payload:void 0,meta:zB(B0({},d||{}),{arg:c,requestId:u,requestStatus:"pending"})}}),o=Lh(t+"/rejected",function(u,c,d,f,h){return{payload:f,error:(r&&r.serializeError||Yxt)(u||"Rejected"),meta:zB(B0({},h||{}),{arg:d,requestId:c,rejectedWithValue:!!f,requestStatus:"rejected",aborted:(u==null?void 0:u.name)==="AbortError",condition:(u==null?void 0:u.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){},u}();function l(u){return function(c,d,f){var h=r!=null&&r.idGenerator?r.idGenerator(u):tke(),p=new a,m;function g(b){m=b,p.abort()}var y=function(){return rR(this,null,function(){var b,_,w,E,x,S,C;return nR(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),E=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,u,{getState:d,extra:f}),Xxt(E)?[4,E]:[3,2];case 1:E=A.sent(),A.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return x=new Promise(function(R,P){return p.signal.addEventListener("abort",function(){return P({name:"AbortError",message:m||"Aborted"})})}),c(s(h,u,(_=r==null?void 0:r.getPendingMeta)==null?void 0:_.call(r,{requestId:h,arg:u},{getState:d,extra:f}))),[4,Promise.race([x,Promise.resolve(n(u,{dispatch:c,getState:d,extra:f,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(R,P){return new UB(R,P)},fulfillWithValue:function(R,P){return new Qfe(R,P)}})).then(function(R){if(R instanceof UB)throw R;return R instanceof Qfe?i(R.payload,h,u,R.meta):i(R,h,u)})])];case 3:return w=A.sent(),[3,5];case 4:return S=A.sent(),w=S instanceof UB?o(null,h,u,S.payload,S.meta):o(S,h,u),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:u,unwrap:function(){return y.then(Kxt)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Kxt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Xxt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Qxt=function(e,t){return Oxt(e)?e.match(t):e(t)};function Jfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Qxt(r,n)})}}var vJ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},VV=function(){},nke=function(e,t){return t===void 0&&(t=VV),e.catch(t),e},rke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},hE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Jxt="task",ike="listener",ske="completed",bJ="cancelled",Zxt="task-"+bJ,eSt="task-"+ske,oke=ike+"-"+bJ,tSt=ike+"-"+ske,$6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=Jxt+" "+bJ+" (reason: "+t+")"}return e}(),pE=function(e){if(e.aborted)throw new $6(e.reason)};function ake(e,t){var n=VV;return new Promise(function(r,i){var s=function(){return i(new $6(e.reason))};if(e.aborted){s();return}n=rke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=VV})}var nSt=function(e,t){return rR(void 0,null,function(){var n,r;return nR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof $6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},V3=function(e){return function(t){return nke(ake(e,t).then(function(n){return pE(e),n}))}},lke=function(e){var t=V3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},rSt=Object.assign,Zfe={},iR="listenerMiddleware",iSt=function(e,t){var n=function(r){return rke(e,function(){return hE(r,e.reason)})};return function(r,i){vJ(r,"taskExecutor");var s=new AbortController;n(s);var o=nSt(function(){return rR(void 0,null,function(){var a;return nR(this,function(l){switch(l.label){case 0:return pE(e),pE(s.signal),[4,r({pause:V3(s.signal),delay:lke(s.signal),signal:s.signal})];case 1:return a=l.sent(),pE(s.signal),[2,a]}})})},function(){return hE(s,eSt)});return i!=null&&i.autoJoin&&t.push(o),{result:V3(e)(o),cancel:function(){hE(s,Zxt)}}}},sSt=function(e,t){var n=function(r,i){return rR(void 0,null,function(){var s,o,a,l;return nR(this,function(u){switch(u.label){case 0:pE(t),s=function(){},o=new Promise(function(c,d){var f=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){f(),d()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),u.label=1;case 1:return u.trys.push([1,,3,4]),[4,ake(t,Promise.race(a))];case 2:return l=u.sent(),pE(t),[2,l];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return nke(n(r,i))}},uke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Lh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return vJ(s,"options.listener"),{predicate:i,type:t,effect:s}},oSt=function(e){var t=uke(e),n=t.type,r=t.predicate,i=t.effect,s=tke(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},HV=function(e){e.pending.forEach(function(t){hE(t,oke)})},aSt=function(e){return function(){e.forEach(HV),e.clear()}},ehe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},lSt=Lh(iR+"/add"),uSt=Lh(iR+"/removeAll"),cSt=Lh(iR+"/remove"),dSt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,db([iR+"/error"],e))};function fSt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?dSt:i;vJ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&HV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},l=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=oSt(h)),o(p)},u=function(h){var p=uke(h),m=p.type,g=p.effect,y=p.predicate,b=a(function(_){var w=typeof m=="string"?_.type===m:_.predicate===y;return w&&_.effect===g});return b&&(b.unsubscribe(),h.cancelActive&&HV(b)),!!b},c=function(h,p,m,g){return rR(t,null,function(){var y,b,_,w;return nR(this,function(E){switch(E.label){case 0:y=new AbortController,b=sSt(l,y.signal),_=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,rSt({},m,{getOriginalState:g,condition:function(x,S){return b(x,S).then(Boolean)},take:b,delay:lke(y.signal),pause:V3(y.signal),extra:r,signal:y.signal,fork:iSt(y.signal,_),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(x,S,C){x!==y&&(hE(x,oke),C.delete(x))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof $6||ehe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(_)];case 5:return E.sent(),hE(y,tSt),h.pending.delete(y),[7];case 6:return[2]}})})},d=aSt(n),f=function(h){return function(p){return function(m){if(!Dxt(m))return p(m);if(lSt.match(m))return l(m.payload);if(uSt.match(m)){d();return}if(cSt.match(m))return u(m.payload);var g=h.getState(),y=function(){if(g===Zfe)throw new Error(iR+": getOriginalState can only be called synchronously");return g},b;try{if(b=p(m),n.size>0)for(var _=h.getState(),w=Array.from(n.values()),E=0,x=w;E<x.length;E++){var S=x[E],C=!1;try{C=S.predicate(m,_,g)}catch(A){C=!1,ehe(s,A,{raisedBy:"predicate"})}C&&c(S,m,h,y)}}finally{g=Zfe}return b}}};return{middleware:f,startListening:l,stopListening:u,clearListeners:d}}var the;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);pxt();function hSt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let AN;const pSt=new Uint8Array(16);function mSt(){if(!AN&&(AN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!AN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return AN(pSt)}const No=[];for(let e=0;e<256;++e)No.push((e+256).toString(16).slice(1));function gSt(e,t=0){return(No[e[t+0]]+No[e[t+1]]+No[e[t+2]]+No[e[t+3]]+"-"+No[e[t+4]]+No[e[t+5]]+"-"+No[e[t+6]]+No[e[t+7]]+"-"+No[e[t+8]]+No[e[t+9]]+"-"+No[e[t+10]]+No[e[t+11]]+No[e[t+12]]+No[e[t+13]]+No[e[t+14]]+No[e[t+15]]).toLowerCase()}const ySt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),nhe={randomUUID:ySt};function rhe(e,t,n){if(nhe.randomUUID&&!t&&!e)return nhe.randomUUID();e=e||{};const r=e.random||(e.rng||mSt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,gSt(r)}class Fh{static get(){let t=rhe();for(;this.ids.has(t);)t=rhe();return this.ids.set(t,!0),t}}Fh.ids=new Map;function lf(e){return"parent"in e}function vSt(e){return!lf(e)}function bSt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((l,u)=>(l[u]=[],i&&i[u]&&l[u].push({type:u,id:Fh.get(),val:i[u],createdOn:Date.now()}),l),s),a=r?[{id:Fh.get(),createdOn:Date.now(),val:r}]:[];return{id:Fh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function _St({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},l=Object.keys(i||{}).reduce((c,d)=>(c[d]=[],i&&i[d]&&c[d].push({type:d,id:Fh.get(),val:i[d],createdOn:Date.now()}),c),a),u=s?[{id:Fh.get(),createdOn:Date.now(),val:s}]:[];return{id:Fh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:l,artifacts:u,sideEffects:r,state:t,level:e.level+1}}function os(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=kSt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fb(e){return!!e&&!!e[rc]}function uy(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===RSt}(e)||Array.isArray(e)||!!e[eA]||!!(!((t=e.constructor)===null||t===void 0)&&t[eA])||L6(e)||F6(e))}function lx(e,t,n){n===void 0&&(n=!1),cy(e)===0?(n?Object.keys:TJ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function cy(e){var t=e[rc];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:L6(e)?2:F6(e)?3:0}function mI(e,t){return cy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function iD(e,t){return cy(e)===2?e.get(t):e[t]}function cke(e,t,n){var r=cy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function wSt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function L6(e){return ASt&&e instanceof Map}function F6(e){return ISt&&e instanceof Set}function Gv(e){return e.o||e.t}function _J(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=PSt(e);delete t[rc];for(var n=TJ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function wJ(e,t){return t===void 0&&(t=!1),EJ(e)||fb(e)||!uy(e)||(cy(e)>1&&(e.set=e.add=e.clear=e.delete=ESt),Object.freeze(e),t&&lx(e,function(n,r){return wJ(r,!0)},!0)),e}function ESt(){os(2)}function EJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function jh(e){var t=YV[e];return t||os(18,e),t}function xSt(e,t){YV[e]||(YV[e]=t)}function ihe(){return{}.NODE_ENV==="production"||ux||os(0),ux}function VB(e,t){t&&(jh("Patches"),e.u=[],e.s=[],e.v=t)}function H3(e){qV(e),e.p.forEach(SSt),e.p=null}function qV(e){e===ux&&(ux=e.l)}function she(e){return ux={p:[],l:ux,h:e,m:!0,_:0}}function SSt(e){var t=e[rc];t.i===0||t.i===1?t.j():t.O=!0}function HB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||jh("ES5").S(t,e,r),r?(n[rc].P&&(H3(t),os(4)),uy(e)&&(e=q3(t,e),t.l||W3(t,e)),t.u&&jh("Patches").M(n[rc].t,e,t.u,t.s)):e=q3(t,n,[]),H3(t),t.u&&t.v(t.u,t.s),e!==SJ?e:void 0}function q3(e,t,n){if(EJ(t))return t;var r=t[rc];if(!r)return lx(t,function(s,o){return ohe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return W3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=_J(r.k):r.o;lx(r.i===3?new Set(i):i,function(s,o){return ohe(e,r,i,s,o,n)}),W3(e,i,!1),n&&e.u&&jh("Patches").R(r,n,e.u,e.s)}return r.o}function ohe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&os(5),fb(i)){var o=q3(e,i,s&&t&&t.i!==3&&!mI(t.D,r)?s.concat(r):void 0);if(cke(n,r,o),!fb(o))return;e.m=!1}if(uy(i)&&!EJ(i)){if(!e.h.F&&e._<1)return;q3(e,i),t&&t.A.l||W3(e,i)}}function W3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&wJ(t,n)}function qB(e,t){var n=e[rc];return(n?Gv(n):e)[t]}function ahe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function WV(e){e.P||(e.P=!0,e.l&&WV(e.l))}function WB(e){e.o||(e.o=_J(e.t))}function GV(e,t,n){var r=L6(t)?jh("MapSet").N(t,n):F6(t)?jh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:ihe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=a,u=KV;o&&(l=[a],u=zC);var c=Proxy.revocable(l,u),d=c.revoke,f=c.proxy;return a.k=f,a.j=d,f}(t,n):jh("ES5").J(t,n);return(n?n.A:ihe()).p.push(r),r}function TSt(e){return fb(e)||os(22,e),function t(n){if(!uy(n))return n;var r,i=n[rc],s=cy(n);if(i){if(!i.P&&(i.i<4||!jh("ES5").K(i)))return i.t;i.I=!0,r=lhe(n,s),i.I=!1}else r=lhe(n,s);return lx(r,function(o,a){i&&iD(i.t,o)===a||cke(r,o,t(a))}),s===3?new Set(r):r}(e)}function lhe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return _J(e)}function CSt(){function e(r){if(!uy(r))return r;if(Array.isArray(r))return r.map(e);if(L6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(F6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return mI(r,eA)&&(i[eA]=r[eA]),i}function t(r){return fb(r)?e(r):r}var n="add";xSt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,l=r,u=0;u<o.length-1;u++){var c=cy(l),d=""+o[u];c!==0&&c!==1||d!=="__proto__"&&d!=="constructor"||os(24),typeof l=="function"&&d==="prototype"&&os(24),typeof(l=iD(l,d))!="object"&&os(15,o.join("/"))}var f=cy(l),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(f){case 2:return l.set(p,h);case 3:os(16);default:return l[p]=h}case n:switch(f){case 1:return p==="-"?l.push(h):l.splice(p,0,h);case 2:return l.set(p,h);case 3:return l.add(h);default:return l[p]=h}case"remove":switch(f){case 1:return l.splice(p,1);case 2:return l.delete(p);case 3:return l.delete(s.value);default:return delete l[p]}default:os(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,l,u,c){var d=a.t,f=a.o;lx(a.D,function(h,p){var m=iD(d,h),g=iD(f,h),y=p?mI(d,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var b=l.concat(h);u.push(y==="remove"?{op:y,path:b}:{op:y,path:b,value:g}),c.push(y===n?{op:"remove",path:b}:y==="remove"?{op:n,path:b,value:t(m)}:{op:"replace",path:b,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,l,u,c){var d=a.t,f=a.D,h=a.o;if(h.length<d.length){var p=[h,d];d=p[0],h=p[1];var m=[c,u];u=m[0],c=m[1]}for(var g=0;g<d.length;g++)if(f[g]&&h[g]!==d[g]){var y=l.concat([g]);u.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(d[g])})}for(var b=d.length;b<h.length;b++){var _=l.concat([b]);u.push({op:n,path:_,value:t(h[b])})}d.length<h.length&&c.push({op:"replace",path:l.concat(["length"]),value:d.length})}(r,i,s,o);case 3:return function(a,l,u,c){var d=a.t,f=a.o,h=0;d.forEach(function(p){if(!f.has(p)){var m=l.concat([h]);u.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,f.forEach(function(p){if(!d.has(p)){var m=l.concat([h]);u.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===SJ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var uhe,ux,xJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",ASt=typeof Map<"u",ISt=typeof Set<"u",che=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",SJ=xJ?Symbol.for("immer-nothing"):((uhe={})["immer-nothing"]=!0,uhe),eA=xJ?Symbol.for("immer-draftable"):"__$immer_draftable",rc=xJ?Symbol.for("immer-state"):"__$immer_state",kSt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},RSt=""+Object.prototype.constructor,TJ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,PSt=Object.getOwnPropertyDescriptors||function(e){var t={};return TJ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},YV={},KV={get:function(e,t){if(t===rc)return e;var n=Gv(e);if(!mI(n,t))return function(i,s,o){var a,l=ahe(s,o);return l?"value"in l?l.value:(a=l.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!uy(r)?r:r===qB(e.t,t)?(WB(e),e.o[t]=GV(e.A.h,r,e)):r},has:function(e,t){return t in Gv(e)},ownKeys:function(e){return Reflect.ownKeys(Gv(e))},set:function(e,t,n){var r=ahe(Gv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=qB(Gv(e),t),s=i==null?void 0:i[rc];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(wSt(n,i)&&(n!==void 0||mI(e.t,t)))return!0;WB(e),WV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return qB(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,WB(e),WV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Gv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){os(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){os(12)}},zC={};lx(KV,function(e,t){zC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),zC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&os(13),zC.set.call(this,e,t,void 0)},zC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&os(14),KV.set.call(this,e[0],t,n,e[0])};var NSt=function(){function e(n){var r=this;this.g=che,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var l=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,b=Array(y>1?y-1:0),_=1;_<y;_++)b[_-1]=arguments[_];return l.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(b))})}}var u;if(typeof s!="function"&&os(6),o!==void 0&&typeof o!="function"&&os(7),uy(i)){var c=she(r),d=GV(r,i,void 0),f=!0;try{u=s(d),f=!1}finally{f?H3(c):qV(c)}return typeof Promise<"u"&&u instanceof Promise?u.then(function(m){return VB(c,o),HB(m,c)},function(m){throw H3(c),m}):(VB(c,o),HB(u,c))}if(!i||typeof i!="object"){if((u=s(i))===void 0&&(u=i),u===SJ&&(u=void 0),r.F&&wJ(u,!0),o){var h=[],p=[];jh("Patches").M(i,u,h,p),o(h,p)}return u}os(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(u){for(var c=arguments.length,d=Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return r.produceWithPatches(u,function(h){return i.apply(void 0,[h].concat(d))})};var o,a,l=r.produce(i,s,function(u,c){o=u,a=c});return typeof Promise<"u"&&l instanceof Promise?l.then(function(u){return[u,o,a]}):[l,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){uy(n)||os(8),fb(n)&&(n=TSt(n));var r=she(this),i=GV(this,n,void 0);return i[rc].C=!0,qV(r),i},t.finishDraft=function(n,r){var i=n&&n[rc];({}).NODE_ENV!=="production"&&(i&&i.C||os(9),i.I&&os(10));var s=i.A;return VB(s,r),HB(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!che&&os(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=jh("Patches").$;return fb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),ic=new NSt,OSt=ic.produce;ic.produceWithPatches.bind(ic);ic.setAutoFreeze.bind(ic);ic.setUseProxies.bind(ic);ic.applyPatches.bind(ic);ic.createDraft.bind(ic);ic.finishDraft.bind(ic);function DSt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=bSt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return qxt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,l){const{id:u,meta:c}=l.payload,d=a.nodes[u].meta,f=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Fh.get(),val:c[p],createdOn:Date.now()}),h),d);a.nodes[l.payload.id].meta=f},addArtifact(a,l){a.nodes[l.payload.id].artifacts.push({id:Fh.get(),createdOn:Date.now(),val:l.payload.artifact})},changeCurrent(a,l){a.current=l.payload},addNode(a,{payload:l}){a.nodes[l.id]=l,a.nodes[l.parent].children.push(l.id),a.current=l.id},load(a,{payload:l}){return l}}})}function MSt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=DSt(e),s=fSt();s.startListening({matcher:Jfe(r.changeCurrent,r.addNode),effect:(a,l)=>{l.cancelActiveListeners(),t.forEach(u=>{const c=Jfe(r.addNode)(a),{skipOnNew:d}=u.config;d&&c||u.func(c?"new":"traversal")})}});const o=zxt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,l){const u={id:Fh.get(),func:a,config:l};return t.set(u.id,u),()=>t.delete(u.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var $St=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),LSt=Object.prototype.hasOwnProperty;function XV(e,t){return LSt.call(e,t)}function QV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)XV(e,i)&&r.push(i);return r}function ql(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function JV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Yv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function dke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function ZV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(ZV(e[t]))return!0}else if(typeof e=="object"){for(var r=QV(e),i=r.length,s=0;s<i;s++)if(ZV(e[r[s]]))return!0}}return!1}function dhe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var fke=function(e){$St(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,dhe(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=dhe(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),ns=fke,FSt=ql,$w={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=G3(n,this.path);r&&(r=ql(r));var i=F1(n,{op:"remove",path:this.from}).removed;return F1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=G3(n,this.from);return F1(n,{op:"add",path:this.path,value:ql(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:gI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},jSt={add:function(e,t,n){return JV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:$w.move,copy:$w.copy,test:$w.test,_get:$w._get};function G3(e,t){if(t=="")return e;var n={op:"_get",path:t};return F1(e,n),n.value}function F1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Y3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=G3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=gI(e,t.value),o.test===!1)throw new ns("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new ns("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=ql(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Y3;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=dke(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!JV(h))throw new ns("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);JV(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new ns("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=jSt[t.op].call(t,u,h,e);if(o.test===!1)throw new ns("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=$w[t.op].call(t,u,h,e);if(o.test===!1)throw new ns("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new ns("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function j6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new ns("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=ql(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=F1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function BSt(e,t,n){var r=F1(e,t);if(r.test===!1)throw new ns("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Y3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new ns("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if($w[e.op]){if(typeof e.path!="string")throw new ns("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new ns('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new ns("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new ns("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&ZV(e.value))throw new ns("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new ns("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new ns("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=hke([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new ns("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new ns("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function hke(e,t,n){try{if(!Array.isArray(e))throw new ns("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)j6(ql(t),ql(e),n||!0);else{n=n||Y3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof ns)return i;throw i}}function gI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!gI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!gI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const zSt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:ns,_areEquals:gI,applyOperation:F1,applyPatch:j6,applyReducer:BSt,deepClone:FSt,getValueByPointer:G3,validate:hke,validator:Y3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var CJ=new WeakMap,USt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),VSt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function HSt(e){return CJ.get(e)}function qSt(e,t){return e.observers.get(t)}function WSt(e,t){e.observers.delete(t.callback)}function GSt(e,t){t.unobserve()}function YSt(e,t){var n=[],r,i=HSt(e);if(!i)i=new USt(e),CJ.set(e,i);else{var s=qSt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=ql(e),t){r.callback=t,r.next=null;var o=function(){eH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){eH(r),clearTimeout(r.next),WSt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new VSt(t,r)),r}function eH(e,t){t===void 0&&(t=!1);var n=CJ.get(e.object);AJ(n.value,e.object,e.patches,"",t),e.patches.length&&j6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function AJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=QV(t),o=QV(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(XV(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?AJ(c,d,n,r+"/"+Yv(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+Yv(u),value:ql(c)}),n.push({op:"replace",path:r+"/"+Yv(u),value:ql(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Yv(u),value:ql(c)}),n.push({op:"remove",path:r+"/"+Yv(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!XV(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Yv(u),value:ql(t[u])})}}}function pke(e,t,n){n===void 0&&(n=!1);var r=[];return AJ(e,t,r,"",n),r}const KSt=Object.freeze(Object.defineProperty({__proto__:null,compare:pke,generate:eH,observe:YSt,unobserve:GSt},Symbol.toStringTag,{value:"Module"}));Object.assign({},zSt,KSt,{JsonPatchError:fke,deepClone:ql,escapePathComponent:Yv,unescapePathComponent:dke});var UC=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(UC||{});function sD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=mke(i,e,t);s.shift();const o=s.map(l=>t[l]).map(l=>l.state.val).reduce((l,u)=>[...l,...u],[]),a=sD(i,t);return j6(a,ql(o),!0,!1).newDocument}function XSt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function tH({registry:e,initialState:t}){let n=!1;const r=hSt(),i=MSt(t);function s(c){return i.backend.nodes[c]}r.listen(UC.TRAVERSAL_START,()=>{n=!0}),r.listen(UC.TRAVERSAL_END,()=>{n=!1});const o={add(c,d=i.current.id){i.update(i.addMetadata({id:d,meta:c}))},latestOfType(c,d=i.current.id){var f;return(f=i.backend.nodes[d].meta[c])==null?void 0:f.at(-1)},allOfType(c,d=i.current.id){return i.backend.nodes[d].meta[c]},latest(c=i.current.id){const d=i.backend.nodes[c].meta,f=Object.keys(d).reduce((h,p)=>{const m=d[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(f).length>0?f:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,d=i.current.id){i.update(i.addArtifact({id:d,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},l={add(c,d=i.current.id){o.add({annotation:c},d)},latest(c=i.current.id){var d;return(d=o.latestOfType("annotation",c))==null?void 0:d.val},all(c=i.current.id){var d;return(d=o.allOfType("annotation",c))==null?void 0:d.map(f=>f.val)}},u={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var d;return!!((d=o.latestOfType("bookmark",c))!=null&&d.val)},toggle(c=i.current.id){u.is(c)?u.remove(c):u.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return sD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:d,sideEffects:f,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=sD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:d};else{const b=pke(y,d);if(XSt(d,b)==="checkpoint")g={type:"checkpoint",val:d};else{const _=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:b,checkpointRef:_}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=_St({label:c,state:g,parent:this.current,sideEffects:f,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,d){const f=e.get(d.type),h=sD(this.current,this.graph.backend.nodes);if(f.config.hasSideEffects){const{do:p=d,undo:m}=f.func(d.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:f.config.eventType})}else{const p=f.func(h,d.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:f.config.eventType})}},async to(c){r.fire(UC.TRAVERSAL_START);const d=mke(i.current,i.backend.nodes[c],i.backend.nodes),f=[];for(let h=0;h<d.length-1;++h){const p=s(d[h]),m=s(d[h+1]);JSt(p,m)?lf(p)&&f.push(...p.sideEffects.undo):lf(m)&&f.push(...m.sideEffects.do)}for(const h of f){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(UC.TRAVERSAL_END)},undo(){const{current:c}=i;return lf(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:d}=i;return d.children.length>0?this.to(d.children[c==="oldest"?0:d.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,d=!1){return i.currentChange(c,{skipOnNew:d})},done(){console.log("Setup later for URL sharing.")},tree(){return gke(i.root,i.backend.nodes)},on(c,d){r.listen(c,d)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const d=JSON.parse(c),f=d.current;d.current=d.root,i.update(i.load(d)),this.to(f)},importObject(c){const d=c.current;c.current=c.root,i.update(i.load(c)),this.to(d)},metadata:o,artifact:a,annotations:l,bookmarks:u}}function QSt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;lf(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)lf(r)&&(r=n[r.parent]),lf(i)&&(i=n[i.parent]);return r.id}function mke(e,t,n){const r=QSt(e,t,n),i=n[r],s=[],o=[];let[a,l]=[e,t];for(;a.id!==i.id;)s.push(a),lf(a)&&(a=n[a.parent]);for(s.push(a);l.id!==i.id;)o.push(l),lf(l)&&(l=n[l.parent]);const u=o.reverse();return[...s,...u].map(c=>c.id)}function JSt(e,t){if(lf(e)&&e.parent===t.id)return!0;if(lf(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function gke(e,t){return{...e,children:e.children.map(n=>gke(t[n],t)),name:`${e.label}`}}CSt();function ZSt(e){return e.length===2?OSt(e):e}class yI{static create(){return new yI}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:ZSt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Lh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var eTt="Expected a function",fhe=NaN,tTt="[object Symbol]",nTt=/^\s+|\s+$/g,rTt=/^[-+]0x[0-9a-f]+$/i,iTt=/^0b[01]+$/i,sTt=/^0o[0-7]+$/i,oTt=parseInt,aTt=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,lTt=typeof self=="object"&&self&&self.Object===Object&&self,uTt=aTt||lTt||Function("return this")(),cTt=Object.prototype,dTt=cTt.toString,fTt=Math.max,hTt=Math.min,GB=function(){return uTt.Date.now()};function pTt(e,t,n){var r,i,s,o,a,l,u=0,c=!1,d=!1,f=!0;if(typeof e!="function")throw new TypeError(eTt);t=hhe(t)||0,nH(n)&&(c=!!n.leading,d="maxWait"in n,s=d?fTt(hhe(n.maxWait)||0,t):s,f="trailing"in n?!!n.trailing:f);function h(x){var S=r,C=i;return r=i=void 0,u=x,o=e.apply(C,S),o}function p(x){return u=x,a=setTimeout(y,t),c?h(x):o}function m(x){var S=x-l,C=x-u,A=t-S;return d?hTt(A,s-C):A}function g(x){var S=x-l,C=x-u;return l===void 0||S>=t||S<0||d&&C>=s}function y(){var x=GB();if(g(x))return b(x);a=setTimeout(y,m(x))}function b(x){return a=void 0,f&&r?h(x):(r=i=void 0,o)}function _(){a!==void 0&&clearTimeout(a),u=0,r=l=i=a=void 0}function w(){return a===void 0?o:b(GB())}function E(){var x=GB(),S=g(x);if(r=arguments,i=this,l=x,S){if(a===void 0)return p(l);if(d)return a=setTimeout(y,t),h(l)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=_,E.flush=w,E}function nH(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function mTt(e){return!!e&&typeof e=="object"}function gTt(e){return typeof e=="symbol"||mTt(e)&&dTt.call(e)==tTt}function hhe(e){if(typeof e=="number")return e;if(gTt(e))return fhe;if(nH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=nH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(nTt,"");var n=iTt.test(e);return n||sTt.test(e)?oTt(e.slice(2),n?2:8):rTt.test(e)?fhe:+e}var yTt=pTt;const Pd=mu(yTt);function yke({xScale:e,yRange:t,vertPosition:n,ticks:r,isDate:i=!1,showLines:s=!0}){const o=I.useMemo(()=>r.length>1?Math.abs(r[1].offset-r[0].offset):e.range()[0]-e.range()[1],[r,e]),a=I.useCallback(l=>(i?tR("%b%e, %Y"):Mh(".2s"))(l),[i]);return v.jsxs(v.Fragment,{children:[s?v.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,r.map(({value:l,offset:u})=>v.jsxs("g",{transform:`translate(${u}, ${n})`,children:[v.jsx("line",{y2:"6",stroke:"currentColor"}),s?v.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,v.jsx("foreignObject",{x:0-o/2,y:10,width:o,height:20,children:v.jsx(Ju,{children:v.jsx(on,{withinPortal:!0,label:l,children:v.jsx(Xe,{px:2,fs:"10",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+l==0?0:a(i?new Date(l):l)})})})})]},`${l}test`))]})}const vTt=Object.freeze(Object.defineProperty({__proto__:null,XAxis:yke},Symbol.toStringTag,{value:"Module"}));function vke({dataset:e,yScale:t,xRange:n,horizontalPosition:r}){const i=I.useMemo(()=>t.ticks(6).map(o=>({value:o,yOffset:t(o)})),[t]),s=I.useMemo(()=>e==="clean_stocks"?Mh(",.0%"):t.domain()[1]<5?Mh(",.2r"):Mh(",.0f"),[e,t]);return v.jsx(v.Fragment,{children:i.map(({value:o,yOffset:a})=>v.jsxs("g",{transform:`translate(${r}, ${a})`,children:[v.jsx("line",{x2:`${n[1]-n[0]}`,stroke:`${o===0?"black":"gainsboro"}`,strokeWidth:o===0?1:.4}),v.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-6px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))})}const bTt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:vke},Symbol.toStringTag,{value:"Module"})),pa={top:30,left:40,right:80,bottom:50};function rH({parameters:e,data:t,dataname:n,items:r,selection:i,range:s,guardrail:o}){const[a,l]=I.useState(null),u=A=>i!=null&&i.includes(A)?!a||a.length===0?!0:a.includes(A):!1,c=I.useMemo(()=>{const A=r.filter(P=>i==null?void 0:i.includes(P.name)).map(P=>P.group);return r.filter(P=>A==null?void 0:A.includes(P.group)).filter(P=>!(i!=null&&i.includes(P.name))).map(P=>P.name)},[i,r,n]),d=I.useMemo(()=>{const A=r.map(k=>k.group),R=t.filter(k=>A==null?void 0:A.includes(k[e.group_var]));return[...wyt(R,k=>({mean:oE(k,.5,$=>$[e.y_var]),upperq:oE(k,.75,$=>$[e.y_var]),lowerq:oE(k,.25,$=>$[e.y_var])}),k=>k[e.x_var])].flatMap(([k,$])=>({date:k,mean:$.mean,upperq:$.upperq,lowerq:$.lowerq}))},[t,r,e,n]),f=n==="clean_data"?800-pa.left-pa.right-60:800-pa.left-pa.right,h=400-pa.top-pa.bottom,{yMin:p,yMax:m}=I.useMemo(()=>{let A=[];switch(o){case"super_data":A=i==null?void 0:i.concat(c);break;default:A=i;break}const R=t.filter(B=>A.includes(B[e.cat_var])).map(B=>+B[e.y_var]).filter(B=>B!==null),[P,L]=n==="clean_stocks"?ku(R):[0,ku(R)[1]],[k,$]=[eI(d.map(B=>B.lowerq)),Nh(d.map(B=>B.upperq))],D=o==="super_summ"?eI([P,k]):P,M=o==="super_summ"?Nh([L,$]):L;return{yMin:D,yMax:M}},[t,i,o,d,c,e,n]),g=I.useMemo(()=>s?ox([pa.left,f+pa.left]).domain(s):ox([pa.left,f+pa.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[f,s,e,n]),y=I.useMemo(()=>Dc([h+pa.top,pa.top]).domain([p,m]).nice(),[h,m,p,n]),b=I.useMemo(()=>{const A=Array.from(new Set(t.map(R=>R[e.cat_var])));return Zk(RQ).domain(A)},[t,e,n]),_=I.useMemo(()=>{if(!g||!y)return;const A=cE();return A.x(P=>g(p0("%Y-%m-%d")(P[e.x_var]))),A.y(P=>y(P[e.y_var])),A.curve(S1),i==null?void 0:i.map(P=>({country:P,path:A(t.filter(L=>L[e.cat_var]===P))}))},[t,g,y,i,e,n]),w=I.useMemo(()=>{if(o!=="super_data")return null;const A=cE();return A.x(P=>g(p0("%Y-%m-%d")(P[e.x_var]))),A.y(P=>y(P[e.y_var])),A.curve(S1),c==null?void 0:c.map(P=>({country:P,path:A(t.filter(L=>L[e.cat_var]===P))}))},[t,g,y,o,c,e,n]),E=I.useMemo(()=>{if(o!=="super_summ")return null;const A=cE();A.x(k=>g(p0("%Y-%m-%d")(k.date))),A.y(k=>y(k.mean)),A.curve(S1);const R=A(d),P=O6();P.x(k=>g(p0("%Y-%m-%d")(k.date))),P.y0(k=>y(k.lowerq)),P.y1(k=>y(k.upperq)),P.curve(S1);const L=P(d);return{meanLine:R,confidenceBands:L,data:d}},[g,y,o,d,n]),x=I.useMemo(()=>n==="clean_stocks"?"Market Index":"Average",[n]),S=A=>A==="Eldoril North"?"Policy A":A.split(" ")[0]==="Silvoria"||A.split(" ")[0]==="Mystara"?"Policy C":A==="Average"?"all policies":"Policy B",C=I.useMemo(()=>{let R=null;switch(o){case"super_data":R=i==null?void 0:i.concat(w==null?void 0:w.map(L=>L.country));break;case"super_summ":R=i==null?void 0:i.concat([x]);break;default:R=i;break}const P=R==null?void 0:R.map(L=>({country:L,country_policy:n==="clean_data"?`${L} (${S(L)})`:L,label_pos:L===x?E==null?void 0:E.data.slice(-1).map(k=>y(k.mean))[0]:t.filter(k=>k[e.cat_var]===L).slice(-1).map(k=>y(k[e.y_var]))[0]})).sort((L,k)=>L.label_pos<k.label_pos?1:-1);if(!P)return P;for(let L=0;L<(P==null?void 0:P.length);L+=1){if(!P[L-1])continue;const k=P[L-1].label_pos-P[L].label_pos;k>=10||(P[L].label_pos=P[L].label_pos-10+k)}return P},[t,i,y,o,x,e,w,E,n]);return(i==null?void 0:i.length)===0?v.jsx(Ju,{style:{width:"800px",height:"400px"},children:v.jsx(Xe,{fs:"italic",c:"dimmed",children:"Select an item to view the chart."})}):v.jsxs("svg",{id:"baseLineChart",style:{height:"400px",width:"800px",fontFamily:'"Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[v.jsxs("g",{id:"axes",children:[v.jsx(yke,{isDate:!0,xScale:g,yRange:y.range(),vertPosition:h+pa.top,showLines:!1,ticks:g.ticks(6).map(A=>({value:A.toString(),offset:g(A)}))}),v.jsx(vke,{dataset:n,yScale:y,horizontalPosition:pa.left,xRange:g.range()})]}),v.jsx("svg",{style:{width:`${f}`},children:w==null?void 0:w.map(A=>v.jsx("g",{children:v.jsx("path",{id:`${A.country}`,fill:"none",stroke:u(A.country)?b(A.country):"gray",strokeDasharray:"4,1",strokeWidth:.5,d:A.path},`${A.country}_key`)},`${A.country}_g`))},"control_lines"),v.jsx("svg",{style:{width:`${f}`},children:E?v.jsxs("g",{children:[v.jsx("path",{id:"confidenceBands",fill:"lightgray",opacity:.25,stroke:"none",d:E.confidenceBands},"confidenceBands_key"),v.jsx("path",{id:"meanLine",fill:"none",stroke:"gray",strokeDasharray:"4,1",strokeWidth:.5,d:E.meanLine},"meanLine_key")]},"summary_g"):null},"control_bands"),v.jsxs("svg",{style:{width:`${f}`},children:[_==null?void 0:_.map(A=>v.jsx("g",{children:v.jsx("path",{id:`${A.country}`,fill:"none",stroke:u(A.country)?b(A.country):"gainsboro",strokeWidth:a!=null&&a.includes(A.country)?2:1.5,d:A.path},`${A.country}_key`)},`${A.country}_g`)),C==null?void 0:C.map(A=>v.jsx("foreignObject",{x:f+pa.left+5,y:A.label_pos-7,width:pa.right+60,height:20,children:v.jsx(Xe,{px:2,fs:"10",color:u(A.country)?b(A.country):"silver",onMouseOver:R=>{const P=R.target;i!=null&&i.includes(P.innerText)&&l([P.innerText])},onMouseOut:()=>l([]),children:A.country_policy})},`${A.country}_label`))]},"lines")]})}const _Tt=Object.freeze(Object.defineProperty({__proto__:null,LineChart:rH,default:rH},Symbol.toStringTag,{value:"Module"})),F_={top:0,left:0,right:0,bottom:0},phe=20,YB=60;function iH({parameters:e,data:t,dataname:n,items:r,selection:i,setSelection:s,trackSelection:o,range:a,guardrail:l}){const u=I.useMemo(()=>a?ox([F_.left,YB+F_.left]).domain(a):ox([F_.left,YB+F_.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[e,a]),c=I.useMemo(()=>{const p=t.filter(y=>r==null?void 0:r.map(b=>b.name).includes(y[e.cat_var])).map(y=>+y[e.y_var]).filter(y=>y!==null),[m,g]=ku(p);return Dc([phe+F_.top,F_.top]).domain([m,g]).nice()},[e,t,r]),d=I.useMemo(()=>{const p=Array.from(new Set(t.map(m=>m[e.cat_var])));return Zk(RQ).domain(p)},[e,t]),f=I.useMemo(()=>{if(l!=="juxt_data")return null;const p=O6();p.x(y=>u(p0("%Y-%m-%d")(y[e.x_var]))),p.y0(()=>c(0)),p.y1(y=>c(y[e.y_var])),p.curve(S1);const m=cE();return m.x(y=>u(p0("%Y-%m-%d")(y[e.x_var]))),m.y(y=>c(y[e.y_var])),m.curve(S1),r==null?void 0:r.map(y=>({country:y.name,path:m(t.filter(b=>b[e.cat_var]===y.name)),area:p(t.filter(b=>b[e.cat_var]===y.name))}))},[e,l,t,r,u,c]),h=I.useMemo(()=>e.allow_selection===!1?"none":"block",[e]);return v.jsx(Qu.Group,{defaultValue:i,dir:"vertical",onChange:p=>{s(p),o(p)},styles:e.allow_selection===!1?{root:{pointerEvents:"none"}}:{root:{pointerEvents:"auto"}},children:r==null?void 0:r.map(p=>v.jsxs(v.Fragment,{children:[p.name==="Eldoril North"?v.jsx(D0,{size:"xs",label:"Policy A",labelPosition:"left",color:"black"}):null,p.name==="Eldoril West"?v.jsx(D0,{size:"xs",label:"Policy B",labelPosition:"left",color:"black"}):null,p.name==="Silvoria North"?v.jsx(D0,{size:"xs",label:"Policy C",labelPosition:"left",color:"black"}):null,v.jsxs(rl,{grow:!0,gutter:8,columns:2,children:[v.jsx(rl.Col,{span:1,children:v.jsx(Qu,{value:p.name,label:p.name,color:e.allow_selection?"blue":"gray",styles:{root:{display:"flex",alignItems:"flex-end",padding:"2px 0"},inner:{display:h}},children:p.name},`${p.name}_checkbox`)},`${p.name}_grid1`),v.jsx(rl.Col,{span:l==="juxt_data"?"auto":3,children:v.jsxs("svg",{style:{width:`${YB}`,height:`${phe}`},children:[v.jsx("path",{id:`${p.name}_sparkarea`,fill:i!=null&&i.includes(p.name)?d(p.name):"gray",stroke:"none",opacity:.25,d:f==null?void 0:f.filter(m=>m.country===p.name)[0].area},`${p.name}_sparkarea`),v.jsx("path",{id:`${p.name}_spark`,fill:"none",stroke:i!=null&&i.includes(p.name)?d(p.name):"gray",strokeWidth:.75,d:f==null?void 0:f.filter(m=>m.country===p.name)[0].path},`${p.name}_spark`)]},`${p.name}_sparksvg`)},`${p.name}_grid2`)]},`${p.name}_grid`)]}))},`${n}_checkboxgroup`)}const wTt=Object.freeze(Object.defineProperty({__proto__:null,Sidebar:iH,default:iH},Symbol.toStringTag,{value:"Module"}));function sH({parameters:e,setRange:t,trackRange:n}){function r(s){return ox([0,100]).domain([new Date(e.start_date),new Date(e.end_date)]).invert(s)}function i(s){const o=r(s);return tR("%b %e, %Y")(o)}return v.jsx(BF,{defaultValue:[0,100],label:s=>i(s),labelAlwaysOn:!0,disabled:!e.allow_time_slider,onChange:([s,o])=>{t([r(s),r(o)]),n([r(s),r(o)])}})}const ETt=Object.freeze(Object.defineProperty({__proto__:null,RangeSelector:sH,default:sH},Symbol.toStringTag,{value:"Module"}));function oH({guardrail:e,setGuardrail:t,dataname:n,setDataname:r,setSelection:i}){return v.jsxs(v.Fragment,{children:[v.jsx(Xe,{children:"Data:"}),v.jsx(IM,{value:n,onChange:s=>{r(s),i([])},data:[{value:"clean_data",label:"Viral"},{value:"clean_stocks",label:"Stock"}]}),v.jsx(Xe,{children:"Guardrail:"}),v.jsx(IM,{value:e,onChange:s=>{t(s)},data:[{value:"none",label:"None"},{value:"super_data",label:"Sup. Data"},{value:"super_summ",label:"Sup. Summ."},{value:"juxt_data",label:"Juxt. Data"},{value:"juxt_summ",label:"Juxt. Summ."}]})]})}const xTt=Object.freeze(Object.defineProperty({__proto__:null,Selector:oH,default:oH},Symbol.toStringTag,{value:"Module"})),Tr=Array.isArray;function au(e){return e!=null?Tr(e)?e:[e]:[]}function STt(e=0,t=1/0){return`${mhe(e)} < row_number() && row_number() <= ${mhe(t)}`}function mhe(e){return e<0?`count() + ${e}`:e}class bke{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(STt(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,au(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function $n(e){throw Error(e)}function hl(e){return typeof e=="number"}function Ri(e){return typeof e=="function"}function B6(e,t){const n=Array(e);if(Ri(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let TTt=class extends bke{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){$n("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){$n("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){$n("Not implemented")}getter(t){$n("Not implemented")}objects(t){$n("Not implemented")}object(t){$n("Not implemented")}[Symbol.iterator](){$n("Not implemented")}print(t={}){hl(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,l=this._data;r.sort((u,c)=>a(u,c,l))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=B6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let l=0,u;l<a;++l)u=s[l],i[n[u]].push(u);else if(o)for(let l=o.next(0);l>=0;l=o.next(l+1))i[n[l]].push(l);else for(let l=0;l<a;++l)i[n[l]].push(l);if(t&&!s&&this.isOrdered()){const l=this._order,u=this._data;for(let c=0;c<r;++c)i[c].sort((d,f)=>l(d,f,u))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let l=i||0;if(l>o)return;const u=Math.min(o,l+r),c=()=>l=this._total;if(n&&this.isOrdered()||s&&this._index){const d=this.indices(),f=this._data;for(;l<u;++l)t(d[l],f,c)}else if(s){let d=u-l+1;for(l=s.nth(l);--d&&l>-1;l=s.next(l+1))t(l,a,c)}else for(;l<u;++l)t(l,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},CTt=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},ATt=function(e){return e&&Ri(e.get)?e:new CTt(e)};function Um(e){return e instanceof Date}function $a(e){return e===Object(e)}function K3(e){return e instanceof RegExp}function na(e){return typeof e=="string"}function ITt(e,t){const n=r=>$n(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?ghe(e.entries(),t):Um(e)?n("Date"):K3(e)?n("RegExp"):na(e)?n():Tr(e)?kTt(e,t):Ri(e[Symbol.iterator])?RTt(e,t):$a(e)?ghe(Object.entries(e),t):n()}function ghe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function kTt(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const l=e[a];for(let u=0;u<o;++u)s[u][a]=l[t[u]]}}else t&&t.forEach(i);return r}function RTt(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:PTt}=Object.prototype;function wf(e,t){return PTt.call(e,t)}function pc(e){return e?new yhe({...e.data()},e.columnNames()):new yhe}class yhe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return wf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const wr=void 0,NTt=Object.getPrototypeOf(Int8Array);function sR(e){return e instanceof NTt}function T1(e){return Tr(e)||sR(e)}function Qd(e){return e!=null&&e===e}const VT=e=>T1(e)||na(e),OTt={compact:e=>T1(e)?e.filter(t=>Qd(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>VT(e)?e.includes(t,n):!1,indexof:(e,t)=>VT(e)?e.indexOf(t):-1,join:(e,t)=>T1(e)?e.join(t):wr,lastindexof:(e,t)=>VT(e)?e.lastIndexOf(t):-1,length:e=>VT(e)?e.length:0,pluck:(e,t)=>T1(e)?e.map(n=>Qd(n)?n[t]:wr):wr,reverse:e=>T1(e)?e.slice().reverse():na(e)?e.split("").reverse().join(""):wr,slice:(e,t,n)=>VT(e)?e.slice(t,n):wr};function DTt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function oD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Kf=e=>(e<10?"0":"")+e,MTt=e=>e<0?"-"+oD(-e,6):e>9999?"+"+oD(e,6):oD(e,4);function _ke(e,t,n,r,i,s,o,a,l){const u=a?"Z":"";return MTt(e)+"-"+Kf(t+1)+"-"+Kf(n)+(!l||o?"T"+Kf(r)+":"+Kf(i)+":"+Kf(s)+"."+oD(o,3)+u:s?"T"+Kf(r)+":"+Kf(i)+":"+Kf(s)+u:i||r||!a?"T"+Kf(r)+":"+Kf(i)+u:"")}function wke(e,t){return isNaN(e)?"Invalid Date":_ke(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function z6(e,t){return isNaN(e)?"Invalid Date":_ke(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const $Tt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function LTt(e){return e.match($Tt)&&!isNaN(Date.parse(e))}function FTt(e,t=Date.parse){return LTt(e)?t(e):e}const Eke=6e4,xke=864e5,Ske=6048e5,ss=new Date,as=new Date,ys=e=>(ss.setTime(typeof e=="string"?FTt(e):e),ss);function jTt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function BTt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function zTt(e){as.setTime(+e),as.setHours(0,0,0,0),ss.setTime(+as),ss.setMonth(0),ss.setDate(1);const t=(as.getTimezoneOffset()-ss.getTimezoneOffset())*Eke;return Math.floor(1+(as-ss-t)/xke)}function UTt(e){as.setTime(+e),as.setUTCHours(0,0,0,0);const t=Date.UTC(as.getUTCFullYear(),0,1);return Math.floor(1+(as-t)/xke)}function VTt(e,t){const n=t||0;as.setTime(+e),as.setDate(as.getDate()-(as.getDay()+7-n)%7),as.setHours(0,0,0,0),ss.setTime(+e),ss.setMonth(0),ss.setDate(1),ss.setDate(1-(ss.getDay()+7-n)%7),ss.setHours(0,0,0,0);const r=(as.getTimezoneOffset()-ss.getTimezoneOffset())*Eke;return Math.floor((1+(as-ss)-r)/Ske)}function HTt(e,t){const n=t||0;return as.setTime(+e),as.setUTCDate(as.getUTCDate()-(as.getUTCDay()+7-n)%7),as.setUTCHours(0,0,0,0),ss.setTime(+e),ss.setUTCMonth(0),ss.setUTCDate(1),ss.setUTCDate(1-(ss.getUTCDay()+7-n)%7),ss.setUTCHours(0,0,0,0),Math.floor((1+(as-ss))/Ske)}const qTt={format_date:(e,t)=>wke(ys(e),!t),format_utcdate:(e,t)=>z6(ys(e),!t),timestamp:e=>+ys(e),year:e=>ys(e).getFullYear(),quarter:e=>Math.floor(ys(e).getMonth()/3),month:e=>ys(e).getMonth(),date:e=>ys(e).getDate(),dayofweek:e=>ys(e).getDay(),hours:e=>ys(e).getHours(),minutes:e=>ys(e).getMinutes(),seconds:e=>ys(e).getSeconds(),milliseconds:e=>ys(e).getMilliseconds(),utcyear:e=>ys(e).getUTCFullYear(),utcquarter:e=>Math.floor(ys(e).getUTCMonth()/3),utcmonth:e=>ys(e).getUTCMonth(),utcdate:e=>ys(e).getUTCDate(),utcdayofweek:e=>ys(e).getUTCDay(),utchours:e=>ys(e).getUTCHours(),utcminutes:e=>ys(e).getUTCMinutes(),utcseconds:e=>ys(e).getUTCSeconds(),utcmilliseconds:e=>ys(e).getUTCMilliseconds(),datetime:jTt,dayofyear:zTt,week:VTt,utcdatetime:BTt,utcdayofyear:UTt,utcweek:HTt,now:Date.now};function IJ(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Um(e)||Um(t)?+e==+t:K3(e)&&K3(t)?e+""==t+"":$a(e)&&$a(t)?WTt(e,t):!1}function WTt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return vhe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!vhe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!IJ(e[o],t[o]))return!1}return!0}function vhe(e,t,n=IJ){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const GTt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let YTt=Math.random;function AS(){return YTt()}const KTt={random:AS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function kJ(e){return e instanceof Map}function XTt(e){return e instanceof Set}function aD(e){return kJ(e)||XTt(e)}function KB(e){return Array.from(e)}const QTt={has:(e,t)=>aD(e)?e.has(t):e!=null?wf(e,t):!1,keys:e=>kJ(e)?KB(e.keys()):e!=null?Object.keys(e):[],values:e=>aD(e)?KB(e.values()):e!=null?Object.values(e):[],entries:e=>aD(e)?KB(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):wr};function JTt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(wf(t,e))return t[e];return n!==void 0?n:e}function ZTt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const eCt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Lw={bin:DTt,equal:IJ,recode:JTt,sequence:ZTt,...OTt,...qTt,...GTt,...KTt,...QTt,...eCt};function vI(e){return typeof e=="bigint"}function Kh(e){return e===void 0?e+"":vI(e)?e+"n":JSON.stringify(e)}function Pn(e,t=[],n=[]){return new tCt(e,au(t),au(n))}let tCt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Kh(n)}]`),...this.params.map(Kh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const Tke=e=>Pn("any",e),Cke=()=>Pn("count"),Ake=e=>Pn("array_agg",e),Ike=e=>Pn("array_agg_distinct",e),kke=(e,t)=>Pn("map_agg",[e,t]),Rke=(e,t)=>Pn("object_agg",[e,t]),Pke=(e,t)=>Pn("entries_agg",[e,t]);({...Lw});function nCt(e,t){e=aD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function rCt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,d)=>c+d,0);if(o===i)return e;const a=Array(o);let l=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=l++]=r[c]);const u=new Uint32Array(n.length);return t.scan(c=>u[c]=s[n[c]]),{...e,keys:u,rows:a,size:l}}function iCt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,l=o,u=null;if(n){u=new Int32Array(o),t(p=>u[i[p]]=1);const h=u.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),l=0;for(let p=0;p<o;++p)u[p]&&(a[u[p]=l++]=s[p])}}let c=-1;const d=new Uint32Array(r);return t(l!==o?h=>d[++c]=u[i[h]]:h=>d[++c]=i[h]),{...e,keys:d,rows:a,size:l}}function sCt(e,t,n,r){const i=r==="map"||r===!0?kke:r==="entries"?Pke:r==="object"?Rke:$n('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=nCt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:Ake(o)});for(let l=s.length;--l>=0;)a=a.groupby(s.slice(0,l)).rollup({[o]:i(s[l],o)});return a.get(o)}const oCt="ArrayPattern",aCt="ArrowFunctionExpression",lCt="FunctionExpression",z0="Identifier",IS="Literal",Nke="MemberExpression",uCt="ObjectExpression",Oke="ObjectPattern",Dke="Property",oR="Column",cCt="Constant",dCt="Dictionary",fCt="Function",hCt="Parameter",Mke="Op",pi=(e,t)=>{const n=pCt[e.type];return n?n(e,t):$n(`Unsupported expression construct: ${e.type}`)},XB=(e,t)=>"("+pi(e.left,t)+" "+e.operator+" "+pi(e.right,t)+")",QB=(e,t)=>"("+nh(e.params,t)+")=>"+pi(e.body,t),bhe=(e,t)=>pi(e.callee,t)+"("+nh(e.arguments,t)+")",nh=(e,t,n=",")=>e.map(r=>pi(r,t)).join(n),$ke=e=>e.computed?`[${Kh(e.name)}]`:`.${e.name}`,_he=(e,t,n)=>{const r=e.table||"";return`data${r}${$ke(e)}.${n}(${t.index}${r})`},pCt={Constant:e=>e.raw,Column:(e,t)=>_he(e,t,"get"),Dictionary:(e,t)=>_he(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${$ke(e)}`,Op:(e,t)=>`op(${Kh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+pi(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=pi(e.object,t),i=pi(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:bhe,NewExpression:(e,t)=>"new "+bhe(e,t),ArrayExpression:(e,t)=>"["+nh(e.elements,t)+"]",AssignmentExpression:XB,BinaryExpression:XB,LogicalExpression:XB,UnaryExpression:(e,t)=>"("+e.operator+pi(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+pi(e.test,t)+"?"+pi(e.consequent,t)+":"+pi(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+nh(e.properties,t)+"})",Property:(e,t)=>{const n=pi(e.key,t);return(e.computed?`[${n}]`:n)+":"+pi(e.value,t)},ArrowFunctionExpression:QB,FunctionExpression:QB,FunctionDeclaration:QB,ArrayPattern:(e,t)=>"["+nh(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+nh(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+nh(e.declarations,t,","),VariableDeclarator:(e,t)=>pi(e.id,t)+"="+pi(e.init,t),SpreadElement:(e,t)=>"..."+pi(e.argument,t),BlockStatement:(e,t)=>"{"+nh(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>pi(e.expression,t),IfStatement:(e,t)=>"if ("+pi(e.test,t)+")"+pi(e.consequent,t)+(e.alternate?" else "+pi(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+pi(e.discriminant,t)+") {"+nh(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+pi(e.test,t):"default")+": "+nh(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+pi(e.argument,t),Program:(e,t)=>pi(e.body[0],t)};function X3(e,t={index:"row"}){return pi(e,t)}function mCt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const l=Math.ceil(Math.log(n)/a),u=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(u)/a)-l));Math.ceil(u/s)>n;)s*=10;const d=c.length;for(let f=0;f<d;++f){const h=s/c[f];h>=i&&u/h<=n&&(s=h)}}if(r){let l=Math.log(s);const u=l>=0?0:~~(-l/a)+1,c=Math.pow(10,-u-1);l=Math.floor(e/s+c)*s,e=e<l?l-s:l,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function cx(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Um(e)?+e:Tr(e)||sR(e)?`[${e.map(cx)}]`:K3(e)?e+"":gCt(e)}function gCt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${cx(e[r])}`;return t+="}",t}function Q3(e,t){const n=e.length;return n===1?(r,i)=>cx(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=cx(a)}return s}}function yCt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=cx(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=cx(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Yp(){}function vCt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function js(e){return e.init=e.init||Yp,e.add=e.add||Yp,e.rem=e.rem||Yp,e}function whe(e,t){return e.product_v=!1,e.product=t}const Lke={count:{create:()=>js({value:e=>e.count}),param:[]},array_agg:{create:()=>js({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>js({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>js({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>js({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>js({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:wr}),param:[1]},valid:{create:()=>js({value:e=>e.valid}),param:[1]},invalid:{create:()=>js({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=yCt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>js({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>js({value:e=>{let t=wr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:wr,add:(e,t)=>vI(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>whe(e,1),value:e=>e.valid?e.product_v?whe(e,vCt(e.list.values())):e.product:void 0,add:(e,t)=>vI(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:wr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>js({value:e=>e.valid?e.mean:wr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):wr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>js({value:e=>e.valid>1?e.dev/e.valid:wr}),param:[1],req:["variance"]},stdev:{create:()=>js({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):wr}),param:[1],req:["variance"]},stdevp:{create:()=>js({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):wr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=wr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===wr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=wr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===wr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>js({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>js({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):wr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>js({value:e=>e.valid>1?e.cov/e.valid:wr}),param:[2],req:["covariance"]},corr:{create:()=>js({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):wr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>js({value:i=>mCt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Ehe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},xhe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},Fke={row_number:{create(){return{init:Yp,value:e=>e.index+1}},param:[]},rank:Ehe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Ehe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:xhe,ntile:{create(e){e=+e,e>0||$n("ntile num must be greater than zero.");const{init:t,value:n}=xhe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=wr){return e=+e||1,{init:Yp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=wr){return e=+e||1,{init:Yp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Yp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Yp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||$n("nth_value nth must be greater than zero."),{init:Yp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):wr}}},param:[1,1]},fill_down:{create(e=wr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Qd(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=wr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=bCt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function bCt(e,t,n){for(const r=e.size;n<r;++n)if(Qd(e.value(n,t)))return n;return-1}function RJ(e){return wf(Lke,e)}function PJ(e){return wf(Fke,e)}function jke(e){return wf(Lw,e)||e==="row_object"}function Bke(e){return RJ(e)&&Lke[e]}function zke(e){return PJ(e)&&Fke[e]}function HT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const NJ={escape:(e,t,n)=>HT(e,t,n),expr:(e,t)=>HT(`(row,data,op)=>${e}`,Lw,t),expr2:(e,t)=>HT(`(row0,data0,row,data)=>${e}`,Lw,t),join:(e,t)=>HT(`(row1,data1,row2,data2)=>${e}`,Lw,t),param:(e,t)=>HT(e,Lw,t)},_Ct={"==":1,"!=":1,"===":1,"!==":1};function Uke(e,t,n=0,r,i){if(e.type=oR,e.name=t,e.table=n,i&&r&&Ri(r.keyFor)){const s=_Ct[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===IS&&wCt(i,e,s,r.keyFor(s.value))}return e}function wCt(e,t,n,r){return r<0?(e.type=IS,e.value=!1,e.raw="false"):(t.type=dCt,n.value=r,n.raw=r+""),!0}function U6(e){return Tr(e)?e:kJ(e)?e.entries():e?Object.entries(e):[]}const Vke="row_object";function Hke(e,t){e.type=uCt;const n=e.properties=[];for(const r of U6(t)){const[i,s]=Tr(r)?r:[r,r];n.push({type:Dke,key:{type:IS,raw:Kh(s)},value:Uke({computed:!0},i)})}return e}function qke(e){return X3(Hke({},e))}function Wke(e){return NJ.expr(qke(e))}const ECt=new TextDecoder("utf-8"),aH=e=>ECt.decode(e),xCt=new TextEncoder,V6=e=>xCt.encode(e),SCt=e=>typeof e=="boolean",Dl=e=>typeof e=="function",tv=e=>e!=null&&Object(e)===e,H6=e=>tv(e)&&Dl(e.then),OJ=e=>tv(e)&&Dl(e[Symbol.iterator]),q6=e=>tv(e)&&Dl(e[Symbol.asyncIterator]),TCt=e=>tv(e)&&"done"in e&&"value"in e,Gke=e=>"_getDOMStream"in e&&"_getNodeStream"in e,CCt=e=>tv(e)&&Dl(e.abort)&&Dl(e.getWriter)&&!Gke(e),ACt=e=>tv(e)&&Dl(e.end)&&Dl(e.write)&&SCt(e.writable)&&!Gke(e),ICt=e=>tv(e)&&Dl(e.clear)&&Dl(e.bytes)&&Dl(e.position)&&Dl(e.setPosition)&&Dl(e.capacity)&&Dl(e.getBufferIdentifier)&&Dl(e.createLong),DJ=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function kCt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,l=0,u=0,c=e.length;++l<c;){if(o=t[u],a=e[l],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++u]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++u]=a);continue}t[u]=new Uint8Array(o.buffer,n,r-n+s)}return t}function lH(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Xh(e,t){const n=kCt(e),r=n.reduce((c,d)=>c+d.byteLength,0);let i,s,o,a=0,l=-1;const u=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++l<c;){if(i=n[l],s=i.subarray(0,Math.min(i.length,u-a)),u<=a+s.length){s.length<i.length?n[l]=i.subarray(s.length):s.length===i.length&&l++,o?lH(o,s,a):o=s;break}lH(o||(o=new Uint8Array(u)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(l),r-(o?o.byteLength:0)]}function zs(e,t){let n=TCt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=V6(n)),n instanceof ArrayBuffer?new e(n):n instanceof DJ?new e(n):ICt(n)?zs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const qT=e=>zs(Int32Array,e),She=e=>zs(BigInt64Array,e),hr=e=>zs(Uint8Array,e),uH=e=>(e.next(),e);function*RCt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DJ?n(t):OJ(t)?t:n(t);return yield*uH(function*(i){let s=null;do s=i.next(yield zs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const PCt=e=>RCt(Uint8Array,e);function Yke(e,t){return y1(this,arguments,function*(){if(H6(t))return yield lr(yield lr(yield*f8(k2(Yke(e,yield lr(t))))));const r=function(o){return y1(this,arguments,function*(){yield yield lr(yield lr(o))})},i=function(o){return y1(this,arguments,function*(){yield lr(yield*f8(k2(uH(function*(a){let l=null;do l=a.next(yield l==null?void 0:l.value);while(!l.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DJ?r(t):OJ(t)?i(t):q6(t)?t:r(t);return yield lr(yield*f8(k2(uH(function(o){return y1(this,arguments,function*(){let a=null;do a=yield lr(o.next(yield yield lr(zs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield lr(new e)})}const NCt=e=>Yke(Uint8Array,e);function Kke(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function OCt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const The={fromIterable(e){return IN(DCt(e))},fromAsyncIterable(e){return IN(MCt(e))},fromDOMStream(e){return IN($Ct(e))},fromNodeStream(e){return IN(FCt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},IN=e=>(e.next(),e);function*DCt(e){let t,n=!1,r=[],i,s,o,a=0;function l(){return s==="peek"?Xh(r,o)[0]:([i,r,a]=Xh(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const u=PCt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?u.next():u.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield l());while(o<a);while(!t)}catch(c){(n=!0)&&typeof u.throw=="function"&&u.throw(c)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function MCt(e){return y1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?Xh(i,a)[0]:([s,i,l]=Xh(i,a),s)}({cmd:o,size:a}=(yield yield lr(null))||{cmd:"read",size:0});const c=NCt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-l)?yield lr(c.next()):yield lr(c.next(a-l)),!n&&s.byteLength>0&&(i.push(s),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield lr(u()));while(a<l);while(!n)}catch(d){(r=!0)&&typeof c.throw=="function"&&(yield lr(c.throw(d)))}finally{r===!1&&typeof c.return=="function"&&(yield lr(c.return(new Uint8Array(0))))}return yield lr(null)})}function $Ct(e){return y1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,l=0;function u(){return o==="peek"?Xh(i,a)[0]:([s,i,l]=Xh(i,a),s)}({cmd:o,size:a}=(yield yield lr(null))||{cmd:"read",size:0});const c=new LCt(e);try{do if({done:n,value:s}=Number.isNaN(a-l)?yield lr(c.read()):yield lr(c.read(a-l)),!n&&s.byteLength>0&&(i.push(hr(s)),l+=s.byteLength),n||a<=l)do({cmd:o,size:a}=yield yield lr(u()));while(a<l);while(!n)}catch(d){(r=!0)&&(yield lr(c.cancel(d)))}finally{r===!1?yield lr(c.cancel()):e.locked&&c.releaseLock()}return yield lr(null)})}class LCt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Xp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Xp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=hr(n)),n})}}const JB=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function FCt(e){return y1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,l=0,u=[],c;function d(){return o==="peek"?Xh(u,a)[0]:([c,u,l]=Xh(u,a),c)}if({cmd:o,size:a}=(yield yield lr(null))||{cmd:"read",size:0},e.isTTY)return yield yield lr(new Uint8Array(0)),yield lr(null);try{n[0]=JB(e,"end"),n[1]=JB(e,"error");do{if(n[2]=JB(e,"readable"),[r,s]=yield lr(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-l)?(c=hr(e.read(a-l)),c.byteLength<a-l&&(c=hr(e.read()))):c=hr(e.read()),c.byteLength>0&&(u.push(c),l+=c.byteLength)),i||a<=l)do({cmd:o,size:a}=yield yield lr(d()));while(a<l)}while(!i)}finally{yield lr(f(n,r==="error"?s:null))}return yield lr(null);function f(h,p){return c=u=null,new Promise((m,g)=>{for(const[y,b]of h)e.off(y,b);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ws;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ws||(Ws={}));var pl;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(pl||(pl={}));var eo;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(eo||(eo={}));var Jc;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Jc||(Jc={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var Zc;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Zc||(Zc={}));const ZB=2,gh=4,Zp=4,Ur=4,Wg=new Int32Array(2),Che=new Float32Array(Wg.buffer),Ahe=new Float64Array(Wg.buffer),kN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var cH;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(cH||(cH={}));let J3=class Xke{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new Xke(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Wg[0]=this.readInt32(t),Che[0]}readFloat64(t){return Wg[kN?0:1]=this.readInt32(t),Wg[kN?1:0]=this.readInt32(t+4),Ahe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Che[0]=n,this.writeInt32(t,Wg[0])}writeFloat64(t,n){Ahe[0]=n,this.writeInt32(t,Wg[kN?0:1]),this.writeInt32(t+4,Wg[kN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+gh+Zp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Zp;n++)t+=String.fromCharCode(this.readInt8(this.position_+gh+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=gh;const i=this.bytes_.subarray(t,t+r);return n===cH.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+gh}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Zp)throw new Error("FlatBuffers: file identifier must be length "+Zp);for(let n=0;n<Zp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+gh+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},Qke=class Jke{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=J3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=Jke.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=J3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(gh,0),this.writeInt32(this.offset()-t+gh)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*ZB;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const l=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(l)){for(let u=ZB;u<s;u+=ZB)if(this.bb.readInt16(a+u)!=this.bb.readInt16(l+u))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Ur:0;if(n){const s=n;if(this.prep(this.minalign,gh+Zp+i),s.length!=Zp)throw new TypeError("FlatBuffers: file identifier must be length "+Zp);for(let o=Zp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,gh+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(gh,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var Z3;(function(e){e[e.BUFFER=0]="BUFFER"})(Z3||(Z3={}));var e$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(e$||(e$={}));class Gg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Gg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Ur),(n||new Gg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):e$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Z3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,e$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,Z3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Gg.startBodyCompression(t),Gg.addCodec(t,n),Gg.addMethod(t,r),Gg.endBodyCompression(t)}}let Zke=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},eRe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Vp=class dH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new dH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Ur),(n||new dH).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new eRe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Zke).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Gg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},sw=class fH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new fH).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Ur),(n||new fH).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Vp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var dx;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(dx||(dx={}));var t$;(function(e){e[e.DenseArray=0]="DenseArray"})(t$||(t$={}));class Pu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new Pu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Ur),(n||new Pu).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return Pu.startInt(t),Pu.addBitWidth(t,n),Pu.addIsSigned(t,r),Pu.endInt(t)}}class em{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new em).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Ur),(n||new em).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Pu).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):t$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,t$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Hs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Hs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Ur),(n||new Hs).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Hs.startKeyValue(t),Hs.addKey(t,n),Hs.addValue(t,r),Hs.endKeyValue(t)}}let Ihe=class VC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new VC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Ur),(n||new VC).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return VC.startBinary(t),VC.endBinary(t)}},khe=class HC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new HC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Ur),(n||new HC).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return HC.startBool(t),HC.endBool(t)}},lD=class ow{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new ow).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Ur),(n||new ow).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Jc.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Jc.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return ow.startDate(t),ow.addUnit(t,n),ow.endDate(t)}},aw=class Fg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Fg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Ur),(n||new Fg).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Fg.startDecimal(t),Fg.addPrecision(t,n),Fg.addScale(t,r),Fg.addBitWidth(t,i),Fg.endDecimal(t)}},uD=class lw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new lw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Ur),(n||new lw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Wt.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Wt.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return lw.startDuration(t),lw.addUnit(t,n),lw.endDuration(t)}},cD=class uw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new uw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Ur),(n||new uw).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return uw.startFixedSizeBinary(t),uw.addByteWidth(t,n),uw.endFixedSizeBinary(t)}},dD=class cw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new cw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Ur),(n||new cw).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return cw.startFixedSizeList(t),cw.addListSize(t,n),cw.endFixedSizeList(t)}};class yh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new yh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Ur),(n||new yh).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):eo.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,eo.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return yh.startFloatingPoint(t),yh.addPrecision(t,n),yh.endFloatingPoint(t)}}class vh{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new vh).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Ur),(n||new vh).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Zc.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Zc.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return vh.startInterval(t),vh.addUnit(t,n),vh.endInterval(t)}}let Rhe=class qC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new qC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+Ur),(n||new qC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return qC.startLargeBinary(t),qC.endLargeBinary(t)}},Phe=class WC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new WC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+Ur),(n||new WC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return WC.startLargeUtf8(t),WC.endLargeUtf8(t)}},Nhe=class GC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new GC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Ur),(n||new GC).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return GC.startList(t),GC.endList(t)}},fD=class dw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new dw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Ur),(n||new dw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return dw.startMap(t),dw.addKeysSorted(t,n),dw.endMap(t)}},Ohe=class YC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new YC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Ur),(n||new YC).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return YC.startNull(t),YC.endNull(t)}};class C1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new C1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Ur),(n||new C1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return C1.startStruct_(t),C1.endStruct_(t)}}let KC=class Kv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Kv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Ur),(n||new Kv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Wt.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Wt.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Kv.startTime(t),Kv.addUnit(t,n),Kv.addBitWidth(t,r),Kv.endTime(t)}},XC=class Xv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Ur),(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Wt.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,Wt.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Xv.startTimestamp(t),Xv.addUnit(t,n),Xv.addTimezone(t,r),Xv.endTimestamp(t)}},Qv=class Jv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Jv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Ur),(n||new Jv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):pl.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,pl.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Jv.startUnion(t),Jv.addMode(t,n),Jv.addTypeIds(t,r),Jv.endUnion(t)}},Dhe=class QC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new QC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Ur),(n||new QC).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return QC.startUtf8(t),QC.endUtf8(t)}};var hi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(hi||(hi={}));let Ec=class hD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new hD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Ur),(n||new hD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):hi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new em).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new hD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,hi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},rh=class zp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new zp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Ur),(n||new zp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):dx.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Ec).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,dx.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return zp.startSchema(t),zp.addEndianness(t,n),zp.addFields(t,r),zp.addCustomMetadata(t,i),zp.addFeatures(t,s),zp.endSchema(t)}};var Ds;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Ds||(Ds={}));var oe;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(oe||(oe={}));var Hp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Hp||(Hp={}));const jCt=void 0;function hb(e){if(e===null)return"null";if(e===jCt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>hb(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const BCt=Symbol.for("isArrowBigNum");function $f(e,...t){return t.length===0?Object.setPrototypeOf(zs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}$f.prototype[BCt]=!0;$f.prototype.toJSON=function(){return`"${_I(this)}"`};$f.prototype.valueOf=function(){return tRe(this)};$f.prototype.toString=function(){return _I(this)};$f.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return tRe(this);case"string":return _I(this);case"default":return zCt(this)}return _I(this)};function mE(...e){return $f.apply(this,e)}function gE(...e){return $f.apply(this,e)}function bI(...e){return $f.apply(this,e)}Object.setPrototypeOf(mE.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(gE.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(bI.prototype,Object.create(Uint32Array.prototype));Object.assign(mE.prototype,$f.prototype,{constructor:mE,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(gE.prototype,$f.prototype,{constructor:gE,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(bI.prototype,$f.prototype,{constructor:bI,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function tRe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),l=BigInt(0);if(o){for(const u of s)a+=~u*(BigInt(1)<<BigInt(32)*l++);a*=BigInt(-1)}else for(const u of s)a+=u*(BigInt(1)<<BigInt(32)*l++);return a}const _I=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return e9(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return e9(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${e9(t)}`},zCt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:_I(e);function e9(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class MJ{static new(t,n){switch(n){case!0:return new mE(t);case!1:return new gE(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new mE(t)}return t.byteLength===16?new bI(t):new gE(t)}static signed(t){return new mE(t)}static unsigned(t){return new gE(t)}static decimal(t){return new bI(t)}constructor(t,n){return MJ.new(t,n)}}function Jo(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var nRe,rRe,iRe,sRe,oRe,aRe,lRe,uRe,cRe,dRe,fRe,hRe,pRe,mRe,gRe,yRe,vRe,bRe,_Re,wRe,ERe,xRe;class Sn{static isNull(t){return(t==null?void 0:t.typeId)===oe.Null}static isInt(t){return(t==null?void 0:t.typeId)===oe.Int}static isFloat(t){return(t==null?void 0:t.typeId)===oe.Float}static isBinary(t){return(t==null?void 0:t.typeId)===oe.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===oe.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===oe.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===oe.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===oe.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===oe.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===oe.Date}static isTime(t){return(t==null?void 0:t.typeId)===oe.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===oe.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===oe.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===oe.Duration}static isList(t){return(t==null?void 0:t.typeId)===oe.List}static isStruct(t){return(t==null?void 0:t.typeId)===oe.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===oe.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===oe.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===oe.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===oe.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===oe.Dictionary}static isDenseUnion(t){return Sn.isUnion(t)&&t.mode===pl.Dense}static isSparseUnion(t){return Sn.isUnion(t)&&t.mode===pl.Sparse}constructor(t){this.typeId=t}}nRe=Symbol.toStringTag;Sn[nRe]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(Sn.prototype);class Vm extends Sn{constructor(){super(oe.Null)}toString(){return"Null"}}rRe=Symbol.toStringTag;Vm[rRe]=(e=>e[Symbol.toStringTag]="Null")(Vm.prototype);class ml extends Sn{constructor(t,n){super(oe.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}iRe=Symbol.toStringTag;ml[iRe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(ml.prototype);class $J extends ml{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class LJ extends ml{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class dy extends ml{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class FJ extends ml{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class jJ extends ml{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class BJ extends ml{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class zJ extends ml{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class UJ extends ml{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty($J.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(LJ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(dy.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(FJ.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(jJ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(BJ.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(zJ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(UJ.prototype,"ArrayType",{value:BigUint64Array});class fy extends Sn{constructor(t){super(oe.Float),this.precision=t}get ArrayType(){switch(this.precision){case eo.HALF:return Uint16Array;case eo.SINGLE:return Float32Array;case eo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}sRe=Symbol.toStringTag;fy[sRe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(fy.prototype);class SRe extends fy{constructor(){super(eo.HALF)}}class VJ extends fy{constructor(){super(eo.SINGLE)}}class HJ extends fy{constructor(){super(eo.DOUBLE)}}Object.defineProperty(SRe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(VJ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(HJ.prototype,"ArrayType",{value:Float64Array});class wI extends Sn{constructor(){super(oe.Binary)}toString(){return"Binary"}}oRe=Symbol.toStringTag;wI[oRe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(wI.prototype);class n$ extends Sn{constructor(){super(oe.LargeBinary)}toString(){return"LargeBinary"}}aRe=Symbol.toStringTag;n$[aRe]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(n$.prototype);class fx extends Sn{constructor(){super(oe.Utf8)}toString(){return"Utf8"}}lRe=Symbol.toStringTag;fx[lRe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(fx.prototype);class r$ extends Sn{constructor(){super(oe.LargeUtf8)}toString(){return"LargeUtf8"}}uRe=Symbol.toStringTag;r$[uRe]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(r$.prototype);class EI extends Sn{constructor(){super(oe.Bool)}toString(){return"Bool"}}cRe=Symbol.toStringTag;EI[cRe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(EI.prototype);class i$ extends Sn{constructor(t,n,r=128){super(oe.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}dRe=Symbol.toStringTag;i$[dRe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(i$.prototype);class hx extends Sn{constructor(t){super(oe.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Jc[this.unit]}>`}}fRe=Symbol.toStringTag;hx[fRe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(hx.prototype);class UCt extends hx{constructor(){super(Jc.DAY)}}class VCt extends hx{constructor(){super(Jc.MILLISECOND)}}class Hm extends Sn{constructor(t,n){super(oe.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}hRe=Symbol.toStringTag;Hm[hRe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Hm.prototype);class HCt extends Hm{constructor(){super(Wt.SECOND,32)}}class qCt extends Hm{constructor(){super(Wt.MILLISECOND,32)}}class WCt extends Hm{constructor(){super(Wt.MICROSECOND,64)}}class GCt extends Hm{constructor(){super(Wt.NANOSECOND,64)}}class s$ extends Sn{constructor(t,n){super(oe.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}pRe=Symbol.toStringTag;s$[pRe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(s$.prototype);class px extends Sn{constructor(t){super(oe.Interval),this.unit=t}toString(){return`Interval<${Zc[this.unit]}>`}}mRe=Symbol.toStringTag;px[mRe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(px.prototype);class YCt extends px{constructor(){super(Zc.DAY_TIME)}}class KCt extends px{constructor(){super(Zc.YEAR_MONTH)}}class o$ extends Sn{constructor(t){super(oe.Duration),this.unit=t}toString(){return`Duration<${Wt[this.unit]}>`}}gRe=Symbol.toStringTag;o$[gRe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(o$.prototype);class mx extends Sn{constructor(t){super(oe.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}yRe=Symbol.toStringTag;mx[yRe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(mx.prototype);class Ca extends Sn{constructor(t){super(oe.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}vRe=Symbol.toStringTag;Ca[vRe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(Ca.prototype);class xI extends Sn{constructor(t,n,r){super(oe.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}bRe=Symbol.toStringTag;xI[bRe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(xI.prototype);class a$ extends Sn{constructor(t){super(oe.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}_Re=Symbol.toStringTag;a$[_Re]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(a$.prototype);class gx extends Sn{constructor(t,n){super(oe.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}wRe=Symbol.toStringTag;gx[wRe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(gx.prototype);class SI extends Sn{constructor(t,n=!1){var r,i,s;if(super(oe.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}ERe=Symbol.toStringTag;SI[ERe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(SI.prototype);const XCt=(e=>()=>++e)(-1);class hy extends Sn{constructor(t,n,r,i){super(oe.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?XCt():Jo(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}xRe=Symbol.toStringTag;hy[xRe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(hy.prototype);function sh(e){const t=e;switch(e.typeId){case oe.Decimal:return e.bitWidth/32;case oe.Timestamp:return 2;case oe.Date:return 1+t.unit;case oe.Interval:return 1+t.unit;case oe.FixedSizeList:return t.listSize;case oe.FixedSizeBinary:return t.byteWidth;default:return 1}}class zn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return QCt(this,t,n)}getVisitFnByTypeId(t,n=!0){return fw(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function QCt(e,t,n=!0){return typeof t=="number"?fw(e,t,n):typeof t=="string"&&t in oe?fw(e,oe[t],n):t&&t instanceof Sn?fw(e,Mhe(t),n):t!=null&&t.type&&t.type instanceof Sn?fw(e,Mhe(t.type),n):fw(e,oe.NONE,n)}function fw(e,t,n=!0){let r=null;switch(t){case oe.Null:r=e.visitNull;break;case oe.Bool:r=e.visitBool;break;case oe.Int:r=e.visitInt;break;case oe.Int8:r=e.visitInt8||e.visitInt;break;case oe.Int16:r=e.visitInt16||e.visitInt;break;case oe.Int32:r=e.visitInt32||e.visitInt;break;case oe.Int64:r=e.visitInt64||e.visitInt;break;case oe.Uint8:r=e.visitUint8||e.visitInt;break;case oe.Uint16:r=e.visitUint16||e.visitInt;break;case oe.Uint32:r=e.visitUint32||e.visitInt;break;case oe.Uint64:r=e.visitUint64||e.visitInt;break;case oe.Float:r=e.visitFloat;break;case oe.Float16:r=e.visitFloat16||e.visitFloat;break;case oe.Float32:r=e.visitFloat32||e.visitFloat;break;case oe.Float64:r=e.visitFloat64||e.visitFloat;break;case oe.Utf8:r=e.visitUtf8;break;case oe.LargeUtf8:r=e.visitLargeUtf8;break;case oe.Binary:r=e.visitBinary;break;case oe.LargeBinary:r=e.visitLargeBinary;break;case oe.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case oe.Date:r=e.visitDate;break;case oe.DateDay:r=e.visitDateDay||e.visitDate;break;case oe.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case oe.Timestamp:r=e.visitTimestamp;break;case oe.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case oe.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case oe.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case oe.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case oe.Time:r=e.visitTime;break;case oe.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case oe.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case oe.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case oe.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case oe.Decimal:r=e.visitDecimal;break;case oe.List:r=e.visitList;break;case oe.Struct:r=e.visitStruct;break;case oe.Union:r=e.visitUnion;break;case oe.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case oe.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case oe.Dictionary:r=e.visitDictionary;break;case oe.Interval:r=e.visitInterval;break;case oe.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case oe.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case oe.Duration:r=e.visitDuration;break;case oe.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case oe.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case oe.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case oe.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case oe.FixedSizeList:r=e.visitFixedSizeList;break;case oe.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${oe[t]}'`)}function Mhe(e){switch(e.typeId){case oe.Null:return oe.Null;case oe.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?oe.Int8:oe.Uint8;case 16:return n?oe.Int16:oe.Uint16;case 32:return n?oe.Int32:oe.Uint32;case 64:return n?oe.Int64:oe.Uint64}return oe.Int}case oe.Float:switch(e.precision){case eo.HALF:return oe.Float16;case eo.SINGLE:return oe.Float32;case eo.DOUBLE:return oe.Float64}return oe.Float;case oe.Binary:return oe.Binary;case oe.LargeBinary:return oe.LargeBinary;case oe.Utf8:return oe.Utf8;case oe.LargeUtf8:return oe.LargeUtf8;case oe.Bool:return oe.Bool;case oe.Decimal:return oe.Decimal;case oe.Time:switch(e.unit){case Wt.SECOND:return oe.TimeSecond;case Wt.MILLISECOND:return oe.TimeMillisecond;case Wt.MICROSECOND:return oe.TimeMicrosecond;case Wt.NANOSECOND:return oe.TimeNanosecond}return oe.Time;case oe.Timestamp:switch(e.unit){case Wt.SECOND:return oe.TimestampSecond;case Wt.MILLISECOND:return oe.TimestampMillisecond;case Wt.MICROSECOND:return oe.TimestampMicrosecond;case Wt.NANOSECOND:return oe.TimestampNanosecond}return oe.Timestamp;case oe.Date:switch(e.unit){case Jc.DAY:return oe.DateDay;case Jc.MILLISECOND:return oe.DateMillisecond}return oe.Date;case oe.Interval:switch(e.unit){case Zc.DAY_TIME:return oe.IntervalDayTime;case Zc.YEAR_MONTH:return oe.IntervalYearMonth}return oe.Interval;case oe.Duration:switch(e.unit){case Wt.SECOND:return oe.DurationSecond;case Wt.MILLISECOND:return oe.DurationMillisecond;case Wt.MICROSECOND:return oe.DurationMicrosecond;case Wt.NANOSECOND:return oe.DurationNanosecond}return oe.Duration;case oe.Map:return oe.Map;case oe.List:return oe.List;case oe.Struct:return oe.Struct;case oe.Union:switch(e.mode){case pl.Dense:return oe.DenseUnion;case pl.Sparse:return oe.SparseUnion}return oe.Union;case oe.FixedSizeBinary:return oe.FixedSizeBinary;case oe.FixedSizeList:return oe.FixedSizeList;case oe.Dictionary:return oe.Dictionary}throw new Error(`Unrecognized type '${oe[e.typeId]}'`)}zn.prototype.visitInt8=null;zn.prototype.visitInt16=null;zn.prototype.visitInt32=null;zn.prototype.visitInt64=null;zn.prototype.visitUint8=null;zn.prototype.visitUint16=null;zn.prototype.visitUint32=null;zn.prototype.visitUint64=null;zn.prototype.visitFloat16=null;zn.prototype.visitFloat32=null;zn.prototype.visitFloat64=null;zn.prototype.visitDateDay=null;zn.prototype.visitDateMillisecond=null;zn.prototype.visitTimestampSecond=null;zn.prototype.visitTimestampMillisecond=null;zn.prototype.visitTimestampMicrosecond=null;zn.prototype.visitTimestampNanosecond=null;zn.prototype.visitTimeSecond=null;zn.prototype.visitTimeMillisecond=null;zn.prototype.visitTimeMicrosecond=null;zn.prototype.visitTimeNanosecond=null;zn.prototype.visitDenseUnion=null;zn.prototype.visitSparseUnion=null;zn.prototype.visitIntervalDayTime=null;zn.prototype.visitIntervalYearMonth=null;zn.prototype.visitDuration=null;zn.prototype.visitDurationSecond=null;zn.prototype.visitDurationMillisecond=null;zn.prototype.visitDurationMicrosecond=null;zn.prototype.visitDurationNanosecond=null;const TRe=new Float64Array(1),j_=new Uint32Array(TRe.buffer);function CRe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function ARe(e){if(e!==e)return 32256;TRe[0]=e;const t=(j_[1]&2147483648)>>16&65535;let n=j_[1]&2146435072,r=0;return n>=1089470464?j_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(j_[1]&1048575)>>10):n<=1056964608?(r=1048576+(j_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(j_[1]&1048575)+512>>10),t|n|r&65535}class ln extends zn{}function fn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const JCt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},qJ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},ZCt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},e2t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},IRe=(e,t,n,r)=>{if(n+1<t.length){const i=Jo(t[n]),s=Jo(t[n+1]);e.set(r.subarray(0,s-i),i)}},t2t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},ug=({values:e},t,n)=>{e[t]=n},WJ=({values:e},t,n)=>{e[t]=n},kRe=({values:e},t,n)=>{e[t]=ARe(n)},n2t=(e,t,n)=>{switch(e.type.precision){case eo.HALF:return kRe(e,t,n);case eo.SINGLE:case eo.DOUBLE:return WJ(e,t,n)}},GJ=({values:e},t,n)=>{JCt(e,t,n.valueOf())},YJ=({values:e},t,n)=>{qJ(e,t*2,n.valueOf())},RRe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},PRe=({values:e,valueOffsets:t},n,r)=>IRe(e,t,n,r),NRe=({values:e,valueOffsets:t},n,r)=>IRe(e,t,n,V6(r)),ORe=(e,t,n)=>{e.type.unit===Jc.DAY?GJ(e,t,n):YJ(e,t,n)},KJ=({values:e},t,n)=>qJ(e,t*2,n/1e3),XJ=({values:e},t,n)=>qJ(e,t*2,n),QJ=({values:e},t,n)=>ZCt(e,t*2,n),JJ=({values:e},t,n)=>e2t(e,t*2,n),DRe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return KJ(e,t,n);case Wt.MILLISECOND:return XJ(e,t,n);case Wt.MICROSECOND:return QJ(e,t,n);case Wt.NANOSECOND:return JJ(e,t,n)}},ZJ=({values:e},t,n)=>{e[t]=n},eZ=({values:e},t,n)=>{e[t]=n},tZ=({values:e},t,n)=>{e[t]=n},nZ=({values:e},t,n)=>{e[t]=n},MRe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return ZJ(e,t,n);case Wt.MILLISECOND:return eZ(e,t,n);case Wt.MICROSECOND:return tZ(e,t,n);case Wt.NANOSECOND:return nZ(e,t,n)}},$Re=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},r2t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=ed.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],l=i[t+1];a<l;)s(r,a++,n.get(++o))},i2t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=ed.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const l=n instanceof Map?n.entries():Object.entries(n);for(const u of l)if(s(r,o,u),++o>=a)break},s2t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),o2t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),a2t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),l2t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),u2t=(e,t,n)=>{const r=e.type.children.map(s=>ed.getVisitFn(s.type)),i=n instanceof Map?a2t(t,n):n instanceof Cr?o2t(t,n):Array.isArray(n)?s2t(t,n):l2t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},c2t=(e,t,n)=>{e.type.mode===pl.Dense?LRe(e,t,n):FRe(e,t,n)},LRe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ed.visit(i,e.valueOffsets[t],n)},FRe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];ed.visit(i,t,n)},d2t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},jRe=(e,t,n)=>{e.type.unit===Zc.DAY_TIME?rZ(e,t,n):iZ(e,t,n)},rZ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},iZ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},sZ=({values:e},t,n)=>{e[t]=n},oZ=({values:e},t,n)=>{e[t]=n},aZ=({values:e},t,n)=>{e[t]=n},lZ=({values:e},t,n)=>{e[t]=n},BRe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return sZ(e,t,n);case Wt.MILLISECOND:return oZ(e,t,n);case Wt.MICROSECOND:return aZ(e,t,n);case Wt.NANOSECOND:return lZ(e,t,n)}},f2t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=ed.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};ln.prototype.visitBool=fn(t2t);ln.prototype.visitInt=fn(ug);ln.prototype.visitInt8=fn(ug);ln.prototype.visitInt16=fn(ug);ln.prototype.visitInt32=fn(ug);ln.prototype.visitInt64=fn(ug);ln.prototype.visitUint8=fn(ug);ln.prototype.visitUint16=fn(ug);ln.prototype.visitUint32=fn(ug);ln.prototype.visitUint64=fn(ug);ln.prototype.visitFloat=fn(n2t);ln.prototype.visitFloat16=fn(kRe);ln.prototype.visitFloat32=fn(WJ);ln.prototype.visitFloat64=fn(WJ);ln.prototype.visitUtf8=fn(NRe);ln.prototype.visitLargeUtf8=fn(NRe);ln.prototype.visitBinary=fn(PRe);ln.prototype.visitLargeBinary=fn(PRe);ln.prototype.visitFixedSizeBinary=fn(RRe);ln.prototype.visitDate=fn(ORe);ln.prototype.visitDateDay=fn(GJ);ln.prototype.visitDateMillisecond=fn(YJ);ln.prototype.visitTimestamp=fn(DRe);ln.prototype.visitTimestampSecond=fn(KJ);ln.prototype.visitTimestampMillisecond=fn(XJ);ln.prototype.visitTimestampMicrosecond=fn(QJ);ln.prototype.visitTimestampNanosecond=fn(JJ);ln.prototype.visitTime=fn(MRe);ln.prototype.visitTimeSecond=fn(ZJ);ln.prototype.visitTimeMillisecond=fn(eZ);ln.prototype.visitTimeMicrosecond=fn(tZ);ln.prototype.visitTimeNanosecond=fn(nZ);ln.prototype.visitDecimal=fn($Re);ln.prototype.visitList=fn(r2t);ln.prototype.visitStruct=fn(u2t);ln.prototype.visitUnion=fn(c2t);ln.prototype.visitDenseUnion=fn(LRe);ln.prototype.visitSparseUnion=fn(FRe);ln.prototype.visitDictionary=fn(d2t);ln.prototype.visitInterval=fn(jRe);ln.prototype.visitIntervalDayTime=fn(rZ);ln.prototype.visitIntervalYearMonth=fn(iZ);ln.prototype.visitDuration=fn(BRe);ln.prototype.visitDurationSecond=fn(sZ);ln.prototype.visitDurationMillisecond=fn(oZ);ln.prototype.visitDurationMicrosecond=fn(aZ);ln.prototype.visitDurationNanosecond=fn(lZ);ln.prototype.visitFixedSizeList=fn(f2t);ln.prototype.visitMap=fn(i2t);const ed=new ln,Md=Symbol.for("parent"),yE=Symbol.for("rowIndex");class uZ{constructor(t,n){return this[Md]=t,this[yE]=n,new Proxy(this,new p2t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[yE],n=this[Md],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=lu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${hb(t)}: ${hb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new h2t(this[Md],this[yE])}}class h2t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,lu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(uZ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Md]:{writable:!0,enumerable:!1,configurable:!1,value:null},[yE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class p2t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Md].type.children.map(n=>n.name)}has(t,n){return t[Md].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Md].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Md].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=lu.visit(t[Md].children[r],t[yE]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Md].type.children.findIndex(s=>s.name===n);return i!==-1?(ed.visit(t[Md].children[i],t[yE],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Zt extends zn{}function un(e){return(t,n)=>t.getValid(n)?e(t,n):null}const m2t=(e,t)=>864e5*e[t],cZ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),g2t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,y2t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,zRe=e=>new Date(e),v2t=(e,t)=>zRe(m2t(e,t)),b2t=(e,t)=>zRe(cZ(e,t)),_2t=(e,t)=>null,URe=(e,t,n)=>{if(n+1>=t.length)return null;const r=Jo(t[n]),i=Jo(t[n+1]);return e.subarray(r,i)},w2t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},VRe=({values:e},t)=>v2t(e,t),HRe=({values:e},t)=>b2t(e,t*2),nv=({stride:e,values:t},n)=>t[e*n],E2t=({stride:e,values:t},n)=>CRe(t[e*n]),qRe=({values:e},t)=>e[t],x2t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),WRe=({values:e,valueOffsets:t},n)=>URe(e,t,n),GRe=({values:e,valueOffsets:t},n)=>{const r=URe(e,t,n);return r!==null?aH(r):null},S2t=({values:e},t)=>e[t],T2t=({type:e,values:t},n)=>e.precision!==eo.HALF?t[n]:CRe(t[n]),C2t=(e,t)=>e.type.unit===Jc.DAY?VRe(e,t):HRe(e,t),YRe=({values:e},t)=>1e3*cZ(e,t*2),KRe=({values:e},t)=>cZ(e,t*2),XRe=({values:e},t)=>g2t(e,t*2),QRe=({values:e},t)=>y2t(e,t*2),A2t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return YRe(e,t);case Wt.MILLISECOND:return KRe(e,t);case Wt.MICROSECOND:return XRe(e,t);case Wt.NANOSECOND:return QRe(e,t)}},JRe=({values:e},t)=>e[t],ZRe=({values:e},t)=>e[t],ePe=({values:e},t)=>e[t],tPe=({values:e},t)=>e[t],I2t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return JRe(e,t);case Wt.MILLISECOND:return ZRe(e,t);case Wt.MICROSECOND:return ePe(e,t);case Wt.NANOSECOND:return tPe(e,t)}},k2t=({values:e,stride:t},n)=>MJ.decimal(e.subarray(t*n,t*(n+1))),R2t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,l=i[0].slice(s,o-s);return new Cr([l])},P2t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new W6(o.slice(i,s-i))},N2t=(e,t)=>new uZ(e,t),O2t=(e,t)=>e.type.mode===pl.Dense?nPe(e,t):rPe(e,t),nPe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return lu.visit(r,e.valueOffsets[t])},rPe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return lu.visit(r,t)},D2t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},M2t=(e,t)=>e.type.unit===Zc.DAY_TIME?iPe(e,t):sPe(e,t),iPe=({values:e},t)=>e.subarray(2*t,2*(t+1)),sPe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},oPe=({values:e},t)=>e[t],aPe=({values:e},t)=>e[t],lPe=({values:e},t)=>e[t],uPe=({values:e},t)=>e[t],$2t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return oPe(e,t);case Wt.MILLISECOND:return aPe(e,t);case Wt.MICROSECOND:return lPe(e,t);case Wt.NANOSECOND:return uPe(e,t)}},L2t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new Cr([s])};Zt.prototype.visitNull=un(_2t);Zt.prototype.visitBool=un(w2t);Zt.prototype.visitInt=un(S2t);Zt.prototype.visitInt8=un(nv);Zt.prototype.visitInt16=un(nv);Zt.prototype.visitInt32=un(nv);Zt.prototype.visitInt64=un(qRe);Zt.prototype.visitUint8=un(nv);Zt.prototype.visitUint16=un(nv);Zt.prototype.visitUint32=un(nv);Zt.prototype.visitUint64=un(qRe);Zt.prototype.visitFloat=un(T2t);Zt.prototype.visitFloat16=un(E2t);Zt.prototype.visitFloat32=un(nv);Zt.prototype.visitFloat64=un(nv);Zt.prototype.visitUtf8=un(GRe);Zt.prototype.visitLargeUtf8=un(GRe);Zt.prototype.visitBinary=un(WRe);Zt.prototype.visitLargeBinary=un(WRe);Zt.prototype.visitFixedSizeBinary=un(x2t);Zt.prototype.visitDate=un(C2t);Zt.prototype.visitDateDay=un(VRe);Zt.prototype.visitDateMillisecond=un(HRe);Zt.prototype.visitTimestamp=un(A2t);Zt.prototype.visitTimestampSecond=un(YRe);Zt.prototype.visitTimestampMillisecond=un(KRe);Zt.prototype.visitTimestampMicrosecond=un(XRe);Zt.prototype.visitTimestampNanosecond=un(QRe);Zt.prototype.visitTime=un(I2t);Zt.prototype.visitTimeSecond=un(JRe);Zt.prototype.visitTimeMillisecond=un(ZRe);Zt.prototype.visitTimeMicrosecond=un(ePe);Zt.prototype.visitTimeNanosecond=un(tPe);Zt.prototype.visitDecimal=un(k2t);Zt.prototype.visitList=un(R2t);Zt.prototype.visitStruct=un(N2t);Zt.prototype.visitUnion=un(O2t);Zt.prototype.visitDenseUnion=un(nPe);Zt.prototype.visitSparseUnion=un(rPe);Zt.prototype.visitDictionary=un(D2t);Zt.prototype.visitInterval=un(M2t);Zt.prototype.visitIntervalDayTime=un(iPe);Zt.prototype.visitIntervalYearMonth=un(sPe);Zt.prototype.visitDuration=un($2t);Zt.prototype.visitDurationSecond=un(oPe);Zt.prototype.visitDurationMillisecond=un(aPe);Zt.prototype.visitDurationMicrosecond=un(lPe);Zt.prototype.visitDurationNanosecond=un(uPe);Zt.prototype.visitFixedSizeList=un(L2t);Zt.prototype.visitMap=un(P2t);const lu=new Zt,Wd=Symbol.for("keys"),vE=Symbol.for("vals");class W6{constructor(t){return this[Wd]=new Cr([t.children[0]]).memoize(),this[vE]=t.children[1],new Proxy(this,new j2t)}[Symbol.iterator](){return new F2t(this[Wd],this[vE])}get size(){return this[Wd].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Wd],n=this[vE],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=lu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${hb(t)}: ${hb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class F2t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),lu.visit(this.vals,t)]})}}class j2t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Wd].toArray().map(String)}has(t,n){return t[Wd].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Wd].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Wd].indexOf(n);if(r!==-1){const i=lu.visit(Reflect.get(t,vE),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Wd].indexOf(n);return i!==-1?(ed.visit(Reflect.get(t,vE),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(W6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Wd]:{writable:!0,enumerable:!1,configurable:!1,value:null},[vE]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let $he;function cPe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&($he=s,s=o,o=$he),o>i&&(o=i),r?r(e,s,o):[s,o]}const Lhe=e=>e!==e;function kS(e){if(typeof e!=="object"||e===null)return Lhe(e)?Lhe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?OCt(e,n):!1:e instanceof Map?z2t(e):Array.isArray(e)?B2t(e):e instanceof Cr?U2t(e):V2t(e,!0)}function B2t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=kS(e[n]);return G6(t)}function z2t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=kS(r);return G6(n)}function U2t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=kS(e.get(n));return G6(t)}function V2t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=kS(e[n[i]]);return G6(r,n)}function G6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return H2t(e,n);case Map:return Fhe(e,n,n.keys());case W6:case uZ:case Object:case void 0:return Fhe(e,n,t||Object.keys(n))}return n instanceof Cr?q2t(e,n):!1}}function H2t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function q2t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Fhe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let l=s.next(),u=r.next(),c=i.next();for(;o<a&&!u.done&&!c.done&&!l.done&&!(u.value!==c.value||!e[o](l.value));++o,u=r.next(),c=i.next(),l=s.next());return o===a&&u.done&&c.done&&l.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function dPe(e,t,n,r){return(n&1<<r)!==0}function W2t(e,t,n,r){return(n&1<<r)>>r}function l$(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):fPe(new dZ(n,e,t,null,dPe)).subarray(0,r)),i}return n}function fPe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class dZ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function hH(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new dZ(e,t,n-t,e,W2t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return hH(e,t,i)+hH(e,r,n)+G2t(e,i>>3,r-i>>3)}function G2t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=t9(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=t9(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=t9(s.getUint8(i)),i+=1;return r}function t9(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Y2t=-1;class Or{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Sn.isSparseUnion(t)?this.children.some(n=>n.nullable):Sn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Sn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Y2t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-hH(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let l;s instanceof Or?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=sh(t),s&&((l=s[0])&&(this.valueOffsets=l),(l=s[1])&&(this.values=l),(l=s[2])&&(this.nullBitmap=l),(l=s[3])&&(this.typeIds=l)))}getValid(t){const{type:n}=this;if(Sn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===pl.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Sn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===pl.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,l=o+t,u=1<<l%8,c=l>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(l$(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const d=s[c];r=(d&u)!==0,n?s[c]=d|u:s[c]=d&~u}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Or(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,l=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,l,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===oe.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(l$(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Hp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Hp.TYPE])&&(o[Hp.TYPE]=s.subarray(t,t+n)),(s=o[Hp.OFFSET])&&(o[Hp.OFFSET]=s.subarray(t,t+n+1))||(s=o[Hp.DATA])&&(o[Hp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Or.prototype.children=Object.freeze([]);class tA extends zn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Or(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.data),s=hr(t.nullBitmap),o=qT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Or(n,r,a,l,[o,i,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.data),s=hr(t.nullBitmap),o=She(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Or(n,r,a,l,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.data),s=hr(t.nullBitmap),o=qT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Or(n,r,a,l,[o,i,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.data),s=hr(t.nullBitmap),o=She(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Or(n,r,a,l,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/sh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/sh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/sh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/sh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/sh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=hr(t.nullBitmap),o=qT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Or(n,r,a,l,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=hr(t.nullBitmap),{length:o=i.reduce((l,{length:u})=>Math.max(l,u),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=zs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Sn.isSparseUnion(n))return new Or(n,r,o,a,[void 0,void 0,void 0,s],i);const l=qT(t.valueOffsets);return new Or(n,r,o,a,[l,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.indices.ArrayType,t.data),{["dictionary"]:o=new Cr([new tA().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Or(n,r,a,l,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/sh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=hr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new tA().visit({type:n.valueType})}=t,s=hr(t.nullBitmap),{["length"]:o=i.length/sh(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new tA().visit({type:n.childType})}=t,s=hr(t.nullBitmap),o=qT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:l=t.nullBitmap?-1:0}=t;return new Or(n,r,a,l,[o,void 0,s],[i])}}const K2t=new tA;function wa(e){return K2t.visit(e)}class jhe{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function X2t(e){return e.some(t=>t.nullable)}function hPe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function pPe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function mPe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],l=t[s],{length:u}=a;if(l>=r)break;if(n>=l+u)continue;if(l>=n&&l+u<=r){i.push(a);continue}const c=Math.max(0,n-l),d=Math.min(r-l,u);i.push(a.slice(c,d-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function fZ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function hZ(e,t){return e.getValid(t)}function u$(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return fZ(r,this._offsets,n,t)}}function gPe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=fZ(s,this._offsets,r,n);return t=void 0,o}}function yPe(e){let t;function n(r,i,s){let o=s,a=0,l=0;for(let u=i-1,c=r.length;++u<c;){const d=r[u];if(~(a=e(d,t,o)))return l+a;o=0,l+=d.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):fZ(s,this._offsets,i,n);return t=void 0,o}}class en extends zn{}function Q2t(e,t){return t===null&&e.length>0?0:-1}function J2t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new dZ(n,e.offset+(t||0),e.length,n,dPe)){if(!i)return r;++r}return-1}function gn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case oe.Union:break;case oe.Dictionary:break;default:return J2t(e,n)}const r=lu.getVisitFn(e),i=kS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function vPe(e,t,n){const r=lu.getVisitFn(e),i=kS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}en.prototype.visitNull=Q2t;en.prototype.visitBool=gn;en.prototype.visitInt=gn;en.prototype.visitInt8=gn;en.prototype.visitInt16=gn;en.prototype.visitInt32=gn;en.prototype.visitInt64=gn;en.prototype.visitUint8=gn;en.prototype.visitUint16=gn;en.prototype.visitUint32=gn;en.prototype.visitUint64=gn;en.prototype.visitFloat=gn;en.prototype.visitFloat16=gn;en.prototype.visitFloat32=gn;en.prototype.visitFloat64=gn;en.prototype.visitUtf8=gn;en.prototype.visitLargeUtf8=gn;en.prototype.visitBinary=gn;en.prototype.visitLargeBinary=gn;en.prototype.visitFixedSizeBinary=gn;en.prototype.visitDate=gn;en.prototype.visitDateDay=gn;en.prototype.visitDateMillisecond=gn;en.prototype.visitTimestamp=gn;en.prototype.visitTimestampSecond=gn;en.prototype.visitTimestampMillisecond=gn;en.prototype.visitTimestampMicrosecond=gn;en.prototype.visitTimestampNanosecond=gn;en.prototype.visitTime=gn;en.prototype.visitTimeSecond=gn;en.prototype.visitTimeMillisecond=gn;en.prototype.visitTimeMicrosecond=gn;en.prototype.visitTimeNanosecond=gn;en.prototype.visitDecimal=gn;en.prototype.visitList=gn;en.prototype.visitStruct=gn;en.prototype.visitUnion=gn;en.prototype.visitDenseUnion=vPe;en.prototype.visitSparseUnion=vPe;en.prototype.visitDictionary=gn;en.prototype.visitInterval=gn;en.prototype.visitIntervalDayTime=gn;en.prototype.visitIntervalYearMonth=gn;en.prototype.visitDuration=gn;en.prototype.visitDurationSecond=gn;en.prototype.visitDurationMillisecond=gn;en.prototype.visitDurationMicrosecond=gn;en.prototype.visitDurationNanosecond=gn;en.prototype.visitFixedSizeList=gn;en.prototype.visitMap=gn;const c$=new en;class tn extends zn{}function cn(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===oe.Timestamp||t instanceof ml&&t.bitWidth!==64||t instanceof Hm&&t.bitWidth!==64||t instanceof fy&&t.precision!==eo.HALF))return new jhe(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new jhe(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Z2t(o)})}class Z2t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}tn.prototype.visitNull=cn;tn.prototype.visitBool=cn;tn.prototype.visitInt=cn;tn.prototype.visitInt8=cn;tn.prototype.visitInt16=cn;tn.prototype.visitInt32=cn;tn.prototype.visitInt64=cn;tn.prototype.visitUint8=cn;tn.prototype.visitUint16=cn;tn.prototype.visitUint32=cn;tn.prototype.visitUint64=cn;tn.prototype.visitFloat=cn;tn.prototype.visitFloat16=cn;tn.prototype.visitFloat32=cn;tn.prototype.visitFloat64=cn;tn.prototype.visitUtf8=cn;tn.prototype.visitLargeUtf8=cn;tn.prototype.visitBinary=cn;tn.prototype.visitLargeBinary=cn;tn.prototype.visitFixedSizeBinary=cn;tn.prototype.visitDate=cn;tn.prototype.visitDateDay=cn;tn.prototype.visitDateMillisecond=cn;tn.prototype.visitTimestamp=cn;tn.prototype.visitTimestampSecond=cn;tn.prototype.visitTimestampMillisecond=cn;tn.prototype.visitTimestampMicrosecond=cn;tn.prototype.visitTimestampNanosecond=cn;tn.prototype.visitTime=cn;tn.prototype.visitTimeSecond=cn;tn.prototype.visitTimeMillisecond=cn;tn.prototype.visitTimeMicrosecond=cn;tn.prototype.visitTimeNanosecond=cn;tn.prototype.visitDecimal=cn;tn.prototype.visitList=cn;tn.prototype.visitStruct=cn;tn.prototype.visitUnion=cn;tn.prototype.visitDenseUnion=cn;tn.prototype.visitSparseUnion=cn;tn.prototype.visitDictionary=cn;tn.prototype.visitInterval=cn;tn.prototype.visitIntervalDayTime=cn;tn.prototype.visitIntervalYearMonth=cn;tn.prototype.visitDuration=cn;tn.prototype.visitDurationSecond=cn;tn.prototype.visitDurationMillisecond=cn;tn.prototype.visitDurationMicrosecond=cn;tn.prototype.visitDurationNanosecond=cn;tn.prototype.visitFixedSizeList=cn;tn.prototype.visitMap=cn;const pZ=new tn;var bPe;const _Pe={},wPe={};class Cr{constructor(t){var n,r,i;const s=t[0]instanceof Cr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Or)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:l,indexOf:u}=_Pe[o.typeId],c=s[0];this.isValid=d=>hZ(c,d),this.get=d=>a(c,d),this.set=(d,f)=>l(c,d,f),this.indexOf=d=>u(c,d),this._offsets=[0,c.length];break}default:Object.setPrototypeOf(this,wPe[o.typeId]),this._offsets=pPe(s);break}this.data=s,this.type=o,this.stride=sh(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return X2t(this.data)}get nullCount(){return hPe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${oe[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return pZ.visit(this)}concat(...t){return new Cr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new Cr(cPe(this,t,n,({data:r,_offsets:i},s,o)=>mPe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case oe.Int:case oe.Float:case oe.Decimal:case oe.Time:case oe.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:l})=>(o.array.set(a.subarray(0,l*i),o.offset),o.offset+=l*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new Cr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Sn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Sn.isDictionary(this.type)){const t=new d$(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Cr(n)}return new d$(this)}unmemoize(){if(Sn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new Cr(n)}return this}}bPe=Symbol.toStringTag;Cr[bPe]=(e=>{e.type=Sn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(oe).map(n=>oe[n]).filter(n=>typeof n=="number"&&n!==oe.NONE);for(const n of t){const r=lu.getVisitFnByTypeId(n),i=ed.getVisitFnByTypeId(n),s=c$.getVisitFnByTypeId(n);_Pe[n]={get:r,set:i,indexOf:s},wPe[n]=Object.create(e,{isValid:{value:u$(hZ)},get:{value:u$(lu.getVisitFnByTypeId(n))},set:{value:gPe(ed.getVisitFnByTypeId(n))},indexOf:{value:yPe(c$.getVisitFnByTypeId(n))}})}return"Vector"})(Cr.prototype);class d$ extends Cr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const l=n.call(this,o);return s[o]=l,l}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new d$(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Cr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function eAt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${tAt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function tAt(e){return typeof e!="bigint"?hb(e):`${hb(e)}n`}function n9(e,t){const n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function Bhe(e,t=0){return e.length>=t?e.subarray(0,t):lH(new e.constructor(t),e,0)}class aR{constructor(t,n=0,r=1){this.length=Math.ceil(n/r),this.buffer=new t(this.length),this.stride=r,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?n9(r*1,this.BYTES_PER_ELEMENT):n9(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=n9(t*this.stride,this.BYTES_PER_ELEMENT);const n=Bhe(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=Bhe(this.buffer,t)}}class lR extends aR{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class EPe extends lR{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class xPe extends lR{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&r>=0&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}}let yu=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=sh(t),this._nulls=new EPe,n&&n.length>0&&(this._isValid=eAt(n))}toVector(){return new Cr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,l)=>a+l.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:l,_offsets:u,_values:c,_nulls:d}=this;(n=l==null?void 0:l.flush(o))?i=u==null?void 0:u.flush(o):(i=u==null?void 0:u.flush(o))?t=c==null?void 0:c.flush(u.last()):t=c==null?void 0:c.flush(o),a>0&&(r=d==null?void 0:d.flush(o));const f=this.children.map(h=>h.flush());return this.clear(),wa({type:s,length:o,nullCount:a,children:f,child:f[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};yu.prototype.length=1;yu.prototype.stride=1;yu.prototype.children=null;yu.prototype.finished=!1;yu.prototype.nullValues=null;yu.prototype._isValid=()=>!0;class cg extends yu{constructor(t){super(t),this._values=new lR(this.ArrayType,0,this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class RS extends yu{constructor(t){super(t),this._pendingLength=0,this._offsets=new xPe(t.type)}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof W6?n[Wd].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class pH{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class Tu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new Tu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Ur),(n||new Tu).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ws.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new rh).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new pH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new pH).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ws.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Br{constructor(t=[],n,r,i=Ws.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=gH(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Br(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Br(n,this.metadata)}assign(...t){const n=t[0]instanceof Br?t[0]:Array.isArray(t[0])?new Br(t[0]):new Br(t),r=[...this.fields],i=RN(RN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const l=r.findIndex(u=>u.name===a.name);return~l?(r[l]=a.clone({metadata:RN(RN(new Map,r[l].metadata),a.metadata)}))&&!1:!0}),o=gH(s,new Map);return new Br([...r,...s],i,new Map([...this.dictionaries,...o]))}}Br.prototype.fields=null;Br.prototype.metadata=null;Br.prototype.dictionaries=null;let Jr=class mH{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new mH(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],mH.new(n,r,i,s)}};Jr.prototype.type=null;Jr.prototype.name=null;Jr.prototype.nullable=null;Jr.prototype.metadata=null;function RN(e,t){return new Map([...e||new Map,...t||new Map])}function gH(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Sn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&gH(s.children,t)}return t}var nAt=Qke,rAt=J3;class yH{static decode(t){t=new rAt(hr(t));const n=Tu.getRootAsFooter(t),r=Br.decode(n.schema(),new Map,n.version());return new iAt(r,n)}static encode(t){const n=new nAt,r=Br.encode(n,t.schema);Tu.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())py.encode(n,o);const i=n.endVector();Tu.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())py.encode(n,o);const s=n.endVector();return Tu.startFooter(n),Tu.addSchema(n,r),Tu.addVersion(n,Ws.V5),Tu.addRecordBatches(n,i),Tu.addDictionaries(n,s),Tu.finishFooterBuffer(n,Tu.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ws.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class iAt extends yH{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return py.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return py.decode(n)}return null}}class py{static decode(t){return new py(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return pH.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Jo(r),this.bodyLength=Jo(n)}}const PN=Object.freeze({done:!0,value:void 0});class SPe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class sAt extends SPe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Xp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(PN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return The.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return The.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Xp(this,void 0,void 0,function*(){return yield this.abort(t),PN})}return(t){return Xp(this,void 0,void 0,function*(){return yield this.close(),PN})}read(t){return Xp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Xp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(PN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class r9 extends sAt{write(t){if((t=hr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?aH(this.toUint8Array(!0)):this.toUint8Array(!1).then(aH)}toUint8Array(t=!1){return t?Xh(this._values)[0]:Xp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var l=!0,u=k2(this),c;c=yield u.next(),n=c.done,!n;l=!0){s=c.value,l=!1;const d=s;o.push(d),a+=d.byteLength}}catch(d){r={error:d}}finally{try{!l&&!n&&(i=u.return)&&(yield i.call(u))}finally{if(r)throw r.error}}return Xh(o,a)[0]})}}class TPe extends RS{constructor(t){super(t),this._values=new aR(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,hr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const l=a.length;i.set(a,s),r.set(o,l),s+=l}}}class CPe extends RS{constructor(t){super(t),this._values=new aR(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,hr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,BigInt(0));else{const l=a.length;i.set(a,s),r.set(o,BigInt(l)),s+=l}}}class oAt extends yu{constructor(t){super(t),this._values=new EPe}setValue(t,n){this._values.set(t,+n)}}class Y6 extends cg{}Y6.prototype._setValue=ORe;class APe extends Y6{}APe.prototype._setValue=GJ;class IPe extends Y6{}IPe.prototype._setValue=YJ;class kPe extends cg{}kPe.prototype._setValue=$Re;class aAt extends yu{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new hy(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=f$({type:this.type.indices,nullValues:n}),this.dictionary=f$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class RPe extends cg{}RPe.prototype._setValue=RRe;class lAt extends yu{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new gx(this.type.listSize,new Jr(n,t.type,!0)),r}}class K6 extends cg{setValue(t,n){this._values.set(t,n)}}class uAt extends K6{setValue(t,n){super.setValue(t,ARe(n))}}class cAt extends K6{}class dAt extends K6{}class X6 extends cg{}X6.prototype._setValue=jRe;class PPe extends X6{}PPe.prototype._setValue=rZ;class NPe extends X6{}NPe.prototype._setValue=iZ;class PS extends cg{}PS.prototype._setValue=BRe;class OPe extends PS{}OPe.prototype._setValue=sZ;class DPe extends PS{}DPe.prototype._setValue=oZ;class MPe extends PS{}MPe.prototype._setValue=aZ;class $Pe extends PS{}$Pe.prototype._setValue=lZ;class dg extends cg{setValue(t,n){this._values.set(t,n)}}class fAt extends dg{}class hAt extends dg{}class pAt extends dg{}class mAt extends dg{}class gAt extends dg{}class yAt extends dg{}class vAt extends dg{}class bAt extends dg{}class _At extends RS{constructor(t){super(t),this._offsets=new xPe(t.type)}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new mx(new Jr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,l=n.set(i,a).buffer[i];for(let u=-1;++u<a;)r.set(l+u,o[u])}}}class wAt extends RS{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new SI(new Jr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const l of s.entries())if(r.set(o,l),++o>=a)break}}}class EAt extends yu{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class xAt extends yu{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new Ca([...this.type.children,new Jr(n,t.type,!0)]),r}}class NS extends cg{}NS.prototype._setValue=DRe;class LPe extends NS{}LPe.prototype._setValue=KJ;class FPe extends NS{}FPe.prototype._setValue=XJ;class jPe extends NS{}jPe.prototype._setValue=QJ;class BPe extends NS{}BPe.prototype._setValue=JJ;class OS extends cg{}OS.prototype._setValue=MRe;class zPe extends OS{}zPe.prototype._setValue=ZJ;class UPe extends OS{}UPe.prototype._setValue=eZ;class VPe extends OS{}VPe.prototype._setValue=tZ;class HPe extends OS{}HPe.prototype._setValue=nZ;class mZ extends yu{constructor(t){super(t),this._typeIds=new lR(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Jr(n,t.type)];return this.type=new xI(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class SAt extends mZ{}class TAt extends mZ{constructor(t){super(t),this._offsets=new lR(Int32Array)}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class qPe extends RS{constructor(t){super(t),this._values=new aR(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,V6(n))}_flushPending(t,n){}}qPe.prototype._flushPending=TPe.prototype._flushPending;class WPe extends RS{constructor(t){super(t),this._values=new aR(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,V6(n))}_flushPending(t,n){}}WPe.prototype._flushPending=CPe.prototype._flushPending;class CAt extends zn{visitNull(){return EAt}visitBool(){return oAt}visitInt(){return dg}visitInt8(){return fAt}visitInt16(){return hAt}visitInt32(){return pAt}visitInt64(){return mAt}visitUint8(){return gAt}visitUint16(){return yAt}visitUint32(){return vAt}visitUint64(){return bAt}visitFloat(){return K6}visitFloat16(){return uAt}visitFloat32(){return cAt}visitFloat64(){return dAt}visitUtf8(){return qPe}visitLargeUtf8(){return WPe}visitBinary(){return TPe}visitLargeBinary(){return CPe}visitFixedSizeBinary(){return RPe}visitDate(){return Y6}visitDateDay(){return APe}visitDateMillisecond(){return IPe}visitTimestamp(){return NS}visitTimestampSecond(){return LPe}visitTimestampMillisecond(){return FPe}visitTimestampMicrosecond(){return jPe}visitTimestampNanosecond(){return BPe}visitTime(){return OS}visitTimeSecond(){return zPe}visitTimeMillisecond(){return UPe}visitTimeMicrosecond(){return VPe}visitTimeNanosecond(){return HPe}visitDecimal(){return kPe}visitList(){return _At}visitStruct(){return xAt}visitUnion(){return mZ}visitDenseUnion(){return TAt}visitSparseUnion(){return SAt}visitDictionary(){return aAt}visitInterval(){return X6}visitIntervalDayTime(){return PPe}visitIntervalYearMonth(){return NPe}visitDuration(){return PS}visitDurationSecond(){return OPe}visitDurationMillisecond(){return DPe}visitDurationMicrosecond(){return MPe}visitDurationNanosecond(){return $Pe}visitFixedSizeList(){return lAt}visitMap(){return wAt}}const AAt=new CAt;class nn extends zn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function wl(e,t){return t instanceof e.constructor}function Jb(e,t){return e===t||wl(e,t)}function fg(e,t){return e===t||wl(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Q6(e,t){return e===t||wl(e,t)&&e.precision===t.precision}function IAt(e,t){return e===t||wl(e,t)&&e.byteWidth===t.byteWidth}function gZ(e,t){return e===t||wl(e,t)&&e.unit===t.unit}function uR(e,t){return e===t||wl(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function cR(e,t){return e===t||wl(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function kAt(e,t){return e===t||wl(e,t)&&e.children.length===t.children.length&&my.compareManyFields(e.children,t.children)}function RAt(e,t){return e===t||wl(e,t)&&e.children.length===t.children.length&&my.compareManyFields(e.children,t.children)}function yZ(e,t){return e===t||wl(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&my.compareManyFields(e.children,t.children)}function PAt(e,t){return e===t||wl(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&my.visit(e.indices,t.indices)&&my.visit(e.dictionary,t.dictionary)}function vZ(e,t){return e===t||wl(e,t)&&e.unit===t.unit}function dR(e,t){return e===t||wl(e,t)&&e.unit===t.unit}function NAt(e,t){return e===t||wl(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&my.compareManyFields(e.children,t.children)}function OAt(e,t){return e===t||wl(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&my.compareManyFields(e.children,t.children)}nn.prototype.visitNull=Jb;nn.prototype.visitBool=Jb;nn.prototype.visitInt=fg;nn.prototype.visitInt8=fg;nn.prototype.visitInt16=fg;nn.prototype.visitInt32=fg;nn.prototype.visitInt64=fg;nn.prototype.visitUint8=fg;nn.prototype.visitUint16=fg;nn.prototype.visitUint32=fg;nn.prototype.visitUint64=fg;nn.prototype.visitFloat=Q6;nn.prototype.visitFloat16=Q6;nn.prototype.visitFloat32=Q6;nn.prototype.visitFloat64=Q6;nn.prototype.visitUtf8=Jb;nn.prototype.visitLargeUtf8=Jb;nn.prototype.visitBinary=Jb;nn.prototype.visitLargeBinary=Jb;nn.prototype.visitFixedSizeBinary=IAt;nn.prototype.visitDate=gZ;nn.prototype.visitDateDay=gZ;nn.prototype.visitDateMillisecond=gZ;nn.prototype.visitTimestamp=uR;nn.prototype.visitTimestampSecond=uR;nn.prototype.visitTimestampMillisecond=uR;nn.prototype.visitTimestampMicrosecond=uR;nn.prototype.visitTimestampNanosecond=uR;nn.prototype.visitTime=cR;nn.prototype.visitTimeSecond=cR;nn.prototype.visitTimeMillisecond=cR;nn.prototype.visitTimeMicrosecond=cR;nn.prototype.visitTimeNanosecond=cR;nn.prototype.visitDecimal=Jb;nn.prototype.visitList=kAt;nn.prototype.visitStruct=RAt;nn.prototype.visitUnion=yZ;nn.prototype.visitDenseUnion=yZ;nn.prototype.visitSparseUnion=yZ;nn.prototype.visitDictionary=PAt;nn.prototype.visitInterval=vZ;nn.prototype.visitIntervalDayTime=vZ;nn.prototype.visitIntervalYearMonth=vZ;nn.prototype.visitDuration=dR;nn.prototype.visitDurationSecond=dR;nn.prototype.visitDurationMillisecond=dR;nn.prototype.visitDurationMicrosecond=dR;nn.prototype.visitDurationNanosecond=dR;nn.prototype.visitFixedSizeList=NAt;nn.prototype.visitMap=OAt;const my=new nn;function vH(e,t){return my.compareSchemas(e,t)}function f$(e){const t=e.type,n=new(AAt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:l}=a,u=s(a,o);n.children.push(f$(Object.assign(Object.assign({},u),{type:l})))}}return n}function i9(e,t){return DAt(e,t.map(n=>n.data.concat()))}function DAt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((d,f)=>Math.max(d,f.length),0)};let s=0,o=0,a=-1;const l=t.length;let u,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<l;)c[a]=u=t[a].shift(),o=Math.min(o,u?u.length:o);Number.isFinite(o)&&(c=MAt(n,o,c,t,i),o>0&&(r[s++]=wa({type:new Ca(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(d=>new Nu(e,d))]}function MAt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,l=r.length;++a<l;){const u=n[a],c=u==null?void 0:u.length;if(c>=t)c===t?n[a]=u:(n[a]=u.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(u.slice(t,c-t))));else{const d=e[a];e[a]=d.clone({nullable:!0}),n[a]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:wa({type:d.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var GPe;class Fl{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Br([]),this._offsets=[0],this;let i,s;t[0]instanceof Br&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=l=>{if(l){if(l instanceof Nu)return[l];if(l instanceof Fl)return l.batches;if(l instanceof Or){if(l.type instanceof Ca)return[new Nu(new Br(l.type.children),l)]}else{if(Array.isArray(l))return l.flatMap(u=>o(u));if(typeof l[Symbol.iterator]=="function")return[...l].flatMap(u=>o(u));if(typeof l=="object"){const u=Object.keys(l),c=u.map(h=>new Cr([l[h]])),d=i??new Br(u.map((h,p)=>new Jr(String(h),c[p].type,c[p].nullable))),[,f]=i9(d,c);return f.length===0?[new Nu(l)]:f}}}return[]},a=t.flatMap(l=>o(l));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Br([]),!(i instanceof Br))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const l of a){if(!(l instanceof Nu))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!vH(i,l.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??pPe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=hPe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?pZ.visit(new Cr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Fl(n,r.map(i=>new Nu(n,i)))}slice(t,n){const r=this.schema;[t,n]=cPe({length:this.numRows},t,n);const i=mPe(this.data,this._offsets,t,n);return new Fl(r,i.map(s=>new Nu(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=wa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new Cr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new Cr([wa({type:new Vm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((l,u)=>this.getChildAt(u));[s[t],a[t]]=[o,n],[r,i]=i9(r,a)}return new Fl(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Fl(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,l,u)=>{const[c,d]=a,f=n.findIndex(h=>h.name===l.name);return~f?d[f]=u:c.push(u),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,l)=>[l,i[l]]).map(([a,l])=>l===void 0?this.getChildAt(a):t.getChildAt(l)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Fl(...i9(s,o))}}GPe=Symbol.toStringTag;Fl[GPe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=u$(hZ),e.get=u$(lu.getVisitFn(oe.Struct)),e.set=gPe(ed.getVisitFn(oe.Struct)),e.indexOf=yPe(c$.getVisitFn(oe.Struct)),"Table"))(Fl.prototype);var YPe;let Nu=class JC{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Br))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=wa({nullCount:0,type:new Ca(this.schema.fields),children:this.schema.fields.map(n=>wa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Or))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=zhe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((l,u,c)=>(l.children[c]=n[u],l.length=Math.max(l.length,n[u].length),l.fields[c]=Jr.new({name:u,type:n[u].type,nullable:!0}),l),{length:0,fields:new Array,children:new Array}),o=new Br(r),a=wa({type:new Ca(r),length:s,children:i,nullCount:0});[this.schema,this.data]=zhe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=KPe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return lu.visit(this.data,t)}set(t,n){return ed.visit(this.data,t,n)}indexOf(t,n){return c$.visit(this.data,t,n)}[Symbol.iterator](){return pZ.visit(new Cr([this.data]))}toArray(){return[...this]}concat(...t){return new Fl(this.schema,[this,...t])}slice(t,n){const[r]=new Cr([this.data]).slice(t,n).data;return new JC(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new Cr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new Cr([wa({type:new Vm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Br(s,new Map(this.schema.metadata)),i=wa({type:new Ca(s),children:o})}return new JC(r,i)}select(t){const n=this.schema.select(t),r=new Ca(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new JC(n,wa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=wa({type:new Ca(n.fields),length:this.numRows,children:r});return new JC(n,i)}};YPe=Symbol.toStringTag;Nu[YPe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Nu.prototype);function zhe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,l]of e.fields.entries()){const u=t[a];(!u||u.length!==n)&&(i[a]=l.clone({nullable:!0}),s[a]=(r=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:wa({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),wa({type:new Ca(i),length:n,children:s})]}function KPe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],l=t[s];for(const u of[l,...((i=l==null?void 0:l.dictionary)===null||i===void 0?void 0:i.data)||[]])KPe(a.children,u==null?void 0:u.children,n);if(Sn.isDictionary(a)){const{id:u}=a;if(!n.has(u))l!=null&&l.dictionary&&n.set(u,l.dictionary);else if(n.get(u)!==l.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class $At extends Nu{constructor(t){const n=t.fields.map(i=>wa({type:i.type})),r=wa({type:new Ca(t.fields),nullCount:0,children:n});super(t,r)}}let Pg=class Qf{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Qf).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Ur),(n||new Qf).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ws.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Ds.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Hs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ws.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,Ds.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Qf.startMessage(t),Qf.addVersion(t,n),Qf.addHeaderType(t,r),Qf.addHeader(t,i),Qf.addBodyLength(t,s),Qf.addCustomMetadata(t,o),Qf.endMessage(t)}};class LAt extends zn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Ohe.startNull(n),Ohe.endNull(n)}visitInt(t,n){return Pu.startInt(n),Pu.addBitWidth(n,t.bitWidth),Pu.addIsSigned(n,t.isSigned),Pu.endInt(n)}visitFloat(t,n){return yh.startFloatingPoint(n),yh.addPrecision(n,t.precision),yh.endFloatingPoint(n)}visitBinary(t,n){return Ihe.startBinary(n),Ihe.endBinary(n)}visitLargeBinary(t,n){return Rhe.startLargeBinary(n),Rhe.endLargeBinary(n)}visitBool(t,n){return khe.startBool(n),khe.endBool(n)}visitUtf8(t,n){return Dhe.startUtf8(n),Dhe.endUtf8(n)}visitLargeUtf8(t,n){return Phe.startLargeUtf8(n),Phe.endLargeUtf8(n)}visitDecimal(t,n){return aw.startDecimal(n),aw.addScale(n,t.scale),aw.addPrecision(n,t.precision),aw.addBitWidth(n,t.bitWidth),aw.endDecimal(n)}visitDate(t,n){return lD.startDate(n),lD.addUnit(n,t.unit),lD.endDate(n)}visitTime(t,n){return KC.startTime(n),KC.addUnit(n,t.unit),KC.addBitWidth(n,t.bitWidth),KC.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return XC.startTimestamp(n),XC.addUnit(n,t.unit),r!==void 0&&XC.addTimezone(n,r),XC.endTimestamp(n)}visitInterval(t,n){return vh.startInterval(n),vh.addUnit(n,t.unit),vh.endInterval(n)}visitDuration(t,n){return uD.startDuration(n),uD.addUnit(n,t.unit),uD.endDuration(n)}visitList(t,n){return Nhe.startList(n),Nhe.endList(n)}visitStruct(t,n){return C1.startStruct_(n),C1.endStruct_(n)}visitUnion(t,n){Qv.startTypeIdsVector(n,t.typeIds.length);const r=Qv.createTypeIdsVector(n,t.typeIds);return Qv.startUnion(n),Qv.addMode(n,t.mode),Qv.addTypeIds(n,r),Qv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return em.startDictionaryEncoding(n),em.addId(n,BigInt(t.id)),em.addIsOrdered(n,t.isOrdered),r!==void 0&&em.addIndexType(n,r),em.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return cD.startFixedSizeBinary(n),cD.addByteWidth(n,t.byteWidth),cD.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return dD.startFixedSizeList(n),dD.addListSize(n,t.listSize),dD.endFixedSizeList(n)}visitMap(t,n){return fD.startMap(n),fD.addKeysSorted(n,t.keysSorted),fD.endMap(n)}}const s9=new LAt;function FAt(e,t=new Map){return new Br(BAt(e,t),pD(e.metadata),t)}function XPe(e){return new sc(e.count,QPe(e.columns),JPe(e.columns))}function jAt(e){return new Qh(XPe(e.data),e.id,e.isDelta)}function BAt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Jr.fromJSON(n,t))}function Uhe(e,t){return(e.children||[]).filter(Boolean).map(n=>Jr.fromJSON(n,t))}function QPe(e){return(e||[]).reduce((t,n)=>[...t,new gy(n.count,zAt(n.VALIDITY)),...QPe(n.children)],[])}function JPe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new xh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new xh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new xh(t.length,i.OFFSET.length)),i.DATA&&t.push(new xh(t.length,i.DATA.length)),t=JPe(i.children,t)}return t}function zAt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function UAt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Hhe(e,Uhe(e,t)),i=new Jr(e.name,o,e.nullable,pD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Vhe(r):new dy,a=new hy(t.get(n),r,n,s.isOrdered),i=new Jr(e.name,a,e.nullable,pD(e.metadata))):(r=(r=s.indexType)?Vhe(r):new dy,t.set(n,o=Hhe(e,Uhe(e,t))),a=new hy(o,r,n,s.isOrdered),i=new Jr(e.name,a,e.nullable,pD(e.metadata))),i||null}function pD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Vhe(e){return new ml(e.isSigned,e.bitWidth)}function Hhe(e,t){const n=e.type.name;switch(n){case"NONE":return new Vm;case"null":return new Vm;case"binary":return new wI;case"largebinary":return new n$;case"utf8":return new fx;case"largeutf8":return new r$;case"bool":return new EI;case"list":return new mx((t||[])[0]);case"struct":return new Ca(t||[]);case"struct_":return new Ca(t||[])}switch(n){case"int":{const r=e.type;return new ml(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new fy(eo[r.precision])}case"decimal":{const r=e.type;return new i$(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new hx(Jc[r.unit])}case"time":{const r=e.type;return new Hm(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new s$(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new px(Zc[r.unit])}case"duration":{const r=e.type;return new o$(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new xI(pl[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new a$(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new gx(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new SI((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var VAt=Qke,HAt=J3;class bh{static fromJSON(t,n){const r=new bh(0,Ws.V5,n);return r._createHeader=qAt(t,n),r}static decode(t){t=new HAt(hr(t));const n=Pg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new bh(r,i,s);return o._createHeader=WAt(n,s),o}static encode(t){const n=new VAt;let r=-1;return t.isSchema()?r=Br.encode(n,t.header()):t.isRecordBatch()?r=sc.encode(n,t.header()):t.isDictionaryBatch()&&(r=Qh.encode(n,t.header())),Pg.startMessage(n),Pg.addVersion(n,Ws.V5),Pg.addHeader(n,r),Pg.addHeaderType(n,t.headerType),Pg.addBodyLength(n,BigInt(t.bodyLength)),Pg.finishMessageBuffer(n,Pg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Br)return new bh(0,Ws.V5,Ds.Schema,t);if(t instanceof sc)return new bh(n,Ws.V5,Ds.RecordBatch,t);if(t instanceof Qh)return new bh(n,Ws.V5,Ds.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Ds.Schema}isRecordBatch(){return this.headerType===Ds.RecordBatch}isDictionaryBatch(){return this.headerType===Ds.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Jo(t)}}class sc{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Jo(t)}}class Qh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Jo(n)}}class xh{constructor(t,n){this.offset=Jo(t),this.length=Jo(n)}}class gy{constructor(t,n){this.length=Jo(t),this.nullCount=Jo(n)}}function qAt(e,t){return()=>{switch(t){case Ds.Schema:return Br.fromJSON(e);case Ds.RecordBatch:return sc.fromJSON(e);case Ds.DictionaryBatch:return Qh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Ds[t]}, type: ${t} }`)}}function WAt(e,t){return()=>{switch(t){case Ds.Schema:return Br.decode(e.header(new rh),new Map,e.version());case Ds.RecordBatch:return sc.decode(e.header(new Vp),e.version());case Ds.DictionaryBatch:return Qh.decode(e.header(new sw),e.version())}throw new Error(`Unrecognized Message type: { name: ${Ds[t]}, type: ${t} }`)}}Jr.encode=rIt;Jr.decode=tIt;Jr.fromJSON=UAt;Br.encode=nIt;Br.decode=GAt;Br.fromJSON=FAt;sc.encode=iIt;sc.decode=YAt;sc.fromJSON=XPe;Qh.encode=sIt;Qh.decode=KAt;Qh.fromJSON=jAt;gy.encode=oIt;gy.decode=QAt;xh.encode=aIt;xh.decode=XAt;function GAt(e,t=new Map,n=Ws.V5){const r=eIt(e,t);return new Br(r,mD(e),t,n)}function YAt(e,t=Ws.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new sc(e.length(),JAt(e),ZAt(e,t))}function KAt(e,t=Ws.V5){return new Qh(sc.decode(e.data(),t),e.id(),e.isDelta())}function XAt(e){return new xh(e.offset(),e.length())}function QAt(e){return new gy(e.length(),e.nullCount())}function JAt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=gy.decode(n));return t}function ZAt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ws.V4&&(r.bb_pos+=8*(i+1)),n[++s]=xh.decode(r));return n}function eIt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Jr.decode(r,t));return n}function qhe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Jr.decode(r,t));return n}function tIt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Ghe(e,qhe(e,t)),r=new Jr(e.name(),i,e.nullable(),mD(e))):t.has(n=Jo(a.id()))?(s=(s=a.indexType())?Whe(s):new dy,o=new hy(t.get(n),s,n,a.isOrdered()),r=new Jr(e.name(),o,e.nullable(),mD(e))):(s=(s=a.indexType())?Whe(s):new dy,t.set(n,i=Ghe(e,qhe(e,t))),o=new hy(i,s,n,a.isOrdered()),r=new Jr(e.name(),o,e.nullable(),mD(e))),r||null}function mD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Whe(e){return new ml(e.isSigned(),e.bitWidth())}function Ghe(e,t){const n=e.typeType();switch(n){case hi.NONE:return new Vm;case hi.Null:return new Vm;case hi.Binary:return new wI;case hi.LargeBinary:return new n$;case hi.Utf8:return new fx;case hi.LargeUtf8:return new r$;case hi.Bool:return new EI;case hi.List:return new mx((t||[])[0]);case hi.Struct_:return new Ca(t||[])}switch(n){case hi.Int:{const r=e.type(new Pu);return new ml(r.isSigned(),r.bitWidth())}case hi.FloatingPoint:{const r=e.type(new yh);return new fy(r.precision())}case hi.Decimal:{const r=e.type(new aw);return new i$(r.scale(),r.precision(),r.bitWidth())}case hi.Date:{const r=e.type(new lD);return new hx(r.unit())}case hi.Time:{const r=e.type(new KC);return new Hm(r.unit(),r.bitWidth())}case hi.Timestamp:{const r=e.type(new XC);return new s$(r.unit(),r.timezone())}case hi.Interval:{const r=e.type(new vh);return new px(r.unit())}case hi.Duration:{const r=e.type(new uD);return new o$(r.unit())}case hi.Union:{const r=e.type(new Qv);return new xI(r.mode(),r.typeIdsArray()||[],t||[])}case hi.FixedSizeBinary:{const r=e.type(new cD);return new a$(r.byteWidth())}case hi.FixedSizeList:{const r=e.type(new dD);return new gx(r.listSize(),(t||[])[0])}case hi.Map:{const r=e.type(new fD);return new SI((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${hi[n]}" (${n})`)}function nIt(e,t){const n=t.fields.map(s=>Jr.encode(e,s));rh.startFieldsVector(e,n.length);const r=rh.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?rh.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),l=e.createString(`${o}`);return Hs.startKeyValue(e),Hs.addKey(e,a),Hs.addValue(e,l),Hs.endKeyValue(e)})):-1;return rh.startSchema(e),rh.addFields(e,r),rh.addEndianness(e,lIt?dx.Little:dx.Big),i!==-1&&rh.addCustomMetadata(e,i),rh.endSchema(e)}function rIt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Sn.isDictionary(s)?(o=s.dictionary.typeId,i=s9.visit(s,e),r=s9.visit(s.dictionary,e)):r=s9.visit(s,e);const a=(s.children||[]).map(c=>Jr.encode(e,c)),l=Ec.createChildrenVector(e,a),u=t.metadata&&t.metadata.size>0?Ec.createCustomMetadataVector(e,[...t.metadata].map(([c,d])=>{const f=e.createString(`${c}`),h=e.createString(`${d}`);return Hs.startKeyValue(e),Hs.addKey(e,f),Hs.addValue(e,h),Hs.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Ec.startField(e),Ec.addType(e,r),Ec.addTypeType(e,o),Ec.addChildren(e,l),Ec.addNullable(e,!!t.nullable),n!==-1&&Ec.addName(e,n),i!==-1&&Ec.addDictionary(e,i),u!==-1&&Ec.addCustomMetadata(e,u),Ec.endField(e)}function iIt(e,t){const n=t.nodes||[],r=t.buffers||[];Vp.startNodesVector(e,n.length);for(const o of n.slice().reverse())gy.encode(e,o);const i=e.endVector();Vp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())xh.encode(e,o);const s=e.endVector();return Vp.startRecordBatch(e),Vp.addLength(e,BigInt(t.length)),Vp.addNodes(e,i),Vp.addBuffers(e,s),Vp.endRecordBatch(e)}function sIt(e,t){const n=sc.encode(e,t.data);return sw.startDictionaryBatch(e),sw.addId(e,BigInt(t.id)),sw.addIsDelta(e,t.isDelta),sw.addData(e,n),sw.endDictionaryBatch(e)}function oIt(e,t){return eRe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function aIt(e,t){return Zke.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const lIt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),bH="ARROW1",bZ=new Uint8Array(bH.length);for(let e=0;e<bH.length;e+=1)bZ[e]=bH.codePointAt(e);bZ.length;class Ki extends zn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Nu?s.data.children:s.data),r=new Ki;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof Cr)return this.visitMany(t.data),this;const{type:n}=t;if(!Sn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Sn.isUnion(n))this.nodes.push(new gy(r,0));else{const{nullCount:i}=t;Sn.isNull(n)||uf.call(this,i<=0?new Uint8Array(0):l$(t.offset,r,t.nullBitmap)),this.nodes.push(new gy(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function uf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new xh(this._byteLength,t)),this._byteLength+=t,this}function uIt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(uf.call(this,i),n.mode===pl.Sparse)return _H.call(this,e);if(n.mode===pl.Dense){if(e.offset<=0)return uf.call(this,s),_H.call(this,e);{const o=new Int32Array(r),a=Object.create(null),l=Object.create(null);for(let u,c,d=-1;++d<r;)(u=i[d])!==void 0&&((c=a[u])===void 0&&(c=a[u]=s[d]),o[d]=s[d]-c,l[u]=((t=l[u])!==null&&t!==void 0?t:0)+1);uf.call(this,o),this.visitMany(e.children.map((u,c)=>{const d=n.typeIds[c],f=a[d],h=l[d];return u.slice(f,Math.min(r,h))}))}}return this}function cIt(e){let t;return e.nullCount>=e.length?uf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?uf.call(this,l$(e.offset,e.length,t)):uf.call(this,fPe(e.values))}function hg(e){return uf.call(this,e.values.subarray(0,e.length*e.stride))}function J6(e){const{length:t,values:n,valueOffsets:r}=e,i=Jo(r[0]),s=Jo(r[t]),o=Math.min(s-i,n.byteLength-i);return uf.call(this,Kke(-i,t+1,r)),uf.call(this,n.subarray(i,i+o)),this}function _Z(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return uf.call(this,Kke(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function _H(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Ki.prototype.visitBool=cIt;Ki.prototype.visitInt=hg;Ki.prototype.visitFloat=hg;Ki.prototype.visitUtf8=J6;Ki.prototype.visitLargeUtf8=J6;Ki.prototype.visitBinary=J6;Ki.prototype.visitLargeBinary=J6;Ki.prototype.visitFixedSizeBinary=hg;Ki.prototype.visitDate=hg;Ki.prototype.visitTimestamp=hg;Ki.prototype.visitTime=hg;Ki.prototype.visitDecimal=hg;Ki.prototype.visitList=_Z;Ki.prototype.visitStruct=_H;Ki.prototype.visitUnion=uIt;Ki.prototype.visitInterval=hg;Ki.prototype.visitDuration=hg;Ki.prototype.visitFixedSizeList=_Z;Ki.prototype.visitMap=_Z;class ZPe extends SPe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new r9,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,tv(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return H6(t)?t.then(n=>this.writeAll(n)):q6(t)?SZ(this,t):xZ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof r9?this._sink=t:(this._sink=new r9,t&&CCt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&ACt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!vH(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Fl&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Nu&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!vH(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Nu?t instanceof $At||this._writeRecordBatch(t):t instanceof Fl?this.writeAll(t.batches):OJ(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=bh.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,l=a-s-o;return t.headerType===Ds.RecordBatch?this._recordBatchBlocks.push(new py(a,t.bodyLength,this._position)):t.headerType===Ds.DictionaryBatch&&this._dictionaryBlocks.push(new py(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(l)}_write(t){if(this._started){const n=hr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(bh.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(bZ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Ki.assemble(t),o=new sc(t.numRows,r,i),a=bh.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Ki.assemble(new Cr([t])),l=new sc(t.length,s,o),u=new Qh(l,n,r),c=bh.from(u,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class wZ extends ZPe{static writeAll(t,n){const r=new wZ(n);return H6(t)?t.then(i=>r.writeAll(i)):q6(t)?SZ(r,t):xZ(r,t)}}class EZ extends ZPe{static writeAll(t){const n=new EZ;return H6(t)?t.then(r=>n.writeAll(r)):q6(t)?SZ(n,t):xZ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=yH.encode(new yH(t,Ws.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function xZ(e,t){let n=t;t instanceof Fl&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function SZ(e,t){var n,r,i,s,o,a,l;return Xp(this,void 0,void 0,function*(){try{for(n=!0,r=k2(t);i=yield r.next(),s=i.done,!s;n=!0){l=i.value,n=!1;const u=l;e.write(u)}}catch(u){o={error:u}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function dIt(e,t="stream"){return(t==="stream"?wZ:EZ).writeAll(e).toUint8Array(!0)}function TZ(e,t=1){return(e*t+63&-64||64)/t}function yy(e,t,n=e.BYTES_PER_ELEMENT){return new e(TZ(t,n))}function CZ(e){return e instanceof Or?e:new Or(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function fIt(e){return new Cr([CZ(e)])}const AZ=new TextEncoder;function hIt(e,t,n){const r=AZ.encode(n);return e.set(r,t),r.length}function pIt(e,t,n){return AZ.encodeInto(n,e.subarray(t)).written}const mIt=AZ.encodeInto?pIt:hIt;function Yhe(e,t){const n=yy(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function gIt(e,t){const n=yy(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function yIt(e,t){const n=yy(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function vIt(e,t){const n=yy(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function bIt(e){const t=f$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function _It(e,t,n){const r=yy(Int32Array,t+1),i=yy(Uint8Array,3*n);let s=0;return{set(o,a){s+=mIt(i,s,o),r[a+1]=s},data:()=>{const o=TZ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function wIt(e,t){const n=[],r=yy(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,l){const u=String(a);let c=i[u];c===void 0&&(o+=u.length,i[u]=c=++s,n.push(u)),r[l]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:EIt(e.dictionary,n,o)})}}function EIt(e,t,n){const r=_It(e,t.length,n);return t.forEach(r.set),fIt(r.data())}function xIt(e,t){const n=yy(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function SIt(e,t,n=!0){let r;switch(e.typeId){case oe.Int:r=e.bitWidth<64?Yhe:null;break;case oe.Float:r=e.precision>0?Yhe:null;break;case oe.Dictionary:r=e.dictionary.typeId===oe.Utf8&&e.indices.typeId===oe.Int&&e.indices.bitWidth<64?wIt:null;break;case oe.Bool:r=gIt;break;case oe.Date:r=e.unit?vIt:yIt;break}return r==null?bIt(e):n?xIt(r(e,t),t):r(e,t)}function TIt(e,t){const n=e.length,r=TZ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),CZ({type:t,length:n,buffers:[null,i]})}function eNe(e,t,n,r,i=!0){const s=SIt(r,e,i);return t(n,s.set),CZ(s.data())}function IZ(e){if(e instanceof Sn||e==null)return e;switch(e){case oe.Binary:return new wI;case oe.Bool:return new EI;case oe.DateDay:return new UCt;case oe.DateMillisecond:case oe.Date:return new VCt;case oe.Dictionary:return new hy(new fx,new dy);case oe.Float16:return new SRe;case oe.Float32:return new VJ;case oe.Float64:case oe.Float:return new HJ;case oe.Int8:return new $J;case oe.Int16:return new LJ;case oe.Int32:case oe.Int:return new dy;case oe.Int64:return new FJ;case oe.IntervalDayTime:return new YCt;case oe.Interval:case oe.IntervalYearMonth:return new KCt;case oe.Null:return new Vm;case oe.TimeMicrosecond:return new WCt;case oe.TimeMillisecond:case oe.Time:return new qCt;case oe.TimeNanosecond:return new GCt;case oe.TimeSecond:return new HCt;case oe.Uint8:return new jJ;case oe.Uint16:return new BJ;case oe.Uint32:return new zJ;case oe.Uint64:return new UJ;case oe.Utf8:return new fx;default:$n(`Unsupported type code: ${Kh(e)}. Use a data type constructor instead?`)}}function CIt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function tNe(e,t){const n=wH();return e(t,n.add),n}function wH(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Um(t))++e.dates,CIt(t)&&++e.utcdays;else if(T1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=wH());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=wH())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return IZ(AIt(e))}};return e}function AIt(e){const t=e.count-e.nulls;if(t===0)return oe.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?oe.Float64:n<128?oe.Int8:n<32768?oe.Int16:oe.Int32:n>=2**32?oe.Float64:n<256?oe.Uint8:n<65536?oe.Uint16:oe.Uint32}else{if(e.nums===t)return oe.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?oe.Int64:$n(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?oe.Uint64:$n(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return oe.Bool;if(e.utcdays===t)return oe.DateDay;if(e.dates===t)return oe.DateMillisecond;if(e.arrays===t){const n=Jr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new gx(e.minlen,n):new mx(n)}else if(e.structs===t){const n=e.struct_prof;return new Ca(Object.keys(n).map(r=>Jr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return oe.Dictionary;$n("Type inference failure")}}}}function IIt(e,t,n,r,i,s=!0){if(i=IZ(i),!i){const o=tNe(r,t);s=o.nulls>0,i=o.type()}return eNe(n,r,t,i,s)}function kIt(e,t,n,r,i,s=!0){i=IZ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),l=RIt(o);if(l&&a&&Khe(l.type,i))return l;const u=o.data;if(sR(u)){const c=PIt(u);if(a&&c&&Khe(c,i))return TIt(u,c);i=i||c,s=!1}if(!i){const c=tNe(r,o);s=c.nulls>0,i=c.type()}return eNe(n,r,o,i,s)}function RIt(e){return e instanceof Cr?e:e.vector instanceof Cr?e.vector:null}function PIt(e){const n={Float32Array:VJ,Float64Array:HJ,Int8Array:$J,Int16Array:LJ,Int32Array:dy,Uint8Array:jJ,Uint16Array:BJ,Uint32Array:zJ,BigInt64Array:FJ,BigUint64Array:UJ}[e.constructor.name];return n?new n:null}function Khe(e,t){return!e||!t?!0:e.compareTo(t)}function NIt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function OIt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&T1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const DIt=()=>$n("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function MIt(){try{return Fl}catch{DIt()}}function nNe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=$It(e,t),a={};i.forEach(u=>{const c=r(e,u,s,o,n[u]);c.length!==s&&$n("Column length mismatch"),a[u]=c});const l=MIt();return new l(a)}function $It(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=Ri(n)?n(e):Tr(n)?n:null;if(Tr(e))return{dataFrom:IIt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:NIt(e,r,i)};if(LIt(e))return{dataFrom:kIt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:OIt(e,r,i)};$n("Unsupported input data type")}function LIt(e){return e&&Ri(e.reify)}function FIt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return dIt(nNe(e,r),n)}function jIt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function BIt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(l=>{if(++n,l==null){++r;return}const u=typeof l;if(u==="object"&&Um(l))++i,jIt(l)&&++s;else if(u==="number"&&(++o,l===l&&(l|0)!==l)){const c=l+"",d=c.indexOf(".");if(d>=0){const f=c.indexOf("e"),h=f>0?f:c.length;a=Math.max(a,h-d-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function Z6(e,t){return Ri(t)?t(e):t||e.columnNames()}function rNe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const l=BIt(zIt(e,a),n);o[a]=i[a]||l.align,s[a]=r[a]||l.format}),{align:o,format:s}}function zIt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function kZ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let l=0;l<o;++l){const u=t[l];i.cell(s[t[l]].get(a),u,l)}},!0,n,r)}function UIt(e,t={}){const n=Z6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=u=>u==null?"":Um(u)?z6(u,!0):s.test(u+="")?'"'+u.replace(/"/g,'""')+'"':u,a=n.map(o);let l="";return kZ(e,n,t.limit||1/0,t.offset,{row(){l+=a.join(i)+`
`},cell(u,c,d){a[d]=o(r[c]?r[c](u):u)}}),l+a.join(i)}function iNe(e,t={}){if(Ri(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Um(e))return t.utc?z6(e):wke(e);{const r=JSON.stringify(e,(s,o)=>sR(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function e4(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function VIt(e,t={}){const n=Z6(e,t.columns),{align:r,format:i}=rNe(e,n,t),s=HIt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",l=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),u=(m,g)=>l(iNe(m,g)),c=o?(m,g)=>m==null?o(m):u(m,g):u;let d=-1,f=-1;const h=(m,g,y)=>{const b=y?a(r[g]):"",_=s[m]&&s[m](g,f,d)||"",w=(b?`text-align: ${b};`+(_?" ":""):"")+_;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",d)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return kZ(e,n,t.limit,t.offset,{row(m){d=m,p+=(++f?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function HIt(e){return e4(e.style,t=>Ri(t)?t:()=>t)}function qIt(e,t=!0,n=!1){return e===void 0||e?t:n}const WIt=e=>Um(e)?z6(e,!0):e;function GIt(e,t={}){const n=qIt(t.schema),r=t.format||{},i=Z6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const l=e.column(o),u=r[o]||WIt;let c=-1;e.scan(d=>{const f=l.get(d);s+=(++c?",":"")+JSON.stringify(u(f))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function YIt(e,t={}){const n=Z6(e,t.columns),{align:r,format:i}=rNe(e,n,t),s=l=>l==="c"?":-:":l==="r"?"-:":":-",o=l=>l.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(l=>s(r[l])).join("|")+"|";return kZ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(l,u){a+=o(iNe(l,i[u]))+"|"}}),a+`
`}function sNe(e,t){for(const[n,r]of U6(t))e.set(n,r);return e}function KIt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function qm(e,t,n=new Map){return t=hl(t)?e.columnName(t):t,na(t)?n.set(t,t):Tr(t)?t.forEach(r=>qm(e,r,n)):Ri(t)?qm(e,t(e),n):$a(t)?sNe(n,t):$n(`Invalid column selection: ${Kh(t)}`),n}function t4(e,t){return e.toObject=t,e}function oNe(e){return Tr(e)?e.map(oNe):e&&e.toObject?e.toObject():e}function yx(){return t4(e=>e.columnNames(),()=>({all:[]}))}function aNe(...e){return e=e.flat(),t4(t=>{const n=qm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:oNe(e)}))}function XIt(e,t){return t4(n=>{let r=hl(e)?e:n.columnIndex(e),i=hl(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function QIt(e){return na(e)&&(e=RegExp(KIt(e))),t4(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function JIt(e){return sR(e.data)?e.data.constructor:Array}class tm extends TTt{static from(t,n){return new tm(ITt(t,n),n)}static new(t,n){if(t instanceof tm)return t;const r={},i=[];for(const[s,o]of U6(t))r[s]=o,i.push(s);return new tm(r,n||i)}constructor(t,n,r,i,s,o){e4(t,ATt,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new tm(t||this._data,n||(t?null:this._names),o,i!==void 0?i:rCt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=pc(r).groupby(r.groups());return t.forEach(s=>{s=tm.new(s),s.numRows()!==n&&$n("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):$n(`Unrecognized column: ${t}`)}object(t=0){return Xhe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=qm(this,t.columns||yx()),o=Wke(s),a=[];if(this.scan((l,u)=>a.push(o(l,u)),!0,r,i),n&&this.isGrouped()){const l=[];return this.scan(u=>l.push(u),!0,r,i),sCt(this,l,a,n)}return a}*[Symbol.iterator](){const t=Xhe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?l=>t.forEach(l):l=>this.scan(l,!0),a=r.length;i={};for(let l=0;l<a;++l){const u=r[l],c=this.column(u),d=i[u]=new(JIt(c))(n);let f=-1;o(h=>d[++f]=c.get(h))}this.isGrouped()&&(s=iCt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return nNe(this,t)}toArrowBuffer(t){return FIt(this,t)}toCSV(t){return UIt(this,t)}toHTML(t){return VIt(this,t)}toJSON(t){return GIt(this,t)}toMarkdown(t){return YIt(this,t)}}function Xhe(e){let t=e._builder;if(!t){const n=Wke(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class ZIt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function pr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=ekt[e.type];s&&s(e,t,n)}const NN=(e,t,n)=>{pr(e.argument,t,n,e)},o9=(e,t,n)=>{pr(e.left,t,n,e),pr(e.right,t,n,e)},Qhe=(e,t,n)=>{pr(e.test,t,n,e),pr(e.consequent,t,n,e),e.alternate&&pr(e.alternate,t,n,e)},a9=(e,t,n)=>{ih(e.params,t,n,e),pr(e.body,t,n,e)},Jhe=(e,t,n)=>{pr(e.callee,t,n,e),ih(e.arguments,t,n,e)},ih=(e,t,n,r)=>{e.forEach(i=>pr(i,t,n,r))},ekt={TemplateLiteral:(e,t,n)=>{ih(e.expressions,t,n,e),ih(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{pr(e.object,t,n,e),pr(e.property,t,n,e)},CallExpression:Jhe,NewExpression:Jhe,ArrayExpression:(e,t,n)=>{ih(e.elements,t,n,e)},AssignmentExpression:o9,AwaitExpression:NN,BinaryExpression:o9,LogicalExpression:o9,UnaryExpression:NN,UpdateExpression:NN,ConditionalExpression:Qhe,ObjectExpression:(e,t,n)=>{ih(e.properties,t,n,e)},Property:(e,t,n)=>{pr(e.key,t,n,e),pr(e.value,t,n,e)},ArrowFunctionExpression:a9,FunctionExpression:a9,FunctionDeclaration:a9,VariableDeclaration:(e,t,n)=>{ih(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{pr(e.id,t,n,e),pr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{pr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{ih(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{pr(e.expression,t,n,e)},IfStatement:Qhe,ForStatement:(e,t,n)=>{pr(e.init,t,n,e),pr(e.test,t,n,e),pr(e.update,t,n,e),pr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{pr(e.test,t,n,e),pr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{pr(e.body,t,n,e),pr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{pr(e.discriminant,t,n,e),ih(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&pr(e.test,t,n,e),ih(e.consequent,t,n,e)},ReturnStatement:NN,Program:(e,t,n)=>{pr(e.body[0],t,n,e)}};function lNe(e){delete e.start,delete e.end,delete e.optional}function Zhe(e){lNe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function tkt(e){return pr(e,null,{Column:Zhe,Constant:Zhe,Default:lNe}),e}function Gs(e,t){return t&&t.type===e}function nkt(e){return Gs(lCt,e)||Gs(aCt,e)}function rkt(e){return Ri(e)?e:()=>e}const ikt="Escaped functions are not valid as rollup or pivot values.";function skt(e,t,n){e.aggronly&&$n(ikt);const r="(row,data)=>fn("+qke(e.table.columnNames())+",$)";return{escape:NJ.escape(r,rkt(t.expr),n)}}var okt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],uNe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],akt="-----------------------------------------------------------------------------------------------------------------------------------------------------",cNe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",l9={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},u9="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",lkt={5:u9,"5module":u9+" export import",6:u9+" const class extends export import super"},ukt=/^in(stanceof)?$/,ckt=new RegExp("["+cNe+"]"),dkt=new RegExp("["+cNe+akt+"]");function EH(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Wm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&ckt.test(String.fromCharCode(e)):t===!1?!1:EH(e,uNe)}function vx(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&dkt.test(String.fromCharCode(e)):t===!1?!1:EH(e,uNe)||EH(e,okt)}var _r=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function vc(e,t){return new _r(e,{beforeExpr:!0,binop:t})}var bc={beforeExpr:!0},Il={startsExpr:!0},RZ={};function sr(e,t){return t===void 0&&(t={}),t.keyword=e,RZ[e]=new _r(e,t)}var K={num:new _r("num",Il),regexp:new _r("regexp",Il),string:new _r("string",Il),name:new _r("name",Il),privateId:new _r("privateId",Il),eof:new _r("eof"),bracketL:new _r("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new _r("]"),braceL:new _r("{",{beforeExpr:!0,startsExpr:!0}),braceR:new _r("}"),parenL:new _r("(",{beforeExpr:!0,startsExpr:!0}),parenR:new _r(")"),comma:new _r(",",bc),semi:new _r(";",bc),colon:new _r(":",bc),dot:new _r("."),question:new _r("?",bc),questionDot:new _r("?."),arrow:new _r("=>",bc),template:new _r("template"),invalidTemplate:new _r("invalidTemplate"),ellipsis:new _r("...",bc),backQuote:new _r("`",Il),dollarBraceL:new _r("${",{beforeExpr:!0,startsExpr:!0}),eq:new _r("=",{beforeExpr:!0,isAssign:!0}),assign:new _r("_=",{beforeExpr:!0,isAssign:!0}),incDec:new _r("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new _r("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:vc("||",1),logicalAND:vc("&&",2),bitwiseOR:vc("|",3),bitwiseXOR:vc("^",4),bitwiseAND:vc("&",5),equality:vc("==/!=/===/!==",6),relational:vc("</>/<=/>=",7),bitShift:vc("<</>>/>>>",8),plusMin:new _r("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:vc("%",10),star:vc("*",10),slash:vc("/",10),starstar:new _r("**",{beforeExpr:!0}),coalesce:vc("??",1),_break:sr("break"),_case:sr("case",bc),_catch:sr("catch"),_continue:sr("continue"),_debugger:sr("debugger"),_default:sr("default",bc),_do:sr("do",{isLoop:!0,beforeExpr:!0}),_else:sr("else",bc),_finally:sr("finally"),_for:sr("for",{isLoop:!0}),_function:sr("function",Il),_if:sr("if"),_return:sr("return",bc),_switch:sr("switch"),_throw:sr("throw",bc),_try:sr("try"),_var:sr("var"),_const:sr("const"),_while:sr("while",{isLoop:!0}),_with:sr("with"),_new:sr("new",{beforeExpr:!0,startsExpr:!0}),_this:sr("this",Il),_super:sr("super",Il),_class:sr("class",Il),_extends:sr("extends",bc),_export:sr("export"),_import:sr("import",Il),_null:sr("null",Il),_true:sr("true",Il),_false:sr("false",Il),_in:sr("in",{beforeExpr:!0,binop:7}),_instanceof:sr("instanceof",{beforeExpr:!0,binop:7}),_typeof:sr("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:sr("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:sr("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},hd=/\r\n?|\n|\u2028|\u2029/,fkt=new RegExp(hd.source,"g");function DS(e){return e===10||e===13||e===8232||e===8233}function dNe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(DS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var fNe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Rc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,hNe=Object.prototype,hkt=hNe.hasOwnProperty,pkt=hNe.toString,fR=Object.hasOwn||function(e,t){return hkt.call(e,t)},epe=Array.isArray||function(e){return pkt.call(e)==="[object Array]"},tpe=Object.create(null);function m0(e){return tpe[e]||(tpe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function vy(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var mkt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,TI=function(t,n){this.line=t,this.column=n};TI.prototype.offset=function(t){return new TI(this.line,this.column+t)};var n4=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function pNe(e,t){for(var n=1,r=0;;){var i=dNe(e,r,t);if(i<0)return new TI(n,t-r);++n,r=i}}var xH={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},npe=!1;function gkt(e){var t={};for(var n in xH)t[n]=e&&fR(e,n)?e[n]:xH[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!npe&&typeof console=="object"&&console.warn&&(npe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),epe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return epe(t.onComment)&&(t.onComment=ykt(t,t.onComment)),t}function ykt(e,t){return function(n,r,i,s,o,a){var l={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(l.loc=new n4(this,o,a)),e.ranges&&(l.range=[i,s]),t.push(l)}}var CI=1,MS=2,PZ=4,mNe=8,gNe=16,yNe=32,NZ=64,vNe=128,hR=256,OZ=CI|MS|hR;function DZ(e,t){return MS|(e?PZ:0)|(t?mNe:0)}var h$=0,MZ=1,pg=2,bNe=3,_Ne=4,wNe=5,io=function(t,n,r){this.options=t=gkt(t),this.sourceFile=t.sourceFile,this.keywords=m0(lkt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=l9[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=m0(i);var s=(i?i+" ":"")+l9.strict;this.reservedWordsStrict=m0(s),this.reservedWordsStrictBind=m0(s+" "+l9.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(hd).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(CI),this.regexpState=null,this.privateNameStack=[]},yp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};io.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};yp.inFunction.get=function(){return(this.currentVarScope().flags&MS)>0};yp.inGenerator.get=function(){return(this.currentVarScope().flags&mNe)>0&&!this.currentVarScope().inClassFieldInit};yp.inAsync.get=function(){return(this.currentVarScope().flags&PZ)>0&&!this.currentVarScope().inClassFieldInit};yp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&hR)return!1;if(t.flags&MS)return(t.flags&PZ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};yp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&NZ)>0||n||this.options.allowSuperOutsideMethod};yp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&vNe)>0};yp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};yp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(MS|hR))>0||n};yp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&hR)>0};io.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};io.parse=function(t,n){return new this(n,t).parse()};io.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};io.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(io.prototype,yp);var El=io.prototype,vkt=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;El.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Rc.lastIndex=e,e+=Rc.exec(this.input)[0].length;var t=vkt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Rc.lastIndex=e+t[0].length;var n=Rc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||hd.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Rc.lastIndex=e,e+=Rc.exec(this.input)[0].length,this.input[e]===";"&&e++}};El.eat=function(e){return this.type===e?(this.next(),!0):!1};El.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};El.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};El.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};El.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||hd.test(this.input.slice(this.lastTokEnd,this.start))};El.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};El.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};El.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};El.expect=function(e){this.eat(e)||this.unexpected()};El.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var r4=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};El.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};El.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};El.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};El.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var jt=io.prototype;jt.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var $Z={kind:"loop"},bkt={kind:"switch"};jt.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Rc.lastIndex=this.pos;var t=Rc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Wm(r,!0)){for(var i=n+1;vx(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!ukt.test(s))return!0}return!1};jt.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Rc.lastIndex=this.pos;var e=Rc.exec(this.input),t=this.pos+e[0].length,n;return!hd.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(vx(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};jt.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){Rc.lastIndex=this.pos;var o=Rc.exec(this.input),a=this.pos+o[0].length,l=this.input.charCodeAt(a);if(l===40||l===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var u=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,u,c,e):this.parseExpressionStatement(i,c)}};jt.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};jt.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};jt.parseDoStatement=function(e){return this.next(),this.labels.push($Z),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};jt.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push($Z),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=this.containsEsc,l=new r4,u=this.start,c=t>-1?this.parseExprSubscripts(l,"await"):this.parseExpression(!0,l);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===K._in&&this.unexpected(t),e.await=!0):o&&this.options.ecmaVersion>=8&&(c.start===u&&!a&&c.type==="Identifier"&&c.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&o&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,l),this.checkLValPattern(c),this.parseForIn(e,c)):(this.checkExpressionErrors(l,!0),t>-1&&this.unexpected(t),this.parseFor(e,c))};jt.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,nA|(n?0:SH),!1,t)};jt.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};jt.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};jt.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(bkt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};jt.parseThrowStatement=function(e){return this.next(),hd.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var _kt=[];jt.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?yNe:0),this.checkLValPattern(e,t?_Ne:pg),this.expect(K.parenR),e};jt.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};jt.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};jt.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push($Z),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};jt.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};jt.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};jt.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};jt.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};jt.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};jt.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};jt.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};jt.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};jt.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?MZ:pg,!1)};var nA=1,SH=2,ENe=4;jt.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&SH&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&nA&&(e.id=t&ENe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&SH)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?MZ:pg:bNe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(DZ(e.async,e.generator)),t&nA||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&nA?"FunctionDeclaration":"FunctionExpression")};jt.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};jt.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&wkt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};jt.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=l:r=l)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var u=!n.static&&p$(n,"constructor"),c=u&&e;u&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=u?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};jt.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};jt.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};jt.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&p$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};jt.parseClassField=function(e){if(p$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&p$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};jt.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(hR|NZ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};jt.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,pg,!1)):(t===!0&&this.unexpected(),e.id=null)};jt.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};jt.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};jt.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];fR(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function wkt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function p$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}jt.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};jt.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};jt.parseExportDeclaration=function(e){return this.parseStatement(null)};jt.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,nA|ENe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};jt.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),fR(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};jt.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var l=a[o];l&&this.checkPatternExport(e,l)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};jt.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};jt.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};jt.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};jt.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};jt.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=_kt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};jt.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,pg),this.finishNode(e,"ImportSpecifier")};jt.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,pg),this.finishNode(e,"ImportDefaultSpecifier")};jt.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,pg),this.finishNode(e,"ImportNamespaceSpecifier")};jt.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};jt.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return mkt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};jt.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};jt.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var pd=io.prototype;pd.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};pd.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};pd.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};pd.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};pd.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};pd.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};pd.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};pd.parseBindingListItem=function(e){return e};pd.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};pd.checkLValSimple=function(e,t,n){t===void 0&&(t=h$);var r=t!==h$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===pg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(fR(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==wNe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};pd.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=h$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var l=a[o];l&&this.checkLValInnerPattern(l,t,n)}break;default:this.checkLValSimple(e,t,n)}};pd.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=h$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Ad=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Li={b_stat:new Ad("{",!1),b_expr:new Ad("{",!0),b_tmpl:new Ad("${",!1),p_stat:new Ad("(",!1),p_expr:new Ad("(",!0),q_tmpl:new Ad("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Ad("function",!1),f_expr:new Ad("function",!0),f_expr_gen:new Ad("function",!0,!1,null,!0),f_gen:new Ad("function",!1,!1,null,!0)},$S=io.prototype;$S.initialContext=function(){return[Li.b_stat]};$S.curContext=function(){return this.context[this.context.length-1]};$S.braceIsBlock=function(e){var t=this.curContext();return t===Li.f_expr||t===Li.f_stat?!0:e===K.colon&&(t===Li.b_stat||t===Li.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?hd.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Li.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};$S.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};$S.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};$S.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Li.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Li.b_stat:Li.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Li.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Li.p_stat:Li.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Li.p_stat)&&!(e===K._return&&hd.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Li.b_stat)?this.context.push(Li.f_expr):this.context.push(Li.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Li.q_tmpl?this.context.pop():this.context.push(Li.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Li.f_expr?this.context[t]=Li.f_expr_gen:this.context[t]=Li.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var _n=io.prototype;_n.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};_n.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};_n.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new r4,r=!0);var a=this.start,l=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var u=this.parseMaybeConditional(e,t);if(n&&(u=n.call(this,u,a,l)),this.type.isAssign){var c=this.startNodeAt(a,l);return c.operator=this.value,this.type===K.eq&&(u=this.toAssignable(u,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(u):this.checkLValSimple(u),c.left=u,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),u};_n.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};_n.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};_n.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,d=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),u,c,s,i),f=this.buildBinary(t,n,e,d,l,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(f,t,n,r,i)}return e};_n.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};_n.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),l=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,l,r),this.checkExpressionErrors(e,!0),l?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&xNe(a.argument)?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&TH(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,l?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var u=this.startNodeAt(i,s);u.operator=this.value,u.prefix=!1,u.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(u,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function xNe(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&xNe(e.expression)}function TH(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&TH(e.expression)||e.type==="ParenthesizedExpression"&&TH(e.expression)}_n.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};_n.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var l=this.startNodeAt(t,n);l.expression=a,a=this.finishNode(l,"ChainExpression")}return a}e=a}};_n.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};_n.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};_n.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,l=a&&this.eat(K.questionDot);r&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var u=this.eat(K.bracketL);if(u||l&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,u?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!u,a&&(c.optional=l),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var d=new r4,f=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,d);if(i&&!l&&this.shouldParseAsyncArrow())return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=l),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};_n.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,l=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&l.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Li.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[l],!1,t);if(this.options.ecmaVersion>=8&&l.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return l=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[l],!0,t)}return l;case K.regexp:var u=this.value;return r=this.parseLiteral(u.value),r.regex={pattern:u.pattern,flags:u.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,d=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(d)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),d;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Li.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};_n.parseExprAtomDefault=function(){this.unexpected()};_n.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};_n.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};_n.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};_n.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};_n.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};_n.shouldParseArrow=function(e){return!this.canInsertSemicolon()};_n.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,l=[],u=!0,c=!1,d=new r4,f=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(u?u=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,l.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else l.push(this.parseMaybeAssign(!1,d,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(l)&&this.eat(K.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=h,this.parseParenArrowList(n,r,l,t);(!l.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(d,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=h||this.awaitPos,l.length>1?(i=this.startNodeAt(o,a),i.expressions=l,this.finishNodeAt(i,"SequenceExpression",m,g)):i=l[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};_n.parseParenItem=function(e){return e};_n.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Ekt=[];_n.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Ekt,this.finishNode(e,"NewExpression")};_n.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};_n.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};_n.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!hd.test(this.input.slice(this.lastTokEnd,this.start))};_n.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};_n.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};_n.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};_n.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};_n.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};_n.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};_n.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(DZ(t,r.generator)|NZ|(n?vNe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};_n.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(DZ(n,!1)|gNe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};_n.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var l=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,wNe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=l}this.exitScope()};_n.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};_n.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,MZ,t?null:n)}};_n.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};_n.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};_n.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};_n.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};_n.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};_n.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};_n.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var m$=io.prototype;m$.raise=function(e,t){var n=pNe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};m$.raiseRecoverable=m$.raise;m$.curPosition=function(){if(this.options.locations)return new TI(this.curLine,this.pos-this.lineStart)};var rv=io.prototype,xkt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};rv.enterScope=function(e){this.scopeStack.push(new xkt(e))};rv.exitScope=function(){this.scopeStack.pop()};rv.treatFunctionsAsVarInScope=function(e){return e.flags&MS||!this.inModule&&e.flags&CI};rv.declareName=function(e,t,n){var r=!1;if(t===pg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&CI&&delete this.undefinedExports[e]}else if(t===_Ne){var s=this.currentScope();s.lexical.push(e)}else if(t===bNe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var l=this.scopeStack[a];if(l.lexical.indexOf(e)>-1&&!(l.flags&yNe&&l.lexical[0]===e)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(e)>-1){r=!0;break}if(l.var.push(e),this.inModule&&l.flags&CI&&delete this.undefinedExports[e],l.flags&OZ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};rv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};rv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};rv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&OZ)return t}};rv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&OZ&&!(t.flags&gNe))return t}};var i4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new n4(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},pR=io.prototype;pR.startNode=function(){return new i4(this,this.start,this.startLoc)};pR.startNodeAt=function(e,t){return new i4(this,e,t)};function SNe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}pR.finishNode=function(e,t){return SNe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};pR.finishNodeAt=function(e,t,n,r){return SNe.call(this,e,t,n,r)};pR.copyNode=function(e){var t=new i4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var TNe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",CNe=TNe+" Extended_Pictographic",ANe=CNe,INe=ANe+" EBase EComp EMod EPres ExtPict",kNe=INe,Skt=kNe,Tkt={9:TNe,10:CNe,11:ANe,12:INe,13:kNe,14:Skt},Ckt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Akt={9:"",10:"",11:"",12:"",13:"",14:Ckt},rpe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",RNe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",PNe=RNe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",NNe=PNe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ONe=NNe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",DNe=ONe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",Ikt=DNe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",kkt={9:RNe,10:PNe,11:NNe,12:ONe,13:DNe,14:Ikt},MNe={};function Rkt(e){var t=MNe[e]={binary:m0(Tkt[e]+" "+rpe),binaryOfStrings:m0(Akt[e]),nonBinary:{General_Category:m0(rpe),Script:m0(kkt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var c9=0,ipe=[9,10,11,12,13,14];c9<ipe.length;c9+=1){var Pkt=ipe[c9];Rkt(Pkt)}var Nt=io.prototype,g$=function(t,n){this.parent=t,this.base=n||this};g$.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var r=t;r;r=r.parent)if(n.base===r.base&&n!==r)return!0;return!1};g$.prototype.sibling=function(){return new g$(this.parent,this.base)};var vp=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=MNe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};vp.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};vp.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};vp.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};vp.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};vp.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};vp.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};vp.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};vp.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};vp.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Nt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};function Nkt(e){for(var t in e)return!0;return!1}Nt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&Nkt(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};Nt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}};Nt.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new g$(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Nt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Nt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Nt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Nt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Nt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Nt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Nt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Nt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Nt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Nt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Nt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Nt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Nt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return $Ne(t)?(e.lastIntValue=t,e.advance(),!0):!1};function $Ne(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Nt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!$Ne(n);)e.advance();return e.pos!==t};Nt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Nt.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1){var s=i[r];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};Nt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Nt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=vy(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=vy(e.lastIntValue);return!0}return!1};Nt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Okt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Okt(e){return Wm(e,!0)||e===36||e===95}Nt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Dkt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Dkt(e){return vx(e,!0)||e===36||e===95||e===8204||e===8205}Nt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Nt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Nt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Nt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Nt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Nt.regexp_eatZero=function(e){return e.current()===48&&!s4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Nt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Nt.regexp_eatControlLetter=function(e){var t=e.current();return LNe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function LNe(e){return e>=65&&e<=90||e>=97&&e<=122}Nt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&Mkt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function Mkt(e){return e>=0&&e<=1114111}Nt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Nt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var FNe=0,Gm=1,Mc=2;Nt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if($kt(t))return e.lastIntValue=-1,e.advance(),Gm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Mc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return FNe};function $kt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Nt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Gm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return FNe};Nt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){fR(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Nt.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Gm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Mc;e.raise("Invalid property name")};Nt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";jNe(t=e.current());)e.lastStringValue+=vy(t),e.advance();return e.lastStringValue!==""};function jNe(e){return LNe(e)||e===95}Nt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Lkt(t=e.current());)e.lastStringValue+=vy(t),e.advance();return e.lastStringValue!==""};function Lkt(e){return jNe(e)||s4(e)}Nt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Nt.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Mc&&e.raise("Negated character class may contain strings"),!0}return!1};Nt.regexp_classContents=function(e){return e.current()===93?Gm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Gm)};Nt.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Nt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||UNe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Nt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Nt.regexp_classSetExpression=function(e){var t=Gm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Mc&&(t=Mc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Mc&&(t=Gm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Mc&&(t=Mc)}};Nt.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Nt.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Gm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Nt.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Mc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Nt.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Nt.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Mc&&(t=Mc);return t};Nt.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Gm:Mc};Nt.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&Fkt(n)||jkt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function Fkt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function jkt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Nt.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return Bkt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Bkt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Nt.regexp_eatClassControlLetter=function(e){var t=e.current();return s4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Nt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Nt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;s4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function s4(e){return e>=48&&e<=57}Nt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;BNe(n=e.current());)e.lastIntValue=16*e.lastIntValue+zNe(n),e.advance();return e.pos!==t};function BNe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function zNe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Nt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Nt.regexp_eatOctalDigit=function(e){var t=e.current();return UNe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function UNe(e){return e>=48&&e<=55}Nt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!BNe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+zNe(i),e.advance()}return!0};var LZ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new n4(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},nr=io.prototype;nr.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new LZ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};nr.getToken=function(){return this.next(),new LZ(this)};typeof Symbol<"u"&&(nr[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});nr.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};nr.readToken=function(e){return Wm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};nr.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};nr.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=dNe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};nr.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!DS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};nr.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&fNe.test(String.fromCharCode(e)))++this.pos;else break e}}};nr.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};nr.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};nr.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};nr.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};nr.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};nr.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};nr.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||hd.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};nr.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};nr.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};nr.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};nr.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Wm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+vy(t)+"'")};nr.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+vy(e)+"'")};nr.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};nr.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(hd.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new vp(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var l=null;try{l=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:l})};nr.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,l=0,u=t??1/0;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),d=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?d=c-97+10:c>=65?d=c-65+10:c>=48&&c<=57?d=c-48:d=1/0,d>=e)break;a=c,o=o*e+d}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function zkt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function VNe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}nr.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=VNe(this.input.slice(t,this.pos)),++this.pos):Wm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};nr.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=VNe(this.input.slice(t,this.pos));return++this.pos,Wm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Wm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=zkt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};nr.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};nr.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(DS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var HNe={};nr.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===HNe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};nr.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw HNe;this.raise(e,t)};nr.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(DS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};nr.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};nr.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return vy(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return DS(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};nr.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};nr.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(vx(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Wm:vx)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=vy(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};nr.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=RZ[e]),this.finishToken(t,e)};var Ukt="8.12.1";io.acorn={Parser:io,version:Ukt,defaultOptions:xH,Position:TI,SourceLocation:n4,getLineInfo:pNe,Node:i4,TokenType:_r,tokTypes:K,keywordTypes:RZ,TokContext:Ad,tokContexts:Li,isIdentifierChar:vx,isIdentifierStart:Wm,Token:LZ,isNewLine:DS,lineBreak:hd,lineBreakG:fkt,nonASCIIwhitespace:fNe};function Vkt(e,t){return io.parse(e,t)}const FZ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},Hkt={ecmaVersion:11},spe="$",qkt="d",Wkt="d1",Gkt="d2",Lo=e=>(t,n)=>n.error(t,e+" not allowed"),Ykt=Lo("Aggregate function"),Kkt=Lo("Window function"),Xkt="Invalid argument",jZ="Invalid column reference",Qkt=jZ+" (must be input to an aggregate function)",qNe="Invalid function call",Jkt="Invalid member expression",Zkt="Invalid operator parameter",eRt="Invalid param reference",tRt="Invalid variable reference",nRt="Variable not accessible in operator call",rRt="Unsupported variable declaration",iRt="Unsupported destructuring pattern",WNe="Table expressions do not support closures",GNe="Use aq.escape(fn) to use a function as-is (including closures)",sRt="use table.params({ name: value }) to define dynamic parameters",oRt="use aq.addFunction(name, fn) to add new op functions",aRt=`
Note: ${WNe}. ${GNe}, or ${sRt}.`,YNe=`
Note: ${WNe}. ${GNe}, or ${oRt}.`,lRt=`The ${Vke} method is not valid in multi-table expressions.`;function uRt(e,t){const n=cRt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,nkt(r)?(fRt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Wkt),e.scope.add(e.tuple2=Gkt),e.scope.add(e.$param=spe)):(e.scope.add(e.tuple=qkt),e.scope.add(e.$param=spe)),pr(r,e,BZ),e.root}function cRt(e){try{const t=e.field?dRt(e):Tr(e)?Kh(e):e;return Vkt(`expr=(${t})`,Hkt).body[0].expression.right}catch{$n(`Expression parse error: ${e+""}`)}}function dRt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const BZ={FunctionDeclaration:Lo("Function definitions"),ForStatement:Lo("For loops"),ForOfStatement:Lo("For-of loops"),ForInStatement:Lo("For-in loops"),WhileStatement:Lo("While loops"),DoWhileStatement:Lo("Do-while loops"),AwaitExpression:Lo("Await expressions"),ArrowFunctionExpression:Lo("Function definitions"),AssignmentExpression:Lo("Assignments"),FunctionExpression:Lo("Function definitions"),NewExpression:Lo('Use of "new"'),UpdateExpression:Lo("Update expressions"),VariableDeclarator(e,t){IH(e.id,t)},Identifier(e,t,n){QNe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,tRt,aRt)},CallExpression(e,t){const n=KNe(e.callee),r=Bke(n)||zke(n);if(r){if((t.join||t.aggregate===!1)&&RJ(n)&&Ykt(e,t),(t.join||t.window===!1)&&PJ(n)&&Kkt(e,t),t.$op=1,t.ast)AH(e,n,t),e.arguments.forEach(i=>pr(i,t,CH));else{const i=t.op(hRt(t,r,n,e.arguments));Object.assign(e,{type:Mke,name:i.id})}return t.$op=0,!1}else jke(n)?AH(e,n,t):t.error(e,qNe,YNe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Gs(z0,r))return;const{name:s}=r;if(XNe(e)&&Gs(z0,i)&&wf(FZ,i.name)){eOe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return ope(e,o,t,JNe,n);if(s===t.$param)return ope(e,o,t,mRt);t.paramsRef.has(s)?AI(e,t.paramsRef.get(s)):t.columnRef.has(s)?ZNe(r,s,t,e):wf(t.params,s)&&AI(r,s)}};function ope(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Gs(IS,s))a=s.value;else try{pr(s,n,BZ,e),a=n.param(s)}catch{n.error(e,Jkt)}return r(e,a,t,n,i),!1}const CH={...BZ,VariableDeclarator:Lo("Variable declaration in operator call"),Identifier(e,t,n){QNe(e,t,n)&&t.error(e,nRt)},CallExpression(e,t){const n=KNe(e.callee);jke(n)?AH(e,n,t):t.error(e,qNe,YNe)}};function fRt(e,t){e.generator&&Lo("Generator functions")(e,t),e.async&&Lo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,l)=>t.columnRef.set(a,[l,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(WT(t,n[0],"tuple1",i(1)),r>1&&WT(t,n[1],"tuple2",i(2)),r>2&&WT(t,n[2],"$param",s)):(WT(t,n[0],"tuple",i(0)),r>1&&WT(t,n[1],"$param",s))),t.root=e.body}function WT(e,t,n,r){Gs(z0,t)?(e.scope.add(t.name),e[n]=t.name):Gs(Oke,t)&&t.properties.forEach(i=>{const s=Gs(z0,i.key)?i.key.name:Gs(IS,i.key)?i.key.value:e.error(i,Xkt);Gs(z0,i.value)||e.error(i.value,iRt),r(i.value.name,s)})}function hRt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((l,u)=>{u<o?(pr(l,e,CH),i.push(e.field(l))):u<a?(pr(l,e,CH),s.push(e.param(l))):e.error(l,Zkt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function KNe(e){return Gs(z0,e)?e.name:Gs(Nke,e)?XNe(e)?pRt(e.property.name):e.property.name:null}function XNe(e){return Gs(z0,e.object)&&e.object.name==="Math"}function pRt(e){return e==="max"?"greatest":e==="min"?"least":e}function QNe(e,t,n){const{name:r}=e;if(!(Gs(Nke,n)&&n.property===e)){if(!(Gs(Dke,n)&&n.key===e))if(t.paramsRef.has(r))AI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))ZNe(e,r,t,n);else if(wf(t.params,r))AI(e,r);else if(wf(FZ,r))eOe(e,r);else return!0}}function JNe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,jZ),r.aggronly&&!r.$op&&r.error(e,Qkt),Uke(e,t,n,o,i)}function ZNe(e,t,n,r){const[i,s]=n.columnRef.get(t);JNe(e,i,s,n,r)}function mRt(e,t,n,r){r.params&&!wf(r.params,t)&&r.error(e,eRt),AI(e,t)}function AI(e,t){e.type=hCt,e.name=t}function eOe(e,t){e.type=cCt,e.name=t,e.raw=FZ[t]}function AH(e,t,n){if(t===Vke){const r=n.table;r||n.error(e,lRt),Hke(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=hl(s)?r.columnName(s):s;return r.column(o)||n.error(i,jZ),o}):r.columnNames())}else e.callee={type:fCt,name:t}}function IH(e,t){Gs(z0,e)?t.scope.add(e.name):Gs(oCt,e)?e.elements.forEach(n=>IH(n,t)):Gs(Oke,e)?e.properties.forEach(n=>IH(n.value,t)):t.error(e.id,rRt)}const gRt={[oR]:1,[Mke]:1};function uu(e,t={}){const n=t.generate||X3,r=t.compiler||NJ,i=vRt(t),s={},o={},a=[],l=[];let u=0,c=-1;const d=t.join?r.join:t.index==1?r.expr2:r.expr,f={op(m){const g=yRt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++u)},param(m){return Gs(IS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?tkt(g):d(n(g),i));l.push(y),gRt[g.type]&&y!==g&&$a(y)&&(y.field=g.name)},error(m,g,y=""){const b=m.start-6,_=m.end-6,w=String(f.spec).slice(b,_);$n(`${g}: "${w}"${y}`)}};Object.assign(f,t,{params:i});for(const[m,g]of U6(e))f.value(m+"",g.escape?skt(f,g,i):uRt(f,g));if(t.ast)return{names:a,exprs:l};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:l,ops:p}}function yRt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function vRt(e){return(e.table?d9(e.table):e.join?{...d9(e.join[1]),...d9(e.join[0])}:{})||{}}function d9(e){return e&&Ri(e.params)?e.params():{}}const tOe="Expr",Id="ExprList",nOe="ExprNumber",ZC="ExprObject",Fw="JoinKeys",y$="JoinValues",xc="Options",zZ="OrderKeys",jg="SelectionList",l1="TableRef",jw="TableRefList",bRt="Descending",_Rt="Query",wRt="Selection",ERt="Verb",xRt="Window";function o4(e,t){return e&&e.expr?new ape({...e,...t}):new ape(t,e)}class ape{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...Ri(this.expr)?{func:!0}:{}}}}function SRt(e){return o4(e,{desc:!0})}function pb(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return o4(e,t?{expr:t,...r}:r)}function TRt(e,t,n){return o4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function CRt(e){const t=n=>n;return t.toString=()=>e,t}function lpe(e,t){return t=t&&Ri(t.query)?t.query():t,t&&Ri(t.evaluate)?t.evaluate(null,e):e(t)}function rOe(e){return $a(e)&&(Tr(e.all)||Tr(e.matches)||Tr(e.not)||Tr(e.range))}function II(e){return e&&Ri(e.toObject)?e.toObject():Ri(e)?{expr:String(e),func:!0}:Tr(e)?e.map(II):$a(e)?e4(e,t=>II(t)):e}function UZ(e){return Tr(e)?e.map(UZ):$a(e)?Tr(e.verbs)?HZ.from(e):Tr(e.all)?yx():Tr(e.range)?XIt(...e.range):Tr(e.match)?QIt(RegExp(...e.match)):Tr(e.not)?aNe(e.not.map(II)):ARt(e):e}function ARt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=pb(n):e.func===!0&&(t=n=CRt(n)),$a(e.window)){const{frame:r,peers:i}=e.window;t=n=TRt(n,r,i)}e.desc===!0&&(t=SRt(n))}return e===t?e4(e,r=>UZ(r)):t}function IRt(e){return Tr(e)?e.map(kRt):e}function kRt(e){const t=[];return au(e).forEach(n=>{hl(n)?t.push(n):na(n)?t.push(pb(n,null)):$a(n)&&n.expr||Ri(n)?t.push(n):$n(`Invalid key value: ${n+""}`)}),t}function RRt(e){return Tr(e)?e.map(PRt):e}function PRt(e,t){return t<2?au(e):e}function NRt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if($a(r)&&!Ri(r))for(const i in r)t.push(r[i]);else n=hl(r)?r:na(r)?pb(n):Ri(r)?n:$n(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const ORt={[tOe]:aOe,[Id]:bx,[nOe]:jRt,[ZC]:by,[Fw]:BRt,[y$]:zRt,[zZ]:bx,[jg]:LRt};function DRt(e,t,n){return t===l1?upe(e):t===jw?e.map(upe):iOe(II(e),t,n)}function iOe(e,t,n){return t===xc?e&&MRt(e,n):ORt[t](e)}function MRt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?iOe(i,t[r]):i}return n}function $Rt(e,t){return uu({expr:e},{...t,ast:!0}).exprs[0]}function VZ(e){return{type:oR,name:e}}function sOe(e){return{type:oR,index:e}}function by(e,t){if(na(e))return $Rt(e,t);if(e.expr){let n;if(e.field===!0?n=VZ(e.expr):e.func===!0&&(n=by(e.expr,t)),n)return e.desc&&(n={type:bRt,expr:n}),e.window&&(n={type:xRt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...by(e[n],t),as:n}))}function oOe(e){const t=wRt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:bx(e.not)}:e.range?{type:t,operator:"range",arguments:bx(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:$n("Invalid input")}function LRt(e){return au(e).map(FRt).flat()}function FRt(e){return rOe(e)?oOe(e):hl(e)?sOe(e):na(e)?VZ(e):$a(e)?Object.keys(e).map(t=>({type:oR,name:t,as:e[t]})):$n("Invalid input")}function aOe(e){return rOe(e)?oOe(e):hl(e)?sOe(e):na(e)?VZ(e):$a(e)?by(e):$n("Invalid input")}function bx(e){return au(e).map(aOe).flat()}function jRt(e){return hl(e)?e:by(e)}function BRt(e){return Tr(e)?e.map(bx):by(e,{join:!0})}function zRt(e){return Tr(e)?e.map((t,n)=>n<2?bx(t):by(t,{join:!0})):by(e,{join:!0})}function upe(e){return e&&Ri(e.toAST)?e.toAST():e}class lOe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],l=o===Fw?IRt(a):o===y$?RRt(a):o===zZ?NRt(a):a;this[i.name]=l!==void 0?l:i.default})}static from(t){const n=kH[t.verb],r=(n.schema||[]).map(({name:i})=>UZ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===l1?lpe(n,o):s===jw?o.map(a=>lpe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=II(this[n])}),t}toAST(){const t={type:ERt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=DRt(this[n],r,i)}),t}}function Qr(e,t){return Object.assign((...n)=>new lOe(e,t,n),{schema:t})}const kH={count:Qr("count",[{name:"options",type:xc}]),derive:Qr("derive",[{name:"values",type:ZC},{name:"options",type:xc,props:{before:jg,after:jg}}]),filter:Qr("filter",[{name:"criteria",type:ZC}]),groupby:Qr("groupby",[{name:"keys",type:Id}]),orderby:Qr("orderby",[{name:"keys",type:zZ}]),relocate:Qr("relocate",[{name:"columns",type:jg},{name:"options",type:xc,props:{before:jg,after:jg}}]),rename:Qr("rename",[{name:"columns",type:jg}]),rollup:Qr("rollup",[{name:"values",type:ZC}]),sample:Qr("sample",[{name:"size",type:nOe},{name:"options",type:xc,props:{weight:tOe}}]),select:Qr("select",[{name:"columns",type:jg}]),ungroup:Qr("ungroup"),unorder:Qr("unorder"),reify:Qr("reify"),dedupe:Qr("dedupe",[{name:"keys",type:Id,default:[]}]),impute:Qr("impute",[{name:"values",type:ZC},{name:"options",type:xc,props:{expand:Id}}]),fold:Qr("fold",[{name:"values",type:Id},{name:"options",type:xc}]),pivot:Qr("pivot",[{name:"keys",type:Id},{name:"values",type:Id},{name:"options",type:xc}]),spread:Qr("spread",[{name:"values",type:Id},{name:"options",type:xc}]),unroll:Qr("unroll",[{name:"values",type:Id},{name:"options",type:xc,props:{drop:Id}}]),lookup:Qr("lookup",[{name:"table",type:l1},{name:"on",type:Fw},{name:"values",type:Id}]),join:Qr("join",[{name:"table",type:l1},{name:"on",type:Fw},{name:"values",type:y$},{name:"options",type:xc}]),cross:Qr("cross",[{name:"table",type:l1},{name:"values",type:y$},{name:"options",type:xc}]),semijoin:Qr("semijoin",[{name:"table",type:l1},{name:"on",type:Fw}]),antijoin:Qr("antijoin",[{name:"table",type:l1},{name:"on",type:Fw}]),concat:Qr("concat",[{name:"tables",type:jw}]),union:Qr("union",[{name:"tables",type:jw}]),intersect:Qr("intersect",[{name:"tables",type:jw}]),except:Qr("except",[{name:"tables",type:jw}])};let HZ=class uOe extends bke{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new uOe(t.map(lOe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return cpe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return cpe(this,"toAST",{type:_Rt})}};function cpe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function URt(e,t){return new HZ(e._verbs.concat(t),e._params,e._table)}for(const e in kH){const t=kH[e];HZ.prototype["__"+e]=function(n,...r){return URt(n,t(...r))}}function LS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,l)=>`${r[o]}${l} = ${r[o]}[${l}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function VRt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function qZ(e,t){const n=pc();return t.forEach((r,i)=>{const s=na(r)?r:i;if(s){const o=e.column(i)||$n(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function cOe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||$n("relocate requires a before or after option."),i&&s&&$n("relocate accepts only one of the before or after options."),t=qm(e,t);const o=[...qm(e,i?n:r).keys()],a=i?o[0]:o.pop(),l=new Map;return e.columnNames().forEach(u=>{const c=!t.has(u);if(u===a){s&&c&&l.set(u,u);for(const[d,f]of t)l.set(d,f);if(s)return}c&&l.set(u,u)}),qZ(e,l)}function mR(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function WZ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function HRt(e,t=0,n=e.length){let r=n?e[t++]:wr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function qRt(e,t=0,n=e.length){let r=n?e[t++]:wr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function ON(e){return vI(e)?e:+e}function WRt(e,t){const n=e.length;if(!n)return wr;if((t=+t)<=0||n<2)return ON(e[0]);if(t>=1)return ON(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=ON(e[i]);return vI(s)?s:s+(ON(e[i+1])-s)*(r-i)}class GRt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:HRt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:qRt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(WZ)),WRt(this._sorted,t)}}const v$=(e,t,n)=>LS(t,"{"+mR(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function YRt(e,t){const{ops:n,output:r}=KRt(e,t),i=e[0].fields,s=i.length,o=s===0?GZ:s===1?XRt:s===2?QRt:$n("Unsupported field count: "+s);return new o(i,n,r,t)}function KRt(e,t){const n={},r=[];function i(o,a=[]){const l=o+":"+a;if(n[l])return n[l];const u=Bke(o),c=u.create(...a);return t<0&&u.stream&&u.stream.forEach(d=>i(d,[])),u.req&&u.req.forEach(d=>i(d,[])),n[l]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class GZ extends ZIt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new GRt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class XRt extends GZ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=v$(n,s,"add"),this._rem=v$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Qd(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Qd(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class QRt extends GZ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=v$(n,s,"add"),this._rem=v$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Qd(i)&&Qd(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Qd(i)&&Qd(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Zb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=FS(e,t),o=i?(a,l)=>s[a][i[l]]:a=>s[a][0];n=n.map(a=>l=>a(l,r,o))}return n}function FS(e,t,n){if(!t.length)return n;const r=dOe(t),i=e.groups(),s=i?i.size:1;return n=n||B6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=hOe(e,o,i);for(let l=0;l<s;++l)o.write(a[l],n,l)}):r.forEach(o=>{const a=fOe(e,o);o.write(a,n,0)}),n}function dOe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(YRt(r[i],t));return n}function fOe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function hOe(e,t,n){const{keys:r,size:i}=n,s=B6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),l=a.length;for(let u=0;u<l;++u){const c=a[u];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let l=a.next(0);l>=0;l=a.next(l+1))t.add(s[r[l]],l,o)}else{const a=e.totalRows();for(let l=0;l<a;++l)t.add(s[r[l]],l,o)}return s}function pOe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const l=e.add(r[a],Array(s)),u=n[a];for(let c=0;c<s;++c)l[c]=u(i[c])}}function mOe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const dpe=mOe(WZ);function JRt(e,t,n,r,i){let s,o,a,l,u;const c=m=>o[m-1]===o[m],d=r.length,f=i.length,h=r.length?LS(["w","r","k"],"{"+mR(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,b){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,l=y,u=b,a=i?i.map(_=>_.init()):null;for(let _=0;_<d;++_)r[_].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,b=p.size,_=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(b,m+Math.abs(y)+1):b,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=dpe.left(o,o[p.i0])),p.i1<b&&c(p.i1)&&(p.i1=dpe.right(o,o[p.i1-1])));for(let E=0;E<f;++E){const x=i[E],S=a[E];for(let C=_;C<p.i0;++C)x.rem(S,s[C],e);for(let C=w;C<p.i1;++C)x.add(S,s[C],e);x.write(S,l,u)}return h(p,l,u),l}};return p}const ZRt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),ePt=e=>!!e.peers;function tPt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=zke(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function nPt(e,t,n,r={},i){const s=e.data(),o=rPt(i,s),a=o.length,l=LS(["r","d","op"],"{"+mR(t,(u,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((u,c)=>{const d=u.length,f=iPt(e,u);for(let p=0;p<a;++p)o[p].init(u,f,r,c);const h=p=>r[p][c];for(let p=0;p<d;++p){for(let m=0;m<a;++m)o[m].step(p);l(u[p],s,h)}})}function rPt(e,t){const n={};return e.forEach(r=>{const i=ZRt(r),s=ePt(r),o=`${i},${s}`,{aggOps:a,winOps:l}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});RJ(r.name)?a.push(r):l.push(tPt(r))}),Object.values(n).map(r=>JRt(t,r.frame,r.peers,r.winOps,dOe(r.aggOps,r.frame[0]!=null?-1:1)))}function iPt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function sPt(e){return PJ(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function YZ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=pc(i.drop?null:e),a=t.map(f=>o.add(f,Array(s))),[l,u]=oPt(r),c=e.isGrouped()?e.groups().size:1,d=FS(e,l,B6(r.length,()=>Array(c)));return u.length?nPt(e,a,n,d,u):aPt(e,a,n,d),e.create(o)}function oPt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(sPt(s)?n:t).push(s)}return[t,n]}function aPt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(u,c)=>r[u][o[c]]:u=>r[u][0],l=t.length;for(let u=0;u<l;++u){const c=n[u],d=t[u];if(i)for(let f=i.next(0);f>=0;f=i.next(f+1))d[f]=c(f,s,a);else{const f=e.totalRows();for(let h=0;h<f;++h)d[h]=c(h,s,a)}}}function lPt(e,t,n={}){const r=YZ(e,uu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:cOe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function uPt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const DN=2147483648,cPt=4294967295;class gOe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&DN>>>t}set(t){this._bits[t>>5]|=DN>>>t}clear(t){this._bits[t>>5]&=~(DN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&cPt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=DN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function dPt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new gOe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function fPt(e,t){const n=uu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=YZ(e,n,{drop:!0}).column("p");r=s=>i[s]}return dPt(e,r)}function yOe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),l=Zb(e,r,n),u=pc(),c=new Set(t),d=[],f=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=u.add(w,[]);c.has(w)||(d.push(e.column(w)),f.push(E))}}),t.forEach(w=>{a.has(w)||(u.has(w)||u.add(w,[]),h.push(u.data[w]))});const p=o?u.add(o,[]):null;let m=0;const g=d.length,y=h.length,b=(w,E)=>{for(let x=0;x<g;++x)f[x].length=m+E,f[x].fill(d[x].get(w),m,m+E)},_=p?(w,E)=>{for(let x=0;x<E;++x)p[w+x]=x}:()=>{};if(y===1){const w=l[0],E=h[0];e.scan((x,S)=>{const C=au(w(x,S)),A=Math.min(C.length,s);b(x,A);for(let R=0;R<A;++R)E[m+R]=C[R];_(m,A),m+=A})}else e.scan((w,E)=>{let x=0;const S=l.map(C=>{const A=au(C(w,E));return x=Math.min(Math.max(x,A.length),s),A});b(w,x);for(let C=0;C<y;++C){const A=h[C],R=S[C];for(let P=0;P<x;++P)A[m+P]=R[P]}_(m,x),m+=x});return e.create(u.new())}function hPt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Zb(e,r,n);return yOe(e,{names:[s,o],exprs:[()=>t,(l,u)=>a.map(c=>c(l,u))]},{...i,drop:t})}function Ef(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=hl(o)?t.columnName(o):o,na(o)?i.set(o,pb(o)):Ri(o)?qm(t,o).forEach(s):$a(o)?sNe(i,o):$n(`Invalid ${e} value: ${o+""}`)};return au(n).forEach(s),r.preparse&&r.preparse(i),uu(i,{table:t,...r})}function pPt(e,t,n){return hPt(e,Ef("fold",e,t),n)}function fpe(e,t,n,r){const i=n&&n.length;return mPt(i?gPt(e,n,r):e,t,i)}function mPt(e,{names:t,exprs:n,ops:r},i){const s=Zb(e,r,n),o=i?null:pc(e),a=e.totalRows();return t.forEach((l,u)=>{const c=e.column(l),d=i?c.data:o.add(l,Array(a)),f=s[u];e.scan(h=>{const p=c.get(h);d[h]=Qd(p)?p:f(h)})}),i?e:e.create(o)}function gPt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,l=Q3(o);e.scan((p,m)=>a.add(l(p,m)));const u=e.columnNames(),c=pc(),d=u.map(p=>c.add(p,[]));u.forEach((p,m)=>{const g=i[p],y=d[m];e.scan(b=>y.push(g.get(b)))});const f=Q3(o.map((p,m)=>g=>g[m])),h=LS("v","{"+d.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",d,u.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,b)=>y*b.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),hpe(r,n,(y,b)=>{a.has(f(y))||(h(y),g[p++]=b[0])}),c.groupby({...r,keys:g})}else hpe(r,n,p=>{a.has(f(p))||h(p)});return e.create(c.new())}function hpe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),l=[];if(e){const{get:c,rows:d,size:f}=e;o[0]=f,l.push((h,p)=>{const m=d[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,d)=>{const f=d+r;o[d+i]=c.length,l.push((h,p)=>h[f]=c[p])});const u=Array(r+t.length);for(let c=0;c<s;++c)l[c](u,0);n(u,a);for(let c=s-1;c>=0;){const d=++a[c];d<o[c]?(l[c](u,d),n(u,a),c=s-1):(a[c]=0,l[c](u,0),--c)}}function KZ(e,{names:t,exprs:n,ops:r}){const i=pc(),s=e.groups();return s&&pOe(i,s),yPt(t,n,s,FS(e,r),i),e.create(i.new())}function yPt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(l,u)=>r[l][u],a=e.length;for(let l=0;l<a;++l){const u=t[l];if(u.field!=null)i.add(e[l],r[u.field]);else if(s>1){const c=i.add(e[l],Array(s));for(let d=0;d<s;++d)c[d]=u(d,null,o)}else i.add(e[l],[u(0,null,o)])}}function vPt(e,t,n={}){if(t=uu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:$n(`Invalid impute column ${Kh(r)}`)),n.expand){const r={preparse:bPt,aggronly:!0},i=Ef("impute",e,n.expand,r),s=KZ(e.ungroup(),i);return fpe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return fpe(e,t)}function bPt(e){e.forEach((t,n)=>t.field?e.set(n,Ike(t+"")):0)}function _Pt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function vOe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function wPt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function EPt(e,t){const n=["i","a","j","b"];return LS(n,"{"+mR(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function xPt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),l=a.length,u=new Int32Array(l),c=t.data(),d=t.indices(!1),f=d.length,h=new Int32Array(f),p=r.length,m=pc(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const b=EPt(g,y);if((Tr(n)?TPt:SPt)(b,n,o,c,a,d,u,h,l,f),s.left)for(let w=0;w<l;++w)u[w]||b(a[w],o,-1,c);if(s.right)for(let w=0;w<f;++w)h[w]||b(-1,o,d[w],c);return e.create(m.new())}function SPt(e,t,n,r,i,s,o,a,l,u){for(let c=0;c<l;++c){const d=i[c];for(let f=0;f<u;++f){const h=s[f];t(d,n,h,r)&&(e(d,n,h,r),o[c]=1,a[f]=1)}}}function TPt(e,[t,n],r,i,s,o,a,l,u,c){let d,f,h,p,m,g,y,b,_=e;u>=c?(d=r,f=t,h=a,p=s,m=i,g=n,y=l,b=o):(d=i,f=n,h=l,p=o,m=r,g=t,y=a,b=s,_=(x,S,C,A)=>e(C,A,x,S));const w=wPt(b,m,g),E=p.length;for(let x=0;x<E;++x){const S=p[x],C=w.get(f(S,d));if(C){const A=C.length;for(let R=0;R<A;++R){const P=C[R];_(S,d,b[P],m),y[P]=1}h[x]=1}}}function b$(e,t,n){const r=new Map;au(n).forEach((s,o)=>{s=hl(s)?t.columnName(s):s,na(s)?r.set(o,pb(s)):Ri(s)||$a(s)&&s.expr?r.set(o,s):$n(`Invalid ${e} key value: ${s+""}`)});const i=uu(r,{table:t,aggregate:!1,window:!1});return Q3(i.exprs,!0)}function CPt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function XZ(e,t,n){if(n)na(n)?n=[n,n]:Tr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=CPt(e.columnNames(),t.columnNames());r.length||$n("Natural join requires shared column names."),n=[r,r]}return n}function bOe(e,t,n,r){return n.length!==r.length&&$n("Mismatched number of join keys"),[b$("join",e,n),b$("join",t,r)]}const APt={aggregate:!1,window:!1},IPt={...APt,index:1};function ppe(e,t,n,r,i={}){n=XZ(e,t,n);const s={join:[e,t]};let o;if(Tr(n)){const[a,l]=n.map(au);o=bOe(e,t,a,l),r||(r=kPt(e,a,l,i))}else o=uu({on:n},s).exprs[0],r||(r=[yx(),yx()]);return xPt(e,t,o,RPt(e,t,r,s,i&&i.suffix),i)}function kPt(e,t,n,r){const i=[];t.forEach((o,a)=>na(o)&&o===n[a]?i.push(o):0);const s=aNe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const l=`[${Kh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${l} == null ? b${l} : a${l}`}:a}),s]}return r.right?[s,yx()]:[yx(),s]}function RPt(e,t,n,r,i=[]){if(Tr(n)){let s,o,a,l=n.length;s=o=a={names:[],exprs:[]},l--&&(s=Ef("join",e,n[0],r)),l--&&(o=Ef("join",t,n[1],IPt)),l--&&(a=uu(n[2],r));const u=new Set,c=new Set(s.names);return o.names.forEach(d=>{c.has(d)&&u.add(d)}),u.size&&(i[0]!==""&&mpe(s.names,u,i[0]||"_1"),i[1]!==""&&mpe(o.names,u,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return uu(n,r)}function mpe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function PPt(e,t,n,r={}){const i=new gOe(e.totalRows());return(Tr(n)?NPt:OPt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function NPt(e,t,n,[r,i]){const s=vOe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function OPt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const l=t.indices(!1),u=n.indices(!1);for(let c=0;c<i;++c){const d=l[c];for(let f=0;f<s;++f)if(r(d,o,u[f],a)){e.set(d);break}}}else for(let l=0;l<i;++l)for(let u=0;u<s;++u)if(r(l,o,u,a)){e.set(l);break}}function gpe(e,t,n,r){n=XZ(e,t,n);const i=Tr(n)?bOe(e,t,...n.map(au)):uu({on:n},{join:[e,t]}).exprs[0];return PPt(e,t,i,r)}function DPt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=pc(e),l=e.totalRows();i.forEach(f=>a.add(f,Array(l).fill(wr)));const u=vOe(t,r),c=LS(["lr","rr","data"],"{"+mR(i,(f,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(f=>a.data[f]),Zb(t,o,s)),d=t.data();return e.scan((f,h)=>{const p=u.get(n(f,h));p>=0&&c(f,p,d)}),e.create(a)}function MPt(e,t,n,r){return n=XZ(e,t,n),DPt(e,t,[b$("lookup",e,n[0]),b$("lookup",t,n[1])],Ef("lookup",t,r))}const RH=(e,t)=>e??t;function $Pt(e,t,n,r={}){const{keys:i,keyColumn:s}=LPt(e,t,r),o=RH(r.valueSeparator,"_"),a=n.names.length>1?(u,c)=>c+o+i[u]:u=>i[u],l=i.map(u=>FS(e,n.ops.map(c=>{if(c.name==="count"){const f=h=>u===s[h]?1:NaN;return f.toString=()=>u+":1",{...c,name:"sum",fields:[f]}}const d=c.fields.map(f=>{const h=(p,m)=>u===s[p]?f(p,m):NaN;return h.toString=()=>u+":"+f,h});return{...c,fields:d}})));return e.create(FPt(n,a,e.groups(),l))}function LPt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=RH(n.sort,!0),s=RH(n.keySeparator,"_"),o=Zb(e,t.ops,t.exprs),a=o.length===1?o[0]:(d,f)=>o.map(h=>h(d,f)).join(s),l=Array(e.totalRows());e.scan((d,f)=>l[d]=a(d,f));const u=FS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[d=>l[d]],params:[]}])[0][0],c=i?u.sort():u;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:l}}function FPt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=pc(),a=i.length,l=e.length;let u;const c=(d,f)=>u[d][f];r&&pOe(o,r);for(let d=0;d<l;++d){const f=t[d];if(f.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[d]),i[h][f.field]);else if(s>1)for(let h=0;h<a;++h){u=i[h];const p=o.add(n(h,e[d]),Array(s));for(let m=0;m<s;++m)p[m]=f(m,null,c)}else for(let h=0;h<a;++h)u=i[h],o.add(n(h,e[d]),[f(0,null,c)])}return o.new()}function jPt(e,t,n,r){return $Pt(e,Ef("fold",e,t),Ef("fold",e,n,{preparse:BPt,aggronly:!0}),r)}function BPt(e){e.forEach((t,n)=>t.field?e.set(n,Tke(t+"")):0)}function zPt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),qZ(e,qm(e,t,n))}function ype(e,t){return KZ(e,uu(t,{table:e,aggronly:!0,window:!1}))}function UPt(e,t,n,r){return(t?r?HPt:VPt:r?WPt:qPt)(e.length,e,n,r)}function VPt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*AS()|0];return t}function HPt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let l=0;l<i;++l)s[l]=o+=r(n[l]);const a=mOe(WZ).right;for(let l=0;l<e;++l)t[l]=n[a(s,o*AS())];return t}function qPt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*AS();s<e&&(t[s|0]=n[i])}return t}function WPt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(AS())/r(n[a]);o.sort((a,l)=>s[a]-s[l]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function GPt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=AS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function YPt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,d)=>{let f=t(d);return a+=f=i?f:Math.min(c.length,f),f});const l=new Uint32Array(a);let u=0;return o.forEach((c,d)=>{const f=t[d],h=l.subarray(u,u+=f);!i&&f===c.length?h.set(c):UPt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&GPt(l),e.reify(l)}function KPt(e,t,n={}){return YPt(e,XPt(e,t),QPt(e,n.weight),n)}const _Oe=e=>t=>e.get(t)||0;function XPt(e,t){return hl(t)?()=>t:_Oe(KZ(e,uu({size:t},{table:e,window:!1})).column("size"))}function QPt(e,t){return t==null?null:(t=hl(t)?e.columnName(t):t,_Oe(na(t)?e.column(t):YZ(e,uu({w:t},{table:e}),{drop:!0}).column("w")))}function JPt(e,t){return qZ(e,qm(e,t))}function ZPt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),l=Zb(e,r,n),u=pc(),c=t.reduce((f,h,p)=>f.set(h,p),new Map),d=(f,h)=>{const p=eNt(e,l[f],a),m=p.length;for(let g=0;g<m;++g)u.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(f=>{c.has(f)?(o||u.add(f,e.column(f)),d(c.get(f),f),c.delete(f)):u.add(f,e.column(f))}),c.forEach(d),e.create(u)}function eNt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=au(t(s,o)),l=Math.min(a.length,n);for(;i.length<l;)i.push(Array(r).fill(wr));for(let u=0;u<l;++u)i[u][s]=a[u]}),i}function tNt(e,t,n){return ZPt(e,Ef("spread",e,t),n)}function nNt(e,t){return e.concat(t).dedupe()}function rNt(e,t,n){return yOe(e,Ef("unroll",e,t),n&&n.drop?{...n,drop:Ef("unroll",e,n.drop).names}:n)}function iNt(e,t){return e.create({groups:sNt(e,t)})}function sNt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Zb(e,r,n);const o=Q3(s),a=e.totalRows(),l=new Uint32Array(a),u={},c=[],d=e.data(),f=e.mask();if(f)for(let h=f.next(0);h>=0;h=f.next(h+1)){const p=o(h,d)+"",m=u[p];l[h]=m??(u[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,d)+"",m=u[p];l[h]=m??(u[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,d))),{keys:l,get:s,names:t,rows:c,size:c.length}}function oNt(e,t){return iNt(e,Ef("groupby",e,t))}function aNt(e,t){return e.create({order:t})}const lNt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function uNt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:l}=uu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([X3(p,{index:"a",op:o}),X3(p,{index:"b",op:a})])},window:!1}),u=FS(e,l),c=(h,p)=>u[h][p],d=n.length;let f="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<d;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];f+=lNt(m,g,-p,p)}return f+="0;};",Function("op","keys","fn","data",f)(c,s,i,e.data())}function cNt(e,t){return aNt(e,dNt(e,t))}function dNt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if($a(o)&&!Ri(o))for(const a in o)i(o[a]);else i(hl(o)?pb(s,e.columnName(o)):na(o)?pb(s):Ri(o)?s:$n(`Invalid orderby field: ${s+""}`))}),uNt(e,r)}function fNt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=pc();return e.columnNames().forEach(o=>{const a=Array(r);let l=0;i.forEach(u=>{const c=u.column(o)||{get:()=>wr};u.scan(d=>a[l++]=c.get(d))}),s.add(o,a)}),e.create(s.new())}function hNt(e,t){const n=pc(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},l=new Uint32Array(a+1);s.forEach(f=>n.add(f,null));const u=r?hOe(e,t,r):[fOe(e,t)];t.outputs().map(f=>n.add(f,[]));const c=l.length-1;let d=0;for(let f=0;f<c;++f)d+=l[f+1]=t.write(u[f],n.data,l[f]);if(r){const f=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(d),g=i[p];for(let y=0,b=0;y<a;++y)m.fill(g(o[y],f),b,b+=l[y+1])})}return e.create(n.new())}function pNt(e){return e.isGrouped()?e.create({groups:null}):e}function mNt(e){return e.isOrdered()?e.create({order:null}):e}const gNt={__antijoin:(e,t,n)=>gpe(e,t,n,{anti:!0}),__count:(e,t={})=>ype(e,{[t.as||"count"]:Cke()}),__cross:(e,t,n,r)=>ppe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:fNt,__dedupe:VRt,__derive:lPt,__except:uPt,__filter:fPt,__fold:pPt,__impute:vPt,__intersect:_Pt,__join:ppe,__lookup:MPt,__pivot:jPt,__relocate:cOe,__rename:zPt,__rollup:ype,__sample:KPt,__select:JPt,__semijoin:gpe,__spread:tNt,__union:nNt,__unroll:rNt,__groupby:oNt,__orderby:cNt,__ungroup:pNt,__unorder:mNt,__reduce:hNt};Object.assign(tm.prototype,gNt);function yNt(e,t){return tm.from(e,t)}function vNt(e){return o4(e,{escape:!0,toString(){$n("Escaped values can not be serialized.")}})}tm.prototype;const Ed={top:30,left:60,right:80,bottom:50};function wOe({data:e,selection:t,parameters:n,dataname:r}){const o=I.useMemo(()=>{const c=e.map(d=>({...d,value:+d[n.y_var]}));return yNt(c)},[e,n]),a=I.useMemo(()=>{const c=ku(o.filter(vNt(d=>t.includes(d[n.cat_var]))).array("value"));return r==="clean_stocks"?c:[0,c[1]]},[o,t,n,r]),l=I.useMemo(()=>Dc([Ed.top,400-Ed.bottom]).domain(ku(o.array("value")).reverse()),[o,400]),u=Mh(r==="clean_stocks"?".0%":",.0f");return(t==null?void 0:t.length)===0?null:v.jsxs("svg",{style:{height:"400px",width:"60px",overflow:"visible"},children:[v.jsx("rect",{y:l(a[1]),height:l(a[0])-l(a[1]),x:Ed.left-10,width:10,opacity:.1,fill:"black"}),v.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",textAnchor:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:25,y:Ed.top-5,children:u(l.domain()[0])}),v.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",textAnchor:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:25,y:400-Ed.bottom+8,children:u(l.domain()[1])}),v.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:Ed.left-5,y:l(a[0]),children:u(a[0])}),v.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:Ed.left-5,y:l(a[1]),children:u(a[1])}),e.map(c=>v.jsx("rect",{opacity:.2,fill:+c[n.y_var]>0?"steelblue":"firebrick",x:0,width:50,y:l(+c[n.y_var]),height:1},"strip")),v.jsx("line",{strokeWidth:2,stroke:"black",style:{fontSize:10,dominantBaseline:"middle"},x1:0,x2:50,y1:l(a[0]),y2:l(a[0])}),v.jsx("line",{strokeWidth:2,stroke:"black",x1:0,x2:50,y1:l(a[1]),y2:l(a[1])}),v.jsx("line",{strokeWidth:2,stroke:"black",x1:0,x2:0,y1:l(a[1]),y2:l(a[0])}),v.jsx("line",{strokeWidth:2,stroke:"black",x1:50,x2:50,y1:l(a[1]),y2:l(a[0])}),v.jsx("path",{fill:"black",opacity:"0.1",d:`M${Ed.left}, ${l(a[1])} L 113, ${Ed.top} L 113, ${400-Ed.bottom} L ${Ed.left}, ${l(a[0])}`})]})}const bNt=Object.freeze(Object.defineProperty({__proto__:null,StripPlot:wOe},Symbol.toStringTag,{value:"Module"}));function vpe({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState(e.dataset),[o,a]=I.useState(e.initial_selection),[l,u]=I.useState(null),[c,d]=I.useState([new Date(e.start_date),new Date(e.end_date)]),[f,h]=I.useState(e.guardrail);I.useEffect(()=>{n1t(`./data/${i}.csv`).then(E=>{r(E),u(Array.from(new Set(E.map(x=>JSON.stringify({name:x[e.cat_var],group:x[e.group_var]})))).map(x=>JSON.parse(x)))})},[i,e]);const p=I.useMemo(()=>n&&c?n.filter(E=>new Date(E[e.x_var]).getTime()>=c[0].getTime()).filter(E=>new Date(E[e.x_var]).getTime()<=c[1].getTime()):null,[n,c,e.x_var,i]),m=E=>{s(E),a([])},{actions:g,trrack:y}=I.useMemo(()=>{const E=yI.create(),x=E.register("selection",(A,R)=>(A.selection=R,A)),S=E.register("range",(A,R)=>(A.range=R,A)),C=tH({registry:E,initialState:{selection:[],range:[e.start_date,e.end_date]}});return{actions:{selection:x,range:S},trrack:C}},[e.end_date,e.start_date]),b=I.useCallback(E=>{y.apply("Change daterange",g.range([E[0].toISOString().slice(0,10),E[1].toISOString().slice(0,10)]))},[y,g]),_=I.useMemo(()=>Pd(b,200),[b]),w=I.useCallback(E=>{y.apply("Change selection",g.selection(E)),t({status:!0,provenanceGraph:y.graph.backend,answers:{}})},[y,g,t]);return p&&l&&c&&o?v.jsxs(Es,{pb:50,children:[e.allow_guardrail_selector?v.jsx(Z1,{shadow:"sm",radius:"md",p:"md",style:{width:"500px"},children:v.jsx(oH,{guardrail:f,setGuardrail:h,dataname:i,setDataname:m,setSelection:a})}):null,v.jsx(Ct,{children:v.jsxs(Z1,{shadow:"md",radius:"md",p:"md",withBorder:!0,children:[e.caption===""?null:v.jsx(Ct,{style:{width:"800px"},mb:"xl",children:v.jsx(ZY,{children:e.caption})}),v.jsxs(Ln,{wrap:"nowrap",children:[e.allow_selection===!1&&e.guardrail!=="juxt_data"?null:v.jsx(Ln,{wrap:"nowrap",children:v.jsx(iH,{parameters:e,data:p,dataname:i,items:l,selection:o,setSelection:a,trackSelection:w,range:c,guardrail:f})}),e.allow_selection===!1&&e.guardrail!=="juxt_data"?null:v.jsx(D0,{orientation:"vertical",size:"xs"}),v.jsxs(Es,{children:[v.jsx(Ln,{justify:"apart",children:v.jsxs(Es,{gap:0,justify:"flex-start",children:[v.jsx(Xe,{fw:600,children:i==="clean_stocks"?"Percent change in stock price":"Infections per million people"}),f==="super_summ"?v.jsx(Xe,{fz:"xs",c:"dimmed",children:"Shaded area represents the middle 50% of all values."}):null,f==="juxt_summ"?v.jsx(Xe,{fz:"xs",c:"dimmed",children:"Bar on the left highlights the range of selection among all data."}):null]})}),v.jsxs(Es,{children:[v.jsxs(Ln,{wrap:"nowrap",children:[f==="juxt_summ"?v.jsx(wOe,{parameters:e,data:p,selection:o,dataname:i}):null,v.jsx(rH,{parameters:e,data:p,dataname:i,items:l,selection:o,range:c,guardrail:f})]}),e.allow_time_slider?v.jsx("div",{style:{width:"500px"},children:v.jsx(sH,{parameters:e,setRange:d,trackRange:_})}):null]})]})]})]})})]}):v.jsx(Os,{})}const _Nt=Object.freeze(Object.defineProperty({__proto__:null,DataExplorer:vpe,default:vpe},Symbol.toStringTag,{value:"Module"}));function wNt({parameters:e}){const t=e.dataset==="clean_data"?v.jsxs(Pw,{children:["Select any subset of countries to the left of the visualization to support the prompt at the top of the page.",v.jsx("h4",{children:"Background:"}),"You live in a fantasy world that consists of your home country, as well as other 15 countries located across 5 continents: Eldoril, Thundoril, Aerion, Silvoria, and Mystara. Countries within each continent are similar to each other in size and demographics.",v.jsx("h4",{children:"Scenario:"}),"You are an analyst for the Viral Disease Policy Center of your home country at time when there is a new viral disease called",v.jsx("i",{children:" Celestial Sniffles"}),". Luckily, your country has not been affected yet and has time to prepare and decide on a policy to combat it. You have access to the infection data from other countries that implemented one of the 3 available policies: A, B, or C. However, due to socioeconomic factors, the Surgeon General in your country has",v.jsx("i",{children:" already decided on a policy"}),".",v.jsx("h4",{children:"Task:"}),"You are tasked with leading the promotion efforts that make the case for the chosen policy. In the experiment, you will use an interactive data explorer that shows infection data from other countries. You should select a view that best shows (and convinces the population) that your country's"," ",v.jsx("b",{children:"chosen policy is the best policy to combat the disease"}),". After finalizing the view, click the camera button and add a caption or a slogan that will go along with your visualization."]}):v.jsxs(Pw,{children:["Select any subset of stocks to the left of the visualization to support the prompt at the top of the page.",v.jsx("h4",{children:"Scenario:"})," ","You are a financial advisor. Your client approached you asking for help in picking a new investmentan industry fund that equally invests within a single industry. The client prefers to make their decisions"," ",v.jsx("i",{children:"solely based on the data"}),", and not based on any inside knowledge about the type of industry. However, your boss"," ",v.jsx("i",{children:"does"})," ","have inside knowledge and orders you to recommend a specific industry (which is ultimately in the best interest of the client). You cannot disclose this to the client and have to use data to support your recommendations.",v.jsx("h4",{children:"Task:"})," ","In the experiment, you will use an interactive data explorer that shows performance of different stocks from a variety of industries. You should select a view that best shows (and convinces your client) that"," ",v.jsx("b",{children:"the chosen industry fund would be the best investment with the highest returns"}),". After finalizing the view, click the camera button and add a caption or a slogan that will go along with your visualization."]}),n=e.dataset==="clean_data"?v.jsxs(Pw,{children:[v.jsx("h4",{children:"Background:"}),"You live in a fantasy world that consists of your home country, as well as other 15 countries located across 5 continents: Eldoril, Thundoril, Aerion, Silvoria, and Mystara. Countries within each continent are similar to each other in size and demographics.",v.jsx("h4",{children:"Scenario:"}),"There's a new viral disease called"," ",v.jsx("i",{children:"Celestial Sniffles"}),". Most countries in the world have adopted one of 3 major disease containment policies: A, B, or C. Luckily, your country has not been affected yet but you may need to travel to one of the affected countries for work. Afraid of getting sick and stuck abroad with a huge hospital bill, you decide to purchase a traveler's health insurance policy. The price of the policy is very flexible and depends on the amount of coverage you'll get: anywhere between $0 (no coverage) to $100 (full coverage). Since you are not familiar with the disease trends or containment policies, you turn to social media to read what people shared about recent infection rates.",v.jsx("h4",{children:"Task:"}),"In the experiment, you will see a set of visualizations that show infection rates in different countries that adopted one of the containment policies A, B, or C. You can refer to the list of countries to the left of the visualization to see which country adopted which Policy. Based on each visualization, you will be asked to decide"," ",v.jsx("b",{children:"how much to spend on your insurance policy"})," ","and"," ",v.jsx("b",{children:"answer a short survey"}),"."]}):v.jsxs(Pw,{children:[v.jsx("h4",{children:"Scenario:"}),"You have $100 that you would like to invest in"," ",v.jsx("i",{children:"industry funds"})," ","but are not sure how to best allocate that money. An industry fund is composed of all individual stocks pertaining to that industry (e.g., a Pharma fund is composed of Pharma A, Pharma B, and Pharma C stocks). Since you are not familiar with the current market, you turn to social media to read what people shared about recent stock performance.",v.jsx("h4",{children:"Task:"}),"In the experiment, you will see a set of visualizations that show performance of different stocks from a variety of industries. Based on each visualization, you will be asked to decide"," ",v.jsx("b",{children:"how much to invest in a given industry fund"})," ","and"," ",v.jsx("b",{children:"answer a short survey"}),"."]});return v.jsx(Ln,{justify:"right",children:v.jsxs(D1,{width:800,shadow:"md",children:[v.jsx(D1.Target,{children:v.jsx(xn,{variant:"light",color:"gray",size:"compact-sm",children:"Help"})}),v.jsx(D1.Dropdown,{children:v.jsx(Xe,{size:"sm",children:e.allow_selection?t:n})})]})})}const ENt=Object.freeze(Object.defineProperty({__proto__:null,Help:wNt},Symbol.toStringTag,{value:"Module"}));var EOe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:Ks,()=>(()=>{var n={d:(c,d)=>{for(var f in d)n.o(d,f)&&!n.o(c,f)&&Object.defineProperty(c,f,{enumerable:!0,get:d[f]})},o:(c,d)=>Object.prototype.hasOwnProperty.call(c,d),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},i(c)}function s(c){return function(d){if(Array.isArray(d))return o(d)}(c)||function(d){if(typeof Symbol<"u"&&d[Symbol.iterator]!=null||d["@@iterator"]!=null)return Array.from(d)}(c)||function(d,f){if(d){if(typeof d=="string")return o(d,f);var h=Object.prototype.toString.call(d).slice(8,-1);if(h==="Object"&&d.constructor&&(h=d.constructor.name),h==="Map"||h==="Set")return Array.from(d);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(d,f)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,d){(d==null||d>c.length)&&(d=c.length);for(var f=0,h=new Array(d);f<d;f++)h[f]=c[f];return h}function a(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}function l(c,d){for(var f=0;f<d.length;f++){var h=d[f];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(g,y){if(i(g)!=="object"||g===null)return g;var b=g[Symbol.toPrimitive];if(b!==void 0){var _=b.call(g,y||"default");if(i(_)!=="object")return _;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>u});var u=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var d,f;return d=c,f=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return await Promise.all(m.map(async function(y){var b;return b=y instanceof File||y instanceof Blob?await y.arrayBuffer():await fetch(y).then(function(_){return _.headers.has("Content-Type")&&!_.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(_.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(y,'")')),_.arrayBuffer()}),await h._context.decodeAudioData(b)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var g=0;g<m.numberOfChannels;g++){for(var y=p.getChannelData(g),b=m.getChannelData(g),_=m.getChannelData(g).length-1;_>=0;_--)y[_]+=b[_];p.getChannelData(g).set(y)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(g){for(var y=0;y<g.numberOfChannels;y++)p.getChannelData(y).set(g.getChannelData(y),m);m+=g.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var g=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),y=0;y<h.numberOfChannels;y++){var b=h.getChannelData(y);g.getChannelData(y).set(b.subarray(0,Math.ceil(p*h.sampleRate)+1),0),g.getChannelData(y).set(b.subarray(Math.ceil(p*h.sampleRate)+2,g.length+1),Math.ceil((p+m)*h.sampleRate))}return g}},{key:"sliceAudio",value:function(h,p,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var b=Math.round((m-p)*this._sampleRate),_=Math.round(p*this._sampleRate),w=this._context.createBuffer(h.numberOfChannels,b,this._sampleRate),E=0;E<h.numberOfChannels;E++)for(var x=h.getChannelData(E),S=w.getChannelData(E),C=0;C<b;C++)S[C]=x[_+C],C<g*this._sampleRate&&(S[C]*=C/(g*this._sampleRate)),C>b-y*this._sampleRate&&(S[C]*=(b-C)/(y*this._sampleRate));return w}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),g=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),y=new Blob([g],{type:p});return{blob:y,url:this._renderURL(y),element:this._renderAudioElement(y)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var g=2*p,y=2*h.length,b=36+y,_=new ArrayBuffer(8+b),w=new DataView(_);return this._writeString(w,0,"RIFF"),w.setUint32(4,b,!0),this._writeString(w,8,"WAVE"),this._writeString(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,p,!0),w.setUint32(24,m,!0),w.setUint32(28,m*g,!0),w.setUint16(32,g,!0),w.setUint16(34,16,!0),this._writeString(w,36,"data"),w.setUint32(40,y,!0),this._floatTo16BitPCM(w,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var g=0;g<p.length;g++,m+=2){var y=Math.max(-1,Math.min(1,p[g]));h.setInt16(m,y<0?32768*y:32767*y,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var g=0;g<m.length;g++)h.setUint8(p+g,m.charCodeAt(g))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var g=p.reduce(function(w,E){return w+E.length},0),y=new Float32Array(g),b=0,_=0;b<g;)p.forEach(function(w){y[b++]=w[_]}),_++;return y}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],f&&l(d.prototype,f),Object.defineProperty(d,"prototype",{writable:!1}),c}();return r})())})(EOe);var xNt=EOe.exports;const SNt=mu(xNt),MN=3,B_=25,$N=25,LN=20,bpe=1;function TNt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,l]=I.useState(!1),[u,{width:c}]=_k();return v.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),style:{cursor:"pointer"},children:[v.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+bpe,width:e(t.endTime)-e(t.startTime)-bpe*2,y:r-B_,height:B_}),v.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-MN,width:c+MN*2,y:r-B_-$N-o,height:LN,fill:"whitesmoke"}),v.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-MN,x2:c+e(t.startTime)+MN,y1:r-B_-$N+LN-o,y2:r-B_-$N+LN-o}),v.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-B_-$N-o,height:LN,children:v.jsx(Ju,{style:{width:"fit-content"},children:v.jsx(Xe,{lineClamp:1,ref:u,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}function CNt({xScale:e,answer:t,height:n,labelHeight:r=0}){return v.jsx("g",{children:v.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const _pe=25,ANt=8;function xOe({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=Qo(u=>u),a=I.useMemo(()=>{let u=0;const c=Object.entries(t.answers||{}).filter(d=>s?d[0]===s:!0).sort((d,f)=>d[1].startTime-f[1].startTime);return c.map((d,f)=>{const[h,p]=d,m=f>0?c[f-u-1]:null;return m&&m[0].length*ANt+e(m[1].startTime)>e(p.startTime)?u+=1:u=0,{line:v.jsx(CNt,{labelHeight:u*_pe,answer:p,height:r,xScale:e},h),label:v.jsx(TNt,{labelHeight:u*_pe,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),l=I.useMemo(()=>Object.entries(t.answers||{}).sort((c,d)=>c[1].startTime-d[1].startTime).map(c=>{const[d,f]=c,h=[];let p=[-1,-1],m="visible";if(f.windowEvents)for(let g=0;g<f.windowEvents.length;g+=1)f.windowEvents[g][1]==="visibility"&&(f.windowEvents[g][2]==="hidden"&&m==="visible"?(p=[f.windowEvents[g][0],-1],m="hidden"):f.windowEvents[g][2]==="visible"&&m==="hidden"&&(p[1]=f.windowEvents[g][0],h.push(p),p=[-1,-1],m="visible"));return h.map((g,y)=>v.jsx(on,{withinPortal:!0,label:"Browsed away",children:v.jsx("rect",{x:e(g[0]),width:e(g[1])-e(g[0]),y:r-5,height:10})},y))}),[r,t,e]);return s?null:v.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(u=>u.line),a.map(u=>u.label),l]})}function INt({cx:e,cy:t,r:n,color:r}){return v.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function kNt({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return v.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,l]=o;return v.jsx("g",{onClick:()=>i(a,l.createdOn,s),children:v.jsx(INt,{color:a===r?"cornflowerblue":"lightgray",cx:e(l.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?v.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const wpe={left:5,top:0,right:5,bottom:0};function RNt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:l,setIsPlaying:u,setSelectedTask:c}){const d=I.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{index:f}=bf(),h=fp(),p=f?h:null,m=I.useMemo(()=>!p||!t?null:Object.keys(t.answers).find(b=>b.startsWith(p))||null,[t,p]);I.useEffect(()=>{if(!m||!t)return;const b=t.answers[m].provenanceGraph;if(!b)return;const{startTime:_}=t.answers.introduction_0,w=_+o;if(!i||!b.nodes[i]){s(b.root);return}let E=b.nodes[i];for(;;)if(w<E.createdOn){if(vSt(E))break;{const x=E.parent;if(w<b.nodes[x].createdOn)E=b.nodes[x];else break}}else if(E.children.length>0){const x=E.children[0];if(w>b.nodes[x].createdOn)E=b.nodes[x];else break}else break;E.id!==i&&s(E.id)},[i,t,o,s,m]);const g=I.useCallback((b,_)=>{a(_,(_-e.domain()[0])/d),s(b)},[s,a,d,e]),y=I.useMemo(()=>Object.entries(t.answers).filter(b=>m?m===b[0]:!0).map(b=>{const[_,w]=b;return v.jsx(kNt,{taskName:_,answer:w,height:r,currentNode:i,setCurrentNode:g,xScale:e},_)}),[i,g,r,t.answers,m,e]);return v.jsx(Es,{children:v.jsxs("svg",{style:{width:n,height:r},children:[v.jsx("line",{stroke:"black",strokeWidth:1,x1:wpe.left,x2:n+wpe.left,y1:r/2,y2:r/2}),y]})})}function hw(e){const t=I.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return I.useLayoutEffect(()=>{t.current=e}),I.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const Epe={top:5,left:5,right:5,bottom:5};function PNt({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=I.useMemo(()=>e.map(s=>v.jsxs("g",{children:[v.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:Epe.top,y2:Epe.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>v.jsx("g",{children:o.map((l,u)=>{const c=t(n+s.start*1e3),d=t(n+s.end*1e3);return l?v.jsx("foreignObject",{x:c+(d-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+u*15),y:30,height:"20px",width:"20px",children:v.jsx(on,{label:l.name,withArrow:!0,arrowSize:6,children:v.jsx(Ph,{size:12,color:l.color})})},l.name):null})},a))]},s.start)),[r,n,e,t]);return v.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}function SOe({selectedTags:e,removeFunc:t,isLink:n=!1,participantId:r="",currentTask:i="",size:s="md"}){return e.map((o,a)=>{if(!o||!o.id)return null;const l=iI(o.color).l;return v.jsx(on,{label:o.name,withinPortal:!0,children:v.jsx(tb,{size:s,component:n?KK:null,style:{width:"80px"},to:`${dd}ThinkAloud/analysis/${r}/ui/reviewer-${i}`,target:"_blank",withRemoveButton:!!t,styles:{root:{backgroundColor:o.color,color:l>.7?"black":"white"}},onRemove:()=>t?t(o.id):null,children:o.name},o.id+a)},r+i+a)})}function rA({tags:e,selectedTags:t,onSelectTags:n,disabled:r=!1,taskTags:i,partTags:s}){const o=Ik(),a=h=>n([...t,[...e,...i||[],...s||[]].find(p=>p.id===h)]),l=h=>n(t.filter(p=>p!==void 0&&p.id!==h)),u=v.jsx(SOe,{selectedTags:t,removeFunc:l}),c=e.filter(h=>h!==void 0&&!t.find(p=>p&&p.id===h.id)).map(h=>v.jsx(sn.Option,{value:h.id,children:v.jsxs(Ln,{gap:"sm",children:[v.jsx(Ph,{size:10,color:h.color}),v.jsx("span",{children:h.name})]})},h.id)),d=i?i.filter(h=>!t.find(p=>p.id===h.id)).map(h=>v.jsx(sn.Option,{value:h.id,children:v.jsxs(Ln,{gap:"sm",children:[v.jsx(Ph,{size:10,color:h.color}),v.jsx("span",{children:h.name})]})},h.id)):null,f=s?s.filter(h=>!t.find(p=>p.id===h.id)).map(h=>v.jsx(sn.Option,{value:h.id,children:v.jsxs(Ln,{gap:"sm",children:[v.jsx(Ph,{size:10,color:h.color}),v.jsx("span",{children:h.name})]})},h.id)):null;return v.jsxs(sn,{disabled:r,width:300,store:o,onOptionSubmit:a,withinPortal:!0,children:[v.jsx(sn.DropdownTarget,{children:v.jsx(VE,{style:{width:"400px"},pointer:!0,onClick:()=>o.toggleDropdown(),children:v.jsxs(tb.Group,{children:[t.length>0?u:v.jsx(Kr.Placeholder,{children:"Add tags"}),v.jsx(sn.EventsTarget,{children:v.jsx(VE.Field,{type:"hidden",onBlur:()=>o.closeDropdown()})})]})})}),v.jsx(sn.Dropdown,{children:v.jsxs(sn.Options,{children:[c.length===0?v.jsx(sn.Empty,{children:"No additional tags"}):i||s?v.jsx(sn.Group,{label:"Text Tags",children:c}):c,i?v.jsx(sn.Group,{label:"Task Tags",children:d}):null,s?v.jsx(sn.Group,{label:"Participant Tags",children:f}):null]})})]})}function NNt({annotation:e,setAnnotation:t,start:n,current:r,end:i,text:s,tags:o,selectedTags:a,onTextChange:l,deleteRowCallback:u,addRowCallback:c,onSelectTags:d,addRef:f}){const[h,p]=I.useState(e);return v.jsxs(Ln,{justify:"space-between",style:{width:"100%"},wrap:"nowrap",children:[v.jsx(Ln,{wrap:"nowrap",gap:0,style:{width:"100%",backgroundColor:r>=n&&r<=i?"rgba(100, 149, 237, 0.3)":"white"},children:v.jsx(UA,{ref:m=>m?f(m):null,autosize:!0,minRows:1,maxRows:3,style:{width:"100%"},variant:"unstyled",value:s,onChange:m=>{l(m.currentTarget.value)},onKeyDown:m=>{m.key==="Enter"&&m.currentTarget.selectionStart!==null?c(m.currentTarget.selectionStart):m.key==="Backspace"&&m.currentTarget.selectionStart===0&&m.currentTarget.selectionEnd===0&&(u(),m.preventDefault(),m.stopPropagation())}})}),v.jsxs(Ln,{wrap:"nowrap",style:{width:"300px"},children:[v.jsx(D0,{orientation:"vertical",size:"xs"}),v.jsx(rA,{onSelectTags:d,selectedTags:a,tags:o}),v.jsxs(hn,{children:[v.jsx(hn.Target,{children:v.jsx(xtt,{style:{color:e.length>0?"cornflowerblue":"lightgray",cursor:"pointer"}})}),v.jsx(hn.Dropdown,{children:v.jsx(UA,{value:h,onChange:m=>p(m.currentTarget.value),placeholder:"Add Annotation",onBlur:()=>t(h)})})]})]})]})}var Oo=[];for(var f9=0;f9<256;++f9)Oo.push((f9+256).toString(16).slice(1));function ONt(e,t=0){return(Oo[e[t+0]]+Oo[e[t+1]]+Oo[e[t+2]]+Oo[e[t+3]]+"-"+Oo[e[t+4]]+Oo[e[t+5]]+"-"+Oo[e[t+6]]+Oo[e[t+7]]+"-"+Oo[e[t+8]]+Oo[e[t+9]]+"-"+Oo[e[t+10]]+Oo[e[t+11]]+Oo[e[t+12]]+Oo[e[t+13]]+Oo[e[t+14]]+Oo[e[t+15]]).toLowerCase()}var FN,DNt=new Uint8Array(16);function MNt(){if(!FN&&(FN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!FN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return FN(DNt)}var $Nt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const xpe={randomUUID:$Nt};function kI(e,t,n){if(xpe.randomUUID&&!t&&!e)return xpe.randomUUID();e=e||{};var r=e.random||(e.rng||MNt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ONt(r)}function Spe({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=I.useState(n?r.name:""),[o,a]=I.useState(n?r.color:"#fd7e14"),l=I.useCallback(()=>{const u=kI();e({color:o,name:i,id:u})},[e,o,i]);return v.jsxs(Es,{gap:"xs",children:[v.jsxs(Ln,{children:[v.jsx(Ph,{color:o}),v.jsx(of,{required:!0,placeholder:"Enter tag name",value:i,onChange:u=>s(u.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),v.jsx(aK,{withPicker:n,style:{width:"100%"},value:o,onChange:u=>a(u),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),v.jsx(xn,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),size:"compact-sm",onClick:()=>l(),children:n?"Edit Tag":"Add Tag"})]})}function PH({createTagCallback:e,editTagCallback:t,tags:n,email:r=""}){const[i,s]=I.useState(!1);return v.jsxs(hn,{withinPortal:!1,children:[v.jsx(hn.Target,{children:v.jsxs(Es,{justify:"center",style:{width:"300px",cursor:"pointer"},children:[v.jsxs(Ln,{children:[v.jsx(ytt,{}),v.jsx(Xe,{children:"Tags"})]}),r?v.jsx(Xe,{ta:"center",style:{justifyContent:"end",alignContent:"end"},c:"dimmed",children:r}):null]})}),n?v.jsx(hn.Dropdown,{children:v.jsxs(Es,{style:{width:"300px"},gap:"xs",children:[n.length===0?v.jsx(Xe,{color:"dimmed",children:"No tags found. Create new tags below."}):null,n.map(o=>v.jsxs(Ln,{justify:"space-between",children:[v.jsxs(Ln,{children:[v.jsx(Ph,{color:o.color}),v.jsx(Xe,{children:o.name})]}),v.jsxs(hn,{trapFocus:!0,withinPortal:!1,children:[v.jsx(hn.Target,{children:v.jsx(jxe,{color:"lightgray"})}),v.jsx(hn.Dropdown,{children:v.jsx(Spe,{editTag:!0,currentNames:n.map(a=>a.name),addTagCallback:a=>{t(o,{...a,id:o.id})},editableTag:o})})]})]},o.id)),v.jsxs(hn,{trapFocus:!0,opened:i,withinPortal:!1,children:[v.jsx(hn.Target,{children:v.jsx(xn,{variant:"light",onClick:()=>s(!i),children:"Create new tag"})}),v.jsx(hn.Dropdown,{children:v.jsx(Spe,{currentNames:n.map(o=>o.name),addTagCallback:o=>{s(!1),e(o)}})})]})]})}):v.jsx(Os,{})]})}var Tpe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TOe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},LNt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],l=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(l>>10)),t[r++]=String.fromCharCode(56320+(l&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},QZ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,l=i+2<e.length,u=l?e[i+2]:0,c=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,h=u&63;l||(h=64,o||(f=64)),r.push(n[c],n[d],n[f],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(TOe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):LNt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const u=i<e.length?n[e.charAt(i)]:64;++i;const d=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||u==null||d==null)throw new FNt;const f=s<<2|a>>4;if(r.push(f),u!==64){const h=a<<4&240|u>>2;if(r.push(h),d!==64){const p=u<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class FNt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const jNt=function(e){const t=TOe(e);return QZ.encodeByteArray(t,!0)},_$=function(e){return jNt(e).replace(/\./g,"")},COe=function(e){try{return QZ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AOe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BNt=()=>AOe().__FIREBASE_DEFAULTS__,zNt=()=>{if(typeof process>"u"||typeof Tpe>"u")return;const e=Tpe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},UNt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&COe(e[1]);return t&&JSON.parse(t)},a4=()=>{try{return BNt()||zNt()||UNt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},IOe=e=>{var t,n;return(n=(t=a4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},VNt=e=>{const t=IOe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},kOe=()=>{var e;return(e=a4())===null||e===void 0?void 0:e.config},ROe=e=>{var t;return(t=a4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HNt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[_$(JSON.stringify(n)),_$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qNt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Zo())}function WNt(){var e;const t=(e=a4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GNt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function YNt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KNt(){const e=Zo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function XNt(){return!WNt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JZ(){try{return typeof indexedDB=="object"}catch{return!1}}function QNt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JNt="FirebaseError";class bp extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=JNt,Object.setPrototypeOf(this,bp.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jS.prototype.create)}}class jS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?ZNt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new bp(i,a,r)}}function ZNt(e,t){return e.replace(eOt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const eOt=/\{\$([^}]+)}/g;function tOt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function PI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Cpe(s)&&Cpe(o)){if(!PI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Cpe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gR(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function nOt(e,t){const n=new rOt(e,t);return n.subscribe.bind(n)}class rOt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");iOt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=h9),i.error===void 0&&(i.error=h9),i.complete===void 0&&(i.complete=h9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function iOt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function h9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sOt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oOt=1e3,aOt=2,lOt=4*60*60*1e3,uOt=.5;function cOt(e,t=oOt,n=aOt){const r=t*Math.pow(n,e),i=Math.round(uOt*r*(Math.random()-.5)*2);return Math.min(lOt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(e){return e&&e._delegate?e._delegate:e}class Jh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dOt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new RI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(hOt(t))try{this.getOrInitializeService({instanceIdentifier:Zv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Zv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Zv){return this.instances.has(t)}getOptions(t=Zv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:fOt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Zv){return this.component?this.component.multipleInstances?t:Zv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function fOt(e){return e===Zv?void 0:e}function hOt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pOt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new dOt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ar;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ar||(ar={}));const mOt={debug:ar.DEBUG,verbose:ar.VERBOSE,info:ar.INFO,warn:ar.WARN,error:ar.ERROR,silent:ar.SILENT},gOt=ar.INFO,yOt={[ar.DEBUG]:"log",[ar.VERBOSE]:"log",[ar.INFO]:"info",[ar.WARN]:"warn",[ar.ERROR]:"error"},vOt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=yOt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class l4{constructor(t){this.name=t,this._logLevel=gOt,this._logHandler=vOt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ar))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?mOt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ar.DEBUG,...t),this._logHandler(this,ar.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ar.VERBOSE,...t),this._logHandler(this,ar.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ar.INFO,...t),this._logHandler(this,ar.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ar.WARN,...t),this._logHandler(this,ar.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ar.ERROR,...t),this._logHandler(this,ar.ERROR,...t)}}const bOt=(e,t)=>t.some(n=>e instanceof n);let Ape,Ipe;function _Ot(){return Ape||(Ape=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function wOt(){return Ipe||(Ipe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const POe=new WeakMap,NH=new WeakMap,NOe=new WeakMap,p9=new WeakMap,ZZ=new WeakMap;function EOt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(U0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&POe.set(n,e)}).catch(()=>{}),ZZ.set(t,e),t}function xOt(e){if(NH.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});NH.set(e,t)}let OH={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return NH.get(e);if(t==="objectStoreNames")return e.objectStoreNames||NOe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return U0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function SOt(e){OH=e(OH)}function TOt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(m9(this),t,...n);return NOe.set(r,t.sort?t.sort():[t]),U0(r)}:wOt().includes(e)?function(...t){return e.apply(m9(this),t),U0(POe.get(this))}:function(...t){return U0(e.apply(m9(this),t))}}function COt(e){return typeof e=="function"?TOt(e):(e instanceof IDBTransaction&&xOt(e),bOt(e,_Ot())?new Proxy(e,OH):e)}function U0(e){if(e instanceof IDBRequest)return EOt(e);if(p9.has(e))return p9.get(e);const t=COt(e);return t!==e&&(p9.set(e,t),ZZ.set(t,e)),t}const m9=e=>ZZ.get(e);function AOt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=U0(o);return r&&o.addEventListener("upgradeneeded",l=>{r(U0(o.result),l.oldVersion,l.newVersion,U0(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const IOt=["get","getKey","getAll","getAllKeys","count"],kOt=["put","add","delete","clear"],g9=new Map;function kpe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(g9.get(t))return g9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=kOt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||IOt.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),i&&l.done]))[0]};return g9.set(t,s),s}SOt(e=>({...e,get:(t,n,r)=>kpe(t,n)||e.get(t,n,r),has:(t,n)=>!!kpe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ROt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(POt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function POt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const DH="@firebase/app",Rpe="0.10.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb=new l4("@firebase/app"),NOt="@firebase/app-compat",OOt="@firebase/analytics-compat",DOt="@firebase/analytics",MOt="@firebase/app-check-compat",$Ot="@firebase/app-check",LOt="@firebase/auth",FOt="@firebase/auth-compat",jOt="@firebase/database",BOt="@firebase/database-compat",zOt="@firebase/functions",UOt="@firebase/functions-compat",VOt="@firebase/installations",HOt="@firebase/installations-compat",qOt="@firebase/messaging",WOt="@firebase/messaging-compat",GOt="@firebase/performance",YOt="@firebase/performance-compat",KOt="@firebase/remote-config",XOt="@firebase/remote-config-compat",QOt="@firebase/storage",JOt="@firebase/storage-compat",ZOt="@firebase/firestore",eDt="@firebase/vertexai-preview",tDt="@firebase/firestore-compat",nDt="firebase",rDt="10.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MH="[DEFAULT]",iDt={[DH]:"fire-core",[NOt]:"fire-core-compat",[DOt]:"fire-analytics",[OOt]:"fire-analytics-compat",[$Ot]:"fire-app-check",[MOt]:"fire-app-check-compat",[LOt]:"fire-auth",[FOt]:"fire-auth-compat",[jOt]:"fire-rtdb",[BOt]:"fire-rtdb-compat",[zOt]:"fire-fn",[UOt]:"fire-fn-compat",[VOt]:"fire-iid",[HOt]:"fire-iid-compat",[qOt]:"fire-fcm",[WOt]:"fire-fcm-compat",[GOt]:"fire-perf",[YOt]:"fire-perf-compat",[KOt]:"fire-rc",[XOt]:"fire-rc-compat",[QOt]:"fire-gcs",[JOt]:"fire-gcs-compat",[ZOt]:"fire-fst",[tDt]:"fire-fst-compat",[eDt]:"fire-vertex","fire-js":"fire-js",[nDt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w$=new Map,sDt=new Map,$H=new Map;function Ppe(e,t){try{e.container.addComponent(t)}catch(n){mb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ym(e){const t=e.name;if($H.has(t))return mb.debug(`There were multiple attempts to register component ${t}.`),!1;$H.set(t,e);for(const n of w$.values())Ppe(n,e);for(const n of sDt.values())Ppe(n,e);return!0}function BS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Sh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oDt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},V0=new jS("app","Firebase",oDt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aDt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Jh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw V0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=rDt;function OOe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:MH,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw V0.create("bad-app-name",{appName:String(i)});if(n||(n=kOe()),!n)throw V0.create("no-options");const s=w$.get(i);if(s){if(PI(n,s.options)&&PI(r,s.config))return s;throw V0.create("duplicate-app",{appName:i})}const o=new pOt(i);for(const l of $H.values())o.addComponent(l);const a=new aDt(n,r,o);return w$.set(i,a),a}function eee(e=MH){const t=w$.get(e);if(!t&&e===MH&&kOe())return OOe();if(!t)throw V0.create("no-app",{appName:e});return t}function cf(e,t,n){var r;let i=(r=iDt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),mb.warn(a.join(" "));return}Ym(new Jh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lDt="firebase-heartbeat-database",uDt=1,NI="firebase-heartbeat-store";let y9=null;function DOe(){return y9||(y9=AOt(lDt,uDt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(NI)}catch(n){console.warn(n)}}}}).catch(e=>{throw V0.create("idb-open",{originalErrorMessage:e.message})})),y9}async function cDt(e){try{const n=(await DOe()).transaction(NI),r=await n.objectStore(NI).get(MOe(e));return await n.done,r}catch(t){if(t instanceof bp)mb.warn(t.message);else{const n=V0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});mb.warn(n.message)}}}async function Npe(e,t){try{const r=(await DOe()).transaction(NI,"readwrite");await r.objectStore(NI).put(t,MOe(e)),await r.done}catch(n){if(n instanceof bp)mb.warn(n.message);else{const r=V0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mb.warn(r.message)}}}function MOe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dDt=1024,fDt=30*24*60*60*1e3;class hDt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new mDt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ope();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=fDt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ope(),{heartbeatsToSend:r,unsentEntries:i}=pDt(this._heartbeatsCache.heartbeats),s=_$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ope(){return new Date().toISOString().substring(0,10)}function pDt(e,t=dDt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Dpe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Dpe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class mDt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JZ()?QNt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await cDt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Npe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Npe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Dpe(e){return _$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gDt(e){Ym(new Jh("platform-logger",t=>new ROt(t),"PRIVATE")),Ym(new Jh("heartbeat",t=>new hDt(t),"PRIVATE")),cf(DH,Rpe,e),cf(DH,Rpe,"esm2017"),cf("fire-js","")}gDt("");function $Oe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yDt=$Oe,LOe=new jS("auth","Firebase",$Oe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=new l4("@firebase/auth");function vDt(e,...t){E$.logLevel<=ar.WARN&&E$.warn(`Auth (${e_}): ${e}`,...t)}function gD(e,...t){E$.logLevel<=ar.ERROR&&E$.error(`Auth (${e_}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zh(e,...t){throw nee(e,...t)}function df(e,...t){return nee(e,...t)}function tee(e,t,n){const r=Object.assign(Object.assign({},yDt()),{[t]:n});return new jS("auth","Firebase",r).create(t,{appName:e.name})}function H0(e){return tee(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bDt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Zh(e,"argument-error"),tee(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function nee(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return LOe.create(e,...t)}function vn(e,t,...n){if(!e)throw nee(t,...n)}function um(e){const t="INTERNAL ASSERTION FAILED: "+e;throw gD(t),new Error(t)}function Km(e,t){e||um(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function _Dt(){return Mpe()==="http:"||Mpe()==="https:"}function Mpe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wDt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_Dt()||GNt()||"connection"in navigator)?navigator.onLine:!0}function EDt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(t,n){this.shortDelay=t,this.longDelay=n,Km(n>t,"Short delay should be less than long delay!"),this.isMobile=qNt()||YNt()}get(){return wDt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ree(e,t){Km(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FOe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;um("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;um("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;um("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xDt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDt=new yR(3e4,6e4);function u4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function zS(e,t,n,r,i={}){return jOe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=gR(Object.assign({key:e.config.apiKey},o)).slice(1),l=await e._getAdditionalHeaders();return l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode),FOe.fetch()(zOe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:l,referrerPolicy:"no-referrer"},s))})}async function jOe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},xDt),t);try{const i=new TDt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw jN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw jN(e,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw jN(e,"email-already-in-use",o);if(l==="USER_DISABLED")throw jN(e,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw tee(e,c,u);Zh(e,c)}}catch(i){if(i instanceof bp)throw i;Zh(e,"network-request-failed",{message:String(i)})}}async function BOe(e,t,n,r,i={}){const s=await zS(e,t,n,r,i);return"mfaPendingCredential"in s&&Zh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function zOe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?ree(e.config,i):`${e.config.apiScheme}://${i}`}class TDt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(df(this.auth,"network-request-failed")),SDt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function jN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=df(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CDt(e,t){return zS(e,"POST","/v1/accounts:delete",t)}async function UOe(e,t){return zS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ADt(e,t=!1){const n=bi(e),r=await n.getIdToken(t),i=iee(r);vn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:iA(v9(i.auth_time)),issuedAtTime:iA(v9(i.iat)),expirationTime:iA(v9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function v9(e){return Number(e)*1e3}function iee(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return gD("JWT malformed, contained fewer than 3 sections"),null;try{const i=COe(n);return i?JSON.parse(i):(gD("Failed to decode base64 JWT payload"),null)}catch(i){return gD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function $pe(e){const t=iee(e);return vn(t,"internal-error"),vn(typeof t.exp<"u","internal-error"),vn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof bp&&IDt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function IDt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kDt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FH{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=iA(this.lastLoginAt),this.creationTime=iA(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await OI(e,UOe(n,{idToken:r}));vn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?VOe(s.providerUserInfo):[],a=PDt(e.providerData,o),l=e.isAnonymous,u=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new FH(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,d)}async function RDt(e){const t=bi(e);await x$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function PDt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function VOe(e){return e.map(t=>{var{providerId:n}=t,r=bk(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NDt(e,t){const n=await jOe(e,{},async()=>{const r=gR({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=zOe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",FOe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ODt(e,t){return zS(e,"POST","/v2/accounts:revokeToken",u4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){vn(t.idToken,"internal-error"),vn(typeof t.idToken<"u","internal-error"),vn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):$pe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){vn(t.length!==0,"internal-error");const n=$pe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(vn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await NDt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new bE;return r&&(vn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(vn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(vn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new bE,this.toJSON())}_performRefresh(){return um("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(e,t){vn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class cm{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=bk(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kDt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new FH(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await OI(this,this.stsTokenManager.getToken(this.auth,t));return vn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ADt(this,t)}reload(){return RDt(this)}_assign(t){this!==t&&(vn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new cm(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){vn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await x$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sh(this.auth.app))return Promise.reject(H0(this.auth));const t=await this.getIdToken();return await OI(this,CDt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,l,u,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(u=n.createdAt)!==null&&u!==void 0?u:void 0,b=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:_,emailVerified:w,isAnonymous:E,providerData:x,stsTokenManager:S}=n;vn(_&&S,t,"internal-error");const C=bE.fromJSON(this.name,S);vn(typeof _=="string",t,"internal-error"),Ng(d,t.name),Ng(f,t.name),vn(typeof w=="boolean",t,"internal-error"),vn(typeof E=="boolean",t,"internal-error"),Ng(h,t.name),Ng(p,t.name),Ng(m,t.name),Ng(g,t.name),Ng(y,t.name),Ng(b,t.name);const A=new cm({uid:_,auth:t,email:f,emailVerified:w,displayName:d,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:b});return x&&Array.isArray(x)&&(A.providerData=x.map(R=>Object.assign({},R))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new bE;i.updateFromServerResponse(n);const s=new cm({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await x$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];vn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?VOe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new bE;a.updateFromIdToken(r);const l=new cm({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),u={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new FH(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lpe=new Map;function dm(e){Km(e instanceof Function,"Expected a class definition");let t=Lpe.get(e);return t?(Km(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Lpe.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HOe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}HOe.type="NONE";const Fpe=HOe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yD(e,t,n){return`firebase:${e}:${t}:${n}`}class _E{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=yD(this.userKey,i.apiKey,s),this.fullPersistenceKey=yD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?cm._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new _E(dm(Fpe),t,r);const i=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=i[0]||dm(Fpe);const o=yD(r,t.config.apiKey,t.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const d=cm._fromJSON(t,c);u!==s&&(a=d),s=u;break}}catch{}const l=i.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new _E(s,t,r):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new _E(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jpe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(GOe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qOe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(KOe(t))return"Blackberry";if(XOe(t))return"Webos";if(see(t))return"Safari";if((t.includes("chrome/")||WOe(t))&&!t.includes("edge/"))return"Chrome";if(YOe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function qOe(e=Zo()){return/firefox\//i.test(e)}function see(e=Zo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function WOe(e=Zo()){return/crios\//i.test(e)}function GOe(e=Zo()){return/iemobile/i.test(e)}function YOe(e=Zo()){return/android/i.test(e)}function KOe(e=Zo()){return/blackberry/i.test(e)}function XOe(e=Zo()){return/webos/i.test(e)}function c4(e=Zo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function DDt(e=Zo()){var t;return c4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function MDt(){return KNt()&&document.documentMode===10}function QOe(e=Zo()){return c4(e)||YOe(e)||XOe(e)||KOe(e)||/windows phone/i.test(e)||GOe(e)}function $Dt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JOe(e,t=[]){let n;switch(e){case"Browser":n=jpe(Zo());break;case"Worker":n=`${jpe(Zo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${e_}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LDt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const l=t(s);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FDt(e,t={}){return zS(e,"GET","/v2/passwordPolicy",u4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jDt=6;class BDt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:jDt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,l),this.validatePasswordCharacterOptions(t,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zDt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Bpe(this),this.idTokenSubscription=new Bpe(this),this.beforeStateQueue=new LDt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=LOe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=dm(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await _E.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await UOe(this,{idToken:t}),r=await cm._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(Sh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(t);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return vn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await x$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=EDt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(Sh(this.app))return Promise.reject(H0(this));const n=t?bi(t):null;return n&&vn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&vn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return Sh(this.app)?Promise.reject(H0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return Sh(this.app)?Promise.reject(H0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dm(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await FDt(this),n=new BDt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new jS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ODt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&dm(t)||this._popupRedirectResolver;vn(n,this,"argument-error"),this.redirectPersistenceManager=await _E.create(this,[dm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(vn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=t.addObserver(n,r,i);return()=>{o=!0,l()}}else{const l=t.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return vn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=JOe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&vDt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function vR(e){return bi(e)}class Bpe{constructor(t){this.auth=t,this.observer=null,this.addObserver=nOt(n=>this.observer=n)}get next(){return vn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function UDt(e){oee=e}function VDt(e){return oee.loadJS(e)}function HDt(){return oee.gapiScript}function qDt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WDt(e,t){const n=BS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(PI(s,t??{}))return i;Zh(i,"already-initialized")}return n.initialize({options:t})}function GDt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dm);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function YDt(e,t,n){const r=vR(e);vn(r._canInitEmulator,r,"emulator-config-failed"),vn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=ZOe(t),{host:o,port:a}=KDt(t),l=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),XDt()}function ZOe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function KDt(e){const t=ZOe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:zpe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:zpe(o)}}}function zpe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function XDt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eDe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return um("not implemented")}_getIdTokenResponse(t){return um("not implemented")}_linkToIdToken(t,n){return um("not implemented")}_getReauthenticationResolver(t){return um("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wE(e,t){return BOe(e,"POST","/v1/accounts:signInWithIdp",u4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QDt="http://localhost";class gb extends eDe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new gb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Zh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=bk(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new gb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return wE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,wE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,wE(t,n)}buildRequest(){const t={requestUri:QDt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=gR(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aee{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR extends aee{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0 extends bR{constructor(){super("facebook.com")}static credential(t){return gb._fromParams({providerId:i0.PROVIDER_ID,signInMethod:i0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return i0.credentialFromTaggedObject(t)}static credentialFromError(t){return i0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return i0.credential(t.oauthAccessToken)}catch{return null}}}i0.FACEBOOK_SIGN_IN_METHOD="facebook.com";i0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends bR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return gb._fromParams({providerId:nm.PROVIDER_ID,signInMethod:nm.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return nm.credentialFromTaggedObject(t)}static credentialFromError(t){return nm.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return nm.credential(n,r)}catch{return null}}}nm.GOOGLE_SIGN_IN_METHOD="google.com";nm.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0 extends bR{constructor(){super("github.com")}static credential(t){return gb._fromParams({providerId:s0.PROVIDER_ID,signInMethod:s0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return s0.credentialFromTaggedObject(t)}static credentialFromError(t){return s0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return s0.credential(t.oauthAccessToken)}catch{return null}}}s0.GITHUB_SIGN_IN_METHOD="github.com";s0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0 extends bR{constructor(){super("twitter.com")}static credential(t,n){return gb._fromParams({providerId:o0.PROVIDER_ID,signInMethod:o0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return o0.credentialFromTaggedObject(t)}static credentialFromError(t){return o0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return o0.credential(n,r)}catch{return null}}}o0.TWITTER_SIGN_IN_METHOD="twitter.com";o0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JDt(e,t){return BOe(e,"POST","/v1/accounts:signUp",u4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await cm._fromIdTokenResponse(t,r,i),o=Upe(r);return new _y({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Upe(r);return new _y({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Upe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZDt(e){var t;if(Sh(e.app))return Promise.reject(H0(e));const n=vR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new _y({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await JDt(n,{returnSecureToken:!0}),i=await _y._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S$ extends bp{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,S$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new S$(t,n,r,i)}}function tDe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?S$._fromErrorAndOperation(e,s,t,r):s})}async function eMt(e,t,n=!1){const r=await OI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return _y._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tMt(e,t,n=!1){const{auth:r}=e;if(Sh(r.app))return Promise.reject(H0(r));const i="reauthenticate";try{const s=await OI(e,tDe(r,i,t,e),n);vn(s.idToken,r,"internal-error");const o=iee(s.idToken);vn(o,r,"internal-error");const{sub:a}=o;return vn(e.uid===a,r,"user-mismatch"),_y._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Zh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nMt(e,t,n=!1){if(Sh(e.app))return Promise.reject(H0(e));const r="signIn",i=await tDe(e,r,t),s=await _y._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function rMt(e,t,n,r){return bi(e).onIdTokenChanged(t,n,r)}function iMt(e,t,n){return bi(e).beforeAuthStateChanged(t,n)}function sMt(e,t,n,r){return bi(e).onAuthStateChanged(t,n,r)}function oMt(e){return bi(e).signOut()}const T$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nDe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(T$,"1"),this.storage.removeItem(T$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aMt(){const e=Zo();return see(e)||c4(e)}const lMt=1e3,uMt=10;class rDe extends nDe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=aMt()&&$Dt(),this.fallbackToPolling=QOe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);MDt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,uMt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},lMt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}rDe.type="LOCAL";const cMt=rDe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iDe extends nDe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}iDe.type="SESSION";const sDe=iDe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dMt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new d4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await dMt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:l})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}d4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lee(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fMt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=lee("",20);i.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(c),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:u,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(){return window}function hMt(e){Bh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oDe(){return typeof Bh().WorkerGlobalScope<"u"&&typeof Bh().importScripts=="function"}async function pMt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mMt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function gMt(){return oDe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aDe="firebaseLocalStorageDb",yMt=1,C$="firebaseLocalStorage",lDe="fbase_key";class _R{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function f4(e,t){return e.transaction([C$],t?"readwrite":"readonly").objectStore(C$)}function vMt(){const e=indexedDB.deleteDatabase(aDe);return new _R(e).toPromise()}function jH(){const e=indexedDB.open(aDe,yMt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(C$,{keyPath:lDe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(C$)?t(r):(r.close(),await vMt(),t(await jH()))})})}async function Vpe(e,t,n){const r=f4(e,!0).put({[lDe]:t,value:n});return new _R(r).toPromise()}async function bMt(e,t){const n=f4(e,!1).get(t),r=await new _R(n).toPromise();return r===void 0?null:r.value}function Hpe(e,t){const n=f4(e,!0).delete(t);return new _R(n).toPromise()}const _Mt=800,wMt=3;class uDe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jH(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>wMt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oDe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=d4._getInstance(gMt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await pMt(),!this.activeServiceWorker)return;this.sender=new fMt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||mMt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await jH();return await Vpe(t,T$,"1"),await Hpe(t,T$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vpe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>bMt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Hpe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=f4(i,!1).getAll();return new _R(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_Mt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uDe.type="LOCAL";const EMt=uDe;new yR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cDe(e,t){return t?dm(t):(vn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uee extends eDe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return wE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return wE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return wE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function xMt(e){return nMt(e.auth,new uee(e),e.bypassAuthState)}function SMt(e){const{auth:t,user:n}=e;return vn(n,t,"internal-error"),tMt(n,new uee(e),e.bypassAuthState)}async function TMt(e){const{auth:t,user:n}=e;return vn(n,t,"internal-error"),eMt(n,new uee(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dDe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return xMt;case"linkViaPopup":case"linkViaRedirect":return TMt;case"reauthViaPopup":case"reauthViaRedirect":return SMt;default:Zh(this.auth,"internal-error")}}resolve(t){Km(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Km(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CMt=new yR(2e3,1e4);async function AMt(e,t,n){if(Sh(e.app))return Promise.reject(df(e,"operation-not-supported-in-this-environment"));const r=vR(e);bDt(e,t,aee);const i=cDe(r,n);return new A1(r,"signInViaPopup",t,i).executeNotNull()}class A1 extends dDe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,A1.currentPopupAction&&A1.currentPopupAction.cancel(),A1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return vn(t,this.auth,"internal-error"),t}async onExecution(){Km(this.filter.length===1,"Popup operations only handle one event");const t=lee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(df(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(df(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,A1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(df(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,CMt.get())};t()}}A1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IMt="pendingRedirect",vD=new Map;class kMt extends dDe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=vD.get(this.auth._key());if(!t){try{const r=await RMt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}vD.set(this.auth._key(),t)}return this.bypassAuthState||vD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function RMt(e,t){const n=OMt(t),r=NMt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function PMt(e,t){vD.set(e._key(),t)}function NMt(e){return dm(e._redirectPersistence)}function OMt(e){return yD(IMt,e.config.apiKey,e.name)}async function DMt(e,t,n=!1){if(Sh(e.app))return Promise.reject(H0(e));const r=vR(e),i=cDe(r,t),o=await new kMt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MMt=10*60*1e3;class $Mt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!LMt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!fDe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(df(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=MMt&&this.cachedEventUids.clear(),this.cachedEventUids.has(qpe(t))}saveEventToCache(t){this.cachedEventUids.add(qpe(t)),this.lastProcessedEventTime=Date.now()}}function qpe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function fDe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function LMt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fDe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FMt(e,t={}){return zS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jMt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BMt=/^https?/;async function zMt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await FMt(e);for(const n of t)try{if(UMt(n))return}catch{}Zh(e,"unauthorized-domain")}function UMt(e){const t=LH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!BMt.test(n))return!1;if(jMt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VMt=new yR(3e4,6e4);function Wpe(){const e=Bh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function HMt(e){return new Promise((t,n)=>{var r,i,s;function o(){Wpe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Wpe(),n(df(e,"network-request-failed"))},timeout:VMt.get()})}if(!((i=(r=Bh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Bh().gapi)===null||s===void 0)&&s.load)o();else{const a=qDt("iframefcb");return Bh()[a]=()=>{gapi.load?o():n(df(e,"network-request-failed"))},VDt(`${HDt()}?onload=${a}`).catch(l=>n(l))}}).catch(t=>{throw bD=null,t})}let bD=null;function qMt(e){return bD=bD||HMt(e),bD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WMt=new yR(5e3,15e3),GMt="__/auth/iframe",YMt="emulator/auth/iframe",KMt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},XMt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function QMt(e){const t=e.config;vn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?ree(t,YMt):`https://${e.config.authDomain}/${GMt}`,r={apiKey:t.apiKey,appName:e.name,v:e_},i=XMt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${gR(r).slice(1)}`}async function JMt(e){const t=await qMt(e),n=Bh().gapi;return vn(n,e,"internal-error"),t.open({where:document.body,url:QMt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:KMt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=df(e,"network-request-failed"),a=Bh().setTimeout(()=>{s(o)},WMt.get());function l(){Bh().clearTimeout(a),i(r)}r.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZMt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},e3t=500,t3t=600,n3t="_blank",r3t="http://localhost";class Gpe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i3t(e,t,n,r=e3t,i=t3t){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},ZMt),{width:r.toString(),height:i.toString(),top:s,left:o}),u=Zo().toLowerCase();n&&(a=WOe(u)?n3t:n),qOe(u)&&(t=t||r3t,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[h,p])=>`${f}${h}=${p},`,"");if(DDt(u)&&a!=="_self")return s3t(t||"",a),new Gpe(null);const d=window.open(t||"",a,c);vn(d,e,"popup-blocked");try{d.focus()}catch{}return new Gpe(d)}function s3t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o3t="__/auth/handler",a3t="emulator/auth/handler",l3t=encodeURIComponent("fac");async function Ype(e,t,n,r,i,s){vn(e.config.authDomain,e,"auth-domain-config-required"),vn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:e_,eventId:i};if(t instanceof aee){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",tOt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,d]of Object.entries({}))o[c]=d}if(t instanceof bR){const c=t.getScopes().filter(d=>d!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const l=await e._getAppCheckToken(),u=l?`#${l3t}=${encodeURIComponent(l)}`:"";return`${u3t(e)}?${gR(a).slice(1)}${u}`}function u3t({config:e}){return e.emulator?ree(e,a3t):`https://${e.authDomain}/${o3t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b9="webStorageSupport";class c3t{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sDe,this._completeRedirectFn=DMt,this._overrideRedirectResult=PMt}async _openPopup(t,n,r,i){var s;Km((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Ype(t,n,r,LH(),i);return i3t(t,o,lee())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Ype(t,n,r,LH(),i);return hMt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Km(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await JMt(t),r=new $Mt(t);return n.register("authEvent",i=>(vn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(b9,{type:b9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[b9];o!==void 0&&n(!!o),Zh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zMt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return QOe()||see()||c4()}}const hDe=c3t;var Kpe="@firebase/auth",Xpe="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3t{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){vn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function h3t(e){Ym(new Jh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;vn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JOe(e)},u=new zDt(r,i,s,l);return GDt(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Ym(new Jh("auth-internal",t=>{const n=vR(t.getProvider("auth").getImmediate());return(r=>new d3t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),cf(Kpe,Xpe,f3t(e)),cf(Kpe,Xpe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3t=5*60,m3t=ROe("authIdTokenMaxAge")||p3t;let Qpe=null;const g3t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>m3t)return;const i=n==null?void 0:n.token;Qpe!==i&&(Qpe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function A$(e=eee()){const t=BS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=WDt(e,{popupRedirectResolver:hDe,persistence:[EMt,cMt,sDe]}),r=ROe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=g3t(s.toString());iMt(n,o,()=>o(n.currentUser)),rMt(n,a=>o(a))}}const i=IOe("auth");return i&&YDt(n,`http://${i}`),n}function y3t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}UDt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=df("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",y3t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});h3t("Browser");var v3t="firebase",b3t="10.12.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cf(v3t,b3t,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pDe="firebasestorage.googleapis.com",mDe="storageBucket",_3t=2*60*1e3,w3t=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms extends bp{constructor(t,n,r=0){super(_9(t),`Firebase Storage: ${n} (${_9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ms.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return _9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var hs;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(hs||(hs={}));function _9(e){return"storage/"+e}function cee(){const e="An unknown error occurred, please check the error payload for server response.";return new ms(hs.UNKNOWN,e)}function E3t(e){return new ms(hs.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function x3t(e){return new ms(hs.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function S3t(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ms(hs.UNAUTHENTICATED,e)}function T3t(){return new ms(hs.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function C3t(e){return new ms(hs.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function A3t(){return new ms(hs.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function I3t(){return new ms(hs.CANCELED,"User canceled the upload/download.")}function k3t(e){return new ms(hs.INVALID_URL,"Invalid URL '"+e+"'.")}function R3t(e){return new ms(hs.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function P3t(){return new ms(hs.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+mDe+"' property when initializing the app?")}function N3t(){return new ms(hs.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function O3t(){return new ms(hs.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function D3t(e){return new ms(hs.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function BH(e){return new ms(hs.INVALID_ARGUMENT,e)}function gDe(){return new ms(hs.APP_DELETED,"The Firebase app was deleted.")}function M3t(e){return new ms(hs.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function sA(e,t){return new ms(hs.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function GT(e){throw new ms(hs.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=sl.makeFromUrl(t,n)}catch{return new sl(t,"")}if(r.path==="")return r;throw R3t(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),l={bucket:1,path:3};function u(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",h=new RegExp(`^https?://${d}/${c}/b/${i}/o${f}`,"i"),p={bucket:1,path:3},m=n===pDe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),_=[{regex:a,indices:l,postModify:s},{regex:h,indices:p,postModify:u},{regex:y,indices:{bucket:1,path:2},postModify:u}];for(let w=0;w<_.length;w++){const E=_[w],x=E.regex.exec(t);if(x){const S=x[E.indices.bucket];let C=x[E.indices.path];C||(C=""),r=new sl(S,C),E.postModify(r);break}}if(r==null)throw k3t(t);return r}}class $3t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...g){u||(u=!0,t.apply(null,g))}function d(g){i=setTimeout(()=>{i=null,e(h,l())},g)}function f(){s&&clearTimeout(s)}function h(g,...y){if(u){f();return}if(g){f(),c.call(null,g,...y);return}if(l()||o){f(),c.call(null,g,...y);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let p=!1;function m(g){p||(p=!0,f(),!u&&(i!==null?(g||(a=2),clearTimeout(i),d(0)):g||(a=1)))}return d(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function F3t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j3t(e){return e!==void 0}function B3t(e){return typeof e=="object"&&!Array.isArray(e)}function dee(e){return typeof e=="string"||e instanceof String}function Jpe(e){return fee()&&e instanceof Blob}function fee(){return typeof Blob<"u"}function zH(e,t,n,r){if(r<t)throw BH(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw BH(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function yDe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var j1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(j1||(j1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z3t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U3t{constructor(t,n,r,i,s,o,a,l,u,c,d,f=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=d,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new BN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===j1.NO_ERROR,l=s.getStatus();if(!a||z3t(l,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===j1.ABORT;r(!1,new BN(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new BN(u,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());j3t(l)?s(l):s()}catch(l){o(l)}else if(a!==null){const l=cee();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(i.canceled){const l=this.appDelete_?gDe():I3t();o(l)}else{const l=A3t();o(l)}};this.canceled_?n(!1,new BN(!1,null,!0)):this.backoffId_=L3t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&F3t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class BN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function V3t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function H3t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function q3t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function W3t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function G3t(e,t,n,r,i,s,o=!0){const a=yDe(e.urlParams),l=e.url+a,u=Object.assign({},e.headers);return q3t(u,t),V3t(u,n),H3t(u,s),W3t(u,r),new U3t(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y3t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function K3t(...e){const t=Y3t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(fee())return new Blob(e);throw new ms(hs.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function X3t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3t(e){if(typeof atob>"u")throw D3t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class w9{constructor(t,n){this.data=t,this.contentType=n||null}}function J3t(e,t){switch(e){case Th.RAW:return new w9(vDe(t));case Th.BASE64:case Th.BASE64URL:return new w9(bDe(e,t));case Th.DATA_URL:return new w9(e$t(t),t$t(t))}throw cee()}function vDe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function Z3t(e){let t;try{t=decodeURIComponent(e)}catch{throw sA(Th.DATA_URL,"Malformed data URL.")}return vDe(t)}function bDe(e,t){switch(e){case Th.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw sA(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Th.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw sA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Q3t(t)}catch(i){throw i.message.includes("polyfill")?i:sA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class _De{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw sA(Th.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=n$t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function e$t(e){const t=new _De(e);return t.base64?bDe(Th.BASE64,t.rest):Z3t(t.rest)}function t$t(e){return new _De(e).contentType}function n$t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a0{constructor(t,n){let r=0,i="";Jpe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Jpe(this.data_)){const r=this.data_,i=X3t(r,t,n);return i===null?null:new a0(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new a0(r,!0)}}static getBlob(...t){if(fee()){const n=t.map(r=>r instanceof a0?r.data_:r);return new a0(K3t.apply(null,n))}else{const n=t.map(o=>dee(o)?J3t(Th.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new a0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hee(e){let t;try{t=JSON.parse(e)}catch{return null}return B3t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r$t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function i$t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function wDe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$t(e,t){return t}class Wa{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||s$t}}let zN=null;function o$t(e){return!dee(e)||e.length<2?e:wDe(e)}function EDe(){if(zN)return zN;const e=[];e.push(new Wa("bucket")),e.push(new Wa("generation")),e.push(new Wa("metageneration")),e.push(new Wa("name","fullPath",!0));function t(s,o){return o$t(o)}const n=new Wa("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Wa("size");return i.xform=r,e.push(i),e.push(new Wa("timeCreated")),e.push(new Wa("updated")),e.push(new Wa("md5Hash",null,!0)),e.push(new Wa("cacheControl",null,!0)),e.push(new Wa("contentDisposition",null,!0)),e.push(new Wa("contentEncoding",null,!0)),e.push(new Wa("contentLanguage",null,!0)),e.push(new Wa("contentType",null,!0)),e.push(new Wa("metadata","customMetadata",!0)),zN=e,zN}function a$t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new sl(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function l$t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return a$t(r,e),r}function xDe(e,t,n){const r=hee(t);return r===null?null:l$t(e,r,n)}function u$t(e,t,n,r){const i=hee(t);if(i===null||!dee(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(u=>{const c=e.bucket,d=e.fullPath,f="/b/"+o(c)+"/o/"+o(d),h=wR(f,n,r),p=yDe({alt:"media",token:u});return h+p})[0]}function c$t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zpe="prefixes",eme="items";function d$t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Zpe])for(const i of n[Zpe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new sl(t,s));r.prefixes.push(o)}if(n[eme])for(const i of n[eme]){const s=e._makeStorageReference(new sl(t,i.name));r.items.push(s)}return r}function f$t(e,t,n){const r=hee(n);return r===null?null:d$t(e,t,r)}class h4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pee(e){if(!e)throw cee()}function h$t(e,t){function n(r,i){const s=xDe(e,i,t);return pee(s!==null),s}return n}function p$t(e,t){function n(r,i){const s=f$t(e,t,i);return pee(s!==null),s}return n}function m$t(e,t){function n(r,i){const s=xDe(e,i,t);return pee(s!==null),u$t(s,i,e.host,e._protocol)}return n}function mee(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=T3t():i=S3t():n.getStatus()===402?i=x3t(e.bucket):n.getStatus()===403?i=C3t(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function SDe(e){const t=mee(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=E3t(e.path)),s.serverResponse=i.serverResponse,s}return n}function g$t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=wR(o,e.host,e._protocol),l="GET",u=e.maxOperationRetryTime,c=new h4(a,l,p$t(e,t.bucket),u);return c.urlParams=s,c.errorHandler=mee(t),c}function y$t(e,t,n){const r=t.fullServerUrl(),i=wR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new h4(i,s,m$t(e,n),o);return a.errorHandler=SDe(t),a}function v$t(e,t){const n=t.fullServerUrl(),r=wR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(l,u){}const a=new h4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=SDe(t),a}function b$t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function _$t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=b$t(null,t)),r}function w$t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=_$t(t,r,i),c=c$t(u,n),d="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",h=a0.getBlob(d,r,f);if(h===null)throw N3t();const p={name:u.fullPath},m=wR(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,b=new h4(m,g,h$t(e,n),y);return b.urlParams=p,b.headers=o,b.body=h.uploadData(),b.errorHandler=mee(t),b}class E$t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=j1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=j1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=j1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw GT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw GT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw GT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw GT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw GT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class x$t extends E$t{initXhr(){this.xhr_.responseType="text"}}function p4(){return new x$t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(t,n){this._service=t,n instanceof sl?this._location=n:this._location=sl.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new yb(t,n)}get root(){const t=new sl(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return wDe(this._location.path)}get storage(){return this._service}get parent(){const t=r$t(this._location.path);if(t===null)return null;const n=new sl(this._location.bucket,t);return new yb(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw M3t(t)}}function S$t(e,t,n){e._throwIfRoot("uploadBytes");const r=w$t(e.storage,e._location,EDe(),new a0(t,!0),n);return e.storage.makeRequestWithTokens(r,p4).then(i=>({metadata:i,ref:e}))}function T$t(e){const t={prefixes:[],items:[]};return TDe(e,t).then(()=>t)}async function TDe(e,t,n){const i=await C$t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await TDe(e,t,i.nextPageToken)}function C$t(e,t){t!=null&&typeof t.maxResults=="number"&&zH("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=g$t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,p4)}function A$t(e){e._throwIfRoot("getDownloadURL");const t=y$t(e.storage,e._location,EDe());return e.storage.makeRequestWithTokens(t,p4).then(n=>{if(n===null)throw O3t();return n})}function I$t(e){e._throwIfRoot("deleteObject");const t=v$t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,p4)}function k$t(e,t){const n=i$t(e._location.path,t),r=new sl(e._location.bucket,n);return new yb(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R$t(e){return/^[A-Za-z]+:\/\//.test(e)}function P$t(e,t){return new yb(e,t)}function CDe(e,t){if(e instanceof gee){const n=e;if(n._bucket==null)throw P3t();const r=new yb(n,n._bucket);return t!=null?CDe(r,t):r}else return t!==void 0?k$t(e,t):e}function N$t(e,t){if(t&&R$t(t)){if(e instanceof gee)return P$t(e,t);throw BH("To use ref(service, url), the first argument must be a Storage instance.")}else return CDe(e,t)}function tme(e,t){const n=t==null?void 0:t[mDe];return n==null?null:sl.makeFromBucketSpec(n,e)}function O$t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:HNt(i,e.app.options.projectId))}class gee{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=pDe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=_3t,this._maxUploadRetryTime=w3t,this._requests=new Set,i!=null?this._bucket=sl.makeFromBucketSpec(i,this._host):this._bucket=tme(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=sl.makeFromBucketSpec(this._url,t):this._bucket=tme(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){zH("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){zH("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new yb(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new $3t(gDe());{const o=G3t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const nme="@firebase/storage",rme="0.12.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ADe="storage";function Av(e,t,n){return e=bi(e),S$t(e,t,n)}function YT(e){return e=bi(e),T$t(e)}function Iv(e){return e=bi(e),A$t(e)}function ime(e){return e=bi(e),I$t(e)}function fi(e,t){return e=bi(e),N$t(e,t)}function z_(e=eee(),t){e=bi(e);const r=BS(e,ADe).getImmediate({identifier:t}),i=VNt("storage");return i&&D$t(r,...i),r}function D$t(e,t,n,r={}){O$t(e,t,n,r)}function M$t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new gee(n,r,i,t,e_)}function $$t(){Ym(new Jh(ADe,M$t,"PUBLIC").setMultipleInstances(!0)),cf(nme,rme,""),cf(nme,rme,"esm2017")}$$t();var sme=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var B1,IDe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,C){function A(){}A.prototype=C.prototype,S.D=C.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(R,P,L){for(var k=Array(arguments.length-2),$=2;$<arguments.length;$++)k[$-2]=arguments[$];return C.prototype[P].apply(R,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,C,A){A||(A=0);var R=Array(16);if(typeof C=="string")for(var P=0;16>P;++P)R[P]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(P=0;16>P;++P)R[P]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=S.g[0],A=S.g[1],P=S.g[2];var L=S.g[3],k=C+(L^A&(P^L))+R[0]+3614090360&4294967295;C=A+(k<<7&4294967295|k>>>25),k=L+(P^C&(A^P))+R[1]+3905402710&4294967295,L=C+(k<<12&4294967295|k>>>20),k=P+(A^L&(C^A))+R[2]+606105819&4294967295,P=L+(k<<17&4294967295|k>>>15),k=A+(C^P&(L^C))+R[3]+3250441966&4294967295,A=P+(k<<22&4294967295|k>>>10),k=C+(L^A&(P^L))+R[4]+4118548399&4294967295,C=A+(k<<7&4294967295|k>>>25),k=L+(P^C&(A^P))+R[5]+1200080426&4294967295,L=C+(k<<12&4294967295|k>>>20),k=P+(A^L&(C^A))+R[6]+2821735955&4294967295,P=L+(k<<17&4294967295|k>>>15),k=A+(C^P&(L^C))+R[7]+4249261313&4294967295,A=P+(k<<22&4294967295|k>>>10),k=C+(L^A&(P^L))+R[8]+1770035416&4294967295,C=A+(k<<7&4294967295|k>>>25),k=L+(P^C&(A^P))+R[9]+2336552879&4294967295,L=C+(k<<12&4294967295|k>>>20),k=P+(A^L&(C^A))+R[10]+4294925233&4294967295,P=L+(k<<17&4294967295|k>>>15),k=A+(C^P&(L^C))+R[11]+2304563134&4294967295,A=P+(k<<22&4294967295|k>>>10),k=C+(L^A&(P^L))+R[12]+1804603682&4294967295,C=A+(k<<7&4294967295|k>>>25),k=L+(P^C&(A^P))+R[13]+4254626195&4294967295,L=C+(k<<12&4294967295|k>>>20),k=P+(A^L&(C^A))+R[14]+2792965006&4294967295,P=L+(k<<17&4294967295|k>>>15),k=A+(C^P&(L^C))+R[15]+1236535329&4294967295,A=P+(k<<22&4294967295|k>>>10),k=C+(P^L&(A^P))+R[1]+4129170786&4294967295,C=A+(k<<5&4294967295|k>>>27),k=L+(A^P&(C^A))+R[6]+3225465664&4294967295,L=C+(k<<9&4294967295|k>>>23),k=P+(C^A&(L^C))+R[11]+643717713&4294967295,P=L+(k<<14&4294967295|k>>>18),k=A+(L^C&(P^L))+R[0]+3921069994&4294967295,A=P+(k<<20&4294967295|k>>>12),k=C+(P^L&(A^P))+R[5]+3593408605&4294967295,C=A+(k<<5&4294967295|k>>>27),k=L+(A^P&(C^A))+R[10]+38016083&4294967295,L=C+(k<<9&4294967295|k>>>23),k=P+(C^A&(L^C))+R[15]+3634488961&4294967295,P=L+(k<<14&4294967295|k>>>18),k=A+(L^C&(P^L))+R[4]+3889429448&4294967295,A=P+(k<<20&4294967295|k>>>12),k=C+(P^L&(A^P))+R[9]+568446438&4294967295,C=A+(k<<5&4294967295|k>>>27),k=L+(A^P&(C^A))+R[14]+3275163606&4294967295,L=C+(k<<9&4294967295|k>>>23),k=P+(C^A&(L^C))+R[3]+4107603335&4294967295,P=L+(k<<14&4294967295|k>>>18),k=A+(L^C&(P^L))+R[8]+1163531501&4294967295,A=P+(k<<20&4294967295|k>>>12),k=C+(P^L&(A^P))+R[13]+2850285829&4294967295,C=A+(k<<5&4294967295|k>>>27),k=L+(A^P&(C^A))+R[2]+4243563512&4294967295,L=C+(k<<9&4294967295|k>>>23),k=P+(C^A&(L^C))+R[7]+1735328473&4294967295,P=L+(k<<14&4294967295|k>>>18),k=A+(L^C&(P^L))+R[12]+2368359562&4294967295,A=P+(k<<20&4294967295|k>>>12),k=C+(A^P^L)+R[5]+4294588738&4294967295,C=A+(k<<4&4294967295|k>>>28),k=L+(C^A^P)+R[8]+2272392833&4294967295,L=C+(k<<11&4294967295|k>>>21),k=P+(L^C^A)+R[11]+1839030562&4294967295,P=L+(k<<16&4294967295|k>>>16),k=A+(P^L^C)+R[14]+4259657740&4294967295,A=P+(k<<23&4294967295|k>>>9),k=C+(A^P^L)+R[1]+2763975236&4294967295,C=A+(k<<4&4294967295|k>>>28),k=L+(C^A^P)+R[4]+1272893353&4294967295,L=C+(k<<11&4294967295|k>>>21),k=P+(L^C^A)+R[7]+4139469664&4294967295,P=L+(k<<16&4294967295|k>>>16),k=A+(P^L^C)+R[10]+3200236656&4294967295,A=P+(k<<23&4294967295|k>>>9),k=C+(A^P^L)+R[13]+681279174&4294967295,C=A+(k<<4&4294967295|k>>>28),k=L+(C^A^P)+R[0]+3936430074&4294967295,L=C+(k<<11&4294967295|k>>>21),k=P+(L^C^A)+R[3]+3572445317&4294967295,P=L+(k<<16&4294967295|k>>>16),k=A+(P^L^C)+R[6]+76029189&4294967295,A=P+(k<<23&4294967295|k>>>9),k=C+(A^P^L)+R[9]+3654602809&4294967295,C=A+(k<<4&4294967295|k>>>28),k=L+(C^A^P)+R[12]+3873151461&4294967295,L=C+(k<<11&4294967295|k>>>21),k=P+(L^C^A)+R[15]+530742520&4294967295,P=L+(k<<16&4294967295|k>>>16),k=A+(P^L^C)+R[2]+3299628645&4294967295,A=P+(k<<23&4294967295|k>>>9),k=C+(P^(A|~L))+R[0]+4096336452&4294967295,C=A+(k<<6&4294967295|k>>>26),k=L+(A^(C|~P))+R[7]+1126891415&4294967295,L=C+(k<<10&4294967295|k>>>22),k=P+(C^(L|~A))+R[14]+2878612391&4294967295,P=L+(k<<15&4294967295|k>>>17),k=A+(L^(P|~C))+R[5]+4237533241&4294967295,A=P+(k<<21&4294967295|k>>>11),k=C+(P^(A|~L))+R[12]+1700485571&4294967295,C=A+(k<<6&4294967295|k>>>26),k=L+(A^(C|~P))+R[3]+2399980690&4294967295,L=C+(k<<10&4294967295|k>>>22),k=P+(C^(L|~A))+R[10]+4293915773&4294967295,P=L+(k<<15&4294967295|k>>>17),k=A+(L^(P|~C))+R[1]+2240044497&4294967295,A=P+(k<<21&4294967295|k>>>11),k=C+(P^(A|~L))+R[8]+1873313359&4294967295,C=A+(k<<6&4294967295|k>>>26),k=L+(A^(C|~P))+R[15]+4264355552&4294967295,L=C+(k<<10&4294967295|k>>>22),k=P+(C^(L|~A))+R[6]+2734768916&4294967295,P=L+(k<<15&4294967295|k>>>17),k=A+(L^(P|~C))+R[13]+1309151649&4294967295,A=P+(k<<21&4294967295|k>>>11),k=C+(P^(A|~L))+R[4]+4149444226&4294967295,C=A+(k<<6&4294967295|k>>>26),k=L+(A^(C|~P))+R[11]+3174756917&4294967295,L=C+(k<<10&4294967295|k>>>22),k=P+(C^(L|~A))+R[2]+718787259&4294967295,P=L+(k<<15&4294967295|k>>>17),k=A+(L^(P|~C))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,S.g[2]=S.g[2]+P&4294967295,S.g[3]=S.g[3]+L&4294967295}r.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var A=C-this.blockSize,R=this.B,P=this.h,L=0;L<C;){if(P==0)for(;L<=A;)i(this,S,L),L+=this.blockSize;if(typeof S=="string"){for(;L<C;)if(R[P++]=S.charCodeAt(L++),P==this.blockSize){i(this,R),P=0;break}}else for(;L<C;)if(R[P++]=S[L++],P==this.blockSize){i(this,R),P=0;break}}this.h=P,this.o+=C},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var A=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.u(S),S=Array(16),C=A=0;4>C;++C)for(var R=0;32>R;R+=8)S[A++]=this.g[C]>>>R&255;return S};function s(S,C){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=C(S)}function o(S,C){this.h=C;for(var A=[],R=!0,P=S.length-1;0<=P;P--){var L=S[P]|0;R&&L==C||(A[P]=L,R=!1)}this.g=A}var a={};function l(S){return-128<=S&&128>S?s(S,function(C){return new o([C|0],0>C?-1:0)}):new o([S|0],0>S?-1:0)}function u(S){if(isNaN(S)||!isFinite(S))return d;if(0>S)return g(u(-S));for(var C=[],A=1,R=0;S>=A;R++)C[R]=S/A|0,A*=4294967296;return new o(C,0)}function c(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return g(c(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=u(Math.pow(C,8)),R=d,P=0;P<S.length;P+=8){var L=Math.min(8,S.length-P),k=parseInt(S.substring(P,P+L),C);8>L?(L=u(Math.pow(C,L)),R=R.j(L).add(u(k))):(R=R.j(A),R=R.add(u(k)))}return R}var d=l(0),f=l(1),h=l(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,C=1,A=0;A<this.g.length;A++){var R=this.i(A);S+=(0<=R?R:4294967296+R)*C,C*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var C=u(Math.pow(S,6)),A=this,R="";;){var P=w(A,C).g;A=y(A,P.j(C));var L=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=P,p(A))return L+R;for(;6>L.length;)L="0"+L;R=L+R}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var C=S.g.length,A=[],R=0;R<C;R++)A[R]=~S.g[R];return new o(A,~S.h).add(f)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],R=0,P=0;P<=C;P++){var L=R+(this.i(P)&65535)+(S.i(P)&65535),k=(L>>>16)+(this.i(P)>>>16)+(S.i(P)>>>16);R=k>>>16,L&=65535,k&=65535,A[P]=k<<16|L}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(S,C){return S.add(g(C))}e.j=function(S){if(p(this)||p(S))return d;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return u(this.m()*S.m());for(var C=this.g.length+S.g.length,A=[],R=0;R<2*C;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var P=0;P<S.g.length;P++){var L=this.i(R)>>>16,k=this.i(R)&65535,$=S.i(P)>>>16,D=S.i(P)&65535;A[2*R+2*P]+=k*D,b(A,2*R+2*P),A[2*R+2*P+1]+=L*D,b(A,2*R+2*P+1),A[2*R+2*P+1]+=k*$,b(A,2*R+2*P+1),A[2*R+2*P+2]+=L*$,b(A,2*R+2*P+2)}for(R=0;R<C;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=C;R<2*C;R++)A[R]=0;return new o(A,0)};function b(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function _(S,C){this.g=S,this.h=C}function w(S,C){if(p(C))throw Error("division by zero");if(p(S))return new _(d,d);if(m(S))return C=w(g(S),C),new _(g(C.g),g(C.h));if(m(C))return C=w(S,g(C)),new _(g(C.g),C.h);if(30<S.g.length){if(m(S)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=f,R=C;0>=R.l(S);)A=E(A),R=E(R);var P=x(A,1),L=x(R,1);for(R=x(R,2),A=x(A,2);!p(R);){var k=L.add(R);0>=k.l(S)&&(P=P.add(A),L=k),R=x(R,1),A=x(A,1)}return C=y(S,P.j(C)),new _(P,C)}for(P=d;0<=S.l(C);){for(A=Math.max(1,Math.floor(S.m()/C.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),L=u(A),k=L.j(C);m(k)||0<k.l(S);)A-=R,L=u(A),k=L.j(C);p(L)&&(L=f),P=P.add(L),S=y(S,k)}return new _(P,S)}e.A=function(S){return w(this,S).h},e.and=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)&S.i(R);return new o(A,this.h&S.h)},e.or=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)|S.i(R);return new o(A,this.h|S.h)},e.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)^S.i(R);return new o(A,this.h^S.h)};function E(S){for(var C=S.g.length+1,A=[],R=0;R<C;R++)A[R]=S.i(R)<<1|S.i(R-1)>>>31;return new o(A,S.h)}function x(S,C){var A=C>>5;C%=32;for(var R=S.g.length-A,P=[],L=0;L<R;L++)P[L]=0<C?S.i(L+A)>>>C|S.i(L+A+1)<<32-C:S.i(L+A);return new o(P,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,IDe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=c,B1=o}).apply(typeof sme<"u"?sme:typeof self<"u"?self:typeof window<"u"?window:{});var UN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kDe,RDe,e2,PDe,_D,UH,NDe,ODe,DDe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(T,F,q){return T==Array.prototype||T==Object.prototype||(T[F]=q.value),T};function n(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof UN=="object"&&UN];for(var F=0;F<T.length;++F){var q=T[F];if(q&&q.Math==Math)return q}throw Error("Cannot find global object")}var r=n(this);function i(T,F){if(F)e:{var q=r;T=T.split(".");for(var Q=0;Q<T.length-1;Q++){var Te=T[Q];if(!(Te in q))break e;q=q[Te]}T=T[T.length-1],Q=q[T],F=F(Q),F!=Q&&F!=null&&t(q,T,{configurable:!0,writable:!0,value:F})}}function s(T,F){T instanceof String&&(T+="");var q=0,Q=!1,Te={next:function(){if(!Q&&q<T.length){var $e=q++;return{value:F($e,T[$e]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return Te[Symbol.iterator]=function(){return Te},Te}i("Array.prototype.values",function(T){return T||function(){return s(this,function(F,q){return q})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(T){var F=typeof T;return F=F!="object"?F:T?Array.isArray(T)?"array":F:"null",F=="array"||F=="object"&&typeof T.length=="number"}function u(T){var F=typeof T;return F=="object"&&T!=null||F=="function"}function c(T,F,q){return T.call.apply(T.bind,arguments)}function d(T,F,q){if(!T)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var Te=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Te,Q),T.apply(F,Te)}}return function(){return T.apply(F,arguments)}}function f(T,F,q){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:d,f.apply(null,arguments)}function h(T,F){var q=Array.prototype.slice.call(arguments,1);return function(){var Q=q.slice();return Q.push.apply(Q,arguments),T.apply(this,Q)}}function p(T,F){function q(){}q.prototype=F.prototype,T.aa=F.prototype,T.prototype=new q,T.prototype.constructor=T,T.Qb=function(Q,Te,$e){for(var yt=Array(arguments.length-2),ai=2;ai<arguments.length;ai++)yt[ai-2]=arguments[ai];return F.prototype[Te].apply(Q,yt)}}function m(T){const F=T.length;if(0<F){const q=Array(F);for(let Q=0;Q<F;Q++)q[Q]=T[Q];return q}return[]}function g(T,F){for(let q=1;q<arguments.length;q++){const Q=arguments[q];if(l(Q)){const Te=T.length||0,$e=Q.length||0;T.length=Te+$e;for(let yt=0;yt<$e;yt++)T[Te+yt]=Q[yt]}else T.push(Q)}}class y{constructor(F,q){this.i=F,this.j=q,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function b(T){return/^[\s\xa0]*$/.test(T)}function _(){var T=a.navigator;return T&&(T=T.userAgent)?T:""}function w(T){return w[" "](T),T}w[" "]=function(){};var E=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function x(T,F,q){for(const Q in T)F.call(q,T[Q],Q,T)}function S(T,F){for(const q in T)F.call(void 0,T[q],q,T)}function C(T){const F={};for(const q in T)F[q]=T[q];return F}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(T,F){let q,Q;for(let Te=1;Te<arguments.length;Te++){Q=arguments[Te];for(q in Q)T[q]=Q[q];for(let $e=0;$e<A.length;$e++)q=A[$e],Object.prototype.hasOwnProperty.call(Q,q)&&(T[q]=Q[q])}}function P(T){var F=1;T=T.split(":");const q=[];for(;0<F&&T.length;)q.push(T.shift()),F--;return T.length&&q.push(T.join(":")),q}function L(T){a.setTimeout(()=>{throw T},0)}function k(){var T=U;let F=null;return T.g&&(F=T.g,T.g=T.g.next,T.g||(T.h=null),F.next=null),F}class ${constructor(){this.h=this.g=null}add(F,q){const Q=D.get();Q.set(F,q),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var D=new y(()=>new M,T=>T.reset());class M{constructor(){this.next=this.g=this.h=null}set(F,q){this.h=F,this.g=q,this.next=null}reset(){this.next=this.g=this.h=null}}let B,z=!1,U=new $,O=()=>{const T=a.Promise.resolve(void 0);B=()=>{T.then(V)}};var V=()=>{for(var T;T=k();){try{T.h.call(T.g)}catch(q){L(q)}var F=D;F.j(T),100>F.h&&(F.h++,T.next=F.g,F.g=T)}z=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(T,F){this.type=T,this.g=this.target=F,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var T=!1,F=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const q=()=>{};a.addEventListener("test",q,F),a.removeEventListener("test",q,F)}catch{}return T}();function G(T,F){if(j.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T){var q=this.type=T.type,Q=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;if(this.target=T.target||T.srcElement,this.g=F,F=T.relatedTarget){if(E){e:{try{w(F.nodeName);var Te=!0;break e}catch{}Te=!1}Te||(F=null)}}else q=="mouseover"?F=T.fromElement:q=="mouseout"&&(F=T.toElement);this.relatedTarget=F,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=typeof T.pointerType=="string"?T.pointerType:J[T.pointerType]||"",this.state=T.state,this.i=T,T.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var J={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var se="closure_listenable_"+(1e6*Math.random()|0),ie=0;function ne(T,F,q,Q,Te){this.listener=T,this.proxy=null,this.src=F,this.type=q,this.capture=!!Q,this.ha=Te,this.key=++ie,this.da=this.fa=!1}function ue(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function xe(T){this.src=T,this.g={},this.h=0}xe.prototype.add=function(T,F,q,Q,Te){var $e=T.toString();T=this.g[$e],T||(T=this.g[$e]=[],this.h++);var yt=Ke(T,F,Q,Te);return-1<yt?(F=T[yt],q||(F.fa=!1)):(F=new ne(F,this.src,$e,!!Q,Te),F.fa=q,T.push(F)),F};function de(T,F){var q=F.type;if(q in T.g){var Q=T.g[q],Te=Array.prototype.indexOf.call(Q,F,void 0),$e;($e=0<=Te)&&Array.prototype.splice.call(Q,Te,1),$e&&(ue(F),T.g[q].length==0&&(delete T.g[q],T.h--))}}function Ke(T,F,q,Q){for(var Te=0;Te<T.length;++Te){var $e=T[Te];if(!$e.da&&$e.listener==F&&$e.capture==!!q&&$e.ha==Q)return Te}return-1}var je="closure_lm_"+(1e6*Math.random()|0),Oe={};function Fe(T,F,q,Q,Te){if(Array.isArray(F)){for(var $e=0;$e<F.length;$e++)Fe(T,F[$e],q,Q,Te);return null}return q=nt(q),T&&T[se]?T.K(F,q,u(Q)?!!Q.capture:!!Q,Te):Ae(T,F,q,!1,Q,Te)}function Ae(T,F,q,Q,Te,$e){if(!F)throw Error("Invalid event type");var yt=u(Te)?!!Te.capture:!!Te,ai=he(T);if(ai||(T[je]=ai=new xe(T)),q=ai.add(F,q,Q,yt,$e),q.proxy)return q;if(Q=fe(),q.proxy=Q,Q.src=T,Q.listener=q,T.addEventListener)H||(Te=yt),Te===void 0&&(Te=!1),T.addEventListener(F.toString(),Q,Te);else if(T.attachEvent)T.attachEvent(ft(F.toString()),Q);else if(T.addListener&&T.removeListener)T.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return q}function fe(){function T(q){return F.call(T.src,T.listener,q)}const F=Ee;return T}function Pe(T,F,q,Q,Te){if(Array.isArray(F))for(var $e=0;$e<F.length;$e++)Pe(T,F[$e],q,Q,Te);else Q=u(Q)?!!Q.capture:!!Q,q=nt(q),T&&T[se]?(T=T.i,F=String(F).toString(),F in T.g&&($e=T.g[F],q=Ke($e,q,Q,Te),-1<q&&(ue($e[q]),Array.prototype.splice.call($e,q,1),$e.length==0&&(delete T.g[F],T.h--)))):T&&(T=he(T))&&(F=T.g[F.toString()],T=-1,F&&(T=Ke(F,q,Q,Te)),(q=-1<T?F[T]:null)&&He(q))}function He(T){if(typeof T!="number"&&T&&!T.da){var F=T.src;if(F&&F[se])de(F.i,T);else{var q=T.type,Q=T.proxy;F.removeEventListener?F.removeEventListener(q,Q,T.capture):F.detachEvent?F.detachEvent(ft(q),Q):F.addListener&&F.removeListener&&F.removeListener(Q),(q=he(F))?(de(q,T),q.h==0&&(q.src=null,F[je]=null)):ue(T)}}}function ft(T){return T in Oe?Oe[T]:Oe[T]="on"+T}function Ee(T,F){if(T.da)T=!0;else{F=new G(F,this);var q=T.listener,Q=T.ha||T.src;T.fa&&He(T),T=q.call(Q,F)}return T}function he(T){return T=T[je],T instanceof xe?T:null}var Ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function nt(T){return typeof T=="function"?T:(T[Ue]||(T[Ue]=function(F){return T.handleEvent(F)}),T[Ue])}function ye(){W.call(this),this.i=new xe(this),this.M=this,this.F=null}p(ye,W),ye.prototype[se]=!0,ye.prototype.removeEventListener=function(T,F,q,Q){Pe(this,T,F,q,Q)};function Re(T,F){var q,Q=T.F;if(Q)for(q=[];Q;Q=Q.F)q.push(Q);if(T=T.M,Q=F.type||F,typeof F=="string")F=new j(F,T);else if(F instanceof j)F.target=F.target||T;else{var Te=F;F=new j(Q,T),R(F,Te)}if(Te=!0,q)for(var $e=q.length-1;0<=$e;$e--){var yt=F.g=q[$e];Te=Ge(yt,Q,!0,F)&&Te}if(yt=F.g=T,Te=Ge(yt,Q,!0,F)&&Te,Te=Ge(yt,Q,!1,F)&&Te,q)for($e=0;$e<q.length;$e++)yt=F.g=q[$e],Te=Ge(yt,Q,!1,F)&&Te}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var T=this.i,F;for(F in T.g){for(var q=T.g[F],Q=0;Q<q.length;Q++)ue(q[Q]);delete T.g[F],T.h--}}this.F=null},ye.prototype.K=function(T,F,q,Q){return this.i.add(String(T),F,!1,q,Q)},ye.prototype.L=function(T,F,q,Q){return this.i.add(String(T),F,!0,q,Q)};function Ge(T,F,q,Q){if(F=T.i.g[String(F)],!F)return!0;F=F.concat();for(var Te=!0,$e=0;$e<F.length;++$e){var yt=F[$e];if(yt&&!yt.da&&yt.capture==q){var ai=yt.listener,Io=yt.ha||yt.src;yt.fa&&de(T.i,yt),Te=ai.call(Io,Q)!==!1&&Te}}return Te&&!Q.defaultPrevented}function Qe(T,F,q){if(typeof T=="function")q&&(T=f(T,q));else if(T&&typeof T.handleEvent=="function")T=f(T.handleEvent,T);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:a.setTimeout(T,F||0)}function xt(T){T.g=Qe(()=>{T.g=null,T.i&&(T.i=!1,xt(T))},T.l);const F=T.h;T.h=null,T.m.apply(null,F)}class An extends W{constructor(F,q){super(),this.m=F,this.l=q,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gr(T){W.call(this),this.h=T,this.g={}}p(gr,W);var yr=[];function Nr(T){x(T.g,function(F,q){this.g.hasOwnProperty(q)&&He(F)},T),T.g={}}gr.prototype.N=function(){gr.aa.N.call(this),Nr(this)},gr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Xt=a.JSON.stringify,Dn=a.JSON.parse,rr=class{stringify(T){return a.JSON.stringify(T,void 0)}parse(T){return a.JSON.parse(T,void 0)}};function ir(){}ir.prototype.h=null;function ao(T){return T.h||(T.h=T.i())}function Pi(){}var zi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Un(){j.call(this,"d")}p(Un,j);function Wn(){j.call(this,"c")}p(Wn,j);var Qi={},vd=null;function Ua(){return vd=vd||new ye}Qi.La="serverreachability";function mc(T){j.call(this,Qi.La,T)}p(mc,j);function gt(T){const F=Ua();Re(F,new mc(F))}Qi.STAT_EVENT="statevent";function ci(T,F){j.call(this,Qi.STAT_EVENT,T),this.stat=F}p(ci,j);function wn(T){const F=Ua();Re(F,new ci(F,T))}Qi.Ma="timingevent";function Lr(T,F){j.call(this,Qi.Ma,T),this.size=F}p(Lr,j);function ni(T,F){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){T()},F)}function ri(){this.g=!0}ri.prototype.xa=function(){this.g=!1};function le(T,F,q,Q,Te,$e){T.info(function(){if(T.g)if($e)for(var yt="",ai=$e.split("&"),Io=0;Io<ai.length;Io++){var Sr=ai[Io].split("=");if(1<Sr.length){var aa=Sr[0];Sr=Sr[1];var la=aa.split("_");yt=2<=la.length&&la[1]=="type"?yt+(aa+"="+Sr+"&"):yt+(aa+"=redacted&")}}else yt=null;else yt=$e;return"XMLHTTP REQ ("+Q+") [attempt "+Te+"]: "+F+`
`+q+`
`+yt})}function te(T,F,q,Q,Te,$e,yt){T.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+Te+"]: "+F+`
`+q+`
`+$e+" "+yt})}function pe(T,F,q,Q){T.info(function(){return"XMLHTTP TEXT ("+F+"): "+ke(T,q)+(Q?" "+Q:"")})}function Ie(T,F){T.info(function(){return"TIMEOUT: "+F})}ri.prototype.info=function(){};function ke(T,F){if(!T.g)return F;if(!F)return null;try{var q=JSON.parse(F);if(q){for(T=0;T<q.length;T++)if(Array.isArray(q[T])){var Q=q[T];if(!(2>Q.length)){var Te=Q[1];if(Array.isArray(Te)&&!(1>Te.length)){var $e=Te[0];if($e!="noop"&&$e!="stop"&&$e!="close")for(var yt=1;yt<Te.length;yt++)Te[yt]=""}}}}return Xt(q)}catch{return F}}var dt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},rn;function Gn(){}p(Gn,ir),Gn.prototype.g=function(){return new XMLHttpRequest},Gn.prototype.i=function(){return{}},rn=new Gn;function Qn(T,F,q,Q){this.j=T,this.i=F,this.l=q,this.R=Q||1,this.U=new gr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new In}function In(){this.i=null,this.g="",this.h=!1}var vr={},Vr={};function Qt(T,F,q){T.L=1,T.v=Jn(et(F)),T.m=q,T.P=!0,br(T,null)}function br(T,F){T.F=Date.now(),Ui(T),T.A=et(T.v);var q=T.A,Q=T.R;Array.isArray(Q)||(Q=[String(Q)]),vP(q.i,"t",Q),T.C=0,q=T.j.J,T.h=new In,T.g=coe(T.j,q?F:null,!T.m),0<T.O&&(T.M=new An(f(T.Y,T,T.g),T.O)),F=T.U,q=T.g,Q=T.ca;var Te="readystatechange";Array.isArray(Te)||(Te&&(yr[0]=Te.toString()),Te=yr);for(var $e=0;$e<Te.length;$e++){var yt=Fe(q,Te[$e],Q||F.handleEvent,!1,F.h||F);if(!yt)break;F.g[yt.key]=yt}F=T.H?C(T.H):{},T.m?(T.u||(T.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.A,T.u,T.m,F)):(T.u="GET",T.g.ea(T.A,T.u,null,F)),gt(),le(T.i,T.u,T.A,T.l,T.R,T.m)}Qn.prototype.ca=function(T){T=T.target;const F=this.M;F&&gs(T)==3?F.j():this.Y(T)},Qn.prototype.Y=function(T){try{if(T==this.g)e:{const la=gs(this.g);var F=this.g.Ba();const x_=this.g.Z();if(!(3>la)&&(la!=3||this.g&&(this.h.h||this.g.oa()||oa(this.g)))){this.J||la!=4||F==7||(F==8||0>=x_?gt(3):gt(2)),di(this);var q=this.g.Z();this.X=q;t:if(ii(this)){var Q=oa(this.g);T="";var Te=Q.length,$e=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ji(this),Ao(this);var yt="";break t}this.h.i=new a.TextDecoder}for(F=0;F<Te;F++)this.h.h=!0,T+=this.h.i.decode(Q[F],{stream:!($e&&F==Te-1)});Q.length=0,this.h.g+=T,this.C=0,yt=this.h.g}else yt=this.g.oa();if(this.o=q==200,te(this.i,this.u,this.A,this.l,this.R,la,q),this.o){if(this.T&&!this.K){t:{if(this.g){var ai,Io=this.g;if((ai=Io.g?Io.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(ai)){var Sr=ai;break t}}Sr=null}if(q=Sr)pe(this.i,this.l,q,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Zi(this,q);else{this.o=!1,this.s=3,wn(12),Ji(this),Ao(this);break e}}if(this.P){q=!0;let bd;for(;!this.J&&this.C<yt.length;)if(bd=dr(this,yt),bd==Vr){la==4&&(this.s=4,wn(14),q=!1),pe(this.i,this.l,null,"[Incomplete Response]");break}else if(bd==vr){this.s=4,wn(15),pe(this.i,this.l,yt,"[Invalid Chunk]"),q=!1;break}else pe(this.i,this.l,bd,null),Zi(this,bd);if(ii(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),la!=4||yt.length!=0||this.h.h||(this.s=1,wn(16),q=!1),this.o=this.o&&q,!q)pe(this.i,this.l,yt,"[Invalid Chunked Response]"),Ji(this),Ao(this);else if(0<yt.length&&!this.W){this.W=!0;var aa=this.j;aa.g==this&&aa.ba&&!aa.M&&(aa.j.info("Great, no buffering proxy detected. Bytes received: "+yt.length),F5(aa),aa.M=!0,wn(11))}}else pe(this.i,this.l,yt,null),Zi(this,yt);la==4&&Ji(this),this.o&&!this.J&&(la==4?ooe(this.j,this):(this.o=!1,Ui(this)))}else xv(this.g),q==400&&0<yt.indexOf("Unknown SID")?(this.s=3,wn(12)):(this.s=0,wn(13)),Ji(this),Ao(this)}}}catch{}finally{}};function ii(T){return T.g?T.u=="GET"&&T.L!=2&&T.j.Ca:!1}function dr(T,F){var q=T.C,Q=F.indexOf(`
`,q);return Q==-1?Vr:(q=Number(F.substring(q,Q)),isNaN(q)?vr:(Q+=1,Q+q>F.length?Vr:(F=F.slice(Q,Q+q),T.C=Q+q,F)))}Qn.prototype.cancel=function(){this.J=!0,Ji(this)};function Ui(T){T.S=Date.now()+T.I,lo(T,T.I)}function lo(T,F){if(T.B!=null)throw Error("WatchDog timer not null");T.B=ni(f(T.ba,T),F)}function di(T){T.B&&(a.clearTimeout(T.B),T.B=null)}Qn.prototype.ba=function(){this.B=null;const T=Date.now();0<=T-this.S?(Ie(this.i,this.A),this.L!=2&&(gt(),wn(17)),Ji(this),this.s=2,Ao(this)):lo(this,this.S-T)};function Ao(T){T.j.G==0||T.J||ooe(T.j,T)}function Ji(T){di(T);var F=T.M;F&&typeof F.ma=="function"&&F.ma(),T.M=null,Nr(T.U),T.g&&(F=T.g,T.g=null,F.abort(),F.ma())}function Zi(T,F){try{var q=T.j;if(q.G!=0&&(q.g==T||qf(q.h,T))){if(!T.K&&qf(q.h,T)&&q.G==3){try{var Q=q.Da.g.parse(F)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var Te=Q;if(Te[0]==0){e:if(!q.u){if(q.g)if(q.g.F+3e3<T.F)TP(q),xP(q);else break e;L5(q),wn(18)}}else q.za=Te[1],0<q.za-q.T&&37500>Te[2]&&q.F&&q.v==0&&!q.C&&(q.C=ni(f(q.Za,q),6e3));if(1>=gc(q.h)&&q.ca){try{q.ca()}catch{}q.ca=void 0}}else Sv(q,11)}else if((T.K||q.g==T)&&TP(q),!b(F))for(Te=q.Da.g.parse(F),F=0;F<Te.length;F++){let Sr=Te[F];if(q.T=Sr[0],Sr=Sr[1],q.G==2)if(Sr[0]=="c"){q.K=Sr[1],q.ia=Sr[2];const aa=Sr[3];aa!=null&&(q.la=aa,q.j.info("VER="+q.la));const la=Sr[4];la!=null&&(q.Aa=la,q.j.info("SVER="+q.Aa));const x_=Sr[5];x_!=null&&typeof x_=="number"&&0<x_&&(Q=1.5*x_,q.L=Q,q.j.info("backChannelRequestTimeoutMs_="+Q)),Q=q;const bd=T.g;if(bd){const AP=bd.g?bd.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(AP){var $e=Q.h;$e.g||AP.indexOf("spdy")==-1&&AP.indexOf("quic")==-1&&AP.indexOf("h2")==-1||($e.j=$e.l,$e.g=new Set,$e.h&&(Y($e,$e.h),$e.h=null))}if(Q.D){const j5=bd.g?bd.g.getResponseHeader("X-HTTP-Session-Id"):null;j5&&(Q.ya=j5,Lt(Q.I,Q.D,j5))}}q.G=3,q.l&&q.l.ua(),q.ba&&(q.R=Date.now()-T.F,q.j.info("Handshake RTT: "+q.R+"ms")),Q=q;var yt=T;if(Q.qa=uoe(Q,Q.J?Q.ia:null,Q.W),yt.K){ce(Q.h,yt);var ai=yt,Io=Q.L;Io&&(ai.I=Io),ai.B&&(di(ai),Ui(ai)),Q.g=yt}else ioe(Q);0<q.i.length&&SP(q)}else Sr[0]!="stop"&&Sr[0]!="close"||Sv(q,7);else q.G==3&&(Sr[0]=="stop"||Sr[0]=="close"?Sr[0]=="stop"?Sv(q,7):w_(q):Sr[0]!="noop"&&q.l&&q.l.ta(Sr),q.v=0)}}gt(4)}catch{}}var ia=class{constructor(T,F){this.g=T,this.map=F}};function Va(T){this.l=T||10,a.PerformanceNavigationTiming?(T=a.performance.getEntriesByType("navigation"),T=0<T.length&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function uo(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function gc(T){return T.h?1:T.g?T.g.size:0}function qf(T,F){return T.h?T.h==F:T.g?T.g.has(F):!1}function Y(T,F){T.g?T.g.add(F):T.h=F}function ce(T,F){T.h&&T.h==F?T.h=null:T.g&&T.g.has(F)&&T.g.delete(F)}Va.prototype.cancel=function(){if(this.i=ee(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function ee(T){if(T.h!=null)return T.i.concat(T.h.D);if(T.g!=null&&T.g.size!==0){let F=T.i;for(const q of T.g.values())F=F.concat(q.D);return F}return m(T.i)}function be(T){if(T.V&&typeof T.V=="function")return T.V();if(typeof Map<"u"&&T instanceof Map||typeof Set<"u"&&T instanceof Set)return Array.from(T.values());if(typeof T=="string")return T.split("");if(l(T)){for(var F=[],q=T.length,Q=0;Q<q;Q++)F.push(T[Q]);return F}F=[],q=0;for(Q in T)F[q++]=T[Q];return F}function _e(T){if(T.na&&typeof T.na=="function")return T.na();if(!T.V||typeof T.V!="function"){if(typeof Map<"u"&&T instanceof Map)return Array.from(T.keys());if(!(typeof Set<"u"&&T instanceof Set)){if(l(T)||typeof T=="string"){var F=[];T=T.length;for(var q=0;q<T;q++)F.push(q);return F}F=[],q=0;for(const Q in T)F[q++]=Q;return F}}}function ve(T,F){if(T.forEach&&typeof T.forEach=="function")T.forEach(F,void 0);else if(l(T)||typeof T=="string")Array.prototype.forEach.call(T,F,void 0);else for(var q=_e(T),Q=be(T),Te=Q.length,$e=0;$e<Te;$e++)F.call(void 0,Q[$e],q&&q[$e],T)}var Be=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Je(T,F){if(T){T=T.split("&");for(var q=0;q<T.length;q++){var Q=T[q].indexOf("="),Te=null;if(0<=Q){var $e=T[q].substring(0,Q);Te=T[q].substring(Q+1)}else $e=T[q];F($e,Te?decodeURIComponent(Te.replace(/\+/g," ")):"")}}}function Ze(T){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,T instanceof Ze){this.h=T.h,ct(this,T.j),this.o=T.o,this.g=T.g,It(this,T.s),this.l=T.l;var F=T.i,q=new yc;q.i=F.i,F.g&&(q.g=new Map(F.g),q.h=F.h),kn(this,q),this.m=T.m}else T&&(F=String(T).match(Be))?(this.h=!1,ct(this,F[1]||"",!0),this.o=Hr(F[2]||""),this.g=Hr(F[3]||"",!0),It(this,F[4]),this.l=Hr(F[5]||"",!0),kn(this,F[6]||"",!0),this.m=Hr(F[7]||"")):(this.h=!1,this.i=new yc(null,this.h))}Ze.prototype.toString=function(){var T=[],F=this.j;F&&T.push(qr(F,Wf,!0),":");var q=this.g;return(q||F=="file")&&(T.push("//"),(F=this.o)&&T.push(qr(F,Wf,!0),"@"),T.push(encodeURIComponent(String(q)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),q=this.s,q!=null&&T.push(":",String(q))),(q=this.l)&&(this.g&&q.charAt(0)!="/"&&T.push("/"),T.push(qr(q,q.charAt(0)=="/"?pT:Pp,!0))),(q=this.i.toString())&&T.push("?",q),(q=this.m)&&T.push("#",qr(q,yP)),T.join("")};function et(T){return new Ze(T)}function ct(T,F,q){T.j=q?Hr(F,!0):F,T.j&&(T.j=T.j.replace(/:$/,""))}function It(T,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);T.s=F}else T.s=null}function kn(T,F,q){F instanceof yc?(T.i=F,mT(T.i,T.h)):(q||(F=qr(F,bv)),T.i=new yc(F,T.h))}function Lt(T,F,q){T.i.set(F,q)}function Jn(T){return Lt(T,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),T}function Hr(T,F){return T?F?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function qr(T,F,q){return typeof T=="string"?(T=encodeURI(T).replace(F,sa),q&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function sa(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Wf=/[#\/\?@]/g,Pp=/[#\?:]/g,pT=/[#\?]/g,bv=/[#\?@]/g,yP=/#/g;function yc(T,F){this.h=this.g=null,this.i=T||null,this.j=!!F}function Sl(T){T.g||(T.g=new Map,T.h=0,T.i&&Je(T.i,function(F,q){T.add(decodeURIComponent(F.replace(/\+/g," ")),q)}))}e=yc.prototype,e.add=function(T,F){Sl(this),this.i=null,T=Op(this,T);var q=this.g.get(T);return q||this.g.set(T,q=[]),q.push(F),this.h+=1,this};function Np(T,F){Sl(T),F=Op(T,F),T.g.has(F)&&(T.i=null,T.h-=T.g.get(F).length,T.g.delete(F))}function b_(T,F){return Sl(T),F=Op(T,F),T.g.has(F)}e.forEach=function(T,F){Sl(this),this.g.forEach(function(q,Q){q.forEach(function(Te){T.call(F,Te,Q,this)},this)},this)},e.na=function(){Sl(this);const T=Array.from(this.g.values()),F=Array.from(this.g.keys()),q=[];for(let Q=0;Q<F.length;Q++){const Te=T[Q];for(let $e=0;$e<Te.length;$e++)q.push(F[Q])}return q},e.V=function(T){Sl(this);let F=[];if(typeof T=="string")b_(this,T)&&(F=F.concat(this.g.get(Op(this,T))));else{T=Array.from(this.g.values());for(let q=0;q<T.length;q++)F=F.concat(T[q])}return F},e.set=function(T,F){return Sl(this),this.i=null,T=Op(this,T),b_(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[F]),this.h+=1,this},e.get=function(T,F){return T?(T=this.V(T),0<T.length?String(T[0]):F):F};function vP(T,F,q){Np(T,F),0<q.length&&(T.i=null,T.g.set(Op(T,F),m(q)),T.h+=q.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],F=Array.from(this.g.keys());for(var q=0;q<F.length;q++){var Q=F[q];const $e=encodeURIComponent(String(Q)),yt=this.V(Q);for(Q=0;Q<yt.length;Q++){var Te=$e;yt[Q]!==""&&(Te+="="+encodeURIComponent(String(yt[Q]))),T.push(Te)}}return this.i=T.join("&")};function Op(T,F){return F=String(F),T.j&&(F=F.toLowerCase()),F}function mT(T,F){F&&!T.j&&(Sl(T),T.i=null,T.g.forEach(function(q,Q){var Te=Q.toLowerCase();Q!=Te&&(Np(this,Q),vP(this,Te,q))},T)),T.j=F}function bP(T,F){const q=new ri;if(a.Image){const Q=new Image;Q.onload=h(Tl,q,"TestLoadImage: loaded",!0,F,Q),Q.onerror=h(Tl,q,"TestLoadImage: error",!1,F,Q),Q.onabort=h(Tl,q,"TestLoadImage: abort",!1,F,Q),Q.ontimeout=h(Tl,q,"TestLoadImage: timeout",!1,F,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=T}else F(!1)}function Dp(T,F){const q=new ri,Q=new AbortController,Te=setTimeout(()=>{Q.abort(),Tl(q,"TestPingServer: timeout",!1,F)},1e4);fetch(T,{signal:Q.signal}).then($e=>{clearTimeout(Te),$e.ok?Tl(q,"TestPingServer: ok",!0,F):Tl(q,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(Te),Tl(q,"TestPingServer: error",!1,F)})}function Tl(T,F,q,Q,Te){try{Te&&(Te.onload=null,Te.onerror=null,Te.onabort=null,Te.ontimeout=null),Q(q)}catch{}}function $5(){this.g=new rr}function _P(T,F,q){const Q=q||"";try{ve(T,function(Te,$e){let yt=Te;u(Te)&&(yt=Xt(Te)),F.push(Q+$e+"="+encodeURIComponent(yt))})}catch(Te){throw F.push(Q+"type="+encodeURIComponent("_badmap")),Te}}function _v(T){this.l=T.Ub||null,this.j=T.eb||!1}p(_v,ir),_v.prototype.g=function(){return new wv(this.l,this.j)},_v.prototype.i=function(T){return function(){return T}}({});function wv(T,F){ye.call(this),this.D=T,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(wv,ye),e=wv.prototype,e.open=function(T,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=T,this.A=F,this.readyState=1,Sg(this)},e.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};T&&(F.body=T),(this.D||a).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ev(this)),this.readyState=0},e.Sa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Sg(this)),this.g&&(this.readyState=3,Sg(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;wP(this)}else T.text().then(this.Ra.bind(this),this.ga.bind(this))};function wP(T){T.j.read().then(T.Pa.bind(T)).catch(T.ga.bind(T))}e.Pa=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var F=T.value?T.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!T.done}))&&(this.response=this.responseText+=F)}T.done?Ev(this):Sg(this),this.readyState==3&&wP(this)}},e.Ra=function(T){this.g&&(this.response=this.responseText=T,Ev(this))},e.Qa=function(T){this.g&&(this.response=T,Ev(this))},e.ga=function(){this.g&&Ev(this)};function Ev(T){T.readyState=4,T.l=null,T.j=null,T.v=null,Sg(T)}e.setRequestHeader=function(T,F){this.u.append(T,F)},e.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],F=this.h.entries();for(var q=F.next();!q.done;)q=q.value,T.push(q[0]+": "+q[1]),q=F.next();return T.join(`\r
`)};function Sg(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(wv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function EP(T){let F="";return x(T,function(q,Q){F+=Q,F+=":",F+=q,F+=`\r
`}),F}function re(T,F,q){e:{for(Q in q){var Q=!1;break e}Q=!0}Q||(q=EP(q),typeof T=="string"?q!=null&&encodeURIComponent(String(q)):Lt(T,F,q))}function me(T){ye.call(this),this.headers=new Map,this.o=T||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(me,ye);var Ne=/^https?$/i,Ot=["POST","PUT"];e=me.prototype,e.Ha=function(T){this.J=T},e.ea=function(T,F,q,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);F=F?F.toUpperCase():"GET",this.D=T,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():rn.g(),this.v=this.o?ao(this.o):ao(rn),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(F,String(T),!0),this.B=!1}catch($e){Yn(this,$e);return}if(T=q||"",q=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var Te in Q)q.set(Te,Q[Te]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const $e of Q.keys())q.set($e,Q.get($e));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(q.keys()).find($e=>$e.toLowerCase()=="content-type"),Te=a.FormData&&T instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ot,F,void 0))||Q||Te||q.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[$e,yt]of q)this.g.setRequestHeader($e,yt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oi(this),this.u=!0,this.g.send(T),this.u=!1}catch($e){Yn(this,$e)}};function Yn(T,F){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=F,T.m=5,Fr(T),Zn(T)}function Fr(T){T.A||(T.A=!0,Re(T,"complete"),Re(T,"error"))}e.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=T||7,Re(this,"complete"),Re(this,"abort"),Zn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Zn(this,!0)),me.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?si(this):this.bb())},e.bb=function(){si(this)};function si(T){if(T.h&&typeof o<"u"&&(!T.v[1]||gs(T)!=4||T.Z()!=2)){if(T.u&&gs(T)==4)Qe(T.Ea,0,T);else if(Re(T,"readystatechange"),gs(T)==4){T.h=!1;try{const yt=T.Z();e:switch(yt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var q;if(!(q=F)){var Q;if(Q=yt===0){var Te=String(T.D).match(Be)[1]||null;!Te&&a.self&&a.self.location&&(Te=a.self.location.protocol.slice(0,-1)),Q=!Ne.test(Te?Te.toLowerCase():"")}q=Q}if(q)Re(T,"complete"),Re(T,"success");else{T.m=6;try{var $e=2<gs(T)?T.g.statusText:""}catch{$e=""}T.l=$e+" ["+T.Z()+"]",Fr(T)}}finally{Zn(T)}}}}function Zn(T,F){if(T.g){oi(T);const q=T.g,Q=T.v[0]?()=>{}:null;T.g=null,T.v=null,F||Re(T,"ready");try{q.onreadystatechange=Q}catch{}}}function oi(T){T.I&&(a.clearTimeout(T.I),T.I=null)}e.isActive=function(){return!!this.g};function gs(T){return T.g?T.g.readyState:0}e.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(T){if(this.g){var F=this.g.responseText;return T&&F.indexOf(T)==0&&(F=F.substring(T.length)),Dn(F)}};function oa(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.H){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function xv(T){const F={};T=(T.g&&2<=gs(T)&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<T.length;Q++){if(b(T[Q]))continue;var q=P(T[Q]);const Te=q[0];if(q=q[1],typeof q!="string")continue;q=q.trim();const $e=F[Te]||[];F[Te]=$e,$e.push(q)}S(F,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Mp(T,F,q){return q&&q.internalChannelParams&&q.internalChannelParams[T]||F}function __(T){this.Aa=0,this.i=[],this.j=new ri,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Mp("failFast",!1,T),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Mp("baseRetryDelayMs",5e3,T),this.cb=Mp("retryDelaySeedMs",1e4,T),this.Wa=Mp("forwardChannelMaxRetries",2,T),this.wa=Mp("forwardChannelRequestTimeoutMs",2e4,T),this.pa=T&&T.xmlHttpFactory||void 0,this.Xa=T&&T.Tb||void 0,this.Ca=T&&T.useFetchStreams||!1,this.L=void 0,this.J=T&&T.supportsCrossDomainXhr||!1,this.K="",this.h=new Va(T&&T.concurrentRequestLimit),this.Da=new $5,this.P=T&&T.fastHandshake||!1,this.O=T&&T.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=T&&T.Rb||!1,T&&T.xa&&this.j.xa(),T&&T.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&T&&T.detectBufferingProxy||!1,this.ja=void 0,T&&T.longPollingTimeout&&0<T.longPollingTimeout&&(this.ja=T.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=__.prototype,e.la=8,e.G=1,e.connect=function(T,F,q,Q){wn(0),this.W=T,this.H=F||{},q&&Q!==void 0&&(this.H.OSID=q,this.H.OAID=Q),this.F=this.X,this.I=uoe(this,null,this.W),SP(this)};function w_(T){if(toe(T),T.G==3){var F=T.U++,q=et(T.I);if(Lt(q,"SID",T.K),Lt(q,"RID",F),Lt(q,"TYPE","terminate"),gT(T,q),F=new Qn(T,T.j,F),F.L=2,F.v=Jn(et(q)),q=!1,a.navigator&&a.navigator.sendBeacon)try{q=a.navigator.sendBeacon(F.v.toString(),"")}catch{}!q&&a.Image&&(new Image().src=F.v,q=!0),q||(F.g=coe(F.j,null),F.g.ea(F.v)),F.F=Date.now(),Ui(F)}loe(T)}function xP(T){T.g&&(F5(T),T.g.cancel(),T.g=null)}function toe(T){xP(T),T.u&&(a.clearTimeout(T.u),T.u=null),TP(T),T.h.cancel(),T.s&&(typeof T.s=="number"&&a.clearTimeout(T.s),T.s=null)}function SP(T){if(!uo(T.h)&&!T.s){T.s=!0;var F=T.Ga;B||O(),z||(B(),z=!0),U.add(F,T),T.B=0}}function uze(T,F){return gc(T.h)>=T.h.j-(T.s?1:0)?!1:T.s?(T.i=F.D.concat(T.i),!0):T.G==1||T.G==2||T.B>=(T.Va?0:T.Wa)?!1:(T.s=ni(f(T.Ga,T,F),aoe(T,T.B)),T.B++,!0)}e.Ga=function(T){if(this.s)if(this.s=null,this.G==1){if(!T){this.U=Math.floor(1e5*Math.random()),T=this.U++;const Te=new Qn(this,this.j,T);let $e=this.o;if(this.S&&($e?($e=C($e),R($e,this.S)):$e=this.S),this.m!==null||this.O||(Te.H=$e,$e=null),this.P)e:{for(var F=0,q=0;q<this.i.length;q++){t:{var Q=this.i[q];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(F+=Q,4096<F){F=q;break e}if(F===4096||q===this.i.length-1){F=q+1;break e}}F=1e3}else F=1e3;F=roe(this,Te,F),q=et(this.I),Lt(q,"RID",T),Lt(q,"CVER",22),this.D&&Lt(q,"X-HTTP-Session-Id",this.D),gT(this,q),$e&&(this.O?F="headers="+encodeURIComponent(String(EP($e)))+"&"+F:this.m&&re(q,this.m,$e)),Y(this.h,Te),this.Ua&&Lt(q,"TYPE","init"),this.P?(Lt(q,"$req",F),Lt(q,"SID","null"),Te.T=!0,Qt(Te,q,null)):Qt(Te,q,F),this.G=2}}else this.G==3&&(T?noe(this,T):this.i.length==0||uo(this.h)||noe(this))};function noe(T,F){var q;F?q=F.l:q=T.U++;const Q=et(T.I);Lt(Q,"SID",T.K),Lt(Q,"RID",q),Lt(Q,"AID",T.T),gT(T,Q),T.m&&T.o&&re(Q,T.m,T.o),q=new Qn(T,T.j,q,T.B+1),T.m===null&&(q.H=T.o),F&&(T.i=F.D.concat(T.i)),F=roe(T,q,1e3),q.I=Math.round(.5*T.wa)+Math.round(.5*T.wa*Math.random()),Y(T.h,q),Qt(q,Q,F)}function gT(T,F){T.H&&x(T.H,function(q,Q){Lt(F,Q,q)}),T.l&&ve({},function(q,Q){Lt(F,Q,q)})}function roe(T,F,q){q=Math.min(T.i.length,q);var Q=T.l?f(T.l.Na,T.l,T):null;e:{var Te=T.i;let $e=-1;for(;;){const yt=["count="+q];$e==-1?0<q?($e=Te[0].g,yt.push("ofs="+$e)):$e=0:yt.push("ofs="+$e);let ai=!0;for(let Io=0;Io<q;Io++){let Sr=Te[Io].g;const aa=Te[Io].map;if(Sr-=$e,0>Sr)$e=Math.max(0,Te[Io].g-100),ai=!1;else try{_P(aa,yt,"req"+Sr+"_")}catch{Q&&Q(aa)}}if(ai){Q=yt.join("&");break e}}}return T=T.i.splice(0,q),F.D=T,Q}function ioe(T){if(!T.g&&!T.u){T.Y=1;var F=T.Fa;B||O(),z||(B(),z=!0),U.add(F,T),T.v=0}}function L5(T){return T.g||T.u||3<=T.v?!1:(T.Y++,T.u=ni(f(T.Fa,T),aoe(T,T.v)),T.v++,!0)}e.Fa=function(){if(this.u=null,soe(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var T=2*this.R;this.j.info("BP detection timer enabled: "+T),this.A=ni(f(this.ab,this),T)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,wn(10),xP(this),soe(this))};function F5(T){T.A!=null&&(a.clearTimeout(T.A),T.A=null)}function soe(T){T.g=new Qn(T,T.j,"rpc",T.Y),T.m===null&&(T.g.H=T.o),T.g.O=0;var F=et(T.qa);Lt(F,"RID","rpc"),Lt(F,"SID",T.K),Lt(F,"AID",T.T),Lt(F,"CI",T.F?"0":"1"),!T.F&&T.ja&&Lt(F,"TO",T.ja),Lt(F,"TYPE","xmlhttp"),gT(T,F),T.m&&T.o&&re(F,T.m,T.o),T.L&&(T.g.I=T.L);var q=T.g;T=T.ia,q.L=1,q.v=Jn(et(F)),q.m=null,q.P=!0,br(q,T)}e.Za=function(){this.C!=null&&(this.C=null,xP(this),L5(this),wn(19))};function TP(T){T.C!=null&&(a.clearTimeout(T.C),T.C=null)}function ooe(T,F){var q=null;if(T.g==F){TP(T),F5(T),T.g=null;var Q=2}else if(qf(T.h,F))q=F.D,ce(T.h,F),Q=1;else return;if(T.G!=0){if(F.o)if(Q==1){q=F.m?F.m.length:0,F=Date.now()-F.F;var Te=T.B;Q=Ua(),Re(Q,new Lr(Q,q)),SP(T)}else ioe(T);else if(Te=F.s,Te==3||Te==0&&0<F.X||!(Q==1&&uze(T,F)||Q==2&&L5(T)))switch(q&&0<q.length&&(F=T.h,F.i=F.i.concat(q)),Te){case 1:Sv(T,5);break;case 4:Sv(T,10);break;case 3:Sv(T,6);break;default:Sv(T,2)}}}function aoe(T,F){let q=T.Ta+Math.floor(Math.random()*T.cb);return T.isActive()||(q*=2),q*F}function Sv(T,F){if(T.j.info("Error code "+F),F==2){var q=f(T.fb,T),Q=T.Xa;const Te=!Q;Q=new Ze(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ct(Q,"https"),Jn(Q),Te?bP(Q.toString(),q):Dp(Q.toString(),q)}else wn(2);T.G=0,T.l&&T.l.sa(F),loe(T),toe(T)}e.fb=function(T){T?(this.j.info("Successfully pinged google.com"),wn(2)):(this.j.info("Failed to ping google.com"),wn(1))};function loe(T){if(T.G=0,T.ka=[],T.l){const F=ee(T.h);(F.length!=0||T.i.length!=0)&&(g(T.ka,F),g(T.ka,T.i),T.h.i.length=0,m(T.i),T.i.length=0),T.l.ra()}}function uoe(T,F,q){var Q=q instanceof Ze?et(q):new Ze(q);if(Q.g!="")F&&(Q.g=F+"."+Q.g),It(Q,Q.s);else{var Te=a.location;Q=Te.protocol,F=F?F+"."+Te.hostname:Te.hostname,Te=+Te.port;var $e=new Ze(null);Q&&ct($e,Q),F&&($e.g=F),Te&&It($e,Te),q&&($e.l=q),Q=$e}return q=T.D,F=T.ya,q&&F&&Lt(Q,q,F),Lt(Q,"VER",T.la),gT(T,Q),Q}function coe(T,F,q){if(F&&!T.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=T.Ca&&!T.pa?new me(new _v({eb:q})):new me(T.pa),F.Ha(T.J),F}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function doe(){}e=doe.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function CP(){}CP.prototype.g=function(T,F){return new wu(T,F)};function wu(T,F){ye.call(this),this.g=new __(F),this.l=T,this.h=F&&F.messageUrlParams||null,T=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(T?T["X-WebChannel-Content-Type"]=F.messageContentType:T={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(T?T["X-WebChannel-Client-Profile"]=F.va:T={"X-WebChannel-Client-Profile":F.va}),this.g.S=T,(T=F&&F.Sb)&&!b(T)&&(this.g.m=T),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!b(F)&&(this.g.D=F,T=this.h,T!==null&&F in T&&(T=this.h,F in T&&delete T[F])),this.j=new E_(this)}p(wu,ye),wu.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},wu.prototype.close=function(){w_(this.g)},wu.prototype.o=function(T){var F=this.g;if(typeof T=="string"){var q={};q.__data__=T,T=q}else this.u&&(q={},q.__data__=Xt(T),T=q);F.i.push(new ia(F.Ya++,T)),F.G==3&&SP(F)},wu.prototype.N=function(){this.g.l=null,delete this.j,w_(this.g),delete this.g,wu.aa.N.call(this)};function foe(T){Un.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var F=T.__sm__;if(F){e:{for(const q in F){T=q;break e}T=void 0}(this.i=T)&&(T=this.i,F=F!==null&&T in F?F[T]:void 0),this.data=F}else this.data=T}p(foe,Un);function hoe(){Wn.call(this),this.status=1}p(hoe,Wn);function E_(T){this.g=T}p(E_,doe),E_.prototype.ua=function(){Re(this.g,"a")},E_.prototype.ta=function(T){Re(this.g,new foe(T))},E_.prototype.sa=function(T){Re(this.g,new hoe)},E_.prototype.ra=function(){Re(this.g,"b")},CP.prototype.createWebChannel=CP.prototype.g,wu.prototype.send=wu.prototype.o,wu.prototype.open=wu.prototype.m,wu.prototype.close=wu.prototype.close,DDe=function(){return new CP},ODe=function(){return Ua()},NDe=Qi,UH={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dt.NO_ERROR=0,dt.TIMEOUT=8,dt.HTTP_ERROR=6,_D=dt,Rt.COMPLETE="complete",PDe=Rt,Pi.EventType=zi,zi.OPEN="a",zi.CLOSE="b",zi.ERROR="c",zi.MESSAGE="d",ye.prototype.listen=ye.prototype.K,e2=Pi,RDe=_v,me.prototype.listenOnce=me.prototype.L,me.prototype.getLastError=me.prototype.Ka,me.prototype.getLastErrorCode=me.prototype.Ba,me.prototype.getStatus=me.prototype.Z,me.prototype.getResponseJson=me.prototype.Oa,me.prototype.getResponseText=me.prototype.oa,me.prototype.send=me.prototype.ea,me.prototype.setWithCredentials=me.prototype.Ha,kDe=me}).apply(typeof UN<"u"?UN:typeof self<"u"?self:typeof window<"u"?window:{});const ome="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}Nl.UNAUTHENTICATED=new Nl(null),Nl.GOOGLE_CREDENTIALS=new Nl("google-credentials-uid"),Nl.FIRST_PARTY=new Nl("first-party-uid"),Nl.MOCK_USER=new Nl("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let US="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vb=new l4("@firebase/firestore");function KT(){return vb.logLevel}function Dt(e,...t){if(vb.logLevel<=ar.DEBUG){const n=t.map(yee);vb.debug(`Firestore (${US}): ${e}`,...n)}}function Xm(e,...t){if(vb.logLevel<=ar.ERROR){const n=t.map(yee);vb.error(`Firestore (${US}): ${e}`,...n)}}function DI(e,...t){if(vb.logLevel<=ar.WARN){const n=t.map(yee);vb.warn(`Firestore (${US}): ${e}`,...n)}}function yee(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bn(e="Unexpected state"){const t=`FIRESTORE (${US}) INTERNAL ASSERTION FAILED: `+e;throw Xm(t),new Error(t)}function vi(e,t){e||bn()}function Cn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ye={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends bp{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L$t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class F$t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(Nl.UNAUTHENTICATED))}shutdown(){}}class j$t{constructor(t){this.t=t,this.currentUser=Nl.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let s=new Em;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Em,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const l=s;t.enqueueRetryable(async()=>{await l.promise,await i(this.currentUser)})},a=l=>{Dt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Dt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Em)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(Dt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vi(typeof r.accessToken=="string"),new L$t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return vi(t===null||typeof t=="string"),new Nl(t)}}class B$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=Nl.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class z$t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new B$t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(Nl.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class U$t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class V$t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&Dt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,Dt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{Dt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):Dt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(vi(typeof n.token=="string"),this.R=n.token,new U$t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H$t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MDe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=H$t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Dr(e,t){return e<t?-1:e>t?1:0}function _x(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Tt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Tt(Ye.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Tt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Tt(Ye.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return to.fromMillis(Date.now())}static fromDate(t){return to.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new to(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Dr(this.nanoseconds,t.nanoseconds):Dr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Tn(t)}static min(){return new Tn(new to(0,0))}static max(){return new Tn(new to(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(t,n,r){n===void 0?n=0:n>t.length&&bn(),r===void 0?r=t.length-n:r>t.length-n&&bn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return MI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof MI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class Ti extends MI{construct(t,n,r){return new Ti(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Tt(Ye.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Ti(n)}static emptyPath(){return new Ti([])}}const q$t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Uo extends MI{construct(t,n,r){return new Uo(t,n,r)}static isValidIdentifier(t){return q$t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Uo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Uo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Tt(Ye.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new Tt(Ye.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const l=t[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Tt(Ye.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new Tt(Ye.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Uo(n)}static emptyPath(){return new Uo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(t){this.path=t}static fromPath(t){return new Yt(Ti.fromString(t))}static fromName(t){return new Yt(Ti.fromString(t).popFirst(5))}static empty(){return new Yt(Ti.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ti.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ti.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Yt(new Ti(t.slice()))}}function W$t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Tn.fromTimestamp(r===1e9?new to(n+1,0):new to(n,r));return new wy(i,Yt.empty(),t)}function G$t(e){return new wy(e.readTime,e.key,-1)}class wy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new wy(Tn.min(),Yt.empty(),-1)}static max(){return new wy(Tn.max(),Yt.empty(),-1)}}function Y$t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Yt.comparator(e.documentKey,t.documentKey),n!==0?n:Dr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K$t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X$t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(e){if(e.code!==Ye.FAILED_PRECONDITION||e.message!==K$t)throw e;Dt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&bn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new rt((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof rt?n:rt.resolve(n)}catch(n){return rt.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):rt.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):rt.reject(n)}static resolve(t){return new rt((n,r)=>{n(t)})}static reject(t){return new rt((n,r)=>{r(t)})}static waitFor(t){return new rt((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},l=>r(l))}),o=!0,s===i&&n()})}static or(t){let n=rt.resolve(!1);for(const r of t)n=n.next(i=>i?rt.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new rt((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(t[u]).next(c=>{o[u]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new rt((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function Q$t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function xR(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vee{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}vee.oe=-1;function m4(e){return e==null}function I$(e){return e===0&&1/e==-1/0}function J$t(e){return typeof e=="number"&&Number.isInteger(e)&&!I$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ame(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function t_(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function $De(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(t,n){this.comparator=t,this.root=n||Fo.EMPTY}insert(t,n){return new Xi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Fo.BLACK,null,null))}remove(t){return new Xi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Fo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new VN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new VN(this.root,t,this.comparator,!1)}getReverseIterator(){return new VN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new VN(this.root,t,this.comparator,!0)}}class VN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Fo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Fo.RED,this.left=i??Fo.EMPTY,this.right=s??Fo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Fo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Fo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Fo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Fo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Fo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw bn();const t=this.left.check();if(t!==this.right.check())throw bn();return t+(this.isRed()?0:1)}}Fo.EMPTY=null,Fo.RED=!0,Fo.BLACK=!1;Fo.EMPTY=new class{constructor(){this.size=0}get key(){throw bn()}get value(){throw bn()}get color(){throw bn()}get left(){throw bn()}get right(){throw bn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Fo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go{constructor(t){this.comparator=t,this.data=new Xi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new lme(this.data.getIterator())}getIteratorFrom(t){return new lme(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Go)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Go(this.comparator);return n.data=t,n}}class lme{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ju{constructor(t){this.fields=t,t.sort(Uo.comparator)}static empty(){return new ju([])}unionWith(t){let n=new Go(Uo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new ju(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return _x(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LDe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new LDe("Invalid base64 string: "+s):s}}(t);return new La(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new La(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Dr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}La.EMPTY_BYTE_STRING=new La("");const Z$t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ey(e){if(vi(!!e),typeof e=="string"){let t=0;const n=Z$t.exec(e);if(vi(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ns(e.seconds),nanos:Ns(e.nanos)}}function Ns(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function bb(e){return typeof e=="string"?La.fromBase64String(e):La.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bee(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function _ee(e){const t=e.mapValue.fields.__previous_value__;return bee(t)?_ee(t):t}function $I(e){const t=Ey(e.mapValue.fields.__local_write_time__.timestampValue);return new to(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eLt{constructor(t,n,r,i,s,o,a,l,u){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class LI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new LI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof LI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _b(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?bee(e)?4:tLt(e)?9007199254740991:10:bn()}function ep(e,t){if(e===t)return!0;const n=_b(e);if(n!==_b(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return $I(e).isEqual($I(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Ey(i.timestampValue),a=Ey(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return bb(i.bytesValue).isEqual(bb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return Ns(i.geoPointValue.latitude)===Ns(s.geoPointValue.latitude)&&Ns(i.geoPointValue.longitude)===Ns(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Ns(i.integerValue)===Ns(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Ns(i.doubleValue),a=Ns(s.doubleValue);return o===a?I$(o)===I$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return _x(e.arrayValue.values||[],t.arrayValue.values||[],ep);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(ame(o)!==ame(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ep(o[l],a[l])))return!1;return!0}(e,t);default:return bn()}}function FI(e,t){return(e.values||[]).find(n=>ep(n,t))!==void 0}function wx(e,t){if(e===t)return 0;const n=_b(e),r=_b(t);if(n!==r)return Dr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Dr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=Ns(s.integerValue||s.doubleValue),l=Ns(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(e,t);case 3:return ume(e.timestampValue,t.timestampValue);case 4:return ume($I(e),$I(t));case 5:return Dr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=bb(s),l=bb(o);return a.compareTo(l)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const c=Dr(a[u],l[u]);if(c!==0)return c}return Dr(a.length,l.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Dr(Ns(s.latitude),Ns(o.latitude));return a!==0?a:Dr(Ns(s.longitude),Ns(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let u=0;u<a.length&&u<l.length;++u){const c=wx(a[u],l[u]);if(c)return c}return Dr(a.length,l.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===HN.mapValue&&o===HN.mapValue)return 0;if(s===HN.mapValue)return 1;if(o===HN.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},c=Object.keys(u);l.sort(),c.sort();for(let d=0;d<l.length&&d<c.length;++d){const f=Dr(l[d],c[d]);if(f!==0)return f;const h=wx(a[l[d]],u[c[d]]);if(h!==0)return h}return Dr(l.length,c.length)}(e.mapValue,t.mapValue);default:throw bn()}}function ume(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Dr(e,t);const n=Ey(e),r=Ey(t),i=Dr(n.seconds,r.seconds);return i!==0?i:Dr(n.nanos,r.nanos)}function Ex(e){return VH(e)}function VH(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=Ey(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return bb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Yt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=VH(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${VH(n.fields[o])}`;return i+"}"}(e.mapValue):bn()}function cme(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function HH(e){return!!e&&"integerValue"in e}function wee(e){return!!e&&"arrayValue"in e}function dme(e){return!!e&&"nullValue"in e}function fme(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function wD(e){return!!e&&"mapValue"in e}function oA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return t_(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=oA(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=oA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function tLt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(t){this.value=t}static empty(){return new Bl({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!wD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=oA(n)}setAll(t){let n=Uo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=oA(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());wD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return ep(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];wD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){t_(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Bl(oA(this.value))}}function FDe(e){const t=[];return t_(e.fields,(n,r)=>{const i=new Uo([n]);if(wD(r)){const s=FDe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new ju(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new Ta(t,0,Tn.min(),Tn.min(),Tn.min(),Bl.empty(),0)}static newFoundDocument(t,n,r,i){return new Ta(t,1,n,Tn.min(),r,i,0)}static newNoDocument(t,n){return new Ta(t,2,n,Tn.min(),Tn.min(),Bl.empty(),0)}static newUnknownDocument(t,n){return new Ta(t,3,n,Tn.min(),Tn.min(),Bl.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Tn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bl.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof Ta&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Ta(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let k$=class{constructor(t,n){this.position=t,this.inclusive=n}};function hme(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Yt.comparator(Yt.fromName(o.referenceValue),n.key):r=wx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function pme(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!ep(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t,n="asc"){this.field=t,this.dir=n}}function nLt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jDe=class{};class $s extends jDe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new iLt(t,n,r):n==="array-contains"?new aLt(t,r):n==="in"?new lLt(t,r):n==="not-in"?new uLt(t,r):n==="array-contains-any"?new cLt(t,r):new $s(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new sLt(t,r):new oLt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(wx(n,this.value)):n!==null&&_b(this.value)===_b(n)&&this.matchesComparison(wx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return bn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xf extends jDe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new xf(t,n)}matches(t){return BDe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function BDe(e){return e.op==="and"}function zDe(e){return rLt(e)&&BDe(e)}function rLt(e){for(const t of e.filters)if(t instanceof xf)return!1;return!0}function qH(e){if(e instanceof $s)return e.field.canonicalString()+e.op.toString()+Ex(e.value);if(zDe(e))return e.filters.map(t=>qH(t)).join(",");{const t=e.filters.map(n=>qH(n)).join(",");return`${e.op}(${t})`}}function UDe(e,t){return e instanceof $s?function(r,i){return i instanceof $s&&r.op===i.op&&r.field.isEqual(i.field)&&ep(r.value,i.value)}(e,t):e instanceof xf?function(r,i){return i instanceof xf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&UDe(o,i.filters[a]),!0):!1}(e,t):void bn()}function VDe(e){return e instanceof $s?function(n){return`${n.field.canonicalString()} ${n.op} ${Ex(n.value)}`}(e):e instanceof xf?function(n){return n.op.toString()+" {"+n.getFilters().map(VDe).join(" ,")+"}"}(e):"Filter"}class iLt extends $s{constructor(t,n,r){super(t,n,r),this.key=Yt.fromName(r.referenceValue)}matches(t){const n=Yt.comparator(t.key,this.key);return this.matchesComparison(n)}}class sLt extends $s{constructor(t,n){super(t,"in",n),this.keys=HDe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class oLt extends $s{constructor(t,n){super(t,"not-in",n),this.keys=HDe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function HDe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Yt.fromName(r.referenceValue))}class aLt extends $s{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return wee(n)&&FI(n.arrayValue,this.value)}}class lLt extends $s{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&FI(this.value.arrayValue,n)}}class uLt extends $s{constructor(t,n){super(t,"not-in",n)}matches(t){if(FI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!FI(this.value.arrayValue,n)}}class cLt extends $s{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!wee(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>FI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dLt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function mme(e,t=null,n=[],r=[],i=null,s=null,o=null){return new dLt(e,t,n,r,i,s,o)}function Eee(e){const t=Cn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>qH(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),m4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Ex(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Ex(r)).join(",")),t.ue=n}return t.ue}function xee(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!nLt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!UDe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!pme(e.startAt,t.startAt)&&pme(e.endAt,t.endAt)}function WH(e){return Yt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fLt(e,t,n,r,i,s,o,a){return new VS(e,t,n,r,i,s,o,a)}function See(e){return new VS(e)}function gme(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function qDe(e){return e.collectionGroup!==null}function aA(e){const t=Cn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Go(Uo.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new jI(s,r))}),n.has(Uo.keyField().canonicalString())||t.ce.push(new jI(Uo.keyField(),r))}return t.ce}function zh(e){const t=Cn(e);return t.le||(t.le=hLt(t,aA(e))),t.le}function hLt(e,t){if(e.limitType==="F")return mme(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new jI(i.field,s)});const n=e.endAt?new k$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new k$(e.startAt.position,e.startAt.inclusive):null;return mme(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function GH(e,t){const n=e.filters.concat([t]);return new VS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function YH(e,t,n){return new VS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function g4(e,t){return xee(zh(e),zh(t))&&e.limitType===t.limitType}function WDe(e){return`${Eee(zh(e))}|lt:${e.limitType}`}function pw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>VDe(i)).join(", ")}]`),m4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ex(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ex(i)).join(",")),`Target(${r})`}(zh(e))}; limitType=${e.limitType})`}function y4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Yt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of aA(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,l){const u=hme(o,a,l);return o.inclusive?u<=0:u<0}(r.startAt,aA(r),i)||r.endAt&&!function(o,a,l){const u=hme(o,a,l);return o.inclusive?u>=0:u>0}(r.endAt,aA(r),i))}(e,t)}function pLt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function GDe(e){return(t,n)=>{let r=!1;for(const i of aA(e)){const s=mLt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function mLt(e,t,n){const r=e.field.isKeyField()?Yt.comparator(t.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?wx(l,u):bn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return bn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){t_(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return $De(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gLt=new Xi(Yt.comparator);function Qm(){return gLt}const YDe=new Xi(Yt.comparator);function t2(...e){let t=YDe;for(const n of e)t=t.insert(n.key,n);return t}function KDe(e){let t=YDe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function I1(){return lA()}function XDe(){return lA()}function lA(){return new HS(e=>e.toString(),(e,t)=>e.isEqual(t))}const yLt=new Xi(Yt.comparator),vLt=new Go(Yt.comparator);function er(...e){let t=vLt;for(const n of e)t=t.add(n);return t}const bLt=new Go(Dr);function _Lt(){return bLt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QDe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:I$(t)?"-0":t}}function JDe(e){return{integerValue:""+e}}function wLt(e,t){return J$t(t)?JDe(t):QDe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this._=void 0}}function ELt(e,t,n){return e instanceof BI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&bee(s)&&(s=_ee(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof zI?eMe(e,t):e instanceof UI?tMe(e,t):function(i,s){const o=ZDe(i,s),a=yme(o)+yme(i.Pe);return HH(o)&&HH(i.Pe)?JDe(a):QDe(i.serializer,a)}(e,t)}function xLt(e,t,n){return e instanceof zI?eMe(e,t):e instanceof UI?tMe(e,t):n}function ZDe(e,t){return e instanceof R$?function(r){return HH(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class BI extends v4{}class zI extends v4{constructor(t){super(),this.elements=t}}function eMe(e,t){const n=nMe(t);for(const r of e.elements)n.some(i=>ep(i,r))||n.push(r);return{arrayValue:{values:n}}}class UI extends v4{constructor(t){super(),this.elements=t}}function tMe(e,t){let n=nMe(t);for(const r of e.elements)n=n.filter(i=>!ep(i,r));return{arrayValue:{values:n}}}class R$ extends v4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function yme(e){return Ns(e.integerValue||e.doubleValue)}function nMe(e){return wee(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SLt{constructor(t,n){this.field=t,this.transform=n}}function TLt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof zI&&i instanceof zI||r instanceof UI&&i instanceof UI?_x(r.elements,i.elements,ep):r instanceof R$&&i instanceof R$?ep(r.Pe,i.Pe):r instanceof BI&&i instanceof BI}(e.transform,t.transform)}class CLt{constructor(t,n){this.version=t,this.transformResults=n}}class eu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new eu}static exists(t){return new eu(void 0,t)}static updateTime(t){return new eu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ED(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class b4{}function rMe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new _4(e.key,eu.none()):new SR(e.key,e.data,eu.none());{const n=e.data,r=Bl.empty();let i=new Go(Uo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new iv(e.key,r,new ju(i.toArray()),eu.none())}}function ALt(e,t,n){e instanceof SR?function(i,s,o){const a=i.value.clone(),l=bme(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof iv?function(i,s,o){if(!ED(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=bme(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(iMe(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function uA(e,t,n,r){return e instanceof SR?function(s,o,a,l){if(!ED(s.precondition,o))return a;const u=s.value.clone(),c=_me(s.fieldTransforms,l,o);return u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(e,t,n,r):e instanceof iv?function(s,o,a,l){if(!ED(s.precondition,o))return a;const u=_me(s.fieldTransforms,l,o),c=o.data;return c.setAll(iMe(s)),c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(e,t,n,r):function(s,o,a){return ED(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function ILt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=ZDe(r.transform,i||null);s!=null&&(n===null&&(n=Bl.empty()),n.set(r.field,s))}return n||null}function vme(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_x(r,i,(s,o)=>TLt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class SR extends b4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class iv extends b4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function iMe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function bme(e,t,n){const r=new Map;vi(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,xLt(o,a,n[i]))}return r}function _me(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,ELt(s,o,t))}return r}class _4 extends b4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kLt extends b4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RLt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&ALt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=uA(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=uA(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=XDe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const l=rMe(o,a);l!==null&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Tn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),er())}isEqual(t){return this.batchId===t.batchId&&_x(this.mutations,t.mutations,(n,r)=>vme(n,r))&&_x(this.baseMutations,t.baseMutations,(n,r)=>vme(n,r))}}class Tee{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){vi(t.mutations.length===r.length);let i=function(){return yLt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Tee(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PLt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NLt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rs,fr;function OLt(e){switch(e){default:return bn();case Ye.CANCELLED:case Ye.UNKNOWN:case Ye.DEADLINE_EXCEEDED:case Ye.RESOURCE_EXHAUSTED:case Ye.INTERNAL:case Ye.UNAVAILABLE:case Ye.UNAUTHENTICATED:return!1;case Ye.INVALID_ARGUMENT:case Ye.NOT_FOUND:case Ye.ALREADY_EXISTS:case Ye.PERMISSION_DENIED:case Ye.FAILED_PRECONDITION:case Ye.ABORTED:case Ye.OUT_OF_RANGE:case Ye.UNIMPLEMENTED:case Ye.DATA_LOSS:return!0}}function sMe(e){if(e===void 0)return Xm("GRPC error has no .code"),Ye.UNKNOWN;switch(e){case Rs.OK:return Ye.OK;case Rs.CANCELLED:return Ye.CANCELLED;case Rs.UNKNOWN:return Ye.UNKNOWN;case Rs.DEADLINE_EXCEEDED:return Ye.DEADLINE_EXCEEDED;case Rs.RESOURCE_EXHAUSTED:return Ye.RESOURCE_EXHAUSTED;case Rs.INTERNAL:return Ye.INTERNAL;case Rs.UNAVAILABLE:return Ye.UNAVAILABLE;case Rs.UNAUTHENTICATED:return Ye.UNAUTHENTICATED;case Rs.INVALID_ARGUMENT:return Ye.INVALID_ARGUMENT;case Rs.NOT_FOUND:return Ye.NOT_FOUND;case Rs.ALREADY_EXISTS:return Ye.ALREADY_EXISTS;case Rs.PERMISSION_DENIED:return Ye.PERMISSION_DENIED;case Rs.FAILED_PRECONDITION:return Ye.FAILED_PRECONDITION;case Rs.ABORTED:return Ye.ABORTED;case Rs.OUT_OF_RANGE:return Ye.OUT_OF_RANGE;case Rs.UNIMPLEMENTED:return Ye.UNIMPLEMENTED;case Rs.DATA_LOSS:return Ye.DATA_LOSS;default:return bn()}}(fr=Rs||(Rs={}))[fr.OK=0]="OK",fr[fr.CANCELLED=1]="CANCELLED",fr[fr.UNKNOWN=2]="UNKNOWN",fr[fr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",fr[fr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",fr[fr.NOT_FOUND=5]="NOT_FOUND",fr[fr.ALREADY_EXISTS=6]="ALREADY_EXISTS",fr[fr.PERMISSION_DENIED=7]="PERMISSION_DENIED",fr[fr.UNAUTHENTICATED=16]="UNAUTHENTICATED",fr[fr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",fr[fr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",fr[fr.ABORTED=10]="ABORTED",fr[fr.OUT_OF_RANGE=11]="OUT_OF_RANGE",fr[fr.UNIMPLEMENTED=12]="UNIMPLEMENTED",fr[fr.INTERNAL=13]="INTERNAL",fr[fr.UNAVAILABLE=14]="UNAVAILABLE",fr[fr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DLt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MLt=new B1([4294967295,4294967295],0);function wme(e){const t=DLt().encode(e),n=new IDe;return n.update(t),new Uint8Array(n.digest())}function Eme(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new B1([n,r],0),new B1([i,s],0)]}class Cee{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new n2(`Invalid padding: ${n}`);if(r<0)throw new n2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new n2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new n2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=B1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(B1.fromNumber(r)));return i.compare(MLt)===1&&(i=new B1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=wme(t),[r,i]=Eme(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new Cee(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=wme(t),[r,i]=Eme(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class n2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,TR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new w4(Tn.min(),i,new Xi(Dr),Qm(),er())}}class TR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new TR(r,n,er(),er(),er())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class oMe{constructor(t,n){this.targetId=t,this.me=n}}class aMe{constructor(t,n,r=La.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class xme{constructor(){this.fe=0,this.ge=Tme(),this.pe=La.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=er(),n=er(),r=er();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:bn()}}),new TR(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Tme()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,vi(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $Lt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Qm(),this.qe=Sme(),this.Qe=new Xi(Dr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:bn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(WH(s))if(r===0){const o=new Yt(s.path);this.Ue(n,o,Ta.newNoDocument(o,Tn.min()))}else vi(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),l=a?this.Xe(a,t,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=bb(r).toUint8Array()}catch(l){if(l instanceof LDe)return DI("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Cee(o,i,s)}catch(l){return DI(l instanceof n2?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&WH(a.target)){const l=new Yt(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Ta.newNoDocument(l,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=er();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new w4(t,n,this.Qe,this.ke,r);return this.ke=Qm(),this.qe=Sme(),this.Qe=new Xi(Dr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new xme,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Go(Dr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||Dt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new xme),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Sme(){return new Xi(Yt.comparator)}function Tme(){return new Xi(Yt.comparator)}const LLt={asc:"ASCENDING",desc:"DESCENDING"},FLt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},jLt={and:"AND",or:"OR"};class BLt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function KH(e,t){return e.useProto3Json||m4(t)?t:{value:t}}function P$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function lMe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function zLt(e,t){return P$(e,t.toTimestamp())}function Uh(e){return vi(!!e),Tn.fromTimestamp(function(n){const r=Ey(n);return new to(r.seconds,r.nanos)}(e))}function Aee(e,t){return XH(e,t).canonicalString()}function XH(e,t){const n=function(i){return new Ti(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function uMe(e){const t=Ti.fromString(e);return vi(pMe(t)),t}function QH(e,t){return Aee(e.databaseId,t.path)}function E9(e,t){const n=uMe(t);if(n.get(1)!==e.databaseId.projectId)throw new Tt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Tt(Ye.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Yt(dMe(n))}function cMe(e,t){return Aee(e.databaseId,t)}function ULt(e){const t=uMe(e);return t.length===4?Ti.emptyPath():dMe(t)}function JH(e){return new Ti(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dMe(e){return vi(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Cme(e,t,n){return{name:QH(e,t),fields:n.value.mapValue.fields}}function VLt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:bn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(u,c){return u.useProto3Json?(vi(c===void 0||typeof c=="string"),La.fromBase64String(c||"")):(vi(c===void 0||c instanceof Buffer||c instanceof Uint8Array),La.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(u){const c=u.code===void 0?Ye.UNKNOWN:sMe(u.code);return new Tt(c,u.message||"")}(o);n=new aMe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=E9(e,r.document.name),s=Uh(r.document.updateTime),o=r.document.createTime?Uh(r.document.createTime):Tn.min(),a=new Bl({mapValue:{fields:r.document.fields}}),l=Ta.newFoundDocument(i,s,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new xD(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=E9(e,r.document),s=r.readTime?Uh(r.readTime):Tn.min(),o=Ta.newNoDocument(i,s),a=r.removedTargetIds||[];n=new xD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=E9(e,r.document),s=r.removedTargetIds||[];n=new xD([],s,i,null)}else{if(!("filter"in t))return bn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new NLt(i,s),a=r.targetId;n=new oMe(a,o)}}return n}function HLt(e,t){let n;if(t instanceof SR)n={update:Cme(e,t.key,t.value)};else if(t instanceof _4)n={delete:QH(e,t.key)};else if(t instanceof iv)n={update:Cme(e,t.key,t.data),updateMask:ZLt(t.fieldMask)};else{if(!(t instanceof kLt))return bn();n={verify:QH(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof BI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof zI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof UI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof R$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw bn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:zLt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:bn()}(e,t.precondition)),n}function qLt(e,t){return e&&e.length>0?(vi(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?Uh(i.updateTime):Uh(s);return o.isEqual(Tn.min())&&(o=Uh(s)),new CLt(o,i.transformResults||[])}(n,t))):[]}function WLt(e,t){return{documents:[cMe(e,t.path)]}}function GLt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=cMe(e,i);const s=function(u){if(u.length!==0)return hMe(xf.create(u,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(c=>function(f){return{field:mw(f.field),direction:XLt(f.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=KH(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(t.endAt)),{_t:n,parent:i}}function YLt(e){let t=ULt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){vi(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(d){const f=fMe(d);return f instanceof xf&&zDe(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(p){return new jI(gw(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,m4(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,h=d.values||[];return new k$(h,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,h=d.values||[];return new k$(h,f)}(n.endAt)),fLt(t,i,o,s,a,"F",l,u)}function KLt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return bn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function fMe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=gw(n.unaryFilter.field);return $s.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=gw(n.unaryFilter.field);return $s.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=gw(n.unaryFilter.field);return $s.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=gw(n.unaryFilter.field);return $s.create(o,"!=",{nullValue:"NULL_VALUE"});default:return bn()}}(e):e.fieldFilter!==void 0?function(n){return $s.create(gw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return bn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return xf.create(n.compositeFilter.filters.map(r=>fMe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return bn()}}(n.compositeFilter.op))}(e):bn()}function XLt(e){return LLt[e]}function QLt(e){return FLt[e]}function JLt(e){return jLt[e]}function mw(e){return{fieldPath:e.canonicalString()}}function gw(e){return Uo.fromServerFormat(e.fieldPath)}function hMe(e){return e instanceof $s?function(n){if(n.op==="=="){if(fme(n.value))return{unaryFilter:{field:mw(n.field),op:"IS_NAN"}};if(dme(n.value))return{unaryFilter:{field:mw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(fme(n.value))return{unaryFilter:{field:mw(n.field),op:"IS_NOT_NAN"}};if(dme(n.value))return{unaryFilter:{field:mw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:mw(n.field),op:QLt(n.op),value:n.value}}}(e):e instanceof xf?function(n){const r=n.getFilters().map(i=>hMe(i));return r.length===1?r[0]:{compositeFilter:{op:JLt(n.op),filters:r}}}(e):bn()}function ZLt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function pMe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g0{constructor(t,n,r,i,s=Tn.min(),o=Tn.min(),a=La.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new g0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new g0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new g0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new g0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eFt{constructor(t){this.ct=t}}function tFt(e){const t=YLt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?YH(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nFt{constructor(){this._n=new rFt}addToCollectionParentIndex(t,n){return this._n.add(n),rt.resolve()}getCollectionParents(t,n){return rt.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return rt.resolve()}deleteFieldIndex(t,n){return rt.resolve()}deleteAllFieldIndexes(t){return rt.resolve()}createTargetIndexes(t,n){return rt.resolve()}getDocumentsMatchingTarget(t,n){return rt.resolve(null)}getIndexType(t,n){return rt.resolve(0)}getFieldIndexes(t,n){return rt.resolve([])}getNextCollectionGroupToUpdate(t){return rt.resolve(null)}getMinOffset(t,n){return rt.resolve(wy.min())}getMinOffsetFromCollectionGroup(t,n){return rt.resolve(wy.min())}updateCollectionGroup(t,n,r){return rt.resolve()}updateIndexEntries(t,n){return rt.resolve()}}class rFt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Go(Ti.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Go(Ti.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new xx(0)}static Ln(){return new xx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iFt{constructor(){this.changes=new HS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,Ta.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?rt.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sFt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oFt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&uA(r.mutation,i,ju.empty(),to.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,er()).next(()=>r))}getLocalViewOfDocuments(t,n,r=er()){const i=I1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=t2();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=I1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,er()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Qm();const o=lA(),a=function(){return lA()}();return n.forEach((l,u)=>{const c=r.get(u.key);i.has(u.key)&&(c===void 0||c.mutation instanceof iv)?s=s.insert(u.key,u):c!==void 0?(o.set(u.key,c.mutation.getFieldMask()),uA(c.mutation,u,c.mutation.getFieldMask(),to.now())):o.set(u.key,ju.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var d;return a.set(u,new sFt(c,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(t,n){const r=lA();let i=new Xi((o,a)=>o-a),s=er();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||ju.empty();c=a.applyToLocalView(u,c),r.set(l,c);const d=(i.get(a.batchId)||er()).add(l);i=i.insert(a.batchId,d)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,d=XDe();c.forEach(f=>{if(!s.has(f)){const h=rMe(n.get(f),r.get(f));h!==null&&d.set(f,h),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(t,u,d))}return rt.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Yt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):qDe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):rt.resolve(I1());let a=-1,l=s;return o.next(u=>rt.forEach(u,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(c)?rt.resolve():this.remoteDocumentCache.getEntry(t,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(t,u,s)).next(()=>this.computeViews(t,l,u,er())).next(c=>({batchId:a,changes:KDe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Yt(n)).next(r=>{let i=t2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=t2();return this.indexManager.getCollectionParents(t,s).next(a=>rt.forEach(a,l=>{const u=function(d,f){return new VS(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,u,r,i).next(c=>{c.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((l,u)=>{const c=u.getKey();o.get(c)===null&&(o=o.insert(c,Ta.newInvalidDocument(c)))});let a=t2();return o.forEach((l,u)=>{const c=s.get(l);c!==void 0&&uA(c.mutation,u,ju.empty(),to.now()),y4(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aFt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return rt.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Uh(i.createTime)}}(n)),rt.resolve()}getNamedQuery(t,n){return rt.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:tFt(i.bundledQuery),readTime:Uh(i.readTime)}}(n)),rt.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lFt{constructor(){this.overlays=new Xi(Yt.comparator),this.hr=new Map}getOverlay(t,n){return rt.resolve(this.overlays.get(n))}getOverlays(t,n){const r=I1();return rt.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),rt.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),rt.resolve()}getOverlaysForCollection(t,n,r){const i=I1(),s=n.length+1,o=new Yt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return rt.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Xi((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=s.get(u.largestBatchId);c===null&&(c=I1(),s=s.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=I1(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=i)););return rt.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new PLt(n,r));let s=this.hr.get(n);s===void 0&&(s=er(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iee{constructor(){this.Pr=new Go(fo.Ir),this.Tr=new Go(fo.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new fo(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new fo(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Yt(new Ti([])),r=new fo(n,t),i=new fo(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Yt(new Ti([])),r=new fo(n,t),i=new fo(n,t+1);let s=er();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new fo(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class fo{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Yt.comparator(t.key,n.key)||Dr(t.pr,n.pr)}static Er(t,n){return Dr(t.pr,n.pr)||Yt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uFt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Go(fo.Ir)}checkEmpty(t){return rt.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new RLt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new fo(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return rt.resolve(o)}lookupMutationBatch(t,n){return rt.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return rt.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return rt.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new fo(n,0),i=new fo(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),rt.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Go(Dr);return n.forEach(i=>{const s=new fo(i,0),o=new fo(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),rt.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Yt.isDocumentKey(s)||(s=s.child(""));const o=new fo(new Yt(s),0);let a=new Go(Dr);return this.wr.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===i&&(a=a.add(l.pr)),!0)},o),rt.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){vi(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return rt.forEach(n.mutations,i=>{const s=new fo(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new fo(n,0),i=this.wr.firstAfterOrEqual(r);return rt.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,rt.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cFt{constructor(t){this.vr=t,this.docs=function(){return new Xi(Yt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return rt.resolve(r?r.document.mutableCopy():Ta.newInvalidDocument(n))}getEntries(t,n){let r=Qm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Ta.newInvalidDocument(i))}),rt.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Qm();const o=n.path,a=new Yt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:c}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||Y$t(G$t(c),r)<=0||(i.has(c.key)||y4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return rt.resolve(s)}getAllFromCollectionGroup(t,n,r,i){bn()}Fr(t,n){return rt.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new dFt(this)}getSize(t){return rt.resolve(this.size)}}class dFt extends iFt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),rt.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fFt{constructor(t){this.persistence=t,this.Mr=new HS(n=>Eee(n),xee),this.lastRemoteSnapshotVersion=Tn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Iee,this.targetCount=0,this.Lr=xx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),rt.resolve()}getLastRemoteSnapshotVersion(t){return rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return rt.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),rt.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),rt.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new xx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,rt.resolve()}updateTargetData(t,n){return this.qn(n),rt.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,rt.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),rt.waitFor(s).next(()=>i)}getTargetCount(t){return rt.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return rt.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),rt.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),rt.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),rt.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return rt.resolve(r)}containsKey(t,n){return rt.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hFt{constructor(t,n){this.Br={},this.overlays={},this.kr=new vee(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new fFt(this),this.indexManager=new nFt,this.remoteDocumentCache=function(i){return new cFt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new eFt(n),this.$r=new aFt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new lFt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new uFt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){Dt("MemoryPersistence","Starting transaction:",t);const i=new pFt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return rt.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class pFt extends X$t{constructor(t){super(),this.currentSequenceNumber=t}}class kee{constructor(t){this.persistence=t,this.zr=new Iee,this.jr=null}static Hr(t){return new kee(t)}get Jr(){if(this.jr)return this.jr;throw bn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),rt.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),rt.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),rt.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return rt.forEach(this.Jr,r=>{const i=Yt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,Tn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return rt.or([()=>rt.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ree{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=er(),i=er();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Ree(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mFt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gFt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return XNt()?8:Q$t(Zo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new mFt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(KT()<=ar.DEBUG&&Dt("QueryEngine","SDK will not create cache indexes for query:",pw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),rt.resolve()):(KT()<=ar.DEBUG&&Dt("QueryEngine","Query:",pw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(KT()<=ar.DEBUG&&Dt("QueryEngine","The SDK decides to create cache indexes for query:",pw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zh(n))):rt.resolve())}ji(t,n){if(gme(n))return rt.resolve(null);let r=zh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=YH(n,null,"F"),r=zh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=er(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(l=>{const u=this.Zi(n,a);return this.Xi(n,u,o,l.readTime)?this.ji(t,YH(n,null,"F")):this.es(t,u,n,l)}))})))}Hi(t,n,r,i){return gme(n)||i.isEqual(Tn.min())?rt.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?rt.resolve(null):(KT()<=ar.DEBUG&&Dt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),pw(n)),this.es(t,o,n,W$t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Go(GDe(t));return n.forEach((i,s)=>{y4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return KT()<=ar.DEBUG&&Dt("QueryEngine","Using full collection scan to execute query:",pw(n)),this.zi.getDocumentsMatchingQuery(t,n,wy.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yFt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Xi(Dr),this.rs=new HS(s=>Eee(s),xee),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new oFt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function vFt(e,t,n,r){return new yFt(e,t,n,r)}async function mMe(e,t){const n=Cn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=er();for(const u of i){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of s){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({us:u,removedBatchIds:o,addedBatchIds:a}))})})}function bFt(e,t){const n=Cn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,l,u,c){const d=u.batch,f=d.keys();let h=rt.resolve();return f.forEach(p=>{h=h.next(()=>c.getEntry(l,p)).next(m=>{const g=u.docVersions.get(p);vi(g!==null),m.version.compareTo(g)<0&&(d.applyToRemoteDocument(m,u),m.isValidDocument()&&(m.setReadTime(u.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=er();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function gMe(e){const t=Cn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function _Ft(e,t){const n=Cn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,d)=>{const f=i.get(d);if(!f)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,d)));let h=f.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(d)!==null?h=h.withResumeToken(La.EMPTY_BYTE_STRING,Tn.min()).withLastLimboFreeSnapshotVersion(Tn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(d,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(f,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let l=Qm(),u=er();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(wFt(s,o,t.documentUpdates).next(c=>{l=c.cs,u=c.ls})),!r.isEqual(Tn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(d=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return rt.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.ns=i,s))}function wFt(e,t,n){let r=er(),i=er();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Qm();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Tn.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):Dt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{cs:o,ls:i}})}function EFt(e,t){const n=Cn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function xFt(e,t){const n=Cn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,rt.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new g0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function ZH(e,t,n){const r=Cn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!xR(o))throw o;Dt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Ame(e,t,n){const r=Cn(e);let i=Tn.min(),s=er();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,c){const d=Cn(l),f=d.rs.get(c);return f!==void 0?rt.resolve(d.ns.get(f)):d.Qr.getTargetData(u,c)}(r,o,zh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:Tn.min(),n?s:er())).next(a=>(SFt(r,pLt(t),a),{documents:a,hs:s})))}function SFt(e,t,n){let r=e.ss.get(t)||Tn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Ime{constructor(){this.activeTargetIds=_Lt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class TFt{constructor(){this.no=new Ime,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Ime,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CFt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kme{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Dt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Dt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qN=null;function x9(){return qN===null?qN=function(){return 268435456+Math.round(2147483648*Math.random())}():qN++,"0x"+qN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AFt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IFt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ma="WebChannelConnection";class kFt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=x9(),l=this.vo(n,r.toUriEncodedString());Dt("RestConnection",`Sending RPC '${n}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(u,s,o),this.Mo(n,l,u,i).then(c=>(Dt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw DI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+US}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=AFt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=x9();return new Promise((o,a)=>{const l=new kDe;l.setWithCredentials(!0),l.listenOnce(PDe.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case _D.NO_ERROR:const c=l.getResponseJson();Dt(ma,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case _D.TIMEOUT:Dt(ma,`RPC '${t}' ${s} timed out`),a(new Tt(Ye.DEADLINE_EXCEEDED,"Request time out"));break;case _D.HTTP_ERROR:const d=l.getStatus();if(Dt(ma,`RPC '${t}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const h=f==null?void 0:f.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Ye).indexOf(y)>=0?y:Ye.UNKNOWN}(h.status);a(new Tt(p,h.message))}else a(new Tt(Ye.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Tt(Ye.UNAVAILABLE,"Connection failed."));break;default:bn()}}finally{Dt(ma,`RPC '${t}' ${s} completed.`)}});const u=JSON.stringify(i);Dt(ma,`RPC '${t}' ${s} sending request:`,i),l.send(n,"POST",u,r,15)})}Oo(t,n,r){const i=x9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=DDe(),a=ODe(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.xmlHttpFactory=new RDe({})),this.Fo(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const c=s.join("");Dt(ma,`Creating RPC '${t}' stream ${i}: ${c}`,l);const d=o.createWebChannel(c,l);let f=!1,h=!1;const p=new IFt({lo:g=>{h?Dt(ma,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(f||(Dt(ma,`Opening RPC '${t}' stream ${i} transport.`),d.open(),f=!0),Dt(ma,`RPC '${t}' stream ${i} sending:`,g),d.send(g))},ho:()=>d.close()}),m=(g,y,b)=>{g.listen(y,_=>{try{b(_)}catch(w){setTimeout(()=>{throw w},0)}})};return m(d,e2.EventType.OPEN,()=>{h||(Dt(ma,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(d,e2.EventType.CLOSE,()=>{h||(h=!0,Dt(ma,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(d,e2.EventType.ERROR,g=>{h||(h=!0,DI(ma,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new Tt(Ye.UNAVAILABLE,"The operation could not be completed")))}),m(d,e2.EventType.MESSAGE,g=>{var y;if(!h){const b=g.data[0];vi(!!b);const _=b,w=_.error||((y=_[0])===null||y===void 0?void 0:y.error);if(w){Dt(ma,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let x=function(A){const R=Rs[A];if(R!==void 0)return sMe(R)}(E),S=w.message;x===void 0&&(x=Ye.INTERNAL,S="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new Tt(x,S)),d.close()}else Dt(ma,`RPC '${t}' stream ${i} received:`,b),p.yo(b)}}),m(a,NDe.STAT_EVENT,g=>{g.stat===UH.PROXY?Dt(ma,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===UH.NOPROXY&&Dt(ma,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function S9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E4(e){return new BLt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yMe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&Dt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vMe{constructor(t,n,r,i,s,o,a,l){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new yMe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Ye.RESOURCE_EXHAUSTED?(Xm(n.toString()),Xm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Ye.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new Tt(Ye.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return Dt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(Dt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class RFt extends vMe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=VLt(this.serializer,t),r=function(s){if(!("targetChange"in s))return Tn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Tn.min():o.readTime?Uh(o.readTime):Tn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=JH(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=WH(l)?{documents:WLt(s,l)}:{query:GLt(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=lMe(s,o.resumeToken);const u=KH(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Tn.min())>0){a.readTime=P$(s,o.snapshotVersion.toTimestamp());const u=KH(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,t);const r=KLt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=JH(this.serializer),n.removeTarget=t,this.i_(n)}}class PFt extends vMe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(vi(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=qLt(t.writeResults,t.commitTime),r=Uh(t.commitTime);return this.listener.A_(r,n)}return vi(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=JH(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>HLt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NFt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new Tt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,XH(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Tt(Ye.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,XH(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ye.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Tt(Ye.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class OFt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Xm(n),this.y_=!1):Dt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DFt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{n_(this)&&(Dt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Cn(l);u.M_.add(4),await AR(u),u.N_.set("Unknown"),u.M_.delete(4),await CR(u)}(this))})}),this.N_=new OFt(r,i)}}async function CR(e){if(n_(e))for(const t of e.x_)await t(!0)}async function AR(e){for(const t of e.x_)await t(!1)}function bMe(e,t){const n=Cn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),Dee(n)?Oee(n):qS(n).Xo()&&Nee(n,t))}function Pee(e,t){const n=Cn(e),r=qS(n);n.F_.delete(t),r.Xo()&&_Me(n,t),n.F_.size===0&&(r.Xo()?r.n_():n_(n)&&n.N_.set("Unknown"))}function Nee(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}qS(e).P_(t)}function _Me(e,t){e.L_.xe(t),qS(e).I_(t)}function Oee(e){e.L_=new $Lt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),qS(e).start(),e.N_.w_()}function Dee(e){return n_(e)&&!qS(e).Zo()&&e.F_.size>0}function n_(e){return Cn(e).M_.size===0}function wMe(e){e.L_=void 0}async function MFt(e){e.N_.set("Online")}async function $Ft(e){e.F_.forEach((t,n)=>{Nee(e,t)})}async function LFt(e,t){wMe(e),Dee(e)?(e.N_.D_(t),Oee(e)):e.N_.set("Unknown")}async function FFt(e,t,n){if(e.N_.set("Online"),t instanceof aMe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){Dt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await N$(e,r)}else if(t instanceof xD?e.L_.Ke(t):t instanceof oMe?e.L_.He(t):e.L_.We(t),!n.isEqual(Tn.min()))try{const r=await gMe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const c=s.F_.get(u);c&&s.F_.set(u,c.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const c=s.F_.get(l);if(!c)return;s.F_.set(l,c.withResumeToken(La.EMPTY_BYTE_STRING,c.snapshotVersion)),_Me(s,l);const d=new g0(c.target,l,u,c.sequenceNumber);Nee(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){Dt("RemoteStore","Failed to raise snapshot:",r),await N$(e,r)}}async function N$(e,t,n){if(!xR(t))throw t;e.M_.add(1),await AR(e),e.N_.set("Offline"),n||(n=()=>gMe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Dt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await CR(e)})}function EMe(e,t){return t().catch(n=>N$(e,n,t))}async function x4(e){const t=Cn(e),n=xy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;jFt(t);)try{const i=await EFt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,BFt(t,i)}catch(i){await N$(t,i)}xMe(t)&&SMe(t)}function jFt(e){return n_(e)&&e.v_.length<10}function BFt(e,t){e.v_.push(t);const n=xy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function xMe(e){return n_(e)&&!xy(e).Zo()&&e.v_.length>0}function SMe(e){xy(e).start()}async function zFt(e){xy(e).V_()}async function UFt(e){const t=xy(e);for(const n of e.v_)t.d_(n.mutations)}async function VFt(e,t,n){const r=e.v_.shift(),i=Tee.from(r,t,n);await EMe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await x4(e)}async function HFt(e,t){t&&xy(e).E_&&await async function(r,i){if(function(o){return OLt(o)&&o!==Ye.ABORTED}(i.code)){const s=r.v_.shift();xy(r).t_(),await EMe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await x4(r)}}(e,t),xMe(e)&&SMe(e)}async function Rme(e,t){const n=Cn(e);n.asyncQueue.verifyOperationInProgress(),Dt("RemoteStore","RemoteStore received new credentials");const r=n_(n);n.M_.add(3),await AR(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await CR(n)}async function qFt(e,t){const n=Cn(e);t?(n.M_.delete(2),await CR(n)):t||(n.M_.add(2),await AR(n),n.N_.set("Unknown"))}function qS(e){return e.B_||(e.B_=function(n,r,i){const s=Cn(n);return s.f_(),new RFt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:MFt.bind(null,e),To:$Ft.bind(null,e),Ao:LFt.bind(null,e),h_:FFt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),Dee(e)?Oee(e):e.N_.set("Unknown")):(await e.B_.stop(),wMe(e))})),e.B_}function xy(e){return e.k_||(e.k_=function(n,r,i){const s=Cn(n);return s.f_(),new PFt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:zFt.bind(null,e),Ao:HFt.bind(null,e),R_:UFt.bind(null,e),A_:VFt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await x4(e)):(await e.k_.stop(),e.v_.length>0&&(Dt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mee{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Em,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new Mee(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Tt(Ye.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $ee(e,t){if(Xm("AsyncQueue",`${t}: ${e}`),xR(e))return new Tt(Ye.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Yt.comparator(n.key,r.key):(n,r)=>Yt.comparator(n.key,r.key),this.keyedMap=t2(),this.sortedSet=new Xi(this.comparator)}static emptySet(t){return new EE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof EE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new EE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pme{constructor(){this.q_=new Xi(Yt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):bn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class Sx{constructor(t,n,r,i,s,o,a,l,u){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Sx(t,n,EE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&g4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WFt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class GFt{constructor(){this.queries=new HS(t=>WDe(t),g4),this.onlineState="Unknown",this.z_=new Set}}async function TMe(e,t){const n=Cn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new WFt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=$ee(o,`Initialization of query '${pw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&Lee(n)}async function CMe(e,t){const n=Cn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function YFt(e,t){const n=Cn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&Lee(n)}function KFt(e,t,n){const r=Cn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function Lee(e){e.z_.forEach(t=>{t.next()})}var eq,Nme;(Nme=eq||(eq={})).J_="default",Nme.Cache="cache";class AMe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new Sx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=Sx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==eq.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IMe{constructor(t){this.key=t}}class kMe{constructor(t){this.key=t}}class XFt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=er(),this.mutatedKeys=er(),this.Ia=GDe(t),this.Ta=new EE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Pme,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,u=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,d)=>{const f=i.get(c),h=y4(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;f&&h?f.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(f,h)||(r.track({type:2,doc:h}),g=!0,(l&&this.Ia(h,l)>0||u&&this.Ia(h,u)<0)&&(a=!0)):!f&&h?(r.track({type:0,doc:h}),g=!0):f&&!h&&(r.track({type:1,doc:f}),g=!0,(l||u)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,d)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return bn()}};return m(h)-m(p)}(c.type,d.type)||this.Ia(c.doc,d.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],l=this.Pa.size===0&&this.current&&!i?1:0,u=l!==this.ha;return this.ha=l,o.length!==0||u?{snapshot:new Sx(this.query,t.Ta,s,o,t.mutatedKeys,l===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Pme,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=er(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new kMe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new IMe(r))}),n}pa(t){this.la=t.hs,this.Pa=er();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return Sx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class QFt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class JFt{constructor(t){this.key=t,this.wa=!1}}class ZFt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new HS(a=>WDe(a),g4),this.Da=new Map,this.Ca=new Set,this.va=new Xi(Yt.comparator),this.Fa=new Map,this.Ma=new Iee,this.xa={},this.Oa=new Map,this.Na=xx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function e6t(e,t,n=!0){const r=MMe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await RMe(r,t,n,!0),i}async function t6t(e,t){const n=MMe(e);await RMe(n,t,!0,!1)}async function RMe(e,t,n,r){const i=await xFt(e.localStore,zh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await n6t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&bMe(e.remoteStore,i),a}async function n6t(e,t,n,r,i){e.Ba=(d,f,h)=>async function(m,g,y,b){let _=g.view.da(y);_.Xi&&(_=await Ame(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,_)));const w=b&&b.targetChanges.get(g.targetId),E=b&&b.targetMismatches.get(g.targetId)!=null,x=g.view.applyChanges(_,m.isPrimaryClient,w,E);return Dme(m,g.targetId,x.fa),x.snapshot}(e,d,f,h);const s=await Ame(e.localStore,t,!0),o=new XFt(t,s.hs),a=o.da(s.documents),l=TR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),u=o.applyChanges(a,e.isPrimaryClient,l);Dme(e,n,u.fa);const c=new QFt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),u.snapshot}async function r6t(e,t,n){const r=Cn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!g4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await ZH(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Pee(r.remoteStore,i.targetId),tq(r,i.targetId)}).catch(ER)):(tq(r,i.targetId),await ZH(r.localStore,i.targetId,!0))}async function i6t(e,t){const n=Cn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pee(n.remoteStore,r.targetId))}async function s6t(e,t,n){const r=f6t(e);try{const i=await function(o,a){const l=Cn(o),u=to.now(),c=a.reduce((h,p)=>h.add(p.key),er());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Qm(),m=er();return l.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,b)=>{b.isValidDocument()||(m=m.add(y))})}).next(()=>l.localDocuments.getOverlayedDocuments(h,p)).next(g=>{d=g;const y=[];for(const b of a){const _=ILt(b,d.get(b.key).overlayedDocument);_!=null&&y.push(new iv(b.key,_,FDe(_.value.mapValue),eu.exists(!0)))}return l.mutationQueue.addMutationBatch(h,u,y,a)}).next(g=>{f=g;const y=g.applyToLocalDocumentSet(d,m);return l.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:f.batchId,changes:KDe(d)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let u=o.xa[o.currentUser.toKey()];u||(u=new Xi(Dr)),u=u.insert(a,l),o.xa[o.currentUser.toKey()]=u}(r,i.batchId,n),await IR(r,i.changes),await x4(r.remoteStore)}catch(i){const s=$ee(i,"Failed to persist write");n.reject(s)}}async function PMe(e,t){const n=Cn(e);try{const r=await _Ft(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(vi(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?vi(o.wa):i.removedDocuments.size>0&&(vi(o.wa),o.wa=!1))}),await IR(n,r,t)}catch(r){await ER(r)}}function Ome(e,t,n){const r=Cn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=Cn(o);l.onlineState=a;let u=!1;l.queries.forEach((c,d)=>{for(const f of d.U_)f.j_(a)&&(u=!0)}),u&&Lee(l)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function o6t(e,t,n){const r=Cn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Xi(Yt.comparator);o=o.insert(s,Ta.newNoDocument(s,Tn.min()));const a=er().add(s),l=new w4(Tn.min(),new Map,new Xi(Dr),o,a);await PMe(r,l),r.va=r.va.remove(s),r.Fa.delete(t),Fee(r)}else await ZH(r.localStore,t,!1).then(()=>tq(r,t,n)).catch(ER)}async function a6t(e,t){const n=Cn(e),r=t.batch.batchId;try{const i=await bFt(n.localStore,t);OMe(n,r,null),NMe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await IR(n,i)}catch(i){await ER(i)}}async function l6t(e,t,n){const r=Cn(e);try{const i=await function(o,a){const l=Cn(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let c;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(vi(d!==null),c=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,c,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,c)).next(()=>l.localDocuments.getDocuments(u,c))})}(r.localStore,t);OMe(r,t,n),NMe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await IR(r,i)}catch(i){await ER(i)}}function NMe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function OMe(e,t,n){const r=Cn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function tq(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||DMe(e,r)})}function DMe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(Pee(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),Fee(e))}function Dme(e,t,n){for(const r of n)r instanceof IMe?(e.Ma.addReference(r.key,t),u6t(e,r)):r instanceof kMe?(Dt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||DMe(e,r.key)):bn()}function u6t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(Dt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),Fee(e))}function Fee(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Yt(Ti.fromString(t)),r=e.Na.next();e.Fa.set(r,new JFt(n)),e.va=e.va.insert(n,r),bMe(e.remoteStore,new g0(zh(See(n.path)),r,"TargetPurposeLimboResolution",vee.oe))}}async function IR(e,t,n){const r=Cn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,l)=>{o.push(r.Ba(l,t,n).then(u=>{var c;if((u||n)&&r.isPrimaryClient){const d=u?!u.fromCache:(c=n==null?void 0:n.targetChanges.get(l.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){i.push(u);const d=Ree.Ki(l.targetId,u);s.push(d)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(l,u){const c=Cn(l);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>rt.forEach(u,f=>rt.forEach(f.qi,h=>c.persistence.referenceDelegate.addReference(d,f.targetId,h)).next(()=>rt.forEach(f.Qi,h=>c.persistence.referenceDelegate.removeReference(d,f.targetId,h)))))}catch(d){if(!xR(d))throw d;Dt("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const h=c.ns.get(f),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(f,m)}}}(r.localStore,s))}async function c6t(e,t){const n=Cn(e);if(!n.currentUser.isEqual(t)){Dt("SyncEngine","User change. New user:",t.toKey());const r=await mMe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(l=>{l.reject(new Tt(Ye.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await IR(n,r.us)}}function d6t(e,t){const n=Cn(e),r=n.Fa.get(t);if(r&&r.wa)return er().add(r.key);{let i=er();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function MMe(e){const t=Cn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=PMe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=d6t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=o6t.bind(null,t),t.Sa.h_=YFt.bind(null,t.eventManager),t.Sa.ka=KFt.bind(null,t.eventManager),t}function f6t(e){const t=Cn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=a6t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=l6t.bind(null,t),t}class Mme{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=E4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return vFt(this.persistence,new gFt,t.initialUser,this.serializer)}createPersistence(t){return new hFt(kee.Hr,this.serializer)}createSharedClientState(t){return new TFt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class h6t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ome(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=c6t.bind(null,this.syncEngine),await qFt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new GFt}()}createDatastore(t){const n=E4(t.databaseInfo.databaseId),r=function(s){return new kFt(s)}(t.databaseInfo);return function(s,o,a,l){return new NFt(s,o,a,l)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new DFt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Ome(this.syncEngine,n,0),function(){return kme.D()?new kme:new CFt}())}createSyncEngine(t,n){return function(i,s,o,a,l,u,c){const d=new ZFt(i,s,o,a,l,u);return c&&(d.La=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=Cn(r);Dt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await AR(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Me{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Xm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nl.UNAUTHENTICATED,this.clientId=MDe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{Dt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(Dt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Tt(Ye.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Em;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=$ee(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function T9(e,t){e.asyncQueue.verifyOperationInProgress(),Dt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await mMe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function $me(e,t){e.asyncQueue.verifyOperationInProgress();const n=await LMe(e);Dt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Rme(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Rme(t.remoteStore,i)),e._onlineComponents=t}function m6t(e){return e.name==="FirebaseError"?e.code===Ye.FAILED_PRECONDITION||e.code===Ye.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function LMe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Dt("FirestoreClient","Using user provided OfflineComponentProvider");try{await T9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!m6t(n))throw n;DI("Error using user provided cache. Falling back to memory cache: "+n),await T9(e,new Mme)}}else Dt("FirestoreClient","Using default OfflineComponentProvider"),await T9(e,new Mme);return e._offlineComponents}async function jee(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Dt("FirestoreClient","Using user provided OnlineComponentProvider"),await $me(e,e._uninitializedComponentsProvider._online)):(Dt("FirestoreClient","Using default OnlineComponentProvider"),await $me(e,new h6t))),e._onlineComponents}function g6t(e){return LMe(e).then(t=>t.persistence)}function y6t(e){return jee(e).then(t=>t.remoteStore)}function v6t(e){return jee(e).then(t=>t.syncEngine)}async function FMe(e){const t=await jee(e),n=t.eventManager;return n.onListen=e6t.bind(null,t.syncEngine),n.onUnlisten=r6t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=t6t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=i6t.bind(null,t.syncEngine),n}function b6t(e){return e.asyncQueue.enqueue(async()=>{const t=await g6t(e),n=await y6t(e);return t.setNetworkEnabled(!0),function(i){const s=Cn(i);return s.M_.delete(0),CR(s)}(n)})}function _6t(e,t,n={}){const r=new Em;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new $Me({next:f=>{o.enqueueAndForget(()=>CMe(s,d));const h=f.docs.has(a);!h&&f.fromCache?u.reject(new Tt(Ye.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&f.fromCache&&l&&l.source==="server"?u.reject(new Tt(Ye.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new AMe(See(a.path),c,{includeMetadataChanges:!0,ra:!0});return TMe(s,d)}(await FMe(e),e.asyncQueue,t,n,r)),r.promise}function w6t(e,t,n={}){const r=new Em;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,u){const c=new $Me({next:f=>{o.enqueueAndForget(()=>CMe(s,d)),f.fromCache&&l.source==="server"?u.reject(new Tt(Ye.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(f)},error:f=>u.reject(f)}),d=new AMe(a,c,{includeMetadataChanges:!0,ra:!0});return TMe(s,d)}(await FMe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jMe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lme=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BMe(e,t,n){if(!n)throw new Tt(Ye.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function E6t(e,t,n,r){if(t===!0&&r===!0)throw new Tt(Ye.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Fme(e){if(!Yt.isDocumentKey(e))throw new Tt(Ye.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function jme(e){if(Yt.isDocumentKey(e))throw new Tt(Ye.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function S4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":bn()}function Sf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Tt(Ye.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=S4(e);throw new Tt(Ye.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bme{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Tt(Ye.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Tt(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}E6t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=jMe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new Tt(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new Tt(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new Tt(Ye.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Bee{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Bme({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Tt(Ye.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new Tt(Ye.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Bme(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new F$t;switch(r.type){case"firstParty":return new z$t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Tt(Ye.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Lme.get(n);r&&(Dt("ComponentProvider","Removing Datastore"),Lme.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new r_(this.firestore,t,this._query)}}class ll{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new q0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new ll(this.firestore,t,this._key)}}class q0 extends r_{constructor(t,n,r){super(t,n,See(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new ll(this.firestore,null,new Yt(t))}withConverter(t){return new q0(this.firestore,t,this._path)}}function xd(e,t,...n){if(e=bi(e),BMe("collection","path",t),e instanceof Bee){const r=Ti.fromString(t,...n);return jme(r),new q0(e,null,r)}{if(!(e instanceof ll||e instanceof q0))throw new Tt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ti.fromString(t,...n));return jme(r),new q0(e.firestore,null,r)}}function Bs(e,t,...n){if(e=bi(e),arguments.length===1&&(t=MDe.newId()),BMe("doc","path",t),e instanceof Bee){const r=Ti.fromString(t,...n);return Fme(r),new ll(e,null,new Yt(r))}{if(!(e instanceof ll||e instanceof q0))throw new Tt(Ye.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Ti.fromString(t,...n));return Fme(r),new ll(e.firestore,e instanceof q0?e.converter:null,new Yt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new yMe(this,"async_queue_retry"),this.hu=()=>{const n=S9();n&&Dt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=S9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=S9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Em;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!xR(t))throw t;Dt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Xm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=Mee.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&bn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class sv extends Bee{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new x6t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||zMe(this),this._firestoreClient.terminate()}}function S6t(e,t,n){n||(n="(default)");const r=BS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(PI(s,t))return i;throw new Tt(Ye.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new Tt(Ye.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new Tt(Ye.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function kR(e){return e._firestoreClient||zMe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function zMe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,l,u,c){return new eLt(a,l,u,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,jMe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new p6t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function T6t(e){return b6t(kR(e=Sf(e,sv)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Tx(La.fromBase64String(t))}catch(n){throw new Tt(Ye.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Tx(La.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Tt(Ye.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Uo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zee=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Tt(Ye.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Tt(Ye.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Dr(this._lat,t._lat)||Dr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C6t=/^__.*__$/;class A6t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new iv(t,this.data,this.fieldMask,n,this.fieldTransforms):new SR(t,this.data,n,this.fieldTransforms)}}class UMe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new iv(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function VMe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw bn()}}class Uee{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new Uee(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return O$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(VMe(this.fu)&&C6t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class I6t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||E4(t)}Fu(t,n,r,i=!1){return new Uee({fu:t,methodName:n,vu:r,path:Uo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function C4(e){const t=e._freezeSettings(),n=E4(e._databaseId);return new I6t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function HMe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);Hee("Data must be an object, but it was:",o,r);const a=GMe(r,o);let l,u;if(s.merge)l=new ju(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const d of s.mergeFields){const f=nq(t,d,n);if(!o.contains(f))throw new Tt(Ye.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);KMe(c,f)||c.push(f)}l=new ju(c),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new A6t(new Bl(a),l,u)}class A4 extends T4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof A4}}class Vee extends T4{_toFieldTransform(t){return new SLt(t.path,new BI)}isEqual(t){return t instanceof Vee}}function qMe(e,t,n,r){const i=e.Fu(1,t,n);Hee("Data must be an object, but it was:",i,r);const s=[],o=Bl.empty();t_(r,(l,u)=>{const c=qee(t,l,n);u=bi(u);const d=i.Su(c);if(u instanceof A4)s.push(c);else{const f=PR(u,d);f!=null&&(s.push(c),o.set(c,f))}});const a=new ju(s);return new UMe(o,a,i.fieldTransforms)}function WMe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[nq(t,r,n)],l=[i];if(s.length%2!=0)throw new Tt(Ye.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(nq(t,s[f])),l.push(s[f+1]);const u=[],c=Bl.empty();for(let f=a.length-1;f>=0;--f)if(!KMe(u,a[f])){const h=a[f];let p=l[f];p=bi(p);const m=o.Su(h);if(p instanceof A4)u.push(h);else{const g=PR(p,m);g!=null&&(u.push(h),c.set(h,g))}}const d=new ju(u);return new UMe(c,d,o.fieldTransforms)}function k6t(e,t,n,r=!1){return PR(n,e.Fu(r?4:3,t))}function PR(e,t){if(YMe(e=bi(e)))return Hee("Unsupported field value:",t,e),GMe(e,t);if(e instanceof T4)return function(r,i){if(!VMe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=PR(a,i.bu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=bi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wLt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=to.fromDate(r);return{timestampValue:P$(i.serializer,s)}}if(r instanceof to){const s=new to(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:P$(i.serializer,s)}}if(r instanceof zee)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tx)return{bytesValue:lMe(i.serializer,r._byteString)};if(r instanceof ll){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Aee(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${S4(r)}`)}(e,t)}function GMe(e,t){const n={};return $De(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):t_(e,(r,i)=>{const s=PR(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function YMe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof to||e instanceof zee||e instanceof Tx||e instanceof ll||e instanceof T4)}function Hee(e,t,n){if(!YMe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=S4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function nq(e,t,n){if((t=bi(t))instanceof RR)return t._internalPath;if(typeof t=="string")return qee(e,t);throw O$("Field path arguments must be of type string or ",e,!1,void 0,n)}const R6t=new RegExp("[~\\*/\\[\\]]");function qee(e,t,n){if(t.search(R6t)>=0)throw O$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new RR(...t.split("."))._internalPath}catch{throw O$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function O$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new Tt(Ye.INVALID_ARGUMENT,a+e+l)}function KMe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XMe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ll(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new P6t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(I4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class P6t extends XMe{data(){return super.data()}}function I4(e,t){return typeof t=="string"?qee(e,t):t instanceof RR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Tt(Ye.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wee{}class QMe extends Wee{}function zme(e,t,...n){let r=[];t instanceof Wee&&r.push(t),r=r.concat(n),function(s){const o=s.filter(l=>l instanceof Gee).length,a=s.filter(l=>l instanceof k4).length;if(o>1||o>0&&a>0)throw new Tt(Ye.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class k4 extends QMe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new k4(t,n,r)}_apply(t){const n=this._parse(t);return JMe(t._query,n),new r_(t.firestore,t.converter,GH(t._query,n))}_parse(t){const n=C4(t.firestore);return function(s,o,a,l,u,c,d){let f;if(u.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new Tt(Ye.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Vme(d,c);const h=[];for(const p of d)h.push(Ume(l,s,p));f={arrayValue:{values:h}}}else f=Ume(l,s,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Vme(d,c),f=k6t(a,o,d,c==="in"||c==="not-in");return $s.create(u,c,f)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function O6t(e,t,n){const r=t,i=I4("where",e);return k4._create(i,r,n)}class Gee extends Wee{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Gee(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)JMe(o,l),o=GH(o,l)}(t._query,n),new r_(t.firestore,t.converter,GH(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Yee extends QMe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Yee(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new Tt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new Tt(Ye.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new jI(s,o)}(t._query,this._field,this._direction);return new r_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new VS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function D6t(e,t="asc"){const n=t,r=I4("orderBy",e);return Yee._create(r,n)}function Ume(e,t,n){if(typeof(n=bi(n))=="string"){if(n==="")throw new Tt(Ye.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qDe(t)&&n.indexOf("/")!==-1)throw new Tt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Ti.fromString(n));if(!Yt.isDocumentKey(r))throw new Tt(Ye.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return cme(e,new Yt(r))}if(n instanceof ll)return cme(e,n._key);throw new Tt(Ye.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${S4(n)}.`)}function Vme(e,t){if(!Array.isArray(e)||e.length===0)throw new Tt(Ye.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function JMe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Tt(Ye.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Tt(Ye.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class M6t{convertValue(t,n="none"){switch(_b(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ns(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(bb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw bn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return t_(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new zee(Ns(t.latitude),Ns(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=_ee(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($I(t));default:return null}}convertTimestamp(t){const n=Ey(t);return new to(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Ti.fromString(t);vi(pMe(r));const i=new LI(r.get(1),r.get(3)),s=new Yt(r.popFirst(5));return i.isEqual(n)||Xm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZMe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class e3e extends XMe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new SD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(I4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class SD extends e3e{data(t={}){return super.data(t)}}class $6t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new r2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new SD(this._firestore,this._userDataWriter,r.key,r,new r2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Tt(Ye.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const l=new SD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new r2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new SD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new r2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let u=-1,c=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:L6t(a.type),doc:l,oldIndex:u,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function L6t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return bn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C9(e){e=Sf(e,ll);const t=Sf(e.firestore,sv);return _6t(kR(t),e._key).then(n=>B6t(t,e,n))}class t3e extends M6t{constructor(t){super(),this.firestore=t}convertBytes(t){return new Tx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new ll(this.firestore,null,n)}}function XT(e){e=Sf(e,r_);const t=Sf(e.firestore,sv),n=kR(t),r=new t3e(t);return N6t(e._query),w6t(n,e._query).then(i=>new $6t(t,r,e,i))}function Eu(e,t,n){e=Sf(e,ll);const r=Sf(e.firestore,sv),i=ZMe(e.converter,t,n);return R4(r,[HMe(C4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,eu.none())])}function F6t(e,t,n,...r){e=Sf(e,ll);const i=Sf(e.firestore,sv),s=C4(i);let o;return o=typeof(t=bi(t))=="string"||t instanceof RR?WMe(s,"updateDoc",e._key,t,n,r):qMe(s,"updateDoc",e._key,t),R4(i,[o.toMutation(e._key,eu.exists(!0))])}function j6t(e){return R4(Sf(e.firestore,sv),[new _4(e._key,eu.none())])}function R4(e,t){return function(r,i){const s=new Em;return r.asyncQueue.enqueueAndForget(async()=>s6t(await v6t(r),i,s)),s.promise}(kR(e),t)}function B6t(e,t,n){const r=n.docs.get(t._key),i=new t3e(e);return new e3e(e,i,t._key,r,new r2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z6t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=C4(t)}set(t,n,r){this._verifyNotCommitted();const i=A9(t,this._firestore),s=ZMe(i.converter,n,r),o=HMe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,eu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=A9(t,this._firestore);let o;return o=typeof(n=bi(n))=="string"||n instanceof RR?WMe(this._dataReader,"WriteBatch.update",s._key,n,r,i):qMe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,eu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=A9(t,this._firestore);return this._mutations=this._mutations.concat(new _4(n._key,eu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tt(Ye.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function A9(e,t){if((e=bi(e)).firestore!==t)throw new Tt(Ye.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function U6t(){return new Vee("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hme(e){return kR(e=Sf(e,sv)),new z6t(e,t=>R4(e,t))}(function(t,n=!0){(function(i){US=i})(e_),Ym(new Jh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new sv(new j$t(r.getProvider("auth-internal")),new V$t(r.getProvider("app-check-internal")),function(u,c){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Tt(Ye.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new LI(u.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),cf(ome,"4.6.4",t),cf(ome,"4.6.4","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rq=new Map,n3e={activated:!1,tokenObservers:[]},V6t={initialized:!1,enabled:!1};function no(e){return rq.get(e)||Object.assign({},n3e)}function H6t(e,t){return rq.set(e,t),rq.get(e)}function P4(){return V6t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3e="https://content-firebaseappcheck.googleapis.com/v1",q6t="exchangeRecaptchaV3Token",W6t="exchangeDebugToken",qme={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},G6t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y6t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new RI,this.pending.promise.catch(n=>{}),await K6t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new RI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function K6t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X6t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Wl=new jS("appCheck","AppCheck",X6t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wme(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Kee(e){if(!no(e).activated)throw Wl.create("use-before-activation",{appName:e.name})}function i3e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=WN(n)+"d:"),r&&(o+=WN(r)+"h:"),o+=WN(i)+"m:"+WN(s)+"s",o}function WN(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xee({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&(r["X-Firebase-Client"]=d)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(d){throw Wl.create("fetch-network-error",{originalErrorMessage:d==null?void 0:d.message})}if(o.status!==200)throw Wl.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(d){throw Wl.create("fetch-parse-error",{originalErrorMessage:d==null?void 0:d.message})}const l=a.ttl.match(/^([\d.]+)(s)$/);if(!l||!l[2]||isNaN(Number(l[1])))throw Wl.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=Number(l[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+u,issuedAtTimeMillis:c}}function Q6t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${r3e}/projects/${n}/apps/${r}:${q6t}?key=${i}`,body:{recaptcha_v3_token:t}}}function s3e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${r3e}/projects/${n}/apps/${r}:${W6t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J6t="firebase-app-check-database",Z6t=1,VI="firebase-app-check-store",o3e="debug-token";let GN=null;function a3e(){return GN||(GN=new Promise((e,t)=>{try{const n=indexedDB.open(J6t,Z6t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Wl.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(VI,{keyPath:"compositeKey"})}}}catch(n){t(Wl.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),GN)}function e4t(e){return u3e(c3e(e))}function t4t(e,t){return l3e(c3e(e),t)}function n4t(e){return l3e(o3e,e)}function r4t(){return u3e(o3e)}async function l3e(e,t){const r=(await a3e()).transaction(VI,"readwrite"),s=r.objectStore(VI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},r.onerror=l=>{var u;a(Wl.create("storage-set",{originalErrorMessage:(u=l.target.error)===null||u===void 0?void 0:u.message}))}})}async function u3e(e){const n=(await a3e()).transaction(VI,"readonly"),i=n.objectStore(VI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const l=a.target.result;s(l?l.value:void 0)},n.onerror=a=>{var l;o(Wl.create("storage-get",{originalErrorMessage:(l=a.target.error)===null||l===void 0?void 0:l.message}))}})}function c3e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HI=new l4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4t(e){if(JZ()){let t;try{t=await e4t(e)}catch(n){HI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function I9(e,t){return JZ()?t4t(e,t).catch(n=>{HI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function s4t(){let e;try{e=await r4t()}catch{}if(e)return e;{const t=sOt();return n4t(t).catch(n=>HI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qee(){return P4().enabled}async function Jee(){const e=P4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function o4t(){const e=AOe(),t=P4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new RI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(s4t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a4t={error:"UNKNOWN_ERROR"};function l4t(e){return QZ.encodeString(JSON.stringify(e),!1)}async function iq(e,t=!1){const n=e.app;Kee(n);const r=no(n);let i=r.token,s;if(i&&!Bw(i)&&(r.token=void 0,i=void 0),!i){const l=await r.cachedTokenPromise;l&&(Bw(l)?i=l:await I9(n,void 0))}if(!t&&i&&Bw(i))return{token:i.token};let o=!1;if(Qee()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Xee(s3e(n,await Jee()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const l=await r.exchangeTokenPromise;return await I9(n,l),r.token=l,{token:l.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await no(n).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?HI.warn(l.message):HI.error(l),s=l}let a;return i?s?Bw(i)?a={token:i.token,internalError:s}:a=Yme(s):(a={token:i.token},r.token=i,await I9(n,i)):a=Yme(s),o&&h3e(n,a),a}async function u4t(e){const t=e.app;Kee(t);const{provider:n}=no(t);if(Qee()){const r=await Jee(),{token:i}=await Xee(s3e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function d3e(e,t,n,r){const{app:i}=e,s=no(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Bw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Gme(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Gme(e))}function f3e(e,t){const n=no(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Gme(e){const{app:t}=e,n=no(t);let r=n.tokenRefresher;r||(r=c4t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function c4t(e){const{app:t}=e;return new Y6t(async()=>{const n=no(t);let r;if(n.token?r=await iq(e,!0):r=await iq(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=no(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},qme.RETRIAL_MIN_WAIT,qme.RETRIAL_MAX_WAIT)}function h3e(e,t){const n=no(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Bw(e){return e.expireTimeMillis-Date.now()>0}function Yme(e){return{token:l4t(a4t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=no(this.app);for(const n of t)f3e(this.app,n.next);return Promise.resolve()}}function f4t(e,t){return new d4t(e,t)}function h4t(e){return{getToken:t=>iq(e,t),getLimitedUseToken:()=>u4t(e),addTokenListener:t=>d3e(e,"INTERNAL",t),removeTokenListener:t=>f3e(e.app,t)}}const p4t="@firebase/app-check",m4t="0.8.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4t="https://www.google.com/recaptcha/api.js";function y4t(e,t){const n=new RI,r=no(e);r.reCAPTCHAState={initialized:n};const i=v4t(e),s=Wme(!1);return s?Kme(e,t,s,i,n):w4t(()=>{const o=Wme(!1);if(!o)throw new Error("no recaptcha");Kme(e,t,o,i,n)}),n.promise}function Kme(e,t,n,r,i){n.ready(()=>{_4t(e,t,n,r),i.resolve(n)})}function v4t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function b4t(e){Kee(e);const n=await no(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=no(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function _4t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{no(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{no(e).reCAPTCHAState.succeeded=!1}}),s=no(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function w4t(e){const t=document.createElement("script");t.src=g4t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zee{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;x4t(this._throttleData);const i=await b4t(this._app).catch(o=>{throw Wl.create("recaptcha-error")});if(!(!((t=no(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Wl.create("recaptcha-error");let s;try{s=await Xee(Q6t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=E4t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Wl.create("throttled",{time:i3e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=BS(t,"heartbeat"),y4t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Zee?this._siteKey===t._siteKey:!1}}function E4t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+G6t,httpStatus:e};{const n=t?t.backoffCount:0,r=cOt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function x4t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Wl.create("throttled",{time:i3e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S4t(e=eee(),t){e=bi(e);const n=BS(e,"app-check");if(P4().initialized||o4t(),Qee()&&Jee().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Wl.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return T4t(e,t.provider,t.isTokenAutoRefreshEnabled),no(e).isTokenAutoRefreshEnabled&&d3e(r,"INTERNAL",()=>{}),r}function T4t(e,t,n){const r=H6t(e,Object.assign({},n3e));r.activated=!0,r.provider=t,r.cachedTokenPromise=i4t(e).then(i=>(i&&Bw(i)&&(r.token=i,h3e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const C4t="app-check",Xme="app-check-internal";function A4t(){Ym(new Jh(C4t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return f4t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Xme).initialize()})),Ym(new Jh(Xme,e=>{const t=e.getProvider("app-check").getImmediate();return h4t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),cf(p4t,m4t)}A4t();function YN(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var p3e={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(u,c){if(!i[u]){if(!r[u]){var d=typeof YN=="function"&&YN;if(!c&&d)return d(u,!0);if(a)return a(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var h=i[u]={exports:{}};r[u][0].call(h.exports,function(p){var m=r[u][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[u].exports}for(var a=typeof YN=="function"&&YN,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var l=0,u=new o(p),c=s.document.createTextNode("");u.observe(c,{characterData:!0}),a=function(){c.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var d=new s.MessageChannel;d.port1.onmessage=p,a=function(){d.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var f,h=[];function p(){f=!0;for(var g,y,b=h.length;b;){for(y=h,h=[],g=-1;++g<b;)y[g]();b=h.length}f=!1}r.exports=m;function m(g){h.push(g)===1&&!f&&a()}}).call(this,typeof Ks<"u"?Ks:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];r.exports=d;function d(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}d.prototype.catch=function(E){return this.then(null,E)},d.prototype.then=function(E,x){if(typeof E!="function"&&this.state===u||typeof x!="function"&&this.state===l)return this;var S=new this.constructor(o);if(this.state!==c){var C=this.state===u?E:x;h(S,C,this.outcome)}else this.queue.push(new f(S,E,x));return S};function f(E,x,S){this.promise=E,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},f.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},f.prototype.callRejected=function(E){a.reject(this.promise,E)},f.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,x,S){s(function(){var C;try{C=x(S)}catch(A){return a.reject(E,A)}C===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,C)})}a.resolve=function(E,x){var S=g(p,x);if(S.status==="error")return a.reject(E,S.value);var C=S.value;if(C)m(E,C);else{E.state=u,E.outcome=x;for(var A=-1,R=E.queue.length;++A<R;)E.queue[A].callFulfilled(x)}return E},a.reject=function(E,x){E.state=l,E.outcome=x;for(var S=-1,C=E.queue.length;++S<C;)E.queue[S].callRejected(x);return E};function p(E){var x=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof x=="function")return function(){x.apply(E,arguments)}}function m(E,x){var S=!1;function C(L){S||(S=!0,a.reject(E,L))}function A(L){S||(S=!0,a.resolve(E,L))}function R(){x(A,C)}var P=g(R);P.status==="error"&&C(P.value)}function g(E,x){var S={};try{S.value=E(x),S.status="success"}catch(C){S.status="error",S.value=C}return S}d.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}d.reject=b;function b(E){var x=new this(o);return a.reject(x,E)}d.all=_;function _(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,C=!1;if(!S)return this.resolve([]);for(var A=new Array(S),R=0,P=-1,L=new this(o);++P<S;)k(E[P],P);return L;function k($,D){x.resolve($).then(M,function(B){C||(C=!0,a.reject(L,B))});function M(B){A[D]=B,++R===S&&!C&&(C=!0,a.resolve(L,A))}}}d.race=w;function w(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,C=!1;if(!S)return this.resolve([]);for(var A=-1,R=new this(o);++A<S;)P(E[A]);return R;function P(L){x.resolve(L).then(function(k){C||(C=!0,a.resolve(R,k))},function(k){C||(C=!0,a.reject(R,k))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Ks<"u"?Ks:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,ce){if(!(Y instanceof ce))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=a();function u(){try{if(!l||!l.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ce=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||ce)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,ce){Y=Y||[],ce=ce||{};try{return new Blob(Y,ce)}catch(ve){if(ve.name!=="TypeError")throw ve;for(var ee=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,be=new ee,_e=0;_e<Y.length;_e+=1)be.append(Y[_e]);return be.getBlob(ce.type)}}typeof Promise>"u"&&n(3);var d=Promise;function f(Y,ce){ce&&Y.then(function(ee){ce(null,ee)},function(ee){ce(ee)})}function h(Y,ce,ee){typeof ce=="function"&&Y.then(ce),typeof ee=="function"&&Y.catch(ee)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,b={},_=Object.prototype.toString,w="readonly",E="readwrite";function x(Y){for(var ce=Y.length,ee=new ArrayBuffer(ce),be=new Uint8Array(ee),_e=0;_e<ce;_e++)be[_e]=Y.charCodeAt(_e);return ee}function S(Y){return new d(function(ce){var ee=Y.transaction(g,E),be=c([""]);ee.objectStore(g).put(be,"key"),ee.onabort=function(_e){_e.preventDefault(),_e.stopPropagation(),ce(!1)},ee.oncomplete=function(){var _e=navigator.userAgent.match(/Chrome\/(\d+)/),ve=navigator.userAgent.match(/Edge\//);ce(ve||!_e||parseInt(_e[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?d.resolve(y):S(Y).then(function(ce){return y=ce,y})}function A(Y){var ce=b[Y.name],ee={};ee.promise=new d(function(be,_e){ee.resolve=be,ee.reject=_e}),ce.deferredOperations.push(ee),ce.dbReady?ce.dbReady=ce.dbReady.then(function(){return ee.promise}):ce.dbReady=ee.promise}function R(Y){var ce=b[Y.name],ee=ce.deferredOperations.pop();if(ee)return ee.resolve(),ee.promise}function P(Y,ce){var ee=b[Y.name],be=ee.deferredOperations.pop();if(be)return be.reject(ce),be.promise}function L(Y,ce){return new d(function(ee,be){if(b[Y.name]=b[Y.name]||W(),Y.db)if(ce)A(Y),Y.db.close();else return ee(Y.db);var _e=[Y.name];ce&&_e.push(Y.version);var ve=l.open.apply(l,_e);ce&&(ve.onupgradeneeded=function(Be){var Je=ve.result;try{Je.createObjectStore(Y.storeName),Be.oldVersion<=1&&Je.createObjectStore(g)}catch(Ze){if(Ze.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Be.oldVersion+" to version "+Be.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw Ze}}),ve.onerror=function(Be){Be.preventDefault(),be(ve.error)},ve.onsuccess=function(){var Be=ve.result;Be.onversionchange=function(Je){Je.target.close()},ee(Be),R(Y)}})}function k(Y){return L(Y,!1)}function $(Y){return L(Y,!0)}function D(Y,ce){if(!Y.db)return!0;var ee=!Y.db.objectStoreNames.contains(Y.storeName),be=Y.version<Y.db.version,_e=Y.version>Y.db.version;if(be&&(Y.version!==ce&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),_e||ee){if(ee){var ve=Y.db.version+1;ve>Y.version&&(Y.version=ve)}return!0}return!1}function M(Y){return new d(function(ce,ee){var be=new FileReader;be.onerror=ee,be.onloadend=function(_e){var ve=btoa(_e.target.result||"");ce({__local_forage_encoded_blob:!0,data:ve,type:Y.type})},be.readAsBinaryString(Y)})}function B(Y){var ce=x(atob(Y.data));return c([ce],{type:Y.type})}function z(Y){return Y&&Y.__local_forage_encoded_blob}function U(Y){var ce=this,ee=ce._initReady().then(function(){var be=b[ce._dbInfo.name];if(be&&be.dbReady)return be.dbReady});return h(ee,Y,Y),ee}function O(Y){A(Y);for(var ce=b[Y.name],ee=ce.forages,be=0;be<ee.length;be++){var _e=ee[be];_e._dbInfo.db&&(_e._dbInfo.db.close(),_e._dbInfo.db=null)}return Y.db=null,k(Y).then(function(ve){return Y.db=ve,D(Y)?$(Y):ve}).then(function(ve){Y.db=ce.db=ve;for(var Be=0;Be<ee.length;Be++)ee[Be]._dbInfo.db=ve}).catch(function(ve){throw P(Y,ve),ve})}function V(Y,ce,ee,be){be===void 0&&(be=1);try{var _e=Y.db.transaction(Y.storeName,ce);ee(null,_e)}catch(ve){if(be>0&&(!Y.db||ve.name==="InvalidStateError"||ve.name==="NotFoundError"))return d.resolve().then(function(){if(!Y.db||ve.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return O(Y).then(function(){V(Y,ce,ee,be-1)})}).catch(ee);ee(ve)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var ce=this,ee={db:null};if(Y)for(var be in Y)ee[be]=Y[be];var _e=b[ee.name];_e||(_e=W(),b[ee.name]=_e),_e.forages.push(ce),ce._initReady||(ce._initReady=ce.ready,ce.ready=U);var ve=[];function Be(){return d.resolve()}for(var Je=0;Je<_e.forages.length;Je++){var Ze=_e.forages[Je];Ze!==ce&&ve.push(Ze._initReady().catch(Be))}var et=_e.forages.slice(0);return d.all(ve).then(function(){return ee.db=_e.db,k(ee)}).then(function(ct){return ee.db=ct,D(ee,ce._defaultConfig.version)?$(ee):ct}).then(function(ct){ee.db=_e.db=ct,ce._dbInfo=ee;for(var It=0;It<et.length;It++){var kn=et[It];kn!==ce&&(kn._dbInfo.db=ee.db,kn._dbInfo.version=ee.version)}})}function H(Y,ce){var ee=this;Y=p(Y);var be=new d(function(_e,ve){ee.ready().then(function(){V(ee._dbInfo,w,function(Be,Je){if(Be)return ve(Be);try{var Ze=Je.objectStore(ee._dbInfo.storeName),et=Ze.get(Y);et.onsuccess=function(){var ct=et.result;ct===void 0&&(ct=null),z(ct)&&(ct=B(ct)),_e(ct)},et.onerror=function(){ve(et.error)}}catch(ct){ve(ct)}})}).catch(ve)});return f(be,ce),be}function G(Y,ce){var ee=this,be=new d(function(_e,ve){ee.ready().then(function(){V(ee._dbInfo,w,function(Be,Je){if(Be)return ve(Be);try{var Ze=Je.objectStore(ee._dbInfo.storeName),et=Ze.openCursor(),ct=1;et.onsuccess=function(){var It=et.result;if(It){var kn=It.value;z(kn)&&(kn=B(kn));var Lt=Y(kn,It.key,ct++);Lt!==void 0?_e(Lt):It.continue()}else _e()},et.onerror=function(){ve(et.error)}}catch(It){ve(It)}})}).catch(ve)});return f(be,ce),be}function J(Y,ce,ee){var be=this;Y=p(Y);var _e=new d(function(ve,Be){var Je;be.ready().then(function(){return Je=be._dbInfo,_.call(ce)==="[object Blob]"?C(Je.db).then(function(Ze){return Ze?ce:M(ce)}):ce}).then(function(Ze){V(be._dbInfo,E,function(et,ct){if(et)return Be(et);try{var It=ct.objectStore(be._dbInfo.storeName);Ze===null&&(Ze=void 0);var kn=It.put(Ze,Y);ct.oncomplete=function(){Ze===void 0&&(Ze=null),ve(Ze)},ct.onabort=ct.onerror=function(){var Lt=kn.error?kn.error:kn.transaction.error;Be(Lt)}}catch(Lt){Be(Lt)}})}).catch(Be)});return f(_e,ee),_e}function se(Y,ce){var ee=this;Y=p(Y);var be=new d(function(_e,ve){ee.ready().then(function(){V(ee._dbInfo,E,function(Be,Je){if(Be)return ve(Be);try{var Ze=Je.objectStore(ee._dbInfo.storeName),et=Ze.delete(Y);Je.oncomplete=function(){_e()},Je.onerror=function(){ve(et.error)},Je.onabort=function(){var ct=et.error?et.error:et.transaction.error;ve(ct)}}catch(ct){ve(ct)}})}).catch(ve)});return f(be,ce),be}function ie(Y){var ce=this,ee=new d(function(be,_e){ce.ready().then(function(){V(ce._dbInfo,E,function(ve,Be){if(ve)return _e(ve);try{var Je=Be.objectStore(ce._dbInfo.storeName),Ze=Je.clear();Be.oncomplete=function(){be()},Be.onabort=Be.onerror=function(){var et=Ze.error?Ze.error:Ze.transaction.error;_e(et)}}catch(et){_e(et)}})}).catch(_e)});return f(ee,Y),ee}function ne(Y){var ce=this,ee=new d(function(be,_e){ce.ready().then(function(){V(ce._dbInfo,w,function(ve,Be){if(ve)return _e(ve);try{var Je=Be.objectStore(ce._dbInfo.storeName),Ze=Je.count();Ze.onsuccess=function(){be(Ze.result)},Ze.onerror=function(){_e(Ze.error)}}catch(et){_e(et)}})}).catch(_e)});return f(ee,Y),ee}function ue(Y,ce){var ee=this,be=new d(function(_e,ve){if(Y<0){_e(null);return}ee.ready().then(function(){V(ee._dbInfo,w,function(Be,Je){if(Be)return ve(Be);try{var Ze=Je.objectStore(ee._dbInfo.storeName),et=!1,ct=Ze.openKeyCursor();ct.onsuccess=function(){var It=ct.result;if(!It){_e(null);return}Y===0||et?_e(It.key):(et=!0,It.advance(Y))},ct.onerror=function(){ve(ct.error)}}catch(It){ve(It)}})}).catch(ve)});return f(be,ce),be}function xe(Y){var ce=this,ee=new d(function(be,_e){ce.ready().then(function(){V(ce._dbInfo,w,function(ve,Be){if(ve)return _e(ve);try{var Je=Be.objectStore(ce._dbInfo.storeName),Ze=Je.openKeyCursor(),et=[];Ze.onsuccess=function(){var ct=Ze.result;if(!ct){be(et);return}et.push(ct.key),ct.continue()},Ze.onerror=function(){_e(Ze.error)}}catch(ct){_e(ct)}})}).catch(_e)});return f(ee,Y),ee}function de(Y,ce){ce=m.apply(this,arguments);var ee=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName);var be=this,_e;if(!Y.name)_e=d.reject("Invalid arguments");else{var ve=Y.name===ee.name&&be._dbInfo.db,Be=ve?d.resolve(be._dbInfo.db):k(Y).then(function(Je){var Ze=b[Y.name],et=Ze.forages;Ze.db=Je;for(var ct=0;ct<et.length;ct++)et[ct]._dbInfo.db=Je;return Je});Y.storeName?_e=Be.then(function(Je){if(Je.objectStoreNames.contains(Y.storeName)){var Ze=Je.version+1;A(Y);var et=b[Y.name],ct=et.forages;Je.close();for(var It=0;It<ct.length;It++){var kn=ct[It];kn._dbInfo.db=null,kn._dbInfo.version=Ze}var Lt=new d(function(Jn,Hr){var qr=l.open(Y.name,Ze);qr.onerror=function(sa){var Wf=qr.result;Wf.close(),Hr(sa)},qr.onupgradeneeded=function(){var sa=qr.result;sa.deleteObjectStore(Y.storeName)},qr.onsuccess=function(){var sa=qr.result;sa.close(),Jn(sa)}});return Lt.then(function(Jn){et.db=Jn;for(var Hr=0;Hr<ct.length;Hr++){var qr=ct[Hr];qr._dbInfo.db=Jn,R(qr._dbInfo)}}).catch(function(Jn){throw(P(Y,Jn)||d.resolve()).catch(function(){}),Jn})}}):_e=Be.then(function(Je){A(Y);var Ze=b[Y.name],et=Ze.forages;Je.close();for(var ct=0;ct<et.length;ct++){var It=et[ct];It._dbInfo.db=null}var kn=new d(function(Lt,Jn){var Hr=l.deleteDatabase(Y.name);Hr.onerror=function(){var qr=Hr.result;qr&&qr.close(),Jn(Hr.error)},Hr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Hr.onsuccess=function(){var qr=Hr.result;qr&&qr.close(),Lt(qr)}});return kn.then(function(Lt){Ze.db=Lt;for(var Jn=0;Jn<et.length;Jn++){var Hr=et[Jn];R(Hr._dbInfo)}}).catch(function(Lt){throw(P(Y,Lt)||d.resolve()).catch(function(){}),Lt})})}return f(_e,ce),_e}var Ke={_driver:"asyncStorage",_initStorage:j,_support:u(),iterate:G,getItem:H,setItem:J,removeItem:se,clear:ie,length:ne,key:ue,keys:xe,dropInstance:de};function je(){return typeof openDatabase=="function"}var Oe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fe="~~local_forage_type~",Ae=/^~~local_forage_type~([^~]+)~/,fe="__lfsc__:",Pe=fe.length,He="arbf",ft="blob",Ee="si08",he="ui08",Ue="uic8",nt="si16",ye="si32",Re="ur16",Ge="ui32",Qe="fl32",xt="fl64",An=Pe+He.length,gr=Object.prototype.toString;function yr(Y){var ce=Y.length*.75,ee=Y.length,be,_e=0,ve,Be,Je,Ze;Y[Y.length-1]==="="&&(ce--,Y[Y.length-2]==="="&&ce--);var et=new ArrayBuffer(ce),ct=new Uint8Array(et);for(be=0;be<ee;be+=4)ve=Oe.indexOf(Y[be]),Be=Oe.indexOf(Y[be+1]),Je=Oe.indexOf(Y[be+2]),Ze=Oe.indexOf(Y[be+3]),ct[_e++]=ve<<2|Be>>4,ct[_e++]=(Be&15)<<4|Je>>2,ct[_e++]=(Je&3)<<6|Ze&63;return et}function Nr(Y){var ce=new Uint8Array(Y),ee="",be;for(be=0;be<ce.length;be+=3)ee+=Oe[ce[be]>>2],ee+=Oe[(ce[be]&3)<<4|ce[be+1]>>4],ee+=Oe[(ce[be+1]&15)<<2|ce[be+2]>>6],ee+=Oe[ce[be+2]&63];return ce.length%3===2?ee=ee.substring(0,ee.length-1)+"=":ce.length%3===1&&(ee=ee.substring(0,ee.length-2)+"=="),ee}function Xt(Y,ce){var ee="";if(Y&&(ee=gr.call(Y)),Y&&(ee==="[object ArrayBuffer]"||Y.buffer&&gr.call(Y.buffer)==="[object ArrayBuffer]")){var be,_e=fe;Y instanceof ArrayBuffer?(be=Y,_e+=He):(be=Y.buffer,ee==="[object Int8Array]"?_e+=Ee:ee==="[object Uint8Array]"?_e+=he:ee==="[object Uint8ClampedArray]"?_e+=Ue:ee==="[object Int16Array]"?_e+=nt:ee==="[object Uint16Array]"?_e+=Re:ee==="[object Int32Array]"?_e+=ye:ee==="[object Uint32Array]"?_e+=Ge:ee==="[object Float32Array]"?_e+=Qe:ee==="[object Float64Array]"?_e+=xt:ce(new Error("Failed to get type for BinaryArray"))),ce(_e+Nr(be))}else if(ee==="[object Blob]"){var ve=new FileReader;ve.onload=function(){var Be=Fe+Y.type+"~"+Nr(this.result);ce(fe+ft+Be)},ve.readAsArrayBuffer(Y)}else try{ce(JSON.stringify(Y))}catch(Be){console.error("Couldn't convert value into a JSON string: ",Y),ce(null,Be)}}function Dn(Y){if(Y.substring(0,Pe)!==fe)return JSON.parse(Y);var ce=Y.substring(An),ee=Y.substring(Pe,An),be;if(ee===ft&&Ae.test(ce)){var _e=ce.match(Ae);be=_e[1],ce=ce.substring(_e[0].length)}var ve=yr(ce);switch(ee){case He:return ve;case ft:return c([ve],{type:be});case Ee:return new Int8Array(ve);case he:return new Uint8Array(ve);case Ue:return new Uint8ClampedArray(ve);case nt:return new Int16Array(ve);case Re:return new Uint16Array(ve);case ye:return new Int32Array(ve);case Ge:return new Uint32Array(ve);case Qe:return new Float32Array(ve);case xt:return new Float64Array(ve);default:throw new Error("Unkown type: "+ee)}}var rr={serialize:Xt,deserialize:Dn,stringToBuffer:yr,bufferToString:Nr};function ir(Y,ce,ee,be){Y.executeSql("CREATE TABLE IF NOT EXISTS "+ce.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],ee,be)}function ao(Y){var ce=this,ee={db:null};if(Y)for(var be in Y)ee[be]=typeof Y[be]!="string"?Y[be].toString():Y[be];var _e=new d(function(ve,Be){try{ee.db=openDatabase(ee.name,String(ee.version),ee.description,ee.size)}catch(Je){return Be(Je)}ee.db.transaction(function(Je){ir(Je,ee,function(){ce._dbInfo=ee,ve()},function(Ze,et){Be(et)})},Be)});return ee.serializer=rr,_e}function Pi(Y,ce,ee,be,_e,ve){Y.executeSql(ee,be,_e,function(Be,Je){Je.code===Je.SYNTAX_ERR?Be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ce.storeName],function(Ze,et){et.rows.length?ve(Ze,Je):ir(Ze,ce,function(){Ze.executeSql(ee,be,_e,ve)},ve)},ve):ve(Be,Je)},ve)}function zi(Y,ce){var ee=this;Y=p(Y);var be=new d(function(_e,ve){ee.ready().then(function(){var Be=ee._dbInfo;Be.db.transaction(function(Je){Pi(Je,Be,"SELECT * FROM "+Be.storeName+" WHERE key = ? LIMIT 1",[Y],function(Ze,et){var ct=et.rows.length?et.rows.item(0).value:null;ct&&(ct=Be.serializer.deserialize(ct)),_e(ct)},function(Ze,et){ve(et)})})}).catch(ve)});return f(be,ce),be}function Un(Y,ce){var ee=this,be=new d(function(_e,ve){ee.ready().then(function(){var Be=ee._dbInfo;Be.db.transaction(function(Je){Pi(Je,Be,"SELECT * FROM "+Be.storeName,[],function(Ze,et){for(var ct=et.rows,It=ct.length,kn=0;kn<It;kn++){var Lt=ct.item(kn),Jn=Lt.value;if(Jn&&(Jn=Be.serializer.deserialize(Jn)),Jn=Y(Jn,Lt.key,kn+1),Jn!==void 0){_e(Jn);return}}_e()},function(Ze,et){ve(et)})})}).catch(ve)});return f(be,ce),be}function Wn(Y,ce,ee,be){var _e=this;Y=p(Y);var ve=new d(function(Be,Je){_e.ready().then(function(){ce===void 0&&(ce=null);var Ze=ce,et=_e._dbInfo;et.serializer.serialize(ce,function(ct,It){It?Je(It):et.db.transaction(function(kn){Pi(kn,et,"INSERT OR REPLACE INTO "+et.storeName+" (key, value) VALUES (?, ?)",[Y,ct],function(){Be(Ze)},function(Lt,Jn){Je(Jn)})},function(kn){if(kn.code===kn.QUOTA_ERR){if(be>0){Be(Wn.apply(_e,[Y,Ze,ee,be-1]));return}Je(kn)}})})}).catch(Je)});return f(ve,ee),ve}function Qi(Y,ce,ee){return Wn.apply(this,[Y,ce,ee,1])}function vd(Y,ce){var ee=this;Y=p(Y);var be=new d(function(_e,ve){ee.ready().then(function(){var Be=ee._dbInfo;Be.db.transaction(function(Je){Pi(Je,Be,"DELETE FROM "+Be.storeName+" WHERE key = ?",[Y],function(){_e()},function(Ze,et){ve(et)})})}).catch(ve)});return f(be,ce),be}function Ua(Y){var ce=this,ee=new d(function(be,_e){ce.ready().then(function(){var ve=ce._dbInfo;ve.db.transaction(function(Be){Pi(Be,ve,"DELETE FROM "+ve.storeName,[],function(){be()},function(Je,Ze){_e(Ze)})})}).catch(_e)});return f(ee,Y),ee}function mc(Y){var ce=this,ee=new d(function(be,_e){ce.ready().then(function(){var ve=ce._dbInfo;ve.db.transaction(function(Be){Pi(Be,ve,"SELECT COUNT(key) as c FROM "+ve.storeName,[],function(Je,Ze){var et=Ze.rows.item(0).c;be(et)},function(Je,Ze){_e(Ze)})})}).catch(_e)});return f(ee,Y),ee}function gt(Y,ce){var ee=this,be=new d(function(_e,ve){ee.ready().then(function(){var Be=ee._dbInfo;Be.db.transaction(function(Je){Pi(Je,Be,"SELECT key FROM "+Be.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(Ze,et){var ct=et.rows.length?et.rows.item(0).key:null;_e(ct)},function(Ze,et){ve(et)})})}).catch(ve)});return f(be,ce),be}function ci(Y){var ce=this,ee=new d(function(be,_e){ce.ready().then(function(){var ve=ce._dbInfo;ve.db.transaction(function(Be){Pi(Be,ve,"SELECT key FROM "+ve.storeName,[],function(Je,Ze){for(var et=[],ct=0;ct<Ze.rows.length;ct++)et.push(Ze.rows.item(ct).key);be(et)},function(Je,Ze){_e(Ze)})})}).catch(_e)});return f(ee,Y),ee}function wn(Y){return new d(function(ce,ee){Y.transaction(function(be){be.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(_e,ve){for(var Be=[],Je=0;Je<ve.rows.length;Je++)Be.push(ve.rows.item(Je).name);ce({db:Y,storeNames:Be})},function(_e,ve){ee(ve)})},function(be){ee(be)})})}function Lr(Y,ce){ce=m.apply(this,arguments);var ee=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName);var be=this,_e;return Y.name?_e=new d(function(ve){var Be;Y.name===ee.name?Be=be._dbInfo.db:Be=openDatabase(Y.name,"","",0),Y.storeName?ve({db:Be,storeNames:[Y.storeName]}):ve(wn(Be))}).then(function(ve){return new d(function(Be,Je){ve.db.transaction(function(Ze){function et(Lt){return new d(function(Jn,Hr){Ze.executeSql("DROP TABLE IF EXISTS "+Lt,[],function(){Jn()},function(qr,sa){Hr(sa)})})}for(var ct=[],It=0,kn=ve.storeNames.length;It<kn;It++)ct.push(et(ve.storeNames[It]));d.all(ct).then(function(){Be()}).catch(function(Lt){Je(Lt)})},function(Ze){Je(Ze)})})}):_e=d.reject("Invalid arguments"),f(_e,ce),_e}var ni={_driver:"webSQLStorage",_initStorage:ao,_support:je(),iterate:Un,getItem:zi,setItem:Qi,removeItem:vd,clear:Ua,length:mc,key:gt,keys:ci,dropInstance:Lr};function ri(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function le(Y,ce){var ee=Y.name+"/";return Y.storeName!==ce.storeName&&(ee+=Y.storeName+"/"),ee}function te(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function pe(){return!te()||localStorage.length>0}function Ie(Y){var ce=this,ee={};if(Y)for(var be in Y)ee[be]=Y[be];return ee.keyPrefix=le(Y,ce._defaultConfig),pe()?(ce._dbInfo=ee,ee.serializer=rr,d.resolve()):d.reject()}function ke(Y){var ce=this,ee=ce.ready().then(function(){for(var be=ce._dbInfo.keyPrefix,_e=localStorage.length-1;_e>=0;_e--){var ve=localStorage.key(_e);ve.indexOf(be)===0&&localStorage.removeItem(ve)}});return f(ee,Y),ee}function dt(Y,ce){var ee=this;Y=p(Y);var be=ee.ready().then(function(){var _e=ee._dbInfo,ve=localStorage.getItem(_e.keyPrefix+Y);return ve&&(ve=_e.serializer.deserialize(ve)),ve});return f(be,ce),be}function Rt(Y,ce){var ee=this,be=ee.ready().then(function(){for(var _e=ee._dbInfo,ve=_e.keyPrefix,Be=ve.length,Je=localStorage.length,Ze=1,et=0;et<Je;et++){var ct=localStorage.key(et);if(ct.indexOf(ve)===0){var It=localStorage.getItem(ct);if(It&&(It=_e.serializer.deserialize(It)),It=Y(It,ct.substring(Be),Ze++),It!==void 0)return It}}});return f(be,ce),be}function rn(Y,ce){var ee=this,be=ee.ready().then(function(){var _e=ee._dbInfo,ve;try{ve=localStorage.key(Y)}catch{ve=null}return ve&&(ve=ve.substring(_e.keyPrefix.length)),ve});return f(be,ce),be}function Gn(Y){var ce=this,ee=ce.ready().then(function(){for(var be=ce._dbInfo,_e=localStorage.length,ve=[],Be=0;Be<_e;Be++){var Je=localStorage.key(Be);Je.indexOf(be.keyPrefix)===0&&ve.push(Je.substring(be.keyPrefix.length))}return ve});return f(ee,Y),ee}function Qn(Y){var ce=this,ee=ce.keys().then(function(be){return be.length});return f(ee,Y),ee}function In(Y,ce){var ee=this;Y=p(Y);var be=ee.ready().then(function(){var _e=ee._dbInfo;localStorage.removeItem(_e.keyPrefix+Y)});return f(be,ce),be}function vr(Y,ce,ee){var be=this;Y=p(Y);var _e=be.ready().then(function(){ce===void 0&&(ce=null);var ve=ce;return new d(function(Be,Je){var Ze=be._dbInfo;Ze.serializer.serialize(ce,function(et,ct){if(ct)Je(ct);else try{localStorage.setItem(Ze.keyPrefix+Y,et),Be(ve)}catch(It){(It.name==="QuotaExceededError"||It.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Je(It),Je(It)}})})});return f(_e,ee),_e}function Vr(Y,ce){if(ce=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var ee=this.config();Y.name=Y.name||ee.name,Y.storeName=Y.storeName||ee.storeName}var be=this,_e;return Y.name?_e=new d(function(ve){Y.storeName?ve(le(Y,be._defaultConfig)):ve(Y.name+"/")}).then(function(ve){for(var Be=localStorage.length-1;Be>=0;Be--){var Je=localStorage.key(Be);Je.indexOf(ve)===0&&localStorage.removeItem(Je)}}):_e=d.reject("Invalid arguments"),f(_e,ce),_e}var Qt={_driver:"localStorageWrapper",_initStorage:Ie,_support:ri(),iterate:Rt,getItem:dt,setItem:vr,removeItem:In,clear:ke,length:Qn,key:rn,keys:Gn,dropInstance:Vr},br=function(ce,ee){return ce===ee||typeof ce=="number"&&typeof ee=="number"&&isNaN(ce)&&isNaN(ee)},ii=function(ce,ee){for(var be=ce.length,_e=0;_e<be;){if(br(ce[_e],ee))return!0;_e++}return!1},dr=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ui={},lo={},di={INDEXEDDB:Ke,WEBSQL:ni,LOCALSTORAGE:Qt},Ao=[di.INDEXEDDB._driver,di.WEBSQL._driver,di.LOCALSTORAGE._driver],Ji=["dropInstance"],Zi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ji),ia={description:"",driver:Ao.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Va(Y,ce){Y[ce]=function(){var ee=arguments;return Y.ready().then(function(){return Y[ce].apply(Y,ee)})}}function uo(){for(var Y=1;Y<arguments.length;Y++){var ce=arguments[Y];if(ce)for(var ee in ce)ce.hasOwnProperty(ee)&&(dr(ce[ee])?arguments[0][ee]=ce[ee].slice():arguments[0][ee]=ce[ee])}return arguments[0]}var gc=function(){function Y(ce){o(this,Y);for(var ee in di)if(di.hasOwnProperty(ee)){var be=di[ee],_e=be._driver;this[ee]=_e,Ui[_e]||this.defineDriver(be)}this._defaultConfig=uo({},ia),this._config=uo({},this._defaultConfig,ce),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(ee){if((typeof ee>"u"?"undefined":s(ee))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var be in ee){if(be==="storeName"&&(ee[be]=ee[be].replace(/\W/g,"_")),be==="version"&&typeof ee[be]!="number")return new Error("Database version must be a number.");this._config[be]=ee[be]}return"driver"in ee&&ee.driver?this.setDriver(this._config.driver):!0}else return typeof ee=="string"?this._config[ee]:this._config},Y.prototype.defineDriver=function(ee,be,_e){var ve=new d(function(Be,Je){try{var Ze=ee._driver,et=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!ee._driver){Je(et);return}for(var ct=Zi.concat("_initStorage"),It=0,kn=ct.length;It<kn;It++){var Lt=ct[It],Jn=!ii(Ji,Lt);if((Jn||ee[Lt])&&typeof ee[Lt]!="function"){Je(et);return}}var Hr=function(){for(var Wf=function(yc){return function(){var Sl=new Error("Method "+yc+" is not implemented by the current driver"),Np=d.reject(Sl);return f(Np,arguments[arguments.length-1]),Np}},Pp=0,pT=Ji.length;Pp<pT;Pp++){var bv=Ji[Pp];ee[bv]||(ee[bv]=Wf(bv))}};Hr();var qr=function(Wf){Ui[Ze]&&console.info("Redefining LocalForage driver: "+Ze),Ui[Ze]=ee,lo[Ze]=Wf,Be()};"_support"in ee?ee._support&&typeof ee._support=="function"?ee._support().then(qr,Je):qr(!!ee._support):qr(!0)}catch(sa){Je(sa)}});return h(ve,be,_e),ve},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(ee,be,_e){var ve=Ui[ee]?d.resolve(Ui[ee]):d.reject(new Error("Driver not found."));return h(ve,be,_e),ve},Y.prototype.getSerializer=function(ee){var be=d.resolve(rr);return h(be,ee),be},Y.prototype.ready=function(ee){var be=this,_e=be._driverSet.then(function(){return be._ready===null&&(be._ready=be._initDriver()),be._ready});return h(_e,ee,ee),_e},Y.prototype.setDriver=function(ee,be,_e){var ve=this;dr(ee)||(ee=[ee]);var Be=this._getSupportedDrivers(ee);function Je(){ve._config.driver=ve.driver()}function Ze(It){return ve._extend(It),Je(),ve._ready=ve._initStorage(ve._config),ve._ready}function et(It){return function(){var kn=0;function Lt(){for(;kn<It.length;){var Jn=It[kn];return kn++,ve._dbInfo=null,ve._ready=null,ve.getDriver(Jn).then(Ze).catch(Lt)}Je();var Hr=new Error("No available storage method found.");return ve._driverSet=d.reject(Hr),ve._driverSet}return Lt()}}var ct=this._driverSet!==null?this._driverSet.catch(function(){return d.resolve()}):d.resolve();return this._driverSet=ct.then(function(){var It=Be[0];return ve._dbInfo=null,ve._ready=null,ve.getDriver(It).then(function(kn){ve._driver=kn._driver,Je(),ve._wrapLibraryMethodsWithReady(),ve._initDriver=et(Be)})}).catch(function(){Je();var It=new Error("No available storage method found.");return ve._driverSet=d.reject(It),ve._driverSet}),h(this._driverSet,be,_e),this._driverSet},Y.prototype.supports=function(ee){return!!lo[ee]},Y.prototype._extend=function(ee){uo(this,ee)},Y.prototype._getSupportedDrivers=function(ee){for(var be=[],_e=0,ve=ee.length;_e<ve;_e++){var Be=ee[_e];this.supports(Be)&&be.push(Be)}return be},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var ee=0,be=Zi.length;ee<be;ee++)Va(this,Zi[ee])},Y.prototype.createInstance=function(ee){return new Y(ee)},Y}(),qf=new gc;r.exports=qf},{3:3}]},{},[4])(4)})})(p3e);var I4t=p3e.exports;const yw=mu(I4t);class m3e{constructor(t){Cl(this,"engine");Cl(this,"connected",!1);Cl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function D$(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function QT(e){return e.participantId!==void 0}class Pc extends m3e{constructor(){super("firebase");Cl(this,"RECAPTCHAV3TOKEN","6LeSJBYqAAAAADYgJYYVaLhVACl5Jy1sidBF7BsC");Cl(this,"firestore");Cl(this,"collectionPrefix","prod-");Cl(this,"studyCollection");Cl(this,"storage");Cl(this,"studyId","");Cl(this,"localForage",yw.createInstance({name:"currentParticipantId"}));Cl(this,"participantData",null);const n=FX.parse(`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`),r=OOe(n);this.firestore=S6t(r,{}),this.storage=z_();try{S4t(r,{provider:new Zee(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async saveAllParticipantAndTaskTags(n){const r=Vu(n);Object.values(r).forEach(o=>{o.partTags=o.partTags.map(a=>a.id),Object.values(o.taskTags).forEach(a=>{a=a.map(l=>l.id)})});const i=fi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),s=new Blob([JSON.stringify(r)],{type:"application/json"});await Av(i,s)}async getAllParticipantAndTaskTags(){const n=fi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),r=await this._getFromFirebaseStorageByRef(n,"config"),i=fi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/participant/tags`),s=await this._getFromFirebaseStorageByRef(i,"config"),o=fi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/task/tags`),a=await this._getFromFirebaseStorageByRef(o,"config");return Object.values(r).forEach(l=>{l.partTags=l.partTags.map(u=>s?s.find(c=>c.id===u):u),Object.values(l.taskTags).forEach(u=>{u=u.map(c=>a?a.find(d=>d.id===c):c)})}),Promise.resolve(r)}async saveTags(n,r){const i=fi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${r}/tags`),s=new Blob([JSON.stringify(n)],{type:"application/json"});await Av(i,s)}async getTags(n){const r=fi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${n}/tags`),i=await this._getFromFirebaseStorageByRef(r,"config");return Array.isArray(i)?Promise.resolve(i):Promise.resolve([])}async saveEditedTranscript(n,r,i,s){const o=s.map(u=>({...u,selectedTags:u.selectedTags.filter(c=>c!==void 0).map(c=>c.id)})),a=fi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),l=new Blob([JSON.stringify(o)],{type:"application/json"});await Av(a,l)}async getEditedTranscript(n,r,i){const s=fi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),o=await this._getFromFirebaseStorageByRef(s,"config");if(!Array.isArray(o))return[];const a=fi(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/text/tags`),l=await this._getFromFirebaseStorageByRef(a,"config"),u=o.map(c=>({...c,selectedTags:c.selectedTags.map(d=>l.find(f=>d===f.id))}));return Promise.resolve(u)}async connect(){try{await T6t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=A$();if(!i.currentUser&&(await ZDt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await D$(JSON.stringify(r));if(this.studyCollection=xd(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async _getFirebaseProvenance(n){const r=z_(),i=fi(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await Iv(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=z_(),i=fi(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await Iv(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),l=await this.getModes(n);if(QT(a))return this.participantData=a,a;const u=await D$(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},l.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const l=fi(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(l,"config")}),s=await Promise.all(i),o={};return n.forEach((a,l)=>o[a]=s[l]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=kI(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=z_(),o=fi(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);Av(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=z_(),s=await Promise.all(n.map(async a=>await Iv(fi(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(l=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{const c=u.response,d=URL.createObjectURL(c);l(d)},u.open("GET",a),u.send()})))}async getTranscription(n,r){const i=z_(),s=await Promise.all(n.map(async a=>await Iv(fi(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(l=>{const u=new XMLHttpRequest;u.responseType="blob",u.onload=()=>{u.response.text().then(d=>{l(d)})},u.open("GET",a),u.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=await this.getModes(this.studyId),s=Bs(this.studyCollection,"sequenceAssignment");await Eu(s,{});const o=xd(s,"sequenceAssignment"),a=Bs(o,this.currentParticipantId),l=zme(o,O6t("participantId","==","")),u=await XT(l);if(u.docs.length>0){const g=u.docs[0],y=g.data().timestamp;i.dataCollectionEnabled&&(await j6t(g.ref),await Eu(a,{participantId:this.currentParticipantId,timestamp:y}))}else i.dataCollectionEnabled&&await Eu(a,{participantId:this.currentParticipantId,timestamp:U6t()});const c=zme(o,D6t("timestamp","asc")),h=(await XT(c)).docs.map(g=>g.data()).findIndex(g=>g.participantId===n||this.currentParticipantId)%r.length,p=h===-1?Math.floor(Math.random()*r.length-1):h,m=r[p];if(!m)throw new Error("Latin square is empty");return m}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=fi(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await YT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");QT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return QT(r)?r:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=kI();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=xd(this.firestore,"user-management"),i=await XT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(l=>l.email===n.user.email);a&&(a.uid=n.user.uid),await Eu(Bs(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Eu(Bs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Eu(Bs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Eu(Bs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Eu(Bs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=fi(this.storage,`${this.collectionPrefix}${n}/participants`),i=await YT(r),s=[],o=i.items.map(async a=>{const l=await this._getFromFirebaseStorageByRef(a,"participantData");QT(l)&&s.push(l)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=xd(this.firestore,`${this.collectionPrefix}${n}`),s=fi(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!QT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=Bs(i,"sequenceAssignment"),l=xd(a,"sequenceAssignment"),u=Bs(l,r);await F6t(u,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=Bs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await Eu(s,{[r]:i},{merge:!0})}async getModes(n){const r=Bs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await C9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await Eu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),l=s.getUTCDate().toString().padStart(2,"0"),u=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),d=s.getUTCSeconds().toString().padStart(2,"0"),f=`${o}-${a}-${l}T${u}:${c}:${d}`,h=`${this.collectionPrefix}${n}-snapshot-${f}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=Bs(this.firestore,"metadata","collections"),i=await C9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=Bs(this.firestore,"metadata","collections");await Eu(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=Bs(this.firestore,"metadata","collections"),i=await C9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Eu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=fi(this.storage,n),s=(await YT(r)).items.map(o=>ime(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=fi(this.storage,n),o=(await YT(i)).items.map(a=>{const l=a.fullPath,u=l.replace(n,r);return this._copyFile(l,u)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=fi(this.storage,n),s=fi(this.storage,r),o=await Iv(i),l=await(await fetch(o)).blob();await Av(s,l)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=xd(this.firestore,n),s=Bs(i,"sequenceAssignment"),o=xd(s,"sequenceAssignment"),a=xd(this.firestore,r),l=Bs(a,"sequenceAssignment");await Eu(l,{});const u=xd(l,"sequenceAssignment"),c=await XT(o),d=Hme(this.firestore);c.docs.forEach(f=>{const h=Bs(u,f.id);d.set(h,f.data())}),await d.commit()}async _deleteCollection(n){const r=xd(this.firestore,n),i=Bs(r,"sequenceAssignment"),s=xd(i,"sequenceAssignment"),o=await XT(s),a=Hme(this.firestore);o.forEach(l=>{const u=Bs(s,l.id);a.delete(u)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=fi(this.storage,n);return(await YT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=fi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Iv(i),l=await(await fetch(o)).text();s=JSON.parse(l)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Iv(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=fi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await Av(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await Av(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=fi(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await ime(i)}}const g3e=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),_p=()=>I.useContext(g3e);function k4t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:l}=ki(),u=async()=>{const h=A$();try{await oMt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},d=async h=>l?await l.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(l instanceof Pc)try{h=A$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(b=>({user:b.user,isAdmin:b.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const b={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},_=await d(b);b.isAdmin=!!_,s(b)}else u()},g=(async()=>{if(l instanceof Pc){const y=await(l==null?void 0:l.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const b=sMt(h,async _=>await p(_));return()=>b()}s(r)}else l&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[l,o]);const f=I.useMemo(()=>({user:i,triggerAuth:c,logout:u,verifyAdminStatus:d}),[i]);return v.jsx(g3e.Provider,{value:f,children:i.determiningStatus?v.jsx(su,{visible:!0}):e})}async function R4t(e){return e?await e.getTags("text"):[]}function P4t({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){var L;const[a,l]=I.useState(null),u=_p(),{trrackId:c,studyId:d,index:f}=bf(),h=fp(),p=f?h:null,{storageEngine:m}=ki(),{value:g,execute:y}=Kd(R4t,[m]),b=I.useCallback(k=>{m&&m.saveTags(k,"text").then(()=>y(m))},[y,m]),_=_f(),w=I.useRef([]),E=I.useMemo(()=>!p||!e?null:Object.keys(e.answers).find(k=>k.startsWith(p))||null,[e,p]),x=hw((k,$)=>{const D=[...s];D[k].text=$,o(D)}),S=hw((k,$)=>{const D=[...s];D[k].selectedTags=$,o(D)}),C=hw((k,$)=>{const D=[...s];D[k].annotation=$,o(D)}),A=hw(k=>{if(k===0)return;const $=structuredClone(s);$[k-1].text=s[k-1].text+s[k].text,$[k-1].transcriptMappingEnd=s[k].transcriptMappingEnd,$[k-1].selectedTags=[...s[k-1].selectedTags,...s[k].selectedTags.filter(D=>!s[k-1].selectedTags.find(M=>M.id===D.id))],$.splice(k,1),$.filter(D=>D.transcriptMappingStart===$[k-1].transcriptMappingStart).forEach(D=>{D.transcriptMappingEnd=$[k-1].transcriptMappingEnd}),o($),setTimeout(()=>{w.current[k-1].focus(),w.current[k-1].setSelectionRange(s[k-1].text.length,s[k-1].text.length,"none")})}),R=hw((k,$)=>{const D=structuredClone(s),M=D[k];D.splice(k+1,0,{transcriptMappingEnd:M.transcriptMappingEnd,transcriptMappingStart:M.transcriptMappingStart,text:M.text.slice($),selectedTags:M.selectedTags,annotation:""}),D[k].text=D[k].text.slice(0,$),o(D),setTimeout(()=>{w.current[k+1].focus(),w.current[k+1].setSelectionRange(0,0)})});I.useEffect(()=>{const k=[];a&&s.length>a.results.length||(s.forEach(($,D)=>{a&&(D===0||$.transcriptMappingStart!==s[D-1].transcriptMappingStart)&&k.push({start:D===0?0:a.results[$.transcriptMappingStart-1].resultEndTime,end:a.results[$.transcriptMappingEnd].resultEndTime,lineStart:$.transcriptMappingStart,lineEnd:$.transcriptMappingEnd,tags:s.filter(M=>M.transcriptMappingStart===$.transcriptMappingStart&&M.transcriptMappingEnd===$.transcriptMappingEnd).map(M=>M.selectedTags)})}),n(k))},[s,n,a]),I.useEffect(()=>{d&&c&&e&&(m==null||m.getTranscription(Zl(e.sequence).filter(k=>_.tasksToNotRecordAudio===void 0||!_.tasksToNotRecordAudio.includes(k)).filter(k=>p?k===p:!0),c).then(k=>{const $=k.map(B=>JSON.parse(B));let D=0;const M=$.map(B=>{const z=B.results.map(U=>({...U,resultEndTime:+U.resultEndTime.split("s")[0]+D}));return D+=+B.results[B.results.length-1].resultEndTime.split("s")[0],z}).flat();l({results:M}),s.length===0&&o(M.map((B,z)=>{var U;return{transcriptMappingStart:z,transcriptMappingEnd:z,text:((U=B.alternatives[0].transcript)==null?void 0:U.trim())||"",selectedTags:[],annotation:""}})),i(0)}))},[m,d,c,_.tasksToNotRecordAudio,e,p,o,i,s.length]),I.useEffect(()=>{if(a&&r!==null&&e&&t>0){let k=r;const $=E?e.answers[E].startTime:e.answers.audioTest.startTime,D=Math.abs(t-$)/1e3;if(D>a.results[k].resultEndTime){for(;D>a.results[k].resultEndTime;)if(k+=1,k>a.results.length-1){k=a.results.length-1;break}}else if(k>0&&D<a.results[k-1].resultEndTime)for(;k>0&&D<a.results[k-1].resultEndTime;)k-=1;if(r===k)return;i(k)}},[r,e,t,i,a,E]);const P=I.useCallback((k,$)=>{if(!g)return;const D=g.findIndex(z=>z.id===k.id),M=Array.from(g);M[D]=$;const B=Array.from(s);B.forEach(z=>{z.selectedTags=z.selectedTags.map(U=>U.id===k.id?$:U)}),o(B),b(M)},[b,o,g,s]);return v.jsxs(Es,{gap:0,children:[v.jsxs(Ln,{mb:"sm",justify:"space-between",wrap:"nowrap",children:[v.jsx(Xe,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),v.jsx(PH,{createTagCallback:k=>{b([...g||[],k])},editTagCallback:P,tags:g||[],email:((L=u.user.user)==null?void 0:L.email)||""})]}),v.jsx(Es,{gap:5,children:g?s.map((k,$)=>v.jsx(NNt,{annotation:k.annotation,setAnnotation:D=>C($,D),addRef:D=>{w.current[$]=D},onSelectTags:D=>S($,D),addRowCallback:D=>R($,D),deleteRowCallback:()=>A($),onTextChange:D=>x($,D),tags:g,selectedTags:k.selectedTags,text:k.text,start:k.transcriptMappingStart,end:k.transcriptMappingEnd,current:r===null?0:r},$)):v.jsx(Os,{})})]})}const k9={left:5,top:0,right:5,bottom:0};function N4t(e,t){return t?t.getParticipantData(e):null}async function O4t(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}async function D4t(e,t){return t&&e?await t.getAllParticipantAndTaskTags():null}async function M4t(e,t){return e?await e.getTags(t):[]}const Qme=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],Jme=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function y3e({mini:e}){var He,ft;const{trrackId:t,index:n}=bf(),r=fp(),i=_p(),s=I.useMemo(()=>n?r:null,[r,n]),{storageEngine:o}=ki(),[a,l]=I.useState(0),[u,{width:c}]=_k(),[d,f]=I.useState(null),{value:h,status:p}=Kd(N4t,[t,o]),{value:m,execute:g}=Kd(D4t,[t,o]),{saveAnalysisState:y}=tc(),b=Xc(),[_,w]=I.useState(!1),[E,x]=tHe(0,50),S=I.useRef(null),C=_f(),A=hc(),{analysisTrialName:R,analysisWaveformTime:P}=Qo(Ee=>Ee),{setAnalysisTrialName:L,setAnalysisParticipantName:k,setAnalysisWaveformTime:$}=tc(),{value:D,execute:M}=Kd(M4t,[o,"task"]),[B,z]=I.useState(!0),U=I.useRef(null),[O,V]=I.useState([]),[W,j]=I.useState(null),H=I.useMemo(()=>o&&t&&r?Pd(Ee=>{var he;return o.saveEditedTranscript(t,((he=i.user.user)==null?void 0:he.email)||"temp",r,Ee)},1e3,{maxWait:5e3}):Ee=>null,[r,(He=i.user.user)==null?void 0:He.email,o,t]),G=I.useCallback(Ee=>{j(Ee),H(Ee)},[H]),{value:J,status:se}=Kd(O4t,[o,h==null?void 0:h.participantId,r,(ft=i.user.user)==null?void 0:ft.email]);I.useEffect(()=>{j(J&&se==="success"?J:null)},[J,se]);const ie=I.useMemo(()=>[...Qme,...Jme],[]),ne=I.useMemo(()=>!s||!h?null:Object.keys(h.answers).find(Ee=>Ee.startsWith(s))||null,[h,s]);I.useEffect(()=>{if(ne&&h){const Ee=yI.create(),he=tH({registry:Ee,initialState:{}});h.answers[ne].provenanceGraph&&(he.importObject(Vu(h.answers[ne].provenanceGraph)),U.current=he)}},[h,ne]);const ue=I.useCallback(Ee=>{var he;Ee&&(ne&&h&&U.current&&(b(y(U.current.getState((he=h.answers[ne].provenanceGraph)==null?void 0:he.nodes[Ee]))),U.current.to(Ee)),f(Ee))},[h,y,b,ne]),xe=I.useCallback(Ee=>{var he;if(!e){b(L(Ee)),b(y(null)),l(0);const Ue=h?Object.keys(h.answers).find(nt=>nt.startsWith(Ee)):"";if(h&&Ue&&h.answers[Ue].provenanceGraph){const nt=yI.create(),ye=tH({registry:nt,initialState:{}});ye.importObject(Vu(h.answers[Ue].provenanceGraph)),U.current=ye,ue(((he=h.answers[Ue].provenanceGraph)==null?void 0:he.root)||"")}else b(y(null)),f(null),U.current=null}},[ue,e,h,y,L,b]);I.useEffect(()=>{s&&xe(s)},[xe,s]);const de=hw((Ee,he=!0)=>{if(h&&s&&ne&&(h.answers[ne].endTime-h.answers.audioTest_2.startTime)/1e3<Ee){const Ue=Zl(h.sequence);xe(Ue[Ue.indexOf(s)+1])}else h&&s&&U.current&&U.current.current.children.length>0&&(U.current.graph.backend.nodes[U.current.current.children[0]].createdOn-h.answers.audioTest_2.startTime)/1e3<Ee&&ue(U.current.current.children[0]);if(h&&s){const Ue=ne?h.answers[ne].startTime:h.answers.audioTest_2.startTime;x(Ee*1e3+Ue)}he&&b($(Ee))}),Ke=I.useCallback(Ee=>{if(Ee&&h&&t){const he=new SNt;o==null||o.getAudio(Zl(h.sequence).filter(Ue=>C.tasksToNotRecordAudio===void 0||!C.tasksToNotRecordAudio.includes(Ue)).filter(Ue=>s?Ue===s:!0),t).then(Ue=>{Ee&&he.fetchAudio(...Ue).then(nt=>he.concatAudio(nt)).then(nt=>he.export(nt,"audio/mp3")).then(nt=>Ee.loadBlob(nt.blob).then(()=>{z(!1)})).catch(nt=>{throw new Error(nt)}),Ee.on("timeupdate",de)})}},[C.tasksToNotRecordAudio,h,o,de,s,t]),je=I.useMemo(()=>[],[]),Oe=p2e({container:S.current,plugins:je,onMount:Ke,progressColor:"cornflowerblue",waveColor:"lightgray"}),Fe=I.useCallback((Ee,he)=>{x(Ee),Oe&&he&&setTimeout(()=>{Oe.seekTo(he)})},[x,Oe]),Ae=I.useCallback(Ee=>{w(Ee),Oe&&(Ee?Oe.play():Oe.pause())},[Oe]);I.useEffect(()=>{de(P,!1),Oe&&Math.abs(Oe.getCurrentTime()-P)>.8&&setTimeout(()=>{Oe.setTime(P)})},[P,de,Oe]);const fe=I.useMemo(()=>{if(!h)return null;const Ee=Object.values(h.answers||{}).map(nt=>[nt.startTime,nt.endTime]).flat(),he=ku(Ee);return Dc([k9.left,c+k9.left+k9.right]).domain(ne?[h.answers[ne].startTime,h.answers[ne].endTime]:he).clamp(!0)},[h,ne,c]);I.useEffect(()=>{Ke(Oe)},[Ke,h,Oe]),I.useCallback(Ee=>{var he;if(Ee&&ne&&h&&U.current&&fe){const Ue=h.answers[ne].provenanceGraph.nodes[Ee];b(y(U.current.getState((he=h.answers[ne].provenanceGraph)==null?void 0:he.nodes[Ee]))),U.current.to(Ee);const nt=fe.domain()[1]-fe.domain()[0];Fe(Ue.createdOn+1,(Ue.createdOn-fe.domain()[0])/nt)}},[Fe,h,y,b,ne,fe]);const Pe=I.useCallback(Ee=>{if(!h)return;const he=ie.indexOf(h.participantId);Ee?A(`../../${s?"../":""}${ie[he+1]}/ui/reviewer-${s||""}`,{relative:"path"}):A(`../../${s?"../":""}${ie[he-1]}/ui/reviewer-${s||""}`,{relative:"path"})},[ie,A,h,s]);return v.jsx(Ln,{wrap:"nowrap",gap:25,children:v.jsxs(Es,{ref:u,style:{width:"100%"},gap:e?0:25,children:[e?null:v.jsx(Ju,{children:v.jsxs(Ln,{children:[v.jsx(Bn,{children:v.jsx(Det,{onClick:()=>Pe(!1)})}),v.jsx(vf,{style:{width:"300px"},value:h==null?void 0:h.participantId,onChange:Ee=>{b(k(Ee)),A(`../../${s?"../":""}${Ee}/ui/reviewer-${s||""}`,{relative:"path"})},data:[...Qme,...Jme]}),v.jsx(vf,{style:{width:"300px"},clearable:!0,value:s,data:h?[...Zl(h.sequence)]:[],onChange:Ee=>A(`${s?"../":""}reviewer-${Ee||""}`,{relative:"path"})}),v.jsx(Bn,{children:v.jsx(Met,{onClick:()=>Pe(!0)})})]})}),p==="success"&&h&&fe?e?null:v.jsx(xOe,{trialFilter:ne,xScale:fe,setSelectedTask:xe,participantData:h,width:c,height:200}):e?null:v.jsx(Ju,{style:{height:"275px"},children:v.jsx(Os,{})}),fe&&h!==null?v.jsxs(v.Fragment,{children:[v.jsxs(ge,{ref:S,ml:h&&fe?fe(h.answers.audioTest_2.startTime):0,mr:h&&fe?fe(h.answers["post-study-survey_13"].startTime):0,style:{overflow:"visible",width:`${h&&!s?fe(h.answers["post-study-survey_13"].startTime)-fe(h.answers.audioTest_2.startTime):fe.range()[1]-fe.range()[0]}px`},children:[v.jsx(c2e.Provider,{value:Oe,children:v.jsx(kQ,{id:"waveform"})}),B?v.jsx(Os,{}):null]}),e?null:v.jsx(PNt,{startTime:s?fe.domain()[0]:h.answers.audioTest_2.startTime,xScale:fe,transcriptLines:O,currentShownTranscription:a})]}):null,p==="success"&&h&&fe?v.jsx(RNt,{xScale:fe,setSelectedTask:xe,playTime:E-h.answers.introduction_0.startTime,setPlayTime:Fe,isPlaying:_,setIsPlaying:Ae,currentNode:d,setCurrentNode:ue,participantData:h,width:c,height:50}):null,v.jsxs(Ln,{align:"center",justify:"center",children:[v.jsx(Bn,{variant:"light",size:50,onClick:()=>Ae(!_),children:_?v.jsx(Ctt,{}):v.jsx(Att,{})}),D&&m&&s&&t?v.jsx(rA,{tags:D||[],onSelectTags:Ee=>{if(o&&m){const he=Vu(m);he[t]||(he[t]={partTags:[],taskTags:{}}),he[t].taskTags[s]=Ee,o.saveAllParticipantAndTaskTags(he).then(()=>{g(t,o)})}},selectedTags:m&&m[t]?m[t].taskTags[s]||[]:[]}):null]}),s?v.jsx(Es,{children:h&&J&&se==="success"&&W&&!e?v.jsx(P4t,{transcriptList:W,setTranscriptList:G,setCurrentShownTranscription:l,currentShownTranscription:a,participant:h,playTime:E,setTranscriptLines:V}):e?null:v.jsx(Os,{})}):null]})})}const Zme=Object.assign({"../public/viz-guardrails/AudioTest.tsx":fyt,"../public/viz-guardrails/Color.tsx":hyt,"../public/viz-guardrails/DataExplorer.tsx":_Nt,"../public/viz-guardrails/Help.tsx":ENt,"../public/viz-guardrails/LineChart.tsx":_Tt,"../public/viz-guardrails/RangeSelector.tsx":ETt,"../public/viz-guardrails/Selector.tsx":xTt,"../public/viz-guardrails/Sidebar.tsx":wTt,"../public/viz-guardrails/StripPlot.tsx":bNt,"../public/viz-guardrails/XAxis.tsx":vTt,"../public/viz-guardrails/YAxis.tsx":bTt});function $4t({currentConfig:e,provState:t}){const n=lg(),r=fp(),i=`../public/${e.path}`,s=i in Zme?Zme[i].default:null,o=Xc(),{updateResponseBlockValidation:a,setIframeAnswers:l}=tc(),u=I.useCallback(({status:c,provenanceGraph:d,answers:f})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:f,provenanceGraph:d})),o(l(f))},[o,a,r,n,l]);return v.jsxs(I.Suspense,{fallback:v.jsx("div",{children:"Loading..."}),children:[s?v.jsx(s,{parameters:e.parameters,setAnswer:u,provenanceState:t}):v.jsx(Vk,{path:e.path}),n.toString().startsWith("reviewer-")?v.jsx(Ir.Footer,{p:"md",children:v.jsx(y3e,{mini:!0})}):null]})}function ege({provState:e}){var A;const t=_f(),n=ki(),r=lg(),i=fp()||"Notfound",s=t.components[i],o=$X(),a=h6(s)&&t.baseComponents?DX({},(A=t.baseComponents)==null?void 0:A[s.baseComponent],s):s,l=a.instruction||"",{instructionLocation:u}=a,c=t.uiConfig.sidebar&&(u==="sidebar"||u===void 0),[d,f]=I.useState(null),h=Xc(),{setIsRecording:p}=tc(),{analysisTrialName:m,analysisProvState:g,analysisParticipantName:y}=Qo(R=>R),{trrackId:b}=bf(),_=hc(),[w,E]=I.useState(null);I.useEffect(()=>{i&&m&&b&&(i!==m||b!==y)&&_(`../../${y||b}/reviewer-${m}`,{relative:"path"})},[y,g,m,i,r,_,b]),I.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(d&&w&&n.storageEngine.saveAudio(d,w),s.recordAudio?(navigator.mediaDevices.getUserMedia({audio:!0}).then(P=>{const L=new MediaRecorder(P);L.start(),f(L),h(p(!0))}),E(i)):(d==null||d.stop(),E(null),f(null),h(p(!1))))},[i]),n2e();const{storageEngine:x}=ki(),S=Xc(),{setAlertModal:C}=tc();return I.useEffect(()=>{(x==null?void 0:x.getEngine())!=="firebase"&&S(C({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[C,x,S]),i==="end"?v.jsx(i2e,{}):i==="Notfound"?v.jsx(Vk,{email:t.uiConfig.contactEmail}):v.jsxs(v.Fragment,{children:[u==="aboveStimulus"&&v.jsx(cl,{text:l}),v.jsx(XM,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),v.jsxs(I.Suspense,{fallback:v.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&v.jsx(gft,{currentConfig:a}),a.type==="website"&&v.jsx(hft,{currentConfig:a}),a.type==="image"&&v.jsx(mft,{currentConfig:a}),a.type==="react-component"&&v.jsx($4t,{currentConfig:a,provState:g})]},`${r}-stimulus`),(u==="belowStimulus"||u===void 0&&!c)&&v.jsx(cl,{text:l}),v.jsx(XM,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function sq(e){const[t]=XK();return v.jsx(YK,{...e,to:{pathname:e.to,search:t.toString()}})}function L4t(e,t=!1){return typeof e=="number"?tge(e,t):tge(e.length,t).map(r=>r.map(i=>e[i]))}function tge(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function v3e(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=v3e(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const u=Math.floor(Math.random()*r.length-1)+1;o.add(u)}const a=Array.from(o).sort((u,c)=>u-c);let l=0;for(let u=0;u<r.length;u+=1)u===a[l]&&(s.push(i.components),l+=1),s.push(r[u])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function F4t(e,t){const n=Vu(e);return v3e(n,t,"root")}function b3e(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&b3e(s,t,i,o)})}function j4t(e){const t=[];return b3e(e,t,"",0),t}function nge(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return L4t(i.sort(()=>.5-Math.random()),!0)}function B4t(e){const n=j4t(e.sequence).map(s=>({[s]:nge(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=F4t(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=nge(e,o))})}),i}function _3e(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=_3e(o,t,n,r),r.includes(o.orderPath))break}return i}function w3e(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=w3e(s,r)}}),n}function z4t(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function U4t({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=Gb(),l=hc(),u=lg(),c=_f(),[d,{close:f,open:h}]=N1(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?_3e(n,e,r,s.orderPath):-1,g=o?u===m:u===`reviewer-${e}`;return v.jsxs(hn,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[v.jsx(hn.Target,{children:v.jsx(ge,{onMouseEnter:h,onMouseLeave:f,children:v.jsx(kF,{active:g,style:{lineHeight:"32px",height:"32px"},label:v.jsxs(ge,{children:[i&&v.jsx(Vet,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?v.jsx(Xe,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):v.jsx(Xe,{size:"sm",display:"inline",children:e})]}),onClick:()=>l(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&v.jsx(hn.Dropdown,{onMouseLeave:f,children:v.jsx(Xe,{size:"sm",children:v.jsxs(ge,{children:[p.description&&v.jsxs(ge,{children:[v.jsx(Xe,{fw:900,display:"inline-block",mr:2,children:"Description:"}),v.jsx(Xe,{fw:400,component:"span",children:p.description})]}),p.meta&&v.jsxs(Xe,{children:[v.jsx(Xe,{fw:"900",component:"span",children:"Task Meta: "}),v.jsx(Xe,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function E3e({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=Vu(e.components);return n&&r&&(i=z4t(Vu(e.components),Vu(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),v.jsx("div",{children:i.map((o,a)=>{if(typeof o=="string")return r&&(n==null?void 0:n.components[a])!==o?null:v.jsx(U4t,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(d=>d.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const l=n==null?void 0:n.components.find(d=>typeof d!="string"&&d.orderPath===o.orderPath),u=l?Zl(l).length-w3e(o,l):0,c=Zl(o);return v.jsx(kF,{label:v.jsxs(ge,{style:{opacity:u>0?1:.5},children:[v.jsx(Xe,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?v.jsx($et,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&v.jsxs(rf,{ml:5,variant:"light",children:[u,"/",c.length]}),r&&o.interruptions&&v.jsx(rf,{ml:5,color:"orange",variant:"light",children:(l==null?void 0:l.components.filter(d=>{var f;return typeof d=="string"&&((f=o.interruptions)==null?void 0:f.flatMap(h=>h.components).includes(d))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:v.jsx(ge,{style:{borderLeft:"1px solid #e9ecef"},children:v.jsx(E3e,{configSequence:o,participantSequence:l,fullSequence:t,participantView:r})})},a)})})}function x3e(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function S3e(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>S3e(n,`${t}-${r}`))}}function rge({text:e}){return v.jsx(on,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:v.jsx(Bxe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function V4t(){const{sequence:e,metadata:t}=Qo(d=>d),{toggleStudyBrowser:n}=tc(),r=_f(),i=Xc(),s=Gb(),o=GK(`/${s}`),{storageEngine:a}=ki(),l=I.useMemo(()=>{let d=Vu(r.sequence);return d=S3e(d,"root"),d.components.push("end"),d},[r.sequence]),[u,c]=I.useState("participant");return v.jsxs(Ir.Aside,{p:"0",children:[v.jsx(Ir.Section,{children:v.jsxs(Ct,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[v.jsx(Xe,{size:"md",fw:700,pt:3,children:"Study Browser"}),v.jsx(xn,{variant:"light",leftSection:v.jsx(JK,{size:14}),onClick:()=>x3e(a,r,t,o),size:"xs",disabled:u==="allTrials",children:"Next Participant"}),v.jsx(rg,{onClick:()=>i(n()),mt:1})]})}),v.jsx(Ir.Section,{grow:!0,component:Hy,p:"xs",pt:0,children:v.jsxs(es,{value:u,onChange:c,children:[v.jsx(ge,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:v.jsxs(es.List,{grow:!0,children:[v.jsxs(es.Tab,{value:"participant",children:["Participant View",v.jsx(rge,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),v.jsxs(es.Tab,{value:"allTrials",children:["All Trials View",v.jsx(rge,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),v.jsx(es.Panel,{value:"participant",children:v.jsx(E3e,{configSequence:l,participantSequence:e,fullSequence:e,participantView:!0})})]})})]})}function H4t({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Qo(x=>x),i=OX(),s=Xc(),{toggleShowHelpText:o,toggleStudyBrowser:a}=tc(),{storageEngine:l}=ki(),u=Qo(x=>x.isRecording),c=lg(),d=i.length-1,f=typeof c=="number"?c/d*100:0,[h,p]=I.useState(!1),m=n==null?void 0:n.uiConfig.logoPath,g=n==null?void 0:n.uiConfig.withProgressBar,y=Gb(),b=GK(`/${y}`),_=I.useRef(null),[w,E]=I.useState(!1);return I.useEffect(()=>{const x=_.current;x&&E(x.scrollWidth>x.offsetWidth)},[n]),v.jsx(Ir.Header,{p:"md",children:v.jsxs(rl,{mt:-7,align:"center",children:[v.jsx(rl.Col,{span:4,children:v.jsxs(Ct,{align:"center",children:[v.jsx(Gy,{w:40,src:`${dd}${m}`,alt:"Study Logo"}),v.jsx(Hc,{w:"md"}),v.jsx(xi,{order:4,children:n==null?void 0:n.studyMetadata.title}),u?v.jsxs(Ln,{ml:"xl",gap:20,wrap:"nowrap",children:[v.jsx(Xe,{color:"red",children:"Recording audio"}),v.jsx(y2e,{})]}):null]})}),v.jsx(rl.Col,{span:4,children:g&&v.jsx(Vb,{radius:"md",size:"lg",value:f})}),v.jsx(rl.Col,{span:4,children:v.jsxs(Ln,{wrap:"nowrap",justify:"right",children:[!t&&v.jsx(on,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:v.jsx(rf,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&v.jsx(xn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),v.jsxs(dn,{shadow:"md",width:200,withinPortal:!0,opened:h,onChange:p,children:[v.jsx(dn.Target,{children:v.jsx(Bn,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:v.jsx(Fxe,{})})}),v.jsxs(dn.Dropdown,{children:[e&&v.jsx(dn.Item,{leftSection:v.jsx(btt,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),v.jsx(dn.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:v.jsx(ftt,{size:14}),children:"Contact"}),e&&v.jsx(dn.Item,{leftSection:v.jsx(JK,{size:14}),onClick:()=>x3e(l,n,r,b),children:"Next Participant"})]})]})]})})]})})}function q4t(){var l;const e=(l=_f())==null?void 0:l.uiConfig.sidebar,t=_f(),n=fp(),r=t.components[n],i=I.useMemo(()=>{var u;return r?h6(r)&&t.baseComponents?DX({},(u=t.baseComponents)==null?void 0:u[r.baseComponent],r):r:null},[r,t.baseComponents]),s=$X(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?v.jsxs(Ir.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&v.jsx(Ir.Section,{bg:"gray.3",p:"md",children:v.jsxs(Xe,{c:"gray.9",children:[v.jsx(Xe,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),v.jsx(cl,{text:o})]})}),v.jsx(Ir.Section,{p:"md",children:v.jsx(XM,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):v.jsx(Ir.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:v.jsx(XM,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function W4t(){const{showHelpText:e,config:t}=Qo(l=>l),n=Xc(),{toggleShowHelpText:r}=tc(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function l(){const u=await MX(t.uiConfig.helpTextPath);u!==void 0&&s(u),a(!1)}l()},[t.uiConfig.helpTextPath]),v.jsx(xs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?v.jsx(cl,{text:i}):v.jsx(Vk,{path:t.uiConfig.helpTextPath})})}function G4t(){const{alertModal:e}=Qo(o=>o),{setAlertModal:t}=tc(),n=Xc(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),v.jsx(xs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:v.jsxs(oS,{color:"red",radius:"xs",title:"Alert",icon:v.jsx(Net,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[v.jsx(Xe,{my:"md",children:e.message}),v.jsx(Ln,{w:"100%",justify:"end",children:v.jsx(xn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function Y4t(){const e=I.useRef([]),t=_f(),n=t.uiConfig.windowEventDebounceTime??100,r=Qo(f=>f.showStudyBrowser);I.useEffect(()=>{const f=Pd(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Pd(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Pd(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Pd(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Pd(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Pd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),b=Pd(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),_=Pd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Pd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",f,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",b),window.addEventListener("scroll",_),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",f,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",b),window.removeEventListener("scroll",_),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=ki(),o=Gb(),[a,l]=I.useState(!1),[u,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);l(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const d=I.useMemo(()=>a&&r,[a,r]);return v.jsx(s2e.Provider,{value:e,children:v.jsxs(Ir,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!d,mobile:!d}},children:[v.jsx(q4t,{}),v.jsx(V4t,{}),v.jsx(H4t,{studyNavigatorEnabled:a,dataCollectionEnabled:u}),v.jsx(W4t,{}),v.jsx(G4t,{}),v.jsx(Ir.Main,{children:v.jsx(cet,{})})]})})}const R9={left:5,top:0,right:5,bottom:0};function K4t(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function X4t({participant:e,maxDuration:t}){const n=hc(),r=ag(),i=I.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const u=Object.values(e.answers).sort((c,d)=>c.startTime-d.startTime);return new Date(u[u.length-1].endTime-(u[1]?u[1].startTime:0)).getTime()},[e]),[s,{width:o}]=_k(),a=I.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:tI(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),l=I.useMemo(()=>{if(!e)return null;const u=Object.values(e.answers||{}).map(f=>[f.startTime,f.endTime]).flat(),c=ku(u);return Dc([R9.left,o+R9.left+R9.right]).domain(c).clamp(!0)},[e,o]);return v.jsx(Ju,{children:v.jsxs(Es,{gap:25,ref:s,style:{width:"75%"},children:[v.jsxs(Ln,{justify:"space-between",children:[v.jsx(qy,{size:"25px",component:KK,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/reviewer-${Zl(e.sequence)[0]}`),children:e.participantId}),v.jsx(Xe,{size:"xl",children:`${a}`}),v.jsx(Xe,{size:"xl",children:`${K4t(i)}`})]}),l?v.jsx(xOe,{xScale:l,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function Q4t(e){return e?e.getAllParticipantsData():null}const J4t=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],Z4t=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function ejt(){const{storageEngine:e}=ki(),{value:t,status:n}=Kd(Q4t,[e]),r=I.useMemo(()=>{if(!(n!=="success"||!t))return Nh(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return n==="success"&&t?v.jsx(Es,{gap:50,style:{width:"100%"},children:t==null?void 0:t.filter(i=>Z4t.includes(i.participantId)||J4t.includes(i.participantId)).map(i=>v.jsx(X4t,{maxDuration:r,participant:i},i.participantId))}):v.jsx(Os,{})}function tjt({setProvState:e}){return v.jsx("div",{children:v.jsx(Ir.Main,{p:"sm",children:v.jsx(y3e,{mini:!1})})})}var njt={VITE_BASE_PATH:"/guardrails-think-aloud/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LeSJBYqAAAAADYgJYYVaLhVACl5Jy1sidBF7BsC",VITE_REVISIT_MODE:"private",BASE_URL:"/guardrails-think-aloud/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function rjt(e){const t=await(await fetch(`${dd}${e}`)).text();return s0t(t)}async function N4(e,t){const n=t.configsList.find(r=>Wxe(r)===e);if(n){const r=t.configs[n];return await rjt(`${r.path}`)}return null}async function ijt(e){const t={},n=e.configsList.filter(i=>njt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>N4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function sjt({studyId:e,config:t}){const{sequence:n}=Qo(i=>i),r=I.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:v.jsx(sq,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors.length>0?v.jsxs(v.Fragment,{children:[v.jsx(xi,{order:2,mb:8,children:"Error loading config"}),v.jsx(RU,{issues:t.errors,type:"error"})]}):v.jsx(ege,{})}),i.push({path:"/analysis/:trrackId/:index/",element:v.jsx(ege,{})}),i.push({path:"/analysis/:trrackId/ui/:index?/",element:v.jsx(Ir,{header:{height:70},navbar:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},aside:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},children:v.jsx(tjt,{setProvState:()=>null})})}),i.push({path:"/analysis",element:v.jsx(ejt,{})}),i.push({path:"/end",element:v.jsx(i2e,{})}),[{element:v.jsx(Y4t,{}),children:i}]}return[]},[t,n,e]);return Dxe(r)}function ojt({globalConfig:e}){const t=Gb(),[n,r]=I.useState(null);e.configsList.includes(t),I.useEffect(()=>{N4(t,e).then(u=>{r(u)})},[e,t]);const[i,s]=I.useState(null),{storageEngine:o}=ki(),[a]=XK();return I.useEffect(()=>{async function u(){if(!o||!n||!t)return;await o.initializeStudyDb(t,n),await o.getSequenceArray()||await o.setSequenceArray(await B4t(n));const d=n.uiConfig.urlParticipantIdParam&&a.get(n.uiConfig.urlParticipantIdParam)||void 0,f=Object.fromEntries(a.entries()),h=await fetch("https://api.ipify.org?format=json").catch(b=>""),p=h instanceof Response?await h.json():{ip:""},m={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:p.ip},g=await o.initializeParticipantSession(t,f,n,m,d),y=await uft(t,n,g.sequence,m,g.answers);s(y)}u()},[o,n,t,a]),i?v.jsx(aCe.Provider,{value:i,children:v.jsx(Out,{store:i.store,children:v.jsx(sjt,{studyId:t,config:n})})}):v.jsx(su,{visible:!0})}function cA({studyIds:e}){const t=hc(),{studyId:n}=bf(),r=ag(),i=e.map(f=>({value:f,label:f})),{storageEngine:s}=ki(),{user:o,logout:a}=_p(),[l,u]=I.useState(!1),c=r.pathname.includes("analysis"),d=[{name:"Studies",leftIcon:v.jsx(ott,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:v.jsx(Het,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:v.jsx(Vxe,{}),href:"/settings",needAdmin:!0}];return v.jsx(Ir.Header,{p:"md",children:v.jsxs(rl,{mt:-7,align:"center",children:[v.jsx(rl.Col,{span:6,children:v.jsxs(Ct,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[v.jsx(Gy,{w:40,src:`${dd}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),v.jsx(Hc,{w:"md"}),v.jsx(xi,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),v.jsx(rl.Col,{span:6,children:v.jsxs(Ct,{justify:"flex-end",direction:"row",children:[c&&v.jsx(vf,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:f=>t(`/analysis/stats/${f}`),mr:16}),v.jsx(eK,{opened:!1,onClick:()=>u(!0),style:{visibility:l?"hidden":void 0}}),v.jsx(up,{opened:l,onClose:()=>u(!1),position:"right",withCloseButton:!1,children:v.jsxs(Ct,{direction:"column",mt:20,children:[v.jsx(Xe,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),d.map(f=>f.needAdmin?o.isAdmin?v.jsx(xn,{leftSection:f.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(f.href),u(!1)},children:f.name},`menu-item-${f.name}`):null:v.jsx(xn,{leftSection:f.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(f.href),u(!1)},children:f.name},`menu-item-${f.name}`)),v.jsxs(ge,{ml:10,children:[v.jsx(D0,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?v.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),u(!1)},children:"Logout"}):v.jsx(Xe,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),u(!1)},children:"Login"}):null]})]})})]})})]})})}function T3e({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=N1(!1),[s,{close:o,open:a}]=N1(!1),[l,{open:u,close:c}]=N1(!1);return v.jsxs(v.Fragment,{children:[v.jsxs(Ln,{children:[v.jsxs(hn,{opened:n,children:[v.jsx(hn.Target,{children:v.jsx(xn,{variant:"light",disabled:e.length===0,onClick:()=>{IQ(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:v.jsx(ntt,{})})}),v.jsx(hn.Dropdown,{children:v.jsx(Xe,{children:"Download all participants data as JSON"})})]}),v.jsxs(hn,{opened:s,children:[v.jsx(hn.Target,{children:v.jsx(xn,{variant:"light",disabled:e.length===0,onClick:u,onMouseEnter:a,onMouseLeave:o,px:4,children:v.jsx(Hxe,{})})}),v.jsx(hn.Dropdown,{children:v.jsx(Xe,{children:"Download all participants data as a tidy CSV"})})]})]}),l&&v.jsx(c0t,{opened:l,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function ajt({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return v.jsxs(or.Td,{children:[t.toFixed(1)," ","s"]})}function ljt(e){const{metaData:t}=e;return v.jsx(or.Td,{children:v.jsx(OK,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:v.jsxs(Es,{gap:"xs",children:[v.jsxs(ge,{children:["IP:"," ",t.ip]}),v.jsxs(ge,{children:["Language:"," ",t.language]}),v.jsxs(ge,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),v.jsxs(ge,{children:["User Agent:"," ",t.userAgent]})]})})})}function ujt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=ki(),{studyId:s}=bf(),{user:o}=_p(),a=async g=>{i&&s&&(o.isAdmin?(await i.rejectParticipant(s,g),await r()):console.warn("You are not authorized to perform this action."))},[l,u]=I.useState([]),[c,d]=I.useState(!1),f=()=>mU({title:"Confirm rejecting participants",children:v.jsxs(Xe,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",v.jsx(Xe,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const g=l.map(async y=>await a(y));await Promise.all(g),u([]),await r(),d(!1)}});function h(g){g==="all"?l.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):l.includes(g)?u(l.filter(y=>y!==g)):u([...l,g])}NX(n.sequence);const p=[v.jsx(or.Th,{children:v.jsx(Ct,{justify:"center",children:v.jsx(Qu,{mb:-4,checked:l.length===[...e,...t].length,onChange:()=>h("all")})})},"action"),v.jsx(or.Th,{children:"ID"},"ID"),v.jsx(or.Th,{children:"Status"},"status"),v.jsx(or.Th,{children:"Meta"},"meta"),v.jsx(or.Th,{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>v.jsxs(or.Tr,{children:[v.jsx(or.Td,{children:v.jsx(Ct,{justify:"center",children:v.jsx(Qu,{mb:-4,checked:l.includes(g.participantId),onChange:()=>h(g.participantId)})})}),v.jsx(or.Td,{style:{whiteSpace:"nowrap"},children:g.participantId}),v.jsx(or.Td,{children:v.jsxs(Ct,{direction:"row",align:"center",children:[g.rejected?v.jsx(on,{label:"Rejected",children:v.jsx(HF,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?v.jsx(on,{label:"Completed",children:v.jsx(Lxe,{size:16,color:"teal",style:{marginBottom:-3}})}):v.jsx(on,{label:"In Progress",children:v.jsx(zxe,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&v.jsxs(Xe,{size:"sm",mb:-1,ml:4,children:[(Object.entries(g.answers).filter(([y,b])=>b.endTime!==void 0).length/(Zl(g.sequence).length-1)*100).toFixed(2),"%"]})]})}),g.metadata?v.jsx(ljt,{metaData:g.metadata}):v.jsx(or.Td,{children:"N/A"}),v.jsx(ajt,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?v.jsxs(v.Fragment,{children:[v.jsx(su,{visible:c,overlayProps:{blur:2}}),v.jsxs(Ct,{justify:"space-between",mb:8,p:8,children:[v.jsx(Ln,{children:v.jsx(vf,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,value:null,leftSection:v.jsx(Uxe,{size:14}),onChange:g=>g&&h(g)})}),v.jsxs(Ln,{children:[v.jsx(T3e,{allParticipants:[...e,...t],studyId:s||""}),v.jsx(xn,{disabled:l.length===0||!o.isAdmin,onClick:f,color:"red",children:"Reject Participants"})]})]}),v.jsx(Ct,{direction:"column",style:{width:"100%",overflow:"auto"},children:v.jsxs(or,{striped:!0,withTableBorder:!0,children:[v.jsx(or.Thead,{children:v.jsx(or.Tr,{children:p})}),v.jsx(or.Tbody,{children:m})]})})]}):v.jsx(Ct,{justify:"center",align:"center",style:{height:"100%"},children:v.jsx(Xe,{children:"No data available"})})}const U_=14;function C3e({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return v.jsxs(Ct,{ml:4,gap:4,children:[v.jsx(on,{label:"Completed",children:v.jsx(rf,{variant:"light",color:"green",leftSection:v.jsx(Lxe,{width:U_,height:U_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),v.jsx(on,{label:"In Progress",children:v.jsx(rf,{variant:"light",color:"orange",leftSection:v.jsx(zxe,{width:U_,height:U_,style:{paddingTop:1}}),pb:1,children:t})}),v.jsx(on,{label:"Rejected",children:v.jsx(rf,{variant:"light",color:"red",leftSection:v.jsx(HF,{width:U_,height:U_,style:{paddingTop:1}}),pb:1,children:n})})]})}function cjt({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[l,u]=I.useState(""),[c,d]=I.useState([]),[f,h]=I.useState(""),[p,m]=I.useState(!1),[g,y]=I.useState(!1),{storageEngine:b}=ki(),_=b,w=I.useCallback(async()=>{y(!0);const L=await _.getSnapshots(e);d(L),y(!1)},[_,e]);I.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await _.createSnapshot(e,!1),w(),m(!1),await t()},x=async()=>{m(!0),h(""),r(!1),await _.createSnapshot(e,!0),w(),m(!1),await t()},S=async L=>{m(!0),await _.restoreSnapshot(e,L),w(),m(!1),await t()},C=async()=>{m(!0),h(""),s(!1),await _.removeSnapshotOrLive(l,!0),w(),m(!1),await t()},A=async()=>{m(!0),h(""),a(!1),await _.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},R=()=>mU({title:"Create a Snapshot",children:v.jsx(Xe,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),P=L=>mU({title:"Restore Snapshot",children:v.jsx(Xe,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>S(L)});return v.jsxs(v.Fragment,{children:[v.jsx(su,{visible:p}),v.jsxs(Ct,{justify:"space-between",align:"center",children:[v.jsxs(ge,{style:{width:"70%"},children:[v.jsx(xi,{order:5,children:"Create a Snapshot"}),v.jsxs(Xe,{children:["This will create a snapshot of the live"," ",v.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will"," ",v.jsx(Xe,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),v.jsx(on,{label:"Create a snapshot",children:v.jsx(xn,{onClick:R,children:"Snapshot"})})]}),v.jsx(Hc,{h:"lg"}),v.jsxs(Ct,{justify:"space-between",align:"center",children:[v.jsxs(ge,{style:{width:"70%"},children:[v.jsx(xi,{order:5,children:"Archive Data"}),v.jsxs(Xe,{children:["This will create a snapshot of the live"," ",v.jsx(Xe,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),v.jsx(on,{label:"Snapshot and Delete Data",children:v.jsx(xn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),v.jsx(Hc,{h:"lg"}),v.jsxs(Ct,{justify:"space-between",align:"center",children:[v.jsxs(ge,{style:{width:"70%"},children:[v.jsx(xi,{order:5,children:"Delete Data"}),v.jsxs(Xe,{children:["This will delete the live"," ",v.jsx(Xe,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),v.jsx(on,{label:"Delete Data",children:v.jsx(xn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),v.jsx(Hc,{h:"xl"}),v.jsxs(Ct,{direction:"column",children:[v.jsx(Ct,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:v.jsx(xi,{order:5,children:"Snapshots"})}),v.jsxs(ge,{style:{position:"relative"},children:[v.jsx(su,{visible:g}),c.length>0?c.map(L=>v.jsxs(Ct,{justify:"space-between",mb:"xs",children:[v.jsx(Xe,{children:L}),v.jsxs(Ct,{direction:"row",gap:"xs",children:[v.jsx(on,{label:"Restore Snapshot",children:v.jsx(Bn,{color:"blue",variant:"subtle",onClick:()=>{P(L)},children:v.jsx(vtt,{})})}),v.jsx(on,{label:"Delete Snapshot",children:v.jsx(Bn,{color:"red",variant:"subtle",onClick:()=>{s(!0),u(L)},children:v.jsx(qxe,{})})})]})]},L)):v.jsx(Xe,{children:"No snapshots."})]})]}),v.jsxs(xs,{opened:n,onClose:()=>{r(!1),h("")},title:v.jsx(Xe,{children:"Archive Data"}),children:[v.jsx(Xe,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),v.jsx(of,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:L=>h(L.target.value)}),v.jsxs(Ct,{mt:"sm",justify:"right",children:[v.jsx(xn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),v.jsx(xn,{color:"red",onClick:x,disabled:f!==e,children:"Archive"})]})]}),v.jsxs(xs,{opened:i,onClose:()=>{s(!1),h("")},title:v.jsx(Xe,{children:"Delete Snapshot"}),children:[v.jsxs(Xe,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",v.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),"."]}),v.jsx(of,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:L=>h(L.target.value)}),v.jsxs(Ct,{mt:"sm",justify:"right",children:[v.jsx(xn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),v.jsx(xn,{color:"red",onClick:C,disabled:f!==e,children:"Delete"})]})]}),v.jsxs(xs,{opened:o,onClose:()=>{a(!1),h("")},title:v.jsx(Xe,{children:"Delete Live Data"}),children:[v.jsxs(Xe,{mb:"sm",children:["This will permanently delete the live"," ",v.jsx(Xe,{span:!0,fw:700,children:e})," ","data. This action is"," ",v.jsx(Xe,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),v.jsx(of,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:L=>h(L.target.value)}),v.jsxs(Ct,{mt:"sm",justify:"right",children:[v.jsx(xn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),v.jsx(xn,{color:"red",onClick:A,disabled:f!==e,children:"Delete"})]})]})]})}function djt({studyId:e}){const{storageEngine:t}=ki(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[l,u]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const f=await t.getModes(e);s(f.dataCollectionEnabled),a(f.studyNavigatorEnabled),u(f.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(d,f)=>{t&&(await t.setMode(e,d,f),d==="dataCollectionEnabled"?s(f):d==="studyNavigatorEnabled"?a(f):d==="analyticsInterfacePubliclyAccessible"&&u(f))};return n&&v.jsxs(Es,{children:[v.jsx(M0,{label:"Data Collection Enabled",checked:i,onChange:d=>c("dataCollectionEnabled",d.currentTarget.checked)}),v.jsx(M0,{label:"Study Navigator Enabled",checked:o,onChange:d=>c("studyNavigatorEnabled",d.currentTarget.checked)}),v.jsx(M0,{label:"Analytics Interface Publicly Accessible",checked:l,onChange:d=>c("analyticsInterfacePubliclyAccessible",d.currentTarget.checked)})]})}function fjt({studyId:e,refresh:t}){const{storageEngine:n}=ki();return v.jsx(Of,{children:v.jsxs(Ol,{multiple:!0,variant:"contained",children:[v.jsxs(Ol.Item,{value:"ReVISit Modes",children:[v.jsx(Ol.Control,{children:v.jsx(xi,{order:5,children:"ReVISit Modes"})}),v.jsx(Ol.Panel,{children:v.jsx(djt,{studyId:e})})]},"modes"),v.jsxs(Ol.Item,{value:"Data Management",children:[v.jsx(Ol.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:v.jsx(xi,{order:5,children:"Data Management"})}),v.jsx(Ol.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&v.jsx(cjt,{studyId:e,refresh:t})})]},"dataManagement")]})})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function y0(e,t){return typeof e=="function"?e(t):e}function oc(e,t){return n=>{t.setState(r=>({...r,[e]:y0(n,r[e])}))}}function O4(e){return e instanceof Function}function hjt(e){return Array.isArray(e)&&e.every(t=>typeof t=="number")}function A3e(e,t){const n=[],r=i=>{i.forEach(s=>{n.push(s);const o=t(s);o!=null&&o.length&&r(o)})};return r(e),n}function Ht(e,t,n){let r=[],i;return s=>{let o;n.key&&n.debug&&(o=Date.now());const a=e(s);if(!(a.length!==r.length||a.some((c,d)=>r[d]!==c)))return i;r=a;let u;if(n.key&&n.debug&&(u=Date.now()),i=t(...a),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const c=Math.round((Date.now()-o)*100)/100,d=Math.round((Date.now()-u)*100)/100,f=d/16,h=(p,m)=>{for(p=String(p);p.length<m;)p=" "+p;return p};console.info(`%c ${h(d,5)} /${h(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function qt(e,t,n,r){return{debug:()=>{var i;return(i=e==null?void 0:e.debugAll)!=null?i:e[t]},key:!1,onChange:r}}function pjt(e,t,n,r){const i=()=>{var o;return(o=s.getValue())!=null?o:e.options.renderFallbackValue},s={id:`${t.id}_${n.id}`,row:t,column:n,getValue:()=>t.getValue(r),renderValue:i,getContext:Ht(()=>[e,n,t,s],(o,a,l,u)=>({table:o,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),qt(e.options,"debugCells"))};return e._features.forEach(o=>{o.createCell==null||o.createCell(s,n,t,e)},{}),s}function mjt(e,t,n,r){var i,s;const a={...e._getDefaultColumnDef(),...t},l=a.accessorKey;let u=(i=(s=a.id)!=null?s:l?l.replace(".","_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:l&&(l.includes(".")?c=f=>{let h=f;for(const m of l.split(".")){var p;h=(p=h)==null?void 0:p[m]}return h}:c=f=>f[a.accessorKey]),!u)throw new Error;let d={id:`${String(u)}`,accessorFn:c,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:Ht(()=>[!0],()=>{var f;return[d,...(f=d.columns)==null?void 0:f.flatMap(h=>h.getFlatColumns())]},qt(e.options,"debugColumns")),getLeafColumns:Ht(()=>[e._getOrderColumnsFn()],f=>{var h;if((h=d.columns)!=null&&h.length){let p=d.columns.flatMap(m=>m.getLeafColumns());return f(p)}return[d]},qt(e.options,"debugColumns"))};for(const f of e._features)f.createColumn==null||f.createColumn(d,e);return d}const ga="debugHeaders";function ige(e,t,n){var r;let s={id:(r=n.id)!=null?r:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(s),o},getContext:()=>({table:e,header:s,column:t})};return e._features.forEach(o=>{o.createHeader==null||o.createHeader(s,e)}),s}const gjt={createTable:e=>{e.getHeaderGroups=Ht(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>{var s,o;const a=(s=r==null?void 0:r.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?s:[],l=(o=i==null?void 0:i.map(d=>n.find(f=>f.id===d)).filter(Boolean))!=null?o:[],u=n.filter(d=>!(r!=null&&r.includes(d.id))&&!(i!=null&&i.includes(d.id)));return KN(t,[...a,...u,...l],e)},qt(e.options,ga)),e.getCenterHeaderGroups=Ht(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r,i)=>(n=n.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),KN(t,n,e,"center")),qt(e.options,ga)),e.getLeftHeaderGroups=Ht(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return KN(t,s,e,"left")},qt(e.options,ga)),e.getRightHeaderGroups=Ht(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return KN(t,s,e,"right")},qt(e.options,ga)),e.getFooterGroups=Ht(()=>[e.getHeaderGroups()],t=>[...t].reverse(),qt(e.options,ga)),e.getLeftFooterGroups=Ht(()=>[e.getLeftHeaderGroups()],t=>[...t].reverse(),qt(e.options,ga)),e.getCenterFooterGroups=Ht(()=>[e.getCenterHeaderGroups()],t=>[...t].reverse(),qt(e.options,ga)),e.getRightFooterGroups=Ht(()=>[e.getRightHeaderGroups()],t=>[...t].reverse(),qt(e.options,ga)),e.getFlatHeaders=Ht(()=>[e.getHeaderGroups()],t=>t.map(n=>n.headers).flat(),qt(e.options,ga)),e.getLeftFlatHeaders=Ht(()=>[e.getLeftHeaderGroups()],t=>t.map(n=>n.headers).flat(),qt(e.options,ga)),e.getCenterFlatHeaders=Ht(()=>[e.getCenterHeaderGroups()],t=>t.map(n=>n.headers).flat(),qt(e.options,ga)),e.getRightFlatHeaders=Ht(()=>[e.getRightHeaderGroups()],t=>t.map(n=>n.headers).flat(),qt(e.options,ga)),e.getCenterLeafHeaders=Ht(()=>[e.getCenterFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),qt(e.options,ga)),e.getLeftLeafHeaders=Ht(()=>[e.getLeftFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),qt(e.options,ga)),e.getRightLeafHeaders=Ht(()=>[e.getRightFlatHeaders()],t=>t.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),qt(e.options,ga)),e.getLeafHeaders=Ht(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(t,n,r)=>{var i,s,o,a,l,u;return[...(i=(s=t[0])==null?void 0:s.headers)!=null?i:[],...(o=(a=n[0])==null?void 0:a.headers)!=null?o:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},qt(e.options,ga))}};function KN(e,t,n,r){var i,s;let o=0;const a=function(f,h){h===void 0&&(h=1),o=Math.max(o,h),f.filter(p=>p.getIsVisible()).forEach(p=>{var m;(m=p.columns)!=null&&m.length&&a(p.columns,h+1)},0)};a(e);let l=[];const u=(f,h)=>{const p={depth:h,id:[r,`${h}`].filter(Boolean).join("_"),headers:[]},m=[];f.forEach(g=>{const y=[...m].reverse()[0],b=g.column.depth===p.depth;let _,w=!1;if(b&&g.column.parent?_=g.column.parent:(_=g.column,w=!0),y&&(y==null?void 0:y.column)===_)y.subHeaders.push(g);else{const E=ige(n,_,{id:[r,h,_.id,g==null?void 0:g.id].filter(Boolean).join("_"),isPlaceholder:w,placeholderId:w?`${m.filter(x=>x.column===_).length}`:void 0,depth:h,index:m.length});E.subHeaders.push(g),m.push(E)}p.headers.push(g),g.headerGroup=p}),l.push(p),h>0&&u(m,h-1)},c=t.map((f,h)=>ige(n,f,{depth:o,index:h}));u(c,o-1),l.reverse();const d=f=>f.filter(p=>p.column.getIsVisible()).map(p=>{let m=0,g=0,y=[0];p.subHeaders&&p.subHeaders.length?(y=[],d(p.subHeaders).forEach(_=>{let{colSpan:w,rowSpan:E}=_;m+=w,y.push(E)})):m=1;const b=Math.min(...y);return g=g+b,p.colSpan=m,p.rowSpan=g,{colSpan:m,rowSpan:g}});return d((i=(s=l[0])==null?void 0:s.headers)!=null?i:[]),l}const NR=(e,t,n,r,i,s,o)=>{let a={id:t,index:r,original:n,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=e.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:e.options.renderFallbackValue},subRows:s??[],getLeafRows:()=>A3e(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?e.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:Ht(()=>[e.getAllLeafColumns()],l=>l.map(u=>pjt(e,a,u,u.id)),qt(e.options,"debugRows")),_getAllCellsByColumnId:Ht(()=>[a.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),qt(e.options,"debugRows"))};for(let l=0;l<e._features.length;l++){const u=e._features[l];u==null||u.createRow==null||u.createRow(a,e)}return a},yjt={createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},I3e=(e,t,n)=>{var r;const i=n.toLowerCase();return!!(!((r=e.getValue(t))==null||(r=r.toString())==null||(r=r.toLowerCase())==null)&&r.includes(i))};I3e.autoRemove=e=>ff(e);const k3e=(e,t,n)=>{var r;return!!(!((r=e.getValue(t))==null||(r=r.toString())==null)&&r.includes(n))};k3e.autoRemove=e=>ff(e);const R3e=(e,t,n)=>{var r;return((r=e.getValue(t))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};R3e.autoRemove=e=>ff(e);const P3e=(e,t,n)=>{var r;return(r=e.getValue(t))==null?void 0:r.includes(n)};P3e.autoRemove=e=>ff(e)||!(e!=null&&e.length);const N3e=(e,t,n)=>!n.some(r=>{var i;return!((i=e.getValue(t))!=null&&i.includes(r))});N3e.autoRemove=e=>ff(e)||!(e!=null&&e.length);const O3e=(e,t,n)=>n.some(r=>{var i;return(i=e.getValue(t))==null?void 0:i.includes(r)});O3e.autoRemove=e=>ff(e)||!(e!=null&&e.length);const D3e=(e,t,n)=>e.getValue(t)===n;D3e.autoRemove=e=>ff(e);const M3e=(e,t,n)=>e.getValue(t)==n;M3e.autoRemove=e=>ff(e);const ete=(e,t,n)=>{let[r,i]=n;const s=e.getValue(t);return s>=r&&s<=i};ete.resolveFilterValue=e=>{let[t,n]=e,r=typeof t!="number"?parseFloat(t):t,i=typeof n!="number"?parseFloat(n):n,s=t===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(i)?1/0:i;if(s>o){const a=s;s=o,o=a}return[s,o]};ete.autoRemove=e=>ff(e)||ff(e[0])&&ff(e[1]);const oh={includesString:I3e,includesStringSensitive:k3e,equalsString:R3e,arrIncludes:P3e,arrIncludesAll:N3e,arrIncludesSome:O3e,equals:D3e,weakEquals:M3e,inNumberRange:ete};function ff(e){return e==null||e===""}const vjt={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:oc("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);return typeof r=="string"?oh.includesString:typeof r=="number"?oh.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?oh.equals:Array.isArray(r)?oh.arrIncludes:oh.weakEquals},e.getFilterFn=()=>{var n,r;return O4(e.columnDef.filterFn)?e.columnDef.filterFn:e.columnDef.filterFn==="auto"?e.getAutoFilterFn():(n=(r=t.options.filterFns)==null?void 0:r[e.columnDef.filterFn])!=null?n:oh[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,r,i;return((n=e.columnDef.enableColumnFilter)!=null?n:!0)&&((r=t.options.enableColumnFilters)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return(n=t.getState().columnFilters)==null||(n=n.find(r=>r.id===e.id))==null?void 0:n.value},e.getFilterIndex=()=>{var n,r;return(n=(r=t.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.setFilterValue=n=>{t.setColumnFilters(r=>{const i=e.getFilterFn(),s=r==null?void 0:r.find(c=>c.id===e.id),o=y0(n,s?s.value:void 0);if(sge(i,o,e)){var a;return(a=r==null?void 0:r.filter(c=>c.id!==e.id))!=null?a:[]}const l={id:e.id,value:o};if(s){var u;return(u=r==null?void 0:r.map(c=>c.id===e.id?l:c))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{const n=e.getAllLeafColumns(),r=i=>{var s;return(s=y0(t,i))==null?void 0:s.filter(o=>{const a=n.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(sge(l,o.value,a))return!1}return!0})};e.options.onColumnFiltersChange==null||e.options.onColumnFiltersChange(r)},e.resetColumnFilters=t=>{var n,r;e.setColumnFilters(t?[]:(n=(r=e.initialState)==null?void 0:r.columnFilters)!=null?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel?e.getPreFilteredRowModel():e._getFilteredRowModel())}};function sge(e,t,n){return(e&&e.autoRemove?e.autoRemove(t,n):!1)||typeof t>"u"||typeof t=="string"&&!t}const bjt=(e,t,n)=>n.reduce((r,i)=>{const s=i.getValue(e);return r+(typeof s=="number"?s:0)},0),_jt=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},wjt=(e,t,n)=>{let r;return n.forEach(i=>{const s=i.getValue(e);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},Ejt=(e,t,n)=>{let r,i;return n.forEach(s=>{const o=s.getValue(e);o!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}),[r,i]},xjt=(e,t)=>{let n=0,r=0;if(t.forEach(i=>{let s=i.getValue(e);s!=null&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},Sjt=(e,t)=>{if(!t.length)return;const n=t.map(s=>s.getValue(e));if(!hjt(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((s,o)=>s-o);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},Tjt=(e,t)=>Array.from(new Set(t.map(n=>n.getValue(e))).values()),Cjt=(e,t)=>new Set(t.map(n=>n.getValue(e))).size,Ajt=(e,t)=>t.length,TD={sum:bjt,min:_jt,max:wjt,extent:Ejt,mean:xjt,median:Sjt,unique:Tjt,uniqueCount:Cjt,count:Ajt},Ijt={getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return(t=(n=e.getValue())==null||n.toString==null?void 0:n.toString())!=null?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:oc("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(n=>n!=null&&n.includes(e.id)?n.filter(r=>r!==e.id):[...n??[],e.id])},e.getCanGroup=()=>{var n,r;return((n=e.columnDef.enableGrouping)!=null?n:!0)&&((r=t.options.enableGrouping)!=null?r:!0)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return(n=t.getState().grouping)==null?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{const n=e.getCanGroup();return()=>{n&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{const n=t.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(e.id);if(typeof r=="number")return TD.sum;if(Object.prototype.toString.call(r)==="[object Date]")return TD.extent},e.getAggregationFn=()=>{var n,r;if(!e)throw new Error;return O4(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:e.columnDef.aggregationFn==="auto"?e.getAutoAggregationFn():(n=(r=t.options.aggregationFns)==null?void 0:r[e.columnDef.aggregationFn])!=null?n:TD[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>e.options.onGroupingChange==null?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,r;e.setGrouping(t?[]:(n=(r=e.initialState)==null?void 0:r.grouping)!=null?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel?e.getPreGroupedRowModel():e._getGroupedRowModel())},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];const r=t.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(e._groupingValuesCache[n]=r.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,r)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var i;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function kjt(e,t,n){if(!(t!=null&&t.length)||!n)return e;const r=e.filter(s=>!t.includes(s.id));return n==="remove"?r:[...t.map(s=>e.find(o=>o.id===s)).filter(Boolean),...r]}const Rjt={getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:oc("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=Ht(n=>[dA(t,n)],n=>n.findIndex(r=>r.id===e.id),qt(t.options,"debugColumns")),e.getIsFirstColumn=n=>{var r;return((r=dA(t,n)[0])==null?void 0:r.id)===e.id},e.getIsLastColumn=n=>{var r;const i=dA(t,n);return((r=i[i.length-1])==null?void 0:r.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>e.options.onColumnOrderChange==null?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:(n=e.initialState.columnOrder)!=null?n:[])},e._getOrderColumnsFn=Ht(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(t,n,r)=>i=>{let s=[];if(!(t!=null&&t.length))s=i;else{const o=[...t],a=[...i];for(;a.length&&o.length;){const l=o.shift(),u=a.findIndex(c=>c.id===l);u>-1&&s.push(a.splice(u,1)[0])}s=[...s,...a]}return kjt(s,n,r)},qt(e.options,"debugTable"))}},P9=()=>({left:[],right:[]}),Pjt={getInitialState:e=>({columnPinning:P9(),...e}),getDefaultOptions:e=>({onColumnPinningChange:oc("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{const r=e.getLeafColumns().map(i=>i.id).filter(Boolean);t.setColumnPinning(i=>{var s,o;if(n==="right"){var a,l;return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(d=>!(r!=null&&r.includes(d))),right:[...((l=i==null?void 0:i.right)!=null?l:[]).filter(d=>!(r!=null&&r.includes(d))),...r]}}if(n==="left"){var u,c;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(d=>!(r!=null&&r.includes(d))),...r],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(d=>!(r!=null&&r.includes(d)))}}return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(d=>!(r!=null&&r.includes(d))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(d=>!(r!=null&&r.includes(d)))}})},e.getCanPin=()=>e.getLeafColumns().some(r=>{var i,s,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(o=t.options.enableColumnPinning)!=null?o:t.options.enablePinning)!=null?s:!0)}),e.getIsPinned=()=>{const n=e.getLeafColumns().map(a=>a.id),{left:r,right:i}=t.getState().columnPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"left":o?"right":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();return i?(n=(r=t.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(e.id))!=null?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=Ht(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(n,r,i)=>{const s=[...r??[],...i??[]];return n.filter(o=>!s.includes(o.column.id))},qt(t.options,"debugRows")),e.getLeftVisibleCells=Ht(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),qt(t.options,"debugRows")),e.getRightVisibleCells=Ht(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),qt(t.options,"debugRows"))},createTable:e=>{e.setColumnPinning=t=>e.options.onColumnPinningChange==null?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,r;return e.setColumnPinning(t?P9():(n=(r=e.initialState)==null?void 0:r.columnPinning)!=null?n:P9())},e.getIsSomeColumnsPinned=t=>{var n;const r=e.getState().columnPinning;if(!t){var i,s;return!!((i=r.left)!=null&&i.length||(s=r.right)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e.getLeftLeafColumns=Ht(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),qt(e.options,"debugColumns")),e.getRightLeafColumns=Ht(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(t,n)=>(n??[]).map(r=>t.find(i=>i.id===r)).filter(Boolean),qt(e.options,"debugColumns")),e.getCenterLeafColumns=Ht(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,r)=>{const i=[...n??[],...r??[]];return t.filter(s=>!i.includes(s.id))},qt(e.options,"debugColumns"))}},XN={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},N9=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Njt={getDefaultColumnDef:()=>XN,getInitialState:e=>({columnSizing:{},columnSizingInfo:N9(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:oc("columnSizing",e),onColumnSizingInfoChange:oc("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,r,i;const s=t.getState().columnSizing[e.id];return Math.min(Math.max((n=e.columnDef.minSize)!=null?n:XN.minSize,(r=s??e.columnDef.size)!=null?r:XN.size),(i=e.columnDef.maxSize)!=null?i:XN.maxSize)},e.getStart=Ht(n=>[n,dA(t,n),t.getState().columnSizing],(n,r)=>r.slice(0,e.getIndex(n)).reduce((i,s)=>i+s.getSize(),0),qt(t.options,"debugColumns")),e.getAfter=Ht(n=>[n,dA(t,n),t.getState().columnSizing],(n,r)=>r.slice(e.getIndex(n)+1).reduce((i,s)=>i+s.getSize(),0),qt(t.options,"debugColumns")),e.resetSize=()=>{t.setColumnSizing(n=>{let{[e.id]:r,...i}=n;return i})},e.getCanResize=()=>{var n,r;return((n=e.columnDef.enableResizing)!=null?n:!0)&&((r=t.options.enableColumnResizing)!=null?r:!0)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;n+=(s=i.column.getSize())!=null?s:0}};return r(e),n},e.getStart=()=>{if(e.index>0){const n=e.headerGroup.headers[e.index-1];return n.getStart()+n.getSize()}return 0},e.getResizeHandler=n=>{const r=t.getColumn(e.column.id),i=r==null?void 0:r.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),O9(s)&&s.touches&&s.touches.length>1))return;const o=e.getSize(),a=e?e.getLeafHeaders().map(y=>[y.column.id,y.column.getSize()]):[[r.id,r.getSize()]],l=O9(s)?Math.round(s.touches[0].clientX):s.clientX,u={},c=(y,b)=>{typeof b=="number"&&(t.setColumnSizingInfo(_=>{var w,E;const x=t.options.columnResizeDirection==="rtl"?-1:1,S=(b-((w=_==null?void 0:_.startOffset)!=null?w:0))*x,C=Math.max(S/((E=_==null?void 0:_.startSize)!=null?E:0),-.999999);return _.columnSizingStart.forEach(A=>{let[R,P]=A;u[R]=Math.round(Math.max(P+P*C,0)*100)/100}),{..._,deltaOffset:S,deltaPercentage:C}}),(t.options.columnResizeMode==="onChange"||y==="end")&&t.setColumnSizing(_=>({..._,...u})))},d=y=>c("move",y),f=y=>{c("end",y),t.setColumnSizingInfo(b=>({...b,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},h=n||typeof document<"u"?document:null,p={moveHandler:y=>d(y.clientX),upHandler:y=>{h==null||h.removeEventListener("mousemove",p.moveHandler),h==null||h.removeEventListener("mouseup",p.upHandler),f(y.clientX)}},m={moveHandler:y=>(y.cancelable&&(y.preventDefault(),y.stopPropagation()),d(y.touches[0].clientX),!1),upHandler:y=>{var b;h==null||h.removeEventListener("touchmove",m.moveHandler),h==null||h.removeEventListener("touchend",m.upHandler),y.cancelable&&(y.preventDefault(),y.stopPropagation()),f((b=y.touches[0])==null?void 0:b.clientX)}},g=Ojt()?{passive:!1}:!1;O9(s)?(h==null||h.addEventListener("touchmove",m.moveHandler,g),h==null||h.addEventListener("touchend",m.upHandler,g)):(h==null||h.addEventListener("mousemove",p.moveHandler,g),h==null||h.addEventListener("mouseup",p.upHandler,g)),t.setColumnSizingInfo(y=>({...y,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:e=>{e.setColumnSizing=t=>e.options.onColumnSizingChange==null?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>e.options.onColumnSizingInfoChange==null?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:(n=e.initialState.columnSizing)!=null?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?N9():(n=e.initialState.columnSizingInfo)!=null?n:N9())},e.getTotalSize=()=>{var t,n;return(t=(n=e.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getLeftTotalSize=()=>{var t,n;return(t=(n=e.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getCenterTotalSize=()=>{var t,n;return(t=(n=e.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0},e.getRightTotalSize=()=>{var t,n;return(t=(n=e.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?t:0}}};let QN=null;function Ojt(){if(typeof QN=="boolean")return QN;let e=!1;try{const t={get passive(){return e=!0,!1}},n=()=>{};window.addEventListener("test",n,t),window.removeEventListener("test",n)}catch{e=!1}return QN=e,QN}function O9(e){return e.type==="touchstart"}const Djt={getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:oc("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(r=>({...r,[e.id]:n??!e.getIsVisible()}))},e.getIsVisible=()=>{var n,r;const i=e.columns;return(n=i.length?i.some(s=>s.getIsVisible()):(r=t.getState().columnVisibility)==null?void 0:r[e.id])!=null?n:!0},e.getCanHide=()=>{var n,r;return((n=e.columnDef.enableHiding)!=null?n:!0)&&((r=t.options.enableHiding)!=null?r:!0)},e.getToggleVisibilityHandler=()=>n=>{e.toggleVisibility==null||e.toggleVisibility(n.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=Ht(()=>[e.getAllCells(),t.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),qt(t.options,"debugRows")),e.getVisibleCells=Ht(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],qt(t.options,"debugRows"))},createTable:e=>{const t=(n,r)=>Ht(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),qt(e.options,"debugColumns"));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=n=>e.options.onColumnVisibilityChange==null?void 0:e.options.onColumnVisibilityChange(n),e.resetColumnVisibility=n=>{var r;e.setColumnVisibility(n?{}:(r=e.initialState.columnVisibility)!=null?r:{})},e.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:n||!(s.getCanHide!=null&&s.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;e.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function dA(e,t){return t?t==="center"?e.getCenterVisibleLeafColumns():t==="left"?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}const Mjt={createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},$jt={getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:oc("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;const r=(n=e.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[t.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,r,i,s;return((n=e.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=t.options.enableGlobalFilter)!=null?r:!0)&&((i=t.options.enableFilters)!=null?i:!0)&&((s=t.options.getColumnCanGlobalFilter==null?void 0:t.options.getColumnCanGlobalFilter(e))!=null?s:!0)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>oh.includesString,e.getGlobalFilterFn=()=>{var t,n;const{globalFilterFn:r}=e.options;return O4(r)?r:r==="auto"?e.getGlobalAutoFilterFn():(t=(n=e.options.filterFns)==null?void 0:n[r])!=null?t:oh[r]},e.setGlobalFilter=t=>{e.options.onGlobalFilterChange==null||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},Ljt={getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:oc("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetExpanded)!=null?r:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=r=>e.options.onExpandedChange==null?void 0:e.options.onExpandedChange(r),e.toggleAllRowsExpanded=r=>{r??!e.getIsAllRowsExpanded()?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=r=>{var i,s;e.setExpanded(r?{}:(i=(s=e.initialState)==null?void 0:s.expanded)!=null?i:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{const r=e.getState().expanded;return r===!0||Object.values(r).some(Boolean)},e.getIsAllRowsExpanded=()=>{const r=e.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||e.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},e.getExpandedDepth=()=>{let r=0;return(e.getState().expanded===!0?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(s=>{const o=s.split(".");r=Math.max(r,o.length)}),r},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel?e.getPreExpandedRowModel():e._getExpandedRowModel())},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[e.id]);let o={};if(r===!0?Object.keys(t.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,n=(i=n)!=null?i:!s,!s&&n)return{...o,[e.id]:!0};if(s&&!n){const{[e.id]:a,...l}=o;return l}return r})},e.getIsExpanded=()=>{var n;const r=t.getState().expanded;return!!((n=t.options.getIsRowExpanded==null?void 0:t.options.getIsRowExpanded(e))!=null?n:r===!0||r!=null&&r[e.id])},e.getCanExpand=()=>{var n,r,i;return(n=t.options.getRowCanExpand==null?void 0:t.options.getRowCanExpand(e))!=null?n:((r=t.options.enableExpanding)!=null?r:!0)&&!!((i=e.subRows)!=null&&i.length)},e.getIsAllParentsExpanded=()=>{let n=!0,r=e;for(;n&&r.parentId;)r=t.getRow(r.parentId,!0),n=r.getIsExpanded();return n},e.getToggleExpandedHandler=()=>{const n=e.getCanExpand();return()=>{n&&e.toggleExpanded()}}}},oq=0,aq=10,D9=()=>({pageIndex:oq,pageSize:aq}),Fjt={getInitialState:e=>({...e,pagination:{...D9(),...e==null?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:oc("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var r,i;if(!t){e._queue(()=>{t=!0});return}if((r=(i=e.options.autoResetAll)!=null?i:e.options.autoResetPageIndex)!=null?r:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=r=>{const i=s=>y0(r,s);return e.options.onPaginationChange==null?void 0:e.options.onPaginationChange(i)},e.resetPagination=r=>{var i;e.setPagination(r?D9():(i=e.initialState.pagination)!=null?i:D9())},e.setPageIndex=r=>{e.setPagination(i=>{let s=y0(r,i.pageIndex);const o=typeof e.options.pageCount>"u"||e.options.pageCount===-1?Number.MAX_SAFE_INTEGER:e.options.pageCount-1;return s=Math.max(0,Math.min(s,o)),{...i,pageIndex:s}})},e.resetPageIndex=r=>{var i,s;e.setPageIndex(r?oq:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:oq)},e.resetPageSize=r=>{var i,s;e.setPageSize(r?aq:(i=(s=e.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:aq)},e.setPageSize=r=>{e.setPagination(i=>{const s=Math.max(1,y0(r,i.pageSize)),o=i.pageSize*i.pageIndex,a=Math.floor(o/s);return{...i,pageIndex:a,pageSize:s}})},e.setPageCount=r=>e.setPagination(i=>{var s;let o=y0(r,(s=e.options.pageCount)!=null?s:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),e.getPageOptions=Ht(()=>[e.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,o)=>o)),i},qt(e.options,"debugTable")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{const{pageIndex:r}=e.getState().pagination,i=e.getPageCount();return i===-1?!0:i===0?!1:r<i-1},e.previousPage=()=>e.setPageIndex(r=>r-1),e.nextPage=()=>e.setPageIndex(r=>r+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel?e.getPrePaginationRowModel():e._getPaginationRowModel()),e.getPageCount=()=>{var r;return(r=e.options.pageCount)!=null?r:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var r;return(r=e.options.rowCount)!=null?r:e.getPrePaginationRowModel().rows.length}}},M9=()=>({top:[],bottom:[]}),jjt={getInitialState:e=>({rowPinning:M9(),...e}),getDefaultOptions:e=>({onRowPinningChange:oc("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,r,i)=>{const s=r?e.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=i?e.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...o,e.id,...s]);t.setRowPinning(l=>{var u,c;if(n==="bottom"){var d,f;return{top:((d=l==null?void 0:l.top)!=null?d:[]).filter(m=>!(a!=null&&a.has(m))),bottom:[...((f=l==null?void 0:l.bottom)!=null?f:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)]}}if(n==="top"){var h,p;return{top:[...((h=l==null?void 0:l.top)!=null?h:[]).filter(m=>!(a!=null&&a.has(m))),...Array.from(a)],bottom:((p=l==null?void 0:l.bottom)!=null?p:[]).filter(m=>!(a!=null&&a.has(m)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(m=>!(a!=null&&a.has(m))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(m=>!(a!=null&&a.has(m)))}})},e.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=t.options;return typeof r=="function"?r(e):(n=r??i)!=null?n:!0},e.getIsPinned=()=>{const n=[e.id],{top:r,bottom:i}=t.getState().rowPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"top":o?"bottom":!1},e.getPinnedIndex=()=>{var n,r;const i=e.getIsPinned();if(!i)return-1;const s=(n=t._getPinnedRows(i))==null?void 0:n.map(o=>{let{id:a}=o;return a});return(r=s==null?void 0:s.indexOf(e.id))!=null?r:-1}},createTable:e=>{e.setRowPinning=t=>e.options.onRowPinningChange==null?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,r;return e.setRowPinning(t?M9():(n=(r=e.initialState)==null?void 0:r.rowPinning)!=null?n:M9())},e.getIsSomeRowsPinned=t=>{var n;const r=e.getState().rowPinning;if(!t){var i,s;return!!((i=r.top)!=null&&i.length||(s=r.bottom)!=null&&s.length)}return!!((n=r[t])!=null&&n.length)},e._getPinnedRows=Ht(t=>[e.getRowModel().rows,e.getState().rowPinning[t],t],(t,n,r)=>{var i;return((i=e.options.keepPinnedRows)==null||i?(n??[]).map(o=>{const a=e.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(o=>t.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},qt(e.options,"debugRows")),e.getTopRows=()=>e._getPinnedRows("top"),e.getBottomRows=()=>e._getPinnedRows("bottom"),e.getCenterRows=Ht(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(t,n,r)=>{const i=new Set([...n??[],...r??[]]);return t.filter(s=>!i.has(s.id))},qt(e.options,"debugRows"))}},Bjt={getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:oc("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>e.options.onRowSelectionChange==null?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:(n=e.initialState.rowSelection)!=null?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=typeof t<"u"?t:!e.getIsAllRowsSelected();const r={...n},i=e.getPreGroupedRowModel().flatRows;return t?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{const r=typeof t<"u"?t:!e.getIsAllPageRowsSelected(),i={...n};return e.getRowModel().rows.forEach(s=>{lq(i,s.id,r,!0,e)}),i}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=Ht(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?$9(e,n):{rows:[],flatRows:[],rowsById:{}},qt(e.options,"debugTable")),e.getFilteredSelectedRowModel=Ht(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?$9(e,n):{rows:[],flatRows:[],rowsById:{}},qt(e.options,"debugTable")),e.getGroupedSelectedRowModel=Ht(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?$9(e,n):{rows:[],flatRows:[],rowsById:{}},qt(e.options,"debugTable")),e.getIsAllRowsSelected=()=>{const t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState();let r=!!(t.length&&Object.keys(n).length);return r&&t.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},e.getIsAllPageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=e.getState();let r=!!t.length;return r&&t.some(i=>!n[i.id])&&(r=!1),r},e.getIsSomeRowsSelected=()=>{var t;const n=Object.keys((t=e.getState().rowSelection)!=null?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{const t=e.getPaginationRowModel().flatRows;return e.getIsAllPageRowsSelected()?!1:t.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,r)=>{const i=e.getIsSelected();t.setRowSelection(s=>{var o;if(n=typeof n<"u"?n:!i,e.getCanSelect()&&i===n)return s;const a={...s};return lq(a,e.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,t),a})},e.getIsSelected=()=>{const{rowSelection:n}=t.getState();return tte(e,n)},e.getIsSomeSelected=()=>{const{rowSelection:n}=t.getState();return uq(e,n)==="some"},e.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=t.getState();return uq(e,n)==="all"},e.getCanSelect=()=>{var n;return typeof t.options.enableRowSelection=="function"?t.options.enableRowSelection(e):(n=t.options.enableRowSelection)!=null?n:!0},e.getCanSelectSubRows=()=>{var n;return typeof t.options.enableSubRowSelection=="function"?t.options.enableSubRowSelection(e):(n=t.options.enableSubRowSelection)!=null?n:!0},e.getCanMultiSelect=()=>{var n;return typeof t.options.enableMultiRowSelection=="function"?t.options.enableMultiRowSelection(e):(n=t.options.enableMultiRowSelection)!=null?n:!0},e.getToggleSelectedHandler=()=>{const n=e.getCanSelect();return r=>{var i;n&&e.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},lq=(e,t,n,r,i)=>{var s;const o=i.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(a=>delete e[a]),o.getCanSelect()&&(e[t]=!0)):delete e[t],r&&(s=o.subRows)!=null&&s.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>lq(e,a.id,n,r,i))};function $9(e,t){const n=e.getState().rowSelection,r=[],i={},s=function(o,a){return o.map(l=>{var u;const c=tte(l,n);if(c&&(r.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:s(l.subRows)}),c)return l}).filter(Boolean)};return{rows:s(t.rows),flatRows:r,rowsById:i}}function tte(e,t){var n;return(n=t[e.id])!=null?n:!1}function uq(e,t,n){var r;if(!((r=e.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return e.subRows.forEach(o=>{if(!(s&&!i)&&(o.getCanSelect()&&(tte(o,t)?s=!0:i=!1),o.subRows&&o.subRows.length)){const a=uq(o,t);a==="all"?s=!0:(a==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const cq=/([0-9]+)/gm,zjt=(e,t,n)=>$3e(Sy(e.getValue(n)).toLowerCase(),Sy(t.getValue(n)).toLowerCase()),Ujt=(e,t,n)=>$3e(Sy(e.getValue(n)),Sy(t.getValue(n))),Vjt=(e,t,n)=>nte(Sy(e.getValue(n)).toLowerCase(),Sy(t.getValue(n)).toLowerCase()),Hjt=(e,t,n)=>nte(Sy(e.getValue(n)),Sy(t.getValue(n))),qjt=(e,t,n)=>{const r=e.getValue(n),i=t.getValue(n);return r>i?1:r<i?-1:0},Wjt=(e,t,n)=>nte(e.getValue(n),t.getValue(n));function nte(e,t){return e===t?0:e>t?1:-1}function Sy(e){return typeof e=="number"?isNaN(e)||e===1/0||e===-1/0?"":String(e):typeof e=="string"?e:""}function $3e(e,t){const n=e.split(cq).filter(Boolean),r=t.split(cq).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),s=r.shift(),o=parseInt(i,10),a=parseInt(s,10),l=[o,a].sort();if(isNaN(l[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return n.length-r.length}const u1={alphanumeric:zjt,alphanumericCaseSensitive:Ujt,text:Vjt,textCaseSensitive:Hjt,datetime:qjt,basic:Wjt},Gjt={getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:oc("sorting",e),isMultiSortEvent:t=>t.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{const n=t.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const s=i==null?void 0:i.getValue(e.id);if(Object.prototype.toString.call(s)==="[object Date]")return u1.datetime;if(typeof s=="string"&&(r=!0,s.split(cq).length>1))return u1.alphanumeric}return r?u1.text:u1.basic},e.getAutoSortDir=()=>{const n=t.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(e.id))=="string"?"asc":"desc"},e.getSortingFn=()=>{var n,r;if(!e)throw new Error;return O4(e.columnDef.sortingFn)?e.columnDef.sortingFn:e.columnDef.sortingFn==="auto"?e.getAutoSortingFn():(n=(r=t.options.sortingFns)==null?void 0:r[e.columnDef.sortingFn])!=null?n:u1[e.columnDef.sortingFn]},e.toggleSorting=(n,r)=>{const i=e.getNextSortingOrder(),s=typeof n<"u"&&n!==null;t.setSorting(o=>{const a=o==null?void 0:o.find(h=>h.id===e.id),l=o==null?void 0:o.findIndex(h=>h.id===e.id);let u=[],c,d=s?n:i==="desc";if(o!=null&&o.length&&e.getCanMultiSort()&&r?a?c="toggle":c="add":o!=null&&o.length&&l!==o.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(s||i||(c="remove")),c==="add"){var f;u=[...o,{id:e.id,desc:d}],u.splice(0,u.length-((f=t.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=o.map(h=>h.id===e.id?{...h,desc:d}:h):c==="remove"?u=o.filter(h=>h.id!==e.id):u=[{id:e.id,desc:d}];return u})},e.getFirstSortDir=()=>{var n,r;return((n=(r=e.columnDef.sortDescFirst)!=null?r:t.options.sortDescFirst)!=null?n:e.getAutoSortDir()==="desc")?"desc":"asc"},e.getNextSortingOrder=n=>{var r,i;const s=e.getFirstSortDir(),o=e.getIsSorted();return o?o!==s&&((r=t.options.enableSortingRemoval)==null||r)&&(!(n&&(i=t.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":s},e.getCanSort=()=>{var n,r;return((n=e.columnDef.enableSorting)!=null?n:!0)&&((r=t.options.enableSorting)!=null?r:!0)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,r;return(n=(r=e.columnDef.enableMultiSort)!=null?r:t.options.enableMultiSort)!=null?n:!!e.accessorFn},e.getIsSorted=()=>{var n;const r=(n=t.getState().sorting)==null?void 0:n.find(i=>i.id===e.id);return r?r.desc?"desc":"asc":!1},e.getSortIndex=()=>{var n,r;return(n=(r=t.getState().sorting)==null?void 0:r.findIndex(i=>i.id===e.id))!=null?n:-1},e.clearSorting=()=>{t.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==e.id):[])},e.getToggleSortingHandler=()=>{const n=e.getCanSort();return r=>{n&&(r.persist==null||r.persist(),e.toggleSorting==null||e.toggleSorting(void 0,e.getCanMultiSort()?t.options.isMultiSortEvent==null?void 0:t.options.isMultiSortEvent(r):!1))}}},createTable:e=>{e.setSorting=t=>e.options.onSortingChange==null?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,r;e.setSorting(t?[]:(n=(r=e.initialState)==null?void 0:r.sorting)!=null?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel?e.getPreSortedRowModel():e._getSortedRowModel())}},Yjt=[gjt,Djt,Rjt,Pjt,yjt,vjt,Mjt,$jt,Gjt,Ijt,Ljt,Fjt,jjt,Bjt,Njt];function Kjt(e){var t,n;const r=[...Yjt,...(t=e._features)!=null?t:[]];let i={_features:r};const s=i._features.reduce((f,h)=>Object.assign(f,h.getDefaultOptions==null?void 0:h.getDefaultOptions(i)),{}),o=f=>i.options.mergeOptions?i.options.mergeOptions(s,f):{...s,...f};let l={...{},...(n=e.initialState)!=null?n:{}};i._features.forEach(f=>{var h;l=(h=f.getInitialState==null?void 0:f.getInitialState(l))!=null?h:l});const u=[];let c=!1;const d={_features:r,options:{...s,...e},initialState:l,_queue:f=>{u.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();c=!1}).catch(h=>setTimeout(()=>{throw h})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const h=y0(f,i.options);i.options=o(h)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,h,p)=>{var m;return(m=i.options.getRowId==null?void 0:i.options.getRowId(f,h,p))!=null?m:`${p?[p.id,h].join("."):h}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,h)=>{let p=(h?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!p&&(p=i.getCoreRowModel().rowsById[f],!p))throw new Error;return p},_getDefaultColumnDef:Ht(()=>[i.options.defaultColumn],f=>{var h;return f=(h=f)!=null?h:{},{header:p=>{const m=p.header.column.columnDef;return m.accessorKey?m.accessorKey:m.accessorFn?m.id:null},cell:p=>{var m,g;return(m=(g=p.renderValue())==null||g.toString==null?void 0:g.toString())!=null?m:null},...i._features.reduce((p,m)=>Object.assign(p,m.getDefaultColumnDef==null?void 0:m.getDefaultColumnDef()),{}),...f}},qt(e,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:Ht(()=>[i._getColumnDefs()],f=>{const h=function(p,m,g){return g===void 0&&(g=0),p.map(y=>{const b=mjt(i,y,g,m),_=y;return b.columns=_.columns?h(_.columns,b,g+1):[],b})};return h(f)},qt(e,"debugColumns")),getAllFlatColumns:Ht(()=>[i.getAllColumns()],f=>f.flatMap(h=>h.getFlatColumns()),qt(e,"debugColumns")),_getAllFlatColumnsById:Ht(()=>[i.getAllFlatColumns()],f=>f.reduce((h,p)=>(h[p.id]=p,h),{}),qt(e,"debugColumns")),getAllLeafColumns:Ht(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,h)=>{let p=f.flatMap(m=>m.getLeafColumns());return h(p)},qt(e,"debugColumns")),getColumn:f=>i._getAllFlatColumnsById()[f]};Object.assign(i,d);for(let f=0;f<i._features.length;f++){const h=i._features[f];h==null||h.createTable==null||h.createTable(i)}return i}function Xjt(){return e=>Ht(()=>[e.options.data],t=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,s,o){s===void 0&&(s=0);const a=[];for(let u=0;u<i.length;u++){const c=NR(e,e._getRowId(i[u],u,o),i[u],u,s,void 0,o==null?void 0:o.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,a.push(c),e.options.getSubRows){var l;c.originalSubRows=e.options.getSubRows(i[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=r(c.originalSubRows,s+1,c))}}return a};return n.rows=r(t),n},qt(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex()))}function Qjt(){return e=>Ht(()=>[e.getState().expanded,e.getPreExpandedRowModel(),e.options.paginateExpandedRows],(t,n,r)=>!n.rows.length||t!==!0&&!Object.keys(t??{}).length||!r?n:L3e(n),qt(e.options,"debugTable"))}function L3e(e){const t=[],n=r=>{var i;t.push(r),(i=r.subRows)!=null&&i.length&&r.getIsExpanded()&&r.subRows.forEach(n)};return e.rows.forEach(n),{rows:t,flatRows:e.flatRows,rowsById:e.rowsById}}function Jjt(){return(e,t)=>Ht(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{var r;if(!n)return;const i=(r=n.flatRows[0])==null?void 0:r.getUniqueValues(t);if(typeof i>"u")return;let s=[i,i];for(let o=0;o<n.flatRows.length;o++){const a=n.flatRows[o].getUniqueValues(t);for(let l=0;l<a.length;l++){const u=a[l];u<s[0]?s[0]=u:u>s[1]&&(s[1]=u)}}return s},qt(e.options,"debugTable"))}function F3e(e,t,n){return n.options.filterFromLeafRows?Zjt(e,t,n):e5t(e,t,n)}function Zjt(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){var d;let h=l[f];const p=NR(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);if(p.columnFilters=h.columnFilters,(d=h.subRows)!=null&&d.length&&u<o){if(p.subRows=a(h.subRows,u+1),h=p,t(h)&&!p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}if(t(h)||p.subRows.length){c.push(h),s[h.id]=h,i.push(h);continue}}else h=p,t(h)&&(c.push(h),s[h.id]=h,i.push(h))}return c};return{rows:a(e),flatRows:i,rowsById:s}}function e5t(e,t,n){var r;const i=[],s={},o=(r=n.options.maxLeafRowFilterDepth)!=null?r:100,a=function(l,u){u===void 0&&(u=0);const c=[];for(let f=0;f<l.length;f++){let h=l[f];if(t(h)){var d;if((d=h.subRows)!=null&&d.length&&u<o){const m=NR(n,h.id,h.original,h.index,h.depth,void 0,h.parentId);m.subRows=a(h.subRows,u+1),h=m}c.push(h),i.push(h),s[h.id]=h}}return c};return{rows:a(e),flatRows:i,rowsById:s}}function t5t(){return(e,t)=>Ht(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter,e.getFilteredRowModel()],(n,r,i)=>{if(!n.rows.length||!(r!=null&&r.length)&&!i)return n;const s=[...r.map(a=>a.id).filter(a=>a!==t),i?"__global__":void 0].filter(Boolean),o=a=>{for(let l=0;l<s.length;l++)if(a.columnFilters[s[l]]===!1)return!1;return!0};return F3e(n.rows,o,e)},qt(e.options,"debugTable"))}function n5t(){return(e,t)=>Ht(()=>{var n;return[(n=e.getColumn(t))==null?void 0:n.getFacetedRowModel()]},n=>{if(!n)return new Map;let r=new Map;for(let s=0;s<n.flatRows.length;s++){const o=n.flatRows[s].getUniqueValues(t);for(let a=0;a<o.length;a++){const l=o[a];if(r.has(l)){var i;r.set(l,((i=r.get(l))!=null?i:0)+1)}else r.set(l,1)}}return r},qt(e.options,"debugTable"))}function r5t(){return e=>Ht(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,r)=>{if(!t.rows.length||!(n!=null&&n.length)&&!r){for(let f=0;f<t.flatRows.length;f++)t.flatRows[f].columnFilters={},t.flatRows[f].columnFiltersMeta={};return t}const i=[],s=[];(n??[]).forEach(f=>{var h;const p=e.getColumn(f.id);if(!p)return;const m=p.getFilterFn();m&&i.push({id:f.id,filterFn:m,resolvedValue:(h=m.resolveFilterValue==null?void 0:m.resolveFilterValue(f.value))!=null?h:f.value})});const o=(n??[]).map(f=>f.id),a=e.getGlobalFilterFn(),l=e.getAllLeafColumns().filter(f=>f.getCanGlobalFilter());r&&a&&l.length&&(o.push("__global__"),l.forEach(f=>{var h;s.push({id:f.id,filterFn:a,resolvedValue:(h=a.resolveFilterValue==null?void 0:a.resolveFilterValue(r))!=null?h:r})}));let u,c;for(let f=0;f<t.flatRows.length;f++){const h=t.flatRows[f];if(h.columnFilters={},i.length)for(let p=0;p<i.length;p++){u=i[p];const m=u.id;h.columnFilters[m]=u.filterFn(h,m,u.resolvedValue,g=>{h.columnFiltersMeta[m]=g})}if(s.length){for(let p=0;p<s.length;p++){c=s[p];const m=c.id;if(c.filterFn(h,m,c.resolvedValue,g=>{h.columnFiltersMeta[m]=g})){h.columnFilters.__global__=!0;break}}h.columnFilters.__global__!==!0&&(h.columnFilters.__global__=!1)}}const d=f=>{for(let h=0;h<o.length;h++)if(f.columnFilters[o[h]]===!1)return!1;return!0};return F3e(t.rows,d,e)},qt(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex()))}function i5t(){return e=>Ht(()=>[e.getState().grouping,e.getPreGroupedRowModel()],(t,n)=>{if(!n.rows.length||!t.length)return n;const r=t.filter(l=>e.getColumn(l)),i=[],s={},o=function(l,u,c){if(u===void 0&&(u=0),u>=r.length)return l.map(p=>(p.depth=u,i.push(p),s[p.id]=p,p.subRows&&(p.subRows=o(p.subRows,u+1,p.id)),p));const d=r[u],f=s5t(l,d);return Array.from(f.entries()).map((p,m)=>{let[g,y]=p,b=`${d}:${g}`;b=c?`${c}>${b}`:b;const _=o(y,u+1,b),w=u?A3e(y,x=>x.subRows):y,E=NR(e,b,w[0].original,m,u,void 0,c);return Object.assign(E,{groupingColumnId:d,groupingValue:g,subRows:_,leafRows:w,getValue:x=>{if(r.includes(x)){if(E._valuesCache.hasOwnProperty(x))return E._valuesCache[x];if(y[0]){var S;E._valuesCache[x]=(S=y[0].getValue(x))!=null?S:void 0}return E._valuesCache[x]}if(E._groupingValuesCache.hasOwnProperty(x))return E._groupingValuesCache[x];const C=e.getColumn(x),A=C==null?void 0:C.getAggregationFn();if(A)return E._groupingValuesCache[x]=A(x,w,y),E._groupingValuesCache[x]}}),_.forEach(x=>{i.push(x),s[x.id]=x}),E})},a=o(n.rows,0);return a.forEach(l=>{i.push(l),s[l.id]=l}),{rows:a,flatRows:i,rowsById:s}},qt(e.options,"debugTable","getGroupedRowModel",()=>{e._queue(()=>{e._autoResetExpanded(),e._autoResetPageIndex()})}))}function s5t(e,t){const n=new Map;return e.reduce((r,i)=>{const s=`${i.getGroupingValue(t)}`,o=r.get(s);return o?o.push(i):r.set(s,[i]),r},n)}function o5t(e){return t=>Ht(()=>[t.getState().pagination,t.getPrePaginationRowModel(),t.options.paginateExpandedRows?void 0:t.getState().expanded],(n,r)=>{if(!r.rows.length)return r;const{pageSize:i,pageIndex:s}=n;let{rows:o,flatRows:a,rowsById:l}=r;const u=i*s,c=u+i;o=o.slice(u,c);let d;t.options.paginateExpandedRows?d={rows:o,flatRows:a,rowsById:l}:d=L3e({rows:o,flatRows:a,rowsById:l}),d.flatRows=[];const f=h=>{d.flatRows.push(h),h.subRows.length&&h.subRows.forEach(f)};return d.rows.forEach(f),d},qt(t.options,"debugTable"))}function a5t(){return e=>Ht(()=>[e.getState().sorting,e.getPreSortedRowModel()],(t,n)=>{if(!n.rows.length||!(t!=null&&t.length))return n;const r=e.getState().sorting,i=[],s=r.filter(l=>{var u;return(u=e.getColumn(l.id))==null?void 0:u.getCanSort()}),o={};s.forEach(l=>{const u=e.getColumn(l.id);u&&(o[l.id]={sortUndefined:u.columnDef.sortUndefined,invertSorting:u.columnDef.invertSorting,sortingFn:u.getSortingFn()})});const a=l=>{const u=l.map(c=>({...c}));return u.sort((c,d)=>{for(let h=0;h<s.length;h+=1){var f;const p=s[h],m=o[p.id],g=m.sortUndefined,y=(f=p==null?void 0:p.desc)!=null?f:!1;let b=0;if(g){const _=c.getValue(p.id),w=d.getValue(p.id),E=_===void 0,x=w===void 0;if(E||x){if(g==="first")return E?-1:1;if(g==="last")return E?1:-1;b=E&&x?0:E?g:-g}}if(b===0&&(b=m.sortingFn(c,d,p.id)),b!==0)return y&&(b*=-1),m.invertSorting&&(b*=-1),b}return c.index-d.index}),u.forEach(c=>{var d;i.push(c),(d=c.subRows)!=null&&d.length&&(c.subRows=a(c.subRows))}),u};return{rows:a(n.rows),flatRows:i,rowsById:n.rowsById}},qt(e.options,"debugTable","getSortedRowModel",()=>e._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function l5t(e){const t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=I.useState(()=>({current:Kjt(t)})),[r,i]=I.useState(()=>n.current.initialState);return n.current.setOptions(s=>({...s,...e,state:{...r,...e.state},onStateChange:o=>{i(o),e.onStateChange==null||e.onStateChange(o)}})),n.current}/**
   * match-sorter-utils
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */const j3e={:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"AE",:"A",:"A",:"A",:"C",:"C",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"I",:"I",:"I",:"I",:"I",:"I",:"D",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"U",:"U",:"U",:"U",:"Y",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"ae",:"a",:"a",:"a",:"c",:"c",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"i",:"i",:"i",:"i",:"i",:"i",:"d",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"u",:"u",:"u",:"u",:"y",:"y",:"A",:"a",:"A",:"a",:"A",:"a",:"C",:"c",:"C",:"c",:"C",:"c",:"C",:"c",C:"C",c:"c",:"D",:"d",:"D",:"d",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"E",:"e",:"G",:"G",:"g",:"g",:"G",:"g",:"G",:"g",:"G",:"g",:"H",:"h",:"H",:"h",:"H",:"h",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"I",:"i",:"IJ",:"ij",:"J",:"j",:"K",:"k",:"K",:"k",K:"K",k:"k",:"L",:"l",:"L",:"l",:"L",:"l",:"L",:"l",:"l",:"l",:"M",:"m",M:"M",m:"m",:"N",:"n",:"N",:"n",:"N",:"n",:"n",N:"N",n:"n",:"O",:"o",:"O",:"o",:"O",:"o",:"OE",:"oe",P:"P",p:"p",:"R",:"r",:"R",:"r",:"R",:"r",R:"R",r:"r",:"R",:"r",:"S",:"s",:"S",:"s",:"S",:"S",:"s",:"s",:"S",:"s",:"T",:"t",:"t",:"T",:"T",:"t",:"T",:"t",T:"T",t:"t",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",V:"V",v:"v",:"W",:"w",:"W",:"w",X:"X",x:"x",:"Y",:"y",:"Y",Y:"Y",y:"y",:"Z",:"z",:"Z",:"z",:"Z",:"z",:"s",:"f",:"O",:"o",:"U",:"u",:"A",:"a",:"I",:"i",:"O",:"o",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"U",:"u",:"A",:"a",:"AE",:"ae",:"O",:"o",:"TH",:"th",:"P",:"p",:"S",:"s",X:"X",x:"x",:"",:"",:"",:"",A:"A",a:"a",E:"E",e:"e",I:"I",i:"i",:"N",:"n",:"O",:"o",:"O",:"o",:"U",:"u",:"W",:"w",:"Y",:"y",:"A",:"a",:"E",:"e",:"I",:"i",:"O",:"o",:"R",:"r",:"U",:"u",B:"B",b:"b",:"C",:"c",:"E",:"e",F:"F",f:"f",:"G",:"g",:"H",:"h",J:"J",:"j",:"K",:"k",M:"M",m:"m",P:"P",p:"p",Q:"Q",q:"q",:"R",:"r",:"S",:"s",V:"V",v:"v",W:"W",w:"w",X:"X",x:"x",Y:"Y",y:"y",A:"A",a:"a",B:"B",b:"b",:"D",:"d",:"E",:"e",:"E",:"e",:"H",:"h",I:"I",i:"i",:"I",:"i",M:"M",m:"m",O:"O",o:"o",Q:"Q",q:"q",U:"U",u:"u",X:"X",x:"x",Z:"Z",z:"z"},u5t=Object.keys(j3e).join("|"),c5t=new RegExp(u5t,"g");function d5t(e){return e.replace(c5t,t=>j3e[t])}/**
 * @name match-sorter
 * @license MIT license.
 * @copyright (c) 2099 Kent C. Dodds
 * @author Kent C. Dodds <me@kentcdodds.com> (https://kentcdodds.com)
 */const Qa={CASE_SENSITIVE_EQUAL:7,EQUAL:6,STARTS_WITH:5,WORD_STARTS_WITH:4,CONTAINS:3,ACRONYM:2,MATCHES:1,NO_MATCH:0};function f5t(e,t,n){var r;if(n=n||{},n.threshold=(r=n.threshold)!=null?r:Qa.MATCHES,!n.accessors){const o=oge(e,t,n);return{rankedValue:e,rank:o,accessorIndex:-1,accessorThreshold:n.threshold,passed:o>=n.threshold}}const i=y5t(e,n.accessors),s={rankedValue:e,rank:Qa.NO_MATCH,accessorIndex:-1,accessorThreshold:n.threshold,passed:!1};for(let o=0;o<i.length;o++){const a=i[o];let l=oge(a.itemValue,t,n);const{minRanking:u,maxRanking:c,threshold:d=n.threshold}=a.attributes;l<u&&l>=Qa.MATCHES?l=u:l>c&&(l=c),l=Math.min(l,c),l>=d&&l>s.rank&&(s.rank=l,s.passed=!0,s.accessorIndex=o,s.accessorThreshold=d,s.rankedValue=a.itemValue)}return s}function oge(e,t,n){return e=age(e,n),t=age(t,n),t.length>e.length?Qa.NO_MATCH:e===t?Qa.CASE_SENSITIVE_EQUAL:(e=e.toLowerCase(),t=t.toLowerCase(),e===t?Qa.EQUAL:e.startsWith(t)?Qa.STARTS_WITH:e.includes(` ${t}`)?Qa.WORD_STARTS_WITH:e.includes(t)?Qa.CONTAINS:t.length===1?Qa.NO_MATCH:h5t(e).includes(t)?Qa.ACRONYM:p5t(e,t))}function h5t(e){let t="";return e.split(" ").forEach(r=>{r.split("-").forEach(s=>{t+=s.substr(0,1)})}),t}function p5t(e,t){let n=0,r=0;function i(l,u,c){for(let d=c,f=u.length;d<f;d++)if(u[d]===l)return n+=1,d+1;return-1}function s(l){const u=1/l,c=n/t.length;return Qa.MATCHES+c*u}const o=i(t[0],e,0);if(o<0)return Qa.NO_MATCH;r=o;for(let l=1,u=t.length;l<u;l++){const c=t[l];if(r=i(c,e,r),!(r>-1))return Qa.NO_MATCH}const a=r-o;return s(a)}function m5t(e,t){return e.rank===t.rank?0:e.rank>t.rank?-1:1}function age(e,t){let{keepDiacritics:n}=t;return e=`${e}`,n||(e=d5t(e)),e}function g5t(e,t){let n=t;typeof t=="object"&&(n=t.accessor);const r=n(e);return r==null?[]:Array.isArray(r)?r:[String(r)]}function y5t(e,t){const n=[];for(let r=0,i=t.length;r<i;r++){const s=t[r],o=v5t(s),a=g5t(e,s);for(let l=0,u=a.length;l<u;l++)n.push({itemValue:a[l],attributes:o})}return n}const lge={maxRanking:1/0,minRanking:-1/0};function v5t(e){return typeof e=="function"?lge:{...lge,...e}}function JT(e,t,n){let r=n.initialDeps??[],i;return()=>{var s,o,a,l;let u;n.key&&((s=n.debug)!=null&&s.call(n))&&(u=Date.now());const c=e();if(!(c.length!==r.length||c.some((h,p)=>r[p]!==h)))return i;r=c;let f;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(f=Date.now()),i=t(...c),n.key&&((a=n.debug)!=null&&a.call(n))){const h=Math.round((Date.now()-u)*100)/100,p=Math.round((Date.now()-f)*100)/100,m=p/16,g=(y,b)=>{for(y=String(y);y.length<b;)y=" "+y;return y};console.info(`%c ${g(p,5)} /${g(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*m,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(l=n==null?void 0:n.onChange)==null||l.call(n,i),i}}function L9(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const b5t=(e,t)=>Math.abs(e-t)<1,_5t=(e,t,n)=>{let r;return function(...i){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,i),n)}},w5t=e=>e,B3e=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let i=t;i<=n;i++)r.push(i);return r},E5t=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const i=o=>{const{width:a,height:l}=o;t({width:Math.round(a),height:Math.round(l)})};if(i(n.getBoundingClientRect()),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(o=>{const a=o[0];if(a!=null&&a.borderBoxSize){const l=a.borderBoxSize[0];if(l){i({width:l.inlineSize,height:l.blockSize});return}}i(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},uge={passive:!0},x5t=typeof window>"u"?!0:"onscrollend"in window,S5t=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let i=0;const s=x5t?()=>{}:_5t(r,()=>{t(i,!1)},e.options.isScrollingResetDelay),o=u=>()=>{i=n[e.options.horizontal?"scrollLeft":"scrollTop"],s(),t(i,u)},a=o(!0),l=o(!1);return l(),n.addEventListener("scroll",a,uge),n.addEventListener("scrollend",l,uge),()=>{n.removeEventListener("scroll",a),n.removeEventListener("scrollend",l)}},T5t=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},C5t=(e,{adjustments:t=0,behavior:n},r)=>{var i,s;const o=e+t;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class A5t{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{this._measureElement(s.target,s)})}));return{disconnect:()=>{var i;return(i=r())==null?void 0:i.disconnect()},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:w5t,rangeExtractor:B3e,onChange:()=>{},measureElement:T5t,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,...n}},this.notify=(n,r)=>{var i,s;const{startIndex:o,endIndex:a}=this.range??{startIndex:void 0,endIndex:void 0},l=this.calculateRange();(n||o!==(l==null?void 0:l.startIndex)||a!==(l==null?void 0:l.endIndex))&&((s=(i=this.options).onChange)==null||s.call(i,this,r))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{var n;const r=this.options.getScrollElement();this.scrollElement!==r&&(this.cleanup(),this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.scrollOffset<i?"forward":"backward":null,this.scrollOffset=i;const o=this.isScrolling;this.isScrolling=s,this.notify(o!==s,s)})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=JT(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(n,r,i,s)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s}),{key:!1}),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let o=r-1;o>=0;o--){const a=n[o];if(i.has(a.lane))continue;const l=s.get(a.lane);if(l==null||a.end>l.end?s.set(a.lane,a):a.end<l.end&&i.set(a.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((o,a)=>o.end===a.end?o.index-a.index:o.end-a.end)[0]:void 0},this.getMeasurements=JT(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s},o)=>{const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const l=this.measurementsCache.slice(0,a);for(let u=a;u<n;u++){const c=s(u),d=this.options.lanes===1?l[u-1]:this.getFurthestMeasurement(l,u),f=d?d.end+this.options.gap:r+i,h=o.get(c),p=typeof h=="number"?h:this.options.estimateSize(u),m=f+p,g=d?d.lane:u%this.options.lanes;l[u]={index:u,start:f,size:p,end:m,key:c,lane:g}}return this.measurementsCache=l,l},{key:!1,debug:()=>this.options.debug}),this.calculateRange=JT(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(n,r,i)=>this.range=n.length>0&&r>0?I5t({measurements:n,outerSize:r,scrollOffset:i}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=JT(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,r,i,s)=>r===null?[]:n({startIndex:r.startIndex,endIndex:r.endIndex,overscan:i,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.measurementsCache[this.indexFromElement(n)];if(!i||!n.isConnected){this.measureElementCache.forEach((a,l)=>{a===n&&(this.observer.unobserve(n),this.measureElementCache.delete(l))});return}const s=this.measureElementCache.get(i.key);s!==n&&(s&&this.observer.unobserve(s),this.observer.observe(n),this.measureElementCache.set(i.key,n));const o=this.options.measureElement(n,r,this);this.resizeItem(i,o)},this.resizeItem=(n,r)=>{const i=this.itemSizeCache.get(n.key)??n.size,s=r-i;s!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,s,this):n.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=s,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,r)),this.notify(!0,!1))},this.measureElement=n=>{n&&this._measureElement(n,void 0)},this.getVirtualItems=JT(()=>[this.getIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,o=n.length;s<o;s++){const a=n[s],l=r[a];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();return L9(r[z3e(0,r.length-1,i=>L9(r[i]).start,n)])},this.getOffsetForAlignment=(n,r)=>{const i=this.getSize();r==="auto"&&(n<=this.scrollOffset?r="start":n>=this.scrollOffset+i?r="end":r="start"),r==="start"?n=n:r==="end"?n=n-i:r==="center"&&(n=n-i/2);const s=this.options.horizontal?"scrollWidth":"scrollHeight",a=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[s]:this.scrollElement[s]:0)-this.getSize();return Math.max(Math.min(a,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=L9(this.getMeasurements()[n]);if(r==="auto")if(i.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)r="end";else if(i.start<=this.scrollOffset+this.options.scrollPaddingStart)r="start";else return[this.scrollOffset,r];const s=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(s,r),r]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[s,o]=this.getOffsetForIndex(n,r);this._scrollToOffset(s,{adjustments:void 0,behavior:i}),i!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(n))){const[l]=this.getOffsetForIndex(n,o);b5t(l,this.scrollOffset)||this.scrollToIndex(n,{align:o,behavior:i})}else this.scrollToIndex(n,{align:o,behavior:i})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;return r.length===0?i=this.options.paddingStart:i=this.options.lanes===1?((n=r[r.length-1])==null?void 0:n.end)??0:Math.max(...r.slice(-this.options.lanes).map(s=>s.end)),i-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{var n,r;this.itemSizeCache=new Map,(r=(n=this.options).onChange)==null||r.call(n,this,!1)},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(n=>{this.itemSizeCache.set(n.key,n.size)}),this.notify(!1,!1)}}const z3e=(e,t,n,r)=>{for(;e<=t;){const i=(e+t)/2|0,s=n(i);if(s<r)e=i+1;else if(s>r)t=i-1;else return i}return e>0?e-1:0};function I5t({measurements:e,outerSize:t,scrollOffset:n}){const r=e.length-1,s=z3e(0,r,a=>e[a].start,n);let o=s;for(;o<r&&e[o].end<n+t;)o++;return{startIndex:s,endIndex:o}}const k5t=typeof document<"u"?I.useLayoutEffect:I.useEffect;function R5t(e){const t=I.useReducer(()=>({}),{})[1],n={...e,onChange:(i,s)=>{var o;s?tS.flushSync(t):t(),(o=e.onChange)==null||o.call(e,i,s)}},[r]=I.useState(()=>new A5t(n));return r.setOptions(n),I.useEffect(()=>r._didMount(),[]),k5t(()=>r._willUpdate()),r}function U3e(e){return R5t({observeElementRect:E5t,observeElementOffset:S5t,scrollToFn:C5t,...e})}var V3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ks,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",l="hour",u="day",c="week",d="month",f="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var D=["th","st","nd","rd"],M=$%100;return"["+$+(D[(M-20)%10]||D[M]||D[0])+"]"}},_=function($,D,M){var B=String($);return!B||B.length>=D?$:""+Array(D+1-B.length).join(M)+$},w={s:_,z:function($){var D=-$.utcOffset(),M=Math.abs(D),B=Math.floor(M/60),z=M%60;return(D<=0?"+":"-")+_(B,2,"0")+":"+_(z,2,"0")},m:function $(D,M){if(D.date()<M.date())return-$(M,D);var B=12*(M.year()-D.year())+(M.month()-D.month()),z=D.clone().add(B,d),U=M-z<0,O=D.clone().add(B+(U?-1:1),d);return+(-(B+(M-z)/(U?z-O:O-z))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:d,y:h,w:c,d:u,D:p,h:l,m:a,s:o,ms:s,Q:f}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",x={};x[E]=b;var S="$isDayjsObject",C=function($){return $ instanceof L||!(!$||!$[S])},A=function $(D,M,B){var z;if(!D)return E;if(typeof D=="string"){var U=D.toLowerCase();x[U]&&(z=U),M&&(x[U]=M,z=U);var O=D.split("-");if(!z&&O.length>1)return $(O[0])}else{var V=D.name;x[V]=D,z=V}return!B&&z&&(E=z),z||!B&&E},R=function($,D){if(C($))return $.clone();var M=typeof D=="object"?D:{};return M.date=$,M.args=arguments,new L(M)},P=w;P.l=A,P.i=C,P.w=function($,D){return R($,{locale:D.$L,utc:D.$u,x:D.$x,$offset:D.$offset})};var L=function(){function $(M){this.$L=A(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[S]=!0}var D=$.prototype;return D.parse=function(M){this.$d=function(B){var z=B.date,U=B.utc;if(z===null)return new Date(NaN);if(P.u(z))return new Date;if(z instanceof Date)return new Date(z);if(typeof z=="string"&&!/Z$/i.test(z)){var O=z.match(g);if(O){var V=O[2]-1||0,W=(O[7]||"0").substring(0,3);return U?new Date(Date.UTC(O[1],V,O[3]||1,O[4]||0,O[5]||0,O[6]||0,W)):new Date(O[1],V,O[3]||1,O[4]||0,O[5]||0,O[6]||0,W)}}return new Date(z)}(M),this.init()},D.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},D.$utils=function(){return P},D.isValid=function(){return this.$d.toString()!==m},D.isSame=function(M,B){var z=R(M);return this.startOf(B)<=z&&z<=this.endOf(B)},D.isAfter=function(M,B){return R(M)<this.startOf(B)},D.isBefore=function(M,B){return this.endOf(B)<R(M)},D.$g=function(M,B,z){return P.u(M)?this[B]:this.set(z,M)},D.unix=function(){return Math.floor(this.valueOf()/1e3)},D.valueOf=function(){return this.$d.getTime()},D.startOf=function(M,B){var z=this,U=!!P.u(B)||B,O=P.p(M),V=function(ne,ue){var xe=P.w(z.$u?Date.UTC(z.$y,ue,ne):new Date(z.$y,ue,ne),z);return U?xe:xe.endOf(u)},W=function(ne,ue){return P.w(z.toDate()[ne].apply(z.toDate("s"),(U?[0,0,0,0]:[23,59,59,999]).slice(ue)),z)},j=this.$W,H=this.$M,G=this.$D,J="set"+(this.$u?"UTC":"");switch(O){case h:return U?V(1,0):V(31,11);case d:return U?V(1,H):V(0,H+1);case c:var se=this.$locale().weekStart||0,ie=(j<se?j+7:j)-se;return V(U?G-ie:G+(6-ie),H);case u:case p:return W(J+"Hours",0);case l:return W(J+"Minutes",1);case a:return W(J+"Seconds",2);case o:return W(J+"Milliseconds",3);default:return this.clone()}},D.endOf=function(M){return this.startOf(M,!1)},D.$set=function(M,B){var z,U=P.p(M),O="set"+(this.$u?"UTC":""),V=(z={},z[u]=O+"Date",z[p]=O+"Date",z[d]=O+"Month",z[h]=O+"FullYear",z[l]=O+"Hours",z[a]=O+"Minutes",z[o]=O+"Seconds",z[s]=O+"Milliseconds",z)[U],W=U===u?this.$D+(B-this.$W):B;if(U===d||U===h){var j=this.clone().set(p,1);j.$d[V](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else V&&this.$d[V](W);return this.init(),this},D.set=function(M,B){return this.clone().$set(M,B)},D.get=function(M){return this[P.p(M)]()},D.add=function(M,B){var z,U=this;M=Number(M);var O=P.p(B),V=function(H){var G=R(U);return P.w(G.date(G.date()+Math.round(H*M)),U)};if(O===d)return this.set(d,this.$M+M);if(O===h)return this.set(h,this.$y+M);if(O===u)return V(1);if(O===c)return V(7);var W=(z={},z[a]=r,z[l]=i,z[o]=n,z)[O]||1,j=this.$d.getTime()+M*W;return P.w(j,this)},D.subtract=function(M,B){return this.add(-1*M,B)},D.format=function(M){var B=this,z=this.$locale();if(!this.isValid())return z.invalidDate||m;var U=M||"YYYY-MM-DDTHH:mm:ssZ",O=P.z(this),V=this.$H,W=this.$m,j=this.$M,H=z.weekdays,G=z.months,J=z.meridiem,se=function(ue,xe,de,Ke){return ue&&(ue[xe]||ue(B,U))||de[xe].slice(0,Ke)},ie=function(ue){return P.s(V%12||12,ue,"0")},ne=J||function(ue,xe,de){var Ke=ue<12?"AM":"PM";return de?Ke.toLowerCase():Ke};return U.replace(y,function(ue,xe){return xe||function(de){switch(de){case"YY":return String(B.$y).slice(-2);case"YYYY":return P.s(B.$y,4,"0");case"M":return j+1;case"MM":return P.s(j+1,2,"0");case"MMM":return se(z.monthsShort,j,G,3);case"MMMM":return se(G,j);case"D":return B.$D;case"DD":return P.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return se(z.weekdaysMin,B.$W,H,2);case"ddd":return se(z.weekdaysShort,B.$W,H,3);case"dddd":return H[B.$W];case"H":return String(V);case"HH":return P.s(V,2,"0");case"h":return ie(1);case"hh":return ie(2);case"a":return ne(V,W,!0);case"A":return ne(V,W,!1);case"m":return String(W);case"mm":return P.s(W,2,"0");case"s":return String(B.$s);case"ss":return P.s(B.$s,2,"0");case"SSS":return P.s(B.$ms,3,"0");case"Z":return O}return null}(ue)||O.replace(":","")})},D.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},D.diff=function(M,B,z){var U,O=this,V=P.p(B),W=R(M),j=(W.utcOffset()-this.utcOffset())*r,H=this-W,G=function(){return P.m(O,W)};switch(V){case h:U=G()/12;break;case d:U=G();break;case f:U=G()/3;break;case c:U=(H-j)/6048e5;break;case u:U=(H-j)/864e5;break;case l:U=H/i;break;case a:U=H/r;break;case o:U=H/n;break;default:U=H}return z?U:P.a(U)},D.daysInMonth=function(){return this.endOf(d).$D},D.$locale=function(){return x[this.$L]},D.locale=function(M,B){if(!M)return this.$L;var z=this.clone(),U=A(M,B,!0);return U&&(z.$L=U),z},D.clone=function(){return P.w(this.$d,this)},D.toDate=function(){return new Date(this.valueOf())},D.toJSON=function(){return this.isValid()?this.toISOString():null},D.toISOString=function(){return this.$d.toISOString()},D.toString=function(){return this.$d.toUTCString()},$}(),k=L.prototype;return R.prototype=k,[["$ms",s],["$s",o],["$m",a],["$H",l],["$W",u],["$M",d],["$y",h],["$D",p]].forEach(function($){k[$[1]]=function(D){return this.$g(D,$[0],$[1])}}),R.extend=function($,D){return $.$i||($(D,L,R),$.$i=!0),R},R.locale=A,R.isDayjs=C,R.unix=function($){return R(1e3*$)},R.en=x[E],R.Ls=x,R.p={},R})})(V3e);var P5t=V3e.exports;const St=mu(P5t);function N5t({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>St(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function O5t({formatter:e,...t}){return(e||N5t)(t)}function D5t({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function H3e({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var l,u,c;const o=D5t({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(u=(l=e.current)==null?void 0:l[o.levelIndex])==null?void 0:u[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?H3e({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function M5t(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function $5t(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function rte({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=M5t(i.key);if(s){i.preventDefault();const o=$5t(e);H3e({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}function L5t(e,t){if(!e||!t)return t;const n=e.getHours(),r=e.getMinutes(),i=e.getSeconds(),s=e.getMilliseconds(),o=new Date(t);return o.setHours(n),o.setMinutes(r),o.setSeconds(i),o.setMilliseconds(s),o}var q3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ks,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,l=function(f,h,p){p===void 0&&(p={});var m=new Date(f),g=function(y,b){b===void 0&&(b={});var _=b.timeZoneName||"short",w=y+"|"+_,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:_}),r[w]=E),E}(h,p);return g.formatToParts(m)},u=function(f,h){for(var p=l(f,h),m=[],g=0;g<p.length;g+=1){var y=p[g],b=y.type,_=y.value,w=n[b];w>=0&&(m[w]=parseInt(_,10))}var E=m[3],x=E===24?0:E,S=m[0]+"-"+m[1]+"-"+m[2]+" "+x+":"+m[4]+":"+m[5]+":000",C=+f;return(o.utc(S).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(f,h){f===void 0&&(f=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:f}),y=Math.round((m-new Date(g))/1e3/60),b=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var _=b.utcOffset();b=b.add(p-_,"minute")}return b.$x.$timezone=f,b},c.offsetName=function(f){var h=this.$x.$timezone||o.tz.guess(),p=l(this.valueOf(),h,{timeZoneName:f}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var d=c.startOf;c.startOf=function(f,h){if(!this.$x||!this.$x.$timezone)return d.call(this,f,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return d.call(p,f,h).tz(this.$x.$timezone,!0)},o.tz=function(f,h,p){var m=p&&h,g=p||h||a,y=u(+o(),g);if(typeof f!="string")return o(f).tz(g);var b=function(x,S,C){var A=x-60*S*1e3,R=u(A,C);if(S===R)return[A,S];var P=u(A-=60*(R-S)*1e3,C);return R===P?[A,R]:[x-60*Math.min(R,P)*1e3,Math.max(R,P)]}(o.utc(f,m).valueOf(),y,g),_=b[0],w=b[1],E=o(_).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(f){a=f}}})})(q3e);var F5t=q3e.exports;const j5t=mu(F5t);var W3e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ks,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var l=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},l.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},l.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var u=l.parse;l.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),u.call(this,m)};var c=l.init;l.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var d=l.utcOffset;l.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?d.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var x=E.match(r);if(!x)return null;var S=(""+x[0]).match(i)||["-",0,0],C=S[0],A=60*+S[1]+ +S[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var b=Math.abs(m)<=16?60*m:m,_=this;if(g)return _.$offset=b,_.$u=m===0,_;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(_=this.local().add(b+w,n)).$offset=b,_.$x.$localOffset=w}else _=this.utc();return _};var f=l.format;l.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return f.call(this,g)},l.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var h=l.toDate;l.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=l.diff;l.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var b=this.local(),_=a(m).local();return p.call(b,_,g,y)}}})})(W3e);var B5t=W3e.exports;const z5t=mu(B5t);St.extend(z5t);St.extend(j5t);function U5t(e,t){return t?St(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const cge=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=U5t(e,t);return n==="remove"&&(r*=-1),St(e).add(r,"minutes").toDate()};function xm(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>cge(i,n,e)):cge(t,n,e)}function V5t({minDate:e,maxDate:t,timezone:n}){const r=xm("add",new Date,n);return!e&&!t?r:e&&St(r).isBefore(e)?e:t&&St(r).isAfter(t)?t:r}const H5t={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},q5t=I.createContext(H5t);function vu(){const e=I.useContext(q5t),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function W5t(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function ite({value:e,type:t,name:n,form:r}){return v.jsx("input",{type:"hidden",value:W5t(e,t),name:n,form:r})}ite.displayName="@mantine/dates/HiddenDatesInput";var G3e={day:"m_396ce5cb"};const G5t={},Y5t=(e,{size:t})=>({day:{"--day-size":Jt(t,"day-size")}}),ste=Le((e,t)=>{const n=we("Day",G5t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,date:u,disabled:c,__staticSelector:d,weekend:f,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:b,hidden:_,static:w,highlightToday:E,...x}=n,S=mt({name:d||"Day",classes:G3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Y5t,rootSelector:"day"}),C=vu();return v.jsx(ds,{...S("day",{style:_?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":St(u).isSame(xm("add",new Date,C.getTimezone()),"day")||void 0,"data-hidden":_||void 0,"data-highlight-today":E||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&f||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":b&&!c||void 0,"data-static":w||void 0,unstyled:a,...x,children:(m==null?void 0:m(u))||u.getDate()})});ste.classes=G3e;ste.displayName="@mantine/dates/Day";function K5t({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=St().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(St(r).add(s,"days").locale(e).format(t)):i.push(t(St(r).add(s,"days").toDate()));return i}var Y3e={weekday:"m_18a3eca"};const X5t={},Q5t=(e,{size:t})=>({weekdaysRow:{"--wr-fz":Zs(t),"--wr-spacing":ru(t)}}),ote=Le((e,t)=>{const n=we("WeekdaysRow",X5t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,locale:u,firstDayOfWeek:c,weekdayFormat:d,cellComponent:f="th",__staticSelector:h,...p}=n,m=mt({name:h||"WeekdaysRow",classes:Y3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Q5t,rootSelector:"weekdaysRow"}),g=vu(),y=K5t({locale:g.getLocale(u),format:d,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((b,_)=>v.jsx(f,{...m("weekday"),children:b},_));return v.jsx(ge,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});ote.classes=Y3e;ote.displayName="@mantine/dates/WeekdaysRow";function J5t(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function Z5t(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function e8t({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=J5t(s,t),a=Z5t(i,t),l=[];for(;a<=o;){const u=[];for(let c=0;c<7;c+=1)u.push(new Date(a)),a.setDate(a.getDate()+1);l.push(u)}if(n&&l.length<6){const u=l[l.length-1],c=u[u.length-1],d=new Date(c);for(d.setDate(d.getDate()+1);l.length<6;){const f=[];for(let h=0;h<7;h+=1)f.push(new Date(d)),d.setDate(d.getDate()+1);l.push(f)}}return l}function K3e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function X3e(e,t){return t instanceof Date?St(e).isAfter(St(t).subtract(1,"day"),"day"):!0}function Q3e(e,t){return t instanceof Date?St(e).isBefore(St(t).add(1,"day"),"day"):!0}function t8t(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var d;return Q3e(c,n)&&X3e(c,t)&&!(i!=null&&i(c))&&!((d=r==null?void 0:r(c))!=null&&d.disabled)&&(!s||K3e(c,o))}),l=a.find(c=>{var d;return(d=r==null?void 0:r(c))==null?void 0:d.selected});if(l)return l;const u=a.find(c=>St().isSame(c,"date"));return u||a[0]}var J3e={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const n8t={withCellSpacing:!0},D4=Le((e,t)=>{const n=we("Month",n8t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,locale:c,firstDayOfWeek:d,weekdayFormat:f,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:b,renderDay:_,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:x,static:S,__getDayRef:C,__onDayKeyDown:A,__onDayClick:R,__onDayMouseEnter:P,__preventFocus:L,__stopPropagation:k,withCellSpacing:$,size:D,highlightToday:M,...B}=n,z=mt({name:u||"Month",classes:J3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"month"}),U=vu(),O=e8t({month:h,firstDayOfWeek:U.getFirstDayOfWeek(d),consistentWeeks:U.consistentWeeks}),V=t8t(O,y,b,m,g,w,h),{resolvedClassNames:W,resolvedStyles:j}=lp({classNames:r,styles:o,props:n}),H=O.map((G,J)=>{const se=G.map((ie,ne)=>{const ue=!K3e(ie,h),xe=(x==null?void 0:x(ie))||St(ie).locale(c||U.locale).format("D MMMM YYYY"),de=m==null?void 0:m(ie),Ke=St(ie).isSame(V,"date");return v.jsx("td",{...z("monthCell"),"data-with-spacing":$||void 0,children:v.jsx(ste,{__staticSelector:u||"Month",classNames:W,styles:j,unstyled:a,"data-mantine-stop-propagation":k||void 0,highlightToday:M,renderDay:_,date:ie,size:D,weekend:U.getWeekendDays(p).includes(ie.getDay()),outside:ue,hidden:w?ue:!1,"aria-label":xe,static:S,disabled:(g==null?void 0:g(ie))||!Q3e(ie,b)||!X3e(ie,y),ref:je=>C==null?void 0:C(J,ne,je),...de,onKeyDown:je=>{var Oe;(Oe=de==null?void 0:de.onKeyDown)==null||Oe.call(de,je),A==null||A(je,{rowIndex:J,cellIndex:ne,date:ie})},onMouseEnter:je=>{var Oe;(Oe=de==null?void 0:de.onMouseEnter)==null||Oe.call(de,je),P==null||P(je,ie)},onClick:je=>{var Oe;(Oe=de==null?void 0:de.onClick)==null||Oe.call(de,je),R==null||R(je,ie)},onMouseDown:je=>{var Oe;(Oe=de==null?void 0:de.onMouseDown)==null||Oe.call(de,je),L&&je.preventDefault()},tabIndex:L||!Ke?-1:0})},ie.toString())});return v.jsx("tr",{...z("monthRow"),children:se},J)});return v.jsxs(ge,{component:"table",...z("month"),size:D,ref:t,...B,children:[!E&&v.jsx("thead",{...z("monthThead"),children:v.jsx(ote,{__staticSelector:u||"Month",locale:c,firstDayOfWeek:d,weekdayFormat:f,size:D,classNames:W,styles:j,unstyled:a})}),v.jsx("tbody",{...z("monthTbody"),children:H})]})});D4.classes=J3e;D4.displayName="@mantine/dates/Month";var Z3e={pickerControl:"m_dc6a3c71"};const r8t={},i8t=(e,{size:t})=>({pickerControl:{"--dpc-fz":Zs(t),"--dpc-size":Jt(t,"dpc-size")}}),M4=Le((e,t)=>{const n=we("PickerControl",r8t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,firstInRange:u,lastInRange:c,inRange:d,__staticSelector:f,selected:h,disabled:p,...m}=n,g=mt({name:f||"PickerControl",classes:Z3e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:i8t,rootSelector:"pickerControl"});return v.jsx(ds,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":d&&!p&&!h||void 0,"data-first-in-range":u&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});M4.classes=Z3e;M4.displayName="@mantine/dates/PickerControl";function e$e(e,t,n){return!t&&!n?!1:!!(t&&St(e).isBefore(t,"year")||n&&St(e).isAfter(n,"year"))}function s8t(e,t,n,r){const i=e.flat().filter(a=>{var l;return!e$e(a,t,n)&&!((l=r==null?void 0:r(a))!=null&&l.disabled)}),s=i.find(a=>{var l;return(l=r==null?void 0:r(a))==null?void 0:l.selected});if(s)return s;const o=i.find(a=>St().isSame(a,"year"));return o||i[0]}function t$e(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var n$e={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const o8t={yearsListFormat:"YYYY",withCellSpacing:!0},$4=Le((e,t)=>{const n=we("YearsList",o8t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,decade:u,yearsListFormat:c,locale:d,minDate:f,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:b,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:x,size:S,...C}=n,A=mt({name:m||"YearsList",classes:n$e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"yearsList"}),R=vu(),P=t$e(u),L=s8t(P,f,h,p),k=P.map(($,D)=>{const M=$.map((B,z)=>{const U=p==null?void 0:p(B),O=St(B).isSame(L,"year");return v.jsx("td",{...A("yearsListCell"),"data-with-spacing":x||void 0,children:v.jsx(M4,{...A("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:e$e(B,f,h),ref:V=>g==null?void 0:g(D,z,V),...U,onKeyDown:V=>{var W;(W=U==null?void 0:U.onKeyDown)==null||W.call(U,V),y==null||y(V,{rowIndex:D,cellIndex:z,date:B})},onClick:V=>{var W;(W=U==null?void 0:U.onClick)==null||W.call(U,V),b==null||b(V,B)},onMouseEnter:V=>{var W;(W=U==null?void 0:U.onMouseEnter)==null||W.call(U,V),_==null||_(V,B)},onMouseDown:V=>{var W;(W=U==null?void 0:U.onMouseDown)==null||W.call(U,V),w&&V.preventDefault()},tabIndex:w||!O?-1:0,children:St(B).locale(R.getLocale(d)).format(c)})},z)});return v.jsx("tr",{...A("yearsListRow"),children:M},D)});return v.jsx(ge,{component:"table",ref:t,size:S,...A("yearsList"),...C,children:v.jsx("tbody",{children:k})})});$4.classes=n$e;$4.displayName="@mantine/dates/YearsList";function r$e(e,t,n){return!t&&!n?!1:!!(t&&St(e).isBefore(t,"month")||n&&St(e).isAfter(n,"month"))}function a8t(e,t,n,r){const i=e.flat().filter(a=>{var l;return!r$e(a,t,n)&&!((l=r==null?void 0:r(a))!=null&&l.disabled)}),s=i.find(a=>{var l;return(l=r==null?void 0:r(a))==null?void 0:l.selected});if(s)return s;const o=i.find(a=>St().isSame(a,"month"));return o||i[0]}function l8t(e){const t=St(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(St(t).add(r,"months").toDate()),r+=1;return n}var i$e={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const u8t={monthsListFormat:"MMM",withCellSpacing:!0},L4=Le((e,t)=>{const n=we("MonthsList",u8t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,year:c,monthsListFormat:d,locale:f,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:b,__onControlMouseEnter:_,__preventFocus:w,__stopPropagation:E,withCellSpacing:x,size:S,...C}=n,A=mt({name:u||"MonthsList",classes:i$e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"monthsList"}),R=vu(),P=l8t(c),L=a8t(P,h,p,m),k=P.map(($,D)=>{const M=$.map((B,z)=>{const U=m==null?void 0:m(B),O=St(B).isSame(L,"month");return v.jsx("td",{...A("monthsListCell"),"data-with-spacing":x||void 0,children:v.jsx(M4,{...A("monthsListControl"),size:S,unstyled:a,__staticSelector:u||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:r$e(B,h,p),ref:V=>g==null?void 0:g(D,z,V),...U,onKeyDown:V=>{var W;(W=U==null?void 0:U.onKeyDown)==null||W.call(U,V),y==null||y(V,{rowIndex:D,cellIndex:z,date:B})},onClick:V=>{var W;(W=U==null?void 0:U.onClick)==null||W.call(U,V),b==null||b(V,B)},onMouseEnter:V=>{var W;(W=U==null?void 0:U.onMouseEnter)==null||W.call(U,V),_==null||_(V,B)},onMouseDown:V=>{var W;(W=U==null?void 0:U.onMouseDown)==null||W.call(U,V),w&&V.preventDefault()},tabIndex:w||!O?-1:0,children:St(B).locale(R.getLocale(f)).format(d)})},z)});return v.jsx("tr",{...A("monthsListRow"),children:M},D)});return v.jsx(ge,{component:"table",ref:t,size:S,...A("monthsList"),...C,children:v.jsx("tbody",{children:k})})});L4.classes=i$e;L4.displayName="@mantine/dates/MonthsList";var s$e={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const c8t={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},d8t=(e,{size:t})=>({calendarHeader:{"--dch-control-size":Jt(t,"dch-control-size"),"--dch-fz":Zs(t)}}),ov=Le((e,t)=>{const n=we("CalendarHeader",c8t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,nextIcon:u,previousIcon:c,nextLabel:d,previousLabel:f,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:b,hasNextLevel:_,levelControlAriaLabel:w,withNext:E,withPrevious:x,__staticSelector:S,__preventFocus:C,__stopPropagation:A,...R}=n,P=mt({name:S||"CalendarHeader",classes:s$e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:d8t,rootSelector:"calendarHeader"}),L=C?k=>k.preventDefault():void 0;return v.jsxs(ge,{...P("calendarHeader"),ref:t,...R,children:[x&&v.jsx(ds,{...P("calendarHeaderControl"),"data-direction":"previous","aria-label":f,onClick:p,unstyled:a,onMouseDown:L,disabled:b,"data-disabled":b||void 0,tabIndex:C||b?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||v.jsx(zE,{...P("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),v.jsx(ds,{component:_?"button":"div",...P("calendarHeaderLevel"),onClick:_?m:void 0,unstyled:a,onMouseDown:_?L:void 0,disabled:!_,"data-static":!_||void 0,"aria-label":w,tabIndex:C||!_?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),E&&v.jsx(ds,{...P("calendarHeaderControl"),"data-direction":"next","aria-label":d,onClick:h,unstyled:a,onMouseDown:L,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:u||v.jsx(zE,{...P("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});ov.classes=s$e;ov.displayName="@mantine/dates/CalendarHeader";function f8t(e){const t=t$e(e);return[t[0][0],t[3][0]]}const h8t={decadeLabelFormat:"YYYY"},F4=Le((e,t)=>{const n=we("DecadeLevel",h8t,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:_,onPrevious:w,nextDisabled:E,previousDisabled:x,levelControlAriaLabel:S,withNext:C,withPrevious:A,decadeLabelFormat:R,classNames:P,styles:L,unstyled:k,__staticSelector:$,__stopPropagation:D,size:M,...B}=n,z=vu(),[U,O]=f8t(r),V={__staticSelector:$||"DecadeLevel",classNames:P,styles:L,unstyled:k,size:M},W=typeof E=="boolean"?E:o?!St(O).endOf("year").isBefore(o):!1,j=typeof x=="boolean"?x:s?!St(U).startOf("year").isAfter(s):!1,H=(G,J)=>St(G).locale(i||z.locale).format(J);return v.jsxs(ge,{"data-decade-level":!0,size:M,ref:t,...B,children:[v.jsx(ov,{label:typeof R=="function"?R(U,O):`${H(U,R)}  ${H(O,R)}`,__preventFocus:p,__stopPropagation:D,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:_,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:S,withNext:C,withPrevious:A,...V}),v.jsx($4,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:D,withCellSpacing:h,...V})]})});F4.classes={...$4.classes,...ov.classes};F4.displayName="@mantine/dates/DecadeLevel";const p8t={yearLabelFormat:"YYYY"},j4=Le((e,t)=>{const n=we("YearLevel",p8t,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:x,previousDisabled:S,hasNextLevel:C,levelControlAriaLabel:A,withNext:R,withPrevious:P,yearLabelFormat:L,__staticSelector:k,__stopPropagation:$,size:D,classNames:M,styles:B,unstyled:z,...U}=n,O=vu(),V={__staticSelector:k||"YearLevel",classNames:M,styles:B,unstyled:z,size:D},W=typeof x=="boolean"?x:o?!St(r).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!St(r).startOf("year").isAfter(s):!1;return v.jsxs(ge,{"data-year-level":!0,size:D,ref:t,...U,children:[v.jsx(ov,{label:typeof L=="function"?L(r):St(r).locale(i||O.locale).format(L),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:b,onNext:_,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:A,withNext:R,withPrevious:P,...V}),v.jsx(L4,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__getControlRef:u,__onControlKeyDown:c,__onControlClick:d,__onControlMouseEnter:f,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...V})]})});j4.classes={...ov.classes,...L4.classes};j4.displayName="@mantine/dates/YearLevel";const m8t={monthLabelFormat:"MMMM YYYY"},B4=Le((e,t)=>{const n=we("MonthLevel",m8t,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:b,__onDayMouseEnter:_,withCellSpacing:w,highlightToday:E,__preventFocus:x,__stopPropagation:S,nextIcon:C,previousIcon:A,nextLabel:R,previousLabel:P,onNext:L,onPrevious:k,onLevelClick:$,nextDisabled:D,previousDisabled:M,hasNextLevel:B,levelControlAriaLabel:z,withNext:U,withPrevious:O,monthLabelFormat:V,classNames:W,styles:j,unstyled:H,__staticSelector:G,size:J,static:se,...ie}=n,ne=vu(),ue={__staticSelector:G||"MonthLevel",classNames:W,styles:j,unstyled:H,size:J},xe=typeof D=="boolean"?D:d?!St(r).endOf("month").isBefore(d):!1,de=typeof M=="boolean"?M:c?!St(r).startOf("month").isAfter(c):!1;return v.jsxs(ge,{"data-month-level":!0,size:J,ref:t,...ie,children:[v.jsx(ov,{label:typeof V=="function"?V(r):St(r).locale(i||ne.locale).format(V),__preventFocus:x,__stopPropagation:S,nextIcon:C,previousIcon:A,nextLabel:R,previousLabel:P,onNext:L,onPrevious:k,onLevelClick:$,nextDisabled:xe,previousDisabled:de,hasNextLevel:B,levelControlAriaLabel:z,withNext:U,withPrevious:O,...ue}),v.jsx(D4,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:b,__onDayMouseEnter:_,__preventFocus:x,__stopPropagation:S,static:se,withCellSpacing:w,highlightToday:E,...ue})]})});B4.classes={...D4.classes,...ov.classes};B4.displayName="@mantine/dates/MonthLevel";var o$e={levelsGroup:"m_30b26e33"};const g8t={},av=Le((e,t)=>{const n=we("LevelsGroup",g8t,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:l,__staticSelector:u,...c}=n,d=mt({name:u||"LevelsGroup",classes:o$e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,rootSelector:"levelsGroup"});return v.jsx(ge,{ref:t,...d("levelsGroup"),...c})});av.classes=o$e;av.displayName="@mantine/dates/LevelsGroup";const y8t={numberOfColumns:1},z4=Le((e,t)=>{const n=we("DecadeLevelGroup",y8t,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:l,__onControlClick:u,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,nextDisabled:_,previousDisabled:w,classNames:E,styles:x,unstyled:S,__staticSelector:C,__stopPropagation:A,numberOfColumns:R,levelControlAriaLabel:P,decadeLabelFormat:L,size:k,vars:$,...D}=n,M=I.useRef([]),B=Array(R).fill(0).map((z,U)=>{const O=St(r).add(U*10,"years").toDate();return v.jsx(F4,{size:k,yearsListFormat:a,decade:O,withNext:U===R-1,withPrevious:U===0,decadeLabelFormat:L,__onControlClick:u,__onControlMouseEnter:c,__onControlKeyDown:(V,W)=>rte({levelIndex:U,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:V,controlsRef:M}),__getControlRef:(V,W,j)=>{Array.isArray(M.current[U])||(M.current[U]=[]),Array.isArray(M.current[U][V])||(M.current[U][V]=[]),M.current[U][V][W]=j},levelControlAriaLabel:typeof P=="function"?P(O):P,locale:i,minDate:s,maxDate:o,__preventFocus:f,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,nextDisabled:_,previousDisabled:w,getYearControlProps:l,__staticSelector:C||"DecadeLevelGroup",classNames:E,styles:x,unstyled:S,withCellSpacing:d},U)});return v.jsx(av,{classNames:E,styles:x,__staticSelector:C||"DecadeLevelGroup",ref:t,size:k,unstyled:S,...D,children:B})});z4.classes={...av.classes,...F4.classes};z4.displayName="@mantine/dates/DecadeLevelGroup";const v8t={numberOfColumns:1},U4=Le((e,t)=>{const n=we("YearLevelGroup",v8t,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:l,__onControlClick:u,__onControlMouseEnter:c,withCellSpacing:d,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:x,classNames:S,styles:C,unstyled:A,__staticSelector:R,__stopPropagation:P,numberOfColumns:L,levelControlAriaLabel:k,yearLabelFormat:$,size:D,vars:M,...B}=n,z=I.useRef([]),U=Array(L).fill(0).map((O,V)=>{const W=St(r).add(V,"years").toDate();return v.jsx(j4,{size:D,monthsListFormat:a,year:W,withNext:V===L-1,withPrevious:V===0,yearLabelFormat:$,__stopPropagation:P,__onControlClick:u,__onControlMouseEnter:c,__onControlKeyDown:(j,H)=>rte({levelIndex:V,rowIndex:H.rowIndex,cellIndex:H.cellIndex,event:j,controlsRef:z}),__getControlRef:(j,H,G)=>{Array.isArray(z.current[V])||(z.current[V]=[]),Array.isArray(z.current[V][j])||(z.current[V][j]=[]),z.current[V][j][H]=G},levelControlAriaLabel:typeof k=="function"?k(W):k,locale:i,minDate:s,maxDate:o,__preventFocus:f,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:b,onLevelClick:_,nextDisabled:w,previousDisabled:E,hasNextLevel:x,getMonthControlProps:l,classNames:S,styles:C,unstyled:A,__staticSelector:R||"YearLevelGroup",withCellSpacing:d},V)});return v.jsx(av,{classNames:S,styles:C,__staticSelector:R||"YearLevelGroup",ref:t,size:D,unstyled:A,...B,children:U})});U4.classes={...j4.classes,...av.classes};U4.displayName="@mantine/dates/YearLevelGroup";const b8t={numberOfColumns:1},V4=Le((e,t)=>{const n=we("MonthLevelGroup",b8t,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:b,highlightToday:_,__preventFocus:w,nextIcon:E,previousIcon:x,nextLabel:S,previousLabel:C,onNext:A,onPrevious:R,onLevelClick:P,nextDisabled:L,previousDisabled:k,hasNextLevel:$,classNames:D,styles:M,unstyled:B,numberOfColumns:z,levelControlAriaLabel:U,monthLabelFormat:O,__staticSelector:V,__stopPropagation:W,size:j,static:H,vars:G,...J}=n,se=I.useRef([]),ie=Array(z).fill(0).map((ne,ue)=>{const xe=St(r).add(ue,"months").toDate();return v.jsx(B4,{month:xe,withNext:ue===z-1,withPrevious:ue===0,monthLabelFormat:O,__stopPropagation:W,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(de,Ke)=>rte({levelIndex:ue,rowIndex:Ke.rowIndex,cellIndex:Ke.cellIndex,event:de,controlsRef:se}),__getDayRef:(de,Ke,je)=>{Array.isArray(se.current[ue])||(se.current[ue]=[]),Array.isArray(se.current[ue][de])||(se.current[ue][de]=[]),se.current[ue][de][Ke]=je},levelControlAriaLabel:typeof U=="function"?U(xe):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:l,excludeDate:u,minDate:c,maxDate:d,renderDay:f,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:w,nextIcon:E,previousIcon:x,nextLabel:S,previousLabel:C,onNext:A,onPrevious:R,onLevelClick:P,nextDisabled:L,previousDisabled:k,hasNextLevel:$,classNames:D,styles:M,unstyled:B,__staticSelector:V||"MonthLevelGroup",size:j,static:H,withCellSpacing:b,highlightToday:_},ue)});return v.jsx(av,{classNames:D,styles:M,__staticSelector:V||"MonthLevelGroup",ref:t,size:j,...J,children:ie})});V4.classes={...av.classes,...B4.classes};V4.displayName="@mantine/dates/MonthLevelGroup";var a$e={input:"m_6fa5e2aa"};const _8t={},H4=Le((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:l,modalProps:u,dropdownType:c,children:d,formattedValue:f,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:b,rightSection:_,shouldClear:w,readOnly:E,disabled:x,value:S,name:C,form:A,type:R,...P}=SY("PickerInputBase",_8t,e),L=_||(g&&w&&!E&&!x?v.jsx(rg,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...b}):null),k=()=>{R==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return v.jsxs(v.Fragment,{children:[c==="modal"&&!E&&v.jsx(xs,{opened:p,onClose:k,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...u,children:d}),v.jsx(Kr.Wrapper,{...r,children:v.jsxs(hn,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...l,disabled:(l==null?void 0:l.disabled)||c==="modal"||E,onClose:()=>{var $;($=l==null?void 0:l.onClose)==null||$.call(l),k()},children:[v.jsx(hn.Target,{children:v.jsx(Kr,{"aria-label":f||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:x,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:L,...n,ref:t,classNames:{...s,input:vt(a$e.input,s==null?void 0:s.input)},...P,children:f||v.jsx(Kr.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),v.jsx(hn.Dropdown,{"data-dates-dropdown":!0,children:d})]})}),v.jsx(ite,{value:S,name:C,form:A,type:R})]})});H4.classes=a$e;H4.displayName="@mantine/dates/PickerInputBase";const dge=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function qI({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=vu(),[a,l,u]=ji({value:xm("add",t,o.getTimezone(),!i),defaultValue:xm("add",n,o.getTimezone(),!i),finalValue:dge(e),onChange:d=>{r==null||r(xm("remove",d,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:dge(e),l(c))),[c,l,u]}function F9(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function w8t(e){return e===0?"month":e===1?"year":"decade"}function ZT(e,t,n){return w8t(Lc(F9(e,0),F9(t,0),F9(n,2)))}const E8t={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},WS=Le((e,t)=>{const n=we("Calendar",E8t,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:l,date:u,defaultDate:c,onDateChange:d,numberOfColumns:f,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:b,__updateDateOnYearSelect:_,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:x,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:R,hideOutsideDates:P,hideWeekdays:L,getDayAriaLabel:k,monthLabelFormat:$,nextIcon:D,previousIcon:M,__onDayClick:B,__onDayMouseEnter:z,withCellSpacing:U,highlightToday:O,monthsListFormat:V,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:J,classNames:se,styles:ie,unstyled:ne,minDate:ue,maxDate:xe,locale:de,__staticSelector:Ke,size:je,__preventFocus:Oe,__stopPropagation:Fe,onNextDecade:Ae,onPreviousDecade:fe,onNextYear:Pe,onPreviousYear:He,onNextMonth:ft,onPreviousMonth:Ee,static:he,__timezoneApplied:Ue,...nt}=n,{resolvedClassNames:ye,resolvedStyles:Re}=lp({classNames:se,styles:ie,props:n}),[Ge,Qe]=ji({value:a?ZT(a,s,i):void 0,defaultValue:o?ZT(o,s,i):void 0,finalValue:ZT(void 0,s,i),onChange:l}),[xt,An]=qI({type:"default",value:u,defaultValue:c,onChange:d,applyTimezone:!Ue}),gr={__staticSelector:Ke||"Calendar",styles:Re,classNames:ye,unstyled:ne,size:je},yr=vu(),Nr=h||f||1,Xt=xt||xm("add",new Date,yr.getTimezone()),Dn=()=>{const Un=St(Xt).add(Nr,"month").toDate();ft==null||ft(Un),An(Un)},rr=()=>{const Un=St(Xt).subtract(Nr,"month").toDate();Ee==null||Ee(Un),An(Un)},ir=()=>{const Un=St(Xt).add(Nr,"year").toDate();Pe==null||Pe(Un),An(Un)},ao=()=>{const Un=St(Xt).subtract(Nr,"year").toDate();He==null||He(Un),An(Un)},Pi=()=>{const Un=St(Xt).add(10*Nr,"year").toDate();Ae==null||Ae(Un),An(Un)},zi=()=>{const Un=St(Xt).subtract(10*Nr,"year").toDate();fe==null||fe(Un),An(Un)};return v.jsxs(ge,{ref:t,size:je,"data-calendar":!0,...nt,children:[Ge==="month"&&v.jsx(V4,{month:Xt,minDate:ue,maxDate:xe,firstDayOfWeek:E,weekdayFormat:x,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:R,hideOutsideDates:P,hideWeekdays:L,getDayAriaLabel:k,onNext:Dn,onPrevious:rr,hasNextLevel:i!=="month",onLevelClick:()=>Qe("year"),numberOfColumns:f,locale:de,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:D,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:z,__preventFocus:Oe,__stopPropagation:Fe,static:he,withCellSpacing:U,highlightToday:O,...gr}),Ge==="year"&&v.jsx(U4,{year:Xt,numberOfColumns:f,minDate:ue,maxDate:xe,monthsListFormat:V,getMonthControlProps:W,locale:de,onNext:ir,onPrevious:ao,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>Qe("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:D,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:j,__onControlMouseEnter:b,__onControlClick:(Un,Wn)=>{w&&An(Wn),Qe(ZT("month",s,i)),g==null||g(Wn)},__preventFocus:Oe,__stopPropagation:Fe,withCellSpacing:U,...gr}),Ge==="decade"&&v.jsx(z4,{decade:Xt,minDate:ue,maxDate:xe,yearsListFormat:H,getYearControlProps:G,locale:de,onNext:Pi,onPrevious:zi,numberOfColumns:f,nextLabel:p==null?void 0:p.nextDecade,nextIcon:D,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:J,__onControlMouseEnter:y,__onControlClick:(Un,Wn)=>{_&&An(Wn),Qe(ZT("year",s,i)),m==null||m(Wn)},__preventFocus:Oe,__stopPropagation:Fe,withCellSpacing:U,...gr})]})});WS.classes={...z4.classes,...U4.classes,...V4.classes};WS.displayName="@mantine/dates/Calendar";function l$e(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:l,defaultDate:u,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:b,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:x,onPreviousDecade:S,withCellSpacing:C,highlightToday:A,__updateDateOnYearSelect:R,__updateDateOnMonthSelect:P,firstDayOfWeek:L,weekdayFormat:k,weekendDays:$,getDayProps:D,excludeDate:M,renderDay:B,hideOutsideDates:z,hideWeekdays:U,getDayAriaLabel:O,monthLabelFormat:V,monthsListFormat:W,getMonthControlProps:j,yearLabelFormat:H,yearsListFormat:G,getYearControlProps:J,decadeLabelFormat:se,allowSingleDateInRange:ie,allowDeselect:ne,minDate:ue,maxDate:xe,locale:de,...Ke}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:l,defaultDate:u,onDateChange:c,numberOfColumns:d,columnsToScroll:f,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:b,onPreviousMonth:_,onNextYear:w,onPreviousYear:E,onNextDecade:x,onPreviousDecade:S,withCellSpacing:C,highlightToday:A,__updateDateOnYearSelect:R,__updateDateOnMonthSelect:P,firstDayOfWeek:L,weekdayFormat:k,weekendDays:$,getDayProps:D,excludeDate:M,renderDay:B,hideOutsideDates:z,hideWeekdays:U,getDayAriaLabel:O,monthLabelFormat:V,monthsListFormat:W,getMonthControlProps:j,yearLabelFormat:H,yearsListFormat:G,getYearControlProps:J,decadeLabelFormat:se,allowSingleDateInRange:ie,allowDeselect:ne,minDate:ue,maxDate:xe,locale:de},others:Ke}}function fge(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return St(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&St(n[1]).endOf("day").add(1,"ms").isAfter(e)}function x8t({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:l=!0}){const[u,c]=qI({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:l}),[d,f]=I.useState(e==="range"&&u[0]&&!u[1]?u[0]:null),[h,p]=I.useState(null),m=x=>{if(e==="range"){if(d instanceof Date&&!u[1]){if(St(x).isSame(d,t)&&!s){f(null),p(null),c([null,null]);return}const S=[x,d];S.sort((C,A)=>C.getTime()-A.getTime()),c(S),p(null),f(null);return}if(u[0]&&!u[1]&&St(x).isSame(u[0],t)&&!s){f(null),p(null),c([null,null]);return}c([x,null]),p(null),f(x);return}if(e==="multiple"){u.some(S=>St(S).isSame(x,t))?c(u.filter(S=>!St(S).isSame(x,t))):c([...u,x]);return}u&&o&&St(x).isSame(u,t)?c(null):c(x)},g=x=>d instanceof Date&&h instanceof Date?fge(x,[h,d]):u[0]instanceof Date&&u[1]instanceof Date?fge(x,u):!1,y=e==="range"?x=>{a==null||a(x),p(null)}:a,b=x=>u[0]instanceof Date&&St(x).isSame(u[0],t)?!(h&&St(h).isBefore(u[0])):!1,_=x=>u[1]instanceof Date?St(x).isSame(u[1],t):!(u[0]instanceof Date)||!h?!1:St(h).isBefore(u[0])&&St(x).isSame(u[0],t),w=x=>{if(e==="range")return{selected:u.some(C=>C&&St(C).isSame(x,t)),inRange:g(x),firstInRange:b(x),lastInRange:_(x),"data-autofocus":!!u[0]&&St(u[0]).isSame(x,t)||void 0};if(e==="multiple")return{selected:u.some(C=>C&&St(C).isSame(x,t)),"data-autofocus":!!u[0]&&St(u[0]).isSame(x,t)||void 0};const S=St(u).isSame(x,t);return{selected:S,"data-autofocus":S||void 0}},E=e==="range"&&d?p:()=>{};return I.useEffect(()=>{e==="range"&&!u[0]&&!u[1]&&f(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:u,setValue:c}}const S8t={type:"default",defaultLevel:"month",numberOfColumns:1},q4=Le((e,t)=>{const n=we("DatePicker",S8t,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:l,onChange:u,__staticSelector:c,getDayProps:d,allowSingleDateInRange:f,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:b,__timezoneApplied:_,...w}=n,{onDateChange:E,onRootMouseLeave:x,onHoveredDateChange:S,getControlProps:C}=x8t({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:f,value:l,defaultValue:a,onChange:u,onMouseLeave:p,applyTimezone:!_}),{resolvedClassNames:A,resolvedStyles:R}=lp({classNames:r,styles:i,props:n}),P=vu();return v.jsx(WS,{ref:t,minLevel:"month",classNames:A,styles:R,__staticSelector:c||"DatePicker",onMouseLeave:x,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(L,k)=>{S(k),y==null||y(L,k)},__onDayClick:(L,k)=>{E(k),b==null||b(L,k)},getDayProps:L=>({...C(L),...d==null?void 0:d(L)}),...w,date:xm("add",w.date,P.getTimezone(),_),__timezoneApplied:!0})});q4.classes=WS.classes;q4.displayName="@mantine/dates/DatePicker";function T8t(e,t){if(e===null)return null;const n=xm("add",new Date(e),t);return Number.isNaN(n.getTime())||!e?null:n}function C8t({date:e,maxDate:t,minDate:n}){return!(e==null||Number.isNaN(e.getTime())||t&&St(e).isAfter(t,"date")||n&&St(e).isBefore(n,"date"))}const A8t={valueFormat:"MMMM D, YYYY",fixOnBlur:!0,preserveTime:!0},ate=Le((e,t)=>{const n=SY("DateInput",A8t,e),{inputProps:r,wrapperProps:i,value:s,defaultValue:o,onChange:a,clearable:l,clearButtonProps:u,popoverProps:c,getDayProps:d,locale:f,valueFormat:h,dateParser:p,minDate:m,maxDate:g,fixOnBlur:y,onFocus:b,onBlur:_,onClick:w,readOnly:E,name:x,form:S,rightSection:C,unstyled:A,classNames:R,styles:P,allowDeselect:L,preserveTime:k,date:$,defaultDate:D,onDateChange:M,...B}=n,[z,U]=I.useState(!1),{calendarProps:O,others:V}=l$e(B),W=vu(),H=p||(He=>{const ft=St(He,h,W.getLocale(f)).toDate();return Number.isNaN(ft.getTime())?T8t(He,W.getTimezone()):ft}),G=L!==void 0?L:l,J=He=>He?St(He).locale(W.getLocale(f)).format(h):"",[se,ie,ne]=qI({type:"default",value:s,defaultValue:o,onChange:a}),[ue,xe]=qI({type:"default",value:$,defaultValue:o||D,onChange:M});I.useEffect(()=>{ne&&xe(s)},[ne,s]);const[de,Ke]=I.useState(J(se));I.useEffect(()=>{Ke(J(se))},[W.getLocale(f)]);const je=He=>{const ft=He.currentTarget.value;if(Ke(ft),U(!0),ft.trim()===""&&l)ie(null);else{const Ee=H(ft);C8t({date:Ee,minDate:m,maxDate:g})&&(ie(Ee),xe(Ee))}},Oe=He=>{_==null||_(He),U(!1),y&&Ke(J(se))},Fe=He=>{b==null||b(He),U(!0)},Ae=He=>{w==null||w(He),U(!0)},fe=He=>({...d==null?void 0:d(He),selected:St(se).isSame(He,"day"),onClick:()=>{const ft=k?L5t(se,He):He,Ee=l&&G&&St(se).isSame(He,"day")?null:ft;ie(Ee),!ne&&Ke(J(Ee)),U(!1)}}),Pe=C||(l&&se&&!E?v.jsx(rg,{variant:"transparent",onMouseDown:He=>He.preventDefault(),tabIndex:-1,onClick:()=>{ie(null),!ne&&Ke(""),U(!1)},unstyled:A,size:r.size||"sm",...u}):null);return Yu(()=>{s!==void 0&&!z&&Ke(J(s))},[s]),v.jsxs(v.Fragment,{children:[v.jsx(Kr.Wrapper,{...i,__staticSelector:"DateInput",children:v.jsxs(hn,{opened:z,trapFocus:!1,position:"bottom-start",disabled:E,withRoles:!1,unstyled:A,...c,children:[v.jsx(hn.Target,{children:v.jsx(Kr,{"data-dates-input":!0,"data-read-only":E||void 0,autoComplete:"off",ref:t,value:de,onChange:je,onBlur:Oe,onFocus:Fe,onClick:Ae,readOnly:E,rightSection:Pe,...r,...V,__staticSelector:"DateInput"})}),v.jsx(hn.Dropdown,{onMouseDown:He=>He.preventDefault(),"data-dates-dropdown":!0,children:v.jsx(WS,{__staticSelector:"DateInput",__timezoneApplied:!0,...O,classNames:R,styles:P,unstyled:A,__preventFocus:!0,minDate:m,maxDate:g,locale:f,getDayProps:fe,size:r.size,date:ue,onDateChange:xe})})]})}),v.jsx(ite,{name:x,form:S,value:se,type:"default"})]})});ate.classes={...Kr.classes,...WS.classes};ate.displayName="@mantine/dates/DateInput";function I8t({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:l,valueFormatter:u}){const c=vu(),[d,f]=N1(!1),[h,p]=qI({type:e,value:t,defaultValue:n,onChange:r}),m=O5t({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(l),formatter:u}),g=_=>{o&&(e==="default"&&f.close(),e==="range"&&_[0]&&_[1]&&f.close()),p(a&&e==="multiple"?[..._].sort((w,E)=>w.getTime()-E.getTime()):_)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),b=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:b,formattedValue:m,dropdownOpened:d,dropdownHandlers:f}}const k8t={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},lte=Le((e,t)=>{const n=we("DatePickerInput",k8t,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:l,locale:u,classNames:c,styles:d,unstyled:f,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:b,maxDate:_,vars:w,defaultDate:E,valueFormatter:x,...S}=n,{resolvedClassNames:C,resolvedStyles:A}=lp({classNames:c,styles:d,props:n}),{calendarProps:R,others:P}=l$e(S),{_value:L,setValue:k,formattedValue:$,dropdownHandlers:D,dropdownOpened:M,onClear:B,shouldClear:z}=I8t({type:r,value:i,defaultValue:s,onChange:o,locale:u,format:a,labelSeparator:l,closeOnChange:h,sortDates:y,valueFormatter:x}),U=Array.isArray(L)?L[0]||E:L||E,O=vu();return v.jsx(H4,{formattedValue:$,dropdownOpened:M,dropdownHandlers:D,classNames:C,styles:A,unstyled:f,ref:t,onClear:B,shouldClear:z,value:L,size:p,variant:m,dropdownType:g,...P,type:r,__staticSelector:"DatePickerInput",children:v.jsx(q4,{...R,size:p,variant:m,type:r,value:L,defaultDate:U||V5t({maxDate:_,minDate:b,timezone:O.getTimezone()}),onChange:k,locale:u,classNames:C,styles:A,unstyled:f,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:b,maxDate:_,date:xm("add",R.date,O.getTimezone()),__timezoneApplied:!0})})});lte.classes={...H4.classes,...q4.classes};lte.displayName="@mantine/dates/DatePickerInput";const xE=e=>{var t,n,r,i;return(i=(t=e.id)!==null&&t!==void 0?t:(r=(n=e.accessorKey)===null||n===void 0?void 0:n.toString)===null||r===void 0?void 0:r.call(n))!==null&&i!==void 0?i:e.header},M$=e=>{const t=[],n=r=>{r.forEach(i=>{i.columns?n(i.columns):t.push(i)})};return n(e),t},u$e=({columnDefs:e,tableOptions:t})=>{const{aggregationFns:n={},defaultDisplayColumn:r,filterFns:i={},sortingFns:s={},state:{columnFilterFns:o={}}={}}=t;return e.map(a=>{var l,u;if(a.id||(a.id=xE(a)),a.columnDefType||(a.columnDefType="data"),!((l=a.columns)===null||l===void 0)&&l.length)a.columnDefType="group",a.columns=u$e({columnDefs:a.columns,tableOptions:t});else if(a.columnDefType==="data"){if(Array.isArray(a.aggregationFn)){const c=a.aggregationFn;a.aggregationFn=(d,f,h)=>c.map(p=>{var m;return(m=n[p])===null||m===void 0?void 0:m.call(n,d,f,h)})}Object.keys(i).includes(o[a.id])&&(a.filterFn=(u=i[o[a.id]])!==null&&u!==void 0?u:i.fuzzy,a._filterFn=o[a.id]),Object.keys(s).includes(a.sortingFn)&&(a.sortingFn=s[a.sortingFn])}else a.columnDefType==="display"&&(a=Object.assign(Object.assign({},r),a));return a})},c$e=(e,t,n)=>{e.getCanPin()&&e.pin(t.getIsPinned());const r=[...n];return r.splice(r.indexOf(t.id),0,r.splice(r.indexOf(e.id),1)[0]),r},R8t=e=>{const{filterVariant:t}=e;return t==="multi-select"?"arrIncludesSome":t!=null&&t.includes("range")?"betweenInclusive":["checkbox","date","select"].includes(t||"")?"equals":"fuzzy"},P8t=(e,t,n=-1,r=0,i,s)=>NR(e,"mrt-row-create",Object.assign({},...M$(e.options.columns).map(o=>({[xE(o)]:""}))),n,r,i,s);function i_({header:e,id:t,size:n,tableOptions:r}){const{defaultDisplayColumn:i,displayColumnDefOptions:s,localization:o}=r;return Object.assign(Object.assign(Object.assign(Object.assign({},i),{header:e?o[e]:"",size:n}),s==null?void 0:s[t]),{id:t})}const d$e=e=>{const{enableRowPinning:t,rowPinningDisplayMode:n}=e;return!!(t&&!(n!=null&&n.startsWith("select")))},f$e=e=>{const{enableRowDragging:t,enableRowOrdering:n}=e;return!!(t||n)},ute=e=>{const{enableExpanding:t,enableGrouping:n,renderDetailPanel:r,state:{grouping:i}}=e;return!!(t||n&&(i!=null&&i.length)||r)},cte=e=>{const{createDisplayMode:t,editDisplayMode:n,enableEditing:r,enableRowActions:i,state:{creatingRow:s}}=e;return!!(i||s&&t==="row"||r&&["modal","row"].includes(n??""))},h$e=e=>!!e.enableRowSelection,p$e=e=>!!e.enableRowNumbers,m$e=e=>e.layoutMode==="grid-no-grow",N8t=e=>[d$e(e)&&"mrt-row-pin",f$e(e)&&"mrt-row-drag",e.positionActionsColumn==="first"&&cte(e)&&"mrt-row-actions",e.positionExpandColumn==="first"&&ute(e)&&"mrt-row-expand",h$e(e)&&"mrt-row-select",p$e(e)&&"mrt-row-numbers"].filter(Boolean),O8t=e=>[e.positionActionsColumn==="last"&&cte(e)&&"mrt-row-actions",e.positionExpandColumn==="last"&&ute(e)&&"mrt-row-expand",m$e(e)&&"mrt-row-spacer"].filter(Boolean),dte=(e,t=!1)=>{const{state:{columnOrder:n=[]}}=e,r=N8t(e),i=O8t(e),s=M$(e.columns).map(a=>xE(a));let o=t?s:Array.from(new Set([...n,...s]));return o=o.filter(a=>!r.includes(a)&&!i.includes(a)),[...r,...o,...i]},D8t=(e,t,n)=>{let r=0;return e.columnFiltersMeta[n]&&(r=m5t(e.columnFiltersMeta[n],t.columnFiltersMeta[n])),r===0?u1.alphanumeric(e,t,n):r},M8t=Object.assign(Object.assign({},u1),{fuzzy:D8t}),$8t=(e,t)=>Math.max(...Object.values(t.columnFiltersMeta).map(n=>n.rank))-Math.max(...Object.values(e.columnFiltersMeta).map(n=>n.rank)),_t=(e,t)=>e instanceof Function?e(t):e,g$e=(e,t)=>{const{getCenterRows:n,getPrePaginationRowModel:r,getRowModel:i,getState:s,getTopRows:o,options:{createDisplayMode:a,enablePagination:l,enableRowPinning:u,manualPagination:c,positionCreatingRow:d,rowPinningDisplayMode:f}}=e,{creatingRow:h,pagination:p}=s(),m=L8t(e);let g=[];if(!m)g=!u||f!=null&&f.includes("sticky")?t?r().rows:i().rows:n();else{if(g=r().rows.sort((y,b)=>$8t(y,b)),l&&!c&&!t){const y=p.pageIndex*p.pageSize;g=g.slice(y,y+p.pageSize)}u&&!(f!=null&&f.includes("sticky"))&&(g=g.filter(y=>!y.getIsPinned()))}if(u&&(f!=null&&f.includes("sticky"))){const y=g.filter(b=>b.getIsPinned()).map(b=>b.id);g=[...o().filter(b=>!y.includes(b.id)),...g]}if(d!==void 0&&h&&a==="row"){const y=isNaN(+d)?d==="top"?0:g.length:+d;g=[...g.slice(0,y),h,...g.slice(y)]}return g},y$e=e=>{const{getState:t,options:{enableGlobalFilterRankedResults:n,manualExpanding:r,manualFiltering:i,manualGrouping:s,manualSorting:o}}=e,{expanded:a,globalFilterFn:l}=t();return!r&&!i&&!s&&!o&&n&&l==="fuzzy"&&a!==!0&&!Object.values(a).some(Boolean)},L8t=e=>{const{globalFilter:t,sorting:n}=e.getState();return y$e(e)&&t&&!Object.values(n).some(Boolean)},$$=({row:e,table:t})=>{const{options:{enableRowSelection:n}}=t;return e.getIsSelected()||_t(n,e)&&e.getCanSelectSubRows()&&e.getIsAllSubRowsSelected()},F8t=({renderedRowIndex:e=0,row:t,table:n})=>(r,i)=>{var s;const{getState:o,options:{enableBatchRowSelection:a,enableMultiRowSelection:l,enableRowPinning:u,manualPagination:c,rowPinningDisplayMode:d},refs:{lastSelectedRowId:f}}=n,{pagination:{pageIndex:h,pageSize:p}}=o(),m=c?0:p*h,g=$$({row:t,table:n});t.toggleSelected(i??!g);const y=new Set([t.id]);if(a&&l&&r.nativeEvent.shiftKey&&f.current!==null){const b=g$e(n,!0),_=b.findIndex(w=>w.id===f.current);if(_!==-1){const w=$$({row:b==null?void 0:b[_],table:n}),E=e+m,[x,S]=_<E?[_,E]:[E,_];if(g!==w)for(let C=x;C<=S;C++)b[C].toggleSelected(!g),y.add(b[C].id)}}f.current=t.id,t.getCanSelectSubRows()&&t.getIsAllSubRowsSelected()&&((s=t.subRows)===null||s===void 0||s.forEach(b=>b.toggleSelected(!1))),u&&(d!=null&&d.includes("select"))&&y.forEach(b=>{n.getRow(b).pin(g?!1:d!=null&&d.includes("bottom")?"bottom":"top")})},v$e=({table:e})=>(t,n,r)=>{const{options:{enableRowPinning:i,rowPinningDisplayMode:s,selectAllMode:o},refs:{lastSelectedRowId:a}}=e;o==="all"||r?e.toggleAllRowsSelected(n??t.target.checked):e.toggleAllPageRowsSelected(n??t.target.checked),i&&(s!=null&&s.includes("select"))&&e.setRowPinning({bottom:[],top:[]}),a.current=null},hf=e=>e.replace(/[^a-zA-Z0-9]/g,"_"),j8t=e=>{var t,n;return typeof e.primaryShade=="number"?e.primaryShade:(n=(t=e.primaryShade)===null||t===void 0?void 0:t.dark)!==null&&n!==void 0?n:7},B8t=(e,t)=>e.colors[e.primaryColor][t??j8t(e)];function L$(e,t){const n=`data-${e}`;switch(typeof t){case"boolean":return t?{[n]:""}:null;case"number":return{[n]:`${t}`};case"string":return{[n]:t};default:return null}}const z8t=Object.assign({},TD),b$e=(e,t,n,r)=>{const i=f5t(e.getValue(t),n,{threshold:Qa.MATCHES});return r(i),i.passed};b$e.autoRemove=e=>!e;const _$e=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().includes(n.toString().toLowerCase().trim());_$e.autoRemove=e=>!e;const w$e=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().startsWith(n.toString().toLowerCase().trim());w$e.autoRemove=e=>!e;const E$e=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim().endsWith(n.toString().toLowerCase().trim());E$e.autoRemove=e=>!e;const W4=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim()===(n==null?void 0:n.toString().toLowerCase().trim());W4.autoRemove=e=>!e;const x$e=(e,t,n)=>e.getValue(t).toString().toLowerCase().trim()!==n.toString().toLowerCase().trim();x$e.autoRemove=e=>!e;const G4=(e,t,n)=>!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)>+n:e.getValue(t).toString().toLowerCase().trim()>(n==null?void 0:n.toString().toLowerCase().trim());G4.autoRemove=e=>!e;const fte=(e,t,n)=>W4(e,t,n)||G4(e,t,n);fte.autoRemove=e=>!e;const Y4=(e,t,n)=>!isNaN(+n)&&!isNaN(+e.getValue(t))?+e.getValue(t)<+n:e.getValue(t).toString().toLowerCase().trim()<(n==null?void 0:n.toString().toLowerCase().trim());Y4.autoRemove=e=>!e;const hte=(e,t,n)=>W4(e,t,n)||Y4(e,t,n);hte.autoRemove=e=>!e;const S$e=(e,t,n)=>(["",void 0].includes(n[0])||G4(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||Y4(e,t,n[1]));S$e.autoRemove=e=>!e;const T$e=(e,t,n)=>(["",void 0].includes(n[0])||fte(e,t,n[0]))&&(!isNaN(+n[0])&&!isNaN(+n[1])&&+n[0]>+n[1]||["",void 0].includes(n[1])||hte(e,t,n[1]));T$e.autoRemove=e=>!e;const C$e=(e,t,n)=>!e.getValue(t).toString().trim();C$e.autoRemove=e=>!e;const A$e=(e,t,n)=>!!e.getValue(t).toString().trim();A$e.autoRemove=e=>!e;const U8t=Object.assign(Object.assign({},oh),{between:S$e,betweenInclusive:T$e,contains:_$e,empty:C$e,endsWith:E$e,equals:W4,fuzzy:b$e,greaterThan:G4,greaterThanOrEqualTo:fte,lessThan:Y4,lessThanOrEqualTo:hte,notEmpty:A$e,notEquals:x$e,startsWith:w$e});function pte(e,t){var n;if(!t)return"";const r=`filter${t[0].toUpperCase()}${t.slice(1)}`;return(n=e[r])!==null&&n!==void 0?n:""}function an(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var V8t={root:"MRT_EditActionButtons-module_root__BfxVZ"};const I$e=e=>{var{row:t,table:n,variant:r="icon"}=e,i=an(e,["row","table","variant"]);const{getState:s,options:{icons:{IconCircleX:o,IconDeviceFloppy:a},localization:l,onCreatingRowCancel:u,onCreatingRowSave:c,onEditingRowCancel:d,onEditingRowSave:f},refs:{editInputRefs:h},setCreatingRow:p,setEditingRow:m}=n,{creatingRow:g,editingRow:y,isSaving:b}=s(),_=(g==null?void 0:g.id)===t.id,w=(y==null?void 0:y.id)===t.id,E=()=>{_?(u==null||u({row:t,table:n}),p(null)):w&&(d==null||d({row:t,table:n}),m(null)),t._valuesCache={}},x=()=>{var S;(S=Object.values(h==null?void 0:h.current).filter(C=>{var A,R;return t.id===((R=(A=C==null?void 0:C.name)===null||A===void 0?void 0:A.split("_"))===null||R===void 0?void 0:R[0])}))===null||S===void 0||S.forEach(C=>{C.value!==void 0&&Object.hasOwn(t==null?void 0:t._valuesCache,C.name)&&(t._valuesCache[C.name]=C.value)}),_?c==null||c({exitCreatingMode:()=>p(null),row:t,table:n,values:t._valuesCache}):w&&(f==null||f({exitEditingMode:()=>m(null),row:t,table:n,values:t==null?void 0:t._valuesCache}))};return v.jsx(ge,Object.assign({className:vt("mrt-edit-action-buttons",V8t.root),onClick:S=>S.stopPropagation()},i,{children:r==="icon"?v.jsxs(v.Fragment,{children:[v.jsx(on,{label:l.cancel,withinPortal:!0,children:v.jsx(Bn,{"aria-label":l.cancel,color:"red",onClick:E,variant:"subtle",children:v.jsx(o,{})})}),v.jsx(on,{label:l.save,withinPortal:!0,children:v.jsx(Bn,{"aria-label":l.save,color:"blue",loading:b,onClick:x,variant:"subtle",children:v.jsx(a,{})})})]}):v.jsxs(v.Fragment,{children:[v.jsx(xn,{onClick:E,variant:"subtle",children:l.cancel}),v.jsx(xn,{loading:b,onClick:x,variant:"filled",children:l.save})]})}))},H8t=e=>{var{handleEdit:t,row:n,table:r}=e,i=an(e,["handleEdit","row","table"]);const{options:{editDisplayMode:s,enableEditing:o,icons:{IconDots:a,IconEdit:l},localization:u,positionActionsColumn:c,renderRowActionMenuItems:d}}=r;return v.jsxs(dn,{closeOnItemClick:!0,position:c==="first"?"bottom-start":c==="last"?"bottom-end":void 0,withinPortal:!0,children:[v.jsx(on,{label:u.rowActions,openDelay:1e3,withinPortal:!0,children:v.jsx(dn.Target,{children:v.jsx(Bn,Object.assign({"aria-label":u.rowActions,color:"gray",onClick:f=>f.stopPropagation(),size:"sm",variant:"subtle"},i,{children:v.jsx(a,{})}))})}),v.jsxs(dn.Dropdown,{onClick:f=>f.stopPropagation(),children:[o&&s!=="table"&&v.jsx(dn.Item,{leftSection:v.jsx(l,{}),onClick:t,children:u.edit}),d==null?void 0:d({row:n,table:r})]})]})},q8t=({cell:e,row:t,table:n})=>{const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableEditing:o,icons:{IconEdit:a},localization:{edit:l},renderRowActionMenuItems:u,renderRowActions:c},setEditingRow:d}=n,{creatingRow:f,editingRow:h}=r(),p=(f==null?void 0:f.id)===t.id,m=(h==null?void 0:h.id)===t.id,g=b=>{b.stopPropagation(),d(Object.assign({},t))},y=p&&i==="row"||m&&s==="row";return v.jsx(v.Fragment,{children:c&&!y?c({cell:e,row:t,table:n}):y?v.jsx(I$e,{row:t,table:n}):!u&&_t(o,t)?v.jsx(on,{label:l,openDelay:1e3,position:"right",withinPortal:!0,children:v.jsx(Bn,{"aria-label":l,color:"gray",disabled:!!h&&h.id!==t.id,onClick:g,size:"md",variant:"subtle",children:v.jsx(a,{})})}):u?v.jsx(H8t,{handleEdit:g,row:t,table:n}):null})},W8t=e=>Object.assign({Cell:({cell:t,row:n,table:r})=>v.jsx(q8t,{cell:t,row:n,table:r})},i_({header:"actions",id:"mrt-row-actions",size:70,tableOptions:e}));var G8t={"grab-icon":"MRT_GrabHandleButton-module_grab-icon__mQimy"};const mte=({actionIconProps:e,onDragEnd:t,onDragStart:n,table:{options:{icons:{IconGripHorizontal:r},localization:{move:i}}}})=>{var s,o;return v.jsx(on,{label:(s=e==null?void 0:e.title)!==null&&s!==void 0?s:i,openDelay:1e3,withinPortal:!0,children:v.jsx(Bn,Object.assign({"aria-label":(o=e==null?void 0:e.title)!==null&&o!==void 0?o:i,draggable:!0},e,{className:vt("mrt-grab-handle-button",G8t["grab-icon"],e==null?void 0:e.className),color:"gray",size:"sm",onClick:a=>{var l;a.stopPropagation(),(l=e==null?void 0:e.onClick)===null||l===void 0||l.call(e,a)},onDragEnd:t,onDragStart:n,title:void 0,variant:"transparent",children:v.jsx(r,{size:"100%"})}))})},Y8t=e=>{var{row:t,rowRef:n,table:r}=e,i=an(e,["row","rowRef","table"]);const{options:{mantineRowDragHandleProps:s}}=r,o=Object.assign(Object.assign({},_t(s,{row:t,table:r})),i),a=u=>{var c;(c=o==null?void 0:o.onDragStart)===null||c===void 0||c.call(o,u),u.dataTransfer.setDragImage(n.current,0,0),r.setDraggingRow(t)},l=u=>{var c;(c=o==null?void 0:o.onDragEnd)===null||c===void 0||c.call(o,u),r.setDraggingRow(null),r.setHoveredRow(null)};return v.jsx(mte,{actionIconProps:o,onDragEnd:l,onDragStart:a,table:r})},K8t=e=>Object.assign({Cell:({row:t,rowRef:n,table:r})=>v.jsx(Y8t,{row:t,rowRef:n,table:r}),grow:!1},i_({header:"move",id:"mrt-row-drag",size:60,tableOptions:e}));var JN={root:"MRT_ExpandAllButton-module_root__gkBZD",chevron:"MRT_ExpandAllButton-module_chevron__Iep0j",up:"MRT_ExpandAllButton-module_up__Xth3U",right:"MRT_ExpandAllButton-module_right__bS4L-"};const X8t=e=>{var t,n,{table:r}=e,i=an(e,["table"]);const{getCanSomeRowsExpand:s,getIsAllRowsExpanded:o,getIsSomeRowsExpanded:a,getState:l,options:{icons:{IconChevronsDown:u},localization:c,mantineExpandAllButtonProps:d,renderDetailPanel:f},toggleAllRowsExpanded:h}=r,{density:p,isLoading:m}=l(),g=Object.assign(Object.assign({},_t(d,{table:r})),i),y=o();return v.jsx(on,{label:((t=g==null?void 0:g.title)!==null&&t!==void 0?t:y)?c.collapseAll:c.expandAll,openDelay:1e3,withinPortal:!0,children:v.jsx(Bn,Object.assign({"aria-label":c.expandAll,color:"gray",variant:"subtle"},g,{className:vt("mrt-expand-all-button",JN.root,g==null?void 0:g.className,p),disabled:m||!f&&!s(),onClick:()=>h(!y),title:void 0,children:(n=g==null?void 0:g.children)!==null&&n!==void 0?n:v.jsx(u,{className:vt(JN.chevron,y?JN.up:a()?JN.right:void 0)})}))})};var eC={root:"MRT_ExpandButton-module_root__IFYio","root-ltr":"MRT_ExpandButton-module_root-ltr__FHNnp",chevron:"MRT_ExpandButton-module_chevron__XzC5P",right:"MRT_ExpandButton-module_right__-pC-A",up:"MRT_ExpandButton-module_up__TZGBo","root-rtl":"MRT_ExpandButton-module_root-rtl__zoudS"};const hge=e=>{var t,n,{row:r,table:i}=e,s=an(e,["row","table"]);const o=bl(),{options:{icons:{IconChevronDown:a},localization:l,mantineExpandButtonProps:u,positionExpandColumn:c,renderDetailPanel:d}}=i,f=Object.assign(Object.assign({},_t(u,{row:r,table:i})),s),h=r.getCanExpand(),p=r.getIsExpanded(),m=!!(d!=null&&d({row:r,table:i})),g=b=>{var _;b.stopPropagation(),r.toggleExpanded(),(_=f==null?void 0:f.onClick)===null||_===void 0||_.call(f,b)},y=o.dir==="rtl"||c==="last";return v.jsx(on,{disabled:!h&&!m,label:((t=f==null?void 0:f.title)!==null&&t!==void 0?t:p)?l.collapse:l.expand,openDelay:1e3,withinPortal:!0,children:v.jsx(Bn,Object.assign({"aria-label":l.expand,color:"gray",disabled:!h&&!m,variant:"subtle"},f,{__vars:{"--mrt-row-depth":`${r.depth}`},className:vt("mrt-expand-button",eC.root,eC[`root-${y?"rtl":"ltr"}`],f==null?void 0:f.className),onClick:g,title:void 0,children:(n=f==null?void 0:f.children)!==null&&n!==void 0?n:v.jsx(a,{className:vt("mrt-expand-button-chevron",eC.chevron,!h&&!d?eC.right:p?eC.up:void 0)})}))})},Q8t=e=>{var t;const{defaultColumn:n,enableExpandAll:r,groupedColumnMode:i,positionExpandColumn:s,renderDetailPanel:o,state:{grouping:a}}=e,l=s==="last"?{align:"right"}:void 0;return Object.assign({Cell:({cell:u,column:c,row:d,table:f})=>{var h,p,m;const g={row:d,table:f},y=(h=d.subRows)===null||h===void 0?void 0:h.length;return e.groupedColumnMode==="remove"&&d.groupingColumnId?v.jsxs(Ct,{align:"center",gap:"0.25rem",children:[v.jsx(hge,Object.assign({},g)),v.jsx(on,{label:f.getColumn(d.groupingColumnId).columnDef.header,openDelay:1e3,position:"right",children:v.jsx("span",{children:d.groupingValue})}),!!y&&v.jsxs("span",{children:["(",y,")"]})]}):v.jsxs(v.Fragment,{children:[v.jsx(hge,Object.assign({},g)),(m=(p=c.columnDef).GroupedCell)===null||m===void 0?void 0:m.call(p,{cell:u,column:c,row:d,table:f})]})},Header:r?({table:u})=>{var c;return v.jsxs(Ct,{align:"center",children:[v.jsx(X8t,{table:u}),i==="remove"&&((c=a==null?void 0:a.map(d=>u.getColumn(d).columnDef.header))===null||c===void 0?void 0:c.join(", "))]})}:void 0,mantineTableBodyCellProps:l,mantineTableHeadCellProps:l},i_({header:"expand",id:"mrt-row-expand",size:i==="remove"?(t=n==null?void 0:n.size)!==null&&t!==void 0?t:180:o?r?60:70:100,tableOptions:e}))},J8t=e=>{const{localization:t,rowNumberDisplayMode:n}=e,{pagination:{pageIndex:r,pageSize:i}}=e.state;return Object.assign({Cell:({renderedRowIndex:s=0,row:o})=>{var a;return((a=n==="static"?s+i*r:o.index)!==null&&a!==void 0?a:0)+1},Header:()=>t.rowNumber,grow:!1},i_({header:"rowNumbers",id:"mrt-row-numbers",size:50,tableOptions:e}))},j9=e=>{var{pinningPosition:t,row:n,table:r}=e,i=an(e,["pinningPosition","row","table"]);const{options:{icons:{IconPinned:s,IconX:o},localization:a,rowPinningDisplayMode:l}}=r,u=n.getIsPinned(),[c,d]=I.useState(!1),f=h=>{d(!1),h.stopPropagation(),n.pin(u?!1:t)};return v.jsx(on,{label:u?a.unpin:a.pin,openDelay:1e3,opened:c,children:v.jsx(Bn,Object.assign({"aria-label":a.pin,color:"gray",onClick:f,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),size:"xs",style:{height:"24px",width:"24px"},variant:"subtle"},i,{children:u?v.jsx(o,{}):v.jsx(s,{fontSize:"small",style:{transform:`rotate(${l==="sticky"?135:t==="top"?180:0}deg)`}})}))})},Z8t=e=>{var{row:t,table:n}=e,r=an(e,["row","table"]);const{getState:i,options:{enableRowPinning:s,rowPinningDisplayMode:o}}=n,{density:a}=i();if(!_t(s,t))return null;const u=Object.assign({row:t,table:n},r);return o==="top-and-bottom"&&!t.getIsPinned()?v.jsxs(ge,{style:{display:"flex",flexDirection:a==="xs"?"row":"column"},children:[v.jsx(j9,Object.assign({pinningPosition:"top"},u)),v.jsx(j9,Object.assign({pinningPosition:"bottom"},u))]}):v.jsx(j9,Object.assign({pinningPosition:o==="bottom"?"bottom":"top"},u))},eBt=e=>Object.assign({Cell:({row:t,table:n})=>v.jsx(Z8t,{row:t,table:n}),grow:!1},i_({header:"pin",id:"mrt-row-pin",size:60,tableOptions:e})),dq=e=>{var t,{renderedRowIndex:n=0,row:r,table:i}=e,s=an(e,["renderedRowIndex","row","table"]);const{getState:o,options:{enableMultiRowSelection:a,localization:l,mantineSelectAllCheckboxProps:u,mantineSelectCheckboxProps:c,selectAllMode:d,selectDisplayMode:f}}=i,{density:h,isLoading:p}=o(),m=!r,g=m?d==="page"?i.getIsAllPageRowsSelected():i.getIsAllRowsSelected():void 0,y=m?g:$$({row:r,table:i}),b=Object.assign(Object.assign({},m?_t(u,{table:i}):_t(c,{row:r,table:i})),s),_=r?F8t({renderedRowIndex:n,row:r,table:i}):void 0,w=v$e({table:i}),E=Object.assign(Object.assign({"aria-label":m?l.toggleSelectAll:l.toggleSelectRow,checked:y,disabled:p||r&&!r.getCanSelect()||(r==null?void 0:r.id)==="mrt-row-create",onChange:x=>{x.stopPropagation(),m?w(x):_(x)},size:h==="xs"?"sm":"md"},b),{onClick:x=>{var S;x.stopPropagation(),(S=b==null?void 0:b.onClick)===null||S===void 0||S.call(b,x)},title:void 0});return v.jsx(on,{label:(t=b==null?void 0:b.title)!==null&&t!==void 0?t:m?l.toggleSelectAll:l.toggleSelectRow,openDelay:1e3,withinPortal:!0,children:v.jsx("span",{children:f==="switch"?v.jsx(M0,Object.assign({},E)):f==="radio"||a===!1?v.jsx(ty,Object.assign({},E)):v.jsx(Qu,Object.assign({indeterminate:!y&&m?i.getIsSomeRowsSelected():(r==null?void 0:r.getIsSomeSelected())&&r.getCanSelectSubRows()},E))})})},tBt=e=>{const{enableMultiRowSelection:t,enableSelectAll:n}=e;return Object.assign({Cell:({renderedRowIndex:r,row:i,table:s})=>v.jsx(dq,{renderedRowIndex:r,row:i,table:s}),Header:n&&t?({table:r})=>v.jsx(dq,{table:r}):void 0,grow:!1},i_({header:"select",id:"mrt-row-select",size:n?60:70,tableOptions:e}))},nBt={IconArrowAutofitContent:Oet,IconArrowsSort:Let,IconBaselineDensityLarge:jet,IconBaselineDensityMedium:Bet,IconBaselineDensitySmall:zet,IconBoxMultiple:Uet,IconChevronDown:Get,IconChevronLeft:Ket,IconChevronLeftPipe:Yet,IconChevronRight:Qet,IconChevronRightPipe:Xet,IconChevronsDown:Jet,IconCircleX:Zet,IconClearAll:ett,IconColumns:ttt,IconDeviceFloppy:rtt,IconDots:itt,IconDotsVertical:Fxe,IconEdit:jxe,IconEyeOff:stt,IconFilter:utt,IconFilterCog:att,IconFilterOff:ltt,IconGripHorizontal:ctt,IconMaximize:htt,IconMinimize:ptt,IconPinned:gtt,IconPinnedOff:mtt,IconSearch:Uxe,IconSearchOff:_tt,IconSortAscending:wtt,IconSortDescending:Ett,IconX:HF},rBt={actions:"Actions",and:"and",cancel:"Cancel",changeFilterMode:"Change filter mode",changeSearchMode:"Change search mode",clearFilter:"Clear filter",clearSearch:"Clear search",clearSelection:"Clear selection",clearSort:"Clear sort",clickToCopy:"Click to copy",copy:"Copy",collapse:"Collapse",collapseAll:"Collapse all",columnActions:"Column Actions",copiedToClipboard:"Copied to clipboard",dropToGroupBy:"Drop to group by {column}",edit:"Edit",expand:"Expand",expandAll:"Expand all",filterArrIncludes:"Includes",filterArrIncludesAll:"Includes all",filterArrIncludesSome:"Includes",filterBetween:"Between",filterBetweenInclusive:"Between Inclusive",filterByColumn:"Filter by {column}",filterContains:"Contains",filterEmpty:"Empty",filterEndsWith:"Ends With",filterEquals:"Equals",filterEqualsString:"Equals",filterFuzzy:"Fuzzy",filterGreaterThan:"Greater Than",filterGreaterThanOrEqualTo:"Greater Than Or Equal To",filterInNumberRange:"Between",filterIncludesString:"Contains",filterIncludesStringSensitive:"Contains",filterLessThan:"Less Than",filterLessThanOrEqualTo:"Less Than Or Equal To",filterMode:"Filter Mode: {filterType}",filterNotEmpty:"Not Empty",filterNotEquals:"Not Equals",filterStartsWith:"Starts With",filterWeakEquals:"Equals",filteringByColumn:"Filtering by {column} - {filterType} {filterValue}",goToFirstPage:"Go to first page",goToLastPage:"Go to last page",goToNextPage:"Go to next page",goToPreviousPage:"Go to previous page",grab:"Grab",groupByColumn:"Group by {column}",groupedBy:"Grouped by ",hideAll:"Hide all",hideColumn:"Hide {column} column",max:"Max",min:"Min",move:"Move",noRecordsToDisplay:"No records to display",noResultsFound:"No results found",of:"of",or:"or",pin:"Pin",pinToLeft:"Pin to left",pinToRight:"Pin to right",resetColumnSize:"Reset column size",resetOrder:"Reset order",rowActions:"Row Actions",rowNumber:"#",rowNumbers:"Row Numbers",rowsPerPage:"Rows per page",save:"Save",search:"Search",selectedCountOfRowCountRowsSelected:"{selectedCount} of {rowCount} row(s) selected",select:"Select",showAll:"Show all",showAllColumns:"Show all columns",showHideColumns:"Show/Hide columns",showHideFilters:"Show/Hide filters",showHideSearch:"Show/Hide search",sortByColumnAsc:"Sort by {column} ascending",sortByColumnDesc:"Sort by {column} descending",sortedByColumnAsc:"Sorted by {column} ascending",sortedByColumnDesc:"Sorted by {column} descending",thenBy:", then by ",toggleDensity:"Toggle density",toggleFullScreen:"Toggle full screen",toggleSelectAll:"Toggle select all",toggleSelectRow:"Toggle select row",toggleVisibility:"Toggle visibility",ungroupByColumn:"Ungroup by {column}",unpin:"Unpin",unpinAll:"Unpin all"},iBt={filterVariant:"text",maxSize:1e3,minSize:40,size:180},k$e={columnDefType:"display",enableClickToCopy:!1,enableColumnActions:!1,enableColumnDragging:!1,enableColumnFilter:!1,enableColumnOrdering:!1,enableEditing:!1,enableGlobalFilter:!1,enableGrouping:!1,enableHiding:!1,enableResizing:!1,enableSorting:!1},sBt=e=>{var t,{aggregationFns:n,autoResetExpanded:r=!1,columnFilterDisplayMode:i="subheader",columnResizeDirection:s,columnResizeMode:o="onChange",createDisplayMode:a="modal",defaultColumn:l,defaultDisplayColumn:u,editDisplayMode:c="modal",enableBatchRowSelection:d=!0,enableBottomToolbar:f=!0,enableColumnActions:h=!0,enableColumnFilters:p=!0,enableColumnOrdering:m=!1,enableColumnPinning:g=!1,enableColumnResizing:y=!1,enableColumnVirtualization:b,enableDensityToggle:_=!0,enableExpandAll:w=!0,enableExpanding:E,enableFacetedValues:x=!1,enableFilterMatchHighlighting:S=!0,enableFilters:C=!0,enableFullScreenToggle:A=!0,enableGlobalFilter:R=!0,enableGlobalFilterRankedResults:P=!0,enableGrouping:L=!1,enableHeaderActionsHoverReveal:k=!1,enableHiding:$=!0,enableMultiRowSelection:D=!0,enableMultiSort:M=!0,enablePagination:B=!0,enableRowPinning:z=!1,enableRowSelection:U=!1,enableRowVirtualization:O,enableSelectAll:V=!0,enableSorting:W=!0,enableStickyHeader:j=!1,enableTableFooter:H=!0,enableTableHead:G=!0,enableToolbarInternalActions:J=!0,enableTopToolbar:se=!0,filterFns:ie,icons:ne,layoutMode:ue,localization:xe,manualFiltering:de,manualGrouping:Ke,manualPagination:je,manualSorting:Oe,paginationDisplayMode:Fe="default",positionActionsColumn:Ae="first",positionCreatingRow:fe="top",positionExpandColumn:Pe="first",positionGlobalFilter:He="right",positionPagination:ft="bottom",positionToolbarAlertBanner:Ee="top",positionToolbarDropZone:he="top",rowNumberDisplayMode:Ue="static",rowPinningDisplayMode:nt="sticky",selectAllMode:ye="page",sortingFns:Re}=e,Ge=an(e,["aggregationFns","autoResetExpanded","columnFilterDisplayMode","columnResizeDirection","columnResizeMode","createDisplayMode","defaultColumn","defaultDisplayColumn","editDisplayMode","enableBatchRowSelection","enableBottomToolbar","enableColumnActions","enableColumnFilters","enableColumnOrdering","enableColumnPinning","enableColumnResizing","enableColumnVirtualization","enableDensityToggle","enableExpandAll","enableExpanding","enableFacetedValues","enableFilterMatchHighlighting","enableFilters","enableFullScreenToggle","enableGlobalFilter","enableGlobalFilterRankedResults","enableGrouping","enableHeaderActionsHoverReveal","enableHiding","enableMultiRowSelection","enableMultiSort","enablePagination","enableRowPinning","enableRowSelection","enableRowVirtualization","enableSelectAll","enableSorting","enableStickyHeader","enableTableFooter","enableTableHead","enableToolbarInternalActions","enableTopToolbar","filterFns","icons","layoutMode","localization","manualFiltering","manualGrouping","manualPagination","manualSorting","paginationDisplayMode","positionActionsColumn","positionCreatingRow","positionExpandColumn","positionGlobalFilter","positionPagination","positionToolbarAlertBanner","positionToolbarDropZone","rowNumberDisplayMode","rowPinningDisplayMode","selectAllMode","sortingFns"]);const Qe=bl();return ne=I.useMemo(()=>Object.assign(Object.assign({},nBt),ne),[ne]),xe=I.useMemo(()=>Object.assign(Object.assign({},rBt),xe),[xe]),n=I.useMemo(()=>Object.assign(Object.assign({},z8t),n),[]),ie=I.useMemo(()=>Object.assign(Object.assign({},U8t),ie),[]),Re=I.useMemo(()=>Object.assign(Object.assign({},M8t),Re),[]),l=I.useMemo(()=>Object.assign(Object.assign({},iBt),l),[l]),u=I.useMemo(()=>Object.assign(Object.assign({},k$e),u),[u]),[b,O]=I.useMemo(()=>[b,O],[]),s||(s=Qe.dir||"ltr"),ue=ue||(y?"grid-no-grow":"semantic"),ue==="semantic"&&(O||b)&&(ue="grid"),O&&(j=!0),B===!1&&je===void 0&&(je=!0),!((t=Ge.data)===null||t===void 0)&&t.length||(de=!0,Ke=!0,je=!0,Oe=!0),Object.assign({aggregationFns:n,autoResetExpanded:r,columnFilterDisplayMode:i,columnResizeDirection:s,columnResizeMode:o,createDisplayMode:a,defaultColumn:l,defaultDisplayColumn:u,editDisplayMode:c,enableBatchRowSelection:d,enableBottomToolbar:f,enableColumnActions:h,enableColumnFilters:p,enableColumnOrdering:m,enableColumnPinning:g,enableColumnResizing:y,enableColumnVirtualization:b,enableDensityToggle:_,enableExpandAll:w,enableExpanding:E,enableFacetedValues:x,enableFilterMatchHighlighting:S,enableFilters:C,enableFullScreenToggle:A,enableGlobalFilter:R,enableGlobalFilterRankedResults:P,enableGrouping:L,enableHeaderActionsHoverReveal:k,enableHiding:$,enableMultiRowSelection:D,enableMultiSort:M,enablePagination:B,enableRowPinning:z,enableRowSelection:U,enableRowVirtualization:O,enableSelectAll:V,enableSorting:W,enableStickyHeader:j,enableTableFooter:H,enableTableHead:G,enableToolbarInternalActions:J,enableTopToolbar:se,filterFns:ie,getCoreRowModel:Xjt(),getExpandedRowModel:E||L?Qjt():void 0,getFacetedMinMaxValues:x?Jjt():void 0,getFacetedRowModel:x?t5t():void 0,getFacetedUniqueValues:x?n5t():void 0,getFilteredRowModel:p||R||C?r5t():void 0,getGroupedRowModel:L?i5t():void 0,getPaginationRowModel:B?o5t():void 0,getSortedRowModel:W?a5t():void 0,getSubRows:xt=>xt==null?void 0:xt.subRows,icons:ne,layoutMode:ue,localization:xe,manualFiltering:de,manualGrouping:Ke,manualPagination:je,manualSorting:Oe,paginationDisplayMode:Fe,positionActionsColumn:Ae,positionCreatingRow:fe,positionExpandColumn:Pe,positionGlobalFilter:He,positionPagination:ft,positionToolbarAlertBanner:Ee,positionToolbarDropZone:he,rowNumberDisplayMode:Ue,rowPinningDisplayMode:nt,selectAllMode:ye,sortingFns:Re},Ge)},B9={children:null,style:{minWidth:0,padding:0,width:0}},oBt=e=>Object.assign(Object.assign(Object.assign(Object.assign({},i_({id:"mrt-row-spacer",size:0,tableOptions:e})),{grow:!0}),k$e),{mantineTableBodyCellProps:B9,mantineTableFooterCellProps:B9,mantineTableHeadCellProps:B9}),aBt=e=>{const{getIsSomeRowsPinned:t,getPrePaginationRowModel:n,getState:r,options:{enablePagination:i,enableRowPinning:s,rowCount:o}}=e,{columnOrder:a,density:l,globalFilter:u,isFullScreen:c,isLoading:d,pagination:f,showSkeletons:h,sorting:p}=r(),m=e.options.columns.length,g=o??n().rows.length,y=I.useReducer(()=>({}),{})[1],b=I.useRef(),_=I.useRef();I.useEffect(()=>{typeof window<"u"&&(b.current=document.body.style.height)},[]),I.useEffect(()=>{if(typeof window<"u")if(c)_.current=document.body.getBoundingClientRect().top,document.body.style.height="100dvh";else{if(document.body.style.height=b.current,!_.current)return;window.scrollTo({behavior:"instant",top:-1*_.current})}},[c]),I.useEffect(()=>{m!==a.length&&e.setColumnOrder(dte(e.options))},[m]),I.useEffect(()=>{if(!i||d||h)return;const{pageIndex:E,pageSize:x}=f;E*x>=g&&e.setPageIndex(Math.ceil(g/x)-1)},[g]);const w=I.useRef(p);I.useEffect(()=>{p.length&&(w.current=p)},[p]),I.useEffect(()=>{y$e(e)&&(u?e.setSorting([]):e.setSorting(()=>w.current||[]))},[u]),I.useEffect(()=>{s&&t()&&setTimeout(()=>{y()},150)},[l])},lBt=e=>{var t,n,r,i,s,o,a,l,u,c,d,f,h,p,m,g,y,b,_,w,E,x,S,C,A,R,P,L,k,$,D,M,B;const z=I.useRef(null),U=I.useRef(null),O=I.useRef({}),V=I.useRef({}),W=I.useRef(null),j=I.useRef(null),H=I.useRef({}),G=I.useRef(null),J=I.useRef(null),se=I.useRef(null),ie=I.useRef(null),ne=I.useMemo(()=>{var Lr,ni,ri;const le=(Lr=e.initialState)!==null&&Lr!==void 0?Lr:{};return le.columnOrder=(ni=le.columnOrder)!==null&&ni!==void 0?ni:dte(Object.assign(Object.assign({},e),{state:Object.assign(Object.assign({},e.initialState),e.state)})),le.globalFilterFn=(ri=e.globalFilterFn)!==null&&ri!==void 0?ri:"fuzzy",le},[]);e.initialState=ne;const[ue,xe]=I.useState((t=ne.creatingRow)!==null&&t!==void 0?t:null),[de,Ke]=I.useState(()=>Object.assign({},...M$(e.columns).map(Lr=>{var ni,ri,le,te;return{[xE(Lr)]:Lr.filterFn instanceof Function?(ni=Lr.filterFn.name)!==null&&ni!==void 0?ni:"custom":(te=(ri=Lr.filterFn)!==null&&ri!==void 0?ri:(le=ne==null?void 0:ne.columnFilterFns)===null||le===void 0?void 0:le[xE(Lr)])!==null&&te!==void 0?te:R8t(Lr)}}))),[je,Oe]=I.useState((n=ne.columnOrder)!==null&&n!==void 0?n:[]),[Fe,Ae]=I.useState((r=ne.columnSizingInfo)!==null&&r!==void 0?r:{}),[fe,Pe]=I.useState((i=ne==null?void 0:ne.density)!==null&&i!==void 0?i:"md"),[He,ft]=I.useState((s=ne.draggingColumn)!==null&&s!==void 0?s:null),[Ee,he]=I.useState((o=ne.draggingRow)!==null&&o!==void 0?o:null),[Ue,nt]=I.useState((a=ne.editingCell)!==null&&a!==void 0?a:null),[ye,Re]=I.useState((l=ne.editingRow)!==null&&l!==void 0?l:null),[Ge,Qe]=I.useState((u=ne.globalFilterFn)!==null&&u!==void 0?u:"fuzzy"),[xt,An]=I.useState((c=ne.grouping)!==null&&c!==void 0?c:[]),[gr,yr]=I.useState((d=ne.hoveredColumn)!==null&&d!==void 0?d:null),[Nr,Xt]=I.useState((f=ne.hoveredRow)!==null&&f!==void 0?f:null),[Dn,rr]=I.useState((h=ne==null?void 0:ne.isFullScreen)!==null&&h!==void 0?h:!1),[ir,ao]=I.useState((p=ne==null?void 0:ne.pagination)!==null&&p!==void 0?p:{pageIndex:0,pageSize:10}),[Pi,zi]=I.useState((m=ne==null?void 0:ne.showAlertBanner)!==null&&m!==void 0?m:!1),[Un,Wn]=I.useState((g=ne==null?void 0:ne.showColumnFilters)!==null&&g!==void 0?g:!1),[Qi,vd]=I.useState((y=ne==null?void 0:ne.showGlobalFilter)!==null&&y!==void 0?y:!1),[Ua,mc]=I.useState((b=ne==null?void 0:ne.showToolbarDropZone)!==null&&b!==void 0?b:!1);e.state=Object.assign({columnFilterFns:de,columnOrder:je,columnSizingInfo:Fe,creatingRow:ue,density:fe,draggingColumn:He,draggingRow:Ee,editingCell:Ue,editingRow:ye,globalFilterFn:Ge,grouping:xt,hoveredColumn:gr,hoveredRow:Nr,isFullScreen:Dn,pagination:ir,showAlertBanner:Pi,showColumnFilters:Un,showGlobalFilter:Qi,showToolbarDropZone:Ua},e.state);const gt=e,ci=I.useRef([]);gt.columns=gt.state.columnSizingInfo.isResizingColumn||gt.state.draggingColumn||gt.state.draggingRow?ci.current:u$e({columnDefs:[...[d$e(gt)&&eBt(gt),f$e(gt)&&K8t(gt),cte(gt)&&W8t(gt),ute(gt)&&Q8t(gt),h$e(gt)&&tBt(gt),p$e(gt)&&J8t(gt)].filter(Boolean),...gt.columns,...[m$e(gt)&&oBt(gt)].filter(Boolean)],tableOptions:gt}),ci.current=gt.columns,gt.data=I.useMemo(()=>(gt.state.isLoading||gt.state.showSkeletons)&&!gt.data.length?[...Array(Math.min(gt.state.pagination.pageSize,20)).fill(null)].map(()=>Object.assign({},...M$(gt.columns).map(Lr=>({[xE(Lr)]:null})))):gt.data,[gt.data,gt.state.isLoading,gt.state.showSkeletons]);const wn=l5t(Object.assign(Object.assign({onColumnOrderChange:Oe,onColumnSizingInfoChange:Ae,onGroupingChange:An,onPaginationChange:ao},gt),{globalFilterFn:(_=gt.filterFns)===null||_===void 0?void 0:_[Ge??"fuzzy"]}));return wn.refs={bottomToolbarRef:U,editInputRefs:O,filterInputRefs:V,lastSelectedRowId:z,searchInputRef:W,tableContainerRef:j,tableFooterRef:ie,tableHeadCellRefs:H,tableHeadRef:se,tablePaperRef:G,topToolbarRef:J},wn.setCreatingRow=Lr=>{var ni,ri;let le=Lr;Lr===!0&&(le=P8t(wn)),(ri=(ni=gt==null?void 0:gt.onCreatingRowChange)===null||ni===void 0?void 0:ni.call(gt,le))!==null&&ri!==void 0||xe(le)},wn.setColumnFilterFns=(w=gt.onColumnFilterFnsChange)!==null&&w!==void 0?w:Ke,wn.setDensity=(E=gt.onDensityChange)!==null&&E!==void 0?E:Pe,wn.setDraggingColumn=(x=gt.onDraggingColumnChange)!==null&&x!==void 0?x:ft,wn.setDraggingRow=(S=gt.onDraggingRowChange)!==null&&S!==void 0?S:he,wn.setEditingCell=(C=gt.onEditingCellChange)!==null&&C!==void 0?C:nt,wn.setEditingRow=(A=gt.onEditingRowChange)!==null&&A!==void 0?A:Re,wn.setGlobalFilterFn=(R=gt.onGlobalFilterFnChange)!==null&&R!==void 0?R:Qe,wn.setHoveredColumn=(P=gt.onHoveredColumnChange)!==null&&P!==void 0?P:yr,wn.setHoveredRow=(L=gt.onHoveredRowChange)!==null&&L!==void 0?L:Xt,wn.setIsFullScreen=(k=gt.onIsFullScreenChange)!==null&&k!==void 0?k:rr,wn.setShowAlertBanner=($=gt.onShowAlertBannerChange)!==null&&$!==void 0?$:zi,wn.setShowColumnFilters=(D=gt.onShowColumnFiltersChange)!==null&&D!==void 0?D:Wn,wn.setShowGlobalFilter=(M=gt.onShowGlobalFilterChange)!==null&&M!==void 0?M:vd,wn.setShowToolbarDropZone=(B=gt.onShowToolbarDropZoneChange)!==null&&B!==void 0?B:mc,aBt(wn),wn},R$e=e=>lBt(sBt(e)),P$e=(e,t)=>{const n=B3e(e);return t===void 0||(t>=0&&t<Math.max(e.startIndex-e.overscan,0)&&n.unshift(t),t>=0&&t>e.endIndex+e.overscan&&n.push(t)),n},uBt=e=>{var t,n,r,i;const{getLeftLeafColumns:s,getRightLeafColumns:o,getState:a,getVisibleLeafColumns:l,options:{columnVirtualizerInstanceRef:u,columnVirtualizerOptions:c,enableColumnPinning:d,enableColumnVirtualization:f},refs:{tableContainerRef:h}}=e,{columnPinning:p,draggingColumn:m}=a();if(!f)return;const g=_t(c,{table:e}),y=l(),[b,_]=I.useMemo(()=>d?[s().map(R=>R.getPinnedIndex()),o().map(R=>y.length-R.getPinnedIndex()-1).sort((R,P)=>R-P)]:[[],[]],[y.length,p,d]),w=b.length,E=_.length,x=I.useMemo(()=>m!=null&&m.id?y.findIndex(R=>R.id===(m==null?void 0:m.id)):void 0,[m==null?void 0:m.id]),S=U3e(Object.assign({count:y.length,estimateSize:R=>y[R].getSize(),getScrollElement:()=>h.current,horizontal:!0,overscan:3,rangeExtractor:I.useCallback(R=>{const P=P$e(R,x);return!w&&!E?P:[...new Set([...b,...P,..._])]},[b,_,x])},g)),C=S.getVirtualItems();S.virtualColumns=C;const A=C.length;if(A){const R=S.getTotalSize(),P=((t=C[w])===null||t===void 0?void 0:t.start)||0,L=((n=C[b.length-1])===null||n===void 0?void 0:n.end)||0,k=((r=C[A-E])===null||r===void 0?void 0:r.start)||0,$=((i=C[A-E-1])===null||i===void 0?void 0:i.end)||0;S.virtualPaddingLeft=P-L,S.virtualPaddingRight=R-$-(E?R-k:0)}return u&&(u.current=S),S},cBt=(e,t)=>{var n;const{getRowModel:r,getState:i,options:{enableRowVirtualization:s,renderDetailPanel:o,rowVirtualizerInstanceRef:a,rowVirtualizerOptions:l},refs:{tableContainerRef:u}}=e,{density:c,draggingRow:d,expanded:f}=i();if(!s)return;const h=_t(l,{table:e}),p=(n=t==null?void 0:t.length)!==null&&n!==void 0?n:r().rows.length,m=c==="xs"?42.7:c==="md"?54.7:70.7,g=U3e(Object.assign({count:o?p*2:p,estimateSize:y=>o&&y%2===1?f===!0?100:0:m,getScrollElement:()=>u.current,measureElement:typeof window<"u"&&navigator.userAgent.indexOf("Firefox")===-1?y=>y==null?void 0:y.getBoundingClientRect().height:void 0,overscan:4,rangeExtractor:I.useCallback(y=>{var b;return P$e(y,(b=d==null?void 0:d.index)!==null&&b!==void 0?b:0)},[d])},h));return g.virtualRows=g.getVirtualItems(),a&&(a.current=g),g},dBt=e=>{const{getRowModel:t,getState:n,options:{data:r,enableGlobalFilterRankedResults:i,positionCreatingRow:s}}=e,{creatingRow:o,expanded:a,globalFilter:l,pagination:u,rowPinning:c,sorting:d}=n();return I.useMemo(()=>g$e(e),[o,r,i,a,t().rows,l,u.pageIndex,u.pageSize,s,c,d])};var fBt={root:"MRT_TablePaper-module_root__q0v5L"},z9={root:"MRT_TableContainer-module_root__JIsGB","root-sticky":"MRT_TableContainer-module_root-sticky__uC4qx","root-fullscreen":"MRT_TableContainer-module_root-fullscreen__aM8Jg"},pge={root:"MRT_Table-module_root__ms2uS","root-grid":"MRT_Table-module_root-grid__2Pynz"},Sd={root:"MRT_TableBody-module_root__kGhRy","root-grid":"MRT_TableBody-module_root-grid__WdOGg","root-no-rows":"MRT_TableBody-module_root-no-rows__iyi9K","root-virtualized":"MRT_TableBody-module_root-virtualized__TxPAi","empty-row-tr-grid":"MRT_TableBody-module_empty-row-tr-grid__LTgxw","empty-row-td-grid":"MRT_TableBody-module_empty-row-td-grid__pzlgG","empty-row-td-content":"MRT_TableBody-module_empty-row-td-content__Cc2XW",pinned:"MRT_TableBody-module_pinned__XHpcs"},U9={root:"MRT_TableBodyRow-module_root__2c3D4","root-grid":"MRT_TableBodyRow-module_root-grid__AwXTe","root-virtualized":"MRT_TableBodyRow-module_root-virtualized__zYgxq"},kv={root:"MRT_TableBodyCell-module_root__Wf-zi","root-grid":"MRT_TableBodyCell-module_root-grid__zIuC-","root-virtualized":"MRT_TableBodyCell-module_root-virtualized__jLl8R","root-data-col":"MRT_TableBodyCell-module_root-data-col__HHcxc","root-nowrap":"MRT_TableBodyCell-module_root-nowrap__-k1Jo","root-cursor-pointer":"MRT_TableBodyCell-module_root-cursor-pointer__4kw7J","root-editable-hover":"MRT_TableBodyCell-module_root-editable-hover__2DKSa"};const V9=["string","number"],hBt=["text","autocomplete"],mge=({cell:e,renderedColumnIndex:t=0,renderedRowIndex:n=0,table:r})=>{var i,s;const{getState:o,options:{enableFilterMatchHighlighting:a,mantineHighlightProps:l}}=r,{column:u,row:c}=e,{columnDef:d}=u,{globalFilter:f,globalFilterFn:h}=o(),p=u.getFilterValue(),m=_t(l,{cell:e,column:u,row:c,table:r});let g=e.getIsAggregated()&&d.AggregatedCell?d.AggregatedCell({cell:e,column:u,row:c,table:r}):c.getIsGrouped()&&!e.getIsGrouped()?null:e.getIsGrouped()&&d.GroupedCell?d.GroupedCell({cell:e,column:u,row:c,table:r}):void 0;const y=g!==void 0;if(y||(g=e.renderValue()),a&&d.enableFilterMatchHighlighting!==!1&&g&&V9.includes(typeof g)&&(p&&V9.includes(typeof p)&&hBt.includes(d.filterVariant)||f&&V9.includes(typeof f)&&u.getCanGlobalFilter())){let b=((s=(i=u.getFilterValue())!==null&&i!==void 0?i:f)!==null&&s!==void 0?s:"").toString();(p?d._filterFn:h)==="fuzzy"&&(b=b.split(" ")),g=v.jsx(dK,Object.assign({color:"yellow.3",highlight:b},m,{children:g==null?void 0:g.toString()}))}return d.Cell&&!y&&(g=d.Cell({cell:e,column:u,renderedCellValue:g,renderedColumnIndex:t,renderedRowIndex:n,row:c,table:r})),g};var pBt={root:"MRT_CopyButton-module_root__mkXy4"};const mBt=e=>{var{cell:t,children:n,table:r}=e,i=an(e,["cell","children","table"]);const{options:{localization:{clickToCopy:s,copiedToClipboard:o},mantineCopyButtonProps:a}}=r,{column:l,row:u}=t,{columnDef:c}=l,d={cell:t,column:l,row:u,table:r},f=Object.assign(Object.assign(Object.assign({},_t(a,d)),_t(c.mantineCopyButtonProps,d)),i);return v.jsx(DEe,{value:t.getValue(),children:({copied:h,copy:p})=>{var m;return v.jsx(on,{color:h?"green":void 0,label:(m=f==null?void 0:f.title)!==null&&m!==void 0?m:h?o:s,openDelay:1e3,withinPortal:!0,children:v.jsx(ds,Object.assign({},f,{className:vt("mrt-copy-button",pBt.root,f==null?void 0:f.className),onClick:g=>{g.stopPropagation(),p()},role:"presentation",title:void 0,children:n}))})}})},N$e=e=>{var t,{cell:n,table:r}=e,i=an(e,["cell","table"]);const{getState:s,options:{createDisplayMode:o,editDisplayMode:a,mantineEditSelectProps:l,mantineEditTextInputProps:u},refs:{editInputRefs:c},setCreatingRow:d,setEditingCell:f,setEditingRow:h}=r,{column:p,row:m}=n,{columnDef:g}=p,{creatingRow:y,editingRow:b}=s(),_=(y==null?void 0:y.id)===m.id,w=(b==null?void 0:b.id)===m.id,E=g.editVariant==="select",[x,S]=I.useState(()=>n.getValue()),C={cell:n,column:p,row:m,table:r},A=Object.assign(Object.assign(Object.assign({},_t(u,C)),_t(g.mantineEditTextInputProps,C)),i),R=Object.assign(Object.assign(Object.assign({},_t(l,C)),_t(g.mantineEditSelectProps,C)),i),P=D=>{m._valuesCache[p.id]=D,_?d(m):w&&h(m)},L=D=>{var M;(M=A.onBlur)===null||M===void 0||M.call(A,D),P(x),f(null)},k=D=>{var M,B;(M=A.onKeyDown)===null||M===void 0||M.call(A,D),D.key==="Enter"&&((B=c.current[n.id])===null||B===void 0||B.blur())};if(g.Edit)return(t=g.Edit)===null||t===void 0?void 0:t.call(g,{cell:n,column:p,row:m,table:r});const $={disabled:_t(g.enableEditing,m)===!1,label:["custom","modal"].includes(_?o:a)?p.columnDef.header:void 0,name:n.id,onClick:D=>{var M;D.stopPropagation(),(M=A==null?void 0:A.onClick)===null||M===void 0||M.call(A,D)},placeholder:["custom","modal"].includes(_?o:a)?void 0:g.header,value:x,variant:a==="table"?"unstyled":"default"};return E?v.jsx(vf,Object.assign({},$,{searchable:!0,value:x},R,{onBlur:L,onChange:D=>{var M;(M=R.onChange)===null||M===void 0||M.call(R,D),S(D)},onClick:D=>{var M;D.stopPropagation(),(M=R==null?void 0:R.onClick)===null||M===void 0||M.call(R,D)},ref:D=>{D&&(c.current[n.id]=D,R.ref&&(R.ref.current=D))}})):v.jsx(of,Object.assign({},$,{onKeyDown:k,value:x??""},A,{onBlur:L,onChange:D=>{var M;(M=A.onChange)===null||M===void 0||M.call(A,D),S(D.target.value)},onClick:D=>{var M;D.stopPropagation(),(M=A==null?void 0:A.onClick)===null||M===void 0||M.call(A,D)},ref:D=>{D&&(c.current[n.id]=D,A.ref&&(A.ref.current=D))}}))},O$e=e=>{var t,n,r,i,s,o,a,{cell:l,numRows:u=1,renderedColumnIndex:c=0,renderedRowIndex:d=0,rowRef:f,table:h,virtualCell:p}=e,m=an(e,["cell","numRows","renderedColumnIndex","renderedRowIndex","rowRef","table","virtualCell"]);const g=bl(),{getState:y,options:{columnResizeDirection:b,columnResizeMode:_,createDisplayMode:w,editDisplayMode:E,enableClickToCopy:x,enableColumnOrdering:S,enableColumnPinning:C,enableEditing:A,enableGrouping:R,layoutMode:P,mantineSkeletonProps:L,mantineTableBodyCellProps:k},refs:{editInputRefs:$},setEditingCell:D,setHoveredColumn:M}=h,{columnSizingInfo:B,creatingRow:z,density:U,draggingColumn:O,editingCell:V,editingRow:W,hoveredColumn:j,isLoading:H,showSkeletons:G}=y(),{column:J,row:se}=l,{columnDef:ie}=J,{columnDefType:ne}=ie,ue={cell:l,column:J,renderedColumnIndex:c,renderedRowIndex:d,row:se,table:h},xe=Object.assign(Object.assign(Object.assign({},_t(k,ue)),_t(ie.mantineTableBodyCellProps,ue)),m),de=_t(L,ue),[Ke,je]=I.useState(100);I.useEffect(()=>{if(!H&&!G||Ke!==100)return;const ye=J.getSize();je(ne==="display"?ye/2:Math.round(Math.random()*(ye-ye/3)+ye/3))},[H,G]);const Oe={minWidth:`max(calc(var(--col-${hf(J==null?void 0:J.id)}-size) * 1px), ${(t=ie.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--col-${hf(J.id)}-size) * 1px)`};P==="grid"?Oe.flex=`${[0,!1].includes(ie.grow)?0:`var(--col-${hf(J.id)}-size)`} 0 auto`:P==="grid-no-grow"&&(Oe.flex=`${+(ie.grow||0)} 0 auto`);const Fe=(O==null?void 0:O.id)===J.id,Ae=(j==null?void 0:j.id)===J.id,fe=C&&ie.columnDefType!=="group"&&J.getIsPinned(),Pe=!l.getIsPlaceholder()&&_t(A,se)&&_t(ie.enableEditing,se)!==!1,He=Pe&&!["custom","modal"].includes(E)&&(E==="table"||(W==null?void 0:W.id)===se.id||(V==null?void 0:V.id)===l.id)&&!se.getIsGrouped(),ft=Pe&&w==="row"&&(z==null?void 0:z.id)===se.id,Ee=_t(x,l)||_t(ie.enableClickToCopy,l)&&_t(ie.enableClickToCopy,l)!==!1,he=ye=>{var Re;(Re=xe==null?void 0:xe.onDoubleClick)===null||Re===void 0||Re.call(xe,ye),Pe&&E==="cell"&&(D(l),setTimeout(()=>{var Ge;const Qe=$.current[l.id];Qe&&(Qe.focus(),(Ge=Qe.select)===null||Ge===void 0||Ge.call(Qe))},100))},Ue=ye=>{var Re;(Re=xe==null?void 0:xe.onDragEnter)===null||Re===void 0||Re.call(xe,ye),R&&(j==null?void 0:j.id)==="drop-zone"&&M(null),S&&O&&M(ie.enableColumnOrdering!==!1?J:null)},nt={cell:l,renderedColumnIndex:c,renderedRowIndex:d,table:h};return v.jsx(zF,Object.assign({"data-column-pinned":fe||void 0,"data-dragging-column":Fe||void 0,"data-first-right-pinned":fe==="right"&&J.getIsFirstColumn(fe)||void 0,"data-hovered-column-target":Ae||void 0,"data-index":c,"data-last-left-pinned":fe==="left"&&J.getIsLastColumn(fe)||void 0,"data-last-row":d===u-1||void 0,"data-resizing":_==="onChange"&&(B==null?void 0:B.isResizingColumn)===J.id&&b||void 0},xe,{__vars:Object.assign({"--mrt-cell-align":(n=xe.align)!==null&&n!==void 0?n:g.dir==="rtl"?"right":"left","--mrt-table-cell-left":fe==="left"?`${J.getStart(fe)}`:void 0,"--mrt-table-cell-right":fe==="right"?`${J.getAfter(fe)}`:void 0},xe.__vars),className:vt(kv.root,(P==null?void 0:P.startsWith("grid"))&&kv["root-grid"],p&&kv["root-virtualized"],Pe&&E==="cell"&&kv["root-cursor-pointer"],Pe&&["cell","table"].includes(E??"")&&ne!=="display"&&kv["root-editable-hover"],ne==="data"&&kv["root-data-col"],U==="xs"&&kv["root-nowrap"],xe==null?void 0:xe.className),onDoubleClick:he,onDragEnter:Ue,style:ye=>Object.assign(Object.assign({},Oe),_t(xe.style,ye)),children:(r=xe.children)!==null&&r!==void 0?r:v.jsxs(v.Fragment,{children:[l.getIsPlaceholder()?(s=(i=ie.PlaceholderCell)===null||i===void 0?void 0:i.call(ie,{cell:l,column:J,row:se,table:h}))!==null&&s!==void 0?s:null:G!==!1&&(H||G)?v.jsx(kK,Object.assign({height:20,width:Ke},de)):ne==="display"&&(["mrt-row-expand","mrt-row-numbers","mrt-row-select"].includes(J.id)||!se.getIsGrouped())?(o=ie.Cell)===null||o===void 0?void 0:o.call(ie,Object.assign({column:J,renderedCellValue:l.renderValue(),row:se,rowRef:f},nt)):ft||He?v.jsx(N$e,{cell:l,table:h}):Ee&&ie.enableClickToCopy!==!1?v.jsx(mBt,{cell:l,table:h,children:v.jsx(mge,Object.assign({},nt))}):v.jsx(mge,Object.assign({},nt)),l.getIsGrouped()&&!ie.GroupedCell&&v.jsxs(v.Fragment,{children:[" (",(a=se.subRows)===null||a===void 0?void 0:a.length,")"]})]})}))},gBt=I.memo(O$e,(e,t)=>t.cell===e.cell);var Rv={root:"MRT_TableDetailPanel-module_root__vQAlM","root-grid":"MRT_TableDetailPanel-module_root-grid__7UMC6","root-virtual-row":"MRT_TableDetailPanel-module_root-virtual-row__r-X4Z",inner:"MRT_TableDetailPanel-module_inner__o-Fk-","inner-grid":"MRT_TableDetailPanel-module_inner-grid__WLZgF","inner-expanded":"MRT_TableDetailPanel-module_inner-expanded__6tg9T","inner-virtual":"MRT_TableDetailPanel-module_inner-virtual__TItRy"};const yBt=e=>{var t,n,{parentRowRef:r,renderedRowIndex:i=0,row:s,rowVirtualizer:o,striped:a,table:l,virtualRow:u}=e,c=an(e,["parentRowRef","renderedRowIndex","row","rowVirtualizer","striped","table","virtualRow"]);const{getState:d,getVisibleLeafColumns:f,options:{layoutMode:h,mantineDetailPanelProps:p,mantineTableBodyRowProps:m,renderDetailPanel:g}}=l,{isLoading:y}=d(),b=_t(m,{isDetailPanel:!0,row:s,table:l}),_=Object.assign(Object.assign({},_t(p,{row:s,table:l})),c),w=!y&&s.getIsExpanded()&&(g==null?void 0:g({row:s,table:l}));return v.jsx(gm,Object.assign({"data-index":g?i*2+1:i,"data-striped":a,ref:E=>{var x;E&&((x=o==null?void 0:o.measureElement)===null||x===void 0||x.call(o,E))}},b,{__vars:Object.assign({"--mrt-parent-row-height":u?`${(n=(t=r.current)===null||t===void 0?void 0:t.getBoundingClientRect())===null||n===void 0?void 0:n.height}px`:void 0,"--mrt-virtual-row-start":u?`${u.start}px`:void 0},b==null?void 0:b.__vars),className:vt("mantine-Table-tr-detail-panel",Rv.root,(h==null?void 0:h.startsWith("grid"))&&Rv["root-grid"],u&&Rv["root-virtual-row"],b==null?void 0:b.className),children:v.jsx(zF,Object.assign({colSpan:f().length,component:"td"},_,{__vars:{"--mrt-inner-width":`${l.getTotalSize()}px`},className:vt("mantine-Table-td-detail-panel",Rv.inner,(h==null?void 0:h.startsWith("grid"))&&Rv["inner-grid"],s.getIsExpanded()&&Rv["inner-expanded"],u&&Rv["inner-virtual"]),p:s.getIsExpanded()&&w?"md":0,children:o?s.getIsExpanded()&&w:v.jsx(Vy,{in:s.getIsExpanded(),children:w})}))}))},CD=e=>{var t,n,r,{columnVirtualizer:i,numRows:s,pinnedRowIds:o,renderedRowIndex:a=0,row:l,rowVirtualizer:u,table:c,tableProps:d,virtualRow:f}=e,h=an(e,["columnVirtualizer","numRows","pinnedRowIds","renderedRowIndex","row","rowVirtualizer","table","tableProps","virtualRow"]);const{getState:p,options:{enableRowOrdering:m,enableRowPinning:g,enableStickyFooter:y,enableStickyHeader:b,layoutMode:_,mantineTableBodyRowProps:w,memoMode:E,renderDetailPanel:x,rowPinningDisplayMode:S},refs:{tableFooterRef:C,tableHeadRef:A},setHoveredRow:R}=c,{density:P,draggingColumn:L,draggingRow:k,editingCell:$,editingRow:D,hoveredRow:M,isFullScreen:B,rowPinning:z}=p(),U=l.getVisibleCells(),{virtualColumns:O,virtualPaddingLeft:V,virtualPaddingRight:W}=i??{},j=$$({row:l,table:c}),H=g&&l.getIsPinned(),G=H&&(S==null?void 0:S.includes("sticky"))&&"sticky",J=(k==null?void 0:k.id)===l.id,se=(M==null?void 0:M.id)===l.id,ie=Object.assign(Object.assign({},_t(w,{renderedRowIndex:a,row:l,table:c})),h),[ne,ue]=I.useMemo(()=>!g||!G||!o||!l.getIsPinned()?[]:[[...o].reverse().indexOf(l.id),o.indexOf(l.id)],[o,z]),xe=(b||B)&&((t=A.current)===null||t===void 0?void 0:t.clientHeight)||0,de=y&&((n=C.current)===null||n===void 0?void 0:n.clientHeight)||0,Ke=parseInt((r=ie==null?void 0:ie.style)===null||r===void 0?void 0:r.height,10)||(P==="xs"?37:P==="md"?53:69),je=Ae=>{m&&k&&R(l)},Oe=I.useRef(null);let Fe=d.striped;return Fe&&(Fe===!0&&(Fe="odd"),Fe==="odd"&&a%2!==0&&(Fe=!1),Fe==="even"&&a%2===0&&(Fe=!1)),v.jsxs(v.Fragment,{children:[v.jsxs(gm,Object.assign({"data-dragging-row":J||void 0,"data-hovered-row-target":se||void 0,"data-index":x?a*2:a,"data-row-pinned":G||H||void 0,"data-selected":j||void 0,"data-striped":Fe,onDragEnter:je,ref:Ae=>{Ae&&(Oe.current=Ae,u==null||u.measureElement(Ae))}},ie,{__vars:Object.assign(Object.assign({},ie==null?void 0:ie.__vars),{"--mrt-pinned-row-bottom":!f&&ne!==void 0&&H?`${ne*Ke+(y?de-1:0)}`:void 0,"--mrt-pinned-row-top":f?void 0:ue!==void 0&&H?`${ue*Ke+(b||B?xe-1:0)}`:void 0,"--mrt-virtual-row-start":f?`${f.start}`:void 0}),className:vt(U9.root,(_==null?void 0:_.startsWith("grid"))&&U9["root-grid"],f&&U9["root-virtualized"],ie==null?void 0:ie.className),children:[V?v.jsx(ge,{component:"td",display:"flex",w:V}):null,(O??l.getVisibleCells()).map((Ae,fe)=>{let Pe=Ae;i&&(fe=Ae.index,Pe=U[fe]);const He={cell:Pe,numRows:s,renderedColumnIndex:fe,renderedRowIndex:a,rowRef:Oe,table:c,virtualCell:i?Ae:void 0};return E==="cells"&&Pe.column.columnDef.columnDefType==="data"&&!L&&!k&&($==null?void 0:$.id)!==Pe.id&&(D==null?void 0:D.id)!==l.id?v.jsx(gBt,Object.assign({},He),Pe.id):v.jsx(O$e,Object.assign({},He),Pe.id)}),W?v.jsx(ge,{component:"td",display:"flex",w:W}):null]})),x&&!l.getIsGrouped()&&v.jsx(yBt,{parentRowRef:Oe,renderedRowIndex:a,row:l,rowVirtualizer:u,striped:Fe,table:c,virtualRow:f})]})},H9=I.memo(CD,(e,t)=>e.row===t.row),D$e=e=>{var t,n,r,i,s,{columnVirtualizer:o,table:a,tableProps:l}=e,u=an(e,["columnVirtualizer","table","tableProps"]);const{getBottomRows:c,getIsSomeRowsPinned:d,getRowModel:f,getState:h,getTopRows:p,options:{enableStickyFooter:m,enableStickyHeader:g,layoutMode:y,localization:b,mantineTableBodyProps:_,memoMode:w,renderDetailPanel:E,renderEmptyRowsFallback:x,rowPinningDisplayMode:S},refs:{tableFooterRef:C,tableHeadRef:A,tablePaperRef:R}}=a,{columnFilters:P,globalFilter:L,isFullScreen:k,rowPinning:$}=h(),D=Object.assign(Object.assign({},_t(_,{table:a})),u),M=(g||k)&&((t=A.current)===null||t===void 0?void 0:t.clientHeight)||0,B=m&&((n=C.current)===null||n===void 0?void 0:n.clientHeight)||0,z=I.useMemo(()=>{var j,H;return!(!((j=$.bottom)===null||j===void 0)&&j.length)&&!(!((H=$.top)===null||H===void 0)&&H.length)?[]:f().rows.filter(G=>G.getIsPinned()).map(G=>G.id)},[$,f().rows]),U=dBt(a),O=cBt(a,U),{virtualRows:V}=O??{},W={columnVirtualizer:o,numRows:U.length,table:a,tableProps:l};return v.jsxs(v.Fragment,{children:[!(S!=null&&S.includes("sticky"))&&d("top")&&v.jsx(P2,Object.assign({},D,{__vars:Object.assign({"--mrt-table-head-height":`${M}`},D==null?void 0:D.__vars),className:vt(Sd.pinned,(y==null?void 0:y.startsWith("grid"))&&Sd["root-grid"],D==null?void 0:D.className),children:p().map((j,H)=>{const G=Object.assign(Object.assign({},W),{renderedRowIndex:H,row:j});return w==="rows"?v.jsx(H9,Object.assign({},G),j.id):v.jsx(CD,Object.assign({},G),j.id)})})),v.jsx(P2,Object.assign({},D,{__vars:Object.assign({"--mrt-table-body-height":O?`${O.getTotalSize()}px`:void 0},D==null?void 0:D.__vars),className:vt(Sd.root,(y==null?void 0:y.startsWith("grid"))&&Sd["root-grid"],!U.length&&Sd["root-no-rows"],O&&Sd["root-virtualized"],D==null?void 0:D.className),children:(r=D==null?void 0:D.children)!==null&&r!==void 0?r:U.length?v.jsx(v.Fragment,{children:(V??U).map((j,H)=>{if(O)if(E){if(j.index%2===1)return null;H=j.index/2}else H=j.index;const G=O?U[H]:j,J=Object.assign(Object.assign({},W),{pinnedRowIds:z,renderedRowIndex:H,row:G,rowVirtualizer:O,virtualRow:O?j:void 0}),se=`${G.id}-${G.index}`;return w==="rows"?v.jsx(H9,Object.assign({},J),se):v.jsx(CD,Object.assign({},J),se)})}):v.jsx("tr",{className:vt("mrt-table-body-row",(y==null?void 0:y.startsWith("grid"))&&Sd["empty-row-tr-grid"]),children:v.jsx("td",{className:vt("mrt-table-body-cell",(y==null?void 0:y.startsWith("grid"))&&Sd["empty-row-td-grid"]),colSpan:a.getVisibleLeafColumns().length,children:(i=x==null?void 0:x({table:a}))!==null&&i!==void 0?i:v.jsx(Xe,{__vars:{"--mrt-paper-width":`${(s=R.current)===null||s===void 0?void 0:s.clientWidth}`},className:vt(Sd["empty-row-td-content"]),children:L||P.length?b.noResultsFound:b.noRecordsToDisplay})})})})),!(S!=null&&S.includes("sticky"))&&d("bottom")&&v.jsx(P2,Object.assign({},D,{__vars:Object.assign({"--mrt-table-footer-height":`${B}`},D==null?void 0:D.__vars),className:vt(Sd.pinned,(y==null?void 0:y.startsWith("grid"))&&Sd["root-grid"],D==null?void 0:D.className),children:c().map((j,H)=>{const G=Object.assign(Object.assign({},W),{renderedRowIndex:H,row:j});return w==="rows"?v.jsx(H9,Object.assign({},G),j.id):v.jsx(CD,Object.assign({},G),j.id)})}))]})},vBt=I.memo(D$e,(e,t)=>e.table.options.data===t.table.options.data);var q9={root:"MRT_TableFooter-module_root__-JXpw",grid:"MRT_TableFooter-module_grid__J3Ga-",sticky:"MRT_TableFooter-module_sticky__GcoK6"},gge={root:"MRT_TableFooterRow-module_root__EuoPr","layout-mode-grid":"MRT_TableFooterRow-module_layout-mode-grid__dUEMF"},W9={root:"MRT_TableFooterCell-module_root__d8Scs",grid:"MRT_TableFooterCell-module_grid__H9jLk",group:"MRT_TableFooterCell-module_group__l3-p-"};const bBt=e=>{var t,n,r,i,s,{footer:o,renderedColumnIndex:a,table:l}=e,u=an(e,["footer","renderedColumnIndex","table"]);const c=bl(),{options:{enableColumnPinning:d,layoutMode:f,mantineTableFooterCellProps:h}}=l,{column:p}=o,{columnDef:m}=p,{columnDefType:g}=m,y=d&&m.columnDefType!=="group"&&p.getIsPinned(),b={column:p,table:l},_=Object.assign(Object.assign(Object.assign({},_t(h,b)),_t(m.mantineTableFooterCellProps,b)),u),w={minWidth:`max(calc(var(--header-${hf(o==null?void 0:o.id)}-size) * 1px), ${(t=m.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${hf(o.id)}-size) * 1px)`};return f==="grid"?w.flex=`${[0,!1].includes(m.grow)?0:`var(--header-${hf(o.id)}-size)`} 0 auto`:f==="grid-no-grow"&&(w.flex=`${+(m.grow||0)} 0 auto`),v.jsx(HE,Object.assign({colSpan:o.colSpan,"data-column-pinned":y||void 0,"data-first-right-pinned":y==="right"&&p.getIsFirstColumn(y)||void 0,"data-index":a,"data-last-left-pinned":y==="left"&&p.getIsLastColumn(y)||void 0},_,{__vars:Object.assign({"--mrt-cell-align":(n=_.align)!==null&&n!==void 0?n:g==="group"?"center":c.dir==="rtl"?"right":"left","--mrt-table-cell-left":y==="left"?`${p.getStart(y)}`:void 0,"--mrt-table-cell-right":y==="right"?`${p.getAfter(y)}`:void 0},_==null?void 0:_.__vars),className:vt(W9.root,(f==null?void 0:f.startsWith("grid"))&&W9.grid,g==="group"&&W9.group,_==null?void 0:_.className),style:E=>Object.assign(Object.assign({},w),_t(_.style,E)),children:(r=_.children)!==null&&r!==void 0?r:o.isPlaceholder?null:(s=(i=_t(m.Footer,{column:p,footer:o,table:l}))!==null&&i!==void 0?i:m.footer)!==null&&s!==void 0?s:null}))},_Bt=e=>{var t,{columnVirtualizer:n,footerGroup:r,table:i}=e,s=an(e,["columnVirtualizer","footerGroup","table"]);const{options:{layoutMode:o,mantineTableFooterRowProps:a}}=i,{virtualColumns:l,virtualPaddingLeft:u,virtualPaddingRight:c}=n??{};if(!(!((t=r.headers)===null||t===void 0)&&t.some(f=>typeof f.column.columnDef.footer=="string"&&!!f.column.columnDef.footer||f.column.columnDef.Footer)))return null;const d=Object.assign(Object.assign({},_t(a,{footerGroup:r,table:i})),s);return v.jsxs(gm,Object.assign({className:vt(gge.root,(o==null?void 0:o.startsWith("grid"))&&gge["layout-mode-grid"])},d,{children:[u?v.jsx(ge,{component:"th",display:"flex",w:u}):null,(l??r.headers).map((f,h)=>{let p=f;return n&&(h=f.index,p=r.headers[h]),v.jsx(bBt,{footer:p,renderedColumnIndex:h,table:i},p.id)}),c?v.jsx(ge,{component:"th",display:"flex",w:c}):null]}))},wBt=e=>{var{columnVirtualizer:t,table:n}=e,r=an(e,["columnVirtualizer","table"]);const{getFooterGroups:i,getState:s,options:{enableStickyFooter:o,layoutMode:a,mantineTableFooterProps:l},refs:{tableFooterRef:u}}=n,{isFullScreen:c}=s(),d=Object.assign(Object.assign({},_t(l,{table:n})),r),f=(c||o)&&o!==!1;return v.jsx($K,Object.assign({},d,{className:vt(q9.root,d==null?void 0:d.className,f&&q9.sticky,(a==null?void 0:a.startsWith("grid"))&&q9.grid),ref:h=>{u.current=h,d!=null&&d.ref&&(d.ref.current=h)},children:i().map(h=>v.jsx(_Bt,{columnVirtualizer:t,footerGroup:h,table:n},h.id))}))};var Og={root:"MRT_TableHead-module_root__j9NkO","root-grid":"MRT_TableHead-module_root-grid__c3aGl","root-table-row-group":"MRT_TableHead-module_root-table-row-group__d9FO4","root-sticky":"MRT_TableHead-module_root-sticky__0kuDE","banner-tr":"MRT_TableHead-module_banner-tr__EhT-x","banner-th":"MRT_TableHead-module_banner-th__KwM5a",grid:"MRT_TableHead-module_grid__OJ-td"},G9={root:"MRT_TableHeadRow-module_root__hUKv4","layout-mode-grid":"MRT_TableHeadRow-module_layout-mode-grid__4ZGri",sticky:"MRT_TableHeadRow-module_sticky__Ej7Ax"},Po={root:"MRT_TableHeadCell-module_root__6y50a","root-grid":"MRT_TableHeadCell-module_root-grid__bAf1d","root-virtualized":"MRT_TableHeadCell-module_root-virtualized__CWLit","root-no-select":"MRT_TableHeadCell-module_root-no-select__BEOVU",content:"MRT_TableHeadCell-module_content__-pzSK","content-spaced":"MRT_TableHeadCell-module_content-spaced__S85Aa","content-center":"MRT_TableHeadCell-module_content-center__c-17L","content-right":"MRT_TableHeadCell-module_content-right__NSRZU","content-wrapper":"MRT_TableHeadCell-module_content-wrapper__py6aJ","content-wrapper-hidden-overflow":"MRT_TableHeadCell-module_content-wrapper-hidden-overflow__QY40r","content-wrapper-nowrap":"MRT_TableHeadCell-module_content-wrapper-nowrap__-4aIg",labels:"MRT_TableHeadCell-module_labels__oiMSr","labels-right":"MRT_TableHeadCell-module_labels-right__6ZJp-","labels-center":"MRT_TableHeadCell-module_labels-center__MM9q8","labels-sortable":"MRT_TableHeadCell-module_labels-sortable__tyuLr","labels-data":"MRT_TableHeadCell-module_labels-data__PvFGO","content-actions":"MRT_TableHeadCell-module_content-actions__utxbm"},EBt={"filter-mode-label":"MRT_TableHeadCellFilterContainer-module_filter-mode-label__8reK-"},xBt={root:"MRT_FilterCheckBox-module_root__59h9r"};const SBt=e=>{var t,n,r,{column:i,table:s}=e,o=an(e,["column","table"]);const{getState:a,options:{localization:l,mantineFilterCheckboxProps:u}}=s,{density:c}=a(),{columnDef:d}=i,f={column:i,table:s},h=Object.assign(Object.assign(Object.assign({},_t(u,f)),_t(d.mantineFilterCheckboxProps,f)),o),p=(t=l.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",d.header),m=i.getFilterValue();return v.jsx(on,{label:(n=h==null?void 0:h.title)!==null&&n!==void 0?n:p,openDelay:1e3,withinPortal:!0,children:v.jsx(Qu,Object.assign({checked:m==="true",className:vt("mrt-filter-checkbox",xBt.root),indeterminate:m===void 0,label:(r=h.title)!==null&&r!==void 0?r:p,size:c==="xs"?"sm":"md"},h,{onChange:g=>{var y;i.setFilterValue(i.getFilterValue()===void 0?"true":i.getFilterValue()==="true"?"false":void 0),(y=h==null?void 0:h.onChange)===null||y===void 0||y.call(h,g)},onClick:g=>{var y;g.stopPropagation(),(y=h==null?void 0:h.onClick)===null||y===void 0||y.call(h,g)},title:void 0}))})};var TBt={root:"MRT_FilterRangeFields-module_root__KfCcg"},tC={root:"MRT_FilterTextInput-module_root__Ss8Ql","date-filter":"MRT_FilterTextInput-module_date-filter__jOBLB","range-filter":"MRT_FilterTextInput-module_range-filter__JQHAL","not-filter-chip":"MRT_FilterTextInput-module_not-filter-chip__u8b1y","filter-chip-badge":"MRT_FilterTextInput-module_filter-chip-badge__Sel2k"};const fq=e=>{var t,n,r,i,s,o,a,l,{header:u,rangeFilterIndex:c,table:d}=e,f=an(e,["header","rangeFilterIndex","table"]);const{options:{columnFilterDisplayMode:h,columnFilterModeOptions:p,icons:{IconX:m},localization:g,mantineFilterAutocompleteProps:y,mantineFilterDateInputProps:b,mantineFilterMultiSelectProps:_={clearable:!0},mantineFilterSelectProps:w,mantineFilterTextInputProps:E,manualFiltering:x},refs:{filterInputRefs:S},setColumnFilterFns:C}=d,{column:A}=u,{columnDef:R}=A,P={column:A,rangeFilterIndex:c,table:d},L=Object.assign(Object.assign(Object.assign({},_t(E,P)),_t(R.mantineFilterTextInputProps,P)),f),k=Object.assign(Object.assign({},_t(w,P)),_t(R.mantineFilterSelectProps,P)),$=Object.assign(Object.assign({},_t(_,P)),_t(R.mantineFilterMultiSelectProps,P)),D=Object.assign(Object.assign({},_t(b,P)),_t(R.mantineFilterDateInputProps,P)),M=Object.assign(Object.assign({},_t(y,P)),_t(R.mantineFilterAutocompleteProps,P)),B=R.filterVariant==="range"||R.filterVariant==="date-range"||c!==void 0,z=R.filterVariant==="select",U=R.filterVariant==="multi-select",O=R.filterVariant==="date"||R.filterVariant==="date-range",V=R.filterVariant==="autocomplete",W=(t=R==null?void 0:R.columnFilterModeOptions)!==null&&t!==void 0?t:p,j=R._filterFn,H=["empty","notEmpty"].includes(j)?pte(g,j):"",G=B?c===0?g.min:c===1?g.max:"":(n=L==null?void 0:L.placeholder)!==null&&n!==void 0?n:(r=g.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(R.header)),J=A.getFacetedUniqueValues(),se=I.useMemo(()=>{var fe,Pe,He;return((He=(Pe=(fe=M==null?void 0:M.data)!==null&&fe!==void 0?fe:k==null?void 0:k.data)!==null&&Pe!==void 0?Pe:$==null?void 0:$.data)!==null&&He!==void 0?He:(V||z||U)&&J?Array.from(J.keys()).filter(ft=>ft!==null).sort((ft,Ee)=>ft.localeCompare(Ee)):[]).filter(ft=>ft!=null)},[M==null?void 0:M.data,J,V,U,z,$==null?void 0:$.data,k==null?void 0:k.data]),ie=I.useRef(!1),[ne,ue]=I.useState(()=>{var fe,Pe;return U?A.getFilterValue()||[]:B?((fe=A.getFilterValue())===null||fe===void 0?void 0:fe[c])||"":(Pe=A.getFilterValue())!==null&&Pe!==void 0?Pe:""}),[xe]=U_e(ne,x?400:200);I.useEffect(()=>{ie.current&&(B?A.setFilterValue(fe=>{const Pe=Array.isArray(fe)?fe:["",""];return Pe[c]=xe,Pe}):A.setFilterValue(xe??void 0))},[xe]),I.useEffect(()=>{if(!ie.current){ie.current=!0;return}const fe=A.getFilterValue();fe===void 0?de():ue(B&&c!==void 0?(fe??["",""])[c]:fe??"")},[A.getFilterValue()]);const de=()=>{U?(ue([]),A.setFilterValue([])):B?(ue(""),A.setFilterValue(fe=>{const Pe=Array.isArray(fe)?fe:["",""];return Pe[c]=void 0,Pe})):(ue(""),A.setFilterValue(void 0))};if(R.Filter)return v.jsx(v.Fragment,{children:(i=R.Filter)===null||i===void 0?void 0:i.call(R,{column:A,header:u,rangeFilterIndex:c,table:d})});const Ke=()=>{ue(""),A.setFilterValue(void 0),C(fe=>{var Pe;return Object.assign(Object.assign({},fe),{[u.id]:(Pe=W==null?void 0:W[0])!==null&&Pe!==void 0?Pe:"fuzzy"})})},je={"aria-label":G,className:vt("mrt-filter-text-input",tC.root,O?tC["date-filter"]:B?tC["range-filter"]:!H&&tC["not-filter-chip"]),disabled:!!H,onChange:ue,onClick:fe=>fe.stopPropagation(),placeholder:G,style:Object.assign({},U?$==null?void 0:$.style:z?k==null?void 0:k.style:O?D==null?void 0:D.style:L==null?void 0:L.style),title:G,value:ne,variant:"unstyled"},{className:Oe}=je,Fe=an(je,["className"]),Ae=ne?v.jsx(Bn,{"aria-label":g.clearFilter,color:"var(--mantine-color-gray-7)",onClick:de,size:"sm",title:(s=g.clearFilter)!==null&&s!==void 0?s:"",variant:"transparent",children:v.jsx(m,{})}):null;return H?v.jsx(ge,{style:Fe.style,children:v.jsx(rf,{className:tC["filter-chip-badge"],onClick:Ke,rightSection:Ae,size:"lg",children:H})}):U?v.jsx(IF,Object.assign({},Fe,{searchable:!0},$,{className:vt(Oe,$.className),data:se,onChange:fe=>ue(fe),ref:fe=>{fe&&(S.current[`${A.id}-${c??0}`]=fe,$.ref&&($.ref.current=fe))},rightSection:!((o=ne==null?void 0:ne.toString())===null||o===void 0)&&o.length&&($!=null&&$.clearable)?Ae:void 0,style:Fe.style})):z?v.jsx(vf,Object.assign({},Fe,{clearable:!0,searchable:!0},k,{className:vt(Oe,k.className),clearButtonProps:{size:"md"},data:se,ref:fe=>{fe&&(S.current[`${A.id}-${c??0}`]=fe,k.ref&&(k.ref.current=fe))},style:Fe.style})):O?v.jsx(ate,Object.assign({},Fe,{allowDeselect:!0,clearable:!0,popoverProps:{withinPortal:h!=="popover"}},D,{className:vt(Oe,D.className),onChange:fe=>Fe.onChange(fe===null?"":fe),ref:fe=>{fe&&(S.current[`${A.id}-${c??0}`]=fe,D.ref&&(D.ref.current=fe))},style:Fe.style})):V?v.jsx(JY,Object.assign({},Fe,{onChange:fe=>ue(fe),rightSection:!((a=ne==null?void 0:ne.toString())===null||a===void 0)&&a.length?Ae:void 0},M,{className:vt(Oe,M.className),data:se,ref:fe=>{fe&&(S.current[`${A.id}-${c??0}`]=fe,M.ref&&(M.ref.current=fe))},style:Fe.style})):v.jsx(of,Object.assign({},Fe,{onChange:fe=>ue(fe.target.value),rightSection:!((l=ne==null?void 0:ne.toString())===null||l===void 0)&&l.length?Ae:void 0},L,{className:vt(Oe,L.className),mt:0,ref:fe=>{fe&&(S.current[`${A.id}-${c??0}`]=fe,L.ref&&(L.ref.current=fe))},style:Fe.style}))},CBt=e=>{var{header:t,table:n}=e,r=an(e,["header","table"]);return v.jsxs(ge,Object.assign({},r,{className:vt("mrt-filter-range-fields",TBt.root,r.className),children:[v.jsx(fq,{header:t,rangeFilterIndex:0,table:n}),v.jsx(fq,{header:t,rangeFilterIndex:1,table:n})]}))};var ABt={root:"MRT_FilterRangeSlider-module_root__uwYEk"};const IBt=e=>{var t,{header:n,table:r}=e,i=an(e,["header","table"]);const{options:{mantineFilterRangeSliderProps:s},refs:{filterInputRefs:o}}=r,{column:a}=n,{columnDef:l}=a,u={column:a,table:r},c=Object.assign(Object.assign(Object.assign({},_t(s,u)),_t(l.mantineFilterRangeSliderProps,u)),i);let[d,f]=c.min!==void 0&&c.max!==void 0?[c.min,c.max]:(t=a.getFacetedMinMaxValues())!==null&&t!==void 0?t:[0,1];Array.isArray(d)&&(d=d[0]),Array.isArray(f)&&(f=f[0]),d===null&&(d=0),f===null&&(f=1);const[h,p]=I.useState([d,f]),m=a.getFilterValue(),g=I.useRef(!1);return I.useEffect(()=>{g.current&&(m===void 0?p([d,f]):Array.isArray(m)&&p(m)),g.current=!0},[m,d,f]),v.jsx(BF,Object.assign({className:vt("mrt-filter-range-slider",ABt.root),max:f,min:d,onChange:y=>{p(y)},onChangeEnd:y=>{Array.isArray(y)&&(y[0]<=d&&y[1]>=f?a.setFilterValue(void 0):a.setFilterValue(y))},value:h},c,{ref:y=>{y&&(o.current[`${a.id}-0`]=y,c!=null&&c.ref&&(c.ref=y))}}))};var kBt={symbol:"MRT_FilterOptionMenu-module_symbol__a1Bsy"};const RBt=e=>[{divider:!1,label:e.filterFuzzy,option:"fuzzy",symbol:""},{divider:!1,label:e.filterContains,option:"contains",symbol:"*"},{divider:!1,label:e.filterStartsWith,option:"startsWith",symbol:"a"},{divider:!0,label:e.filterEndsWith,option:"endsWith",symbol:"z"},{divider:!1,label:e.filterEquals,option:"equals",symbol:"="},{divider:!0,label:e.filterNotEquals,option:"notEquals",symbol:""},{divider:!1,label:e.filterBetween,option:"between",symbol:""},{divider:!0,label:e.filterBetweenInclusive,option:"betweenInclusive",symbol:""},{divider:!1,label:e.filterGreaterThan,option:"greaterThan",symbol:">"},{divider:!1,label:e.filterGreaterThanOrEqualTo,option:"greaterThanOrEqualTo",symbol:""},{divider:!1,label:e.filterLessThan,option:"lessThan",symbol:"<"},{divider:!0,label:e.filterLessThanOrEqualTo,option:"lessThanOrEqualTo",symbol:""},{divider:!1,label:e.filterEmpty,option:"empty",symbol:""},{divider:!1,label:e.filterNotEmpty,option:"notEmpty",symbol:"!"}],ZN=["between","betweenInclusive","inNumberRange"],Y9=["empty","notEmpty"],PBt=["arrIncludesSome","arrIncludesAll","arrIncludes"],yge=["range-slider","date-range","range"],M$e=({header:e,onSelect:t,table:n})=>{var r,i,s,o;const{getState:a,options:{columnFilterModeOptions:l,globalFilterModeOptions:u,localization:c,renderColumnFilterModeMenuItems:d,renderGlobalFilterModeMenuItems:f},setColumnFilterFns:h,setGlobalFilterFn:p}=n,{globalFilterFn:m}=a(),{column:g}=e??{},{columnDef:y}=g??{},b=g==null?void 0:g.getFilterValue();let _=(r=y==null?void 0:y.columnFilterModeOptions)!==null&&r!==void 0?r:l;yge.includes(y==null?void 0:y.filterVariant)&&(_=[...ZN,..._??[]].filter(S=>ZN.includes(S)));const w=I.useMemo(()=>RBt(c).filter(S=>y?_===void 0||(_==null?void 0:_.includes(S.option)):(!u||u.includes(S.option))&&["contains","fuzzy","startsWith"].includes(S.option)),[]),E=S=>{var C;const A=(C=y==null?void 0:y._filterFn)!==null&&C!==void 0?C:"";!e||!g?p(S):S!==A&&(h(R=>Object.assign(Object.assign({},R),{[e.id]:S})),Y9.includes(S)?b!==" "&&!Y9.includes(A)?g.setFilterValue(" "):b&&g.setFilterValue(b):(y==null?void 0:y.filterVariant)==="multi-select"||PBt.includes(S)?b instanceof String||b!=null&&b.length?g.setFilterValue([]):b&&g.setFilterValue(b):yge.includes(y==null?void 0:y.filterVariant)||ZN.includes(S)?!Array.isArray(b)||!(b!=null&&b.every(R=>R===""))&&!ZN.includes(A)?g.setFilterValue(["",""]):g.setFilterValue(b):Array.isArray(b)?g.setFilterValue(""):b===" "&&Y9.includes(A)?g.setFilterValue(void 0):g.setFilterValue(b)),t==null||t()},x=e&&y?y._filterFn:m;return v.jsx(dn.Dropdown,{children:(o=e&&g&&y?(s=(i=y.renderColumnFilterModeMenuItems)===null||i===void 0?void 0:i.call(y,{column:g,internalFilterOptions:w,onSelectFilterMode:E,table:n}))!==null&&s!==void 0?s:d==null?void 0:d({column:g,internalFilterOptions:w,onSelectFilterMode:E,table:n}):f==null?void 0:f({internalFilterOptions:w,onSelectFilterMode:E,table:n}))!==null&&o!==void 0?o:w.map(({divider:S,label:C,option:A,symbol:R},P)=>v.jsxs(I.Fragment,{children:[v.jsx(dn.Item,{color:A===x?"blue":void 0,leftSection:v.jsx("span",{className:kBt.symbol,children:R}),onClick:()=>E(A),value:A,children:C}),S&&v.jsx(dn.Divider,{})]},P))})},$$e=e=>{var t,n,{header:r,table:i}=e,s=an(e,["header","table"]);const{getState:o,options:{columnFilterDisplayMode:a,columnFilterModeOptions:l,enableColumnFilterModes:u,icons:{IconFilterCog:c},localization:d},refs:{filterInputRefs:f}}=i,{showColumnFilters:h}=o(),{column:p}=r,{columnDef:m}=p,g=m._filterFn,y=(t=m==null?void 0:m.columnFilterModeOptions)!==null&&t!==void 0?t:l,b=u&&m.enableColumnFilterModes!==!1&&(y===void 0||!!(y!=null&&y.length));return v.jsx(Vy,{in:h||a==="popover",children:v.jsxs(Ct,Object.assign({direction:"column"},s,{children:[v.jsxs(Ct,{align:"flex-end",children:[m.filterVariant==="checkbox"?v.jsx(SBt,{column:p,table:i}):m.filterVariant==="range-slider"?v.jsx(IBt,{header:r,table:i}):["date-range","range"].includes((n=m.filterVariant)!==null&&n!==void 0?n:"")||["between","betweenInclusive","inNumberRange"].includes(m._filterFn)?v.jsx(CBt,{header:r,table:i}):v.jsx(fq,{header:r,table:i}),b&&v.jsxs(dn,{withinPortal:a!=="popover",children:[v.jsx(on,{label:d.changeFilterMode,position:"bottom-start",withinPortal:!0,children:v.jsx(dn.Target,{children:v.jsx(Bn,{"aria-label":d.changeFilterMode,color:"gray",size:"md",variant:"subtle",children:v.jsx(c,{})})})}),v.jsx(M$e,{header:r,onSelect:()=>setTimeout(()=>{var _;return(_=f.current[`${p.id}-0`])===null||_===void 0?void 0:_.focus()},100),table:i})]})]}),b?v.jsx(Xe,{c:"dimmed",className:EBt["filter-mode-label"],component:"label",children:d.filterMode.replace("{filterType}",pte(d,g))}):null]}))})};var NBt={root:"MRT_TableHeadCellFilterLabel-module_root__Rur2R"};const OBt=e=>{var t,n,r,{header:i,table:s}=e,o=an(e,["header","table"]);const{options:{columnFilterDisplayMode:a,icons:{IconFilter:l},localization:u},refs:{filterInputRefs:c},setShowColumnFilters:d}=s,{column:f}=i,{columnDef:h}=f,p=f.getFilterValue(),[m,g]=I.useState(!1),y=Array.isArray(p)&&p.some(Boolean)||!!p&&!Array.isArray(p),b=h.filterVariant==="range"||["between","betweenInclusive","inNumberRange"].includes(h._filterFn),_=h._filterFn,w=a==="popover"&&!y?(t=u.filterByColumn)===null||t===void 0?void 0:t.replace("{column}",String(h.header)):u.filteringByColumn.replace("{column}",String(h.header)).replace("{filterType}",pte(u,_)).replace("{filterValue}",`"${Array.isArray(f.getFilterValue())?f.getFilterValue().join(`" ${b?u.and:u.or} "`):f.getFilterValue()}"`).replace('" "',"");return v.jsx(v.Fragment,{children:v.jsxs(hn,{keepMounted:h.filterVariant==="range-slider",onClose:()=>g(!1),opened:m,position:"top",shadow:"xl",width:360,withinPortal:!0,children:[v.jsx(Nf,{mounted:a==="popover"||!!f.getFilterValue()&&!b||b&&(!!(!((n=f.getFilterValue())===null||n===void 0)&&n[0])||!!(!((r=f.getFilterValue())===null||r===void 0)&&r[1])),transition:"scale",children:()=>v.jsx(hn.Target,{children:v.jsx(on,{disabled:m,label:w,multiline:!0,w:w.length>40?300:void 0,withinPortal:!0,children:v.jsx(Bn,Object.assign({className:vt("mrt-table-head-cell-filter-label-icon",NBt.root),size:18},L$("active",y),{onClick:E=>{E.stopPropagation(),a==="popover"?g(x=>!x):d(!0),setTimeout(()=>{const x=c.current[`${f.id}-0`];x==null||x.focus(),x==null||x.select()},100)}},o,{children:v.jsx(l,{size:"100%"})}))})})}),a==="popover"&&v.jsx(hn.Dropdown,{onClick:E=>E.stopPropagation(),onKeyDown:E=>E.key==="Enter"&&g(!1),onMouseDown:E=>E.stopPropagation(),children:v.jsx($$e,{header:i,table:s})})]})})},DBt=e=>{var{column:t,table:n,tableHeadCellRef:r}=e,i=an(e,["column","table","tableHeadCellRef"]);const{getState:s,options:{enableColumnOrdering:o,mantineColumnDragHandleProps:a},setColumnOrder:l,setDraggingColumn:u,setHoveredColumn:c}=n,{columnDef:d}=t,{columnOrder:f,draggingColumn:h,hoveredColumn:p}=s(),m={column:t,table:n},g=Object.assign(Object.assign(Object.assign({},_t(a,m)),_t(d.mantineColumnDragHandleProps,m)),i),y=_=>{var w;(w=g==null?void 0:g.onDragStart)===null||w===void 0||w.call(g,_),u(t),_.dataTransfer.setDragImage(r.current,0,0)},b=_=>{var w;(w=g==null?void 0:g.onDragEnd)===null||w===void 0||w.call(g,_),(p==null?void 0:p.id)==="drop-zone"?t.toggleGrouping():o&&p&&(p==null?void 0:p.id)!==(h==null?void 0:h.id)&&l(c$e(t,p,f)),u(null),c(null)};return v.jsx(mte,{actionIconProps:g,onDragEnd:b,onDragStart:y,table:n})};var K9={root:"MRT_TableHeadCellResizeHandle-module_root__paufe","root-ltr":"MRT_TableHeadCellResizeHandle-module_root-ltr__652AZ","root-rtl":"MRT_TableHeadCellResizeHandle-module_root-rtl__5VlSo","root-hide":"MRT_TableHeadCellResizeHandle-module_root-hide__-ILlD"};const MBt=e=>{var t,{header:n,table:r}=e,i=an(e,["header","table"]);const{getState:s,options:{columnResizeDirection:o,columnResizeMode:a},setColumnSizingInfo:l}=r,{density:u}=s(),{column:c}=n,d=n.getResizeHandler(),f=c.getIsResizing()&&a==="onEnd"?`translateX(${(o==="rtl"?-1:1)*((t=s().columnSizingInfo.deltaOffset)!==null&&t!==void 0?t:0)}px)`:void 0;return v.jsx(ge,Object.assign({onDoubleClick:()=>{l(h=>Object.assign(Object.assign({},h),{isResizingColumn:!1})),c.resetSize()},onMouseDown:d,onTouchStart:d,role:"separator"},i,{__vars:Object.assign({"--mrt-transform":f},i.__vars),className:vt("mrt-table-head-cell-resize-handle",K9.root,K9[`root-${o}`],!n.subHeaders.length&&a==="onChange"&&K9["root-hide"],u,i.className)}))};var vge={"sort-icon":"MRT_TableHeadCellSortLabel-module_sort-icon__zs1xA","multi-sort-indicator":"MRT_TableHeadCellSortLabel-module_multi-sort-indicator__MGBj2"};const $Bt=e=>{var{header:t,table:n}=e,r=an(e,["header","table"]);const{getState:i,options:{icons:{IconArrowsSort:s,IconSortAscending:o,IconSortDescending:a},localization:l}}=n,u=t.column,{columnDef:c}=u,{sorting:d}=i(),f=u.getIsSorted(),h=u.getSortIndex(),p=f?f==="desc"?l.sortedByColumnDesc.replace("{column}",c.header):l.sortedByColumnAsc.replace("{column}",c.header):u.getNextSortingOrder()==="desc"?l.sortByColumnDesc.replace("{column}",c.header):l.sortByColumnAsc.replace("{column}",c.header),m=v.jsx(Bn,Object.assign({"aria-label":p},L$("sorted",f),r,{className:vt("mrt-table-head-sort-button",vge["sort-icon"],r.className),children:f==="desc"?v.jsx(a,{size:"100%"}):f==="asc"?v.jsx(o,{size:"100%"}):v.jsx(s,{size:"100%"})}));return v.jsx(on,{label:p,openDelay:1e3,withinPortal:!0,children:d.length<2||h===-1?m:v.jsx(fK,{className:vt("mrt-table-head-multi-sort-indicator",vge["multi-sort-indicator"]),inline:!0,label:h+1,offset:4,children:m})})};var bge={left:"MRT_ColumnActionMenu-module_left__cfNmY",right:"MRT_ColumnActionMenu-module_right__-nK56"};const LBt=e=>{var t,n,r,i,s,o,a,l,u,c,{header:d,table:f}=e,h=an(e,["header","table"]);const{getState:p,options:{columnFilterDisplayMode:m,enableColumnFilters:g,enableColumnPinning:y,enableColumnResizing:b,enableGrouping:_,enableHiding:w,enableSorting:E,enableSortingRemoval:x,icons:{IconArrowAutofitContent:S,IconBoxMultiple:C,IconClearAll:A,IconColumns:R,IconDotsVertical:P,IconEyeOff:L,IconFilter:k,IconFilterOff:$,IconPinned:D,IconPinnedOff:M,IconSortAscending:B,IconSortDescending:z},localization:U,mantineColumnActionsButtonProps:O,renderColumnActionsMenuItems:V},refs:{filterInputRefs:W},setColumnOrder:j,setColumnSizingInfo:H,setShowColumnFilters:G,toggleAllColumnsVisible:J}=f,{column:se}=d,{columnDef:ie}=se,{columnSizing:ne,columnVisibility:ue}=p(),xe={column:se,table:f},de=Object.assign(Object.assign({},_t(O,xe)),_t(ie.mantineColumnActionsButtonProps,xe)),Ke=()=>{se.clearSorting()},je=()=>{se.toggleSorting(!1)},Oe=()=>{se.toggleSorting(!0)},Fe=()=>{H(Ue=>Object.assign(Object.assign({},Ue),{isResizingColumn:!1})),se.resetSize()},Ae=()=>{se.toggleVisibility(!1)},fe=Ue=>{se.pin(Ue)},Pe=()=>{se.toggleGrouping(),j(Ue=>["mrt-row-expand",...Ue])},He=()=>{se.setFilterValue("")},ft=()=>{G(!0),setTimeout(()=>{var Ue;return(Ue=W.current[`${se.id}-0`])===null||Ue===void 0?void 0:Ue.focus()},100)},Ee=()=>{J(!0)},he=v.jsxs(v.Fragment,{children:[E&&se.getCanSort()&&v.jsxs(v.Fragment,{children:[x!==!1&&v.jsx(dn.Item,{disabled:!se.getIsSorted(),leftSection:v.jsx(A,{}),onClick:Ke,children:U.clearSort}),v.jsx(dn.Item,{disabled:se.getIsSorted()==="asc",leftSection:v.jsx(B,{}),onClick:je,children:(t=U.sortByColumnAsc)===null||t===void 0?void 0:t.replace("{column}",String(ie.header))}),v.jsx(dn.Item,{disabled:se.getIsSorted()==="desc",leftSection:v.jsx(z,{}),onClick:Oe,children:(n=U.sortByColumnDesc)===null||n===void 0?void 0:n.replace("{column}",String(ie.header))}),(g||_||w)&&v.jsx(dn.Divider,{},3)]}),g&&m!=="popover"&&se.getCanFilter()&&v.jsxs(v.Fragment,{children:[v.jsx(dn.Item,{disabled:!se.getFilterValue(),leftSection:v.jsx($,{}),onClick:He,children:U.clearFilter}),v.jsx(dn.Item,{leftSection:v.jsx(k,{}),onClick:ft,children:(r=U.filterByColumn)===null||r===void 0?void 0:r.replace("{column}",String(ie.header))}),(_||w)&&v.jsx(dn.Divider,{},2)]}),_&&se.getCanGroup()&&v.jsxs(v.Fragment,{children:[v.jsx(dn.Item,{leftSection:v.jsx(C,{}),onClick:Pe,children:(i=U[se.getIsGrouped()?"ungroupByColumn":"groupByColumn"])===null||i===void 0?void 0:i.replace("{column}",String(ie.header))}),y&&v.jsx(dn.Divider,{})]}),y&&se.getCanPin()&&v.jsxs(v.Fragment,{children:[v.jsx(dn.Item,{disabled:se.getIsPinned()==="left"||!se.getCanPin(),leftSection:v.jsx(D,{className:bge.left}),onClick:()=>fe("left"),children:U.pinToLeft}),v.jsx(dn.Item,{disabled:se.getIsPinned()==="right"||!se.getCanPin(),leftSection:v.jsx(D,{className:bge.right}),onClick:()=>fe("right"),children:U.pinToRight}),v.jsx(dn.Item,{disabled:!se.getIsPinned(),leftSection:v.jsx(M,{}),onClick:()=>fe(!1),children:U.unpin}),w&&v.jsx(dn.Divider,{})]}),b&&se.getCanResize()&&v.jsx(dn.Item,{disabled:!ne[se.id],leftSection:v.jsx(S,{}),onClick:Fe,children:U.resetColumnSize},0),w&&v.jsxs(v.Fragment,{children:[v.jsx(dn.Item,{disabled:!se.getCanHide(),leftSection:v.jsx(L,{}),onClick:Ae,children:(s=U.hideColumn)===null||s===void 0?void 0:s.replace("{column}",String(ie.header))},0),v.jsx(dn.Item,{disabled:!Object.values(ue).filter(Ue=>!Ue).length,leftSection:v.jsx(R,{}),onClick:Ee,children:(o=U.showAllColumns)===null||o===void 0?void 0:o.replace("{column}",String(ie.header))},1)]})]});return v.jsxs(dn,Object.assign({closeOnItemClick:!0,position:"bottom-start",withinPortal:!0},h,{children:[v.jsx(on,{label:(a=de==null?void 0:de.title)!==null&&a!==void 0?a:U.columnActions,openDelay:1e3,withinPortal:!0,children:v.jsx(dn.Target,{children:v.jsx(Bn,Object.assign({"aria-label":U.columnActions,color:"gray",size:"sm",variant:"subtle"},de,{children:v.jsx(P,{size:"100%"})}))})}),v.jsx(dn.Dropdown,{children:(c=(u=(l=ie.renderColumnActionsMenuItems)===null||l===void 0?void 0:l.call(ie,{column:se,internalColumnMenuItems:he,table:f}))!==null&&u!==void 0?u:V==null?void 0:V({column:se,internalColumnMenuItems:he,table:f}))!==null&&c!==void 0?c:he})]}))},FBt=e=>{var t,n,r,i,s,o,{columnVirtualizer:a,header:l,renderedHeaderIndex:u=0,table:c}=e,d=an(e,["columnVirtualizer","header","renderedHeaderIndex","table"]);const f=bl(),{getState:h,options:{columnFilterDisplayMode:p,columnResizeDirection:m,columnResizeMode:g,enableColumnActions:y,enableColumnDragging:b,enableColumnOrdering:_,enableColumnPinning:w,enableGrouping:E,enableHeaderActionsHoverReveal:x,enableMultiSort:S,layoutMode:C,mantineTableHeadCellProps:A},refs:{tableHeadCellRefs:R},setHoveredColumn:P}=c,{columnSizingInfo:L,draggingColumn:k,grouping:$,hoveredColumn:D}=h(),{column:M}=l,{columnDef:B}=M,{columnDefType:z}=B,U={column:M,table:c},O=Object.assign(Object.assign(Object.assign({},_t(A,U)),_t(B.mantineTableHeadCellProps,U)),d),V={minWidth:`max(calc(var(--header-${hf(l==null?void 0:l.id)}-size) * 1px), ${(t=B.minSize)!==null&&t!==void 0?t:30}px)`,width:`calc(var(--header-${hf(l.id)}-size) * 1px)`};C==="grid"?V.flex=`${[0,!1].includes(B.grow)?0:`var(--header-${hf(l.id)}-size)`} 0 auto`:C==="grid-no-grow"&&(V.flex=`${+(B.grow||0)} 0 auto`);const W=w&&B.columnDefType!=="group"&&M.getIsPinned(),j=(k==null?void 0:k.id)===M.id,H=(D==null?void 0:D.id)===M.id,{hovered:G,ref:J}=KVe(),[se,ie]=I.useState(!1),ne=(y||B.enableColumnActions)&&B.enableColumnActions!==!1,ue=!x||se||G&&!c.getVisibleFlatColumns().find(Oe=>Oe.getIsResizing()),xe=b!==!1&&B.enableColumnDragging!==!1&&(b||_&&B.enableColumnOrdering!==!1||E&&B.enableGrouping!==!1&&!$.includes(M.id))&&ue,de=I.useMemo(()=>{let Oe=0;return M.getCanSort()&&Oe++,ue&&(Oe+=1.75),xe&&(Oe+=1.25),Oe},[ue,xe]),Ke=Oe=>{E&&(D==null?void 0:D.id)==="drop-zone"&&P(null),_&&k&&z!=="group"&&P(B.enableColumnOrdering!==!1?M:null)},je=(B==null?void 0:B.Header)instanceof Function?(n=B==null?void 0:B.Header)===null||n===void 0?void 0:n.call(B,{column:M,header:l,table:c}):(r=B==null?void 0:B.Header)!==null&&r!==void 0?r:B.header;return v.jsxs(HE,Object.assign({colSpan:l.colSpan,"data-column-pinned":W||void 0,"data-dragging-column":j||void 0,"data-first-right-pinned":W==="right"&&M.getIsFirstColumn(W)||void 0,"data-hovered-column-target":H||void 0,"data-index":u,"data-last-left-pinned":W==="left"&&M.getIsLastColumn(W)||void 0,"data-resizing":g==="onChange"&&(L==null?void 0:L.isResizingColumn)===M.id&&m||void 0},O,{__vars:{"--mrt-table-cell-left":W==="left"?`${M.getStart(W)}`:void 0,"--mrt-table-cell-right":W==="right"?`${M.getAfter(W)}`:void 0},align:z==="group"?"center":f.dir==="rtl"?"right":"left",className:vt(Po.root,(C==null?void 0:C.startsWith("grid"))&&Po["root-grid"],S&&M.getCanSort()&&Po["root-no-select"],a&&Po["root-virtualized"],O==null?void 0:O.className),onDragEnter:Ke,ref:Oe=>{var Fe;Oe&&(R.current[M.id]=Oe,J.current=Oe,z!=="group"&&((Fe=a==null?void 0:a.measureElement)===null||Fe===void 0||Fe.call(a,Oe)))},style:Oe=>Object.assign(Object.assign({},V),_t(O==null?void 0:O.style,Oe)),children:[l.isPlaceholder?null:(i=O.children)!==null&&i!==void 0?i:v.jsxs(Ct,{className:vt("mrt-table-head-cell-content",Po.content,(z==="group"||(O==null?void 0:O.align)==="center")&&Po["content-center"],(O==null?void 0:O.align)==="right"&&Po["content-right"],M.getCanResize()&&Po["content-spaced"]),children:[v.jsxs(Ct,{__vars:{"--mrt-table-head-cell-labels-padding-left":`${de}`},className:vt("mrt-table-head-cell-labels",Po.labels,M.getCanSort()&&z!=="group"&&Po["labels-sortable"],(O==null?void 0:O.align)==="right"?Po["labels-right"]:(O==null?void 0:O.align)==="center"&&Po["labels-center"],z==="data"&&Po["labels-data"]),onClick:M.getToggleSortingHandler(),children:[v.jsx(Ct,{className:vt("mrt-table-head-cell-content-wrapper",Po["content-wrapper"],z==="data"&&Po["content-wrapper-hidden-overflow"],((o=(s=B.header)===null||s===void 0?void 0:s.length)!==null&&o!==void 0?o:0)<20&&Po["content-wrapper-nowrap"]),children:je}),M.getCanFilter()&&(M.getIsFiltered()||ue)&&v.jsx(OBt,{header:l,table:c}),M.getCanSort()&&(M.getIsSorted()||ue)&&v.jsx($Bt,{header:l,table:c})]}),z!=="group"&&v.jsxs(Ct,{className:vt("mrt-table-head-cell-content-actions",Po["content-actions"]),children:[xe&&v.jsx(DBt,{column:M,table:c,tableHeadCellRef:{current:R.current[M.id]}}),ne&&ue&&v.jsx(LBt,{header:l,table:c,opened:se,onChange:ie})]}),M.getCanResize()&&v.jsx(MBt,{header:l,table:c})]}),p==="subheader"&&M.getCanFilter()&&v.jsx($$e,{header:l,table:c})]}))},jBt=e=>{var{columnVirtualizer:t,headerGroup:n,table:r}=e,i=an(e,["columnVirtualizer","headerGroup","table"]);const{getState:s,options:{enableStickyHeader:o,layoutMode:a,mantineTableHeadRowProps:l}}=r,{isFullScreen:u}=s(),{virtualColumns:c,virtualPaddingLeft:d,virtualPaddingRight:f}=t??{},h=Object.assign(Object.assign({},_t(l,{headerGroup:n,table:r})),i);return v.jsxs(gm,Object.assign({},h,{className:vt(G9.root,(o||u)&&G9.sticky,(a==null?void 0:a.startsWith("grid"))&&G9["layout-mode-grid"],h==null?void 0:h.className),children:[d?v.jsx(ge,{component:"th",display:"flex",w:d}):null,(c??n.headers).map((p,m)=>{let g=p;return t&&(m=p.index,g=n.headers[m]),v.jsx(FBt,{columnVirtualizer:t,header:g,renderedHeaderIndex:m,table:r},g.id)}),f?v.jsx(ge,{component:"th",display:"flex",w:f}):null]}))};var V_={alert:"MRT_ToolbarAlertBanner-module_alert__PAhUK","alert-stacked":"MRT_ToolbarAlertBanner-module_alert-stacked__HR7Nq","alert-bottom":"MRT_ToolbarAlertBanner-module_alert-bottom__u9L-S","alert-badge":"MRT_ToolbarAlertBanner-module_alert-badge__GwDmX","toolbar-alert":"MRT_ToolbarAlertBanner-module_toolbar-alert__3sJGU","head-overlay":"MRT_ToolbarAlertBanner-module_head-overlay__Hw7jK"};const gte=e=>{var t,n,r,{stackAlertBanner:i,table:s}=e,o=an(e,["stackAlertBanner","table"]);const{getFilteredSelectedRowModel:a,getPrePaginationRowModel:l,getState:u,options:{enableRowSelection:c,enableSelectAll:d,icons:{IconX:f},localization:h,mantineToolbarAlertBannerBadgeProps:p,mantineToolbarAlertBannerProps:m,manualPagination:g,positionToolbarAlertBanner:y,renderToolbarAlertBannerContent:b,rowCount:_}}=s,{density:w,grouping:E,rowSelection:x,showAlertBanner:S}=u(),C=Object.assign(Object.assign({},_t(m,{table:s})),o),A=_t(p,{table:s}),R=_??l().flatRows.length,P=I.useMemo(()=>g?Object.values(x).filter(Boolean).length:a().rows.length,[x,R,g]),L=P?v.jsxs(Ct,{align:"center",gap:"sm",children:[(n=(t=h.selectedCountOfRowCountRowsSelected)===null||t===void 0?void 0:t.replace("{selectedCount}",P.toString()))===null||n===void 0?void 0:n.replace("{rowCount}",R.toString()),v.jsx(xn,{onClick:$=>v$e({table:s})($,!1,!0),size:"compact-xs",variant:"subtle",children:h.clearSelection})]}):null,k=E.length>0?v.jsxs(Ct,{children:[h.groupedBy," ",E.map(($,D)=>v.jsxs(I.Fragment,{children:[D>0?h.thenBy:"",v.jsxs(rf,Object.assign({className:V_["alert-badge"],rightSection:v.jsx(Bn,{color:"white",onClick:()=>s.getColumn($).toggleGrouping(),size:"xs",variant:"subtle",children:v.jsx(f,{style:{transform:"scale(0.8)"}})}),variant:"filled"},A,{children:[s.getColumn($).columnDef.header," "]}))]},`${D}-${$}`))]}):null;return v.jsx(Vy,{in:S||!!L||!!k,transitionDuration:i?200:0,children:v.jsx(oS,Object.assign({color:"blue",icon:!1},C,{className:vt(V_.alert,i&&!y&&V_["alert-stacked"],!i&&y==="bottom"&&V_["alert-bottom"],C==null?void 0:C.className),children:(r=b==null?void 0:b({groupedAlert:k,selectedAlert:L,table:s}))!==null&&r!==void 0?r:v.jsxs(Ct,{className:vt(V_["toolbar-alert"],y==="head-overlay"&&V_["head-overlay"],w),children:[c&&d&&y==="head-overlay"&&v.jsx(dq,{table:s}),v.jsxs(Es,{children:[C==null?void 0:C.children,L,k]})]})}))})},BBt=e=>{var{columnVirtualizer:t,table:n}=e,r=an(e,["columnVirtualizer","table"]);const{getHeaderGroups:i,getSelectedRowModel:s,getState:o,options:{enableStickyHeader:a,layoutMode:l,mantineTableHeadProps:u,positionToolbarAlertBanner:c},refs:{tableHeadRef:d}}=n,{isFullScreen:f,showAlertBanner:h}=o(),p=Object.assign(Object.assign({},_t(u,{table:n})),r),m=a||f;return v.jsx(MK,Object.assign({},p,{className:vt(Og.root,l!=null&&l.startsWith("grid")?Og["root-grid"]:Og["root-table-row-group"],m&&Og["root-sticky"],p==null?void 0:p.className),pos:m&&(l!=null&&l.startsWith("grid"))?"sticky":"relative",ref:g=>{d.current=g,p!=null&&p.ref&&(p.ref.current=g)},children:c==="head-overlay"&&(h||s().rows.length>0)?v.jsx(gm,{className:vt(Og["banner-tr"],(l==null?void 0:l.startsWith("grid"))&&Og.grid),children:v.jsx(HE,{className:vt(Og["banner-th"],(l==null?void 0:l.startsWith("grid"))&&Og.grid),colSpan:n.getVisibleLeafColumns().length,children:v.jsx(gte,{table:n})})}):i().map(g=>v.jsx(jBt,{columnVirtualizer:t,headerGroup:g,table:n},g.id))}))},zBt=e=>{var{table:t}=e,n=an(e,["table"]);const{getFlatHeaders:r,getState:i,options:{columns:s,enableTableFooter:o,enableTableHead:a,layoutMode:l,mantineTableProps:u,memoMode:c}}=t,{columnSizing:d,columnSizingInfo:f,columnVisibility:h,density:p}=i(),m=Object.assign(Object.assign({highlightOnHover:!0,horizontalSpacing:p,verticalSpacing:p},_t(u,{table:t})),n),g=I.useMemo(()=>{const E=r(),x={};for(let S=0;S<E.length;S++){const C=E[S],A=C.getSize();x[`--header-${hf(C.id)}-size`]=A,x[`--col-${hf(C.column.id)}-size`]=A}return x},[s,d,f,h]),b={columnVirtualizer:uBt(t),table:t},{colorScheme:_}=KHe(),{stripedColor:w}=m;return v.jsxs(or,Object.assign({className:vt("mrt-table",pge.root,(l==null?void 0:l.startsWith("grid"))&&pge["root-grid"],m.className)},m,{__vars:Object.assign(Object.assign(Object.assign({},g),{"--mrt-striped-row-background-color":w,"--mrt-striped-row-hover-background-color":w?_==="dark"?YHe(w,.08):CC(w,.12):void 0}),m.__vars),children:[a&&v.jsx(BBt,Object.assign({},b)),c==="table-body"||f.isResizingColumn?v.jsx(vBt,Object.assign({},b,{tableProps:m})):v.jsx(D$e,Object.assign({},b,{tableProps:m})),o&&v.jsx(wBt,Object.assign({},b))]}))},UBt=e=>{var t,{open:n,table:r}=e,i=an(e,["open","table"]);const{getState:s,options:{mantineCreateRowModalProps:o,mantineEditRowModalProps:a,onCreatingRowCancel:l,onEditingRowCancel:u,renderCreateRowModalContent:c,renderEditRowModalContent:d},setCreatingRow:f,setEditingRow:h}=r,{creatingRow:p,editingRow:m}=s(),g=p??m,y={row:g,table:r},b=Object.assign(Object.assign(Object.assign({},_t(a,y)),p&&_t(o,y)),i),_=g.getAllCells().filter(E=>E.column.columnDef.columnDefType==="data").map(E=>v.jsx(N$e,{cell:E,table:r},E.id)),w=()=>{var E;p?(l==null||l({row:g,table:r}),f(null)):(u==null||u({row:g,table:r}),h(null)),g._valuesCache={},(E=b.onClose)===null||E===void 0||E.call(b)};return I.createElement(xs,Object.assign({opened:n,withCloseButton:!1},b,{key:g.id,onClose:w}),(t=p&&(c==null?void 0:c({internalEditComponents:_,row:g,table:r}))||(d==null?void 0:d({internalEditComponents:_,row:g,table:r})))!==null&&t!==void 0?t:v.jsxs(v.Fragment,{children:[v.jsx("form",{onSubmit:E=>E.preventDefault(),children:v.jsx(Es,{gap:"lg",pb:24,pt:16,children:_})}),v.jsx(Ct,{justify:"flex-end",children:v.jsx(I$e,{row:g,table:r,variant:"text"})})]}))},VBt=typeof window<"u"?I.useLayoutEffect:I.useEffect,HBt=e=>{var{table:t}=e,n=an(e,["table"]);const{getState:r,options:{createDisplayMode:i,editDisplayMode:s,enableStickyHeader:o,mantineLoadingOverlayProps:a,mantineTableContainerProps:l},refs:{bottomToolbarRef:u,tableContainerRef:c,topToolbarRef:d}}=t,{creatingRow:f,editingRow:h,isFullScreen:p,isLoading:m,showLoadingOverlay:g}=r(),[y,b]=I.useState(0),_=Object.assign(Object.assign({},_t(l,{table:t})),n),w=_t(a,{table:t});VBt(()=>{var S,C,A,R;const P=typeof document<"u"&&(C=(S=d.current)===null||S===void 0?void 0:S.offsetHeight)!==null&&C!==void 0?C:0,L=typeof document<"u"&&(R=(A=u==null?void 0:u.current)===null||A===void 0?void 0:A.offsetHeight)!==null&&R!==void 0?R:0;b(P+L)});const E=i==="modal"&&f,x=s==="modal"&&h;return v.jsxs(ge,Object.assign({},_,{__vars:Object.assign({"--mrt-top-toolbar-height":`${y}`},_==null?void 0:_.__vars),className:vt("mrt-table-container",z9.root,o&&z9["root-sticky"],p&&z9["root-fullscreen"],_==null?void 0:_.className),ref:S=>{S&&(c.current=S,_!=null&&_.ref&&(_.ref.current=S))},children:[v.jsx(su,Object.assign({visible:m||g,zIndex:2},w)),v.jsx(zBt,{table:t}),(E||x)&&v.jsx(UBt,{open:!0,table:t})]}))};var nC={root:"MRT_BottomToolbar-module_root__VDeWo","root-fullscreen":"MRT_BottomToolbar-module_root-fullscreen__esE15","custom-toolbar-container":"MRT_BottomToolbar-module_custom-toolbar-container__XcDRF","paginator-container":"MRT_BottomToolbar-module_paginator-container__A3eWY","paginator-container-alert-banner":"MRT_BottomToolbar-module_paginator-container-alert-banner__gyqtO"},L$e={"common-toolbar-styles":"common-styles-module_common-toolbar-styles__DnjR8"},_ge={collapse:"MRT_ProgressBar-module_collapse__rOLJH","collapse-top":"MRT_ProgressBar-module_collapse-top__oCi0h"};const F$e=e=>{var{isTopToolbar:t,table:n}=e,r=an(e,["isTopToolbar","table"]);const{getState:i,options:{mantineProgressProps:s}}=n,{isSaving:o,showProgressBars:a}=i(),l=Object.assign(Object.assign({},_t(s,{isTopToolbar:t,table:n})),r);return v.jsx(Vy,{className:vt(_ge.collapse,t&&_ge["collapse-top"]),in:o||a,children:v.jsx(Vb,Object.assign({animated:!0,"aria-busy":"true","aria-label":"Loading",radius:0,value:100},l))})};var X9={root:"MRT_TablePagination-module_root__yZ8pm",pagesize:"MRT_TablePagination-module_pagesize__-vmTn","with-top-margin":"MRT_TablePagination-module_with-top-margin__aM5-m"};const wge=[5,10,15,20,25,30,50,100].map(e=>e.toString()),j$e=e=>{var t,{position:n="bottom",table:r}=e,i=an(e,["position","table"]);const{getPrePaginationRowModel:s,getState:o,options:{enableToolbarInternalActions:a,icons:{IconChevronLeft:l,IconChevronLeftPipe:u,IconChevronRight:c,IconChevronRightPipe:d},localization:f,mantinePaginationProps:h,paginationDisplayMode:p,rowCount:m},setPageIndex:g,setPageSize:y}=r,{pagination:{pageIndex:b=0,pageSize:_=10},showGlobalFilter:w}=o(),E=Object.assign(Object.assign({},_t(h,{table:r})),i),x=m??s().rows.length,S=Math.ceil(x/_),C=S>2,A=b*_,R=Math.min(b*_+_,x),P=E??{},{rowsPerPageOptions:L=wge,showRowsPerPage:k=!0,withEdges:$=C}=P,D=an(P,["rowsPerPageOptions","showRowsPerPage","withEdges"]),M=n==="top"&&a&&!w;return v.jsxs(ge,{className:vt("mrt-table-pagination",X9.root,M&&X9["with-top-margin"]),children:[(E==null?void 0:E.showRowsPerPage)!==!1&&v.jsxs(Ln,{gap:"xs",children:[v.jsx(Xe,{id:"rpp-label",children:f.rowsPerPage}),v.jsx(vf,{allowDeselect:!1,"aria-labelledby":"rpp-label",className:X9.pagesize,data:(t=E==null?void 0:E.rowsPerPageOptions)!==null&&t!==void 0?t:wge,onChange:B=>y(+B),value:_.toString()})]}),p==="pages"?v.jsx(Df,Object.assign({firstIcon:u,lastIcon:d,nextIcon:c,onChange:B=>g(B-1),previousIcon:l,total:S,value:b+1,withEdges:$},D)):p==="default"?v.jsxs(v.Fragment,{children:[v.jsx(Xe,{children:`${R===0?0:(A+1).toLocaleString()}-${R.toLocaleString()} ${f.of} ${x.toLocaleString()}`}),v.jsxs(Ln,{gap:6,children:[$&&v.jsx(Bn,{"aria-label":f.goToFirstPage,color:"gray",disabled:b<=0,onClick:()=>g(0),variant:"subtle",children:v.jsx(u,{})}),v.jsx(Bn,{"aria-label":f.goToPreviousPage,color:"gray",disabled:b<=0,onClick:()=>g(b-1),variant:"subtle",children:v.jsx(l,{})}),v.jsx(Bn,{"aria-label":f.goToNextPage,color:"gray",disabled:R>=x,onClick:()=>g(b+1),variant:"subtle",children:v.jsx(c,{})}),$&&v.jsx(Bn,{"aria-label":f.goToLastPage,color:"gray",disabled:R>=x,onClick:()=>g(S-1),variant:"subtle",children:v.jsx(d,{})})]})]}):null]})};var Ege={root:"MRT_ToolbarDropZone-module_root__eGTXb",hovered:"MRT_ToolbarDropZone-module_hovered__g7PeJ"};const B$e=e=>{var{table:t}=e,n=an(e,["table"]);const{getState:r,options:{enableGrouping:i,localization:s},setHoveredColumn:o,setShowToolbarDropZone:a}=t,{draggingColumn:l,grouping:u,hoveredColumn:c,showToolbarDropZone:d}=r(),f=h=>{o({id:"drop-zone"})};return I.useEffect(()=>{var h;((h=t.options.state)===null||h===void 0?void 0:h.showToolbarDropZone)!==void 0&&a(!!i&&!!l&&l.columnDef.enableGrouping!==!1&&!u.includes(l.id))},[i,l,u]),v.jsx(Nf,{mounted:d,transition:"fade",children:()=>{var h,p;return v.jsx(Ct,Object.assign({className:vt("mrt-toolbar-dropzone",Ege.root,(c==null?void 0:c.id)==="drop-zone"&&Ege.hovered),onDragEnter:f},n,{children:v.jsx(Xe,{children:s.dropToGroupBy.replace("{column}",(p=(h=l==null?void 0:l.columnDef)===null||h===void 0?void 0:h.header)!==null&&p!==void 0?p:"")})}))}})},qBt=e=>{var{table:t}=e,n=an(e,["table"]);const{getState:r,options:{enablePagination:i,mantineBottomToolbarProps:s,positionPagination:o,positionToolbarAlertBanner:a,positionToolbarDropZone:l,renderBottomToolbarCustomActions:u},refs:{bottomToolbarRef:c}}=t,{isFullScreen:d}=r(),f=FA("(max-width: 720px)"),h=Object.assign(Object.assign({},_t(s,{table:t})),n),p=f||!!u;return v.jsxs(ge,Object.assign({},h,{className:vt("mrt-bottom-toolbar",nC.root,L$e["common-toolbar-styles"],d&&nC["root-fullscreen"],h==null?void 0:h.className),ref:m=>{m&&(c.current=m,h!=null&&h.ref&&(h.ref.current=m))},children:[v.jsx(F$e,{isTopToolbar:!1,table:t}),a==="bottom"&&v.jsx(gte,{stackAlertBanner:p,table:t}),["both","bottom"].includes(l??"")&&v.jsx(B$e,{table:t}),v.jsxs(ge,{className:nC["custom-toolbar-container"],children:[u?u({table:t}):v.jsx("span",{}),v.jsx(ge,{className:vt(nC["paginator-container"],p&&nC["paginator-container-alert-banner"]),children:i&&["both","bottom"].includes(o??"")&&v.jsx(j$e,{position:"bottom",table:t})})]})]}))};var eO={root:"MRT_TopToolbar-module_root__r4-V9","root-fullscreen":"MRT_TopToolbar-module_root-fullscreen__3itT8","actions-container":"MRT_TopToolbar-module_actions-container__-uL0u","actions-container-stack-alert":"MRT_TopToolbar-module_actions-container-stack-alert__OYDL6"},WBt={root:"MRT_ToolbarInternalButtons-module_root__NKoUG"},xge={root:"MRT_ShowHideColumnsMenu-module_root__2UWak",content:"MRT_ShowHideColumnsMenu-module_content__ehkWQ"},H_={root:"MRT_ShowHideColumnsMenuItems-module_root__wYgv-",menu:"MRT_ShowHideColumnsMenuItems-module_menu__CeATR",grab:"MRT_ShowHideColumnsMenuItems-module_grab__a-d-y",pin:"MRT_ShowHideColumnsMenuItems-module_pin__P437b",switch:"MRT_ShowHideColumnsMenuItems-module_switch__tMsdt",header:"MRT_ShowHideColumnsMenuItems-module_header__xVkKb"},Q9={root:"MRT_ColumnPinningButtons-module_root__scTtW",left:"MRT_ColumnPinningButtons-module_left__W6Aog",right:"MRT_ColumnPinningButtons-module_right__7AJE3"};const GBt=({column:e,table:t})=>{const{options:{icons:{IconPinned:n,IconPinnedOff:r},localization:i}}=t;return v.jsx(Ct,{className:vt("mrt-column-pinning-buttons",Q9.root),children:e.getIsPinned()?v.jsx(on,{label:i.unpin,withinPortal:!0,children:v.jsx(Bn,{color:"gray",onClick:()=>e.pin(!1),size:"md",variant:"subtle",children:v.jsx(r,{})})}):v.jsxs(v.Fragment,{children:[v.jsx(on,{label:i.pinToLeft,withinPortal:!0,children:v.jsx(Bn,{color:"gray",onClick:()=>e.pin("left"),size:"md",variant:"subtle",children:v.jsx(n,{className:Q9.left})})}),v.jsx(on,{label:i.pinToRight,withinPortal:!0,children:v.jsx(Bn,{color:"gray",onClick:()=>e.pin("right"),size:"md",variant:"subtle",children:v.jsx(n,{className:Q9.right})})})]})})},z$e=({allColumns:e,column:t,hoveredColumn:n,setHoveredColumn:r,table:i})=>{var s;const o=As(),{getState:a,options:{enableColumnOrdering:l,enableColumnPinning:u,enableHiding:c,localization:d},setColumnOrder:f}=i,{columnOrder:h}=a(),{columnDef:p}=t,{columnDefType:m}=p,g=m!=="group"&&t.getIsVisible()||m==="group"&&t.getLeafColumns().some(C=>C.getIsVisible()),y=C=>{var A,R;m==="group"?(R=(A=C==null?void 0:C.columns)===null||A===void 0?void 0:A.forEach)===null||R===void 0||R.call(A,P=>{P.toggleVisibility(!g)}):C.toggleVisibility()},b=I.useRef(null),[_,w]=I.useState(!1),E=C=>{w(!0),C.dataTransfer.setDragImage(b.current,0,0)},x=C=>{w(!1),r(null),n&&f(c$e(t,n,h))},S=C=>{!_&&p.enableColumnOrdering!==!1&&r(t)};return!p.header||p.visibleInShowHideMenu===!1?null:v.jsxs(v.Fragment,{children:[v.jsx(dn.Item,Object.assign({className:H_.root,component:"span",onDragEnter:S,ref:b,style:{"--_column-depth":`${(t.depth+.5)*2}rem`,"--_hover-color":B8t(o)}},L$("dragging",_),L$("order-hovered",(n==null?void 0:n.id)===t.id),{children:v.jsxs(ge,{className:H_.menu,children:[m!=="group"&&l&&!e.some(C=>C.columnDef.columnDefType==="group")&&(p.enableColumnOrdering!==!1?v.jsx(mte,{onDragEnd:x,onDragStart:E,table:i}):v.jsx(ge,{className:H_.grab})),u&&(t.getCanPin()?v.jsx(GBt,{column:t,table:i}):v.jsx(ge,{className:H_.pin})),c?v.jsx(on,{label:d.toggleVisibility,openDelay:1e3,withinPortal:!0,children:v.jsx(M0,{checked:g,className:H_.switch,disabled:!t.getCanHide(),label:p.header,onChange:()=>y(t)})}):v.jsx(Xe,{className:H_.header,children:p.header})]})})),(s=t.columns)===null||s===void 0?void 0:s.map((C,A)=>v.jsx(z$e,{allColumns:e,column:C,hoveredColumn:n,setHoveredColumn:r,table:i},`${A}-${C.id}`))]})},YBt=({table:e})=>{const{getAllColumns:t,getAllLeafColumns:n,getCenterLeafColumns:r,getIsAllColumnsVisible:i,getIsSomeColumnsPinned:s,getIsSomeColumnsVisible:o,getLeftLeafColumns:a,getRightLeafColumns:l,getState:u,options:{enableColumnOrdering:c,enableColumnPinning:d,enableHiding:f,localization:h}}=e,{columnOrder:p,columnPinning:m}=u(),g=w=>{n().filter(E=>E.columnDef.enableHiding!==!1).forEach(E=>E.toggleVisibility(w))},y=I.useMemo(()=>{const w=t();return p.length>0&&!w.some(E=>E.columnDef.columnDefType==="group")?[...a(),...Array.from(new Set(p)).map(E=>r().find(x=>(x==null?void 0:x.id)===E)),...l()].filter(Boolean):w},[p,m,t(),r(),a(),l()]),[b,_]=I.useState(null);return v.jsxs(dn.Dropdown,{className:vt("mrt-show-hide-columns-menu",xge.root),children:[v.jsxs(Ct,{className:xge.content,children:[f&&v.jsx(xn,{disabled:!o(),onClick:()=>g(!1),variant:"subtle",children:h.hideAll}),c&&v.jsx(xn,{onClick:()=>e.setColumnOrder(dte(e.options)),variant:"subtle",children:h.resetOrder}),d&&v.jsx(xn,{disabled:!s(),onClick:()=>e.resetColumnPinning(!0),variant:"subtle",children:h.unpinAll}),f&&v.jsx(xn,{disabled:i(),onClick:()=>g(!0),variant:"subtle",children:h.showAll})]}),v.jsx(dn.Divider,{}),y.map((w,E)=>v.jsx(z$e,{allColumns:y,column:w,hoveredColumn:b,setHoveredColumn:_,table:e},`${E}-${w.id}`))]})},KBt=e=>{var{table:t,title:n}=e,r=an(e,["table","title"]);const{icons:{IconColumns:i},localization:{showHideColumns:s}}=t.options;return v.jsxs(dn,{closeOnItemClick:!1,withinPortal:!0,children:[v.jsx(on,{label:n??s,withinPortal:!0,children:v.jsx(dn.Target,{children:v.jsx(Bn,Object.assign({"aria-label":n??s,color:"gray",size:"lg",variant:"subtle"},r,{children:v.jsx(i,{})}))})}),v.jsx(YBt,{table:t})]})},XBt={md:"xs",xl:"md",xs:"xl"},QBt=e=>{var{table:{getState:t,options:{icons:{IconBaselineDensityLarge:n,IconBaselineDensityMedium:r,IconBaselineDensitySmall:i},localization:{toggleDensity:s}},setDensity:o},title:a}=e,l=an(e,["table","title"]);const{density:u}=t();return v.jsx(on,{label:a??s,withinPortal:!0,children:v.jsx(Bn,Object.assign({"aria-label":a??s,color:"gray",onClick:()=>o(c=>XBt[c]),size:"lg",variant:"subtle"},l,{children:u==="xs"?v.jsx(i,{}):u==="md"?v.jsx(r,{}):v.jsx(n,{})}))})},JBt=e=>{var{table:{getState:t,options:{icons:{IconFilter:n,IconFilterOff:r},localization:{showHideFilters:i}},setShowColumnFilters:s},title:o}=e,a=an(e,["table","title"]);const{showColumnFilters:l}=t();return v.jsx(on,{label:o??i,withinPortal:!0,children:v.jsx(Bn,Object.assign({"aria-label":o??i,color:"gray",onClick:()=>s(u=>!u),size:"lg",variant:"subtle"},a,{children:l?v.jsx(r,{}):v.jsx(n,{})}))})},ZBt=e=>{var{table:{getState:t,options:{icons:{IconMaximize:n,IconMinimize:r},localization:{toggleFullScreen:i}},setIsFullScreen:s},title:o}=e,a=an(e,["table","title"]);const{isFullScreen:l}=t(),[u,c]=I.useState(!1),d=()=>{c(!1),s(f=>!f)};return v.jsx(on,{label:o??i,opened:u,withinPortal:!0,children:v.jsx(Bn,Object.assign({"aria-label":o??i,color:"gray",onClick:d,onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1),size:"lg",variant:"subtle"},a,{children:l?v.jsx(r,{}):v.jsx(n,{})}))})},e9t=e=>{var{table:{getState:t,options:{icons:{IconSearch:n,IconSearchOff:r},localization:{showHideSearch:i}},refs:{searchInputRef:s},setShowGlobalFilter:o},title:a}=e,l=an(e,["table","title"]);const{globalFilter:u,showGlobalFilter:c}=t(),d=()=>{o(!c),setTimeout(()=>{var f;return(f=s.current)===null||f===void 0?void 0:f.focus()},100)};return v.jsx(on,{label:a??i,withinPortal:!0,children:v.jsx(Bn,Object.assign({"aria-label":a??i,color:"gray",disabled:!!u,onClick:d,size:"lg",variant:"subtle"},l,{children:c?v.jsx(r,{}):v.jsx(n,{})}))})},t9t=e=>{var t,{table:n}=e,r=an(e,["table"]);const{options:{columnFilterDisplayMode:i,enableColumnFilters:s,enableColumnOrdering:o,enableColumnPinning:a,enableDensityToggle:l,enableFilters:u,enableFullScreenToggle:c,enableGlobalFilter:d,enableHiding:f,initialState:h,renderToolbarInternalActions:p}}=n;return v.jsx(Ct,Object.assign({},r,{className:vt("mrt-toolbar-internal-buttons",WBt.root,r==null?void 0:r.className),children:(t=p==null?void 0:p({table:n}))!==null&&t!==void 0?t:v.jsxs(v.Fragment,{children:[u&&d&&!(h!=null&&h.showGlobalFilter)&&v.jsx(e9t,{table:n}),u&&s&&i!=="popover"&&v.jsx(JBt,{table:n}),(f||o||a)&&v.jsx(KBt,{table:n}),l&&v.jsx(QBt,{table:n}),c&&v.jsx(ZBt,{table:n})]})}))};var Sge={root:"MRT_GlobalFilterTextInput-module_root__Xmcpv",collapse:"MRT_GlobalFilterTextInput-module_collapse__v311d"};const J9=e=>{var{table:t}=e,n=an(e,["table"]);const{getState:r,options:{enableGlobalFilterModes:i,icons:{IconSearch:s,IconX:o},localization:a,mantineSearchTextInputProps:l,manualFiltering:u},refs:{searchInputRef:c},setGlobalFilter:d}=t,{globalFilter:f,showGlobalFilter:h}=r(),p=Object.assign(Object.assign({},_t(l,{table:t})),n),m=I.useRef(!1),[g,y]=I.useState(f??""),[b]=U_e(g,u?500:250);I.useEffect(()=>{d(b||void 0)},[b]);const _=()=>{y(""),d(void 0)};return I.useEffect(()=>{m.current&&(f===void 0?_():y(f)),m.current=!0},[f]),v.jsxs(Vy,{className:Sge.collapse,in:h,children:[i&&v.jsxs(dn,{withinPortal:!0,children:[v.jsx(dn.Target,{children:v.jsx(Bn,{"aria-label":a.changeSearchMode,color:"gray",size:"sm",variant:"transparent",children:v.jsx(s,{})})}),v.jsx(M$e,{onSelect:_,table:t})]}),v.jsx(of,Object.assign({leftSection:!i&&v.jsx(s,{}),mt:0,mx:"sm",onChange:w=>y(w.target.value),placeholder:a.search,rightSection:g?v.jsx(Bn,{"aria-label":a.clearSearch,color:"gray",disabled:!(g!=null&&g.length),onClick:_,size:"sm",variant:"transparent",children:v.jsx(on,{label:a.clearSearch,withinPortal:!0,children:v.jsx(o,{})})}):null,value:g??"",variant:"filled"},p,{className:vt("mrt-global-filter-text-input",Sge.root,p==null?void 0:p.className),ref:w=>{w&&(c.current=w,p!=null&&p.ref&&(p.ref=w))}}))]})},n9t=e=>{var t,{table:n}=e,r=an(e,["table"]);const{getState:i,options:{enableGlobalFilter:s,enablePagination:o,enableToolbarInternalActions:a,mantineTopToolbarProps:l,positionGlobalFilter:u,positionPagination:c,positionToolbarAlertBanner:d,positionToolbarDropZone:f,renderTopToolbarCustomActions:h},refs:{topToolbarRef:p}}=n,{isFullScreen:m,showGlobalFilter:g}=i(),y=FA("(max-width:720px)"),b=FA("(max-width:1024px)"),_=Object.assign(Object.assign({},_t(l,{table:n})),r),w=y||!!h||g&&b,E={style:b?void 0:{zIndex:3},table:n};return v.jsxs(ge,Object.assign({},_,{className:vt(L$e["common-toolbar-styles"],eO.root,m&&eO["root-fullscreen"],_==null?void 0:_.className),ref:x=>{x&&(p.current=x,_!=null&&_.ref&&(_.ref.current=x))},children:[d==="top"&&v.jsx(gte,{stackAlertBanner:w,table:n}),["both","top"].includes(f??"")&&v.jsx(B$e,{table:n}),v.jsxs(Ct,{className:vt(eO["actions-container"],w&&eO["actions-container-stack-alert"]),children:[s&&u==="left"&&v.jsx(J9,Object.assign({},E)),(t=h==null?void 0:h({table:n}))!==null&&t!==void 0?t:v.jsx("span",{}),a?v.jsxs(Ct,{justify:"end",wrap:"wrap-reverse",children:[s&&u==="right"&&v.jsx(J9,Object.assign({},E)),v.jsx(t9t,{table:n})]}):s&&u==="right"&&v.jsx(J9,Object.assign({},E))]}),o&&["both","top"].includes(c??"")&&v.jsx(Ct,{justify:"end",children:v.jsx(j$e,{position:"top",table:n})}),v.jsx(F$e,{isTopToolbar:!0,table:n})]}))},r9t=e=>{var t,n,{table:r}=e,i=an(e,["table"]);const{getState:s,options:{enableBottomToolbar:o,enableTopToolbar:a,mantinePaperProps:l,renderBottomToolbar:u,renderTopToolbar:c},refs:{tablePaperRef:d}}=r,{isFullScreen:f}=s(),h=Object.assign(Object.assign({},_t(l,{table:r})),i);return v.jsxs(Z1,Object.assign({shadow:"xs",withBorder:!0},h,{className:vt("mrt-table-paper",fBt.root,f&&"mrt-table-paper-fullscreen",h==null?void 0:h.className),ref:p=>{d.current=p,h!=null&&h.ref&&(h.ref.current=p)},style:p=>Object.assign(Object.assign({zIndex:f?200:void 0},_t(h==null?void 0:h.style,p)),f?{border:0,borderRadius:0,bottom:0,height:"100vh",left:0,margin:0,maxHeight:"100vh",maxWidth:"100vw",padding:0,position:"fixed",right:0,top:0,width:"100vw"}:null),children:[a&&((t=_t(c,{table:r}))!==null&&t!==void 0?t:v.jsx(n9t,{table:r})),v.jsx(HBt,{table:r}),o&&((n=_t(u,{table:r}))!==null&&n!==void 0?n:v.jsx(qBt,{table:r}))]}))},i9t=e=>e.table!==void 0,s9t=e=>{let t;return i9t(e)?t=e.table:t=R$e(e),v.jsx(r9t,{table:t})};function Tge(e){const t=Math.floor(e/6e4),n=(e%6e4/1e3).toFixed(0);return n==="60"?`${t+1}:00`:`${t}:${+n<10?"0":""}${n}`}async function o9t(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}async function Z9(e,t){return e?await e.getTags(t):[]}async function a9t(e){return e?await e.getAllParticipantAndTaskTags():{}}function l9t({completed:e,studyConfig:t}){const{storageEngine:n}=ki(),[r,i]=I.useState(null),s=I.useMemo(()=>NX(t.sequence).map(k=>k.componentName),[t.sequence]),o=_p(),{value:a,execute:l}=Kd(Z9,[n,"text"]),{value:u,execute:c}=Kd(Z9,[n,"task"]),{value:d,execute:f}=Kd(Z9,[n,"participant"]),{value:h,execute:p}=Kd(a9t,[n]),[m,g]=I.useState([]),[y,b]=I.useState([]),[_,w]=I.useState([]),[E,x]=I.useState(150),S=I.useMemo(()=>{if(!r)return null;const k=ku(m.map($=>$.tasks[r].wordCount||0));return Dc([0,E]).domain(k)},[r,m,E]),C=I.useMemo(()=>{if(!r){const $=ku(m.map(D=>D.interactionCount||0));return Dc([0,E]).domain($)}const k=ku(m.map($=>$.tasks[r].interactionCount||0));return Dc([0,E]).domain(k)},[r,m,E]),A=I.useMemo(()=>{if(!r){const $=ku(m.map(D=>D.timeSpent||0));return Dc([0,E]).domain($)}const k=ku(m.map($=>$.tasks[r].timeSpent||0));return Dc([0,E]).domain(k)},[r,m,E]),R=I.useCallback((k,$)=>{n&&n.saveTags(k,$).then(()=>{p(n),l(n,"text"),c(n,"task"),f(n,"participant")})},[f,p,c,l,n]);I.useEffect(()=>{if(!o||!n)return;const k=e.map($=>{const D=Object.values($.answers),M=ku(D.map(U=>[U.startTime,U.endTime]).flat()),B=tI(D.map(U=>U.provenanceGraph?Object.keys(U.provenanceGraph.nodes).length-1:0)),z={};return Object.entries($.answers).forEach(U=>{const[O,V]=U,W=O.slice(0,O.lastIndexOf("_"));z[W]={interactionCount:V.provenanceGraph?Object.keys(V.provenanceGraph.nodes).length-1:0,wordCount:null,timeSpent:V.endTime-V.startTime,tags:[]}}),{timeSpent:M[1]-M[0],wordCount:null,interactionCount:B,id:$.participantId,tasks:z}});g(k)},[o,e,n]),I.useEffect(()=>{if(r&&o.user.user){const k=[...m];Promise.all(m.map(($,D)=>{var M;return o9t(n,$.id,r,(M=o.user.user)==null?void 0:M.email).then(B=>{if(B&&B.length>0){const z=tI(B.map(O=>O.text.length)),U=B.map(O=>O.selectedTags.map(V=>({...V,startTime:O.transcriptMappingStart}))).flat();k[D].tasks[r].tags=U,k[D].tasks[r].wordCount=z}else k[D].tasks[r].wordCount=0})})).then(()=>g(k))}},[o.user.user,r,n]),I.useEffect(()=>{if(_.length===0){b(m);return}b(m.filter(k=>{if(h&&h[k.id]){if(h[k.id].partTags.find(D=>!!_.find(M=>M===D.name)))return!0;if(r){const D=h[k.id].taskTags[r];if(D&&D.find(M=>!!_.find(B=>B===M.name)))return!0}}return!!(r&&k.tasks[r].tags.find($=>!!_.find(D=>D===$.name)))}))},[r,_,m,h]);const P=I.useMemo(()=>r===null?[{accessorKey:"id",header:"Participant Id"},{accessorKey:"timeSpent",header:"Time Spent",id:"timeSpent",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?v.jsx(Os,{}):v.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[v.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:A(k.getValue())}),v.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:Tge(k.getValue())})]}),size:150},{accessorKey:"interactionCount",header:"Interaction Count",id:"interactionCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?v.jsx(Os,{}):v.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[v.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:C(k.getValue())}),v.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:k.getValue()})]}),size:150},{accessorKey:"id",id:"participantTags",header:"Participant Tags",renderColumnActionsMenuItems({internalColumnMenuItems:k}){return v.jsxs(v.Fragment,{children:[k,v.jsx(VA,{closeMenuOnClick:!1,children:v.jsx(PH,{tags:d||[],createTagCallback:$=>{R([...d||[],$],"participant")},editTagCallback:()=>null})})]})},Cell:({cell:k})=>v.jsx(rA,{tags:d||[],onSelectTags:$=>{if(n&&h){const D=Vu(h);D[k.getValue()]||(D[k.getValue()]={partTags:[],taskTags:{}}),D[k.getValue()].partTags=$,n.saveAllParticipantAndTaskTags(D).then(()=>{p(n)})}},selectedTags:h&&h[k.getValue()]?h[k.getValue()].partTags:[]}),size:150}]:[{accessorKey:"id",id:"id",header:"Participant Id",Cell:({cell:k})=>v.jsx(qy,{size:"12px",component:KK,target:"_blank",to:`${dd}ThinkAloud/analysis/${k.getValue()}/reviewer-${r}`,children:k.getValue()}),size:150},{accessorKey:`tasks.${r}.timeSpent`,header:"Time Spent",id:"timeSpent",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?v.jsx(Os,{}):v.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[v.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:A(k.getValue())}),v.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:Tge(k.getValue())})]}),size:150},{accessorKey:`tasks.${r}.wordCount`,header:"Word Count",id:"wordCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?v.jsx(Os,{}):v.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[v.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:S?S(k.getValue()):0}),v.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:k.getValue()})]}),size:150},{accessorKey:`tasks.${r}.interactionCount`,header:"Interaction Count",id:"interactionCount",mantineTableBodyCellProps:{style:{padding:0}},Cell:({cell:k})=>k.getValue()===null||k.getValue()===void 0?v.jsx(Os,{}):v.jsxs("svg",{style:{width:k.column.getSize(),height:"60px"},children:[v.jsx("rect",{x:0,y:0,height:200,fill:"cornflowerblue",width:C(k.getValue())}),v.jsx("text",{x:5,y:30,style:{textAnchor:"start",dominantBaseline:"middle"},children:k.getValue()})]}),size:150},{accessorKey:`tasks.${r}.tags`,header:"Tags",Cell:({cell:k,row:$})=>v.jsx(Hy,{type:"auto",h:40,children:v.jsx(Ln,{gap:2,children:v.jsx(SOe,{size:"xs",selectedTags:k.getValue().filter(D=>_.length>0?!!_.find(M=>M===D.name):!0),currentTask:r,isLink:!0,participantId:$.getValue("id")})})}),size:150},{accessorKey:"id",id:"taskTags",header:"Task Tags",renderColumnActionsMenuItems({internalColumnMenuItems:k}){return v.jsxs(v.Fragment,{children:[k,v.jsx(VA,{closeMenuOnClick:!1,children:v.jsx(PH,{tags:u||[],createTagCallback:$=>{R([...u||[],$],"task")},editTagCallback:()=>null})})]})},Cell:({cell:k})=>v.jsx(rA,{tags:u||[],onSelectTags:$=>{if(n&&h){const D=Vu(h);D[k.getValue()]||(D[k.getValue()]={partTags:[],taskTags:{}}),D[k.getValue()].taskTags[r]=$,n.saveAllParticipantAndTaskTags(D).then(()=>{p(n)})}},selectedTags:h&&h[k.getValue()]?h[k.getValue()].taskTags[r]||[]:[]}),size:150}],[d,r,_,C,h,p,R,n,u,A,S]),L=R$e({columns:P,data:y,enableMultiSort:!0,enableDensityToggle:!1,enablePagination:!1,enableRowVirtualization:!0,initialState:{density:"xs"},mantineTableContainerProps:{style:{maxHeight:"77dvh"}},renderTopToolbarCustomActions:()=>v.jsxs(Ln,{gap:"xl",children:[v.jsxs(Ln,{children:[v.jsx(xi,{order:5,children:"Select Task"}),v.jsx(vf,{clearable:!0,value:r,onChange:i,data:s})]}),v.jsxs(Ln,{children:[v.jsx(xi,{order:5,children:"Filter by tags"}),a&&u&&d&&a.length>0?v.jsx(rA,{tags:a,onSelectTags:k=>w(k.map($=>$.name)),selectedTags:[...a.filter(k=>_.includes(k.name)),...u.filter(k=>_.includes(k.name)),...d.filter(k=>_.includes(k.name))],partTags:d||[],taskTags:u||[]}):v.jsx(Os,{})]})]})});return v.jsx(ge,{px:"sm",style:{height:"100%"},children:v.jsx(s9t,{table:L})})}function u9t(e){const{globalConfig:t}=e,{studyId:n}=bf(),[r,i]=I.useState([]),[s,o]=I.useState(void 0),[a,l]=I.useState(!1),{storageEngine:u}=ki(),c=hc(),{tab:d}=bf(),{user:f}=_p(),h=I.useCallback(async()=>{if(l(!0),n){const y=await N4(n,t);if(!y||!u)return;await u.initializeStudyDb(n,y);const b=await u.getAllParticipantsData();i(b),o(y),l(!1)}},[t,u,n]);I.useEffect(()=>{h()},[t,u,n,h]);const[p,m,g]=I.useMemo(()=>{const y=r.filter(w=>!w.rejected&&w.completed),b=r.filter(w=>!w.rejected&&!w.completed),_=r.filter(w=>w.rejected);return[y,b,_]},[r]);return v.jsxs(Ir,{style:{height:"100%"},children:[v.jsx(cA,{studyIds:e.globalConfig.configsList}),v.jsx(Ir.Main,{children:v.jsxs(ge,{p:"sm",style:{height:"100%",minHeight:"100%",width:"100%"},children:[v.jsx(su,{visible:a}),v.jsxs(Ct,{direction:"row",align:"center",children:[v.jsx(xi,{order:5,children:n}),v.jsx(C3e,{completed:p.length,inProgress:m.length,rejected:g.length})]}),v.jsx(Hc,{h:"xs"}),v.jsxs(es,{variant:"outline",value:d,onChange:y=>c(`./../${y}`),style:{height:"100%"},children:[v.jsxs(es.List,{children:[v.jsx(es.Tab,{value:"table",leftSection:v.jsx(Stt,{size:16}),children:"Table View"}),v.jsx(on,{label:"Coming soon",position:"bottom",children:v.jsx(es.Tab,{value:"stats",leftSection:v.jsx(qet,{size:16}),disabled:!0,children:"Trial Stats"})}),v.jsx(on,{label:"Coming soon",position:"bottom",children:v.jsx(es.Tab,{value:"replay",leftSection:v.jsx(qle,{size:16}),disabled:!0,children:"Participant Replay"})}),v.jsx(es.Tab,{value:"thinkAloud",leftSection:v.jsx(qle,{size:16}),children:"Think Aloud"}),v.jsx(es.Tab,{value:"manage",leftSection:v.jsx(Vxe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),v.jsx(es.Panel,{value:"table",pt:"xs",children:s&&v.jsx(ujt,{completed:p,inProgress:m,studyConfig:s,refresh:h})}),v.jsx(es.Panel,{value:"stats",pt:"xs",children:"statsboard"}),v.jsx(es.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),v.jsx(es.Panel,{value:"thinkAloud",pt:"xs",children:s&&v.jsx(l9t,{completed:p,studyConfig:s})}),v.jsx(es.Panel,{value:"manage",pt:"xs",children:n&&f.isAdmin?v.jsx(fjt,{studyId:n,refresh:h}):v.jsx(Of,{mt:20,children:v.jsx(oS,{title:"Unauthorized Access",variant:"light",color:"red",icon:v.jsx(Bxe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Cge({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=_p(),{storageEngine:o}=ki(),[a,l]=I.useState(!1),u=bf();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&u[t]){const d=await n(u[t]);d&&l(d)}else l(!0);if(a)try{r&&await i(r)||s()}catch(d){s(),console.warn(d)}})()},[r.isAdmin,a]),r.determiningStatus||!o?v.jsx(su,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?v.jsx(YK,{to:"/login"}):v.jsx(v.Fragment,{children:e})}async function U$e(e,t,n){if(e instanceof Pc){t(!0);const r=new nm,i=A$();try{await AMt(i,r,hDe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function c9t(){const{user:e}=_p(),[t,n]=I.useState(null),[r,i]=I.useState(!1),{storageEngine:s}=ki();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?v.jsx(YK,{to:"/"}):v.jsx(Of,{children:v.jsx(Ub,{padding:"lg",children:v.jsxs(Ct,{align:"center",direction:"column",justify:"center",children:[v.jsx(Gy,{maw:200,mt:50,mb:100,src:`${dd}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),v.jsxs(v.Fragment,{children:[v.jsx(Xe,{mb:20,children:"To access admin settings, please sign in using your Google account."}),v.jsx(xn,{onClick:()=>U$e(s,i,n),leftSection:v.jsx(Ttt,{}),variant:"filled",children:"Sign In With Google"})]}),t?v.jsx(rf,{size:"lg",color:"red",mt:30,children:t}):null,v.jsx(su,{visible:r})]})})})}var V$e={exports:{}},d9t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",f9t=d9t,h9t=f9t;function H$e(){}function q$e(){}q$e.resetWarningCache=H$e;var p9t=function(){function e(r,i,s,o,a,l){if(l!==h9t){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:q$e,resetWarningCache:H$e};return n.PropTypes=n,n};V$e.exports=p9t();var m9t=V$e.exports;const Age=mu(m9t),Ige={};function hq(e,t){e===void 0&&(e=Ige),t===void 0&&(t=Ige);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var g9t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),y9t=Object.prototype.hasOwnProperty;function pq(e,t){return y9t.call(e,t)}function mq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)pq(e,i)&&r.push(i);return r}function Bu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function gq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function e1(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function W$e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function yq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(yq(e[t]))return!0}else if(typeof e=="object"){for(var r=mq(e),i=r.length,s=0;s<i;s++)if(yq(e[r[s]]))return!0}}return!1}function kge(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var G$e=function(e){g9t(t,e);function t(n,r,i,s,o){var a=this.constructor,l=e.call(this,kge(n,{name:r,index:i,operation:s,tree:o}))||this;return l.name=r,l.index=i,l.operation=s,l.tree=o,Object.setPrototypeOf(l,a.prototype),l.message=kge(n,{name:r,index:i,operation:s,tree:o}),l}return t}(Error),rs=G$e,v9t=Bu,zw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=F$(n,this.path);r&&(r=Bu(r));var i=z1(n,{op:"remove",path:this.from}).removed;return z1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=F$(n,this.from);return z1(n,{op:"add",path:this.path,value:Bu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:WI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},b9t={add:function(e,t,n){return gq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:zw.move,copy:zw.copy,test:zw.test,_get:zw._get};function F$(e,t){if(t=="")return e;var n={op:"_get",path:t};return z1(e,n),n.value}function z1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):j$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=F$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=WI(e,t.value),o.test===!1)throw new rs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new rs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Bu(e));var a=t.path||"",l=a.split("/"),u=e,c=1,d=l.length,f=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=j$;;){if(h=l[c],h&&h.indexOf("~")!=-1&&(h=W$e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&l[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&f===void 0&&(u[h]===void 0?f=l.slice(0,c).join("/"):c==d-1&&(f=t.path),f!==void 0&&p(t,0,e,f)),c++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!gq(h))throw new rs("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);gq(h)&&(h=~~h)}if(c>=d){if(n&&t.op==="add"&&h>u.length)throw new rs("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=b9t[t.op].call(t,u,h,e);if(o.test===!1)throw new rs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=d){var o=zw[t.op].call(t,u,h,e);if(o.test===!1)throw new rs("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(u=u[h],n&&c<d&&(!u||typeof u!="object"))throw new rs("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function K4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new rs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Bu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=z1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function _9t(e,t,n){var r=z1(e,t);if(r.test===!1)throw new rs("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function j$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new rs("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(zw[e.op]){if(typeof e.path!="string")throw new rs("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new rs('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new rs("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new rs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&yq(e.value))throw new rs("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new rs("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new rs("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=Y$e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new rs("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new rs("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function Y$e(e,t,n){try{if(!Array.isArray(e))throw new rs("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)K4(Bu(t),Bu(e),n||!0);else{n=n||j$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof rs)return i;throw i}}function WI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!WI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!WI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const w9t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:rs,_areEquals:WI,applyOperation:z1,applyPatch:K4,applyReducer:_9t,deepClone:v9t,getValueByPointer:F$,validate:Y$e,validator:j$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var yte=new WeakMap,E9t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),x9t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function S9t(e){return yte.get(e)}function T9t(e,t){return e.observers.get(t)}function C9t(e,t){e.observers.delete(t.callback)}function A9t(e,t){t.unobserve()}function I9t(e,t){var n=[],r,i=S9t(e);if(!i)i=new E9t(e),yte.set(e,i);else{var s=T9t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Bu(e),t){r.callback=t,r.next=null;var o=function(){vq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){vq(r),clearTimeout(r.next),C9t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new x9t(t,r)),r}function vq(e,t){t===void 0&&(t=!1);var n=yte.get(e.object);vte(n.value,e.object,e.patches,"",t),e.patches.length&&K4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function vte(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=mq(t),o=mq(e),a=!1,l=o.length-1;l>=0;l--){var u=o[l],c=e[u];if(pq(t,u)&&!(t[u]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof c=="object"&&c!=null&&typeof d=="object"&&d!=null&&Array.isArray(c)===Array.isArray(d)?vte(c,d,n,r+"/"+e1(u),i):c!==d&&(i&&n.push({op:"test",path:r+"/"+e1(u),value:Bu(c)}),n.push({op:"replace",path:r+"/"+e1(u),value:Bu(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+e1(u),value:Bu(c)}),n.push({op:"remove",path:r+"/"+e1(u)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var l=0;l<s.length;l++){var u=s[l];!pq(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+e1(u),value:Bu(t[u])})}}}function k9t(e,t,n){n===void 0&&(n=!1);var r=[];return vte(e,t,r,"",n),r}const R9t=Object.freeze(Object.defineProperty({__proto__:null,compare:k9t,generate:vq,observe:I9t,unobserve:A9t},Symbol.toStringTag,{value:"Module"}));Object.assign({},w9t,R9t,{JsonPatchError:G$e,deepClone:Bu,escapePathComponent:e1,unescapePathComponent:W$e});var P9t=/("(?:[^\\"]|\\.)*")|[:,]/g,N9t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,l,u){var c,d,f,h,p,m,g,y,b,_,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-l.length-u,w.length<=g&&(b=w.replace(P9t,function(x,S){return S||x+" "}),b.length<=g))return b;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=l+r,f=[],d=0,Array.isArray(a))for(_="[",c="]",g=a.length;d<g;d++)f.push(o(a[d],y,d===g-1?0:1)||"null");else for(_="{",c="}",m=Object.keys(a),g=m.length;d<g;d++)h=m[d],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(d===g-1?0:1)),E!==void 0&&f.push(p+E);if(f.length>0)return[_,r+f.join(`,
`+y),c].join(`
`+l)}return w}(t,"",0)};const ez=mu(N9t);function bu(e,t,n){return e.fields=t||[],e.fname=n,e}function fs(e){return e==null?null:e.fname}function Pa(e){return e==null?null:e.fields}function K$e(e){return e.length===1?O9t(e[0]):D9t(e)}const O9t=e=>function(t){return t[e]},D9t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Ve(e){throw Error(e)}function wp(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,l;e=e+"";function u(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(l=e[a],l==="\\")s+=e.substring(o,a++),o=a;else if(l===r)u(),r=null,i=-1;else{if(r)continue;o===i&&l==='"'||o===i&&l==="'"?(o=a+1,r=l):l==="."&&!i?a>o?u():o=a+1:l==="["?(a>o&&u(),i=o=a+1):l==="]"&&(i||Ve("Access path missing open bracket: "+e),i>0&&u(),i=0,o=a+1)}return i&&Ve("Access path missing closing bracket: "+e),r&&Ve("Access path missing closing quote: "+e),a>o&&(a++,u()),t}function td(e,t,n){const r=wp(e);return e=r.length===1?r[0]:e,bu((n&&n.get||K$e)(r),[e],t||e)}const OR=td("id"),Fa=bu(e=>e,[],"identity"),l0=bu(()=>0,[],"zero"),GS=bu(()=>1,[],"one"),nd=bu(()=>!0,[],"true"),Bg=bu(()=>!1,[],"false");function M9t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const X$e=0,bte=1,_te=2,Q$e=3,J$e=4;function wte(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:M9t,r=e||X$e;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=bte&&n(t||"error","ERROR",arguments),this},warn(){return r>=_te&&n(t||"warn","WARN",arguments),this},info(){return r>=Q$e&&n(t||"log","INFO",arguments),this},debug(){return r>=J$e&&n(t||"log","DEBUG",arguments),this}}}var We=Array.isArray;function bt(e){return e===Object(e)}const Rge=e=>e!=="__proto__";function YS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=$9t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;KS(r,s,i[s],o)}return r},{})}function KS(e,t,n,r){if(!Rge(t))return;let i,s;if(bt(n)&&!We(n)){s=bt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?KS(s,i,n[i]):Rge(i)&&(s[i]=n[i])}else e[t]=n}function $9t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function cr(e){return e[e.length-1]}function Ia(e){return e==null||e===""?null:+e}const Z$e=e=>t=>e*Math.exp(t),eLe=e=>t=>Math.log(e*t),tLe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),nLe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,B$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function X4(e,t,n,r){const i=n(e[0]),s=n(cr(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function rLe(e,t){return X4(e,t,Ia,Fa)}function iLe(e,t){var n=Math.sign(e[0]);return X4(e,t,eLe(n),Z$e(n))}function sLe(e,t,n){return X4(e,t,B$(n),B$(1/n))}function oLe(e,t,n){return X4(e,t,tLe(n),nLe(n))}function Q4(e,t,n,r,i){const s=r(e[0]),o=r(cr(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function Ete(e,t,n){return Q4(e,t,n,Ia,Fa)}function xte(e,t,n){const r=Math.sign(e[0]);return Q4(e,t,n,eLe(r),Z$e(r))}function z$(e,t,n,r){return Q4(e,t,n,B$(r),B$(1/r))}function Ste(e,t,n,r){return Q4(e,t,n,tLe(r),nLe(r))}function aLe(e){return 1+~~(new Date(e).getMonth()/3)}function lLe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function wt(e){return e!=null?We(e)?e:[e]:[]}function uLe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function On(e){return typeof e=="function"}const L9t="descending";function Tte(e,t,n){n=n||{},t=wt(t)||[];const r=[],i=[],s={},o=n.comparator||F9t;return wt(e).forEach((a,l)=>{a!=null&&(r.push(t[l]===L9t?-1:1),i.push(a=On(a)?a:td(a,null,n)),(Pa(a)||[]).forEach(u=>s[u]=1))}),i.length===0?null:bu(o(i,r),Object.keys(s))}const J4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),F9t=(e,t)=>e.length===1?j9t(e[0],t[0]):B9t(e,t,e.length),j9t=(e,t)=>function(n,r){return J4(e(n),e(r))*t},B9t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=J4(s(r),s(i));return o*t[a]});function ja(e){return On(e)?e:()=>e}function Cte(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function Nn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function tp(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function cLe(e,t){const n=e.length;let r=-1,i,s,o,a,l;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=l=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,l=r))}return[a,l]}const z9t=Object.prototype.hasOwnProperty;function Vt(e,t){return z9t.call(e,t)}const tO={};function XS(e){let t={},n;function r(s){return Vt(t,s)&&t[s]!==tO}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===tO&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=tO),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const l=t[a];l!==tO&&(!n||!n(l))&&(s[a]=l,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function dLe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],l=cr(e),u;l<a&&(u=a,a=l,l=u),u=Math.abs(t-a);const c=Math.abs(l-t);return u<c&&u<=o?r:c<=o?i:s}function ht(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Nn(r,n)}function Uw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function lv(e){return typeof e=="boolean"}function W0(e){return Object.prototype.toString.call(e)==="[object Date]"}function fLe(e){return e&&On(e[Symbol.iterator])}function xr(e){return typeof e=="number"}function hLe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Et(e){return typeof e=="string"}function Ate(e,t,n){e&&(e=t?wt(e).map(a=>a.replace(/\\(.)/g,"$1")):wt(e));const r=e&&e.length,i=n&&n.get||K$e,s=a=>i(t?[a]:wp(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(l){return""+a(l)}}else{const a=e.map(s);o=function(l){let u=""+a[0](l),c=0;for(;++c<r;)u+="|"+a[c](l);return u}}return bu(o,e,"key")}function pLe(e,t){const n=e[0],r=cr(e),i=+t;return i?i===1?r:n+i*(r-n):n}const U9t=1e4;function mLe(e){e=+e||U9t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Vt(t,o)||Vt(n,o),get:o=>Vt(t,o)?t[o]:Vt(n,o)?s(o,n[o]):void 0,set:(o,a)=>Vt(t,o)?t[o]=a:s(o,a)}}function gLe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,l=0,u=0;for(;a<i&&l<s;++u)o[u]=e(t[a],n[l])>0?n[l++]:t[a++];for(;a<i;++a,++u)o[u]=t[a];for(;l<s;++l,++u)o[u]=n[l];return o}function i2(e,t){let n="";for(;--t>=0;)n+=e;return n}function yLe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?i2(i,o)+s:r==="center"?i2(i,~~(o/2))+s+i2(i,Math.ceil(o/2)):s+i2(i,o)}function DR(e){return e&&cr(e)-e[0]||0}function ut(e){return We(e)?"["+e.map(ut)+"]":bt(e)||Et(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Ite(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const V9t=e=>xr(e)||W0(e)?e:Date.parse(e);function kte(e,t){return t=t||V9t,e==null||e===""?null:t(e)}function Rte(e){return e==null||e===""?null:e+""}function Tf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function vLe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Yg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function H9t(e){return e}function q9t(e){if(e==null)return H9t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,l){l||(t=n=0);var u=2,c=a.length,d=new Array(c);for(d[0]=(t+=a[0])*r+s,d[1]=(n+=a[1])*i+o;u<c;)d[u]=a[u],++u;return d}}function W9t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function G9t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Pge(e,n)})}:Pge(e,t)}function Pge(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=bLe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function bLe(e,t){var n=q9t(e.transform),r=e.arcs;function i(c,d){d.length&&d.pop();for(var f=r[c<0?~c:c],h=0,p=f.length;h<p;++h)d.push(n(f[h],h));c<0&&W9t(d,p)}function s(c){return n(c)}function o(c){for(var d=[],f=0,h=c.length;f<h;++f)i(c[f],d);return d.length<2&&d.push(d[0]),d}function a(c){for(var d=o(c);d.length<4;)d.push(d[0]);return d}function l(c){return c.map(a)}function u(c){var d=c.type,f;switch(d){case"GeometryCollection":return{type:d,geometries:c.geometries.map(u)};case"Point":f=s(c.coordinates);break;case"MultiPoint":f=c.coordinates.map(s);break;case"LineString":f=o(c.arcs);break;case"MultiLineString":f=c.arcs.map(o);break;case"Polygon":f=l(c.arcs);break;case"MultiPolygon":f=c.arcs.map(l);break;default:return null}return{type:d,coordinates:f}}return u(t)}function Y9t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(u,c){var d=e.arcs[u<0?~u:u],f;d.length<3&&!d[1][0]&&!d[1][1]&&(f=t[++o],t[o]=u,t[c]=f)}),t.forEach(function(u){var c=a(u),d=c[0],f=c[1],h,p;if(h=i[d])if(delete i[h.end],h.push(u),h.end=f,p=r[f]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[f])if(delete r[h.start],h.unshift(u),h.start=d,p=i[d]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[u],r[h.start=d]=i[h.end=f]=h});function a(u){var c=e.arcs[u<0?~u:u],d=c[0],f;return e.transform?(f=[0,0],c.forEach(function(h){f[0]+=h[0],f[1]+=h[1]})):f=c[c.length-1],u<0?[f,d]:[d,f]}function l(u,c){for(var d in u){var f=u[d];delete c[f.start],delete f.start,delete f.end,f.forEach(function(h){n[h<0?~h:h]=1}),s.push(f)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||s.push([u])}),s}function K9t(e){return bLe(e,X9t.apply(this,arguments))}function X9t(e,t,n){var r,i,s;if(arguments.length>1)r=Q9t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:Y9t(e,r)}}function Q9t(e,t,n){var r=[],i=[],s;function o(d){var f=d<0?~d:d;(i[f]||(i[f]=[])).push({i:d,g:s})}function a(d){d.forEach(o)}function l(d){d.forEach(a)}function u(d){d.forEach(l)}function c(d){switch(s=d,d.type){case"GeometryCollection":d.geometries.forEach(c);break;case"LineString":a(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return c(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}const Yo="year",cu="quarter",Na="month",Qs="week",du="date",Aa="day",np="dayofyear",ac="hours",lc="minutes",rd="seconds",Cf="milliseconds",Pte=[Yo,cu,Na,Qs,du,Aa,np,ac,lc,rd,Cf],tz=Pte.reduce((e,t,n)=>(e[t]=1+n,e),{});function Nte(e){const t=wt(e).slice(),n={};return t.length||Ve("Missing time unit."),t.forEach(i=>{Vt(tz,i)?n[i]=1:Ve(`Invalid time unit: ${i}.`)}),(n[Qs]||n[Aa]?1:0)+(n[cu]||n[Na]||n[du]?1:0)+(n[np]?1:0)>1&&Ve(`Incompatible time units: ${e}`),t.sort((i,s)=>tz[i]-tz[s]),t}const J9t={[Yo]:"%Y ",[cu]:"Q%q ",[Na]:"%b ",[du]:"%d ",[Qs]:"W%U ",[Aa]:"%a ",[np]:"%j ",[ac]:"%H:00",[lc]:"00:%M",[rd]:":%S",[Cf]:".%L",[`${Yo}-${Na}`]:"%Y-%m ",[`${Yo}-${Na}-${du}`]:"%Y-%m-%d ",[`${ac}-${lc}`]:"%H:%M"};function _Le(e,t){const n=Nn({},J9t,t),r=Nte(e),i=r.length;let s="",o=0,a,l;for(o=0;o<i;)for(a=r.length;a>o;--a)if(l=r.slice(o,a).join("-"),n[l]!=null){s+=n[l],o=a;break}return s.trim()}const c1=new Date;function Ote(e){return c1.setFullYear(e),c1.setMonth(0),c1.setDate(1),c1.setHours(0,0,0,0),c1}function wLe(e){return xLe(new Date(e))}function ELe(e){return bq(new Date(e))}function xLe(e){return wm.count(Ote(e.getFullYear())-1,e)}function bq(e){return SS.count(Ote(e.getFullYear())-1,e)}function _q(e){return Ote(e).getDay()}function Z9t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function SLe(e){return CLe(new Date(e))}function TLe(e){return wq(new Date(e))}function CLe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return j0.count(t-1,e)}function wq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return TS.count(t-1,e)}function Eq(e){return c1.setTime(Date.UTC(e,0,1)),c1.getUTCDay()}function ezt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function ALe(e,t,n,r,i){const s=t||1,o=cr(e),a=(y,b,_)=>(_=_||y,tzt(n[_],r[_],y===o&&s,b)),l=new Date,u=Tf(e),c=u[Yo]?a(Yo):ja(2012),d=u[Na]?a(Na):u[cu]?a(cu):l0,f=u[Qs]&&u[Aa]?a(Aa,1,Qs+Aa):u[Qs]?a(Qs,1):u[Aa]?a(Aa,1):u[du]?a(du,1):u[np]?a(np,1):GS,h=u[ac]?a(ac):l0,p=u[lc]?a(lc):l0,m=u[rd]?a(rd):l0,g=u[Cf]?a(Cf):l0;return function(y){l.setTime(+y);const b=c(l);return i(b,d(l),f(l,b),h(l),p(l),m(l),g(l))}}function tzt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Cx(e,t,n){return t+e*7-(n+6)%7}const nzt={[Yo]:e=>e.getFullYear(),[cu]:e=>Math.floor(e.getMonth()/3),[Na]:e=>e.getMonth(),[du]:e=>e.getDate(),[ac]:e=>e.getHours(),[lc]:e=>e.getMinutes(),[rd]:e=>e.getSeconds(),[Cf]:e=>e.getMilliseconds(),[np]:e=>xLe(e),[Qs]:e=>bq(e),[Qs+Aa]:(e,t)=>Cx(bq(e),e.getDay(),_q(t)),[Aa]:(e,t)=>Cx(1,e.getDay(),_q(t))},rzt={[cu]:e=>3*e,[Qs]:(e,t)=>Cx(e,0,_q(t))};function ILe(e,t){return ALe(e,t||1,nzt,rzt,Z9t)}const izt={[Yo]:e=>e.getUTCFullYear(),[cu]:e=>Math.floor(e.getUTCMonth()/3),[Na]:e=>e.getUTCMonth(),[du]:e=>e.getUTCDate(),[ac]:e=>e.getUTCHours(),[lc]:e=>e.getUTCMinutes(),[rd]:e=>e.getUTCSeconds(),[Cf]:e=>e.getUTCMilliseconds(),[np]:e=>CLe(e),[Qs]:e=>wq(e),[Aa]:(e,t)=>Cx(1,e.getUTCDay(),Eq(t)),[Qs+Aa]:(e,t)=>Cx(wq(e),e.getUTCDay(),Eq(t))},szt={[cu]:e=>3*e,[Qs]:(e,t)=>Cx(e,0,Eq(t))};function kLe(e,t){return ALe(e,t||1,izt,szt,ezt)}const ozt={[Yo]:Gh,[cu]:cI.every(3),[Na]:cI,[Qs]:SS,[du]:wm,[Aa]:wm,[np]:wm,[ac]:I6,[lc]:C6,[rd]:lm,[Cf]:rx},azt={[Yo]:Yh,[cu]:dI.every(3),[Na]:dI,[Qs]:TS,[du]:j0,[Aa]:j0,[np]:j0,[ac]:k6,[lc]:A6,[rd]:lm,[Cf]:rx};function QS(e){return ozt[e]}function JS(e){return azt[e]}function RLe(e,t,n){return e?e.offset(t,n):void 0}function PLe(e,t,n){return RLe(QS(e),t,n)}function NLe(e,t,n){return RLe(JS(e),t,n)}function OLe(e,t,n,r){return e?e.range(t,n,r):void 0}function DLe(e,t,n,r){return OLe(QS(e),t,n,r)}function MLe(e,t,n,r){return OLe(JS(e),t,n,r)}const s2=1e3,o2=s2*60,a2=o2*60,Z4=a2*24,lzt=Z4*7,Nge=Z4*30,xq=Z4*365,$Le=[Yo,Na,du,ac,lc,rd,Cf],l2=$Le.slice(0,-1),u2=l2.slice(0,-1),c2=u2.slice(0,-1),uzt=c2.slice(0,-1),czt=[Yo,Qs],Oge=[Yo,Na],LLe=[Yo],rC=[[l2,1,s2],[l2,5,5*s2],[l2,15,15*s2],[l2,30,30*s2],[u2,1,o2],[u2,5,5*o2],[u2,15,15*o2],[u2,30,30*o2],[c2,1,a2],[c2,3,3*a2],[c2,6,6*a2],[c2,12,12*a2],[uzt,1,Z4],[czt,1,lzt],[Oge,1,Nge],[Oge,3,3*Nge],[LLe,1,xq]];function FLe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(DR(t))/n;let i=wS(a=>a[2]).right(rC,r),s,o;return i===rC.length?(s=LLe,o=sy(t[0]/xq,t[1]/xq,n)):i?(i=rC[r/rC[i-1][2]<rC[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=$Le,o=Math.max(sy(t[0],t[1],n),1)),{units:s,step:o}}function d2(e){const t={};return n=>t[n]||(t[n]=e(n))}function dzt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=fzt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function fzt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function jLe(e){const t=d2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=ab(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return dzt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=ab(o??",f");const a=sy(r,i,s),l=Math.max(Math.abs(r),Math.abs(i));let u;if(o.precision==null)switch(o.type){case"s":return isNaN(u=dAe(a,l))||(o.precision=u),n(o,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=fAe(a,l))||(o.precision=u-(o.type==="e"));break}case"f":case"%":{isNaN(u=cAe(a))||(o.precision=u-(o.type==="%")*2);break}}return t(o)}}}let Sq;BLe();function BLe(){return Sq=jLe({format:Mh,formatPrefix:UQ})}function zLe(e){return jLe(uAe(e))}function U$(e){return arguments.length?Sq=zLe(e):Sq}function Dge(e,t,n){n=n||{},bt(n)||Ve(`Invalid time multi-format specifier: ${n}`);const r=t(rd),i=t(lc),s=t(ac),o=t(du),a=t(Qs),l=t(Na),u=t(cu),c=t(Yo),d=e(n[Cf]||".%L"),f=e(n[rd]||":%S"),h=e(n[lc]||"%I:%M"),p=e(n[ac]||"%I %p"),m=e(n[du]||n[Aa]||"%a %d"),g=e(n[Qs]||"%b %d"),y=e(n[Na]||"%B"),b=e(n[cu]||"%B"),_=e(n[Yo]||"%Y");return w=>(r(w)<w?d:i(w)<w?f:s(w)<w?h:o(w)<w?p:l(w)<w?a(w)<w?m:g:c(w)<w?u(w)<w?y:b:_)(w)}function ULe(e){const t=d2(e.format),n=d2(e.utcFormat);return{timeFormat:r=>Et(r)?t(r):Dge(t,QS,r),utcFormat:r=>Et(r)?n(r):Dge(n,JS,r),timeParse:d2(e.parse),utcParse:d2(e.utcParse)}}let Tq;VLe();function VLe(){return Tq=ULe({format:nJ,parse:p0,utcFormat:tR,utcParse:SIe})}function HLe(e){return ULe(bIe(e))}function GI(e){return arguments.length?Tq=HLe(e):Tq}const Cq=(e,t)=>Nn({},e,t);function qLe(e,t){const n=e?zLe(e):U$(),r=t?HLe(t):GI();return Cq(n,r)}function Dte(e,t){const n=arguments.length;return n&&n!==2&&Ve("defaultLocale expects either zero or two arguments."),n?Cq(U$(e),GI(t)):Cq(U$(),GI())}function hzt(){return BLe(),VLe(),Dte()}const pzt=/^(data:|([A-Za-z]+:)?\/\/)/,mzt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,gzt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Mge="file://";function yzt(e,t){return n=>({options:n||{},sanitize:bzt,load:vzt,fileAccess:!!t,file:_zt(t),http:Ezt(e)})}async function vzt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function bzt(e,t){t=Nn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=mzt.test(e.replace(gzt,""));(e==null||typeof e!="string"||!a)&&Ve("Sanitize failure, invalid URI: "+ut(e));const l=pzt.test(e);return(o=t.baseURL)&&!l&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Mge))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(Mge.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function _zt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):wzt}async function wzt(){Ve("No file system access.")}function Ezt(e){return e?async function(t,n){const r=Nn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?On(s[i])?s[i]():s.text():Ve(s.status+""+s.statusText)}:xzt}async function xzt(){Ve("No HTTP fetch method available.")}const Szt=e=>e!=null&&e===e,Tzt=e=>e==="true"||e==="false"||e===!0||e===!1,Czt=e=>!Number.isNaN(Date.parse(e)),WLe=e=>!Number.isNaN(+e)&&!(e instanceof Date),Azt=e=>WLe(e)&&Number.isInteger(+e),Aq={boolean:Ite,integer:Ia,number:Ia,date:kte,string:Rte,unknown:Fa},nO=[Tzt,Azt,WLe,Czt],Izt=["boolean","integer","number","date"];function GLe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=nO.length,i=nO.map((s,o)=>o+1);for(let s=0,o=0,a,l;s<n;++s)for(l=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&Szt(l)&&!nO[a](l)&&(i[a]=0,++o,o===nO.length))return"string";return Izt[i.reduce((s,o)=>s===0?o:s,0)-1]}function YLe(e,t){return t.reduce((n,r)=>(n[r]=GLe(e,r),n),{})}function $ge(e){const t=function(n,r){const i={delimiter:e};return Mte(n,r?Nn(r,i):i)};return t.responseType="text",t}function Mte(e,t){return t.header&&(e=t.header.map(ut).join(t.delimiter)+`
`+e),oAe(t.delimiter).parse(e+"")}Mte.responseType="text";function kzt(e){return typeof Buffer=="function"&&On(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function $te(e,t){const n=t&&t.property?td(t.property):Fa;return bt(e)&&!kzt(e)?Rzt(n(e),t):n(JSON.parse(e))}$te.responseType="json";function Rzt(e,t){return!We(e)&&fLe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const Pzt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function KLe(e,t){let n,r,i,s;return e=$te(e,t),t&&t.feature?(n=G9t,i=t.feature):t&&t.mesh?(n=K9t,i=t.mesh,s=Pzt[t.filter]):Ve("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Ve("Invalid TopoJSON object: "+i),r&&r.features||[r]}KLe.responseType="json";const AD={dsv:Mte,csv:$ge(","),tsv:$ge("	"),json:$te,topojson:KLe};function Lte(e,t){return arguments.length>1?(AD[e]=t,this):Vt(AD,e)?AD[e]:null}function XLe(e){const t=Lte(e);return t&&t.responseType||"text"}function QLe(e,t,n,r){t=t||{};const i=Lte(t.type||"json");return i||Ve("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Nzt(e,t.parse,n,r),Vt(e,"columns")&&delete e.columns,e}function Nzt(e,t,n,r){if(!e.length)return;const i=GI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,l,u,c,d;t==="auto"&&(t=YLe(e,s)),s=Object.keys(t);const f=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!Aq[p])throw Error("Illegal format pattern: "+h+":"+p);return Aq[p]});for(l=0,c=e.length,d=s.length;l<c;++l)for(o=e[l],u=0;u<d;++u)a=s[u],o[a]=f[u](o[a])}const ej=yzt(typeof fetch<"u"&&fetch,null);function tj(e){const t=e||Fa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function ID(e,t){try{await t(e)}catch(n){e.error(n)}}const JLe=Symbol("vega_id");let Ozt=1;function nj(e){return!!(e&&zt(e))}function zt(e){return e[JLe]}function ZLe(e,t){return e[JLe]=t,e}function $r(e){const t=e===Object(e)?e:{data:e};return zt(t)?t:ZLe(t,Ozt++)}function Fte(e){return rj(e,$r({}))}function rj(e,t){for(const n in e)t[n]=e[n];return t}function eFe(e,t){return ZLe(t,zt(e))}function s_(e,t){return e?t?(n,r)=>e(n,r)||zt(t(n))-zt(t(r)):(n,r)=>e(n,r)||zt(n)-zt(r):null}function tFe(e){return e&&e.constructor===o_}function o_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:o_,insert(a){const l=wt(a),u=l.length;for(let c=0;c<u;++c)e.push(l[c]);return this},remove(a){const l=On(a)?r:t,u=wt(a),c=u.length;for(let d=0;d<c;++d)l.push(u[d]);return this},modify(a,l,u){const c={field:l,value:ja(u)};return On(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,l){return On(a)?i.push({filter:a,field:l}):n.push({tuple:a,field:l}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,l){const u={},c={};let d,f,h,p,m,g;for(d=0,f=l.length;d<f;++d)u[zt(l[d])]=1;for(d=0,f=t.length;d<f;++d)m=t[d],u[zt(m)]=-1;for(d=0,f=r.length;d<f;++d)p=r[d],l.forEach(b=>{p(b)&&(u[zt(b)]=-1)});for(d=0,f=e.length;d<f;++d)m=e[d],g=zt(m),u[g]?u[g]=1:a.add.push($r(e[d]));for(d=0,f=l.length;d<f;++d)m=l[d],u[zt(m)]<0&&a.rem.push(m);function y(b,_,w){w?b[_]=w(b):a.encode=_,o||(c[zt(b)]=b)}for(d=0,f=n.length;d<f;++d)h=n[d],m=h.tuple,p=h.field,g=u[zt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(d=0,f=i.length;d<f;++d)h=i[d],p=h.filter,l.forEach(b=>{p(b)&&u[zt(b)]>0&&y(b,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?l.filter(b=>u[zt(b)]>0):l.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const kD="_:mod:_";function ij(){Object.defineProperty(this,kD,{writable:!0,value:{}})}ij.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[kD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=We(n)?1+n.length:-1),i},modified(e,t){const n=this[kD];if(arguments.length){if(We(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[kD]={},this}};let Dzt=0;const Mzt="pulse",$zt=new ij,Lzt=1,Fzt=2;function ui(e,t,n,r){this.id=++Dzt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Lge(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}ui.prototype={targets(){return this._targets||(this._targets=tj(OR))},set(e){return this.value!==e?(this.value=e,1):0},skip:Lge(Lzt),modified:Lge(Fzt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new ij,i=this._argops=this._argops||[],s=[];let o,a,l,u;const c=(d,f,h)=>{h instanceof ui?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:d,index:f})):r.set(d,f,h)};for(o in e)if(a=e[o],o===Mzt)wt(a).forEach(d=>{d instanceof ui?d!==this&&(d.targets().add(this),s.push(d)):Ve("Pulse parameters must be operator instances.")}),this.source=a;else if(We(a))for(r.set(o,-1,Array(l=a.length)),u=0;u<l;++u)c(o,u,a[u]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||$zt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function jzt(e,t,n,r){let i=1,s;return e instanceof ui?s=e:e&&e.prototype instanceof ui?s=new e:On(e)?s=new ui(null,e):(i=0,s=new ui(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function Bzt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let zzt=0;function sj(e,t,n){this.id=++zzt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function zg(e,t,n){return new sj(e,t,n)}sj.prototype={_filter:nd,_apply:Fa,targets(){return this._targets||(this._targets=tj(OR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=zg(e);return this.targets().add(t),t},apply(e){const t=zg(null,e);return this.targets().add(t),t},merge(){const e=zg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=zg();return this.targets().add(zg(null,null,Cte(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(zg(null,null,()=>n=!0)),t.targets().add(zg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=nd,this._targets=null}};function Uzt(e,t,n,r){const i=this,s=zg(n,r),o=function(u){u.dataflow=i;try{s.receive(u)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=wt(e);const l=a.length;for(let u=0;u<l;++u)a[u].addEventListener(t,o);return s}function Vzt(e,t){const n=this.locale();return QLe(e,t,n.timeParse,n.utcParse)}function Hzt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function qzt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:XLe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function Wzt(e,t,n){const r=this,i=r._pending||Gzt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(nd).insert(s.data||[])),i.done(),s}function Gzt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const Yzt={skip:!0};function Kzt(e,t,n,r,i){return(e instanceof ui?Qzt:Xzt)(this,e,t,n,r,i),this}function Xzt(e,t,n,r,i,s){const o=Nn({},s,Yzt);let a,l;On(n)||(n=ja(n)),r===void 0?a=u=>e.touch(n(u)):On(r)?(l=new ui(null,r,i,!1),a=u=>{l.evaluate(u);const c=n(u),d=l.value;tFe(d)?e.pulse(c,d,s):e.update(c,d,o)}):a=u=>e.update(n(u),r,o),t.apply(a)}function Qzt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new ui(null,Jzt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function Jzt(e,t){return t=On(t)?t:ja(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function Zzt(e){e.rank=++this._rank}function e7t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Ve("Cycle detected in dataflow graph.")}const V$={},ah=1,Kg=2,qp=4,t7t=ah|Kg,Fge=ah|qp,q_=ah|Kg|qp,jge=8,iC=16,Bge=32,zge=64;function G0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function nz(e,t){const n=[];return Yg(e,t,r=>n.push(r)),n}function Uge(e,t){const n={};return e.visit(t,r=>{n[zt(r)]=1}),r=>n[zt(r)]?null:r}function rO(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}G0.prototype={StopPropagation:V$,ADD:ah,REM:Kg,MOD:qp,ADD_REM:t7t,ADD_MOD:Fge,ALL:q_,REFLOW:jge,SOURCE:iC,NO_SOURCE:Bge,NO_FIELDS:zge,fork(e){return new G0(this.dataflow).init(this,e)},clone(){const e=this.fork(q_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(q_|iC)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new G0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&zge)&&(n.fields=e.fields),t&ah?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Kg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&qp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&Bge?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||q_;return t&ah&&this.add.length||t&Kg&&this.rem.length||t&qp&&this.mod.length},reflow(e){if(e)return this.fork(q_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(qp,Uge(this,ah))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return We(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?We(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&ah&&(n.addF=rO(n.addF,t)),e&Kg&&(n.remF=rO(n.remF,t)),e&qp&&(n.modF=rO(n.modF,t)),e&iC&&(n.srcF=rO(n.srcF,t)),n},materialize(e){e=e||q_;const t=this;return e&ah&&t.addF&&(t.add=nz(t.add,t.addF),t.addF=null),e&Kg&&t.remF&&(t.rem=nz(t.rem,t.remF),t.remF=null),e&qp&&t.modF&&(t.mod=nz(t.mod,t.modF),t.modF=null),e&iC&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&iC)return Yg(n.source,n.srcF,r),n;e&ah&&Yg(n.add,n.addF,r),e&Kg&&Yg(n.rem,n.remF,r),e&qp&&Yg(n.mod,n.modF,r);const i=n.source;if(e&jge&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Yg(i,Uge(n,Fge),r):Yg(i,n.srcF,r))}return n}};function jte(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const l in o.fields)a[l]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}ht(jte,G0,{fork(e){const t=new G0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?We(e)?e.some(r=>n[r]):n[e]:0},filter(){Ve("MultiPulse does not support filtering.")},materialize(){Ve("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function n7t(e,t,n){const r=this,i=[];if(r._pulse)return nFe(r);if(r._pending&&await r._pending,t&&await ID(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new G0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=tj(OR);let o=0,a,l,u;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}l=a.run(r._getPulse(a,e)),l.then?l=await l:l.async&&(i.push(l.async),l=V$),l!==V$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),u=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const c=r._postrun.sort((d,f)=>f.priority-d.priority);r._postrun=[];for(let d=0;d<c.length;++d)await ID(r,c[d].callback)}return n&&await ID(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(d=>{try{d(r)}catch(f){r.error(f)}})})),r}async function r7t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function i7t(e,t,n){return this._pulse?nFe(this):(this.evaluate(e,t,n),this)}function s7t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function nFe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function o7t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function a7t(e,t){const n=e.source,r=this._clock;return n&&We(n)?new jte(this,r,n.map(i=>i.pulse),t):this._input[e.id]||l7t(this._pulse,n&&n.pulse)}function l7t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==V$&&(e.source=t.source),e)}const Bte={skip:!1,force:!1};function u7t(e,t){const n=t||Bte;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function c7t(e,t,n){const r=n||Bte;return(e.set(t)||r.force)&&this.touch(e,r),this}function d7t(e,t,n){this.touch(e,n||Bte);const r=new G0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function f7t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),rFe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,h7t(t,0,e)):r=n,r}}}function rFe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function h7t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,rFe(e,r,t,n)}function SE(){this.logger(wte()),this.logLevel(bte),this._clock=0,this._rank=0,this._locale=Dte();try{this._loader=ej()}catch{}this._touched=tj(OR),this._input={},this._pulse=null,this._heap=f7t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function sC(e){return function(){return this._log[e].apply(this,arguments)}}SE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:sC("error"),warn:sC("warn"),info:sC("info"),debug:sC("debug"),logLevel:sC("level"),cleanThreshold:1e4,add:jzt,connect:Bzt,rank:Zzt,rerank:e7t,pulse:d7t,touch:u7t,update:c7t,changeset:o_,ingest:Hzt,parse:Vzt,preload:Wzt,request:qzt,events:Uzt,on:Kzt,evaluate:n7t,run:i7t,runAsync:r7t,runAfter:s7t,_enqueue:o7t,_getPulse:a7t};function Me(e,t){ui.call(this,e,null,t)}ht(Me,ui,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Ax={};function iFe(e){const t=sFe(e);return t&&t.Definition||null}function sFe(e){return e=e&&e.toLowerCase(),Vt(Ax,e)?Ax[e]:null}function*oFe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function zte(e,t,n){const r=Float64Array.from(oFe(e,n));return r.sort(bm),t.map(i=>T2e(r,i))}function Ute(e,t){return zte(e,[.25,.5,.75],t)}function Vte(e,t){const n=e.length,r=byt(e,t),i=Ute(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function aFe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,l,u,c,d,f;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,d=0,f=e.steps.length;d<f&&e.steps[d]<c;++d);a=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,a=Math.max(u,Math.pow(n,Math.round(Math.log(h)/r)-l));Math.ceil(h/a)>t;)a*=n;for(d=0,f=i.length;d<f;++d)c=a/i[d],c>=u&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var id=Math.random;function p7t(e){id=e}function lFe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(oFe(e,r)),s=i.length,o=t;let a,l,u,c;for(u=0,c=Array(o);u<o;++u){for(a=0,l=0;l<s;++l)a+=i[~~(id()*s)];c[u]=a/s}return c.sort(bm),[oE(c,n/2),oE(c,1-n/2)]}function uFe(e,t,n,r){r=r||(f=>f);const i=e.length,s=new Float64Array(i);let o=0,a=1,l=r(e[0]),u=l,c=l+t,d;for(;a<i;++a){if(d=r(e[a]),d>=c){for(u=(l+u)/2;o<a;++o)s[o]=u;c=d+t,l=d}u=d}for(u=(l+u)/2;o<a;++o)s[o]=u;return n?m7t(s,t+t/4):s}function m7t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function g7t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function y7t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*id())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const cFe=Math.sqrt(2*Math.PI),v7t=Math.SQRT2;let oC=NaN;function oj(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(oC===oC)n=oC,oC=NaN;else{do n=id()*2-1,r=id()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,oC=r*s}return e+n*t}function Hte(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*cFe)}function aj(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function lj(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*v7t*b7t(2*e-1)}function b7t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function qte(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>oj(n,r),pdf:s=>Hte(s,n,r),cdf:s=>aj(s,n,r),icdf:s=>lj(s,n,r)};return i.mean(e).stdev(t)}function Wte(e,t){const n=qte();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=Vte(e)),i):t},sample(){return e[~~(id()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function Gte(e,t){return e=e||0,t=t??1,Math.exp(e+oj()*t)}function Yte(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*cFe*e)}function Kte(e,t,n){return aj(Math.log(e),t,n)}function Xte(e,t,n){return Math.exp(lj(e,t,n))}function dFe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>Gte(n,r),pdf:s=>Yte(s,n,r),cdf:s=>Kte(s,n,r),icdf:s=>Xte(s,n,r)};return i.mean(e).stdev(t)}function fFe(e,t){let n=0,r;function i(o){const a=[];let l=0,u;for(u=0;u<n;++u)l+=a[u]=o[u]==null?1:+o[u];for(u=0;u<n;++u)a[u]/=l;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=id();let a=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(o<l){a=e[u];break}return a.sample()},pdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].pdf(o);return a},cdf(o){let a=0,l=0;for(;l<n;++l)a+=r[l]*e[l].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Qte(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*id()}function Jte(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Zte(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function ene(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function hFe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Qte(n,r),pdf:s=>Jte(s,n,r),cdf:s=>Zte(s,n,r),icdf:s=>ene(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function tne(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function MR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function uj(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,l=0,u=0,c,d,f;for(f of e)s[a]=c=+t(f),o[a]=d=+n(f),++a,l+=(c-l)/a,u+=(d-u)/a;for(a=0;a<i;++a)s[a]-=l,o[a]-=u;return[s,o,l,u]}function $R(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function ZS(e,t,n,r,i){let s=0,o=0;return $R(e,t,n,(a,l)=>{const u=l-i(a),c=l-r;s+=u*u,o+=c*c}),1-s/o}function nne(e,t,n){let r=0,i=0,s=0,o=0,a=0;$R(e,t,n,(c,d)=>{++a,r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=MR(r,i,s,o),u=c=>l[0]+l[1]*c;return{coef:l,predict:u,rSquared:ZS(e,t,n,i,u)}}function pFe(e,t,n){let r=0,i=0,s=0,o=0,a=0;$R(e,t,n,(c,d)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(d-i)/a,s+=(c*d-s)/a,o+=(c*c-o)/a});const l=MR(r,i,s,o),u=c=>l[0]+l[1]*Math.log(c);return{coef:l,predict:u,rSquared:ZS(e,t,n,i,u)}}function mFe(e,t,n){const[r,i,s,o]=uj(e,t,n);let a=0,l=0,u=0,c=0,d=0,f,h,p;$R(e,t,n,(b,_)=>{f=r[d++],h=Math.log(_),p=f*_,a+=(_*h-a)/d,l+=(p-l)/d,u+=(p*h-u)/d,c+=(f*p-c)/d});const[m,g]=MR(l/o,a/o,u/o,c/o),y=b=>Math.exp(m+g*(b-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:ZS(e,t,n,o,y)}}function gFe(e,t,n){let r=0,i=0,s=0,o=0,a=0,l=0;$R(e,t,n,(d,f)=>{const h=Math.log(d),p=Math.log(f);++l,r+=(h-r)/l,i+=(p-i)/l,s+=(h*p-s)/l,o+=(h*h-o)/l,a+=(f-a)/l});const u=MR(r,i,s,o),c=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:c,rSquared:ZS(e,t,n,a,c)}}function rne(e,t,n){const[r,i,s,o]=uj(e,t,n),a=r.length;let l=0,u=0,c=0,d=0,f=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,l+=(g-l)/h,u+=(g*p-u)/h,c+=(g*g-c)/h,d+=(p*m-d)/h,f+=(g*m-f)/h;const y=c-l*l,b=l*y-u*u,_=(f*l-d*u)/b,w=(d*y-f*u)/b,E=-_*l,x=S=>(S=S-s,_*S*S+w*S+E+o);return{coef:[E-w*s+_*s*s+o,w-2*_*s,_],predict:x,rSquared:ZS(e,t,n,o,x)}}function yFe(e,t,n,r){if(r===0)return tne(e,t,n);if(r===1)return nne(e,t,n);if(r===2)return rne(e,t,n);const[i,s,o,a]=uj(e,t,n),l=i.length,u=[],c=[],d=r+1;let f,h,p,m,g;for(f=0;f<d;++f){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f)*s[p];for(u.push(m),g=new Float64Array(d),h=0;h<d;++h){for(p=0,m=0;p<l;++p)m+=Math.pow(i[p],f+h);g[h]=m}c.push(g)}c.push(u);const y=w7t(c),b=_=>{_-=o;let w=a+y[0]+y[1]*_+y[2]*_*_;for(f=3;f<d;++f)w+=y[f]*Math.pow(_,f);return w};return{coef:_7t(d,y,-o,a),predict:b,rSquared:ZS(e,t,n,a,b)}}function _7t(e,t,n,r){const i=Array(e);let s,o,a,l;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],l=1,i[s]+=a,o=1;o<=s;++o)l*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*l;return i[0]+=r,i}function w7t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Vge=2,Hge=1e-12;function vFe(e,t,n,r){const[i,s,o,a]=uj(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),c=new Float64Array(l),d=new Float64Array(l),f=new Float64Array(l).fill(1);for(let h=-1;++h<=Vge;){const p=[0,u-1];for(let g=0;g<l;++g){const y=i[g],b=p[0],_=p[1],w=y-i[b]>i[_]-y?b:_;let E=0,x=0,S=0,C=0,A=0;const R=1/Math.abs(i[w]-y||1);for(let k=b;k<=_;++k){const $=i[k],D=s[k],M=E7t(Math.abs(y-$)*R)*f[k],B=$*M;E+=M,x+=B,S+=D*M,C+=D*B,A+=$*B}const[P,L]=MR(x/E,S/E,C/E,A/E);c[g]=P+L*y,d[g]=Math.abs(s[g]-c[g]),x7t(i,g+1,p)}if(h===Vge)break;const m=C2e(d);if(Math.abs(m)<Hge)break;for(let g=0,y,b;g<l;++g)y=d[g]/(6*m),f[g]=y>=1?Hge:(b=1-y*y)*b}return S7t(i,c,o,a)}function E7t(e){return(e=1-e*e*e)*e*e}function x7t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function S7t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,l=[],u;for(;o<i;++o)u=e[o]+n,l[0]===u?l[1]+=(t[o]-l[1])/++a:(a=0,l[1]+=r,l=[u,t[o]],s.push(l));return l[1]+=r,s}const T7t=.5*Math.PI/180;function cj(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,l=a/r,u=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)u.push(i(s+m/n*a));return u.push(i(o)),u}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let d=u[0],f=c[c.length-1];const h=1/a,p=C7t(d[1],c);for(;f;){const m=i((d[0]+f[0])/2);m[0]-d[0]>=l&&A7t(d,m,f,h,p)>T7t?c.push(m):(d=f,u.push(f),c.pop()),f=c[c.length-1]}return u}function C7t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function A7t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function I7t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Iq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:I7t(e)}function bFe(e,t,n){return n||e+(t?"_"+t:"")}const rz=()=>{},k7t={init:rz,add:rz,rem:rz,idx:0},YI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},LR=Object.keys(YI).filter(e=>e!=="__count__");function R7t(e,t){return(n,r)=>Nn({name:e,aggregate_param:r,out:n||e},k7t,t)}[...LR,"__count__"].forEach(e=>{YI[e]=R7t(e,YI[e])});function _Fe(e,t,n){return YI[e](n,t)}function wFe(e,t){return e.idx-t.idx}function P7t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=YI[i]())})};return e.forEach(n),Object.values(t).sort(wFe)}function N7t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function O7t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function D7t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function M7t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function EFe(e,t){const n=t||Fa,r=P7t(e),i=e.slice().sort(wFe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=N7t,s.prototype.add=O7t,s.prototype.rem=D7t,s.prototype.set=M7t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function ine(e){this._key=e?td(e):zt,this.reset()}const ra=ine.prototype;ra.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ra.add=function(e){this._add.push(e)};ra.rem=function(e){this._rem.push(e)};ra.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,l,u;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,l=0;a<r;++a)o[n(u=e[a])]?o[n(u)]=0:s[l++]=u;return this._rem=[],this._add=s};ra.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Vt(n,s)||(n[s]=1,++i);return i};ra.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=cLe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ra.argmin=function(e){return this.extent(e)[0]||{}};ra.argmax=function(e){return this.extent(e)[1]||{}};ra.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};ra.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};ra.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=Ute(this.values(),e),this._get=e),this._q};ra.q1=function(e){return this.quartile(e)[0]};ra.q2=function(e){return this.quartile(e)[1]};ra.q3=function(e){return this.quartile(e)[2]};ra.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=lFe(this.values(),1e3,.05,e),this._get=e),this._ci};ra.ci0=function(e){return this.ci(e)[0]};ra.ci1=function(e){return this.ci(e)[1]};function Ty(e){Me.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Ty.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:LR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ht(Ty,Me,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let l,u,c,d;for(l in a)for(c=a[l].tuple,u=0;u<i;++u)r[u][d=c[n[u]]]=d}s(e._prev),s(t);function o(a,l,u){const c=n[u],d=r[u++];for(const f in d){const h=a?a+"|"+f:f;l[c]=d[f],u<i?o(h,l,u):t[h]||e.cell(h,l)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(b){const _=wt(Pa(b)),w=_.length;let E=0,x;for(;E<w;++E)r[x=_[E]]||(r[x]=1,t.push(x))}this._dims=wt(e.groupby),this._dnames=this._dims.map(b=>{const _=fs(b);return i(b),n.push(_),_}),this.cellkey=e.key?e.key:Iq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],l=e.as||[],u=s.length,c={};let d,f,h,p,m,g,y;for(u!==o.length&&Ve("Unmatched number of fields and aggregate ops."),y=0;y<u;++y){if(d=s[y],f=o[y],h=a[y]||null,d==null&&f!=="count"&&Ve("Null aggregate field specified."),m=fs(d),g=bFe(f,m,l[y]),n.push(g),f==="count"){this._counts.push(g);continue}p=c[m],p||(i(d),p=c[m]=[],p.field=d,this._measures.push(p)),f!=="count"&&(this._countOnly=!1),p.push(_Fe(f,h,g))}return this._measures=this._measures.map(b=>EFe(b,b.field)),Object.create(null)},cellkey:Iq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new ine),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?eFe(t.tuple,s):$r(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let l,u,c,d;if(r)for(u in r)l=r[u],(!i||l.num)&&o.push(l.tuple);for(c=0,d=this._alen;c<d;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,d=this._mlen;c<d;++c)l=n[c],(l.num===0&&i?o:a).push(this.celltuple(l)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const $7t=1e-14;function sne(e){Me.call(this,null,e)}sne.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ht(sne,Me,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],l=o[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(Pa(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?c=>{const d=r(c);c[a]=d,c[l]=d==null?null:i+s*(1+(d-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=aFe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const l=function(u){let c=Ia(t(u));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor($7t+(c-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=bu(l,Pa(t),e.name||"bin_"+fs(t))}});function xFe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:l=>s.push(l),remove:l=>o[r(l)]=++a,size:()=>i.length,data:(l,u)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),u&&l&&i.sort(l),s.length&&(i=l?gLe(l,i,s.sort(l)):i.concat(s),s=[]),i)}}function one(e){Me.call(this,[],e)}one.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ht(one,Me,{transform(e,t){const n=t.fork(t.ALL),r=xFe(zt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(s_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function SFe(e){ui.call(this,null,L7t,e)}ht(SFe,ui);function L7t(e){return this.value&&!e.modified()?this.value:Tte(e.fields,e.orders)}function ane(e){Me.call(this,null,e)}ane.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function F7t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ht(ane,Me,{transform(e,t){const n=d=>f=>{for(var h=F7t(a(f),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||d(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,l=e.as||["text","count"],u=n(d=>i[d]=1+(i[d]||0)),c=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,c)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,l,u;for(a in n)l=r[a],u=n[a]||0,!l&&u?(r[a]=l=$r({}),l[i]=a,l[s]=u,o.add.push(l)):u===0?(l&&o.rem.push(l),n[a]=null,r[a]=null):l[s]!==u&&(l[s]=u,o.mod.push(l));return o.modifies(t)}});function lne(e){Me.call(this,null,e)}lne.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ht(lne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=j7t(a,i,s,e.filter||nd)):n.mod=a,n.source=this.value,n.modifies(r)}});function j7t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,l,u;a<o;++a)for(s[t]=u=e[a],l=0;l<o;++l)s[n]=e[l],r(s)&&(i.push($r(s)),s={},s[t]=u);return i}const qge={kde:Wte,mixture:fFe,normal:qte,lognormal:dFe,uniform:hFe},B7t="distributions",Wge="function",z7t="field";function TFe(e,t){const n=e[Wge];Vt(qge,n)||Ve("Unknown distribution function: "+n);const r=qge[n]();for(const i in e)i===z7t?r.data((e.from||t()).map(e[i])):i===B7t?r[i](e[i].map(s=>TFe(s,t))):typeof r[i]===Wge&&r[i](e[i]);return r}function une(e){Me.call(this,null,e)}const CFe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],U7t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:CFe},{name:"weights",type:"number",array:!0}]};une.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:CFe.concat(U7t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ht(une,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=TFe(e.distribution,V7t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Ve("Invalid density method: "+o),!e.extent&&!r.data&&Ve("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],l=e.extent||tp(r.data()),u=cj(o,l,i,s).map(c=>{const d={};return d[a[0]]=c[0],d[a[1]]=c[1],$r(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function V7t(e){return()=>e.materialize(e.SOURCE).source}function AFe(e,t){return e?e.map((n,r)=>t[r]||fs(n)):null}function cne(e,t,n){const r=[],i=d=>d(l);let s,o,a,l,u,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)l=e[o],u=t.map(i),c=s[u],c||(s[u]=c=[],c.dims=u,r.push(c)),c.push(n(l));return r}const IFe="bin";function dne(e){Me.call(this,null,e)}dne.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:IFe}]};const H7t=(e,t)=>DR(tp(e,t))/30;ht(dne,Me,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=cne(t.source,e.groupby,Fa),i=e.smooth||!1,s=e.field,o=e.step||H7t(n,s),a=s_((p,m)=>s(p)-s(m)),l=e.as||IFe,u=r.length;let c=1/0,d=-1/0,f=0,h;for(;f<u;++f){const p=r[f].sort(a);h=-1;for(const m of uFe(p,o,i,s))m<c&&(c=m),m>d&&(d=m),p[++h][l]=m}return this.value={start:c,stop:d,step:o},t.reflow(!0).modifies(l)}});function kFe(e){ui.call(this,null,q7t,e),this.modified(!0)}ht(kFe,ui);function q7t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:bu(n=>t(n,e),Pa(t),fs(t))}function fne(e){Me.call(this,[void 0,void 0],e)}fne.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ht(fne,Me,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const l=Ia(r(a));l!=null&&(l<s&&(s=l),l>o&&(o=l))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=fs(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function hne(e,t){ui.call(this,e),this.parent=t,this.count=0}ht(hne,ui,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function dj(e){Me.call(this,{},e),this._keys=XS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ht(dj,Me,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Vt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new hne(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=zt(l),c=s.get(u);c!==void 0&&(s.delete(u),a(c).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);s.set(zt(l),u),a(u).add(l)}),o||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=zt(l),c=s.get(u),d=r(l);c===d?a(d).mod(l):(s.set(u,d),a(c).rem(l),a(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{a(s.get(zt(l))).mod(l)}),o&&t.visit(t.REFLOW,l=>{const u=zt(l),c=s.get(u),d=r(l);c!==d&&(s.set(u,d),a(c).rem(l),a(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function RFe(e){ui.call(this,null,W7t,e)}ht(RFe,ui);function W7t(e){return this.value&&!e.modified()?this.value:We(e.name)?wt(e.name).map(t=>td(t)):td(e.name,e.as)}function pne(e){Me.call(this,XS(),e)}pne.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ht(pne,Me,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const f=zt(d);r.has(f)?r.delete(f):o.push(d)}),t.visit(t.ADD,d=>{l(d,e)?s.push(d):r.set(zt(d),1)});function c(d){const f=zt(d),h=l(d,e),p=r.get(f);h&&p?(r.delete(f),s.push(d)):!h&&!p?(r.set(f,1),o.push(d)):u&&h&&!p&&a.push(d)}return t.visit(t.MOD,c),e.modified()&&(u=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function mne(e){Me.call(this,[],e)}mne.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ht(mne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=AFe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const l=r.map(p=>p(a)),u=l.reduce((p,m)=>Math.max(p,m.length),0);let c=0,d,f,h;for(;c<u;++c){for(f=Fte(a),d=0;d<o;++d)f[i[d]]=(h=l[d][c])==null?null:h;s&&(f[s]=c),n.add.push(f)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function gne(e){Me.call(this,[],e)}gne.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ht(gne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(fs),s=e.as||["key","value"],o=s[0],a=s[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let c=0,d;c<l;++c)d=Fte(u),d[o]=i[c],d[a]=r[c](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(s)}});function yne(e){Me.call(this,null,e)}yne.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ht(yne,Me,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function PFe(e){Me.call(this,[],e)}ht(PFe,Me,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,l;if(s>0){for(o=[];--s>=0;)o.push(l=$r(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const iO={value:"value",median:C2e,mean:Iyt,min:eI,max:Nh},G7t=[];function vne(e){Me.call(this,[],e)}vne.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Y7t(e){var t=e.method||iO.value,n;if(iO[t]==null)Ve("Unrecognized imputation method: "+t);else return t===iO.value?(n=e.value!==void 0?e.value:0,()=>n):iO[t]}function K7t(e){const t=e.field;return n=>n?t(n):NaN}ht(vne,Me,{transform(e,t){var n=t.fork(t.ALL),r=Y7t(e),i=K7t(e),s=fs(e.field),o=fs(e.key),a=(e.groupby||[]).map(fs),l=X7t(t.source,e.groupby,e.key,e.keyvals),u=[],c=this.value,d=l.domain.length,f,h,p,m,g,y,b,_,w,E;for(g=0,_=l.length;g<_;++g)for(f=l[g],p=f.values,h=NaN,b=0;b<d;++b)if(f[b]==null){for(m=l.domain[b],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(f,i):h,u.push($r(E))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=u,n}});function X7t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},l={},u,c,d,f,h,p,m,g;for(o.forEach((y,b)=>a[y]=b+1),f=0,m=e.length;f<m;++f)g=e[f],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(u=t?t.map(i):G7t)+"",(d=l[c])||(d=l[c]=[],s.push(d),d.values=u),d[h-1]=g;return s.domain=o,s}function bne(e){Ty.call(this,e)}bne.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:LR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ht(bne,Ty,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{Nn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function _ne(e){Me.call(this,null,e)}_ne.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ht(_ne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=cne(r,e.groupby,e.field),s=(e.groupby||[]).map(fs),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let c=e.extent,d=e.steps||e.minsteps||25,f=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Ve("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=tp(r,e.field)),d=f=e.steps||f),i.forEach(h=>{const p=Wte(h,o)[a],m=e.counts?h.length:1,g=c||tp(h);cj(p,g,d,f).forEach(y=>{const b={};for(let _=0;_<s.length;++_)b[s[_]]=h.dims[_];b[l[0]]=y[0],b[l[1]]=y[1]*m,u.push($r(b))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function NFe(e){ui.call(this,null,Q7t,e)}ht(NFe,ui);function Q7t(e){return this.value&&!e.modified()?this.value:Ate(e.fields,e.flat)}function OFe(e){Me.call(this,[],e),this._pending=null}ht(OFe,Me,{transform(e,t){const n=t.dataflow;return this._pending?iz(this,t,this._pending):J7t(e)?t.StopPropagation:e.values?iz(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=wt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>iz(this,t,wt(r.data)))}});function J7t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function iz(e,t,n){n.forEach($r);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function wne(e){Me.call(this,{},e)}wne.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ht(wne,Me,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let l=o?t.SOURCE:t.ADD,u=t,c=e.as,d,f,h;return i?(f=i.length,a>1&&!c&&Ve('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*f&&Ve('The "as" parameter has too few output field names.'),c=c||i.map(fs),d=function(p){for(var m=0,g=0,y,b;m<a;++m)if(b=r.get(n[m](p)),b==null)for(y=0;y<f;++y,++g)p[c[g]]=s;else for(y=0;y<f;++y,++g)p[c[g]]=i[y](b)}):(c||Ve("Missing output field names."),d=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?u=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),l|=h?t.MOD:0),t.visit(l,d),u.modifies(c)}});function DFe(e){ui.call(this,null,Z7t,e)}ht(DFe,ui);function Z7t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function MFe(e){ui.call(this,null,eUt,e)}ht(MFe,ui);function eUt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function $Fe(e){Me.call(this,null,e)}ht($Fe,Me,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Ene(e){Ty.call(this,e)}Ene.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:LR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ht(Ene,Ty,{_transform:Ty.prototype.transform,transform(e,t){return this._transform(tUt(e,t),t)}});function tUt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=Pa(n).concat(Pa(r)),o=rUt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>nUt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function nUt(e,t,n,r){return bu(i=>t(i)===e?n(i):NaN,r,e+"")}function rUt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(J4),t?i.slice(0,t):i}function LFe(e){dj.call(this,e)}ht(LFe,dj,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(zt(s),n,t,s);return(e.modified("field")||r&&t.modified(Pa(r)))&&Ve("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add($r(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function xne(e){Me.call(this,null,e)}xne.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ht(xne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=AFe(e.fields,e.as||[]),s=r?(a,l)=>iUt(a,l,r,i):rj;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const l=zt(a);n.rem.push(o[l]),o[l]=null}),t.visit(t.ADD,a=>{const l=s(a,$r({}));o[zt(a)]=l,n.add.push(l)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[zt(a)]))}),n}});function iUt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function FFe(e){Me.call(this,null,e)}ht(FFe,Me,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Sne(e){Me.call(this,null,e)}Sne.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const sUt=1e-14;ht(Sne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=cne(i,e.groupby,e.field),o=(e.groupby||[]).map(fs),a=[],l=e.step||.01,u=e.probs||Fu(l/2,1-sUt,l),c=u.length;return s.forEach(d=>{const f=zte(d,u);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=d.dims[m];p[r[0]]=u[h],p[r[1]]=f[h],a.push($r(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function jFe(e){Me.call(this,null,e)}ht(jFe,Me,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=zt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=Fte(i);r[zt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[zt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Tne(e){Me.call(this,[],e),this.count=0}Tne.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ht(Tne,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,d)=>(c[zt(d)]=1,c),{});let o=this.value,a=this.count,l=0;function u(c){let d,f;o.length<i?o.push(c):(f=~~((a+1)*id()),f<o.length&&f>=l&&(d=o[f],s[zt(d)]&&n.rem.push(d),o[f]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const d=zt(c);s[d]&&(s[d]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[zt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(l=a=o.length,t.visit(t.SOURCE,c=>{s[zt(c)]||u(c)}),l=-1),r&&o.length>i){const c=o.length-i;for(let d=0;d<c;++d)s[zt(o[d])]=-1,n.rem.push(o[d]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[zt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=o.filter(c=>!s[zt(c)])),this.count=a,this.value=n.source=o,n}});function Cne(e){Me.call(this,null,e)}Cne.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ht(Cne,Me,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Fu(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,$r(s)}),n.add=t.add.concat(this.value),n}});function BFe(e){Me.call(this,null,e),this.modified(!0)}ht(BFe,Me,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Ane(e){Me.call(this,null,e)}const zFe=["unit0","unit1"];Ane.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Pte,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:zFe}]};ht(Ane,Me,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?JS:QS)(s.unit).offset,a=e.as||zFe,l=a[0],u=a[1],c=s.step;let d=s.start||1/0,f=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Pa(n)))&&(t=t.reflow(!0),h=t.SOURCE,d=1/0,f=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[l]=null,r&&(p[u]=null)):(p[l]=g=y=s(m),r&&(p[u]=y=o(g,c)),g<d&&(d=g),y>f&&(f=y))}),s.start=d,s.stop=f,t.modifies(r?a:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:FLe({extent:e.extent||tp(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=Nte(r),o=this.value||{},a=(n?kLe:ILe)(s,i);return a.unit=cr(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function UFe(e){Me.call(this,XS(),e)}ht(UFe,Me,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function VFe(e){Me.call(this,null,e)}ht(VFe,Me,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(s_(e.sort)):t.source).map(e.field))}});function oUt(e,t,n,r){const i=KI[e](t,n);return{init:i.init||l0,update:function(s,o){o[r]=i.next(s)}}}const KI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=KI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Ve("ntile num must be greater than zero.");const n=KI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Ve("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=aUt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function aUt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const lUt=Object.keys(KI);function HFe(e){const t=wt(e.ops),n=wt(e.fields),r=wt(e.params),i=wt(e.aggregate_params),s=wt(e.as),o=this.outputs=[],a=this.windows=[],l={},u={},c=[],d=[];let f=!0;function h(p){wt(Pa(p)).forEach(m=>l[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],b=i[m]||null,_=fs(g),w=bFe(p,_,s[m]);if(h(g),o.push(w),Vt(KI,p))a.push(oUt(p,g,y,w));else{if(g==null&&p!=="count"&&Ve("Null aggregate field specified."),p==="count"){c.push(w);return}f=!1;let E=u[_];E||(E=u[_]=[],E.field=g,d.push(E)),E.push(_Fe(p,b,w))}}),(c.length||d.length)&&(this.cell=uUt(d,c,f)),this.inputs=Object.keys(l)}const qFe=HFe.prototype;qFe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};qFe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function uUt(e,t,n){e=e.map(l=>EFe(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new ine;return r.add=function(l){if(r.num+=1,!n){a&&a.add(l);for(let u=0;u<i;++u)s[u].add(s[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){a&&a.rem(l);for(let u=0;u<i;++u)s[u].rem(s[u].get(l),l)}},r.set=function(l){let u,c;for(a&&a.values(),u=0,c=t.length;u<c;++u)l[t[u]]=r.num;if(!n)for(u=0,c=s.length;u<c;++u)s[u].set(l)},r.init=function(){r.num=0,a&&a.reset();for(let l=0;l<i;++l)s[l].init()},r}function Ine(e){Me.call(this,{},e),this._mlen=0,this._mods=[]}Ine.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:lUt.concat(LR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ht(Ine,Me,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=s_(e.sort),i=Iq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new HFe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,l=this._mlen;a<l;++a)cUt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=xFe(zt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function cUt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),l=a.length,u=s?wS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||ja(-1)};t.init();for(let d=0;d<l;++d)dUt(c,o,d,l),s&&fUt(c,u),t.update(c,a[d])}function dUt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function fUt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const hUt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Ty,bin:sne,collect:one,compare:SFe,countpattern:ane,cross:lne,density:une,dotbin:dne,expression:kFe,extent:fne,facet:dj,field:RFe,filter:pne,flatten:mne,fold:gne,formula:yne,generate:PFe,impute:vne,joinaggregate:bne,kde:_ne,key:NFe,load:OFe,lookup:wne,multiextent:DFe,multivalues:MFe,params:$Fe,pivot:Ene,prefacet:LFe,project:xne,proxy:FFe,quantile:Sne,relay:jFe,sample:Tne,sequence:Cne,sieve:BFe,subflow:hne,timeunit:Ane,tupleindex:UFe,values:VFe,window:Ine},Symbol.toStringTag,{value:"Module"}));function Y0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const pUt=()=>typeof Image<"u"?Image:null;function kne(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const mUt="identity",Ix="linear",Jm="log",FR="pow",jR="sqrt",fj="symlog",wb="time",Eb="utc",Vh="sequential",eT="diverging",kx="quantile",hj="quantize",pj="threshold",Rne="ordinal",kq="point",WFe="band",Pne="bin-ordinal",oo="continuous",BR="discrete",zR="discretizing",md="interpolating",Nne="temporal";function gUt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function yUt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,l,u;for(i<r&&(a=r,r=i,i=a),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(s<0&&(s=l),o=l);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function One(){const e=Zk().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,l=0,u=.5;delete e.unknown;function c(){const d=t().length,f=r[1]<r[0],h=r[1-f],p=kne(d,a,l);let m=r[f-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(d-a))*u,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Fu(d).map(y=>m+i*y);return n(f?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),c()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],c()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(d){return arguments.length?(o=!!d,c()):o},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),a=l,c()):a},e.paddingInner=function(d){return arguments.length?(a=Math.max(0,Math.min(1,d)),c()):a},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),c()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),c()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const f=r[1]<r[0],h=f?n().reverse():n(),p=h.length-1;let m=+d[0],g=+d[1],y,b,_;if(!(m!==m||g!==g)&&(g<m&&(_=m,m=g,g=_),!(g<h[0]||m>r[1-f])))return y=Math.max(0,iy(h,m)-1),b=m===g?y:iy(h,g)-1,m-h[y]>s+1e-10&&++y,f&&(_=y,y=p-b,b=p-_),y>b?void 0:t().slice(y,b+1)},e.invert=function(d){const f=e.invertRange([d,d]);return f&&f[0]},e.copy=function(){return One().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(l).align(u)},c()}function GFe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return GFe(t())},e}function vUt(){return GFe(One().paddingInner(1))}var bUt=Array.prototype.map;function _Ut(e){return bUt.call(e,Ia)}const wUt=Array.prototype.slice;function YFe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(iy(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=_Ut(r),n):e.slice()},n.range=function(r){return arguments.length?(t=wUt.call(r),n):t.slice()},n.tickFormat=function(r,i){return uIe(e[0],cr(e),r??10,i)},n.copy=function(){return YFe().domain(n.domain()).range(n.range())},n}const H$=new Map,KFe=Symbol("vega_scale");function XFe(e){return e[KFe]=!0,e}function EUt(e){return e&&e[KFe]===!0}function xUt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?gUt(s):s.invertExtent?yUt(s):void 0),s.type=e,XFe(s)};return r.metadata=Tf(wt(n)),r}function Rr(e,t,n){return arguments.length>1?(H$.set(e,xUt(e,t,n)),this):QFe(e)?H$.get(e):void 0}Rr(mUt,cIe);Rr(Ix,Dc,oo);Rr(Jm,fIe,[oo,Jm]);Rr(FR,eJ,oo);Rr(jR,lwt,oo);Rr(fj,hIe,oo);Rr(wb,ox,[oo,Nne]);Rr(Eb,xEt,[oo,Nne]);Rr(Vh,iJ,[oo,md]);Rr(`${Vh}-${Ix}`,iJ,[oo,md]);Rr(`${Vh}-${Jm}`,TIe,[oo,md,Jm]);Rr(`${Vh}-${FR}`,sJ,[oo,md]);Rr(`${Vh}-${jR}`,SEt,[oo,md]);Rr(`${Vh}-${fj}`,CIe,[oo,md]);Rr(`${eT}-${Ix}`,AIe,[oo,md]);Rr(`${eT}-${Jm}`,IIe,[oo,md,Jm]);Rr(`${eT}-${FR}`,oJ,[oo,md]);Rr(`${eT}-${jR}`,TEt,[oo,md]);Rr(`${eT}-${fj}`,kIe,[oo,md]);Rr(kx,pIe,[zR,kx]);Rr(hj,mIe,zR);Rr(pj,gIe,zR);Rr(Pne,YFe,[BR,zR]);Rr(Rne,Zk,BR);Rr(WFe,One,BR);Rr(kq,vUt,BR);function QFe(e){return H$.has(e)}function a_(e,t){const n=H$.get(e);return n&&n.metadata[t]}function Dne(e){return a_(e,oo)}function Rx(e){return a_(e,BR)}function Rq(e){return a_(e,zR)}function JFe(e){return a_(e,Jm)}function SUt(e){return a_(e,Nne)}function ZFe(e){return a_(e,md)}function e6e(e){return a_(e,kx)}const TUt=["clamp","base","constant","exponent"];function t6e(e,t){const n=t[0],r=cr(t)-n;return function(i){return e(n+i*r)}}function mj(e,t,n){return MQ(Mne(t||"rgb",n),e)}function n6e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function r6e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?ja(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=Rr(s)().domain([t,n]).range([0,1]),TUt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Mne(e,t){const n=_vt[CUt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function CUt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const AUt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},IUt={accent:AEt,category10:CEt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:IEt,observable10:kEt,paired:REt,pastel1:PEt,pastel2:NEt,set1:OEt,set2:DEt,set3:MEt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function i6e(e){if(We(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function s6e(e,t){for(const n in e)$ne(n,t(e[n]))}const Gge={};s6e(IUt,i6e);s6e(AUt,e=>mj(i6e(e)));function $ne(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Gge[e]=t,this):Gge[e]}const RD="symbol",kUt="discrete",RUt="gradient",PUt=e=>We(e)?e.map(t=>String(t)):String(e),NUt=(e,t)=>e[1]-t[1],OUt=(e,t)=>t[1]-e[1];function Lne(e,t,n){let r;return xr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(DR(e.domain())/n||1)+1))),bt(t)&&(r=t.step,t=t.interval),Et(t)&&(t=e.type===wb?QS(t):e.type==Eb?JS(t):Ve("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function o6e(e,t,n){let r=e.range(),i=r[0],s=cr(r),o=NUt;if(i>s&&(r=s,s=i,i=r,o=OUt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],cr(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=a)}return t}function Fne(e,t){return e.bins?o6e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function a6e(e,t,n,r,i,s){const o=t.type;let a=PUt;if(o===wb||i===wb)a=e.timeFormat(r);else if(o===Eb||i===Eb)a=e.utcFormat(r);else if(JFe(o)){const l=e.formatFloat(r);if(s||t.bins)a=l;else{const u=l6e(t,n,!1);a=c=>u(c)?l(c):""}}else if(t.tickFormat){const l=t.domain();a=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(a=e.format(r));return a}function l6e(e,t,n){const r=Fne(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/s));return u*i<i-.5&&(u*=i),u<=o};return n?r.filter(a):a}const Pq={[kx]:"quantiles",[hj]:"thresholds",[pj]:"domain"},u6e={[kx]:"quantiles",[hj]:"domain"};function c6e(e,t){return e.bins?$Ut(e.bins):e.type===Jm?l6e(e,t,!0):Pq[e.type]?MUt(e[Pq[e.type]]()):Fne(e,t)}function DUt(e,t,n){const r=t[u6e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function MUt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function $Ut(e){const t=e.slice(0,-1);return t.max=cr(e),t}const LUt=e=>Pq[e.type]||e.bins;function d6e(e,t,n,r,i,s,o){const a=u6e[t.type]&&s!==wb&&s!==Eb?DUt(e,t,i):a6e(e,t,n,i,s,o);return r===RD&&LUt(t)?FUt(a):r===kUt?jUt(a):BUt(a)}const FUt=e=>(t,n,r)=>{const i=Yge(r[n+1],Yge(r.max,1/0)),s=Kge(t,e),o=Kge(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Yge=(e,t)=>e??t,jUt=e=>(t,n)=>n?e(t):null,BUt=e=>t=>e(t),Kge=(e,t)=>Number.isFinite(e)?t(e):null;function zUt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+cr(t),s=i-r;if(e.type===pj){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function UUt(e,t,n,r){const i=r||t.type;return Et(n)&&SUt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===wb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Eb?e.utcFormat("%A, %d %B %Y, %X UTC"):d6e(e,t,5,null,n,r,!0)}function f6e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=UUt(e,t,n.format,n.formatType);if(Rq(t.type)){const s=c6e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Rx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(cr(s))}`}}let h6e=0;function VUt(){h6e=0}const q$="p_";function jne(e){return e&&e.gradient}function p6e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?q$:"";return i||(i=e.id="gradient_"+h6e++,r==="radial"?(e.x1=Xf(e.x1,.5),e.y1=Xf(e.y1,.5),e.r1=Xf(e.r1,0),e.x2=Xf(e.x2,.5),e.y2=Xf(e.y2,.5),e.r2=Xf(e.r2,.5),s=q$):(e.x1=Xf(e.x1,0),e.y1=Xf(e.y1,0),e.x2=Xf(e.x2,1),e.y2=Xf(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Xf(e,t){return e??t}function m6e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Xge={basis:{curve:S1},"basis-closed":{curve:GEt},"basis-open":{curve:YEt},bundle:{curve:KEt,tension:"beta",value:.85},cardinal:{curve:XEt,tension:"tension",value:0},"cardinal-open":{curve:JEt,tension:"tension",value:0},"cardinal-closed":{curve:QEt,tension:"tension",value:0},"catmull-rom":{curve:ZEt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:ext,tension:"alpha",value:.5},"catmull-rom-open":{curve:txt,tension:"alpha",value:.5},linear:{curve:aJ},"linear-closed":{curve:nxt},monotone:{horizontal:ixt,vertical:rxt},natural:{curve:sxt},step:{curve:oxt},"step-after":{curve:lxt},"step-before":{curve:axt}};function Bne(e,t,n){var r=Vt(Xge,e)&&Xge[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const HUt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},qUt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,WUt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,GUt=/^((\s+,?\s*)|(,\s*))/,YUt=/^[01]/;function Px(e){const t=[];return(e.match(qUt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=HUt[s],a=KUt(s,o,r.slice(1).trim()),l=a.length;if(l<o||l&&l%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),l!==o){s==="m"&&(i=i==="M"?"L":"l");for(let u=o;u<l;u+=o)t.push([i,...a.slice(u,u+o)])}}),t}function KUt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?YUt:WUt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const l=n.slice(i).match(GUt);l!==null&&(i+=l[0].length)}return r}const Cy=Math.PI/180,XUt=1e-14,d1=Math.PI/2,_h=Math.PI*2,W_=Math.sqrt(3)/2;var sz={},oz={},g6e=[].join;function QUt(e,t,n,r,i,s,o,a,l){const u=g6e.call(arguments);if(sz[u])return sz[u];const c=o*Cy,d=Math.sin(c),f=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=f*(a-e)*.5+d*(l-t)*.5,p=f*(l-t)*.5-d*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=f/n,y=d/n,b=-d/r,_=f/r,w=g*a+y*l,E=b*a+_*l,x=g*e+y*t,S=b*e+_*t;let A=1/((x-w)*(x-w)+(S-E)*(S-E))-.25;A<0&&(A=0);let R=Math.sqrt(A);s==i&&(R=-R);const P=.5*(w+x)-R*(S-E),L=.5*(E+S)+R*(x-w),k=Math.atan2(E-L,w-P);let D=Math.atan2(S-L,x-P)-k;D<0&&s===1?D+=_h:D>0&&s===0&&(D-=_h);const M=Math.ceil(Math.abs(D/(d1+.001))),B=[];for(let z=0;z<M;++z){const U=k+z*D/M,O=k+(z+1)*D/M;B[z]=[P,L,U,O,n,r,d,f]}return sz[u]=B}function JUt(e){const t=g6e.call(e);if(oz[t])return oz[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7];const c=u*o,d=-l*a,f=l*o,h=u*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),b=.5*(s-i),_=Math.sin(b*.5),w=8/3*_*_/Math.sin(b),E=n+p-w*m,x=r+m+w*p,S=n+g,C=r+y,A=S+w*y,R=C-w*g;return oz[t]=[c*E+d*x,f*E+h*x,c*A+d*R,f*A+h*R,c*S+d*C,f*S+h*C]}const _c=["l",0,0,0,0,0,0,0];function ZUt(e,t,n){const r=_c[0]=e[0];if(r==="a"||r==="A")_c[1]=t*e[1],_c[2]=n*e[2],_c[3]=e[3],_c[4]=e[4],_c[5]=e[5],_c[6]=t*e[6],_c[7]=n*e[7];else if(r==="h"||r==="H")_c[1]=t*e[1];else if(r==="v"||r==="V")_c[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)_c[i]=(i%2==1?t:n)*e[i];return _c}function XI(e,t,n,r,i,s){var o,a=null,l=0,u=0,c=0,d=0,f,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var b=0,_=t.length;b<_;++b){switch(o=t[b],(i!==1||s!==1)&&(o=ZUt(o,i,s)),o[0]){case"l":l+=o[1],u+=o[2],e.lineTo(l+n,u+r);break;case"L":l=o[1],u=o[2],e.lineTo(l+n,u+r);break;case"h":l+=o[1],e.lineTo(l+n,u+r);break;case"H":l=o[1],e.lineTo(l+n,u+r);break;case"v":u+=o[1],e.lineTo(l+n,u+r);break;case"V":u=o[1],e.lineTo(l+n,u+r);break;case"m":l+=o[1],u+=o[2],g=l,y=u,e.moveTo(l+n,u+r);break;case"M":l=o[1],u=o[2],g=l,y=u,e.moveTo(l+n,u+r);break;case"c":f=l+o[5],h=u+o[6],c=l+o[3],d=u+o[4],e.bezierCurveTo(l+o[1]+n,u+o[2]+r,c+n,d+r,f+n,h+r),l=f,u=h;break;case"C":l=o[5],u=o[6],c=o[3],d=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,d+r,l+n,u+r);break;case"s":f=l+o[3],h=u+o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,l+o[1]+n,u+o[2]+r,f+n,h+r),c=l+o[1],d=u+o[2],l=f,u=h;break;case"S":f=o[3],h=o[4],c=2*l-c,d=2*u-d,e.bezierCurveTo(c+n,d+r,o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"q":f=l+o[3],h=u+o[4],c=l+o[1],d=u+o[2],e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"Q":f=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,f+n,h+r),l=f,u=h,c=o[1],d=o[2];break;case"t":f=l+o[1],h=u+o[2],a[0].match(/[QqTt]/)===null?(c=l,d=u):a[0]==="t"?(c=2*l-p,d=2*u-m):a[0]==="q"&&(c=2*l-c,d=2*u-d),p=c,m=d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h,c=l+o[1],d=u+o[2];break;case"T":f=o[1],h=o[2],c=2*l-c,d=2*u-d,e.quadraticCurveTo(c+n,d+r,f+n,h+r),l=f,u=h;break;case"a":Qge(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+l+n,o[7]+u+r]),l+=o[6],u+=o[7];break;case"A":Qge(e,l+n,u+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),l=o[6],u=o[7];break;case"z":case"Z":l=g,u=y,e.closePath();break}a=o}}function Qge(e,t,n,r){const i=QUt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=JUt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Jge=.5773502691896257,Zge={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,_h)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=W_*n,i=r-n*Jge,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=W_*n,i=r-n*Jge;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=W_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=W_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=W_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=W_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function y6e(e){return Vt(Zge,e)?Zge[e]:eVt(e)}var az={};function eVt(e){if(!Vt(az,e)){const t=Px(e);az[e]={draw:function(n,r){XI(n,t,0,0,Math.sqrt(r)/2)}}}return az[e]}const Dg=.448084975506;function tVt(e){return e.x}function nVt(e){return e.y}function rVt(e){return e.width}function iVt(e){return e.height}function $p(e){return typeof e=="function"?e:()=>+e}function sO(e,t,n){return Math.max(t,Math.min(e,n))}function v6e(){var e=tVt,t=nVt,n=rVt,r=iVt,i=$p(0),s=i,o=i,a=i,l=null;function u(c,d,f){var h,p=d??+e.call(this,c),m=f??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),b=Math.min(g,y)/2,_=sO(+i.call(this,c),0,b),w=sO(+s.call(this,c),0,b),E=sO(+o.call(this,c),0,b),x=sO(+a.call(this,c),0,b);if(l||(l=h=_6()),_<=0&&w<=0&&E<=0&&x<=0)l.rect(p,m,g,y);else{var S=p+g,C=m+y;l.moveTo(p+_,m),l.lineTo(S-w,m),l.bezierCurveTo(S-Dg*w,m,S,m+Dg*w,S,m+w),l.lineTo(S,C-x),l.bezierCurveTo(S,C-Dg*x,S-Dg*x,C,S-x,C),l.lineTo(p+E,C),l.bezierCurveTo(p+Dg*E,C,p,C-Dg*E,p,C-E),l.lineTo(p,m+_),l.bezierCurveTo(p,m+Dg*_,p+Dg*_,m,p+_,m),l.closePath()}if(h)return l=null,h+""||null}return u.x=function(c){return arguments.length?(e=$p(c),u):e},u.y=function(c){return arguments.length?(t=$p(c),u):t},u.width=function(c){return arguments.length?(n=$p(c),u):n},u.height=function(c){return arguments.length?(r=$p(c),u):r},u.cornerRadius=function(c,d,f,h){return arguments.length?(i=$p(c),s=d!=null?$p(d):i,a=f!=null?$p(f):i,o=h!=null?$p(h):s,u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}function b6e(){var e,t,n,r,i=null,s,o,a,l;function u(d,f,h){const p=h/2;if(s){var m=a-f,g=d-o;if(m||g){var y=Math.hypot(m,g),b=(m/=y)*l,_=(g/=y)*l,w=Math.atan2(g,m);i.moveTo(o-b,a-_),i.lineTo(d-m*p,f-g*p),i.arc(d,f,p,w-Math.PI,w),i.lineTo(o+b,a+_),i.arc(o,a,l,w,w+Math.PI)}else i.arc(d,f,p,0,_h);i.closePath()}else s=1;o=d,a=f,l=p}function c(d){var f,h=d.length,p,m=!1,g;for(i==null&&(i=g=_6()),f=0;f<=h;++f)!(f<h&&r(p=d[f],f,d))===m&&(m=!m)&&(s=0),m&&u(+e(p,f,d),+t(p,f,d),+n(p,f,d));if(g)return i=null,g+""||null}return c.x=function(d){return arguments.length?(e=d,c):e},c.y=function(d){return arguments.length?(t=d,c):t},c.size=function(d){return arguments.length?(n=d,c):n},c.defined=function(d){return arguments.length?(r=d,c):r},c.context=function(d){return arguments.length?(d==null?i=null:i=d,c):i},c}function UR(e,t){return e??t}const VR=e=>e.x||0,HR=e=>e.y||0,sVt=e=>e.width||0,oVt=e=>e.height||0,aVt=e=>(e.x||0)+(e.width||0),lVt=e=>(e.y||0)+(e.height||0),uVt=e=>e.startAngle||0,cVt=e=>e.endAngle||0,dVt=e=>e.padAngle||0,fVt=e=>e.innerRadius||0,hVt=e=>e.outerRadius||0,pVt=e=>e.cornerRadius||0,mVt=e=>UR(e.cornerRadiusTopLeft,e.cornerRadius)||0,gVt=e=>UR(e.cornerRadiusTopRight,e.cornerRadius)||0,yVt=e=>UR(e.cornerRadiusBottomRight,e.cornerRadius)||0,vVt=e=>UR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,bVt=e=>UR(e.size,64),_Vt=e=>e.size||1,gj=e=>e.defined!==!1,wVt=e=>y6e(e.shape||"circle"),EVt=HEt().startAngle(uVt).endAngle(cVt).padAngle(dVt).innerRadius(fVt).outerRadius(hVt).cornerRadius(pVt),xVt=O6().x(VR).y1(HR).y0(lVt).defined(gj),SVt=O6().y(HR).x1(VR).x0(aVt).defined(gj),TVt=cE().x(VR).y(HR).defined(gj),CVt=v6e().x(VR).y(HR).width(sVt).height(oVt).cornerRadius(mVt,gVt,yVt,vVt),AVt=WEt().type(wVt).size(bVt),IVt=b6e().x(VR).y(HR).defined(gj).size(_Vt);function zne(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function kVt(e,t){return EVt.context(e)(t)}function RVt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?SVt:xVt).curve(Bne(r,n.orient,n.tension)).context(e)(t)}function PVt(e,t){const n=t[0],r=n.interpolate||"linear";return TVt.curve(Bne(r,n.orient,n.tension)).context(e)(t)}function tT(e,t,n,r){return CVt.context(e)(t,n,r)}function NVt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function OVt(e,t){return AVt.context(e)(t)}function DVt(e,t){return IVt.context(e)(t)}var _6e=1;function w6e(){_6e=1}function Une(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+_6e++),o=i.clipping[s]||(i.clipping[s]={id:s});return On(r)?o.path=r(null):zne(n)?o.path=tT(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ls(e){this.clear(),e&&this.union(e)}Ls.prototype={clone(){return new Ls(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),l=Math.sin(e),u=t-t*a+n*l,c=n-t*l-n*a;return[a*r-l*i+u,l*r+a*i+c,a*r-l*o+u,l*r+a*o+c,a*s-l*i+u,l*s+a*i+c,a*s-l*o+u,l*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function yj(e){this.mark=e,this.bounds=this.bounds||new Ls}function vj(e){yj.call(this,e),this.items=this.items||[]}ht(vj,yj);class E6e{constructor(t){this._pending=0,this._loader=t||ej()}pending(){return this._pending}sanitizeURL(t){const n=this;return e0e(n),n._loader.sanitize(t,{context:"href"}).then(r=>(aC(n),r)).catch(()=>(aC(n),null))}loadImage(t){const n=this,r=pUt();return e0e(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Vt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>aC(n),o.onerror=()=>aC(n),o.src=s,o}).catch(i=>(aC(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function e0e(e){e._pending+=1}function aC(e){e._pending-=1}function mg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?MVt(t,r):0))}return e}function MVt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const $Vt=_h-1e-8;let bj,PD,ND,k1,Nq,OD,Oq,Dq;const v0=(e,t)=>bj.add(e,t),DD=(e,t)=>v0(PD=e,ND=t),t0e=e=>v0(e,bj.y1),n0e=e=>v0(bj.x1,e),f1=(e,t)=>Nq*e+Oq*t,h1=(e,t)=>OD*e+Dq*t,lz=(e,t)=>v0(f1(e,t),h1(e,t)),uz=(e,t)=>DD(f1(e,t),h1(e,t));function qR(e,t){return bj=e,t?(k1=t*Cy,Nq=Dq=Math.cos(k1),OD=Math.sin(k1),Oq=-OD):(Nq=Dq=1,k1=OD=Oq=0),LVt}const LVt={beginPath(){},closePath(){},moveTo:uz,lineTo:uz,rect(e,t,n,r){k1?(lz(e+n,t),lz(e+n,t+r),lz(e,t+r),uz(e,t)):(v0(e+n,t+r),DD(e,t))},quadraticCurveTo(e,t,n,r){const i=f1(e,t),s=h1(e,t),o=f1(n,r),a=h1(n,r);r0e(PD,i,o,t0e),r0e(ND,s,a,n0e),DD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=f1(e,t),a=h1(e,t),l=f1(n,r),u=h1(n,r),c=f1(i,s),d=h1(i,s);i0e(PD,o,l,c,t0e),i0e(ND,a,u,d,n0e),DD(c,d)},arc(e,t,n,r,i,s){if(r+=k1,i+=k1,PD=n*Math.cos(i)+e,ND=n*Math.sin(i)+t,Math.abs(i-r)>$Vt)v0(e-n,t-n),v0(e+n,t+n);else{const o=u=>v0(n*Math.cos(u)+e,n*Math.sin(u)+t);let a,l;if(o(r),o(i),i!==r)if(r=r%_h,r<0&&(r+=_h),i=i%_h,i<0&&(i+=_h),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=_h,a=r-r%d1,l=0;l<4&&a>i;++l,a-=d1)o(a);else for(a=r-r%d1+d1,l=0;l<4&&a<i;++l,a=a+d1)o(a)}}};function r0e(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function i0e(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let l=0,u=0,c;Math.abs(s)>XUt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),l=(-o+c)/s,u=(-o-c)/s)):l=.5*a/o,0<l&&l<1&&i(s0e(l,e,t,n,r)),0<u&&u<1&&i(s0e(u,e,t,n,r))}function s0e(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var K0=(K0=Y0(1,1))?K0.getContext("2d"):null;const Mq=new Ls;function Vne(e){return function(t,n){if(!K0)return!0;e(K0,t),Mq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=Mq;for(let a=i;a<=o;++a)for(let l=r;l<=s;++l)if(K0.isPointInPath(l,a))return!0;return!1}}function Hne(e,t){return t.contains(e.x||0,e.y||0)}function x6e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(Mq.set(n,r,n+i,r+s))}function S6e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Vw(t,n,r,i,s)}function Vw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:l}=e,u=r-t,c=i-n;let d=0,f=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-u,p=-(s-t)),g===1&&(h=u,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=l-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>f)return!1;m>d&&(d=m)}else if(h>0){if(m<d)return!1;m<f&&(f=m)}}return!0}function Nx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function kd(e,t){return e??t}function o0e(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function FVt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+kd(t.x1,.5)*r,n.y1+kd(t.y1,.5)*i,Math.max(r,i)*kd(t.r1,0),n.x1+kd(t.x2,.5)*r,n.y1+kd(t.y2,.5)*i,Math.max(r,i)*kd(t.r2,.5));else{const o=kd(t.x1,0),a=kd(t.y1,0),l=kd(t.x2,1),u=kd(t.y2,0);if(o===l||a===u||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+l*r,n.y1+u*i);else{const c=Y0(Math.ceil(r),Math.ceil(i)),d=c.getContext("2d");return d.scale(r,i),d.fillStyle=o0e(d.createLinearGradient(o,a,l,u),t.stops),d.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return o0e(s,t.stops)}function T6e(e,t,n){return jne(n)?FVt(e,n,t.bounds):n}function W$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=T6e(e,t,t.fill),!0):!1}var jVt=[];function Ox(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=T6e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||jVt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function BVt(e,t){return e.zindex-t.zindex||e.index-t.index}function qne(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(BVt)}function Af(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=qne(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function G$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=qne(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Wne(e){return function(t,n,r){Af(n,i=>{(!r||r.intersects(i.bounds))&&C6e(e,t,i,i)})}}function zVt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&C6e(e,t,n.items[0],n.items)}}function C6e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Nx(t,n),n.fill&&W$(t,n,i)&&t.fill(),n.stroke&&Ox(t,n,i)&&t.stroke()))}function _j(e){return e=e||nd,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,G$(n,a=>{const l=a.bounds;if(!(l&&!l.contains(s,o)||!l)&&e(t,a,r,i,s,o))return a})}}function WR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,l=o.stroke&&n.isPointInStroke,u,c;return l&&(u=o.strokeWidth,c=o.strokeCap,n.lineWidth=u??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||l&&n.isPointInStroke(i,s)}}function Gne(e){return _j(WR(e))}function U1(e,t){return"translate("+e+","+t+")"}function Yne(e){return"rotate("+e+")"}function UVt(e,t){return"scale("+e+","+t+")"}function A6e(e){return U1(e.x||0,e.y||0)}function VVt(e){return U1(e.x||0,e.y||0)+(e.angle?" "+Yne(e.angle):"")}function HVt(e){return U1(e.x||0,e.y||0)+(e.angle?" "+Yne(e.angle):"")+(e.scaleX||e.scaleY?" "+UVt(e.scaleX||1,e.scaleY||1):"")}function Kne(e,t,n){function r(o,a){o("transform",VVt(a)),o("d",t(null,a))}function i(o,a){return t(qR(o,a.angle),a),mg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var l=a.x||0,u=a.y||0,c=a.angle||0;o.translate(l,u),c&&o.rotate(c*=Cy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Wne(s),pick:Gne(s),isect:n||Vne(s)}}var qVt=Kne("arc",kVt);function WVt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function GVt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function YVt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Xne(e,t,n){function r(l,u){var c=u.mark.items;c.length&&l("d",t(null,c))}function i(l,u){var c=u.items;return c.length===0?l:(t(qR(l),c),mg(l,c[0]))}function s(l,u){l.beginPath(),t(l,u)}const o=WR(s);function a(l,u,c,d,f,h){var p=u.items,m=u.bounds;return!p||!p.length||m&&!m.contains(f,h)?null:(c*=l.pixelRatio,d*=l.pixelRatio,o(l,p,c,d)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:zVt(s),pick:a,isect:Hne,tip:n}}var KVt=Xne("area",RVt,WVt);function XVt(e,t){var n=t.clip;e.save(),On(n)?(e.beginPath(),n(e),e.clip()):I6e(e,t.group)}function I6e(e,t){e.beginPath(),zne(t)?tT(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function k6e(e){const t=kd(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function QVt(e,t){e("transform",A6e(t))}function R6e(e,t){const n=k6e(t);e("d",tT(null,t,n,n))}function JVt(e,t){e("class","background"),e("aria-hidden",!0),R6e(e,t)}function ZVt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?R6e(e,t):e("d","")}function eHt(e,t,n){const r=t.clip?Une(n,t,t):null;e("clip-path",r)}function tHt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),mg(e,t),e.translate(t.x||0,t.y||0)}function QI(e,t,n,r){const i=k6e(t);e.beginPath(),tT(e,t,(n||0)+i,(r||0)+i)}const nHt=WR(QI),rHt=WR(QI,!1),iHt=WR(QI,!0);function sHt(e,t,n,r){Af(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(QI(e,i,s,o),Nx(e,i),i.fill&&W$(e,i,l)&&e.fill(),i.stroke&&!a&&Ox(e,i,l)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&I6e(e,i),n&&n.translate(-s,-o),Af(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&l&&(QI(e,i,s,o),Nx(e,i),Ox(e,i,l)&&e.stroke())})}function oHt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return G$(t,l=>{let u,c,d;const f=l.bounds;if(f&&!f.contains(i,s))return;c=l.x||0,d=l.y||0;const h=c+(l.width||0),p=d+(l.height||0),m=l.clip;if(m&&(i<c||i>h||s<d||s>p))return;if(e.save(),e.translate(c,d),c=i-c,d=s-d,m&&zne(l)&&!iHt(e,l,o,a))return e.restore(),null;const g=l.strokeForeground,y=t.interactive!==!1;return y&&g&&l.stroke&&rHt(e,l,o,a)?(e.restore(),l):(u=G$(l,b=>aHt(b,c,d)?this.pick(b,n,r,c,d):null),!u&&y&&(l.fill||!g&&l.stroke)&&nHt(e,l,o,a)&&(u=l),e.restore(),u||null)})}function aHt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var lHt={type:"group",tag:"g",nested:!1,attr:QVt,bound:tHt,draw:sHt,pick:oHt,isect:x6e,content:eHt,background:JVt,foreground:ZVt},JI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Qne(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Jne(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Zne(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function wj(e,t){return e==="center"?t/2:e==="right"?t:0}function Ej(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function uHt(e,t,n){const r=Qne(t,n),i=Jne(t,r),s=Zne(t,r),o=(t.x||0)-wj(t.align,i),a=(t.y||0)-Ej(t.baseline,s),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,JI["xmlns:xlink"],"xlink:href"),e("transform",U1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function cHt(e,t){const n=t.image,r=Jne(t,n),i=Zne(t,n),s=(t.x||0)-wj(t.align,r),o=(t.y||0)-Ej(t.baseline,i);return e.set(s,o,s+r,o+i)}function dHt(e,t,n){Af(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Qne(r,this);let s=Jne(r,i),o=Zne(r,i);if(s===0||o===0)return;let a=(r.x||0)-wj(r.align,s),l=(r.y||0)-Ej(r.baseline,o),u,c,d,f;r.aspect!==!1&&(c=i.width/i.height,d=r.width/r.height,c===c&&d===d&&c!==d&&(d<c?(f=s/c,l+=(o-f)/2,o=f):(f=o*c,a+=(s-f)/2,s=f))),(i.complete||i.toDataURL)&&(Nx(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,l,s,o))})}var fHt={type:"image",tag:"image",nested:!1,attr:uHt,bound:cHt,draw:dHt,pick:_j(),isect:nd,get:Qne,xOffset:wj,yOffset:Ej},hHt=Xne("line",PVt,GVt);function pHt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",HVt(t)),e("d",t.path)}function MD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Cy,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Px(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),XI(e,l,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):XI(e,l,r,i,s,o)}function mHt(e,t){return MD(qR(e,t.angle),t)?e.set(0,0,0,0):mg(e,t,!0)}var gHt={type:"path",tag:"path",nested:!1,attr:pHt,bound:mHt,draw:Wne(MD),pick:Gne(MD),isect:Vne(MD)};function yHt(e,t){e("d",tT(null,t))}function vHt(e,t){var n,r;return mg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function a0e(e,t){e.beginPath(),tT(e,t)}var bHt={type:"rect",tag:"path",nested:!1,attr:yHt,bound:vHt,draw:Wne(a0e),pick:Gne(a0e),isect:x6e};function _Ht(e,t){e("transform",A6e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function wHt(e,t){var n,r;return mg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function P6e(e,t,n){var r,i,s,o;return t.stroke&&Ox(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function EHt(e,t,n){Af(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&P6e(e,r,i)&&(Nx(e,r),e.stroke())}})}function xHt(e,t,n,r){return e.isPointInStroke?P6e(e,t,1)&&e.isPointInStroke(n,r):!1}var SHt={type:"rule",tag:"line",nested:!1,attr:_Ht,bound:wHt,draw:EHt,pick:_j(xHt),isect:S6e},THt=Kne("shape",NVt),CHt=Kne("symbol",OVt,Hne);const l0e=mLe();var Hu={height:Ep,measureWidth:ere,estimateWidth:Y$,width:Y$,canvas:N6e};N6e(!0);function N6e(e){Hu.width=e&&K0?ere:Y$}function Y$(e,t){return O6e(Iy(e,t),Ep(e))}function O6e(e,t){return~~(.8*e.length*t)}function ere(e,t){return Ep(e)<=0||!(t=Iy(e,t))?0:D6e(t,xj(e))}function D6e(e,t){const n=`(${t}) ${e}`;let r=l0e.get(n);return r===void 0&&(K0.font=t,r=K0.measureText(e).width,l0e.set(n,r)),r}function Ep(e){return e.fontSize!=null?+e.fontSize||0:11}function Ay(e){return e.lineHeight!=null?e.lineHeight:Ep(e)+2}function AHt(e){return We(e)?e.length>1?e:e[0]:e}function GR(e){return AHt(e.lineBreak&&e.text&&!We(e.text)?e.text.split(e.lineBreak):e.text)}function tre(e){const t=GR(e);return(We(t)?t.length-1:0)*Ay(e)}function Iy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?kHt(e,n):n}function IHt(e){if(Hu.width===ere){const t=xj(e);return n=>D6e(n,t)}else if(Hu.width===Y$){const t=Ep(e);return n=>O6e(n,t)}else return t=>Hu.width(e,t)}function kHt(e,t){var n=+e.limit,r=IHt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,l;if(n-=r(i),s){for(;o<a;)l=o+a>>>1,r(t.slice(l))>n?o=l+1:a=l;return i+t.slice(o)}else{for(;o<a;)l=1+(o+a>>>1),r(t.slice(0,l))<n?o=l:a=l-1;return t.slice(0,o)+i}}function YR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function xj(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Ep(e)+"px "+YR(e,t)}function nre(e){var t=e.baseline,n=Ep(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ay(e):t==="line-bottom"?.29*n-.5*Ay(e):0)}const RHt={left:"start",center:"middle",right:"end"},fA=new Ls;function Sj(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-d1,t+=r*Math.cos(i),n+=r*Math.sin(i)),fA.x1=t,fA.y1=n,fA}function PHt(e,t){var n=t.dx||0,r=(t.dy||0)+nre(t),i=Sj(t),s=i.x1,o=i.y1,a=t.angle||0,l;e("text-anchor",RHt[t.align]||"start"),a?(l=U1(s,o)+" "+Yne(a),(n||r)&&(l+=" "+U1(n,r))):l=U1(s+n,o+r),e("transform",l)}function rre(e,t,n){var r=Hu.height(t),i=t.align,s=Sj(t),o=s.x1,a=s.y1,l=t.dx||0,u=(t.dy||0)+nre(t)-Math.round(.8*r),c=GR(t),d;if(We(c)?(r+=Ay(t)*(c.length-1),d=c.reduce((f,h)=>Math.max(f,Hu.width(t,h)),0)):d=Hu.width(t,c),i==="center"?l-=d/2:i==="right"&&(l-=d),e.set(l+=o,u+=a,l+d,u+r),t.angle&&!n)e.rotate(t.angle*Cy,o,a);else if(n===2)return e.rotatedPoints(t.angle*Cy,o,a);return e}function NHt(e,t,n){Af(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,l,u,c,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=xj(r),e.textAlign=r.align||"left",s=Sj(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Cy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+nre(r),c=GR(r),Nx(e,r),We(c))for(u=Ay(r),l=0;l<c.length;++l)d=Iy(r,c[l]),r.fill&&W$(e,r,i)&&e.fillText(d,o,a),r.stroke&&Ox(e,r,i)&&e.strokeText(d,o,a),a+=u;else d=Iy(r,c),r.fill&&W$(e,r,i)&&e.fillText(d,o,a),r.stroke&&Ox(e,r,i)&&e.strokeText(d,o,a);r.angle&&e.restore()}})}function OHt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=Sj(t),a=o.x1,l=o.y1,u=rre(fA,t,1),c=-t.angle*Cy,d=Math.cos(c),f=Math.sin(c),h=d*i-f*s+(a-d*a+f*l),p=f*i+d*s+(l-f*a-d*l);return u.contains(h,p)}function DHt(e,t){const n=rre(fA,e,2);return Vw(t,n[0],n[1],n[2],n[3])||Vw(t,n[0],n[1],n[4],n[5])||Vw(t,n[4],n[5],n[6],n[7])||Vw(t,n[2],n[3],n[6],n[7])}var MHt={type:"text",tag:"text",nested:!1,attr:PHt,bound:rre,draw:NHt,pick:_j(OHt),isect:DHt},$Ht=Xne("trail",DVt,YVt),uc={arc:qVt,area:KVt,group:lHt,image:fHt,line:hHt,path:gHt,rect:bHt,rule:SHt,shape:THt,symbol:CHt,text:MHt,trail:$Ht};function $q(e,t,n){var r=uc[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ls),e,n)}var u0e={mark:null};function M6e(e,t,n){var r=uc[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,l,u,c;if(r.nested)return o?u=s[0]:(u0e.mark=e,u=u0e),c=$q(u,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ls,o)for(a=0,l=s.length;a<l;++a)t.union($q(s[a],i,n));return e.bounds=t}const LHt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function $6e(e,t){return JSON.stringify(e,LHt,t)}function L6e(e){const t=typeof e=="string"?JSON.parse(e):e;return F6e(t)}function F6e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&F6e(n[i]);return t&&M6e(e),e}class j6e{constructor(t){arguments.length?this.root=L6e(t):(this.root=c0e({marktype:"group",name:"root",role:"frame"}),this.root.items=[new vj(this.root)])}toJSON(t){return $6e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=c0e(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function c0e(e,t){const n={bounds:new Ls,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function b0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function ire(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ys(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=b0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Nc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function B6e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Tj(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function FHt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=uc[i.marktype]).tip){for(o=Tj(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let sre=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||ej(),this._tooltip=n||jHt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=b0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=FHt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let l=s.x1+i[0]+r.left,u=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:o,height:a,left:l,top:u,right:l+o,bottom:u+a}}};function jHt(e,t,n,r){e.element().setAttribute("title",r||"")}class KR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new E6e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const BHt="keydown",zHt="keypress",UHt="keyup",z6e="dragenter",$D="dragleave",U6e="dragover",Lq="pointerdown",VHt="pointerup",K$="pointermove",LD="pointerout",V6e="pointerover",Fq="mousedown",HHt="mouseup",H6e="mousemove",X$="mouseout",q6e="mouseover",Q$="click",qHt="dblclick",WHt="wheel",W6e="mousewheel",J$="touchstart",Z$="touchmove",eL="touchend",GHt=[BHt,zHt,UHt,z6e,$D,U6e,Lq,VHt,K$,LD,V6e,Fq,HHt,H6e,X$,q6e,Q$,qHt,WHt,W6e,J$,Z$,eL],jq=K$,hA=X$,Bq=Q$;class XR extends sre{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=GHt,this.pointermove=f0e([K$,H6e],[V6e,q6e],[LD,X$]),this.dragover=f0e([U6e],[z6e],[$D]),this.pointerout=h0e([LD,X$]),this.dragleave=h0e([$D])}initialize(t,n,r){return this._canvas=t&&ire(t,"canvas"),[Q$,Fq,Lq,K$,LD,$D].forEach(i=>d0e(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(W6e,t)}pointerdown(t){this._down=this._active,this.fire(Lq,t)}mousedown(t){this._down=this._active,this.fire(Fq,t)}click(t){this._down===this._active&&(this.fire(Q$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(J$,t,!0)}touchmove(t){this.fire(Z$,t,!0)}touchend(t){this.fire(eL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===Bq&&i&&i.href?this.handleHref(n,i,i.href):(t===jq||t===hA)&&this.handleTooltip(n,i,t!==hA),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(d0e(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=Tj(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return uc[t.marktype].pick.call(this,o,t,n,r,i,s)}}const YHt=e=>e===J$||e===Z$||e===eL?[J$,Z$,eL]:[e];function d0e(e,t){YHt(t).forEach(n=>KHt(e,n))}function KHt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function f2(e,t,n){t.forEach(r=>e.fire(r,n))}function f0e(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?f2(this,e,r):((!i||!i.exit)&&f2(this,n,r),this._active=s,f2(this,t,r),f2(this,e,r))}}function h0e(e){return function(t){f2(this,e,t),this._active=null}}function XHt(){return typeof window<"u"&&window.devicePixelRatio||1}function QHt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),l=o?XHt():i;e.width=t*l,e.height=n*l;for(const u in s)a[u]=s[u];return o&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=l,a.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class tL extends KR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ls,this._tempb=new Ls}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Y0(1,1,this._options.type),t&&this._canvas&&(Nc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)QHt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Ve("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,l=JHt(i,s,o);r.save();const u=this._redraw||a.empty()?(this._redraw=!1,l.expand(1)):ZHt(r,l.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,u,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=uc[n.marktype];n.clip&&XVt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const JHt=(e,t,n)=>new Ls().set(0,0,t,n).translate(-e[0],-e[1]);function ZHt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class G6e extends sre{constructor(t,n){super(t,n);const r=this;r._hrefHandler=cz(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=cz(r,(i,s)=>{r.handleTooltip(i,s,i.type!==hA)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(Bq,this._hrefHandler),i.removeEventListener(jq,this._tooltipHandler),i.removeEventListener(hA,this._tooltipHandler)),this._svg=i=t&&ire(t,"svg"),i&&(i.addEventListener(Bq,this._hrefHandler),i.addEventListener(jq,this._tooltipHandler),i.addEventListener(hA,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:cz(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const cz=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},Y6e="aria-hidden",ore="aria-label",are="role",lre="aria-roledescription",K6e="graphics-object",ure="graphics-symbol",X6e=(e,t,n)=>({[are]:e,[lre]:t,[ore]:n||void 0}),eqt=Tf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),p0e={axis:{desc:"axis",caption:rqt},legend:{desc:"legend",caption:iqt},"title-text":{desc:"title",caption:e=>`Title text '${g0e(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${g0e(e)}'`}},m0e={ariaRole:are,ariaRoleDescription:lre,description:ore};function Q6e(e,t){const n=t.aria===!1;if(e(Y6e,n||void 0),n||t.description==null)for(const r in m0e)e(m0e[r],void 0);else{const r=t.mark.marktype;e(ore,t.description),e(are,t.ariaRole||(r==="group"?K6e:ure)),e(lre,t.ariaRoleDescription||`${r} mark`)}}function J6e(e){return e.aria===!1?{[Y6e]:!0}:eqt[e.role]?null:p0e[e.role]?nqt(e,p0e[e.role]):tqt(e)}function tqt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return X6e(n?K6e:ure,`${t} mark container`,e.description)}function nqt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return X6e(t.role||ure,t.desc,n.description||r(n))}catch{return null}}function g0e(e){return wt(e.text).join(" ")}function rqt(e){const t=e.datum,n=e.orient,r=t.title?Z6e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Rx(a)?"discrete":a} scale with ${f6e(o,s,e)}`}function iqt(e){const t=e.datum,n=t.title?Z6e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,l=o.dataflow.locale();return oqt(r)+(n?` titled '${n}'`:"")+` for ${sqt(s)} with ${f6e(l,a,e)}`}function Z6e(e){try{return wt(cr(e.items).items[0].text).join(" ")}catch{return null}}function sqt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+cr(e)}function oqt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const e4e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),aqt=e=>e4e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function cre(){let e="",t="",n="";const r=[],i=()=>t=n="",s=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},o=(l,u)=>(u!=null&&(t+=` ${l}="${aqt(u)}"`),a),a={open(l){s(l),t="<"+l;for(var u=arguments.length,c=new Array(u>1?u-1:0),d=1;d<u;d++)c[d-1]=arguments[d];for(const f of c)for(const h in f)o(h,f[h]);return a},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),a},attr:o,text:l=>(n+=e4e(l),a),toString:()=>e};return a}const t4e=e=>n4e(cre(),e)+"";function n4e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):n4e(e,r)}return e.close()}const nL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},rL={blend:"mix-blend-mode"},r4e={fill:"none","stroke-miterlimit":10},lC=0,y0e="http://www.w3.org/2000/xmlns/",qs=JI.xmlns;class dre extends KR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ys(t,0,"svg",qs),this._svg.setAttributeNS(y0e,"xmlns",qs),this._svg.setAttributeNS(y0e,"xmlns:xlink",JI["xmlns:xlink"]),this._svg.setAttribute("version",JI.version),this._svg.setAttribute("class","marks"),Nc(t,1),this._root=Ys(this._svg,lC,"g",qs),_0(this._root,r4e),Nc(this._svg,lC+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(_0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ys(t,lC,"rect",qs),_0(r,{width:this._width,height:this._height,fill:n}));const i=t4e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Nc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,l,u;for(a=0,l=t.length;a<l;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=uc[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,v0e(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(o,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,v0e(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=uc[o],l=n.interactive===!1?"none":null,u=a.tag==="g",c=b0e(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Nc(c,0),n._svg;c.setAttribute("class",B6e(n));const d=J6e(n);for(const m in d)Ya(c,m,d[m]);u||Ya(c,"pointer-events",l),Ya(c,"clip-path",n.clip?Une(this,n,n.group):null);let f=null,h=0;const p=m=>{const g=this.isDirty(m),y=b0e(m,c,f,a.tag,s);g&&(this._update(a,y,m),u&&cqt(this,y,m,i)),f=y,++h};return a.nested?n.items.length&&p(n.items[0]):Af(n,p),Nc(c,h),c}_update(t,n,r){fm=n,_a=n.__values__,Q6e(pA,r),t.attr(pA,r,this);const i=fqt[t.type];i&&i.call(this,t,n,r),fm&&this.style(fm,r)}style(t,n){if(n!=null){for(const r in nL){let i=r==="font"?YR(n):n[r];if(i===_a[r])continue;const s=nL[r];i==null?t.removeAttribute(s):(jne(i)&&(i=p6e(i,this._defs.gradient,i4e())),t.setAttribute(s,i+"")),_a[r]=i}for(const r in rL)FD(t,rL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ys(t,lC+1,"defs",qs)),i=lqt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ys(t,lC+1,"defs",qs)),i=uqt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Nc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function v0e(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function lqt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ys(e,n++,"pattern",qs);_0(o,{id:q$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ys(o,0,"rect",qs),_0(o,{width:1,height:1,fill:`url(${i4e()}#${t.id})`}),e=Ys(e,n++,"radialGradient",qs),_0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ys(e,n++,"linearGradient",qs),_0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ys(e,r,"stop",qs),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Nc(e,r),n}function uqt(e,t,n){let r;return e=Ys(e,n,"clipPath",qs),e.setAttribute("id",t.id),t.path?(r=Ys(e,0,"path",qs),r.setAttribute("d",t.path)):(r=Ys(e,0,"rect",qs),_0(r,{x:0,y:0,width:t.width,height:t.height})),Nc(e,1),n+1}function cqt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Af(n,o=>{i=e.mark(t,o,i,r),++s}),Nc(t,1+s)}function b0e(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=b0(o,r,qs),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=b0(o,"path",qs);s.appendChild(a),a.__data__=e;const l=b0(o,"g",qs);s.appendChild(l),l.__data__=e;const u=b0(o,"path",qs);s.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(s.ownerSVGElement!==i||dqt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function dqt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let fm=null,_a=null;const fqt={group(e,t,n){const r=fm=t.childNodes[2];_a=r.__values__,e.foreground(pA,n,this),_a=t.__values__,fm=t.childNodes[1],e.content(pA,n,this);const i=fm=t.childNodes[0];e.background(pA,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==_a.events&&(Ya(r,"pointer-events",s),Ya(i,"pointer-events",s),_a.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Ya(r,"display",null),this.style(i,n),Ya(i,"stroke",null),o&&(n.fill=null),_a=r.__values__,this.style(r,n),o&&(n.fill=o),fm=null}else Ya(r,"display","none")},image(e,t,n){n.smooth===!1?(FD(t,"image-rendering","optimizeSpeed"),FD(t,"image-rendering","pixelated")):FD(t,"image-rendering",null)},text(e,t,n){const r=GR(n);let i,s,o,a;We(r)?(s=r.map(l=>Iy(n,l)),i=s.join(`
`),i!==_a.text&&(Nc(t,0),o=t.ownerDocument,a=Ay(n),s.forEach((l,u)=>{const c=b0(o,"tspan",qs);c.__data__=n,c.textContent=l,u&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),_a.text=i)):(s=Iy(n,r),s!==_a.text&&(t.textContent=s,_a.text=s)),Ya(t,"font-family",YR(n)),Ya(t,"font-size",Ep(n)+"px"),Ya(t,"font-style",n.fontStyle),Ya(t,"font-variant",n.fontVariant),Ya(t,"font-weight",n.fontWeight)}};function pA(e,t,n){t!==_a[e]&&(n?hqt(fm,e,t,n):Ya(fm,e,t),_a[e]=t)}function FD(e,t,n){n!==_a[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),_a[t]=n)}function _0(e,t){for(const n in t)Ya(e,n,t[n])}function Ya(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function hqt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function i4e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class s4e extends KR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=cre();n.open("svg",Nn({},JI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",r4e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=uc[n.marktype],i=r.tag,s=[Q6e,r.attr];t.open("g",{class:B6e(n),"clip-path":n.clip?Une(this,n,n.group):null},J6e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const l=this.href(a);if(l&&t.open("a",l),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const u=GR(a);if(We(u)){const c={x:0,dy:Ay(a)};for(let d=0;d<u.length;++d)t.open("tspan",d?c:null).text(Iy(a,u[d])).close()}else t.text(Iy(a,u))}else if(i==="g"){const u=a.strokeForeground,c=a.fill,d=a.stroke;u&&d&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Af(a,f=>this.mark(t,f)),t.close(),u&&d?(c&&(a.fill=null),a.stroke=d,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Af(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,l,u,c)=>{s[c||a]=l};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&pqt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:q$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let l=0;l<a.length;++l)t.open("stop",{offset:a[l].offset,"stop-color":a[l].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function pqt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=YR(t),e["font-size"]=Ep(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in nL){let a=t[o];const l=nL[o];a==="transparent"&&(l==="fill"||l==="stroke")||a!=null&&(jne(a)&&(a=p6e(a,i.gradient,"")),e[l]=a)}for(const o in rL){const a=t[o];a!=null&&(s=s||[],s.push(`${rL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const $d={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function mqt(e){$d.svgMarkTypes=e.svgMarkTypes??["text"],$d.svgOnTop=e.svgOnTop??!0,$d.debug=e.debug??!1}class zq extends KR{constructor(t){super(t),this._svgRenderer=new dre(t),this._canvasRenderer=new tL(t)}initialize(t,n,r,i,s){this._root_el=Ys(t,0,"div");const o=Ys(this._root_el,0,"div"),a=Ys(this._root_el,1,"div");return this._root_el.style.position="relative",$d.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=$d.svgOnTop?a:o,this._canvasEl=$d.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return $d.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!$d.svgMarkTypes.includes(s));this._svgRenderer.render(t,$d.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return $d.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class o4e extends XR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ys(Ys(t,0,"div"),$d.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const a4e="canvas",l4e="hybrid",u4e="png",c4e="svg",d4e="none",w0={Canvas:a4e,PNG:u4e,SVG:c4e,Hybrid:l4e,None:d4e},xb={};xb[a4e]=xb[u4e]={renderer:tL,headless:tL,handler:XR};xb[c4e]={renderer:dre,headless:s4e,handler:G6e};xb[l4e]={renderer:zq,headless:zq,handler:o4e};xb[d4e]={};function Cj(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(xb[e]=t,this):xb[e]}function f4e(e,t,n){const r=[],i=new Ls().union(t),s=e.marktype;return s?h4e(e,i,n,r):s==="group"?p4e(e,i,n,r):Ve("Intersect scene must be mark node or group item.")}function h4e(e,t,n,r){if(gqt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)p4e(i[a],t,n,r);else for(const l=uc[s].isect;a<o;++a){const u=i[a];m4e(u,t,l)&&r.push(u)}}return r}function gqt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function p4e(e,t,n,r){n&&n(e.mark)&&m4e(e,t,uc.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let l=0;l<s;++l)h4e(i[l],t,n,r);t.translate(o,a)}return r}function m4e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const dz=new Ls;function g4e(e){const t=e.clip;if(On(t))t(qR(dz.clear()));else if(t)dz.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(dz)}const yqt=1e-9;function fre(e,t,n){return e===t?!0:n==="path"?y4e(e,t):e instanceof Date&&t instanceof Date?+e==+t:xr(e)&&xr(t)?Math.abs(e-t)<=yqt:!e||!t||!bt(e)&&!bt(t)?e==t:vqt(e,t)}function y4e(e,t){return fre(Px(e),Px(t))}function vqt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!fre(e[i],t[i],i))return!1;return typeof e==typeof t}function bqt(){w6e(),VUt()}const Dx="top",Gd="left",Jd="right",ky="bottom",_qt="top-left",wqt="top-right",Eqt="bottom-left",xqt="bottom-right",hre="start",Uq="middle",Ja="end",Sqt="x",Tqt="y",Aj="group",pre="axis",mre="title",Cqt="frame",Aqt="scope",gre="legend",v4e="row-header",b4e="row-footer",_4e="row-title",w4e="column-header",E4e="column-footer",x4e="column-title",Iqt="padding",kqt="symbol",S4e="fit",T4e="fit-x",C4e="fit-y",Rqt="pad",yre="none",oO="all",Vq="each",vre="flush",E0="column",x0="row";function A4e(e){Me.call(this,null,e)}ht(A4e,Me,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=uc[i],o=s.bound;let a=r.bounds,l;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=aO(r,o),r.items.forEach(u=>{u.bounds.clear().union(a)});else if(i===Aj||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),a.clear(),r.items.forEach(u=>a.union(aO(u,o))),r.role){case pre:case gre:case mre:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{a.union(aO(u,o))}),t.visit(t.MOD,u=>{l=l||a.alignsWith(u.bounds),n.dirty(u),a.union(aO(u,o))}),l&&(a.clear(),r.items.forEach(u=>a.union(u.bounds)));return g4e(r),t.modifies("bounds")}});function aO(e,t,n){return t(e.bounds.clear(),e,n)}const _0e=":vega_identifier:";function bre(e){Me.call(this,0,e)}bre.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ht(bre,Me,{transform(e,t){const n=Pqt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Pqt(e){return e._signals[_0e]||(e._signals[_0e]=e.add(0))}function I4e(e){Me.call(this,null,e)}ht(I4e,Me,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Nqt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Aj?vj:yj;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Nqt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function k4e(e){Me.call(this,null,e)}const w0e={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!R4e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},R4e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),E0e=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(R4e(i,s=e[n].bounds,t))return!0},Oqt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Dqt=(e,t,n)=>{var r=e.range(),i=new Ls;return t===Dx||t===ky?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},x0e=e=>(e.forEach(t=>t.opacity=1),e),S0e=(e,t)=>e.reflow(t.modified()).modifies("opacity");ht(k4e,Me,{transform(e,t){const n=w0e[e.method]||w0e.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(x0e(i),t=S0e(t,e)),t;if(i=i.filter(Oqt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=x0e(i),t=S0e(t,e),s.length>=3&&E0e(s,r)){do s=n(s,r);while(s.length>=3&&E0e(s,r));s.length<3&&!cr(i).opacity&&(s.length>1&&(cr(s).opacity=0),cr(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Dqt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{o(l)||(l.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&a.union(l.bounds)}),t}});function P4e(e){Me.call(this,null,e)}ht(P4e,Me,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const va=new Ls;function Hw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Mqt(e){var t=e.items[0].orient;return t===Gd||t===Jd}function $qt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Lqt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,l=$qt(s),u=i.range,c=i.offset,d=i.position,f=i.minExtent,h=i.maxExtent,p=s.title&&i.items[l[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&tre(p),b=0,_=0,w,E;switch(va.clear().union(g),g.clear(),(w=l[0])>-1&&g.union(i.items[w].bounds),(w=l[1])>-1&&g.union(i.items[w].bounds),a){case Dx:b=d||0,_=-c,E=Math.max(f,Math.min(h,-g.y1)),g.add(0,-E).add(u,0),p&&lO(e,p,E,m,y,0,-1,g);break;case Gd:b=-c,_=d||0,E=Math.max(f,Math.min(h,-g.x1)),g.add(-E,0).add(0,u),p&&lO(e,p,E,m,y,1,-1,g);break;case Jd:b=n+c,_=d||0,E=Math.max(f,Math.min(h,g.x2)),g.add(0,0).add(E,u),p&&lO(e,p,E,m,y,1,1,g);break;case ky:b=d||0,_=r+c,E=Math.max(f,Math.min(h,g.y2)),g.add(0,0).add(u,E),p&&lO(e,p,E,m,0,0,1,g);break;default:b=i.x,_=i.y}return mg(g.translate(b,_),i),Hw(i,"x",b+o)|Hw(i,"y",_+o)&&(i.bounds=va,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function lO(e,t,n,r,i,s,o,a){const l=t.bounds;if(t.auto){const u=o*(n+i+r);let c=0,d=0;e.dirty(t),s?c=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-c,-d)),e.dirty(t)}a.union(l)}const T0e=(e,t)=>Math.floor(Math.min(e,t)),C0e=(e,t)=>Math.ceil(Math.max(e,t));function Fqt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===Aj)switch(i.role){case pre:case gre:case mre:break;case v4e:o.rowheaders.push(...s);break;case b4e:o.rowfooters.push(...s);break;case w4e:o.colheaders.push(...s);break;case E4e:o.colfooters.push(...s);break;case _4e:o.rowtitle=s[0];break;case x4e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function jqt(e){return new Ls().set(0,0,e.width||0,e.height||0)}function Bqt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Oi(e,t,n){const r=bt(e)?e[t]:e;return r??(n!==void 0?n:0)}function A0e(e){return e<0?Math.ceil(-e):0}function N4e(e,t,n){var r=!n.nodirty,i=n.bounds===vre?jqt:Bqt,s=va.set(0,0,0,0),o=Oi(n.align,E0),a=Oi(n.align,x0),l=Oi(n.padding,E0),u=Oi(n.padding,x0),c=n.columns||t.length,d=c<=0?1:Math.ceil(t.length/c),f=t.length,h=Array(f),p=Array(c),m=0,g=Array(f),y=Array(d),b=0,_=Array(f),w=Array(f),E=Array(f),x,S,C,A,R,P,L,k,$,D,M;for(S=0;S<c;++S)p[S]=0;for(S=0;S<d;++S)y[S]=0;for(S=0;S<f;++S)P=t[S],R=E[S]=i(P),P.x=P.x||0,_[S]=0,P.y=P.y||0,w[S]=0,C=S%c,A=~~(S/c),m=Math.max(m,L=Math.ceil(R.x2)),b=Math.max(b,k=Math.ceil(R.y2)),p[C]=Math.max(p[C],L),y[A]=Math.max(y[A],k),h[S]=l+A0e(R.x1),g[S]=u+A0e(R.y1),r&&e.dirty(t[S]);for(S=0;S<f;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===Vq)for(C=1;C<c;++C){for(M=0,S=C;S<f;S+=c)M<h[S]&&(M=h[S]);for(S=C;S<f;S+=c)h[S]=M+p[C-1]}else if(o===oO){for(M=0,S=0;S<f;++S)S%c&&M<h[S]&&(M=h[S]);for(S=0;S<f;++S)S%c&&(h[S]=M+m)}else for(o=!1,C=1;C<c;++C)for(S=C;S<f;S+=c)h[S]+=p[C-1];if(a===Vq)for(A=1;A<d;++A){for(M=0,S=A*c,x=S+c;S<x;++S)M<g[S]&&(M=g[S]);for(S=A*c;S<x;++S)g[S]=M+y[A-1]}else if(a===oO){for(M=0,S=c;S<f;++S)M<g[S]&&(M=g[S]);for(S=c;S<f;++S)g[S]=M+b}else for(a=!1,A=1;A<d;++A)for(S=A*c,x=S+c;S<x;++S)g[S]+=y[A-1];for($=0,S=0;S<f;++S)$=h[S]+(S%c?$:0),_[S]+=$-t[S].x;for(C=0;C<c;++C)for(D=0,S=C;S<f;S+=c)D+=g[S],w[S]+=D-t[S].y;if(o&&Oi(n.center,E0)&&d>1)for(S=0;S<f;++S)R=o===oO?m:p[S%c],$=R-E[S].x2-t[S].x-_[S],$>0&&(_[S]+=$/2);if(a&&Oi(n.center,x0)&&c!==1)for(S=0;S<f;++S)R=a===oO?b:y[~~(S/c)],D=R-E[S].y2-t[S].y-w[S],D>0&&(w[S]+=D/2);for(S=0;S<f;++S)s.union(E[S].translate(_[S],w[S]));switch($=Oi(n.anchor,Sqt),D=Oi(n.anchor,Tqt),Oi(n.anchor,E0)){case Ja:$-=s.width();break;case Uq:$-=s.width()/2}switch(Oi(n.anchor,x0)){case Ja:D-=s.height();break;case Uq:D-=s.height()/2}for($=Math.round($),D=Math.round(D),s.clear(),S=0;S<f;++S)t[S].mark.bounds.clear();for(S=0;S<f;++S)P=t[S],P.x+=_[S]+=$,P.y+=w[S]+=D,s.union(P.mark.bounds.union(P.bounds.translate(_[S],w[S]))),r&&e.dirty(P);return s}function zqt(e,t,n){var r=Fqt(t),i=r.marks,s=n.bounds===vre?Uqt:Vqt,o=n.offset,a=n.columns||i.length,l=a<=0?1:Math.ceil(i.length/a),u=l*a,c,d,f,h,p,m,g;const y=N4e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=Oi(n.headerBand,x0,null),c=uO(e,r.rowheaders,i,a,l,-Oi(o,"rowHeader"),T0e,0,s,"x1",0,a,1,m)),r.colheaders&&(m=Oi(n.headerBand,E0,null),d=uO(e,r.colheaders,i,a,a,-Oi(o,"columnHeader"),T0e,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=Oi(n.footerBand,x0,null),f=uO(e,r.rowfooters,i,a,l,Oi(o,"rowFooter"),C0e,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=Oi(n.footerBand,E0,null),h=uO(e,r.colfooters,i,a,a,Oi(o,"columnFooter"),C0e,1,s,"y2",u-a,1,a,m)),r.rowtitle&&(p=Oi(n.titleAnchor,x0),g=Oi(o,"rowTitle"),g=p===Ja?f+g:c-g,m=Oi(n.titleBand,x0,.5),I0e(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=Oi(n.titleAnchor,E0),g=Oi(o,"columnTitle"),g=p===Ja?h+g:d-g,m=Oi(n.titleBand,E0,.5),I0e(e,r.coltitle,g,1,y,m))}function Uqt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Vqt(e,t){return e.bounds[t]}function uO(e,t,n,r,i,s,o,a,l,u,c,d,f,h){var p=n.length,m=0,g=0,y,b,_,w,E,x,S,C,A;if(!p)return m;for(y=c;y<p;y+=d)n[y]&&(m=o(m,l(n[y],u)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,b=0,w=t.length;b<w;++b)e.dirty(t[b]),t[b].mark.bounds.clear();for(y=c,b=0,w=t.length;b<w;++b,y+=d){for(x=t[b],E=x.mark.bounds,_=y;_>=0&&(S=n[_])==null;_-=f);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),A=m):(C=m,A=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),E.union(x.bounds.translate(C-(x.x||0),A-(x.y||0))),x.x=C,x.y=A,e.dirty(x),g=o(g,E[u])}return g}function I0e(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function Hqt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function qqt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Wqt(e,t,n,r,i,s,o){const a=Hqt(n,t),l=qqt(e,a("offset",0)),u=a("anchor",hre),c=u===Ja?1:u===Uq?.5:0,d={align:Vq,bounds:a("bounds",vre),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Gd:d.anchor={x:Math.floor(r.x1)-l,column:Ja,y:c*(o||r.height()+2*r.y1),row:u};break;case Jd:d.anchor={x:Math.ceil(r.x2)+l,y:c*(o||r.height()+2*r.y1),row:u};break;case Dx:d.anchor={y:Math.floor(i.y1)-l,row:Ja,x:c*(s||i.width()+2*i.x1),column:u};break;case ky:d.anchor={y:Math.ceil(i.y2)+l,x:c*(s||i.width()+2*i.x1),column:u};break;case _qt:d.anchor={x:l,y:l};break;case wqt:d.anchor={x:s-l,y:l,column:Ja};break;case Eqt:d.anchor={x:l,y:o-l,row:Ja};break;case xqt:d.anchor={x:s-l,y:o-l,column:Ja,row:Ja};break}return d}function Gqt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,l,u;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),Kqt(e,n,n.items[0].items[0]),s=Yqt(n,s),l=2*n.padding,u=2*n.padding,s.empty()||(l=Math.ceil(s.width()+l),u=Math.ceil(s.height()+u)),r.type===kqt&&Xqt(n.items[0].items[0].items[0].items),i!==yre&&(n.x=o=0,n.y=a=0),n.width=l,n.height=u,mg(s.set(o,a,o+l,a+u),n),n.mark.bounds.clear().union(s),n}function Yqt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Kqt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&uC(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,l=t.titlePadding||0,u=r-o.x,c=r-o.y;switch(o.orient){case Gd:i+=Math.ceil(o.bounds.width())+l;break;case Jd:case ky:break;default:s+=o.bounds.height()+l}switch((i||s)&&uC(e,n,i,s),o.orient){case Gd:c+=G_(t,n,o,a,1,1);break;case Jd:u+=G_(t,n,o,Ja,0,0)+l,c+=G_(t,n,o,a,1,1);break;case ky:u+=G_(t,n,o,a,0,0),c+=G_(t,n,o,Ja,-1,0,1)+l;break;default:u+=G_(t,n,o,a,0,0)}(u||c)&&uC(e,o,u,c),(u=Math.round(o.bounds.x1-r))<0&&(uC(e,n,-u,0),uC(e,o,-u,0))}}function G_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",l=n.datum.vgrad,u=a&&(s||!l)&&!o?t.items[0]:t,c=u.bounds[i?"y2":"x2"]-e.padding,d=l&&s?c:0,f=l&&s?0:c,h=i<=0?0:tre(n);return Math.round(r===hre?d:r===Ja?f-h:.5*(c-h))}function uC(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Xqt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Qqt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,l=s.anchor,u=s.offset,c=s.padding,d=s.items[0].items[0],f=s.items[1]&&s.items[1].items[0],h=a===Gd||a===Jd?r:n,p=0,m=0,g=0,y=0,b=0,_;if(o!==Aj?a===Gd?(p=i.y2,h=i.y1):a===Jd?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Gd&&(p=r,h=0),_=l===hre?p:l===Ja?h:(p+h)/2,f&&f.text){switch(a){case Dx:case ky:b=d.bounds.height()+c;break;case Gd:y=d.bounds.width()+c;break;case Jd:y=-d.bounds.width()-c;break}va.clear().union(f.bounds),va.translate(y-(f.x||0),b-(f.y||0)),Hw(f,"x",y)|Hw(f,"y",b)&&(e.dirty(f),f.bounds.clear().union(va),f.mark.bounds.clear().union(va),e.dirty(f)),va.clear().union(f.bounds)}else va.clear();switch(va.union(d.bounds),a){case Dx:m=_,g=i.y1-va.height()-u;break;case Gd:m=i.x1-va.width()-u,g=_;break;case Jd:m=i.x2+va.width()+u,g=_;break;case ky:m=_,g=i.y2+u;break;default:m=s.x,g=s.y}return Hw(s,"x",m)|Hw(s,"y",g)&&(va.translate(m,g),e.dirty(s),s.bounds.clear().union(va),t.bounds.clear().union(va),e.dirty(s)),s.bounds}function O4e(e){Me.call(this,null,e)}ht(O4e,Me,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&zqt(n,r,e.layout),Zqt(n,r,e)}),Jqt(e.mark.group)?t.reflow():t}});function Jqt(e){return e&&e.mark.role!=="legend-entry"}function Zqt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ls().set(0,0,i,s),a=o.clone(),l=o.clone(),u=[],c,d,f,h,p,m;for(p=0,m=r.length;p<m;++p)switch(d=r[p],d.role){case pre:h=Mqt(d)?a:l,h.union(Lqt(e,d,i,s));break;case mre:c=d;break;case gre:u.push(Gqt(e,d));break;case Cqt:case Aqt:case v4e:case b4e:case _4e:case w4e:case E4e:case x4e:a.union(d.bounds),l.union(d.bounds);break;default:o.union(d.bounds)}if(u.length){const g={};u.forEach(y=>{f=y.orient||Jd,f!==yre&&(g[f]||(g[f]=[])).push(y)});for(const y in g){const b=g[y];N4e(e,b,Wqt(b,y,n.legends,a,l,i,s))}u.forEach(y=>{const b=y.bounds;if(b.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=b,e.dirty(y)),n.autosize&&(n.autosize.type===S4e||n.autosize.type===T4e||n.autosize.type===C4e))switch(y.orient){case Gd:case Jd:o.add(b.x1,0).add(b.x2,0);break;case Dx:case ky:o.add(0,b.y1).add(0,b.y2)}else o.union(b)})}o.union(a).union(l),c&&o.union(Qqt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),eWt(e,t,o,n)}function eWt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const f=Math.max(0,Math.ceil(n.x2-l)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Iqt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===yre?(u=0,d=0,l=o,c=a):s===S4e?(l=Math.max(0,o-u-f),c=Math.max(0,a-d-h)):s===T4e?(l=Math.max(0,o-u-f),a=c+d+h):s===C4e?(o=l+u+f,c=Math.max(0,a-d-h)):s===Rqt&&(o=l+u+f,a=c+d+h),e._resizeView(o,a,l,c,[u,d],i.resize)}const tWt=Object.freeze(Object.defineProperty({__proto__:null,bound:A4e,identifier:bre,mark:I4e,overlap:k4e,render:P4e,viewlayout:O4e},Symbol.toStringTag,{value:"Module"}));function D4e(e){Me.call(this,null,e)}ht(D4e,Me,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Lne(s,o,e.minstep),l=e.format||a6e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?o6e(s,e.values,a):Fne(s,a);return i&&(r.rem=i),i=u.map((c,d)=>$r({index:d/(u.length-1||1),value:c,label:l(c)})),e.extra&&i.length&&i.push($r({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function M4e(e){Me.call(this,null,e)}function nWt(){return $r({})}function rWt(e){const t=XS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ht(M4e,Me,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||nWt,s=e.key||zt,o=this.value;return We(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Ve("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=rWt(s)),t.visit(t.ADD,a=>{const l=s(a);let u=o.get(l);u?u.exit?(o.empty--,r.add.push(u)):r.mod.push(u):(u=i(a),o.set(l,u),r.add.push(u)),u.datum=a,u.exit=!1}),t.visit(t.MOD,a=>{const l=s(a),u=o.get(l);u&&(u.datum=a,r.mod.push(u))}),t.visit(t.REM,a=>{const l=s(a),u=o.get(l);a===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function $4e(e){Me.call(this,null,e)}ht($4e,Me,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(We(s))if(n.changed()||s.every(d=>i[d]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Bg,l=i.enter||Bg,u=i.exit||Bg,c=(s&&!o?i[s]:a)||Bg;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),a(d,e)}),n.modifies(l.output),n.modifies(a.output),c!==Bg&&c!==a&&(t.visit(t.ADD,d=>{c(d,e)}),n.modifies(c.output))),t.changed(t.REM)&&u!==Bg&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),o||c!==Bg){const d=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(d,f=>{const h=l(f,e)||r;(c(f,e)||h)&&n.mod.push(f)}),n.mod.length&&n.modifies(l.output)):t.visit(d,f=>{(c(f,e)||r)&&n.mod.push(f)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function L4e(e){Me.call(this,[],e)}ht(L4e,Me,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||RD,o=e.scale,a=+e.limit,l=Lne(o,e.count==null?5:e.count,e.minstep),u=!!e.values||s===RD,c=e.format||d6e(n,o,l,s,e.formatSpecifier,e.formatType,u),d=e.values||c6e(o,l),f,h,p,m,g;return i&&(r.rem=i),s===RD?(a&&d.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,a-1),g=!0):i=d,On(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,b)=>Math.max(y,p(b,e)),0)):p=ja(m=p||8),i=i.map((y,b)=>$r({index:b,label:c(y,b,i),value:y,offset:m,size:p(y,e)})),g&&(g=d[i.length],i.push($r({index:i.length,label:`${d.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===RUt?(f=o.domain(),h=r6e(o,f[0],cr(f)),d.length<3&&!e.values&&f[0]!==cr(f)&&(d=[f[0],cr(f)]),i=d.map((y,b)=>$r({index:b,label:c(y,b,d),value:y,perc:h(y)}))):(p=d.length-1,h=zUt(o),i=d.map((y,b)=>$r({index:b,label:c(y,b,d),value:y,perc:b?h(y):0,perc2:b===p?1:h(d[b+1])}))),r.source=i,r.add=i,this.value=i,r}});const iWt=e=>e.source.x,sWt=e=>e.source.y,oWt=e=>e.target.x,aWt=e=>e.target.y;function _re(e){Me.call(this,{},e)}_re.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ht(_re,Me,{transform(e,t){var n=e.sourceX||iWt,r=e.sourceY||sWt,i=e.targetX||oWt,s=e.targetY||aWt,o=e.as||"path",a=e.orient||"vertical",l=e.shape||"line",u=k0e.get(l+"-"+a)||k0e.get(l);return u||Ve("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=u(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const F4e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,lWt=(e,t,n,r)=>F4e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),j4e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},uWt=(e,t,n,r)=>j4e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),B4e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},cWt=(e,t,n,r)=>B4e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),dWt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,fWt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,hWt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},pWt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},mWt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},gWt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*s+"C"+l*i+","+l*s+" "+l*o+","+l*a+" "+r*o+","+r*a},k0e=XS({line:F4e,"line-radial":lWt,arc:j4e,"arc-radial":uWt,curve:B4e,"curve-radial":cWt,"orthogonal-horizontal":dWt,"orthogonal-vertical":fWt,"orthogonal-radial":hWt,"diagonal-horizontal":pWt,"diagonal-vertical":mWt,"diagonal-radial":gWt});function wre(e){Me.call(this,null,e)}wre.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ht(wre,Me,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||GS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(s),c=u.length,d=o,f=(a-o)/tI(u),h=Fu(c),p,m,g;for(e.sort&&h.sort((y,b)=>u[y]-u[b]),p=0;p<c;++p)g=u[h[p]],m=l[h[p]],m[r]=d,m[i]=d+=g*f;return this.value=u,t.reflow(e.modified()).modifies(n)}});const yWt=5;function vWt(e){const t=e.type;return!e.bins&&(t===Ix||t===FR||t===jR)}function z4e(e){return Dne(e)&&e!==Vh}const bWt=Tf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function U4e(e){Me.call(this,null,e),this.modified(!0)}ht(U4e,Me,{transform(e,t){var n=t.dataflow,r=this.value,i=_Wt(e);(!r||i!==r.type)&&(this.value=r=Rr(i)());for(i in e)if(!bWt[i]){if(i==="padding"&&z4e(r.type))continue;On(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return CWt(r,e,TWt(r,e,EWt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _Wt(e){var t=e.type,n="",r;return t===Vh?Vh+"-"+Ix:(wWt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Vh+"-":r===3?eT+"-":""),(n+t||Ix).toLowerCase())}function wWt(e){const t=e.type;return Dne(t)&&t!==wb&&t!==Eb&&(e.scheme||e.range&&e.range.length&&e.range.every(Et))}function EWt(e,t,n){const r=xWt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&vWt(e),a,l;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[a]?a+1:l<i[0]?0:a;u!==a&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return z4e(s)&&t.padding&&i[0]!==cr(i)&&(i=SWt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(V4e(s,i,n)),s===Rne&&e.unknown(t.domainImplicit?DV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Lne(e,t.nice)||null),i.length}function xWt(e,t,n){return t?(e.domain(V4e(e.type,t,n)),t.length):-1}function SWt(e,t,n,r,i,s){var o=Math.abs(cr(n)-n[0]),a=o/(o-2*r),l=e===Jm?xte(t,null,a):e===jR?z$(t,null,a,.5):e===FR?z$(t,null,a,i||1):e===fj?Ste(t,null,a,s||1):Ete(t,null,a);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function V4e(e,t,n){if(JFe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+ut(t))}return t}function TWt(e,t,n){let r=t.bins;if(r&&!We(r)){const i=e.domain(),s=i[0],o=cr(i),a=r.step;let l=r.start==null?s:r.start,u=r.stop==null?o:r.stop;a||Ve("Scale bins parameter missing step property."),l<s&&(l=a*Math.ceil(s/a)),u>o&&(u=a*Math.floor(o/a)),r=Fu(l,u+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Pne&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function CWt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=AWt(r,t,n);else if(t.scheme&&(s=IWt(r,t,n),On(s))){if(e.interpolator)return e.interpolator(s);Ve(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&ZFe(r))return e.interpolator(mj(Hq(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Mne(t.interpolate,t.interpolateGamma)):On(e.round)?e.round(i):On(e.rangeRound)&&e.interpolate(i?Yk:Jy),s&&e.range(Hq(s,t.reverse))}function AWt(e,t,n){e!==WFe&&e!==kq&&Ve("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===kq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*kne(n,i,r)]}function IWt(e,t,n){var r=t.schemeExtent,i,s;return We(t.scheme)?s=mj(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=$ne(i),s||Ve(`Unrecognized scheme name: ${t.scheme}`)),n=e===pj?n+1:e===Pne?n-1:e===kx||e===hj?+t.schemeCount||yWt:n,ZFe(e)?R0e(s,r,t.reverse):On(s)?n6e(R0e(s,r),n):e===Rne?s:s.slice(0,n)}function R0e(e,t,n){return On(e)&&(t||n)?t6e(e,Hq(t||[0,1],n)):e}function Hq(e,t){return t?e.slice().reverse():e}function H4e(e){Me.call(this,null,e)}ht(H4e,Me,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(s_(e.sort)),this.modified(n),t}});const P0e="zero",q4e="center",W4e="normalize",G4e=["y0","y1"];function Ere(e){Me.call(this,null,e)}Ere.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:P0e,values:[P0e,q4e,W4e]},{name:"as",type:"string",array:!0,length:2,default:G4e}]};ht(Ere,Me,{transform(e,t){var n=e.as||G4e,r=n[0],i=n[1],s=s_(e.sort),o=e.field||GS,a=e.offset===q4e?kWt:e.offset===W4e?RWt:PWt,l,u,c,d;for(l=NWt(t.source,e.groupby,s,o),u=0,c=l.length,d=l.max;u<c;++u)a(l[u],d,o,r,i);return t.reflow(e.modified()).modifies(n)}});function kWt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,l;a<o;++a)l=e[a],l[r]=s,l[i]=s+=Math.abs(n(l))}function RWt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,l=0,u=0,c;l<a;++l)c=e[l],c[r]=o,c[i]=o=s*(u+=Math.abs(n(c)))}function PWt(e,t,n,r,i){for(var s=0,o=0,a=e.length,l=0,u,c;l<a;++l)c=e[l],u=+n(c),u<0?(c[r]=o,c[i]=o+=u):(c[r]=s,c[i]=s+=u)}function NWt(e,t,n,r){var i=[],s=m=>m(c),o,a,l,u,c,d,f,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,l=e.length;a<l;++a)c=e[a],d=t.map(s),f=o[d],f||(o[d]=f=[],i.push(f)),f.push(c);for(d=0,p=0,u=i.length;d<u;++d){for(f=i[d],a=0,h=0,l=f.length;a<l;++a)h+=Math.abs(r(f[a]));f.sum=h,h>p&&(p=h),n&&f.sort(n)}return i.max=p,i}const OWt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:D4e,datajoin:M4e,encode:$4e,legendentries:L4e,linkpath:_re,pie:wre,scale:U4e,sortitems:H4e,stack:Ere},Symbol.toStringTag,{value:"Module"}));var DWt=Math.abs,qq=Math.cos,iL=Math.sin,MWt=1e-6,Y4e=Math.PI,Wq=Y4e/2,N0e=$Wt(2);function O0e(e){return e>1?Wq:e<-1?-Wq:Math.asin(e)}function $Wt(e){return e>0?Math.sqrt(e):0}function LWt(e,t){var n=e*iL(t),r=30,i;do t-=i=(t+iL(t)-n)/(1+qq(t));while(DWt(i)>MWt&&--r>0);return t/2}function FWt(e,t,n){function r(i,s){return[e*i*qq(s=LWt(n,s)),t*iL(s)]}return r.invert=function(i,s){return s=O0e(s/t),[i/(e*qq(s)),O0e((2*s+iL(2*s))/n)]},r}var jWt=FWt(N0e/Wq,N0e,Y4e);function BWt(){return pp(jWt).scale(169.529)}const zWt=zAe(),Gq=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function UWt(e,t){return function n(){const r=t();return r.type=e,r.path=zAe().projection(r),r.copy=r.copy||function(){const i=n();return Gq.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},XFe(r)}}function xre(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(sL[e]=UWt(e,t),this):sL[e]||null}function K4e(e){return e&&e.path||zWt}const sL={albers:VAe,albersusa:Dbt,azimuthalequalarea:Mbt,azimuthalequidistant:$bt,conicconformal:jbt,conicequalarea:k3,conicequidistant:Ubt,equalEarth:Hbt,equirectangular:Bbt,gnomonic:qbt,identity:Wbt,mercator:Lbt,mollweide:BWt,naturalEarth1:Gbt,orthographic:Ybt,stereographic:Kbt,transversemercator:Xbt};for(const e in sL)xre(e,sL[e]);function VWt(){}const Lp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function X4e(){var e=1,t=1,n=a;function r(l,u){return u.map(c=>i(l,c))}function i(l,u){var c=[],d=[];return s(l,u,f=>{n(f,l,u),HWt(f)>0?c.push([f]):d.push(f)}),d.forEach(f=>{for(var h=0,p=c.length,m;h<p;++h)if(qWt((m=c[h])[0],f)!==-1){m.push(f);return}}),{type:"MultiPolygon",value:u,coordinates:c}}function s(l,u,c){var d=[],f=[],h,p,m,g,y,b;for(h=p=-1,g=l[0]>=u,Lp[g<<1].forEach(_);++h<e-1;)m=g,g=l[h+1]>=u,Lp[m|g<<1].forEach(_);for(Lp[g<<0].forEach(_);++p<t-1;){for(h=-1,g=l[p*e+e]>=u,y=l[p*e]>=u,Lp[g<<1|y<<2].forEach(_);++h<e-1;)m=g,g=l[p*e+e+h+1]>=u,b=y,y=l[p*e+h+1]>=u,Lp[m|g<<1|y<<2|b<<3].forEach(_);Lp[g|y<<3].forEach(_)}for(h=-1,y=l[p*e]>=u,Lp[y<<2].forEach(_);++h<e-1;)b=y,y=l[p*e+h+1]>=u,Lp[y<<2|b<<3].forEach(_);Lp[y<<3].forEach(_);function _(w){var E=[w[0][0]+h,w[0][1]+p],x=[w[1][0]+h,w[1][1]+p],S=o(E),C=o(x),A,R;(A=f[S])?(R=d[C])?(delete f[A.end],delete d[R.start],A===R?(A.ring.push(x),c(A.ring)):d[A.start]=f[R.end]={start:A.start,end:R.end,ring:A.ring.concat(R.ring)}):(delete f[A.end],A.ring.push(x),f[A.end=C]=A):(A=d[C])?(R=f[S])?(delete d[A.start],delete f[R.end],A===R?(A.ring.push(x),c(A.ring)):d[R.start]=f[A.end]={start:R.start,end:A.end,ring:R.ring.concat(A.ring)}):(delete d[A.start],A.ring.unshift(E),d[A.start=S]=A):d[S]=f[C]={start:S,end:C,ring:[E,x]}}}function o(l){return l[0]*2+l[1]*(e+1)*4}function a(l,u,c){l.forEach(d=>{var f=d[0],h=d[1],p=f|0,m=h|0,g,y=u[m*e+p];f>0&&f<e&&p===f&&(g=u[m*e+p-1],d[0]=f+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=u[(m-1)*e+p],d[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),c=Math.floor(l[1]);return u>=0&&c>=0||Ve("invalid size"),e=u,t=c,r},r.smooth=function(l){return arguments.length?(n=l?a:VWt,r):n===a},r}function HWt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function qWt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=WWt(e,t[n]))return i;return 0}function WWt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var l=e[s],u=l[0],c=l[1],d=e[a],f=d[0],h=d[1];if(GWt(l,d,t))return 0;c>r!=h>r&&n<(f-u)*(r-c)/(h-c)+u&&(i=-i)}return i}function GWt(e,t,n){var r;return YWt(e,t,n)&&KWt(e[r=+(e[0]===t[0])],n[r],t[r])}function YWt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function KWt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function Q4e(e,t,n){return function(r){var i=tp(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,l=t?sy(s,o,e):a/(e+1);return Fu(s+l,o,l)}}function Sre(e){Me.call(this,null,e)}Sre.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ht(Sre,Me,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Fa,s=X4e().smooth(e.smooth!==!1),o=e.thresholds||XWt(r,i,e),a=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const c=i(u),d=s.size([c.width,c.height])(c.values,We(o)?o:o(c.values));QWt(d,c,u,e),d.forEach(f=>{l.push(rj(u,$r(a!=null?{[a]:f}:f)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function XWt(e,t,n){const r=Q4e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Nh(t(i).values)))}function QWt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(On(i)&&(i=i(n,r)),On(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(xr(i)?i:i[0])||1,a=(xr(i)?i:i[1])||1,l=s&&s[0]||0,u=s&&s[1]||0;e.forEach(J4e(t,o,a,l,u))}function J4e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function l(d){d.forEach(u)}function u(d){a&&d.reverse(),d.forEach(c)}function c(d){d[0]=(d[0]-s)*t+r,d[1]=(d[1]-o)*n+i}return function(d){return d.coordinates.forEach(l),d}}function D0e(e,t,n){const r=e>=0?e:Vte(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function fz(e){return On(e)?e:ja(+e)}function Z4e(){var e=l=>l[0],t=l=>l[1],n=GS,r=[-1,-1],i=960,s=500,o=2;function a(l,u){const c=D0e(r[0],l,e)>>o,d=D0e(r[1],l,t)>>o,f=c?c+2:0,h=d?d+2:0,p=2*f+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let b=g;l.forEach(w=>{const E=f+(+e(w)>>o),x=h+(+t(w)>>o);E>=0&&E<p&&x>=0&&x<m&&(g[E+x*p]+=+n(w))}),c>0&&d>0?(Y_(p,m,g,y,c),K_(p,m,y,g,d),Y_(p,m,g,y,c),K_(p,m,y,g,d),Y_(p,m,g,y,c),K_(p,m,y,g,d)):c>0?(Y_(p,m,g,y,c),Y_(p,m,y,g,c),Y_(p,m,g,y,c),b=y):d>0&&(K_(p,m,g,y,d),K_(p,m,y,g,d),K_(p,m,g,y,d),b=y);const _=u?Math.pow(2,-2*o):1/tI(b);for(let w=0,E=p*m;w<E;++w)b[w]*=_;return{values:b,scale:1<<o,width:p,height:m,x1:f,y1:h,x2:f+(i>>o),y2:h+(s>>o)}}return a.x=function(l){return arguments.length?(e=fz(l),a):e},a.y=function(l){return arguments.length?(t=fz(l),a):t},a.weight=function(l){return arguments.length?(n=fz(l),a):n},a.size=function(l){if(!arguments.length)return[i,s];var u=+l[0],c=+l[1];return u>=0&&c>=0||Ve("invalid size"),i=u,s=c,a},a.cellSize=function(l){return arguments.length?((l=+l)>=1||Ve("invalid cell size"),o=Math.floor(Math.log(l)/Math.LN2),a):1<<o},a.bandwidth=function(l){return arguments.length?(l=wt(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&Ve("invalid bandwidth"),r=l,a):r},a}function Y_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,l=0;a<e+i;++a)a<e&&(l+=n[a+o*e]),a>=i&&(a>=s&&(l-=n[a-s+o*e]),r[a-i+o*e]=l/Math.min(a+1,e-1+s-a,s))}function K_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,l=0;a<t+i;++a)a<t&&(l+=n[o+a*e]),a>=i&&(a>=s&&(l-=n[o+(a-s)*e]),r[o+(a-i)*e]=l/Math.min(a+1,t-1+s-a,s))}function Tre(e){Me.call(this,null,e)}Tre.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const JWt=["x","y","weight","size","cellSize","bandwidth"];function eje(e,t){return JWt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ht(Tre,Me,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=ZWt(r,e.groupby),s=(e.groupby||[]).map(fs),o=eje(Z4e(),e),a=e.as||"grid",l=[];function u(c,d){for(let f=0;f<s.length;++f)c[s[f]]=d[f];return c}return l=i.map(c=>$r(u({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function ZWt(e,t){var n=[],r=c=>c(a),i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function Cre(e){Me.call(this,null,e)}Cre.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ht(Cre,Me,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=X4e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||Q4e(e.count||10,e.nice,!!i),o=e.size,a,l;return i||(i=t.materialize(t.SOURCE).source,a=eje(Z4e(),e)(i,!0),l=J4e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=We(s)?s:s(i),i=r.size(o)(i,s),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map($r),n}});const Yq="Feature",Are="FeatureCollection",eGt="MultiPoint";function Ire(e){Me.call(this,null,e)}Ire.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ht(Ire,Me,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Fa,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(Pa(a))||s&&t.modified(Pa(s))||o&&t.modified(Pa(o)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(l,c=>n.push(a(c))),s&&o&&(t.visit(l,c=>{var d=s(c),f=o(c);d!=null&&f!=null&&(d=+d)===d&&(f=+f)===f&&r.push([d,f])}),n=n.concat({type:Yq,geometry:{type:eGt,coordinates:r}})),this.value={type:Are,features:n}}});function kre(e){Me.call(this,null,e)}kre.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ht(kre,Me,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Fa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=K4e(e.projection),n.materialize().reflow()):o=i===Fa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=tGt(r,e.pointRadius);return n.visit(o,l=>l[s]=r(i(l))),r.pointRadius(a),n.modifies(s)}});function tGt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Rre(e){Me.call(this,null,e)}Rre.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ht(Rre,Me,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],l;function u(c){const d=n([r(c),i(c)]);d?(c[o]=d[0],c[a]=d[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(s)}});function Pre(e){Me.call(this,null,e)}Pre.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ht(Pre,Me,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=nGt(K4e(e.projection),e.field||td("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function nGt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function Nre(e){Me.call(this,[],e),this.generator=hbt()}Nre.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ht(Nre,Me,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)On(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(eFe(n[0],i)):t.add.push($r(i)),n[0]=i,t}});function Ore(e){Me.call(this,null,e)}Ore.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ht(Ore,Me,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Fa,s=iGt(e.opacity,e),o=rGt(e.color,e),a=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Nh(n.map(u=>Nh(i(u).values))):0};return n.forEach(u=>{const c=i(u),d=Nn({},u,l);r||(d.$max=Nh(c.values||[])),u[a]=sGt(c,d,o.dep?o:ja(o(d)),s.dep?s:ja(s(d)))}),t.reflow(!0).modifies(a)}});function rGt(e,t){let n;return On(e)?(n=r=>oy(e(r,t)),n.dep=tje(e)):n=ja(oy(e||"#888")),n}function iGt(e,t){let n;return On(e)?(n=r=>e(r,t),n.dep=tje(e)):e?n=ja(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function tje(e){if(!On(e))return!1;const t=Tf(Pa(e));return t.$x||t.$y||t.$value||t.$max}function sGt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,l=e.x2||i,u=e.y2||s,c=e.values,d=c?g=>c[g]:l0,f=Y0(l-o,u-a),h=f.getContext("2d"),p=h.getImageData(0,0,l-o,u-a),m=p.data;for(let g=a,y=0;g<u;++g){t.$y=g-a;for(let b=o,_=g*i;b<l;++b,y+=4){t.$x=b-o,t.$value=d(b+_);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),f}function nje(e){Me.call(this,null,e),this.modified(!0)}ht(nje,Me,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=aGt(e.type),Gq.forEach(r=>{e[r]!=null&&M0e(n,r,e[r])})):Gq.forEach(r=>{e.modified(r)&&M0e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&oGt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function oGt(e,t){const n=lGt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function aGt(e){const t=xre((e||"mercator").toLowerCase());return t||Ve("Unrecognized projection type: "+e),t()}function M0e(e,t,n){On(e[t])&&e[t](n)}function lGt(e){return e=wt(e),e.length===1?e[0]:{type:Are,features:e.reduce((t,n)=>t.concat(uGt(n)),[])}}function uGt(e){return e.type===Are?e.features:wt(e).filter(t=>t!=null).map(t=>t.type===Yq?t:{type:Yq,geometry:t})}const cGt=Object.freeze(Object.defineProperty({__proto__:null,contour:Cre,geojson:Ire,geopath:kre,geopoint:Rre,geoshape:Pre,graticule:Nre,heatmap:Ore,isocontour:Sre,kde2d:Tre,projection:nje},Symbol.toStringTag,{value:"Module"})),$0e={center:r1t,collide:E1t,nbody:O1t,link:S1t,x:D1t,y:M1t},h2="forces",Kq=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],dGt=["static","iterations"],rje=["x","y","vx","vy"];function Dre(e){Me.call(this,null,e)}Dre.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:rje}]};ht(Dre,Me,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(Kq),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&ije(n,e,0,t)):(this.value=n=hGt(t.source,e),n.on("tick",fGt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(dGt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,l=0,u=a.length,c;l<u;++l)if(c=a[l],!(c.name!==h2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(rje)}});function fGt(e,t){return()=>e.touch(t).run()}function hGt(e,t){const n=N1t(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),ije(n,t,!0).on("end",()=>s=!0)}function ije(e,t,n,r){var i=wt(t.forces),s,o,a,l;for(s=0,o=Kq.length;s<o;++s)a=Kq[s],a!==h2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)l=h2+s,a=n||t.modified(h2,s)?mGt(i[s]):r&&pGt(i[s],r)?e.force(l):null,a&&e.force(l,a);for(o=e.numForces||0;s<o;++s)e.force(h2+s,null);return e.numForces=i.length,e}function pGt(e,t){var n,r;for(n in e)if(On(r=e[n])&&t.modified(Pa(r)))return 1;return 0}function mGt(e){var t,n;Vt($0e,e.force)||Ve("Unrecognized force: "+e.force),t=$0e[e.force]();for(n in e)On(t[n])&&gGt(t[n],e[n],e);return t}function gGt(e,t,n){e(On(t)?r=>t(r,n):t)}const yGt=Object.freeze(Object.defineProperty({__proto__:null,force:Dre},Symbol.toStringTag,{value:"Module"}));function Xq(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Mre(e){Me.call(this,null,e)}Mre.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const vGt=e=>e.values;ht(Mre,Me,{transform(e,t){t.source||Ve("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&nj(o.data)&&i.rem.push(o.data)}),this.value=s=XQ({values:wt(e.keys).reduce((o,a)=>(o.key(a),o),bGt()).entries(i.source)},vGt),n&&s.each(o=>{o.children&&(o=$r(o.data),i.add.push(o),i.source.push(o))}),Xq(s,zt,zt)),i.source.root=s,i}});function bGt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],l={},u={};let c=-1,d,f,h;for(;++c<o;)d=a(f=i[c])+"",(h=l[d])?h.push(f):l[d]=[f];for(d in l)u[d]=n(l[d],s);return u}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function gg(e){Me.call(this,null,e)}const _Gt=(e,t)=>e.parent===t.parent?1:2;ht(gg,Me,{transform(e,t){(!t.source||!t.source.root)&&Ve(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(s_(e.sort,o=>o.data)),wGt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?_Gt:GS);try{this.value=n(i)}catch(o){Ve(o)}return i.each(o=>EGt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function wGt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function EGt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const Qq=["x","y","r","depth","children"];function $re(e){gg.call(this,e)}$re.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Qq.length,default:Qq}]};ht($re,gg,{layout:M_t,params:["radius","size","padding"],fields:Qq});const Jq=["x0","y0","x1","y1","depth","children"];function Lre(e){gg.call(this,e)}Lre.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Jq.length,default:Jq}]};ht(Lre,gg,{layout:$_t,params:["size","round","padding"],fields:Jq});function Fre(e){Me.call(this,null,e)}Fre.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ht(Fre,Me,{transform(e,t){t.source||Ve("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?Xq(hfe().id(e.key).parentId(e.parentKey)(i.source),e.key,nd):Xq(hfe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const L0e={tidy:W_t,cluster:i_t},Zq=["x","y","depth","children"];function jre(e){gg.call(this,e)}jre.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Zq.length,default:Zq}]};ht(jre,gg,{layout(e){const t=e||"tidy";if(Vt(L0e,t))return L0e[t]();Ve("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Zq});function Bre(e){Me.call(this,[],e)}Bre.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ht(Bre,Me,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Ve("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[zt(o)]=1),r.each(o=>{const a=o.data,l=o.parent&&o.parent.data;l&&s[zt(a)]&&s[zt(l)]&&i.add.push($r({source:l,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[zt(o)]=1),n.forEach(o=>{(s[zt(o.source)]||s[zt(o.target)])&&i.mod.push(o)})),i}});const F0e={binary:Y_t,dice:Jk,slice:S6,slicedice:K_t,squarify:aIe,resquarify:X_t},eW=["x0","y0","x1","y1","depth","children"];function zre(e){gg.call(this,e)}zre.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:eW.length,default:eW}]};ht(zre,gg,{layout(){const e=G_t();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Vt(F0e,t)?e.tile(F0e[t]):Ve("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:eW});const xGt=Object.freeze(Object.defineProperty({__proto__:null,nest:Mre,pack:$re,partition:Lre,stratify:Fre,tree:jre,treelinks:Bre,treemap:zre},Symbol.toStringTag,{value:"Module"})),hz=4278190080;function SGt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function TGt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,l=Y0(s,o).getContext("2d"),u=Y0(s,o).getContext("2d"),c=a&&Y0(s,o).getContext("2d");n.forEach(C=>jD(l,C,!1)),jD(u,t,!1),a&&jD(c,t,!0);const d=pz(l,s,o),f=pz(u,s,o),h=a&&pz(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,b,_,w,E,x,S;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=d[w]&hz,S=f[w]&hz,x=a&&h[w]&hz,(E||x||S)&&(b=e(g),_=e(y),!i&&(E||S)&&p.set(b,_),a&&(E||x)&&m.set(b,_));return[p,m]}function pz(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function jD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>jD(e,s.items,n))}):uc[r].draw(e,{items:n?t.map(CGt):t})}function CGt(e){const t=rj(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Fp=5,Ga=31,ZI=32,Xg=new Uint32Array(ZI+1),zd=new Uint32Array(ZI+1);zd[0]=0;Xg[0]=~zd[0];for(let e=1;e<=ZI;++e)zd[e]=zd[e-1]<<1|1,Xg[e]=~zd[e];function AGt(e,t){const n=new Uint32Array(~~((e*t+ZI)/ZI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Fp]&1<<(a&Ga)},set:(s,o)=>{const a=o*e+s;r(a>>>Fp,1<<(a&Ga))},clear:(s,o)=>{const a=o*e+s;i(a>>>Fp,~(1<<(a&Ga)))},getRange:(s,o,a,l)=>{let u=l,c,d,f,h;for(;u>=o;--u)if(c=u*e+s,d=u*e+a,f=c>>>Fp,h=d>>>Fp,f===h){if(n[f]&Xg[c&Ga]&zd[(d&Ga)+1])return!0}else{if(n[f]&Xg[c&Ga]||n[h]&zd[(d&Ga)+1])return!0;for(let p=f+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>Fp,f=c>>>Fp,d===f)r(d,Xg[u&Ga]&zd[(c&Ga)+1]);else for(r(d,Xg[u&Ga]),r(f,zd[(c&Ga)+1]),h=d+1;h<f;++h)r(h,4294967295)},clearRange:(s,o,a,l)=>{let u,c,d,f,h;for(;o<=l;++o)if(u=o*e+s,c=o*e+a,d=u>>>Fp,f=c>>>Fp,d===f)i(d,zd[u&Ga]|Xg[(c&Ga)+1]);else for(i(d,zd[u&Ga]),i(f,Xg[(c&Ga)+1]),h=d+1;h<f;++h)i(h,0)},outOfBounds:(s,o,a,l)=>s<0||o<0||l>=t||a>=e}}function IGt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>AGt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function kGt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,l=a.length,u=o.datum.fontSize,c=Hu.width(o.datum,o.datum.text);let d=0,f,h,p,m,g,y,b;for(let _=0;_<l;++_)f=a[_].x,p=a[_].y,h=a[_].x2===void 0?f:a[_].x2,m=a[_].y2===void 0?p:a[_].y2,g=(f+h)/2,y=(p+m)/2,b=Math.abs(h-f+m-p),b>=d&&(d=b,o.x=g,o.y=y);return g=c/2,y=u/2,f=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",f<0&&h<=i?o.align="left":0<=f&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function oL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function S0(e,t,n,r,i,s,o,a){const l=i*s/(r*2),u=e(t-l),c=e(t+l),d=e(n-(s=s/2)),f=e(n+s);return o.outOfBounds(u,d,c,f)||o.getRange(u,d,c,f)||a&&a.getRange(u,d,c,f)}function RGt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function l(u,c,d,f,h){const p=e.invert(u),m=e.invert(c);let g=d,y=s,b;if(!oL(p,m,f,h,i,s)&&!S0(e,p,m,h,f,g,o,a)&&!S0(e,p,m,h,f,h,o,null)){for(;y-g>=1;)b=(g+y)/2,S0(e,p,m,h,f,b,o,a)?y=b:g=b;if(g>d)return[p,m,g,!0]}}return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=Hu.width(u.datum,u.datum.text);let p=n?f:0,m=!1,g=!1,y=0,b,_,w,E,x,S,C,A,R,P,L,k,$,D,M,B,z;for(let U=0;U<d;++U){for(b=c[U].x,w=c[U].y,_=c[U].x2===void 0?b:c[U].x2,E=c[U].y2===void 0?w:c[U].y2,b>_&&(z=b,b=_,_=z),w>E&&(z=w,w=E,E=z),R=e(b),L=e(_),P=~~((R+L)/2),k=e(w),D=e(E),$=~~((k+D)/2),C=P;C>=R;--C)for(A=$;A>=k;--A)B=l(C,A,p,h,f),B&&([u.x,u.y,p,m]=B);for(C=P;C<=L;++C)for(A=$;A<=D;++A)B=l(C,A,p,h,f),B&&([u.x,u.y,p,m]=B);!m&&!n&&(M=Math.abs(_-b+E-w),x=(b+_)/2,S=(w+E)/2,M>=y&&!oL(x,S,h,f,i,s)&&!S0(e,x,S,f,h,f,o,null)&&(y=M,u.x=x,u.y=S,g=!0))}return m||g?(x=h/2,S=f/2,o.setRange(e(u.x-x),e(u.y-S),e(u.x+x),e(u.y+S)),u.align="center",u.baseline="middle",!0):!1}}const PGt=[-1,-1,1,1],NGt=[-1,1,-1,1];function OGt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=e.bitmap();return function(u){const c=u.datum.datum.items[r].items,d=c.length,f=u.datum.fontSize,h=Hu.width(u.datum,u.datum.text),p=[];let m=n?f:0,g=!1,y=!1,b=0,_,w,E,x,S,C,A,R,P,L,k,$;for(let D=0;D<d;++D){for(_=c[D].x,E=c[D].y,w=c[D].x2===void 0?_:c[D].x2,x=c[D].y2===void 0?E:c[D].y2,p.push([e((_+w)/2),e((E+x)/2)]);p.length;)if([A,R]=p.pop(),!(o.get(A,R)||a.get(A,R)||l.get(A,R))){l.set(A,R);for(let M=0;M<4;++M)S=A+PGt[M],C=R+NGt[M],l.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(A),C=e.invert(R),P=m,L=s,!oL(S,C,h,f,i,s)&&!S0(e,S,C,f,h,P,o,a)&&!S0(e,S,C,f,h,f,o,null)){for(;L-P>=1;)k=(P+L)/2,S0(e,S,C,f,h,k,o,a)?L=k:P=k;P>m&&(u.x=S,u.y=C,m=P,g=!0)}}!g&&!n&&($=Math.abs(w-_+x-E),S=(_+w)/2,C=(E+x)/2,$>=b&&!oL(S,C,h,f,i,s)&&!S0(e,S,C,f,h,f,o,null)&&(b=$,u.x=S,u.y=C,y=!0))}return g||y?(S=h/2,C=f/2,o.setRange(e(u.x-S),e(u.y-C),e(u.x+S),e(u.y+C)),u.align="center",u.baseline="middle",!0):!1}}const DGt=["right","center","left"],MGt=["bottom","middle","top"];function $Gt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],l=r.length;return function(u){const c=u.boundary,d=u.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let f=u.textWidth??0,h,p,m,g,y,b,_,w,E,x,S,C,A,R,P;for(let L=0;L<l;++L){if(h=(n[L]&3)-1,p=(n[L]>>>2&3)-1,m=h===0&&p===0||r[L]<0,g=h&&p?Math.SQRT1_2:1,y=r[L]<0?-1:1,b=c[1+h]+r[L]*h*g,S=c[4+p]+y*d*p/2+r[L]*p*g,w=S-d/2,E=S+d/2,C=e(b),R=e(w),P=e(E),!f)if(j0e(C,C,R,P,o,a,b,b,w,E,c,m))f=Hu.width(u.datum,u.datum.text);else continue;if(x=b+y*f*h/2,b=x-f/2,_=x+f/2,C=e(b),A=e(_),j0e(C,A,R,P,o,a,b,_,w,E,c,m))return u.x=h?h*y<0?_:b:x,u.y=p?p*y<0?E:w:S,u.align=DGt[h*y+1],u.baseline=MGt[p*y+1],o.setRange(C,R,A,P),!0}return!1}}function j0e(e,t,n,r,i,s,o,a,l,u,c,d){return!(i.outOfBounds(e,n,t,r)||(d&&s||i).getRange(e,n,t,r))}const mz=0,gz=4,yz=8,vz=0,bz=1,_z=2,LGt={"top-left":mz+vz,top:mz+bz,"top-right":mz+_z,left:gz+vz,middle:gz+bz,right:gz+_z,"bottom-left":yz+vz,bottom:yz+bz,"bottom-right":yz+_z},FGt={naive:kGt,"reduced-search":RGt,floodfill:OGt};function jGt(e,t,n,r,i,s,o,a,l,u,c){if(!e.length)return e;const d=Math.max(r.length,i.length),f=BGt(r,d),h=zGt(i,d),p=UGt(e[0].datum),m=p==="group"&&e[0].datum.items[l].marktype,g=m==="area",y=VGt(p,m,a,l),b=u===null||u===1/0,_=g&&c==="naive";let w=-1,E=-1;const x=e.map(R=>{const P=b?Hu.width(R,R.text):void 0;return w=Math.max(w,P),E=Math.max(E,R.fontSize),{datum:R,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(R),textWidth:P}});u=u===null||u===1/0?Math.max(w,E)+Math.max(...r):u;const S=IGt(t[0],t[1],u);let C;if(!_){n&&x.sort((L,k)=>n(L.datum,k.datum));let R=!1;for(let L=0;L<h.length&&!R;++L)R=h[L]===5||f[L]<0;const P=(p&&o||g)&&e.map(L=>L.datum);C=s.length||P?TGt(S,P||[],s,R,g):SGt(S,o&&x)}const A=g?FGt[c](S,C,o,l):$Gt(S,C,h,f);return x.forEach(R=>R.opacity=+A(R)),x}function BGt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function zGt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=LGt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function UGt(e){return e&&e.mark&&e.mark.marktype}function VGt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const tW=["x","y","opacity","align","baseline"],sje=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Ure(e){Me.call(this,null,e)}Ure.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:sje},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:tW.length,default:tW}]};ht(Ure,Me,{transform(e,t){function n(s){const o=e[s];return On(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Ve("Size parameter should be specified as a [width, height] array.");const i=e.as||tW;return jGt(t.materialize(t.SOURCE).source||[],e.size,e.sort,wt(e.offset==null?1:e.offset),wt(e.anchor||sje),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const HGt=Object.freeze(Object.defineProperty({__proto__:null,label:Ure},Symbol.toStringTag,{value:"Module"}));function oje(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,l,u;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(a);return n}function Vre(e){Me.call(this,null,e)}Vre.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ht(Vre,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=oje(r,e.groupby),s=(e.groupby||[]).map(fs),o=s.length,a=e.as||[fs(e.x),fs(e.y)],l=[];i.forEach(u=>{vFe(u,e.x,e.y,e.bandwidth||.3).forEach(c=>{const d={};for(let f=0;f<o;++f)d[s[f]]=u.dims[f];d[a[0]]=c[0],d[a[1]]=c[1],l.push($r(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const nW={constant:tne,linear:nne,log:pFe,exp:mFe,pow:gFe,quad:rne,poly:yFe},qGt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Hre(e){Me.call(this,null,e)}Hre.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(nW)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ht(Hre,Me,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=oje(r,e.groupby),s=(e.groupby||[]).map(fs),o=e.method||"linear",a=e.order==null?3:e.order,l=qGt(o,a),u=e.as||[fs(e.x),fs(e.y)],c=nW[o],d=[];let f=e.extent;Vt(nW,o)||Ve("Invalid regression method: "+o),f!=null&&o==="log"&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),i.forEach(h=>{if(h.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){d.push($r({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=f||tp(h,e.x),y=b=>{const _={};for(let w=0;w<s.length;++w)_[s[w]]=h.dims[w];_[u[0]]=b[0],_[u[1]]=b[1],d.push($r(_))};o==="linear"||o==="constant"?g.forEach(b=>y([b,m.predict(b)])):cj(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const WGt=Object.freeze(Object.defineProperty({__proto__:null,loess:Vre,regression:Hre},Symbol.toStringTag,{value:"Module"}));function qre(e){Me.call(this,null,e)}qre.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const GGt=[-1e5,-1e5,1e5,1e5];ht(qre,Me,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:GGt;const s=this.value=FQ.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const l=s.cellPolygon(o);r[o][n]=l&&!KGt(l)?YGt(l):null}return t.reflow(e.modified()).modifies(n)}});function YGt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function KGt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const XGt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:qre},Symbol.toStringTag,{value:"Module"}));var wz=Math.PI/180,p2=64,BD=2048;function QGt(){var e=[256,256],t,n,r,i,s,o,a,l=aje,u=[],c=Math.random,d={};d.layout=function(){for(var p=f(Y0()),m=rYt((e[0]>>5)*e[1]),g=null,y=u.length,b=-1,_=[],w=u.map(x=>({text:t(x),font:n(x),style:i(x),weight:s(x),rotate:o(x),size:~~(r(x)+1e-14),padding:a(x),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:x})).sort((x,S)=>S.size-x.size);++b<y;){var E=w[b];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,JGt(p,E,w,b),E.hasText&&h(m,E,g)&&(_.push(E),g?eYt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return _};function f(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(p2<<5)/m,p.height=BD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,b=m.y,_=Math.hypot(e[0],e[1]),w=l(e),E=c()<.5?1:-1,x=-E,S,C,A;(S=w(x+=E))&&(C=~~S[0],A=~~S[1],!(Math.min(Math.abs(C),Math.abs(A))>=_));)if(m.x=y+C,m.y=b+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!ZGt(m,p,e[0]))&&(!g||tYt(m,g))){for(var R=m.sprite,P=m.width>>5,L=e[0]>>5,k=m.x-(P<<4),$=k&127,D=32-$,M=m.y1-m.y0,B=(m.y+m.y0)*L+(k>>5),z,U=0;U<M;U++){z=0;for(var O=0;O<=P;O++)p[B+O]|=z<<D|(O<P?(z=R[U*P+O])>>>$:0);B+=L}return m.sprite=null,!0}return!1}return d.words=function(p){return arguments.length?(u=p,d):u},d.size=function(p){return arguments.length?(e=[+p[0],+p[1]],d):e},d.font=function(p){return arguments.length?(n=Pv(p),d):n},d.fontStyle=function(p){return arguments.length?(i=Pv(p),d):i},d.fontWeight=function(p){return arguments.length?(s=Pv(p),d):s},d.rotate=function(p){return arguments.length?(o=Pv(p),d):o},d.text=function(p){return arguments.length?(t=Pv(p),d):t},d.spiral=function(p){return arguments.length?(l=iYt[p]||p,d):l},d.fontSize=function(p){return arguments.length?(r=Pv(p),d):r},d.padding=function(p){return arguments.length?(a=Pv(p),d):a},d.random=function(p){return arguments.length?(c=p,d):c},d}function JGt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(p2<<5)/s,BD/s);var o=0,a=0,l=0,u=n.length,c,d,f,h,p;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,f=t.size<<1,t.rotate){var m=Math.sin(t.rotate*wz),g=Math.cos(t.rotate*wz),y=c*g,b=c*m,_=f*g,w=f*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,f=~~Math.max(Math.abs(b+_),Math.abs(b-_))}else c=c+31>>5<<5;if(f>l&&(l=f),o+c>=p2<<5&&(o=0,a+=l,l=0),a+f>=BD)break;i.translate((o+(c>>1))/s,(a+(f>>1))/s),t.rotate&&i.rotate(t.rotate*wz),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=f,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=f>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(p2<<5)/s,BD/s).data,x=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,d=c>>5,f=t.y1-t.y0,h=0;h<f*d;h++)x[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<f;p++){for(h=0;h<c;h++){var A=d*p+(h>>5),R=E[(a+p)*(p2<<5)+(o+h)<<2]?1<<31-h%32:0;x[A]|=R,S|=R}S?C=p:(t.y0++,f--,p--,a++)}t.y1=t.y0+C,t.sprite=x.slice(0,(t.y1-t.y0)*d)}}}function ZGt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,l=e.y1-e.y0,u=(e.y+e.y0)*n+(s>>5),c,d=0;d<l;d++){c=0;for(var f=0;f<=i;f++)if((c<<a|(f<i?(c=r[d*i+f])>>>o:0))&t[u+f])return!0;u+=n}return!1}function eYt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function tYt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function aje(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function nYt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function rYt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Pv(e){return typeof e=="function"?e:function(){return e}}var iYt={archimedean:aje,rectangular:nYt};const lje=["x","y","font","fontSize","fontStyle","fontWeight","angle"],sYt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Wre(e){Me.call(this,QGt(),e)}Wre.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:lje}]};ht(Wre,Me,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Ve("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return On(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||sYt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||lje;let a=e.fontSize||14,l;if(On(a)?l=e.fontSizeRange:a=ja(a),l){const p=a,m=Rr("sqrt")().domain(tp(i,p)).range(l);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const u=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(id).layout(),c=s.size(),d=c[0]>>1,f=c[1]>>1,h=u.length;for(let p=0,m,g;p<h;++p)m=u[p],g=m.datum,g[o[0]]=m.x+d,g[o[1]]=m.y+f,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const oYt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Wre},Symbol.toStringTag,{value:"Module"})),aYt=e=>new Uint8Array(e),lYt=e=>new Uint16Array(e),mA=e=>new Uint32Array(e);function uYt(){let e=8,t=[],n=mA(0),r=cO(0,e),i=cO(0,e);return{data:()=>t,seen:()=>n=cYt(n,t.length),add(s){for(let o=0,a=t.length,l=s.length,u;o<l;++o)u=s[o],u._index=a++,t.push(u)},remove(s,o){const a=t.length,l=Array(a-s),u=t;let c,d,f;for(d=0;!o[d]&&d<a;++d)l[d]=t[d],u[d]=d;for(f=d;d<a;++d)c=t[d],o[d]?u[d]=-1:(u[d]=f,r[f]=r[d],i[f]=i[d],l[f]=c,c._index=f++),r[d]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=cO(s,e,r),i=cO(s,e))}}}function cYt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function cO(e,t,n){const r=(t<257?aYt:t<65537?lYt:mA)(e);return n&&r.set(n),r}function B0e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),l=i.index,u=a[0],c=a[1],d=l.length;let f;for(f=0;f<u;++f)s[l[f]]|=r;for(f=c;f<d;++f)s[l[f]]|=r;return o}}}function z0e(){let e=mA(0),t=[],n=0;function r(a,l,u){if(!l.length)return[];const c=n,d=l.length,f=mA(d);let h=Array(d),p,m,g;for(g=0;g<d;++g)h[g]=a(l[g]),f[g]=g;if(h=dYt(h,f),c)p=t,m=e,t=Array(c+d),e=mA(c+d),fYt(u,p,m,c,h,f,d,t,e);else{if(u>0)for(g=0;g<d;++g)f[g]+=u;t=h,e=f}return n=c+d,{index:f,value:h}}function i(a,l){const u=n;let c,d,f;for(d=0;!l[e[d]]&&d<u;++d);for(f=d;d<u;++d)l[c=e[d]]||(e[f]=c,t[f]=t[d],++f);n=u-a}function s(a){for(let l=0,u=n;l<u;++l)e[l]=a[e[l]]}function o(a,l){let u;return l?u=l.length:(l=t,u=n),[yyt(l,a[0],0,u),iy(l,a[1],0,u)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function dYt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),xyt(e,t)}function fYt(e,t,n,r,i,s,o,a,l){let u=0,c=0,d;for(d=0;u<r&&c<o;++d)t[u]<i[c]?(a[d]=t[u],l[d]=n[u++]):(a[d]=i[c],l[d]=s[c++]+e);for(;u<r;++u,++d)a[d]=t[u],l[d]=n[u];for(;c<o;++c,++d)a[d]=i[c],l[d]=s[c]+e}function Gre(e){Me.call(this,uYt(),e),this._indices=null,this._dims=null}Gre.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ht(Gre,Me,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,l,u;for(;a<o;++a)l=n[a].fname,u=i[l]||(i[l]=z0e()),s.push(B0e(u,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,l=a.curr(),u=a.prev(),c=a.all(),d=n.rem=n.add,f=n.mod,h=i.length,p={};let m,g,y,b,_,w,E,x,S;if(u.set(l),t.rem.length&&(_=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},b=t.mod,E=0,x=b.length;E<x;++E)w[b[E]._index]=1;for(E=0;E<h;++E)S=r[E],(!o[E]||e.modified("fields",E)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=z0e(),p[y]=m=g.insert(S,t.source,0)),o[E]=B0e(g,E,i[E]).onAdd(m,l));for(E=0,x=a.data().length;E<x;++E)_[E]||(u[E]!==l[E]?d.push(E):w[E]&&l[E]!==c&&f.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,l={},u=n.add,c=i.size()+r.length,d=s.length;let f=i.size(),h,p,m;i.resize(c,d),i.add(r);const g=i.curr(),y=i.prev(),b=i.all();for(h=0;h<d;++h)p=a[h].fname,m=l[p]||(l[p]=o[p].insert(a[h],r,f)),s[h].onAdd(m,g);for(;f<c;++f)y[f]=b,g[f]!==b&&u.push(f)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,l,u;for(a=0,l=o.length;a<l;++a)u=o[a]._index,i[u]!==s&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),l={},u=n.rem,c=t.rem;let d,f,h,p;for(d=0,f=c.length;d<f;++d)h=c[d]._index,l[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&u.push(h);for(h in r)r[h].remove(f,l);return this.reindex(t,f,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,l,u;for(n.filters=0,u=0;u<o;++u)e.modified("query",u)&&(l=u,++a);if(a===1)a=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,a=0;u<o;++u)e.modified("query",u)&&(a|=r[u].one,this.incrementAll(r[u],i[u],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),l=e.index(),u=e.bisect(e.range),c=e.bisect(t),d=c[0],f=c[1],h=u[0],p=u[1],m=e.one;let g,y,b;if(d<h)for(g=d,y=Math.min(h,f);g<y;++g)b=l[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(d>h)for(g=h,y=Math.min(d,p);g<y;++g)b=l[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;if(f>p)for(g=Math.max(d,p),y=f;g<y;++g)b=l[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;else if(f<p)for(g=Math.max(h,f),y=p;g<y;++g)b=l[g],s[b]!==n&&(a[b]=o[b],s[b]=n,r.push(b)),o[b]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),l=e.bisect(t),u=l[0],c=l[1],d=a[0],f=a[1],h=e.one;let p,m,g;if(u<d)for(p=u,m=Math.min(d,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(u>d)for(p=d,m=Math.min(u,f);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>f)for(p=Math.max(u,f),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<f)for(p=Math.max(d,c),m=f;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function Yre(e){Me.call(this,null,e)}Yre.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ht(Yre,Me,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),l=r.prev(),u=c=>a[c]&n?null:o[c];return s.filter(s.MOD,u),i&i-1?(s.filter(s.ADD,c=>{const d=a[c]&n;return!d&&d^l[c]&n?o[c]:null}),s.filter(s.REM,c=>{const d=a[c]&n;return d&&!(d^(d^l[c]&n))?o[c]:null})):(s.filter(s.ADD,u),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>u(c._index))}});const hYt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Gre,resolvefilter:Yre},Symbol.toStringTag,{value:"Module"})),pYt="RawCode",Sb="Literal",mYt="Property",gYt="Identifier",yYt="ArrayExpression",vYt="BinaryExpression",uje="CallExpression",bYt="ConditionalExpression",_Yt="LogicalExpression",wYt="MemberExpression",EYt="ObjectExpression",xYt="UnaryExpression";function Lf(e){this.type=e}Lf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=SYt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function SYt(e){switch(e.type){case yYt:return e.elements;case vYt:case _Yt:return[e.left,e.right];case uje:return[e.callee].concat(e.arguments);case bYt:return[e.test,e.consequent,e.alternate];case wYt:return[e.object,e.property];case EYt:return e.properties;case mYt:return[e.key,e.value];case xYt:return[e.argument];case gYt:case Sb:case pYt:default:return[]}}var xp,Mt,ze,Oa,Wr,Ij=1,QR=2,Tb=3,uv=4,kj=5,l_=6,Ml=7,JR=8,TYt=9;xp={};xp[Ij]="Boolean";xp[QR]="<end>";xp[Tb]="Identifier";xp[uv]="Keyword";xp[kj]="Null";xp[l_]="Numeric";xp[Ml]="Punctuator";xp[JR]="String";xp[TYt]="RegularExpression";var CYt="ArrayExpression",AYt="BinaryExpression",IYt="CallExpression",kYt="ConditionalExpression",cje="Identifier",RYt="Literal",PYt="LogicalExpression",NYt="MemberExpression",OYt="ObjectExpression",DYt="Property",MYt="UnaryExpression",bo="Unexpected token %0",$Yt="Unexpected number",LYt="Unexpected string",FYt="Unexpected identifier",jYt="Unexpected reserved word",BYt="Unexpected end of input",rW="Invalid regular expression",Ez="Invalid regular expression: missing /",dje="Octal literals are not allowed in strict mode.",zYt="Duplicate data property in object literal not allowed in strict mode",qo="ILLEGAL",ek="Disabled.",UYt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),VYt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Rj(e,t){if(!e)throw new Error("ASSERT: "+t)}function Kp(e){return e>=48&&e<=57}function Kre(e){return"0123456789abcdefABCDEF".includes(e)}function gA(e){return"01234567".includes(e)}function HYt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function tk(e){return e===10||e===13||e===8232||e===8233}function ZR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&UYt.test(String.fromCharCode(e))}function aL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&VYt.test(String.fromCharCode(e))}const qYt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function fje(){for(;ze<Oa;){const e=Mt.charCodeAt(ze);if(HYt(e)||tk(e))++ze;else break}}function iW(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ze<Oa&&Kre(Mt[ze])?(r=Mt[ze++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):Ar({},bo,qo);return String.fromCharCode(i)}function WYt(){var e,t,n,r;for(e=Mt[ze],t=0,e==="}"&&Ar({},bo,qo);ze<Oa&&(e=Mt[ze++],!!Kre(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Ar({},bo,qo),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function hje(){var e,t;for(e=Mt.charCodeAt(ze++),t=String.fromCharCode(e),e===92&&(Mt.charCodeAt(ze)!==117&&Ar({},bo,qo),++ze,e=iW("u"),(!e||e==="\\"||!ZR(e.charCodeAt(0)))&&Ar({},bo,qo),t=e);ze<Oa&&(e=Mt.charCodeAt(ze),!!aL(e));)++ze,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Mt.charCodeAt(ze)!==117&&Ar({},bo,qo),++ze,e=iW("u"),(!e||e==="\\"||!aL(e.charCodeAt(0)))&&Ar({},bo,qo),t+=e);return t}function GYt(){var e,t;for(e=ze++;ze<Oa;){if(t=Mt.charCodeAt(ze),t===92)return ze=e,hje();if(aL(t))++ze;else break}return Mt.slice(e,ze)}function YYt(){var e,t,n;return e=ze,t=Mt.charCodeAt(ze)===92?hje():GYt(),t.length===1?n=Tb:qYt.hasOwnProperty(t)?n=uv:t==="null"?n=kj:t==="true"||t==="false"?n=Ij:n=Tb,{type:n,value:t,start:e,end:ze}}function xz(){var e=ze,t=Mt.charCodeAt(ze),n,r=Mt[ze],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ze,{type:Ml,value:String.fromCharCode(t),start:e,end:ze};default:if(n=Mt.charCodeAt(ze+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ze+=2,{type:Ml,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ze};case 33:case 61:return ze+=2,Mt.charCodeAt(ze)===61&&++ze,{type:Ml,value:Mt.slice(e,ze),start:e,end:ze}}}if(o=Mt.substr(ze,4),o===">>>=")return ze+=4,{type:Ml,value:o,start:e,end:ze};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return ze+=3,{type:Ml,value:s,start:e,end:ze};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ze+=2,{type:Ml,value:i,start:e,end:ze};if(i==="//"&&Ar({},bo,qo),"<>=!+-*%&|^/".includes(r))return++ze,{type:Ml,value:r,start:e,end:ze};Ar({},bo,qo)}function KYt(e){let t="";for(;ze<Oa&&Kre(Mt[ze]);)t+=Mt[ze++];return t.length===0&&Ar({},bo,qo),ZR(Mt.charCodeAt(ze))&&Ar({},bo,qo),{type:l_,value:parseInt("0x"+t,16),start:e,end:ze}}function XYt(e){let t="0"+Mt[ze++];for(;ze<Oa&&gA(Mt[ze]);)t+=Mt[ze++];return(ZR(Mt.charCodeAt(ze))||Kp(Mt.charCodeAt(ze)))&&Ar({},bo,qo),{type:l_,value:parseInt(t,8),octal:!0,start:e,end:ze}}function U0e(){var e,t,n;if(n=Mt[ze],Rj(Kp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ze,e="",n!=="."){if(e=Mt[ze++],n=Mt[ze],e==="0"){if(n==="x"||n==="X")return++ze,KYt(t);if(gA(n))return XYt(t);n&&Kp(n.charCodeAt(0))&&Ar({},bo,qo)}for(;Kp(Mt.charCodeAt(ze));)e+=Mt[ze++];n=Mt[ze]}if(n==="."){for(e+=Mt[ze++];Kp(Mt.charCodeAt(ze));)e+=Mt[ze++];n=Mt[ze]}if(n==="e"||n==="E")if(e+=Mt[ze++],n=Mt[ze],(n==="+"||n==="-")&&(e+=Mt[ze++]),Kp(Mt.charCodeAt(ze)))for(;Kp(Mt.charCodeAt(ze));)e+=Mt[ze++];else Ar({},bo,qo);return ZR(Mt.charCodeAt(ze))&&Ar({},bo,qo),{type:l_,value:parseFloat(e),start:t,end:ze}}function QYt(){var e="",t,n,r,i,s=!1;for(t=Mt[ze],Rj(t==="'"||t==='"',"String literal must starts with a quote"),n=ze,++ze;ze<Oa;)if(r=Mt[ze++],r===t){t="";break}else if(r==="\\")if(r=Mt[ze++],!r||!tk(r.charCodeAt(0)))switch(r){case"u":case"x":Mt[ze]==="{"?(++ze,e+=WYt()):e+=iW(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:gA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),ze<Oa&&gA(Mt[ze])&&(s=!0,i=i*8+"01234567".indexOf(Mt[ze++]),"0123".includes(r)&&ze<Oa&&gA(Mt[ze])&&(i=i*8+"01234567".indexOf(Mt[ze++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Mt[ze]===`
`&&++ze;else{if(tk(r.charCodeAt(0)))break;e+=r}return t!==""&&Ar({},bo,qo),{type:JR,value:e,octal:s,start:n,end:ze}}function JYt(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";Ar({},rW)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Ar({},rW)}try{return new RegExp(e,t)}catch{return null}}function ZYt(){var e,t,n,r,i;for(e=Mt[ze],Rj(e==="/","Regular expression literal must start with a slash"),t=Mt[ze++],n=!1,r=!1;ze<Oa;)if(e=Mt[ze++],t+=e,e==="\\")e=Mt[ze++],tk(e.charCodeAt(0))&&Ar({},Ez),t+=e;else if(tk(e.charCodeAt(0)))Ar({},Ez);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||Ar({},Ez),i=t.substr(1,t.length-2),{value:i,literal:t}}function eKt(){var e,t,n;for(t="",n="";ze<Oa&&(e=Mt[ze],!!aL(e.charCodeAt(0)));)++ze,e==="\\"&&ze<Oa?Ar({},bo,qo):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Ar({},rW,n),{value:n,literal:t}}function tKt(){var e,t,n,r;return Wr=null,fje(),e=ze,t=ZYt(),n=eKt(),r=JYt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ze}}function nKt(e){return e.type===Tb||e.type===uv||e.type===Ij||e.type===kj}function pje(){if(fje(),ze>=Oa)return{type:QR,start:ze,end:ze};const e=Mt.charCodeAt(ze);return ZR(e)?YYt():e===40||e===41||e===59?xz():e===39||e===34?QYt():e===46?Kp(Mt.charCodeAt(ze+1))?U0e():xz():Kp(e)?U0e():xz()}function zl(){const e=Wr;return ze=e.end,Wr=pje(),ze=e.end,e}function mje(){const e=ze;Wr=pje(),ze=e}function rKt(e){const t=new Lf(CYt);return t.elements=e,t}function V0e(e,t,n){const r=new Lf(e==="||"||e==="&&"?PYt:AYt);return r.operator=e,r.left=t,r.right=n,r}function iKt(e,t){const n=new Lf(IYt);return n.callee=e,n.arguments=t,n}function sKt(e,t,n){const r=new Lf(kYt);return r.test=e,r.consequent=t,r.alternate=n,r}function Xre(e){const t=new Lf(cje);return t.name=e,t}function m2(e){const t=new Lf(RYt);return t.value=e.value,t.raw=Mt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function H0e(e,t,n){const r=new Lf(NYt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function oKt(e){const t=new Lf(OYt);return t.properties=e,t}function q0e(e,t,n){const r=new Lf(DYt);return r.key=t,r.value=n,r.kind=e,r}function aKt(e,t){const n=new Lf(MYt);return n.operator=e,n.argument=t,n.prefix=!0,n}function Ar(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(Rj(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=ze,n.description=i,n}function Pj(e){e.type===QR&&Ar(e,BYt),e.type===l_&&Ar(e,$Yt),e.type===JR&&Ar(e,LYt),e.type===Tb&&Ar(e,FYt),e.type===uv&&Ar(e,jYt),Ar(e,bo,e.value)}function Da(e){const t=zl();(t.type!==Ml||t.value!==e)&&Pj(t)}function Ci(e){return Wr.type===Ml&&Wr.value===e}function Sz(e){return Wr.type===uv&&Wr.value===e}function lKt(){const e=[];for(ze=Wr.start,Da("[");!Ci("]");)Ci(",")?(zl(),e.push(null)):(e.push(Cb()),Ci("]")||Da(","));return zl(),rKt(e)}function W0e(){ze=Wr.start;const e=zl();return e.type===JR||e.type===l_?(e.octal&&Ar(e,dje),m2(e)):Xre(e.value)}function uKt(){var e,t,n,r;if(ze=Wr.start,e=Wr,e.type===Tb)return n=W0e(),Da(":"),r=Cb(),q0e("init",n,r);if(e.type===QR||e.type===Ml)Pj(e);else return t=W0e(),Da(":"),r=Cb(),q0e("init",t,r)}function cKt(){var e=[],t,n,r,i={},s=String;for(ze=Wr.start,Da("{");!Ci("}");)t=uKt(),t.key.type===cje?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?Ar({},zYt):i[r]=!0,e.push(t),Ci("}")||Da(",");return Da("}"),oKt(e)}function dKt(){Da("(");const e=Qre();return Da(")"),e}const fKt={if:1};function hKt(){var e,t,n;if(Ci("("))return dKt();if(Ci("["))return lKt();if(Ci("{"))return cKt();if(e=Wr.type,ze=Wr.start,e===Tb||fKt[Wr.value])n=Xre(zl().value);else if(e===JR||e===l_)Wr.octal&&Ar(Wr,dje),n=m2(zl());else{if(e===uv)throw new Error(ek);e===Ij?(t=zl(),t.value=t.value==="true",n=m2(t)):e===kj?(t=zl(),t.value=null,n=m2(t)):Ci("/")||Ci("/=")?(n=m2(tKt()),mje()):Pj(zl())}return n}function pKt(){const e=[];if(Da("("),!Ci(")"))for(;ze<Oa&&(e.push(Cb()),!Ci(")"));)Da(",");return Da(")"),e}function mKt(){ze=Wr.start;const e=zl();return nKt(e)||Pj(e),Xre(e.value)}function gKt(){return Da("."),mKt()}function yKt(){Da("[");const e=Qre();return Da("]"),e}function vKt(){var e,t,n;for(e=hKt();;)if(Ci("."))n=gKt(),e=H0e(".",e,n);else if(Ci("("))t=pKt(),e=iKt(e,t);else if(Ci("["))n=yKt(),e=H0e("[",e,n);else break;return e}function G0e(){const e=vKt();if(Wr.type===Ml&&(Ci("++")||Ci("--")))throw new Error(ek);return e}function zD(){var e,t;if(Wr.type!==Ml&&Wr.type!==uv)t=G0e();else{if(Ci("++")||Ci("--"))throw new Error(ek);if(Ci("+")||Ci("-")||Ci("~")||Ci("!"))e=zl(),t=zD(),t=aKt(e.value,t);else{if(Sz("delete")||Sz("void")||Sz("typeof"))throw new Error(ek);t=G0e()}}return t}function Y0e(e){let t=0;if(e.type!==Ml&&e.type!==uv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function bKt(){var e,t,n,r,i,s,o,a,l,u;if(e=Wr,l=zD(),r=Wr,i=Y0e(r),i===0)return l;for(r.prec=i,zl(),t=[e,Wr],o=zD(),s=[l,r,o];(i=Y0e(Wr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,l=s.pop(),t.pop(),n=V0e(a,l,o),s.push(n);r=zl(),r.prec=i,s.push(r),t.push(Wr),n=zD(),s.push(n)}for(u=s.length-1,n=s[u],t.pop();u>1;)t.pop(),n=V0e(s[u-1].value,s[u-2],n),u-=2;return n}function Cb(){var e,t,n;return e=bKt(),Ci("?")&&(zl(),t=Cb(),Da(":"),n=Cb(),e=sKt(e,t,n)),e}function Qre(){const e=Cb();if(Ci(","))throw new Error(ek);return e}function Jre(e){Mt=e,ze=0,Oa=Mt.length,Wr=null,mje();const t=Qre();if(Wr.type!==QR)throw new Error("Unexpect token after expression.");return t}var gje={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function yje(e){function t(o,a,l,u){let c=e(a[0]);return l&&(c=l+"("+c+")",l.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(u<0?"":u===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,l){return u=>t(o,u,a,l)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Ve("Missing arguments to clamp function."),o.length>3&&Ve("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Ve("Missing arguments to if function."),o.length>3&&Ve("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function _Kt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function vje(e){e=e||{};const t=e.allowed?Tf(e.allowed):{},n=e.forbidden?Tf(e.forbidden):{},r=e.constants||gje,i=(e.functions||yje)(d),s=e.globalvar,o=e.fieldvar,a=On(s)?s:p=>`${s}["${p}"]`;let l={},u={},c=0;function d(p){if(Et(p))return p;const m=f[p.type];return m==null&&Ve("Unsupported type: "+p.type),m(p)}const f={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Vt(n,m)?Ve("Illegal identifier: "+m):Vt(r,m)?r[m]:Vt(t,m)?m:(l[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=d(p.object);m&&(c+=1);const y=d(p.property);return g===o&&(u[_Kt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Ve("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Vt(i,m)&&i[m];return y||Ve("Unrecognized function: "+m),On(y)?y(g):y+"("+g.map(d).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(d).join(",")+"]",BinaryExpression:p=>"("+d(p.left)+" "+p.operator+" "+d(p.right)+")",UnaryExpression:p=>"("+p.operator+d(p.argument)+")",ConditionalExpression:p=>"("+d(p.test)+"?"+d(p.consequent)+":"+d(p.alternate)+")",LogicalExpression:p=>"("+d(p.left)+p.operator+d(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(d).join(",")+"}",Property:p=>{c+=1;const m=d(p.key);return c-=1,m+":"+d(p.value)}};function h(p){const m={code:d(p),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},m}return h.functions=i,h.constants=r,h}const K0e=Symbol("vega_selection_getter");function bje(e){return(!e.getter||!e.getter[K0e])&&(e.getter=td(e.field),e.getter[K0e]=!0),e.getter}const Zre="intersect",X0e="union",wKt="vlMulti",EKt="vlPoint",Q0e="or",xKt="and",uh="_vgsid_",nk=td(uh),SKt="E",TKt="R",CKt="R-E",AKt="R-LE",IKt="R-RE",lL="index:unit";function J0e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=bje(a)(e),W0(o)&&(o=Ia(o)),W0(r[s])&&(r[s]=Ia(r[s])),We(r[s])&&W0(r[s][0])&&(r[s]=r[s].map(Ia)),a.type===SKt){if(We(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===TKt){if(!Uw(o,r[s]))return!1}else if(a.type===IKt){if(!Uw(o,r[s],!0,!1))return!1}else if(a.type===CKt){if(!Uw(o,r[s],!1,!1))return!1}else if(a.type===AKt&&!Uw(o,r[s],!1,!0))return!1;return!0}function kKt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[lL]&&r[lL].value:void 0,o=n===Zre,a=i.length,l=0,u,c,d,f,h;l<a;++l)if(u=i[l],s&&o){if(c=c||{},d=c[f=u.unit]||0,d===-1)continue;if(h=J0e(t,u),c[f]=h?-1:++d,h&&s.size===1)return!0;if(!h&&d===s.get(f).count)return!1}else if(h=J0e(t,u),o^h)return h;return a&&o}const _je=wS(nk),RKt=_je.left,PKt=_je.right;function NKt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[lL]&&r[lL].value:void 0,o=n===Zre,a=nk(t),l=RKt(i,a);if(l===i.length||nk(i[l])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(PKt(i,a)-l<s.size)return!1}return!0}function OKt(e,t){return e.map(n=>Nn(t.fields?{values:t.fields.map(r=>bje(r)(n.datum))}:{[uh]:nk(n.datum)},t))}function DKt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},l={},u,c,d,f,h,p,m,g,y,b,_=s.length,w=0,E,x;w<_;++w)if(u=s[w],f=u.unit,c=u.fields,d=u.values,c&&d){for(E=0,x=c.length;E<x;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[f]||(m[f]=[]),l[h.field]=y=h.type.charAt(0),b=Tz[`${y}_union`],m[f]=b(g,wt(d[E]));n&&(g=a[f]||(a[f]=[]),g.push(wt(d).reduce((S,C,A)=>(S[c[A].field]=C,S),{})))}else h=uh,p=nk(u),m=o[h]||(o[h]={}),g=m[f]||(m[f]=[]),g.push(p),n&&(g=a[f]||(a[f]=[]),g.push({[uh]:p}));if(t=t||X0e,o[uh]?o[uh]=Tz[`${uh}_${t}`](...Object.values(o[uh])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(C=>o[S][C]).reduce((C,A)=>C===void 0?A:Tz[`${l[S]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const S=r?EKt:wKt;o[S]=t===X0e?{[Q0e]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[xKt]:s.map(C=>({[Q0e]:a[C]}))}}return o}var Tz={[`${uh}_union`]:Nyt,[`${uh}_intersect`]:Ryt,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=Ia(t[0]),r=Ia(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=Ia(t[0]),r=Ia(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const MKt=":",$Kt="@";function eie(e,t,n,r){t[0].type!==Sb&&Ve("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&cr(t).value,o="unit",a=$Kt+o,l=MKt+i;s===Zre&&!Vt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Vt(r,l)||(r[l]=n.getData(i).tuplesRef())}function wje(e){const t=this.context.data[e];return t?t.values.value:[]}function LKt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function FKt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(nd).insert(t)),1}function jKt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const eP=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},BKt=eP("format"),Eje=eP("timeFormat"),zKt=eP("utcFormat"),UKt=eP("timeParse"),VKt=eP("utcParse"),dO=new Date(2e3,0,1);function Nj(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(dO.setYear(2e3),dO.setMonth(e),dO.setDate(t),Eje.call(this,dO,n))}function HKt(e){return Nj.call(this,e,1,"%B")}function qKt(e){return Nj.call(this,e,1,"%b")}function WKt(e){return Nj.call(this,0,2+e,"%A")}function GKt(e){return Nj.call(this,0,2+e,"%a")}const YKt=":",KKt="@",sW="%",xje="$";function tie(e,t,n,r){t[0].type!==Sb&&Ve("First argument to data functions must be a string literal.");const i=t[0].value,s=YKt+i;if(!Vt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function XKt(e,t,n,r){t[0].type!==Sb&&Ve("First argument to indata must be a string literal."),t[1].type!==Sb&&Ve("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=KKt+s;Vt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function ul(e,t,n,r){if(t[0].type===Sb)Z0e(n,r,t[0].value);else for(e in n.scales)Z0e(n,r,e)}function Z0e(e,t,n){const r=sW+n;if(!Vt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Sp(e,t){if(On(e))return e;if(Et(e)){const n=t.scales[e];return n&&EUt(n.value)?n.value:void 0}}function QKt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=ul,n._range=ul,n._scale=ul;const r=i=>"_["+(i.type===Sb?ut(sW+i.value):ut(sW)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function nie(e,t){return function(n,r,i){if(n){const s=Sp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const JKt=nie("area",W1t),ZKt=nie("bounds",X1t),eXt=nie("centroid",nbt);function tXt(e,t){const n=Sp(e,(t||this).context);return n&&n.scale()}function nXt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function rie(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function rXt(){return rie(this.context.dataflow,"warn",arguments)}function iXt(){return rie(this.context.dataflow,"info",arguments)}function sXt(){return rie(this.context.dataflow,"debug",arguments)}function Cz(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function oW(e){const t=oy(e),n=Cz(t.r),r=Cz(t.g),i=Cz(t.b);return .2126*n+.7152*r+.0722*i}function oXt(e,t){const n=oW(e),r=oW(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function aXt(){const e=[].slice.call(arguments);return e.unshift({}),Nn(...e)}function Sje(e,t){return e===t||e!==e&&t!==t?!0:We(e)?We(t)&&e.length===t.length?lXt(e,t):!1:bt(e)&&bt(t)?Tje(e,t):!1}function lXt(e,t){for(let n=0,r=e.length;n<r;++n)if(!Sje(e[n],t[n]))return!1;return!0}function Tje(e,t){for(const n in e)if(!Sje(e[n],t[n]))return!1;return!0}function eye(e){return t=>Tje(e,t)}function uXt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],l=a.input,u=o.stamp();let c=a.changes,d,f;if(o._trigger===!1||!(l.value.length||t||r))return 0;if((!c||c.stamp<u)&&(a.changes=c=o.changeset(),c.stamp=u,o.runAfter(()=>{a.modified=!0,o.pulse(l,c).run()},!0,1)),n&&(d=n===!0?nd:We(n)||nj(n)?n:eye(n),c.remove(d)),t&&c.insert(t),r&&(d=eye(r),l.value.some(d)?c.remove(d):c.insert(r)),i)for(f in s)c.modify(i,f,s[f]);return 1}function cXt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function dXt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const tye={};function fXt(e,t){const n=tye[t]||(tye[t]=td(t));return We(e)?e.map(n):n(e)}function iie(e){return We(e)||ArrayBuffer.isView(e)?e:null}function sie(e){return iie(e)||(Et(e)?e:null)}function hXt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return iie(e).join(...n)}function pXt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sie(e).indexOf(...n)}function mXt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sie(e).lastIndexOf(...n)}function gXt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sie(e).slice(...n)}function yXt(e,t,n){return On(n)&&Ve("Function argument passed to replace."),String(e).replace(t,n)}function vXt(e){return iie(e).slice().reverse()}function bXt(e,t,n){return kne(e||0,t||0,n||0)}function _Xt(e,t){const n=Sp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function wXt(e,t){const n=Sp(e,(t||this).context);return n?n.copy():void 0}function EXt(e,t){const n=Sp(e,(t||this).context);return n?n.domain():[]}function xXt(e,t,n){const r=Sp(e,(n||this).context);return r?We(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function SXt(e,t){const n=Sp(e,(t||this).context);return n&&n.range?n.range():[]}function TXt(e,t,n){const r=Sp(e,(n||this).context);return r?r(t):void 0}function CXt(e,t,n,r,i){e=Sp(e,(i||this).context);const s=m6e(t,n);let o=e.domain(),a=o[0],l=cr(o),u=Fa;return l-a?u=r6e(e,a,l):e=(e.interpolator?Rr("sequential")().interpolator(e.interpolator()):Rr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,l=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),l!==cr(o)&&o.push(l)),o.forEach(c=>s.stop(u(c),e(c))),s}function AXt(e,t,n){const r=Sp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function IXt(e){let t=null;return function(n){return n?XI(n,t=t||Px(e)):e}}const Cje=e=>e.data;function Aje(e,t){const n=wje.call(t,e);return n.root&&n.root.lookup||{}}function kXt(e,t,n){const r=Aje(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(Cje):void 0}function RXt(e,t){const n=Aje(e,this)[t];return n?n.ancestors().map(Cje):void 0}const Ije=()=>typeof window<"u"&&window||null;function PXt(){const e=Ije();return e?e.screen:{}}function NXt(){const e=Ije();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function OXt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function kje(e,t,n){if(!e)return[];const[r,i]=e,s=new Ls().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return f4e(o,s,DXt(t))}function DXt(e){let t=null;if(e){const n=wt(e.marktype),r=wt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function MXt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=wt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function $Xt(e){return wt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function LXt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ls().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<o.x1&&(o.x1=l),l>o.x2&&(o.x2=l),u<o.y1&&(o.y1=u),u>o.y2&&(o.y2=u);return o.translate(r,i),kje([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(l=>FXt(l.x,l.y,t))}function FXt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[l,u]=n[i];u>t!=a>t&&e<(o-l)*(t-u)/(a-u)+l&&r++}return r&1}const rk={random(){return id()},cumulativeNormal:aj,cumulativeLogNormal:Kte,cumulativeUniform:Zte,densityNormal:Hte,densityLogNormal:Yte,densityUniform:Jte,quantileNormal:lj,quantileLogNormal:Xte,quantileUniform:ene,sampleNormal:oj,sampleLogNormal:Gte,sampleUniform:Qte,isArray:We,isBoolean:lv,isDate:W0,isDefined(e){return e!==void 0},isNumber:xr,isObject:bt,isRegExp:hLe,isString:Et,isTuple:nj,isValid(e){return e!=null&&e===e},toBoolean:Ite,toDate(e){return kte(e)},toNumber:Ia,toString:Rte,indexof:pXt,join:hXt,lastindexof:mXt,replace:yXt,reverse:vXt,slice:gXt,flush:dLe,lerp:pLe,merge:aXt,pad:yLe,peek:cr,pluck:fXt,span:DR,inrange:Uw,truncate:vLe,rgb:oy,lab:t3,hcl:n3,hsl:iI,luminance:oW,contrast:oXt,sequence:Fu,format:BKt,utcFormat:zKt,utcParse:VKt,utcOffset:NLe,utcSequence:MLe,timeFormat:Eje,timeParse:UKt,timeOffset:PLe,timeSequence:DLe,timeUnitSpecifier:_Le,monthFormat:HKt,monthAbbrevFormat:qKt,dayFormat:WKt,dayAbbrevFormat:GKt,quarter:aLe,utcquarter:lLe,week:ELe,utcweek:TLe,dayofyear:wLe,utcdayofyear:SLe,warn:rXt,info:iXt,debug:sXt,extent(e){return tp(e)},inScope:nXt,intersect:kje,clampRange:uLe,pinchDistance:cXt,pinchAngle:dXt,screen:PXt,containerSize:OXt,windowSize:NXt,bandspace:bXt,setdata:FKt,pathShape:IXt,panLinear:rLe,panLog:iLe,panPow:sLe,panSymlog:oLe,zoomLinear:Ete,zoomLog:xte,zoomPow:z$,zoomSymlog:Ste,encode:jKt,modify:uXt,lassoAppend:MXt,lassoPath:$Xt,intersectLasso:LXt},jXt=["view","item","group","xy","x","y"],BXt="event.vega.",Rje="this.",oie={},Pje={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ut(xje+e)}]`,functions:zXt,constants:gje,visitors:oie},aW=vje(Pje);function zXt(e){const t=yje(e);jXt.forEach(n=>t[n]=BXt+n);for(const n in rk)t[n]=Rje+n;return Nn(t,QKt(e,rk,oie)),t}function ks(e,t,n){return arguments.length===1?rk[e]:(rk[e]=t,n&&(oie[e]=n),aW&&(aW.functions[e]=Rje+e),this)}ks("bandwidth",_Xt,ul);ks("copy",wXt,ul);ks("domain",EXt,ul);ks("range",SXt,ul);ks("invert",xXt,ul);ks("scale",TXt,ul);ks("gradient",CXt,ul);ks("geoArea",JKt,ul);ks("geoBounds",ZKt,ul);ks("geoCentroid",eXt,ul);ks("geoShape",AXt,ul);ks("geoScale",tXt,ul);ks("indata",LKt,XKt);ks("data",wje,tie);ks("treePath",kXt,tie);ks("treeAncestors",RXt,tie);ks("vlSelectionTest",kKt,eie);ks("vlSelectionIdTest",NKt,eie);ks("vlSelectionResolve",DKt,eie);ks("vlSelectionTuples",OKt);function rp(e,t){const n={};let r;try{e=Et(e)?e:ut(e)+"",r=Jre(e)}catch{Ve("Expression parse error: "+e)}r.visit(s=>{if(s.type!==uje)return;const o=s.callee.name,a=Pje.visitors[o];a&&a(o,s.arguments,t,n)});const i=aW(r);return i.globals.forEach(s=>{const o=xje+s;!Vt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:Nn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function UXt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const VXt=Tf(["rule"]),nye=Tf(["group","image","rect"]);function HXt(e,t){let n="";return VXt[t]||(e.x2&&(e.x?(nye[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(nye[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function aie(e){return(e+"").toLowerCase()}function qXt(e){return aie(e)==="operator"}function WXt(e){return aie(e)==="collect"}function cC(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function GXt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var YXt={operator:(e,t)=>cC(e,["_"],t.code),parameter:(e,t)=>cC(e,["datum","_"],t.code),event:(e,t)=>cC(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return cC(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+ut(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=HXt(r,n),i+="return m;",cC(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(ut).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let l,u;return s.path?(l=`a${s.path}`,u=`b${s.path}`):((n=n||{})["f"+o]=s,l=`this.f${o}(a)`,u=`this.f${o}(b)`),GXt(l,u,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function KXt(e){const t=this;qXt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function XXt(e){const t=this;if(e.params){const n=t.get(e.id);n||Ve("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function QXt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=We(i)?i.map(s=>rye(s,n,t)):rye(i,n,t)}return t}function rye(e,t,n){if(!e||!bt(e))return e;for(let r=0,i=iye.length,s;r<i;++r)if(s=iye[r],Vt(e,s.key))return s.parse(e,t,n);return e}var iye=[{key:"$ref",parse:JXt},{key:"$key",parse:eQt},{key:"$expr",parse:ZXt},{key:"$field",parse:tQt},{key:"$encode",parse:rQt},{key:"$compare",parse:nQt},{key:"$context",parse:iQt},{key:"$subflow",parse:sQt},{key:"$tupleid",parse:oQt}];function JXt(e,t){return t.get(e.$ref)||Ve("Operator not defined: "+e.$ref)}function ZXt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=bu(t.parameterExpression(e.$expr),e.$fields))}function eQt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Ate(e.$key,e.$flat,t.expr.codegen))}function tQt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=td(e.$field,e.$name,t.expr.codegen))}function nQt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=wt(e.$compare).map(i=>i&&i.$tupleid?zt:i);return t.fn[n]||(t.fn[n]=Tte(r,e.$order,t.expr.codegen))}function rQt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=bu(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function iQt(e,t){return t}function sQt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),l=o.signals.parent;return l&&l.set(s),a.detachSubflow=()=>t.detach(o),a}}function oQt(){return zt}function aQt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Ve("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function lQt(e){var t=this,n=bt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Ve("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const uQt={skip:!0};function cQt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function dQt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],uQt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(nd).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function Nje(e,t,n,r){return new Oje(e,t,n,r)}function Oje(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||YXt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function sye(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}Oje.prototype=sye.prototype={fork(){const e=new sye(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),WXt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[aie(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:UXt,parseOperator:KXt,parseOperatorParameters:XXt,parseParameters:QXt,parseStream:aQt,parseUpdate:lQt,getState:cQt,setState:dQt};function fQt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),Dje(t,e.description()))}function Dje(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function hQt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const Az="default";function pQt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:Az,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?Et(i)?i:i.user:Az,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Et(r)||(i=r.item,r=r.user),lW(e,r&&r!==Az?r:i||r),i},{cursor:t})}function lW(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function uL(e,t){var n=e._runtime.data;return Vt(n,t)||Ve("Unrecognized data set: "+t),n[t]}function mQt(e,t){return arguments.length<2?uL(this,e).values.value:Oj.call(this,e,o_().remove(nd).insert(t))}function Oj(e,t){tFe(t)||Ve("Second argument to changes must be a changeset.");const n=uL(this,e);return n.modified=!0,this.pulse(n.input,t)}function gQt(e,t){return Oj.call(this,e,o_().insert(t))}function yQt(e,t){return Oj.call(this,e,o_().remove(t))}function Mje(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function $je(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Dj(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function vQt(e){var t=Dj(e),n=Mje(e),r=$je(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function bQt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=Dj(e),o=t.changedTouches?t.changedTouches[0]:t,s=Tj(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=_Qt(e,n,s),t}function _Qt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,l;if(o){for(l=t;l;l=l.mark.group)if(l.mark.name===o){a=l;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;Et(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:ja(e),item:ja(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const oye="view",wQt="timer",EQt="window",xQt={trap:!1};function SQt(e){const t=Nn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{We(r[s])&&(r[s]=Tf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function Lje(e,t,n,r){e._eventListeners.push({type:n,sources:wt(t),handler:r})}function TQt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function fO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||bt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function CQt(e,t,n){var r=this,i=new sj(n),s=function(u,c){r.runAsync(null,()=>{e===oye&&TQt(r,t)&&u.preventDefault(),i.receive(bQt(r,u,c))})},o;if(e===wQt)fO(r,"timer",t)&&r.timer(s,t);else if(e===oye)fO(r,"view",t)&&r.addEventListener(t,s,xQt);else if(e===EQt?fO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&fO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,l=o.length;a<l;++a)o[a].addEventListener(t,s);Lje(r,o,t,s)}return i}function aye(e){return e.item}function lye(e){return e.item.mark.source}function uye(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function AQt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",aye),lye,uye(e)),this.on(this.events("view","pointerout",aye),lye,uye(t)),this}function IQt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,a=n[i].handler,this._handler.off(l,a);return this}function qu(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const kQt="vega-bind",RQt="vega-bind-name",PQt="vega-bind-radio";function NQt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Cte(r.debounce,i.update))),(r.input==null&&r.element?OQt:MQt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function OQt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),Lje(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(DQt(i))}}function DQt(e){return typeof Event<"u"?new Event(e):{type:e}}function MQt(e,t,n,r){const i=r.signal(n.signal),s=qu("div",{class:kQt}),o=n.input==="radio"?s:s.appendChild(qu("label"));o.appendChild(qu("span",{class:RQt},n.name||n.signal)),t.appendChild(s);let a=$Qt;switch(n.input){case"checkbox":a=LQt;break;case"select":a=FQt;break;case"radio":a=jQt;break;case"range":a=BQt;break}a(e,o,n,i)}function $Qt(e,t,n,r){const i=qu("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function LQt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=qu("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function FQt(e,t,n,r){const i=qu("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const l={value:o};cL(o,r)&&(l.selected=!0),i.appendChild(qu("option",l,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,l=n.options.length;a<l;++a)if(cL(n.options[a],o)){i.selectedIndex=a;return}}}function jQt(e,t,n,r){const i=qu("span",{class:PQt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const l={type:"radio",name:n.signal,value:o};cL(o,r)&&(l.checked=!0);const u=qu("input",l);u.addEventListener("change",()=>e.update(o));const c=qu("label",{},(s[a]||o)+"");return c.prepend(u),i.appendChild(c),u}),e.set=o=>{const a=e.elements,l=a.length;for(let u=0;u<l;++u)cL(a[u].value,o)&&(a[u].checked=!0)}}function BQt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||sy(s,i,100),a=qu("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const l=qu("span",{},+r);t.appendChild(a),t.appendChild(l);const u=()=>{l.textContent=a.value,e.update(+a.value)};a.addEventListener("input",u),a.addEventListener("change",u),e.elements=[a],e.set=c=>{a.value=c,l.textContent=c}}function cL(e,t){return e===t||e+""==t+""}function Fje(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,Mje(e),$je(e),Dj(e),i,s).background(e.background())}function lie(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function zQt(e,t,n,r){const i=new r(e.loader(),lie(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Dj(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function UQt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=Cj(r);e=n._el=e?Iz(n,e,!0):null,fQt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||XR,a=e?s.renderer:s.headless;return n._renderer=a?Fje(n,n._renderer,e,a):null,n._handler=zQt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=Iz(n,t,!0):e.appendChild(qu("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=Iz(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{NQt(n,l.element||t,l)})),n}function Iz(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const dC=e=>+e||0,VQt=e=>({top:e,bottom:e,left:e,right:e});function cye(e){return bt(e)?{top:dC(e.top),bottom:dC(e.bottom),left:dC(e.left),right:dC(e.right)}:VQt(dC(e))}async function uie(e,t,n,r){const i=Cj(t),s=i&&i.headless;return s||Ve("Unrecognized renderer type: "+t),await e.runAsync(),Fje(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function HQt(e,t){e!==w0.Canvas&&e!==w0.SVG&&e!==w0.PNG&&Ve("Unrecognized image type: "+e);const n=await uie(this,e,t);return e===w0.SVG?qQt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function qQt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function WQt(e,t){return(await uie(this,w0.Canvas,e,t)).canvas()}async function GQt(e){return(await uie(this,w0.SVG,e)).svg()}function YQt(e,t,n){return Nje(e,Ax,rk,n).parse(t)}function KQt(e){var t=this._runtime.scales;return Vt(t,e)||Ve("Unrecognized scale or projection: "+e),t[e].value}var jje="width",Bje="height",cie="padding",dye={skip:!0};function zje(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===cie?r.left+r.right:0)}function Uje(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===cie?r.top+r.bottom:0)}function XQt(e){var t=e._signals,n=t[jje],r=t[Bje],i=t[cie];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=zje(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=Uje(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function QQt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(jje,n,dye),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(Bje,r,dye),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(l=>l.resize())},!1,1)}function JQt(e){return this._runtime.getState(e||{data:ZQt,signals:eJt,recurse:!0})}function ZQt(e,t){return t.modified&&We(t.input.value)&&!e.startsWith("_:vega:_")}function eJt(e,t){return!(e==="parent"||t instanceof Ax.proxy)}function tJt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function nJt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Tvt(n,t))}function rJt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",iJt(r))}function iJt(e){return e==null?"":We(e)?Vje(e):bt(e)&&!W0(e)?sJt(e):e+""}function sJt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(We(n)?Vje(n):Hje(n))}).join(`
`)}function Vje(e){return"["+e.map(Hje).join(", ")+"]"}function Hje(e){return We(e)?"[]":bt(e)&&!W0(e)?"{}":e}function oJt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function qje(e,t){const n=this;if(t=t||{},SE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=Nn({},e.locale,t.locale);n.locale(qLe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||w0.Canvas,n._scenegraph=new j6e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||rJt,n._redraw=!0,n._handler=new XR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=SQt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=YQt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:Nn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=zje(n,n._width),n._viewHeight=Uje(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,XQt(n),hQt(n),pQt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function hO(e,t){return Vt(e._signals,t)?e._signals[t]:Ve("Unrecognized signal name: "+ut(t))}function Wje(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function fye(e,t,n,r){let i=Wje(n,r);return i||(i=lie(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function hye(e,t,n){const r=Wje(t,n);return r&&t._targets.remove(r),e}ht(qje,SE,{async evaluate(e,t,n){if(await SE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,vQt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&ID(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&Dje(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=hO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",cye(e)):cye(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Cj(e)||Ve("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(SE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(hO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:QQt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=lie(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return fye(this,e,hO(this,e),t)},removeSignalListener(e,t){return hye(this,hO(this,e),t)},addDataListener(e,t){return fye(this,e,uL(this,e).values,t)},removeDataListener(e,t){return hye(this,uL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=lW(this,null);this._globalCursor=!!e,t&&lW(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:nJt,events:CQt,finalize:IQt,hover:AQt,data:mQt,change:Oj,insert:gQt,remove:yQt,scale:KQt,initialize:UQt,toImageURL:HQt,toCanvas:WQt,toSVG:GQt,getState:JQt,setState:tJt,_watchPixelRatio:oJt});const aJt="view",dL="[",fL="]",Gje="{",Yje="}",lJt=":",Kje=",",uJt="@",cJt=">",dJt=/[[\]{}]/,fJt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Xje,Qje;function cv(e,t,n){return Xje=t||aJt,Qje=n||fJt,Jje(e.trim()).map(uW)}function hJt(e){return Qje[e]}function yA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Jje(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=yA(e,i,Kje,dL+Gje,fL+Yje),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function uW(e){return e[0]==="["?pJt(e):mJt(e)}function pJt(e){const t=e.length;let n=1,r;if(n=yA(e,n,fL,dL,fL),n===t)throw"Empty between selector: "+e;if(r=Jje(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==cJt)throw"Expected '>' after between selector: "+e;r=r.map(uW);const i=uW(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function mJt(e){const t={source:Xje},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,l,u;if(e[o-1]===Yje){if(a=e.lastIndexOf(Gje),a>=0){try{r=gJt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===uJt&&(i=++a),l=yA(e,a,lJt),l<o&&(n.push(e.substring(s,l).trim()),s=a=++l),a=yA(e,a,dL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),u=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=yA(e,a,fL),a===o)throw"Unmatched left bracket: "+e;if(u.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==dL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||dJt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):hJt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function gJt(e){const t=e.split(Kje);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function yJt(e){return bt(e)?e:{type:e||"pad"}}const fC=e=>+e||0,vJt=e=>({top:e,bottom:e,left:e,right:e});function bJt(e){return bt(e)?e.signal?e:{top:fC(e.top),bottom:fC(e.bottom),left:fC(e.left),right:fC(e.right)}:vJt(fC(e))}const _o=e=>bt(e)&&!We(e)?Nn({},e):{value:e};function pye(e,t,n,r){return n!=null?(bt(n)&&!We(n)||We(n)&&n.length&&bt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function ea(e,t,n){for(const r in t)pye(e,r,t[r]);for(const r in n)pye(e,r,n[r],"update")}function nT(e,t,n){for(const r in t)n&&Vt(n,r)||(e[r]=Nn(e[r]||{},t[r]));return e}function vw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const die="mark",fie="frame",hie="scope",_Jt="axis",wJt="axis-domain",EJt="axis-grid",xJt="axis-label",SJt="axis-tick",TJt="axis-title",CJt="legend",AJt="legend-band",IJt="legend-entry",kJt="legend-gradient",Zje="legend-label",RJt="legend-symbol",PJt="legend-title",NJt="title",OJt="title-text",DJt="title-subtitle";function MJt(e,t,n,r,i){const s={},o={};let a,l,u,c;l="lineBreak",t==="text"&&i[l]!=null&&!vw(l,e)&&kz(s,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===fie?i.group:n===die?Nn({},i.mark,i[t]):null;for(l in c)u=vw(l,e)||(l==="fill"||l==="stroke")&&(vw("fill",e)||vw("stroke",e)),u||kz(s,l,c[l]);wt(r).forEach(d=>{const f=i.style&&i.style[d];for(const h in f)vw(h,e)||kz(s,h,f[h])}),e=Nn({},e);for(l in s)c=s[l],c.signal?(a=a||{})[l]=c:o[l]=c;return e.enter=Nn(o,e.enter),a&&(e.update=Nn(a,e.update)),e}function kz(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const e5e=e=>Et(e)?ut(e):e.signal?`(${e.signal})`:t5e(e);function Mj(e){if(e.gradient!=null)return LJt(e);let t=e.signal?`(${e.signal})`:e.color?$Jt(e.color):e.field!=null?t5e(e.field):e.value!==void 0?ut(e.value):void 0;return e.scale!=null&&(t=FJt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${UD(e.exponent)})`),e.mult!=null&&(t+=`*${UD(e.mult)}`),e.offset!=null&&(t+=`+${UD(e.offset)}`),e.round&&(t=`round(${t})`),t}const pO=(e,t,n,r)=>`(${e}(${[t,n,r].map(Mj).join(",")})+'')`;function $Jt(e){return e.c?pO("hcl",e.h,e.c,e.l):e.h||e.s?pO("hsl",e.h,e.s,e.l):e.l||e.a?pO("lab",e.l,e.a,e.b):e.r||e.g||e.b?pO("rgb",e.r,e.g,e.b):null}function LJt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ut(n));for(;t.length&&cr(t)==null;)t.pop();return t.unshift(e5e(e.gradient)),`gradient(${t.join(",")})`}function UD(e){return bt(e)?"("+Mj(e)+")":e}function t5e(e){return n5e(bt(e)?e:{datum:e})}function n5e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Ve("Invalid field reference: "+ut(e));return e.signal||(r=Et(r)?wp(r).map(ut).join("]["):n5e(r)),t+"["+r+"]"}function FJt(e,t){const n=e5e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+UD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function jJt(e){let t="";return e.forEach(n=>{const r=Mj(n);t+=n.test?`(${n.test})?${r}:`:r}),cr(t)===":"&&(t+="null"),t}function r5e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=MJt(e,t,n,r,i.config);for(const a in e)o[a]=BJt(e[a],t,s,i);return s}function BJt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=UJt(zJt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function zJt(e){return We(e)?jJt(e):Mj(e)}function UJt(e,t,n,r){const i=rp(e,t);return i.$fields.forEach(s=>r[s]=1),Nn(n,i.$params),i.$expr}const VJt="outer",HJt=["value","update","init","react","bind"];function mye(e,t){Ve(e+' for "outer" push: '+ut(t))}function i5e(e,t){const n=e.name;if(e.push===VJt)t.signals[n]||mye("No prior signal definition",n),HJt.forEach(r=>{e[r]!==void 0&&mye("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function cW(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function $j(e,t,n,r){return new cW(e,t,n,r)}function hL(e,t){return $j("operator",e,t)}function Bt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function ik(e,t){return t?{$field:e,$name:t}:{$field:e}}const dW=ik("key");function gye(e,t){return{$compare:e,$order:t}}function qJt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const WJt="ascending",GJt="descending";function YJt(e){return bt(e)?(e.order===GJt?"-":"+")+Lj(e.op,e.field):""}function Lj(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const pie="scope",fW="view";function ro(e){return e&&e.signal}function KJt(e){return e&&e.expr}function VD(e){if(ro(e))return!0;if(bt(e)){for(const t in e)if(VD(e[t]))return!0}return!1}function Ld(e,t){return e??t}function V1(e){return e&&e.signal||e}const yye="timer";function sk(e,t){return(e.merge?QJt:e.stream?JJt:e.type?ZJt:Ve("Invalid stream specification: "+ut(e)))(e,t)}function XJt(e){return e===pie?fW:e||fW}function QJt(e,t){const n=e.merge.map(i=>sk(i,t)),r=mie({merge:n},e,t);return t.addStream(r).id}function JJt(e,t){const n=sk(e.stream,t),r=mie({stream:n},e,t);return t.addStream(r).id}function ZJt(e,t){let n;e.type===yye?(n=t.event(yye,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(XJt(e.source),e.type);const r=mie({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function mie(e,t,n){let r=t.between;return r&&(r.length!==2&&Ve('Stream "between" parameter must have 2 entries: '+ut(t)),e.between=[sk(r[0],n),sk(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(eZt(t.marktype,t.markname,t.markrole)),t.source===pie&&r.push("inScope(event.item)"),r.length&&(e.filter=rp("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function eZt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const tZt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function nZt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Ve("Signal update missing events specification."),Et(s)&&(s=cv(s,t.isSubscope()?pie:fW)),s=wt(s).filter(l=>l.signal||l.scale?(a.push(l),0):1),a.length>1&&(a=[iZt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Ve("Signal encode and update are mutually exclusive."),o="encode(item(),"+ut(r)+")"),i.update=Et(o)?rp(o,t):o.expr!=null?rp(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:tZt,$params:{$value:t.signalRef(o.signal)}}:Ve("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(l=>t.addUpdate(Nn(rZt(l,t),i)))}function rZt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):sk(e,t)}}function iZt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function sZt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Ve("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=rp(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>nZt(i,t,n.id))}const ti=e=>(t,n,r)=>$j(e,n,t||void 0,r),s5e=ti("aggregate"),oZt=ti("axisticks"),o5e=ti("bound"),Ff=ti("collect"),vye=ti("compare"),aZt=ti("datajoin"),a5e=ti("encode"),lZt=ti("expression"),uZt=ti("facet"),cZt=ti("field"),dZt=ti("key"),fZt=ti("legendentries"),hZt=ti("load"),pZt=ti("mark"),mZt=ti("multiextent"),gZt=ti("multivalues"),yZt=ti("overlap"),vZt=ti("params"),l5e=ti("prefacet"),bZt=ti("projection"),_Zt=ti("proxy"),wZt=ti("relay"),u5e=ti("render"),EZt=ti("scale"),u_=ti("sieve"),xZt=ti("sortitems"),c5e=ti("viewlayout"),SZt=ti("values");let TZt=0;const d5e={min:"min",max:"max",count:"sum"};function CZt(e,t){const n=e.type||"linear";QFe(n)||Ve("Unrecognized scale type: "+ut(n)),t.addScale(e.name,{type:n,domain:void 0})}function AZt(e,t){const n=t.getScale(e.name).params;let r;n.domain=f5e(e.domain,e,t),e.range!=null&&(n.range=p5e(e,t,n)),e.interpolate!=null&&LZt(e.interpolate,n),e.nice!=null&&(n.nice=$Zt(e.nice,t)),e.bins!=null&&(n.bins=MZt(e.bins,t));for(r in e)Vt(n,r)||r==="name"||(n[r]=zc(e[r],t))}function zc(e,t){return bt(e)?e.signal?t.signalRef(e.signal):Ve("Unsupported object: "+ut(e)):e}function HD(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>zc(n,t))}function Fj(e){Ve("Can not find data set: "+ut(e))}function f5e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Ve("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(We(e)?IZt:e.fields?RZt:kZt)(e,t,n)}function IZt(e,t,n){return e.map(r=>zc(r,n))}function kZt(e,t,n){const r=n.getData(e.data);return r||Fj(e.data),Rx(t.type)?r.valuesRef(n,e.field,h5e(e.sort,!1)):e6e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function RZt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=Et(o)?{data:r,field:o}:We(o)||o.signal?PZt(o,n):o,s.push(o),s),[]);return(Rx(t.type)?NZt:e6e(t.type)?OZt:DZt)(e,n,i)}function PZt(e,t){const n="_:vega:_"+TZt++,r=Ff({});if(We(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+ut(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,u_({})]),{data:n,field:"data"}}function NZt(e,t,n){const r=h5e(e.sort,!0);let i,s;const o=n.map(u=>{const c=t.getData(u.data);return c||Fj(u.data),c.countsRef(t,u.field,r)}),a={groupby:dW,pulse:o};r&&(i=r.op||"count",s=r.field?Lj(i,r.field):"count",a.ops=[d5e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(s5e(a));const l=t.add(Ff({pulse:Bt(i)}));return s=t.add(SZt({field:dW,sort:t.sortRef(r),pulse:Bt(l)})),Bt(s)}function h5e(e,t){return e&&(!e.field&&!e.op?bt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Ve("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!d5e[e.op]&&Ve("Multiple domain scales can not be sorted using "+e.op)),e}function OZt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Fj(i.data),s.domainRef(t,i.field)});return Bt(t.add(gZt({values:r})))}function DZt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||Fj(i.data),s.extentRef(t,i.field)});return Bt(t.add(mZt({extents:r})))}function MZt(e,t){return e.signal||We(e)?HD(e,t):t.objectProperty(e)}function $Zt(e,t){return e.signal?t.signalRef(e.signal):bt(e)?{interval:zc(e.interval),step:zc(e.step)}:zc(e)}function LZt(e,t){t.interpolate=zc(e.type||e),e.gamma!=null&&(t.interpolateGamma=zc(e.gamma))}function p5e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Et(i)){if(r&&Vt(r,i))return e=Nn({},e,{range:r[i]}),p5e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Rx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Ve("Unrecognized scale range value: "+ut(i))}else if(i.scheme){n.scheme=We(i.scheme)?HD(i.scheme,t):zc(i.scheme,t),i.extent&&(n.schemeExtent=HD(i.extent,t)),i.count&&(n.schemeCount=zc(i.count,t));return}else if(i.step){n.rangeStep=zc(i.step,t);return}else{if(Rx(e.type)&&!We(i))return f5e(i,e,t);We(i)||Ve("Unsupported range type: "+ut(i))}return i.map(s=>(We(s)?HD:zc)(s,t))}function FZt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=hW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=hW(n[i],i,t));t.addProjection(e.name,r)}function hW(e,t,n){return We(e)?e.map(r=>hW(r,t,n)):bt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Ve("Unsupported parameter object: "+ut(e)):e}const jf="top",rT="left",iT="right",Ry="bottom",m5e="center",jZt="vertical",BZt="start",zZt="middle",UZt="end",pW="index",gie="label",VZt="offset",Mx="perc",HZt="perc2",qc="value",tP="guide-label",yie="guide-title",qZt="group-title",WZt="group-subtitle",bye="symbol",qD="gradient",mW="discrete",gW="size",GZt="shape",YZt="fill",KZt="stroke",XZt="strokeWidth",QZt="strokeDash",JZt="opacity",vie=[gW,GZt,YZt,KZt,XZt,QZt,JZt],nP={name:1,style:1,interactive:1},mr={value:0},Wc={value:1},jj="group",g5e="rect",bie="rule",ZZt="symbol",c_="text";function ok(e){return e.type=jj,e.interactive=e.interactive||!1,e}function _u(e,t){const n=(r,i)=>Ld(e[r],Ld(t[r],i));return n.isVertical=r=>jZt===Ld(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Ld(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Ld(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Ld(e.columns,Ld(t.columns,+n.isVertical(!0))),n}function y5e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function een(e,t,n){const r=t.config.style[n];return r&&r[e]}function Bj(e,t,n){return`item.anchor === '${BZt}' ? ${e} : item.anchor === '${UZt}' ? ${t} : ${n}`}const _ie=Bj(ut(rT),ut(iT),ut(m5e));function ten(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},bt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function v5e(e,t){return t?e?bt(e)?Object.assign({},e,{offset:v5e(e.offset,t)}):{value:e,offset:t}:t:e}function cc(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=nT(e.encode,t,nP)):e.interactive=!1,e}function nen(e,t,n,r){const i=_u(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let l,u,c,d,f;s?(u=[0,1],c=[0,0],d=o,f=a):(u=[0,0],c=[1,0],d=a,f=o);const h={enter:l={opacity:mr,x:mr,y:mr,width:_o(d),height:_o(f)},update:Nn({},l,{opacity:Wc,fill:{gradient:t,start:u,stop:c}}),exit:{opacity:mr}};return ea(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),cc({type:g5e,role:kJt,encode:h},r)}function ren(e,t,n,r,i){const s=_u(e,n),o=s.isVertical(),a=s.gradientThickness(),l=s.gradientLength();let u,c,d,f,h="";o?(u="y",d="y2",c="x",f="width",h="1-"):(u="x",d="x2",c="y",f="height");const p={opacity:mr,fill:{scale:t,field:qc}};p[u]={signal:h+"datum."+Mx,mult:l},p[c]=mr,p[d]={signal:h+"datum."+HZt,mult:l},p[f]=_o(a);const m={enter:p,update:Nn({},p,{opacity:Wc}),exit:{opacity:mr}};return ea(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),cc({type:g5e,role:AJt,key:qc,from:i,encode:m},r)}const ien=`datum.${Mx}<=0?"${rT}":datum.${Mx}>=1?"${iT}":"${m5e}"`,sen=`datum.${Mx}<=0?"${Ry}":datum.${Mx}>=1?"${jf}":"${zZt}"`;function _ye(e,t,n,r){const i=_u(e,t),s=i.isVertical(),o=_o(i.gradientThickness()),a=i.gradientLength();let l=i("labelOverlap"),u,c,d,f,h="";const p={enter:u={opacity:mr},update:c={opacity:Wc,text:{field:gie}},exit:{opacity:mr}};return ea(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Ld(e.labelLimit,t.gradientLabelLimit)}),s?(u.align={value:"left"},u.baseline=c.baseline={signal:sen},d="y",f="x",h="1-"):(u.align=c.align={signal:ien},u.baseline={value:"top"},d="x",f="y"),u[d]=c[d]={signal:h+"datum."+Mx,mult:a},u[f]=c[f]=o,o.offset=Ld(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+pW}:void 0,cc({type:c_,role:Zje,style:tP,key:qc,from:r,encode:p,overlap:l},n)}function oen(e,t,n,r,i){const s=_u(e,t),o=n.entries,a=!!(o&&o.interactive),l=o?o.name:void 0,u=s("clipHeight"),c=s("symbolOffset"),d={data:"value"},f=`(${i}) ? datum.${VZt} : datum.${gW}`,h=u?_o(u):{field:gW},p=`datum.${pW}`,m=`max(1, ${i})`;let g,y,b,_,w;h.mult=.5,g={enter:y={opacity:mr,x:{signal:f,mult:.5,offset:c},y:h},update:b={opacity:Wc,x:y.x,y:y.y},exit:{opacity:mr}};let E=null,x=null;e.fill||(E=t.symbolBaseFillColor,x=t.symbolBaseStrokeColor),ea(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",x),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),vie.forEach(R=>{e[R]&&(b[R]=y[R]={scale:e[R],field:qc})});const S=cc({type:ZZt,role:RJt,key:qc,from:d,clip:u?!0:void 0,encode:g},n.symbols),C=_o(c);C.offset=s("labelOffset"),g={enter:y={opacity:mr,x:{signal:f,offset:C},y:h},update:b={opacity:Wc,text:{field:gie},x:y.x,y:y.y},exit:{opacity:mr}},ea(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=cc({type:c_,role:Zje,style:tP,key:qc,from:d,encode:g},n.labels);return g={enter:{noBound:{value:!u},width:mr,height:u?_o(u):mr,opacity:mr},exit:{opacity:mr},update:b={opacity:Wc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(_=`ceil(item.mark.items.length / ${m})`,b.row.signal=`${p}%${_}`,b.column.signal=`floor(${p} / ${_})`,w={field:["row",p]}):(b.row.signal=`floor(${p} / ${m})`,b.column.signal=`${p} % ${m}`,w={field:p}),b.column.signal=`(${i})?${b.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:pW}},ok({role:hie,from:r,encode:nT(g,o,nP),marks:[S,A],name:l,interactive:a,sort:w})}function aen(e,t){const n=_u(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const wie='item.orient === "left"',Eie='item.orient === "right"',zj=`(${wie} || ${Eie})`,len=`datum.vgrad && ${zj}`,uen=Bj('"top"','"bottom"','"middle"'),cen=Bj('"right"','"left"','"center"'),den=`datum.vgrad && ${Eie} ? (${cen}) : (${zj} && !(datum.vgrad && ${wie})) ? "left" : ${_ie}`,fen=`item._anchor || (${zj} ? "middle" : "start")`,hen=`${len} ? (${wie} ? -90 : 90) : 0`,pen=`${zj} ? (datum.vgrad ? (${Eie} ? "bottom" : "top") : ${uen}) : "top"`;function men(e,t,n,r){const i=_u(e,t),s={enter:{opacity:mr},update:{opacity:Wc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:mr}};return ea(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:fen},angle:{signal:hen},align:{signal:den},baseline:{signal:pen},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),cc({type:c_,role:PJt,style:yie,from:r,encode:s},n)}function gen(e,t){let n;return bt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+wye(e.path)+")":e.sphere&&(n="geoShape("+wye(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function wye(e){return bt(e)&&e.signal?e.signal:ut(e)}function b5e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===jj?hie:t||die}function yen(e){return{marktype:e.type,name:e.name||void 0,role:e.role||b5e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function ven(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function xie(e,t){const n=iFe(e.type);n||Ve("Unrecognized transform type: "+ut(e.type));const r=$j(n.type.toLowerCase(),null,_5e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function _5e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=ben(o,t,n)}return r}function ben(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return _en(e,t,n);if(i===void 0){e.required&&Ve("Missing required "+ut(t.type)+" parameter: "+ut(e.name));return}else{if(r==="param")return wen(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!ro(i)?i.map(s=>Eye(e,s,n)):Eye(e,i,n)}function Eye(e,t,n){const r=e.type;if(ro(t))return Sye(r)?Ve("Expression references can not be signals."):Rz(r)?n.fieldRef(t):Tye(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Rz(r);return i&&Een(t)?n.exprRef(t.expr,t.as):i&&xen(t)?ik(t.field,t.as):Sye(r)?rp(t,n):Sen(r)?Bt(n.getData(t).values):Rz(r)?ik(t):Tye(r)?n.compareRef(t):t}}function _en(e,t,n){return Et(t.from)||Ve('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function wen(e,t,n){const r=t[e.name];return e.array?(We(r)||Ve("Expected an array of sub-parameters. Instead: "+ut(r)),r.map(i=>xye(e,i,n))):xye(e,r,n)}function xye(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Ve("Unsupported parameter: "+ut(t));const s=Nn(_5e(i,t,n),i.key);return Bt(n.add(vZt(s)))}const Een=e=>e&&e.expr,xen=e=>e&&e.field,Sen=e=>e==="data",Sye=e=>e==="expr",Rz=e=>e==="field",Tye=e=>e==="compare";function Ten(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Ve("Only group marks can be faceted."),r.field!=null?o=a=WD(r,n):(e.data?a=Bt(n.getData(e.data).aggregate):(s=xie(Nn({type:"aggregate",groupby:wt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=WD(r,n),o=a=Bt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Bt(n.add(Ff(null,[{}]))),o||(o=WD(e,n)),{key:i,pulse:o,parent:a}}function WD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Bt(t.getData(e.data).output)}function Ab(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}Ab.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Bt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new Ab(e,s,i,r,o)};function w5e(e){return Et(e)?e:null}function Cye(e,t,n){const r=Lj(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function hC(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),l=YJt(s);let u=w5e(i),c,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),c=a[u]),!c){const f=s?{field:dW,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Bt(t.output)};l&&(f.sort=e.sortRef(s)),d=e.add($j(r,void 0,f)),o&&(t.index[i]=d),c=Bt(d),u!=null&&(a[u]=c)}return c}Ab.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=w5e(t);let o,a,l;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Cye(e,o.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Bt(r.output)},n&&n.field&&Cye(e,l,n),a=e.add(s5e(l)),o=e.add(Ff({pulse:Bt(a)})),o={agg:a,ref:Bt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Bt(this.values)},extentRef(e,t){return hC(e,this,"extent","extent",t,!1)},domainRef(e,t){return hC(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return hC(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return hC(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return hC(e,this,"indata","tupleindex",t,!0,!0)}};function Cen(e,t,n){const r=e.from.facet,i=r.name,s=WD(r,t);let o;r.name||Ve("Facet must have a name: "+ut(r)),r.data||Ve("Facet must reference a data set: "+ut(r)),r.field?o=t.add(l5e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(uZt({key:t.keyRef(r.groupby),group:Bt(t.proxy(n.parent)),pulse:s})):Ve("Facet must specify groupby or field: "+ut(r));const a=t.fork(),l=a.add(Ff()),u=a.add(u_({pulse:Bt(l)}));a.addData(i,new Ab(a,l,l,u)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function Aen(e,t,n){const r=t.add(l5e({pulse:n.pulse})),i=t.fork();i.add(u_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function E5e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,l=t.add(hL()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(d=>d??"null").join(",")+"),0)",c=rp(u,t);l.update=c.$expr,l.params=c.$params}function Uj(e,t){const n=b5e(e),r=e.type===jj,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===hie||n===fie,a,l,u,c,d,f,h;const p=n===die||o||i,m=Ten(e.from,r,t);l=t.add(aZt({key:m.key||(e.key?ik(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Bt(l);l=u=t.add(Ff({pulse:g})),l=t.add(pZt({markdef:yen(e),interactive:ven(e.interactive,t),clip:gen(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Bt(l)}));const y=Bt(l);l=c=t.add(a5e(r5e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(x=>{const S=xie(x,t),C=S.metadata;(C.generates||C.changes)&&Ve("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=Bt(l),t.add(l=S)}),e.sort&&(l=t.add(xZt({sort:t.compareRef(e.sort),pulse:Bt(l)})));const b=Bt(l);(i||o)&&(o=t.add(c5e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:b})),f=Bt(o));const _=t.add(o5e({mark:y,pulse:f||b}));h=Bt(_),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(b,f||h,g),i?Cen(e,t,m):p?Aen(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(_))),s&&(h=Ien(s,h,t));const w=t.add(u5e({pulse:h})),E=t.add(u_({pulse:Bt(w)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new Ab(t,u,w,E)),e.on&&e.on.forEach(x=>{(x.insert||x.remove||x.toggle)&&Ve("Marks only support modify triggers."),E5e(x,t,d)}))}function Ien(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:ro(s)?n.signalRef(s.signal):s,method:ro(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=ro(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Bt(n.add(yZt(o)))}function ken(e,t){const n=t.config.legend,r=e.encode||{},i=_u(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,l=s.style,u={};let c=0,d,f,h;vie.forEach(_=>e[_]?(u[_]=e[_],c=c||e[_]):0),c||Ve("Missing valid scale for legend.");const p=Ren(e,t.scaleType(c)),m={title:e.title!=null,scales:u,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Bt(t.add(Ff(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},b=Bt(t.add(fZt(f={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===qD?(h=[nen(e,c,n,r.gradient),_ye(e,n,r.labels,b)],f.count=f.count||t.signalRef(`max(2,2*floor((${V1(i.gradientLength())})/100))`)):p===mW?h=[ren(e,c,n,r.gradient,b),_ye(e,n,r.labels,b)]:(d=aen(e,n),h=[oen(e,n,r,b,V1(d.columns))],f.size=Oen(e,t,h[0].marks)),h=[ok({role:IJt,from:g,encode:y,marks:h,layout:d,interactive:a})],m.title&&h.push(men(e,n,r.title,g)),Uj(ok({role:CJt,from:g,encode:nT(Nen(i,e,n),s,nP),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:l}),t)}function Ren(e,t){let n=e.type||bye;return!e.type&&Pen(e)===1&&(e.fill||e.stroke)&&(n=Dne(t)?qD:Rq(t)?mW:bye),n!==qD?n:Rq(t)?mW:qD}function Pen(e){return vie.reduce((t,n)=>t+(e[n]?1:0),0)}function Nen(e,t,n){const r={enter:{},update:{}};return ea(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Oen(e,t,n){const r=V1(Aye("size",e,n)),i=V1(Aye("strokeWidth",e,n)),s=V1(Den(n[1].encode,t,tP));return rp(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Aye(e,t,n){return t[e]?`scale("${t[e]}",datum)`:y5e(e,n[0].encode)}function Den(e,t,n){return y5e("fontSize",e)||een("fontSize",t,n)}const Men=`item.orient==="${rT}"?-90:item.orient==="${iT}"?90:0`;function $en(e,t){e=Et(e)?{text:e}:e;const n=_u(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,l=[],u={},c=Bt(t.add(Ff(null,[u])));return l.push(jen(e,n,Len(e),c)),e.subtitle&&l.push(Ben(e,n,r.subtitle,c)),Uj(ok({role:NJt,from:c,encode:Fen(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Len(e){const t=e.encode;return t&&t.title||Nn({name:e.name,interactive:e.interactive,style:e.style},t)}function Fen(e,t){const n={enter:{},update:{}};return ea(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:_ie},angle:{signal:Men},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),nT(n,t,nP)}function jen(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ea(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cc({type:c_,role:OJt,style:qZt,from:r,encode:o},n)}function Ben(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return ea(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cc({type:c_,role:DJt,style:WZt,from:r,encode:o},n)}function zen(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(xie(r,t))}),e.on&&e.on.forEach(r=>{E5e(r,t,e.name)}),t.addDataPipeline(e.name,Uen(e,t,n))}function Uen(e,t,n){const r=[];let i=null,s=!1,o=!1,a,l,u,c,d;for(e.values?ro(e.values)||VD(e.format)?(r.push(Iye(t,e)),r.push(i=Nv())):r.push(i=Nv({$ingest:e.values,$format:e.format})):e.url?VD(e.url)||VD(e.format)?(r.push(Iye(t,e)),r.push(i=Nv())):r.push(i=Nv({$request:e.url,$format:e.format})):e.source&&(i=a=wt(e.source).map(f=>Bt(t.getData(f).output)),r.push(null)),l=0,u=n.length;l<u;++l)c=n[l],d=c.metadata,!i&&!d.source&&r.push(i=Nv()),r.push(c),d.generates&&(o=!0),d.modifies&&!o&&(s=!0),d.source?i=c:d.changes&&(i=null);return a&&(u=a.length-1,r[0]=wZt({derive:s,pulse:u?a:a[0]}),(s||u)&&r.splice(1,0,Nv())),i||r.push(Nv()),r.push(u_({})),r}function Nv(e){const t=Ff({},e);return t.metadata={source:!0},t}function Iye(e,t){return hZt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const x5e=e=>e===Ry||e===jf,Vj=(e,t,n)=>ro(e)?Wen(e.signal,t,n):e===rT||e===jf?t:n,wo=(e,t,n)=>ro(e)?Hen(e.signal,t,n):x5e(e)?t:n,pf=(e,t,n)=>ro(e)?qen(e.signal,t,n):x5e(e)?n:t,S5e=(e,t,n)=>ro(e)?Gen(e.signal,t,n):e===jf?{value:t}:{value:n},Ven=(e,t,n)=>ro(e)?Yen(e.signal,t,n):e===iT?{value:t}:{value:n},Hen=(e,t,n)=>T5e(`${e} === '${jf}' || ${e} === '${Ry}'`,t,n),qen=(e,t,n)=>T5e(`${e} !== '${jf}' && ${e} !== '${Ry}'`,t,n),Wen=(e,t,n)=>Sie(`${e} === '${rT}' || ${e} === '${jf}'`,t,n),Gen=(e,t,n)=>Sie(`${e} === '${jf}'`,t,n),Yen=(e,t,n)=>Sie(`${e} === '${iT}'`,t,n),T5e=(e,t,n)=>(t=t!=null?_o(t):t,n=n!=null?_o(n):n,kye(t)&&kye(n)?(t=t?t.signal||ut(t.value):null,n=n?n.signal||ut(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Nn({test:e},t)].concat(n||[])),kye=e=>e==null||Object.keys(e).length===1,Sie=(e,t,n)=>({signal:`${e} ? (${qw(t)}) : (${qw(n)})`}),Ken=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${rT}' ? (${qw(r)}) : `:"")+(n!=null?`${e} === '${Ry}' ? (${qw(n)}) : `:"")+(i!=null?`${e} === '${iT}' ? (${qw(i)}) : `:"")+(t!=null?`${e} === '${jf}' ? (${qw(t)}) : `:"")+"(null)"}),qw=e=>ro(e)?e.signal:e==null?null:ut(e),Xen=(e,t)=>t===0?0:ro(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},TE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function X_(e,t,n,r){let i;if(t&&Vt(t,e))return t[e];if(Vt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[yie][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[tP][i]}return null}function Rye(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function Qen(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,l,u;if(ro(o)){const d=Rye([n.axisX,n.axisY]),f=Rye([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(u of d)a[u]=wo(o,X_(u,n.axisX,i,r),X_(u,n.axisY,i,r));l={};for(u of f)l[u]=Ken(o.signal,X_(u,n.axisTop,i,r),X_(u,n.axisBottom,i,r),X_(u,n.axisLeft,i,r),X_(u,n.axisRight,i,r))}else a=o===jf||o===Ry?n.axisX:n.axisY,l=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||l||s?Nn({},i,a,l,s):i}function Jen(e,t,n,r){const i=_u(e,t),s=e.orient;let o,a;const l={enter:o={opacity:mr},update:a={opacity:Wc},exit:{opacity:mr}};ea(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=Pye(e,0),c=Pye(e,1);return o.x=a.x=wo(s,u,mr),o.x2=a.x2=wo(s,c),o.y=a.y=pf(s,u,mr),o.y2=a.y2=pf(s,c),cc({type:bie,role:wJt,from:r,encode:l},n)}function Pye(e,t){return{scale:e.scale,range:t}}function Zen(e,t,n,r,i){const s=_u(e,t),o=e.orient,a=e.gridScale,l=Vj(o,1,-1),u=etn(e.offset,l);let c,d,f;const h={enter:c={opacity:mr},update:f={opacity:Wc},exit:d={opacity:mr}};ea(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:qc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=wo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:l,offset:u}:{value:0,offset:u},y=a?{scale:a,range:1,mult:l,offset:u}:Nn(m,{mult:l,offset:u});return c.x=f.x=wo(o,p,g),c.y=f.y=pf(o,p,g),c.x2=f.x2=pf(o,y),c.y2=f.y2=wo(o,y),d.x=wo(o,p),d.y=pf(o,p),cc({type:bie,role:EJt,key:qc,from:r,encode:h},n)}function etn(e,t){if(t!==1)if(!bt(e))e=ro(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Nn({},e);for(;n.mult!=null;)if(bt(n.mult))n=n.mult=Nn({},n.mult);else return n.mult=ro(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function ttn(e,t,n,r,i,s){const o=_u(e,t),a=e.orient,l=Vj(a,-1,1);let u,c,d;const f={enter:u={opacity:mr},update:d={opacity:Wc},exit:c={opacity:mr}};ea(f,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=_o(i);h.mult=l;const p={scale:e.scale,field:qc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return d.y=u.y=wo(a,mr,p),d.y2=u.y2=wo(a,h),c.x=wo(a,p),d.x=u.x=pf(a,mr,p),d.x2=u.x2=pf(a,h),c.y=pf(a,p),cc({type:bie,role:SJt,key:qc,from:r,encode:f},n)}function Pz(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function ntn(e,t,n,r,i,s){const o=_u(e,t),a=e.orient,l=e.scale,u=Vj(a,-1,1),c=V1(o("labelFlush")),d=V1(o("labelFlushOffset")),f=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=_o(i);g.mult=u,g.offset=_o(o("labelPadding")||0),g.offset.mult=u;const y={scale:l,field:qc,band:.5,offset:v5e(s.offset,o("labelOffset"))},b=wo(a,p?Pz(l,c,'"left"','"right"','"center"'):{value:"center"},Ven(a,"left","right")),_=wo(a,S5e(a,"bottom","top"),p?Pz(l,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=Pz(l,c,`-(${d})`,d,0);p=p&&d;const E={opacity:mr,x:wo(a,y,g),y:pf(a,y,g)},x={enter:E,update:m={opacity:Wc,text:{field:gie},x:E.x,y:E.y,align:b,baseline:_},exit:{opacity:mr,x:E.x,y:E.y}};ea(x,{dx:!f&&p?wo(a,w):null,dy:!h&&p?pf(a,w):null}),ea(x,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:f,baseline:h});const S=o("labelBound");let C=o("labelOverlap");return C=C||S?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:l,orient:a,tolerance:S}:null}:void 0,m.align!==b&&(m.align=TE(m.align,b)),m.baseline!==_&&(m.baseline=TE(m.baseline,_)),cc({type:c_,role:xJt,style:tP,key:qc,from:r,encode:x,overlap:C},n)}function rtn(e,t,n,r){const i=_u(e,t),s=e.orient,o=Vj(s,-1,1);let a,l;const u={enter:a={opacity:mr,anchor:_o(i("titleAnchor",null)),align:{signal:_ie}},update:l=Nn({},a,{opacity:Wc,text:_o(e.title)}),exit:{opacity:mr}},c={signal:`lerp(range("${e.scale}"), ${Bj(0,1,.5)})`};return l.x=wo(s,c),l.y=pf(s,c),a.angle=wo(s,mr,Xen(o,90)),a.baseline=wo(s,S5e(s,Ry,jf),{value:Ry}),l.angle=a.angle,l.baseline=a.baseline,ea(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),itn(i,s,u,n),u.update.align=TE(u.update.align,a.align),u.update.angle=TE(u.update.angle,a.angle),u.update.baseline=TE(u.update.baseline,a.baseline),cc({type:c_,role:TJt,style:yie,from:r,encode:u},n)}function itn(e,t,n,r){const i=(a,l)=>a!=null?(n.update[l]=TE(_o(a),n.update[l]),!1):!vw(l,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?_o(o):wo(t,_o(o),_o(s))}function stn(e,t){const n=Qen(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,l=_u(e,n),u=ten(l),c={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=Bt(t.add(Ff({},[c]))),f=Bt(t.add(oZt({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Zen(e,n,r.grid,f,u)),c.ticks&&(p=l("tickSize"),h.push(ttn(e,n,r.ticks,f,p,u))),c.labels&&(p=c.ticks?p:0,h.push(ntn(e,n,r.labels,f,p,u))),c.domain&&h.push(Jen(e,n,r.domain,d)),c.title&&h.push(rtn(e,n,r.title,d)),Uj(ok({role:_Jt,from:d,encode:nT(otn(l,e),i,nP),marks:h,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:s,interactive:o,style:a}),t)}function otn(e,t){const n={enter:{},update:{}};return ea(n,{orient:e("orient"),offset:e("offset")||0,position:Ld(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function C5e(e,t,n){const r=wt(e.signals),i=wt(e.scales);return n||r.forEach(s=>i5e(s,t)),wt(e.projections).forEach(s=>FZt(s,t)),i.forEach(s=>CZt(s,t)),wt(e.data).forEach(s=>zen(s,t)),i.forEach(s=>AZt(s,t)),(n||r).forEach(s=>sZt(s,t)),wt(e.axes).forEach(s=>stn(s,t)),wt(e.marks).forEach(s=>Uj(s,t)),wt(e.legends).forEach(s=>ken(s,t)),e.title&&$en(e.title,t),t.parseLambdas(),t}const atn=e=>nT({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function ltn(e,t){const n=t.config,r=Bt(t.root=t.add(hL())),i=utn(e,n);i.forEach(u=>i5e(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Ff()),o=t.add(a5e(r5e(atn(e.encode),jj,fie,e.style,t,{pulse:Bt(s)}))),a=t.add(c5e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Bt(o)}));t.operators.pop(),t.pushState(Bt(o),Bt(a),null),C5e(e,t,i),t.operators.push(a);let l=t.add(o5e({mark:r,pulse:Bt(a)}));return l=t.add(u5e({pulse:Bt(l)})),l=t.add(u_({pulse:Bt(l)})),t.addData("root",new Ab(t,s,s,l)),t}function pC(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function utn(e,t){const n=o=>Ld(e[o],t[o]),r=[pC("background",n("background")),pC("autosize",yJt(n("autosize"))),pC("padding",bJt(n("padding"))),pC("width",n("width")||0),pC("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return wt(e.signals).forEach(o=>{Vt(i,o.name)?o=Nn(i[o.name],o):r.push(o),s[o.name]=o}),wt(t.signals).forEach(o=>{!Vt(s,o.name)&&!Vt(i,o.name)&&r.push(o)}),r}function A5e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Nye(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}A5e.prototype=Nye.prototype={parse(e){return C5e(e,this)},fork(){return new Nye(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof cW?Bt(e):e;return this.add(_Zt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Bt(this.add(u_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Bt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return cr(this._parent)},encode(){return cr(this._encode)},lookup(){return cr(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Et(e))return ik(e,t);e.signal||Ve("Unsupported field reference: "+ut(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Bt(this.add(cZt(i)))}return r},compareRef(e){let t=!1;const n=s=>ro(s)?(t=!0,this.signalRef(s.signal)):KJt(s)?(t=!0,this.exprRef(s.expr)):s,r=wt(e.field).map(n),i=wt(e.order).map(n);return t?Bt(this.add(vye({fields:r,orders:i}))):gye(r,i)},keyRef(e,t){let n=!1;const r=s=>ro(s)?(n=!0,Bt(i[s.signal])):s,i=this.signals;return e=wt(e).map(r),n?Bt(this.add(dZt({fields:e,flat:t}))):qJt(e,t)},sortRef(e){if(!e)return e;const t=Lj(e.op,e.field),n=e.order||WJt;return n.signal?Bt(this.add(vye({fields:t,orders:this.signalRef(n.signal)}))):gye(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Vt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Ve("Duplicate signal name: "+ut(e));const n=t instanceof cW?t:this.add(hL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Ve("Unrecognized signal name: "+ut(e)),this.signals[e]},signalRef(e){return this.signals[e]?Bt(this.signals[e]):(Vt(this.lambdas,e)||(this.lambdas[e]=this.add(hL(null))),Bt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=rp(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!bt(e)?e:this.signalRef(e.signal||Tie(e))},exprRef(e,t){const n={expr:rp(e,this)};return t&&(n.expr.$name=t),Bt(this.add(lZt(n)))},addBinding(e,t){this.bindings||Ve("Nested signals do not support binding: "+ut(e)),this.bindings.push(Nn({signal:e},t))},addScaleProj(e,t){Vt(this.scales,e)&&Ve("Duplicate scale or projection name: "+ut(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,EZt(t))},addProjection(e,t){this.addScaleProj(e,bZt(t))},getScale(e){return this.scales[e]||Ve("Unrecognized scale name: "+ut(e)),this.scales[e]},scaleRef(e){return Bt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Vt(this.data,e)&&Ve("Duplicate data set name: "+ut(e)),this.data[e]=t},getData(e){return this.data[e]||Ve("Undefined data set name: "+ut(e)),this.data[e]},addDataPipeline(e,t){return Vt(this.data,e)&&Ve("Duplicate data set name: "+ut(e)),this.addData(e,Ab.fromEntries(this,t))}};function Tie(e){return(We(e)?ctn:dtn)(e)}function ctn(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(bt(i)?i.signal||Tie(i):ut(i))}return n+"]"}function dtn(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+ut(r)+":"+(bt(i)?i.signal||Tie(i):ut(i));return t+"}"}function ftn(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function htn(e,t,n){return bt(e)||Ve("Input Vega specification must be an object."),t=YS(ftn(),t,e.config),ltn(e,new A5e(t,n)).toRuntime()}var ptn="5.30.0";Nn(Ax,hUt,tWt,OWt,cGt,yGt,HGt,xGt,WGt,XGt,oYt,hYt);const mtn=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ls,CanvasHandler:XR,CanvasRenderer:tL,DATE:du,DAY:Aa,DAYOFYEAR:np,Dataflow:SE,Debug:J$e,Error:bte,EventStream:sj,Gradient:m6e,GroupItem:vj,HOURS:ac,Handler:sre,HybridHandler:o4e,HybridRenderer:zq,Info:Q$e,Item:yj,MILLISECONDS:Cf,MINUTES:lc,MONTH:Na,Marks:uc,MultiPulse:jte,None:X$e,Operator:ui,Parameters:ij,Pulse:G0,QUARTER:cu,RenderType:w0,Renderer:KR,ResourceLoader:E6e,SECONDS:rd,SVGHandler:G6e,SVGRenderer:dre,SVGStringRenderer:s4e,Scenegraph:j6e,TIME_UNITS:Pte,Transform:Me,View:qje,WEEK:Qs,Warn:_te,YEAR:Yo,accessor:bu,accessorFields:Pa,accessorName:fs,array:wt,ascending:J4,bandwidthNRD:Vte,bin:aFe,bootstrapCI:lFe,boundClip:g4e,boundContext:qR,boundItem:$q,boundMark:M6e,boundStroke:mg,changeset:o_,clampRange:uLe,codegenExpression:vje,compare:Tte,constant:ja,cumulativeLogNormal:Kte,cumulativeNormal:aj,cumulativeUniform:Zte,dayofyear:wLe,debounce:Cte,defaultLocale:Dte,definition:iFe,densityLogNormal:Yte,densityNormal:Hte,densityUniform:Jte,domChild:Ys,domClear:Nc,domCreate:b0,domFind:ire,dotbin:uFe,error:Ve,expressionFunction:ks,extend:Nn,extent:tp,extentIndex:cLe,falsy:Bg,fastmap:XS,field:td,flush:dLe,font:xj,fontFamily:YR,fontSize:Ep,format:AD,formatLocale:U$,formats:Lte,hasOwnProperty:Vt,id:OR,identity:Fa,inferType:GLe,inferTypes:YLe,ingest:$r,inherits:ht,inrange:Uw,interpolate:Mne,interpolateColors:mj,interpolateRange:t6e,intersect:f4e,intersectBoxLine:Vw,intersectPath:Vne,intersectPoint:Hne,intersectRule:S6e,isArray:We,isBoolean:lv,isDate:W0,isFunction:On,isIterable:fLe,isNumber:xr,isObject:bt,isRegExp:hLe,isString:Et,isTuple:nj,key:Ate,lerp:pLe,lineHeight:Ay,loader:ej,locale:qLe,logger:wte,lruCache:mLe,markup:cre,merge:gLe,mergeConfig:YS,multiLineOffset:tre,one:GS,pad:yLe,panLinear:rLe,panLog:iLe,panPow:sLe,panSymlog:oLe,parse:htn,parseExpression:Jre,parseSelector:cv,path:_6,pathCurves:Bne,pathEqual:y4e,pathParse:Px,pathRectangle:v6e,pathRender:XI,pathSymbols:y6e,pathTrail:b6e,peek:cr,point:Tj,projection:xre,quantileLogNormal:Xte,quantileNormal:lj,quantileUniform:ene,quantiles:zte,quantizeInterpolator:n6e,quarter:aLe,quartiles:Ute,get random(){return id},randomInteger:y7t,randomKDE:Wte,randomLCG:g7t,randomLogNormal:dFe,randomMixture:fFe,randomNormal:qte,randomUniform:hFe,read:QLe,regressionConstant:tne,regressionExp:mFe,regressionLinear:nne,regressionLoess:vFe,regressionLog:pFe,regressionPoly:yFe,regressionPow:gFe,regressionQuad:rne,renderModule:Cj,repeat:i2,resetDefaultLocale:hzt,resetSVGClipId:w6e,resetSVGDefIds:bqt,responseType:XLe,runtimeContext:Nje,sampleCurve:cj,sampleLogNormal:Gte,sampleNormal:oj,sampleUniform:Qte,scale:Rr,sceneEqual:fre,sceneFromJSON:L6e,scenePickVisit:G$,sceneToJSON:$6e,sceneVisit:Af,sceneZOrder:qne,scheme:$ne,serializeXML:t4e,setHybridRendererOptions:mqt,setRandom:p7t,span:DR,splitAccessPath:wp,stringValue:ut,textMetrics:Hu,timeBin:FLe,timeFloor:ILe,timeFormatLocale:GI,timeInterval:QS,timeOffset:PLe,timeSequence:DLe,timeUnitSpecifier:_Le,timeUnits:Nte,toBoolean:Ite,toDate:kte,toNumber:Ia,toSet:Tf,toString:Rte,transform:sFe,transforms:Ax,truncate:vLe,truthy:nd,tupleid:zt,typeParsers:Aq,utcFloor:kLe,utcInterval:JS,utcOffset:NLe,utcSequence:MLe,utcdayofyear:SLe,utcquarter:lLe,utcweek:TLe,version:ptn,visitArray:Yg,week:ELe,writeConfig:KS,zero:l0,zoomLinear:Ete,zoomLog:xte,zoomPow:z$,zoomSymlog:Ste},Symbol.toStringTag,{value:"Module"}));function gtn(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var ytn={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},vtn={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},btn={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const _tn=Array.prototype.slice,Ov=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,_tn.call(t,1))},wtn=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var Etn={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:wtn,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Ov("join",arguments)},indexof:function(){return Ov("indexOf",arguments)},lastindexof:function(){return Ov("lastIndexOf",arguments)},slice:function(){return Ov("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Ov("substring",arguments,String)},split:function(){return Ov("split",arguments,String)},replace:function(){return Ov("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const xtn=["view","item","group","xy","x","y"],yW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&yW.add(setImmediate);const Stn={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:ytn[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),yW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Etn[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>vtn[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>btn[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,yW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function mC(e,t,n,r,i,s){const o=a=>Stn[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,xtn.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var Ttn={operator(e,t){const n=t.ast,r=e.functions;return i=>mC(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>mC(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>mC(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return mC(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const l=o.datum;let u=0,c;for(const d in r)c=mC(r[d].ast,i,a,l,void 0,o),o[d]!==c&&(o[d]=c,u=1);return n!=="rule"&&gtn(o,r,s),u}}};const Ctn="vega-lite",Atn='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Itn="5.19.0",ktn=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Rtn="https://vega.github.io/vega-lite/",Ptn="Vega-Lite is a concise high-level language for interactive visualization.",Ntn=["vega","chart","visualization"],Otn="build/vega-lite.js",Dtn="build/vega-lite.min.js",Mtn="build/vega-lite.min.js",$tn="build/src/index",Ltn="build/src/index.d.ts",Ftn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},jtn=["bin","build","src","vega-lite*","tsconfig.json"],Btn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},ztn={type:"git",url:"https://github.com/vega/vega-lite.git"},Utn="BSD-3-Clause",Vtn={url:"https://github.com/vega/vega-lite/issues"},Htn={"@babel/core":"^7.24.7","@babel/preset-env":"^7.24.7","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.13.0","@typescript-eslint/parser":"^7.13.0",ajv:"^8.16.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.2",puppeteer:"^15.0.0","release-it":"17.2.1",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.1","ts-jest":"^29.1.4","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},qtn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},Wtn={vega:"^5.24.0"},Gtn={node:">=18"},Ytn="yarn@1.22.19",Ktn={name:Ctn,author:Atn,version:Itn,collaborators:ktn,homepage:Rtn,description:Ptn,keywords:Ntn,main:Otn,unpkg:Dtn,jsdelivr:Mtn,module:$tn,types:Ltn,bin:Ftn,files:jtn,scripts:Btn,repository:ztn,license:Utn,bugs:Vtn,devDependencies:Htn,dependencies:qtn,peerDependencies:Wtn,engines:Gtn,packageManager:Ytn};function Cie(e){return!!e.or}function Aie(e){return!!e.and}function Iie(e){return!!e.not}function GD(e,t){if(Iie(e))GD(e.not,t);else if(Aie(e))for(const n of e.and)GD(n,t);else if(Cie(e))for(const n of e.or)GD(n,t);else t(e)}function CE(e,t){return Iie(e)?{not:CE(e.not,t)}:Aie(e)?{and:e.and.map(n=>CE(n,t))}:Cie(e)?{or:e.or.map(n=>CE(n,t))}:t(e)}const mn=structuredClone;function I5e(e){throw new Error(e)}function $x(e,t){const n={};for(const r of t)Vt(e,r)&&(n[r]=e[r]);return n}function tu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ei(e)).join(",")})`};function tr(e){if(xr(e))return e;const t=Et(e)?e:ei(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function vW(e){return e===!1||e===null}function Kn(e,t){return e.includes(t)}function Lx(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function kie(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function k5e(e,...t){for(const n of t)Xtn(e,n??{});return e}function Xtn(e,t){for(const n of tt(t))KS(e,n,t[n],!0)}function Ch(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function Qtn(e,t){const n=tt(e),r=tt(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function R5e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Rie(e,t){for(const n of e)if(t.has(n))return!0;return!1}function bW(e){const t=new Set;for(const n of e){const i=wp(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Pie(e,t){return e===void 0||t===void 0?!0:Rie(bW(e),bW(t))}function Zr(e){return tt(e).length===0}const tt=Object.keys,Ko=Object.values,Py=Object.entries;function ak(e){return e===!0||e===!1}function Fi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function vA(e,t){return Iie(e)?`!(${vA(e.not,t)})`:Aie(e)?`(${e.and.map(n=>vA(n,t)).join(") && (")})`:Cie(e)?`(${e.or.map(n=>vA(n,t)).join(") || (")})`:t(e)}function pL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&pL(e[n],t)&&delete e[n],Zr(e)}function rP(e){return e.charAt(0).toUpperCase()+e.substr(1)}function Nie(e,t="datum"){const n=wp(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(ut).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function P5e(e,t="datum"){return`${t}[${ut(wp(e).join("."))}]`}function Jtn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function sd(e){return`${wp(e).map(Jtn).join("\\.")}`}function Ib(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function sT(e){return`${wp(e).join(".")}`}function Fx(e){return e?wp(e).length:0}function Ts(...e){for(const t of e)if(t!==void 0)return t}let N5e=42;function O5e(e){const t=++N5e;return e?String(e)+t:t}function Ztn(){N5e=42}function D5e(e){return M5e(e)?e:`__${e}`}function M5e(e){return e.startsWith("__")}function lk(e){if(e!==void 0)return(e%360+360)%360}function Hj(e){return xr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Oye=Object.getPrototypeOf(structuredClone({}));function zu(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!zu(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!zu(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Oye.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Oye.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!zu(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function ei(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const l=a[i],u=n(r[l]);u&&(s&&(s+=","),s+=JSON.stringify(l)+":"+u)}return t.splice(o,1),`{${s}}`}(e)}const Sm="row",Tm="column",qj="facet",Bi="x",Co="y",Bf="x2",Tp="y2",dv="xOffset",oT="yOffset",zf="radius",yg="radius2",gd="theta",vg="theta2",Uf="latitude",Vf="longitude",Hf="latitude2",od="longitude2",fu="color",Cp="fill",Ap="stroke",hu="shape",bg="size",d_="angle",_g="opacity",fv="fillOpacity",hv="strokeOpacity",pv="strokeWidth",mv="strokeDash",iP="text",jx="order",sP="detail",Wj="key",kb="tooltip",Gj="href",Yj="url",Kj="description",enn={x:1,y:1,x2:1,y2:1},$5e={theta:1,theta2:1,radius:1,radius2:1};function L5e(e){return e in $5e}const Oie={longitude:1,longitude2:1,latitude:1,latitude2:1};function F5e(e){switch(e){case Uf:return"y";case Hf:return"y2";case Vf:return"x";case od:return"x2"}}function j5e(e){return e in Oie}const tnn=tt(Oie),Die={...enn,...$5e,...Oie,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function AE(e){return e===fu||e===Cp||e===Ap}const B5e={row:1,column:1,facet:1},Uc=tt(B5e),Mie={...Die,...B5e},nnn=tt(Mie),{order:xhn,detail:Shn,tooltip:Thn,...rnn}=Mie,{row:Chn,column:Ahn,facet:Ihn,...inn}=rnn;function snn(e){return!!inn[e]}function z5e(e){return!!Mie[e]}const onn=[Bf,Tp,Hf,od,vg,yg];function U5e(e){return f_(e)!==e}function f_(e){switch(e){case Bf:return Bi;case Tp:return Co;case Hf:return Uf;case od:return Vf;case vg:return gd;case yg:return zf}return e}function Ny(e){if(L5e(e))switch(e){case gd:return"startAngle";case vg:return"endAngle";case zf:return"outerRadius";case yg:return"innerRadius"}return e}function Ip(e){switch(e){case Bi:return Bf;case Co:return Tp;case Uf:return Hf;case Vf:return od;case gd:return vg;case zf:return yg}}function pu(e){switch(e){case Bi:case Bf:return"width";case Co:case Tp:return"height"}}function V5e(e){switch(e){case Bi:return"xOffset";case Co:return"yOffset";case Bf:return"x2Offset";case Tp:return"y2Offset";case gd:return"thetaOffset";case zf:return"radiusOffset";case vg:return"theta2Offset";case yg:return"radius2Offset"}}function $ie(e){switch(e){case Bi:return"xOffset";case Co:return"yOffset"}}function ann(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const lnn=tt(Die),{x:khn,y:Rhn,x2:Phn,y2:Nhn,xOffset:Ohn,yOffset:Dhn,latitude:Mhn,longitude:$hn,latitude2:Lhn,longitude2:Fhn,theta:jhn,theta2:Bhn,radius:zhn,radius2:Uhn,...Lie}=Die,unn=tt(Lie),Fie={x:1,y:1},wg=tt(Fie);function Cs(e){return e in Fie}const jie={theta:1,radius:1},cnn=tt(jie);function Xj(e){return e==="width"?Bi:Co}const H5e={xOffset:1,yOffset:1};function oP(e){return e in H5e}const{text:Vhn,tooltip:Hhn,href:qhn,url:Whn,description:Ghn,detail:Yhn,key:Khn,order:Xhn,...q5e}=Lie,dnn=tt(q5e);function fnn(e){return!!Lie[e]}function hnn(e){switch(e){case fu:case Cp:case Ap:case bg:case hu:case _g:case pv:case mv:return!0;case fv:case hv:case d_:return!1}}const W5e={...Fie,...jie,...H5e,...q5e},Bie=tt(W5e);function kp(e){return!!W5e[e]}function pnn(e,t){return gnn(e)[t]}const G5e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Qhn,...mnn}=G5e;function gnn(e){switch(e){case fu:case Cp:case Ap:case Kj:case sP:case Wj:case kb:case Gj:case jx:case _g:case fv:case hv:case pv:case qj:case Sm:case Tm:return G5e;case Bi:case Co:case dv:case oT:case Uf:case Vf:return mnn;case Bf:case Tp:case Hf:case od:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case bg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case mv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case hu:return{point:"always",geoshape:"always"};case iP:return{text:"always"};case d_:return{point:"always",square:"always",text:"always"};case Yj:return{image:"always"};case gd:return{text:"always",arc:"always"};case zf:return{text:"always",arc:"always"};case vg:case yg:return{arc:"always"}}}function Nz(e){switch(e){case Bi:case Co:case gd:case zf:case dv:case oT:case bg:case d_:case pv:case _g:case fv:case hv:case Bf:case Tp:case vg:case yg:return;case qj:case Sm:case Tm:case hu:case mv:case iP:case kb:case Gj:case Yj:case Kj:return"discrete";case fu:case Cp:case Ap:return"flexible";case Uf:case Vf:case Hf:case od:case sP:case Wj:case jx:return}}const ynn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},vnn={count:1,min:1,max:1};function Zm(e){return!!e&&!!e.argmin}function gv(e){return!!e&&!!e.argmax}function zie(e){return Et(e)&&!!ynn[e]}const bnn=new Set(["count","valid","missing","distinct"]);function Qj(e){return Et(e)&&bnn.has(e)}function _nn(e){return Et(e)&&Kn(["min","max"],e)}const wnn=new Set(["count","sum","distinct","valid","missing"]),Enn=new Set(["mean","average","median","q1","q3","min","max"]);function Y5e(e){return lv(e)&&(e=c5(e,void 0)),"bin"+tt(e).map(t=>Jj(e[t])?Fi(`_${t}_${Py(e[t])}`):Fi(`_${t}_${e[t]}`)).join("")}function _i(e){return e===!0||h_(e)&&!e.binned}function jo(e){return e==="binned"||h_(e)&&e.binned===!0}function h_(e){return bt(e)}function Jj(e){return e==null?void 0:e.param}function Dye(e){switch(e){case Sm:case Tm:case bg:case fu:case Cp:case Ap:case pv:case _g:case fv:case hv:case hu:return 6;case mv:return 4;default:return 10}}function aP(e){return!!(e!=null&&e.expr)}function Ea(e,{level:t}={level:0}){const n=tt(e||{}),r={};for(const i of n)r[i]=t===0?Ou(e[i]):Ea(e[i],{level:t-1});return r}function K5e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:l,subtitleFont:u,subtitleFontSize:c,subtitleFontStyle:d,subtitleFontWeight:f,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},b={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...c?{subtitleFontSize:c}:{},...d?{subtitleFontStyle:d}:{},...f?{subtitleFontWeight:f}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},_=$x(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:_,nonMarkTitleProperties:y,subtitle:b}}function Qg(e){return Et(e)||We(e)&&Et(e[0])}function $t(e){return!!(e!=null&&e.signal)}function yv(e){return!!e.step}function xnn(e){return We(e)?!1:"fields"in e&&!("data"in e)}function Snn(e){return We(e)?!1:"fields"in e&&"data"in e}function hm(e){return We(e)?!1:"field"in e&&"data"in e}const Tnn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Cnn=tt(Tnn),Ann={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},_W=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function X5e(e){const t=We(e.condition)?e.condition.map(Mye):Mye(e.condition);return{...Ou(e),condition:t}}function Ou(e){if(aP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Mye(e){if(aP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Ai(e){if(aP(e)){const{expr:t,...n}=e;return{signal:t,...n}}return $t(e)?e:e!==void 0?{value:e}:void 0}function Inn(e){return $t(e)?e.signal:ut(e)}function $ye(e){return $t(e)?e.signal:ut(e.value)}function Zd(e){return $t(e)?e.signal:e==null?null:ut(e)}function knn(e,t,n){for(const r of n){const i=ip(r,t.markDef,t.config);i!==void 0&&(e[r]=Ai(i))}return e}function Q5e(e){return[].concat(e.type,e.style??[])}function Gr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:ip(e,t,n,r)}function ip(e,t,n,{vgChannel:r}={}){return Ts(r?mL(e,t,n.style):void 0,mL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function mL(e,t,n){return J5e(e,Q5e(t),n)}function J5e(e,t,n){t=wt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function Z5e(e,t){return wt(e).reduce((n,r)=>(n.field.push(pt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function e8e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(zu(i,r))return;n.push(r)}),n}function t8e(e,t){return zu(e,t)||!t?e:e?[...wt(e),...wt(t)].join(", "):t}function n8e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Qg(n)||$t(n))&&(Qg(r)||$t(r)))return{explicit:e.explicit,value:t8e(n,r)};if(Qg(n)||$t(n))return{explicit:e.explicit,value:n};if(Qg(r)||$t(r))return{explicit:e.explicit,value:r};if(!Qg(n)&&!$t(n)&&!Qg(r)&&!$t(r))return{explicit:e.explicit,value:e8e(n,r)};throw new Error("It should never reach here")}function Uie(e){return`Invalid specification ${ei(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Rnn='Autosize "fit" only works for single views and layered views.';function Lye(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Fye(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function jye(e){return e?`Dropping "fit-${e}" because spec has discrete ${pu(e)}.`:'Dropping "fit" because spec has discrete size.'}function Vie(e){return`Unknown field for ${e}. Cannot calculate view size.`}function Bye(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Pnn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function Nnn(e){return`The "nearest" transform is not supported for ${e} marks.`}function r8e(e){return`Selection not supported for ${e} yet.`}function Onn(e){return`Cannot find a selection named "${e}".`}const Dnn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",Mnn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",$nn="Legend bindings are only supported for selections over an individual field or encoding channel.";function Lnn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Fnn(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const jnn="The same selection must be used to override scale domains in a layered view.",Bnn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function znn(e){return`Unknown repeated value "${e}".`}function zye(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Unn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Vnn(e){return`Unrecognized parse "${e}".`}function Uye(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Hnn="Attempt to add the same child twice.";function qnn(e){return`Ignoring an invalid transform: ${ei(e)}.`}const Wnn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Vye(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Gnn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ei(t)} is overridden by a child projection ${ei(n)}.`}const Ynn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Knn(e){return`${e}Offset dropped because ${e} is continuous`}function Xnn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ei(n)}}.`}function i8e(e){return`Invalid field type "${e}".`}function Qnn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Jnn(e){return`Invalid aggregation operator "${e}".`}function s8e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Znn(e){return`Position range does not support relative band size for ${e}.`}function wW(e,t){return`Dropping ${ei(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const ern="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function Zj(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function trn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function nrn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function rrn(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function irn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function Oz(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function srn(e){return`The ${e} for range marks cannot be an expression`}function orn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function arn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function lrn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function urn(e){return`Cannot use the relative band size with ${e} scale.`}function crn(e){return`Using unaggregated domain with raw field has no effect (${ei(e)}).`}function drn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function frn(e){return`Unaggregated domain is currently unsupported for log scale (${ei(e)}).`}function hrn(e){return`Cannot apply size to non-oriented mark "${e}".`}function prn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function mrn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function o8e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function a8e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function grn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ei(n)} and ${ei(r)}). Using ${ei(n)}.`}function yrn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${ei(n)} and ${ei(r)}). Using the union of the two domains.`}function vrn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function brn(e){return`Dropping sort property ${ei(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Hye="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",_rn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",wrn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Ern="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function xrn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Srn(e){return`Stack is applied to a non-linear scale (${e}).`}function Trn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function gL(e,t){return`Invalid ${e}: ${ei(t)}.`}function Crn(e){return`Dropping day from datetime ${ei(e)} as day cannot be combined with other units.`}function Arn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Irn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function krn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function qye(e){return`1D error band does not support ${e}.`}function l8e(e){return`Channel ${e} is required for "binned" bin.`}function Rrn(e){return`Channel ${e} should not be used with "binned" bin.`}function Prn(e){return`Domain for ${e} is required for threshold scale.`}const u8e=wte(_te);let Bx=u8e;function Nrn(e){return Bx=e,Bx}function Orn(){return Bx=u8e,Bx}function st(...e){Bx.warn(...e)}function Drn(...e){Bx.debug(...e)}function p_(e){if(e&&bt(e)){for(const t of qie)if(t in e)return!0}return!1}const c8e=["january","february","march","april","may","june","july","august","september","october","november","december"],Mrn=c8e.map(e=>e.substr(0,3)),d8e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],$rn=d8e.map(e=>e.substr(0,3));function Lrn(e){if(Hj(e)&&(e=+e),xr(e))return e>4&&st(gL("quarter",e)),e-1;throw new Error(gL("quarter",e))}function Frn(e){if(Hj(e)&&(e=+e),xr(e))return e-1;{const t=e.toLowerCase(),n=c8e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Mrn.indexOf(r);if(i!==-1)return i;throw new Error(gL("month",e))}}function jrn(e){if(Hj(e)&&(e=+e),xr(e))return e%7;{const t=e.toLowerCase(),n=d8e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=$rn.indexOf(r);if(i!==-1)return i;throw new Error(gL("day",e))}}function Hie(e,t){const n=[];if(t&&e.day!==void 0&&tt(e).length>1&&(st(Crn(e)),e=mn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Frn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Lrn(e.quarter):e.quarter;n.push(xr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?jrn(e.day):e.day;n.push(xr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Rb(e){const n=Hie(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Brn(e){const n=Hie(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function zrn(e){const t=Hie(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const f8e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},qie=tt(f8e);function Urn(e){return!!f8e[e]}function m_(e){return bt(e)?e.binned:h8e(e)}function h8e(e){return e&&e.startsWith("binned")}function Wie(e){return e.startsWith("utc")}function Vrn(e){return e.substring(3)}const Hrn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function e5(e){return qie.filter(t=>m8e(e,t))}function p8e(e){const t=e5(e);return t[t.length-1]}function m8e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function qrn(e,t,{end:n}={end:!1}){const r=Nie(t),i=Wie(e)?"utc":"";function s(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let o;const a={};for(const l of qie)m8e(e,l)&&(a[l]=s(l),o=l);return n&&(a[o]+="+1"),Brn(a)}function g8e(e){if(!e)return;const t=e5(e);return`timeUnitSpecifier(${ei(t)}, ${ei(Hrn)})`}function Wrn(e,t,n){if(!e)return;const r=g8e(e);return`${n||Wie(e)?"utc":"time"}Format(${t}, ${r})`}function xo(e){if(!e)return;let t;return Et(e)?h8e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:bt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Wie(t.unit)&&(t.utc=!0,t.unit=Vrn(t.unit)),t}function Grn(e){const{utc:t,...n}=xo(e);return n.unit?(t?"utc":"")+tt(n).map(r=>Fi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+tt(n).map(r=>Fi(`_${r}_${n[r]}`)).join("")}function y8e(e,t=n=>n){const n=xo(e),r=p8e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=v8e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Rb(a))} - ${t(Rb(i))}`}}const Yrn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Krn(e){return!!Yrn[e]}function v8e(e,t=1){if(Krn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Xrn(e){return e==null?void 0:e.param}function Gie(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Yie(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Kie(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Xie(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Qie(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Jie(e){if(e!=null&&e.field){if(We(e.range)&&e.range.length===2)return!0;if($t(e.range))return!0}return!1}function Zie(e){return!!(e!=null&&e.field)&&(We(e.oneOf)||We(e.in))}function Qrn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function b8e(e){return Zie(e)||Gie(e)||Jie(e)||Yie(e)||Xie(e)||Kie(e)||Qie(e)}function Jf(e,t){return d5(e,{timeUnit:t,wrapTime:!0})}function Jrn(e,t){return e.map(n=>Jf(n,t))}function _8e(e,t=!0){const{field:n}=e,r=xo(e.timeUnit),{unit:i,binned:s}=r||{},o=pt(e,{expr:"datum"}),a=i?`time(${s?o:qrn(i,n)})`:o;if(Gie(e))return`${a}===${Jf(e.equal,i)}`;if(Yie(e)){const l=e.lt;return`${a}<${Jf(l,i)}`}else if(Xie(e)){const l=e.gt;return`${a}>${Jf(l,i)}`}else if(Kie(e)){const l=e.lte;return`${a}<=${Jf(l,i)}`}else if(Qie(e)){const l=e.gte;return`${a}>=${Jf(l,i)}`}else{if(Zie(e))return`indexof([${Jrn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(Qrn(e))return t5(a,e.valid);if(Jie(e)){const{range:l}=e,u=$t(l)?{signal:`${l.signal}[0]`}:l[0],c=$t(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&c!==null&&t)return"inrange("+a+", ["+Jf(u,i)+", "+Jf(c,i)+"])";const d=[];return u!==null&&d.push(`${a} >= ${Jf(u,i)}`),c!==null&&d.push(`${a} <= ${Jf(c,i)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ei(e)}`)}function t5(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Zrn(e){return b8e(e)&&e.timeUnit?{...e,timeUnit:xo(e.timeUnit)}:e}const lP={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function ein(e){return e==="quantitative"||e==="temporal"}function w8e(e){return e==="ordinal"||e==="nominal"}const Pb=lP.quantitative,ese=lP.ordinal,zx=lP.temporal,tse=lP.nominal,aT=lP.geojson;function tin(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Pb:return"quantitative";case"t":case zx:return"temporal";case"o":case ese:return"ordinal";case"n":case tse:return"nominal";case aT:return"geojson"}}const zo={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},EW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function nin(e,t){const n=EW[e],r=EW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const rin={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Wye(e){return rin[e]}const E8e=new Set(["linear","log","pow","sqrt","symlog"]),x8e=new Set([...E8e,"time","utc"]);function S8e(e){return E8e.has(e)}const T8e=new Set(["quantile","quantize","threshold"]),iin=new Set([...x8e,...T8e,"sequential","identity"]),sin=new Set(["ordinal","bin-ordinal","point","band"]);function So(e){return sin.has(e)}function If(e){return iin.has(e)}function Ah(e){return x8e.has(e)}function Ux(e){return T8e.has(e)}const oin={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function ain(e){return!Et(e)&&!!e.name}function C8e(e){return e==null?void 0:e.param}function lin(e){return e==null?void 0:e.unionWith}function uin(e){return bt(e)&&"field"in e}const cin={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Jhn,domain:Zhn,range:epn,rangeMax:tpn,rangeMin:npn,scheme:rpn,...din}=cin,fin=tt(din);function xW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Ah(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Ah(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Ah(e);case"nice":return Ah(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return If(e)&&!Kn(["log","time","utc","threshold","quantile"],e)}}function A8e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return AE(e)?void 0:lrn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function hin(e,t){return Kn([ese,tse],t)?e===void 0||So(e):t===zx?Kn([zo.TIME,zo.UTC,void 0],e):t===Pb?S8e(e)||Ux(e)||e===void 0:!0}function pin(e,t,n=!1){if(!kp(e))return!1;switch(e){case Bi:case Co:case dv:case oT:case gd:case zf:return Ah(t)||t==="band"?!0:t==="point"?!n:!1;case bg:case pv:case _g:case fv:case hv:case d_:return Ah(t)||Ux(t)||Kn(["band","point","ordinal"],t);case fu:case Cp:case Ap:return t!=="band";case mv:case hu:return t==="ordinal"||Ux(t)}}function min(e){return bt(e)&&"value"in e}const xl={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},I8e=xl.arc,n5=xl.area,r5=xl.bar,gin=xl.image,i5=xl.line,s5=xl.point,yin=xl.rect,yL=xl.rule,k8e=xl.text,nse=xl.tick,vin=xl.trail,rse=xl.circle,ise=xl.square,R8e=xl.geoshape;function vv(e){return["line","area","trail"].includes(e)}function uk(e){return["rect","bar","image","arc"].includes(e)}const bin=new Set(tt(xl));function sp(e){return e.type}const _in=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],win=["fill","fillOpacity"],Ein=[..._in,...win],xin={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Gye=tt(xin),Sin={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},Tin={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Cin={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},P8e=tt(Cin);function Nb(e){return e&&e.band!=null}const Ain={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},N8e=5,Iin={binSpacing:1,continuousBandSize:N8e,minBandSize:.25,timeUnitBandPosition:.5},kin={binSpacing:0,continuousBandSize:N8e,minBandSize:.25,timeUnitBandPosition:.5},Rin={thickness:1};function Pin(e){return sp(e)?e.type:e}function O8e(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function sse({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,l;if(!r||!If(r)||i)return"always-valid";const s=O8e(Gr("invalid",e,t),{isPath:vv(e.type)});return((l=(a=t.scale)==null?void 0:a.invalid)==null?void 0:l[n])!==void 0?"show":s}function Nin(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function D8e({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function M8e({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=Rf(t),l=Qj(a==null?void 0:a.aggregate),u=sse({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:l});if(a&&u==="show"){const d=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:t5(pt(a,{expr:"datum"}),!1),...Oin(d,n,r)}}}function Oin(e,t,n){if(min(e)){const{value:r}=e;return $t(r)?{signal:r.signal}:{value:r}}return D8e({scale:t,scaleName:n,mode:"zeroOrMin"})}function ose(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=f_(t),l=ase(e),u=M8e({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return u!==void 0?[u,l]:l}function Din(e){const{datum:t}=e;return p_(t)?Rb(t):`${ei(t)}`}function H1(e,t,n,r){const i={};if(t&&(i.scale=t),Rp(e)){const{datum:s}=e;p_(s)?i.signal=Rb(s):$t(s)?i.signal=s.signal:aP(s)?i.signal=s.expr:i.value=s}else i.field=pt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function vL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!$t(o)&&0<o&&o<1?"datum":void 0,l=pt(t,{expr:a,suffix:i}),u=n!==void 0?pt(n,{expr:a}):pt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const d=o===0?l:u;c.field=d}else{const d=$t(o)?`(1-${o.signal}) * ${l} + ${o.signal} * ${u}`:`${1-o} * ${l} + ${o} * ${u}`;c.signal=`scale("${e}", ${d})`}return r&&(c.offset=r),c}function Min({scaleName:e,fieldDef:t}){const n=pt(t,{expr:"datum"}),r=pt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function ase({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u,bandPosition:c}){if(t){if(En(t)){const d=o==null?void 0:o.get("type");if(gl(t)){c??(c=Oy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:f,timeUnit:h,type:p}=t;if(_i(f)||c&&h&&p===zx)return a!=null&&a.impute?H1(t,s,{binSuffix:"mid"},{offset:l}):c&&!So(d)?vL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:l}):H1(t,s,fP(t,e)?{binSuffix:"range"}:{},{offset:l});if(jo(f)){if(ot(n))return vL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:l});st(l8e(e===Bi?Bf:Tp))}}return H1(t,s,So(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?c??t.bandPosition??.5:void 0})}else if(kf(t)){const d=t.value,f=l?{offset:l}:{};return{...bA(e,d),...f}}}return On(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function bA(e,t){return Kn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Kn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Ai(t)}function Ob(e){return e&&e!=="number"&&e!=="time"}function $8e(e,t,n){return`${e}(${t}${n?`, ${ei(n)}`:""})`}const $in="  ";function lse({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var l,u;if(Ob(n))return ef({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=L8e(e,r,i),a=Vx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return ef({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return ef({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&ot(e)&&e.timeUnit===void 0)return ef({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(qx(e)){const c=Fin({field:o,timeUnit:ot(e)?(l=xo(e.timeUnit))==null?void 0:l.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:g_(e)&&((u=e.scale)==null?void 0:u.type)===zo.UTC});return c?{signal:c}:void 0}if(t=SW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),ot(e)&&_i(e.bin)){const c=pt(e,{expr:r,binSuffix:"end"});return{signal:uP(o,c,t,n,s)}}else return t||Vx(e)==="quantitative"?{signal:`${B8e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function L8e(e,t,n){return ot(e)?n?`${pt(e,{expr:t,suffix:"end"})}-${pt(e,{expr:t,suffix:"start"})}`:pt(e,{expr:t}):Din(e)}function ef({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=L8e(e,r,i)),o!=="datum.value"&&ot(e)&&_i(e.bin)){const a=pt(e,{expr:r,binSuffix:"end"});return{signal:uP(o,a,t,n,s)}}return{signal:$8e(n,o,t)}}function F8e(e,t,n,r,i,s){var o;if(!(Et(r)&&Ob(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Vx(e)==="quantitative"&&(i.normalizedNumberFormatType&&Hx(e)&&e.stack==="normalize"||i.numberFormatType))){if(Hx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return SW({type:"quantitative",config:i,normalizeStack:!0});if(qx(e)){const a=ot(e)?(o=xo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Lin({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return SW({type:t,specifiedFormat:n,config:i})}}function j8e(e,t,n){var r;if(e&&($t(e)||e==="number"||e==="time"))return e;if(qx(t)&&n!=="time"&&n!=="utc")return ot(t)&&((r=xo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function SW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Et(t))return t;if(e===Pb)return r?n.normalizedNumberFormat:n.numberFormat}function Lin({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:g8e(t)}:r?void 0:n.timeFormat)}function B8e(e,t){return`format(${e}, "${t||""}")`}function Yye(e,t,n,r){return Ob(n)?$8e(n,e,t):B8e(e,(Et(t)?t:void 0)??r.numberFormat)}function uP(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return uP(e,t,i.numberFormat,i.numberFormatType,i);const s=Yye(e,n,r,i),o=Yye(t,n,r,i);return`${t5(e,!1)} ? "null" : ${s} + "${$in}" + ${o}`}function Fin({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=Et(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):Wrn(t,e,s)}const o5="min",jin={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Kye(e){return e in jin}function Bin(e){return!!(e!=null&&e.encoding)}function Cm(e){return e&&(e.op==="count"||!!e.field)}function z8e(e){return e&&We(e)}function cP(e){return"row"in e||"column"in e}function use(e){return!!e&&"header"in e}function a5(e){return"facet"in e}function zin(e){return e.param}function Uin(e){return e&&!Et(e)&&"repeat"in e}function Xye(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function cse(e){return"sort"in e}function Oy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(En(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ot(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return ip("timeUnitBandPosition",n,r);if(_i(s))return .5}}function U8e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var u,c,d;const a=pu(e),l=Gr(o?"size":a,r,i,{vgChannel:a});if(l!==void 0)return l;if(ot(t)){const{timeUnit:f,bin:h}=t;if(f&&!n)return{band:ip("timeUnitBandSize",r,i)};if(_i(h)&&!So(s))return{band:1}}if(uk(r.type))return s?So(s)?((u=i[r.type])==null?void 0:u.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(d=i[r.type])==null?void 0:d.discreteBandSize}function V8e(e,t,n,r){return _i(e.bin)||e.timeUnit&&gl(e)&&e.type==="temporal"?Oy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function H8e(e){return e&&!!e.sort&&!e.field}function l5(e){return e&&"condition"in e}function u5(e){const t=e==null?void 0:e.condition;return!!t&&!We(t)&&ot(t)}function dP(e){const t=e==null?void 0:e.condition;return!!t&&!We(t)&&En(t)}function Vin(e){const t=e==null?void 0:e.condition;return!!t&&(We(t)||kf(t))}function ot(e){return e&&(!!e.field||e.aggregate==="count")}function Vx(e){return e==null?void 0:e.type}function Rp(e){return e&&"datum"in e}function T0(e){return gl(e)&&!_L(e)||bL(e)}function Qye(e){return gl(e)&&e.type==="quantitative"&&!e.bin||bL(e)}function bL(e){return Rp(e)&&xr(e.datum)}function En(e){return ot(e)||Rp(e)}function gl(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function kf(e){return e&&"value"in e&&"value"in e}function g_(e){return e&&("scale"in e||"sort"in e)}function Hx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function q8e(e){return e&&"legend"in e}function W8e(e){return e&&("format"in e||"formatType"in e)}function Hin(e){return tu(e,["legend","axis","header","scale"])}function qin(e){return"op"in e}function pt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(Gin(e))n=D5e("count");else{let o;if(!t.nofn)if(qin(e))o=e.op;else{const{bin:a,aggregate:l,timeUnit:u}=e;_i(a)?(o=Y5e(a),i=(t.binSuffix??"")+(t.suffix??"")):l?gv(l)?(s=`["${n}"]`,n=`argmax_${l.argmax}`):Zm(l)?(s=`["${n}"]`,n=`argmin_${l.argmin}`):o=String(l):u&&!m_(u)&&(o=Grn(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?sT(n):t.expr?P5e(n,t.expr)+s:sd(n)+s}function _L(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ot(e)&&!!e.bin;case"temporal":return!1}throw new Error(i8e(e.type))}function Win(e){var t;return g_(e)&&Ux((t=e.scale)==null?void 0:t.type)}function Gin(e){return e.aggregate==="count"}function Yin(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(_i(r))return`${n} (binned)`;if(i&&!m_(i)){const a=(o=xo(i))==null?void 0:o.unit;if(a)return`${n} (${e5(a).join("-")})`}else if(s)return gv(s)?`${n} for max ${s.argmax}`:Zm(s)?`${n} for min ${s.argmin}`:`${rP(s)} of ${n}`;return n}function Kin(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(gv(t))return`${i} for argmax(${t.argmax})`;if(Zm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!m_(r)?xo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||_i(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const G8e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Kin(e);default:return Yin(e,t)}};let Y8e=G8e;function K8e(e){Y8e=e}function Xin(){K8e(G8e)}function IE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=dse(e))==null?void 0:a.title;if(!ot(e))return i??e.title;const s=e,o=r?fse(s,t):void 0;return n?Ts(i,s.title,o):i??s.title??o}function dse(e){if(Hx(e)&&e.axis)return e.axis;if(q8e(e)&&e.legend)return e.legend;if(use(e)&&e.header)return e.header}function fse(e,t){return Y8e(e,t)}function wL(e){if(W8e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=dse(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Qin(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(cse(e)&&We(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!gv(n)&&!Zm(n))return"quantitative";if(g_(e)&&((s=e.scale)!=null&&s.type))switch(EW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Rf(e){if(ot(e))return e;if(u5(e))return e.condition}function Js(e){if(En(e))return e;if(dP(e))return e.condition}function X8e(e,t,n,r={}){if(Et(e)||xr(e)||lv(e)){const i=Et(e)?"string":xr(e)?"number":"boolean";return st(Xnn(t,i,e)),{value:e}}return En(e)?EL(e,t,n,r):dP(e)?{...e,condition:EL(e.condition,t,n,r)}:e}function EL(e,t,n,r){if(W8e(e)){const{format:i,formatType:s,...o}=e;if(Ob(s)&&!n.customFormatTypes)return st(Vye(t)),EL(o,t,n,r)}else{const i=Hx(e)?"axis":q8e(e)?"legend":use(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(Ob(o)&&!n.customFormatTypes)return st(Vye(t)),EL({...e,[i]:a},t,n,r)}}return ot(e)?hse(e,t,r):Jin(e)}function Jin(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=xr(n)?"quantitative":Et(n)?"nominal":p_(n)?"temporal":void 0,{...e,type:t}}function hse(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!zie(r)&&!gv(r)&&!Zm(r)&&(st(Jnn(r)),delete a.aggregate),i&&(a.timeUnit=xo(i)),o&&(a.field=`${o}`),_i(s)&&(a.bin=c5(s,t)),jo(s)&&!Cs(t)&&st(Rrn(t)),gl(a)){const{type:l}=a,u=tin(l);l!==u&&(a.type=u),l!=="quantitative"&&Qj(r)&&(st(Qnn(l,r)),a.type="quantitative")}else if(!U5e(t)){const l=Qin(a,t);a.type=l}if(gl(a)){const{compatible:l,warning:u}=Zin(a,t)||{};l===!1&&st(u)}if(cse(a)&&Et(a.sort)){const{sort:l}=a;if(Kye(l))return{...a,sort:{encoding:l}};const u=l.substr(1);if(l.charAt(0)==="-"&&Kye(u))return{...a,sort:{encoding:u,order:"descending"}}}if(use(a)){const{header:l}=a;if(l){const{orient:u,...c}=l;if(u)return{...a,header:{...c,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return a}function c5(e,t){return lv(e)?{maxbins:Dye(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:Dye(t)}:e}const Q_={compatible:!0};function Zin(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Sm:case Tm:case qj:return _L(e)?Q_:{compatible:!1,warning:nrn(t)};case Bi:case Co:case dv:case oT:case fu:case Cp:case Ap:case iP:case sP:case Wj:case kb:case Gj:case Yj:case d_:case gd:case zf:case Kj:return Q_;case Vf:case od:case Uf:case Hf:return n!==Pb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Q_;case _g:case fv:case hv:case pv:case bg:case vg:case yg:case Bf:case Tp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Q_;case hu:case mv:return!_L(e)&&!Win(e)?{compatible:!1,warning:rrn(t)}:Q_;case jx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Q_}}function qx(e){const{formatType:t}=wL(e);return t==="time"||!t&&esn(e)}function esn(e){return e&&(e.type==="temporal"||ot(e)&&!!e.timeUnit)}function d5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var l;const s=t&&((l=xo(t))==null?void 0:l.unit);let o=s||n==="temporal",a;return aP(e)?a=e.expr:$t(e)?a=e.signal:p_(e)?(o=!0,a=Rb(e)):(Et(e)||xr(e))&&o&&(a=`datetime(${ei(e)})`,Urn(s)&&(xr(e)&&e<1e4||Et(e)&&isNaN(Date.parse(e)))&&(a=Rb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:ei(e)}function Q8e(e,t){const{type:n}=e;return t.map(r=>{const i=ot(e)&&!m_(e.timeUnit)?e.timeUnit:void 0,s=d5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function fP(e,t){return _i(e.bin)?kp(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Jye={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function hP(e){return e==null?void 0:e.condition}const J8e=["domain","grid","labels","ticks","title"],tsn={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Z8e={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},nsn={...Z8e,style:1,labelExpr:1,encoding:1};function Zye(e){return!!nsn[e]}const rsn={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},eBe=tt(rsn);function Eg(e){return"mark"in e}class f5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Eg(t)?Pin(t.mark)===this.name:!1}}function q1(e,t){const n=e&&e[t];return n?We(n)?Lx(n,r=>!!r.field):ot(n)||u5(n):!1}function tBe(e,t){const n=e&&e[t];return n?We(n)?Lx(n,r=>!!r.field):ot(n)||Rp(n)||dP(n):!1}function nBe(e,t){if(Cs(t)){const n=e[t];if((ot(n)||Rp(n))&&(w8e(n.type)||ot(n)&&n.timeUnit)){const r=$ie(t);return tBe(e,r)}}return!1}function rBe(e){return Lx(nnn,t=>{if(q1(e,t)){const n=e[t];if(We(n))return Lx(n,r=>!!r.aggregate);{const r=Rf(n);return r&&!!r.aggregate}}return!1})}function iBe(e,t){const n=[],r=[],i=[],s=[],o={};return pse(e,(a,l)=>{if(ot(a)){const{field:u,aggregate:c,bin:d,timeUnit:f,...h}=a;if(c||f||d){const p=dse(a),m=p==null?void 0:p.title;let g=pt(a,{forAs:!0});const y={...m?[]:{title:IE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let b;if(gv(c)?(b="argmax",g=pt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${u}`):Zm(c)?(b="argmin",g=pt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${u}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(b=c),b){const _={op:b,as:g};u&&(_.field=u),s.push(_)}}else if(n.push(g),gl(a)&&_i(d)){if(r.push({bin:d,field:u,as:g}),n.push(pt(a,{binSuffix:"end"})),fP(a,l)&&n.push(pt(a,{binSuffix:"range"})),Cs(l)){const b={field:`${g}_end`};o[`${l}2`]=b}y.bin="binned",U5e(l)||(y.type=Pb)}else if(f&&!m_(f)){i.push({timeUnit:f,field:u,as:g});const b=gl(a)&&a.type!==zx&&"time";b&&(l===iP||l===kb?y.formatType=b:fnn(l)?y.legend={formatType:b,...y.legend}:Cs(l)&&(y.axis={formatType:b,...y.axis}))}o[l]=y}else n.push(u),o[l]=e[l]}else o[l]=e[l]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function isn(e,t,n){const r=pnn(t,n);if(r){if(r==="binned"){const i=e[t===Bf?Bi:Co];return!!(ot(i)&&ot(e[t])&&jo(i.bin))}}else return!1;return!0}function ssn(e,t,n,r){const i={};for(const s of tt(e))z5e(s)||st(trn(s));for(let s of lnn){if(!e[s])continue;const o=e[s];if(oP(s)){const a=ann(s),l=i[a];if(ot(l)&&ein(l.type)&&ot(o)&&!l.timeUnit){st(Knn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(st(Ynn),s=gd),!isn(e,s,t)){st(Zj(s,t));continue}if(s===bg&&t==="line"){const a=Rf(e[s]);if(a!=null&&a.aggregate){st(ern);continue}}if(s===fu&&(n?"fill"in e:"stroke"in e)){st(s8e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===sP||s===jx&&!We(o)&&!kf(o)||s===kb&&We(o)){if(o){if(s===jx){const a=e[s];if(H8e(a)){i[s]=a;continue}}i[s]=wt(o).reduce((a,l)=>(ot(l)?a.push(hse(l,s)):st(wW(l,s)),a),[])}}else{if(s===kb&&o===null)i[s]=null;else if(!ot(o)&&!Rp(o)&&!kf(o)&&!l5(o)&&!$t(o)){st(wW(o,s));continue}i[s]=X8e(o,s,r)}}return i}function h5(e,t){const n={};for(const r of tt(e)){const i=X8e(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function osn(e){const t=[];for(const n of tt(e))if(q1(e,n)){const r=e[n],i=wt(r);for(const s of i)ot(s)?t.push(s):u5(s)&&t.push(s.condition)}return t}function pse(e,t,n){if(e)for(const r of tt(e)){const i=e[r];if(We(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function asn(e,t,n,r){return e?tt(e).reduce((i,s)=>{const o=e[s];return We(o)?o.reduce((a,l)=>t.call(r,a,l,s),i):t.call(r,i,o,s)},n):n}function sBe(e,t){return tt(t).reduce((n,r)=>{switch(r){case Bi:case Co:case Gj:case Kj:case Yj:case Bf:case Tp:case dv:case oT:case gd:case vg:case zf:case yg:case Uf:case Vf:case Hf:case od:case iP:case hu:case d_:case kb:return n;case jx:if(e==="line"||e==="trail")return n;case sP:case Wj:{const i=t[r];if(We(i)||ot(i))for(const s of wt(i))s.aggregate||n.push(pt(s,{}));return n}case bg:if(e==="trail")return n;case fu:case Cp:case Ap:case _g:case fv:case hv:case mv:case pv:{const i=Rf(t[r]);return i&&!i.aggregate&&n.push(pt(i,{})),n}}},[])}function lsn(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(We(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return We(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function TW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const l=r?` of ${mse(t)}`:"";return{field:o+t.field,type:t.type,title:$t(a)?{signal:`${a}"${escape(l)}"`}:a+l}}),s=osn(n).map(Hin);return{tooltip:[...i,...Ch(s,tr)]}}function mse(e){const{title:t,field:n}=e;return Ts(t,n)}function gse(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:l,positionPrefix:u,endPositionPrefix:c=void 0,extraEncoding:d={}})=>{const f=mse(n);return oBe(e,a,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...f!==void 0?{title:f}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...Et(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...d}})}}function oBe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...sp(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...lv(e[t])?{}:e[t]}}]:[]}function aBe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:mO(s,n),continuousAxisChannelDef2:mO(o,n),continuousAxisChannelDefError:mO(a,n),continuousAxisChannelDefError2:mO(l,n),continuousAxis:i}}function mO(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&st(krn(n,t)),r}else return e}function lBe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(sp(n)&&n.orient)return n.orient;if(T0(i)){if(T0(s)){const o=ot(i)&&i.aggregate,a=ot(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return qx(s)&&!qx(i)?"horizontal":"vertical"}return"horizontal"}else{if(T0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const xL="boxplot",usn=["box","median","outliers","rule","ticks"],csn=new f5(xL,cBe);function uBe(e){return xr(e)?"tukey":e}function cBe(e,{config:t}){e={...e,encoding:h5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=sp(n)?n:{type:n};i&&st(r8e("boxplot"));const l=a.extent??t.boxplot.extent,u=Gr("size",a,t),c=a.invalid,d=uBe(l),{bins:f,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:b,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:x}=dsn(e,l,t),S=sT(m.field),{color:C,size:A,...R}=_,P=fe=>gse(a,g,m,fe,t.boxplot),L=P(R),k=P(_),$=(bt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",D=P({...R,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:$}}}}),M=TW([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,_),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},z=d==="min-max"?M:TW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,_),U=[...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:z}),...L({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:z}),...L({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:z}),...L({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:z})],O=[...d!=="tukey"?U:[],...k({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...D({partName:"median",mark:{type:"tick",invalid:c,...bt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(d==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:O};const V=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${V})`,H=`${V} - ${l} * ${j}`,G=`${W} + ${l} * ${j}`,J=`datum["${m.field}"]`,se={joinaggregate:dBe(m.field),groupby:y},ie={transform:[{filter:`(${H} <= ${J}) && (${J} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...b],groupby:y}],layer:U},{tooltip:ne,...ue}=R,{scale:xe,axis:de}=m,Ke=mse(m),je=tu(de,["title"]),Oe=oBe(a,"outliers",t.boxplot,{transform:[{filter:`(${J} < ${H}) || (${J} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...xe!==void 0?{scale:xe}:{},...Zr(je)?{}:{axis:je}},...ue,...C?{color:C}:{},...x?{tooltip:x}:{}}})[0];let Fe;const Ae=[...f,...h,se];return Oe?Fe={transform:Ae,layer:[Oe,ie]}:(Fe=ie,Fe.transform.unshift(...Ae)),{...o,layer:[Fe,{transform:p,layer:O}]}}function dBe(e){const t=sT(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function dsn(e,t,n){const r=lBe(e,xL),{continuousAxisChannelDef:i,continuousAxis:s}=aBe(e,r,xL),o=i.field,a=sT(o),l=uBe(t),u=[...dBe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(l==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(l==="min-max"?"upper_whisker_":"max_")+a}],c=l==="min-max"||l==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:d,...f}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=lsn(f),{bins:m,timeUnits:g,aggregate:y,groupby:b,encoding:_}=iBe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,x=[...m,...g,{aggregate:[...y,...u],groupby:b},...c];return{bins:m,timeUnits:g,transform:x,groupby:b,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:_,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const yse="errorbar",fsn=["ticks","rule"],hsn=new f5(yse,fBe);function fBe(e,{config:t}){e={...e,encoding:h5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:l,tooltipEncoding:u}=hBe(e,yse,t);delete s.size;const c=gse(a,i,r,s,t.errorbar),d=a.thickness,f=a.size,h={type:"tick",orient:o,aria:!1,...d!==void 0?{thickness:d}:{},...f!==void 0?{size:f}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:u}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function psn(e,t){const{encoding:n}=e;if(msn(n))return{orient:lBe(e,t),inputType:"raw"};const r=gsn(n),i=ysn(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,l=n.y2;if(En(a)&&En(l))throw new Error(`${t} cannot have both x2 and y2`);if(En(a)){if(T0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(En(l)){if(T0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,l=n.xError2,u=n.yError,c=n.yError2;if(En(l)&&!En(a))throw new Error(`${t} cannot have xError2 without xError`);if(En(c)&&!En(u))throw new Error(`${t} cannot have yError2 without yError`);if(En(a)&&En(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(En(a)){if(T0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(En(u)){if(T0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function msn(e){return(En(e.x)||En(e.y))&&!En(e.x2)&&!En(e.y2)&&!En(e.xError)&&!En(e.xError2)&&!En(e.yError)&&!En(e.yError2)}function gsn(e){return En(e.x2)||En(e.y2)}function ysn(e){return En(e.xError)||En(e.xError2)||En(e.yError)||En(e.yError2)}function hBe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,l=sp(r)?r:{type:r};s&&st(r8e(t));const{orient:u,inputType:c}=psn(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:f,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=aBe(e,u,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:b,tooltipTitleWithFieldName:_}=vsn(l,d,f,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:x,[m==="x"?"xError2":"yError2"]:S,...C}=i,{bins:A,timeUnits:R,aggregate:P,groupby:L,encoding:k}=iBe(C,n),$=[...P,...g],D=c!=="raw"?[]:L,M=TW(b,d,k,_);return{transform:[...a.transform??[],...A,...R,...$.length===0?[]:[{aggregate:$,groupby:D}],...y],groupby:D,continuousAxisChannelDef:d,continuousAxis:m,encodingWithoutContinuousAxis:k,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:a,tooltipEncoding:M}}function vsn(e,t,n,r,i,s,o,a){let l=[],u=[];const c=t.field;let d,f=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&st(Irn(h,p,o)),p==="stderr"||p==="stdev")l=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],u=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],d=[{fieldPrefix:"center_",titlePrefix:rP(h)},{fieldPrefix:"upper_",titlePrefix:eve(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:eve(h,p,"-")}],f=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),l=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],d=[{fieldPrefix:"upper_",titlePrefix:IE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:IE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:IE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&st(Arn(e.center,e.extent)),s==="aggregated-upper-lower"?(d=[],u=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:c}],u=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?u.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):u.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of u)d.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Ib(Ib(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:f}}function eve(e,t,n){return`${rP(e)} ${n} ${t}`}const vse="errorband",bsn=["band","borders"],_sn=new f5(vse,pBe);function pBe(e,{config:t}){e={...e,encoding:h5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:l}=hBe(e,vse,t),u=o,c=gse(u,i,r,s,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let f={type:d?"area":"rect"},h={type:d?"line":"rule"};const p={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(f={...f,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):u.interpolate?st(qye("interpolate")):u.tension&&st(qye("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:f,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:l})]}}const mBe={};function bse(e,t,n){const r=new f5(e,t);mBe[e]={normalizer:r,parts:n}}function wsn(){return tt(mBe)}bse(xL,cBe,usn);bse(yse,fBe,fsn);bse(vse,pBe,bsn);const Esn=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],gBe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},yBe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},xsn=tt(gBe),Ssn=tt(yBe),Tsn={header:1,headerRow:1,headerColumn:1,headerFacet:1},vBe=tt(Tsn),bBe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Csn={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Asn={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Pf="_vgsid_",Isn={point:{on:"click",fields:[Pf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function _se(e){return e==="legend"||!!(e!=null&&e.legend)}function Dz(e){return _se(e)&&bt(e)}function wse(e){return!!(e!=null&&e.select)}function _Be(e){const t=[];for(const n of e||[]){if(wse(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function ksn(e){return p5(e)||xse(e)||Ese(e)}function Ese(e){return"concat"in e}function p5(e){return"vconcat"in e}function xse(e){return"hconcat"in e}function wBe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function op(e){return bt(e)&&e.step!==void 0}function tve(e){return e.view||e.width||e.height}const nve=20,Rsn={align:1,bounds:1,center:1,columns:1,spacing:1},Psn=tt(Rsn);function Nsn(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(a5(e)&&!cP(e.facet)||Ese(e))&&(i.columns=o),p5(e)&&(i.columns=1);for(const a of Psn)if(e[a]!==void 0)if(a==="spacing"){const l=e[a];i[a]=xr(l)?l:{row:l.row??s,column:l.column??s}}else i[a]=e[a];return i}function CW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function SL(e,t){const n=TL(e,t);return op(n)?n.step:EBe}function TL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Ts(n,{step:e.step})}const EBe=20,Osn={continuousWidth:200,continuousHeight:200,step:EBe},Dsn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Osn,mark:Tin,arc:{},area:{},bar:Iin,circle:{},geoshape:{},image:{},line:{},point:{},rect:kin,rule:{color:"black"},square:{},text:{color:"black"},tick:Rin,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:oin,projection:{},legend:Csn,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Isn,style:{},title:{},facet:{spacing:nve},concat:{spacing:nve},normalizedNumberFormat:".0%"},jp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],rve={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},ive={blue:jp[0],orange:jp[1],red:jp[2],teal:jp[3],green:jp[4],yellow:jp[5],purple:jp[6],pink:jp[7],brown:jp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Msn(e={}){return{signals:[{name:"color",value:bt(e)?{...ive,...e}:ive}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function $sn(e){return{signals:[{name:"fontSize",value:bt(e)?{...rve,...e}:rve}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Lsn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function xBe(e){const t=tt(e||{}),n={};for(const r of t){const i=e[r];n[r]=hP(i)?X5e(i):Ou(i)}return n}function Fsn(e){const t=tt(e),n={};for(const r of t)n[r]=xBe(e[r]);return n}const jsn=[...P8e,...eBe,...vBe,"background","padding","legend","lineBreak","scale","style","title","view"];function SBe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=YS({},mn(Dsn),n?Lsn(n):{},t?Msn(t):{},r?$sn(r):{},s||{});i&&KS(o,"selection",i,!0);const a=tu(o,jsn);for(const l of["background","lineBreak","padding"])o[l]&&(a[l]=Ou(o[l]));for(const l of P8e)o[l]&&(a[l]=Ea(o[l]));for(const l of eBe)o[l]&&(a[l]=xBe(o[l]));for(const l of vBe)o[l]&&(a[l]=Ea(o[l]));if(o.legend&&(a.legend=Ea(o.legend)),o.scale){const{invalid:l,...u}=o.scale,c=Ea(l,{level:1});a.scale={...Ea(u),...tt(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=Fsn(o.style)),o.title&&(a.title=Ea(o.title)),o.view&&(a.view=Ea(o.view)),a}const Bsn=new Set(["view",...bin]),zsn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Usn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Sin};function Vsn(e){e=mn(e);for(const t of zsn)delete e[t];if(e.axis)for(const t in e.axis)hP(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Esn)delete e.legend[t];if(e.mark){for(const t of Gye)delete e.mark[t];e.mark.tooltip&&bt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(_Be(e.params)),delete e.params);for(const t of Bsn){for(const r of Gye)delete e[t][r];const n=Usn[t];if(n)for(const r of n)delete e[t][r];qsn(e,t)}for(const t of wsn())delete e[t];Hsn(e);for(const t in e)bt(e[t])&&Zr(e[t])&&delete e[t];return Zr(e)?void 0:e}function Hsn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=K5e(e.title);Zr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Zr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Zr(r)?delete e.title:e.title=r}function qsn(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Zr(s)||(e.style[n??t]=s),delete e[t]}function m5(e){return"layer"in e}function Wsn(e){return"repeat"in e}function Gsn(e){return!We(e.repeat)&&e.repeat.layer}class Sse{map(t,n){return a5(t)?this.mapFacet(t,n):Wsn(t)?this.mapRepeat(t,n):xse(t)?this.mapHConcat(t,n):p5(t)?this.mapVConcat(t,n):Ese(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(m5(t))return this.mapLayer(t,n);if(Eg(t))return this.mapUnit(t,n);throw new Error(Uie(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Ysn={zero:1,center:1,normalize:1};function Ksn(e){return e in Ysn}const Xsn=new Set([I8e,r5,n5,yL,s5,rse,ise,i5,k8e,nse]),Qsn=new Set([r5,n5,I8e]);function J_(e){return ot(e)&&Vx(e)==="quantitative"&&!e.bin}function sve(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(ot(o)&&ot(a))if(J_(o)&&J_(a)){if(o.stack)return t;if(a.stack)return i;const l=ot(o)&&!!o.aggregate,u=ot(a)&&!!a.aggregate;if(l!==u)return l?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(J_(o))return t;if(J_(a))return i}else{if(J_(o))return s&&n==="vertical"?void 0:t;if(J_(a))return s&&n==="horizontal"?void 0:i}}function Jsn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function TBe(e,t){var m,g;const n=sp(e)?e:{type:e},r=n.type;if(!Xsn.has(r))return null;const i=sve(t,"x",n)||sve(t,"theta",n);if(!i)return null;const s=t[i],o=ot(s)?pt(s,{}):void 0,a=Jsn(i),l=[],u=new Set;if(t[a]){const y=t[a],b=ot(y)?pt(y,{}):void 0;b&&b!==o&&(l.push(a),u.add(b))}const c=a==="x"?"xOffset":"yOffset",d=t[c],f=ot(d)?pt(d,{}):void 0;f&&f!==o&&(l.push(c),u.add(f));const h=unn.reduce((y,b)=>{if(b!=="tooltip"&&q1(t,b)){const _=t[b];for(const w of wt(_)){const E=Rf(w);if(E.aggregate)continue;const x=pt(E,{});(!x||!u.has(x))&&y.push({channel:b,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?lv(s.stack)?p=s.stack?"zero":null:p=s.stack:Qsn.has(r)&&(p="zero"),!p||!Ksn(p)||rBe(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==zo.LINEAR&&s!=null&&s.stack&&st(Srn(s.scale.type)),En(t[Ip(i)])?(s.stack!==void 0&&st(xrn(i)),null):(ot(s)&&s.aggregate&&!wnn.has(s.aggregate)&&st(Trn(s.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:s.impute===null?!1:vv(r),stackBy:h,offset:p}))}function CBe(e,t,n){const r=Ea(e),i=Gr("orient",r,n);if(r.orient=non(r.type,t,i),i!==void 0&&i!==r.orient&&st(arn(r.orient,i)),r.type==="bar"&&r.orient){const l=Gr("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Ain[r.orient];for(const c of u)r[c]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Gr("opacity",r,n),o=Gr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=eon(r.type,t)),Gr("cursor",r,n)===void 0&&(r.cursor=Zsn(r,t,n)),r}function Zsn(e,t,n){return t.href||e.href||Gr("href",e,n)?"pointer":e.cursor}function eon(e,t){if(Kn([s5,nse,rse,ise],e)&&!rBe(t))return .7}function ton(e,t,{graticule:n}){if(n)return!1;const r=ip("filled",e,t),i=e.type;return Ts(r,i!==s5&&i!==i5&&i!==yL)}function non(e,t,n){switch(e){case s5:case rse:case ise:case k8e:case yin:case gin:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case r5:if(ot(r)&&(jo(r.bin)||ot(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ot(i)&&(jo(i.bin)||ot(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(ot(r)&&r.type===Pb&&!_i(r.bin)||bL(r))&&ot(i)&&jo(i.bin)?"horizontal":"vertical";if(!o)return(ot(i)&&i.type===Pb&&!_i(i.bin)||bL(i))&&ot(r)&&jo(r.bin)?"vertical":"horizontal"}case yL:if(s&&!(ot(r)&&jo(r.bin))&&o&&!(ot(i)&&jo(i.bin)))return;case n5:if(o)return ot(i)&&jo(i.bin)?"horizontal":"vertical";if(s)return ot(r)&&jo(r.bin)?"vertical":"horizontal";if(e===yL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case i5:case nse:{const a=Qye(r),l=Qye(i);if(n)return n;if(a&&!l)return e!=="tick"?"horizontal":"vertical";if(!a&&l)return e!=="tick"?"vertical":"horizontal";if(a&&l)return"vertical";{const u=gl(r)&&r.type===zx,c=gl(i)&&i.type===zx;if(u&&!c)return"vertical";if(!u&&c)return"horizontal"}return}}return"vertical"}function ron(e){const{point:t,line:n,...r}=e;return tt(r).length>1?r:r.type}function ion(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:tu(e[t],["point","line"])});return e}function Mz(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?bt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?bt(t.point)?t.point:{}:void 0}function ove(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class son{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Eg(t)){const{mark:r,encoding:i}=t,s=sp(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!Mz(s,n[s.type],i);case"area":return!!Mz(s,n[s.type],i)||!!ove(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:l,encoding:u,...c}=t,d=h5(u,i),f=sp(a)?a:{type:a},h=Mz(f,i[f.type],d),p=f.type==="area"&&ove(f,i[f.type]),m=[{name:l,...s?{params:s}:{},mark:ron({...f.type==="area"&&f.opacity===void 0&&f.fillOpacity===void 0?{opacity:.7}:{},...f}),encoding:tu(d,["shape"])}],g=TBe(CBe(f,d,i),d);let y=d;if(g){const{fieldChannel:b,offset:_}=g;y={...d,[b]:{...d[b],..._?{stack:_}:{}}}}return y=tu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...$x(f,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...$x(f,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:ion(i)})}}function oon(e,t){return t?cP(e)?IBe(e,t):ABe(e,t):e}function $z(e,t){return t?IBe(e,t):e}function AW(e,t,n){const r=t[e];if(Uin(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};st(znn(r.repeat));return}return t}function ABe(e,t){if(e=AW("field",e,t),e!==void 0){if(e===null)return null;if(cse(e)&&Cm(e.sort)){const n=AW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function ave(e,t){if(ot(e))return ABe(e,t);{const n=AW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function lve(e,t){if(En(e)){const n=ave(e,t);if(n)return n;if(l5(e))return{condition:e.condition}}else{if(dP(e)){const n=ave(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function IBe(e,t){const n={};for(const r in e)if(Vt(e,r)){const i=e[r];if(We(i))n[r]=i.map(s=>lve(s,t)).filter(s=>s);else{const s=lve(i,t);s!==void 0&&(n[r]=s)}}return n}class aon{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Eg(t)){const{encoding:n,mark:r}=t;if(r==="line"||sp(r)&&r.type==="line")for(const i of onn){const s=f_(i),o=n[s];if(n[i]&&(ot(o)&&!jo(o.bin)||Rp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return st(orn(!!i.x2,!!i.y2)),r({...t,mark:bt(s)?{...s,type:"rule"}:"rule"},n)}}class lon extends Sse{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[csn,hsn,_sn,new son,new aon]}map(t,n){if(Eg(t)){const r=q1(t.encoding,Sm),i=q1(t.encoding,Tm),s=q1(t.encoding,qj);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=$z(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(o,n.config))return l.run(o,n,a);return o}mapRepeat(t,n){return Gsn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:l}=r,{repeater:u={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:l},spec:i}},n):{...s,layer:l.map(d=>{const f={...u,layer:d},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Fi(d)}`,p=this.mapLayerOrUnit(i,{...n,repeater:f,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!We(r)&&t.columns&&(t=tu(t,["columns"]),st(zye("repeat")));const a=[],{repeater:l={},repeaterPrefix:u=""}=n,c=!We(r)&&r.row||[l?l.row:null],d=!We(r)&&r.column||[l?l.column:null],f=We(r)&&r||[l?l.repeat:null];for(const p of f)for(const m of c)for(const g of d){const y={repeat:p,row:m,column:g,layer:l.layer},b=(i.name?`${i.name}_`:"")+u+"child__"+(We(r)?`${Fi(p)}`:(r.row?`row_${Fi(m)}`:"")+(r.column?`column_${Fi(g)}`:"")),_=this.map(i,{...n,repeater:y,repeaterPrefix:b});_.name=b,a.push(tu(_,["data"]))}const h=We(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return cP(r)&&t.columns&&(t=tu(t,["columns"]),st(zye("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,l=cve({parentProjection:o,projection:i}),u=uve({parentEncoding:s,encoding:$z(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:l,projection:u,height:c,view:d,params:f,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=$z(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...l?{width:l}:{},...c?{height:c}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:a,encoding:y,...f?{params:f}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&st(irn([...r?[Sm]:[],...i?[Tm]:[]]));const o={},a={};for(const l of[Sm,Tm]){const u=t[l];if(u){const{align:c,center:d,spacing:f,columns:h,...p}=u;o[l]=p;for(const m of["align","center","spacing"])u[m]!==void 0&&(a[m]??(a[m]={}),a[m][l]=u[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:l,columns:u,...c}=s;return{facetMapping:oon(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,l={...i,parentEncoding:uve({parentEncoding:n,encoding:s,layer:!0}),parentProjection:cve({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function uve({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...tt(e),...tt(t)]);for(const s of i){const o=t[s],a=e[s];if(En(o)){const l={...a,...o};r[s]=l}else dP(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||kf(a)||$t(a)||En(a)||We(a))&&(r[s]=a)}}else r=t;return!r||Zr(r)?void 0:r}function cve(e){const{parentProjection:t,projection:n}=e;return t&&n&&st(Gnn({parentProjection:t,projection:n})),n??t}function Tse(e){return"filter"in e}function uon(e){return(e==null?void 0:e.stop)!==void 0}function kBe(e){return"lookup"in e}function con(e){return"data"in e}function don(e){return"param"in e}function fon(e){return"pivot"in e}function hon(e){return"density"in e}function pon(e){return"quantile"in e}function mon(e){return"regression"in e}function gon(e){return"loess"in e}function yon(e){return"sample"in e}function von(e){return"window"in e}function bon(e){return"joinaggregate"in e}function _on(e){return"flatten"in e}function won(e){return"calculate"in e}function RBe(e){return"bin"in e}function Eon(e){return"impute"in e}function xon(e){return"timeUnit"in e}function Son(e){return"aggregate"in e}function Ton(e){return"stack"in e}function Con(e){return"fold"in e}function Aon(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function Ion(e){return e.map(t=>Tse(t)?{filter:CE(t.filter,Zrn)}:t)}class kon extends Sse{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=dve(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=dve(t,n),t.encoding){const r={};for(const[i,s]of Py(t.encoding))r[i]=PBe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Py(r).map(([s,o])=>{const{init:a,bind:l,empty:u,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=u!=="none";for(const d of Ko(n.selectionPredicates[s]??{}))d.empty=u!=="none";return{name:s,value:a,select:c,bind:l}})}:t}}function dve(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Tse(s))return{filter:IW(s,t)};if(RBe(s)&&h_(s.bin))return{...s,bin:NBe(s.bin)};if(kBe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function PBe(e,t){var r,i;const n=mn(e);if(ot(n)&&h_(n.bin)&&(n.bin=NBe(n.bin)),g_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(l5(n))if(We(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:l,...u}=s;return a?s:{...u,test:IW(s,t)}});else{const{selection:s,param:o,test:a,...l}=PBe(n.condition,t);n.condition=o?n.condition:{...l,test:IW(n.condition,t)}}return n}function NBe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function IW(e,t){const n=r=>CE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):CE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class kW extends Sse{map(t,n){const r=n.selections??[];if(t.params&&!Eg(t)){const i=[];for(const s of t.params)wse(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(Et(a)&&(a===t.name||i.includes(a))||We(a)&&a.map(l=>i.indexOf(l)).every((l,u,c)=>l!==-1&&(u===0||l>c[u-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=kW.prototype[e];kW.prototype[e]=function(n,r){return t.call(this,n,Ron(n,r))}}function Ron(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function OBe(e,t){t===void 0&&(t=SBe(e.config));const n=Don(e,t),{width:r,height:i}=e,s=Mon(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Pon=new lon,Non=new kon,Oon=new kW;function Don(e,t={}){const n={config:t};return Oon.map(Pon.map(Non.map(e,n),n),n)}function fve(e){return Et(e)?{type:e}:e??{}}function Mon(e,t,n){let{width:r,height:i}=t;const s=Eg(e)||m5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(st(Lye("width")),r=void 0),i=="container"&&(st(Lye("height")),i=void 0));const a={type:"pad",...o,...n?fve(n.autosize):{},...fve(e.autosize)};if(a.type==="fit"&&!s&&(st(Rnn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&st(Fye("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&st(Fye("height")),!zu(a,{type:"pad"}))return a}function $on(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function Lon(e){return e?`fit-${Xj(e)}`:"fit"}const Fon=["background","padding"];function hve(e,t){const n={};for(const r of Fon)e&&e[r]!==void 0&&(n[r]=Ou(e[r]));return t&&(n.params=e.params),n}class xg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new xg(mn(this.explicit),mn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Ts(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of tt(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function lh(e){return{explicit:!0,value:e}}function Su(e){return{explicit:!1,value:e}}function DBe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:g5(t,n,r,i)}}function g5(e,t,n,r){return e.explicit&&t.explicit&&st(grn(n,r,e.value,t.value)),e}function Dy(e,t,n,r,i=g5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:zu(e.value,t.value)?e:i(e,t,n,r)}class jon extends xg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Wx(e){return"url"in e}function ck(e){return"values"in e}function MBe(e){return"name"in e&&!Wx(e)&&!ck(e)&&!X0(e)}function X0(e){return e&&($Be(e)||LBe(e)||Cse(e))}function $Be(e){return"sequence"in e}function LBe(e){return"sphere"in e}function Cse(e){return"graticule"in e}var cs;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(cs||(cs={}));function FBe({invalid:e,isPath:t}){switch(O8e(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function Bon(e){const{marks:t,scales:n}=FBe(e);return t===n?cs.Main:n==="include-invalid-values"?cs.PreFilterInvalid:cs.PostFilterInvalid}function jBe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=sd(i.field),i}function Db(e,t=!0,n=Fa){if(We(e)){const r=e.map(i=>Db(i,t,n));return t?`[${r.join(", ")}]`:r}else if(p_(e))return n(t?Rb(e):zrn(e));return t?n(ei(e)):e}function zon(e,t){for(const n of Ko(e.component.selection??{})){const r=n.name;let i=`${r}${$y}, ${n.resolve==="global"?"true":`{unit: ${W1(e)}}`}`;for(const s of _5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+yan,on:[{events:{signal:n.name+$y},update:`modify(${ut(n.name+Mb)}, ${i})`}]})}return Ase(t)}function Uon(e,t){if(e.component.selection&&tt(e.component.selection).length){const n=ut(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:cv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Ase(t)}function Von(e,t){let n=!1;for(const r of Ko(e.component.selection??{})){const i=r.name,s=ut(i+Mb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${r9e}(${s}, ${ut(a)}${l}`})}n=!0;for(const a of _5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Ase(t)}function Hon(e,t){const n=[...t],r=W1(e,{escape:!1});for(const i of Ko(e.component.selection??{})){const s={name:i.name+Mb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Pf}}]),i.init){const a=i.project.items.map(jBe);s.values=i.project.hasSelectionId?i.init.map(l=>({unit:r,[Pf]:Db(l,!1)[0]})):i.init.map(l=>({unit:r,fields:a,values:Db(l,!1)}))}n.filter(a=>a.name===i.name+Mb).length||n.push(s)}return n}function BBe(e,t){for(const n of Ko(e.component.selection??{}))for(const r of _5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function qon(e,t){for(const n of e.children)qi(n)&&(t=BBe(n,t));return t}function Won(e,t,n,r){const i=l9e(e,t.param,t);return{signal:If(n.get("type"))&&We(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Ase(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Xr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){st(Hnn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class nu extends Xr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${O5e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function Lz(e){return e.as!==void 0}function pve(e){return`${e}_end`}class Hh extends Xr{clone(){return new Hh(null,mn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:l}=s;if(l){let u;if(m_(l)){if(qi(n)){const{mark:c,markDef:d,config:f}=n,h=Oy({fieldDef:s,markDef:d,config:f});(uk(c)||h)&&(u={timeUnit:xo(l),field:a})}}else u={as:pt(s,{forAs:!0}),field:a,timeUnit:l};if(qi(n)){const{mark:c,markDef:d,config:f}=n,h=Oy({fieldDef:s,markDef:d,config:f});uk(c)&&Cs(o)&&h!==.5&&(u.rectBandPosition=h)}u&&(i[tr(u)]=u)}return i},{});return Zr(r)?null:new Hh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=xo(r),o={...i,timeUnit:s};return new Hh(t,{[tr(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Py(this.timeUnits)){const s=Lz(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Ko(this.timeUnits).map(t=>Lz(t)?t.as:pve(t.field)))}dependentFields(){return new Set(Ko(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${tr(this.timeUnits)}`}assemble(){const t=[];for(const n of Ko(this.timeUnits)){const{rectBandPosition:r}=n,i=xo(n.timeUnit);if(Lz(n)){const{field:s,as:o}=n,{unit:a,utc:l,...u}=i,c=[o,`${o}_end`];t.push({field:sd(s),type:"timeunit",...a?{units:e5(a)}:{},...l?{timezone:"utc"}:{},...u,as:c}),t.push(...mve(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=zBe({timeUnit:i,field:o}),l=pve(o);t.push({type:"formula",expr:a,as:l}),t.push(...mve([o,l],r,i))}}return t}}const y5="offsetted_rect_start",v5="offsetted_rect_end";function zBe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=p8e(r),{part:o,step:a}=v8e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function mve([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:gve([zBe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${y5}`},{type:"formula",expr:gve([i,s],n+.5),as:`${e}_${v5}`}]}return[]}function gve([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const pP="_tuple_fields";class Gon{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Yon={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Gon),s={},o={},a=new Set,l=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Fi(`${r}_${g}`);for(let b=1;a.has(y);b++)y=Fi(`${r}_${g}_${b}`);return a.add(y),{[m]:y}},u=t.type,c=e.config.selection[u],d=n.value!==void 0?wt(n.value):null;let{fields:f,encodings:h}=bt(n.select)?n.select:{};if(!f&&!h&&d){for(const p of d)if(bt(p))for(const m of tt(p))snn(m)?(h||(h=[])).push(m):u==="interval"?(st(Bnn),h=c.encodings):(f??(f=[])).push(m)}!f&&!h&&(h=c.encodings,"fields"in c&&(f=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){st(Pnn(p,m.aggregate));continue}else if(!g){st(Bye(p));continue}if(m.timeUnit&&!m_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[tr(y)]=y}if(!s[g]){const y=u==="interval"&&kp(p)&&If(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",b={field:g,channel:p,type:y,index:i.items.length};b.signals={...l(b,"data"),...l(b,"visual")},i.items.push(s[g]=b),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Pf,j5e(p)?(b.geoChannel=p,b.channel=F5e(p),i.hasChannel[b.channel]=s[g]):i.hasChannel[p]=s[g]}}else st(Bye(p))}for(const p of f??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...l(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Pf}d&&(t.init=d.map(p=>i.items.map(m=>bt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Zr(o)||(i.timeUnit=new Hh(null,o))},signals:(e,t,n)=>{const r=t.name+pP;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(jBe)})}},Am={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!kp(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&st(Mnn),!s||!If(o)){st(Dnn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||yve(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(r9e)>=0)i.update=`{${r.map(o=>`${ut(sd(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${ut(sd(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!yve(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function RW(e,t){return`domain(${ut(e.scaleName(t))})`}function yve(e){return e.parent&&fT(e.parent)&&!e.parent.parent}const kE="_brush",UBe="_scale_trigger",gC="geo_interval_init_tick",VBe="_init",Kon="_center",Xon={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...bt(n.select)?n.select:{}};i.fields=[Pf],i.encodings||(i.encodings=n.value?tt(n.value):[Vf,Uf]),n.select={type:"interval",...i}}if(t.translate&&!Am.defined(t)){const i=`!event.item || event.item.mark.name !== ${ut(t.name+kE)}`;for(const s of t.events){if(!s.between){st(`${s} is not an ordered event stream for interval selections.`);continue}const o=wt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+$y,s=Ko(t.project.hasChannel).filter(a=>a.channel===Bi||a.channel===Co),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,l)=>a.concat(Qon(e,t,l,o&&o[l.index])),[])),e.hasProjection){const a=ut(e.projectionName()),l=e.projectionName()+Kon,{x:u,y:c}=t.project.hasChannel,d=u&&u.signals.visual,f=c&&c.signals.visual,h=u?o&&o[u.index]:`${l}[0]`,p=c?o&&o[c.index]:`${l}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${d?d+"[0]":"0"}, ${f?f+"[0]":"0"}],[${d?d+"[1]":m("width")}, ${f?f+"[1]":m("height")}]]`;o&&(n.unshift({name:r+VBe,init:`[scale(${a}, [${u?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${u?h[1]:h}, ${c?p[1]:p}])]`}),(!u||!c)&&(n.find(x=>x.name===l)||n.unshift({name:l,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${ut(e.getName("marks"))}}, unit.mark)`,b=`{unit: ${W1(e)}}`,_=`vlSelectionTuples(${y}, ${b})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:gC}]:[]],update:_}]})}else{if(!Am.defined(t)){const u=r+UBe,c=s.map(d=>{const f=d.channel,{data:h,visual:p}=d.signals,m=ut(e.scaleName(f)),g=e.getScaleComponent(f).get("type"),y=If(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:u,value:{},on:[{events:s.map(d=>({scale:e.scaleName(d.channel)})),update:c.join(" && ")+` ? ${u} : {}`}]})}const a=s.map(u=>u.signals.data),l=`unit: ${W1(e)}, fields: ${r+pP}, values`;return n.concat({name:i,...o?{init:`{${l}: ${Db(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${l}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(qi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===gC).length||n.unshift({name:gC,value:null,on:[{events:"timer{1}",update:`${gC} === null ? {} : ${gC}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,l=`data(${ut(t.name+Mb)})`;if(Am.defined(t)||!i&&!s)return n;const u={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of tt(u))u[g]=[{test:`${l}.length && ${l}[0].unit === ${W1(e)}`,...u[g]},{value:0}];const{fill:c,fillOpacity:d,cursor:f,...h}=t.mark,p=tt(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(b=>b).join(" && "),value:h[y]},{value:null}],g),{}),m=f??(t.translate?"move":null);return[{name:`${r+kE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:d}},update:u}},...n,{name:r+kE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...u,...p}}}]}};function Qon(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=ut(i?e.scaleName(s):e.projectionName()),l=f=>`scale(${a}, ${f})`,u=e.getSizeSignalRef(s===Bi?"width":"height").signal,c=`${s}(unit)`,d=t.events.reduce((f,h)=>[...f,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${u})]`}],[]);if(i){const f=n.signals.data,h=Am.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Db(r,!0,l)}:{value:[]};return d.push({events:{signal:t.name+UBe},update:If(m)?`[${l(`${f}[0]`)}, ${l(`${f}[1]`)}]`:"[0, 0]"}),h?[{name:f,on:[]}]:[{name:o,...g,on:d},{name:f,...r?{init:Db(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const f=s===Bi?0:1,h=t.name+VBe,p=r?{init:`[${h}[0][${f}], ${h}[1][${f}]]`}:{value:[]};return[{name:o,...p,on:d}]}}const Jon={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+pP,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Ko(e.component.selection??{}).reduce((d,f)=>f.type==="interval"?d.concat(f.name+kE):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let u=`unit: ${W1(e)}, `;if(t.project.hasSelectionId)u+=`${Pf}: ${o}[${ut(Pf)}]`;else{const d=s.items.map(f=>{const h=e.fieldDef(f.channel);return h!=null&&h.bin?`[${o}[${ut(e.vgField(f.channel,{}))}], ${o}[${ut(e.vgField(f.channel,{binSuffix:"end"}))}]]`:`${o}[${ut(f.field)}]`}).join(", ");u+=`fields: ${i}, values: [${d}]`}const c=t.events;return n.concat([{name:r+$y,on:c?[{events:c,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}};function lT({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=l5(t)&&t.condition;let o=[];s&&(o=wt(s).map(u=>{const c=i(u);if(zin(u)){const{param:d,empty:f}=u;return{test:a9e(e,{param:d,empty:f}),...c}}else return{test:IL(e,u.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function Ise(e,t="text"){const n=e.encoding[t];return lT({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>b5(r,e.config),invalidValueRef:void 0})}function b5(e,t,n="datum"){if(e){if(kf(e))return Ai(e.value);if(En(e)){const{format:r,formatType:i}=wL(e);return lse({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function HBe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(We(o))return{tooltip:vve({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return lT({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:u=>{const c=b5(u,i,a);if(c)return c;if(u===null)return;let d=Gr("tooltip",r,i);if(d===!0&&(d={content:"encoding"}),Et(d))return{value:d};if(bt(d))return $t(d)?d:d.content==="encoding"?vve(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function qBe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function l(c,d){const f=f_(d),h=gl(c)?c:{...c,type:e[f].type},p=h.title||fse(h,i),m=wt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(Cs(d)){const y=d==="x"?"x2":"y2",b=Rf(e[y]);if(jo(h.bin)&&b){const _=pt(h,{expr:o}),w=pt(b,{expr:o}),{format:E,formatType:x}=wL(h);g=uP(_,w,E,x,i),s[y]=!0}}if((Cs(d)||d===gd||d===zf)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:y,formatType:b}=wL(h);g=lse({fieldOrDatumDef:h,format:y,formatType:b,expr:o,config:i,normalizeStack:!0}).signal}g??(g=b5(h,i,o).signal),a.push({channel:d,key:m,value:g})}pse(e,(c,d)=>{ot(c)?l(c,d):u5(c)&&l(c.condition,d)});const u={};for(const{channel:c,key:d,value:f}of a)!s[c]&&!u[d]&&(u[d]=f);return u}function vve(e,t,n,{reactiveGeom:r}={}){const i=qBe(e,t,n,{reactiveGeom:r}),s=Py(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Zon(e){const{markDef:t,config:n}=e,r=Gr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...ean(e),...tan(e)}}function ean(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Gr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Ann?{}:{ariaRoleDescription:{value:t}}}function tan(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return lT({model:e,channelDef:s,vgChannel:"description",mainRefFn:l=>b5(l,e.config),invalidValueRef:void 0});const o=Gr("description",n,r);if(o!=null)return{description:Ai(o)};if(r.aria===!1)return{};const a=qBe(t,i,r);if(!Zr(a))return{description:{signal:Py(a).map(([l,u],c)=>`"${c>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function go(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:l}=n;a===void 0&&(l??(l=Gr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),l!==void 0&&(a=Ai(l)));const u=i[e],c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=M8e({...c,scaleChannel:e,channelDef:u});return lT({model:t,channelDef:u,vgChannel:o??e,invalidValueRef:d,mainRefFn:h=>ase({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function WBe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Gr("filled",n,i),a=Kn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,l=Gr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,u=Gr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",d={...l?{fill:Ai(l)}:{},...u?{stroke:Ai(u)}:{}};return n.color&&(o?n.fill:n.stroke)&&st(s8e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...go("color",e,{vgChannel:c,defaultValue:o?l:u}),...go("fill",e,{defaultValue:r.fill?l:void 0}),...go("stroke",e,{defaultValue:r.stroke?u:void 0})}}function nan(e){const{encoding:t,mark:n}=e,r=t.order;return!vv(n)&&kf(r)?lT({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Ai(i.value),invalidValueRef:void 0}):{}}function Gx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:ase({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:Ai(o),bandPosition:i})};const l=t[s];return l?{offsetType:"visual",offset:l}:{}}function ka(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,l=i[e],u=i[Ip(e)],c=t.scaleName(e),d=t.getScaleComponent(e),{offset:f,offsetType:h}=Gx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=kse({model:t,defaultPos:n,channel:e,scaleName:c,scale:d}),m=!l&&Cs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:ran({channel:e,channelDef:l,channel2Def:u,markDef:s,config:o,scaleName:c,scale:d,stack:a,offset:f,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function ran(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(En(n)&&i&&t===i.fieldChannel){if(ot(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return vL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return H1(n,r,{suffix:"end"},{offset:s})}return ose(e)}function kse({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=f_(n),l=Ny(n),u=Gr(n,s,o,{vgChannel:l});if(u!==void 0)return bA(n,u);switch(t){case"zeroOrMin":return bve({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return bve({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[pu(n)],mult:.5}}}}function bve({mainChannel:e,config:t,...n}){const r=D8e(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const ian={left:"x",center:"xc",right:"x2"},san={top:"y",middle:"yc",bottom:"y2"};function GBe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Ny(e);const i=e==="x"?"align":"baseline",s=Gr(i,t,n);let o;return $t(s)?(st(srn(i)),o=void 0):o=s,e==="x"?ian[o||(r==="top"?"left":"center")]:san[o||r]}function CL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?YBe(e,t,{defaultPos:n,defaultPos2:r}):ka(e,t,{defaultPos:n})}function YBe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Ip(e),a=pu(e),l=oan(t,r,o),u=l[a]?GBe(e,i,s):Ny(e);return{...ka(e,t,{defaultPos:n,vgChannel:u}),...l}}function oan(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,l=f_(n),u=pu(n),c=Ny(n),d=r[l],f=e.scaleName(l),h=e.getScaleComponent(l),{offset:p}=n in r||n in s?Gx({channel:n,markDef:s,encoding:r,model:e}):Gx({channel:l,markDef:s,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=pu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=aan({channel:n,channelDef:d,channel2Def:r[n],markDef:s,config:a,scaleName:f,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:gO(n,s)||gO(n,{[n]:mL(n,s,a.style),[u]:mL(u,s,a.style)})||gO(n,a[i])||gO(n,a.mark)||{[c]:kse({model:e,defaultPos:t,channel:n,scaleName:f,scale:h})()}}function aan({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:l,defaultRef:u}){return En(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?H1(t,s,{suffix:"start"},{offset:l}):ose({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:l,defaultRef:u})}function gO(e,t){const n=pu(e),r=Ny(e);if(t[r]!==void 0)return{[r]:bA(e,t[r])};if(t[e]!==void 0)return{[r]:bA(e,t[e])};if(t[n]){const i=t[n];if(Nb(i))st(Znn(n));else return{[n]:bA(e,i)}}}function My(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Ip(t),a=pu(t),l=r[t],u=r[o],c=e.getScaleComponent(t),d=c?c.get("type"):void 0,f=i.orient,h=r[a]??r.size??Gr("size",i,n,{vgChannel:a}),p=V5e(t),m=s==="bar"&&(t==="x"?f==="vertical":f==="horizontal");return ot(l)&&(_i(l.bin)||jo(l.bin)||l.timeUnit&&!u)&&!(h&&!Nb(h))&&!r[p]&&!So(d)?can({fieldDef:l,fieldDef2:u,channel:t,model:e}):(En(l)&&So(d)||m)&&!u?uan(l,t,e):YBe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function lan(e,t,n,r,i,s,o){if(Nb(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const c=ip("minBandSize",{type:o},r);return{signal:c?`max(${Zd(c)}, ${u})`:u}}else i.band!==1&&(st(urn(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if($t(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(yv(l)&&xr(l.step))return{value:l.step-2}}if(!s){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:c}=r.scale,d=Ts(l,o==="bar"?u:c);if($t(d))return{signal:`(1 - (${d.signal})) * ${e}`};if(xr(d))return{signal:`${1-d} * ${e}`}}return{value:SL(r.view,e)-2}}function uan(e,t,n){var A,R;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),c=pu(t),d=Ip(t),f=V5e(t),h=n.scaleName(f),p=n.getScaleComponent($ie(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=go("size",n,{vgChannel:c,defaultRef:Ai(r.size)}):st(hrn(r.type)));const y=!!g,b=U8e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=u||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:lan(c,h||l,p||u,s,b,!!e,r.type)};const _=((R=u||p)==null?void 0:R.get("type"))==="band"&&Nb(b)&&!y?"top":"middle",w=GBe(t,r,s,_),E=w==="xc"||w==="yc",{offset:x,offsetType:S}=Gx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),C=ose({channel:t,channelDef:e,markDef:r,config:s,scaleName:l,scale:u,stack:o,offset:x,defaultRef:kse({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:E?S==="encoding"?0:.5:$t(b)?{signal:`(1-${b})/2`}:Nb(b)?(1-b.band)/2:0});if(c)return{[w]:C,...g};{const P=Ny(d),L=g[c],k=x?{...L,offset:x}:L;return{[w]:C,[P]:We(C)?[C[0],{...C[1],offset:k}]:{...C,offset:k}}}}function _ve(e,t,n,r,i,s,o){if(L5e(e))return 0;const a=e==="x"||e==="y2",l=a?-t/2:t/2;if($t(n)||$t(i)||$t(r)||s){const u=Zd(n),c=Zd(i),d=Zd(r),f=Zd(s),p=s?`(${o} < ${f} ? ${a?"":"-"}0.5 * (${f} - (${o})) : ${l})`:l,m=d?`${d} + `:"",g=u?`(${u} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-l:+i+l)}function can({fieldDef:e,fieldDef2:t,channel:n,model:r}){var R;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),l=r.scaleName(n),u=a?a.get("type"):void 0,c=a.get("reverse"),d=U8e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:u}),f=(R=r.component.axes[n])==null?void 0:R[0],h=(f==null?void 0:f.get("translate"))??.5,p=Cs(n)?Gr("binSpacing",s,i)??0:0,m=Ip(n),g=Ny(n),y=Ny(m),b=ip("minBandSize",s,i),{offset:_}=Gx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Gx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=Min({fieldDef:e,scaleName:l}),x=_ve(n,p,c,h,_,b,E),S=_ve(m,p,c,h,w??_,b,E),C=$t(d)?{signal:`(1-${d.signal})/2`}:Nb(d)?(1-d.band)/2:.5,A=Oy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(_i(e.bin)||e.timeUnit){const P=e.timeUnit&&A!==.5;return{[y]:wve({fieldDef:e,scaleName:l,bandPosition:C,offset:S,useRectOffsetField:P}),[g]:wve({fieldDef:e,scaleName:l,bandPosition:$t(C)?{signal:`1-${C.signal}`}:1-C,offset:x,useRectOffsetField:P})}}else if(jo(e.bin)){const P=H1(e,l,{},{offset:S});if(ot(t))return{[y]:P,[g]:H1(t,l,{},{offset:x})};if(h_(e.bin)&&e.bin.step)return{[y]:P,[g]:{signal:`scale("${l}", ${pt(e,{expr:"datum"})} + ${e.bin.step})`,offset:x}}}st(l8e(m))}function wve({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return vL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:y5,endSuffix:v5}:{}})}const dan=new Set(["aria","width","height"]);function yd(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?WBe(e):{};return{...fan(e.markDef,t),...Eve("fill",n),...Eve("stroke",r),...go("opacity",e),...go("fillOpacity",e),...go("strokeOpacity",e),...go("strokeWidth",e),...go("strokeDash",e),...nan(e),...HBe(e),...Ise(e,"href"),...Zon(e)}}function Eve(e,t){return t?{[e]:t}:{}}function fan(e,t){return Cnn.reduce((n,r)=>(!dan.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=Ai(e[r])),n),{})}function Rse(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var u;let o;if(!kp(s)||!(o=e.getScaleType(s)))return;const a=Qj(i.aggregate),l=sse({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(Nin(l)){const c=e.vgField(s,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>t5(s,!0)).join(" && ")}}}function xve(e,t){if(t!==void 0)return{[e]:Ai(t)}}const Fz="voronoi",KBe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Fz)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(vv(s))return st(Nnn(s)),n;const o={name:e.getName(Fz),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...HBe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,l=!1;return n.forEach((u,c)=>{const d=u.name??"";d===e.component.mark[0].name?a=c:d.indexOf(Fz)>=0&&(l=!0)}),l||n.splice(a+1,0,o),n}},XBe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!_se(e.bind),parse:(e,t,n)=>i9e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=KBe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const c=Fi(`${r}_${l.field}`);n.filter(f=>f.name===c).length||n.unshift({name:c,...o?{init:Db(o[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${ut(l.field)}] : null`}]:[],bind:s[l.field]??s[l.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(u=>u.name===r+$y)[0],o=r+pP,a=i.items.map(u=>Fi(`${r}_${u.field}`)),l=a.map(u=>`${u} !== null`).join(" && ");return a.length&&(s.update=`${l} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},AL="_toggle",QBe={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+AL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+$y,r=t.name+AL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${W1(e)}}, `)+`${r} ? ${n} : null`}},han={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=Et(t.clear)?cv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(XBe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Fi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+$y);r(i,"null"),QBe.defined(t)&&(i=n.findIndex(s=>s.name===t.name+AL),r(i,"false"))}return n}},JBe={defined:e=>{const t=e.resolve==="global"&&e.bind&&_se(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Pf;return t&&!n&&st($nn),t&&n},parse:(e,t,n)=>{const r=mn(n);if(r.select=Et(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},i9e(t,r),bt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=wt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=Dz(t.bind)?t.bind.legend:"click",s=Et(i)?cv(i,"view"):wt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Dz(t.bind)&&t.bind.legend,s=o=>a=>{const l=mn(a);return l.markname=o,l};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Fi(o.field)}_legend`,l=`${r}_${a}`;if(n.filter(c=>c.name===l).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(f=>f.name===r+$y),o=r+pP,a=i.items.filter(f=>f.hasLegend).map(f=>Fi(`${r}_${Fi(f.field)}_legend`)),u=`${a.map(f=>`${f} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(f=>({signal:f})),update:u}):a.length>0&&(s.update=u,delete s.value,delete s.on);const c=n.find(f=>f.name===r+AL),d=Dz(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:d}):c.on[0].events=d),n}};function pan(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Ko(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&JBe.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const ZBe="_translate_anchor",e9e="_translate_delta",man={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Am.defined(t),s=r+ZBe,{x:o,y:a}=t.project.hasChannel;let l=cv(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+kE,u))),n.push({name:s,value:{},on:[{events:l.map(u=>u.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?RW(e,Bi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?RW(e,Co):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+e9e,value:{},on:[{events:l,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Sve(e,t,o,"width",n),a!==void 0&&Sve(e,t,a,"height",n),n}};function Sve(e,t,n,r,i){const s=t.name,o=s+ZBe,a=s+e9e,l=n.channel,u=Am.defined(t),c=i.filter(E=>E.name===n.signals[u?"data":"visual"])[0],d=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(l),h=f&&f.get("type"),p=f&&f.get("reverse"),m=u?l===Bi?p?"":"-":p?"-":"":"",g=`${o}.extent_${l}`,y=`${m}${a}.${l} / ${u?`${d}`:`span(${g})`}`,b=!u||!f?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",_=u?h==="pow"?`, ${f.get("exponent")??1}`:h==="symlog"?`, ${f.get("constant")??1}`:"":"",w=`${b}(${g}, ${y}${_})`;c.on.push({events:{signal:a},update:u?w:`clampRange(${w}, 0, ${d})`})}const t9e="_zoom_anchor",n9e="_zoom_delta",gan={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Am.defined(t),s=r+n9e,{x:o,y:a}=t.project.hasChannel,l=ut(e.scaleName(Bi)),u=ut(e.scaleName(Co));let c=cv(t.zoom,"scope");return i||(c=c.map(d=>(d.markname=r+kE,d))),n.push({name:r+t9e,on:[{events:c,update:i?"{"+[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Tve(e,t,o,"width",n),a!==void 0&&Tve(e,t,a,"height",n),n}};function Tve(e,t,n,r,i){const s=t.name,o=n.channel,a=Am.defined(t),l=i.filter(b=>b.name===n.signals[a?"data":"visual"])[0],u=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),d=c&&c.get("type"),f=a?RW(e,o):l.name,h=s+n9e,p=`${s}${t9e}.${o}`,m=!a||!c?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",g=a?d==="pow"?`, ${c.get("exponent")??1}`:d==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${f}, ${p}, ${h}${g})`;l.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${u})`})}const Mb="_store",$y="_tuple",yan="_modify",r9e="vlSelectionResolve",_5=[Jon,Xon,Yon,QBe,XBe,Am,JBe,han,man,gan,KBe];function van(e){let t=e.parent;for(;t&&!Wu(t);)t=t.parent;return t}function W1(e,{escape:t}={escape:!0}){let n=t?ut(e.name):e.name;const r=van(e);if(r){const{facet:i}=r;for(const s of Uc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${ut(r.vgField(s))}])`)}return n}function Pse(e){return Ko(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function i9e(e,t){(Et(t.select)||!t.select.on)&&delete e.events,(Et(t.select)||!t.select.clear)&&delete e.clear,(Et(t.select)||!t.select.toggle)&&delete e.toggle}function PW(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...PW(e.object)),t.push(...PW(e.property))),t)}function s9e(e){return e.object.type==="MemberExpression"?s9e(e.object):e.object.name==="datum"}function o9e(e){const t=Jre(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&s9e(r)&&n.add(PW(r).slice(1).join("."))}),n}class uT extends Xr{clone(){return new uT(null,this.model,mn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=IL(this.model,this.filter,this),this._dependentFields=o9e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function ban(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Fi(i.name),o=i.select,a=Et(o)?o:o.type,l=bt(o)?mn(o):{type:a},u=r[a];for(const f in u)f==="fields"||f==="encodings"||(f==="mark"&&(l[f]={...u[f],...l[f]}),(l[f]===void 0||l[f]===!0)&&(l[f]=mn(u[f]??l[f])));const c=n[s]={...l,name:s,type:a,init:i.value,bind:i.bind,events:Et(l.on)?cv(l.on,"scope"):wt(mn(l.on))},d=mn(i);for(const f of _5)f.defined(c)&&f.parse&&f.parse(e,c,d)}return n}function a9e(e,t,n,r="datum"){const i=Et(t)?t:t.param,s=Fi(i),o=ut(s+Mb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const f=n??e.component.data.raw,h=a.project.timeUnit.clone();f.parent?h.insertAsParentOf(f):f.parent=h}const l=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=a.resolve==="global"?")":`, ${ut(a.resolve)})`,c=`${l}${o}, ${r}${u}`,d=`length(data(${o}))`;return t.empty===!1?`${d} && ${c}`:`!${d} || ${c}`}function l9e(e,t,n){const r=Fi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&st(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ut(s)}.`);else if(i&&!s){const a=o.project.items.filter(l=>l.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,st((a.length?"Multiple ":"No ")+`matching ${ut(i)} encoding found for selection ${ut(n.param)}. Using "field": ${ut(s)}.`)):s=a[0].field}return`${o.name}[${ut(sd(s))}]`}function _an(e,t){for(const[n,r]of Py(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new nu(new uT(t,e,{param:n}),i,cs.Lookup,e.component.data.outputNodeRefCounts)}}function IL(e,t,n){return vA(t,r=>Et(r)?r:Xrn(r)?a9e(e,r,n):_8e(r))}function wan(e,t){if(e)return We(e)&&!Qg(e)?e.map(n=>fse(n,t)).join(", "):e}function jz(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function g2(e,t,n,r={header:!1}){var d,f;const{disable:i,orient:s,scale:o,labelExpr:a,title:l,zindex:u,...c}=e.combine();if(!i){for(const h in c){const p=tsn[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(hP(m)){const{condition:g,...y}=m,b=wt(g),_=Jye[h];if(_){const{vgProp:w,part:E}=_,x=[...b.map(S=>{const{test:C,...A}=S;return{test:IL(null,C),...A}}),y];jz(c,E,w,x),delete c[h]}else if(_===null){const w={signal:b.map(E=>{const{test:x,...S}=E;return`${IL(null,x)} ? ${$ye(S)} : `}).join("")+$ye(y)};c[h]=w}}else if($t(m)){const g=Jye[h];if(g){const{vgProp:y,part:b}=g;jz(c,b,y,m),delete c[h]}}Kn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Zr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Ts(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(f=(d=c.encode)==null?void 0:d.labels)!=null&&f.update&&$t(c.encode.labels.update.text)&&(p=Ib(a,"datum.label",c.encode.labels.update.text.signal)),jz(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of J8e)e.hasAxisPart(p)||delete c.encode[p];Zr(c.encode)&&delete c.encode}const h=wan(l,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:Ts(u,0)}}}}function u9e(e){const{axes:t}=e.component,n=[];for(const r of wg)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Ean(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>g2(i,"grid",t)),...r.map(i=>g2(i,"grid",t)),...n.map(i=>g2(i,"main",t)),...r.map(i=>g2(i,"main",t))].filter(i=>i)}function Cve(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...tt(o),...tt(a)]),u={};for(const c of l.values())u[c]={signal:`${r.signal} === "${s}" ? ${Zd(o[c])} : ${Zd(a[c])}`};return u}return t[i]})])}function xan(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:S8e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=$t(n)?"axisOrient":`axis${rP(n)}`,a=[...i,...i.map(u=>s+u.substr(4))],l=["axis",o,s];return{vlOnlyAxisConfig:Cve(a,r,e,n),vgAxisConfig:Cve(l,r,e,n),axisConfigStyle:San([...l,...a],r)}}function San(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=wt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function NW(e,t,n,r={}){var s;const i=J5e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Ave={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Tan(n,e),gridScale:({model:e,channel:t})=>Can(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||d9e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||c9e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Ian(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??kan(t.type,n,ot(t)&&!!t.timeUnit,ot(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Pan({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:Nan,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=f9e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return e8e(i?[Xye(i)]:[],ot(o)?[Xye(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Oan(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Dan(n,t)};function Tan(e,t){return!So(e)&&ot(t)&&!_i(t==null?void 0:t.bin)&&!jo(t==null?void 0:t.bin)}function Can(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Aan(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return $t(s)?s:lk(s);{const{configValue:o}=NW("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?lk(o):n===Bi&&Kn([tse,ese],e.type)&&!(ot(e)&&e.timeUnit)?270:void 0}}function OW(e){return`(((${e.signal} % 360) + 360) % 360)`}function c9e(e,t,n,r){if(e!==void 0)if(n==="x"){if($t(e)){const i=OW(e),s=$t(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if($t(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if($t(e)){const i=OW(e),s=$t(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if($t(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function d9e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if($t(e)){const o=OW(e),a=$t(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if($t(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Ian(e,t){if(t==="x"&&Kn(["quantitative","temporal"],e))return!0}function kan(e,t,n,r){if(n&&!bt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Ran(e){return e==="x"?"bottom":"left"}function Pan({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!So(t)&&t!=="log"){if(ot(e)){if(_i(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Kn(["month","hours","day","quarter"],(i=xo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function Nan({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ot(t)){const{timeUnit:n}=t;if(n){const r=y8e(n);if(r)return{signal:r}}}}function f9e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return t8e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function Oan(e,t){const n=e.values;if(We(n))return Q8e(t,n);if($t(n))return n}function Dan(e,t){return e==="rect"&&_L(t)?1:0}class Yx extends Xr{clone(){return new Yx(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=o9e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(g_(r)&&z8e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,l=a.map((u,c)=>`${_8e({field:s,timeUnit:o,equal:u})} ? ${c} : `).join("")+a.length;t=new Yx(t,{calculate:l,as:Kx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${tr(this.transform)}`}}function Kx(e,t,n){return pt(e,{prefix:t,suffix:"sort_index",...n})}function w5(e,t){return Kn(["top","bottom"],t)?"column":Kn(["left","right"],t)||e==="row"?"row":"column"}function Xx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return Ts((t||{})[e],i[e],n.header[e])}function E5(e,t,n,r){const i={};for(const s of e){const o=Xx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Nse=["row","column"],Ose=["header","footer"];function Man(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=E5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=w5(t,a),u=lk(o);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...p9e(u,l),...h9e(l,u,s),...m9e(r,i,t,xsn,gBe)}}}function h9e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=d9e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function p9e(e,t){const n=c9e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function $an(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Ose)if(n[i])for(const s of n[i]){const o=Fan(e,t,i,n,s);o!=null&&r.push(o)}return r}function Lan(e,t){const{sort:n}=e;return Cm(n)?{field:pt(n,{expr:"datum"}),order:n.order??"ascending"}:We(n)?{field:Kx(e,t,{expr:"datum"}),order:"ascending"}:{field:pt(e,{expr:"datum"}),order:n??"ascending"}}function DW(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:l}=E5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=lse({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=w5(t,a);return{text:{signal:l?Ib(Ib(l,"datum.label",u),"datum.value",pt(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...p9e(s,c),...h9e(c,s,o),...m9e(n,e,t,Ssn,yBe)}}function Fan(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:d}=E5(["labelOrient"],o.header,a,t);(t==="row"&&!Kn(["top","bottom"],d)||t==="column"&&!Kn(["left","right"],d))&&(s=DW(o,t,a))}const l=Wu(e)&&!cP(e.facet),u=i.axes,c=(u==null?void 0:u.length)>0;if(s||c){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Lan(o,t)}:{},...c&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{},...c?{axes:u}:{}}}}return null}const jan={column:{start:0,end:1},row:{start:1,end:0}};function Ban(e,t){return jan[t][e]}function zan(e,t){const n={};for(const r of Uc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=E5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=w5(r,o),l=Ban(s,a);l!==void 0&&(n[a]=l)}}return Zr(n)?void 0:n}function m9e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Xx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Dse(e){return[...yO(e,"width"),...yO(e,"height"),...yO(e,"childWidth"),...yO(e,"childHeight")]}function yO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(So(o)&&yv(a)){const l=e.scaleName(n);return Wu(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Ive(l,a)]:[Ive(l,a),{name:i,update:g9e(l,s,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=CW(e.config.view,s?"width":"height"),l=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Ive(e,t){const n=`${e}_step`;return $t(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function g9e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=Ts(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Zd(o)}, ${Zd(s)}) * ${e}_step`}function y9e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function v9e(e,t){return tt(e).reduce((n,r)=>({...n,...lT({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Ai(i.value),invalidValueRef:void 0})}),{})}function b9e(e,t){if(Wu(t))return e==="theta"?"independent":"shared";if(fT(t))return"shared";if(zse(t))return Cs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Mse(e,t){const n=e.scale[t],r=Cs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&st(vrn(t)),"independent"):e[r][t]||"shared"}const Uan={...Asn,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},_9e=tt(Uan);class Van extends xg{}const kve={symbols:Han,gradient:qan,labels:Wan,entries:Gan};function Han(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:l,mark:u}=n,c=o.filled&&u!=="trail";let d={...knn({},n,Ein),...WBe(n,{filled:c})};const f=i.get("symbolOpacity")??l.legend.symbolOpacity,h=i.get("symbolFillColor")??l.legend.symbolFillColor,p=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,m=f===void 0?w9e(a.opacity)??o.opacity:void 0;if(d.fill){if(r==="fill"||c&&r===fu)delete d.fill;else if(d.fill.field)h?delete d.fill:(d.fill=Ai(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=Ai(m??1));else if(We(d.fill)){const g=MW(a.fill??a.color)??o.fill??(c&&o.color);g&&(d.fill=Ai(g))}}if(d.stroke){if(r==="stroke"||!c&&r===fu)delete d.stroke;else if(d.stroke.field||p)delete d.stroke;else if(We(d.stroke)){const g=Ts(MW(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(d.stroke={value:g})}}if(r!==_g){const g=ot(t)&&x9e(n,i,t);g?d.opacity=[{test:g,...Ai(m??1)},Ai(l.legend.unselectedOpacity)]:m&&(d.opacity=Ai(m))}return d={...d,...e},Zr(d)?void 0:d}function qan(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?w9e(o.opacity)||s.opacity:void 0;return u&&(a.opacity=Ai(u)),a={...a,...e},Zr(a)?void 0:a}function Wan(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=ot(t)?x9e(n,i,t):void 0,l=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:u,formatType:c}=s;let d;Ob(c)?d=ef({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:c,config:o}):u===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?d=ef({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&ot(t)&&t.timeUnit===void 0&&(d=ef({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const f={...l?{opacity:l}:{},...d?{text:d}:{},...e};return Zr(f)?void 0:f}function Gan(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function w9e(e){return E9e(e,(t,n)=>Math.max(t,n.value))}function MW(e){return E9e(e,(t,n)=>Ts(t,n.value))}function E9e(e,t){if(Vin(e))return wt(e.condition).reduce(t,e.value);if(kf(e))return e.value}function x9e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=ut(n.field);return r.map(s=>`(!length(data(${ut(Fi(s)+Mb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Rve={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return F8e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return j8e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??eln(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??tln(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Kan(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>IE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(AE(n)&&Ah(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Yan(t,e)};function Yan(e,t){const n=e.values;if(We(n))return Q8e(t,n);if($t(n))return n}function Kan(e,t,n,r){if(t!=="shape"){const i=MW(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Xan(e){const{legend:t}=e;return Ts(t.type,Qan(e))}function Qan({channel:e,timeUnit:t,scaleType:n}){if(AE(e)){if(Kn(["quarter","month","day"],t))return"symbol";if(Ah(n))return"gradient"}return"symbol"}function Jan({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Zan(n,t)}function Zan(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function eln({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:l}=e;if(Ah(i))return n==="horizontal"?r==="top"||r==="bottom"?Pve(t,"width",o,s):o:Pve(t,"height",l,a)}function Pve(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function tln(e){if(Kn(["quantile","threshold","log","symlog"],e))return"greedy"}function S9e(e){const t=qi(e)?nln(e):oln(e);return e.component.legends=t,t}function nln(e){const{encoding:t}=e,n={};for(const r of[fu,...bBe]){const i=Js(t[r]);!i||!e.getScaleComponent(r)||r===hu&&ot(i)&&i.type===aT||(n[r]=sln(e,r))}return n}function rln(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function iln(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function sln(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Van({},rln(e,t));pan(e,t,a);const l=n!==void 0?!n:o.disable;if(a.set("disable",l,n!==void 0),l)return a;n=n||{};const u=e.getScaleComponent(t).get("type"),c=Js(i[t]),d=ot(c)?(w=xo(c.timeUnit))==null?void 0:w.unit:void 0,f=n.orient||s.legend.orient||"right",h=Xan({legend:n,channel:t,timeUnit:d,scaleType:u}),p=Jan({legend:n,legendType:h,orient:f,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:u,orient:f,legendType:h,direction:p};for(const E of _9e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const x=E in Rve?Rve[E](m):n[E];if(x!==void 0){const S=iln(x,E,n,e.fieldDef(t));(S||s.legend[E]===void 0)&&a.set(E,x,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),b={},_={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const x=v9e(g[E]??{},e),S=E in kve?kve[E](x,_):x;S!==void 0&&!Zr(S)&&(b[E]={...y!=null&&y.length&&ot(c)?{name:`${Fi(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return Zr(b)||a.set("encode",b,!!(n!=null&&n.encoding)),a}function oln(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){S9e(r);for(const i of tt(r.component.legends))n.legend[i]=Mse(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=T9e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of tt(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function T9e(e,t){var s,o,a,l;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const u of _9e){const c=Dy(e.getWithExplicit(u),t.getWithExplicit(u),u,"legend",(d,f)=>{switch(u){case"symbolType":return aln(d,f);case"title":return n8e(d,f);case"type":return i=!0,Su("symbol")}return g5(d,f,u,"legend")});e.setWithExplicit(u,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&pL(e.implicit,["encode","gradient"]),(l=(a=e.explicit)==null?void 0:a.encode)!=null&&l.gradient&&pL(e.explicit,["encode","gradient"])),e}function aln(e,t){return t.value==="circle"?t:e}function lln(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function C9e(e){const t=e.component.legends,n={};for(const i of tt(t)){const s=e.getScaleComponent(i),o=ei(s.get("domains"));if(n[o])for(const a of n[o])T9e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Ko(n).flat().map(i=>uln(i,e.config)).filter(i=>i!==void 0)}function uln(e,t){var o,a,l;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const u=s.encode.symbols.update;u.fill&&u.fill.value!=="transparent"&&!u.stroke&&!s.stroke&&(u.stroke={value:"transparent"});for(const c of bBe)s[c]&&delete u[c]}if(s.title||delete s.title,r!==void 0){let u=r;(l=(a=s.encode)==null?void 0:a.labels)!=null&&l.update&&$t(s.encode.labels.update.text)&&(u=Ib(r,"datum.label",s.encode.labels.update.text.signal)),lln(s,"labels","text",{signal:u})}return s}}function cln(e){return fT(e)||zse(e)?dln(e):A9e(e)}function dln(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),A9e(e))}function A9e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const l=$t(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Kn(o,l)||o.push(l),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const fln=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class I9e extends xg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function k9e(e){e.component.projection=qi(e)?hln(e):gln(e)}function hln(e){if(e.hasProjection){const t=Ea(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?pln(e):void 0,s=new I9e(e.projectionName(!0),{...Ea(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function pln(e){const t=[],{encoding:n}=e;for(const r of[[Vf,Uf],[od,Hf]])(Js(n[r[0]])||Js(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(hu)&&e.typedFieldDef(hu).type===aT&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(cs.Main)),t}function mln(e,t){const n=kie(fln,i=>!!(!Vt(e.explicit,i)&&!Vt(t.explicit,i)||Vt(e.explicit,i)&&Vt(t.explicit,i)&&zu(e.get(i),t.get(i))));if(zu(e.size,t.size)){if(n)return e;if(zu(e.explicit,{}))return t;if(zu(t.explicit,{}))return e}return null}function gln(e){if(e.children.length===0)return;let t;for(const r of e.children)k9e(r);const n=kie(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=mln(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new I9e(r,t.specifiedProjection,t.size,mn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function yln(e,t,n,r){if(fP(t,n)){const i=qi(e)?e.axis(n)??e.legend(n)??{}:{},s=pt(t,{expr:"datum"}),o=pt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:pt(t,{binSuffix:"range",forAs:!0}),formula:uP(s,o,i.format,i.formatType,r)}}return{}}function R9e(e,t){return`${Y5e(e)}_${t}`}function vln(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function $se(e,t,n){const r=c5(n,void 0)??{},i=R9e(r,t);return e.getName(`${i}_bins`)}function bln(e){return"as"in e}function Nve(e,t,n){let r,i;bln(e)?r=Et(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[pt(e,{forAs:!0}),pt(e,{binSuffix:"end",forAs:!0})];const s={...c5(t,void 0)},o=R9e(s,e.field),{signal:a,extentSignal:l}=vln(n,o);if(Jj(s.extent)){const c=s.extent;i=l9e(n,c.param,c),delete s.extent}const u={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:o,binComponent:u}}class qh extends Xr{clone(){return new qh(null,mn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(gl(s)&&_i(s.bin)){const{key:a,binComponent:l}=Nve(s,s.bin,n);i[a]={...l,...i[a],...yln(n,s,o,n.config)}}return i},{});return Zr(r)?null:new qh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Nve(n,n.bin,r);return new qh(t,{[i]:s})}merge(t,n){for(const r of tt(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Ch([...this.bins[r].as,...t.bins[r].as],tr)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Ko(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Ko(this.bins).map(t=>t.field))}hash(){return`Bin ${tr(this.bins)}`}assemble(){return Ko(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:sd(t.field),as:r,signal:t.signal,...Jj(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:sd(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:pt({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function _ln(e,t,n,r){var s;const i=qi(r)?r.encoding[Ip(t)]:void 0;if(gl(n)&&qi(r)&&V8e(n,i,r.markDef,r.config)){e.add(pt(n,{})),e.add(pt(n,{suffix:"end"}));const{mark:o,markDef:a,config:l}=r,u=Oy({fieldDef:n,markDef:a,config:l});uk(o)&&u!==.5&&Cs(t)&&(e.add(pt(n,{suffix:y5})),e.add(pt(n,{suffix:v5}))),n.bin&&fP(n,t)&&e.add(pt(n,{binSuffix:"range"}))}else if(j5e(t)){const o=F5e(t);e.add(r.getName(o))}else e.add(pt(n));return g_(n)&&uin((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function wln(e,t){for(const n of tt(t)){const r=t[n];for(const i of tt(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class mf extends Xr{clone(){return new mf(null,new Set(this.dimensions),mn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:l,field:u}=o;if(l)if(l==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([pt(o,{forAs:!0})]);else{if(Zm(l)||gv(l)){const c=Zm(l)?"argmin":"argmax",d=l[c];i[d]??(i[d]={}),i[d][c]=new Set([pt({op:c,field:d},{forAs:!0})])}else i[u]??(i[u]={}),i[u][l]=new Set([pt(o,{forAs:!0})]);kp(a)&&n.scaleDomain(a)==="unaggregated"&&(i[u]??(i[u]={}),i[u].min=new Set([pt({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([pt({field:u,aggregate:"max"},{forAs:!0})]))}else _ln(s,a,o,n)}),s.size+tt(i).length===0)?null:new mf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:l}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([l||pt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([l||pt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+tt(i).length===0?null:new mf(t,r,i)}merge(t){return R5e(this.dimensions,t.dimensions)?(wln(this.measures,t.measures),!0):(Drn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...tt(this.measures)])}producedFields(){const t=new Set;for(const n of tt(this.measures))for(const r of tt(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${tr({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of tt(this.measures))for(const o of tt(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:sd(s));return{type:"aggregate",groupby:[...this.dimensions].map(sd),ops:t,fields:n,as:r}}}class cT extends Xr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Uc){const o=n.facet[s];if(o){const{bin:a,sort:l}=o;this[s]={name:n.getName(`${s}_domain`),fields:[pt(o),..._i(a)?[pt(o,{binSuffix:"end"})]:[]],...Cm(l)?{sortField:l}:We(l)?{sortIndexField:Kx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Uc)this[n]&&(t+=` ${n.charAt(0)}:${tr(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Uc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Uc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of wg){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(So(i)&&yv(s)){const o=x5(this.childModel,n),a=Bse(o);a?t[n]=a:st(Vie(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:c=o5,field:d}=l;s.push(d),o.push(c),a.push(pt(l,{forAs:!0}))}else u&&(s.push(u),o.push("max"),a.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var l;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const u of Nse){for(const c of Ose){const d=(r[u]&&r[u][c])??[];for(const f of d)if(((l=f.axes)==null?void 0:l.length)>0){s[u]=!0;break}}if(s[u]){const c=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),l=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:l}]})}for(const a of[Tm,Sm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Ove(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Eln(e,t){const n=Nie(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Ove(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Ove(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return st(Vnn(t)),null}function xln(e){const t={};return GD(e.filter,n=>{if(b8e(n)){let r=null;Gie(n)?r=Ou(n.equal):Kie(n)?r=Ou(n.lte):Yie(n)?r=Ou(n.lt):Xie(n)?r=Ou(n.gt):Qie(n)?r=Ou(n.gte):Jie(n)?r=n.range[0]:Zie(n)&&(r=(n.oneOf??n.in)[0]),r&&(p_(r)?t[n.field]="date":xr(r)?t[n.field]="number":Et(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Sln(e){const t={};function n(r){qx(r)?t[r.field]="date":r.type==="quantitative"&&_nn(r.aggregate)?t[r.field]="number":Fx(r.field)>1?r.field in t||(t[r.field]="flatten"):g_(r)&&Cm(r.sort)&&Fx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((qi(e)||Wu(e))&&e.forEachFieldDef((r,i)=>{if(gl(r))n(r);else{const s=f_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),qi(e)){const{mark:r,markDef:i,encoding:s}=e;if(vv(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];ot(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Tln(e){const t={};if(qi(e)&&e.component.selection)for(const n of tt(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Fx(i.field)>1&&(t[i.field]="flatten")}return t}class Ra extends Xr{clone(){return new Ra(null,mn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${tr(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!X0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of tt(r)){const l=i.getWithExplicit(a);l.value!==void 0&&(l.explicit||l.value===r[a]||l.value==="derived"||r[a]==="flatten"?delete r[a]:st(Uye(a,r[a],l.value)))}for(const a of tt(n)){const l=i.get(a);l!==void 0&&(l===n[a]?delete n[a]:st(Uye(a,n[a],l)))}const s=new xg(n,r);i.copyAll(s);const o={};for(const a of tt(s.combine())){const l=s.get(a);l!==null&&(o[a]=l)}return tt(o).length===0||i.parseNothing?null:new Ra(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of tt(this._parse)){const r=this._parse[n];Fx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(tt(this._parse))}dependentFields(){return new Set(tt(this._parse))}assembleTransforms(t=!1){return tt(this._parse).filter(n=>t?Fx(n)>1:!0).map(n=>{const r=Eln(n,this._parse[n]);return r?{type:"formula",expr:r,as:sT(n)}:null}).filter(n=>n!==null)}}class Ly extends Xr{clone(){return new Ly(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Pf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Pf}}}class mP extends Xr{clone(){return new mP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${tr(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class gP extends Xr{clone(){return new gP(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${tr(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class $b extends Xr{constructor(t){super(null),t??(t={name:"source"});let n;if(X0(t)||(n=t.format?{...tu(t.format,["parse"])}:{}),ck(t))this._data={values:t.values};else if(Wx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Kn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else LBe(t)?this._data={values:[{type:"Sphere"}]}:(MBe(t)||X0(t))&&(this._data={});this._generator=X0(t),t.name&&(this._name=t.name),n&&!Zr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Dve=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Cln=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},y2;function Lse(e){return e instanceof $b||e instanceof mP||e instanceof gP}class Fse{constructor(){y2.set(this,void 0),Dve(this,y2,!1,"f")}setModified(){Dve(this,y2,!0,"f")}get modifiedFlag(){return Cln(this,y2,"f")}}y2=new WeakMap;class y_ extends Fse{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class jse extends Fse{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Aln extends jse{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of tt(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Iln extends jse{constructor(t){super(),this.requiresSelectionId=t&&Pse(t)}run(t){t instanceof Ly&&(this.requiresSelectionId&&(Lse(t.parent)||t.parent instanceof mf||t.parent instanceof Ra)||(this.setModified(),t.remove()))}}class kln extends Fse{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Hh&&(r=t.producedFields(),Rie(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Rln extends jse{constructor(){super()}run(t){t instanceof nu&&!t.isRequired()&&(this.setModified(),t.remove())}}class Pln extends y_{run(t){if(!Lse(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Ra)if(t instanceof Ra)this.setModified(),t.merge(n);else{if(Pie(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Nln extends y_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof Ra);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const l of tt(a))l in i?i[l]!==a[l]&&s.add(l):i[l]=a[l]}for(const o of s)delete i[o];if(!Zr(i)){this.setModified();const o=new Ra(t,i);for(const a of n){if(a instanceof Ra)for(const l of tt(i))delete a.parse[l];t.removeChild(a),a.parent=o,a instanceof Ra&&tt(a.parse).length===0&&a.remove()}}}}}class Oln extends y_{run(t){t instanceof nu||t.numChildren()>0||t instanceof cT||t instanceof $b||(this.setModified(),t.remove())}}class Dln extends y_{run(t){const n=t.children.filter(i=>i instanceof Hh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class Mln extends y_{run(t){const n=t.children.filter(i=>i instanceof mf),r={};for(const i of n){const s=tr(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of tt(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class $ln extends y_{constructor(t){super(),this.model=t}run(t){const n=!(Lse(t)||t instanceof uT||t instanceof Ra||t instanceof Ly),r=[],i=[];for(const s of t.children)s instanceof qh&&(n&&!Pie(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof qh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class Lln extends y_{run(t){const n=[...t.children];if(!Lx(n,o=>o instanceof nu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof nu){let a=o;for(;a.numChildren()===1;){const[l]=a.children;if(l instanceof nu)a=l;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class v_ extends Xr{clone(){return new v_(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ch(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??pt(t)}hash(){return`JoinAggregateTransform ${tr(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class Qx extends Xr{clone(){return new Qx(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const l=n.reduceFieldDef((u,c,d)=>{const f=kp(d)&&n.getScaleComponent(d);if(f){const h=f.get("type"),{aggregate:p}=c,m=sse({scaleChannel:d,markDef:s,config:i,scaleType:h,isCountAggregate:Qj(p)});m!=="show"&&m!=="always-valid"&&(u[c.field]=c)}return u},{});return tt(l).length?new Qx(t,l):null}dependentFields(){return new Set(tt(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${tr(this.filter)}`}assemble(){const t=tt(this.filter).reduce((n,r)=>{const i=this.filter[r],s=pt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${$W(s)}))`):i.type==="quantitative"&&n.push($W(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function $W(e){return`isValid(${e}) && isFinite(+${e})`}function Fln(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=pt(r);return i&&t.push(i),t},[])}function jln(e){return We(e)&&e.every(t=>Et(t))&&e.length>1}class Im extends Xr{clone(){return new Im(null,mn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],l=[];if(n.sort!==void 0)for(const d of n.sort)a.push(d.field),l.push(Ts(d.order,"ascending"));const u={field:a,order:l};let c;return jln(s)?c=s:Et(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Im(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:u,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:l}=r,u=s.map(h=>{const p=i[h];return Rf(p)}).filter(h=>!!h),c=Fln(n),d=n.encoding.order;let f;if(We(d)||ot(d))f=Z5e(d);else{const h=H8e(d)?d.sort:o==="y"?"descending":"ascending";f=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Im(t,{dimensionFieldDefs:u,stackField:n.vgField(o),facetby:[],stackby:c,sort:f,offset:a,impute:l,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${tr(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[pt(i,{binSuffix:"mid"})]:[pt(i,{}),pt(i,{binSuffix:"end"})]:[pt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:l,as:u}=this._stack;if(l)for(const c of r){const{bandPosition:d=.5,bin:f}=c;if(f){const h=pt(c,{expr:"datum"}),p=pt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${$W(h)} ? ${d}*${h}+${1-d}*${p} : ${h}`,as:pt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:pt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:u,offset:a}),t}}class dT extends Xr{clone(){return new dT(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ch(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??pt(t)}hash(){return`WindowTransform ${tr(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const d of this.transform.window)n.push(d.op),r.push(this.getDefaultName(d)),i.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(d=>zie(d)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)a.push(d.field),l.push(d.order??"ascending");const u={field:a,order:l},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function Bln(e){function t(n){if(!(n instanceof cT)){const r=n.clone();if(r instanceof nu){const i=FW+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof mf||r instanceof Im||r instanceof dT||r instanceof v_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function LW(e){if(e instanceof cT)if(e.numChildren()===1&&!(e.children[0]instanceof nu)){const t=e.children[0];(t instanceof mf||t instanceof Im||t instanceof dT||t instanceof v_)&&t.addDimensions(e.fields),t.swapWithParent(),LW(e)}else{const t=e.model.component.data.main;P9e(t);const n=Bln(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(LW)}function P9e(e){if(e instanceof nu&&e.type===cs.Main&&e.numChildren()===1){const t=e.children[0];t instanceof cT||(t.swapWithParent(),P9e(e))}}const FW="scale_",vO=5;function jW(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!jW(t.children))return!1}return!0}function Td(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Mve(e,t,n){let r=e.sources,i=!1;return i=Td(new Rln,r)||i,i=Td(new Iln(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Td(new Oln,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Td(new Pln,r)||i,i=Td(new $ln(t),r)||i,i=Td(new kln,r)||i,i=Td(new Nln,r)||i,i=Td(new Mln,r)||i,i=Td(new Dln,r)||i,i=Td(new Aln,r)||i,i=Td(new Lln,r)||i),e.sources=r,i}function zln(e,t){jW(e.sources);let n=0,r=0;for(let i=0;i<vO&&Mve(e,t,!0);i++)n++;e.sources.map(LW);for(let i=0;i<vO&&Mve(e,t,!1);i++)r++;jW(e.sources),Math.max(n,r)===vO&&st(`Maximum optimization runs(${vO}) reached.`)}class po{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new po(()=>t(n))}}function N9e(e){qi(e)?Uln(e):Vln(e)}function Uln(e){const t=e.component.scales;for(const n of tt(t)){const r=qln(e,n);if(t[n].setWithExplicit("domains",r),Gln(e,n),e.component.data.isFaceted){let s=e;for(;!Wu(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)hm(a)&&(a.data=FW+a.data.replace(FW,""))}}}function Vln(e){for(const n of e.children)N9e(n);const t=e.component.scales;for(const n of tt(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Dy(r,o.getWithExplicit("domains"),"domains","scale",BW);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&st(jnn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Hln(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=$ve(t,n);if(!i){st(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=$ve(t,n);if(i)return"unaggregated"}return e}function qln(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Hln(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Js(r.x2)?Js(r.x)?Dy(Ug(n,i,e,"x"),Ug(n,i,e,"x2"),"domain","scale",BW):Ug(n,i,e,"x2"):t==="y"&&Js(r.y2)?Js(r.y)?Dy(Ug(n,i,e,"y"),Ug(n,i,e,"y2"),"domain","scale",BW):Ug(n,i,e,"y2"):Ug(n,i,e,t)}function Wln(e,t,n){return e.map(r=>({signal:`{data: ${d5(r,{timeUnit:n,type:t})}}`}))}function Bz(e,t,n){var i;const r=(i=xo(n))==null?void 0:i.unit;return t==="temporal"||r?Wln(e,t,r):[e]}function Ug(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:l}=n,u=Js(i[r]),{type:c}=u,d=u.timeUnit,f=Bon({invalid:ip("invalid",s,a),isPath:vv(o)});if(lin(t)){const m=Ug(e,void 0,n,r),g=Bz(t.unionWith,c,d);return lh([...g,...m.value])}else{if($t(t))return lh([t]);if(t&&t!=="unaggregated"&&!C8e(t))return lh(Bz(t,c,d))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return Su([[0,1]]);const m=n.requestDataName(f);return Su([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=kp(r)&&ot(u)?Yln(n,r,e):void 0;if(Rp(u)){const m=Bz([u.datum],c,d);return Su(m)}const p=u;if(t==="unaggregated"){const{field:m}=u;return Su([{data:n.requestDataName(f),field:pt({field:m,aggregate:"min"})},{data:n.requestDataName(f),field:pt({field:m,aggregate:"max"})}])}else if(_i(p.bin)){if(So(e))return Su(e==="bin-ordinal"?[]:[{data:ak(h)?n.requestDataName(f):n.requestDataName(cs.Raw),field:n.vgField(r,fP(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!bt(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(_i(m)){const g=$se(n,p.field,m);return Su([new po(()=>{const y=n.getSignalName(g);return`[${y}.start, ${y}.stop]`})])}else return Su([{data:n.requestDataName(f),field:n.vgField(r,{})}])}}else if(p.timeUnit&&Kn(["time","utc"],e)){const m=i[Ip(r)];if(V8e(p,m,s,a)){const g=n.requestDataName(f),y=Oy({fieldDef:p,fieldDef2:m,markDef:s,config:a}),b=uk(o)&&y!==.5&&Cs(r);return Su([{data:g,field:n.vgField(r,b?{suffix:y5}:{})},{data:g,field:n.vgField(r,{suffix:b?v5:"end"})}])}}return Su(h?[{data:ak(h)?n.requestDataName(f):n.requestDataName(cs.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(f),field:n.vgField(r)}])}function zz(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":o5),...r?{field:sd(r)}:{},...i?{order:i}:{}}}function Gln(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=C8e(r)&&r,o=h_(i)&&Jj(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function Yln(e,t,n){if(!So(n))return;const r=e.fieldDef(t),i=r.sort;if(z8e(i))return{op:"min",field:Kx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Cm(i)){const a=s&&!o.has(i.field);return zz(i,a)}else if(Bin(i)){const{encoding:a,order:l}=i,u=e.fieldDef(a),{aggregate:c,field:d}=u,f=s&&!o.has(d);if(Zm(c)||gv(c))return zz({field:pt(u),order:l},f);if(zie(c)||!c)return zz({op:c,field:d,order:l},f)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Kn(["ascending",void 0],i))return!0}}function $ve(e,t){const{aggregate:n,type:r}=e;return n?Et(n)&&!Enn.has(n)?{valid:!1,reason:drn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:frn(e)}:{valid:!0}:{valid:!1,reason:crn(e)}}function BW(e,t,n,r){return e.explicit&&t.explicit&&st(yrn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Kln(e){const t=Ch(e.map(o=>{if(hm(o)){const{sort:a,...l}=o;return l}return o}),tr),n=Ch(e.map(o=>{if(hm(o)){const a=o.sort;return a!==void 0&&!ak(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),tr);if(t.length===0)return;if(t.length===1){const o=e[0];if(hm(o)&&n.length>0){let a=n[0];if(n.length>1){st(Hye);const l=n.filter(u=>bt(u)&&"op"in u&&u.op!=="min");n.every(u=>bt(u)&&"op"in u)&&l.length===1?a=l[0]:a=!0}else if(bt(a)&&"field"in a){const l=a.field;o.field===l&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Ch(n.map(o=>ak(o)||!("op"in o)||Et(o.op)&&o.op in vnn?o:(st(brn(o)),!0)),tr);let i;r.length===1?i=r[0]:r.length>1&&(st(Hye),i=!0);const s=Ch(e.map(o=>hm(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Bse(e){if(hm(e)&&Et(e.field))return e.field;if(xnn(e)){let t;for(const n of e.fields)if(hm(n)&&Et(n.field)){if(!t)t=n.field;else if(t!==n.field)return st(_rn),t}return st(wrn),t}else if(Snn(e)){st(Ern);const t=e.fields[0];return Et(t)?t:void 0}}function x5(e,t){const r=e.component.scales[t].get("domains").map(i=>(hm(i)&&(i.data=e.lookupDataSource(i.data)),i));return Kln(r)}function O9e(e){return fT(e)||zse(e)?e.children.reduce((t,n)=>t.concat(O9e(n)),Lve(e)):Lve(e)}function Lve(e){return tt(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:l,range:u,reverse:c,...d}=i,f=Xln(i.range,s,n,e),h=x5(e,n),p=a?Won(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:f,...c!==void 0?{reverse:c}:{},...d}),t},[])}function Xln(e,t,n,r){if(Cs(n)){if(yv(e))return{step:{signal:`${t}_step`}}}else if(bt(e)&&hm(e))return{...e,data:r.lookupDataSource(e.data)};return e}class D9e extends xg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Kn([zo.LOG,zo.TIME,zo.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Kn([zo.LINEAR,zo.SQRT,zo.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(We(a)){const l=a[0],u=a[a.length-1];if(xr(l)&&xr(u))if(l<=0&&u>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const Qln=["range","scheme"];function Jln(e){const t=e.component.scales;for(const n of Bie){const r=t[n];if(!r)continue;const i=Zln(n,e);r.setWithExplicit("range",i)}}function Fve(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=pu(t),o=e.getName(s);if(bt(r)&&r.binned&&r.step!==void 0)return new po(()=>{const a=e.scaleName(t),l=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${l})`});if(_i(r)){const a=$se(e,i,r);return new po(()=>{const l=e.getSignalName(a),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(o)} / (${u})`})}}}function Zln(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const d of Qln)if(n[d]!==void 0){const f=xW(s,d),h=A8e(e,d);if(!f)st(o8e(s,d,e));else if(h)st(h);else switch(d){case"range":{const p=n.range;if(We(p)){if(Cs(e))return lh(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return po.fromName(y,g)}return m}))}else if(bt(p))return lh({data:t.requestDataName(cs.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return lh(p)}case"scheme":return lh(eun(n[d]))}}const o=e===Bi||e==="xOffset"?"width":"height",a=r[o];if(op(a)){if(Cs(e))if(So(s)){const d=$9e(a,t,e);if(d)return lh({step:d})}else st(a8e(o));else if(oP(e)){const d=e===dv?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const p=L9e(a,s);if(p)return lh(p)}}}const{rangeMin:l,rangeMax:u}=n,c=tun(e,t);return(l!==void 0||u!==void 0)&&xW(s,"rangeMin")&&We(c)&&c.length===2?lh([l??c[0],u??c[1]]):Su(c)}function eun(e){return ain(e)?{scheme:e.name,...tu(e,["name"])}:{scheme:e}}function M9e(e,t,n,{center:r}={}){const i=pu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===Co&&If(n)?r?[po.fromName(a=>`${o(a)}/2`,s),po.fromName(a=>`-${o(a)}/2`,s)]:[po.fromName(o,s),0]:r?[po.fromName(a=>`-${o(a)}/2`,s),po.fromName(a=>`${o(a)}/2`,s)]:[0,po.fromName(o,s)]}function tun(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Js(s[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:c}=t.specifiedScales[e];switch(e){case Bi:case Co:{if(Kn(["point","band"],l)){const d=F9e(e,n,r.view);if(op(d))return{step:$9e(d,t,e)}}return M9e(e,t,l)}case dv:case oT:return nun(e,t,l);case bg:{const d=sun(i,r),f=oun(i,n,t,r);return Ux(l)?iun(d,f,run(l,r,u,e)):[d,f]}case gd:return[0,Math.PI*2];case d_:return[0,360];case zf:return[0,new po(()=>{const d=t.getSignalName(Wu(t.parent)?"child_width":"width"),f=t.getSignalName(Wu(t.parent)?"child_height":"height");return`min(${d},${f})/2`})];case pv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case mv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case hu:return"symbol";case fu:case Cp:case Ap:return l==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case _g:case fv:case hv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function $9e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=$ie(n),o=r[s];if(wBe({step:e,offsetIsDiscrete:En(o)&&w8e(o.type)})==="offset"&&tBe(r,s)){const l=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(l.get("type")==="band"){const f=l.get("paddingInner")??l.get("padding")??0,h=l.get("paddingOuter")??l.get("padding")??0;c=`bandspace(${c}, ${f}, ${h})`}const d=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Inn(d)})`}}else return e.step}function L9e(e,t){if(wBe({step:e,offsetIsDiscrete:So(t)})==="offset")return{step:e.step}}function nun(e,t,n){const r=e===dv?"x":"y",i=t.getScaleComponent(r);if(!i)return M9e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:l}=t;if(s==="band"){const u=F9e(r,t.size,t.config.view);if(op(u)){const c=L9e(u,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const u=t.encoding[r];if(ot(u)&&u.timeUnit){const c=y8e(u.timeUnit,p=>`scale('${o}', ${p})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,f=Oy({fieldDef:u,markDef:a,config:l})-.5,h=f!==0?` + ${f}`:"";if(d){const p=$t(d)?`${d.signal}/2`+h:`${d/2+f}`,m=$t(d)?`(1 - ${d.signal}/2)`+h:`${1-d/2+f}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return I5e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function F9e(e,t,n){const r=e===Bi?"width":"height",i=t[r];return i||TL(n,r)}function run(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&We(n)?n.length+1:(st(Prn(r)),3)}}function iun(e,t,n){const r=()=>{const i=Zd(t),s=Zd(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return $t(t)?new po(r):{signal:r()}}function sun(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(Zj("size",e))}const jve=.95;function oun(e,t,n,r){const i={x:Fve(n,"x"),y:Fve(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Bve(t,i,r.view);return xr(s)?s-1:new po(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Bve(t,i,r.view);return xr(s)?Math.pow(jve*s,2):new po(()=>`pow(${jve} * ${s.signal}, 2)`)}}throw new Error(Zj("size",e))}function Bve(e,t,n){const r=op(e.width)?e.width.step:SL(n,"width"),i=op(e.height)?e.height.step:SL(n,"height");return t.x||t.y?new po(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function j9e(e,t){qi(e)?aun(e,t):z9e(e,t)}function aun(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of tt(n)){const l=o[a],u=n[a],c=e.getScaleComponent(a),d=Js(i[a]),f=l[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=xW(h,t),y=A8e(a,t);if(f!==void 0&&(g?y&&st(y):st(o8e(h,t,a))),g&&y===void 0)if(f!==void 0){const b=d.timeUnit,_=d.type;switch(t){case"domainMax":case"domainMin":p_(l[t])||_==="temporal"||b?u.set(t,{signal:d5(l[t],{type:_,timeUnit:b})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const b=t in zve?zve[t]({model:e,channel:a,fieldOrDatumDef:d,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:s,config:r,hasNestedOffsetScale:nBe(i,a),hasSecondaryRangeChannel:!!i[Ip(a)]}):r.scale[t];b!==void 0&&u.set(t,b,!1)}}}const zve={bins:({model:e,fieldOrDatumDef:t})=>ot(t)?lun(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>uun(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>cun(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>dun(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>fun(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>hun(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=ot(e)?e.sort:void 0;return pun(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>mun(e,t,n,r,i,s.scale,o)};function B9e(e){qi(e)?Jln(e):z9e(e,"range")}function z9e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?B9e(r):j9e(r,t);for(const r of tt(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Dy(i,a,t,"scale",DBe((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function lun(e,t){const n=t.bin;if(_i(n)){const r=$se(e,t.field,n);return new po(()=>e.getSignalName(r))}else if(jo(n)&&h_(n)&&n.step!==void 0)return{step:n.step}}function uun(e,t){if(Kn([fu,Cp,Ap],e)&&t!=="nominal")return"hcl"}function cun(e,t,n,r,i,s){var o;if(!((o=Rf(s))!=null&&o.bin||We(n)||i!=null||r!=null||Kn([zo.TIME,zo.UTC],e)))return Cs(t)?!0:void 0}function dun(e,t,n,r,i,s){if(Cs(e)){if(Ah(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(ot(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===zo.POINT)return n.pointPadding}}function fun(e,t,n,r,i,s=!1){if(e===void 0){if(Cs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:l,bandWithNestedOffsetPaddingInner:u}=i;return s?u:Ts(o,n==="bar"?a:l)}else if(oP(t)&&r===zo.BAND)return i.offsetBandPaddingInner}}function hun(e,t,n,r,i,s=!1){if(e===void 0){if(Cs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===zo.BAND)return Ts(o,$t(r)?{signal:`${r.signal}/2`}:r/2)}else if(oP(t)){if(n===zo.POINT)return .5;if(n===zo.BAND)return i.offsetBandPaddingOuter}}}function pun(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return If(e)&&t==="descending"?$t(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(If(e)&&t==="descending")return!0}function mun(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&If(i)){if(We(n)){const l=n[0],u=n[n.length-1];if(xr(l)&&l<=0&&xr(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Ux(i))return!0;if(!(ot(t)&&t.bin)&&Kn([...wg,...cnn],e)){const{orient:l,type:u}=r;return Kn(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Kn(["bar","area"],u)&&!o?!0:s==null?void 0:s.zero}return!1}function gun(e,t,n,r,i=!1){const s=yun(t,n,r,i),{type:o}=e;return kp(t)?o!==void 0?pin(t,o)?ot(n)&&!hin(o,n.type)?(st(mrn(o,s)),s):o:(st(prn(t,o,s)),s):s:null}function yun(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(AE(e)||Nz(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&st(Oz(e,"ordinal")),"ordinal";if(Cs(e)||oP(e)){if(Kn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in jie)return"band";const s=n[pu(e)];return Nb(s)||Hx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return AE(e)?"time":Nz(e)==="discrete"?(st(Oz(e,"temporal")),"ordinal"):ot(t)&&t.timeUnit&&xo(t.timeUnit).utc?"utc":"time";case"quantitative":return AE(e)?ot(t)&&_i(t.bin)?"bin-ordinal":"linear":Nz(e)==="discrete"?(st(Oz(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(i8e(t.type))}function vun(e,{ignoreRange:t}={}){U9e(e),N9e(e);for(const n of fin)j9e(e,n);t||B9e(e)}function U9e(e){qi(e)?e.component.scales=bun(e):e.component.scales=wun(e)}function bun(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of Bie){const o=Js(t[s]);if(o&&n===R8e&&s===hu&&o.type===aT)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const l=nBe(t,s),u=gun(a,s,o,r,l);i[s]=new D9e(e.scaleName(`${s}`,!0),{value:u,explicit:a.type===u})}}return i}const _un=DBe((e,t)=>Wye(e)-Wye(t));function wun(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){U9e(s);for(const o of tt(s.component.scales))if((t=i.scale)[o]??(t[o]=b9e(o,e)),i.scale[o]==="shared"){const a=r[o],l=s.component.scales[o].getWithExplicit("type");a?nin(a.value,l.value)?r[o]=Dy(a,l,"type","scale",_un):(i.scale[o]="independent",delete r[o]):r[o]=l}}for(const s of tt(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new D9e(o,a);for(const l of e.children){const u=l.component.scales[s];u&&(l.renameScale(u.get("name"),o),u.merged=!0)}}return n}class Uz{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function qi(e){return(e==null?void 0:e.type)==="unit"}function Wu(e){return(e==null?void 0:e.type)==="facet"}function zse(e){return(e==null?void 0:e.type)==="concat"}function fT(e){return(e==null?void 0:e.type)==="layer"}class Use{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=l=>{var u,c,d;return(u=l.from)!=null&&u.data&&(l.from.data=this.lookupDataSource(l.from.data)),(d=(c=l.from)==null?void 0:c.facet)!=null&&d.data&&(l.from.facet.data=this.lookupDataSource(l.from.facet.data)),l},this.parent=r,this.config=s,this.view=Ea(a),this.name=t.name??i,this.title=Qg(t.title)?{text:t.title}:t.title?Ea(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Uz,this.projectionNameMap=r?r.projectionNameMap:new Uz,this.signalNameMap=r?r.signalNameMap:new Uz,this.data=t.data,this.description=t.description,this.transforms=Ion(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Nsn(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:a5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new xg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?mn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){vun(this)}parseProjection(){k9e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){S9e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of tt(r)){const o=r[s];o!==void 0&&(i[s]=Ai(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Ai(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Zr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=zan(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Uc)t[r].title&&n.push(Man(this,r));for(const r of Nse)n=n.concat($an(this,r));return n}assembleAxes(){return Ean(this.component.axes,this.config)}assembleLegends(){return C9e(this)}assembleProjections(){return cln(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...K5e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Kn(["unit","layer"],this.type)?Kn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Zr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Wu(this.parent)?O9e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Fi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(cs[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Wu(this.parent)){const n=y9e(t),r=Xj(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(So(s)&&yv(o)){const a=i.get("name"),l=x5(this,r),u=Bse(l);if(u){const c=pt({aggregate:"distinct",field:u},{expr:"datum"});return{signal:g9e(a,i,c)}}else return st(Vie(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(z5e(t)&&kp(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(Onn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class V9e extends Use{vgField(t,n={}){const r=this.fieldDef(t);if(r)return pt(r,n)}reduceFieldDef(t,n){return asn(this.getMapping(),(r,i,s)=>{const o=Rf(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){pse(this.getMapping(),(r,i)=>{const s=Rf(r);s&&t(s,i)},n)}}class S5 extends Xr{clone(){return new S5(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=mn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${tr(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class T5 extends Xr{clone(){return new T5(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=mn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${tr(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class C5 extends Xr{clone(){return new C5(this.parent,mn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=mn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${tr(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class A5 extends Xr{clone(){return new A5(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=mn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${tr(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class RE extends Xr{clone(){return new RE(null,mn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Vf,Uf],[od,Hf]]){const s=i.map(o=>{const a=Js(n.encoding[o]);return ot(a)?a.field:Rp(a)?{expr:`${a.datum}`}:kf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new RE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(hu)){const i=n.typedFieldDef(hu);i.type===aT&&(t=new RE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Et);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${tr(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class dk extends Xr{clone(){return new dk(null,this.projection,mn(this.fields),mn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Vf,Uf],[od,Hf]]){const i=r.map(o=>{const a=Js(n.encoding[o]);return ot(a)?a.field:Rp(a)?{expr:`${a.datum}`}:kf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===od?"2":"";(i[0]||i[1])&&(t=new dk(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Et))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${tr(this.fields)} ${tr(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class G1 extends Xr{clone(){return new G1(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new G1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(ot(i)&&ot(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:l,value:u,frame:c,keyvals:d}=o.impute,f=sBe(n.mark,r);return new G1(t,{impute:o.field,key:a.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...c?{frame:c}:{},...d!==void 0?{keyvals:d}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${tr(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:uon(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,c]}else return[l]}}class I5 extends Xr{clone(){return new I5(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=mn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${tr(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class fk extends Xr{clone(){return new fk(null,mn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(con(o)){let l=W9e(o.data,s);l||(l=new $b(o.data),s.push(l));const u=n.getName(`lookup_${i}`);a=new nu(l,u,cs.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=a}else if(don(o)){const l=o.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(Fi(l),l)}catch{throw new Error(Lnn(l))}if(a=u.materialized,!a)throw new Error(Fnn(l))}return new fk(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?wt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${tr({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:wt(this.transform.as)}:{}};else{let n=this.transform.as;Et(n)||(st(Wnn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class k5 extends Xr{clone(){return new k5(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=mn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${tr(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class R5 extends Xr{clone(){return new R5(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=mn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${tr(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class P5 extends Xr{clone(){return new P5(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Ch((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${tr(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class N5 extends Xr{clone(){return new N5(null,mn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${tr(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function H9e(e){let t=0;function n(r,i){if(r instanceof $b&&!r.isGenerator&&!Wx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof Ra&&(r.parent instanceof $b&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof cT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof mP||r instanceof gP||r instanceof Qx||r instanceof uT||r instanceof Yx||r instanceof dk||r instanceof mf||r instanceof fk||r instanceof dT||r instanceof v_||r instanceof A5||r instanceof C5||r instanceof S5||r instanceof I5||r instanceof k5||r instanceof R5||r instanceof Ly||r instanceof N5||r instanceof P5||r instanceof T5)&&i.transform.push(r.assemble()),(r instanceof qh||r instanceof Hh||r instanceof G1||r instanceof Im||r instanceof RE)&&i.transform.push(...r.assemble()),r instanceof nu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof nu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof nu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Eun(e){const t=[],n=H9e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function xun(e,t){const n=[],r=H9e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function Sun(e){return e==="top"||e==="left"||$t(e)?"header":"footer"}function Tun(e){for(const t of Uc)Cun(e,t);Uve(e,"x"),Uve(e,"y")}function Cun(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],l=Xx("title",null,r,t);let u=IE(a,r,{allowDisabling:!0,includeDefault:l===void 0||!!l});i.component.layoutHeaders[t].title&&(u=We(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Xx("labelOrient",a.header,r,t),d=a.header!==null?Ts((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,f=Kn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?u:null,facetFieldDef:a,[f]:t==="facet"?[]:[q9e(e,t,d)]}}}function q9e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Uve(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Mse(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const l=Sun(a.get("orient"));o[l]??(o[l]=[q9e(e,s,!1)]);const u=g2(a,"main",e.config,{header:!0});u&&o[l][0].axes.push(u),a.mainExtracted=!0}}}}function Aun(e){Vse(e),kL(e,"width"),kL(e,"height")}function Iun(e){Vse(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";kL(e,t),kL(e,n)}function Vse(e){for(const t of e.children)t.parseLayoutSize()}function kL(e,t){const n=y9e(t),r=Xj(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const l=a.component.layoutSize.getWithExplicit(n),u=i.scale[r]??b9e(r,e);if(u==="independent"&&l.value==="step"){o=void 0;break}if(o){if(u==="independent"&&o.value!==l.value){o=void 0;break}o=Dy(o,l,n,"")}else o=l}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function kun(e){const{size:t,component:n}=e;for(const r of wg){const i=pu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,op(s)?"step":s,!0)}else{const s=Run(e,i);n.layoutSize.set(i,s,!1)}}}function Run(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(So(s)){const a=TL(r.view,t);return yv(o)||op(a)?"step":a}else return CW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return CW(r.view,t);{const s=TL(r.view,t);return op(s)?s.step:s}}}function zW(e,t,n){return pt(t,{suffix:`by_${pt(e)}`,...n})}class _A extends V9e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Yse(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!cP(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=tt(t),r={};for(const i of n){if(![Sm,Tm].includes(i)){st(Zj(i,"facet"));break}const s=t[i];if(s.field===void 0){st(wW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=hse(t,n);return r.header?r.header=Ea(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=O5(this),this.child.parseData()}parseLayoutSize(){Vse(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Tun(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Uc)for(const r of Ose){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Xx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const l=w5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[l]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[l]??(t[l]={}),t[l][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof _A))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof _A?{...this.channelHasField("column")?{encode:{update:{columns:{field:pt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof _A){if(this.child.channelHasField("column")){const i=pt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of wg){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(So(o)&&yv(a)){const l=x5(this.child,i),u=Bse(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):st(Vie(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),l=[];for(const c of Uc){const d=this.facet[c];if(d){l.push(pt(d));const{bin:f,sort:h}=d;if(_i(f)&&l.push(pt(d,{binSuffix:"end"})),Cm(h)){const{field:p,op:m=o5}=h,g=zW(d,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(We(h)){const p=Kx(d,c);s.push(p),o.push("max"),a.push(p)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||s.length>0?{aggregate:{...u?{cross:u}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Cm(r.sort)?[zW(r,r.sort,{expr:"datum"})]:We(r.sort)?[Kx(r,t,{expr:"datum"})]:[pt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Cm(i)?i.order:!We(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return DW(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Nse)if(t[s]){const o=Xx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return DW(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Eun(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Uc.map(l=>this.facetSortFields(l)).flat(),order:Uc.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(Uon(this,[]))}]}getMapping(){return this.facet}}function Pun(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Cm(s.sort)){const{field:o,op:a=o5}=s.sort;e=i=new v_(e,{joinaggregate:[{op:a,field:o,as:zW(s,s.sort,{forAs:!0})}],groupby:[pt(s)]})}return i}return null}function W9e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const l=(n=e.format)==null?void 0:n.mesh,u=(r=a.format)==null?void 0:r.feature;if(l&&u)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||u)&&c!==u)continue;const d=(s=a.format)==null?void 0:s.mesh;if(!((l||d)&&l!==d)){if(ck(e)&&ck(a)){if(zu(e.values,a.values))return o}else if(Wx(e)&&Wx(a)){if(e.url===a.url)return o}else if(MBe(e)&&e.name===o.dataName)return o}}return null}function Nun(e,t){if(e.data||!e.parent){if(e.data===null){const r=new $b({values:[]});return t.push(r),r}const n=W9e(e.data,t);if(n)return X0(e.data)||(n.data.format=k5e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new $b(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Oun(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(won(i))o=e=new Yx(e,i),s="derived";else if(Tse(i)){const a=xln(i);o=e=Ra.makeWithAncestors(e,{},a,n)??e,e=new uT(e,t,i.filter)}else if(RBe(i))o=e=qh.makeFromTransform(e,i,t),s="number";else if(xon(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new Ra(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Hh.makeFromTransform(e,i);else if(Son(i))o=e=mf.makeFromTransform(e,i),s="number",Pse(t)&&(e=new Ly(e));else if(kBe(i))o=e=fk.make(e,t,i,r++),s="derived";else if(von(i))o=e=new dT(e,i),s="number";else if(bon(i))o=e=new v_(e,i),s="number";else if(Ton(i))o=e=Im.makeFromTransform(e,i),s="derived";else if(Con(i))o=e=new A5(e,i),s="derived";else if(Aon(i))o=e=new T5(e,i),s="derived";else if(_on(i))o=e=new C5(e,i),s="derived";else if(fon(i))o=e=new P5(e,i),s="derived";else if(yon(i))e=new N5(e,i);else if(Eon(i))o=e=G1.makeFromTransform(e,i),s="derived";else if(hon(i))o=e=new S5(e,i),s="derived";else if(pon(i))o=e=new k5(e,i),s="derived";else if(mon(i))o=e=new R5(e,i),s="derived";else if(gon(i))o=e=new I5(e,i),s="derived";else{st(qnn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function O5(e){var g;let t=Nun(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(X0(i)||Wx(i)||ck(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new jon;X0(i)?($Be(i)?t=new gP(t,i.sequence):Cse(i)&&(t=new mP(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=Ra.makeExplicit(t,e,o)??t,t=new Ly(t);const a=e.parent&&fT(e.parent);(qi(e)||Wu(e))&&a&&(t=qh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Oun(t,e,o));const l=Tln(e),u=Sln(e);t=Ra.makeWithAncestors(t,{},{...l,...u},o)??t,qi(e)&&(t=RE.parseAll(t,e),t=dk.parseAll(t,e)),(qi(e)||Wu(e))&&(a||(t=qh.makeFromEncoding(t,e)??t),t=Hh.makeFromEncoding(t,e)??t,t=Yx.parseAllForSortIndex(t,e));const c=t=bO(cs.Raw,e,t);if(qi(e)){const y=mf.makeFromEncoding(t,e);y&&(t=y,Pse(e)&&(t=new Ly(t))),t=G1.makeFromEncoding(t,e)??t,t=Im.makeFromEncoding(t,e)??t}let d,f;if(qi(e)){const{markDef:y,mark:b,config:_}=e,w=Gr("invalid",y,_),{marks:E,scales:x}=f=FBe({invalid:w,isPath:vv(b)});E!==x&&x==="include-invalid-values"&&(d=t=bO(cs.PreFilterInvalid,e,t)),E==="exclude-invalid-values"&&(t=Qx.make(t,e,f)??t)}const h=t=bO(cs.Main,e,t);let p;if(qi(e)&&f){const{marks:y,scales:b}=f;y==="include-invalid-values"&&b==="exclude-invalid-values"&&(t=Qx.make(t,e,f)??t,p=t=bO(cs.PostFilterInvalid,e,t))}qi(e)&&_an(e,h);let m=null;if(Wu(e)){const y=e.getName("facet");t=Pun(t,e.facet)??t,m=new cT(t,e,y,h.getSource()),n[y]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:d,postFilterInvalid:p}}function bO(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new nu(n,s,e,i);return r[s]=o,o}class Dun extends Use{constructor(t,n,r,i){var s,o,a,l;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((l=(a=t.resolve)==null?void 0:a.axis)==null?void 0:l.y)==="shared")&&st(Unn),this.children=this.getChildren(t).map((u,c)=>Yse(u,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=O5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of tt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return p5(t)?t.vconcat:xse(t)?t.hconcat:t.concat}parseLayoutSize(){Iun(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Dse(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Mun(e){return e===!1||e===null}const $un={disable:1,gridScale:1,scale:1,...Z8e,labelExpr:1,encode:1},G9e=tt($un);class Hse extends xg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Hse(mn(this.explicit),mn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Mun(this.get(t))}hasOrientSignalRef(){return $t(this.explicit.orient)}}function Lun(e,t,n){const{encoding:r,config:i}=e,s=Js(r[t])??Js(r[Ip(t)]),o=e.axis(t)||{},{format:a,formatType:l}=o;if(Ob(l))return{text:ef({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:l,config:i}),...n};if(a===void 0&&l===void 0&&i.customFormatTypes){if(Vx(s)==="quantitative"){if(Hx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:ef({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:ef({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Vx(s)==="temporal"&&i.timeFormatType&&ot(s)&&!s.timeUnit)return{text:ef({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Fun(e){return wg.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[qun(n,e)]),t),{})}const jun={bottom:"top",top:"bottom",left:"right",right:"left"};function Bun(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of tt(i.component.axes))n.axis[s]=Mse(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=zun(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of wg){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:l}=o.getWithExplicit("orient");if(!$t(a)){if(r[a]>0&&!l){const u=jun[a];r[a]>r[u]&&o.set("orient",u,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function zun(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Uun(i,s)}}}else return t.map(n=>n.clone());return e}function Uun(e,t){for(const n of G9e){const r=Dy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return n8e(i,s);case"gridScale":return{explicit:i.explicit,value:Ts(i.value,s.value)}}return g5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function Vun(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===($t(n.labelAngle)?n.labelAngle:lk(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===f9e(r,i))return!0}return e===n[t]}const Hun=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function qun(e,t){var y,b;let n=t.axis(e);const r=new Hse,i=Js(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((b=o.axis)==null?void 0:b.orient)||Ran(e),l=t.getScaleComponent(e).get("type"),u=xan(e,l,a,t.config),c=n!==void 0?!n:NW("disable",o.style,n==null?void 0:n.style,u).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const d=Aan(i,n,e,o.style,u),f=j8e(n.formatType,i,l),h=F8e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:a,labelAngle:d,format:h,formatType:f,mark:s,config:o};for(const _ of G9e){const w=_ in Ave?Ave[_](p):Zye(_)?n[_]:void 0,E=w!==void 0,x=Vun(w,_,n,t,e);if(E&&x)r.set(_,w,x);else{const{configValue:S=void 0,configFrom:C=void 0}=Zye(_)&&_!=="values"?NW(_,o.style,n.style,u):{},A=S!==void 0;E&&!A?r.set(_,w,x):(C!=="vgAxisConfig"||Hun.has(_)&&A||hP(S)||$t(S))&&r.set(_,S,!1)}}const m=n.encoding??{},g=J8e.reduce((_,w)=>{if(!r.hasAxisPart(w))return _;const E=v9e(m[w]??{},t),x=w==="labels"?Lun(t,e,E):E;return x!==void 0&&!Zr(x)&&(_[w]={update:x}),_},{});return Zr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Wun({encoding:e,size:t}){for(const n of wg){const r=pu(n);op(t[r])&&T0(e[n])&&(delete t[r],st(a8e(r)))}return t}const Gun={vgMark:"arc",encodeEntry:e=>({...yd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...My(e,"radius"),...My(e,"theta")})},Yun={vgMark:"area",encodeEntry:e=>({...yd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...CL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...CL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Rse(e)})},Kun={vgMark:"rect",encodeEntry:e=>({...yd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...My(e,"x"),...My(e,"y")})},Xun={vgMark:"shape",encodeEntry:e=>({...yd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ot(n)&&n.type===aT?{field:pt(n,{expr:"datum"})}:{}}]}},Qun={vgMark:"image",encodeEntry:e=>({...yd(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...My(e,"x"),...My(e,"y"),...Ise(e,"url")})},Jun={vgMark:"line",encodeEntry:e=>({...yd(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...go("size",e,{vgChannel:"strokeWidth"}),...Rse(e)})},Zun={vgMark:"trail",encodeEntry:e=>({...yd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...go("size",e),...Rse(e)})};function qse(e,t){const{config:n}=e;return{...yd(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...go("size",e),...go("angle",e),...ecn(e,n,t)}}function ecn(e,t,n){return n?{shape:{value:n}}:go("shape",e)}const tcn={vgMark:"symbol",encodeEntry:e=>qse(e)},ncn={vgMark:"symbol",encodeEntry:e=>qse(e,"circle")},rcn={vgMark:"symbol",encodeEntry:e=>qse(e,"square")},icn={vgMark:"rect",encodeEntry:e=>({...yd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...My(e,"x"),...My(e,"y")})},scn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...yd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...CL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...CL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...go("size",e,{vgChannel:"strokeWidth"})}}},ocn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...yd(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ka("x",e,{defaultPos:"mid"}),...ka("y",e,{defaultPos:"mid"}),...Ise(e),...go("size",e,{vgChannel:"fontSize"}),...go("angle",e),...xve("align",acn(e.markDef,n,t)),...xve("baseline",lcn(e.markDef,n,t)),...ka("radius",e,{defaultPos:null}),...ka("theta",e,{defaultPos:null})}}};function acn(e,t,n){if(Gr("align",e,n)===void 0)return"center"}function lcn(e,t,n){if(Gr("baseline",e,n)===void 0)return"middle"}const ucn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...yd(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ka("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ka("y",e,{defaultPos:"mid",vgChannel:"yc"}),...go("size",e,{defaultValue:ccn(e),vgChannel:i}),[s]:Ai(Gr("thickness",n,t))}}};function ccn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Gr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&yv(a)&&xr(a.step)?a.step*3/4:SL(t.view,i)*3/4}}const _O={arc:Gun,area:Yun,bar:Kun,circle:ncn,geoshape:Xun,image:Qun,line:Jun,point:tcn,rect:icn,rule:scn,square:rcn,text:ocn,tick:ucn,trail:Zun};function dcn(e){if(Kn([i5,n5,vin],e.mark)){const t=sBe(e.mark,e.encoding);if(t.length>0)return fcn(e,t)}else if(e.mark===r5){const t=_W.some(n=>Gr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return hcn(e)}return Wse(e)}const Vve="faceted_path_";function fcn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Vve+e.requestDataName(cs.Main),data:e.requestDataName(cs.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Wse(e,{fromPrefix:Vve})}]}const Hve="stack_group_";function hcn(e){var u;const[t]=Wse(e,{fromPrefix:Hve}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,d)=>{const f=[r({prefix:"min",suffix:"start",expr:d}),r({prefix:"max",suffix:"start",expr:d}),r({prefix:"min",suffix:"end",expr:d}),r({prefix:"max",suffix:"end",expr:d})];return`${c}(${f.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...$x(t.encode.update,["y","yc","y2","height",..._W]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...tu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...$x(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...tu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of _W){const d=ip(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):d&&(s[c]=Ai(d)),d&&(t.encode.update[c]={value:0})}const a=[];if(((u=e.stack.groupbyChannels)==null?void 0:u.length)>0)for(const c of e.stack.groupbyChannels){const d=e.fieldDef(c),f=pt(d);f&&a.push(f),(d!=null&&d.bin||d!=null&&d.timeUnit)&&a.push(pt(d,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,d)=>{if(t.encode.update[d])return{...c,[d]:t.encode.update[d]};{const f=ip(d,e.markDef,e.config);return f!==void 0?{...c,[d]:Ai(f)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(cs.Main),name:Hve+e.requestDataName(cs.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function pcn(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!We(o)&&kf(o)&&vW(o.value)||!o&&vW(Gr("order",i,s)))){if((We(o)||ot(o))&&!n)return Z5e(o,{expr:"datum"});if(vv(r)){const a=i.orient==="horizontal"?"y":"x",l=t[a];if(ot(l))return{field:a}}}}function Wse(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=Ts(r.clip,mcn(e),gcn(e)),a=Q5e(r),l=i.key,u=pcn(e),c=ycn(e),d=Gr("aria",r,s),f=_O[n].postEncodingTransform?_O[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:_O[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...c||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(cs.Main)},encode:{update:_O[n].encodeEntry(e)},...f?{transform:f}:{}}]}function mcn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function gcn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function ycn(e){if(!e.component.selection)return null;const t=tt(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=tt(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class Y9e extends V9e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,tve(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=sp(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=ton(o,s,{graticule:t.data&&Cse(t.data)}));const l=this.encoding=ssn(t.encoding||{},a,o.filled,s);this.markDef=CBe(o,l,s),this.size=Wun({encoding:l,size:tve(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=TBe(this.markDef,l),this.specifiedScales=this.initScales(a,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>wse(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===R8e,r=t&&tnn.some(i=>En(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Bie.reduce((r,i)=>{const s=Js(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ea(t);return We(n)&&(i.domain=n.map(Ou)),We(r)&&(i.range=r.map(Ou)),i}initAxes(t){return wg.reduce((n,r)=>{const i=t[r];if(En(i)||r===Bi&&En(t.x2)||r===Co&&En(t.y2)){const s=En(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=tt(t),r={};for(const i of n){const s=t[i];r[i]=hP(s)?X5e(s):Ou(s)}return r}initLegends(t){return dnn.reduce((n,r)=>{const i=Js(t[r]);if(i&&hnn(r)){const s=i.legend;n[r]=s&&Ea(s)}return n},{})}parseData(){this.component.data=O5(this)}parseLayoutSize(){kun(this)}parseSelections(){this.component.selection=ban(this,this.selection)}parseMarkGroup(){this.component.mark=dcn(this)}parseAxesAndHeaders(){this.component.axes=Fun(this)}assembleSelectionTopLevelSignals(t){return Von(this,t)}assembleSignals(){return[...u9e(this),...zon(this,[])]}assembleSelectionData(t){return Hon(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Dse(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!fT(this.parent))&&(t=BBe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return q1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Rf(n)}typedFieldDef(t){const n=this.fieldDef(t);return gl(n)?n:null}}class Gse extends Use{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,l)=>{if(m5(a))return new Gse(a,this,this.getName(`layer_${l}`),o,s);if(Eg(a))return new Y9e(a,this,this.getName(`layer_${l}`),o,s);throw new Error(Uie(a))})}parseData(){this.component.data=O5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Aun(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of tt(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Bun(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),u9e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Dse(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of wt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return qon(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),C9e(this))}}function Yse(e,t,n,r,i){if(a5(e))return new _A(e,t,n,i);if(m5(e))return new Gse(e,t,n,r,i);if(Eg(e))return new Y9e(e,t,n,r,i);if(ksn(e))return new Dun(e,t,n,i);throw new Error(Uie(e))}function vcn(e,t={}){t.logger&&Nrn(t.logger),t.fieldTitle&&K8e(t.fieldTitle);try{const n=SBe(YS(t.config,e.config)),r=OBe(e,n),i=Yse(r,null,"",void 0,n);return i.parse(),zln(i.component.data,i),{spec:_cn(i,bcn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Orn(),t.fieldTitle&&Xin()}}function bcn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Et(t)&&(t={type:t}),i&&s&&$on(t.type)){if(i==="step"&&s==="step")st(jye()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";st(jye(Xj(o)));const a=o==="width"?"height":"width";t.type=Lon(a)}}return{...tt(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...hve(n,!1),...hve(e,!0)}}function _cn(e,t,n={},r){const i=e.config?Vsn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),xun(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),l=e.assembleGroupStyle(),u=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:d,...f}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...f,...a?{title:a}:{},...l?{style:l}:{},...u?{encode:{update:u}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),..._Be(d)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const wcn=Ktn.version,Ecn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Fx,accessPathWithDatum:Nie,compile:vcn,contains:Kn,deepEqual:zu,deleteNestedProperty:pL,duplicate:mn,entries:Py,every:kie,fieldIntersection:Pie,flatAccessWithDatum:P5e,getFirstDefined:Ts,hasIntersection:Rie,hash:tr,internalField:D5e,isBoolean:ak,isEmpty:Zr,isEqual:Qtn,isInternalField:M5e,isNullOrFalse:vW,isNumeric:Hj,keys:tt,logicalExpr:vA,mergeDeep:k5e,never:I5e,normalize:OBe,normalizeAngle:lk,omit:tu,pick:$x,prefixGenerator:bW,removePathFromField:sT,replaceAll:Ib,replacePathInField:sd,resetIdCounter:Ztn,setEqual:R5e,some:Lx,stringify:ei,titleCase:rP,unique:Ch,uniqueId:O5e,vals:Ko,varName:Fi,version:wcn},Symbol.toStringTag,{value:"Module"}));function K9e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var xcn="vega-themes",Scn="2.15.0",Tcn="Themes for stylized Vega and Vega-Lite visualizations.",Ccn=["vega","vega-lite","themes","style"],Acn="BSD-3-Clause",Icn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},kcn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Rcn="build/vega-themes.js",Kse="build/vega-themes.module.js",Pcn="build/vega-themes.min.js",Ncn="build/vega-themes.min.js",Ocn="build/vega-themes.module.d.ts",Dcn={type:"git",url:"https://github.com/vega/vega-themes.git"},Mcn=["src","build"],$cn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},Lcn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},Fcn={vega:"*","vega-lite":"*"},jcn={},Bcn={name:xcn,version:Scn,description:Tcn,keywords:Ccn,license:Acn,author:Icn,contributors:kcn,main:Rcn,module:Kse,unpkg:Pcn,jsdelivr:Ncn,types:Ocn,repository:Dcn,files:Mcn,scripts:$cn,devDependencies:Lcn,peerDependencies:Fcn,dependencies:jcn};const Z_="#fff",qve="#888",zcn={background:"#333",view:{stroke:qve},title:{color:Z_,subtitleColor:Z_},style:{"guide-label":{fill:Z_},"guide-title":{fill:Z_}},axis:{domainColor:Z_,gridColor:qve,tickColor:Z_}},Dv="#4572a7",Ucn={background:"#fff",arc:{fill:Dv},area:{fill:Dv},line:{stroke:Dv,strokeWidth:2},path:{stroke:Dv},rect:{fill:Dv},shape:{stroke:Dv},symbol:{fill:Dv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Mv="#30a2da",Vz="#cbcbcb",Vcn="#999",Hcn="#333",Wve="#f0f0f0",Gve="#333",qcn={arc:{fill:Mv},area:{fill:Mv},axis:{domainColor:Vz,grid:!0,gridColor:Vz,gridWidth:1,labelColor:Vcn,labelFontSize:10,titleColor:Hcn,tickColor:Vz,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Wve,group:{fill:Wve},legend:{labelColor:Gve,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Gve,titleFontSize:14,titlePadding:10},line:{stroke:Mv,strokeWidth:2},path:{stroke:Mv,strokeWidth:.5},rect:{fill:Mv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Mv},bar:{binSpacing:2,fill:Mv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},$v="#000",Wcn={group:{fill:"#e5e5e5"},arc:{fill:$v},area:{fill:$v},line:{stroke:$v},path:{stroke:$v},rect:{fill:$v},shape:{stroke:$v},symbol:{fill:$v,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Gcn=22,Ycn="normal",Yve="Benton Gothic, sans-serif",Kve=11.5,Kcn="normal",Lv="#82c6df",Hz="Benton Gothic Bold, sans-serif",Xve="normal",Qve=13,yC={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Xcn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Hz,fontSize:Gcn,fontWeight:Ycn},arc:{fill:Lv},area:{fill:Lv},line:{stroke:Lv,strokeWidth:2},path:{stroke:Lv},rect:{fill:Lv},shape:{stroke:Lv},symbol:{fill:Lv,size:30},axis:{labelFont:Yve,labelFontSize:Kve,labelFontWeight:Kcn,titleFont:Hz,titleFontSize:Qve,titleFontWeight:Xve},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Yve,labelFontSize:Kve,symbolType:"square",titleFont:Hz,titleFontSize:Qve,titleFontWeight:Xve},range:{category:yC["category-6"],diverging:yC["fireandice-6"],heatmap:yC["fire-7"],ordinal:yC["fire-7"],ramp:yC["fire-7"]}},Fv="#ab5787",wO="#979797",Qcn={background:"#f9f9f9",arc:{fill:Fv},area:{fill:Fv},line:{stroke:Fv},path:{stroke:Fv},rect:{fill:Fv},shape:{stroke:Fv},symbol:{fill:Fv,size:30},axis:{domainColor:wO,domainWidth:.5,gridWidth:.2,labelColor:wO,tickColor:wO,tickWidth:.2,titleColor:wO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},jv="#3e5c69",Jcn={background:"#fff",arc:{fill:jv},area:{fill:jv},line:{stroke:jv},path:{stroke:jv},rect:{fill:jv},shape:{stroke:jv},symbol:{fill:jv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},wc="#1696d2",Jve="#000000",Zcn="#FFFFFF",EO="Lato",qz="Lato",edn="Lato",tdn="#DEDDDD",ndn=18,vC={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},rdn={background:Zcn,title:{anchor:"start",fontSize:ndn,font:EO},axisX:{domain:!0,domainColor:Jve,domainWidth:1,grid:!1,labelFontSize:12,labelFont:qz,labelAngle:0,tickColor:Jve,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:EO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:tdn,gridWidth:1,labelFontSize:12,labelFont:qz,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:EO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:qz,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:EO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:vC["six-groups-cat-1"],diverging:vC["diverging-colors"],heatmap:vC["diverging-colors"],ordinal:vC["six-groups-seq"],ramp:vC["shades-blue"]},area:{fill:wc},rect:{fill:wc},line:{color:wc,stroke:wc,strokeWidth:5},trail:{color:wc,stroke:wc,strokeWidth:0,size:1},path:{stroke:wc,strokeWidth:.5},point:{filled:!0},text:{font:edn,color:wc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:wc,stroke:null}},arc:{fill:wc},shape:{stroke:wc},symbol:{fill:wc,size:30}},Bv="#3366CC",Zve="#ccc",xO="Arial, sans-serif",idn={arc:{fill:Bv},area:{fill:Bv},path:{stroke:Bv},rect:{fill:Bv},shape:{stroke:Bv},symbol:{stroke:Bv},circle:{fill:Bv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:xO,fontSize:12},"guide-title":{font:xO,fontSize:12},"group-title":{font:xO,fontSize:12}},title:{font:xO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Zve,tickColor:Zve,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Xse=e=>e*(1/3+1),e1e=Xse(9),t1e=Xse(10),n1e=Xse(12),bC="Segoe UI",r1e="wf_standard-font, helvetica, arial, sans-serif",i1e="#252423",_C="#605E5C",s1e="transparent",sdn="#C8C6C4",Rd="#118DFF",odn="#12239E",adn="#E66C37",ldn="#6B007B",udn="#E044A7",cdn="#744EC2",ddn="#D9B300",fdn="#D64550",X9e=Rd,Q9e="#DEEFFF",o1e=[Q9e,X9e],hdn=[Q9e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",X9e],pdn={view:{stroke:s1e},background:s1e,font:bC,header:{titleFont:r1e,titleFontSize:n1e,titleColor:i1e,labelFont:bC,labelFontSize:t1e,labelColor:_C},axis:{ticks:!1,grid:!1,domain:!1,labelColor:_C,labelFontSize:e1e,titleFont:r1e,titleColor:i1e,titleFontSize:n1e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:sdn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Rd},line:{stroke:Rd,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:bC,fontSize:e1e,fill:_C},arc:{fill:Rd},area:{fill:Rd,line:!0,opacity:.6},path:{stroke:Rd},rect:{fill:Rd},point:{fill:Rd,filled:!0,size:75},shape:{stroke:Rd},symbol:{fill:Rd,strokeWidth:1.5,size:50},legend:{titleFont:bC,titleFontWeight:"bold",titleColor:_C,labelFont:bC,labelFontSize:t1e,labelColor:_C,symbolType:"circle",symbolSize:75},range:{category:[Rd,odn,adn,ldn,udn,cdn,ddn,fdn],diverging:o1e,heatmap:o1e,ordinal:hdn}},Wz='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',mdn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Gz=400,SO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},gdn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],ydn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function D5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=SO.gridBg[e],i=SO.textPrimary[e],s=SO.textSecondary[e],o=n==="dark"?gdn:ydn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Wz,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:mdn,labelFontWeight:Gz,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:SO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Wz,fill:s,fontWeight:Gz},"guide-title":{font:Wz,fill:s,fontWeight:Gz}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const vdn=D5({theme:"white",background:"#ffffff"}),bdn=D5({theme:"g10",background:"#f4f4f4"}),_dn=D5({theme:"g90",background:"#262626"}),wdn=D5({theme:"g100",background:"#161616"}),Edn=Bcn.version,xdn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:bdn,carbong100:wdn,carbong90:_dn,carbonwhite:vdn,dark:zcn,excel:Ucn,fivethirtyeight:qcn,ggplot2:Wcn,googlecharts:idn,latimes:Xcn,powerbi:pdn,quartz:Qcn,urbaninstitute:rdn,version:Edn,vox:Jcn},Symbol.toStringTag,{value:"Module"}));function Sdn(e,t,n,r){if(We(e))return`[${e.map(i=>t(Et(i)?i:a1e(i,n))).join(", ")}]`;if(bt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const l=Object.keys(a);if(l.length>0){i+="<table>";for(const u of l){let c=a[u];c!==void 0&&(bt(c)&&(c=a1e(c,n)),i+=`<tr><td class="key">${t(u)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Tdn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function a1e(e,t){return JSON.stringify(e,Tdn(t))}var Cdn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const J9e="vg-tooltip-element",Adn={offsetX:10,offsetY:10,id:J9e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Idn,maxDepth:2,formatTooltip:Sdn,baseURL:""};function Idn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function kdn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Cdn.toString().replace(J9e,e)}function Rdn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Pdn{constructor(t){this.options={...Adn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=kdn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Rdn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var Yz={};function Ndn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class Odn{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var Ddn=Odn;const Mdn=Object.freeze({loose:!0}),$dn=Object.freeze({}),Ldn=e=>e?typeof e!="object"?Mdn:e:$dn;var Qse=Ldn,UW={exports:{}};const Fdn="2.0.0",Z9e=256,jdn=Number.MAX_SAFE_INTEGER||9007199254740991,Bdn=16,zdn=Z9e-6,Udn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Jse={MAX_LENGTH:Z9e,MAX_SAFE_COMPONENT_LENGTH:Bdn,MAX_SAFE_BUILD_LENGTH:zdn,MAX_SAFE_INTEGER:jdn,RELEASE_TYPES:Udn,SEMVER_SPEC_VERSION:Fdn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Vdn=typeof process=="object"&&Yz&&Yz.NODE_DEBUG&&/\bsemver\b/i.test(Yz.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var M5=Vdn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Jse,s=M5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],l=t.src=[],u=t.t={};let c=0;const d="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",i],[d,r]],h=m=>{for(const[g,y]of f)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const b=h(g),_=c++;s(m,_,g),u[m]=_,l[_]=g,o[_]=new RegExp(g,y?"g":void 0),a[_]=new RegExp(b,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${d}*`),p("MAINVERSION",`(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})\\.(${l[u.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})\\.(${l[u.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${l[u.NUMERICIDENTIFIER]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${l[u.NUMERICIDENTIFIERLOOSE]}|${l[u.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${l[u.PRERELEASEIDENTIFIER]}(?:\\.${l[u.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${l[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[u.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${d}+`),p("BUILD",`(?:\\+(${l[u.BUILDIDENTIFIER]}(?:\\.${l[u.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${l[u.MAINVERSION]}${l[u.PRERELEASE]}?${l[u.BUILD]}?`),p("FULL",`^${l[u.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${l[u.MAINVERSIONLOOSE]}${l[u.PRERELEASELOOSE]}?${l[u.BUILD]}?`),p("LOOSE",`^${l[u.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${l[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${l[u.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:\\.(${l[u.XRANGEIDENTIFIER]})(?:${l[u.PRERELEASE]})?${l[u.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[u.XRANGEIDENTIFIERLOOSE]})(?:${l[u.PRERELEASELOOSE]})?${l[u.BUILD]}?)?)?`),p("XRANGE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${l[u.GTLT]}\\s*${l[u.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${l[u.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",l[u.COERCEPLAIN]+`(?:${l[u.PRERELEASE]})?(?:${l[u.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",l[u.COERCE],!0),p("COERCERTLFULL",l[u.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${l[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${l[u.LONETILDE]}${l[u.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${l[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${l[u.LONECARET]}${l[u.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${l[u.LONECARET]}${l[u.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${l[u.GTLT]}\\s*(${l[u.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${l[u.GTLT]}\\s*(${l[u.LOOSEPLAIN]}|${l[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${l[u.XRANGEPLAIN]})\\s+-\\s+(${l[u.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${l[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[u.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(UW,UW.exports);var Zse=UW.exports;const l1e=/^[0-9]+$/,eze=(e,t)=>{const n=l1e.test(e),r=l1e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Hdn=(e,t)=>eze(t,e);var qdn={compareIdentifiers:eze,rcompareIdentifiers:Hdn};const TO=M5,{MAX_LENGTH:u1e,MAX_SAFE_INTEGER:CO}=Jse,{safeRe:c1e,t:d1e}=Zse,Wdn=Qse,{compareIdentifiers:ew}=qdn;let Gdn=class Zf{constructor(t,n){if(n=Wdn(n),t instanceof Zf){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>u1e)throw new TypeError(`version is longer than ${u1e} characters`);TO("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?c1e[d1e.LOOSE]:c1e[d1e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>CO||this.major<0)throw new TypeError("Invalid major version");if(this.minor>CO||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>CO||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<CO)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(TO("SemVer.compare",this.version,this.options,t),!(t instanceof Zf)){if(typeof t=="string"&&t===this.version)return 0;t=new Zf(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Zf||(t=new Zf(t,this.options)),ew(this.major,t.major)||ew(this.minor,t.minor)||ew(this.patch,t.patch)}comparePre(t){if(t instanceof Zf||(t=new Zf(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(TO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ew(r,i)}while(++n)}compareBuild(t){t instanceof Zf||(t=new Zf(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(TO("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return ew(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),ew(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var eoe=Gdn;const f1e=eoe,Ydn=(e,t,n)=>new f1e(e,n).compare(new f1e(t,n));var hT=Ydn;const Kdn=hT,Xdn=(e,t,n)=>Kdn(e,t,n)===0;var Qdn=Xdn;const Jdn=hT,Zdn=(e,t,n)=>Jdn(e,t,n)!==0;var efn=Zdn;const tfn=hT,nfn=(e,t,n)=>tfn(e,t,n)>0;var rfn=nfn;const ifn=hT,sfn=(e,t,n)=>ifn(e,t,n)>=0;var ofn=sfn;const afn=hT,lfn=(e,t,n)=>afn(e,t,n)<0;var ufn=lfn;const cfn=hT,dfn=(e,t,n)=>cfn(e,t,n)<=0;var ffn=dfn;const hfn=Qdn,pfn=efn,mfn=rfn,gfn=ofn,yfn=ufn,vfn=ffn,bfn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return hfn(e,n,r);case"!=":return pfn(e,n,r);case">":return mfn(e,n,r);case">=":return gfn(e,n,r);case"<":return yfn(e,n,r);case"<=":return vfn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var _fn=bfn,Kz,h1e;function wfn(){if(h1e)return Kz;h1e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,d){if(d=n(d),c instanceof t){if(c.loose===!!d.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,d),this.options=d,this.loose=!!d.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=c.match(d);if(!f)throw new TypeError(`Invalid comparator: ${c}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,d){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(c.value,d).test(this.value):c.operator===""?c.value===""?!0:new l(this.value,d).test(c.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,d)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,d)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}Kz=t;const n=Qse,{safeRe:r,t:i}=Zse,s=_fn,o=M5,a=eoe,l=tze();return Kz}var Xz,p1e;function tze(){if(p1e)return Xz;p1e=1;class e{constructor($,D){if(D=r(D),$ instanceof e)return $.loose===!!D.loose&&$.includePrerelease===!!D.includePrerelease?$:new e($.raw,D);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&f)|(this.options.loose&&h))+":"+$,B=n.get(M);if(B)return B;const z=this.options.loose,U=z?a[l.HYPHENRANGELOOSE]:a[l.HYPHENRANGE];$=$.replace(U,P(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[l.COMPARATORTRIM],u),s("comparator trim",$),$=$.replace(a[l.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[l.CARETTRIM],d),s("caret trim",$);let O=$.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>R(H,this.options));z&&(O=O.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(a[l.COMPARATORLOOSE])))),s("range list",O);const V=new Map,W=O.map(H=>new i(H,this.options));for(const H of W){if(p(H))return[H];V.set(H.value,H)}V.size>1&&V.has("")&&V.delete("");const j=[...V.values()];return n.set(M,j),j}intersects($,D){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,D)&&$.set.some(B=>g(B,D)&&M.every(z=>B.every(U=>z.intersects(U,D)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(L(this.set[D],$,this.options))return!0;return!1}}Xz=e;const t=Ddn,n=new t,r=Qse,i=wfn(),s=M5,o=eoe,{safeRe:a,t:l,comparatorTrimReplace:u,tildeTrimReplace:c,caretTrimReplace:d}=Zse,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:h}=Jse,p=k=>k.value==="<0.0.0-0",m=k=>k.value==="",g=(k,$)=>{let D=!0;const M=k.slice();let B=M.pop();for(;D&&M.length;)D=M.every(z=>B.intersects(z,$)),B=M.pop();return D},y=(k,$)=>(s("comp",k,$),k=E(k,$),s("caret",k),k=_(k,$),s("tildes",k),k=S(k,$),s("xrange",k),k=A(k,$),s("stars",k),k),b=k=>!k||k.toLowerCase()==="x"||k==="*",_=(k,$)=>k.trim().split(/\s+/).map(D=>w(D,$)).join(" "),w=(k,$)=>{const D=$.loose?a[l.TILDELOOSE]:a[l.TILDE];return k.replace(D,(M,B,z,U,O)=>{s("tilde",k,M,B,z,U,O);let V;return b(B)?V="":b(z)?V=`>=${B}.0.0 <${+B+1}.0.0-0`:b(U)?V=`>=${B}.${z}.0 <${B}.${+z+1}.0-0`:O?(s("replaceTilde pr",O),V=`>=${B}.${z}.${U}-${O} <${B}.${+z+1}.0-0`):V=`>=${B}.${z}.${U} <${B}.${+z+1}.0-0`,s("tilde return",V),V})},E=(k,$)=>k.trim().split(/\s+/).map(D=>x(D,$)).join(" "),x=(k,$)=>{s("caret",k,$);const D=$.loose?a[l.CARETLOOSE]:a[l.CARET],M=$.includePrerelease?"-0":"";return k.replace(D,(B,z,U,O,V)=>{s("caret",k,B,z,U,O,V);let W;return b(z)?W="":b(U)?W=`>=${z}.0.0${M} <${+z+1}.0.0-0`:b(O)?z==="0"?W=`>=${z}.${U}.0${M} <${z}.${+U+1}.0-0`:W=`>=${z}.${U}.0${M} <${+z+1}.0.0-0`:V?(s("replaceCaret pr",V),z==="0"?U==="0"?W=`>=${z}.${U}.${O}-${V} <${z}.${U}.${+O+1}-0`:W=`>=${z}.${U}.${O}-${V} <${z}.${+U+1}.0-0`:W=`>=${z}.${U}.${O}-${V} <${+z+1}.0.0-0`):(s("no pr"),z==="0"?U==="0"?W=`>=${z}.${U}.${O}${M} <${z}.${U}.${+O+1}-0`:W=`>=${z}.${U}.${O}${M} <${z}.${+U+1}.0-0`:W=`>=${z}.${U}.${O} <${+z+1}.0.0-0`),s("caret return",W),W})},S=(k,$)=>(s("replaceXRanges",k,$),k.split(/\s+/).map(D=>C(D,$)).join(" ")),C=(k,$)=>{k=k.trim();const D=$.loose?a[l.XRANGELOOSE]:a[l.XRANGE];return k.replace(D,(M,B,z,U,O,V)=>{s("xRange",k,M,B,z,U,O,V);const W=b(z),j=W||b(U),H=j||b(O),G=H;return B==="="&&G&&(B=""),V=$.includePrerelease?"-0":"",W?B===">"||B==="<"?M="<0.0.0-0":M="*":B&&G?(j&&(U=0),O=0,B===">"?(B=">=",j?(z=+z+1,U=0,O=0):(U=+U+1,O=0)):B==="<="&&(B="<",j?z=+z+1:U=+U+1),B==="<"&&(V="-0"),M=`${B+z}.${U}.${O}${V}`):j?M=`>=${z}.0.0${V} <${+z+1}.0.0-0`:H&&(M=`>=${z}.${U}.0${V} <${z}.${+U+1}.0-0`),s("xRange return",M),M})},A=(k,$)=>(s("replaceStars",k,$),k.trim().replace(a[l.STAR],"")),R=(k,$)=>(s("replaceGTE0",k,$),k.trim().replace(a[$.includePrerelease?l.GTE0PRE:l.GTE0],"")),P=k=>($,D,M,B,z,U,O,V,W,j,H,G)=>(b(M)?D="":b(B)?D=`>=${M}.0.0${k?"-0":""}`:b(z)?D=`>=${M}.${B}.0${k?"-0":""}`:U?D=`>=${D}`:D=`>=${D}${k?"-0":""}`,b(W)?V="":b(j)?V=`<${+W+1}.0.0-0`:b(H)?V=`<${W}.${+j+1}.0-0`:G?V=`<=${W}.${j}.${H}-${G}`:k?V=`<${W}.${j}.${+H+1}-0`:V=`<=${V}`,`${D} ${V}`.trim()),L=(k,$,D)=>{for(let M=0;M<k.length;M++)if(!k[M].test($))return!1;if($.prerelease.length&&!D.includePrerelease){for(let M=0;M<k.length;M++)if(s(k[M].semver),k[M].semver!==i.ANY&&k[M].semver.prerelease.length>0){const B=k[M].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return Xz}const Efn=tze(),xfn=(e,t,n)=>{try{t=new Efn(t,n)}catch{return!1}return t.test(e)};var Sfn=xfn,nze=Ndn(Sfn);function Tfn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function l(c){c.source===r&&(a=0,e.removeEventListener("message",l,!1))}e.addEventListener("message",l,!1);function u(){a<=0||(r.postMessage(n,o),setTimeout(u,s),a-=1)}setTimeout(u,s)}var Cfn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function rze(e,...t){for(const n of t)Afn(e,n);return e}function Afn(e,t){for(const n of Object.keys(t))KS(e,n,t[n],!0)}const Od=mtn;let hk=Ecn;const AO=typeof window<"u"?window:void 0;var b1e;hk===void 0&&((b1e=AO==null?void 0:AO.vl)!=null&&b1e.compile)&&(hk=AO.vl);const Ifn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},kfn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},v2={vega:"Vega","vega-lite":"Vega-Lite"},RL={vega:Od.version,"vega-lite":hk?hk.version:"not available"},Rfn={vega:e=>e,"vega-lite":(e,t)=>hk.compile(e,{config:t}).spec},Pfn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Nfn="chart-wrapper";function Ofn(e){return typeof e=="function"}function m1e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${v2[r]} JSON Source`}function Dfn(e,t){if(e.$schema){const n=K9e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${v2[n.library]}, but mode argument sets ${v2[t]??t}.`);const r=n.library;return nze(RL[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${v2[r]} ${n.version}, but the current version of ${v2[r]} is v${RL[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function ize(e){return!!(e&&"load"in e)}function g1e(e){return ize(e)?e:Od.loader(e)}function Mfn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return Et(t.defaultStyle)&&(t.defaultStyle=!1),t}async function $fn(e,t,n={}){let r,i;Et(t)?(i=g1e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Mfn(r),o=s.loader;(!i||o)&&(i=g1e(n.loader??o));const a=await y1e(s,i),l=await y1e(n,i),u={...rze(l,a),config:YS(l.config??{},a.config??{})};return await Ffn(e,r,u,i)}async function y1e(e,t){const n=Et(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=Et(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Lfn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Ffn(e,t,n={},r){const i=n.theme?YS(xdn[n.theme],n.config??{}):n.config,s=lv(n.actions)?n.actions:rze({},Ifn,n.actions??{}),o={...kfn,...n.i18n},a=n.renderer??"canvas",l=n.logLevel??Od.Warn,u=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:x,rootContainer:S}=Lfn(c);if(!x.getElementById(E)){const C=document.createElement("style");C.id=E,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Cfn.toString():n.defaultStyle,S.appendChild(C)}}const d=Dfn(t,n.mode);let f=Rfn[d](t,i);if(d==="vega-lite"&&f.$schema){const E=K9e(f.$schema);nze(RL.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${RL.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Nfn),c.appendChild(E),h=E}const p=n.patch;if(p&&(f=p instanceof Function?p(f):K4(f,p,!0,!1).newDocument),n.formatLocale&&Od.formatLocale(n.formatLocale),n.timeFormatLocale&&Od.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const x=n.expressionFunctions[E];"fn"in x?Od.expressionFunction(E,x.fn,x.visitor):x instanceof Function&&Od.expressionFunction(E,x)}const{ast:m}=n,g=Od.parse(f,d==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||Od.View)(g,{loader:r,logLevel:l,renderer:a,...m?{expr:Od.expressionInterpreter??n.expr??Ttn}:{}});if(y.addSignalListener("autosize",(E,x)=>{const{type:S}=x;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:x}=n,S=E&&!ize(E)?E==null?void 0:E.baseURL:void 0,C=Ofn(x)?x:new Pdn({baseURL:S,...x===!0?{}:x}).call;y.tooltip(C)}let{hover:b}=n;if(b===void 0&&(b=d==="vega"),b){const{hoverSet:E,updateSet:x}=typeof b=="boolean"?{}:b;y.hover(E,x)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let _;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const C=document.createElement("summary");C.innerHTML=Pfn,S.append(C),_=A=>{S.contains(A.target)||S.removeAttribute("open")},document.addEventListener("click",_)}const x=document.createElement("div");if(E.append(x),x.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const C=o[`${S.toUpperCase()}_ACTION`],A=document.createElement("a"),R=bt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${u}.${S}`,A.addEventListener("mousedown",async function(P){P.preventDefault();const L=await y.toImageURL(S,R);this.href=L}),x.append(A)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){m1e(ez(t),n.sourceHeader??"",n.sourceFooter??"",d),C.preventDefault()}),x.append(S)}if(d==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){m1e(ez(f),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),x.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){Tfn(window,S,{config:i,mode:p?"vega":d,renderer:a,spec:ez(p?f:t)}),A.preventDefault()}),x.append(C)}}function w(){_&&document.removeEventListener("click",_),y.finalize()}return{view:y,spec:t,vgSpec:f,finalize:w,embedOptions:n}}function jfn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Bfn(e,t,n){n&&(jfn(n)?n(e.data(t)):e.change(t,Od.changeset().remove(()=>!0).insert(n)))}function zfn(e,t){Object.keys(t).forEach(n=>{Bfn(e,n,t[n])})}function sze(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const oze=()=>{};function Qz(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function Ufn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=sze([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!KO(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function v1e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Jz(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function b2(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class aze extends ls.PureComponent{constructor(){super(...arguments),b2(this,"containerRef",ls.createRef()),b2(this,"resultPromise",void 0),b2(this,"handleError",t=>{const{onError:n=oze}=this.props;n(t,this.containerRef.current),console.warn(t)}),b2(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=sze([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=Ufn(Jz(this.props),Jz(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!hq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&v1e(a,s),i&&Qz(a,i)),a.run()})}else hq(i,s)||this.modifyView(o=>{s&&v1e(o,s),i&&Qz(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=Jz(this.props);this.resultPromise=$fn(this.containerRef.current,a,o).then(l=>{if(l){const{view:u}=l;Qz(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return ls.createElement("div",{ref:this.containerRef,className:t,style:n})}}b2(aze,"propTypes",{className:Age.string,onError:Age.func});function VW(){return VW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VW.apply(this,arguments)}function HW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Vfn={};class lze extends ls.PureComponent{constructor(){super(...arguments),HW(this,"vegaEmbed",ls.createRef()),HW(this,"handleNewView",t=>{this.update();const{onNewView:n=oze}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){hq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{zfn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return ls.createElement(aze,VW({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}HW(lze,"defaultProps",{data:Vfn});function qW(){return qW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qW.apply(this,arguments)}function Hfn(e){return ls.createElement(lze,qW({},e,{mode:"vega-lite"}))}function qfn(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function Wfn(e){const{studyId:t,allParticipants:n,config:r}=e,i=hc(),[s,o]=_k(),a=n.filter(_=>_.completed).map(_=>Math.max(...Object.values(_.answers).map(w=>w.endTime).filter(w=>w!==void 0))).filter(_=>Number.isFinite(_)),[l,u]=I.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,d,f,h]=I.useMemo(()=>{const _=n.filter(x=>!x.rejected&&x.completed),w=n.filter(x=>!x.rejected&&!x.completed),E=n.filter(x=>x.rejected);return[_,w,E,_.filter(x=>qfn(x.answers,l))]},[n,l]),p=I.useMemo(()=>{var _,w;return h.length>0?[{Date:(_=l[0])==null?void 0:_.getTime(),Participants:0},...h.map(E=>Math.max(...Object.values(E.answers).map(x=>x.endTime).flat())).sort((E,x)=>E-x).map((E,x)=>({Date:E,Participants:x})),{Date:(w=l[1])==null?void 0:w.getTime(),Participants:h.length}]:[]},[h,l]),m=I.useMemo(()=>{var _,w;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(_=l[0])==null?void 0:_.getTime(),(w=l[1])==null?void 0:w.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,l,p]),[g,{close:y,open:b}]=N1(!1);return v.jsx(Of,{children:v.jsxs(Ub,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[v.jsxs(Ct,{align:"center",mb:"xs",justify:"space-between",children:[v.jsxs(Ct,{direction:"row",align:"center",children:[v.jsx(xi,{order:5,children:t}),v.jsx(C3e,{completed:c.length,inProgress:d.length,rejected:f.length,filteredCompleted:h.length})]}),v.jsxs(Ln,{children:[v.jsx(T3e,{allParticipants:n,studyId:t}),v.jsxs(hn,{opened:g,children:[v.jsx(hn.Target,{children:v.jsx(xn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:b,onMouseLeave:y,px:4,children:v.jsx(Wet,{})})}),v.jsx(hn.Dropdown,{children:v.jsx(Xe,{children:"Analyze and manage study data"})})]})]})]}),v.jsx(lte,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:l,onChange:u}),p.length>0?v.jsxs(v.Fragment,{children:[v.jsx(Xe,{mt:16,children:"Finished Participants"}),v.jsx(Hfn,{spec:m,actions:!1})]}):v.jsx(ge,{h:293.4,children:v.jsx(Ju,{style:{height:"100%"},children:v.jsx(Xe,{children:"Not enough participants for chart"})})})]})})}function Gfn(e){const{globalConfig:t}=e,[n,r]=I.useState(!1),[i,s]=I.useState({}),[o,a]=I.useState({}),[l,u]=I.useState({}),{storageEngine:c}=ki(),{user:d}=_p();I.useEffect(()=>{(async()=>{r(!0);const p={},m={},g={},y=async _=>{const w=await N4(_,t);if(c){if(p[_]=await c.getAllParticipantsDataByStudy(_),w===null)return;if(m[_]=w,c instanceof Pc){const E=await c.getModes(_);g[_]=E.analyticsInterfacePubliclyAccessible}}};await(async()=>{const _=t.configsList.map(w=>y(w));try{await Promise.all(_),s(p),a(m),u(g)}catch(w){console.error("Error fetching data:",w)}finally{r(!1)}})()})()},[t,c]);const f=t.configsList.map(h=>i[h]&&(l[h]||d.isAdmin?v.jsx(rl.Col,{span:{md:12,xl:6},children:v.jsx(Wfn,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return v.jsxs(ge,{children:[v.jsx(xi,{mb:20,order:4,children:"Your Studies:"}),v.jsxs(rl,{children:[f.length>0?f:v.jsx(Of,{mt:100,children:v.jsx(Xe,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),v.jsx(su,{visible:n})]})]})}function Yfn({globalConfig:e}){return v.jsxs(Ir,{children:[v.jsx(cA,{studyIds:e.configsList}),v.jsx(Ir.Main,{children:v.jsx(Of,{fluid:!0,children:v.jsx(Gfn,{globalConfig:e})})})]})}function Kfn(){const{user:e,triggerAuth:t}=_p(),{storageEngine:n}=ki(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,l]=I.useState(!1),[u,c]=I.useState(!1),[d,f]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(""),[y,b]=I.useState(null),_=l2e({initialValues:{email:""},validate:{email:k0t("Invalid email")}});I.useEffect(()=>{(async()=>{if(l(!0),n instanceof Pc){const P=await(n==null?void 0:n.getUserManagementData("authentication"));i(P==null?void 0:P.isEnabled);const L=await(n==null?void 0:n.getUserManagementData("adminUsers"));L&&L.adminUsersList&&o(L==null?void 0:L.adminUsersList.map(k=>k.email))}else i(!1);l(!1)})()},[n]);const w=async()=>{if(l(!0),n instanceof Pc){const R=await U$e(n,l);R&&R.email&&b({email:R.email,uid:R.uid}),p(!0)}l(!1)},E=async R=>{l(!0),n instanceof Pc&&R&&(await n.changeAuth(!0),await n.addAdminUser(R),o([R.email]),i(!0),t()),p(!1),l(!1)},x=async()=>{if(l(!0),n instanceof Pc){await n.addAdminUser({email:_.values.email,uid:null});const R=await n.getUserManagementData("adminUsers");o(R==null?void 0:R.adminUsersList.map(P=>P.email))}l(!1),c(!1),_.setValues({email:""})},S=R=>{f(!0),g(R)},C=async()=>{if(l(!0),n instanceof Pc){await n.removeAdminUser(m);const R=await n.getUserManagementData("adminUsers");o(R==null?void 0:R.adminUsersList.map(P=>P.email))}f(!1),l(!1)},A=I.useMemo(()=>n instanceof Pc,[n]);return v.jsxs(v.Fragment,{children:[v.jsx(Of,{children:v.jsxs(Ub,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[v.jsx(xi,{mb:20,order:3,children:"Authentication"}),r?v.jsx(Ct,{children:v.jsx(Xe,{children:"Authentication is enabled."})}):v.jsxs(Ct,{justify:"space-between",children:[v.jsx(ge,{children:v.jsx(Xe,{children:"Authentication is currently disabled."})}),v.jsx(on,{label:"You can only enable auth when using Firebase",disabled:A,children:v.jsx(xn,{onClick:R=>A?w():R.preventDefault(),color:"green","data-disabled":A?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?v.jsxs(Ct,{mt:40,direction:"column",children:[v.jsxs(Ct,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[v.jsx(xi,{order:6,children:"Enabled Users"}),v.jsx(JK,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(R=>{var P;return v.jsxs(Ct,{justify:"space-between",mb:10,children:[v.jsx(Xe,{children:R}),R===((P=e.user)==null?void 0:P.email)?v.jsx(Xe,{color:"blue",size:"xs",children:"You"}):v.jsx(Bn,{variant:"subtle",onClick:()=>S(R),children:v.jsx(qxe,{color:"red"})})]},R)}):null]}):null]})}),v.jsx(xs,{opened:u,onClose:()=>c(!1),title:"Add Admin User",children:v.jsxs(ge,{component:"form",onSubmit:_.onSubmit(()=>x()),children:[v.jsx(of,{leftSection:v.jsx(Fet,{}),placeholder:"User Gmail Account",..._.getInputProps("email")}),v.jsxs(Ct,{mt:30,justify:"right",children:[v.jsx(xn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),v.jsx(xn,{type:"submit",children:"Save"})]})]})}),v.jsxs(xs,{opened:d,size:"large",onClose:()=>f(!1),title:v.jsxs(Xe,{fw:700,children:["Remove",m,"?"]}),children:[v.jsxs(Xe,{mt:40,children:["Are you sure you want to remove",v.jsx("b",{children:m})," ","as an administrator?"]}),v.jsxs(Ct,{mt:40,justify:"right",children:[v.jsx(xn,{mr:5,variant:"subtle",color:"red",onClick:()=>f(!1),children:"Cancel"}),v.jsx(xn,{onClick:()=>C(),children:"Yes, I'm sure."})]})]}),v.jsxs(xs,{opened:h,size:"md",onClose:()=>f(!1),title:v.jsx(Xe,{fw:700,children:"Enable Authentication?"}),children:[v.jsxs(Xe,{mt:40,children:["User"," ",v.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),v.jsxs(Ct,{mt:40,justify:"right",children:[v.jsx(xn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),v.jsx(xn,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),v.jsx(su,{visible:a})]})}class Xfn extends m3e{constructor(){super("localStorage");Cl(this,"studyDatabase");Cl(this,"studyId")}saveAllParticipantAndTaskTags(n){throw new Error("Method not implemented.")}getAllParticipantAndTaskTags(){throw new Error("Method not implemented.")}saveTags(n){throw new Error("Method not implemented.")}getTags(){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r,i,s){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await yw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await D$(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var d;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const l=await this.getModes(n),u=await D$(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:u,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return l.dataCollectionEnabled&&await((d=this.studyDatabase)==null?void 0:d.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await yw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=kI();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=yw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=kI();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await yw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await yw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function Qfn(){let e,t=!1;{const n=new Pc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new Xfn;await n.connect(),e=n}return e}async function Jfn(){const t=await(await fetch(`${dd}global.json`)).text();return r0t(t)}function Zfn(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await ijt(e))}a()},[e]),I.useEffect(()=>{e||Jfn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=ki();I.useEffect(()=>{if(i!==void 0)return;async function a(){const l=await Qfn();s(l)}a()},[s,i]);const o=async a=>i instanceof Pc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?v.jsx(_et,{basename:dd,children:v.jsx(k4t,{children:v.jsx(Ret,{children:v.jsx(Ir,{padding:"md",header:{height:70},children:v.jsxs(fet,{children:[v.jsx(Bp,{path:"/",element:v.jsxs(v.Fragment,{children:[v.jsx(cA,{studyIds:e.configsList}),v.jsx(dut,{globalConfig:e,studyConfigs:n})]})}),v.jsx(Bp,{path:"/:studyId/*",element:v.jsx(ojt,{globalConfig:e})}),v.jsx(Bp,{path:"/analysis/dashboard",element:v.jsx(Yfn,{globalConfig:e})}),v.jsx(Bp,{path:"/analysis",element:v.jsx(sq,{to:"/analysis/dashboard"})}),v.jsx(Bp,{path:"/analysis/stats/:studyId/:tab",element:v.jsx(Cge,{paramToCheck:"studyId",paramCallback:o,children:v.jsx(u9t,{globalConfig:e})})}),v.jsx(Bp,{path:"/analysis/stats/:studyId",element:v.jsx(sq,{to:"./table",replace:!0})}),v.jsx(Bp,{path:"/settings",element:v.jsx(Ir,{children:v.jsxs(Cge,{children:[v.jsx(cA,{studyIds:e.configsList}),v.jsx(Ir.Main,{children:v.jsx(Kfn,{})})]})})}),v.jsx(Bp,{path:"/login",element:v.jsxs(Ir,{children:[v.jsx(cA,{studyIds:e.configsList}),v.jsx(Ir.Main,{children:v.jsx(c9t,{})})]})})]})})})})}):null}Zz.createRoot(document.getElementById("root")).render(v.jsx(ls.StrictMode,{children:v.jsx(EZe,{children:v.jsx(twe,{children:v.jsx(Zfn,{})})})}))});export default ehn();
