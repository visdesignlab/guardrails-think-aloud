var cFe=Object.defineProperty;var fFe=(e,t,n)=>t in e?cFe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var dFe=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var tl=(e,t,n)=>(fFe(e,typeof t!="symbol"?t+"":t,n),n);var men=dFe((Ttn,Lne)=>{function hFe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ks=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function pFe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var hge={exports:{}},oM={},pge={exports:{}},Pn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cI=Symbol.for("react.element"),mFe=Symbol.for("react.portal"),gFe=Symbol.for("react.fragment"),yFe=Symbol.for("react.strict_mode"),vFe=Symbol.for("react.profiler"),bFe=Symbol.for("react.provider"),_Fe=Symbol.for("react.context"),wFe=Symbol.for("react.forward_ref"),EFe=Symbol.for("react.suspense"),xFe=Symbol.for("react.memo"),SFe=Symbol.for("react.lazy"),nre=Symbol.iterator;function TFe(e){return e===null||typeof e!="object"?null:(e=nre&&e[nre]||e["@@iterator"],typeof e=="function"?e:null)}var mge={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gge=Object.assign,yge={};function dx(e,t,n){this.props=e,this.context=t,this.refs=yge,this.updater=n||mge}dx.prototype.isReactComponent={};dx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};dx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function vge(){}vge.prototype=dx.prototype;function mH(e,t,n){this.props=e,this.context=t,this.refs=yge,this.updater=n||mge}var gH=mH.prototype=new vge;gH.constructor=mH;gge(gH,dx.prototype);gH.isPureReactComponent=!0;var rre=Array.isArray,bge=Object.prototype.hasOwnProperty,yH={current:null},_ge={key:!0,ref:!0,__self:!0,__source:!0};function wge(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)bge.call(t,r)&&!_ge.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:cI,type:e,key:s,ref:o,props:i,_owner:yH.current}}function CFe(e,t){return{$$typeof:cI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function vH(e){return typeof e=="object"&&e!==null&&e.$$typeof===cI}function AFe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var ire=/\/+/g;function GF(e,t){return typeof e=="object"&&e!==null&&e.key!=null?AFe(""+e.key):t.toString(36)}function uD(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case cI:case mFe:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+GF(o,0):r,rre(i)?(n="",e!=null&&(n=e.replace(ire,"$&/")+"/"),uD(i,t,n,"",function(l){return l})):i!=null&&(vH(i)&&(i=CFe(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(ire,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",rre(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+GF(s,a);o+=uD(s,t,n,u,i)}else if(u=TFe(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+GF(s,a++),o+=uD(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function bR(e,t,n){if(e==null)return e;var r=[],i=0;return uD(e,r,"","",function(s){return t.call(n,s,i++)}),r}function IFe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Qa={current:null},lD={transition:null},kFe={ReactCurrentDispatcher:Qa,ReactCurrentBatchConfig:lD,ReactCurrentOwner:yH};function Ege(){throw Error("act(...) is not supported in production builds of React.")}Pn.Children={map:bR,forEach:function(e,t,n){bR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bR(e,function(){t++}),t},toArray:function(e){return bR(e,function(t){return t})||[]},only:function(e){if(!vH(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Pn.Component=dx;Pn.Fragment=gFe;Pn.Profiler=vFe;Pn.PureComponent=mH;Pn.StrictMode=yFe;Pn.Suspense=EFe;Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kFe;Pn.act=Ege;Pn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=gge({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=yH.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)bge.call(t,u)&&!_ge.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:cI,type:e.type,key:i,ref:s,props:r,_owner:o}};Pn.createContext=function(e){return e={$$typeof:_Fe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:bFe,_context:e},e.Consumer=e};Pn.createElement=wge;Pn.createFactory=function(e){var t=wge.bind(null,e);return t.type=e,t};Pn.createRef=function(){return{current:null}};Pn.forwardRef=function(e){return{$$typeof:wFe,render:e}};Pn.isValidElement=vH;Pn.lazy=function(e){return{$$typeof:SFe,_payload:{_status:-1,_result:e},_init:IFe}};Pn.memo=function(e,t){return{$$typeof:xFe,type:e,compare:t===void 0?null:t}};Pn.startTransition=function(e){var t=lD.transition;lD.transition={};try{e()}finally{lD.transition=t}};Pn.unstable_act=Ege;Pn.useCallback=function(e,t){return Qa.current.useCallback(e,t)};Pn.useContext=function(e){return Qa.current.useContext(e)};Pn.useDebugValue=function(){};Pn.useDeferredValue=function(e){return Qa.current.useDeferredValue(e)};Pn.useEffect=function(e,t){return Qa.current.useEffect(e,t)};Pn.useId=function(){return Qa.current.useId()};Pn.useImperativeHandle=function(e,t,n){return Qa.current.useImperativeHandle(e,t,n)};Pn.useInsertionEffect=function(e,t){return Qa.current.useInsertionEffect(e,t)};Pn.useLayoutEffect=function(e,t){return Qa.current.useLayoutEffect(e,t)};Pn.useMemo=function(e,t){return Qa.current.useMemo(e,t)};Pn.useReducer=function(e,t,n){return Qa.current.useReducer(e,t,n)};Pn.useRef=function(e){return Qa.current.useRef(e)};Pn.useState=function(e){return Qa.current.useState(e)};Pn.useSyncExternalStore=function(e,t,n){return Qa.current.useSyncExternalStore(e,t,n)};Pn.useTransition=function(){return Qa.current.useTransition()};Pn.version="18.3.1";pge.exports=Pn;var N=pge.exports;const Hi=jl(N),xP=hFe({__proto__:null,default:Hi},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RFe=N,NFe=Symbol.for("react.element"),DFe=Symbol.for("react.fragment"),PFe=Object.prototype.hasOwnProperty,OFe=RFe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,$Fe={key:!0,ref:!0,__self:!0,__source:!0};function xge(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)PFe.call(t,r)&&!$Fe.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:NFe,type:e,key:s,ref:o,props:i,_owner:OFe.current}}oM.Fragment=DFe;oM.jsx=xge;oM.jsxs=xge;hge.exports=oM;var _=hge.exports,L9={},Sge={exports:{}},Bl={},Tge={exports:{}},Cge={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,q){var P=U.length;U.push(q);e:for(;0<P;){var V=P-1>>>1,W=U[V];if(0<i(W,q))U[V]=q,U[P]=W,P=V;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var q=U[0],P=U.pop();if(P!==q){U[0]=P;e:for(var V=0,W=U.length,j=W>>>1;V<j;){var H=2*(V+1)-1,G=U[H],ne=H+1,pe=U[ne];if(0>i(G,P))ne<W&&0>i(pe,G)?(U[V]=pe,U[ne]=P,V=ne):(U[V]=G,U[H]=P,V=H);else if(ne<W&&0>i(pe,P))U[V]=pe,U[ne]=P,V=ne;else break e}}return q}function i(U,q){var P=U.sortIndex-q.sortIndex;return P!==0?P:U.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var q=n(l);q!==null;){if(q.callback===null)r(l);else if(q.startTime<=U)r(l),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,F(x);else{var q=n(l);q!==null&&B(w,q.startTime-U)}}function x(U,q){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var P=d;try{for(b(q),f=n(u);f!==null&&(!(f.expirationTime>q)||U&&!k());){var V=f.callback;if(typeof V=="function"){f.callback=null,d=f.priorityLevel;var W=V(f.expirationTime<=q);q=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(q)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var H=n(l);H!==null&&B(w,H.startTime-q),j=!1}return j}finally{f=null,d=P,h=!1}}var T=!1,S=null,C=-1,A=5,R=-1;function k(){return!(e.unstable_now()-R<A)}function O(){if(S!==null){var U=e.unstable_now();R=U;var q=!0;try{q=S(!0,U)}finally{q?D():(T=!1,S=null)}}else T=!1}var D;if(typeof v=="function")D=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,L=$.port2;$.port1.onmessage=O,D=function(){L.postMessage(null)}}else D=function(){g(O,0)};function F(U){S=U,T||(T=!0,D())}function B(U,q){C=g(function(){U(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,F(x))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var q=3;break;default:q=d}var P=d;d=q;try{return U()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,q){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var P=d;d=U;try{return q()}finally{d=P}},e.unstable_scheduleCallback=function(U,q,P){var V=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?V+P:V):P=V,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,U={id:c++,callback:q,priorityLevel:U,startTime:P,expirationTime:W,sortIndex:-1},P>V?(U.sortIndex=P,t(l,U),n(u)===null&&U===n(l)&&(m?(y(C),C=-1):m=!0,B(w,P-V))):(U.sortIndex=W,t(u,U),p||h||(p=!0,F(x))),U},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(U){var q=d;return function(){var P=d;d=q;try{return U.apply(this,arguments)}finally{d=P}}}})(Cge);Tge.exports=Cge;var MFe=Tge.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LFe=N,Tl=MFe;function Ze(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Age=new Set,EA={};function cb(e,t){Gw(e,t),Gw(e+"Capture",t)}function Gw(e,t){for(EA[e]=t,e=0;e<t.length;e++)Age.add(t[e])}var em=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),F9=Object.prototype.hasOwnProperty,FFe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sre={},ore={};function jFe(e){return F9.call(ore,e)?!0:F9.call(sre,e)?!1:FFe.test(e)?ore[e]=!0:(sre[e]=!0,!1)}function BFe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function UFe(e,t,n,r){if(t===null||typeof t>"u"||BFe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ja(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Ro={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ro[e]=new Ja(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ro[t]=new Ja(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ro[e]=new Ja(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ro[e]=new Ja(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ro[e]=new Ja(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ro[e]=new Ja(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ro[e]=new Ja(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ro[e]=new Ja(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ro[e]=new Ja(e,5,!1,e.toLowerCase(),null,!1,!1)});var bH=/[\-:]([a-z])/g;function _H(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(bH,_H);Ro[t]=new Ja(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(bH,_H);Ro[t]=new Ja(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(bH,_H);Ro[t]=new Ja(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ro[e]=new Ja(e,1,!1,e.toLowerCase(),null,!1,!1)});Ro.xlinkHref=new Ja("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ro[e]=new Ja(e,1,!1,e.toLowerCase(),null,!0,!0)});function wH(e,t,n,r){var i=Ro.hasOwnProperty(t)?Ro[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(UFe(t,n,i,r)&&(n=null),r||i===null?jFe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Am=LFe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_R=Symbol.for("react.element"),P_=Symbol.for("react.portal"),O_=Symbol.for("react.fragment"),EH=Symbol.for("react.strict_mode"),j9=Symbol.for("react.profiler"),Ige=Symbol.for("react.provider"),kge=Symbol.for("react.context"),xH=Symbol.for("react.forward_ref"),B9=Symbol.for("react.suspense"),U9=Symbol.for("react.suspense_list"),SH=Symbol.for("react.memo"),dg=Symbol.for("react.lazy"),Rge=Symbol.for("react.offscreen"),are=Symbol.iterator;function PS(e){return e===null||typeof e!="object"?null:(e=are&&e[are]||e["@@iterator"],typeof e=="function"?e:null)}var Ri=Object.assign,YF;function PT(e){if(YF===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);YF=t&&t[1]||""}return`
`+YF+e}var KF=!1;function XF(e,t){if(!e||KF)return"";KF=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{KF=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?PT(e):""}function zFe(e){switch(e.tag){case 5:return PT(e.type);case 16:return PT("Lazy");case 13:return PT("Suspense");case 19:return PT("SuspenseList");case 0:case 2:case 15:return e=XF(e.type,!1),e;case 11:return e=XF(e.type.render,!1),e;case 1:return e=XF(e.type,!0),e;default:return""}}function z9(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case O_:return"Fragment";case P_:return"Portal";case j9:return"Profiler";case EH:return"StrictMode";case B9:return"Suspense";case U9:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case kge:return(e.displayName||"Context")+".Consumer";case Ige:return(e._context.displayName||"Context")+".Provider";case xH:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case SH:return t=e.displayName||null,t!==null?t:z9(e.type)||"Memo";case dg:t=e._payload,e=e._init;try{return z9(e(t))}catch{}}return null}function VFe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z9(t);case 8:return t===EH?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function y0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Nge(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function HFe(e){var t=Nge(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function wR(e){e._valueTracker||(e._valueTracker=HFe(e))}function Dge(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Nge(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function SP(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function V9(e,t){var n=t.checked;return Ri({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function ure(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=y0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pge(e,t){t=t.checked,t!=null&&wH(e,"checked",t,!1)}function H9(e,t){Pge(e,t);var n=y0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?q9(e,t.type,n):t.hasOwnProperty("defaultValue")&&q9(e,t.type,y0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function lre(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function q9(e,t,n){(t!=="number"||SP(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var OT=Array.isArray;function ow(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+y0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function W9(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ze(91));return Ri({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function cre(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ze(92));if(OT(n)){if(1<n.length)throw Error(Ze(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:y0(n)}}function Oge(e,t){var n=y0(t.value),r=y0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function fre(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function $ge(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function G9(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?$ge(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ER,Mge=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ER=ER||document.createElement("div"),ER.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ER.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xA(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var SC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qFe=["Webkit","ms","Moz","O"];Object.keys(SC).forEach(function(e){qFe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),SC[t]=SC[e]})});function Lge(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||SC.hasOwnProperty(e)&&SC[e]?(""+t).trim():t+"px"}function Fge(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Lge(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var WFe=Ri({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Y9(e,t){if(t){if(WFe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ze(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ze(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ze(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ze(62))}}function K9(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var X9=null;function TH(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Q9=null,aw=null,uw=null;function dre(e){if(e=hI(e)){if(typeof Q9!="function")throw Error(Ze(280));var t=e.stateNode;t&&(t=fM(t),Q9(e.stateNode,e.type,t))}}function jge(e){aw?uw?uw.push(e):uw=[e]:aw=e}function Bge(){if(aw){var e=aw,t=uw;if(uw=aw=null,dre(e),t)for(e=0;e<t.length;e++)dre(t[e])}}function Uge(e,t){return e(t)}function zge(){}var QF=!1;function Vge(e,t,n){if(QF)return e(t,n);QF=!0;try{return Uge(e,t,n)}finally{QF=!1,(aw!==null||uw!==null)&&(zge(),Bge())}}function SA(e,t){var n=e.stateNode;if(n===null)return null;var r=fM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Ze(231,t,typeof n));return n}var J9=!1;if(em)try{var OS={};Object.defineProperty(OS,"passive",{get:function(){J9=!0}}),window.addEventListener("test",OS,OS),window.removeEventListener("test",OS,OS)}catch{J9=!1}function GFe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var TC=!1,TP=null,CP=!1,Z9=null,YFe={onError:function(e){TC=!0,TP=e}};function KFe(e,t,n,r,i,s,o,a,u){TC=!1,TP=null,GFe.apply(YFe,arguments)}function XFe(e,t,n,r,i,s,o,a,u){if(KFe.apply(this,arguments),TC){if(TC){var l=TP;TC=!1,TP=null}else throw Error(Ze(198));CP||(CP=!0,Z9=l)}}function fb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Hge(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hre(e){if(fb(e)!==e)throw Error(Ze(188))}function QFe(e){var t=e.alternate;if(!t){if(t=fb(e),t===null)throw Error(Ze(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return hre(i),e;if(s===r)return hre(i),t;s=s.sibling}throw Error(Ze(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ze(189))}}if(n.alternate!==r)throw Error(Ze(190))}if(n.tag!==3)throw Error(Ze(188));return n.stateNode.current===n?e:t}function qge(e){return e=QFe(e),e!==null?Wge(e):null}function Wge(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Wge(e);if(t!==null)return t;e=e.sibling}return null}var Gge=Tl.unstable_scheduleCallback,pre=Tl.unstable_cancelCallback,JFe=Tl.unstable_shouldYield,ZFe=Tl.unstable_requestPaint,ts=Tl.unstable_now,e5e=Tl.unstable_getCurrentPriorityLevel,CH=Tl.unstable_ImmediatePriority,Yge=Tl.unstable_UserBlockingPriority,AP=Tl.unstable_NormalPriority,t5e=Tl.unstable_LowPriority,Kge=Tl.unstable_IdlePriority,aM=null,qd=null;function n5e(e){if(qd&&typeof qd.onCommitFiberRoot=="function")try{qd.onCommitFiberRoot(aM,e,void 0,(e.current.flags&128)===128)}catch{}}var Tf=Math.clz32?Math.clz32:s5e,r5e=Math.log,i5e=Math.LN2;function s5e(e){return e>>>=0,e===0?32:31-(r5e(e)/i5e|0)|0}var xR=64,SR=4194304;function $T(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function IP(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=$T(a):(s&=o,s!==0&&(r=$T(s)))}else o=n&~i,o!==0?r=$T(o):s!==0&&(r=$T(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Tf(t),i=1<<n,r|=e[n],t&=~i;return r}function o5e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a5e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Tf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=o5e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function eB(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xge(){var e=xR;return xR<<=1,!(xR&4194240)&&(xR=64),e}function JF(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Tf(t),e[t]=n}function u5e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Tf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function AH(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Tf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Pr=0;function Qge(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Jge,IH,Zge,e0e,t0e,tB=!1,TR=[],Gg=null,Yg=null,Kg=null,TA=new Map,CA=new Map,wg=[],l5e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mre(e,t){switch(e){case"focusin":case"focusout":Gg=null;break;case"dragenter":case"dragleave":Yg=null;break;case"mouseover":case"mouseout":Kg=null;break;case"pointerover":case"pointerout":TA.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":CA.delete(t.pointerId)}}function $S(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=hI(t),t!==null&&IH(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function c5e(e,t,n,r,i){switch(t){case"focusin":return Gg=$S(Gg,e,t,n,r,i),!0;case"dragenter":return Yg=$S(Yg,e,t,n,r,i),!0;case"mouseover":return Kg=$S(Kg,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return TA.set(s,$S(TA.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,CA.set(s,$S(CA.get(s)||null,e,t,n,r,i)),!0}return!1}function n0e(e){var t=Dv(e.target);if(t!==null){var n=fb(t);if(n!==null){if(t=n.tag,t===13){if(t=Hge(n),t!==null){e.blockedOn=t,t0e(e.priority,function(){Zge(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function cD(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=nB(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);X9=r,n.target.dispatchEvent(r),X9=null}else return t=hI(n),t!==null&&IH(t),e.blockedOn=n,!1;t.shift()}return!0}function gre(e,t,n){cD(e)&&n.delete(t)}function f5e(){tB=!1,Gg!==null&&cD(Gg)&&(Gg=null),Yg!==null&&cD(Yg)&&(Yg=null),Kg!==null&&cD(Kg)&&(Kg=null),TA.forEach(gre),CA.forEach(gre)}function MS(e,t){e.blockedOn===t&&(e.blockedOn=null,tB||(tB=!0,Tl.unstable_scheduleCallback(Tl.unstable_NormalPriority,f5e)))}function AA(e){function t(i){return MS(i,e)}if(0<TR.length){MS(TR[0],e);for(var n=1;n<TR.length;n++){var r=TR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Gg!==null&&MS(Gg,e),Yg!==null&&MS(Yg,e),Kg!==null&&MS(Kg,e),TA.forEach(t),CA.forEach(t),n=0;n<wg.length;n++)r=wg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<wg.length&&(n=wg[0],n.blockedOn===null);)n0e(n),n.blockedOn===null&&wg.shift()}var lw=Am.ReactCurrentBatchConfig,kP=!0;function d5e(e,t,n,r){var i=Pr,s=lw.transition;lw.transition=null;try{Pr=1,kH(e,t,n,r)}finally{Pr=i,lw.transition=s}}function h5e(e,t,n,r){var i=Pr,s=lw.transition;lw.transition=null;try{Pr=4,kH(e,t,n,r)}finally{Pr=i,lw.transition=s}}function kH(e,t,n,r){if(kP){var i=nB(e,t,n,r);if(i===null)u5(e,t,r,RP,n),mre(e,r);else if(c5e(i,e,t,n,r))r.stopPropagation();else if(mre(e,r),t&4&&-1<l5e.indexOf(e)){for(;i!==null;){var s=hI(i);if(s!==null&&Jge(s),s=nB(e,t,n,r),s===null&&u5(e,t,r,RP,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else u5(e,t,r,null,n)}}var RP=null;function nB(e,t,n,r){if(RP=null,e=TH(r),e=Dv(e),e!==null)if(t=fb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Hge(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return RP=e,null}function r0e(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e5e()){case CH:return 1;case Yge:return 4;case AP:case t5e:return 16;case Kge:return 536870912;default:return 16}default:return 16}}var Ng=null,RH=null,fD=null;function i0e(){if(fD)return fD;var e,t=RH,n=t.length,r,i="value"in Ng?Ng.value:Ng.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return fD=i.slice(e,1<r?1-r:void 0)}function dD(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function CR(){return!0}function yre(){return!1}function Ul(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?CR:yre,this.isPropagationStopped=yre,this}return Ri(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=CR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=CR)},persist:function(){},isPersistent:CR}),t}var hx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},NH=Ul(hx),dI=Ri({},hx,{view:0,detail:0}),p5e=Ul(dI),ZF,e5,LS,uM=Ri({},dI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:DH,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==LS&&(LS&&e.type==="mousemove"?(ZF=e.screenX-LS.screenX,e5=e.screenY-LS.screenY):e5=ZF=0,LS=e),ZF)},movementY:function(e){return"movementY"in e?e.movementY:e5}}),vre=Ul(uM),m5e=Ri({},uM,{dataTransfer:0}),g5e=Ul(m5e),y5e=Ri({},dI,{relatedTarget:0}),t5=Ul(y5e),v5e=Ri({},hx,{animationName:0,elapsedTime:0,pseudoElement:0}),b5e=Ul(v5e),_5e=Ri({},hx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),w5e=Ul(_5e),E5e=Ri({},hx,{data:0}),bre=Ul(E5e),x5e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},S5e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T5e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C5e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=T5e[e])?!!t[e]:!1}function DH(){return C5e}var A5e=Ri({},dI,{key:function(e){if(e.key){var t=x5e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=dD(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?S5e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:DH,charCode:function(e){return e.type==="keypress"?dD(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?dD(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),I5e=Ul(A5e),k5e=Ri({},uM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_re=Ul(k5e),R5e=Ri({},dI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:DH}),N5e=Ul(R5e),D5e=Ri({},hx,{propertyName:0,elapsedTime:0,pseudoElement:0}),P5e=Ul(D5e),O5e=Ri({},uM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),$5e=Ul(O5e),M5e=[9,13,27,32],PH=em&&"CompositionEvent"in window,CC=null;em&&"documentMode"in document&&(CC=document.documentMode);var L5e=em&&"TextEvent"in window&&!CC,s0e=em&&(!PH||CC&&8<CC&&11>=CC),wre=" ",Ere=!1;function o0e(e,t){switch(e){case"keyup":return M5e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a0e(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $_=!1;function F5e(e,t){switch(e){case"compositionend":return a0e(t);case"keypress":return t.which!==32?null:(Ere=!0,wre);case"textInput":return e=t.data,e===wre&&Ere?null:e;default:return null}}function j5e(e,t){if($_)return e==="compositionend"||!PH&&o0e(e,t)?(e=i0e(),fD=RH=Ng=null,$_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return s0e&&t.locale!=="ko"?null:t.data;default:return null}}var B5e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xre(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!B5e[e.type]:t==="textarea"}function u0e(e,t,n,r){jge(r),t=NP(t,"onChange"),0<t.length&&(n=new NH("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var AC=null,IA=null;function U5e(e){b0e(e,0)}function lM(e){var t=F_(e);if(Dge(t))return e}function z5e(e,t){if(e==="change")return t}var l0e=!1;if(em){var n5;if(em){var r5="oninput"in document;if(!r5){var Sre=document.createElement("div");Sre.setAttribute("oninput","return;"),r5=typeof Sre.oninput=="function"}n5=r5}else n5=!1;l0e=n5&&(!document.documentMode||9<document.documentMode)}function Tre(){AC&&(AC.detachEvent("onpropertychange",c0e),IA=AC=null)}function c0e(e){if(e.propertyName==="value"&&lM(IA)){var t=[];u0e(t,IA,e,TH(e)),Vge(U5e,t)}}function V5e(e,t,n){e==="focusin"?(Tre(),AC=t,IA=n,AC.attachEvent("onpropertychange",c0e)):e==="focusout"&&Tre()}function H5e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lM(IA)}function q5e(e,t){if(e==="click")return lM(t)}function W5e(e,t){if(e==="input"||e==="change")return lM(t)}function G5e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $f=typeof Object.is=="function"?Object.is:G5e;function kA(e,t){if($f(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!F9.call(t,i)||!$f(e[i],t[i]))return!1}return!0}function Cre(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Are(e,t){var n=Cre(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Cre(n)}}function f0e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?f0e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function d0e(){for(var e=window,t=SP();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=SP(e.document)}return t}function OH(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Y5e(e){var t=d0e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&f0e(n.ownerDocument.documentElement,n)){if(r!==null&&OH(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Are(n,s);var o=Are(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var K5e=em&&"documentMode"in document&&11>=document.documentMode,M_=null,rB=null,IC=null,iB=!1;function Ire(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iB||M_==null||M_!==SP(r)||(r=M_,"selectionStart"in r&&OH(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),IC&&kA(IC,r)||(IC=r,r=NP(rB,"onSelect"),0<r.length&&(t=new NH("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=M_)))}function AR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var L_={animationend:AR("Animation","AnimationEnd"),animationiteration:AR("Animation","AnimationIteration"),animationstart:AR("Animation","AnimationStart"),transitionend:AR("Transition","TransitionEnd")},i5={},h0e={};em&&(h0e=document.createElement("div").style,"AnimationEvent"in window||(delete L_.animationend.animation,delete L_.animationiteration.animation,delete L_.animationstart.animation),"TransitionEvent"in window||delete L_.transitionend.transition);function cM(e){if(i5[e])return i5[e];if(!L_[e])return e;var t=L_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in h0e)return i5[e]=t[n];return e}var p0e=cM("animationend"),m0e=cM("animationiteration"),g0e=cM("animationstart"),y0e=cM("transitionend"),v0e=new Map,kre="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sy(e,t){v0e.set(e,t),cb(t,[e])}for(var s5=0;s5<kre.length;s5++){var o5=kre[s5],X5e=o5.toLowerCase(),Q5e=o5[0].toUpperCase()+o5.slice(1);sy(X5e,"on"+Q5e)}sy(p0e,"onAnimationEnd");sy(m0e,"onAnimationIteration");sy(g0e,"onAnimationStart");sy("dblclick","onDoubleClick");sy("focusin","onFocus");sy("focusout","onBlur");sy(y0e,"onTransitionEnd");Gw("onMouseEnter",["mouseout","mouseover"]);Gw("onMouseLeave",["mouseout","mouseover"]);Gw("onPointerEnter",["pointerout","pointerover"]);Gw("onPointerLeave",["pointerout","pointerover"]);cb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));cb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));cb("onBeforeInput",["compositionend","keypress","textInput","paste"]);cb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));cb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));cb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var MT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),J5e=new Set("cancel close invalid load scroll toggle".split(" ").concat(MT));function Rre(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,XFe(r,t,void 0,e),e.currentTarget=null}function b0e(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Rre(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Rre(i,a,l),s=u}}}if(CP)throw e=Z9,CP=!1,Z9=null,e}function si(e,t){var n=t[lB];n===void 0&&(n=t[lB]=new Set);var r=e+"__bubble";n.has(r)||(_0e(t,e,2,!1),n.add(r))}function a5(e,t,n){var r=0;t&&(r|=4),_0e(n,e,r,t)}var IR="_reactListening"+Math.random().toString(36).slice(2);function RA(e){if(!e[IR]){e[IR]=!0,Age.forEach(function(n){n!=="selectionchange"&&(J5e.has(n)||a5(n,!1,e),a5(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[IR]||(t[IR]=!0,a5("selectionchange",!1,t))}}function _0e(e,t,n,r){switch(r0e(t)){case 1:var i=d5e;break;case 4:i=h5e;break;default:i=kH}n=i.bind(null,t,n,e),i=void 0,!J9||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function u5(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Dv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Vge(function(){var l=s,c=TH(n),f=[];e:{var d=v0e.get(e);if(d!==void 0){var h=NH,p=e;switch(e){case"keypress":if(dD(n)===0)break e;case"keydown":case"keyup":h=I5e;break;case"focusin":p="focus",h=t5;break;case"focusout":p="blur",h=t5;break;case"beforeblur":case"afterblur":h=t5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=vre;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=g5e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=N5e;break;case p0e:case m0e:case g0e:h=b5e;break;case y0e:h=P5e;break;case"scroll":h=p5e;break;case"wheel":h=$5e;break;case"copy":case"cut":case"paste":h=w5e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=_re}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=SA(v,y),w!=null&&m.push(NA(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==X9&&(p=n.relatedTarget||n.fromElement)&&(Dv(p)||p[tm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Dv(p):null,p!==null&&(g=fb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=vre,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=_re,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:F_(h),b=p==null?d:F_(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,Dv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Kb(b))v++;for(b=0,w=y;w;w=Kb(w))b++;for(;0<v-b;)m=Kb(m),v--;for(;0<b-v;)y=Kb(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Kb(m),y=Kb(y)}m=null}else m=null;h!==null&&Nre(f,d,h,m,!1),p!==null&&g!==null&&Nre(f,g,p,m,!0)}}e:{if(d=l?F_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var x=z5e;else if(xre(d))if(l0e)x=W5e;else{x=H5e;var T=V5e}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(x=q5e);if(x&&(x=x(e,l))){u0e(f,x,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&q9(d,"number",d.value)}switch(T=l?F_(l):window,e){case"focusin":(xre(T)||T.contentEditable==="true")&&(M_=T,rB=l,IC=null);break;case"focusout":IC=rB=M_=null;break;case"mousedown":iB=!0;break;case"contextmenu":case"mouseup":case"dragend":iB=!1,Ire(f,n,c);break;case"selectionchange":if(K5e)break;case"keydown":case"keyup":Ire(f,n,c)}var S;if(PH)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else $_?o0e(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(s0e&&n.locale!=="ko"&&($_||C!=="onCompositionStart"?C==="onCompositionEnd"&&$_&&(S=i0e()):(Ng=c,RH="value"in Ng?Ng.value:Ng.textContent,$_=!0)),T=NP(l,C),0<T.length&&(C=new bre(C,e,null,n,c),f.push({event:C,listeners:T}),S?C.data=S:(S=a0e(n),S!==null&&(C.data=S)))),(S=L5e?F5e(e,n):j5e(e,n))&&(l=NP(l,"onBeforeInput"),0<l.length&&(c=new bre("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}b0e(f,t)})}function NA(e,t,n){return{instance:e,listener:t,currentTarget:n}}function NP(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=SA(e,n),s!=null&&r.unshift(NA(e,s,i)),s=SA(e,t),s!=null&&r.push(NA(e,s,i))),e=e.return}return r}function Kb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nre(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=SA(n,s),u!=null&&o.unshift(NA(n,u,a))):i||(u=SA(n,s),u!=null&&o.push(NA(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var Z5e=/\r\n?/g,e8e=/\u0000|\uFFFD/g;function Dre(e){return(typeof e=="string"?e:""+e).replace(Z5e,`
`).replace(e8e,"")}function kR(e,t,n){if(t=Dre(t),Dre(e)!==t&&n)throw Error(Ze(425))}function DP(){}var sB=null,oB=null;function aB(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uB=typeof setTimeout=="function"?setTimeout:void 0,t8e=typeof clearTimeout=="function"?clearTimeout:void 0,Pre=typeof Promise=="function"?Promise:void 0,n8e=typeof queueMicrotask=="function"?queueMicrotask:typeof Pre<"u"?function(e){return Pre.resolve(null).then(e).catch(r8e)}:uB;function r8e(e){setTimeout(function(){throw e})}function l5(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),AA(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);AA(t)}function Xg(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ore(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var px=Math.random().toString(36).slice(2),Sd="__reactFiber$"+px,DA="__reactProps$"+px,tm="__reactContainer$"+px,lB="__reactEvents$"+px,i8e="__reactListeners$"+px,s8e="__reactHandles$"+px;function Dv(e){var t=e[Sd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[tm]||n[Sd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Ore(e);e!==null;){if(n=e[Sd])return n;e=Ore(e)}return t}e=n,n=e.parentNode}return null}function hI(e){return e=e[Sd]||e[tm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function F_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ze(33))}function fM(e){return e[DA]||null}var cB=[],j_=-1;function oy(e){return{current:e}}function ci(e){0>j_||(e.current=cB[j_],cB[j_]=null,j_--)}function Zr(e,t){j_++,cB[j_]=e.current,e.current=t}var v0={},pa=oy(v0),Iu=oy(!1),b1=v0;function Yw(e,t){var n=e.type.contextTypes;if(!n)return v0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function ku(e){return e=e.childContextTypes,e!=null}function PP(){ci(Iu),ci(pa)}function $re(e,t,n){if(pa.current!==v0)throw Error(Ze(168));Zr(pa,t),Zr(Iu,n)}function w0e(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Ze(108,VFe(e)||"Unknown",i));return Ri({},n,r)}function OP(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||v0,b1=pa.current,Zr(pa,e),Zr(Iu,Iu.current),!0}function Mre(e,t,n){var r=e.stateNode;if(!r)throw Error(Ze(169));n?(e=w0e(e,t,b1),r.__reactInternalMemoizedMergedChildContext=e,ci(Iu),ci(pa),Zr(pa,e)):ci(Iu),Zr(Iu,n)}var mp=null,dM=!1,c5=!1;function E0e(e){mp===null?mp=[e]:mp.push(e)}function o8e(e){dM=!0,E0e(e)}function ay(){if(!c5&&mp!==null){c5=!0;var e=0,t=Pr;try{var n=mp;for(Pr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}mp=null,dM=!1}catch(i){throw mp!==null&&(mp=mp.slice(e+1)),Gge(CH,ay),i}finally{Pr=t,c5=!1}}return null}var B_=[],U_=0,$P=null,MP=0,tc=[],nc=0,_1=null,Ip=1,kp="";function iv(e,t){B_[U_++]=MP,B_[U_++]=$P,$P=e,MP=t}function x0e(e,t,n){tc[nc++]=Ip,tc[nc++]=kp,tc[nc++]=_1,_1=e;var r=Ip;e=kp;var i=32-Tf(r)-1;r&=~(1<<i),n+=1;var s=32-Tf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ip=1<<32-Tf(t)+i|n<<i|r,kp=s+e}else Ip=1<<s|n<<i|r,kp=e}function $H(e){e.return!==null&&(iv(e,1),x0e(e,1,0))}function MH(e){for(;e===$P;)$P=B_[--U_],B_[U_]=null,MP=B_[--U_],B_[U_]=null;for(;e===_1;)_1=tc[--nc],tc[nc]=null,kp=tc[--nc],tc[nc]=null,Ip=tc[--nc],tc[nc]=null}var wl=null,dl=null,vi=!1,uf=null;function S0e(e,t){var n=uc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Lre(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,wl=e,dl=Xg(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,wl=e,dl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=_1!==null?{id:Ip,overflow:kp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=uc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,wl=e,dl=null,!0):!1;default:return!1}}function fB(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dB(e){if(vi){var t=dl;if(t){var n=t;if(!Lre(e,t)){if(fB(e))throw Error(Ze(418));t=Xg(n.nextSibling);var r=wl;t&&Lre(e,t)?S0e(r,n):(e.flags=e.flags&-4097|2,vi=!1,wl=e)}}else{if(fB(e))throw Error(Ze(418));e.flags=e.flags&-4097|2,vi=!1,wl=e}}}function Fre(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;wl=e}function RR(e){if(e!==wl)return!1;if(!vi)return Fre(e),vi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!aB(e.type,e.memoizedProps)),t&&(t=dl)){if(fB(e))throw T0e(),Error(Ze(418));for(;t;)S0e(e,t),t=Xg(t.nextSibling)}if(Fre(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ze(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){dl=Xg(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}dl=null}}else dl=wl?Xg(e.stateNode.nextSibling):null;return!0}function T0e(){for(var e=dl;e;)e=Xg(e.nextSibling)}function Kw(){dl=wl=null,vi=!1}function LH(e){uf===null?uf=[e]:uf.push(e)}var a8e=Am.ReactCurrentBatchConfig;function FS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ze(309));var r=n.stateNode}if(!r)throw Error(Ze(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(Ze(284));if(!n._owner)throw Error(Ze(290,e))}return e}function NR(e,t){throw e=Object.prototype.toString.call(t),Error(Ze(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function jre(e){var t=e._init;return t(e._payload)}function C0e(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=e0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=y5(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var x=b.type;return x===O_?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===dg&&jre(x)===v.type)?(w=i(v,b.props),w.ref=FS(y,v,b),w.return=y,w):(w=bD(b.type,b.key,b.props,null,y.mode,w),w.ref=FS(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=v5(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,x){return v===null||v.tag!==7?(v=e1(b,y.mode,w,x),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=y5(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case _R:return b=bD(v.type,v.key,v.props,null,y.mode,b),b.ref=FS(y,null,v),b.return=y,b;case P_:return v=v5(v,y.mode,b),v.return=y,v;case dg:var w=v._init;return f(y,w(v._payload),b)}if(OT(v)||PS(v))return v=e1(v,y.mode,b,null),v.return=y,v;NR(y,v)}return null}function d(y,v,b,w){var x=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return x!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _R:return b.key===x?u(y,v,b,w):null;case P_:return b.key===x?l(y,v,b,w):null;case dg:return x=b._init,d(y,v,x(b._payload),w)}if(OT(b)||PS(b))return x!==null?null:c(y,v,b,w,null);NR(y,b)}return null}function h(y,v,b,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,x);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _R:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,x);case P_:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,x);case dg:var T=w._init;return h(y,v,b,T(w._payload),x)}if(OT(w)||PS(w))return y=y.get(b)||null,c(v,y,w,x,null);NR(v,w)}return null}function p(y,v,b,w){for(var x=null,T=null,S=v,C=v=0,A=null;S!==null&&C<b.length;C++){S.index>C?(A=S,S=null):A=S.sibling;var R=d(y,S,b[C],w);if(R===null){S===null&&(S=A);break}e&&S&&R.alternate===null&&t(y,S),v=s(R,v,C),T===null?x=R:T.sibling=R,T=R,S=A}if(C===b.length)return n(y,S),vi&&iv(y,C),x;if(S===null){for(;C<b.length;C++)S=f(y,b[C],w),S!==null&&(v=s(S,v,C),T===null?x=S:T.sibling=S,T=S);return vi&&iv(y,C),x}for(S=r(y,S);C<b.length;C++)A=h(S,y,C,b[C],w),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),v=s(A,v,C),T===null?x=A:T.sibling=A,T=A);return e&&S.forEach(function(k){return t(y,k)}),vi&&iv(y,C),x}function m(y,v,b,w){var x=PS(b);if(typeof x!="function")throw Error(Ze(150));if(b=x.call(b),b==null)throw Error(Ze(151));for(var T=x=null,S=v,C=v=0,A=null,R=b.next();S!==null&&!R.done;C++,R=b.next()){S.index>C?(A=S,S=null):A=S.sibling;var k=d(y,S,R.value,w);if(k===null){S===null&&(S=A);break}e&&S&&k.alternate===null&&t(y,S),v=s(k,v,C),T===null?x=k:T.sibling=k,T=k,S=A}if(R.done)return n(y,S),vi&&iv(y,C),x;if(S===null){for(;!R.done;C++,R=b.next())R=f(y,R.value,w),R!==null&&(v=s(R,v,C),T===null?x=R:T.sibling=R,T=R);return vi&&iv(y,C),x}for(S=r(y,S);!R.done;C++,R=b.next())R=h(S,y,C,R.value,w),R!==null&&(e&&R.alternate!==null&&S.delete(R.key===null?C:R.key),v=s(R,v,C),T===null?x=R:T.sibling=R,T=R);return e&&S.forEach(function(O){return t(y,O)}),vi&&iv(y,C),x}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===O_&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case _R:e:{for(var x=b.key,T=v;T!==null;){if(T.key===x){if(x=b.type,x===O_){if(T.tag===7){n(y,T.sibling),v=i(T,b.props.children),v.return=y,y=v;break e}}else if(T.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===dg&&jre(x)===T.type){n(y,T.sibling),v=i(T,b.props),v.ref=FS(y,T,b),v.return=y,y=v;break e}n(y,T);break}else t(y,T);T=T.sibling}b.type===O_?(v=e1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=bD(b.type,b.key,b.props,null,y.mode,w),w.ref=FS(y,v,b),w.return=y,y=w)}return o(y);case P_:e:{for(T=b.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=v5(b,y.mode,w),v.return=y,y=v}return o(y);case dg:return T=b._init,g(y,v,T(b._payload),w)}if(OT(b))return p(y,v,b,w);if(PS(b))return m(y,v,b,w);NR(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=y5(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var Xw=C0e(!0),A0e=C0e(!1),LP=oy(null),FP=null,z_=null,FH=null;function jH(){FH=z_=FP=null}function BH(e){var t=LP.current;ci(LP),e._currentValue=t}function hB(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function cw(e,t){FP=e,FH=z_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(xu=!0),e.firstContext=null)}function gc(e){var t=e._currentValue;if(FH!==e)if(e={context:e,memoizedValue:t,next:null},z_===null){if(FP===null)throw Error(Ze(308));z_=e,FP.dependencies={lanes:0,firstContext:e}}else z_=z_.next=e;return t}var Pv=null;function UH(e){Pv===null?Pv=[e]:Pv.push(e)}function I0e(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,UH(t)):(n.next=i.next,i.next=n),t.interleaved=n,nm(e,r)}function nm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var hg=!1;function zH(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function k0e(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Bp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Qg(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,or&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,nm(e,n)}return i=r.interleaved,i===null?(t.next=t,UH(r)):(t.next=i.next,i.next=t),r.interleaved=t,nm(e,n)}function hD(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,AH(e,n)}}function Bre(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function jP(e,t,n,r){var i=e.updateQueue;hg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Ri({},f,d);break e;case 2:hg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);E1|=o,e.lanes=o,e.memoizedState=f}}function Ure(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ze(191,i));i.call(r)}}}var pI={},Wd=oy(pI),PA=oy(pI),OA=oy(pI);function Ov(e){if(e===pI)throw Error(Ze(174));return e}function VH(e,t){switch(Zr(OA,t),Zr(PA,e),Zr(Wd,pI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:G9(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=G9(t,e)}ci(Wd),Zr(Wd,t)}function Qw(){ci(Wd),ci(PA),ci(OA)}function R0e(e){Ov(OA.current);var t=Ov(Wd.current),n=G9(t,e.type);t!==n&&(Zr(PA,e),Zr(Wd,n))}function HH(e){PA.current===e&&(ci(Wd),ci(PA))}var Ci=oy(0);function BP(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var f5=[];function qH(){for(var e=0;e<f5.length;e++)f5[e]._workInProgressVersionPrimary=null;f5.length=0}var pD=Am.ReactCurrentDispatcher,d5=Am.ReactCurrentBatchConfig,w1=0,Ai=null,bs=null,Hs=null,UP=!1,kC=!1,$A=0,u8e=0;function Vo(){throw Error(Ze(321))}function WH(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$f(e[n],t[n]))return!1;return!0}function GH(e,t,n,r,i,s){if(w1=s,Ai=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,pD.current=e===null||e.memoizedState===null?d8e:h8e,e=n(r,i),kC){s=0;do{if(kC=!1,$A=0,25<=s)throw Error(Ze(301));s+=1,Hs=bs=null,t.updateQueue=null,pD.current=p8e,e=n(r,i)}while(kC)}if(pD.current=zP,t=bs!==null&&bs.next!==null,w1=0,Hs=bs=Ai=null,UP=!1,t)throw Error(Ze(300));return e}function YH(){var e=$A!==0;return $A=0,e}function md(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Hs===null?Ai.memoizedState=Hs=e:Hs=Hs.next=e,Hs}function yc(){if(bs===null){var e=Ai.alternate;e=e!==null?e.memoizedState:null}else e=bs.next;var t=Hs===null?Ai.memoizedState:Hs.next;if(t!==null)Hs=t,bs=e;else{if(e===null)throw Error(Ze(310));bs=e,e={memoizedState:bs.memoizedState,baseState:bs.baseState,baseQueue:bs.baseQueue,queue:bs.queue,next:null},Hs===null?Ai.memoizedState=Hs=e:Hs=Hs.next=e}return Hs}function MA(e,t){return typeof t=="function"?t(e):t}function h5(e){var t=yc(),n=t.queue;if(n===null)throw Error(Ze(311));n.lastRenderedReducer=e;var r=bs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((w1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ai.lanes|=c,E1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,$f(r,t.memoizedState)||(xu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ai.lanes|=s,E1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function p5(e){var t=yc(),n=t.queue;if(n===null)throw Error(Ze(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);$f(s,t.memoizedState)||(xu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function N0e(){}function D0e(e,t){var n=Ai,r=yc(),i=t(),s=!$f(r.memoizedState,i);if(s&&(r.memoizedState=i,xu=!0),r=r.queue,KH($0e.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Hs!==null&&Hs.memoizedState.tag&1){if(n.flags|=2048,LA(9,O0e.bind(null,n,r,i,t),void 0,null),no===null)throw Error(Ze(349));w1&30||P0e(n,t,i)}return i}function P0e(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ai.updateQueue,t===null?(t={lastEffect:null,stores:null},Ai.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function O0e(e,t,n,r){t.value=n,t.getSnapshot=r,M0e(t)&&L0e(e)}function $0e(e,t,n){return n(function(){M0e(t)&&L0e(e)})}function M0e(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$f(e,n)}catch{return!0}}function L0e(e){var t=nm(e,1);t!==null&&Cf(t,e,1,-1)}function zre(e){var t=md();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:MA,lastRenderedState:e},t.queue=e,e=e.dispatch=f8e.bind(null,Ai,e),[t.memoizedState,e]}function LA(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ai.updateQueue,t===null?(t={lastEffect:null,stores:null},Ai.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function F0e(){return yc().memoizedState}function mD(e,t,n,r){var i=md();Ai.flags|=e,i.memoizedState=LA(1|t,n,void 0,r===void 0?null:r)}function hM(e,t,n,r){var i=yc();r=r===void 0?null:r;var s=void 0;if(bs!==null){var o=bs.memoizedState;if(s=o.destroy,r!==null&&WH(r,o.deps)){i.memoizedState=LA(t,n,s,r);return}}Ai.flags|=e,i.memoizedState=LA(1|t,n,s,r)}function Vre(e,t){return mD(8390656,8,e,t)}function KH(e,t){return hM(2048,8,e,t)}function j0e(e,t){return hM(4,2,e,t)}function B0e(e,t){return hM(4,4,e,t)}function U0e(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function z0e(e,t,n){return n=n!=null?n.concat([e]):null,hM(4,4,U0e.bind(null,t,e),n)}function XH(){}function V0e(e,t){var n=yc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&WH(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function H0e(e,t){var n=yc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&WH(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function q0e(e,t,n){return w1&21?($f(n,t)||(n=Xge(),Ai.lanes|=n,E1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,xu=!0),e.memoizedState=n)}function l8e(e,t){var n=Pr;Pr=n!==0&&4>n?n:4,e(!0);var r=d5.transition;d5.transition={};try{e(!1),t()}finally{Pr=n,d5.transition=r}}function W0e(){return yc().memoizedState}function c8e(e,t,n){var r=Zg(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},G0e(e))Y0e(t,n);else if(n=I0e(e,t,n,r),n!==null){var i=Ua();Cf(n,e,r,i),K0e(n,t,r)}}function f8e(e,t,n){var r=Zg(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(G0e(e))Y0e(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,$f(a,o)){var u=t.interleaved;u===null?(i.next=i,UH(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=I0e(e,t,i,r),n!==null&&(i=Ua(),Cf(n,e,r,i),K0e(n,t,r))}}function G0e(e){var t=e.alternate;return e===Ai||t!==null&&t===Ai}function Y0e(e,t){kC=UP=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function K0e(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,AH(e,n)}}var zP={readContext:gc,useCallback:Vo,useContext:Vo,useEffect:Vo,useImperativeHandle:Vo,useInsertionEffect:Vo,useLayoutEffect:Vo,useMemo:Vo,useReducer:Vo,useRef:Vo,useState:Vo,useDebugValue:Vo,useDeferredValue:Vo,useTransition:Vo,useMutableSource:Vo,useSyncExternalStore:Vo,useId:Vo,unstable_isNewReconciler:!1},d8e={readContext:gc,useCallback:function(e,t){return md().memoizedState=[e,t===void 0?null:t],e},useContext:gc,useEffect:Vre,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,mD(4194308,4,U0e.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mD(4194308,4,e,t)},useInsertionEffect:function(e,t){return mD(4,2,e,t)},useMemo:function(e,t){var n=md();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=md();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=c8e.bind(null,Ai,e),[r.memoizedState,e]},useRef:function(e){var t=md();return e={current:e},t.memoizedState=e},useState:zre,useDebugValue:XH,useDeferredValue:function(e){return md().memoizedState=e},useTransition:function(){var e=zre(!1),t=e[0];return e=l8e.bind(null,e[1]),md().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ai,i=md();if(vi){if(n===void 0)throw Error(Ze(407));n=n()}else{if(n=t(),no===null)throw Error(Ze(349));w1&30||P0e(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Vre($0e.bind(null,r,s,e),[e]),r.flags|=2048,LA(9,O0e.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=md(),t=no.identifierPrefix;if(vi){var n=kp,r=Ip;n=(r&~(1<<32-Tf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=$A++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=u8e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},h8e={readContext:gc,useCallback:V0e,useContext:gc,useEffect:KH,useImperativeHandle:z0e,useInsertionEffect:j0e,useLayoutEffect:B0e,useMemo:H0e,useReducer:h5,useRef:F0e,useState:function(){return h5(MA)},useDebugValue:XH,useDeferredValue:function(e){var t=yc();return q0e(t,bs.memoizedState,e)},useTransition:function(){var e=h5(MA)[0],t=yc().memoizedState;return[e,t]},useMutableSource:N0e,useSyncExternalStore:D0e,useId:W0e,unstable_isNewReconciler:!1},p8e={readContext:gc,useCallback:V0e,useContext:gc,useEffect:KH,useImperativeHandle:z0e,useInsertionEffect:j0e,useLayoutEffect:B0e,useMemo:H0e,useReducer:p5,useRef:F0e,useState:function(){return p5(MA)},useDebugValue:XH,useDeferredValue:function(e){var t=yc();return bs===null?t.memoizedState=e:q0e(t,bs.memoizedState,e)},useTransition:function(){var e=p5(MA)[0],t=yc().memoizedState;return[e,t]},useMutableSource:N0e,useSyncExternalStore:D0e,useId:W0e,unstable_isNewReconciler:!1};function tf(e,t){if(e&&e.defaultProps){t=Ri({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function pB(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ri({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var pM={isMounted:function(e){return(e=e._reactInternals)?fb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ua(),i=Zg(e),s=Bp(r,i);s.payload=t,n!=null&&(s.callback=n),t=Qg(e,s,i),t!==null&&(Cf(t,e,i,r),hD(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ua(),i=Zg(e),s=Bp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=Qg(e,s,i),t!==null&&(Cf(t,e,i,r),hD(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ua(),r=Zg(e),i=Bp(n,r);i.tag=2,t!=null&&(i.callback=t),t=Qg(e,i,r),t!==null&&(Cf(t,e,r,n),hD(t,e,r))}};function Hre(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!kA(n,r)||!kA(i,s):!0}function X0e(e,t,n){var r=!1,i=v0,s=t.contextType;return typeof s=="object"&&s!==null?s=gc(s):(i=ku(t)?b1:pa.current,r=t.contextTypes,s=(r=r!=null)?Yw(e,i):v0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=pM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function qre(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&pM.enqueueReplaceState(t,t.state,null)}function mB(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},zH(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=gc(s):(s=ku(t)?b1:pa.current,i.context=Yw(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(pB(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&pM.enqueueReplaceState(i,i.state,null),jP(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Jw(e,t){try{var n="",r=t;do n+=zFe(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function m5(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function gB(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var m8e=typeof WeakMap=="function"?WeakMap:Map;function Q0e(e,t,n){n=Bp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){HP||(HP=!0,CB=r),gB(e,t)},n}function J0e(e,t,n){n=Bp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){gB(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){gB(e,t),typeof r!="function"&&(Jg===null?Jg=new Set([this]):Jg.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Wre(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new m8e;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=k8e.bind(null,e,t,n),t.then(e,e))}function Gre(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yre(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Bp(-1,1),t.tag=2,Qg(n,t,1))),n.lanes|=1),e)}var g8e=Am.ReactCurrentOwner,xu=!1;function Ra(e,t,n,r){t.child=e===null?A0e(t,null,n,r):Xw(t,e.child,n,r)}function Kre(e,t,n,r,i){n=n.render;var s=t.ref;return cw(t,i),r=GH(e,t,n,r,s,i),n=YH(),e!==null&&!xu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rm(e,t,i)):(vi&&n&&$H(t),t.flags|=1,Ra(e,t,r,i),t.child)}function Xre(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!iq(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Z0e(e,t,s,r,i)):(e=bD(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:kA,n(o,r)&&e.ref===t.ref)return rm(e,t,i)}return t.flags|=1,e=e0(s,r),e.ref=t.ref,e.return=t,t.child=e}function Z0e(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(kA(s,r)&&e.ref===t.ref)if(xu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(xu=!0);else return t.lanes=e.lanes,rm(e,t,i)}return yB(e,t,n,r,i)}function eye(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Zr(H_,sl),sl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Zr(H_,sl),sl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Zr(H_,sl),sl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,Zr(H_,sl),sl|=r;return Ra(e,t,i,n),t.child}function tye(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function yB(e,t,n,r,i){var s=ku(n)?b1:pa.current;return s=Yw(t,s),cw(t,i),n=GH(e,t,n,r,s,i),r=YH(),e!==null&&!xu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,rm(e,t,i)):(vi&&r&&$H(t),t.flags|=1,Ra(e,t,n,i),t.child)}function Qre(e,t,n,r,i){if(ku(n)){var s=!0;OP(t)}else s=!1;if(cw(t,i),t.stateNode===null)gD(e,t),X0e(t,n,r),mB(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=gc(l):(l=ku(n)?b1:pa.current,l=Yw(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&qre(t,o,r,l),hg=!1;var d=t.memoizedState;o.state=d,jP(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Iu.current||hg?(typeof c=="function"&&(pB(t,n,c,r),u=t.memoizedState),(a=hg||Hre(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,k0e(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:tf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=gc(u):(u=ku(n)?b1:pa.current,u=Yw(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&qre(t,o,r,u),hg=!1,d=t.memoizedState,o.state=d,jP(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Iu.current||hg?(typeof h=="function"&&(pB(t,n,h,r),p=t.memoizedState),(l=hg||Hre(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return vB(e,t,n,r,s,i)}function vB(e,t,n,r,i,s){tye(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Mre(t,n,!1),rm(e,t,s);r=t.stateNode,g8e.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=Xw(t,e.child,null,s),t.child=Xw(t,null,a,s)):Ra(e,t,a,s),t.memoizedState=r.state,i&&Mre(t,n,!0),t.child}function nye(e){var t=e.stateNode;t.pendingContext?$re(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$re(e,t.context,!1),VH(e,t.containerInfo)}function Jre(e,t,n,r,i){return Kw(),LH(i),t.flags|=256,Ra(e,t,n,r),t.child}var bB={dehydrated:null,treeContext:null,retryLane:0};function _B(e){return{baseLanes:e,cachePool:null,transitions:null}}function rye(e,t,n){var r=t.pendingProps,i=Ci.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Zr(Ci,i&1),e===null)return dB(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=yM(o,r,0,null),e=e1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=_B(n),t.memoizedState=bB,e):QH(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return y8e(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=e0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=e0(a,s):(s=e1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?_B(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=bB,r}return s=e.child,e=s.sibling,r=e0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function QH(e,t){return t=yM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function DR(e,t,n,r){return r!==null&&LH(r),Xw(t,e.child,null,n),e=QH(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function y8e(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=m5(Error(Ze(422))),DR(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=yM({mode:"visible",children:r.children},i,0,null),s=e1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&Xw(t,e.child,null,o),t.child.memoizedState=_B(o),t.memoizedState=bB,s);if(!(t.mode&1))return DR(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ze(419)),r=m5(s,r,void 0),DR(e,t,o,r)}if(a=(o&e.childLanes)!==0,xu||a){if(r=no,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,nm(e,i),Cf(r,e,i,-1))}return rq(),r=m5(Error(Ze(421))),DR(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=R8e.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,dl=Xg(i.nextSibling),wl=t,vi=!0,uf=null,e!==null&&(tc[nc++]=Ip,tc[nc++]=kp,tc[nc++]=_1,Ip=e.id,kp=e.overflow,_1=t),t=QH(t,r.children),t.flags|=4096,t)}function Zre(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hB(e.return,t,n)}function g5(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function iye(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ra(e,t,r.children,n),r=Ci.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Zre(e,n,t);else if(e.tag===19)Zre(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Zr(Ci,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&BP(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),g5(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&BP(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}g5(t,!0,n,null,s);break;case"together":g5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function gD(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function rm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),E1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Ze(153));if(t.child!==null){for(e=t.child,n=e0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=e0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function v8e(e,t,n){switch(t.tag){case 3:nye(t),Kw();break;case 5:R0e(t);break;case 1:ku(t.type)&&OP(t);break;case 4:VH(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Zr(LP,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Zr(Ci,Ci.current&1),t.flags|=128,null):n&t.child.childLanes?rye(e,t,n):(Zr(Ci,Ci.current&1),e=rm(e,t,n),e!==null?e.sibling:null);Zr(Ci,Ci.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return iye(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Zr(Ci,Ci.current),r)break;return null;case 22:case 23:return t.lanes=0,eye(e,t,n)}return rm(e,t,n)}var sye,wB,oye,aye;sye=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wB=function(){};oye=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ov(Wd.current);var s=null;switch(n){case"input":i=V9(e,i),r=V9(e,r),s=[];break;case"select":i=Ri({},i,{value:void 0}),r=Ri({},r,{value:void 0}),s=[];break;case"textarea":i=W9(e,i),r=W9(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=DP)}Y9(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(EA.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(EA.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&si("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};aye=function(e,t,n,r){n!==r&&(t.flags|=4)};function jS(e,t){if(!vi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ho(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function b8e(e,t,n){var r=t.pendingProps;switch(MH(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ho(t),null;case 1:return ku(t.type)&&PP(),Ho(t),null;case 3:return r=t.stateNode,Qw(),ci(Iu),ci(pa),qH(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(RR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,uf!==null&&(kB(uf),uf=null))),wB(e,t),Ho(t),null;case 5:HH(t);var i=Ov(OA.current);if(n=t.type,e!==null&&t.stateNode!=null)oye(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Ze(166));return Ho(t),null}if(e=Ov(Wd.current),RR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Sd]=t,r[DA]=s,e=(t.mode&1)!==0,n){case"dialog":si("cancel",r),si("close",r);break;case"iframe":case"object":case"embed":si("load",r);break;case"video":case"audio":for(i=0;i<MT.length;i++)si(MT[i],r);break;case"source":si("error",r);break;case"img":case"image":case"link":si("error",r),si("load",r);break;case"details":si("toggle",r);break;case"input":ure(r,s),si("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},si("invalid",r);break;case"textarea":cre(r,s),si("invalid",r)}Y9(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&kR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&kR(r.textContent,a,e),i=["children",""+a]):EA.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&si("scroll",r)}switch(n){case"input":wR(r),lre(r,s,!0);break;case"textarea":wR(r),fre(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=DP)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=$ge(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Sd]=t,e[DA]=r,sye(e,t,!1,!1),t.stateNode=e;e:{switch(o=K9(n,r),n){case"dialog":si("cancel",e),si("close",e),i=r;break;case"iframe":case"object":case"embed":si("load",e),i=r;break;case"video":case"audio":for(i=0;i<MT.length;i++)si(MT[i],e);i=r;break;case"source":si("error",e),i=r;break;case"img":case"image":case"link":si("error",e),si("load",e),i=r;break;case"details":si("toggle",e),i=r;break;case"input":ure(e,r),i=V9(e,r),si("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ri({},r,{value:void 0}),si("invalid",e);break;case"textarea":cre(e,r),i=W9(e,r),si("invalid",e);break;default:i=r}Y9(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Fge(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Mge(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&xA(e,u):typeof u=="number"&&xA(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(EA.hasOwnProperty(s)?u!=null&&s==="onScroll"&&si("scroll",e):u!=null&&wH(e,s,u,o))}switch(n){case"input":wR(e),lre(e,r,!1);break;case"textarea":wR(e),fre(e);break;case"option":r.value!=null&&e.setAttribute("value",""+y0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?ow(e,!!r.multiple,s,!1):r.defaultValue!=null&&ow(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=DP)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ho(t),null;case 6:if(e&&t.stateNode!=null)aye(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Ze(166));if(n=Ov(OA.current),Ov(Wd.current),RR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Sd]=t,(s=r.nodeValue!==n)&&(e=wl,e!==null))switch(e.tag){case 3:kR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&kR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sd]=t,t.stateNode=r}return Ho(t),null;case 13:if(ci(Ci),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vi&&dl!==null&&t.mode&1&&!(t.flags&128))T0e(),Kw(),t.flags|=98560,s=!1;else if(s=RR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(Ze(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ze(317));s[Sd]=t}else Kw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ho(t),s=!1}else uf!==null&&(kB(uf),uf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ci.current&1?Ts===0&&(Ts=3):rq())),t.updateQueue!==null&&(t.flags|=4),Ho(t),null);case 4:return Qw(),wB(e,t),e===null&&RA(t.stateNode.containerInfo),Ho(t),null;case 10:return BH(t.type._context),Ho(t),null;case 17:return ku(t.type)&&PP(),Ho(t),null;case 19:if(ci(Ci),s=t.memoizedState,s===null)return Ho(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)jS(s,!1);else{if(Ts!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=BP(e),o!==null){for(t.flags|=128,jS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Zr(Ci,Ci.current&1|2),t.child}e=e.sibling}s.tail!==null&&ts()>Zw&&(t.flags|=128,r=!0,jS(s,!1),t.lanes=4194304)}else{if(!r)if(e=BP(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),jS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!vi)return Ho(t),null}else 2*ts()-s.renderingStartTime>Zw&&n!==1073741824&&(t.flags|=128,r=!0,jS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ts(),t.sibling=null,n=Ci.current,Zr(Ci,r?n&1|2:n&1),t):(Ho(t),null);case 22:case 23:return nq(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?sl&1073741824&&(Ho(t),t.subtreeFlags&6&&(t.flags|=8192)):Ho(t),null;case 24:return null;case 25:return null}throw Error(Ze(156,t.tag))}function _8e(e,t){switch(MH(t),t.tag){case 1:return ku(t.type)&&PP(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Qw(),ci(Iu),ci(pa),qH(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return HH(t),null;case 13:if(ci(Ci),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Ze(340));Kw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ci(Ci),null;case 4:return Qw(),null;case 10:return BH(t.type._context),null;case 22:case 23:return nq(),null;case 24:return null;default:return null}}var PR=!1,ta=!1,w8e=typeof WeakSet=="function"?WeakSet:Set,xt=null;function V_(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ji(e,t,r)}else n.current=null}function EB(e,t,n){try{n()}catch(r){ji(e,t,r)}}var eie=!1;function E8e(e,t){if(sB=kP,e=d0e(),OH(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(oB={focusedElem:e,selectionRange:n},kP=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:tf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ze(163))}}catch(w){ji(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=eie,eie=!1,p}function RC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&EB(t,n,s)}i=i.next}while(i!==r)}}function mM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function xB(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function uye(e){var t=e.alternate;t!==null&&(e.alternate=null,uye(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Sd],delete t[DA],delete t[lB],delete t[i8e],delete t[s8e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function lye(e){return e.tag===5||e.tag===3||e.tag===4}function tie(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||lye(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function SB(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=DP));else if(r!==4&&(e=e.child,e!==null))for(SB(e,t,n),e=e.sibling;e!==null;)SB(e,t,n),e=e.sibling}function TB(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(TB(e,t,n),e=e.sibling;e!==null;)TB(e,t,n),e=e.sibling}var yo=null,rf=!1;function Zm(e,t,n){for(n=n.child;n!==null;)cye(e,t,n),n=n.sibling}function cye(e,t,n){if(qd&&typeof qd.onCommitFiberUnmount=="function")try{qd.onCommitFiberUnmount(aM,n)}catch{}switch(n.tag){case 5:ta||V_(n,t);case 6:var r=yo,i=rf;yo=null,Zm(e,t,n),yo=r,rf=i,yo!==null&&(rf?(e=yo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):yo.removeChild(n.stateNode));break;case 18:yo!==null&&(rf?(e=yo,n=n.stateNode,e.nodeType===8?l5(e.parentNode,n):e.nodeType===1&&l5(e,n),AA(e)):l5(yo,n.stateNode));break;case 4:r=yo,i=rf,yo=n.stateNode.containerInfo,rf=!0,Zm(e,t,n),yo=r,rf=i;break;case 0:case 11:case 14:case 15:if(!ta&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&EB(n,t,o),i=i.next}while(i!==r)}Zm(e,t,n);break;case 1:if(!ta&&(V_(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){ji(n,t,a)}Zm(e,t,n);break;case 21:Zm(e,t,n);break;case 22:n.mode&1?(ta=(r=ta)||n.memoizedState!==null,Zm(e,t,n),ta=r):Zm(e,t,n);break;default:Zm(e,t,n)}}function nie(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new w8e),t.forEach(function(r){var i=N8e.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:yo=a.stateNode,rf=!1;break e;case 3:yo=a.stateNode.containerInfo,rf=!0;break e;case 4:yo=a.stateNode.containerInfo,rf=!0;break e}a=a.return}if(yo===null)throw Error(Ze(160));cye(s,o,i),yo=null,rf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){ji(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fye(t,e),t=t.sibling}function fye(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(zc(t,e),ad(e),r&4){try{RC(3,e,e.return),mM(3,e)}catch(m){ji(e,e.return,m)}try{RC(5,e,e.return)}catch(m){ji(e,e.return,m)}}break;case 1:zc(t,e),ad(e),r&512&&n!==null&&V_(n,n.return);break;case 5:if(zc(t,e),ad(e),r&512&&n!==null&&V_(n,n.return),e.flags&32){var i=e.stateNode;try{xA(i,"")}catch(m){ji(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Pge(i,s),K9(a,o);var l=K9(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Fge(i,f):c==="dangerouslySetInnerHTML"?Mge(i,f):c==="children"?xA(i,f):wH(i,c,f,l)}switch(a){case"input":H9(i,s);break;case"textarea":Oge(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?ow(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?ow(i,!!s.multiple,s.defaultValue,!0):ow(i,!!s.multiple,s.multiple?[]:"",!1))}i[DA]=s}catch(m){ji(e,e.return,m)}}break;case 6:if(zc(t,e),ad(e),r&4){if(e.stateNode===null)throw Error(Ze(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){ji(e,e.return,m)}}break;case 3:if(zc(t,e),ad(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{AA(t.containerInfo)}catch(m){ji(e,e.return,m)}break;case 4:zc(t,e),ad(e);break;case 13:zc(t,e),ad(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(eq=ts())),r&4&&nie(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ta=(l=ta)||c,zc(t,e),ta=l):zc(t,e),ad(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:RC(4,d,d.return);break;case 1:V_(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){ji(r,n,m)}}break;case 5:V_(d,d.return);break;case 22:if(d.memoizedState!==null){iie(f);continue}}h!==null?(h.return=d,xt=h):iie(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Lge("display",o))}catch(m){ji(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){ji(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:zc(t,e),ad(e),r&4&&nie(e);break;case 21:break;default:zc(t,e),ad(e)}}function ad(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(lye(n)){var r=n;break e}n=n.return}throw Error(Ze(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xA(i,""),r.flags&=-33);var s=tie(e);TB(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tie(e);SB(e,a,o);break;default:throw Error(Ze(161))}}catch(u){ji(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function x8e(e,t,n){xt=e,dye(e)}function dye(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||PR;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ta;a=PR;var l=ta;if(PR=o,(ta=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?sie(i):u!==null?(u.return=o,xt=u):sie(i);for(;s!==null;)xt=s,dye(s),s=s.sibling;xt=i,PR=a,ta=l}rie(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):rie(e)}}function rie(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ta||mM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ta)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:tf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Ure(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Ure(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&AA(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ze(163))}ta||t.flags&512&&xB(t)}catch(d){ji(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function iie(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function sie(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mM(4,t)}catch(u){ji(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){ji(t,i,u)}}var s=t.return;try{xB(t)}catch(u){ji(t,s,u)}break;case 5:var o=t.return;try{xB(t)}catch(u){ji(t,o,u)}}}catch(u){ji(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var S8e=Math.ceil,VP=Am.ReactCurrentDispatcher,JH=Am.ReactCurrentOwner,hc=Am.ReactCurrentBatchConfig,or=0,no=null,ps=null,To=0,sl=0,H_=oy(0),Ts=0,FA=null,E1=0,gM=0,ZH=0,NC=null,mu=null,eq=0,Zw=1/0,cp=null,HP=!1,CB=null,Jg=null,OR=!1,Dg=null,qP=0,DC=0,AB=null,yD=-1,vD=0;function Ua(){return or&6?ts():yD!==-1?yD:yD=ts()}function Zg(e){return e.mode&1?or&2&&To!==0?To&-To:a8e.transition!==null?(vD===0&&(vD=Xge()),vD):(e=Pr,e!==0||(e=window.event,e=e===void 0?16:r0e(e.type)),e):1}function Cf(e,t,n,r){if(50<DC)throw DC=0,AB=null,Error(Ze(185));fI(e,n,r),(!(or&2)||e!==no)&&(e===no&&(!(or&2)&&(gM|=n),Ts===4&&Eg(e,To)),Ru(e,r),n===1&&or===0&&!(t.mode&1)&&(Zw=ts()+500,dM&&ay()))}function Ru(e,t){var n=e.callbackNode;a5e(e,t);var r=IP(e,e===no?To:0);if(r===0)n!==null&&pre(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&pre(n),t===1)e.tag===0?o8e(oie.bind(null,e)):E0e(oie.bind(null,e)),n8e(function(){!(or&6)&&ay()}),n=null;else{switch(Qge(r)){case 1:n=CH;break;case 4:n=Yge;break;case 16:n=AP;break;case 536870912:n=Kge;break;default:n=AP}n=_ye(n,hye.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function hye(e,t){if(yD=-1,vD=0,or&6)throw Error(Ze(327));var n=e.callbackNode;if(fw()&&e.callbackNode!==n)return null;var r=IP(e,e===no?To:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=WP(e,r);else{t=r;var i=or;or|=2;var s=mye();(no!==e||To!==t)&&(cp=null,Zw=ts()+500,Zv(e,t));do try{A8e();break}catch(a){pye(e,a)}while(!0);jH(),VP.current=s,or=i,ps!==null?t=0:(no=null,To=0,t=Ts)}if(t!==0){if(t===2&&(i=eB(e),i!==0&&(r=i,t=IB(e,i))),t===1)throw n=FA,Zv(e,0),Eg(e,r),Ru(e,ts()),n;if(t===6)Eg(e,r);else{if(i=e.current.alternate,!(r&30)&&!T8e(i)&&(t=WP(e,r),t===2&&(s=eB(e),s!==0&&(r=s,t=IB(e,s))),t===1))throw n=FA,Zv(e,0),Eg(e,r),Ru(e,ts()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Ze(345));case 2:sv(e,mu,cp);break;case 3:if(Eg(e,r),(r&130023424)===r&&(t=eq+500-ts(),10<t)){if(IP(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Ua(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=uB(sv.bind(null,e,mu,cp),t);break}sv(e,mu,cp);break;case 4:if(Eg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Tf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ts()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*S8e(r/1960))-r,10<r){e.timeoutHandle=uB(sv.bind(null,e,mu,cp),r);break}sv(e,mu,cp);break;case 5:sv(e,mu,cp);break;default:throw Error(Ze(329))}}}return Ru(e,ts()),e.callbackNode===n?hye.bind(null,e):null}function IB(e,t){var n=NC;return e.current.memoizedState.isDehydrated&&(Zv(e,t).flags|=256),e=WP(e,t),e!==2&&(t=mu,mu=n,t!==null&&kB(t)),e}function kB(e){mu===null?mu=e:mu.push.apply(mu,e)}function T8e(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$f(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Eg(e,t){for(t&=~ZH,t&=~gM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Tf(t),r=1<<n;e[n]=-1,t&=~r}}function oie(e){if(or&6)throw Error(Ze(327));fw();var t=IP(e,0);if(!(t&1))return Ru(e,ts()),null;var n=WP(e,t);if(e.tag!==0&&n===2){var r=eB(e);r!==0&&(t=r,n=IB(e,r))}if(n===1)throw n=FA,Zv(e,0),Eg(e,t),Ru(e,ts()),n;if(n===6)throw Error(Ze(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sv(e,mu,cp),Ru(e,ts()),null}function tq(e,t){var n=or;or|=1;try{return e(t)}finally{or=n,or===0&&(Zw=ts()+500,dM&&ay())}}function x1(e){Dg!==null&&Dg.tag===0&&!(or&6)&&fw();var t=or;or|=1;var n=hc.transition,r=Pr;try{if(hc.transition=null,Pr=1,e)return e()}finally{Pr=r,hc.transition=n,or=t,!(or&6)&&ay()}}function nq(){sl=H_.current,ci(H_)}function Zv(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,t8e(n)),ps!==null)for(n=ps.return;n!==null;){var r=n;switch(MH(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&PP();break;case 3:Qw(),ci(Iu),ci(pa),qH();break;case 5:HH(r);break;case 4:Qw();break;case 13:ci(Ci);break;case 19:ci(Ci);break;case 10:BH(r.type._context);break;case 22:case 23:nq()}n=n.return}if(no=e,ps=e=e0(e.current,null),To=sl=t,Ts=0,FA=null,ZH=gM=E1=0,mu=NC=null,Pv!==null){for(t=0;t<Pv.length;t++)if(n=Pv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Pv=null}return e}function pye(e,t){do{var n=ps;try{if(jH(),pD.current=zP,UP){for(var r=Ai.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}UP=!1}if(w1=0,Hs=bs=Ai=null,kC=!1,$A=0,JH.current=null,n===null||n.return===null){Ts=1,FA=t,ps=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=To,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Gre(o);if(h!==null){h.flags&=-257,Yre(h,o,a,s,t),h.mode&1&&Wre(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Wre(s,l,t),rq();break e}u=Error(Ze(426))}}else if(vi&&a.mode&1){var g=Gre(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Yre(g,o,a,s,t),LH(Jw(u,a));break e}}s=u=Jw(u,a),Ts!==4&&(Ts=2),NC===null?NC=[s]:NC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Q0e(s,u,t);Bre(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Jg===null||!Jg.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=J0e(s,a,t);Bre(s,w);break e}}s=s.return}while(s!==null)}yye(n)}catch(x){t=x,ps===n&&n!==null&&(ps=n=n.return);continue}break}while(!0)}function mye(){var e=VP.current;return VP.current=zP,e===null?zP:e}function rq(){(Ts===0||Ts===3||Ts===2)&&(Ts=4),no===null||!(E1&268435455)&&!(gM&268435455)||Eg(no,To)}function WP(e,t){var n=or;or|=2;var r=mye();(no!==e||To!==t)&&(cp=null,Zv(e,t));do try{C8e();break}catch(i){pye(e,i)}while(!0);if(jH(),or=n,VP.current=r,ps!==null)throw Error(Ze(261));return no=null,To=0,Ts}function C8e(){for(;ps!==null;)gye(ps)}function A8e(){for(;ps!==null&&!JFe();)gye(ps)}function gye(e){var t=bye(e.alternate,e,sl);e.memoizedProps=e.pendingProps,t===null?yye(e):ps=t,JH.current=null}function yye(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=_8e(n,t),n!==null){n.flags&=32767,ps=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ts=6,ps=null;return}}else if(n=b8e(n,t,sl),n!==null){ps=n;return}if(t=t.sibling,t!==null){ps=t;return}ps=t=e}while(t!==null);Ts===0&&(Ts=5)}function sv(e,t,n){var r=Pr,i=hc.transition;try{hc.transition=null,Pr=1,I8e(e,t,n,r)}finally{hc.transition=i,Pr=r}return null}function I8e(e,t,n,r){do fw();while(Dg!==null);if(or&6)throw Error(Ze(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ze(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(u5e(e,s),e===no&&(ps=no=null,To=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||OR||(OR=!0,_ye(AP,function(){return fw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=hc.transition,hc.transition=null;var o=Pr;Pr=1;var a=or;or|=4,JH.current=null,E8e(e,n),fye(n,e),Y5e(oB),kP=!!sB,oB=sB=null,e.current=n,x8e(n),ZFe(),or=a,Pr=o,hc.transition=s}else e.current=n;if(OR&&(OR=!1,Dg=e,qP=i),s=e.pendingLanes,s===0&&(Jg=null),n5e(n.stateNode),Ru(e,ts()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(HP)throw HP=!1,e=CB,CB=null,e;return qP&1&&e.tag!==0&&fw(),s=e.pendingLanes,s&1?e===AB?DC++:(DC=0,AB=e):DC=0,ay(),null}function fw(){if(Dg!==null){var e=Qge(qP),t=hc.transition,n=Pr;try{if(hc.transition=null,Pr=16>e?16:e,Dg===null)var r=!1;else{if(e=Dg,Dg=null,qP=0,or&6)throw Error(Ze(331));var i=or;for(or|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:RC(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(uye(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:RC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mM(9,a)}}catch(x){ji(a,a.return,x)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(or=i,ay(),qd&&typeof qd.onPostCommitFiberRoot=="function")try{qd.onPostCommitFiberRoot(aM,e)}catch{}r=!0}return r}finally{Pr=n,hc.transition=t}}return!1}function aie(e,t,n){t=Jw(n,t),t=Q0e(e,t,1),e=Qg(e,t,1),t=Ua(),e!==null&&(fI(e,1,t),Ru(e,t))}function ji(e,t,n){if(e.tag===3)aie(e,e,n);else for(;t!==null;){if(t.tag===3){aie(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jg===null||!Jg.has(r))){e=Jw(n,e),e=J0e(t,e,1),t=Qg(t,e,1),e=Ua(),t!==null&&(fI(t,1,e),Ru(t,e));break}}t=t.return}}function k8e(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ua(),e.pingedLanes|=e.suspendedLanes&n,no===e&&(To&n)===n&&(Ts===4||Ts===3&&(To&130023424)===To&&500>ts()-eq?Zv(e,0):ZH|=n),Ru(e,t)}function vye(e,t){t===0&&(e.mode&1?(t=SR,SR<<=1,!(SR&130023424)&&(SR=4194304)):t=1);var n=Ua();e=nm(e,t),e!==null&&(fI(e,t,n),Ru(e,n))}function R8e(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),vye(e,n)}function N8e(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ze(314))}r!==null&&r.delete(t),vye(e,n)}var bye;bye=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Iu.current)xu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return xu=!1,v8e(e,t,n);xu=!!(e.flags&131072)}else xu=!1,vi&&t.flags&1048576&&x0e(t,MP,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;gD(e,t),e=t.pendingProps;var i=Yw(t,pa.current);cw(t,n),i=GH(null,t,r,e,i,n);var s=YH();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ku(r)?(s=!0,OP(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zH(t),i.updater=pM,t.stateNode=i,i._reactInternals=t,mB(t,r,e,n),t=vB(null,t,r,!0,s,n)):(t.tag=0,vi&&s&&$H(t),Ra(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(gD(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=P8e(r),e=tf(r,e),i){case 0:t=yB(null,t,r,e,n);break e;case 1:t=Qre(null,t,r,e,n);break e;case 11:t=Kre(null,t,r,e,n);break e;case 14:t=Xre(null,t,r,tf(r.type,e),n);break e}throw Error(Ze(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),yB(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),Qre(e,t,r,i,n);case 3:e:{if(nye(t),e===null)throw Error(Ze(387));r=t.pendingProps,s=t.memoizedState,i=s.element,k0e(e,t),jP(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Jw(Error(Ze(423)),t),t=Jre(e,t,r,n,i);break e}else if(r!==i){i=Jw(Error(Ze(424)),t),t=Jre(e,t,r,n,i);break e}else for(dl=Xg(t.stateNode.containerInfo.firstChild),wl=t,vi=!0,uf=null,n=A0e(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Kw(),r===i){t=rm(e,t,n);break e}Ra(e,t,r,n)}t=t.child}return t;case 5:return R0e(t),e===null&&dB(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,aB(r,i)?o=null:s!==null&&aB(r,s)&&(t.flags|=32),tye(e,t),Ra(e,t,o,n),t.child;case 6:return e===null&&dB(t),null;case 13:return rye(e,t,n);case 4:return VH(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Xw(t,null,r,n):Ra(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),Kre(e,t,r,i,n);case 7:return Ra(e,t,t.pendingProps,n),t.child;case 8:return Ra(e,t,t.pendingProps.children,n),t.child;case 12:return Ra(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,Zr(LP,r._currentValue),r._currentValue=o,s!==null)if($f(s.value,o)){if(s.children===i.children&&!Iu.current){t=rm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Bp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),hB(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ze(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),hB(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ra(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,cw(t,n),i=gc(i),r=r(i),t.flags|=1,Ra(e,t,r,n),t.child;case 14:return r=t.type,i=tf(r,t.pendingProps),i=tf(r.type,i),Xre(e,t,r,i,n);case 15:return Z0e(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:tf(r,i),gD(e,t),t.tag=1,ku(r)?(e=!0,OP(t)):e=!1,cw(t,n),X0e(t,r,i),mB(t,r,i,n),vB(null,t,r,!0,e,n);case 19:return iye(e,t,n);case 22:return eye(e,t,n)}throw Error(Ze(156,t.tag))};function _ye(e,t){return Gge(e,t)}function D8e(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function uc(e,t,n,r){return new D8e(e,t,n,r)}function iq(e){return e=e.prototype,!(!e||!e.isReactComponent)}function P8e(e){if(typeof e=="function")return iq(e)?1:0;if(e!=null){if(e=e.$$typeof,e===xH)return 11;if(e===SH)return 14}return 2}function e0(e,t){var n=e.alternate;return n===null?(n=uc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bD(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")iq(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case O_:return e1(n.children,i,s,t);case EH:o=8,i|=8;break;case j9:return e=uc(12,n,t,i|2),e.elementType=j9,e.lanes=s,e;case B9:return e=uc(13,n,t,i),e.elementType=B9,e.lanes=s,e;case U9:return e=uc(19,n,t,i),e.elementType=U9,e.lanes=s,e;case Rge:return yM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ige:o=10;break e;case kge:o=9;break e;case xH:o=11;break e;case SH:o=14;break e;case dg:o=16,r=null;break e}throw Error(Ze(130,e==null?e:typeof e,""))}return t=uc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function e1(e,t,n,r){return e=uc(7,e,r,t),e.lanes=n,e}function yM(e,t,n,r){return e=uc(22,e,r,t),e.elementType=Rge,e.lanes=n,e.stateNode={isHidden:!1},e}function y5(e,t,n){return e=uc(6,e,null,t),e.lanes=n,e}function v5(e,t,n){return t=uc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function O8e(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=JF(0),this.expirationTimes=JF(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=JF(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function sq(e,t,n,r,i,s,o,a,u){return e=new O8e(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=uc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zH(s),e}function $8e(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function wye(e){if(!e)return v0;e=e._reactInternals;e:{if(fb(e)!==e||e.tag!==1)throw Error(Ze(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ku(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Ze(171))}if(e.tag===1){var n=e.type;if(ku(n))return w0e(e,n,t)}return t}function Eye(e,t,n,r,i,s,o,a,u){return e=sq(n,r,!0,e,i,s,o,a,u),e.context=wye(null),n=e.current,r=Ua(),i=Zg(n),s=Bp(r,i),s.callback=t??null,Qg(n,s,i),e.current.lanes=i,fI(e,i,r),Ru(e,r),e}function vM(e,t,n,r){var i=t.current,s=Ua(),o=Zg(i);return n=wye(n),t.context===null?t.context=n:t.pendingContext=n,t=Bp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Qg(i,t,o),e!==null&&(Cf(e,i,o,s),hD(e,i,o)),o}function GP(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uie(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function oq(e,t){uie(e,t),(e=e.alternate)&&uie(e,t)}function M8e(){return null}var xye=typeof reportError=="function"?reportError:function(e){console.error(e)};function aq(e){this._internalRoot=e}bM.prototype.render=aq.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Ze(409));vM(e,t,null,null)};bM.prototype.unmount=aq.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;x1(function(){vM(null,e,null,null)}),t[tm]=null}};function bM(e){this._internalRoot=e}bM.prototype.unstable_scheduleHydration=function(e){if(e){var t=e0e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<wg.length&&t!==0&&t<wg[n].priority;n++);wg.splice(n,0,e),n===0&&n0e(e)}};function uq(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function _M(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function lie(){}function L8e(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=GP(o);s.call(l)}}var o=Eye(t,r,e,0,null,!1,!1,"",lie);return e._reactRootContainer=o,e[tm]=o.current,RA(e.nodeType===8?e.parentNode:e),x1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=GP(u);a.call(l)}}var u=sq(e,0,!1,null,null,!1,!1,"",lie);return e._reactRootContainer=u,e[tm]=u.current,RA(e.nodeType===8?e.parentNode:e),x1(function(){vM(t,u,n,r)}),u}function wM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=GP(o);a.call(u)}}vM(t,o,e,i)}else o=L8e(n,t,e,i,r);return GP(o)}Jge=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$T(t.pendingLanes);n!==0&&(AH(t,n|1),Ru(t,ts()),!(or&6)&&(Zw=ts()+500,ay()))}break;case 13:x1(function(){var r=nm(e,1);if(r!==null){var i=Ua();Cf(r,e,1,i)}}),oq(e,1)}};IH=function(e){if(e.tag===13){var t=nm(e,134217728);if(t!==null){var n=Ua();Cf(t,e,134217728,n)}oq(e,134217728)}};Zge=function(e){if(e.tag===13){var t=Zg(e),n=nm(e,t);if(n!==null){var r=Ua();Cf(n,e,t,r)}oq(e,t)}};e0e=function(){return Pr};t0e=function(e,t){var n=Pr;try{return Pr=e,t()}finally{Pr=n}};Q9=function(e,t,n){switch(t){case"input":if(H9(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=fM(r);if(!i)throw Error(Ze(90));Dge(r),H9(r,i)}}}break;case"textarea":Oge(e,n);break;case"select":t=n.value,t!=null&&ow(e,!!n.multiple,t,!1)}};Uge=tq;zge=x1;var F8e={usingClientEntryPoint:!1,Events:[hI,F_,fM,jge,Bge,tq]},BS={findFiberByHostInstance:Dv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},j8e={bundleType:BS.bundleType,version:BS.version,rendererPackageName:BS.rendererPackageName,rendererConfig:BS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Am.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qge(e),e===null?null:e.stateNode},findFiberByHostInstance:BS.findFiberByHostInstance||M8e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $R=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$R.isDisabled&&$R.supportsFiber)try{aM=$R.inject(j8e),qd=$R}catch{}}Bl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F8e;Bl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!uq(t))throw Error(Ze(200));return $8e(e,t,null,n)};Bl.createRoot=function(e,t){if(!uq(e))throw Error(Ze(299));var n=!1,r="",i=xye;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=sq(e,1,!1,null,null,n,!1,r,i),e[tm]=t.current,RA(e.nodeType===8?e.parentNode:e),new aq(t)};Bl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ze(188)):(e=Object.keys(e).join(","),Error(Ze(268,e)));return e=qge(t),e=e===null?null:e.stateNode,e};Bl.flushSync=function(e){return x1(e)};Bl.hydrate=function(e,t,n){if(!_M(t))throw Error(Ze(200));return wM(null,e,t,!0,n)};Bl.hydrateRoot=function(e,t,n){if(!uq(e))throw Error(Ze(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=xye;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=Eye(t,null,e,1,n??null,i,!1,s,o),e[tm]=t.current,RA(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new bM(t)};Bl.render=function(e,t,n){if(!_M(t))throw Error(Ze(200));return wM(null,e,t,!1,n)};Bl.unmountComponentAtNode=function(e){if(!_M(e))throw Error(Ze(40));return e._reactRootContainer?(x1(function(){wM(null,null,e,!1,function(){e._reactRootContainer=null,e[tm]=null})}),!0):!1};Bl.unstable_batchedUpdates=tq;Bl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!_M(n))throw Error(Ze(200));if(e==null||e._reactInternals===void 0)throw Error(Ze(38));return wM(e,t,n,!1,r)};Bl.version="18.3.1-next-f1338f8080-20240426";function Sye(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sye)}catch(e){console.error(e)}}Sye(),Sge.exports=Bl;var mI=Sge.exports;const B8e=jl(mI);var cie=mI;L9.createRoot=cie.createRoot,L9.hydrateRoot=cie.hydrateRoot;var Td=function(){return Td=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Td.apply(this,arguments)};function gI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function wp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function fie(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function U8e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Wn(e){return this instanceof Wn?(this.v=e,this):new Wn(e)}function $v(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Wn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function b5(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Wn(e[i](o)),done:!1}:s?s(o):o}:s}}function PC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof fie=="function"?fie(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var _D="right-scroll-bar-position",wD="width-before-scroll-bar",z8e="with-scroll-bars-hidden",V8e="--removed-body-scroll-bar-size";function _5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function H8e(e,t){var n=N.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var q8e=typeof window<"u"?N.useLayoutEffect:N.useEffect,die=new WeakMap;function W8e(e,t){var n=H8e(null,function(r){return e.forEach(function(i){return _5(i,r)})});return q8e(function(){var r=die.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||_5(a,null)}),s.forEach(function(a){i.has(a)||_5(a,o)})}die.set(n,e)},[e]),n}function G8e(e){return e}function Y8e(e,t){t===void 0&&(t=G8e);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function K8e(e){e===void 0&&(e={});var t=Y8e(null);return t.options=Td({async:!0,ssr:!1},e),t}var Tye=function(e){var t=e.sideCar,n=gI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return N.createElement(r,Td({},n))};Tye.isSideCarExport=!0;function X8e(e,t){return e.useMedium(t),Tye}var Cye=K8e(),w5=function(){},EM=N.forwardRef(function(e,t){var n=N.useRef(null),r=N.useState({onScrollCapture:w5,onWheelCapture:w5,onTouchMoveCapture:w5}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=gI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,x=W8e([n,t]),T=Td(Td({},b),i);return N.createElement(N.Fragment,null,c&&N.createElement(w,{sideCar:Cye,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?N.cloneElement(N.Children.only(a),Td(Td({},T),{ref:x})):N.createElement(y,Td({},T,{className:u,ref:x}),a))});EM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};EM.classNames={fullWidth:wD,zeroRight:_D};var Q8e=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function J8e(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Q8e();return t&&e.setAttribute("nonce",t),e}function Z8e(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function eje(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var tje=function(){var e=0,t=null;return{add:function(n){e==0&&(t=J8e())&&(Z8e(t,n),eje(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},nje=function(){var e=tje();return function(t,n){N.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},Aye=function(){var e=nje(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},rje={left:0,top:0,right:0,gap:0},E5=function(e){return parseInt(e||"",10)||0},ije=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[E5(n),E5(r),E5(i)]},sje=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return rje;var t=ije(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},oje=Aye(),dw="data-scroll-locked",aje=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(z8e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(dw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(_D,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(wD,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(_D," .").concat(_D,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(wD," .").concat(wD,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(dw,`] {
    `).concat(V8e,": ").concat(a,`px;
  }
`)},hie=function(){var e=parseInt(document.body.getAttribute(dw)||"0",10);return isFinite(e)?e:0},uje=function(){N.useEffect(function(){return document.body.setAttribute(dw,(hie()+1).toString()),function(){var e=hie()-1;e<=0?document.body.removeAttribute(dw):document.body.setAttribute(dw,e.toString())}},[])},lje=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;uje();var s=N.useMemo(function(){return sje(i)},[i]);return N.createElement(oje,{styles:aje(s,!t,i,n?"":"!important")})},RB=!1;if(typeof window<"u")try{var MR=Object.defineProperty({},"passive",{get:function(){return RB=!0,!0}});window.addEventListener("test",MR,MR),window.removeEventListener("test",MR,MR)}catch{RB=!1}var Xb=RB?{passive:!1}:!1,cje=function(e){return e.tagName==="TEXTAREA"},Iye=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!cje(e)&&n[t]==="visible")},fje=function(e){return Iye(e,"overflowY")},dje=function(e){return Iye(e,"overflowX")},pie=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=kye(e,r);if(i){var s=Rye(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},hje=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},pje=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},kye=function(e,t){return e==="v"?fje(t):dje(t)},Rye=function(e,t){return e==="v"?hje(t):pje(t)},mje=function(e,t){return e==="h"&&t==="rtl"?-1:1},gje=function(e,t,n,r,i){var s=mje(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=Rye(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&kye(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},LR=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},mie=function(e){return[e.deltaX,e.deltaY]},gie=function(e){return e&&"current"in e?e.current:e},yje=function(e,t){return e[0]===t[0]&&e[1]===t[1]},vje=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},bje=0,Qb=[];function _je(e){var t=N.useRef([]),n=N.useRef([0,0]),r=N.useRef(),i=N.useState(bje++)[0],s=N.useState(Aye)[0],o=N.useRef(e);N.useEffect(function(){o.current=e},[e]),N.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=U8e([e.lockRef.current],(e.shards||[]).map(gie),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=N.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=LR(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],x,T=m.target,S=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&T.type==="range")return!1;var C=pie(S,T);if(!C)return!0;if(C?x=S:(x=S==="v"?"h":"v",C=pie(S,T)),!C)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=x),!x)return!0;var A=r.current||x;return gje(A,g,m,A==="h"?b:w,!0)},[]),u=N.useCallback(function(m){var g=m;if(!(!Qb.length||Qb[Qb.length-1]!==s)){var y="deltaY"in g?mie(g):LR(g),v=t.current.filter(function(x){return x.name===g.type&&(x.target===g.target||g.target===x.shadowParent)&&yje(x.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(gie).filter(Boolean).filter(function(x){return x.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=N.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:wje(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=N.useCallback(function(m){n.current=LR(m),r.current=void 0},[]),f=N.useCallback(function(m){l(m.type,mie(m),m.target,a(m,e.lockRef.current))},[]),d=N.useCallback(function(m){l(m.type,LR(m),m.target,a(m,e.lockRef.current))},[]);N.useEffect(function(){return Qb.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,Xb),document.addEventListener("touchmove",u,Xb),document.addEventListener("touchstart",c,Xb),function(){Qb=Qb.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,Xb),document.removeEventListener("touchmove",u,Xb),document.removeEventListener("touchstart",c,Xb)}},[]);var h=e.removeScrollBar,p=e.inert;return N.createElement(N.Fragment,null,p?N.createElement(s,{styles:vje(i)}):null,h?N.createElement(lje,{gapMode:e.gapMode}):null)}function wje(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Eje=X8e(Cye,_je);var xM=N.forwardRef(function(e,t){return N.createElement(EM,Td({},e,{ref:t,sideCar:Eje}))});xM.classNames=EM.classNames;function Ii(e){return Object.keys(e)}function x5(e){return e&&typeof e=="object"&&!Array.isArray(e)}function lq(e,t){const n={...e},r=t;return x5(e)&&x5(t)&&Object.keys(t).forEach(i=>{x5(r[i])&&i in e?n[i]=lq(n[i],r[i]):n[i]=r[i]}),n}function xje(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Sje(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function NB(e){const t=Sje(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function S5(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function Nye(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?S5(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?S5(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?S5(s):s}}return r}return n}const Te=Nye("rem",{shouldScale:!0}),YP=Nye("em");function mx(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function Dye(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Im(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==N.Fragment:!1}function Oo(e){const t=N.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=N.useContext(t);if(i===null)throw new Error(e);return i}]}function gx(e=null){const t=N.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>N.useContext(t)]}function yie(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function KP(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function Tje(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function Cje(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function Aje(e,t,n){return KP(e,n)===KP(t,n)}function Pye({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=KP(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>Aje(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=Cje(l,u,r),f=Tje(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const Ije={app:100,modal:200,popover:300,overlay:400,max:9999};function kc(e){return Ije[e]}const kje=()=>{};function Rje(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||kje:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function yn(e,t="size",n=!0){if(e!==void 0)return Dye(e)?n?Te(e):e:`var(--${t}-${e})`}function Cl(e){return yn(e,"mantine-spacing")}function ii(e){return e===void 0?"var(--mantine-radius-default)":yn(e,"mantine-radius")}function ro(e){return yn(e,"mantine-font-size")}function Oye(e){return yn(e,"mantine-line-height",!1)}function cq(e){if(e)return yn(e,"mantine-shadow",!1)}function hl(e,t){return n=>{e==null||e(n),t==null||t(n)}}function fq(e,t){return e in t.breakpoints?NB(t.breakpoints[e]):NB(e)}function XP(e,t){const n=e.map(r=>({value:r,px:fq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function LT(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Nje(e,t,n){var r;return n?Array.from(((r=KP(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function Dje(){const[e,t]=N.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Fd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function OC(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function vv(e){const t=N.useRef(e);return N.useEffect(()=>{t.current=e}),N.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function SM(e,t){const n=vv(e),r=N.useRef(0);return N.useEffect(()=>()=>window.clearTimeout(r.current),[]),N.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const vie=["mousedown","touchstart"];function Pje(e,t,n){const r=N.useRef();return N.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||vie).forEach(s=>document.addEventListener(s,i)),()=>{(t||vie).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function Oje(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function $je(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function Mje(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=N.useState(n?t:$je(e)),s=N.useRef();return N.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),Oje(s.current,o=>i(o.matches))},[e]),r}const db=typeof document<"u"?N.useLayoutEffect:N.useEffect;function im(e,t){const n=N.useRef(!1);N.useEffect(()=>()=>{n.current=!1},[]),N.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function $ye({opened:e,shouldReturnFocus:t=!0}){const n=N.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return im(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function Lje(e,t="body > :not(script)"){const n=OC(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const Fje=/input|select|textarea|button|object/,Mye="a, input, select, textarea, button, object, [tabindex]";function jje(e){return e.style.display==="none"}function Bje(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(jje(n))return!1;n=n.parentNode}return!0}function Lye(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function DB(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(Lye(e));return(Fje.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&Bje(e)}function Fye(e){const t=Lye(e);return(Number.isNaN(t)||t>=0)&&DB(e)}function Uje(e){return Array.from(e.querySelectorAll(Mye)).filter(Fye)}function zje(e,t){const n=Uje(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function Vje(e=!0){const t=N.useRef(),n=N.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(Mye));o=a.find(Fye)||a.find(DB)||null,!o&&DB(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=N.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=Lje(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return N.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&zje(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const Hje=Hi.useId||(()=>{});function qje(){const e=Hje();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ku(e){const t=qje(),[n,r]=N.useState(t);return db(()=>{r(OC())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function jye(e,t,n){N.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function dq(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function Bye(...e){return t=>{e.forEach(n=>dq(n,t))}}function us(...e){return N.useCallback(Bye(...e),e)}function Uye(e,t,n="ltr"){const r=N.useRef(null),i=N.useRef(!1),s=N.useRef(!1),o=N.useRef(0),[a,u]=N.useState(!1);return N.useEffect(()=>{i.current=!0},[]),N.useEffect(()=>{var v,b;const l=({x:w,y:x})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const S=Fd((w-T.left)/T.width,0,1);e({x:n==="ltr"?S:1-S,y:Fd((x-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function No({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=N.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function hq(e,t){return Mje("(prefers-reduced-motion: reduce)",e,t)}const Wje={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function zye(e){const t=N.useRef(0),n=N.useRef(null),[r,i]=N.useState(Wje),s=N.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return N.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function Gje(e){const[t,{width:n,height:r}]=zye(e);return{ref:t,width:n,height:r}}function t1(e=!1,t){const{onOpen:n,onClose:r}=t||{},[i,s]=N.useState(e),o=N.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=N.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=N.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function Yje(e,t,n={autoInvoke:!1}){const r=N.useRef(null),i=N.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=N.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return N.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function Kje(e,t,n){const r=N.useRef(),i=N.useRef(null);return N.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function Xje(){const[e,t]=N.useState(!1);return N.useEffect(()=>t(!0),[]),e}function Qje(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function Jje(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});db(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>Qje(`${e}:${String(r)}`,i[0])}return[t,n]}var Zje={};function Vye(){return typeof process<"u"&&Zje?"production":"development"}function Hye(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Hye(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Gi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Hye(e))&&(r&&(r+=" "),r+=t);return r}const e9e={};function t9e(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Gi(t[r],i):t[r]=i})}),t}function TM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||e9e);return t9e(s)}function QP({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const qye=N.createContext(null);function uy(){const e=N.useContext(qye);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function n9e(){return uy().cssVariablesResolver}function r9e(){return uy().classNamesPrefix}function pq(){return uy().getStyleNonce}function i9e(){return uy().withStaticClasses}function s9e(){return uy().headless}function o9e(){var e;return(e=uy().stylesTransform)==null?void 0:e.sx}function a9e(){var e;return(e=uy().stylesTransform)==null?void 0:e.styles}function u9e(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function l9e(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function c9e(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function f9e(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function mq(e){return u9e(e)?l9e(e):e.startsWith("rgb")?c9e(e):e.startsWith("hsl")?f9e(e):{r:0,g:0,b:0,a:1}}function FR(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=mq(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function jA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function T5(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function d9e(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function h9e(e){if(e.startsWith("oklch("))return(d9e(e)||0)/100;const{r:t,g:n,b:r}=mq(e),i=t/255,s=n/255,o=r/255,a=T5(i),u=T5(s),l=T5(o);return .2126*a+.7152*u+.0722*l}function US(e,t=.179){return e.startsWith("var(")?!1:h9e(e)>t}function vc({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:US(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:US(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:US(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][jA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:US(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:US(e,t.luminanceThreshold),shade:s,variable:void 0}}function Gr(e,t){const n=vc({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function PB(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Gr(n.from,t),i=Gr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Jl(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=mq(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Jb=Jl,p9e=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=vc({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:FR(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Jl(a,.1),hover:Jl(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:Jl(e,.1),hover:Jl(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Jl(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Jl(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Jl(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:Jl(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:FR(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:FR(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:FR(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:PB(r,t),hover:PB(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},m9e={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},bie="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",gq={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:m9e,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:p9e,autoContrast:!1,luminanceThreshold:.3,fontFamily:bie,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:bie,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function _ie(e){return e==="auto"||e==="dark"||e==="light"}function g9e({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return _ie(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&_ie(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const y9e="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",wie="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function C5(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Eie(e){if(!(e.primaryColor in e.colors))throw new Error(y9e);if(typeof e.primaryShade=="object"&&(!C5(e.primaryShade.dark)||!C5(e.primaryShade.light)))throw new Error(wie);if(typeof e.primaryShade=="number"&&!C5(e.primaryShade))throw new Error(wie)}function v9e(e,t){var r;if(!t)return Eie(e),e;const n=lq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Eie(n),n}const yq=N.createContext(null),b9e=()=>N.useContext(yq)||gq;function Ps(){const e=N.useContext(yq);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function Wye({theme:e,children:t,inherit:n=!0}){const r=b9e(),i=N.useMemo(()=>v9e(n?r:gq,e),[e,r,n]);return _.jsx(yq.Provider,{value:i,children:t})}Wye.displayName="@mantine/core/MantineThemeProvider";function _9e(){const e=Ps(),t=pq(),n=Ii(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=NB(e.breakpoints[i]),a=s?`${o-.1}px`:YP(o-.1),u=s?`${o}px`:YP(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function A5(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function I5(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function w9e(e,t){const n=A5(e.variables),r=n?I5(t,n):"",i=A5(e.dark),s=i?I5(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=A5(e.light),a=o?I5(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function ly({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&vc({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function xie(e,t){return ly({color:e.colors[e.primaryColor][jA(e,t)],theme:e,autoContrast:null})}function jR({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=jA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Jb(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Jb(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Jb(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=jA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Jb(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Jb(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Jb(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function E9e(e){return Array.isArray(e)?e:Array(10).fill(e)}function x9e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Zb(e,t,n){Ii(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const Gye=e=>{const t=jA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":xie(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":xie(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Zb(r.variables,e.breakpoints,"breakpoint"),Zb(r.variables,e.spacing,"spacing"),Zb(r.variables,e.fontSizes,"font-size"),Zb(r.variables,e.lineHeights,"line-height"),Zb(r.variables,e.shadows,"shadow"),Zb(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Ii(e.colors).forEach(s=>{const o=e.colors[s];if(x9e(o)){Object.assign(r.light,jR({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,jR({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,jR({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,jR({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Ii(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function S9e({theme:e,generator:t}){const n=Gye(e),r=t==null?void 0:t(e);return r?lq(n,r):n}const k5=Gye(gq);function T9e(e){const t={variables:{},light:{},dark:{}};return Ii(e.variables).forEach(n=>{k5.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Ii(e.light).forEach(n=>{k5.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Ii(e.dark).forEach(n=>{k5.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function C9e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function Yye({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ps(),r=pq(),i=n9e(),s=S9e({theme:n,generator:i}),o=e===":root"&&t,a=o?T9e(s):s,u=w9e(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":C9e(e)}`}}):null}Yye.displayName="@mantine/CssVariables";function A9e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function e_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function I9e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=N.useRef(),[s,o]=N.useState(()=>e.get(t)),a=r||s,u=N.useCallback(c=>{r||(e_(c,n),o(c),e.set(c))},[e.set,a,r]),l=N.useCallback(()=>{o(t),e_(t,n),e.clear()},[e.clear,t]);return N.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),db(()=>{e_(e.get(t),n)},[]),N.useEffect(()=>{var f;if(r)return e_(r,n),()=>{};r===void 0&&e_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&e_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function k9e({respectReducedMotion:e,getRootElement:t}){db(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}A9e();function Kye({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=g9e(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=I9e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return k9e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(qye.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(Wye,{theme:e,children:[o&&_.jsx(Yye,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(_9e,{}),t]})})}Kye.displayName="@mantine/core/MantineProvider";function km({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Ps();return{resolvedClassNames:TM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:QP({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const R9e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function N9e({theme:e,options:t,unstyled:n}){return Gi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||R9e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function D9e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return TM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Sie({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return TM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function P9e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function O9e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function $9e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function M9e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=TM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function L9e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function F9e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Gi(N9e({theme:e,options:t,unstyled:a||h}),M9e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),L9e({options:t,classes:o,selector:r,unstyled:a}),Sie({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Sie({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),D9e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),P9e({rootSelector:l,selector:r,className:u}),O9e({selector:r,classes:o,unstyled:a||h}),d&&!h&&$9e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function j9e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return QP({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function OB({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...OB({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function B9e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...mx(n[r])}}),t),{})}function U9e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=B9e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function z9e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&j9e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&QP({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&QP({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...U9e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?OB({style:u,theme:e}):null,...OB({style:r==null?void 0:r.style,theme:e})}}function V9e({props:e,stylesCtx:t,themeName:n}){var o;const r=Ps(),i=(o=a9e())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function gt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Ps(),h=r9e(),p=i9e(),m=s9e(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=V9e({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:F9e({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:z9e({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function yx(e,t){return typeof e=="boolean"?e:t.autoContrast}function Ee(e,t,n){var o;const r=Ps(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...mx(n)}}function R5(e){return Ii(e).reduce((t,n)=>e[n]!==void 0?`${t}${xje(n)}:${e[n]};`:t,"").trim()}function H9e({selector:e,styles:t,media:n,container:r}){const i=t?R5(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${R5(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${R5(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function yI(e){const t=pq();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:H9e(e)}})}function vx(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:x,opacity:T,ff:S,fz:C,fw:A,lts:R,ta:k,lh:O,fs:D,tt:$,td:L,w:F,miw:B,maw:U,h:q,mih:P,mah:V,bgsz:W,bgp:j,bgr:H,bga:G,pos:ne,top:pe,left:fe,bottom:de,right:ye,inset:Ae,display:ve,flex:rt,hiddenFrom:ze,visibleFrom:yt,lightHidden:ot,darkHidden:De,sx:Me,...Ye}=e;return{styleProps:mx({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:x,opacity:T,ff:S,fz:C,fw:A,lts:R,ta:k,lh:O,fs:D,tt:$,td:L,w:F,miw:B,maw:U,h:q,mih:P,mah:V,bgsz:W,bgp:j,bgr:H,bga:G,pos:ne,top:pe,left:fe,bottom:de,right:ye,inset:Ae,display:ve,flex:rt,hiddenFrom:ze,visibleFrom:yt,lightHidden:ot,darkHidden:De,sx:Me}),rest:Ye}}const q9e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function vq(e,t){const n=vc({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function W9e(e,t){const n=vc({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:vq(e,t)}function G9e(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),E9e.length>0&&(s+=` ${vq(i.join(" "),t)}`),s.trim()}return e}const Tie={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function Y9e(e){return typeof e=="string"&&e in Tie?Tie[e]:e}const K9e=["h1","h2","h3","h4","h5","h6"];function X9e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&K9e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function Q9e(e){return e}const J9e=["h1","h2","h3","h4","h5","h6"];function Z9e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&J9e.includes(e)?`var(--mantine-${e}-line-height)`:e}function eBe(e){return typeof e=="number"?Te(e):e}function tBe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const N5={color:vq,textColor:W9e,fontSize:X9e,spacing:tBe,identity:Q9e,size:eBe,lineHeight:Z9e,fontFamily:Y9e,border:G9e};function Cie(e){return e.replace("(min-width: ","").replace("em)","")}function nBe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Cie(i))-Number(Cie(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function rBe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function iBe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function sBe(e){return typeof e=="object"&&e!==null?Ii(e).filter(t=>t!=="base"):[]}function oBe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function Xye({styleProps:e,data:t,theme:n}){return nBe(Ii(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=iBe(e[i]);if(!rBe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=N5[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=sBe(e[i]);return o.forEach(l=>{a&&(r.styles[l]=N5[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:N5[s.type](oBe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function CM(){return`__m__-${N.useId().replace(/:/g,"")}`}function bq(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...bq(r,t)}),{}):typeof e=="function"?e(t):e??{}}function Qye(e){return e.startsWith("data-")?e:`data-${e}`}function aBe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[Qye(n)]=e[n]),t},{})}function Jye(e){return e?typeof e=="string"?{[Qye(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...Jye(n)}),{}):aBe(e):null}function $B(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...$B(r,t)}),{}):typeof e=="function"?e(t):e??{}}function uBe({theme:e,style:t,vars:n,styleProps:r}){const i=$B(t,e),s=$B(n,e);return{...i,...s,...r}}const Zye=N.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=Ps(),g=e||"div",{styleProps:y,rest:v}=vx(h),b=o9e(),w=(C=b==null?void 0:b())==null?void 0:C(y.sx),x=CM(),T=Xye({styleProps:y,theme:m,data:q9e}),S={ref:p,style:uBe({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:Gi(r,w,{[x]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":Dye(o)?void 0:o||void 0,size:d,...Jye(s),...v};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(yI,{selector:`.${x}`,styles:T.styles,media:T.media}),typeof f=="function"?f(S):_.jsx(g,{...S})]})});Zye.displayName="@mantine/core/Box";const _e=Zye;function eve(e){return e}function je(e){const t=N.forwardRef(e);return t.extend=eve,t}function Os(e){const t=N.forwardRef(e);return t.extend=eve,t}const lBe=N.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Ah(){return N.useContext(lBe)}function cBe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function D5(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const zS=typeof window<"u"&&window.requestAnimationFrame;function fBe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=N.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=N.useState(r?{}:o),l=p=>{mI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||cBe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}im(()=>{typeof zS=="function"&&zS(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),zS(()=>{const p=D5(i);c({...f(p),height:p})})}:()=>{const p=D5(i);c({...f(p),willChange:"height",height:p}),zS(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=D5(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:Bye(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const dBe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},tve=je((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=Ee("Collapse",dBe,e),c=Ps(),f=hq(),h=(c.respectReducedMotion?f:!1)?0:i,p=fBe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(_e,{...l,children:n}):null:_.jsx(_e,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...bq(o,c)},ref:t,...l}),children:n})});tve.displayName="@mantine/core/Collapse";const[hBe,Rc]=Oo("ScrollArea.Root component was not found in tree");function eE(e,t){const n=vv(t);db(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const pBe=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Rc(),[s,o]=N.useState(0),[a,u]=N.useState(0),l=!!(s&&a);return eE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),eE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),mBe=N.forwardRef((e,t)=>{const n=Rc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(pBe,{...e,ref:t}):null}),gBe={scrollHideDelay:1e3,type:"hover"},nve=N.forwardRef((e,t)=>{const n=Ee("ScrollAreaRoot",gBe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=N.useState(null),[l,c]=N.useState(null),[f,d]=N.useState(null),[h,p]=N.useState(null),[m,g]=N.useState(null),[y,v]=N.useState(0),[b,w]=N.useState(0),[x,T]=N.useState(!1),[S,C]=N.useState(!1),A=us(t,R=>u(R));return _.jsx(hBe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:x,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(_e,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});nve.displayName="@mantine/core/ScrollAreaRoot";function rve(e,t){const n=e/t;return Number.isNaN(n)?0:n}function AM(e){const t=rve(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function ive(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function yBe(e,[t,n]){return Math.min(n,Math.max(t,e))}function Aie(e,t,n="ltr"){const r=AM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=yBe(e,u);return ive([0,o],[0,a])(l)}function vBe(e,t,n,r="ltr"){const i=AM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return ive([u,l],f)(e)}function sve(e,t){return e>0&&e<t}function JP(e){return e?parseInt(e,10):0}function n1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[bBe,ove]=Oo("ScrollAreaScrollbar was not found in tree"),ave=N.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Rc(),[h,p]=N.useState(null),m=us(t,C=>p(C)),g=N.useRef(null),y=N.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=vv(l),x=vv(a),T=SM(c,10),S=C=>{if(g.current){const A=C.clientX-g.current.left,R=C.clientY-g.current.top;u({x:A,y:R})}};return N.useEffect(()=>{const C=A=>{const R=A.target;(h==null?void 0:h.contains(R))&&w(A,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,b,w]),N.useEffect(x,[n,x]),eE(h,T),eE(d.content,T),_.jsx(bBe,{value:{scrollbar:h,hasThumb:r,onThumbChange:vv(i),onThumbPointerUp:vv(s),onThumbPositionChange:x,onThumbPointerDown:vv(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:n1(e.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(C))}),onPointerMove:n1(e.onPointerMove,S),onPointerUp:n1(e.onPointerUp,C=>{const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),_Be=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Rc(),[a,u]=N.useState(),l=N.useRef(null),c=us(t,l,o.onScrollbarXChange);return N.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(ave,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${AM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),sve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:JP(a.paddingLeft),paddingEnd:JP(a.paddingRight)}})}})}),wBe=N.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Rc(),[a,u]=N.useState(),l=N.useRef(null),c=us(t,l,o.onScrollbarYChange);return N.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(ave,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${AM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),sve(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:JP(a.paddingTop),paddingEnd:JP(a.paddingBottom)}})}})}),_q=N.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Ah(),s=Rc(),o=N.useRef(null),a=N.useRef(0),[u,l]=N.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=rve(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>vBe(h,a.current,u,p);return n==="horizontal"?_.jsx(_Be,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Aie(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(wBe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Aie(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),uve=N.forwardRef((e,t)=>{const n=Rc(),{forceMount:r,...i}=e,[s,o]=N.useState(!1),a=e.orientation==="horizontal",u=SM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return eE(n.viewport,u),eE(n.content,u),r||s?_.jsx(_q,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),EBe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Rc(),[s,o]=N.useState(!1);return N.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(uve,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),xBe=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Rc(),s=e.orientation==="horizontal",[o,a]=N.useState("hidden"),u=SM(()=>a("idle"),100);return N.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),N.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(_q,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:n1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:n1(e.onPointerLeave,()=>a("idle"))}):null}),Iie=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Rc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return N.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(EBe,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(xBe,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(uve,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(_q,{...r,ref:t}):null});function SBe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const TBe=N.forwardRef((e,t)=>{const{style:n,...r}=e,i=Rc(),s=ove(),{onThumbPositionChange:o}=s,a=us(t,c=>s.onThumbChange(c)),u=N.useRef(),l=SM(()=>{u.current&&(u.current(),u.current=void 0)},100);return N.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=SBe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:n1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:n1(e.onPointerUp,s.onThumbPointerUp)})}),kie=N.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=ove();return n||i.hasThumb?_.jsx(TBe,{ref:t,...r}):null}),lve=N.forwardRef(({children:e,style:t,...n},r)=>{const i=Rc(),s=us(r,i.onViewportChange);return _.jsx(_e,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});lve.displayName="@mantine/core/ScrollAreaViewport";var wq={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const cve={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},CBe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),hb=je((e,t)=>{const n=Ee("ScrollArea",cve,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=N.useState(!1),x=gt({name:"ScrollArea",props:n,classes:wq,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:CBe});return _.jsxs(nve,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...x("root"),...v,children:[_.jsx(lve,{...d,...x("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(Iie,{...x("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(kie,{...x("thumb")})}),(y==="xy"||y==="y")&&_.jsx(Iie,{...x("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(kie,{...x("thumb")})}),_.jsx(mBe,{...x("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});hb.displayName="@mantine/core/ScrollArea";const Eq=je((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=Ee("ScrollAreaAutosize",cve,e);return _.jsx(_e,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(_e,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(hb,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});hb.classes=wq;Eq.displayName="@mantine/core/ScrollAreaAutosize";Eq.classes=wq;hb.Autosize=Eq;var fve={root:"m_87cf2631"};const ABe={__staticSelector:"UnstyledButton"},Is=Os((e,t)=>{const n=Ee("UnstyledButton",ABe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=gt({name:s,props:n,classes:fve,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(_e,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Is.classes=fve;Is.displayName="@mantine/core/UnstyledButton";var dve={root:"m_515a97f8"};const IBe={},xq=je((e,t)=>{const n=Ee("VisuallyHidden",IBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=gt({name:"VisuallyHidden",classes:dve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(_e,{component:"span",ref:t,...c("root"),...l})});xq.classes=dve;xq.displayName="@mantine/core/VisuallyHidden";var hve={root:"m_1b7284a3"};const kBe={},RBe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:ii(t),"--paper-shadow":cq(n)}}),tE=Os((e,t)=>{const n=Ee("Paper",kBe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=gt({name:"Paper",props:n,classes:hve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:RBe});return _.jsx(_e,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});tE.classes=hve;tE.displayName="@mantine/core/Paper";function bx(e){return pve(e)?(e.nodeName||"").toLowerCase():"#document"}function Nu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Rm(e){var t;return(t=(pve(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function pve(e){return e instanceof Node||e instanceof Nu(e).Node}function bi(e){return e instanceof Element||e instanceof Nu(e).Element}function Al(e){return e instanceof HTMLElement||e instanceof Nu(e).HTMLElement}function MB(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Nu(e).ShadowRoot}function vI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=bc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function NBe(e){return["table","td","th"].includes(bx(e))}function Sq(e){const t=Tq(),n=bc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function DBe(e){let t=sm(e);for(;Al(t)&&!b0(t);){if(Sq(t))return t;t=sm(t)}return null}function Tq(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function b0(e){return["html","body","#document"].includes(bx(e))}function bc(e){return Nu(e).getComputedStyle(e)}function IM(e){return bi(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function sm(e){if(bx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||MB(e)&&e.host||Rm(e);return MB(t)?t.host:t}function mve(e){const t=sm(e);return b0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Al(t)&&vI(t)?t:mve(t)}function Up(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=mve(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Nu(i);return s?t.concat(o,o.visualViewport||[],vI(i)?i:[],o.frameElement&&n?Up(o.frameElement):[]):t.concat(i,Up(i,[],n))}function Rie(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function BA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&MB(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function gve(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function yve(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function PBe(e){return MBe()?!1:!Nie()&&e.width===0&&e.height===0||Nie()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function OBe(){return/apple/i.test(navigator.vendor)}function Nie(){const e=/android/i;return e.test(gve())||e.test(yve())}function $Be(){return gve().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function MBe(){return yve().includes("jsdom/")}function LB(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function LBe(e){return"nativeEvent"in e}function FBe(e){return e.matches("html,body")}function Mv(e){return(e==null?void 0:e.ownerDocument)||document}function P5(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function w_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const jBe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function BBe(e){return Al(e)&&e.matches(jBe)}const pl=Math.min,na=Math.max,ZP=Math.round,BR=Math.floor,_0=e=>({x:e,y:e}),UBe={left:"right",right:"left",bottom:"top",top:"bottom"},zBe={start:"end",end:"start"};function FB(e,t,n){return na(e,pl(t,n))}function om(e,t){return typeof e=="function"?e(t):e}function Mf(e){return e.split("-")[0]}function _x(e){return e.split("-")[1]}function Cq(e){return e==="x"?"y":"x"}function Aq(e){return e==="y"?"height":"width"}function pb(e){return["top","bottom"].includes(Mf(e))?"y":"x"}function Iq(e){return Cq(pb(e))}function VBe(e,t,n){n===void 0&&(n=!1);const r=_x(e),i=Iq(e),s=Aq(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=eO(o)),[o,eO(o)]}function HBe(e){const t=eO(e);return[jB(e),t,jB(t)]}function jB(e){return e.replace(/start|end/g,t=>zBe[t])}function qBe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function WBe(e,t,n,r){const i=_x(e);let s=qBe(Mf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(jB)))),s}function eO(e){return e.replace(/left|right|bottom|top/g,t=>UBe[t])}function GBe(e){return{top:0,right:0,bottom:0,left:0,...e}}function kq(e){return typeof e!="number"?GBe(e):{top:e,right:e,bottom:e,left:e}}function nE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Die(e,t,n){let{reference:r,floating:i}=e;const s=pb(t),o=Iq(t),a=Aq(o),u=Mf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(_x(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const YBe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Die(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:x}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},x&&p<=50&&(p++,typeof x=="object"&&(x.placement&&(d=x.placement),x.rects&&(l=x.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):x.rects),{x:c,y:f}=Die(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function Rq(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=om(t,e),p=kq(h),g=a[d?f==="floating"?"reference":"floating":f],y=nE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},x=nE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-x.top+p.top)/w.y,bottom:(x.bottom-y.bottom+p.bottom)/w.y,left:(y.left-x.left+p.left)/w.x,right:(x.right-y.right+p.right)/w.x}}const KBe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=om(e,t)||{};if(l==null)return{};const f=kq(c),d={x:n,y:r},h=Iq(i),p=Aq(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],x=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=T?T[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(T)))&&(S=a.floating[b]||s.floating[p]);const C=w/2-x/2,A=S/2-m[p]/2-1,R=pl(f[y],A),k=pl(f[v],A),O=R,D=S-m[p]-k,$=S/2-m[p]/2+C,L=FB(O,$,D),F=!u.arrow&&_x(i)!=null&&$!==L&&s.reference[p]/2-($<O?R:k)-m[p]/2<0,B=F?$<O?$-O:$-D:0;return{[h]:d[h]+B,data:{[h]:L,centerOffset:$-L-B,...F&&{alignmentOffset:B}},reset:F}}}),XBe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=om(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Mf(i),v=Mf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[eO(a)]:HBe(a));!d&&p!=="none"&&w.push(...WBe(a,m,p,b));const x=[a,...w],T=await Rq(t,g),S=[];let C=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(T[y]),f){const O=VBe(i,o,b);S.push(T[O[0]],T[O[1]])}if(C=[...C,{placement:i,overflows:S}],!S.every(O=>O<=0)){var A,R;const O=(((A=s.flip)==null?void 0:A.index)||0)+1,D=x[O];if(D)return{data:{index:O,overflows:C},reset:{placement:D}};let $=(R=C.filter(L=>L.overflows[0]<=0).sort((L,F)=>L.overflows[1]-F.overflows[1])[0])==null?void 0:R.placement;if(!$)switch(h){case"bestFit":{var k;const L=(k=C.map(F=>[F.placement,F.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((F,B)=>F[1]-B[1])[0])==null?void 0:k[0];L&&($=L);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function vve(e){const t=pl(...e.map(s=>s.left)),n=pl(...e.map(s=>s.top)),r=na(...e.map(s=>s.right)),i=na(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function QBe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>nE(vve(i)))}const JBe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=om(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=QBe(c),d=nE(vve(c)),h=kq(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(pb(n)==="y"){const R=f[0],k=f[f.length-1],O=Mf(n)==="top",D=R.top,$=k.bottom,L=O?R.left:k.left,F=O?R.right:k.right,B=F-L,U=$-D;return{top:D,bottom:$,left:L,right:F,width:B,height:U,x:L,y:D}}const g=Mf(n)==="left",y=na(...f.map(R=>R.right)),v=pl(...f.map(R=>R.left)),b=f.filter(R=>g?R.left===v:R.right===y),w=b[0].top,x=b[b.length-1].bottom,T=v,S=y,C=S-T,A=x-w;return{top:w,bottom:x,left:T,right:S,width:C,height:A,x:T,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function ZBe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Mf(n),a=_x(n),u=pb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=om(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const eUe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await ZBe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},tUe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=om(e,t),l={x:n,y:r},c=await Rq(t,u),f=pb(Mf(i)),d=Cq(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=FB(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=FB(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},nUe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=om(e,t),c={x:n,y:r},f=pb(i),d=Cq(f);let h=c[d],p=c[f];const m=om(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,x=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>x&&(h=x)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Mf(i)),x=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),T=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<x?p=x:p>T&&(p=T)}return{[d]:h,[f]:p}}}},rUe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=om(e,t),u=await Rq(t,a),l=Mf(n),c=_x(n),f=pb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=pl(h-u[p],g),b=pl(d-u[m],y),w=!t.middlewareData.shift;let x=v,T=b;if(f?T=c||w?pl(b,y):y:x=c||w?pl(v,g):g,w&&!c){const C=na(u.left,0),A=na(u.right,0),R=na(u.top,0),k=na(u.bottom,0);f?T=d-2*(C!==0||A!==0?C+A:na(u.left,u.right)):x=h-2*(R!==0||k!==0?R+k:na(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:x});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function bve(e){const t=bc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Al(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=ZP(n)!==s||ZP(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function Nq(e){return bi(e)?e:e.contextElement}function hw(e){const t=Nq(e);if(!Al(t))return _0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=bve(t);let o=(s?ZP(n.width):n.width)/r,a=(s?ZP(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const iUe=_0(0);function _ve(e){const t=Nu(e);return!Tq()||!t.visualViewport?iUe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function sUe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Nu(e)?!1:t}function S1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=Nq(e);let o=_0(1);t&&(r?bi(r)&&(o=hw(r)):o=hw(e));const a=sUe(s,n,r)?_ve(s):_0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Nu(s),h=r&&bi(r)?Nu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=hw(m),y=m.getBoundingClientRect(),v=bc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Nu(m),m=p.frameElement}}return nE({width:c,height:f,x:u,y:l})}const oUe=[":popover-open",":modal"];function Dq(e){return oUe.some(t=>{try{return e.matches(t)}catch{return!1}})}function aUe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Rm(r),a=t?Dq(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=_0(1);const c=_0(0),f=Al(r);if((f||!f&&!s)&&((bx(r)!=="body"||vI(o))&&(u=IM(r)),Al(r))){const d=S1(r);l=hw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function uUe(e){return Array.from(e.getClientRects())}function wve(e){return S1(Rm(e)).left+IM(e).scrollLeft}function lUe(e){const t=Rm(e),n=IM(e),r=e.ownerDocument.body,i=na(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=na(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+wve(e);const a=-n.scrollTop;return bc(r).direction==="rtl"&&(o+=na(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function cUe(e,t){const n=Nu(e),r=Rm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=Tq();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function fUe(e,t){const n=S1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Al(e)?hw(e):_0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function Pie(e,t,n){let r;if(t==="viewport")r=cUe(e,n);else if(t==="document")r=lUe(Rm(e));else if(bi(t))r=fUe(t,n);else{const i=_ve(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return nE(r)}function Eve(e,t){const n=sm(e);return n===t||!bi(n)||b0(n)?!1:bc(n).position==="fixed"||Eve(n,t)}function dUe(e,t){const n=t.get(e);if(n)return n;let r=Up(e,[],!1).filter(a=>bi(a)&&bx(a)!=="body"),i=null;const s=bc(e).position==="fixed";let o=s?sm(e):e;for(;bi(o)&&!b0(o);){const a=bc(o),u=Sq(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||vI(o)&&!u&&Eve(e,o))?r=r.filter(c=>c!==o):i=a,o=sm(o)}return t.set(e,r),r}function hUe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?Dq(t)?[]:dUe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=Pie(t,c,i);return l.top=na(f.top,l.top),l.right=pl(f.right,l.right),l.bottom=pl(f.bottom,l.bottom),l.left=na(f.left,l.left),l},Pie(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function pUe(e){const{width:t,height:n}=bve(e);return{width:t,height:n}}function mUe(e,t,n){const r=Al(t),i=Rm(t),s=n==="fixed",o=S1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=_0(0);if(r||!r&&!s)if((bx(t)!=="body"||vI(i))&&(a=IM(t)),r){const f=S1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=wve(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function O5(e){return bc(e).position==="static"}function Oie(e,t){return!Al(e)||bc(e).position==="fixed"?null:t?t(e):e.offsetParent}function xve(e,t){const n=Nu(e);if(Dq(e))return n;if(!Al(e)){let i=sm(e);for(;i&&!b0(i);){if(bi(i)&&!O5(i))return i;i=sm(i)}return n}let r=Oie(e,t);for(;r&&NBe(r)&&O5(r);)r=Oie(r,t);return r&&b0(r)&&O5(r)&&!Sq(r)?n:r||DBe(e)||n}const gUe=async function(e){const t=this.getOffsetParent||xve,n=this.getDimensions,r=await n(e.floating);return{reference:mUe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function yUe(e){return bc(e).direction==="rtl"}const vUe={convertOffsetParentRelativeRectToViewportRelativeRect:aUe,getDocumentElement:Rm,getClippingRect:hUe,getOffsetParent:xve,getElementRects:gUe,getClientRects:uUe,getDimensions:pUe,getScale:hw,isElement:bi,isRTL:yUe};function bUe(e,t){let n=null,r;const i=Rm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=BR(c),p=BR(i.clientWidth-(l+f)),m=BR(i.clientHeight-(c+d)),g=BR(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:na(0,pl(1,u))||1};let b=!0;function w(x){const T=x[0].intersectionRatio;if(T!==u){if(!b)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function _Ue(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=Nq(e),c=i||s?[...l?Up(l):[],...Up(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?bUe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?S1(e):null;u&&g();function g(){const y=S1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const wUe=eUe,EUe=tUe,xUe=XBe,SUe=rUe,$ie=KBe,TUe=JBe,CUe=nUe,AUe=(e,t,n)=>{const r=new Map,i={platform:vUe,...n},s={...i.platform,_c:r};return YBe(e,t,{...i,platform:s})};var ED=typeof document<"u"?N.useLayoutEffect:N.useEffect;function tO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!tO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!tO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Sve(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Mie(e,t){const n=Sve(e);return Math.round(t*n)/n}function Lie(e){const t=N.useRef(e);return ED(()=>{t.current=e}),t}function IUe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=N.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=N.useState(r);tO(d,r)||h(r);const[p,m]=N.useState(null),[g,y]=N.useState(null),v=N.useCallback(B=>{B!==T.current&&(T.current=B,m(B))},[]),b=N.useCallback(B=>{B!==S.current&&(S.current=B,y(B))},[]),w=s||p,x=o||g,T=N.useRef(null),S=N.useRef(null),C=N.useRef(c),A=u!=null,R=Lie(u),k=Lie(i),O=N.useCallback(()=>{if(!T.current||!S.current)return;const B={placement:t,strategy:n,middleware:d};k.current&&(B.platform=k.current),AUe(T.current,S.current,B).then(U=>{const q={...U,isPositioned:!0};D.current&&!tO(C.current,q)&&(C.current=q,mI.flushSync(()=>{f(q)}))})},[d,t,n,k]);ED(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const D=N.useRef(!1);ED(()=>(D.current=!0,()=>{D.current=!1}),[]),ED(()=>{if(w&&(T.current=w),x&&(S.current=x),w&&x){if(R.current)return R.current(w,x,O);O()}},[w,x,O,R,A]);const $=N.useMemo(()=>({reference:T,floating:S,setReference:v,setFloating:b}),[v,b]),L=N.useMemo(()=>({reference:w,floating:x}),[w,x]),F=N.useMemo(()=>{const B={position:n,left:0,top:0};if(!L.floating)return B;const U=Mie(L.floating,c.x),q=Mie(L.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+q+"px)",...Sve(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:q}},[n,a,L.floating,c.x,c.y]);return N.useMemo(()=>({...c,update:O,refs:$,elements:L,floatingStyles:F}),[c,O,$,L,F])}const kUe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?$ie({element:r.current,padding:i}).fn(n):{}:r?$ie({element:r,padding:i}).fn(n):{}}}},Tve=(e,t)=>({...wUe(e),options:[e,t]}),Pq=(e,t)=>({...EUe(e),options:[e,t]}),Fie=(e,t)=>({...CUe(e),options:[e,t]}),BB=(e,t)=>({...xUe(e),options:[e,t]}),RUe=(e,t)=>({...SUe(e),options:[e,t]}),UB=(e,t)=>({...TUe(e),options:[e,t]}),Cve=(e,t)=>({...kUe(e),options:[e,t]}),Ave={...xP},NUe=Ave.useInsertionEffect,DUe=NUe||(e=>e());function xg(e){const t=N.useRef(()=>{});return DUe(()=>{t.current=e}),N.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var Gd=typeof document<"u"?N.useLayoutEffect:N.useEffect;let jie=!1,PUe=0;const Bie=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+PUe++;function OUe(){const[e,t]=N.useState(()=>jie?Bie():void 0);return Gd(()=>{e==null&&t(Bie())},[]),N.useEffect(()=>{jie=!0},[]),e}const $Ue=Ave.useId,Ive=$Ue||OUe;function MUe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const LUe=N.createContext(null),FUe=N.createContext(null),Oq=()=>{var e;return((e=N.useContext(LUe))==null?void 0:e.id)||null},$q=()=>N.useContext(FUe);function Mq(e){return"data-floating-ui-"+e}function Uie(e){const t=N.useRef(e);return Gd(()=>{t.current=e}),t}const zie=Mq("safe-polygon");function xD(e,t,n){return n&&!LB(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function jUe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=$q(),m=Oq(),g=Uie(c),y=Uie(l),v=N.useRef(),b=N.useRef(-1),w=N.useRef(),x=N.useRef(-1),T=N.useRef(!0),S=N.useRef(!1),C=N.useRef(()=>{}),A=N.useCallback(()=>{var D;const $=(D=i.current.openEvent)==null?void 0:D.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);N.useEffect(()=>{if(!u)return;function D($){let{open:L}=$;L||(clearTimeout(b.current),clearTimeout(x.current),T.current=!0)}return s.on("openchange",D),()=>{s.off("openchange",D)}},[u,s]),N.useEffect(()=>{if(!u||!g.current||!n)return;function D(L){A()&&r(!1,L,"hover")}const $=Mv(a).documentElement;return $.addEventListener("mouseleave",D),()=>{$.removeEventListener("mouseleave",D)}},[a,n,r,u,g,A]);const R=N.useCallback(function(D,$,L){$===void 0&&($=!0),L===void 0&&(L="hover");const F=xD(y.current,"close",v.current);F&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,D,L),F)):$&&(clearTimeout(b.current),r(!1,D,L))},[y,r]),k=xg(()=>{C.current(),w.current=void 0}),O=xg(()=>{if(S.current){const D=Mv(a).body;D.style.pointerEvents="",D.removeAttribute(zie),S.current=!1}});return N.useEffect(()=>{if(!u)return;function D(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(b.current),T.current=!1,f&&!LB(v.current)||d>0&&!xD(y.current,"open"))return;const U=xD(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function L(B){if(D())return;C.current();const U=Mv(a);if(clearTimeout(x.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),k(),R(B,!0,"safe-polygon")}});const P=w.current;U.addEventListener("mousemove",P),C.current=()=>{U.removeEventListener("mousemove",P)};return}(v.current==="touch"?!BA(a,B.relatedTarget):!0)&&R(B)}function F(B){D()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),k(),R(B)}})(B))}if(bi(o)){const B=o;return n&&B.addEventListener("mouseleave",F),a==null||a.addEventListener("mouseleave",F),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",L),()=>{n&&B.removeEventListener("mouseleave",F),a==null||a.removeEventListener("mouseleave",F),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",L)}}},[o,a,u,e,f,d,h,R,k,O,r,n,p,y,g,i]),Gd(()=>{var D;if(u&&n&&(D=g.current)!=null&&D.__options.blockPointerEvents&&A()){const L=Mv(a).body;if(L.setAttribute(zie,""),L.style.pointerEvents="none",S.current=!0,bi(o)&&a){var $;const F=o,B=p==null||($=p.nodesRef.current.find(U=>U.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),F.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{F.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,A]),Gd(()=>{n||(v.current=void 0,k(),O())},[n,k,O]),N.useEffect(()=>()=>{k(),clearTimeout(b.current),clearTimeout(x.current),O()},[u,o,k,O]),N.useMemo(()=>{if(!u)return{};function D($){v.current=$.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove($){function L(){T.current||r(!0,$.nativeEvent,"hover")}f&&!LB(v.current)||n||d===0||(clearTimeout(x.current),v.current==="touch"?L():x.current=window.setTimeout(L,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){R($.nativeEvent,!1)}}}},[u,f,n,d,r,R])}const zB=()=>{},kve=N.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:zB,setState:zB,isInstantPhase:!1}),Rve=()=>N.useContext(kve);function BUe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=N.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=N.useRef(null),a=N.useCallback(u=>{s({currentId:u})},[]);return Gd(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),N.createElement(kve.Provider,{value:N.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function UUe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=Rve(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return Gd(()=>{u&&(f({delay:{open:1,close:xD(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),Gd(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),Gd(()=>{l===zB||!n||l(o)},[n,l,o]),a}function $5(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const zUe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},VUe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Vie=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function HUe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=$q(),v=xg(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=N.useRef(!1),x=N.useRef(!1),{escapeKey:T,outsidePress:S}=Vie(m),{escapeKey:C,outsidePress:A}=Vie(g),R=xg($=>{var L;if(!n||!u||!l||$.key!=="Escape")return;const F=(L=a.current.floatingContext)==null?void 0:L.nodeId,B=y?$5(y.nodesRef.current,F):[];if(!T&&($.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(q=>{var P;if((P=q.context)!=null&&P.open&&!q.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,LBe($)?$.nativeEvent:$,"escape-key")}),k=xg($=>{var L;const F=()=>{var B;R($),(B=w_($))==null||B.removeEventListener("keydown",F)};(L=w_($))==null||L.addEventListener("keydown",F)}),O=xg($=>{var L;const F=w.current;w.current=!1;const B=x.current;if(x.current=!1,f==="click"&&B||F||typeof b=="function"&&!b($))return;const U=w_($),q="["+Mq("inert")+"]",P=Mv(o).querySelectorAll(q);let V=bi(U)?U:null;for(;V&&!b0(V);){const G=sm(V);if(b0(G)||!bi(G))break;V=G}if(P.length&&bi(U)&&!FBe(U)&&!BA(U,o)&&Array.from(P).every(G=>!BA(V,G)))return;if(Al(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ne=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let pe=ne&&$.offsetX>U.clientWidth;if(ne&&bc(U).direction==="rtl"&&(pe=$.offsetX<=U.offsetWidth-U.clientWidth),pe||G&&$.offsetY>U.clientHeight)return}const W=(L=a.current.floatingContext)==null?void 0:L.nodeId,j=y&&$5(y.nodesRef.current,W).some(G=>{var ne;return P5($,(ne=G.context)==null?void 0:ne.elements.floating)});if(P5($,o)||P5($,s)||j)return;const H=y?$5(y.nodesRef.current,W):[];if(H.length>0){let G=!0;if(H.forEach(ne=>{var pe;if((pe=ne.context)!=null&&pe.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),D=xg($=>{var L;const F=()=>{var B;O($),(B=w_($))==null||B.removeEventListener(f,F)};(L=w_($))==null||L.addEventListener(f,F)});return N.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=S;function $(B){r(!1,B,"ancestor-scroll")}const L=Mv(o);l&&L.addEventListener("keydown",C?k:R,C),b&&L.addEventListener(f,A?D:O,A);let F=[];return p&&(bi(s)&&(F=Up(s)),bi(o)&&(F=F.concat(Up(o))),!bi(i)&&i&&i.contextElement&&(F=F.concat(Up(i.contextElement)))),F=F.filter(B=>{var U;return B!==((U=L.defaultView)==null?void 0:U.visualViewport)}),F.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&L.removeEventListener("keydown",C?k:R,C),b&&L.removeEventListener(f,A?D:O,A),F.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,T,S,R,C,k,O,A,D]),N.useEffect(()=>{w.current=!1},[b,f]),N.useMemo(()=>u?{reference:{onKeyDown:R,[zUe[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:R,onMouseDown(){x.current=!0},onMouseUp(){x.current=!0},[VUe[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,R])}function qUe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=Ive(),s=N.useRef({}),[o]=N.useState(()=>MUe()),a=Oq()!=null,[u,l]=N.useState(r.reference),c=xg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=N.useMemo(()=>({setPositionReference:l}),[]),d=N.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return N.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function Lq(e){e===void 0&&(e={});const{nodeId:t}=e,n=qUe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=N.useState(null),[a,u]=N.useState(null),c=(i==null?void 0:i.reference)||s,f=N.useRef(null),d=$q();Gd(()=>{c&&(f.current=c)},[c]);const h=IUe({...e,elements:{...i,...a&&{reference:a}}}),p=N.useCallback(b=>{const w=bi(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=N.useCallback(b=>{(bi(b)||b===null)&&(f.current=b,o(b)),(bi(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!bi(b))&&h.refs.setReference(b)},[h.refs]),g=N.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=N.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=N.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return Gd(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),N.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function WUe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=N.useRef(!1),c=N.useRef(),f=N.useRef(!0);return N.useEffect(()=>{if(!a)return;const d=Nu(o);function h(){!n&&Al(o)&&o===Rie(Mv(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),N.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),N.useEffect(()=>()=>{clearTimeout(c.current)},[]),N.useMemo(()=>a?{reference:{onPointerDown(d){PBe(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=w_(d.nativeEvent);if(u&&bi(h))try{if(OBe()&&$Be())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!BBe(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=bi(h)&&h.hasAttribute(Mq("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=Rie(o?o.ownerDocument:document);!h&&g===o||BA((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||BA(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Hie="active",qie="selected";function M5(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Hie]:o,[qie]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Hie,qie].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function GUe(e){e===void 0&&(e=[]);const t=e,n=N.useCallback(s=>M5(s,e,"reference"),t),r=N.useCallback(s=>M5(s,e,"floating"),t),i=N.useCallback(s=>M5(s,e,"item"),e.map(s=>s==null?void 0:s.item));return N.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const YUe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function KUe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=YUe.get(o))!=null?n:o,u=Ive(),c=Oq()!=null;return N.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function Nve(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Wie(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Gie(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const XUe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function QUe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[XUe[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...Wie(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Wie(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Gie(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Gie(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const Fq=N.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Ah();return s?_.jsx("div",{...l,ref:c,style:{...u,...QUe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});Fq.displayName="@mantine/core/FloatingArrow";const[JUe,Dve]=Oo("Popover component was not found in the tree");function kM({children:e,active:t=!0,refProp:n="ref"}){const r=Vje(t),i=us(r,e==null?void 0:e.ref);return Im(e)?N.cloneElement(e,{[n]:i}):e}function Pve(e){return _.jsx(xq,{tabIndex:-1,"data-autofocus":!0,...e})}kM.displayName="@mantine/core/FocusTrap";Pve.displayName="@mantine/core/FocusTrapInitialFocus";kM.InitialFocus=Pve;function ZUe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const e7e={},Ove=N.forwardRef((e,t)=>{const{children:n,target:r,...i}=Ee("Portal",e7e,e),[s,o]=N.useState(!1),a=N.useRef(null);return db(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:ZUe(i),dq(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:mI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});Ove.displayName="@mantine/core/Portal";function bI({withinPortal:e=!0,children:t,...n}){return e?_.jsx(Ove,{...n,children:t}):_.jsx(_.Fragment,{children:t})}bI.displayName="@mantine/core/OptionalPortal";const VS=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),UR={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...VS("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...VS("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...VS("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...VS("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...VS("top"),common:{transformOrigin:"top right"}}},Yie={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function t7e({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in UR?{transitionProperty:UR[e].transitionProperty,...i,...UR[e].common,...UR[e][Yie[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Yie[t]]}}function n7e({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=Ps(),l=hq(),c=u.respectReducedMotion?l:!1,[f,d]=N.useState(c?0:e),[h,p]=N.useState(r?"entered":"exited"),m=N.useRef(-1),g=N.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const x=c?0:v?e:t;d(x),x===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{B8e.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},x)})})};return im(()=>{y(r)},[r]),N.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function Nm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=n7e({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(t7e({transition:t,duration:f,state:d,timingFunction:h}))})}Nm.displayName="@mantine/core/Transition";var $ve={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const r7e={},jq=je((e,t)=>{var g,y,v,b;const n=Ee("PopoverDropdown",r7e,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=Dve(),h=$ye({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=us(t,d.floating);return d.disabled?null:_.jsx(bI,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(Nm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(kM,{active:d.trapFocus,children:_.jsxs(_e,{...p,...f,variant:u,ref:m,onKeyDownCapture:Rje(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,_.jsx(Fq,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});jq.classes=$ve;jq.displayName="@mantine/core/PopoverDropdown";const i7e={refProp:"ref",popupType:"dialog"},Mve=je((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=Ee("PopoverTarget",i7e,e);if(!Im(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=Dve(),u=us(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return N.cloneElement(n,{...o,...l,...a.targetProps,className:Gi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Mve.displayName="@mantine/core/PopoverTarget";function Lve({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=N.useState(0);N.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return _Ue(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),im(()=>{t.update()},r),im(()=>{s(o=>o+1)},[e])}function s7e(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function o7e(e,t){const n=s7e(e.middlewares),r=[Tve(e.offset)];return n.shift&&r.push(Pq(typeof n.shift=="boolean"?{limiter:Fie(),padding:5}:{limiter:Fie(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?BB():BB(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?UB():UB(n.inline)),r.push(Cve({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(RUe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function a7e(e){const[t,n]=No({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=Lq({strategy:e.strategy,placement:e.position,middleware:o7e(e,()=>s)});return Lve({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),im(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),im(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const u7e={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:kc("popover"),__staticSelector:"Popover",width:"max-content"},l7e=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:ii(t),"--popover-shadow":cq(n)}});function Nr(e){var De,Me,Ye,pt,Pt,qe;const t=Ee("Popover",u7e,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:x,closeOnEscape:T,clickOutsideEvents:S,trapFocus:C,onClose:A,onOpen:R,onChange:k,zIndex:O,radius:D,shadow:$,id:L,defaultOpened:F,__staticSelector:B,withRoles:U,disabled:q,returnFocus:P,variant:V,keepMounted:W,vars:j,floatingStrategy:H,...G}=t,ne=gt({name:B,props:t,classes:$ve,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:l7e}),pe=N.useRef(null),[fe,de]=N.useState(null),[ye,Ae]=N.useState(null),{dir:ve}=Ah(),rt=Ku(L),ze=a7e({middlewares:c,width:l,position:Nve(ve,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:pe,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:F,onChange:k,onOpen:R,onClose:A,strategy:H});Pje(()=>b&&ze.onClose(),S,[fe,ye]);const yt=N.useCallback(me=>{de(me),ze.floating.refs.setReference(me)},[ze.floating.refs.setReference]),ot=N.useCallback(me=>{Ae(me),ze.floating.refs.setFloating(me)},[ze.floating.refs.setFloating]);return _.jsx(JUe,{value:{returnFocus:P,disabled:q,controlled:ze.controlled,reference:yt,floating:ot,x:ze.floating.x,y:ze.floating.y,arrowX:(Ye=(Me=(De=ze.floating)==null?void 0:De.middlewareData)==null?void 0:Me.arrow)==null?void 0:Ye.x,arrowY:(qe=(Pt=(pt=ze.floating)==null?void 0:pt.middlewareData)==null?void 0:Pt.arrow)==null?void 0:qe.y,opened:ze.opened,arrowRef:pe,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:ze.floating.placement,trapFocus:C,withinPortal:w,portalProps:x,zIndex:O,radius:D,shadow:$,closeOnEscape:T,onClose:ze.onClose,onToggle:ze.onToggle,getTargetId:()=>`${rt}-target`,getDropdownId:()=>`${rt}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:V,keepMounted:W,getStyles:ne},children:n})}Nr.Target=Mve;Nr.Dropdown=jq;Nr.displayName="@mantine/core/Popover";Nr.extend=e=>e;var vf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const c7e=N.forwardRef(({className:e,...t},n)=>_.jsxs(_e,{component:"span",className:Gi(vf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:vf.bar}),_.jsx("span",{className:vf.bar}),_.jsx("span",{className:vf.bar})]})),f7e=N.forwardRef(({className:e,...t},n)=>_.jsxs(_e,{component:"span",className:Gi(vf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:vf.dot}),_.jsx("span",{className:vf.dot}),_.jsx("span",{className:vf.dot})]})),d7e=N.forwardRef(({className:e,...t},n)=>_.jsx(_e,{component:"span",className:Gi(vf.ovalLoader,e),...t,ref:n})),Fve={bars:c7e,oval:d7e,dots:f7e},h7e={loaders:Fve,type:"oval"},p7e=(e,{size:t,color:n})=>({root:{"--loader-size":yn(t,"loader-size"),"--loader-color":n?Gr(n,e):void 0}}),cy=je((e,t)=>{const n=Ee("Loader",h7e,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=gt({name:"Loader",props:n,classes:vf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:p7e});return p?_.jsx(_e,{...g("root"),ref:t,...m,children:p}):_.jsx(_e,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});cy.defaultLoaders=Fve;cy.classes=vf;cy.displayName="@mantine/core/Loader";var RM={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Kie={orientation:"horizontal"},m7e=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),Bq=je((e,t)=>{const n=Ee("ActionIconGroup",Kie,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ee("ActionIconGroup",Kie,e),p=gt({name:"ActionIconGroup",props:n,classes:RM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:m7e,rootSelector:"group"});return _.jsx(_e,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});Bq.classes=RM;Bq.displayName="@mantine/core/ActionIconGroup";const g7e={},y7e=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":yn(t,"ai-size"),"--ai-radius":n===void 0?void 0:ii(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},w0=Os((e,t)=>{const n=Ee("ActionIcon",g7e,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:x,...T}=n,S=gt({name:["ActionIcon",p],props:n,className:r,style:u,classes:RM,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:y7e});return _.jsxs(Is,{...S("root",{active:!v&&!l&&!b}),...T,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},x],children:[_.jsx(Nm,{mounted:!!l,transition:"slide-down",duration:150,children:C=>_.jsx(_e,{component:"span",...S("loader",{style:C}),"aria-hidden":!0,children:_.jsx(cy,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(_e,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});w0.classes=RM;w0.displayName="@mantine/core/ActionIcon";w0.Group=Bq;const jve=N.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));jve.displayName="@mantine/core/CloseIcon";var Bve={root:"m_86a44da5","root--subtle":"m_220c80f2"};const v7e={variant:"subtle"},b7e=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":yn(t,"cb-size"),"--cb-radius":n===void 0?void 0:ii(n),"--cb-icon-size":Te(r)}}),fy=Os((e,t)=>{const n=Ee("CloseButton",v7e,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=gt({name:"CloseButton",props:n,className:a,style:l,classes:Bve,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:b7e});return _.jsxs(Is,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(jve,{}),i]})});fy.classes=Bve;fy.displayName="@mantine/core/CloseButton";function _7e(e){return N.Children.toArray(e).filter(Boolean)}var Uve={root:"m_4081bf90"};const w7e={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},E7e=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":Cl(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Xs=je((e,t)=>{const n=Ee("Group",w7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=_7e(u),x=w.length,T=Cl(l??"md"),C={childWidth:`calc(${100/x}% - (${T} - ${T} / ${x}))`},A=gt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:Uve,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:E7e});return _.jsx(_e,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Xs.classes=Uve;Xs.displayName="@mantine/core/Group";var zve={root:"m_9814e45f"};const x7e={zIndex:kc("modal")},S7e=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Jl(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:ii(s),"--overlay-z-index":o==null?void 0:o.toString()}}),UA=Os((e,t)=>{const n=Ee("Overlay",x7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=gt({name:"Overlay",props:n,classes:zve,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:S7e});return _.jsx(_e,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});UA.classes=zve;UA.displayName="@mantine/core/Overlay";const[T7e,Dm]=Oo("ModalBase component was not found in tree");function C7e({opened:e,transitionDuration:t}){const[n,r]=N.useState(e),i=N.useRef(),o=hq()?0:t;return N.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function A7e({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ku(e),[u,l]=N.useState(!1),[c,f]=N.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=C7e({opened:n,transitionDuration:d});return jye("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),$ye({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const Vve=N.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:x,titleMounted:T,bodyMounted:S,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:R}=A7e({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(bI,{...c,withinPortal:l,children:_.jsx(T7e,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${x}-title`,getBodyId:()=>`${x}-body`,titleMounted:T,bodyMounted:S,setTitleMounted:A,setBodyMounted:R,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(xM,{enabled:C&&f,...v,children:_.jsx(_e,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||kc("modal")).toString(),"--mb-shadow":cq(p),"--mb-padding":Cl(m)},children:d})})})})});function I7e(){const e=Dm();return N.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var rE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const Uq=N.forwardRef(({className:e,...t},n)=>{const r=I7e(),i=Dm();return _.jsx(_e,{ref:n,...t,id:r,className:Gi({[rE.body]:!i.unstyled},e)})});Uq.displayName="@mantine/core/ModalBaseBody";const zq=N.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Dm();return _.jsx(fy,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Gi({[rE.close]:!i.unstyled},e),unstyled:i.unstyled})});zq.displayName="@mantine/core/ModalBaseCloseButton";const Hve=N.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Dm();return _.jsx(Nm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Gi({[rE.inner]:!a.unstyled},n.className),children:_.jsx(kM,{active:a.opened&&a.trapFocus,children:_.jsx(tE,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Gi({[rE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),Vq=N.forwardRef(({className:e,...t},n)=>{const r=Dm();return _.jsx(_e,{component:"header",ref:n,className:Gi({[rE.header]:!r.unstyled},e),...t})});Vq.displayName="@mantine/core/ModalBaseHeader";const k7e={duration:200,timingFunction:"ease",transition:"fade"};function R7e(e){const t=Dm();return{...k7e,...t.transitionProps,...e}}const Hq=N.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Dm(),o=R7e(t);return _.jsx(Nm,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(UA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});Hq.displayName="@mantine/core/ModalBaseOverlay";function N7e(){const e=Dm();return N.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const qq=N.forwardRef(({className:e,...t},n)=>{const r=N7e(),i=Dm();return _.jsx(_e,{component:"h2",ref:n,className:Gi({[rE.title]:!i.unstyled},e),...t,id:r})});qq.displayName="@mantine/core/ModalBaseTitle";function qve({children:e}){return _.jsx(_.Fragment,{children:e})}const[D7e,wx]=gx({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Nc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Xie={},P7e=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${ro(t)} - ${Te(2)})`}}),NM=je((e,t)=>{const n=Ee("InputDescription",Xie,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=Ee("InputDescription",Xie,n),p=wx(),m=gt({name:["InputWrapper",c],props:n,classes:Nc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:P7e}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(_e,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});NM.classes=Nc;NM.displayName="@mantine/core/InputDescription";const O7e={},$7e=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${ro(t)} - ${Te(2)})`}}),DM=je((e,t)=>{const n=Ee("InputError",O7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=gt({name:["InputWrapper",c],props:n,classes:Nc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:$7e}),m=wx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(_e,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});DM.classes=Nc;DM.displayName="@mantine/core/InputError";const Qie={labelElement:"label"},M7e=(e,{size:t})=>({label:{"--input-label-size":ro(t),"--input-asterisk-color":void 0}}),PM=je((e,t)=>{const n=Ee("InputLabel",Qie,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=Ee("InputLabel",Qie,n),b=gt({name:["InputWrapper",m],props:n,classes:Nc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:M7e}),w=wx(),x=(w==null?void 0:w.getStyles)||b;return _.jsxs(_e,{...x("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...v,children:[p,f&&_.jsx("span",{...x("required"),"aria-hidden":!0,children:" *"})]})});PM.classes=Nc;PM.displayName="@mantine/core/InputLabel";const Jie={},Wq=je((e,t)=>{const n=Ee("InputPlaceholder",Jie,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=Ee("InputPlaceholder",Jie,n),p=gt({name:["InputPlaceholder",l],props:n,classes:Nc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(_e,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});Wq.classes=Nc;Wq.displayName="@mantine/core/InputPlaceholder";function L7e(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const F7e={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},j7e=(e,{size:t})=>({label:{"--input-label-size":ro(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${ro(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${ro(t)} - ${Te(2)})`}}),Gq=je((e,t)=>{const n=Ee("InputWrapper",F7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:x,withAsterisk:T,id:S,required:C,__stylesApiProps:A,mod:R,...k}=n,O=gt({name:["InputWrapper",f],props:A||n,classes:Nc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:j7e}),D={size:l,variant:c,__staticSelector:f},$=Ku(S),L=typeof T=="boolean"?T:C,F=(b==null?void 0:b.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,U=$,q=!!m&&typeof m!="boolean",P=!!g,V=`${q?F:""} ${P?B:""}`,W=V.trim().length>0?V.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,H=p&&_.jsx(PM,{labelElement:w,id:j,htmlFor:U,required:L,...D,...y,children:p},"label"),G=P&&_.jsx(NM,{...v,...D,size:(v==null?void 0:v.size)||D.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=_.jsx(N.Fragment,{children:d(x)},"input"),pe=q&&N.createElement(DM,{...b,...D,size:(b==null?void 0:b.size)||D.size,key:"error",id:(b==null?void 0:b.id)||F},m),fe=h.map(de=>{switch(de){case"label":return H;case"input":return ne;case"description":return G;case"error":return pe;default:return null}});return _.jsx(D7e,{value:{getStyles:O,describedBy:W,inputId:U,labelId:j,...L7e(h,{hasDescription:P,hasError:q})},children:_.jsx(_e,{ref:t,variant:c,size:l,mod:[{error:!!m},R],...O("root"),...k,children:fe})})});Gq.classes=Nc;Gq.displayName="@mantine/core/InputWrapper";const B7e={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},U7e=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":yn(t.size,"input-height"),"--input-fz":ro(t.size),"--input-radius":t.radius===void 0?void 0:ii(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?yn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),ki=Os((e,t)=>{const n=Ee("Input",B7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:x,leftSectionPointerEvents:T,variant:S,vars:C,pointer:A,multiline:R,radius:k,id:O,withAria:D,withErrorStyles:$,mod:L,inputSize:F,...B}=n,{styleProps:U,rest:q}=vx(B),P=wx(),V={offsetBottom:P==null?void 0:P.offsetBottom,offsetTop:P==null?void 0:P.offsetTop},W=gt({name:["Input",l],props:c||n,classes:Nc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:V,rootSelector:"wrapper",vars:C,varsResolver:U7e}),j=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":P==null?void 0:P.describedBy,id:(P==null?void 0:P.inputId)||O}:{};return _.jsxs(_e,{...W("wrapper"),...U,...d,mod:[{error:!!h&&$,pointer:A,disabled:p,multiline:R,"data-with-right-section":!!v,"data-with-left-section":!!m},L],variant:S,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(_e,{component:"input",...q,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:S,__size:F,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});ki.classes=Nc;ki.Wrapper=Gq;ki.Label=PM;ki.Error=DM;ki.Description=NM;ki.Placeholder=Wq;ki.displayName="@mantine/core/Input";function Wve(e,t,n){const r=Ee(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:x,inputWrapperOrder:T,withAsterisk:S,variant:C,vars:A,mod:R,...k}=r,{styleProps:O,rest:D}=vx(k),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:x,inputWrapperOrder:T,withAsterisk:S,variant:C,id:v,mod:R,...y};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const z7e={__staticSelector:"InputBase",withAria:!0},Dc=Os((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Wve("InputBase",z7e,e);return _.jsx(ki.Wrapper,{...r,children:_.jsx(ki,{...n,...i,ref:t})})});Dc.classes={...ki.classes,...ki.Wrapper.classes};Dc.displayName="@mantine/core/InputBase";const V7e={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Gve={root:"m_8bffd616"};const H7e={},qt=Os((e,t)=>{const n=Ee("Flex",H7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=gt({name:"Flex",classes:Gve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Ps(),b=CM(),w=Xye({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:V7e});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(yI,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(_e,{ref:t,...y("root",{className:b,style:mx(w.inlineStyles)}),...g})]})});qt.classes=Gve;qt.displayName="@mantine/core/Flex";function q7e(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function W7e({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=N.useRef(),[s,o]=N.useState(!1),[a,u]=N.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=N.useRef(),d=N.useRef();return N.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),N.useEffect(()=>{if(t){const h=p=>{q7e(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),Yje(()=>{Vye()!=="test"&&o(!0)},20,{autoInvoke:!0}),Kje(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Yve={root:"m_96b553a6"};const G7e={},Y7e=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),Yq=je((e,t)=>{const n=Ee("FloatingIndicator",G7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=gt({name:"FloatingIndicator",classes:Yve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Y7e}),g=N.useRef(null),{initialized:y,hidden:v}=W7e({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=us(t,g);return!l||!c?null:_.jsx(_e,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});Yq.displayName="@mantine/core/FloatingIndicator";Yq.classes=Yve;function nO({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}nO.displayName="@mantine/core/AccordionChevron";var Kve={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const K7e={},X7e=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:ii(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Kq=je((e,t)=>{const n=Ee("Alert",K7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,x=gt({name:"Alert",classes:Kve,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:X7e}),T=Ku(h),S=f&&`${T}-title`||void 0,C=`${T}-body`;return _.jsx(_e,{id:T,...x("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":S,children:_.jsxs("div",{...x("wrapper"),children:[p&&_.jsx("div",{...x("icon"),children:p}),_.jsxs("div",{...x("body"),children:[f&&_.jsx("div",{...x("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:S,...x("label"),children:f})}),d&&_.jsx("div",{id:C,...x("message"),"data-variant":v,children:d})]}),m&&_.jsx(fy,{...x("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Kq.classes=Kve;Kq.displayName="@mantine/core/Alert";var Xve={root:"m_b6d8b162"};function Q7e(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const J7e={inherit:!1},Z7e=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":ro(i),"--text-lh":Oye(i),"--text-gradient":t==="gradient"?PB(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Gr(s,e):void 0}}),et=Os((e,t)=>{const n=Ee("Text",J7e,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=gt({name:["Text",l],props:n,classes:Xve,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:Z7e});return _.jsx(_e,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":Q7e(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});et.classes=Xve;et.displayName="@mantine/core/Text";var Qve={root:"m_849cf0da"};const eze={underline:"hover"},Ex=Os((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=Ee("Anchor",eze,e);return _.jsx(et,{component:"a",ref:t,className:Gi({[Qve.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Ex.classes=Qve;Ex.displayName="@mantine/core/Anchor";const[tze,xx]=Oo("AppShell was not found in tree");var dy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const nze={},Xq=je((e,t)=>{const n=Ee("AppShellAside",nze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=xx();return h.disabled?null:_.jsx(_e,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});Xq.classes=dy;Xq.displayName="@mantine/core/AppShellAside";const rze={},Qq=je((e,t)=>{var p;const n=Ee("AppShellFooter",rze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=xx();return h.disabled?null:_.jsx(_e,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Gi({[xM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Qq.classes=dy;Qq.displayName="@mantine/core/AppShellFooter";const ize={},Jq=je((e,t)=>{var p;const n=Ee("AppShellHeader",ize,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=xx();return h.disabled?null:_.jsx(_e,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Gi({[xM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});Jq.classes=dy;Jq.displayName="@mantine/core/AppShellHeader";const sze={},Zq=je((e,t)=>{const n=Ee("AppShellMain",sze,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=xx();return _.jsx(_e,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});Zq.classes=dy;Zq.displayName="@mantine/core/AppShellMain";function _I(e){return typeof e=="object"?e.base:e}function wI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function EI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function oze({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),wI(s)){const f=Te(_I(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(EI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),Ii(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=fq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function aze({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(wI(r)){const o=Te(_I(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}EI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),Ii(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function uze({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(wI(r)){const o=Te(_I(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}EI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),Ii(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function lze({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),wI(s)){const f=Te(_I(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(EI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),Ii(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=fq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function L5(e){return Number(e)===0?"0px":Cl(e)}function cze({padding:e,baseStyles:t,minMediaStyles:n}){wI(e)&&(t["--app-shell-padding"]=L5(_I(e))),EI(e)&&(e.base&&(t["--app-shell-padding"]=L5(e.base)),Ii(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=L5(e[r]))}))}function fze({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};lze({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),oze({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),uze({baseStyles:u,minMediaStyles:o,header:t}),aze({baseStyles:u,minMediaStyles:o,footer:n}),cze({baseStyles:u,minMediaStyles:o,padding:i});const l=XP(Ii(o),s).map(d=>({query:`(min-width: ${YP(d.px)})`,styles:o[d.value]})),c=XP(Ii(a),s).map(d=>({query:`(max-width: ${YP(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function dze({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Ps(),o=uy(),{media:a,baseStyles:u}=fze({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(yI,{media:a,styles:u,selector:o.cssVariablesSelector})}const hze={},eW=je((e,t)=>{const n=Ee("AppShellNavbar",hze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=xx();return h.disabled?null:_.jsx(_e,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});eW.classes=dy;eW.displayName="@mantine/core/AppShellNavbar";const pze={},tW=Os((e,t)=>{const n=Ee("AppShellSection",pze,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=xx();return _.jsx(_e,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});tW.classes=dy;tW.displayName="@mantine/core/AppShellSection";function mze({transitionDuration:e,disabled:t}){const[n,r]=N.useState(!0),i=N.useRef(),s=N.useRef();return jye("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),db(()=>{N.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const gze={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:kc("app")},yze=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),fi=je((e,t)=>{const n=Ee("AppShell",gze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:x,...T}=n,S=gt({name:"AppShell",classes:dy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yze}),C=mze({disabled:y,transitionDuration:d});return _.jsxs(tze,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(dze,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(_e,{ref:t,...S("root"),mod:[{resizing:C,layout:g,disabled:y},x],...T})]})});fi.classes=dy;fi.displayName="@mantine/core/AppShell";fi.Navbar=eW;fi.Header=Jq;fi.Main=Zq;fi.Aside=Xq;fi.Footer=Qq;fi.Section=tW;function Jve(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Jve(t))}:e}function Zve(e){return e?e.map(t=>Jve(t)):[]}function nW(e){return e.reduce((t,n)=>"group"in n?{...t,...nW(n.items)}:(t[n.value]=n,t),{})}var Fu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const vze={error:null},bze=(e,{size:t})=>({chevron:{"--combobox-chevron-size":yn(t,"combobox-chevron-size")}}),rW=je((e,t)=>{const n=Ee("ComboboxChevron",vze,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=gt({name:"ComboboxChevron",classes:Fu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:bze,rootSelector:"chevron"});return _.jsx(_e,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});rW.classes=Fu;rW.displayName="@mantine/core/ComboboxChevron";const[_ze,Pc]=Oo("Combobox component was not found in tree"),e1e=N.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(fy,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));e1e.displayName="@mantine/core/ComboboxClearButton";const wze={},iW=je((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=Ee("ComboboxDropdown",wze,e),u=Pc();return _.jsx(Nr.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});iW.classes=Fu;iW.displayName="@mantine/core/ComboboxDropdown";const Eze={refProp:"ref"},t1e=je((e,t)=>{const{children:n,refProp:r}=Ee("ComboboxDropdownTarget",Eze,e);if(Pc(),!Im(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Nr.Target,{ref:t,refProp:r,children:n})});t1e.displayName="@mantine/core/ComboboxDropdownTarget";const xze={},sW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ee("ComboboxEmpty",xze,e),u=Pc();return _.jsx(_e,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});sW.classes=Fu;sW.displayName="@mantine/core/ComboboxEmpty";function oW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Pc(),[a,u]=N.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const Sze={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},n1e=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ee("ComboboxEventsTarget",Sze,e);if(!Im(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Pc(),f=oW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return N.cloneElement(n,{...f,...l,[r]:us(t,c.store.targetRef,n==null?void 0:n.ref)})});n1e.displayName="@mantine/core/ComboboxEventsTarget";const Tze={},aW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ee("ComboboxFooter",Tze,e),u=Pc();return _.jsx(_e,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});aW.classes=Fu;aW.displayName="@mantine/core/ComboboxFooter";const Cze={},uW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=Ee("ComboboxGroup",Cze,e),c=Pc();return _.jsxs(_e,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});uW.classes=Fu;uW.displayName="@mantine/core/ComboboxGroup";const Aze={},lW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ee("ComboboxHeader",Aze,e),u=Pc();return _.jsx(_e,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});lW.classes=Fu;lW.displayName="@mantine/core/ComboboxHeader";function r1e({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}r1e.displayName="@mantine/core/ComboboxHiddenInput";const Ize={},cW=je((e,t)=>{const n=Ee("ComboboxOption",Ize,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Pc(),v=N.useId(),b=l||v;return _.jsx(_e,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var x;h?w.preventDefault():((x=y.onOptionSubmit)==null||x.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});cW.classes=Fu;cW.displayName="@mantine/core/ComboboxOption";const kze={},fW=je((e,t)=>{const n=Ee("ComboboxOptions",kze,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Pc(),d=Ku(a);return N.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(_e,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});fW.classes=Fu;fW.displayName="@mantine/core/ComboboxOptions";const Rze={withAriaAttributes:!0,withKeyboardNavigation:!0},dW=je((e,t)=>{const n=Ee("ComboboxSearch",Rze,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Pc(),h=d.getStyles("search"),p=oW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(ki,{ref:us(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});dW.classes=Fu;dW.displayName="@mantine/core/ComboboxSearch";const Nze={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},i1e=je((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=Ee("ComboboxTarget",Nze,e);if(!Im(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Pc(),f=oW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=N.cloneElement(n,{...f,...l});return _.jsx(Nr.Target,{ref:us(t,c.store.targetRef),children:d})});i1e.displayName="@mantine/core/ComboboxTarget";function Dze(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Pze(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function Oze(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function hW({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=No({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=N.useRef(null),c=N.useRef(-1),f=N.useRef(null),d=N.useRef(null),h=N.useRef(-1),p=N.useRef(-1),m=N.useRef(-1),g=N.useCallback((F="unknown")=>{a||(u(!0),i==null||i(F))},[u,i,a]),y=N.useCallback((F="unknown")=>{a&&(u(!1),r==null||r(F))},[u,r,a]),v=N.useCallback((F="unknown")=>{a?y(F):g(F)},[y,g,a]),b=N.useCallback(()=>{const F=document.querySelector(`#${l.current} [data-combobox-selected]`);F==null||F.removeAttribute("data-combobox-selected"),F==null||F.removeAttribute("aria-selected")},[]),w=N.useCallback(F=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const q=F>=U.length?0:F<0?U.length-1:F;return c.current=q,U!=null&&U[q]&&!U[q].hasAttribute("data-combobox-disabled")?(b(),U[q].setAttribute("data-combobox-selected","true"),U[q].setAttribute("aria-selected","true"),U[q].scrollIntoView({block:"nearest",behavior:o}),U[q].id):null},[o,b]),x=N.useCallback(()=>{const F=document.querySelector(`#${l.current} [data-combobox-active]`);if(F){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(q=>q===F);return w(U)}return w(0)},[w]),T=N.useCallback(()=>w(Pze(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),S=N.useCallback(()=>w(Dze(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=N.useCallback(()=>w(Oze(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),A=N.useCallback((F="selected",B)=>{m.current=window.setTimeout(()=>{var P;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),q=Array.from(U).findIndex(V=>V.hasAttribute(`data-combobox-${F}`));c.current=q,B!=null&&B.scrollIntoView&&((P=U[q])==null||P.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),R=N.useCallback(()=>{c.current=-1,b()},[b]),k=N.useCallback(()=>{const F=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=F==null?void 0:F[c.current];B==null||B.click()},[]),O=N.useCallback(F=>{l.current=F},[]),D=N.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=N.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),L=N.useCallback(()=>c.current,[]);return N.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:L,selectOption:w,selectFirstOption:C,selectActiveOption:x,selectNextOption:T,selectPreviousOption:S,resetSelectedOption:R,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:k,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:$}}const $ze={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},Mze=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":ro(t),"--combobox-option-padding":yn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":ro(t),"--combobox-option-padding":yn(t,"combobox-option-padding")}});function Gn(e){const t=Ee("Combobox",$ze,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=hW(),y=o||g,v=gt({name:h||"Combobox",classes:Fu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:Mze}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(_ze,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Nr,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const Lze=e=>e;Gn.extend=Lze;Gn.classes=Fu;Gn.displayName="@mantine/core/Combobox";Gn.Target=i1e;Gn.Dropdown=iW;Gn.Options=fW;Gn.Option=cW;Gn.Search=dW;Gn.Empty=sW;Gn.Chevron=rW;Gn.Footer=aW;Gn.Header=lW;Gn.EventsTarget=n1e;Gn.DropdownTarget=t1e;Gn.Group=uW;Gn.ClearButton=e1e;Gn.HiddenInput=r1e;var s1e={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Fze=s1e,pW=N.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},x)=>{const T=gt({name:e,props:t,className:n,style:y,classes:s1e,classNames:r,styles:i,unstyled:s});return _.jsx(_e,{...T("root"),ref:x,__vars:{"--label-fz":ro(d),"--label-lh":yn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(_e,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(_e,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(ki.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(ki.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});pW.displayName="@mantine/core/InlineInput";const o1e=N.createContext(null),jze=o1e.Provider,a1e=()=>N.useContext(o1e),[Bze,Uze]=gx();var u1e={card:"m_26775b0a"};const zze={withBorder:!0},Vze=(e,{radius:t})=>({card:{"--card-radius":ii(t)}}),mW=je((e,t)=>{const n=Ee("CheckboxCard",zze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=gt({name:"CheckboxCard",classes:u1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Vze,rootSelector:"card"}),g=a1e(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(Bze,{value:{checked:y},children:_.jsx(Is,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});mW.displayName="@mantine/core/CheckboxCard";mW.classes=u1e;function l1e({children:e,role:t}){const n=wx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const Hze={},gW=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=Ee("CheckboxGroup",Hze,e),[c,f]=No({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(jze,{value:{value:c,onChange:d,size:s},children:_.jsx(ki.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(l1e,{role:"group",children:a})})})});gW.classes=ki.Wrapper.classes;gW.displayName="@mantine/core/CheckboxGroup";function c1e({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function f1e({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(c1e,{...t})}var d1e={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const qze={icon:f1e},Wze=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vc({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":yn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ii(t),"--checkbox-color":s==="outline"?u:Gr(n,e),"--checkbox-icon-color":i?Gr(i,e):yx(o,e)?ly({color:n,theme:e,autoContrast:o}):void 0}}},yW=je((e,t)=>{const n=Ee("CheckboxIndicator",qze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,x=gt({name:"CheckboxIndicator",classes:d1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Wze,rootSelector:"indicator"}),T=Uze(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(_e,{ref:t,...x("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...x("icon")})})});yW.displayName="@mantine/core/CheckboxIndicator";yW.classes=d1e;var h1e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Gze={labelPosition:"right",icon:f1e},Yze=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vc({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":yn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:ii(t),"--checkbox-color":s==="outline"?u:Gr(n,e),"--checkbox-icon-color":i?Gr(i,e):yx(o,e)?ly({color:n,theme:e,autoContrast:o}):void 0}}},Lf=je((e,t)=>{const n=Ee("Checkbox",Gze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:x,indeterminate:T,icon:S,rootRef:C,iconColor:A,onChange:R,autoContrast:k,mod:O,...D}=n,$=a1e(),L=d||($==null?void 0:$.size),F=S,B=gt({name:"Checkbox",props:n,classes:h1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Yze}),{styleProps:U,rest:q}=vx(D),P=Ku(f),V=$?{checked:$.value.includes(q.value),onChange:W=>{$.onChange(W),R==null||R(W)}}:{};return _.jsx(pW,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:P,size:L,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":V.checked||g||void 0,variant:x,ref:C,mod:O,...U,...p,children:_.jsxs(_e,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(_e,{component:"input",id:P,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:T},...B("input",{focusable:!0,variant:x}),onChange:R,...q,...V,type:"checkbox"}),_.jsx(F,{indeterminate:T,...B("icon")})]})})});Lf.classes={...h1e,...Fze};Lf.displayName="@mantine/core/Checkbox";Lf.Group=gW;Lf.Indicator=yW;Lf.Card=mW;function iE(e){return"group"in e}function p1e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;iE(o)&&i.push({group:o.group,items:p1e({options:o.items,search:t,limit:n-i.length})}),iE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Kze(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function m1e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(iE(n))m1e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Xze(e,t){return Array.isArray(e)?e.includes(t):e===t}function g1e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!iE(e)){const a=Xze(n,e.value),u=t&&a&&_.jsx(c1e,{className:Fu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Gn.Option,{value:e.value,disabled:e.disabled,className:Gi({[Fu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(g1e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Gn.Group,{label:e.group,children:o})}function y1e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){m1e(e);const b=typeof i=="string"?(r||p1e)({options:e,search:u?i:"",limit:s??1/0}):e,w=Kze(b),x=b.map(T=>_.jsx(g1e,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},iE(T)?T.group:T.value));return _.jsx(Gn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Gn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(hb.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:x}):x,w&&d&&_.jsx(Gn.Empty,{children:d})]})})}var v1e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Qze={},Jze=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":yn(s,"badge-height"),"--badge-padding-x":yn(s,"badge-padding-x"),"--badge-fz":yn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:ii(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Gr(n,e):void 0}}},zp=Os((e,t)=>{const n=Ee("Badge",Qze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,x=gt({name:"Badge",props:n,classes:v1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jze});return _.jsxs(_e,{variant:m,mod:[{block:g,circle:v},b],...x("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...x("section"),"data-position":"left",children:d}),_.jsx("span",{...x("label"),children:p}),h&&_.jsx("span",{...x("section"),"data-position":"right",children:h})]})});zp.classes=v1e;zp.displayName="@mantine/core/Badge";var b1e={root:"m_ddec01c0",icon:"m_dde7bd57",cite:"m_dde51a35"};const Zze={iconSize:48},eVe=(e,{color:t,iconSize:n,radius:r})=>{const i=vc({color:t||e.primaryColor,theme:e,colorScheme:"dark"}),s=vc({color:t||e.primaryColor,theme:e,colorScheme:"light"});return{root:{"--bq-bg-light":Jl(s.value,.07),"--bq-bg-dark":Jl(i.value,.06),"--bq-bd":Gr(t,e),"--bq-icon-size":Te(n),"--bq-radius":ii(r)}}},vW=je((e,t)=>{const n=Ee("Blockquote",Zze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,icon:c,iconSize:f,cite:d,...h}=n,p=gt({name:"Blockquote",classes:b1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eVe});return _.jsxs(_e,{component:"blockquote",ref:t,...p("root"),...h,children:[c&&_.jsx("span",{...p("icon"),children:c}),l,d&&_.jsx("cite",{...p("cite"),children:d})]})});vW.classes=b1e;vW.displayName="@mantine/core/Blockquote";var _1e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const tVe={},nVe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Gr(t,e):void 0,"--burger-size":yn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),bW=je((e,t)=>{const n=Ee("Burger",tVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=gt({name:"Burger",classes:_1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nVe});return _.jsxs(Is,{...p("root"),ref:t,...h,children:[_.jsx(_e,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});bW.classes=_1e;bW.displayName="@mantine/core/Burger";var OM={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Zie={orientation:"horizontal"},rVe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),_W=je((e,t)=>{const n=Ee("ButtonGroup",Zie,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=Ee("ButtonGroup",Zie,e),p=gt({name:"ButtonGroup",props:n,classes:OM,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:rVe,rootSelector:"group"});return _.jsx(_e,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});_W.classes=OM;_W.displayName="@mantine/core/ButtonGroup";const iVe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},sVe={},oVe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":yn(s,"button-height"),"--button-padding-x":yn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?ro(s.replace("compact-","")):ro(s),"--button-radius":t===void 0?void 0:ii(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},jn=Os((e,t)=>{const n=Ee("Button",sVe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:x,mod:T,...S}=n,C=gt({name:"Button",props:n,classes:OM,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:oVe}),A=!!l,R=!!c;return _.jsxs(Is,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":A,"with-right-section":R},T],...S,children:[_.jsx(Nm,{mounted:!!p,transition:iVe,duration:150,children:k=>_.jsx(_e,{component:"span",...C("loader",{style:k}),"aria-hidden":!0,children:_.jsx(cy,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...C("inner"),children:[l&&_.jsx(_e,{component:"span",...C("section"),mod:{position:"left"},children:l}),_.jsx(_e,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&_.jsx(_e,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});jn.classes=OM;jn.displayName="@mantine/core/Button";jn.Group=_W;const[aVe,uVe]=Oo("Card component was not found in tree");var wW={root:"m_e615b15f",section:"m_599a2148"};const lVe={},$M=Os((e,t)=>{const n=Ee("CardSection",lVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=uVe();return _.jsx(_e,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});$M.classes=wW;$M.displayName="@mantine/core/CardSection";const cVe={},fVe=(e,{padding:t})=>({root:{"--card-padding":Cl(t)}}),hy=Os((e,t)=>{const n=Ee("Card",cVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=gt({name:"Card",props:n,classes:wW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fVe}),h=N.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===$M?N.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(aVe,{value:{getStyles:d},children:_.jsx(tE,{ref:t,unstyled:a,...d("root"),...f,children:p})})});hy.classes=wW;hy.displayName="@mantine/core/Card";hy.Section=$M;var w1e={root:"m_4451eb3a"};const dVe={},E0=Os((e,t)=>{const n=Ee("Center",dVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=gt({name:"Center",props:n,classes:w1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(_e,{ref:t,mod:[{inline:l},c],...d("root"),...f})});E0.classes=w1e;E0.displayName="@mantine/core/Center";var E1e={root:"m_7485cace"};const hVe={},pVe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:yn(t,"container-size")}}),Ih=je((e,t)=>{const n=Ee("Container",hVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=gt({name:"Container",classes:E1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pVe});return _.jsx(_e,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Ih.classes=E1e;Ih.displayName="@mantine/core/Container";var x1e={root:"m_3eebeb36",label:"m_9e365f20"};const mVe={orientation:"horizontal"},gVe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Gr(t,e):void 0,"--divider-border-style":n,"--divider-size":yn(r,"divider-size")}}),r1=je((e,t)=>{const n=Ee("Divider",mVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=gt({name:"Divider",classes:x1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gVe});return _.jsx(_e,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(_e,{component:"span",mod:{position:d},...m("label"),children:f})})});r1.classes=x1e;r1.displayName="@mantine/core/Divider";const[yVe,Sx]=Oo("Drawer component was not found in tree");var Pm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const vVe={},MM=je((e,t)=>{const n=Ee("DrawerBody",vVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Sx();return _.jsx(Uq,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});MM.classes=Pm;MM.displayName="@mantine/core/DrawerBody";const bVe={},LM=je((e,t)=>{const n=Ee("DrawerCloseButton",bVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Sx();return _.jsx(zq,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});LM.classes=Pm;LM.displayName="@mantine/core/DrawerCloseButton";const _Ve={},FM=je((e,t)=>{const n=Ee("DrawerContent",_Ve,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Sx(),d=f.scrollAreaComponent||qve;return _.jsx(Hve,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});FM.classes=Pm;FM.displayName="@mantine/core/DrawerContent";const wVe={},jM=je((e,t)=>{const n=Ee("DrawerHeader",wVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Sx();return _.jsx(Vq,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});jM.classes=Pm;jM.displayName="@mantine/core/DrawerHeader";const EVe={},BM=je((e,t)=>{const n=Ee("DrawerOverlay",EVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Sx();return _.jsx(Hq,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});BM.classes=Pm;BM.displayName="@mantine/core/DrawerOverlay";function xVe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function SVe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const TVe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},CVe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},AVe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:kc("modal"),position:"left"},IVe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":yn(n,"drawer-size"),"--drawer-flex":SVe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":xVe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),UM=je((e,t)=>{const n=Ee("DrawerRoot",AVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Ah(),m=gt({name:"Drawer",classes:Pm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IVe}),g=(p==="rtl"?CVe:TVe)[c];return _.jsx(yVe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(Vve,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});UM.classes=Pm;UM.displayName="@mantine/core/DrawerRoot";const kVe={},zM=je((e,t)=>{const n=Ee("DrawerTitle",kVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Sx();return _.jsx(qq,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});zM.classes=Pm;zM.displayName="@mantine/core/DrawerTitle";const RVe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:kc("modal"),withOverlay:!0,withCloseButton:!0},kh=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=Ee("Drawer",RVe,e),l=!!n||s;return _.jsxs(UM,{ref:t,...u,children:[r&&_.jsx(BM,{...i}),_.jsxs(FM,{children:[l&&_.jsxs(jM,{children:[n&&_.jsx(zM,{children:n}),s&&_.jsx(LM,{...o})]}),_.jsx(MM,{children:a})]})]})});kh.classes=Pm;kh.displayName="@mantine/core/Drawer";kh.Root=UM;kh.Overlay=BM;kh.Content=FM;kh.Body=MM;kh.Header=jM;kh.Title=zM;kh.CloseButton=LM;function S1e({open:e,close:t,openDelay:n,closeDelay:r}){const i=N.useRef(-1),s=N.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return N.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[NVe,T1e]=Oo("Grid component was not found in tree"),VB=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,ese=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":VB(e,t),tse=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},nse=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function DVe({span:e,order:t,offset:n,selector:r}){var d;const i=Ps(),s=T1e(),a=LT(e)===void 0?12:LT(e),u=mx({"--col-order":(d=LT(t))==null?void 0:d.toString(),"--col-flex-grow":tse(a,s.grow),"--col-flex-basis":VB(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":ese(a,s.columns,s.grow),"--col-offset":nse(LT(n),s.columns)}),l=Ii(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=tse(e[p],s.grow),h[p]["--col-flex-basis"]=VB(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=ese(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=nse(n[p],s.columns)),h},{}),f=XP(Ii(l),i).filter(h=>Ii(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(yI,{styles:u,media:f,selector:r})}var EW={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const PVe={span:12},xW=je((e,t)=>{const n=Ee("GridCol",PVe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=T1e(),h=CM();return _.jsxs(_.Fragment,{children:[_.jsx(DVe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(_e,{ref:t,...d.getStyles("col",{className:Gi(i,h),style:s,classNames:r,styles:o}),...f})]})});xW.classes=EW;xW.displayName="@mantine/core/GridCol";function OVe({gutter:e,selector:t}){const n=Ps(),r=mx({"--grid-gutter":Cl(LT(e))}),i=Ii(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=Cl(e[u])),a),{}),o=XP(Ii(i),n).filter(a=>Ii(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(yI,{styles:r,media:o,selector:t})}const $Ve={gutter:"md",grow:!1,columns:12},MVe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Fa=je((e,t)=>{const n=Ee("Grid",$Ve,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=gt({name:"Grid",classes:EW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MVe}),y=CM();return _.jsxs(NVe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(OVe,{selector:`.${y}`,...n}),_.jsx(_e,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});Fa.classes=EW;Fa.displayName="@mantine/core/Grid";Fa.Col=xW;const[LVe,C1e]=Oo("HoverCard component was not found in the tree"),FVe={};function A1e(e){const{children:t,onMouseEnter:n,onMouseLeave:r,...i}=Ee("HoverCardDropdown",FVe,e),s=C1e(),o=hl(n,s.openDropdown),a=hl(r,s.closeDropdown);return _.jsx(Nr.Dropdown,{onMouseEnter:o,onMouseLeave:a,...i,children:t})}A1e.displayName="@mantine/core/HoverCardDropdown";const jVe={refProp:"ref"},I1e=N.forwardRef((e,t)=>{const{children:n,refProp:r,eventPropsWrapperName:i,...s}=Ee("HoverCardTarget",jVe,e);if(!Im(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=C1e(),a=hl(n.props.onMouseEnter,o.openDropdown),u=hl(n.props.onMouseLeave,o.closeDropdown),l={onMouseEnter:a,onMouseLeave:u};return _.jsx(Nr.Target,{refProp:r,ref:t,...s,children:N.cloneElement(n,i?{[i]:l}:l)})});I1e.displayName="@mantine/core/HoverCardTarget";const BVe={openDelay:0,closeDelay:150,initiallyOpened:!1};function i1(e){const{children:t,onOpen:n,onClose:r,openDelay:i,closeDelay:s,initiallyOpened:o,...a}=Ee("HoverCard",BVe,e),[u,{open:l,close:c}]=t1(o,{onClose:r,onOpen:n}),{openDropdown:f,closeDropdown:d}=S1e({open:l,close:c,openDelay:i,closeDelay:s});return _.jsx(LVe,{value:{openDropdown:f,closeDropdown:d},children:_.jsx(Nr,{...a,opened:u,__staticSelector:"HoverCard",children:t})})}i1.displayName="@mantine/core/HoverCard";i1.Target=I1e;i1.Dropdown=A1e;i1.extend=e=>e;var k1e={root:"m_9e117634"};const UVe={},zVe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:ii(t),"--image-object-fit":n}}),py=Os((e,t)=>{const n=Ee("Image",UVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=N.useState(!c);N.useEffect(()=>y(!c),[c]);const v=gt({name:"Image",classes:k1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zVe});return g&&h?_.jsx(_e,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(_e,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});py.classes=k1e;py.displayName="@mantine/core/Image";function HB(){return HB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HB.apply(null,arguments)}function VVe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var HVe=N.useLayoutEffect,qVe=function(t){var n=N.useRef(t);return HVe(function(){n.current=t}),n},rse=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},WVe=function(t,n){var r=N.useRef();return N.useCallback(function(i){t.current=i,r.current&&rse(r.current,null),r.current=n,n&&rse(n,i)},[n])},ise={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},GVe=function(t){Object.keys(ise).forEach(function(n){t.style.setProperty(n,ise[n],"important")})},sse=GVe,Ta=null,ose=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function YVe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ta||(Ta=document.createElement("textarea"),Ta.setAttribute("tabindex","-1"),Ta.setAttribute("aria-hidden","true"),sse(Ta)),Ta.parentNode===null&&document.body.appendChild(Ta);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Ta.style[h]=o[h]}),sse(Ta),Ta.value=t;var u=ose(Ta,e);Ta.value=t,u=ose(Ta,e),Ta.value="x";var l=Ta.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var ase=function(){},KVe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},XVe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],QVe=!!document.documentElement.currentStyle,JVe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=KVe(XVe,n),i=r.boxSizing;if(i==="")return null;QVe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},ZVe=JVe;function R1e(e,t,n){var r=qVe(n);N.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var eHe=function(t){R1e(window,"resize",t)},tHe=function(t){R1e(document.fonts,"loadingdone",t)},nHe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],rHe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?ase:o,u=t.onHeightChange,l=u===void 0?ase:u,c=VVe(t,nHe),f=c.value!==void 0,d=N.useRef(null),h=WVe(d,n),p=N.useRef(0),m=N.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:ZVe(b);if(w){m.current=w;var x=YVe(w,b.value||b.placeholder||"x",s,i),T=x[0],S=x[1];p.current!==T&&(p.current=T,b.style.setProperty("height",T+"px","important"),l(T,{rowHeight:S}))}},y=function(b){f||g(),a(b)};return N.useLayoutEffect(g),eHe(g),tHe(g),N.createElement("textarea",HB({},c,{onChange:y,ref:h}))},iHe=N.forwardRef(rHe);const sHe={},SW=je((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=Ee("Textarea",sHe,e),u=n&&Vye()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Dc,{component:u?iHe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});SW.classes=Dc.classes;SW.displayName="@mantine/core/Textarea";const[oHe,aHe]=Oo("List component was not found in tree");var TW={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const uHe={},CW=je((e,t)=>{const n=Ee("ListItem",uHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=aHe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(_e,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});CW.classes=TW;CW.displayName="@mantine/core/ListItem";const lHe={type:"unordered"},cHe=(e,{size:t,spacing:n})=>({root:{"--list-fz":ro(t),"--list-lh":Oye(t),"--list-spacing":Cl(n)}}),Af=je((e,t)=>{const n=Ee("List",lHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=gt({name:"List",classes:TW,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cHe});return _.jsx(oHe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(_e,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Af.classes=TW;Af.displayName="@mantine/core/List";Af.Item=CW;var N1e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const use={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:kc("overlay")},fHe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),_c=je((e,t)=>{const n=Ee("LoadingOverlay",use,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Ps(),g=gt({name:"LoadingOverlay",classes:N1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fHe}),y={...use.overlayProps,...f};return _.jsx(Nm,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(_e,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(cy,{...g("loader"),unstyled:a,...c}),_.jsx(UA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(UA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});_c.classes=N1e;_c.displayName="@mantine/core/LoadingOverlay";const[dHe,xI]=Oo("Menu component was not found in the tree");var Tx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const hHe={},AW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ee("MenuDivider",hHe,e),u=xI();return _.jsx(_e,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});AW.classes=Tx;AW.displayName="@mantine/core/MenuDivider";const pHe={},IW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=Ee("MenuDropdown",pHe,e),f=N.useRef(null),d=xI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=hl(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=hl(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Nr.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:us(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});IW.classes=Tx;IW.displayName="@mantine/core/MenuDropdown";const mHe={},kW=Os((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=Ee("MenuItem",mHe,e),p=xI(),m=Ps(),{dir:g}=Ah(),y=N.useRef(),v=p.getItemIndex(y.current),b=h,w=hl(b.onMouseLeave,()=>p.setHovered(-1)),x=hl(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=hl(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=hl(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?vc({color:a,theme:m}):null;return _.jsxs(Is,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:us(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:x,onMouseLeave:w,onClick:T,onKeyDown:Pye({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});kW.classes=Tx;kW.displayName="@mantine/core/MenuItem";const gHe={},RW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ee("MenuLabel",gHe,e),u=xI();return _.jsx(_e,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});RW.classes=Tx;RW.displayName="@mantine/core/MenuLabel";const yHe={refProp:"ref"},D1e=N.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=Ee("MenuTarget",yHe,e);if(!Im(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=xI(),o=hl(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=hl(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=hl(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Nr.Target,{refProp:r,popupType:"menu",ref:t,...i,children:N.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});D1e.displayName="@mantine/core/MenuTarget";const vHe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function gu(e){const t=Ee("Menu",vHe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:x,...T}=t,S=gt({name:"Menu",classes:Tx,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:R}]=Dje(),[k,O]=No({value:s,defaultValue:o,finalValue:!1,onChange:u}),[D,$]=N.useState(!1),L=()=>{O(!1),$(!1),k&&(i==null||i())},F=()=>{O(!0),!k&&(r==null||r())},B=()=>{k?L():F()},{openDropdown:U,closeDropdown:q}=S1e({open:F,close:L,closeDelay:p,openDelay:h}),P=j=>Nje("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:V,resolvedStyles:W}=km({classNames:m,styles:g,props:t});return im(()=>{R()},[k]),_.jsx(dHe,{value:{getStyles:S,opened:k,toggleDropdown:B,getItemIndex:P,hovered:C,setHovered:A,openedViaClick:D,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?L:q,openDropdown:d==="click"?F:U,closeDropdownImmediately:L,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(Nr,{...T,opened:k,onChange:B,defaultOpened:o,trapFocus:x?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:V,styles:W,unstyled:y,variant:v,keepMounted:x,children:n})})}gu.extend=e=>e;gu.classes=Tx;gu.displayName="@mantine/core/Menu";gu.Item=kW;gu.Label=RW;gu.Dropdown=IW;gu.Target=D1e;gu.Divider=AW;const[bHe,Cx]=Oo("Modal component was not found in tree");var Om={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const _He={},VM=je((e,t)=>{const n=Ee("ModalBody",_He,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Cx();return _.jsx(Uq,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});VM.classes=Om;VM.displayName="@mantine/core/ModalBody";const wHe={},HM=je((e,t)=>{const n=Ee("ModalCloseButton",wHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Cx();return _.jsx(zq,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});HM.classes=Om;HM.displayName="@mantine/core/ModalCloseButton";const EHe={},qM=je((e,t)=>{const n=Ee("ModalContent",EHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Cx(),f=c.scrollAreaComponent||qve;return _.jsx(Hve,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});qM.classes=Om;qM.displayName="@mantine/core/ModalContent";const xHe={},WM=je((e,t)=>{const n=Ee("ModalHeader",xHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Cx();return _.jsx(Vq,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});WM.classes=Om;WM.displayName="@mantine/core/ModalHeader";const SHe={},GM=je((e,t)=>{const n=Ee("ModalOverlay",SHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Cx();return _.jsx(Hq,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});GM.classes=Om;GM.displayName="@mantine/core/ModalOverlay";const THe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:kc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},CHe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:ii(t),"--modal-size":yn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),YM=je((e,t)=>{const n=Ee("ModalRoot",THe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=gt({name:m,classes:Om,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CHe});return _.jsx(bHe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(Vve,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});YM.classes=Om;YM.displayName="@mantine/core/ModalRoot";const AHe={},KM=je((e,t)=>{const n=Ee("ModalTitle",AHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Cx();return _.jsx(qq,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});KM.classes=Om;KM.displayName="@mantine/core/ModalTitle";const IHe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:kc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},gs=je((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=Ee("Modal",IHe,e),c=!!n||s;return _.jsxs(YM,{ref:t,radius:u,...l,children:[r&&_.jsx(GM,{...i}),_.jsxs(qM,{radius:u,children:[c&&_.jsxs(WM,{children:[n&&_.jsx(KM,{children:n}),s&&_.jsx(HM,{...o})]}),_.jsx(VM,{children:a})]})]})});gs.classes=Om;gs.displayName="@mantine/core/Modal";gs.Root=YM;gs.Overlay=GM;gs.Content=qM;gs.Body=VM;gs.Header=WM;gs.Title=KM;gs.CloseButton=HM;const[kHe,NW]=gx(),[RHe,NHe]=gx();var XM={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const DHe={},PHe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?yn(t):yn(n,"pg-gap")}}),DW=je((e,t)=>{const n=Ee("PillGroup",DHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=NW(),h=(d==null?void 0:d.size)||l||void 0,p=gt({name:"PillGroup",classes:XM,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PHe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(RHe,{value:{size:h,disabled:c},children:_.jsx(_e,{ref:t,size:h,...p("group"),...f})})});DW.classes=XM;DW.displayName="@mantine/core/PillGroup";const OHe={variant:"default"},$He=(e,{radius:t},{size:n})=>({root:{"--pill-fz":yn(n,"pill-fz"),"--pill-height":yn(n,"pill-height"),"--pill-radius":t===void 0?void 0:ii(t)}}),zA=je((e,t)=>{const n=Ee("Pill",OHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=NHe(),w=NW(),x=m||(b==null?void 0:b.size)||void 0,T=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",S=gt({name:"Pill",classes:XM,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$He,stylesCtx:{size:x}});return _.jsxs(_e,{component:"span",ref:t,variant:T,size:x,...S("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...S("label"),children:c}),f&&_.jsx(fy,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});zA.classes=XM;zA.displayName="@mantine/core/Pill";zA.Group=DW;var P1e={field:"m_45c4369d"};const MHe={type:"visible"},PW=je((e,t)=>{const n=Ee("PillsInputField",MHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=NW(),g=wx(),y=gt({name:"PillsInputField",classes:P1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(_e,{component:"input",ref:us(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});PW.classes=P1e;PW.displayName="@mantine/core/PillsInputField";const LHe={},rO=je((e,t)=>{const n=Ee("PillsInput",LHe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=N.useRef();return _.jsx(kHe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Dc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});rO.displayName="@mantine/core/PillsInput";rO.Field=PW;function FHe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(iE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const jHe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},OW=je((e,t)=>{const n=Ee("MultiSelect",jHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:x,comboboxProps:T,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:R,searchValue:k,defaultSearchValue:O,onSearchChange:D,readOnly:$,disabled:L,onFocus:F,onBlur:B,onPaste:U,radius:q,rightSection:P,rightSectionWidth:V,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:pe,inputContainer:fe,inputWrapperOrder:de,withAsterisk:ye,labelProps:Ae,descriptionProps:ve,errorProps:rt,wrapperProps:ze,description:yt,label:ot,error:De,maxValues:Me,searchable:Ye,nothingFoundMessage:pt,withCheckIcon:Pt,checkIconPosition:qe,hidePickedOptions:me,withErrorStyles:ft,name:vt,form:he,id:Ce,clearable:Ve,clearButtonProps:ut,hiddenInputProps:_t,placeholder:On,hiddenInputValuesDivider:Sr,required:$n,mod:ur,renderOption:hn,onRemove:xn,onClear:er,scrollAreaProps:tr,...Lo}=n,Di=Ku(Ce),Sn=Zve(m),Pi=nW(Sn),Tr=hW({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Tr.resetSelectedOption()}}),{styleProps:cs,rest:{type:Jh,autoComplete:Zu,...id}}=vx(Lo),[_r,xi]=No({value:c,defaultValue:f,finalValue:[],onChange:d}),[Kr,ru]=No({value:k,defaultValue:O,finalValue:"",onChange:D}),Ea=gt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:xa,resolvedStyles:oe}=km({props:n,styles:o,classNames:r}),ee=st=>{h==null||h(st),st.key===" "&&!Ye&&(st.preventDefault(),Tr.toggleDropdown()),st.key==="Backspace"&&Kr.length===0&&_r.length>0&&(xn==null||xn(_r[_r.length-1]),xi(_r.slice(0,_r.length-1)))},ae=_r.map((st,St)=>{var Vt,Nn;return _.jsx(zA,{withRemoveButton:!$&&!((Vt=Pi[st])!=null&&Vt.disabled),onRemove:()=>{xi(_r.filter(Mn=>st!==Mn)),xn==null||xn(st)},unstyled:a,disabled:L,...Ea("pill"),children:((Nn=Pi[st])==null?void 0:Nn.label)||st},`${st}-${St}`)});N.useEffect(()=>{w&&Tr.selectFirstOption()},[w,_r]);const Se=Ve&&_r.length>0&&!L&&!$&&_.jsx(Gn.ClearButton,{size:l,...ut,onClear:()=>{er==null||er(),xi([]),ru("")}}),xe=FHe({data:Sn,value:_r});return _.jsxs(_.Fragment,{children:[_.jsxs(Gn,{store:Tr,classNames:xa,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:st=>{x==null||x(st),ru(""),Tr.updateSelectedOptionIndex("selected"),_r.includes(Pi[st].value)?(xi(_r.filter(St=>St!==Pi[st].value)),xn==null||xn(Pi[st].value)):_r.length<Me&&xi([..._r,Pi[st].value])},...T,children:[_.jsx(Gn.DropdownTarget,{children:_.jsx(rO,{...cs,__staticSelector:"MultiSelect",classNames:xa,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:L,radius:q,rightSection:P||Se||_.jsx(Gn.Chevron,{size:l,error:De,unstyled:a}),rightSectionPointerEvents:W||(Se?"all":"none"),rightSectionWidth:V,rightSectionProps:j,leftSection:H,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:pe,inputContainer:fe,inputWrapperOrder:de,withAsterisk:ye,labelProps:Ae,descriptionProps:ve,errorProps:rt,wrapperProps:ze,description:yt,label:ot,error:De,multiline:!0,withErrorStyles:ft,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Se?"all":"none"),multiline:!0},pointer:!Ye,onClick:()=>Ye?Tr.openDropdown():Tr.toggleDropdown(),"data-expanded":Tr.dropdownOpened||void 0,id:Di,required:$n,mod:ur,children:_.jsxs(zA.Group,{disabled:L,unstyled:a,...Ea("pillsList"),children:[ae,_.jsx(Gn.EventsTarget,{autoComplete:Zu,children:_.jsx(rO.Field,{...id,ref:t,id:Di,placeholder:On,type:!Ye&&!On?"hidden":"visible",...Ea("inputField"),unstyled:a,onFocus:st=>{F==null||F(st),Ye&&Tr.openDropdown()},onBlur:st=>{B==null||B(st),Tr.closeDropdown(),ru("")},onKeyDown:ee,value:Kr,onChange:st=>{ru(st.currentTarget.value),Ye&&Tr.openDropdown(),w&&Tr.selectFirstOption()},disabled:L,readOnly:$||!Ye,pointer:!Ye})})]})})}),_.jsx(y1e,{data:me?xe:Sn,hidden:$||L,filter:S,search:Kr,limit:C,hiddenWhenEmpty:!Ye||!pt||me&&xe.length===0&&Kr.trim().length===0,withScrollArea:A,maxDropdownHeight:R,filterOptions:Ye,value:_r,checkIconPosition:qe,withCheckIcon:Pt,nothingFoundMessage:pt,unstyled:a,labelId:ot?`${Di}-label`:void 0,"aria-label":ot?void 0:Lo["aria-label"],renderOption:hn,scrollAreaProps:tr})]}),_.jsx(Gn.HiddenInput,{name:vt,valuesDivider:Sr,value:_r,form:he,disabled:L,..._t})]})});OW.classes={...Dc.classes,...Gn.classes};OW.displayName="@mantine/core/MultiSelect";var O1e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const BHe={},UHe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":Cl(r)}}},QM=Os((e,t)=>{const n=Ee("NavLink",BHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:x,childrenOffset:T,onKeyDown:S,autoContrast:C,mod:A,...R}=n,k=gt({name:"NavLink",props:n,classes:O1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UHe}),[O,D]=No({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,L=F=>{h==null||h(F),$&&(F.preventDefault(),D(!O))};return _.jsxs(_.Fragment,{children:[_.jsxs(Is,{...k("root"),component:"a",ref:t,onClick:L,onKeyDown:F=>{S==null||S(F),F.nativeEvent.code==="Space"&&$&&(F.preventDefault(),D(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...R,children:[g&&_.jsx(_e,{component:"span",...k("section"),mod:{position:"left"},children:g}),_.jsxs(_e,{...k("body"),mod:{"no-wrap":x},children:[_.jsx(_e,{component:"span",...k("label"),children:v}),_.jsx(_e,{component:"span",mod:{active:p},...k("description"),children:b})]}),($||y)&&_.jsx(_e,{...k("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||_.jsx(nO,{...k("chevron")}):y})]}),_.jsx(tve,{in:O,...k("collapse"),children:_.jsx("div",{...k("children"),children:d})})]})});QM.classes=O1e;QM.displayName="@mantine/core/NavLink";function $1e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var VA;(function(e){e.event="event",e.props="prop"})(VA||(VA={}));function Sg(){}function zHe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function HA(e){return!!(e||"").match(/\d/)}function pw(e){return e==null}function VHe(e){return typeof e=="number"&&isNaN(e)}function M1e(e){return pw(e)||VHe(e)||typeof e=="number"&&!isFinite(e)}function L1e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function HHe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function qHe(e,t,n){var r=HHe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function WHe(e){var t=N.useRef(e);t.current=e;var n=N.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function $W(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function GHe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function F1e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function lse(e,t){return Array(t+1).join(e)}function j1e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+lse("0",Math.abs(o))+i:o>=a?i=i+lse("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function cse(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=$W(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=F1e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function bv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var B1e=zHe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),YHe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function KHe(e,t,n){return Math.min(Math.max(e,t),n)}function F5(e){return Math.max(e.selectionStart,e.selectionEnd)}function XHe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function QHe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function JHe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function ZHe(e,t,n,r,i,s,o){o===void 0&&(o=JHe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function fse(e,t,n,r){var i=e.length;if(t=KHe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function eqe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(HA(e[n])||HA(e[n-1]));return t}function U1e(e,t,n,r,i,s){s===void 0&&(s=Sg);var o=WHe(function(p,m){var g,y;return M1e(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?j1e(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=N.useState(function(){return o(pw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;pw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return N.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function tqe(e){return e.replace(/[^0-9]/g,"")}function nqe(e){return e}function rqe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=nqe);var a=e.removeFormatting;a===void 0&&(a=tqe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Sg);var h=e.onKeyDown;h===void 0&&(h=Sg);var p=e.onMouseUp;p===void 0&&(p=Sg);var m=e.onFocus;m===void 0&&(m=Sg);var g=e.onBlur;g===void 0&&(g=Sg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=eqe);var b=e.isValidInputCharacter;b===void 0&&(b=HA);var w=e.isCharacterSame,x=$1e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=U1e(y,u,!!l,o,a,c),S=T[0],C=S.formattedValue,A=S.numAsString,R=T[1],k=N.useRef(),O=N.useRef({formattedValue:C,numAsString:A}),D=function(De,Me){O.current={formattedValue:De.formattedValue,numAsString:De.value},R(De,Me)},$=N.useState(!1),L=$[0],F=$[1],B=N.useRef(null),U=N.useRef({setCaretTimeout:null,focusTimeout:null});N.useEffect(function(){return F(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var q=o,P=function(De,Me){var Ye=parseFloat(Me);return{formattedValue:De,value:Me,floatValue:isNaN(Ye)?void 0:Ye}},V=function(De,Me,Ye){De.selectionStart===0&&De.selectionEnd===De.value.length||(bv(De,Me),U.current.setCaretTimeout=setTimeout(function(){De.value===Ye&&De.selectionStart!==Me&&bv(De,Me)},0))},W=function(De,Me,Ye){return fse(De,Me,v(De),Ye)},j=function(De,Me,Ye){var pt=v(Me),Pt=ZHe(Me,C,De,Ye,pt,b,w);return Pt=fse(Me,Pt,pt),Pt},H=function(De){var Me=De.formattedValue;Me===void 0&&(Me="");var Ye=De.input,pt=De.source,Pt=De.event,qe=De.numAsString,me;if(Ye){var ft=De.inputValue||Ye.value,vt=F5(Ye);Ye.value=Me,me=j(ft,Me,vt),me!==void 0&&V(Ye,me,Me)}Me!==C&&D(P(Me,qe),{event:Pt,source:pt})};N.useEffect(function(){var De=O.current,Me=De.formattedValue,Ye=De.numAsString;(C!==Me||A!==Ye)&&D(P(C,A),{event:void 0,source:VA.props})},[C,A]);var G=B.current?F5(B.current):void 0,ne=typeof window<"u"?N.useLayoutEffect:N.useEffect;ne(function(){var De=B.current;if(C!==O.current.formattedValue&&De){var Me=j(O.current.formattedValue,C,G);De.value=C,V(De,Me,C)}},[C]);var pe=function(De,Me,Ye){var pt=Me.target,Pt=k.current?YHe(k.current,pt.selectionEnd):B1e(C,De),qe=Object.assign(Object.assign({},Pt),{lastValue:C}),me=a(De,qe),ft=q(me);if(me=a(ft,void 0),f&&!f(P(ft,me))){var vt=Me.target,he=F5(vt),Ce=j(De,C,he);return vt.value=C,V(vt,Ce,C),!1}return H({formattedValue:ft,numAsString:me,inputValue:De,event:Me,source:Ye,input:Me.target}),!0},fe=function(De,Me){Me===void 0&&(Me=0);var Ye=De.selectionStart,pt=De.selectionEnd;k.current={selectionStart:Ye,selectionEnd:pt+Me}},de=function(De){var Me=De.target,Ye=Me.value,pt=pe(Ye,De,VA.event);pt&&d(De),k.current=void 0},ye=function(De){var Me=De.target,Ye=De.key,pt=Me.selectionStart,Pt=Me.selectionEnd,qe=Me.value;qe===void 0&&(qe="");var me;Ye==="ArrowLeft"||Ye==="Backspace"?me=Math.max(pt-1,0):Ye==="ArrowRight"?me=Math.min(pt+1,qe.length):Ye==="Delete"&&(me=pt);var ft=0;Ye==="Delete"&&pt===Pt&&(ft=1);var vt=Ye==="ArrowLeft"||Ye==="ArrowRight";if(me===void 0||pt!==Pt&&!vt){h(De),fe(Me,ft);return}var he=me;if(vt){var Ce=Ye==="ArrowLeft"?"left":"right";he=W(qe,me,Ce),he!==me&&De.preventDefault()}else Ye==="Delete"&&!b(qe[me])?he=W(qe,me,"right"):Ye==="Backspace"&&!b(qe[me])&&(he=W(qe,me,"left"));he!==me&&V(Me,he,qe),h(De),fe(Me,ft)},Ae=function(De){var Me=De.target,Ye=function(){var pt=Me.selectionStart,Pt=Me.selectionEnd,qe=Me.value;if(qe===void 0&&(qe=""),pt===Pt){var me=W(qe,pt);me!==pt&&V(Me,me,qe)}};Ye(),requestAnimationFrame(function(){Ye()}),p(De),fe(Me)},ve=function(De){De.persist&&De.persist();var Me=De.target,Ye=De.currentTarget;B.current=Me,U.current.focusTimeout=setTimeout(function(){var pt=Me.selectionStart,Pt=Me.selectionEnd,qe=Me.value;qe===void 0&&(qe="");var me=W(qe,pt);me!==pt&&!(pt===0&&Pt===qe.length)&&V(Me,me,qe),m(Object.assign(Object.assign({},De),{currentTarget:Ye}))},0)},rt=function(De){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(De)},ze=L&&XHe()?"numeric":void 0,yt=Object.assign({inputMode:ze},x,{type:t,value:C,onChange:de,onKeyDown:ye,onMouseUp:Ae,onFocus:ve,onBlur:rt});if(n==="text")return i?Hi.createElement(Hi.Fragment,null,i(C,x)||null):Hi.createElement("span",Object.assign({},x,{ref:s}),C);if(r){var ot=r;return Hi.createElement(ot,Object.assign({},yt,{ref:s}))}return Hi.createElement("input",Object.assign({},yt,{ref:s}))}function dse(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=JM(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=$W(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=F1e(p,n,!!r)),l&&(h=qHe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function JM(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function iqe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function sqe(e,t){return new RegExp("(^-)|[0-9]|"+L1e(e),"g")}function oqe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function aqe(e,t,n){var r;t===void 0&&(t=QHe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=JM(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(HA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,q){var P=!1,V=!1;s.startsWith("-")?P=!1:B.startsWith("--")?(P=!1,V=!0):o.startsWith("-")&&B.length===o.length?P=!1:B[0]==="-"&&(P=!0);var W=P?1:0;return V&&(W=2),W&&(B=B.substring(W),U-=W,q-=W),{value:B,start:U,end:q,hasNegation:P}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),x=w.start,T=w.end,S=w.value,C=e.substring(c,f);e.length&&S.length&&(x>S.length-o.length||T<s.length)&&!(C&&o.startsWith(C))&&(e=S);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var R=e.length,k=e.length-o.length;e.endsWith(o)?R=k:(f>k||f>e.length-o.length)&&(R=f),e=e.substring(0,R),e=iqe(b?"-"+e:e,i),e=(e.match(sqe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(L1e(p),"g"),function(B,U){return U===O?".":""});var D=$W(e,i),$=D.beforeDecimal,L=D.afterDecimal,F=D.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(L)&&(e=F?"-":""),e}function uqe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function lqe(e){var t=JM(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function cqe(e){e=lqe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Sg);var s=e.onBlur;s===void 0&&(s=Sg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=$1e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=JM(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(F){return dse(F,e)},b=function(F,B){return aqe(F,B,e)},w=pw(f)?c:f,x=d??oqe(w,l,t);pw(f)?pw(c)||(x=x||typeof c=="number"):x=x||typeof f=="number";var T=function(F){return M1e(F)?F:(typeof F=="number"&&(F=j1e(F)),x&&typeof a=="number"?cse(F,a,!!u):F)},S=U1e(T(f),T(c),!!x,v,b,h),C=S[0],A=C.numAsString,R=C.formattedValue,k=S[1],O=function(F){var B=F.target,U=F.key,q=B.selectionStart,P=B.selectionEnd,V=B.value;if(V===void 0&&(V=""),(U==="Backspace"||U==="Delete")&&P<l.length){F.preventDefault();return}if(q!==P){i(F);return}U==="Backspace"&&V[0]==="-"&&q===l.length+1&&n&&bv(B,1),a&&u&&(U==="Backspace"&&V[q-1]===g?(bv(B,q-1),F.preventDefault()):U==="Delete"&&V[q]===g&&F.preventDefault()),y!=null&&y.includes(U)&&V[q]===g&&bv(B,q+1);var W=o===!0?",":o;U==="Backspace"&&V[q-1]===W&&bv(B,q-1),U==="Delete"&&V[q]===W&&bv(B,q+1),i(F)},D=function(F){var B=A;if(B.match(/\d/g)||(B=""),r||(B=GHe(B)),u&&a&&(B=cse(B,a,u)),B!==A){var U=dse(B,e);k({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:F,source:VA.event})}s(F)},$=function(F){return F===g?!0:HA(F)},L=function(F){var B=F.currentValue,U=F.lastValue,q=F.formattedValue,P=F.currentValueIndex,V=F.formattedValueIndex,W=B[P],j=q[V],H=B1e(U,B),G=H.to;return P>=G.start&&P<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:R,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:L,onValueChange:k,format:v,removeFormatting:b,getCaretBoundary:function(F){return uqe(F,e)},onKeyDown:O,onBlur:D})}function fqe(e){var t=cqe(e);return Hi.createElement(rqe,Object.assign({},t))}function hse({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var qB={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const dqe=/^(0\.0*|-0(\.0*)?)$/,hqe=/^-?0\d+(\.\d+)?\.?$/;function pqe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function pse(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const mqe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},gqe=(e,{size:t})=>({controls:{"--ni-chevron-size":yn(t,"ni-chevron-size")}}),MW=je((e,t)=>{const n=Ee("NumberInput",mqe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:x,onKeyDown:T,onKeyDownCapture:S,handlersRef:C,startValue:A,disabled:R,rightSectionPointerEvents:k,allowNegative:O,readOnly:D,size:$,rightSectionWidth:L,stepHoldInterval:F,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:q,trimLeadingZeroesOnBlur:P,...V}=n,W=gt({name:"NumberInput",classes:qB,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:gqe}),{resolvedClassNames:j,resolvedStyles:H}=km({classNames:i,styles:s,props:n}),[G,ne]=No({value:c,defaultValue:f,onChange:u}),pe=B!==void 0&&F!==void 0,fe=N.useRef(null),de=N.useRef(null),ye=N.useRef(0),Ae=(me,ft)=>{ft.source==="event"&&ne(pqe(me.floatValue)&&!dqe.test(me.value)&&!(U&&hqe.test(me.value))?me.floatValue:me.value),l==null||l(me,ft)},ve=me=>{const ft=String(me).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ft?Math.max(0,(ft[1]?ft[1].length:0)-(ft[2]?+ft[2]:0)):0},rt=me=>{fe.current&&typeof me<"u"&&fe.current.setSelectionRange(me,me)},ze=N.useRef();ze.current=()=>{let me;const ft=ve(G),vt=ve(p),he=Math.max(ft,vt),Ce=10**he;if(typeof G!="number"||Number.isNaN(G))me=Fd(A,h,d);else if(d!==void 0){const ut=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;me=ut<=d?ut:d}else me=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;const Ve=me.toFixed(he);ne(parseFloat(Ve)),l==null||l({floatValue:parseFloat(Ve),formattedValue:Ve,value:Ve},{source:"increment"}),setTimeout(()=>{var ut;return rt((ut=fe.current)==null?void 0:ut.value.length)},0)};const yt=N.useRef();yt.current=()=>{let me;const ft=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,vt=ve(G),he=ve(p),Ce=Math.max(vt,he),Ve=10**Ce;if(typeof G!="number"||Number.isNaN(G))me=Fd(A,ft,d);else{const _t=(Math.round(G*Ve)-Math.round(p*Ve))/Ve;me=ft!==void 0&&_t<ft?ft:_t}const ut=me.toFixed(Ce);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return rt((_t=fe.current)==null?void 0:_t.value.length)},0)};const ot=me=>{T==null||T(me),!(D||!q)&&(me.key==="ArrowUp"&&(me.preventDefault(),ze.current()),me.key==="ArrowDown"&&(me.preventDefault(),yt.current()))},De=me=>{if(S==null||S(me),me.key==="Backspace"){const ft=fe.current;ft.selectionStart===0&&ft.selectionStart===ft.selectionEnd&&(me.preventDefault(),window.setTimeout(()=>rt(0),0))}};dq(C,{increment:ze.current,decrement:yt.current});const Me=me=>{me?ze.current():yt.current(),ye.current+=1},Ye=me=>{if(Me(me),pe){const ft=typeof F=="number"?F:F(ye.current);de.current=window.setTimeout(()=>Ye(me),ft)}},pt=(me,ft)=>{var vt;me.preventDefault(),(vt=fe.current)==null||vt.focus(),Me(ft),pe&&(de.current=window.setTimeout(()=>Ye(ft),B))},Pt=()=>{de.current&&window.clearTimeout(de.current),de.current=null,ye.current=0},qe=_.jsxs("div",{...W("controls"),children:[_.jsx(Is,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{pt(me,!0)},onPointerUp:Pt,onPointerLeave:Pt,children:_.jsx(hse,{direction:"up"})}),_.jsx(Is,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:R||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:me=>me.preventDefault(),onPointerDown:me=>{pt(me,!1)},onPointerUp:Pt,onPointerLeave:Pt,children:_.jsx(hse,{direction:"down"})})]});return _.jsx(Dc,{component:fqe,allowNegative:O,className:Gi(qB.root,r),size:$,...V,readOnly:D,disabled:R,value:G,getInputRef:us(t,fe),onValueChange:Ae,rightSection:m||D?g:g||qe,classNames:j,styles:H,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?x:0,onKeyDown:ot,onKeyDownCapture:De,rightSectionPointerEvents:k??(R?"none":void 0),rightSectionWidth:L??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:U,onBlur:me=>{if(b==null||b(me),v==="blur"&&typeof G=="number"&&Fd(G,h,d)!==G&&ne(Fd(G,h,d)),P&&typeof G=="string"){const ft=G.replace(/^0+/,""),vt=parseFloat(ft);ne(Number.isNaN(vt)?ft:vt)}},isAllowed:me=>v==="strict"?y?y(me)&&pse(me.floatValue,h,d):pse(me.floatValue,h,d):y?y(me):!0})});MW.classes={...Dc.classes,...qB};MW.displayName="@mantine/core/NumberInput";const[yqe,z1e]=Oo("Progress.Root component was not found in tree");var SI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const vqe={},LW=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=Ee("ProgressLabel",vqe,e),u=z1e();return _.jsx(_e,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});LW.classes=SI;LW.displayName="@mantine/core/ProgressLabel";const bqe={},_qe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":yn(t,"progress-size"),"--progress-radius":n===void 0?void 0:ii(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),ZM=je((e,t)=>{const n=Ee("ProgressRoot",bqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=gt({name:"Progress",classes:SI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_qe});return _.jsx(yqe,{value:{getStyles:d,autoContrast:l},children:_.jsx(_e,{ref:t,...d("root"),...f})})});ZM.classes=SI;ZM.displayName="@mantine/core/ProgressRoot";const wqe={withAria:!0},eL=je((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=Ee("ProgressSection",wqe,e),p=z1e(),m=Ps(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(_e,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Gr(l,m),"--progress-label-color":yx(p.autoContrast,m)?ly({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});eL.classes=SI;eL.displayName="@mantine/core/ProgressSection";const Eqe={},Ax=je((e,t)=>{const n=Ee("Progress",Eqe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=km({classNames:i,styles:s,props:n});return _.jsx(ZM,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(eL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});Ax.classes=SI;Ax.displayName="@mantine/core/Progress";Ax.Section=eL;Ax.Root=ZM;Ax.Label=LW;const[xqe,V1e]=gx(),[Sqe,Tqe]=gx();var H1e={card:"m_9dc8ae12"};const Cqe={withBorder:!0},Aqe=(e,{radius:t})=>({card:{"--card-radius":ii(t)}}),FW=je((e,t)=>{const n=Ee("RadioCard",Cqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=gt({name:"RadioCard",classes:H1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Aqe,rootSelector:"card"}),{dir:v}=Ah(),b=V1e(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,x=p||(b==null?void 0:b.name),T=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${x||"__mantine"}"]`)),A=C.findIndex(O=>O===S.target),R=A+1>=C.length?0:A+1,k=A-1<0?C.length-1:A-1;S.nativeEvent.code==="ArrowDown"&&(C[R].focus(),C[R].click()),S.nativeEvent.code==="ArrowUp"&&(C[k].focus(),C[k].click()),S.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?k:R].focus(),C[v==="ltr"?k:R].click()),S.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?R:k].focus(),C[v==="ltr"?R:k].click())}};return _.jsx(Sqe,{value:{checked:w},children:_.jsx(Is,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:x,onClick:S=>{h==null||h(S),b==null||b.onChange(d||"")},onKeyDown:T})})});FW.displayName="@mantine/core/RadioCard";FW.classes=H1e;const Iqe={},jW=je((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=Ee("RadioGroup",Iqe,e),f=Ku(u),[d,h]=No({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(xqe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(ki.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(l1e,{role:"radiogroup",children:a})})})});jW.classes=ki.Wrapper.classes;jW.displayName="@mantine/core/RadioGroup";function q1e({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var W1e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const kqe={icon:q1e},Rqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vc({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":yn(r,"radio-size"),"--radio-radius":t===void 0?void 0:ii(t),"--radio-color":s==="outline"?u:Gr(n,e),"--radio-icon-size":yn(r,"radio-icon-size"),"--radio-icon-color":i?Gr(i,e):yx(o,e)?ly({color:n,theme:e,autoContrast:o}):void 0}}},BW=je((e,t)=>{const n=Ee("RadioIndicator",kqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=gt({name:"RadioIndicator",classes:W1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Rqe,rootSelector:"indicator"}),x=Tqe(),T=typeof p=="boolean"?p:(x==null?void 0:x.checked)||!1;return _.jsx(_e,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});BW.displayName="@mantine/core/RadioIndicator";BW.classes=W1e;var G1e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const Nqe={labelPosition:"right"},Dqe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=vc({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":yn(t,"radio-size"),"--radio-radius":n===void 0?void 0:ii(n),"--radio-color":s==="outline"?u:Gr(r,e),"--radio-icon-color":i?Gr(i,e):yx(o,e)?ly({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":yn(t,"radio-icon-size")}}},T1=je((e,t)=>{const n=Ee("Radio",Nqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=q1e,rootRef:x,iconColor:T,onChange:S,mod:C,...A}=n,R=gt({name:"Radio",classes:G1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Dqe}),k=V1e(),O=(k==null?void 0:k.size)??c,D=n.size?c:O,{styleProps:$,rest:L}=vx(A),F=Ku(l),B=k?{checked:k.value===L.value,name:L.name??k.name,onChange:U=>{k.onChange(U),S==null||S(U)}}:{};return _.jsx(pW,{...R("root"),__staticSelector:"Radio",__stylesApiProps:n,id:F,size:D,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:x,mod:C,...$,...b,children:_.jsxs(_e,{...R("inner"),mod:{"label-position":d},children:[_.jsx(_e,{...R("radio",{focusable:!0,variant:y}),onChange:S,...L,...B,component:"input",mod:{error:!!p},ref:t,id:F,disabled:v,type:"radio"}),_.jsx(w,{...R("icon"),"aria-hidden":!0})]})})});T1.classes=G1e;T1.displayName="@mantine/core/Radio";T1.Group=jW;T1.Card=FW;T1.Indicator=BW;const Pqe={duration:100,transition:"fade"};function Oqe(e,t){return{...Pqe,...t,...e}}function $qe({offset:e,position:t}){const[n,r]=N.useState(!1),i=N.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=Lq({placement:t,middleware:[Pq({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=N.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return N.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Up(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var tL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const Mqe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:kc("popover")},Lqe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ii(t),"--tooltip-bg":n?Gr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),UW=je((e,t)=>{const n=Ee("TooltipFloating",Mqe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:x,...T}=n,S=Ps(),C=gt({name:"TooltipFloating",props:n,classes:tL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:Lqe}),{handleMouseMove:A,x:R,y:k,opened:O,boundaryRef:D,floating:$,setOpened:L}=$qe({offset:p,position:m});if(!Im(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const F=us(D,r.ref,t),B=q=>{var P,V;(V=(P=r.props).onMouseEnter)==null||V.call(P,q),A(q),L(!0)},U=q=>{var P,V;(V=(P=r.props).onMouseLeave)==null||V.call(P,q),L(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(bI,{...x,withinPortal:s,children:_.jsx(_e,{...T,...C("tooltip",{style:{...bq(o,S),zIndex:y,display:!v&&O?"block":"none",top:(k&&Math.round(k))??"",left:(R&&Math.round(R))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),N.cloneElement(r,{...r.props,[i]:F,onMouseEnter:B,onMouseLeave:U})]})});UW.classes=tL;UW.displayName="@mantine/core/TooltipFloating";const Y1e=N.createContext(!1),Fqe=Y1e.Provider,jqe=()=>N.useContext(Y1e),Bqe={openDelay:0,closeDelay:0};function K1e(e){const{openDelay:t,closeDelay:n,children:r}=Ee("TooltipGroup",Bqe,e);return _.jsx(Fqe,{value:!0,children:_.jsx(BUe,{delay:{open:t,close:n},children:r})})}K1e.displayName="@mantine/core/TooltipGroup";function Uqe(e){var T,S,C;const[t,n]=N.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=jqe(),o=Ku(),{delay:a,currentId:u,setCurrentId:l}=Rve(),c=N.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=Lq({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[Tve(e.offset),Pq({padding:8}),BB(),Cve({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[UB()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=GUe([jUe(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),WUe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),KUe(h,{role:"tooltip"}),HUe(h,{enabled:typeof e.opened>"u"}),UUe(h,{id:o})]);Lve({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),im(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const x=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:x,opened:i,placement:g}}const mse={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:kc("popover"),positionDependencies:[]},zqe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:ii(t),"--tooltip-bg":n?Gr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ia=je((e,t)=>{const n=Ee("Tooltip",mse,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:x,arrowRadius:T,arrowPosition:S,offset:C,transitionProps:A,multiline:R,events:k,zIndex:O,disabled:D,positionDependencies:$,onClick:L,onMouseEnter:F,onMouseLeave:B,inline:U,variant:q,keepMounted:P,vars:V,portalProps:W,mod:j,floatingStrategy:H,...G}=Ee("Tooltip",mse,n),{dir:ne}=Ah(),pe=N.useRef(null),fe=Uqe({position:Nve(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:k,arrowRef:pe,arrowOffset:x,offset:typeof C=="number"?C+(b?w/2:0):C,positionDependencies:[...$,r],inline:U,strategy:H}),de=gt({name:"Tooltip",props:n,classes:tL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:V,varsResolver:zqe});if(!Im(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ye=us(fe.reference,r.ref,t),Ae=Oqe(A,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(bI,{...W,withinPortal:f,children:_.jsx(Nm,{...Ae,keepMounted:P,mounted:!D&&!!fe.opened,duration:fe.isGroupPhase?10:Ae.duration,children:ve=>_.jsxs(_e,{...G,variant:q,mod:[{multiline:R},j],...fe.getFloatingProps({ref:fe.floating,className:de("tooltip").className,style:{...de("tooltip").style,...ve,zIndex:O,top:fe.y??0,left:fe.x??0}}),children:[o,_.jsx(Fq,{ref:pe,arrowX:fe.arrowX,arrowY:fe.arrowY,visible:b,position:fe.placement,arrowSize:w,arrowOffset:x,arrowRadius:T,arrowPosition:S,...de("arrow")})]})})}),N.cloneElement(r,fe.getReferenceProps({onClick:L,onMouseEnter:F,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ye,className:Gi(v,r.props.className),...r.props}))]})});ia.classes=tL;ia.displayName="@mantine/core/Tooltip";ia.Floating=UW;ia.Group=K1e;var X1e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const Vqe={withItemsBorders:!0},Hqe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:ii(t),"--sc-color":n?Gr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":yn(i,"sc-padding"),"--sc-font-size":ro(i)}}),iO=je((e,t)=>{var ne,pe;const n=Ee("SegmentedControl",Vqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:x,transitionTimingFunction:T,variant:S,autoContrast:C,withItemsBorders:A,mod:R,...k}=n,O=gt({name:"SegmentedControl",props:n,classes:X1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Hqe}),D=Ps(),$=l.map(fe=>typeof fe=="string"?{label:fe,value:fe}:fe),L=Xje(),[F,B]=N.useState(null),[U,q]=N.useState({}),P=(fe,de)=>{U[de]=fe,q(U)},[V,W]=No({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=$.find(fe=>!fe.disabled))==null?void 0:ne.value)??((pe=l[0])==null?void 0:pe.value)??null:null,onChange:d}),j=Ku(p),H=$.map(fe=>N.createElement(_e,{...O("control"),mod:{active:V===fe.value,orientation:v},key:fe.value},N.createElement("input",{...O("input"),disabled:m||fe.disabled,type:"radio",name:j,value:fe.value,id:`${j}-${fe.value}`,checked:V===fe.value,onChange:()=>!g&&W(fe.value),"data-focus-ring":D.focusRing,key:`${fe.value}-input`}),N.createElement(_e,{component:"label",...O("label"),mod:{active:V===fe.value&&!(m||fe.disabled),disabled:m||fe.disabled,"read-only":g},htmlFor:`${j}-${fe.value}`,ref:de=>P(de,fe.value),__vars:{"--sc-label-color":w!==void 0?ly({color:w,theme:D,autoContrast:C}):void 0},key:`${fe.value}-label`},_.jsx("span",{...O("innerLabel"),children:fe.label})))),G=us(t,fe=>B(fe));return l.length===0?null:_.jsxs(_e,{...O("root"),variant:S,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:L,"with-items-borders":A},R],...k,role:"radiogroup",children:[typeof V=="string"&&_.jsx(Yq,{target:U[V],parent:F,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),H]})});iO.classes=X1e;iO.displayName="@mantine/core/SegmentedControl";const qqe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},TI=je((e,t)=>{const n=Ee("Select",qqe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:x,disabled:T,filter:S,limit:C,withScrollArea:A,maxDropdownHeight:R,size:k,searchable:O,rightSection:D,checkIconPosition:$,withCheckIcon:L,nothingFoundMessage:F,name:B,form:U,searchValue:q,defaultSearchValue:P,onSearchChange:V,allowDeselect:W,error:j,rightSectionPointerEvents:H,id:G,clearable:ne,clearButtonProps:pe,hiddenInputProps:fe,renderOption:de,onClear:ye,autoComplete:Ae,scrollAreaProps:ve,...rt}=n,ze=N.useMemo(()=>Zve(m),[m]),yt=N.useMemo(()=>nW(ze),[ze]),ot=Ku(G),[De,Me,Ye]=No({value:g,defaultValue:y,finalValue:null,onChange:p}),pt=typeof De=="string"?yt[De]:void 0,[Pt,qe]=No({value:q,defaultValue:P,finalValue:pt?pt.label:"",onChange:V}),me=hW({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),me.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),me.resetSelectedOption()}}),{resolvedClassNames:ft,resolvedStyles:vt}=km({props:n,styles:i,classNames:r});N.useEffect(()=>{v&&me.selectFirstOption()},[v,De]),N.useEffect(()=>{g===null&&qe(""),typeof g=="string"&&pt&&qe(pt.label)},[g,pt]);const he=ne&&!!De&&!T&&!x&&_.jsx(Gn.ClearButton,{size:k,...pe,onClear:()=>{Me(null,null),qe(""),ye==null||ye()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Gn,{store:me,__staticSelector:"Select",classNames:ft,styles:vt,unstyled:s,readOnly:x,onOptionSubmit:Ce=>{b==null||b(Ce);const Ve=W&&yt[Ce].value===De?null:yt[Ce],ut=Ve?Ve.value:null;Me(ut,Ve),!Ye&&qe(typeof ut=="string"&&(Ve==null?void 0:Ve.label)||""),me.closeDropdown()},size:k,...w,children:[_.jsx(Gn.Target,{targetType:O?"input":"button",autoComplete:Ae,children:_.jsx(Dc,{id:ot,ref:t,rightSection:D||he||_.jsx(Gn.Chevron,{size:k,error:j,unstyled:s}),rightSectionPointerEvents:H||(he?"all":"none"),...rt,size:k,__staticSelector:"Select",disabled:T,readOnly:x||!O,value:Pt,onChange:Ce=>{qe(Ce.currentTarget.value),me.openDropdown(),v&&me.selectFirstOption()},onFocus:Ce=>{O&&me.openDropdown(),f==null||f(Ce)},onBlur:Ce=>{var Ve;O&&me.closeDropdown(),qe(De!=null&&((Ve=yt[De])==null?void 0:Ve.label)||""),d==null||d(Ce)},onClick:Ce=>{O?me.openDropdown():me.toggleDropdown(),h==null||h(Ce)},classNames:ft,styles:vt,unstyled:s,pointer:!O,error:j})}),_.jsx(y1e,{data:ze,hidden:x||T,filter:S,search:Pt,limit:C,hiddenWhenEmpty:!O||!F,withScrollArea:A,maxDropdownHeight:R,filterOptions:O&&(pt==null?void 0:pt.label)!==Pt,value:De,checkIconPosition:$,withCheckIcon:L,nothingFoundMessage:F,unstyled:s,labelId:rt.label?`${ot}-label`:void 0,"aria-label":rt.label?void 0:rt["aria-label"],renderOption:de,scrollAreaProps:ve})]}),_.jsx(Gn.HiddenInput,{value:De,name:B,form:U,disabled:T,...fe})]})});TI.classes={...Dc.classes,...Gn.classes};TI.displayName="@mantine/core/Select";const[Q1e,nL]=Oo("SliderProvider was not found in tree"),zW=N.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=nL();return _.jsx(_e,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});zW.displayName="@mantine/core/SliderRoot";const sO=N.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=nL(),[b,w]=N.useState(!1),x=l||s||b||h&&p;return _.jsxs(_e,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(Nm,{mounted:i!=null&&!!x,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...v("label",{style:T}),children:i})})]})});sO.displayName="@mantine/core/SliderThumb";function oO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function Wqe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function J1e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=nL();if(!e)return null;const u=e.map((l,c)=>N.createElement(_e,{...a("markWrapper"),__vars:{"--mark-offset":`${oO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(_e,{...a("mark"),mod:{filled:Wqe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}J1e.displayName="@mantine/core/SliderMarks";function VW({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=nL();return _.jsx(_.Fragment,{children:_.jsx(_e,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(_e,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(_e,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(J1e,{...a,offset:i,disabled:r,inverted:s})]})})})}VW.displayName="@mantine/core/SliderTrack";function WB({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function Zl(e,t){return parseFloat(e.toFixed(t))}function Z1e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var rL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const Gqe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},Yqe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":yn(t,"slider-size"),"--slider-color":n?Gr(n,e):void 0,"--slider-radius":i===void 0?void 0:ii(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),HW=je((e,t)=>{const n=Ee("Slider",Gqe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:x,disabled:T,unstyled:S,scale:C,inverted:A,className:R,style:k,vars:O,hiddenInputProps:D,...$}=n,L=gt({name:"Slider",props:n,classes:rL,classNames:r,className:R,styles:i,style:k,vars:O,varsResolver:Yqe,unstyled:S}),{dir:F}=Ah(),[B,U]=N.useState(!1),[q,P]=No({value:typeof s=="number"?Fd(s,l,c):s,defaultValue:typeof h=="number"?Fd(h,l,c):h,finalValue:Fd(0,l,c),onChange:o}),V=N.useRef(q),W=N.useRef(),j=N.useRef(),H=oO({value:q,min:l,max:c}),G=C(q),ne=typeof g=="function"?g(G):g,pe=d??Z1e(f),fe=N.useCallback(({x:ve})=>{if(!T){const rt=WB({value:ve,min:l,max:c,step:f,precision:pe});P(rt),V.current=rt}},[T,l,c,f,pe,P]),{ref:de,active:ye}=Uye(fe,{onScrubEnd:()=>a==null?void 0:a(V.current)},F),Ae=ve=>{var rt,ze,yt,ot,De,Me;if(!T)switch(ve.key){case"ArrowUp":{ve.preventDefault(),(rt=j.current)==null||rt.focus();const Ye=Zl(Math.min(Math.max(q+f,l),c),pe);P(Ye),a==null||a(Ye);break}case"ArrowRight":{ve.preventDefault(),(ze=j.current)==null||ze.focus();const Ye=Zl(Math.min(Math.max(F==="rtl"?q-f:q+f,l),c),pe);P(Ye),a==null||a(Ye);break}case"ArrowDown":{ve.preventDefault(),(yt=j.current)==null||yt.focus();const Ye=Zl(Math.min(Math.max(q-f,l),c),pe);P(Ye),a==null||a(Ye);break}case"ArrowLeft":{ve.preventDefault(),(ot=j.current)==null||ot.focus();const Ye=Zl(Math.min(Math.max(F==="rtl"?q+f:q-f,l),c),pe);P(Ye),a==null||a(Ye);break}case"Home":{ve.preventDefault(),(De=j.current)==null||De.focus(),P(l),a==null||a(l);break}case"End":{ve.preventDefault(),(Me=j.current)==null||Me.focus(),P(c),a==null||a(c);break}}};return _.jsx(Q1e,{value:{getStyles:L},children:_.jsxs(zW,{...$,ref:us(t,W),onKeyDownCapture:Ae,onMouseDownCapture:()=>{var ve;return(ve=W.current)==null?void 0:ve.focus()},size:u,disabled:T,children:[_.jsx(VW,{inverted:A,offset:0,filled:H,marks:m,min:l,max:c,value:G,disabled:T,containerProps:{ref:de,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(sO,{max:c,min:l,value:G,position:H,dragging:ye,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:T,children:x})}),_.jsx("input",{type:"hidden",name:p,value:G,...D})]})})});HW.classes=rL;HW.displayName="@mantine/core/Slider";function Kqe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const Xqe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":yn(t,"slider-size"),"--slider-color":n?Gr(n,e):void 0,"--slider-radius":i===void 0?void 0:ii(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),Qqe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},qW=je((e,t)=>{const n=Ee("RangeSlider",Qqe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:x,thumbToLabel:T,showLabelOnHover:S,thumbChildren:C,disabled:A,unstyled:R,scale:k,inverted:O,className:D,style:$,vars:L,hiddenInputProps:F,...B}=n,U=gt({name:"Slider",props:n,classes:rL,classNames:r,className:D,styles:i,style:$,vars:L,varsResolver:Xqe,unstyled:R}),{dir:q}=Ah(),[P,V]=N.useState(-1),[W,j]=N.useState(!1),[H,G]=No({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=N.useRef(H),pe=N.useRef([]),fe=N.useRef(void 0),de=[oO({value:H[0],min:l,max:c}),oO({value:H[1],min:l,max:c})],ye=p??Z1e(h),Ae=qe=>{G(qe),ne.current=qe};N.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const ve=(qe,me,ft)=>{const vt=[...ne.current];vt[me]=qe,me===0&&(qe>vt[1]-(f-1e-9)&&(vt[1]=Math.min(qe+f,c)),qe>(c-(f-1e-9)||l)&&(vt[me]=ne.current[me]),vt[1]-qe>d&&(vt[1]=qe+d)),me===1&&(qe<vt[0]+f&&(vt[0]=Math.max(qe-f,l)),qe<vt[0]+f&&(vt[me]=ne.current[me]),qe-vt[0]>d&&(vt[0]=qe-d)),vt[0]=Zl(vt[0],ye),vt[1]=Zl(vt[1],ye),Ae(vt),ft&&(a==null||a(ne.current))},rt=qe=>{if(!A){const me=WB({value:qe,min:l,max:c,step:h,precision:ye});ve(me,fe.current,!1)}},{ref:ze,active:yt}=Uye(({x:qe})=>rt(qe),{onScrubEnd:()=>a==null?void 0:a(ne.current)},q);function ot(qe){fe.current=qe}const De=qe=>{ze.current.focus();const me=ze.current.getBoundingClientRect(),ft=Kqe(qe.nativeEvent),vt=WB({value:ft-me.left,max:c,min:l,step:h,containerWidth:me.width}),he=Math.abs(H[0]-vt)>Math.abs(H[1]-vt)?1:0,Ce=q==="ltr"?he:he===1?0:1;fe.current=Ce},Me=()=>P!==1&&P!==0?(V(0),0):P,Ye=qe=>{if(!A)switch(qe.key){case"ArrowUp":{qe.preventDefault();const me=Me();pe.current[me].focus(),ve(Zl(Math.min(Math.max(ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowRight":{qe.preventDefault();const me=Me();pe.current[me].focus(),ve(Zl(Math.min(Math.max(q==="rtl"?ne.current[me]-h:ne.current[me]+h,l),c),ye),me,!0);break}case"ArrowDown":{qe.preventDefault();const me=Me();pe.current[me].focus(),ve(Zl(Math.min(Math.max(ne.current[me]-h,l),c),ye),me,!0);break}case"ArrowLeft":{qe.preventDefault();const me=Me();pe.current[me].focus(),ve(Zl(Math.min(Math.max(q==="rtl"?ne.current[me]+h:ne.current[me]-h,l),c),ye),me,!0);break}}},pt={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>V(-1)},Pt=Array.isArray(C);return _.jsx(Q1e,{value:{getStyles:U},children:_.jsxs(zW,{...B,size:u,ref:t,disabled:A,children:[_.jsxs(VW,{offset:de[0],marksOffset:H[0],filled:de[1]-de[0],marks:y,inverted:O,min:l,max:c,value:H[1],disabled:A,containerProps:{ref:ze,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,onTouchStartCapture:De,onTouchEndCapture:()=>{fe.current=-1},onMouseDownCapture:De,onMouseUpCapture:()=>{fe.current=-1},onKeyDownCapture:Ye},children:[_.jsx(sO,{...pt,value:k(H[0]),position:de[0],dragging:yt,label:typeof v=="function"?v(Zl(k(H[0]),ye)):v,ref:qe=>{pe.current[0]=qe},thumbLabel:x,onMouseDown:()=>ot(0),onFocus:()=>V(0),showLabelOnHover:S,isHovered:W,disabled:A,children:Pt?C[0]:C}),_.jsx(sO,{...pt,thumbLabel:T,value:k(H[1]),position:de[1],dragging:yt,label:typeof v=="function"?v(Zl(k(H[1]),ye)):v,ref:qe=>{pe.current[1]=qe},onMouseDown:()=>ot(1),onFocus:()=>V(1),showLabelOnHover:S,isHovered:W,disabled:A,children:Pt?C[1]:C})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:H[0],...F}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:H[1],...F})]})})});qW.classes=rL;qW.displayName="@mantine/core/RangeSlider";const Jqe={},If=je((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=Ee("Space",Jqe,e);return _.jsx(_e,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});If.displayName="@mantine/core/Space";var ebe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const Zqe={maxHeight:100,initialState:!1},eWe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),WW=je((e,t)=>{const n=Ee("Spoiler",Zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=gt({name:"Spoiler",classes:ebe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eWe}),b=Ku(g),w=`${b}-region`,[x,T]=N.useState(l),{ref:S,height:C}=Gje(),A=x?f:d,R=A!==null&&c<C;return _.jsxs(_e,{...v("root"),id:b,ref:t,"data-has-spoiler":R||void 0,...y,children:[R&&_.jsx(Ex,{component:"button",type:"button",ref:p,onClick:()=>T(k=>!k),"aria-expanded":x,"aria-controls":w,...v("control"),children:A}),_.jsx("div",{...v("content",{style:{maxHeight:x?C?Te(C):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:S,children:h})})]})});WW.classes=ebe;WW.displayName="@mantine/core/Spoiler";var tbe={root:"m_6d731127"};const tWe={gap:"md",align:"stretch",justify:"flex-start"},nWe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":Cl(t),"--stack-align":n,"--stack-justify":r}}),Rp=je((e,t)=>{const n=Ee("Stack",tWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=gt({name:"Stack",props:n,classes:tbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nWe});return _.jsx(_e,{ref:t,...p("root"),variant:d,...h})});Rp.classes=tbe;Rp.displayName="@mantine/core/Stack";const[rWe,iWe]=Oo("Table component was not found in the tree");var CI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function sWe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function mb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=je((i,s)=>{const o=Ee(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=iWe();return _.jsx(_e,{component:e,ref:s,...sWe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=CI,r}const GB=mb("th",{columnBorder:!0}),nbe=mb("td",{columnBorder:!0}),SD=mb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),rbe=mb("thead",{stickyHeader:!0}),ibe=mb("tbody"),sbe=mb("tfoot"),obe=mb("caption",{captionSide:!0});function GW({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(obe,{children:e.caption}),e.head&&_.jsx(rbe,{children:_.jsx(SD,{children:e.head.map((t,n)=>_.jsx(GB,{children:t},n))})}),e.body&&_.jsx(ibe,{children:e.body.map((t,n)=>_.jsx(SD,{children:t.map((r,i)=>_.jsx(nbe,{children:r},i))},n))}),e.foot&&_.jsx(sbe,{children:_.jsx(SD,{children:e.foot.map((t,n)=>_.jsx(GB,{children:t},n))})})]})}GW.displayName="@mantine/core/TableDataRenderer";const oWe={type:"scrollarea"},aWe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),YW=je((e,t)=>{const n=Ee("TableScrollContainer",oWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=gt({name:"TableScrollContainer",classes:CI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aWe,rootSelector:"scrollContainer"});return _.jsx(_e,{component:f==="scrollarea"?hb:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});YW.classes=CI;YW.displayName="@mantine/core/TableScrollContainer";const uWe={withRowBorders:!0,verticalSpacing:7},lWe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":Cl(r),"--table-vertical-spacing":Cl(i),"--table-border-color":s?Gr(s,e):void 0,"--table-striped-color":u&&o?Gr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Gr(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),Tn=je((e,t)=>{const n=Ee("Table",uWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:x,data:T,children:S,stickyHeader:C,stickyHeaderOffset:A,mod:R,...k}=n,O=gt({name:"Table",props:n,className:i,style:s,classes:CI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:lWe});return _.jsx(rWe,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(_e,{component:"table",variant:x,ref:t,mod:[{"data-with-table-border":v},R],...O("table"),...k,children:S||!!T&&_.jsx(GW,{data:T})})})});Tn.classes=CI;Tn.displayName="@mantine/core/Table";Tn.Td=nbe;Tn.Th=GB;Tn.Tr=SD;Tn.Thead=rbe;Tn.Tbody=ibe;Tn.Tfoot=sbe;Tn.Caption=obe;Tn.ScrollContainer=YW;Tn.DataRenderer=GW;const[cWe,KW]=Oo("Tabs component was not found in the tree");var AI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const fWe={},XW=je((e,t)=>{const n=Ee("TabsList",fWe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=KW();return _.jsx(_e,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});XW.classes=AI;XW.displayName="@mantine/core/TabsList";const dWe={},QW=je((e,t)=>{const n=Ee("TabsPanel",dWe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=KW(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(_e,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});QW.classes=AI;QW.displayName="@mantine/core/TabsPanel";const hWe={},JW=je((e,t)=>{const n=Ee("TabsTab",hWe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Ps(),{dir:b}=Ah(),w=KW(),x=a===w.value,T=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},S={classNames:h,styles:p,props:n};return _.jsxs(Is,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...S}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:x,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":x,tabIndex:x||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?Gr(f,v):void 0},onKeyDown:Pye({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",S),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"right",children:s})]})});JW.classes=AI;JW.displayName="@mantine/core/TabsTab";const gse="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",pWe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},mWe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":ii(t),"--tabs-color":Gr(n,e),"--tabs-text-color":yx(r,e)?ly({color:n,theme:e,autoContrast:r}):void 0}}),Zi=je((e,t)=>{const n=Ee("Tabs",pWe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:x,style:T,vars:S,autoContrast:C,mod:A,...R}=n,k=Ku(l),[O,D]=No({value:i,defaultValue:r,finalValue:null,onChange:s}),$=gt({name:"Tabs",props:n,classes:AI,className:x,style:T,classNames:v,styles:b,unstyled:w,vars:S,varsResolver:mWe});return _.jsx(cWe,{value:{placement:g,value:O,orientation:o,id:k,loop:u,activateTabWithKeyboard:c,getTabId:yie(`${k}-tab`,gse),getPanelId:yie(`${k}-panel`,gse),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(_e,{ref:t,id:k,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...$("root"),...R,children:a})})});Zi.classes=AI;Zi.displayName="@mantine/core/Tabs";Zi.Tab=JW;Zi.Panel=QW;Zi.List=XW;const gWe={},s1=je((e,t)=>{const n=Ee("TextInput",gWe,e);return _.jsx(Dc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});s1.classes=Dc.classes;s1.displayName="@mantine/core/TextInput";const yWe=["h1","h2","h3","h4","h5","h6"];function vWe(e,t){const n=t!==void 0?t:`h${e}`;return yWe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var abe={root:"m_8a5d1357"};const bWe={order:1},_We=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=vWe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ns=je((e,t)=>{const n=Ee("Title",bWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=gt({name:"Title",props:n,classes:abe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:_We});return[1,2,3,4,5,6].includes(u)?_.jsx(_e,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ns.classes=abe;ns.displayName="@mantine/core/Title";var ube={root:"m_d6493fad"};const wWe={},q_=je((e,t)=>{const n=Ee("TypographyStylesProvider",wWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,...u}=n,l=gt({name:"TypographyStylesProvider",classes:ube,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(_e,{ref:t,...l("root"),...u})});q_.classes=ube;q_.displayName="@mantine/core/TypographyStylesProvider";const lbe=N.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),ba=()=>N.useContext(lbe);function EWe({children:e}){const[t,n]=Hi.useState(void 0),r=Hi.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(lbe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qA(){return qA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qA.apply(this,arguments)}var Pg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Pg||(Pg={}));const yse="popstate";function xWe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return YB("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fbe(i)}return TWe(t,n,null,e)}function is(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function cbe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function SWe(){return Math.random().toString(36).substr(2,8)}function vse(e,t){return{usr:e.state,key:e.key,idx:t}}function YB(e,t,n,r){return n===void 0&&(n=null),qA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ix(t):t,{state:n,key:t&&t.key||r||SWe()})}function fbe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ix(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function TWe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Pg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(qA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Pg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Pg.Push;let v=YB(m.location,g,y);l=c()+1;let b=vse(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Pg.Replace;let v=YB(m.location,g,y);l=c();let b=vse(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:fbe(g);return v=v.replace(/ $/,"%20"),is(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(yse,f),u=g,()=>{i.removeEventListener(yse,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var bse;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(bse||(bse={}));function CWe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Ix(t):t,i=pbe(r.pathname||"/",n);if(i==null)return null;let s=dbe(e);AWe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=jWe(i);o=MWe(s[a],u)}return o}function dbe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(is(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=t0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(is(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),dbe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:OWe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of hbe(s.path))i(s,o,u)}),t}function hbe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=hbe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function AWe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:$We(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const IWe=/^:[\w-]+$/,kWe=3,RWe=2,NWe=1,DWe=10,PWe=-2,_se=e=>e==="*";function OWe(e,t){let n=e.split("/"),r=n.length;return n.some(_se)&&(r+=PWe),t&&(r+=RWe),n.filter(i=>!_se(i)).reduce((i,s)=>i+(IWe.test(s)?kWe:s===""?NWe:DWe),r)}function $We(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function MWe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=LWe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:t0([i,c.pathname]),pathnameBase:VWe(t0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=t0([i,c.pathnameBase]))}return s}function LWe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=FWe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function FWe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),cbe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function jWe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return cbe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function pbe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function BWe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ix(e):e;return{pathname:n?n.startsWith("/")?n:UWe(n,t):t,search:HWe(r),hash:qWe(i)}}function UWe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function j5(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zWe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function ZW(e,t){let n=zWe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function eG(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ix(e):(i=qA({},e),is(!i.pathname||!i.pathname.includes("?"),j5("?","pathname","search",i)),is(!i.pathname||!i.pathname.includes("#"),j5("#","pathname","hash",i)),is(!i.search||!i.search.includes("#"),j5("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=BWe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const t0=e=>e.join("/").replace(/\/\/+/g,"/"),VWe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),HWe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,qWe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function WWe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const mbe=["post","put","patch","delete"];new Set(mbe);const GWe=["get",...mbe];new Set(GWe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function WA(){return WA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WA.apply(this,arguments)}const tG=N.createContext(null),YWe=N.createContext(null),gb=N.createContext(null),iL=N.createContext(null),Rh=N.createContext({outlet:null,matches:[],isDataRoute:!1}),gbe=N.createContext(null);function ybe(e,t){let{relative:n}={};kx()||is(!1);let{basename:r,navigator:i}=N.useContext(gb),{hash:s,pathname:o,search:a}=JWe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:t0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function kx(){return N.useContext(iL)!=null}function yb(){return kx()||is(!1),N.useContext(iL).location}function vbe(e){N.useContext(gb).static||N.useLayoutEffect(e)}function $m(){let{isDataRoute:e}=N.useContext(Rh);return e?lGe():KWe()}function KWe(){kx()||is(!1);let e=N.useContext(tG),{basename:t,future:n,navigator:r}=N.useContext(gb),{matches:i}=N.useContext(Rh),{pathname:s}=yb(),o=JSON.stringify(ZW(i,n.v7_relativeSplatPath)),a=N.useRef(!1);return vbe(()=>{a.current=!0}),N.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=eG(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:t0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const XWe=N.createContext(null);function QWe(e){let t=N.useContext(Rh).outlet;return t&&N.createElement(XWe.Provider,{value:e},t)}function sE(){let{matches:e}=N.useContext(Rh),t=e[e.length-1];return t?t.params:{}}function JWe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=N.useContext(gb),{matches:i}=N.useContext(Rh),{pathname:s}=yb(),o=JSON.stringify(ZW(i,r.v7_relativeSplatPath));return N.useMemo(()=>eG(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function bbe(e,t){return ZWe(e,t)}function ZWe(e,t,n,r){kx()||is(!1);let{navigator:i}=N.useContext(gb),{matches:s}=N.useContext(Rh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=yb(),c;if(t){var f;let g=typeof t=="string"?Ix(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||is(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=CWe(e,{pathname:h}),m=iGe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:t0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:t0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?N.createElement(iL.Provider,{value:{location:WA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Pg.Pop}},m):m}function eGe(){let e=uGe(),t=WWe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},t),n?N.createElement("pre",{style:i},n):null,null)}const tGe=N.createElement(eGe,null);class nGe extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?N.createElement(Rh.Provider,{value:this.props.routeContext},N.createElement(gbe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rGe(e){let{routeContext:t,match:n,children:r}=e,i=N.useContext(tG);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(Rh.Provider,{value:t},r)}function iGe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||is(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||tGe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=N.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,N.createElement(rGe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?N.createElement(nGe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var _be=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(_be||{}),aO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(aO||{});function sGe(e){let t=N.useContext(tG);return t||is(!1),t}function oGe(e){let t=N.useContext(YWe);return t||is(!1),t}function aGe(e){let t=N.useContext(Rh);return t||is(!1),t}function wbe(e){let t=aGe(),n=t.matches[t.matches.length-1];return n.route.id||is(!1),n.route.id}function uGe(){var e;let t=N.useContext(gbe),n=oGe(aO.UseRouteError),r=wbe(aO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function lGe(){let{router:e}=sGe(_be.UseNavigateStable),t=wbe(aO.UseNavigateStable),n=N.useRef(!1);return vbe(()=>{n.current=!0}),N.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,WA({fromRouteId:t},s)))},[e,t])}function nG(e){let{to:t,replace:n,state:r,relative:i}=e;kx()||is(!1);let{future:s,static:o}=N.useContext(gb),{matches:a}=N.useContext(Rh),{pathname:u}=yb(),l=$m(),c=eG(t,ZW(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return N.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function cGe(e){return QWe(e.context)}function up(e){is(!1)}function fGe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Pg.Pop,navigator:s,static:o=!1,future:a}=e;kx()&&is(!1);let u=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:u,navigator:s,static:o,future:WA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Ix(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=N.useMemo(()=>{let g=pbe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:N.createElement(gb.Provider,{value:l},N.createElement(iL.Provider,{children:n,value:m}))}function dGe(e){let{children:t,location:n}=e;return bbe(KB(t),n)}new Promise(()=>{});function KB(e,t){t===void 0&&(t=[]);let n=[];return N.Children.forEach(e,(r,i)=>{if(!N.isValidElement(r))return;let s=[...t,i];if(r.type===N.Fragment){n.push.apply(n,KB(r.props.children,s));return}r.type!==up&&is(!1),!r.props.index||!r.props.children||is(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=KB(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function XB(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function hGe(e,t){let n=XB(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const pGe="6";try{window.__reactRouterVersion=pGe}catch{}const mGe="startTransition",wse=xP[mGe];function gGe(e){let{basename:t,children:n,future:r,window:i}=e,s=N.useRef();s.current==null&&(s.current=xWe({window:i,v5Compat:!0}));let o=s.current,[a,u]=N.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=N.useCallback(f=>{l&&wse?wse(()=>u(f)):u(f)},[u,l]);return N.useLayoutEffect(()=>o.listen(c),[o,c]),N.createElement(fGe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Ese;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ese||(Ese={}));var xse;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xse||(xse={}));function rG(e){let t=N.useRef(XB(e)),n=N.useRef(!1),r=yb(),i=N.useMemo(()=>hGe(r.search,n.current?null:t.current),[r.search]),s=$m(),o=N.useCallback((a,u)=>{const l=XB(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const iG=N.createContext(null);iG.displayName="@mantine/modals/ModalsContext";function yGe(){const e=N.useContext(iG);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function vGe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=yGe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(_e,{mb:"md",children:l}),_.jsxs(Xs,{justify:"flex-end",...o,children:[_.jsx(jn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(jn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[bGe,sL]=Jje("mantine-modals");sL("openModal");sL("closeModal");sL("closeAllModals");const QB=sL("openConfirmModal");function Sse(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function _Ge(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Sse(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Sse(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function wGe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function EGe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=N.useReducer(_Ge,{modals:[],current:null}),o=N.useRef(i);o.current=i;const a=N.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=N.useCallback(({modalId:g,...y})=>{const v=g||OC();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=N.useCallback(({modalId:g,...y})=>{const v=g||OC();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=N.useCallback((g,{modalId:y,...v})=>{const b=y||OC();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=N.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);bGe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=wGe(g.props);return{modalProps:y,content:_.jsx(vGe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(iG.Provider,{value:d,children:[_.jsx(gs,{zIndex:kc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xGe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=(e,t,n,r)=>{const i=N.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>N.createElement("svg",{ref:f,...xGe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>N.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SGe=Yr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tse=Yr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TGe=Yr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CGe=Yr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AGe=Yr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IGe=Yr("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kGe=Yr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RGe=Yr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NGe=Yr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DGe=Yr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PGe=Yr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OGe=Yr("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Ge=Yr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MGe=Yr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LGe=Yr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FGe=Yr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jGe=Yr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BGe=Yr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UGe=Yr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zGe=Yr("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ebe=Yr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xbe=Yr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VGe=Yr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Sbe=Yr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sG=Yr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Tbe=Yr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HGe=Yr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function Cbe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Nh="/guardrails-think-aloud/";function Cse(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Abe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const qGe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,WGe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,GGe={};function Ase(e,t){return(GGe.jsx?WGe:qGe).test(e)}const YGe=/[ \t\n\f\r]/g;function KGe(e){return typeof e=="object"?e.type==="text"?Ise(e.value):!1:Ise(e)}function Ise(e){return e.replace(YGe,"")===""}let II=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};II.prototype.property={};II.prototype.normal={};II.prototype.space=null;function Ibe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new II(n,r,t)}function GA(e){return e.toLowerCase()}let Oc=class{constructor(t,n){this.property=t,this.attribute=n}};Oc.prototype.space=null;Oc.prototype.boolean=!1;Oc.prototype.booleanish=!1;Oc.prototype.overloadedBoolean=!1;Oc.prototype.number=!1;Oc.prototype.commaSeparated=!1;Oc.prototype.spaceSeparated=!1;Oc.prototype.commaOrSpaceSeparated=!1;Oc.prototype.mustUseProperty=!1;Oc.prototype.defined=!1;let XGe=0;const pn=vb(),ds=vb(),kbe=vb(),tt=vb(),Jr=vb(),mw=vb(),nl=vb();function vb(){return 2**++XGe}const JB=Object.freeze(Object.defineProperty({__proto__:null,boolean:pn,booleanish:ds,commaOrSpaceSeparated:nl,commaSeparated:mw,number:tt,overloadedBoolean:kbe,spaceSeparated:Jr},Symbol.toStringTag,{value:"Module"})),B5=Object.keys(JB);class oG extends Oc{constructor(t,n,r,i){let s=-1;if(super(t,n),kse(this,"space",i),typeof r=="number")for(;++s<B5.length;){const o=B5[s];kse(this,B5[s],(r&JB[o])===JB[o])}}}oG.prototype.defined=!0;function kse(e,t,n){n&&(e[t]=n)}const QGe={}.hasOwnProperty;function Rx(e){const t={},n={};let r;for(r in e.properties)if(QGe.call(e.properties,r)){const i=e.properties[r],s=new oG(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[GA(r)]=r,n[GA(s.attribute)]=r}return new II(t,n,e.space)}const Rbe=Rx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Nbe=Rx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Dbe(e,t){return t in e?e[t]:t}function Pbe(e,t){return Dbe(e,t.toLowerCase())}const Obe=Rx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Pbe,properties:{xmlns:null,xmlnsXLink:null}}),$be=Rx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ds,ariaAutoComplete:null,ariaBusy:ds,ariaChecked:ds,ariaColCount:tt,ariaColIndex:tt,ariaColSpan:tt,ariaControls:Jr,ariaCurrent:null,ariaDescribedBy:Jr,ariaDetails:null,ariaDisabled:ds,ariaDropEffect:Jr,ariaErrorMessage:null,ariaExpanded:ds,ariaFlowTo:Jr,ariaGrabbed:ds,ariaHasPopup:null,ariaHidden:ds,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Jr,ariaLevel:tt,ariaLive:null,ariaModal:ds,ariaMultiLine:ds,ariaMultiSelectable:ds,ariaOrientation:null,ariaOwns:Jr,ariaPlaceholder:null,ariaPosInSet:tt,ariaPressed:ds,ariaReadOnly:ds,ariaRelevant:null,ariaRequired:ds,ariaRoleDescription:Jr,ariaRowCount:tt,ariaRowIndex:tt,ariaRowSpan:tt,ariaSelected:ds,ariaSetSize:tt,ariaSort:null,ariaValueMax:tt,ariaValueMin:tt,ariaValueNow:tt,ariaValueText:null,role:null}}),JGe=Rx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Pbe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:mw,acceptCharset:Jr,accessKey:Jr,action:null,allow:null,allowFullScreen:pn,allowPaymentRequest:pn,allowUserMedia:pn,alt:null,as:null,async:pn,autoCapitalize:null,autoComplete:Jr,autoFocus:pn,autoPlay:pn,blocking:Jr,capture:null,charSet:null,checked:pn,cite:null,className:Jr,cols:tt,colSpan:null,content:null,contentEditable:ds,controls:pn,controlsList:Jr,coords:tt|mw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:pn,defer:pn,dir:null,dirName:null,disabled:pn,download:kbe,draggable:ds,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:pn,formTarget:null,headers:Jr,height:tt,hidden:pn,high:tt,href:null,hrefLang:null,htmlFor:Jr,httpEquiv:Jr,id:null,imageSizes:null,imageSrcSet:null,inert:pn,inputMode:null,integrity:null,is:null,isMap:pn,itemId:null,itemProp:Jr,itemRef:Jr,itemScope:pn,itemType:Jr,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:pn,low:tt,manifest:null,max:null,maxLength:tt,media:null,method:null,min:null,minLength:tt,multiple:pn,muted:pn,name:null,nonce:null,noModule:pn,noValidate:pn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:pn,optimum:tt,pattern:null,ping:Jr,placeholder:null,playsInline:pn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:pn,referrerPolicy:null,rel:Jr,required:pn,reversed:pn,rows:tt,rowSpan:tt,sandbox:Jr,scope:null,scoped:pn,seamless:pn,selected:pn,shadowRootClonable:pn,shadowRootDelegatesFocus:pn,shadowRootMode:null,shape:null,size:tt,sizes:null,slot:null,span:tt,spellCheck:ds,src:null,srcDoc:null,srcLang:null,srcSet:null,start:tt,step:null,style:null,tabIndex:tt,target:null,title:null,translate:null,type:null,typeMustMatch:pn,useMap:null,value:ds,width:tt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Jr,axis:null,background:null,bgColor:null,border:tt,borderColor:null,bottomMargin:tt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:pn,declare:pn,event:null,face:null,frame:null,frameBorder:null,hSpace:tt,leftMargin:tt,link:null,longDesc:null,lowSrc:null,marginHeight:tt,marginWidth:tt,noResize:pn,noHref:pn,noShade:pn,noWrap:pn,object:null,profile:null,prompt:null,rev:null,rightMargin:tt,rules:null,scheme:null,scrolling:ds,standby:null,summary:null,text:null,topMargin:tt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:tt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:pn,disableRemotePlayback:pn,prefix:null,property:null,results:tt,security:null,unselectable:null}}),ZGe=Rx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Dbe,properties:{about:nl,accentHeight:tt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:tt,amplitude:tt,arabicForm:null,ascent:tt,attributeName:null,attributeType:null,azimuth:tt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:tt,by:null,calcMode:null,capHeight:tt,className:Jr,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:tt,diffuseConstant:tt,direction:null,display:null,dur:null,divisor:tt,dominantBaseline:null,download:pn,dx:null,dy:null,edgeMode:null,editable:null,elevation:tt,enableBackground:null,end:null,event:null,exponent:tt,externalResourcesRequired:null,fill:null,fillOpacity:tt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:mw,g2:mw,glyphName:mw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:tt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:tt,horizOriginX:tt,horizOriginY:tt,id:null,ideographic:tt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:tt,k:tt,k1:tt,k2:tt,k3:tt,k4:tt,kernelMatrix:nl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:tt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:tt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:tt,overlineThickness:tt,paintOrder:null,panose1:null,path:null,pathLength:tt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Jr,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:tt,pointsAtY:tt,pointsAtZ:tt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:nl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:nl,rev:nl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:nl,requiredFeatures:nl,requiredFonts:nl,requiredFormats:nl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:tt,specularExponent:tt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:tt,strikethroughThickness:tt,string:null,stroke:null,strokeDashArray:nl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:tt,strokeOpacity:tt,strokeWidth:null,style:null,surfaceScale:tt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:nl,tabIndex:tt,tableValues:null,target:null,targetX:tt,targetY:tt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:nl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:tt,underlineThickness:tt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:tt,values:null,vAlphabetic:tt,vMathematical:tt,vectorEffect:null,vHanging:tt,vIdeographic:tt,version:null,vertAdvY:tt,vertOriginX:tt,vertOriginY:tt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:tt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),eYe=/^data[-\w.:]+$/i,Rse=/-[a-z]/g,tYe=/[A-Z]/g;function oL(e,t){const n=GA(t);let r=t,i=Oc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&eYe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Rse,rYe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Rse.test(s)){let o=s.replace(tYe,nYe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=oG}return new i(r,t)}function nYe(e){return"-"+e.toLowerCase()}function rYe(e){return e.charAt(1).toUpperCase()}const iYe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},kI=Ibe([Nbe,Rbe,Obe,$be,JGe],"html"),my=Ibe([Nbe,Rbe,Obe,$be,ZGe],"svg");function Nse(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Mbe(e){return e.join(" ").trim()}var Lbe={},Dse=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,sYe=/\n/g,oYe=/^\s*/,aYe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,uYe=/^:\s*/,lYe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,cYe=/^[;\s]*/,fYe=/^\s+|\s+$/g,dYe=`
`,Pse="/",Ose="*",_v="",hYe="comment",pYe="declaration",mYe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(sYe);m&&(n+=m.length);var g=p.lastIndexOf(dYe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(oYe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Pse!=e.charAt(0)||Ose!=e.charAt(1))){for(var m=2;_v!=e.charAt(m)&&(Ose!=e.charAt(m)||Pse!=e.charAt(m+1));)++m;if(m+=2,_v===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:hYe,comment:g})}}function d(){var p=s(),m=u(aYe);if(m){if(f(),!u(uYe))return a("property missing ':'");var g=u(lYe),y=p({type:pYe,property:$se(m[0].replace(Dse,_v)),value:g?$se(g[0].replace(Dse,_v)):_v});return u(cYe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function $se(e){return e?e.replace(fYe,_v):_v}var gYe=Ks&&Ks.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lbe,"__esModule",{value:!0});var yYe=gYe(mYe);function vYe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,yYe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Mse=Lbe.default=vYe;const bYe=Mse.default||Mse,aL=Fbe("end"),Dh=Fbe("start");function Fbe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function _Ye(e){const t=Dh(e),n=aL(e);if(t&&n)return{start:t,end:n}}function $C(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Lse(e.position):"start"in e||"end"in e?Lse(e):"line"in e||"column"in e?ZB(e):""}function ZB(e){return Fse(e&&e.line)+":"+Fse(e&&e.column)}function Lse(e){return ZB(e&&e.start)+"-"+ZB(e&&e.end)}function Fse(e){return e&&typeof e=="number"?e:1}class _a extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=$C(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}_a.prototype.file="";_a.prototype.name="";_a.prototype.reason="";_a.prototype.message="";_a.prototype.stack="";_a.prototype.column=void 0;_a.prototype.line=void 0;_a.prototype.ancestors=void 0;_a.prototype.cause=void 0;_a.prototype.fatal=void 0;_a.prototype.place=void 0;_a.prototype.ruleId=void 0;_a.prototype.source=void 0;const aG={}.hasOwnProperty,wYe=new Map,EYe=/[A-Z]/g,xYe=/-([a-z])/g,SYe=new Set(["table","tbody","thead","tfoot","tr"]),TYe=new Set(["td","th"]),jbe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function CYe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=OYe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=PYe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?my:kI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Bbe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Bbe(e,t,n){if(t.type==="element")return AYe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return IYe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return RYe(e,t,n);if(t.type==="mdxjsEsm")return kYe(e,t);if(t.type==="root")return NYe(e,t,n);if(t.type==="text")return DYe(e,t)}function AYe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=my,e.schema=i),e.ancestors.push(t);const s=zbe(e,t.tagName,!1),o=$Ye(e,t);let a=lG(e,t);return SYe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!KGe(u):!0})),Ube(e,o,s,t),uG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function IYe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}YA(e,t.position)}function kYe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);YA(e,t.position)}function RYe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=my,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:zbe(e,t.name,!0),o=MYe(e,t),a=lG(e,t);return Ube(e,o,s,t),uG(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function NYe(e,t,n){const r={};return uG(r,lG(e,t)),e.create(t,e.Fragment,r,n)}function DYe(e,t){return t.value}function Ube(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function uG(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function PYe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function OYe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Dh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function $Ye(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&aG.call(t.properties,i)){const s=LYe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&TYe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function MYe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else YA(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else YA(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function lG(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:wYe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Bbe(e,s,o);a!==void 0&&n.push(a)}return n}function LYe(e,t,n){const r=oL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Abe(n):Mbe(n)),r.property==="style"){let i=typeof n=="object"?n:FYe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=jYe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?iYe[r.property]||r.property:r.attribute,n]}}function FYe(e,t){const n={};try{bYe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new _a("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=jbe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(xYe,UYe)),n[o]=s}}function zbe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Ase(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Ase(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return aG.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);YA(e)}function YA(e,t){const n=new _a("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=jbe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function jYe(e){const t={};let n;for(n in e)aG.call(e,n)&&(t[BYe(n)]=e[n]);return t}function BYe(e){let t=e.replace(EYe,zYe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function UYe(e,t){return t.toUpperCase()}function zYe(e){return"-"+e.toLowerCase()}const U5={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},VYe={};function HYe(e,t){const n=VYe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Vbe(e,r,i)}function Vbe(e,t,n){if(qYe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return jse(e.children,t,n)}return Array.isArray(e)?jse(e,t,n):""}function jse(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Vbe(e[i],t,n);return r.join("")}function qYe(e){return!!(e&&typeof e=="object")}const Bse=document.createElement("i");function cG(e){const t="&"+e+";";Bse.innerHTML=t;const n=Bse.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function am(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function rc(e,t){return e.length>0?(am(e,e.length,0,t),e):t}const Use={}.hasOwnProperty;function WYe(e){const t={};let n=-1;for(;++n<e.length;)GYe(t,e[n]);return t}function GYe(e,t){let n;for(n in t){const i=(Use.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Use.call(i,o)||(i[o]=[]);const a=s[o];YYe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function YYe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);am(e,0,0,r)}function Hbe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function gw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Cd=gy(/[A-Za-z]/),ml=gy(/[\dA-Za-z]/),KYe=gy(/[#-'*+\--9=?A-Z^-~]/);function eU(e){return e!==null&&(e<32||e===127)}const tU=gy(/\d/),XYe=gy(/[\dA-Fa-f]/),QYe=gy(/[!-/:-@[-`{-~]/);function Zt(e){return e!==null&&e<-2}function Du(e){return e!==null&&(e<0||e===32)}function yr(e){return e===-2||e===-1||e===32}const JYe=gy(new RegExp("\\p{P}|\\p{S}","u")),ZYe=gy(/\s/);function gy(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function Nx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&ml(e.charCodeAt(n+1))&&ml(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ei(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return yr(u)?(e.enter(n),a(u)):t(u)}function a(u){return yr(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const eKe={tokenize:tKe};function tKe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ei(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return Zt(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const nKe={tokenize:rKe},zse={tokenize:iKe};function rKe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let x=w,T;for(;x--;)if(t.events[x][0]==="exit"&&t.events[x][1].type==="chunkFlow"){T=t.events[x][1].end;break}y(r);let S=w;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},T),S++;return am(t.events,x+1,0,t.events.slice(w)),t.events.length=S,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(zse,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(zse,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return Zt(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const x=t.sliceStream(b);if(w&&x.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(x),t.parser.lazy[b.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const S=t.events.length;let C=S,A,R;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){R=t.events[C][1].end;break}A=!0}for(y(r),T=S;T<t.events.length;)t.events[T][1].end=Object.assign({},R),T++;am(t.events,C+1,0,t.events.slice(S)),t.events.length=T}}function y(b){let w=n.length;for(;w-- >b;){const x=n[w];t.containerState=x[1],x[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function iKe(e,t,n){return ei(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Vse(e){if(e===null||Du(e)||ZYe(e))return 1;if(JYe(e))return 2}function fG(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const nU={name:"attention",tokenize:oKe,resolveAll:sKe};function sKe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Hse(f,-u),Hse(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=rc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=rc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=rc(l,fG(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=rc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=rc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,am(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function oKe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Vse(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Vse(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Hse(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const aKe={name:"autolink",tokenize:uKe};function uKe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Cd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||ml(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||ml(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||eU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):KYe(h)?(e.consume(h),l):n(h)}function c(h){return ml(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||ml(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const uL={tokenize:lKe,partial:!0};function lKe(e,t,n){return r;function r(s){return yr(s)?ei(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||Zt(s)?t(s):n(s)}}const qbe={name:"blockQuote",tokenize:cKe,continuation:{tokenize:fKe},exit:dKe};function cKe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return yr(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function fKe(e,t,n){const r=this;return i;function i(o){return yr(o)?ei(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(qbe,t,n)(o)}}function dKe(e){e.exit("blockQuote")}const Wbe={name:"characterEscape",tokenize:hKe};function hKe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return QYe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Gbe={name:"characterReference",tokenize:pKe};function pKe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=ml,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=XYe,c):(e.enter("characterReferenceValue"),s=7,o=tU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===ml&&!cG(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const qse={tokenize:gKe,partial:!0},Wse={name:"codeFenced",tokenize:mKe,concrete:!0};function mKe(e,t,n){const r=this,i={tokenize:x,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),yr(T)?ei(e,f,"whitespace")(T):f(T))}function f(T){return T===null||Zt(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(qse,m,w)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||Zt(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):yr(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ei(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||Zt(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||Zt(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,w,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&yr(T)?ei(e,v,"linePrefix",s+1)(T):v(T)}function v(T){return T===null||Zt(T)?e.check(qse,m,w)(T):(e.enter("codeFlowValue"),b(T))}function b(T){return T===null||Zt(T)?(e.exit("codeFlowValue"),v(T)):(e.consume(T),b)}function w(T){return e.exit("codeFenced"),t(T)}function x(T,S,C){let A=0;return R;function R(L){return T.enter("lineEnding"),T.consume(L),T.exit("lineEnding"),k}function k(L){return T.enter("codeFencedFence"),yr(L)?ei(T,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):O(L)}function O(L){return L===a?(T.enter("codeFencedFenceSequence"),D(L)):C(L)}function D(L){return L===a?(A++,T.consume(L),D):A>=o?(T.exit("codeFencedFenceSequence"),yr(L)?ei(T,$,"whitespace")(L):$(L)):C(L)}function $(L){return L===null||Zt(L)?(T.exit("codeFencedFence"),S(L)):C(L)}}}function gKe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const z5={name:"codeIndented",tokenize:vKe},yKe={tokenize:bKe,partial:!0};function vKe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ei(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):Zt(l)?e.attempt(yKe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||Zt(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function bKe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ei(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):Zt(o)?i(o):n(o)}}const _Ke={name:"codeText",tokenize:xKe,resolve:wKe,previous:EKe};function wKe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function EKe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function xKe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):Zt(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||Zt(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class SKe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&HS(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),HS(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),HS(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);HS(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);HS(this.left,n.reverse())}}}function HS(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Ybe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new SKe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,TKe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return am(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function TKe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const CKe={tokenize:kKe,resolve:IKe},AKe={tokenize:RKe,partial:!0};function IKe(e){return Ybe(e),e}function kKe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):Zt(a)?e.check(AKe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function RKe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ei(e,s,"linePrefix")}function s(o){if(o===null||Zt(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Kbe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||eU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||Zt(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Du(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||eU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function Xbe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):Zt(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||Zt(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!yr(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Qbe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):Zt(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ei(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||Zt(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function MC(e,t){let n;return r;function r(i){return Zt(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):yr(i)?ei(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const NKe={name:"definition",tokenize:PKe},DKe={tokenize:OKe,partial:!0};function PKe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Xbe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=gw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Du(h)?MC(e,l)(h):l(h)}function l(h){return Kbe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(DKe,f,f)(h)}function f(h){return yr(h)?ei(e,d,"whitespace")(h):d(h)}function d(h){return h===null||Zt(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function OKe(e,t,n){return r;function r(a){return Du(a)?MC(e,i)(a):n(a)}function i(a){return Qbe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return yr(a)?ei(e,o,"whitespace")(a):o(a)}function o(a){return a===null||Zt(a)?t(a):n(a)}}const $Ke={name:"hardBreakEscape",tokenize:MKe};function MKe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return Zt(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const LKe={name:"headingAtx",tokenize:jKe,resolve:FKe};function FKe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},am(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function jKe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Du(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||Zt(c)?(e.exit("atxHeading"),t(c)):yr(c)?ei(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Du(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const BKe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Gse=["pre","script","style","textarea"],UKe={name:"htmlFlow",tokenize:qKe,resolveTo:HKe,concrete:!0},zKe={tokenize:GKe,partial:!0},VKe={tokenize:WKe,partial:!0};function HKe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function qKe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:P):Cd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Cd(j)?(e.consume(j),i=4,r.interrupt?t:P):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:P):n(j)}function p(j){const H="CDATA[";return j===H.charCodeAt(a++)?(e.consume(j),a===H.length?r.interrupt?t:O:p):n(j)}function m(j){return Cd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Du(j)){const H=j===47,G=o.toLowerCase();return!H&&!s&&Gse.includes(G)?(i=1,r.interrupt?t(j):O(j)):BKe.includes(o.toLowerCase())?(i=6,H?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||ml(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return yr(j)?(e.consume(j),v):R(j)}function b(j){return j===47?(e.consume(j),R):j===58||j===95||Cd(j)?(e.consume(j),w):yr(j)?(e.consume(j),b):R(j)}function w(j){return j===45||j===46||j===58||j===95||ml(j)?(e.consume(j),w):x(j)}function x(j){return j===61?(e.consume(j),T):yr(j)?(e.consume(j),x):b(j)}function T(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,S):yr(j)?(e.consume(j),T):C(j)}function S(j){return j===u?(e.consume(j),u=null,A):j===null||Zt(j)?n(j):(e.consume(j),S)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Du(j)?x(j):(e.consume(j),C)}function A(j){return j===47||j===62||yr(j)?b(j):n(j)}function R(j){return j===62?(e.consume(j),k):n(j)}function k(j){return j===null||Zt(j)?O(j):yr(j)?(e.consume(j),k):n(j)}function O(j){return j===45&&i===2?(e.consume(j),F):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),V):j===63&&i===3?(e.consume(j),P):j===93&&i===5?(e.consume(j),q):Zt(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(zKe,W,D)(j)):j===null||Zt(j)?(e.exit("htmlFlowData"),D(j)):(e.consume(j),O)}function D(j){return e.check(VKe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),L}function L(j){return j===null||Zt(j)?D(j):(e.enter("htmlFlowData"),O(j))}function F(j){return j===45?(e.consume(j),P):O(j)}function B(j){return j===47?(e.consume(j),o="",U):O(j)}function U(j){if(j===62){const H=o.toLowerCase();return Gse.includes(H)?(e.consume(j),V):O(j)}return Cd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):O(j)}function q(j){return j===93?(e.consume(j),P):O(j)}function P(j){return j===62?(e.consume(j),V):j===45&&i===2?(e.consume(j),P):O(j)}function V(j){return j===null||Zt(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),V)}function W(j){return e.exit("htmlFlow"),t(j)}}function WKe(e,t,n){const r=this;return i;function i(o){return Zt(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function GKe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(uL,t,n)}}const YKe={name:"htmlText",tokenize:KKe};function KKe(e,t,n){const r=this;let i,s,o;return a;function a(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),u}function u(P){return P===33?(e.consume(P),l):P===47?(e.consume(P),x):P===63?(e.consume(P),b):Cd(P)?(e.consume(P),C):n(P)}function l(P){return P===45?(e.consume(P),c):P===91?(e.consume(P),s=0,p):Cd(P)?(e.consume(P),v):n(P)}function c(P){return P===45?(e.consume(P),h):n(P)}function f(P){return P===null?n(P):P===45?(e.consume(P),d):Zt(P)?(o=f,B(P)):(e.consume(P),f)}function d(P){return P===45?(e.consume(P),h):f(P)}function h(P){return P===62?F(P):P===45?d(P):f(P)}function p(P){const V="CDATA[";return P===V.charCodeAt(s++)?(e.consume(P),s===V.length?m:p):n(P)}function m(P){return P===null?n(P):P===93?(e.consume(P),g):Zt(P)?(o=m,B(P)):(e.consume(P),m)}function g(P){return P===93?(e.consume(P),y):m(P)}function y(P){return P===62?F(P):P===93?(e.consume(P),y):m(P)}function v(P){return P===null||P===62?F(P):Zt(P)?(o=v,B(P)):(e.consume(P),v)}function b(P){return P===null?n(P):P===63?(e.consume(P),w):Zt(P)?(o=b,B(P)):(e.consume(P),b)}function w(P){return P===62?F(P):b(P)}function x(P){return Cd(P)?(e.consume(P),T):n(P)}function T(P){return P===45||ml(P)?(e.consume(P),T):S(P)}function S(P){return Zt(P)?(o=S,B(P)):yr(P)?(e.consume(P),S):F(P)}function C(P){return P===45||ml(P)?(e.consume(P),C):P===47||P===62||Du(P)?A(P):n(P)}function A(P){return P===47?(e.consume(P),F):P===58||P===95||Cd(P)?(e.consume(P),R):Zt(P)?(o=A,B(P)):yr(P)?(e.consume(P),A):F(P)}function R(P){return P===45||P===46||P===58||P===95||ml(P)?(e.consume(P),R):k(P)}function k(P){return P===61?(e.consume(P),O):Zt(P)?(o=k,B(P)):yr(P)?(e.consume(P),k):A(P)}function O(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):Zt(P)?(o=O,B(P)):yr(P)?(e.consume(P),O):(e.consume(P),$)}function D(P){return P===i?(e.consume(P),i=void 0,L):P===null?n(P):Zt(P)?(o=D,B(P)):(e.consume(P),D)}function $(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===47||P===62||Du(P)?A(P):(e.consume(P),$)}function L(P){return P===47||P===62||Du(P)?A(P):n(P)}function F(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}function B(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),U}function U(P){return yr(P)?ei(e,q,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):q(P)}function q(P){return e.enter("htmlTextData"),o(P)}}const dG={name:"labelEnd",tokenize:tXe,resolveTo:eXe,resolveAll:ZKe},XKe={tokenize:nXe},QKe={tokenize:rXe},JKe={tokenize:iXe};function ZKe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function eXe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=rc(a,e.slice(s+1,s+r+3)),a=rc(a,[["enter",c,t]]),a=rc(a,fG(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=rc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=rc(a,e.slice(o+1)),a=rc(a,[["exit",u,t]]),am(e,s,e.length,a),e}function tXe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(gw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(XKe,c,o?c:f)(d):d===91?e.attempt(QKe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(JKe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function nXe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Du(f)?MC(e,s)(f):s(f)}function s(f){return f===41?c(f):Kbe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Du(f)?MC(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Qbe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Du(f)?MC(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function rXe(e,t,n){const r=this;return i;function i(a){return Xbe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(gw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function iXe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const sXe={name:"labelStartImage",tokenize:oXe,resolveAll:dG.resolveAll};function oXe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const aXe={name:"labelStartLink",tokenize:uXe,resolveAll:dG.resolveAll};function uXe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const V5={name:"lineEnding",tokenize:lXe};function lXe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ei(e,t,"linePrefix")}}const TD={name:"thematicBreak",tokenize:cXe};function cXe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||Zt(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),yr(l)?ei(e,a,"whitespace")(l):a(l))}}const uu={name:"list",tokenize:hXe,continuation:{tokenize:pXe},exit:gXe},fXe={tokenize:yXe,partial:!0},dXe={tokenize:mXe,partial:!0};function hXe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:tU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(TD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return tU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(uL,r.interrupt?n:c,e.attempt(fXe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return yr(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function pXe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(uL,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ei(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!yr(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(dXe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ei(e,e.attempt(uu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function mXe(e,t,n){const r=this;return ei(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function gXe(e){e.exit(this.containerState.type)}function yXe(e,t,n){const r=this;return ei(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!yr(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Yse={name:"setextUnderline",tokenize:bXe,resolveTo:vXe};function vXe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function bXe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),yr(l)?ei(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||Zt(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const _Xe={tokenize:wXe};function wXe(e){const t=this,n=e.attempt(uL,r,e.attempt(this.parser.constructs.flowInitial,i,ei(e,e.attempt(this.parser.constructs.flow,i,e.attempt(CKe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const EXe={resolveAll:Zbe()},xXe=Jbe("string"),SXe=Jbe("text");function Jbe(e){return{tokenize:t,resolveAll:Zbe(e==="text"?TXe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Zbe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function TXe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function CXe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:S(x),check:S(T),interrupt:S(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(k){return o=rc(o,k),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=fG(s,l.events,l),l.events)}function d(k,O){return IXe(h(k),O)}function h(k){return AXe(o,k)}function p(){const{line:k,column:O,offset:D,_index:$,_bufferIndex:L}=r;return{line:k,column:O,offset:D,_index:$,_bufferIndex:L}}function m(k){i[k.line]=k.column,R()}function g(){let k;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(k=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===k&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(k){c=c(k)}function v(k){Zt(k)?(r.line++,r.column=1,r.offset+=k===-3?2:1,R()):k!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=k}function b(k,O){const D=O||{};return D.type=k,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function w(k){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function x(k,O){C(k,O.from)}function T(k,O){O.restore()}function S(k,O){return D;function D($,L,F){let B,U,q,P;return Array.isArray($)?W($):"tokenize"in $?W([$]):V($);function V(ne){return pe;function pe(fe){const de=fe!==null&&ne[fe],ye=fe!==null&&ne.null,Ae=[...Array.isArray(de)?de:de?[de]:[],...Array.isArray(ye)?ye:ye?[ye]:[]];return W(Ae)(fe)}}function W(ne){return B=ne,U=0,ne.length===0?F:j(ne[U])}function j(ne){return pe;function pe(fe){return P=A(),q=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(O?Object.assign(Object.create(l),O):l,u,H,G)(fe)}}function H(ne){return k(q,P),L}function G(ne){return P.restore(),++U<B.length?j(B[U]):F}}}function C(k,O){k.resolveAll&&!s.includes(k)&&s.push(k),k.resolve&&am(l.events,O,l.events.length-O,k.resolve(l.events.slice(O),l)),k.resolveTo&&(l.events=k.resolveTo(l.events,l))}function A(){const k=p(),O=l.previous,D=l.currentConstruct,$=l.events.length,L=Array.from(a);return{restore:F,from:$};function F(){r=k,l.previous=O,l.currentConstruct=D,l.events.length=$,a=L,R()}}function R(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function AXe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function IXe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const kXe={42:uu,43:uu,45:uu,48:uu,49:uu,50:uu,51:uu,52:uu,53:uu,54:uu,55:uu,56:uu,57:uu,62:qbe},RXe={91:NKe},NXe={[-2]:z5,[-1]:z5,32:z5},DXe={35:LKe,42:TD,45:[Yse,TD],60:UKe,61:Yse,95:TD,96:Wse,126:Wse},PXe={38:Gbe,92:Wbe},OXe={[-5]:V5,[-4]:V5,[-3]:V5,33:sXe,38:Gbe,42:nU,60:[aKe,YKe],91:aXe,92:[$Ke,Wbe],93:dG,95:nU,96:_Ke},$Xe={null:[nU,EXe]},MXe={null:[42,95]},LXe={null:[]},FXe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:MXe,contentInitial:RXe,disable:LXe,document:kXe,flow:DXe,flowInitial:NXe,insideSpan:$Xe,string:PXe,text:OXe},Symbol.toStringTag,{value:"Module"}));function jXe(e){const n=WYe([FXe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(eKe),document:i(nKe),flow:i(_Xe),string:i(xXe),text:i(SXe)};return r;function i(s){return o;function o(a){return CXe(r,s,a)}}}function BXe(e){for(;!Ybe(e););return e}const Kse=/[\0\t\n\r]/g;function UXe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Kse.lastIndex=f,l=Kse.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const zXe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function VXe(e){return e.replace(zXe,HXe)}function HXe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Hbe(n.slice(s?2:1),s?16:10)}return cG(n)||e}const e_e={}.hasOwnProperty;function qXe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),WXe(n)(BXe(jXe(n).document().write(UXe()(e,t,!0))))}function WXe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ye),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(yt),blockQuote:s(ye),characterEscape:A,characterReference:A,codeFenced:s(Ae),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ae,o),codeText:s(ve,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(rt),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ze),hardBreakEscape:s(ot),hardBreakTrailing:s(ot),htmlFlow:s(De,o),htmlFlowData:A,htmlText:s(De,o),htmlTextData:A,image:s(Me),label:o,link:s(Ye),listItem:s(Pt),listItemValue:d,listOrdered:s(pt,f),listUnordered:s(pt),paragraph:s(qe),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(yt),strong:s(me),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:x,autolink:u(),autolinkEmail:de,autolinkProtocol:fe,blockQuote:u(),characterEscapeValue:R,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:pe,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:R,codeIndented:u(y),codeText:u(L),codeTextData:R,data:R,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(D),htmlFlowData:R,htmlText:u($),htmlTextData:R,image:u(B),label:q,labelText:U,lineEnding:k,link:u(F),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:H,resourceDestinationString:P,resourceTitleString:V,resource:W,setextHeading:u(C),setextHeadingLineSequence:S,setextHeadingText:T,strong:u(),thematicBreak:u()}};t_e(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(he){let Ce={type:"root",children:[]};const Ve={stack:[Ce],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<he.length;)if(he[_t][1].type==="listOrdered"||he[_t][1].type==="listUnordered")if(he[_t][0]==="enter")ut.push(_t);else{const On=ut.pop();_t=i(he,On,_t)}for(_t=-1;++_t<he.length;){const On=t[he[_t][0]];e_e.call(On,he[_t][1].type)&&On[he[_t][1].type].call(Object.assign({sliceSerialize:he[_t][2].sliceSerialize},Ve),he[_t][1])}if(Ve.tokenStack.length>0){const On=Ve.tokenStack[Ve.tokenStack.length-1];(On[1]||Xse).call(Ve,void 0,On[0])}for(Ce.position={start:eg(he.length>0?he[0][1].start:{line:1,column:1,offset:0}),end:eg(he.length>0?he[he.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ce=t.transforms[_t](Ce)||Ce;return Ce}function i(he,Ce,Ve){let ut=Ce-1,_t=-1,On=!1,Sr,$n,ur,hn;for(;++ut<=Ve;){const xn=he[ut];switch(xn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{xn[0]==="enter"?_t++:_t--,hn=void 0;break}case"lineEndingBlank":{xn[0]==="enter"&&(Sr&&!hn&&!_t&&!ur&&(ur=ut),hn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:hn=void 0}if(!_t&&xn[0]==="enter"&&xn[1].type==="listItemPrefix"||_t===-1&&xn[0]==="exit"&&(xn[1].type==="listUnordered"||xn[1].type==="listOrdered")){if(Sr){let er=ut;for($n=void 0;er--;){const tr=he[er];if(tr[1].type==="lineEnding"||tr[1].type==="lineEndingBlank"){if(tr[0]==="exit")continue;$n&&(he[$n][1].type="lineEndingBlank",On=!0),tr[1].type="lineEnding",$n=er}else if(!(tr[1].type==="linePrefix"||tr[1].type==="blockQuotePrefix"||tr[1].type==="blockQuotePrefixWhitespace"||tr[1].type==="blockQuoteMarker"||tr[1].type==="listItemIndent"))break}ur&&(!$n||ur<$n)&&(Sr._spread=!0),Sr.end=Object.assign({},$n?he[$n][1].start:xn[1].end),he.splice($n||ut,0,["exit",Sr,xn[2]]),ut++,Ve++}if(xn[1].type==="listItemPrefix"){const er={type:"listItem",_spread:!1,start:Object.assign({},xn[1].start),end:void 0};Sr=er,he.splice(ut,0,["enter",er,xn[2]]),ut++,Ve++,ur=void 0,hn=!0}}}return he[Ce][1]._spread=On,Ve}function s(he,Ce){return Ve;function Ve(ut){a.call(this,he(ut),ut),Ce&&Ce.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(he,Ce,Ve){this.stack[this.stack.length-1].children.push(he),this.stack.push(he),this.tokenStack.push([Ce,Ve]),he.position={start:eg(Ce.start),end:void 0}}function u(he){return Ce;function Ce(Ve){he&&he.call(this,Ve),l.call(this,Ve)}}function l(he,Ce){const Ve=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==he.type&&(Ce?Ce.call(this,he,ut[0]):(ut[1]||Xse).call(this,he,ut[0]));else throw new Error("Cannot close `"+he.type+"` ("+$C({start:he.start,end:he.end})+"): its not open");Ve.position.end=eg(he.end)}function c(){return HYe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(he){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(he),10),this.data.expectingFirstListItemValue=void 0}}function h(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=he}function p(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=he}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=he.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=he.replace(/(\r?\n|\r)$/g,"")}function v(he){const Ce=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=Ce,Ve.identifier=gw(this.sliceSerialize(he)).toLowerCase()}function b(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=he}function w(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=he}function x(he){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const Ve=this.sliceSerialize(he).length;Ce.depth=Ve}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function S(he){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(he).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(he){const Ve=this.stack[this.stack.length-1].children;let ut=Ve[Ve.length-1];(!ut||ut.type!=="text")&&(ut=ft(),ut.position={start:eg(he.start),end:void 0},Ve.push(ut)),this.stack.push(ut)}function R(he){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(he),Ce.position.end=eg(he.end)}function k(he){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Ve=Ce.children[Ce.children.length-1];Ve.position.end=eg(he.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ce.type)&&(A.call(this,he),R.call(this,he))}function O(){this.data.atHardBreak=!0}function D(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=he}function $(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=he}function L(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=he}function F(){const he=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";he.type+="Reference",he.referenceType=Ce,delete he.url,delete he.title}else delete he.identifier,delete he.label;this.data.referenceType=void 0}function B(){const he=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";he.type+="Reference",he.referenceType=Ce,delete he.url,delete he.title}else delete he.identifier,delete he.label;this.data.referenceType=void 0}function U(he){const Ce=this.sliceSerialize(he),Ve=this.stack[this.stack.length-2];Ve.label=VXe(Ce),Ve.identifier=gw(Ce).toLowerCase()}function q(){const he=this.stack[this.stack.length-1],Ce=this.resume(),Ve=this.stack[this.stack.length-1];if(this.data.inReference=!0,Ve.type==="link"){const ut=he.children;Ve.children=ut}else Ve.alt=Ce}function P(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=he}function V(){const he=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=he}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function H(he){const Ce=this.resume(),Ve=this.stack[this.stack.length-1];Ve.label=Ce,Ve.identifier=gw(this.sliceSerialize(he)).toLowerCase(),this.data.referenceType="full"}function G(he){this.data.characterReferenceType=he.type}function ne(he){const Ce=this.sliceSerialize(he),Ve=this.data.characterReferenceType;let ut;Ve?(ut=Hbe(Ce,Ve==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=cG(Ce);const _t=this.stack[this.stack.length-1];_t.value+=ut}function pe(he){const Ce=this.stack.pop();Ce.position.end=eg(he.end)}function fe(he){R.call(this,he);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(he)}function de(he){R.call(this,he);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(he)}function ye(){return{type:"blockquote",children:[]}}function Ae(){return{type:"code",lang:null,meta:null,value:""}}function ve(){return{type:"inlineCode",value:""}}function rt(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ze(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function ot(){return{type:"break"}}function De(){return{type:"html",value:""}}function Me(){return{type:"image",title:null,url:"",alt:null}}function Ye(){return{type:"link",title:null,url:"",children:[]}}function pt(he){return{type:"list",ordered:he.type==="listOrdered",start:null,spread:he._spread,children:[]}}function Pt(he){return{type:"listItem",spread:he._spread,checked:null,children:[]}}function qe(){return{type:"paragraph",children:[]}}function me(){return{type:"strong",children:[]}}function ft(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function eg(e){return{line:e.line,column:e.column,offset:e.offset}}function t_e(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?t_e(e,r):GXe(e,r)}}function GXe(e,t){let n;for(n in t)if(e_e.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Xse(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+$C({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+$C({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+$C({start:t.start,end:t.end})+") is still open")}function YXe(e){const t=this;t.parser=n;function n(r){return qXe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function KXe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function XXe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function QXe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function JXe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ZXe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function eQe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=Nx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function tQe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function nQe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function n_e(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function rQe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return n_e(e,t);const i={src:Nx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function iQe(e,t){const n={src:Nx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function sQe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function oQe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return n_e(e,t);const i={href:Nx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function aQe(e,t){const n={href:Nx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function uQe(e,t,n){const r=e.all(t),i=n?lQe(n):r_e(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function lQe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=r_e(n[r])}return t}function r_e(e){const t=e.spread;return t??e.children.length>1}function cQe(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function fQe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function dQe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function hQe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function pQe(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Dh(t.children[1]),u=aL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function mQe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function gQe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Qse=9,Jse=32;function yQe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Zse(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Zse(t.slice(i),i>0,!1)),s.join("")}function Zse(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Qse||s===Jse;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Qse||s===Jse;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function vQe(e,t){const n={type:"text",value:yQe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function bQe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const _Qe={blockquote:KXe,break:XXe,code:QXe,delete:JXe,emphasis:ZXe,footnoteReference:eQe,heading:tQe,html:nQe,imageReference:rQe,image:iQe,inlineCode:sQe,linkReference:oQe,link:aQe,listItem:uQe,list:cQe,paragraph:fQe,root:dQe,strong:hQe,table:pQe,tableCell:gQe,tableRow:mQe,text:vQe,thematicBreak:bQe,toml:zR,yaml:zR,definition:zR,footnoteDefinition:zR};function zR(){}const i_e=-1,lL=0,uO=1,lO=2,hG=3,pG=4,mG=5,gG=6,s_e=7,o_e=8,eoe=typeof self=="object"?self:globalThis,wQe=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case lL:case i_e:return n(o,i);case uO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case lO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case hG:return n(new Date(o),i);case pG:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case mG:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case gG:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case s_e:{const{name:a,message:u}=o;return n(new eoe[a](u),i)}case o_e:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new eoe[s](o),i)};return r},toe=e=>wQe(new Map,e)(0),t_="",{toString:EQe}={},{keys:xQe}=Object,qS=e=>{const t=typeof e;if(t!=="object"||!e)return[lL,t];const n=EQe.call(e).slice(8,-1);switch(n){case"Array":return[uO,t_];case"Object":return[lO,t_];case"Date":return[hG,t_];case"RegExp":return[pG,t_];case"Map":return[mG,t_];case"Set":return[gG,t_]}return n.includes("Array")?[uO,n]:n.includes("Error")?[s_e,n]:[lO,n]},VR=([e,t])=>e===lL&&(t==="function"||t==="symbol"),SQe=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=qS(o);switch(a){case lL:{let c=o;switch(u){case"bigint":a=o_e,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([i_e],o)}return i([a,c],o)}case uO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case lO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of xQe(o))(e||!VR(qS(o[d])))&&c.push([s(d),s(o[d])]);return f}case hG:return i([a,o.toISOString()],o);case pG:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case mG:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(VR(qS(d))||VR(qS(h))))&&c.push([s(d),s(h)]);return f}case gG:{const c=[],f=i([a,c],o);for(const d of o)(e||!VR(qS(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},noe=(e,{json:t,lossy:n}={})=>{const r=[];return SQe(!(t||n),!!t,new Map,r)(e),r},oE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?toe(noe(e,t)):structuredClone(e):(e,t)=>toe(noe(e,t));function TQe(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function CQe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function AQe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||TQe,r=e.options.footnoteBackLabel||CQe,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=Nx(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...oE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const a_e=function(e){if(e==null)return NQe;if(typeof e=="function")return cL(e);if(typeof e=="object")return Array.isArray(e)?IQe(e):kQe(e);if(typeof e=="string")return RQe(e);throw new Error("Expected function, string, or object as test")};function IQe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=a_e(e[n]);return cL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function kQe(e){const t=e;return cL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function RQe(e){return cL(t);function t(n){return n&&n.type===e}}function cL(e){return t;function t(n,r,i){return!!(DQe(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function NQe(){return!0}function DQe(e){return e!==null&&typeof e=="object"&&"type"in e}const u_e=[],PQe=!0,roe=!1,OQe="skip";function $Qe(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=a_e(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=u_e,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=MQe(n(u,c)),h[0]===roe))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==OQe)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===roe)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function MQe(e){return Array.isArray(e)?e:typeof e=="number"?[PQe,e]:e==null?u_e:[e]}function yG(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),$Qe(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const rU={}.hasOwnProperty,LQe={};function FQe(e,t){const n=t||LQe,r=new Map,i=new Map,s=new Map,o={..._Qe,...n.handlers},a={all:l,applyData:BQe,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:jQe,wrap:zQe};return yG(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(rU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=oE(g);return y.children=a.all(c),y}return oE(c)}return(a.options.unknownHandler||UQe)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=ioe(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=ioe(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function jQe(e,t){e.position&&(t.position=_Ye(e))}function BQe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,oE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function UQe(e,t){const n=t.data||{},r="value"in t&&!(rU.call(n,"hProperties")||rU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function zQe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function ioe(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function soe(e,t){const n=FQe(e,t),r=n.one(e,void 0),i=AQe(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function VQe(e,t){return e&&"run"in e?async function(n,r){const i=soe(n,{file:r,...t});await e.run(i,r)}:function(n,r){return soe(n,{file:r,...t||e})}}function ooe(e){if(e)throw e}var CD=Object.prototype.hasOwnProperty,l_e=Object.prototype.toString,aoe=Object.defineProperty,uoe=Object.getOwnPropertyDescriptor,loe=function(t){return typeof Array.isArray=="function"?Array.isArray(t):l_e.call(t)==="[object Array]"},coe=function(t){if(!t||l_e.call(t)!=="[object Object]")return!1;var n=CD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&CD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||CD.call(t,i)},foe=function(t,n){aoe&&n.name==="__proto__"?aoe(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},doe=function(t,n){if(n==="__proto__")if(CD.call(t,n)){if(uoe)return uoe(t,n).value}else return;return t[n]},HQe=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=doe(a,n),i=doe(t,n),a!==i&&(c&&i&&(coe(i)||(s=loe(i)))?(s?(s=!1,o=r&&loe(r)?r:[]):o=r&&coe(r)?r:{},foe(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&foe(a,{name:n,newValue:i}));return a};const H5=jl(HQe);function iU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function qQe(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?WQe(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function WQe(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const gd={basename:GQe,dirname:YQe,extname:KQe,join:XQe,sep:"/"};function GQe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');RI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function YQe(e){if(RI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function KQe(e){RI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function XQe(...e){let t=-1,n;for(;++t<e.length;)RI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":QQe(n)}function QQe(e){RI(e);const t=e.codePointAt(0)===47;let n=JQe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function JQe(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function RI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const ZQe={cwd:eJe};function eJe(){return"/"}function sU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function tJe(e){if(typeof e=="string")e=new URL(e);else if(!sU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return nJe(e)}function nJe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const q5=["history","path","basename","stem","extname","dirname"];class c_e{constructor(t){let n;t?sU(t)?n={path:t}:typeof t=="string"||rJe(t)?n={value:t}:n=t:n={},this.cwd=ZQe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<q5.length;){const s=q5[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)q5.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?gd.basename(this.path):void 0}set basename(t){G5(t,"basename"),W5(t,"basename"),this.path=gd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?gd.dirname(this.path):void 0}set dirname(t){hoe(this.basename,"dirname"),this.path=gd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?gd.extname(this.path):void 0}set extname(t){if(W5(t,"extname"),hoe(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=gd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){sU(t)&&(t=tJe(t)),G5(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?gd.basename(this.path,this.extname):void 0}set stem(t){G5(t,"stem"),W5(t,"stem"),this.path=gd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new _a(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function W5(e,t){if(e&&e.includes(gd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+gd.sep+"`")}function G5(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function hoe(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function rJe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const iJe=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},sJe={}.hasOwnProperty;class vG extends iJe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=qQe()}copy(){const t=new vG;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(H5(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(X5("data",this.frozen),this.namespace[t]=n,this):sJe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(X5("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=HR(t),r=this.parser||this.Parser;return Y5("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Y5("process",this.parser||this.Parser),K5("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=HR(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);uJe(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Y5("processSync",this.parser||this.Parser),K5("processSync",this.compiler||this.Compiler),this.process(t,i),moe("processSync","process",n),r;function i(s,o){n=!0,ooe(s),r=o}}run(t,n,r){poe(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=HR(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),moe("runSync","run",r),i;function s(o,a){ooe(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=HR(n),i=this.compiler||this.Compiler;return K5("stringify",i),poe(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(X5("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=H5(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];iU(m)&&iU(h)&&(h=H5(!0,m,h)),r[d]=[l,h,...p]}}}}const oJe=new vG().freeze();function Y5(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function K5(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function X5(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function poe(e){if(!iU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function moe(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function HR(e){return aJe(e)?e:new c_e(e)}function aJe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function uJe(e){return typeof e=="string"||lJe(e)}function lJe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const cJe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",goe=[],yoe={allowDangerousHtml:!0},fJe=/^(https?|ircs?|mailto|xmpp)$/i,dJe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function hJe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||goe,u=e.remarkPlugins||goe,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...yoe}:yoe,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||pJe,h=oJe().use(YXe).use(u).use(VQe,l).use(a),p=new c_e;typeof r=="string"&&(p.value=r);for(const v of dJe)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+cJe+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),yG(g,y),CYe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let x;for(x in U5)if(Object.hasOwn(U5,x)&&Object.hasOwn(v.properties,x)){const T=v.properties[x],S=U5[x];(S===null||S.includes(v.tagName))&&(v.properties[x]=d(String(T||""),x,v))}}if(v.type==="element"){let x=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!x&&n&&typeof b=="number"&&(x=!n(v,b,w)),x&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function pJe(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||fJe.test(e.slice(0,t))?e:""}const voe=/[#.]/g;function mJe(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){voe.lastIndex=i;const a=voe.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const gJe=new Set(["button","menu","reset","submit"]),oU={}.hasOwnProperty;function f_e(e,t,n){const r=n&&_Je(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=mJe(s,t),l.tagName=l.tagName.toLowerCase(),r&&oU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),yJe(o,l.tagName)){let c;for(c in o)oU.call(o,c)&&vJe(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)aU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function yJe(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?gJe.has(e.type.toLowerCase()):!("value"in e)}function vJe(e,t,n,r){const i=oL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Nse(r):i.commaSeparated?o=Cse(r):i.commaOrSpaceSeparated?o=Nse(Cse(r).join(" ")):o=boe(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?bJe(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=boe(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function aU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)aU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?aU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function boe(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||GA(n)===GA(t)))return!0}return n}function bJe(e){const t=[];let n;for(n in e)oU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function _Je(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const wJe=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],EJe=f_e(kI,"div"),xJe=f_e(my,"g",wJe),Q5=/\r?\n|\r/g;function SJe(e){const t=String(e),n=[];for(Q5.lastIndex=0;Q5.test(t);)n.push(Q5.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const Lv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},d_e={}.hasOwnProperty,TJe=Object.prototype;function CJe(e,t){const n=t||{};return bG({file:n.file||void 0,location:!1,schema:n.space==="svg"?my:kI,verbose:n.verbose||!1},e)}function bG(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},AD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:h_e(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=SJe(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},AD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},AD(e,r,n),n}default:return n=AJe(e,t),n}}function h_e(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=bG(e,t[n]);r.push(i)}return r}function AJe(e,t){const n=e.schema;e.schema=t.namespaceURI===Lv.svg?my:kI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;d_e.call(TJe,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?xJe:EJe)(t.tagName,i,h_e(e,t.childNodes));if(AD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&W_(u.startTag),c=u&&u.endTag&&W_(u.endTag),f=bG(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function AD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=IJe(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function IJe(e,t,n){const r=W_(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)d_e.call(n.attrs,o)&&(s[oL(e.schema,o).property]=W_(n.attrs[o]));n.startTag;const a=W_(n.startTag),u=n.endTag?W_(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function W_(e){const t=_oe({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=_oe({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function _oe(e){return e.line&&e.column?e:void 0}const woe={}.hasOwnProperty;function p_e(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&woe.call(i,e)){const u=String(i[e]);o=woe.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const kJe={},RJe={}.hasOwnProperty,m_e=p_e("type",{handlers:{root:DJe,element:LJe,text:$Je,comment:MJe,doctype:OJe}});function NJe(e,t){const r=(t||kJe).space;return m_e(e,r==="svg"?my:kI)}function DJe(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=_G(e.children,n,t),Dx(e,n),n}function PJe(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=_G(e.children,n,t),Dx(e,n),n}function OJe(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Dx(e,t),t}function $Je(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Dx(e,t),t}function MJe(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Dx(e,t),t}function LJe(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=my);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&RJe.call(e.properties,s)){const u=FJe(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:Lv[o],childNodes:[],parentNode:null};return a.childNodes=_G(e.children,a,r),Dx(e,a),e.tagName==="template"&&e.content&&(a.content=PJe(e.content,r)),a}function FJe(e,t,n){const r=oL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Abe(n):Mbe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=Lv[r.space]}return i}function _G(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=m_e(e[r],n);s.parentNode=t,i.push(s)}return i}function Dx(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const jJe=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],BJe=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),hi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const ou={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function g_e(e){return e>=55296&&e<=57343}function UJe(e){return e>=56320&&e<=57343}function zJe(e,t){return(e-55296)*1024+9216+t}function y_e(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function v_e(e){return e>=64976&&e<=65007||BJe.has(e)}var ke;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ke=ke||(ke={}));const VJe=65536;class HJe{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=VJe,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(UJe(n))return this.pos++,this._addGap(),zJe(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(ke.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,g_e(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){y_e(t)?this._err(ke.controlCharacterInInputStream):v_e(t)&&this._err(ke.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Cn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Cn=Cn||(Cn={}));function b_e(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const og=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),qJe=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var J5;const WJe=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),GJe=(J5=String.fromCodePoint)!==null&&J5!==void 0?J5:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function YJe(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=WJe.get(e))!==null&&t!==void 0?t:e}var Gs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Gs||(Gs={}));const KJe=32;var jd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(jd||(jd={}));function uU(e){return e>=Gs.ZERO&&e<=Gs.NINE}function XJe(e){return e>=Gs.UPPER_A&&e<=Gs.UPPER_F||e>=Gs.LOWER_A&&e<=Gs.LOWER_F}function QJe(e){return e>=Gs.UPPER_A&&e<=Gs.UPPER_Z||e>=Gs.LOWER_A&&e<=Gs.LOWER_Z||uU(e)}function JJe(e){return e===Gs.EQUALS||QJe(e)}var Bs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Bs||(Bs={}));var wv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(wv||(wv={}));class ZJe{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Bs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=wv.Strict}startEntity(t){this.decodeMode=t,this.state=Bs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Bs.EntityStart:return t.charCodeAt(n)===Gs.NUM?(this.state=Bs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Bs.NamedEntity,this.stateNamedEntity(t,n));case Bs.NumericStart:return this.stateNumericStart(t,n);case Bs.NumericDecimal:return this.stateNumericDecimal(t,n);case Bs.NumericHex:return this.stateNumericHex(t,n);case Bs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|KJe)===Gs.LOWER_X?(this.state=Bs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Bs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(uU(i)||XJe(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(uU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Gs.SEMI)this.consumed+=1;else if(this.decodeMode===wv.Strict)return 0;return this.emitCodePoint(YJe(this.result),this.consumed),this.errors&&(t!==Gs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&jd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=w_e(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===wv.Attribute&&(s===0||JJe(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&jd.VALUE_LENGTH)>>14,s!==0){if(o===Gs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==wv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&jd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~jd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Bs.NamedEntity:return this.result!==0&&(this.decodeMode!==wv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Bs.NumericDecimal:return this.emitNumericEntity(0,2);case Bs.NumericHex:return this.emitNumericEntity(0,3);case Bs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Bs.EntityStart:return 0}}}function __e(e){let t="";const n=new ZJe(e,r=>t+=GJe(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function w_e(e,t,n,r){const i=(t&jd.BRANCH_LENGTH)>>7,s=t&jd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}__e(og);__e(qJe);var Le;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Le=Le||(Le={}));var n0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(n0=n0||(n0={}));var al;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(al=al||(al={}));var we;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(we=we||(we={}));var I;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(I=I||(I={}));const eZe=new Map([[we.A,I.A],[we.ADDRESS,I.ADDRESS],[we.ANNOTATION_XML,I.ANNOTATION_XML],[we.APPLET,I.APPLET],[we.AREA,I.AREA],[we.ARTICLE,I.ARTICLE],[we.ASIDE,I.ASIDE],[we.B,I.B],[we.BASE,I.BASE],[we.BASEFONT,I.BASEFONT],[we.BGSOUND,I.BGSOUND],[we.BIG,I.BIG],[we.BLOCKQUOTE,I.BLOCKQUOTE],[we.BODY,I.BODY],[we.BR,I.BR],[we.BUTTON,I.BUTTON],[we.CAPTION,I.CAPTION],[we.CENTER,I.CENTER],[we.CODE,I.CODE],[we.COL,I.COL],[we.COLGROUP,I.COLGROUP],[we.DD,I.DD],[we.DESC,I.DESC],[we.DETAILS,I.DETAILS],[we.DIALOG,I.DIALOG],[we.DIR,I.DIR],[we.DIV,I.DIV],[we.DL,I.DL],[we.DT,I.DT],[we.EM,I.EM],[we.EMBED,I.EMBED],[we.FIELDSET,I.FIELDSET],[we.FIGCAPTION,I.FIGCAPTION],[we.FIGURE,I.FIGURE],[we.FONT,I.FONT],[we.FOOTER,I.FOOTER],[we.FOREIGN_OBJECT,I.FOREIGN_OBJECT],[we.FORM,I.FORM],[we.FRAME,I.FRAME],[we.FRAMESET,I.FRAMESET],[we.H1,I.H1],[we.H2,I.H2],[we.H3,I.H3],[we.H4,I.H4],[we.H5,I.H5],[we.H6,I.H6],[we.HEAD,I.HEAD],[we.HEADER,I.HEADER],[we.HGROUP,I.HGROUP],[we.HR,I.HR],[we.HTML,I.HTML],[we.I,I.I],[we.IMG,I.IMG],[we.IMAGE,I.IMAGE],[we.INPUT,I.INPUT],[we.IFRAME,I.IFRAME],[we.KEYGEN,I.KEYGEN],[we.LABEL,I.LABEL],[we.LI,I.LI],[we.LINK,I.LINK],[we.LISTING,I.LISTING],[we.MAIN,I.MAIN],[we.MALIGNMARK,I.MALIGNMARK],[we.MARQUEE,I.MARQUEE],[we.MATH,I.MATH],[we.MENU,I.MENU],[we.META,I.META],[we.MGLYPH,I.MGLYPH],[we.MI,I.MI],[we.MO,I.MO],[we.MN,I.MN],[we.MS,I.MS],[we.MTEXT,I.MTEXT],[we.NAV,I.NAV],[we.NOBR,I.NOBR],[we.NOFRAMES,I.NOFRAMES],[we.NOEMBED,I.NOEMBED],[we.NOSCRIPT,I.NOSCRIPT],[we.OBJECT,I.OBJECT],[we.OL,I.OL],[we.OPTGROUP,I.OPTGROUP],[we.OPTION,I.OPTION],[we.P,I.P],[we.PARAM,I.PARAM],[we.PLAINTEXT,I.PLAINTEXT],[we.PRE,I.PRE],[we.RB,I.RB],[we.RP,I.RP],[we.RT,I.RT],[we.RTC,I.RTC],[we.RUBY,I.RUBY],[we.S,I.S],[we.SCRIPT,I.SCRIPT],[we.SECTION,I.SECTION],[we.SELECT,I.SELECT],[we.SOURCE,I.SOURCE],[we.SMALL,I.SMALL],[we.SPAN,I.SPAN],[we.STRIKE,I.STRIKE],[we.STRONG,I.STRONG],[we.STYLE,I.STYLE],[we.SUB,I.SUB],[we.SUMMARY,I.SUMMARY],[we.SUP,I.SUP],[we.TABLE,I.TABLE],[we.TBODY,I.TBODY],[we.TEMPLATE,I.TEMPLATE],[we.TEXTAREA,I.TEXTAREA],[we.TFOOT,I.TFOOT],[we.TD,I.TD],[we.TH,I.TH],[we.THEAD,I.THEAD],[we.TITLE,I.TITLE],[we.TR,I.TR],[we.TRACK,I.TRACK],[we.TT,I.TT],[we.U,I.U],[we.UL,I.UL],[we.SVG,I.SVG],[we.VAR,I.VAR],[we.WBR,I.WBR],[we.XMP,I.XMP]]);function Px(e){var t;return(t=eZe.get(e))!==null&&t!==void 0?t:I.UNKNOWN}const Xe=I,tZe={[Le.HTML]:new Set([Xe.ADDRESS,Xe.APPLET,Xe.AREA,Xe.ARTICLE,Xe.ASIDE,Xe.BASE,Xe.BASEFONT,Xe.BGSOUND,Xe.BLOCKQUOTE,Xe.BODY,Xe.BR,Xe.BUTTON,Xe.CAPTION,Xe.CENTER,Xe.COL,Xe.COLGROUP,Xe.DD,Xe.DETAILS,Xe.DIR,Xe.DIV,Xe.DL,Xe.DT,Xe.EMBED,Xe.FIELDSET,Xe.FIGCAPTION,Xe.FIGURE,Xe.FOOTER,Xe.FORM,Xe.FRAME,Xe.FRAMESET,Xe.H1,Xe.H2,Xe.H3,Xe.H4,Xe.H5,Xe.H6,Xe.HEAD,Xe.HEADER,Xe.HGROUP,Xe.HR,Xe.HTML,Xe.IFRAME,Xe.IMG,Xe.INPUT,Xe.LI,Xe.LINK,Xe.LISTING,Xe.MAIN,Xe.MARQUEE,Xe.MENU,Xe.META,Xe.NAV,Xe.NOEMBED,Xe.NOFRAMES,Xe.NOSCRIPT,Xe.OBJECT,Xe.OL,Xe.P,Xe.PARAM,Xe.PLAINTEXT,Xe.PRE,Xe.SCRIPT,Xe.SECTION,Xe.SELECT,Xe.SOURCE,Xe.STYLE,Xe.SUMMARY,Xe.TABLE,Xe.TBODY,Xe.TD,Xe.TEMPLATE,Xe.TEXTAREA,Xe.TFOOT,Xe.TH,Xe.THEAD,Xe.TITLE,Xe.TR,Xe.TRACK,Xe.UL,Xe.WBR,Xe.XMP]),[Le.MATHML]:new Set([Xe.MI,Xe.MO,Xe.MN,Xe.MS,Xe.MTEXT,Xe.ANNOTATION_XML]),[Le.SVG]:new Set([Xe.TITLE,Xe.FOREIGN_OBJECT,Xe.DESC]),[Le.XLINK]:new Set,[Le.XML]:new Set,[Le.XMLNS]:new Set};function E_e(e){return e===Xe.H1||e===Xe.H2||e===Xe.H3||e===Xe.H4||e===Xe.H5||e===Xe.H6}we.STYLE,we.SCRIPT,we.XMP,we.IFRAME,we.NOEMBED,we.NOFRAMES,we.PLAINTEXT;const nZe=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const rs={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function LC(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function FT(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function rZe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function ag(e){return rZe(e)||FT(e)}function lU(e){return ag(e)||LC(e)}function x_e(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function S_e(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function iZe(e){return LC(e)||x_e(e)||S_e(e)}function qR(e){return e+32}function T_e(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function sZe(e){return e===X.EQUALS_SIGN||lU(e)}function Eoe(e){return T_e(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class oZe{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new HJe(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Cn.START_TAG,tagName:"",tagID:I.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Cn.END_TAG,tagName:"",tagID:I.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Cn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Cn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(b_e(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ke.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Px(t.tagName),t.type===Cn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ke.endTagWithAttributes),t.selfClosing&&this._err(ke.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Cn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Cn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Cn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Cn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=T_e(t)?Cn.WHITESPACE_CHARACTER:t===X.NULL?Cn.NULL_CHARACTER:Cn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Cn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=og[0];s>=0&&(s=w_e(og,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=og[s];const a=o&jd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&sZe(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[og[s]&~jd.VALUE_LENGTH]:u===1?[og[++s]]:[og[++s],og[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(ke.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(hi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(hi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(hi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(hi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(ag(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(ke.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(ke.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ke.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(ag(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(ke.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ke.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.tagName+=hi;break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(FT(t)?qR(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){ag(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){ag(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){ag(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(hi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(hi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(hi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:ag(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){ag(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(ou.SCRIPT,!1)&&Eoe(this.preprocessor.peek(ou.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ou.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(hi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(hi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(hi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(ou.SCRIPT,!1)&&Eoe(this.preprocessor.peek(ou.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<ou.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(ke.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(ke.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.name+=hi;break}default:this.currentAttr.name+=String.fromCodePoint(FT(t)?qR(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.value+=hi;break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.value+=hi;break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.value+=hi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(ke.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this._err(ke.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this._err(ke.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.data+=hi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(ou.DASH_DASH,!0)?(this._createCommentToken(ou.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(ou.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(ou.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(ou.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(ke.cdataInHtmlContent),this._createCommentToken(ou.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ke.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.data+=hi;break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(ke.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(ke.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(ke.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(FT(t))this._createDoctypeToken(String.fromCharCode(qR(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(ke.unexpectedNullCharacter),this._createDoctypeToken(hi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.name+=hi;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(FT(t)?qR(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(ou.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(ou.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ke.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(ke.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ke.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.publicId+=hi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.publicId+=hi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(ke.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ke.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(ke.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ke.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.systemId+=hi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.systemId+=hi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(ke.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(ke.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:lU(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){lU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(ke.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:LC(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ke.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){iZe(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ke.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){x_e(t)?this.charRefCode=this.charRefCode*16+t-55:S_e(t)?this.charRefCode=this.charRefCode*16+t-87:LC(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ke.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){LC(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ke.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(ke.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ke.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(g_e(this.charRefCode))this._err(ke.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(v_e(this.charRefCode))this._err(ke.noncharacterCharacterReference);else if(y_e(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(ke.controlCharacterReference);const n=nZe.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const C_e=new Set([I.DD,I.DT,I.LI,I.OPTGROUP,I.OPTION,I.P,I.RB,I.RP,I.RT,I.RTC]),xoe=new Set([...C_e,I.CAPTION,I.COLGROUP,I.TBODY,I.TD,I.TFOOT,I.TH,I.THEAD,I.TR]),WR=new Map([[I.APPLET,Le.HTML],[I.CAPTION,Le.HTML],[I.HTML,Le.HTML],[I.MARQUEE,Le.HTML],[I.OBJECT,Le.HTML],[I.TABLE,Le.HTML],[I.TD,Le.HTML],[I.TEMPLATE,Le.HTML],[I.TH,Le.HTML],[I.ANNOTATION_XML,Le.MATHML],[I.MI,Le.MATHML],[I.MN,Le.MATHML],[I.MO,Le.MATHML],[I.MS,Le.MATHML],[I.MTEXT,Le.MATHML],[I.DESC,Le.SVG],[I.FOREIGN_OBJECT,Le.SVG],[I.TITLE,Le.SVG]]),aZe=[I.H1,I.H2,I.H3,I.H4,I.H5,I.H6],uZe=[I.TR,I.TEMPLATE,I.HTML],lZe=[I.TBODY,I.TFOOT,I.THEAD,I.TEMPLATE,I.HTML],cZe=[I.TABLE,I.TEMPLATE,I.HTML],fZe=[I.TD,I.TH];class dZe{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=I.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===I.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Le.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Le.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(aZe,Le.HTML)}popUntilTableCellPopped(){this.popUntilPopped(fZe,Le.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(cZe,Le.HTML)}clearBackToTableBodyContext(){this.clearBackTo(lZe,Le.HTML)}clearBackToTableRowContext(){this.clearBackTo(uZe,Le.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===I.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===I.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(WR.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(E_e(n)&&r===Le.HTML)return!0;if(WR.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if((r===I.UL||r===I.OL)&&i===Le.HTML||WR.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Le.HTML)return!0;if(r===I.BUTTON&&i===Le.HTML||WR.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r===I.TABLE||r===I.TEMPLATE||r===I.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Le.HTML){if(n===I.TBODY||n===I.THEAD||n===I.TFOOT)return!0;if(n===I.TABLE||n===I.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Le.HTML){if(r===t)return!0;if(r!==I.OPTION&&r!==I.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;C_e.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;xoe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&xoe.has(this.currentTagId);)this.pop()}}const Z5=3;var lf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(lf=lf||(lf={}));const Soe={type:lf.Marker};class hZe{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===lf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Z5)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Z5)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Z5&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Soe)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:lf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:lf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Soe);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===lf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===lf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===lf.Element&&n.element===t)}}function Toe(e){return{nodeName:"#text",value:e,parentNode:null}}const E_={createDocument(){return{nodeName:"#document",mode:al.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};E_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(E_.isTextNode(n)){n.value+=t;return}}E_.appendChild(e,Toe(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&E_.isTextNode(r)?r.value+=t:E_.insertBefore(e,Toe(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},A_e="html",pZe="about:legacy-compat",mZe="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",I_e=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],gZe=[...I_e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],yZe=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),k_e=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],vZe=[...k_e,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function Coe(e,t){return t.some(n=>e.startsWith(n))}function bZe(e){return e.name===A_e&&e.publicId===null&&(e.systemId===null||e.systemId===pZe)}function _Ze(e){if(e.name!==A_e)return al.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===mZe)return al.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),yZe.has(n))return al.QUIRKS;let r=t===null?gZe:I_e;if(Coe(n,r))return al.QUIRKS;if(r=t===null?k_e:vZe,Coe(n,r))return al.LIMITED_QUIRKS}return al.NO_QUIRKS}const Aoe={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},wZe="definitionurl",EZe="definitionURL",xZe=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),SZe=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Le.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Le.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Le.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Le.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Le.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Le.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Le.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Le.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Le.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Le.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Le.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Le.XMLNS}]]),TZe=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),CZe=new Set([I.B,I.BIG,I.BLOCKQUOTE,I.BODY,I.BR,I.CENTER,I.CODE,I.DD,I.DIV,I.DL,I.DT,I.EM,I.EMBED,I.H1,I.H2,I.H3,I.H4,I.H5,I.H6,I.HEAD,I.HR,I.I,I.IMG,I.LI,I.LISTING,I.MENU,I.META,I.NOBR,I.OL,I.P,I.PRE,I.RUBY,I.S,I.SMALL,I.SPAN,I.STRONG,I.STRIKE,I.SUB,I.SUP,I.TABLE,I.TT,I.U,I.UL,I.VAR]);function AZe(e){const t=e.tagID;return t===I.FONT&&e.attrs.some(({name:r})=>r===n0.COLOR||r===n0.SIZE||r===n0.FACE)||CZe.has(t)}function R_e(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===wZe){e.attrs[t].name=EZe;break}}function N_e(e){for(let t=0;t<e.attrs.length;t++){const n=xZe.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function wG(e){for(let t=0;t<e.attrs.length;t++){const n=SZe.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function IZe(e){const t=TZe.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Px(e.tagName))}function kZe(e,t){return t===Le.MATHML&&(e===I.MI||e===I.MO||e===I.MN||e===I.MS||e===I.MTEXT)}function RZe(e,t,n){if(t===Le.MATHML&&e===I.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===n0.ENCODING){const i=n[r].value.toLowerCase();return i===Aoe.TEXT_HTML||i===Aoe.APPLICATION_XML}}return t===Le.SVG&&(e===I.FOREIGN_OBJECT||e===I.DESC||e===I.TITLE)}function NZe(e,t,n,r){return(!r||r===Le.HTML)&&RZe(e,t,n)||(!r||r===Le.MATHML)&&kZe(e,t)}const DZe="hidden",PZe=8,OZe=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const $Ze={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},D_e=new Set([I.TABLE,I.TBODY,I.TFOOT,I.THEAD,I.TR]),Ioe={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:E_,onParseError:null};let koe=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Ioe,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new oZe(this.options,this),this.activeFormattingElements=new hZe(this.treeAdapter),this.fragmentContextID=r?Px(this.treeAdapter.getTagName(r)):I.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new dZe(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Ioe,...n};t??(t=r.treeAdapter.createElement(we.TEMPLATE,Le.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Le.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===I.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:$Ze,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Le.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Le.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=rs.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===we.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Le.HTML))switch(this.fragmentContextID){case I.TITLE:case I.TEXTAREA:{this.tokenizer.state=rs.RCDATA;break}case I.STYLE:case I.XMP:case I.IFRAME:case I.NOEMBED:case I.NOFRAMES:case I.NOSCRIPT:{this.tokenizer.state=rs.RAWTEXT;break}case I.SCRIPT:{this.tokenizer.state=rs.SCRIPT_DATA;break}case I.PLAINTEXT:{this.tokenizer.state=rs.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Le.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Le.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(we.HTML,Le.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,I.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Cn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===I.SVG&&this.treeAdapter.getTagName(n)===we.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Le.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===I.MGLYPH||t.tagID===I.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Le.HTML)}_processToken(t){switch(t.type){case Cn.CHARACTER:{this.onCharacter(t);break}case Cn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Cn.COMMENT:{this.onComment(t);break}case Cn.DOCTYPE:{this.onDoctype(t);break}case Cn.START_TAG:{this._processStartTag(t);break}case Cn.END_TAG:{this.onEndTag(t);break}case Cn.EOF:{this.onEof(t);break}case Cn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return NZe(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===lf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(I.P),this.openElements.popUntilTagNamePopped(I.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case I.TR:{this.insertionMode=ie.IN_ROW;return}case I.TBODY:case I.THEAD:case I.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case I.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case I.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case I.TABLE:{this.insertionMode=ie.IN_TABLE;return}case I.BODY:{this.insertionMode=ie.IN_BODY;return}case I.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case I.SELECT:{this._resetInsertionModeForSelect(t);return}case I.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case I.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case I.TD:case I.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case I.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===I.TEMPLATE)break;if(r===I.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return D_e.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case I.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Le.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case I.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return tZe[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){htt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{WS(this,t);break}case ie.BEFORE_HTML:{FC(this,t);break}case ie.BEFORE_HEAD:{jC(this,t);break}case ie.IN_HEAD:{BC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{UC(this,t);break}case ie.AFTER_HEAD:{zC(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{O_e(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{e8(this,t);break}case ie.IN_TABLE_TEXT:{B_e(this,t);break}case ie.IN_COLUMN_GROUP:{cO(this,t);break}case ie.AFTER_BODY:{fO(this,t);break}case ie.AFTER_AFTER_BODY:{ID(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){dtt(this,t);return}switch(this.insertionMode){case ie.INITIAL:{WS(this,t);break}case ie.BEFORE_HTML:{FC(this,t);break}case ie.BEFORE_HEAD:{jC(this,t);break}case ie.IN_HEAD:{BC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{UC(this,t);break}case ie.AFTER_HEAD:{zC(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{e8(this,t);break}case ie.IN_COLUMN_GROUP:{cO(this,t);break}case ie.AFTER_BODY:{fO(this,t);break}case ie.AFTER_AFTER_BODY:{ID(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){cU(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{cU(this,t);break}case ie.IN_TABLE_TEXT:{GS(this,t);break}case ie.AFTER_BODY:{zZe(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{VZe(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{HZe(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,ke.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{GS(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ke.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?ptt(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{WS(this,t);break}case ie.BEFORE_HTML:{qZe(this,t);break}case ie.BEFORE_HEAD:{GZe(this,t);break}case ie.IN_HEAD:{Yf(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{XZe(this,t);break}case ie.AFTER_HEAD:{JZe(this,t);break}case ie.IN_BODY:{wa(this,t);break}case ie.IN_TABLE:{aE(this,t);break}case ie.IN_TABLE_TEXT:{GS(this,t);break}case ie.IN_CAPTION:{Xet(this,t);break}case ie.IN_COLUMN_GROUP:{SG(this,t);break}case ie.IN_TABLE_BODY:{hL(this,t);break}case ie.IN_ROW:{pL(this,t);break}case ie.IN_CELL:{Zet(this,t);break}case ie.IN_SELECT:{V_e(this,t);break}case ie.IN_SELECT_IN_TABLE:{ttt(this,t);break}case ie.IN_TEMPLATE:{rtt(this,t);break}case ie.AFTER_BODY:{stt(this,t);break}case ie.IN_FRAMESET:{ott(this,t);break}case ie.AFTER_FRAMESET:{utt(this,t);break}case ie.AFTER_AFTER_BODY:{ctt(this,t);break}case ie.AFTER_AFTER_FRAMESET:{ftt(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?mtt(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{WS(this,t);break}case ie.BEFORE_HTML:{WZe(this,t);break}case ie.BEFORE_HEAD:{YZe(this,t);break}case ie.IN_HEAD:{KZe(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{QZe(this,t);break}case ie.AFTER_HEAD:{ZZe(this,t);break}case ie.IN_BODY:{dL(this,t);break}case ie.TEXT:{Bet(this,t);break}case ie.IN_TABLE:{KA(this,t);break}case ie.IN_TABLE_TEXT:{GS(this,t);break}case ie.IN_CAPTION:{Qet(this,t);break}case ie.IN_COLUMN_GROUP:{Jet(this,t);break}case ie.IN_TABLE_BODY:{fU(this,t);break}case ie.IN_ROW:{z_e(this,t);break}case ie.IN_CELL:{ett(this,t);break}case ie.IN_SELECT:{H_e(this,t);break}case ie.IN_SELECT_IN_TABLE:{ntt(this,t);break}case ie.IN_TEMPLATE:{itt(this,t);break}case ie.AFTER_BODY:{W_e(this,t);break}case ie.IN_FRAMESET:{att(this,t);break}case ie.AFTER_FRAMESET:{ltt(this,t);break}case ie.AFTER_AFTER_BODY:{ID(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{WS(this,t);break}case ie.BEFORE_HTML:{FC(this,t);break}case ie.BEFORE_HEAD:{jC(this,t);break}case ie.IN_HEAD:{BC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{UC(this,t);break}case ie.AFTER_HEAD:{zC(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{F_e(this,t);break}case ie.TEXT:{Uet(this,t);break}case ie.IN_TABLE_TEXT:{GS(this,t);break}case ie.IN_TEMPLATE:{q_e(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{xG(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{P_e(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{e8(this,t);break}case ie.IN_TABLE_TEXT:{j_e(this,t);break}}}};function MZe(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):L_e(e,t),n}function LZe(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function FZe(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=OZe;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=jZe(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function jZe(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function BZe(e,t,n){const r=e.treeAdapter.getTagName(t),i=Px(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===I.TEMPLATE&&s===Le.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function UZe(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function EG(e,t){for(let n=0;n<PZe;n++){const r=MZe(e,t);if(!r)break;const i=LZe(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=FZe(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&BZe(e,o,s),UZe(e,i,r)}}function cU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function zZe(e,t){e._appendCommentNode(t,e.openElements.items[0])}function VZe(e,t){e._appendCommentNode(t,e.document)}function xG(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function HZe(e,t){e._setDocumentType(t);const n=t.forceQuirks?al.QUIRKS:_Ze(t);bZe(t)||e._err(t,ke.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function WS(e,t){e._err(t,ke.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,al.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function qZe(e,t){t.tagID===I.HTML?(e._insertElement(t,Le.HTML),e.insertionMode=ie.BEFORE_HEAD):FC(e,t)}function WZe(e,t){const n=t.tagID;(n===I.HTML||n===I.HEAD||n===I.BODY||n===I.BR)&&FC(e,t)}function FC(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function GZe(e,t){switch(t.tagID){case I.HTML:{wa(e,t);break}case I.HEAD:{e._insertElement(t,Le.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:jC(e,t)}}function YZe(e,t){const n=t.tagID;n===I.HEAD||n===I.BODY||n===I.HTML||n===I.BR?jC(e,t):e._err(t,ke.endTagWithoutMatchingOpenElement)}function jC(e,t){e._insertFakeElement(we.HEAD,I.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function Yf(e,t){switch(t.tagID){case I.HTML:{wa(e,t);break}case I.BASE:case I.BASEFONT:case I.BGSOUND:case I.LINK:case I.META:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case I.TITLE:{e._switchToTextParsing(t,rs.RCDATA);break}case I.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,rs.RAWTEXT):(e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case I.NOFRAMES:case I.STYLE:{e._switchToTextParsing(t,rs.RAWTEXT);break}case I.SCRIPT:{e._switchToTextParsing(t,rs.SCRIPT_DATA);break}case I.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case I.HEAD:{e._err(t,ke.misplacedStartTagForHeadElement);break}default:BC(e,t)}}function KZe(e,t){switch(t.tagID){case I.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case I.BODY:case I.BR:case I.HTML:{BC(e,t);break}case I.TEMPLATE:{bb(e,t);break}default:e._err(t,ke.endTagWithoutMatchingOpenElement)}}function bb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==I.TEMPLATE&&e._err(t,ke.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(I.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ke.endTagWithoutMatchingOpenElement)}function BC(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function XZe(e,t){switch(t.tagID){case I.HTML:{wa(e,t);break}case I.BASEFONT:case I.BGSOUND:case I.HEAD:case I.LINK:case I.META:case I.NOFRAMES:case I.STYLE:{Yf(e,t);break}case I.NOSCRIPT:{e._err(t,ke.nestedNoscriptInHead);break}default:UC(e,t)}}function QZe(e,t){switch(t.tagID){case I.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case I.BR:{UC(e,t);break}default:e._err(t,ke.endTagWithoutMatchingOpenElement)}}function UC(e,t){const n=t.type===Cn.EOF?ke.openElementsLeftAfterEof:ke.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function JZe(e,t){switch(t.tagID){case I.HTML:{wa(e,t);break}case I.BODY:{e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case I.FRAMESET:{e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET;break}case I.BASE:case I.BASEFONT:case I.BGSOUND:case I.LINK:case I.META:case I.NOFRAMES:case I.SCRIPT:case I.STYLE:case I.TEMPLATE:case I.TITLE:{e._err(t,ke.abandonedHeadElementChild),e.openElements.push(e.headElement,I.HEAD),Yf(e,t),e.openElements.remove(e.headElement);break}case I.HEAD:{e._err(t,ke.misplacedStartTagForHeadElement);break}default:zC(e,t)}}function ZZe(e,t){switch(t.tagID){case I.BODY:case I.HTML:case I.BR:{zC(e,t);break}case I.TEMPLATE:{bb(e,t);break}default:e._err(t,ke.endTagWithoutMatchingOpenElement)}}function zC(e,t){e._insertFakeElement(we.BODY,I.BODY),e.insertionMode=ie.IN_BODY,fL(e,t)}function fL(e,t){switch(t.type){case Cn.CHARACTER:{O_e(e,t);break}case Cn.WHITESPACE_CHARACTER:{P_e(e,t);break}case Cn.COMMENT:{cU(e,t);break}case Cn.START_TAG:{wa(e,t);break}case Cn.END_TAG:{dL(e,t);break}case Cn.EOF:{F_e(e,t);break}}}function P_e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function O_e(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function eet(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function tet(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function net(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_FRAMESET)}function ret(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function iet(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),E_e(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Le.HTML)}function set(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function oet(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Le.HTML),n||(e.formElement=e.openElements.current))}function aet(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===I.LI&&i===I.LI||(n===I.DD||n===I.DT)&&(i===I.DD||i===I.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==I.ADDRESS&&i!==I.DIV&&i!==I.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Le.HTML)}function uet(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.tokenizer.state=rs.PLAINTEXT}function cet(e,t){e.openElements.hasInScope(I.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(I.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1}function fet(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(we.A);n&&(EG(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function det(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function het(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(I.NOBR)&&(EG(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Le.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function pet(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function met(e,t){e.treeAdapter.getDocumentMode(e.document)!==al.QUIRKS&&e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function $_e(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function M_e(e){const t=b_e(e,n0.TYPE);return t!=null&&t.toLowerCase()===DZe}function get(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Le.HTML),M_e(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function yet(e,t){e._appendElement(t,Le.HTML),t.ackSelfClosing=!0}function vet(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._appendElement(t,Le.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function bet(e,t){t.tagName=we.IMG,t.tagID=I.IMG,$_e(e,t)}function _et(e,t){e._insertElement(t,Le.HTML),e.skipNextNewLine=!0,e.tokenizer.state=rs.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function wet(e,t){e.openElements.hasInButtonScope(I.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,rs.RAWTEXT)}function Eet(e,t){e.framesetOk=!1,e._switchToTextParsing(t,rs.RAWTEXT)}function Roe(e,t){e._switchToTextParsing(t,rs.RAWTEXT)}function xet(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Tet(e,t){e.openElements.currentTagId===I.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function Cet(e,t){e.openElements.hasInScope(I.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Le.HTML)}function Aet(e,t){e.openElements.hasInScope(I.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(I.RTC),e._insertElement(t,Le.HTML)}function Iet(e,t){e._reconstructActiveFormattingElements(),R_e(t),wG(t),t.selfClosing?e._appendElement(t,Le.MATHML):e._insertElement(t,Le.MATHML),t.ackSelfClosing=!0}function ket(e,t){e._reconstructActiveFormattingElements(),N_e(t),wG(t),t.selfClosing?e._appendElement(t,Le.SVG):e._insertElement(t,Le.SVG),t.ackSelfClosing=!0}function Noe(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Le.HTML)}function wa(e,t){switch(t.tagID){case I.I:case I.S:case I.B:case I.U:case I.EM:case I.TT:case I.BIG:case I.CODE:case I.FONT:case I.SMALL:case I.STRIKE:case I.STRONG:{det(e,t);break}case I.A:{fet(e,t);break}case I.H1:case I.H2:case I.H3:case I.H4:case I.H5:case I.H6:{iet(e,t);break}case I.P:case I.DL:case I.OL:case I.UL:case I.DIV:case I.DIR:case I.NAV:case I.MAIN:case I.MENU:case I.ASIDE:case I.CENTER:case I.FIGURE:case I.FOOTER:case I.HEADER:case I.HGROUP:case I.DIALOG:case I.DETAILS:case I.ADDRESS:case I.ARTICLE:case I.SECTION:case I.SUMMARY:case I.FIELDSET:case I.BLOCKQUOTE:case I.FIGCAPTION:{ret(e,t);break}case I.LI:case I.DD:case I.DT:{aet(e,t);break}case I.BR:case I.IMG:case I.WBR:case I.AREA:case I.EMBED:case I.KEYGEN:{$_e(e,t);break}case I.HR:{vet(e,t);break}case I.RB:case I.RTC:{Cet(e,t);break}case I.RT:case I.RP:{Aet(e,t);break}case I.PRE:case I.LISTING:{set(e,t);break}case I.XMP:{wet(e,t);break}case I.SVG:{ket(e,t);break}case I.HTML:{eet(e,t);break}case I.BASE:case I.LINK:case I.META:case I.STYLE:case I.TITLE:case I.SCRIPT:case I.BGSOUND:case I.BASEFONT:case I.TEMPLATE:{Yf(e,t);break}case I.BODY:{tet(e,t);break}case I.FORM:{oet(e,t);break}case I.NOBR:{het(e,t);break}case I.MATH:{Iet(e,t);break}case I.TABLE:{met(e,t);break}case I.INPUT:{get(e,t);break}case I.PARAM:case I.TRACK:case I.SOURCE:{yet(e,t);break}case I.IMAGE:{bet(e,t);break}case I.BUTTON:{cet(e,t);break}case I.APPLET:case I.OBJECT:case I.MARQUEE:{pet(e,t);break}case I.IFRAME:{Eet(e,t);break}case I.SELECT:{xet(e,t);break}case I.OPTION:case I.OPTGROUP:{Tet(e,t);break}case I.NOEMBED:{Roe(e,t);break}case I.FRAMESET:{net(e,t);break}case I.TEXTAREA:{_et(e,t);break}case I.NOSCRIPT:{e.options.scriptingEnabled?Roe(e,t):Noe(e,t);break}case I.PLAINTEXT:{uet(e,t);break}case I.COL:case I.TH:case I.TD:case I.TR:case I.HEAD:case I.FRAME:case I.TBODY:case I.TFOOT:case I.THEAD:case I.CAPTION:case I.COLGROUP:break;default:Noe(e,t)}}function Ret(e,t){if(e.openElements.hasInScope(I.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Net(e,t){e.openElements.hasInScope(I.BODY)&&(e.insertionMode=ie.AFTER_BODY,W_e(e,t))}function Det(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Pet(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(I.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(I.FORM):n&&e.openElements.remove(n))}function Oet(e){e.openElements.hasInButtonScope(I.P)||e._insertFakeElement(we.P,I.P),e._closePElement()}function $et(e){e.openElements.hasInListItemScope(I.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(I.LI),e.openElements.popUntilTagNamePopped(I.LI))}function Met(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Let(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Fet(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function jet(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(we.BR,I.BR),e.openElements.pop(),e.framesetOk=!1}function L_e(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==I.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function dL(e,t){switch(t.tagID){case I.A:case I.B:case I.I:case I.S:case I.U:case I.EM:case I.TT:case I.BIG:case I.CODE:case I.FONT:case I.NOBR:case I.SMALL:case I.STRIKE:case I.STRONG:{EG(e,t);break}case I.P:{Oet(e);break}case I.DL:case I.UL:case I.OL:case I.DIR:case I.DIV:case I.NAV:case I.PRE:case I.MAIN:case I.MENU:case I.ASIDE:case I.BUTTON:case I.CENTER:case I.FIGURE:case I.FOOTER:case I.HEADER:case I.HGROUP:case I.DIALOG:case I.ADDRESS:case I.ARTICLE:case I.DETAILS:case I.SECTION:case I.SUMMARY:case I.LISTING:case I.FIELDSET:case I.BLOCKQUOTE:case I.FIGCAPTION:{Det(e,t);break}case I.LI:{$et(e);break}case I.DD:case I.DT:{Met(e,t);break}case I.H1:case I.H2:case I.H3:case I.H4:case I.H5:case I.H6:{Let(e);break}case I.BR:{jet(e);break}case I.BODY:{Ret(e,t);break}case I.HTML:{Net(e,t);break}case I.FORM:{Pet(e);break}case I.APPLET:case I.OBJECT:case I.MARQUEE:{Fet(e,t);break}case I.TEMPLATE:{bb(e,t);break}default:L_e(e,t)}}function F_e(e,t){e.tmplInsertionModeStack.length>0?q_e(e,t):xG(e,t)}function Bet(e,t){var n;t.tagID===I.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Uet(e,t){e._err(t,ke.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function e8(e,t){if(D_e.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case Cn.CHARACTER:{B_e(e,t);break}case Cn.WHITESPACE_CHARACTER:{j_e(e,t);break}}else NI(e,t)}function zet(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CAPTION}function Vet(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function Het(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.COLGROUP,I.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,SG(e,t)}function qet(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Wet(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(we.TBODY,I.TBODY),e.insertionMode=ie.IN_TABLE_BODY,hL(e,t)}function Get(e,t){e.openElements.hasInTableScope(I.TABLE)&&(e.openElements.popUntilTagNamePopped(I.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Yet(e,t){M_e(t)?e._appendElement(t,Le.HTML):NI(e,t),t.ackSelfClosing=!0}function Ket(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Le.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function aE(e,t){switch(t.tagID){case I.TD:case I.TH:case I.TR:{Wet(e,t);break}case I.STYLE:case I.SCRIPT:case I.TEMPLATE:{Yf(e,t);break}case I.COL:{Het(e,t);break}case I.FORM:{Ket(e,t);break}case I.TABLE:{Get(e,t);break}case I.TBODY:case I.TFOOT:case I.THEAD:{qet(e,t);break}case I.INPUT:{Yet(e,t);break}case I.CAPTION:{zet(e,t);break}case I.COLGROUP:{Vet(e,t);break}default:NI(e,t)}}function KA(e,t){switch(t.tagID){case I.TABLE:{e.openElements.hasInTableScope(I.TABLE)&&(e.openElements.popUntilTagNamePopped(I.TABLE),e._resetInsertionMode());break}case I.TEMPLATE:{bb(e,t);break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:case I.TBODY:case I.TD:case I.TFOOT:case I.TH:case I.THEAD:case I.TR:break;default:NI(e,t)}}function NI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,fL(e,t),e.fosterParentingEnabled=n}function j_e(e,t){e.pendingCharacterTokens.push(t)}function B_e(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function GS(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)NI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const U_e=new Set([I.CAPTION,I.COL,I.COLGROUP,I.TBODY,I.TD,I.TFOOT,I.TH,I.THEAD,I.TR]);function Xet(e,t){const n=t.tagID;U_e.has(n)?e.openElements.hasInTableScope(I.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(I.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,aE(e,t)):wa(e,t)}function Qet(e,t){const n=t.tagID;switch(n){case I.CAPTION:case I.TABLE:{e.openElements.hasInTableScope(I.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(I.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===I.TABLE&&KA(e,t));break}case I.BODY:case I.COL:case I.COLGROUP:case I.HTML:case I.TBODY:case I.TD:case I.TFOOT:case I.TH:case I.THEAD:case I.TR:break;default:dL(e,t)}}function SG(e,t){switch(t.tagID){case I.HTML:{wa(e,t);break}case I.COL:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case I.TEMPLATE:{Yf(e,t);break}default:cO(e,t)}}function Jet(e,t){switch(t.tagID){case I.COLGROUP:{e.openElements.currentTagId===I.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case I.TEMPLATE:{bb(e,t);break}case I.COL:break;default:cO(e,t)}}function cO(e,t){e.openElements.currentTagId===I.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function hL(e,t){switch(t.tagID){case I.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_ROW;break}case I.TH:case I.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(we.TR,I.TR),e.insertionMode=ie.IN_ROW,pL(e,t);break}case I.CAPTION:case I.COL:case I.COLGROUP:case I.TBODY:case I.TFOOT:case I.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,aE(e,t));break}default:aE(e,t)}}function fU(e,t){const n=t.tagID;switch(t.tagID){case I.TBODY:case I.TFOOT:case I.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case I.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,KA(e,t));break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:case I.TD:case I.TH:case I.TR:break;default:KA(e,t)}}function pL(e,t){switch(t.tagID){case I.TH:case I.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Le.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case I.CAPTION:case I.COL:case I.COLGROUP:case I.TBODY:case I.TFOOT:case I.THEAD:case I.TR:{e.openElements.hasInTableScope(I.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,hL(e,t));break}default:aE(e,t)}}function z_e(e,t){switch(t.tagID){case I.TR:{e.openElements.hasInTableScope(I.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case I.TABLE:{e.openElements.hasInTableScope(I.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,fU(e,t));break}case I.TBODY:case I.TFOOT:case I.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(I.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,fU(e,t));break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:case I.TD:case I.TH:break;default:KA(e,t)}}function Zet(e,t){const n=t.tagID;U_e.has(n)?(e.openElements.hasInTableScope(I.TD)||e.openElements.hasInTableScope(I.TH))&&(e._closeTableCell(),pL(e,t)):wa(e,t)}function ett(e,t){const n=t.tagID;switch(n){case I.TD:case I.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case I.TABLE:case I.TBODY:case I.TFOOT:case I.THEAD:case I.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),z_e(e,t));break}case I.BODY:case I.CAPTION:case I.COL:case I.COLGROUP:case I.HTML:break;default:dL(e,t)}}function V_e(e,t){switch(t.tagID){case I.HTML:{wa(e,t);break}case I.OPTION:{e.openElements.currentTagId===I.OPTION&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case I.OPTGROUP:{e.openElements.currentTagId===I.OPTION&&e.openElements.pop(),e.openElements.currentTagId===I.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Le.HTML);break}case I.INPUT:case I.KEYGEN:case I.TEXTAREA:case I.SELECT:{e.openElements.hasInSelectScope(I.SELECT)&&(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode(),t.tagID!==I.SELECT&&e._processStartTag(t));break}case I.SCRIPT:case I.TEMPLATE:{Yf(e,t);break}}}function H_e(e,t){switch(t.tagID){case I.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===I.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===I.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===I.OPTGROUP&&e.openElements.pop();break}case I.OPTION:{e.openElements.currentTagId===I.OPTION&&e.openElements.pop();break}case I.SELECT:{e.openElements.hasInSelectScope(I.SELECT)&&(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode());break}case I.TEMPLATE:{bb(e,t);break}}}function ttt(e,t){const n=t.tagID;n===I.CAPTION||n===I.TABLE||n===I.TBODY||n===I.TFOOT||n===I.THEAD||n===I.TR||n===I.TD||n===I.TH?(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode(),e._processStartTag(t)):V_e(e,t)}function ntt(e,t){const n=t.tagID;n===I.CAPTION||n===I.TABLE||n===I.TBODY||n===I.TFOOT||n===I.THEAD||n===I.TR||n===I.TD||n===I.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(I.SELECT),e._resetInsertionMode(),e.onEndTag(t)):H_e(e,t)}function rtt(e,t){switch(t.tagID){case I.BASE:case I.BASEFONT:case I.BGSOUND:case I.LINK:case I.META:case I.NOFRAMES:case I.SCRIPT:case I.STYLE:case I.TEMPLATE:case I.TITLE:{Yf(e,t);break}case I.CAPTION:case I.COLGROUP:case I.TBODY:case I.TFOOT:case I.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,aE(e,t);break}case I.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,SG(e,t);break}case I.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,hL(e,t);break}case I.TD:case I.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,pL(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,wa(e,t)}}function itt(e,t){t.tagID===I.TEMPLATE&&bb(e,t)}function q_e(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(I.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):xG(e,t)}function stt(e,t){t.tagID===I.HTML?wa(e,t):fO(e,t)}function W_e(e,t){var n;if(t.tagID===I.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===I.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else fO(e,t)}function fO(e,t){e.insertionMode=ie.IN_BODY,fL(e,t)}function ott(e,t){switch(t.tagID){case I.HTML:{wa(e,t);break}case I.FRAMESET:{e._insertElement(t,Le.HTML);break}case I.FRAME:{e._appendElement(t,Le.HTML),t.ackSelfClosing=!0;break}case I.NOFRAMES:{Yf(e,t);break}}}function att(e,t){t.tagID===I.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==I.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function utt(e,t){switch(t.tagID){case I.HTML:{wa(e,t);break}case I.NOFRAMES:{Yf(e,t);break}}}function ltt(e,t){t.tagID===I.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function ctt(e,t){t.tagID===I.HTML?wa(e,t):ID(e,t)}function ID(e,t){e.insertionMode=ie.IN_BODY,fL(e,t)}function ftt(e,t){switch(t.tagID){case I.HTML:{wa(e,t);break}case I.NOFRAMES:{Yf(e,t);break}}}function dtt(e,t){t.chars=hi,e._insertCharacters(t)}function htt(e,t){e._insertCharacters(t),e.framesetOk=!1}function G_e(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Le.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function ptt(e,t){if(AZe(t))G_e(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Le.MATHML?R_e(t):r===Le.SVG&&(IZe(t),N_e(t)),wG(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function mtt(e,t){if(t.tagID===I.P||t.tagID===I.BR){G_e(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Le.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}we.AREA,we.BASE,we.BASEFONT,we.BGSOUND,we.BR,we.COL,we.EMBED,we.FRAME,we.HR,we.IMG,we.INPUT,we.KEYGEN,we.LINK,we.META,we.PARAM,we.SOURCE,we.TRACK,we.WBR;const gtt=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Doe={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function Y_e(e,t){const n=Ctt(e),r=p_e("type",{handlers:{root:ytt,element:vtt,text:btt,comment:X_e,doctype:_tt,raw:Ett},unknown:xtt}),i={parser:n?new koe(Doe):koe.getFragmentParser(void 0,Doe),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),Ox(i,Dh());const s=n?i.parser.document:i.parser.getFragment(),o=CJe(s,{file:i.options.file});return i.stitches&&yG(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function K_e(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function ytt(e,t){K_e(e.children,t)}function vtt(e,t){Stt(e,t),K_e(e.children,t),Ttt(e,t)}function btt(e,t){const n={type:Cn.CHARACTER,chars:e.value,location:DI(e)};Ox(t,Dh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function _tt(e,t){const n={type:Cn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:DI(e)};Ox(t,Dh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function wtt(e,t){t.stitches=!0;const n=Att(e);if("children"in e&&"children"in n){const r=Y_e({type:"root",children:e.children},t.options);n.children=r.children}X_e({type:"comment",value:{stitch:n}},t)}function X_e(e,t){const n=e.value,r={type:Cn.COMMENT,data:n,location:DI(e)};Ox(t,Dh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Ett(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,Q_e(t,Dh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function xtt(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))wtt(n,t);else{let r="";throw gtt.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function Ox(e,t){Q_e(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=rs.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function Q_e(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Stt(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===rs.PLAINTEXT)return;Ox(t,Dh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:Lv.html;i===Lv.html&&n==="svg"&&(i=Lv.svg);const s=NJe({...e,children:[]},{space:i===Lv.svg?"svg":"html"}),o={type:Cn.START_TAG,tagName:n,tagID:Px(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:DI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Ttt(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&jJe.includes(n)||t.parser.tokenizer.state===rs.PLAINTEXT)return;Ox(t,aL(e));const r={type:Cn.END_TAG,tagName:n,tagID:Px(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:DI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===rs.RCDATA||t.parser.tokenizer.state===rs.RAWTEXT||t.parser.tokenizer.state===rs.SCRIPT_DATA)&&(t.parser.tokenizer.state=rs.DATA)}function Ctt(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function DI(e){const t=Dh(e)||{line:void 0,column:void 0,offset:void 0},n=aL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Att(e){return"children"in e?oE({...e,children:[]}):oE(e)}function Itt(e){return function(t,n){return Y_e(t,{...e,file:n})}}function qa({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(py,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(et,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(ns,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(ns,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(ns,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(ns,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(ns,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(ns,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Ex,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Af,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Af,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(hJe,{components:n,rehypePlugins:[Itt],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function dU({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(qa,{text:n})}const ktt="https://github.com/revisit-studies/study/tree/main/public/";function Rtt({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=$m();return _.jsx(fi.Main,{children:_.jsxs(Ih,{size:"xs",px:"xs",children:[_.jsx(py,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Nh}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(et,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=Cbe(i);return _.jsx(Is,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(hy,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:i}),_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(Tse,{color:"red"}),_.jsx(et,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(dU,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(et,{c:"dimmed",children:[_.jsx(et,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(et,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(et,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Ex,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${ktt}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(qt,{align:"center",direction:"row",children:[_.jsx(Tse,{color:"orange"}),_.jsx(et,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(dU,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var J_e={exports:{}},Z_e={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PI=N;function Ntt(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dtt=typeof Object.is=="function"?Object.is:Ntt,Ptt=PI.useSyncExternalStore,Ott=PI.useRef,$tt=PI.useEffect,Mtt=PI.useMemo,Ltt=PI.useDebugValue;Z_e.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Ott(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Mtt(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,Dtt(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Ptt(e,s[0],s[1]);return $tt(function(){o.hasValue=!0,o.value=a},[a]),Ltt(a),a};J_e.exports=Z_e;var Ftt=J_e.exports,gl="default"in xP?Hi:xP,Poe=Symbol.for("react-redux-context"),Ooe=typeof globalThis<"u"?globalThis:{};function jtt(){if(!gl.createContext)return{};const e=Ooe[Poe]??(Ooe[Poe]=new Map);let t=e.get(gl.createContext);return t||(t=gl.createContext(null),e.set(gl.createContext,t)),t}var x0=jtt(),Btt=()=>{throw new Error("uSES not initialized!")};function TG(e=x0){return function(){return gl.useContext(e)}}var ewe=TG(),twe=Btt,Utt=e=>{twe=e},ztt=(e,t)=>e===t;function Vtt(e=x0){const t=e===x0?ewe:TG(e),n=(r,i={})=>{const{equalityFn:s=ztt,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();gl.useRef(!0);const d=gl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=twe(u.addNestedSub,a.getState,l||a.getState,d,s);return gl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Htt=Vtt();function qtt(e){e()}function Wtt(){let e=null,t=null;return{clear(){e=null,t=null},notify(){qtt(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var $oe={notify(){},get:()=>[]};function Gtt(e,t){let n,r=$oe,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Wtt())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=$oe)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Ytt=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ktt=typeof navigator<"u"&&navigator.product==="ReactNative",Xtt=Ytt||Ktt?gl.useLayoutEffect:gl.useEffect;function Qtt({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=gl.useMemo(()=>{const l=Gtt(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=gl.useMemo(()=>e.getState(),[e]);Xtt(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||x0;return gl.createElement(u.Provider,{value:o},n)}var Jtt=Qtt;function nwe(e=x0){const t=e===x0?ewe:TG(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Ztt=nwe();function ent(e=x0){const t=e===x0?Ztt:nwe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var rwe=ent();Utt(Ftt.useSyncExternalStoreWithSelector);function go(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var tnt=typeof Symbol=="function"&&Symbol.observable||"@@observable",Moe=tnt,t8=()=>Math.random().toString(36).substring(7).split("").join("."),nnt={INIT:`@@redux/INIT${t8()}`,REPLACE:`@@redux/REPLACE${t8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${t8()}`},dO=nnt;function CG(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function iwe(e,t,n){if(typeof e!="function")throw new Error(go(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(go(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(go(1));return n(iwe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(go(3));return i}function f(g){if(typeof g!="function")throw new Error(go(4));if(u)throw new Error(go(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(go(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!CG(g))throw new Error(go(7));if(typeof g.type>"u")throw new Error(go(8));if(typeof g.type!="string")throw new Error(go(17));if(u)throw new Error(go(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(go(10));r=g,d({type:dO.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(go(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Moe](){return this}}}return d({type:dO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Moe]:p}}function rnt(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:dO.INIT})>"u")throw new Error(go(12));if(typeof n(void 0,{type:dO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(go(13))})}function int(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{rnt(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(go(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function hO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function snt(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(go(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=hO(...a)(i.dispatch),{...i,dispatch:s}}}function ont(e){return CG(e)&&"type"in e&&typeof e.type=="string"}var swe=Symbol.for("immer-nothing"),Loe=Symbol.for("immer-draftable"),Il=Symbol.for("immer-state");function df(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var uE=Object.getPrototypeOf;function S0(e){return!!e&&!!e[Il]}function um(e){var t;return e?owe(e)||Array.isArray(e)||!!e[Loe]||!!((t=e.constructor)!=null&&t[Loe])||gL(e)||yL(e):!1}var ant=Object.prototype.constructor.toString();function owe(e){if(!e||typeof e!="object")return!1;const t=uE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===ant}function pO(e,t){mL(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function mL(e){const t=e[Il];return t?t.type_:Array.isArray(e)?1:gL(e)?2:yL(e)?3:0}function hU(e,t){return mL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function awe(e,t,n){const r=mL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function unt(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function gL(e){return e instanceof Map}function yL(e){return e instanceof Set}function ov(e){return e.copy_||e.base_}function pU(e,t){if(gL(e))return new Map(e);if(yL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=owe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Il];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(uE(e),r)}else{const r=uE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function AG(e,t=!1){return vL(e)||S0(e)||!um(e)||(mL(e)>1&&(e.set=e.add=e.clear=e.delete=lnt),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>AG(r,!0))),e}function lnt(){df(2)}function vL(e){return Object.isFrozen(e)}var cnt={};function C1(e){const t=cnt[e];return t||df(0,e),t}var XA;function uwe(){return XA}function fnt(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Foe(e,t){t&&(C1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function mU(e){gU(e),e.drafts_.forEach(dnt),e.drafts_=null}function gU(e){e===XA&&(XA=e.parent_)}function joe(e){return XA=fnt(XA,e)}function dnt(e){const t=e[Il];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Boe(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Il].modified_&&(mU(t),df(4)),um(e)&&(e=mO(t,e),t.parent_||gO(t,e)),t.patches_&&C1("Patches").generateReplacementPatches_(n[Il].base_,e,t.patches_,t.inversePatches_)):e=mO(t,n,[]),mU(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==swe?e:void 0}function mO(e,t,n){if(vL(t))return t;const r=t[Il];if(!r)return pO(t,(i,s)=>Uoe(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return gO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),pO(s,(a,u)=>Uoe(e,r,i,a,u,n,o)),gO(e,i,!1),n&&e.patches_&&C1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Uoe(e,t,n,r,i,s,o){if(S0(i)){const a=s&&t&&t.type_!==3&&!hU(t.assigned_,r)?s.concat(r):void 0,u=mO(e,i,a);if(awe(n,r,u),S0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(um(i)&&!vL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;mO(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&gO(e,i)}}function gO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&AG(t,n)}function hnt(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:uwe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=IG;n&&(i=[r],s=QA);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var IG={get(e,t){if(t===Il)return e;const n=ov(e);if(!hU(n,t))return pnt(e,n,t);const r=n[t];return e.finalized_||!um(r)?r:r===n8(e.base_,t)?(r8(e),e.copy_[t]=vU(r,e)):r},has(e,t){return t in ov(e)},ownKeys(e){return Reflect.ownKeys(ov(e))},set(e,t,n){const r=lwe(ov(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=n8(ov(e),t),s=i==null?void 0:i[Il];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(unt(n,i)&&(n!==void 0||hU(e.base_,t)))return!0;r8(e),yU(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return n8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,r8(e),yU(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ov(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){df(11)},getPrototypeOf(e){return uE(e.base_)},setPrototypeOf(){df(12)}},QA={};pO(IG,(e,t)=>{QA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});QA.deleteProperty=function(e,t){return QA.set.call(this,e,t,void 0)};QA.set=function(e,t,n){return IG.set.call(this,e[0],t,n,e[0])};function n8(e,t){const n=e[Il];return(n?ov(n):e)[t]}function pnt(e,t,n){var i;const r=lwe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function lwe(e,t){if(!(t in e))return;let n=uE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=uE(n)}}function yU(e){e.modified_||(e.modified_=!0,e.parent_&&yU(e.parent_))}function r8(e){e.copy_||(e.copy_=pU(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var mnt=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&df(6),r!==void 0&&typeof r!="function"&&df(7);let i;if(um(t)){const s=joe(this),o=vU(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?mU(s):gU(s)}return Foe(s,r),Boe(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===swe&&(i=void 0),this.autoFreeze_&&AG(i,!0),r){const s=[],o=[];C1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else df(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){um(e)||df(8),S0(e)&&(e=cwe(e));const t=joe(this),n=vU(e,void 0);return n[Il].isManual_=!0,gU(t),n}finishDraft(e,t){const n=e&&e[Il];(!n||!n.isManual_)&&df(9);const{scope_:r}=n;return Foe(r,t),Boe(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=C1("Patches").applyPatches_;return S0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function vU(e,t){const n=gL(e)?C1("MapSet").proxyMap_(e,t):yL(e)?C1("MapSet").proxySet_(e,t):hnt(e,t);return(t?t.scope_:uwe()).drafts_.push(n),n}function cwe(e){return S0(e)||df(10,e),fwe(e)}function fwe(e){if(!um(e)||vL(e))return e;const t=e[Il];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=pU(e,t.scope_.immer_.useStrictShallowCopy_)}else n=pU(e,!0);return pO(n,(r,i)=>{awe(n,r,fwe(i))}),t&&(t.finalized_=!1),n}var kl=new mnt,dwe=kl.produce;kl.produceWithPatches.bind(kl);kl.setAutoFreeze.bind(kl);kl.setUseStrictShallowCopy.bind(kl);kl.applyPatches.bind(kl);kl.createDraft.bind(kl);kl.finishDraft.bind(kl);function gnt(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function ynt(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function vnt(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var zoe=e=>Array.isArray(e)?e:[e];function bnt(e){const t=Array.isArray(e[0])?e[0]:e;return vnt(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function _nt(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var wnt=class{constructor(e){this.value=e}deref(){return this.value}},Ent=typeof WeakRef<"u"?WeakRef:wnt,xnt=0,Voe=1;function GR(){return{s:xnt,v:void 0,o:null,p:null}}function kG(e,t={}){let n=GR();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=GR(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=GR(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Voe)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Ent(c):c}return l.s=Voe,l.v=c,c}return o.clearCache=()=>{n=GR(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function hwe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),gnt(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=kG,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=zoe(d),y=zoe(p),v=bnt(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const T=_nt(v,arguments);return a=b.apply(null,T),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Snt=hwe(kG),Tnt=Object.assign((e,t=Snt)=>{ynt(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Tnt});function pwe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var Cnt=pwe(),Ant=pwe,Int=(...e)=>{const t=hwe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(S0(o)?cwe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Int(kG);var knt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?hO:hO.apply(null,arguments)};function lE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Pu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>ont(r)&&r.type===e,n}var mwe=class jT extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,jT.prototype)}static get[Symbol.species](){return jT}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new jT(...t[0].concat(this)):new jT(...t.concat(this))}};function Hoe(e){return um(e)?dwe(e,()=>{}):e}function qoe(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Pu(10));const r=n.insert(t,e);return e.set(t,r),r}function Rnt(e){return typeof e=="boolean"}var Nnt=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new mwe;return n&&(Rnt(n)?o.push(Cnt):o.push(Ant(n.extraArgument))),o},Dnt="RTK_autoBatch",gwe=e=>t=>{setTimeout(t,e)},Pnt=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:gwe(10),Ont=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Pnt:e.type==="callback"?e.queueNotification:gwe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[Dnt]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},$nt=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new mwe(e);return r&&i.push(Ont(typeof r=="object"?r:void 0)),i},Mnt=!0;function Lnt(e){const t=Nnt(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(CG(n))a=int(n);else throw new Error(Pu(1));let u;typeof r=="function"?u=r(t):u=t();let l=hO;i&&(l=knt({trace:!Mnt,...typeof i=="object"&&i}));const c=snt(...u),f=$nt(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return iwe(a,s,h)}function ywe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Pu(28));if(a in t)throw new Error(Pu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Fnt(e){return typeof e=="function"}function jnt(e,t){let[n,r,i]=ywe(t),s;if(Fnt(e))s=()=>Hoe(e());else{const a=Hoe(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(S0(c)){const h=f(c,u);return h===void 0?c:h}else{if(um(c))return dwe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Pu(9))}return d}}return c},a)}return o.getInitialState=s,o}var Bnt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Unt=(e=21)=>{let t="",n=e;for(;n--;)t+=Bnt[Math.random()*64|0];return t},znt=Symbol.for("rtk-slice-createasyncthunk");function Vnt(e,t){return`${e}/${t}`}function Hnt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[znt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Pu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Gnt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const x=typeof b=="string"?b:b.type;if(!x)throw new Error(Pu(12));if(x in l.sliceCaseReducersByType)throw new Error(Pu(13));return l.sliceCaseReducersByType[x]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],x={reducerName:b,type:Vnt(s,b),createNotation:typeof i.reducers=="function"};Knt(w)?Qnt(x,w,c,t):Ynt(x,w,c)});function f(){const[b={},w=[],x=void 0]=typeof i.extraReducers=="function"?ywe(i.extraReducers):[i.extraReducers],T={...b,...l.sliceCaseReducersByType};return jnt(i.initialState,S=>{for(let C in T)S.addCase(C,T[C]);for(let C of l.sliceMatchers)S.addMatcher(C.matcher,C.reducer);for(let C of w)S.addMatcher(C.matcher,C.reducer);x&&S.addDefaultCase(x)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function x(S){let C=S[b];return typeof C>"u"&&w&&(C=g()),C}function T(S=d){const C=qoe(h,w,{insert:()=>new WeakMap});return qoe(C,S,{insert:()=>{const A={};for(const[R,k]of Object.entries(i.selectors??{}))A[R]=qnt(k,S,g,w);return A}})}return{reducerPath:b,getSelectors:T,get selectors(){return T(x)},selectSlice:x}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...x}={}){const T=w??o;return b.inject({reducerPath:T,reducer:m},x),{...v,...y(T,!0)}}};return v}}function qnt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Wnt=Hnt();function Gnt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Ynt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Xnt(r))throw new Error(Pu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?lE(e,o):lE(e))}function Knt(e){return e._reducerDefinitionType==="asyncThunk"}function Xnt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Qnt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Pu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||YR,pending:a||YR,rejected:u||YR,settled:l||YR})}function YR(){}var Jnt=(e,t)=>{if(typeof e!="function")throw new Error(Pu(32))},RG="listenerMiddleware",Znt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=lE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Pu(21));return Jnt(s),{predicate:i,type:t,effect:s}},ert=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Znt(e);return{id:Unt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Pu(22))}}},{withTypes:()=>ert}),trt=Object.assign(lE(`${RG}/add`),{withTypes:()=>trt});lE(`${RG}/removeAll`);var nrt=Object.assign(lE(`${RG}/remove`),{withTypes:()=>nrt});function Pu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function lm(e){return e.components.flatMap(t=>typeof t=="string"?t:lm(t))}function vwe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:vwe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function bwe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+lm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+lm(e).length-1}];r+=1}else{const o=bwe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function _we(e,t){const n=bwe(e,t,0);return typeof n=="number"?null:n}function wwe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=wwe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function rrt(e,t){const n=wwe(e,t,0);return n.found?n.distance:-1}function Ewe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...Ewe(i,`${t}-${s}`))}),n}async function irt(e,t,n,r,i,s){const o=lm(n),a=Object.fromEntries(o.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),u=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),l=Object.assign({},...o.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),c={studyId:e,answers:Object.keys(i).length>0?i:a,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?l:u,iframeAnswers:{},iframeProvenance:null,metadata:r},f=Wnt({name:"storeSlice",initialState:c,reducers:{setConfig(h,p){h.config=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}}}});return{store:Lnt({reducer:f.reducer,preloadedState:c}),actions:f.actions}}const xwe=N.createContext(null);function Ph(){return N.useContext(xwe).actions}const Oh=rwe,$c=Htt;function srt(e){return $c(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function NG(){return $c(e=>lm(e.sequence))}function OI(){const{studyId:e}=sE();return`${e}`}function Mm(){const{index:e}=sE(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function yy(){const e=Mm(),t=NG();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var yO={exports:{}};yO.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",x="[object Set]",T="[object String]",S="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",R="[object DataView]",k="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",$="[object Int16Array]",L="[object Int32Array]",F="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",q="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,V=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[k]=j[O]=j[D]=j[$]=j[L]=j[F]=j[B]=j[U]=j[q]=!0,j[a]=j[u]=j[A]=j[c]=j[R]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[x]=j[T]=j[C]=!1;var H=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=H||G||Function("return this")(),pe=t&&!t.nodeType&&t,fe=pe&&!0&&e&&!e.nodeType&&e,de=fe&&fe.exports===pe,ye=de&&H.process,Ae=function(){try{var te=fe&&fe.require&&fe.require("util").types;return te||ye&&ye.binding&&ye.binding("util")}catch{}}(),ve=Ae&&Ae.isTypedArray;function rt(te,ue,Ie){switch(Ie.length){case 0:return te.call(ue);case 1:return te.call(ue,Ie[0]);case 2:return te.call(ue,Ie[0],Ie[1]);case 3:return te.call(ue,Ie[0],Ie[1],Ie[2])}return te.apply(ue,Ie)}function ze(te,ue){for(var Ie=-1,At=Array(te);++Ie<te;)At[Ie]=ue(Ie);return At}function yt(te){return function(ue){return te(ue)}}function ot(te,ue){return te==null?void 0:te[ue]}function De(te,ue){return function(Ie){return te(ue(Ie))}}var Me=Array.prototype,Ye=Function.prototype,pt=Object.prototype,Pt=ne["__core-js_shared__"],qe=Ye.toString,me=pt.hasOwnProperty,ft=function(){var te=/[^.]+$/.exec(Pt&&Pt.keys&&Pt.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),vt=pt.toString,he=qe.call(Object),Ce=RegExp("^"+qe.call(me).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=de?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;Ve&&Ve.allocUnsafe;var On=De(Object.getPrototypeOf,Object),Sr=Object.create,$n=pt.propertyIsEnumerable,ur=Me.splice,hn=ut?ut.toStringTag:void 0,xn=function(){try{var te=He(Object,"defineProperty");return te({},"",{}),te}catch{}}(),er=Ve?Ve.isBuffer:void 0,tr=Math.max,Lo=Date.now,Di=He(ne,"Map"),Sn=He(Object,"create"),Pi=function(){function te(){}return function(ue){if(!np(ue))return{};if(Sr)return Sr(ue);te.prototype=ue;var Ie=new te;return te.prototype=void 0,Ie}}();function Tr(te){var ue=-1,Ie=te==null?0:te.length;for(this.clear();++ue<Ie;){var At=te[ue];this.set(At[0],At[1])}}function cs(){this.__data__=Sn?Sn(null):{},this.size=0}function Jh(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function Zu(te){var ue=this.__data__;if(Sn){var Ie=ue[te];return Ie===r?void 0:Ie}return me.call(ue,te)?ue[te]:void 0}function id(te){var ue=this.__data__;return Sn?ue[te]!==void 0:me.call(ue,te)}function _r(te,ue){var Ie=this.__data__;return this.size+=this.has(te)?0:1,Ie[te]=Sn&&ue===void 0?r:ue,this}Tr.prototype.clear=cs,Tr.prototype.delete=Jh,Tr.prototype.get=Zu,Tr.prototype.has=id,Tr.prototype.set=_r;function xi(te){var ue=-1,Ie=te==null?0:te.length;for(this.clear();++ue<Ie;){var At=te[ue];this.set(At[0],At[1])}}function Kr(){this.__data__=[],this.size=0}function ru(te){var ue=this.__data__,Ie=Xn(ue,te);if(Ie<0)return!1;var At=ue.length-1;return Ie==At?ue.pop():ur.call(ue,Ie,1),--this.size,!0}function Ea(te){var ue=this.__data__,Ie=Xn(ue,te);return Ie<0?void 0:ue[Ie][1]}function xa(te){return Xn(this.__data__,te)>-1}function oe(te,ue){var Ie=this.__data__,At=Xn(Ie,te);return At<0?(++this.size,Ie.push([te,ue])):Ie[At][1]=ue,this}xi.prototype.clear=Kr,xi.prototype.delete=ru,xi.prototype.get=Ea,xi.prototype.has=xa,xi.prototype.set=oe;function ee(te){var ue=-1,Ie=te==null?0:te.length;for(this.clear();++ue<Ie;){var At=te[ue];this.set(At[0],At[1])}}function ae(){this.size=0,this.__data__={hash:new Tr,map:new(Di||xi),string:new Tr}}function Se(te){var ue=Ue(this,te).delete(te);return this.size-=ue?1:0,ue}function xe(te){return Ue(this,te).get(te)}function st(te){return Ue(this,te).has(te)}function St(te,ue){var Ie=Ue(this,te),At=Ie.size;return Ie.set(te,ue),this.size+=Ie.size==At?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Se,ee.prototype.get=xe,ee.prototype.has=st,ee.prototype.set=St;function Vt(te){var ue=this.__data__=new xi(te);this.size=ue.size}function Nn(){this.__data__=new xi,this.size=0}function Mn(te){var ue=this.__data__,Ie=ue.delete(te);return this.size=ue.size,Ie}function fn(te){return this.__data__.get(te)}function nr(te){return this.__data__.has(te)}function Cr(te,ue){var Ie=this.__data__;if(Ie instanceof xi){var At=Ie.__data__;if(!Di||At.length<n-1)return At.push([te,ue]),this.size=++Ie.size,this;Ie=this.__data__=new ee(At)}return Ie.set(te,ue),this.size=Ie.size,this}Vt.prototype.clear=Nn,Vt.prototype.delete=Mn,Vt.prototype.get=fn,Vt.prototype.has=nr,Vt.prototype.set=Cr;function zt(te,ue){var Ie=ep(te),At=!Ie&&iu(te),Dn=!Ie&&!At&&tp(te),wr=!Ie&&!At&&!Dn&&fR(te),zr=Ie||At||Dn||wr,Fn=zr?ze(te.length,String):[],Vr=Fn.length;for(var Xi in te)zr&&(Xi=="length"||Dn&&(Xi=="offset"||Xi=="parent")||wr&&(Xi=="buffer"||Xi=="byteLength"||Xi=="byteOffset")||Et(Xi,Vr))||Fn.push(Xi);return Fn}function rr(te,ue,Ie){(Ie!==void 0&&!ql(te[ue],Ie)||Ie===void 0&&!(ue in te))&&Si(te,ue,Ie)}function Ur(te,ue,Ie){var At=te[ue];(!(me.call(te,ue)&&ql(At,Ie))||Ie===void 0&&!(ue in te))&&Si(te,ue,Ie)}function Xn(te,ue){for(var Ie=te.length;Ie--;)if(ql(te[Ie][0],ue))return Ie;return-1}function Si(te,ue,Ie){ue=="__proto__"&&xn?xn(te,ue,{configurable:!0,enumerable:!0,value:Ie,writable:!0}):te[ue]=Ie}var Ls=Pe();function Xr(te){return te==null?te===void 0?S:y:hn&&hn in Object(te)?We(te):jo(te)}function uo(te){return su(te)&&Xr(te)==a}function Oi(te){if(!np(te)||Ln(te))return!1;var ue=NS(te)?Ce:V;return ue.test(uR(te))}function $i(te){return su(te)&&cR(te.length)&&!!j[Xr(te)]}function Fo(te){if(!np(te))return Ir(te);var ue=Ar(te),Ie=[];for(var At in te)At=="constructor"&&(ue||!me.call(te,At))||Ie.push(At);return Ie}function Sa(te,ue,Ie,At,Dn){te!==ue&&Ls(ue,function(wr,zr){if(Dn||(Dn=new Vt),np(wr))Fs(te,ue,zr,Ie,Sa,At,Dn);else{var Fn=At?At(Zh(te,zr),wr,zr+"",te,ue,Dn):void 0;Fn===void 0&&(Fn=wr),rr(te,zr,Fn)}},zy)}function Fs(te,ue,Ie,At,Dn,wr,zr){var Fn=Zh(te,Ie),Vr=Zh(ue,Ie),Xi=zr.get(Vr);if(Xi){rr(te,Ie,Xi);return}var Bo=wr?wr(Fn,Vr,Ie+"",te,ue,zr):void 0,Hy=Bo===void 0;if(Hy){var rp=ep(Vr),qb=!rp&&tp(Vr),Wb=!rp&&!qb&&fR(Vr);Bo=Vr,rp||qb||Wb?ep(Fn)?Bo=Fn:lR(Fn)?Bo=ce(Fn):qb?(Hy=!1,Bo=Y(Vr)):Wb?(Hy=!1,Bo=Z(Vr)):Bo=[]:VF(Vr)||iu(Vr)?(Bo=Fn,iu(Fn)?Bo=Uy(Fn):(!np(Fn)||NS(Fn))&&(Bo=it(Vr))):Hy=!1}Hy&&(zr.set(Vr,Bo),Dn(Bo,Vr,At,wr,zr),zr.delete(Vr)),rr(te,Ie,Bo)}function Hl(te,ue){return RS(od(te,ue,Jm),te+"")}var sd=xn?function(te,ue){return xn(te,"toString",{configurable:!0,enumerable:!1,value:Vy(ue),writable:!0})}:Jm;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Ie=se(te.buffer);return new te.constructor(Ie,te.byteOffset,te.length)}function ce(te,ue){var Ie=-1,At=te.length;for(ue||(ue=Array(At));++Ie<At;)ue[Ie]=te[Ie];return ue}function ge(te,ue,Ie,At){var Dn=!Ie;Ie||(Ie={});for(var wr=-1,zr=ue.length;++wr<zr;){var Fn=ue[wr],Vr=void 0;Vr===void 0&&(Vr=te[Fn]),Dn?Si(Ie,Fn,Vr):Ur(Ie,Fn,Vr)}return Ie}function le(te){return Hl(function(ue,Ie){var At=-1,Dn=Ie.length,wr=Dn>1?Ie[Dn-1]:void 0,zr=Dn>2?Ie[2]:void 0;for(wr=te.length>3&&typeof wr=="function"?(Dn--,wr):void 0,zr&&dn(Ie[0],Ie[1],zr)&&(wr=Dn<3?void 0:wr,Dn=1),ue=Object(ue);++At<Dn;){var Fn=Ie[At];Fn&&te(ue,Fn,At,wr)}return ue})}function Pe(te){return function(ue,Ie,At){for(var Dn=-1,wr=Object(ue),zr=At(ue),Fn=zr.length;Fn--;){var Vr=zr[++Dn];if(Ie(wr[Vr],Vr,wr)===!1)break}return ue}}function Ue(te,ue){var Ie=te.__data__;return Nt(ue)?Ie[typeof ue=="string"?"string":"hash"]:Ie.map}function He(te,ue){var Ie=ot(te,ue);return Oi(Ie)?Ie:void 0}function We(te){var ue=me.call(te,hn),Ie=te[hn];try{te[hn]=void 0;var At=!0}catch{}var Dn=vt.call(te);return At&&(ue?te[hn]=Ie:delete te[hn]),Dn}function it(te){return typeof te.constructor=="function"&&!Ar(te)?Pi(On(te)):{}}function Et(te,ue){var Ie=typeof te;return ue=ue??o,!!ue&&(Ie=="number"||Ie!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function dn(te,ue,Ie){if(!np(Ie))return!1;var At=typeof ue;return(At=="number"?Hb(Ie)&&Et(ue,Ie.length):At=="string"&&ue in Ie)?ql(Ie[ue],te):!1}function Nt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function Ln(te){return!!ft&&ft in te}function Ar(te){var ue=te&&te.constructor,Ie=typeof ue=="function"&&ue.prototype||pt;return te===Ie}function Ir(te){var ue=[];if(te!=null)for(var Ie in Object(te))ue.push(Ie);return ue}function jo(te){return vt.call(te)}function od(te,ue,Ie){return ue=tr(ue===void 0?te.length-1:ue,0),function(){for(var At=arguments,Dn=-1,wr=tr(At.length-ue,0),zr=Array(wr);++Dn<wr;)zr[Dn]=At[ue+Dn];Dn=-1;for(var Fn=Array(ue+1);++Dn<ue;)Fn[Dn]=At[Dn];return Fn[ue]=Ie(zr),rt(te,this,Fn)}}function Zh(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var RS=By(sd);function By(te){var ue=0,Ie=0;return function(){var At=Lo(),Dn=s-(At-Ie);if(Ie=At,Dn>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function uR(te){if(te!=null){try{return qe.call(te)}catch{}try{return te+""}catch{}}return""}function ql(te,ue){return te===ue||te!==te&&ue!==ue}var iu=uo(function(){return arguments}())?uo:function(te){return su(te)&&me.call(te,"callee")&&!$n.call(te,"callee")},ep=Array.isArray;function Hb(te){return te!=null&&cR(te.length)&&!NS(te)}function lR(te){return su(te)&&Hb(te)}var tp=er||hR;function NS(te){if(!np(te))return!1;var ue=Xr(te);return ue==h||ue==p||ue==l||ue==b}function cR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function np(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function su(te){return te!=null&&typeof te=="object"}function VF(te){if(!su(te)||Xr(te)!=v)return!1;var ue=On(te);if(ue===null)return!0;var Ie=me.call(ue,"constructor")&&ue.constructor;return typeof Ie=="function"&&Ie instanceof Ie&&qe.call(Ie)==he}var fR=ve?yt(ve):$i;function Uy(te){return ge(te,zy(te))}function zy(te){return Hb(te)?zt(te):Fo(te)}var dR=le(function(te,ue,Ie){Sa(te,ue,Ie)});function Vy(te){return function(){return te}}function Jm(te){return te}function hR(){return!1}e.exports=dR})(yO,yO.exports);var ort=yO.exports;const DG=jl(ort);function o1(e){return structuredClone(e)}function PG(){const{answers:e}=$c(i=>i),t=Mm(),r=`${yy()}_${t}`;return e[r]}const Swe=N.createContext(null);function art(){const e=N.useContext(Swe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function cm(){return $c(e=>e.config)}function Woe(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function urt(){const e=Mm(),t=NG(),r=`${yy()}_${e}`,{trialValidation:i,sequence:s,answers:o}=$c(w=>w),a=Oh(),{saveTrialAnswer:u,setIframeAnswers:l}=Ph(),{storageEngine:c}=ba(),f=srt(r),d=typeof e!="number"||!f,h=PG(),p=$m(),m=cm(),g=OI(),y=N.useMemo(()=>Date.now(),[]),v=art(),b=N.useCallback(()=>{if(typeof e!="number")return;const w=o1(i[r]),x=Object.values(w).reduce((D,$)=>Object.hasOwn($,"values")?{...D,...$.values}:D,{}),{provenanceGraph:T}=w,S=Date.now(),C=v&&"current"in v&&v.current?v.current.splice(0,v.current.length):[];h.endTime||(a(u({identifier:r,answer:x,startTime:y,endTime:S,provenanceGraph:T,windowEvents:C})),c&&c.saveAnswers({...o,[r]:{answer:x,startTime:y,endTime:S,provenanceGraph:T,windowEvents:C}}),a(l({})));let A=e+1;const R=_we(s,e),k=R!==null&&R.some(D=>Object.hasOwn(D.currentBlock,"skip")&&D.currentBlock.skip!==void 0),O={...o,[r]:{answer:x,startTime:y,endTime:S,provenanceGraph:T,windowEvents:C}};k&&[...R.flatMap($=>$.currentBlock.skip?$.currentBlock.skip.map(L=>({...L,firstIndex:$.firstIndex,lastIndex:$.lastIndex})):[])].some($=>{let L=!1;const F=Object.fromEntries(Object.entries(O).filter(([U])=>{const q=parseInt(U.slice(U.lastIndexOf("_")+1),10);return q>=$.firstIndex&&q<=e})),B=$.check!=="block"?Object.entries(F).filter(([U])=>U.slice(0,U.lastIndexOf("_"))===$.name):Object.entries(F);if(B.length===0)return!1;if(B.some(([U,q])=>!q))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify($,null,2)}`);if($.check==="response"||$.check==="responses"){const[U,q]=B[0];$.check==="response"?L=$.value!==q.answer[$.responseId]:L=!Woe(q.answer,U,m.components[U.slice(0,U.lastIndexOf("_"))],m)}else if($.check==="block"||$.check==="repeatedComponent"){if(B.length<$.value)return!1;const U=B.map(([V,W])=>Woe(W.answer,V,m.components[V.slice(0,V.lastIndexOf("_"))],m)),q=U.filter(V=>V).length,P=U.length-q;L=$.condition==="numCorrect"&&q===$.value||$.condition==="numIncorrect"&&P===$.value}if(L){const U=t.indexOf($.to),q=U===-1?rrt(s,$.to):-1;return A=U===-1?q:U,!0}return!1}),p(`/${g}/${A}${window.location.search}`)},[i,r,v,h,e,s,o,y,p,g,a,u,c,l,m,t]);return{isNextDisabled:d,goToNextStep:b}}function lrt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>{},onClick:r}){const{isNextDisabled:i,goToNextStep:s}=urt(),o=N.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(jn,{type:"submit",disabled:t||i,onClick:o,children:e})}function crt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const frt=typeof window<"u"?N.useLayoutEffect:N.useEffect;function co(e,t){frt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function drt(e,t){e&&crt(e),co(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),co(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),co(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),co(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),co(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),co(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),co(`mantine-form:${e}:clear-errors`,t.clearErrors),co(`mantine-form:${e}:reset`,t.reset),co(`mantine-form:${e}:validate`,t.validate),co(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),co(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),co(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),co(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),co(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),co(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),co(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),co(`mantine-form:${e}:reset-touched`,t.resetTouched)}function hrt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function bU(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function prt(e){const[t,n]=N.useState(bU(e)),r=N.useRef(t),i=N.useCallback(u=>{n(l=>{const c=bU(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=N.useCallback(()=>i({}),[]),o=N.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=N.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function Twe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function Goe(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Yoe(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=Twe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=Goe(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=Goe(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function mrt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Koe(e,t,n){typeof n.value=="object"&&(n.value=G_(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function G_(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(G_(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(G_(a),G_(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(G_(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Koe(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Koe(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Cwe(e){return typeof e!="string"?[]:e.split(".")}function Su(e,t){const n=Cwe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function bL(e,t,n){const r=Cwe(e);if(r.length===0)return n;const i=G_(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function grt(e,{from:t,to:n},r){const i=Su(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),bL(e,s,r)}function yrt(e,t,n,r){const i=Su(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),bL(e,s,r)}function vrt(e,t,n){const r=Su(e,n);return Array.isArray(r)?bL(e,r.filter((i,s)=>s!==t),n):n}function brt({$values:e,$errors:t,$status:n}){const r=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>mrt(o,a,u)),e.setValues({values:grt(o,a,e.refValues.current),updateState:!0})},[]),i=N.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Yoe(o,a,u,-1)),e.setValues({values:vrt(o,a,e.refValues.current),updateState:!0})},[]),s=N.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Yoe(o,u,l,1)),e.setValues({values:yrt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var OG=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const kD=jl(OG);function KR(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function _rt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=N.useState(t),[o,a]=N.useState(e),u=N.useRef(t),l=N.useRef(e),c=N.useCallback(x=>{const T=typeof x=="function"?x(u.current):x;u.current=T,n==="controlled"&&s(T)},[]),f=N.useCallback(x=>{const T=typeof x=="function"?x(l.current):x;l.current=T,n==="controlled"&&a(T)},[]),d=N.useCallback(()=>c({}),[]),h=x=>{const T=x?{...x,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=N.useCallback((x,T)=>{c(S=>KR(S,x)===T?S:{...S,[x]:T})},[]),m=N.useCallback((x,T)=>{f(S=>KR(S,x)===T?S:{...S,[x]:T})},[]),g=N.useCallback(x=>KR(u.current,x),[]),y=N.useCallback(x=>f(T=>{if(typeof x!="string")return T;const S=Twe(x,T);return delete S[x],kD(S,T)?T:S}),[]),v=N.useCallback(x=>{if(x){const S=Su(x,l.current);if(typeof S=="boolean")return S;const C=Su(x,r.refValues.current),A=Su(x,r.valuesSnapshot.current);return!kD(C,A)}return Object.keys(l.current).length>0?KR(l.current):!kD(r.refValues.current,r.valuesSnapshot.current)},[]),b=N.useCallback(()=>l.current,[]),w=N.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function wrt({initialValues:e,onValuesChange:t,mode:n}){const r=N.useRef(!1),[i,s]=N.useState(e||{}),o=N.useRef(i),a=N.useRef(i),u=N.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(x=>x({updatedValues:w,previousValues:v}))},[t]),l=N.useCallback(p=>{var y;const m=Su(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=bL(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=N.useCallback(p=>{a.current=p},[]),f=N.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=N.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=N.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Ert({$status:e}){const t=N.useRef({}),n=N.useCallback((i,s)=>{N.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=N.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Su(i,o.previousValues),value:Su(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Xoe(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Qoe(e){const t=bU(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function _U(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Su(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>_U(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||_U(o,t,a,i)),i},r)}function wU(e,t){return Qoe(typeof e=="function"?e(t):_U(e,t))}function XR(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=wU(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const xrt="__MANTINE_FORM_INDEX__";function Joe(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${xrt}`)):!1:!1}function Awe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=prt(r),p=wrt({initialValues:n,onValuesChange:l,mode:t}),m=_rt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=brt({$values:p,$errors:h,$status:m}),y=Ert({$status:m}),[v,b]=N.useState(0),[w,x]=N.useState({}),T=N.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(P=>P+1)},[]),S=N.useCallback(P=>{p.initialize(P,()=>t==="uncontrolled"&&b(V=>V+1))},[]),C=N.useCallback((P,V,W)=>{const j=Joe(P,a);m.clearFieldDirty(P),m.setFieldTouched(P,!0),!j&&o&&h.clearFieldError(P),p.setFieldValue({path:P,value:V,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(P),j?H=>{const G=XR(P,d,H.updatedValues);G.hasError?h.setFieldError(P,G.error):h.clearFieldError(P)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>x(H=>({...H,[P]:(H[P]||0)+1})):null]})},[l,d]),A=N.useCallback(P=>{const V=p.refValues.current;p.setValues({values:P,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Su(W,p.refValues.current),H=Su(W,V);j!==H&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:V,updatedValues:p.refValues.current}))})},[l,o]),R=N.useCallback(()=>{const P=wU(d,p.refValues.current);return h.setErrors(P.errors),P},[d]),k=N.useCallback(P=>{const V=XR(P,d,p.refValues.current);return V.hasError?h.setFieldError(P,V.error):h.clearFieldError(P),V},[d]),O=(P,{type:V="input",withError:W=!0,withFocus:j=!0,...H}={})=>{const ne={onChange:hrt(pe=>C(P,pe,{forceUpdate:!1})),"data-path":Xoe(e,P)};return W&&(ne.error=h.errorsState[P]),V==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Su(P,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Su(P,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(P,!0),ne.onBlur=()=>{if(Joe(P,u)){const pe=XR(P,d,p.refValues.current);pe.hasError?h.setFieldError(P,pe.error):h.clearFieldError(P)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:P,options:{type:V,withError:W,withFocus:j,...H},form:q}))},D=(P,V)=>W=>{W==null||W.preventDefault();const j=R();j.hasErrors?V==null||V(j.errors,p.refValues.current,W):P==null||P(c(p.refValues.current),W)},$=P=>c(P||p.refValues.current),L=N.useCallback(P=>{P.preventDefault(),T()},[]),F=N.useCallback(P=>P?!XR(P,d,p.refValues.current).hasError:!wU(d,p.refValues.current).hasErrors,[d]),B=P=>`${v}-${P}-${w[P]||0}`,U=N.useCallback(P=>document.querySelector(`[data-path="${Xoe(e,P)}"]`),[]),q={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:R,validateField:k,getInputProps:O,onSubmit:D,onReset:L,isValid:F,getTransformedValues:$,key:B,getInputNode:U};return drt(e,q),q}function Srt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Trt(e){return Srt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const Crt=new URLSearchParams(window.location.search),Art=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Crt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Irt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function krt(e,t,n){const[r,i]=N.useState(null),s=Awe({initialValues:Art(e,n),validate:Irt(e)});return N.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function _b(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function Rrt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(Lf.Group,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(qa,{text:s,required:o})})]}),description:u,...n,error:_b(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Xs,{mt:"xs",children:a.map(l=>_.jsx(Lf,{disabled:t,value:l.value,label:l.label},l.value))})})}function Nrt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(TI,{disabled:t,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(qa,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:_b(e,n,u)})}function Drt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(ki.Wrapper,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(qa,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Af,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Af.Item,{children:a},a)):_.jsx(Af.Item,{children:t.value})})})}function Iwe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(T1.Group,{name:`radioInput${e.id}`,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(qa,{text:s,required:o})})]}),description:c,...n,error:_b(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Xs,{mt:"xs",children:[u?_.jsx(et,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx(T1,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(et,{children:l})]})},e.id)}function Prt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(Iwe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Ort({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(MW,{disabled:t,placeholder:l,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(qa,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:_b(e,n)})}function $rt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=_b(e,n);return _.jsx(ki.Wrapper,{label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(qa,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(HW,{disabled:t,marks:a,...n,h:40})})}function Mrt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(s1,{disabled:t,placeholder:s,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(qa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:_b(e,n)})}function Lrt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(SW,{disabled:t,placeholder:s,label:_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(_e,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(_e,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(qa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:_b(e,n)})}function Frt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=rG(),u=cm().uiConfig.enumerateQuestions??!1,l=N.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(_e,{mb:"md",children:[e.type==="numerical"&&_.jsx(Ort,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Mrt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Lrt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(Prt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Nrt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx($rt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(Iwe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(Rrt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(Drt,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function vO({config:e,location:t,status:n,style:r}){var w;const i=Mm(),s=yy(),o=n==null?void 0:n.answer,a=e,u=N.useMemo(()=>{var x;return((x=a==null?void 0:a.response)==null?void 0:x.filter(T=>T.location?T.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Oh(),{updateResponseBlockValidation:c}=Ph(),f=krt(u,i,o||{}),[d,h]=N.useState(void 0),[p,m]=N.useState(!1),{iframeAnswers:g,iframeProvenance:y}=$c(x=>x),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return N.useEffect(()=>{const x=u.find(T=>T.type==="iframe");if(g&&x){const T=x.id;f.setValues({...f.values,[T]:g[T]})}},[g]),N.useEffect(()=>{y&&h(y)},[y]),N.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:o1(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map((x,T)=>{var S,C;return _.jsx(Hi.Fragment,{children:x.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Frt,{storedAnswer:o?o[x.id]:void 0,answer:{...f.getInputProps(x.id,{type:x.type==="checkbox"?"checkbox":"input"})},response:x,index:T+1}),v&&p&&_.jsx(et,{children:`The correct answer is: ${(C=(S=a.correctAnswer)==null?void 0:S.find(A=>A.id===x.id))==null?void 0:C.answer}`})]})},`${x.id}-${i}`)}),_.jsxs(Xs,{justify:"right",gap:"xs",children:[v&&b&&_.jsx(jn,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx(lrt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const YS="@REVISIT_COMMS",jrt={minHeight:"500px",width:"100%",border:0};function Brt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Ph(),r=Oh(),i=rwe(),s=N.useRef(null),o=N.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=yy(),u=$m(),l=N.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${YS}/${c}`,iframeId:o,message:f},"*")},[s,o]);return N.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${YS}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${YS}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${YS}/ANSWERS`:r(t(d.message));break;case`${YS}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Nh}${e.path}?trialid=${a}&id=${o}`,style:jrt})}async function $G(e){const n=await(await fetch(`${Nh}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function A1({email:e,path:t}){const n=yb();return _.jsxs(Ih,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(ns,{order:2,children:_.jsx(et,{span:!0,c:"orange",children:"404"})}),_.jsxs(et,{children:[_.jsx(et,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(If,{h:"lg"}),_.jsxs(Af,{children:[_.jsx(Af.Item,{children:_.jsx(et,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Af.Item,{children:_.jsxs(et,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Ex,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Urt={maxWidth:"100%"};function zrt({currentConfig:e}){const t={...Urt,...e.style},[n,r]=N.useState(!0),[i,s]=N.useState(!1);return N.useEffect(()=>{async function o(){const a=await $G(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(py,{mx:"auto",src:`${Nh}${e.path}`,style:t}):_.jsx(A1,{path:e.path})}function Zoe({parameters:e,setAnswer:t}){return N.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const u=a.frequencyBinCount,l=new Uint8Array(u);let c=!1;const f=()=>{if(!c){a.getByteFrequencyData(l);for(let d=0;d<u;d+=1)l[d]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(f)}};window.requestAnimationFrame(f)})},[t]),_.jsx(E0,{style:{height:"70%",width:"100%"},children:_.jsxs(Rp,{children:[_.jsx(et,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),_.jsx(et,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),_.jsx(et,{ta:"center",fw:700,children:"If you are not comfortable or able to speak English during this study, please close it now."})]})})}const Vrt=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Zoe,default:Zoe},Symbol.toStringTag,{value:"Module"})),fo={Purple:"#6D3E91",DarkOrange:"#C05917",LightTeal:"#58AC8C",Blue:"#286BBB",Maroon:"#883039",Camel:"#BC8E5A",MidnightBlue:"#00295B",DustyCoral:"#C15065",DarkOliveGreen:"#18470F",DarkCopper:"#9A5129",Peach:"#E56E5A",Mauve:"#A2559C",Turquoise:"#38AABA",OliveGreen:"#578145",Cherry:"#970046",Teal:"#00847E",RustyOrange:"#B13507",Denim:"#4C6A9C",Fuchsia:"#CF0A66",TealishGreen:"#00875E",Copper:"#B16214",DarkMauve:"#8C4569",Lime:"#3B8E1D",Coral:"#D73C50"},n_={DarkOrangeDarker:"#BE5915",PeachDarker:"#C4523E",LightTealDarker:"#2C8465",TurquoiseDarker:"#008291",CamelDarker:"#996D39",LimeDarker:"#338711"},MG=[fo.DustyCoral,n_.LightTealDarker,n_.DarkOrangeDarker,fo.Purple,fo.DarkOliveGreen,fo.Blue,fo.Maroon,n_.CamelDarker,fo.MidnightBlue,fo.DarkCopper,n_.PeachDarker,fo.Mauve,n_.TurquoiseDarker,fo.OliveGreen,fo.Cherry,fo.Teal,fo.RustyOrange,fo.Denim,fo.TealishGreen,fo.Copper,fo.DarkMauve,n_.LimeDarker,fo.Coral],Hrt=Object.freeze(Object.defineProperty({__proto__:null,OwidDistinctLinesPalette:MG},Symbol.toStringTag,{value:"Module"}));function Vp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qrt(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function $x(e){let t,n,r;e.length!==2?(t=Vp,n=(a,u)=>Vp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Vp||e===qrt?e:Wrt,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Wrt(){return 0}function kwe(e){return e===null?NaN:+e}function*Grt(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const Rwe=$x(Vp),T0=Rwe.right,Yrt=Rwe.left;$x(kwe).center;function Krt(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Xrt(e,t){const n=Krt(e,t);return n&&Math.sqrt(n)}function JA(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class za{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class EU extends Map{constructor(t,n=Pwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(xU(this,t))}has(t){return super.has(xU(this,t))}set(t,n){return super.set(Nwe(this,t),n)}delete(t){return super.delete(Dwe(this,t))}}class bO extends Set{constructor(t,n=Pwe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(xU(this,t))}add(t){return super.add(Nwe(this,t))}delete(t){return super.delete(Dwe(this,t))}}function xU({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Nwe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Dwe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Pwe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Qrt(e){return e}function Jrt(e,t,...n){return Zrt(e,Qrt,t,n)}function Zrt(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new EU,u=r[o++];let l=-1;for(const c of s){const f=u(c,++l,s),d=a.get(f);d?d.push(c):a.set(f,[c])}for(const[c,f]of a)a.set(c,i(f,o));return t(a)}(e,0)}function eit(e,t){return Array.from(t,n=>e[n])}function tit(e=Vp){if(e===Vp)return Owe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Owe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const nit=Math.sqrt(50),rit=Math.sqrt(10),iit=Math.sqrt(2);function _O(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=nit?10:s>=rit?5:s>=iit?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?_O(e,t,n*2):[a,u,l]}function SU(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?_O(t,e,n):_O(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function TU(e,t,n){return t=+t,e=+e,n=+n,_O(e,t,n)[2]}function C0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?TU(t,e,n):TU(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Hp(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function ZA(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function $we(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Owe:tit(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));$we(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(KS(e,n,t),i(e[r],s)>0&&KS(e,n,r);o<a;){for(KS(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?KS(e,n,a):(++a,KS(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function KS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function yw(e,t,n){if(e=Float64Array.from(Grt(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return ZA(e);if(t>=1)return Hp(e);var r,i=(r-1)*t,s=Math.floor(i),o=Hp($we(e,s).subarray(0,s+1)),a=ZA(e.subarray(s+1));return o+(a-o)*(i-s)}}function Mwe(e,t,n=kwe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function sit(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Lwe(e,t){return yw(e,.5,t)}function*oit(e){for(const t of e)yield*t}function Fwe(e){return Array.from(oit(e))}function yl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function jwe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function ait(e,...t){e=new bO(e),t=t.map(uit);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function uit(e){return e instanceof bO?e:new bO(e)}function lit(...e){const t=new bO;for(const n of e)for(const r of n)t.add(r);return t}var cit={value:()=>{}};function Bwe(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new RD(n)}function RD(e){this._=e}function fit(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}RD.prototype=Bwe.prototype={constructor:RD,on:function(e,t){var n=this._,r=fit(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=dit(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=eae(n[i],e.name,t);else if(t==null)for(i in n)n[i]=eae(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new RD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function dit(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function eae(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=cit,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}function Mx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function $I(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vy(){}var I1=.7,cE=1/I1,vw="\\s*([+-]?\\d+)\\s*",e2="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",hit=/^#([0-9a-f]{3,8})$/,pit=new RegExp(`^rgb\\(${vw},${vw},${vw}\\)$`),mit=new RegExp(`^rgb\\(${Yd},${Yd},${Yd}\\)$`),git=new RegExp(`^rgba\\(${vw},${vw},${vw},${e2}\\)$`),yit=new RegExp(`^rgba\\(${Yd},${Yd},${Yd},${e2}\\)$`),vit=new RegExp(`^hsl\\(${e2},${Yd},${Yd}\\)$`),bit=new RegExp(`^hsla\\(${e2},${Yd},${Yd},${e2}\\)$`),tae={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mx(vy,t2,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:nae,formatHex:nae,formatHex8:_it,formatHsl:wit,formatRgb:rae,toString:rae});function nae(){return this.rgb().formatHex()}function _it(){return this.rgb().formatHex8()}function wit(){return Uwe(this).formatHsl()}function rae(){return this.rgb().formatRgb()}function t2(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=hit.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?iae(t):n===3?new Qs(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?QR(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?QR(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pit.exec(e))?new Qs(t[1],t[2],t[3],1):(t=mit.exec(e))?new Qs(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=git.exec(e))?QR(t[1],t[2],t[3],t[4]):(t=yit.exec(e))?QR(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vit.exec(e))?aae(t[1],t[2]/100,t[3]/100,1):(t=bit.exec(e))?aae(t[1],t[2]/100,t[3]/100,t[4]):tae.hasOwnProperty(e)?iae(tae[e]):e==="transparent"?new Qs(NaN,NaN,NaN,0):null}function iae(e){return new Qs(e>>16&255,e>>8&255,e&255,1)}function QR(e,t,n,r){return r<=0&&(e=t=n=NaN),new Qs(e,t,n,r)}function LG(e){return e instanceof vy||(e=t2(e)),e?(e=e.rgb(),new Qs(e.r,e.g,e.b,e.opacity)):new Qs}function A0(e,t,n,r){return arguments.length===1?LG(e):new Qs(e,t,n,r??1)}function Qs(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Mx(Qs,A0,$I(vy,{brighter(e){return e=e==null?cE:Math.pow(cE,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?I1:Math.pow(I1,e),new Qs(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qs(a1(this.r),a1(this.g),a1(this.b),wO(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sae,formatHex:sae,formatHex8:Eit,formatRgb:oae,toString:oae}));function sae(){return`#${Fv(this.r)}${Fv(this.g)}${Fv(this.b)}`}function Eit(){return`#${Fv(this.r)}${Fv(this.g)}${Fv(this.b)}${Fv((isNaN(this.opacity)?1:this.opacity)*255)}`}function oae(){const e=wO(this.opacity);return`${e===1?"rgb(":"rgba("}${a1(this.r)}, ${a1(this.g)}, ${a1(this.b)}${e===1?")":`, ${e})`}`}function wO(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function a1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Fv(e){return e=a1(e),(e<16?"0":"")+e.toString(16)}function aae(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hf(e,t,n,r)}function Uwe(e){if(e instanceof hf)return new hf(e.h,e.s,e.l,e.opacity);if(e instanceof vy||(e=t2(e)),!e)return new hf;if(e instanceof hf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new hf(o,a,u,e.opacity)}function EO(e,t,n,r){return arguments.length===1?Uwe(e):new hf(e,t,n,r??1)}function hf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Mx(hf,EO,$I(vy,{brighter(e){return e=e==null?cE:Math.pow(cE,e),new hf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?I1:Math.pow(I1,e),new hf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Qs(i8(e>=240?e-240:e+120,i,r),i8(e,i,r),i8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new hf(uae(this.h),JR(this.s),JR(this.l),wO(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wO(this.opacity);return`${e===1?"hsl(":"hsla("}${uae(this.h)}, ${JR(this.s)*100}%, ${JR(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uae(e){return e=(e||0)%360,e<0?e+360:e}function JR(e){return Math.max(0,Math.min(1,e||0))}function i8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const zwe=Math.PI/180,Vwe=180/Math.PI,xO=18,Hwe=.96422,qwe=1,Wwe=.82521,Gwe=4/29,bw=6/29,Ywe=3*bw*bw,xit=bw*bw*bw;function Kwe(e){if(e instanceof Kd)return new Kd(e.l,e.a,e.b,e.opacity);if(e instanceof Np)return Xwe(e);e instanceof Qs||(e=LG(e));var t=u8(e.r),n=u8(e.g),r=u8(e.b),i=s8((.2225045*t+.7168786*n+.0606169*r)/qwe),s,o;return t===n&&n===r?s=o=i:(s=s8((.4360747*t+.3850649*n+.1430804*r)/Hwe),o=s8((.0139322*t+.0971045*n+.7141733*r)/Wwe)),new Kd(116*i-16,500*(s-i),200*(i-o),e.opacity)}function SO(e,t,n,r){return arguments.length===1?Kwe(e):new Kd(e,t,n,r??1)}function Kd(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Mx(Kd,SO,$I(vy,{brighter(e){return new Kd(this.l+xO*(e??1),this.a,this.b,this.opacity)},darker(e){return new Kd(this.l-xO*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Hwe*o8(t),e=qwe*o8(e),n=Wwe*o8(n),new Qs(a8(3.1338561*t-1.6168667*e-.4906146*n),a8(-.9787684*t+1.9161415*e+.033454*n),a8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function s8(e){return e>xit?Math.pow(e,1/3):e/Ywe+Gwe}function o8(e){return e>bw?e*e*e:Ywe*(e-Gwe)}function a8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function u8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Sit(e){if(e instanceof Np)return new Np(e.h,e.c,e.l,e.opacity);if(e instanceof Kd||(e=Kwe(e)),e.a===0&&e.b===0)return new Np(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Vwe;return new Np(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function TO(e,t,n,r){return arguments.length===1?Sit(e):new Np(e,t,n,r??1)}function Np(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Xwe(e){if(isNaN(e.h))return new Kd(e.l,0,0,e.opacity);var t=e.h*zwe;return new Kd(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Mx(Np,TO,$I(vy,{brighter(e){return new Np(this.h,this.c,this.l+xO*(e??1),this.opacity)},darker(e){return new Np(this.h,this.c,this.l-xO*(e??1),this.opacity)},rgb(){return Xwe(this).rgb()}}));var Qwe=-.14861,FG=1.78277,jG=-.29227,_L=-.90649,n2=1.97294,lae=n2*_L,cae=n2*FG,fae=FG*jG-_L*Qwe;function Tit(e){if(e instanceof u1)return new u1(e.h,e.s,e.l,e.opacity);e instanceof Qs||(e=LG(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(fae*r+lae*t-cae*n)/(fae+lae-cae),s=r-i,o=(n2*(n-i)-jG*s)/_L,a=Math.sqrt(o*o+s*s)/(n2*i*(1-i)),u=a?Math.atan2(o,s)*Vwe-120:NaN;return new u1(u<0?u+360:u,a,i,e.opacity)}function CU(e,t,n,r){return arguments.length===1?Tit(e):new u1(e,t,n,r??1)}function u1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Mx(u1,CU,$I(vy,{brighter(e){return e=e==null?cE:Math.pow(cE,e),new u1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?I1:Math.pow(I1,e),new u1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*zwe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Qs(255*(t+n*(Qwe*r+FG*i)),255*(t+n*(jG*r+_L*i)),255*(t+n*(n2*r)),this.opacity)}}));function Jwe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function Zwe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return Jwe((n-r/t)*t,o,i,s,a)}}function eEe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return Jwe((n-r/t)*t,i,s,o,a)}}const wL=e=>()=>e;function tEe(e,t){return function(n){return e+n*t}}function Cit(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function EL(e,t){var n=t-e;return n?tEe(e,n>180||n<-180?n-360*Math.round(n/360):n):wL(isNaN(e)?t:e)}function Ait(e){return(e=+e)==1?Js:function(t,n){return n-t?Cit(t,n,e):wL(isNaN(t)?n:t)}}function Js(e,t){var n=t-e;return n?tEe(e,n):wL(isNaN(e)?t:e)}const AU=function e(t){var n=Ait(t);function r(i,s){var o=n((i=A0(i)).r,(s=A0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=Js(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function nEe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=A0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Iit=nEe(Zwe),kit=nEe(eEe);function BG(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function rEe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rit(e,t){return(rEe(t)?BG:iEe)(e,t)}function iEe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=by(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function sEe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function cf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function oEe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=by(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var IU=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,l8=new RegExp(IU.source,"g");function Nit(e){return function(){return e}}function Dit(e){return function(t){return e(t)+""}}function aEe(e,t){var n=IU.lastIndex=l8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=IU.exec(e))&&(i=l8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:cf(r,i)})),n=l8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Dit(u[0].x):Nit(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function by(e,t){var n=typeof t,r;return t==null||n==="boolean"?wL(t):(n==="number"?cf:n==="string"?(r=t2(t))?(t=r,AU):aEe:t instanceof t2?AU:t instanceof Date?sEe:rEe(t)?BG:Array.isArray(t)?iEe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?oEe:cf)(e,t)}function Pit(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Oit(e,t){var n=EL(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function MI(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var dae=180/Math.PI,kU={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uEe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*dae,skewX:Math.atan(u)*dae,scaleX:o,scaleY:a}}var ZR;function $it(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?kU:uEe(t.a,t.b,t.c,t.d,t.e,t.f)}function Mit(e){return e==null||(ZR||(ZR=document.createElementNS("http://www.w3.org/2000/svg","g")),ZR.setAttribute("transform",e),!(e=ZR.transform.baseVal.consolidate()))?kU:(e=e.matrix,uEe(e.a,e.b,e.c,e.d,e.e,e.f))}function lEe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:cf(l,f)},{i:m-2,x:cf(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:cf(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:cf(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:cf(l,f)},{i:m-2,x:cf(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var Lit=lEe($it,"px, ","px)","deg)"),Fit=lEe(Mit,", ",")",")"),jit=1e-12;function hae(e){return((e=Math.exp(e))+1/e)/2}function Bit(e){return((e=Math.exp(e))-1/e)/2}function Uit(e){return((e=Math.exp(2*e))-1)/(e+1)}const zit=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<jit)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),x=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(w*w+1)-w);y=(T-x)/t,g=function(S){var C=S*y,A=hae(x),R=l/(n*v)*(A*Uit(t*C+x)-Bit(x));return[a+R*h,u+R*p,l*A/hae(t*C+x)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function cEe(e){return function(t,n){var r=e((t=EO(t)).h,(n=EO(n)).h),i=Js(t.s,n.s),s=Js(t.l,n.l),o=Js(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Vit=cEe(EL);var Hit=cEe(Js);function qit(e,t){var n=Js((e=SO(e)).l,(t=SO(t)).l),r=Js(e.a,t.a),i=Js(e.b,t.b),s=Js(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function fEe(e){return function(t,n){var r=e((t=TO(t)).h,(n=TO(n)).h),i=Js(t.c,n.c),s=Js(t.l,n.l),o=Js(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Wit=fEe(EL);var Git=fEe(Js);function dEe(e){return function t(n){n=+n;function r(i,s){var o=e((i=CU(i)).h,(s=CU(s)).h),a=Js(i.s,s.s),u=Js(i.l,s.l),l=Js(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Yit=dEe(EL);var Kit=dEe(Js);function UG(e,t){t===void 0&&(t=e,e=by);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Xit(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Qit=Object.freeze(Object.defineProperty({__proto__:null,interpolate:by,interpolateArray:Rit,interpolateBasis:Zwe,interpolateBasisClosed:eEe,interpolateCubehelix:Yit,interpolateCubehelixLong:Kit,interpolateDate:sEe,interpolateDiscrete:Pit,interpolateHcl:Wit,interpolateHclLong:Git,interpolateHsl:Vit,interpolateHslLong:Hit,interpolateHue:Oit,interpolateLab:qit,interpolateNumber:cf,interpolateNumberArray:BG,interpolateObject:oEe,interpolateRgb:AU,interpolateRgbBasis:Iit,interpolateRgbBasisClosed:kit,interpolateRound:MI,interpolateString:aEe,interpolateTransformCss:Lit,interpolateTransformSvg:Fit,interpolateZoom:zit,piecewise:UG,quantize:Xit},Symbol.toStringTag,{value:"Module"}));var fE=0,BT=0,XS=0,hEe=1e3,CO,UT,AO=0,k1=0,xL=0,r2=typeof performance=="object"&&performance.now?performance:Date,pEe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function zG(){return k1||(pEe(Jit),k1=r2.now()+xL)}function Jit(){k1=0}function IO(){this._call=this._time=this._next=null}IO.prototype=mEe.prototype={constructor:IO,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?zG():+n)+(t==null?0:+t),!this._next&&UT!==this&&(UT?UT._next=this:CO=this,UT=this),this._call=e,this._time=n,RU()},stop:function(){this._call&&(this._call=null,this._time=1/0,RU())}};function mEe(e,t,n){var r=new IO;return r.restart(e,t,n),r}function Zit(){zG(),++fE;for(var e=CO,t;e;)(t=k1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fE}function pae(){k1=(AO=r2.now())+xL,fE=BT=0;try{Zit()}finally{fE=0,tst(),k1=0}}function est(){var e=r2.now(),t=e-AO;t>hEe&&(xL-=t,AO=e)}function tst(){for(var e,t=CO,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:CO=n);UT=e,RU(r)}function RU(e){if(!fE){BT&&(BT=clearTimeout(BT));var t=e-k1;t>24?(e<1/0&&(BT=setTimeout(pae,e-r2.now()-xL)),XS&&(XS=clearInterval(XS))):(XS||(AO=r2.now(),XS=setInterval(est,hEe)),fE=1,pEe(pae))}}function nst(e,t,n){var r=new IO,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?zG():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}const NU=Math.PI,DU=2*NU,av=1e-6,rst=DU-av;function gEe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function ist(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return gEe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let VG=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?gEe:ist(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>av)if(!(Math.abs(f*u-l*c)>av)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((NU-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,x=b/y;Math.abs(w-1)>av&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+x*u},${this._y1=n+x*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>av||Math.abs(this._y1-c)>av)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%DU+DU),d>rst?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>av&&this._append`A${r},${r},0,${+(d>=NU)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function SL(){return new VG}SL.prototype=VG.prototype;const qp=11102230246251565e-32,qo=134217729,sst=(3+8*qp)*qp;function c8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function ost(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function LI(e){return new Float64Array(e)}const ast=(3+16*qp)*qp,ust=(2+12*qp)*qp,lst=(9+64*qp)*qp*qp,r_=LI(4),mae=LI(8),gae=LI(12),yae=LI(16),Ca=LI(4);function cst(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,x,T,S,C;const A=e-i,R=n-i,k=t-s,O=r-s;w=A*O,d=qo*A,h=d-(d-A),p=A-h,d=qo*O,m=d-(d-O),g=O-m,x=p*g-(w-h*m-p*m-h*g),T=k*R,d=qo*k,h=d-(d-k),p=k-h,d=qo*R,m=d-(d-R),g=R-m,S=p*g-(T-h*m-p*m-h*g),y=x-S,f=x-y,r_[0]=x-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,r_[1]=b-(y+f)+(f-T),C=v+y,f=C-v,r_[2]=v-(C-f)+(y-f),r_[3]=C;let D=ost(4,r_),$=ust*o;if(D>=$||-D>=$||(f=e-A,a=e-(A+f)+(f-i),f=n-R,l=n-(R+f)+(f-i),f=t-k,u=t-(k+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=lst*o+sst*Math.abs(D),D+=A*c+O*a-(k*l+R*u),D>=$||-D>=$))return D;w=a*O,d=qo*a,h=d-(d-a),p=a-h,d=qo*O,m=d-(d-O),g=O-m,x=p*g-(w-h*m-p*m-h*g),T=u*R,d=qo*u,h=d-(d-u),p=u-h,d=qo*R,m=d-(d-R),g=R-m,S=p*g-(T-h*m-p*m-h*g),y=x-S,f=x-y,Ca[0]=x-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ca[1]=b-(y+f)+(f-T),C=v+y,f=C-v,Ca[2]=v-(C-f)+(y-f),Ca[3]=C;const L=c8(4,r_,4,Ca,mae);w=A*c,d=qo*A,h=d-(d-A),p=A-h,d=qo*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),T=k*l,d=qo*k,h=d-(d-k),p=k-h,d=qo*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=x-S,f=x-y,Ca[0]=x-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ca[1]=b-(y+f)+(f-T),C=v+y,f=C-v,Ca[2]=v-(C-f)+(y-f),Ca[3]=C;const F=c8(L,mae,4,Ca,gae);w=a*c,d=qo*a,h=d-(d-a),p=a-h,d=qo*c,m=d-(d-c),g=c-m,x=p*g-(w-h*m-p*m-h*g),T=u*l,d=qo*u,h=d-(d-u),p=u-h,d=qo*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=x-S,f=x-y,Ca[0]=x-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ca[1]=b-(y+f)+(f-T),C=v+y,f=C-v,Ca[2]=v-(C-f)+(y-f),Ca[3]=C;const B=c8(F,gae,4,Ca,yae);return yae[B-1]}function eN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=ast*l?u:-cst(e,t,n,r,i,s,l)}const vae=Math.pow(2,-52),tN=new Uint32Array(512);class kO{static from(t,n=mst,r=gst){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new kO(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const R=t[2*A],k=t[2*A+1];R<a&&(a=R),k<u&&(u=k),R>l&&(l=R),k>c&&(c=k),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,R=1/0;A<o;A++){const k=f8(f,d,t[2*A],t[2*A+1]);k<R&&(h=A,R=k)}const g=t[2*h],y=t[2*h+1];for(let A=0,R=1/0;A<o;A++){if(A===h)continue;const k=f8(g,y,t[2*A],t[2*A+1]);k<R&&k>0&&(p=A,R=k)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const R=hst(g,y,v,b,t[2*A],t[2*A+1]);R<w&&(m=A,w=R)}let x=t[2*m],T=t[2*m+1];if(w===1/0){for(let k=0;k<o;k++)this._dists[k]=t[2*k]-t[0]||t[2*k+1]-t[1];Y_(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let R=0;for(let k=0,O=-1/0;k<o;k++){const D=this._ids[k],$=this._dists[D];$>O&&(A[R++]=D,O=$)}this.hull=A.subarray(0,R),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(eN(g,y,v,b,x,T)<0){const A=p,R=v,k=b;p=m,v=x,b=T,m=A,x=R,T=k}const S=pst(g,y,v,b,x,T);this._cx=S.x,this._cy=S.y;for(let A=0;A<o;A++)this._dists[A]=f8(t[2*A],t[2*A+1],S.x,S.y);Y_(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(x,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,R,k;A<this._ids.length;A++){const O=this._ids[A],D=t[2*O],$=t[2*O+1];if(A>0&&Math.abs(D-R)<=vae&&Math.abs($-k)<=vae||(R=D,k=$,O===h||O===p||O===m))continue;let L=0;for(let P=0,V=this._hashKey(D,$);P<this._hashSize&&(L=s[(V+P)%this._hashSize],!(L!==-1&&L!==r[L]));P++);L=n[L];let F=L,B;for(;B=r[F],eN(D,$,t[2*F],t[2*F+1],t[2*B],t[2*B+1])>=0;)if(F=B,F===L){F=-1;break}if(F===-1)continue;let U=this._addTriangle(F,O,r[F],-1,-1,i[F]);i[O]=this._legalize(U+2),i[F]=U,C++;let q=r[F];for(;B=r[q],eN(D,$,t[2*q],t[2*q+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(q,O,B,i[O],-1,i[q]),i[O]=this._legalize(U+2),r[q]=q,C--,q=B;if(F===L)for(;B=n[F],eN(D,$,t[2*B],t[2*B+1],t[2*F],t[2*F+1])<0;)U=this._addTriangle(B,O,F,-1,i[F],i[B]),this._legalize(U+2),i[B]=U,r[F]=F,C--,F=B;this._hullStart=n[O]=F,r[F]=n[q]=O,r[O]=q,s[this._hashKey(D,$)]=O,s[this._hashKey(t[2*F],t[2*F+1])]=F}this.hull=new Uint32Array(C);for(let A=0,R=this._hullStart;A<C;A++)this.hull[A]=R,R=r[R];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(fst(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=tN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(dst(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<tN.length&&(tN[s++]=v)}else{if(s===0)break;t=tN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function fst(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function f8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function dst(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function hst(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function pst(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Y_(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;QS(e,i,s),t[e[n]]>t[e[r]]&&QS(e,n,r),t[e[s]]>t[e[r]]&&QS(e,s,r),t[e[n]]>t[e[s]]&&QS(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;QS(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Y_(e,t,s,r),Y_(e,t,n,o-1)):(Y_(e,t,n,o-1),Y_(e,t,s,r))}}function QS(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function mst(e){return e[0]}function gst(e){return e[1]}const bae=1e-6;class jv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>bae||Math.abs(this._y1-s)>bae)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class PU{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let yst=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,x=r[m+1]*2,T=r[m+2]*2,S=t[w],C=t[w+1],A=t[x],R=t[x+1],k=t[T],O=t[T+1],D=A-S,$=R-C,L=k-S,F=O-C,B=(D*F-$*L)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const q of n)s+=t[q*2],o+=t[q*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-S)*F-(o-C)*L);v=(S+k)/2-U*F,b=(C+O)/2+U*L}else{const U=1/B,q=D*D+$*$,P=L*L+F*F;v=S+(F*q-$*P)*U,b=C+(D*P-L*q)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new jv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new jv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new jv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new PU;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const vst=2*Math.PI,i_=Math.pow;function bst(e){return e[0]}function _st(e){return e[1]}function wst(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Est(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class HG{static from(t,n=bst,r=_st,i){return new HG("length"in t?xst(t,n,r,i):Float64Array.from(Sst(t,n,r,i)))}constructor(t){this._delaunator=new kO(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&wst(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Est(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new kO(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new yst(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=i_(n-l[t*2],2)+i_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=i_(n-l[p*2],2)+i_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&i_(n-l[h*2],2)+i_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new jv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new jv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,vst)}return r&&r.value()}renderHull(t){const n=t==null?t=new jv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new PU;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new jv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new PU;return this.renderTriangle(t,n),n.value()}}function xst(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Sst(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var _ae={},d8={},h8=34,JS=10,p8=13;function yEe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Tst(e,t){var n=yEe(e);return function(r,i){return t(n(r),i,e)}}function wae(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function lu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Cst(e){return e<0?"-"+lu(-e,6):e>9999?"+"+lu(e,6):lu(e,4)}function Ast(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Cst(e.getUTCFullYear())+"-"+lu(e.getUTCMonth()+1,2)+"-"+lu(e.getUTCDate(),2)+(i?"T"+lu(t,2)+":"+lu(n,2)+":"+lu(r,2)+"."+lu(i,3)+"Z":r?"T"+lu(t,2)+":"+lu(n,2)+":"+lu(r,2)+"Z":n||t?"T"+lu(t,2)+":"+lu(n,2)+"Z":"")}function vEe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Tst(g,d):yEe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===JS&&--p,f.charCodeAt(p-1)===p8&&--p;function w(){if(v)return d8;if(b)return b=!1,_ae;var T,S=m,C;if(f.charCodeAt(S)===h8){for(;m++<p&&f.charCodeAt(m)!==h8||f.charCodeAt(++m)===h8;);return(T=m)>=p?v=!0:(C=f.charCodeAt(m++))===JS?b=!0:C===p8&&(b=!0,f.charCodeAt(m)===JS&&++m),f.slice(S+1,T-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(T=m++))===JS)b=!0;else if(C===p8)b=!0,f.charCodeAt(m)===JS&&++m;else if(C!==n)continue;return f.slice(S,T)}return v=!0,f.slice(S,p)}for(;(y=w())!==d8;){for(var x=[];y!==_ae&&y!==d8;)x.push(y),y=w();d&&(x=d(x,g++))==null||h.push(x)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=wae(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=wae(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Ast(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Ist=vEe(","),kst=Ist.parse;function Rst(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Nst(e,t){return fetch(e,t).then(Rst)}function Dst(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Nst(t,n).then(function(i){return e(i,r)})}}var Pst=Dst(kst);function Ost(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function $st(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return bEe(this.cover(t,n),t,n,e)}function bEe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Mst(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)bEe(this,o[n],a[n],e[n]);return this}function Lst(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Fst(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function jst(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ma(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Bst(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Ma(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Ma(h[3],g,y,u,l),new Ma(h[2],o,y,g,l),new Ma(h[1],g,a,u,y),new Ma(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var x=Math.sqrt(n=w);i=e-x,s=t-x,c=e+x,f=t+x,r=h.data}}return r}function Ust(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function zst(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Vst(){return this._root}function Hst(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function qst(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ma(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ma(i,l,c,a,u)),(i=r[2])&&t.push(new Ma(i,s,c,l,u)),(i=r[1])&&t.push(new Ma(i,l,o,a,c)),(i=r[0])&&t.push(new Ma(i,s,o,l,c))}return this}function Wst(e){var t=[],n=[],r;for(this._root&&t.push(new Ma(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Ma(s,o,a,c,f)),(s=i[1])&&t.push(new Ma(s,c,a,u,f)),(s=i[2])&&t.push(new Ma(s,o,f,c,l)),(s=i[3])&&t.push(new Ma(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Gst(e){return e[0]}function Yst(e){return arguments.length?(this._x=e,this):this._x}function Kst(e){return e[1]}function Xst(e){return arguments.length?(this._y=e,this):this._y}function qG(e,t,n){var r=new WG(t??Gst,n??Kst,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function WG(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Eae(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Za=qG.prototype=WG.prototype;Za.copy=function(){var e=new WG(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Eae(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Eae(r));return e};Za.add=$st;Za.addAll=Mst;Za.cover=Lst;Za.data=Fst;Za.extent=jst;Za.find=Bst;Za.remove=Ust;Za.removeAll=zst;Za.root=Vst;Za.size=Hst;Za.visit=qst;Za.visitAfter=Wst;Za.x=Yst;Za.y=Xst;function ja(e){return function(){return e}}function Og(e){return(e()-.5)*1e-6}function Qst(e){return e.x+e.vx}function Jst(e){return e.y+e.vy}function Zst(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=ja(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=qG(t,Qst,Jst).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,x,T,S){var C=b.data,A=b.r,R=m+A;if(C){if(C.index>d.index){var k=h-C.x-C.vx,O=p-C.y-C.vy,D=k*k+O*O;D<R*R&&(k===0&&(k=Og(r),D+=k*k),O===0&&(O=Og(r),D+=O*O),D=(R-(D=Math.sqrt(D)))/D*i,d.vx+=(k*=D)*(R=(A*=A)/(g+A)),d.vy+=(O*=D)*R,C.vx-=k*(R=1-R),C.vy-=O*R)}return}return w>h+R||T<h-R||x>p+R||S<p-R}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:ja(+l),u(),o):e},o}function eot(e){return e.index}function xae(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function tot(e){var t=eot,n=f,r,i=ja(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,x,T,S,C,A,R;b<v;++b)w=e[b],x=w.source,T=w.target,S=T.x+T.vx-x.x-x.vx||Og(l),C=T.y+T.vy-x.y-x.vy||Og(l),A=Math.sqrt(S*S+C*C),A=(A-s[b])/A*g*r[b],S*=A,C*=A,T.vx-=S*(R=u[b]),T.vy-=C*R,x.vx+=S*(R=1-R),x.vy+=C*R}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((x,T)=>[t(x,T,o),x])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=xae(b,w.source)),typeof w.target!="object"&&(w.target=xae(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:ja(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:ja(+g),m(),d):i},d}const not=1664525,rot=1013904223,Sae=4294967296;function iot(){let e=1;return()=>(e=(not*e+rot)%Sae)/Sae}function sot(e){return e.x}function oot(e){return e.y}var aot=10,uot=Math.PI*(3-Math.sqrt(5));function lot(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=mEe(f),l=Bwe("tick","end"),c=iot();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=aot*Math.sqrt(.5+m),b=m*uot;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,x,T,S,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],w=m-S.x,x=g-S.y,T=w*w+x*x,T<y&&(C=S,y=T);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function cot(){var e,t,n,r,i=ja(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=qG(e,sot,oot).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=Og(n),w+=y*y),v===0&&(v=Og(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Og(n),w+=y*y),v===0&&(v=Og(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:ja(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function fot(e){var t=ja(.1),n,r,i;typeof e!="function"&&(e=ja(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ja(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:ja(+a),o(),s):e},s}function dot(e){var t=ja(.1),n,r,i;typeof e!="function"&&(e=ja(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:ja(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:ja(+a),o(),s):e},s}function hot(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function RO(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function dE(e){return e=RO(Math.abs(e)),e?e[1]:NaN}function pot(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function mot(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var got=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function R1(e){if(!(t=got.exec(e)))throw new Error("invalid format: "+e);var t;return new GG({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}R1.prototype=GG.prototype;function GG(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}GG.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function yot(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var _Ee;function vot(e,t){var n=RO(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(_Ee=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+RO(e,Math.max(0,t+s-1))[0]}function Tae(e,t){var n=RO(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Cae={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:hot,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Tae(e*100,t),r:Tae,s:vot,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Aae(e){return e}var Iae=Array.prototype.map,kae=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function wEe(e){var t=e.grouping===void 0||e.thousands===void 0?Aae:pot(Iae.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Aae:mot(Iae.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=R1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,x=f.type;x==="n"?(v=!0,x="g"):Cae[x]||(b===void 0&&(b=12),w=!0,x="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",S=m==="$"?r:/[%p]/.test(x)?o:"",C=Cae[x],A=/[defgprs%]/.test(x);b=b===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function R(k){var O=T,D=S,$,L,F;if(x==="c")D=C(k)+D,k="";else{k=+k;var B=k<0||1/k<0;if(k=isNaN(k)?u:C(Math.abs(k),b),w&&(k=yot(k)),B&&+k==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,D=(x==="s"?kae[8+_Ee/3]:"")+D+(B&&p==="("?")":""),A){for($=-1,L=k.length;++$<L;)if(F=k.charCodeAt($),48>F||F>57){D=(F===46?i+k.slice($+1):k.slice($))+D,k=k.slice(0,$);break}}}v&&!g&&(k=t(k,1/0));var U=O.length+k.length+D.length,q=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(k=t(q+k,q.length?y-D.length:1/0),q=""),h){case"<":k=O+k+D+q;break;case"=":k=O+q+k+D;break;case"^":k=q.slice(0,U=q.length>>1)+O+k+D+q.slice(U);break;default:k=q+O+k+D;break}return s(k)}return R.toString=function(){return f+""},R}function c(f,d){var h=l((f=R1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(dE(d)/3)))*3,m=Math.pow(10,-p),g=kae[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var nN,Xd,YG;bot({thousands:",",grouping:[3],currency:["$",""]});function bot(e){return nN=wEe(e),Xd=nN.format,YG=nN.formatPrefix,nN}function EEe(e){return Math.max(0,-dE(Math.abs(e)))}function xEe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(dE(t)/3)))*3-dE(Math.abs(e)))}function SEe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,dE(t)-dE(e))+1}var jt=1e-6,NO=1e-12,kn=Math.PI,qi=kn/2,DO=kn/4,Wa=kn*2,es=180/kn,An=kn/180,Yn=Math.abs,Lx=Math.atan,wc=Math.atan2,Ut=Math.cos,rN=Math.ceil,TEe=Math.exp,OU=Math.hypot,PO=Math.log,m8=Math.pow,Lt=Math.sin,lc=Math.sign||function(e){return e>0?1:e<0?-1:0},Ga=Math.sqrt,KG=Math.tan;function CEe(e){return e>1?0:e<-1?kn:Math.acos(e)}function ju(e){return e>1?qi:e<-1?-qi:Math.asin(e)}function xo(){}function OO(e,t){e&&Nae.hasOwnProperty(e.type)&&Nae[e.type](e,t)}var Rae={Feature:function(e,t){OO(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)OO(n[r].geometry,t)}},Nae={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){$U(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$U(n[r],t,0)},Polygon:function(e,t){Dae(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Dae(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)OO(n[r],t)}};function $U(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Dae(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)$U(e[n],t,1);t.polygonEnd()}function Ep(e,t){e&&Rae.hasOwnProperty(e.type)?Rae[e.type](e,t):OO(e,t)}var $O=new za,MO=new za,AEe,IEe,MU,LU,FU,lh={point:xo,lineStart:xo,lineEnd:xo,polygonStart:function(){$O=new za,lh.lineStart=_ot,lh.lineEnd=wot},polygonEnd:function(){var e=+$O;MO.add(e<0?Wa+e:e),this.lineStart=this.lineEnd=this.point=xo},sphere:function(){MO.add(Wa)}};function _ot(){lh.point=Eot}function wot(){kEe(AEe,IEe)}function Eot(e,t){lh.point=kEe,AEe=e,IEe=t,e*=An,t*=An,MU=e,LU=Ut(t=t/2+DO),FU=Lt(t)}function kEe(e,t){e*=An,t*=An,t=t/2+DO;var n=e-MU,r=n>=0?1:-1,i=r*n,s=Ut(t),o=Lt(t),a=FU*o,u=LU*s+a*Ut(i),l=a*r*Lt(i);$O.add(wc(l,u)),MU=e,LU=s,FU=o}function xot(e){return MO=new za,Ep(e,lh),MO*2}function LO(e){return[wc(e[1],e[0]),ju(e[2])]}function N1(e){var t=e[0],n=e[1],r=Ut(n);return[r*Ut(t),r*Lt(t),Lt(n)]}function iN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function hE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function g8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function sN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function FO(e){var t=Ga(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ti,yu,Mi,ul,uv,REe,NEe,_w,VC,pg,fm,gp={point:jU,lineStart:Pae,lineEnd:Oae,polygonStart:function(){gp.point=PEe,gp.lineStart=Sot,gp.lineEnd=Tot,VC=new za,lh.polygonStart()},polygonEnd:function(){lh.polygonEnd(),gp.point=jU,gp.lineStart=Pae,gp.lineEnd=Oae,$O<0?(Ti=-(Mi=180),yu=-(ul=90)):VC>jt?ul=90:VC<-jt&&(yu=-90),fm[0]=Ti,fm[1]=Mi},sphere:function(){Ti=-(Mi=180),yu=-(ul=90)}};function jU(e,t){pg.push(fm=[Ti=e,Mi=e]),t<yu&&(yu=t),t>ul&&(ul=t)}function DEe(e,t){var n=N1([e*An,t*An]);if(_w){var r=hE(_w,n),i=[r[1],-r[0],0],s=hE(i,r);FO(s),s=LO(s);var o=e-uv,a=o>0?1:-1,u=s[0]*es*a,l,c=Yn(o)>180;c^(a*uv<u&&u<a*e)?(l=s[1]*es,l>ul&&(ul=l)):(u=(u+360)%360-180,c^(a*uv<u&&u<a*e)?(l=-s[1]*es,l<yu&&(yu=l)):(t<yu&&(yu=t),t>ul&&(ul=t))),c?e<uv?ol(Ti,e)>ol(Ti,Mi)&&(Mi=e):ol(e,Mi)>ol(Ti,Mi)&&(Ti=e):Mi>=Ti?(e<Ti&&(Ti=e),e>Mi&&(Mi=e)):e>uv?ol(Ti,e)>ol(Ti,Mi)&&(Mi=e):ol(e,Mi)>ol(Ti,Mi)&&(Ti=e)}else pg.push(fm=[Ti=e,Mi=e]);t<yu&&(yu=t),t>ul&&(ul=t),_w=n,uv=e}function Pae(){gp.point=DEe}function Oae(){fm[0]=Ti,fm[1]=Mi,gp.point=jU,_w=null}function PEe(e,t){if(_w){var n=e-uv;VC.add(Yn(n)>180?n+(n>0?360:-360):n)}else REe=e,NEe=t;lh.point(e,t),DEe(e,t)}function Sot(){lh.lineStart()}function Tot(){PEe(REe,NEe),lh.lineEnd(),Yn(VC)>jt&&(Ti=-(Mi=180)),fm[0]=Ti,fm[1]=Mi,_w=null}function ol(e,t){return(t-=e)<0?t+360:t}function Cot(e,t){return e[0]-t[0]}function $ae(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Aot(e){var t,n,r,i,s,o,a;if(ul=Mi=-(Ti=yu=1/0),pg=[],Ep(e,gp),n=pg.length){for(pg.sort(Cot),t=1,r=pg[0],s=[r];t<n;++t)i=pg[t],$ae(r,i[0])||$ae(r,i[1])?(ol(r[0],i[1])>ol(r[0],r[1])&&(r[1]=i[1]),ol(i[0],r[1])>ol(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=ol(r[1],i[0]))>o&&(o=a,Ti=i[0],Mi=r[1])}return pg=fm=null,Ti===1/0||yu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ti,yu],[Mi,ul]]}var zT,jO,BO,UO,zO,VO,HO,qO,BU,UU,zU,OEe,$Ee,Pa,Oa,$a,bf={sphere:xo,point:XG,lineStart:Mae,lineEnd:Lae,polygonStart:function(){bf.lineStart=Rot,bf.lineEnd=Not},polygonEnd:function(){bf.lineStart=Mae,bf.lineEnd=Lae}};function XG(e,t){e*=An,t*=An;var n=Ut(t);FI(n*Ut(e),n*Lt(e),Lt(t))}function FI(e,t,n){++zT,BO+=(e-BO)/zT,UO+=(t-UO)/zT,zO+=(n-zO)/zT}function Mae(){bf.point=Iot}function Iot(e,t){e*=An,t*=An;var n=Ut(t);Pa=n*Ut(e),Oa=n*Lt(e),$a=Lt(t),bf.point=kot,FI(Pa,Oa,$a)}function kot(e,t){e*=An,t*=An;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=wc(Ga((o=Oa*s-$a*i)*o+(o=$a*r-Pa*s)*o+(o=Pa*i-Oa*r)*o),Pa*r+Oa*i+$a*s);jO+=o,VO+=o*(Pa+(Pa=r)),HO+=o*(Oa+(Oa=i)),qO+=o*($a+($a=s)),FI(Pa,Oa,$a)}function Lae(){bf.point=XG}function Rot(){bf.point=Dot}function Not(){MEe(OEe,$Ee),bf.point=XG}function Dot(e,t){OEe=e,$Ee=t,e*=An,t*=An,bf.point=MEe;var n=Ut(t);Pa=n*Ut(e),Oa=n*Lt(e),$a=Lt(t),FI(Pa,Oa,$a)}function MEe(e,t){e*=An,t*=An;var n=Ut(t),r=n*Ut(e),i=n*Lt(e),s=Lt(t),o=Oa*s-$a*i,a=$a*r-Pa*s,u=Pa*i-Oa*r,l=OU(o,a,u),c=ju(l),f=l&&-c/l;BU.add(f*o),UU.add(f*a),zU.add(f*u),jO+=c,VO+=c*(Pa+(Pa=r)),HO+=c*(Oa+(Oa=i)),qO+=c*($a+($a=s)),FI(Pa,Oa,$a)}function Pot(e){zT=jO=BO=UO=zO=VO=HO=qO=0,BU=new za,UU=new za,zU=new za,Ep(e,bf);var t=+BU,n=+UU,r=+zU,i=OU(t,n,r);return i<NO&&(t=VO,n=HO,r=qO,jO<jt&&(t=BO,n=UO,r=zO),i=OU(t,n,r),i<NO)?[NaN,NaN]:[wc(n,t)*es,ju(r/i)*es]}function VU(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function HU(e,t){return Yn(e)>kn&&(e-=Math.round(e/Wa)*Wa),[e,t]}HU.invert=HU;function LEe(e,t,n){return(e%=Wa)?t||n?VU(jae(e),Bae(t,n)):jae(e):t||n?Bae(t,n):HU}function Fae(e){return function(t,n){return t+=e,Yn(t)>kn&&(t-=Math.round(t/Wa)*Wa),[t,n]}}function jae(e){var t=Fae(e);return t.invert=Fae(-e),t}function Bae(e,t){var n=Ut(e),r=Lt(e),i=Ut(t),s=Lt(t);function o(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[wc(f*i-h*s,c*n-d*r),ju(h*i+f*s)]}return o.invert=function(a,u){var l=Ut(u),c=Ut(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[wc(f*i+d*s,c*n+h*r),ju(h*n-c*r)]},o}function Oot(e){e=LEe(e[0]*An,e[1]*An,e.length>2?e[2]*An:0);function t(n){return n=e(n[0]*An,n[1]*An),n[0]*=es,n[1]*=es,n}return t.invert=function(n){return n=e.invert(n[0]*An,n[1]*An),n[0]*=es,n[1]*=es,n},t}function $ot(e,t,n,r,i,s){if(n){var o=Ut(t),a=Lt(t),u=r*n;i==null?(i=t+r*Wa,s=t-u/2):(i=Uae(o,i),s=Uae(o,s),(r>0?i<s:i>s)&&(i+=r*Wa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=LO([o,-a*Ut(c),-a*Lt(c)]),e.point(l[0],l[1])}}function Uae(e,t){t=N1(t),t[0]-=e,FO(t);var n=CEe(-t[1]);return((-t[2]<0?-n:n)+Wa-jt)%Wa}function FEe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:xo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ND(e,t){return Yn(e[0]-t[0])<jt&&Yn(e[1]-t[1])<jt}function oN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function jEe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(ND(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*jt}s.push(v=new oN(g,p,null,!0)),o.push(v.o=new oN(g,null,v,!1)),s.push(v=new oN(y,p,null,!1)),o.push(v.o=new oN(y,null,v,!0))}}),!!s.length){for(o.sort(t),zae(s),zae(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function zae(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function y8(e){return Yn(e[0])<=kn?e[0]:lc(e[0])*((Yn(e[0])+kn)%Wa-kn)}function Mot(e,t){var n=y8(t),r=t[1],i=Lt(r),s=[Lt(n),-Ut(n),0],o=0,a=0,u=new za;i===1?r=qi+jt:i===-1&&(r=-qi-jt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=y8(h),m=h[1]/2+DO,g=Lt(m),y=Ut(m),v=0;v<d;++v,p=w,g=T,y=S,h=b){var b=f[v],w=y8(b),x=b[1]/2+DO,T=Lt(x),S=Ut(x),C=w-p,A=C>=0?1:-1,R=A*C,k=R>kn,O=g*T;if(u.add(wc(O*A*Lt(R),y*S+O*Ut(R))),o+=k?C+A*Wa:C,k^p>=n^w>=n){var D=hE(N1(h),N1(b));FO(D);var $=hE(s,D);FO($);var L=(k^C>=0?-1:1)*ju($[2]);(r>L||r===L&&(D[0]||D[1]))&&(a+=k^C>=0?1:-1)}}return(o<-jt||o<jt&&u<-NO)^a&1}function BEe(e,t,n,r){return function(i){var s=t(i),o=FEe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Fwe(c);var w=Mot(l,r);c.length?(u||(i.polygonStart(),u=!0),jEe(c,Fot,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,x){e(w,x)&&i.point(w,x)}function p(w,x){s.point(w,x)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,x){f.push([w,x]),a.point(w,x)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),x=o.result(),T,S=x.length,C,A,R;if(f.pop(),l.push(f),f=null,!!S){if(w&1){if(A=x[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<C;++T)i.point((R=A[T])[0],R[1]);i.lineEnd()}return}S>1&&w&2&&x.push(x.pop().concat(x.shift())),c.push(x.filter(Lot))}}return d}}function Lot(e){return e.length>1}function Fot(e,t){return((e=e.x)[0]<0?e[1]-qi-jt:qi-e[1])-((t=t.x)[0]<0?t[1]-qi-jt:qi-t[1])}const Vae=BEe(function(){return!0},jot,Uot,[-kn,-qi]);function jot(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?kn:-kn,u=Yn(s-t);Yn(u-kn)<jt?(e.point(t,n=(n+o)/2>0?qi:-qi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=kn&&(Yn(t-r)<jt&&(t-=r*jt),Yn(s-a)<jt&&(s-=a*jt),n=Bot(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Bot(e,t,n,r){var i,s,o=Lt(e-n);return Yn(o)>jt?Lx((Lt(t)*(s=Ut(r))*Lt(n)-Lt(r)*(i=Ut(t))*Lt(e))/(i*s*o)):(t+r)/2}function Uot(e,t,n,r){var i;if(e==null)i=n*qi,r.point(-kn,i),r.point(0,i),r.point(kn,i),r.point(kn,0),r.point(kn,-i),r.point(0,-i),r.point(-kn,-i),r.point(-kn,0),r.point(-kn,i);else if(Yn(e[0]-t[0])>jt){var s=e[0]<t[0]?kn:-kn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function zot(e){var t=Ut(e),n=2*An,r=t>0,i=Yn(t)>jt;function s(c,f,d,h){$ot(h,e,n,d,c,f)}function o(c,f){return Ut(c)*Ut(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),x=r?w?0:l(g,y):w?l(g+(g<0?kn:-kn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||ND(f,b)||ND(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var T;!(x&d)&&(T=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}w&&(!f||!ND(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=x},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=N1(c),p=N1(f),m=[1,0,0],g=hE(h,p),y=iN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,x=-t*v/b,T=hE(m,g),S=sN(m,w),C=sN(g,x);g8(S,C);var A=T,R=iN(S,A),k=iN(A,A),O=R*R-k*(iN(S,S)-1);if(!(O<0)){var D=Ga(O),$=sN(A,(-R-D)/k);if(g8($,S),$=LO($),!d)return $;var L=c[0],F=f[0],B=c[1],U=f[1],q;F<L&&(q=L,L=F,F=q);var P=F-L,V=Yn(P-kn)<jt,W=V||P<jt;if(!V&&U<B&&(q=B,B=U,U=q),W?V?B+U>0^$[1]<(Yn($[0]-L)<jt?B:U):B<=$[1]&&$[1]<=U:P>kn^(L<=$[0]&&$[0]<=F)){var j=sN(A,(-R+D)/k);return g8(j,S),[$,LO(j)]}}}function l(c,f){var d=r?e:kn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return BEe(o,a,s,r?[0,-e]:[-kn,e-kn])}function Vot(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var VT=1e9,aN=-VT;function UEe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Yn(l[0]-e)<jt?c>0?0:3:Yn(l[0]-n)<jt?c>0?2:1:Yn(l[1]-t)<jt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=FEe(),d,h,p,m,g,y,v,b,w,x,T,S={point:C,lineStart:O,lineEnd:D,polygonStart:R,polygonEnd:k};function C(L,F){i(L,F)&&c.point(L,F)}function A(){for(var L=0,F=0,B=h.length;F<B;++F)for(var U=h[F],q=1,P=U.length,V=U[0],W,j,H=V[0],G=V[1];q<P;++q)W=H,j=G,V=U[q],H=V[0],G=V[1],j<=r?G>r&&(H-W)*(r-j)>(G-j)*(e-W)&&++L:G<=r&&(H-W)*(r-j)<(G-j)*(e-W)&&--L;return L}function R(){c=f,d=[],h=[],T=!0}function k(){var L=A(),F=T&&L,B=(d=Fwe(d)).length;(F||B)&&(l.polygonStart(),F&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&jEe(d,a,L,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){S.point=$,h&&h.push(p=[]),x=!0,w=!1,v=b=NaN}function D(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),S.point=C,w&&c.lineEnd()}function $(L,F){var B=i(L,F);if(h&&p.push([L,F]),x)m=L,g=F,y=B,x=!1,B&&(c.lineStart(),c.point(L,F));else if(B&&w)c.point(L,F);else{var U=[v=Math.max(aN,Math.min(VT,v)),b=Math.max(aN,Math.min(VT,b))],q=[L=Math.max(aN,Math.min(VT,L)),F=Math.max(aN,Math.min(VT,F))];Vot(U,q,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(q[0],q[1]),B||c.lineEnd(),T=!1):B&&(c.lineStart(),c.point(L,F),T=!1)}v=L,b=F,w=B}return S}}function Hae(e,t,n){var r=yl(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function qae(e,t,n){var r=yl(e,t-jt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function Hot(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return yl(rN(r/c)*c,n,c).map(p).concat(yl(rN(a/f)*f,o,f).map(m)).concat(yl(rN(t/u)*u,e,u).filter(function(b){return Yn(b%c)>jt}).map(d)).concat(yl(rN(s/l)*l,i,l).filter(function(b){return Yn(b%f)>jt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Hae(s,i,90),h=qae(t,e,g),p=Hae(a,o,90),m=qae(r,n,g),y):g},y.extentMajor([[-180,-90+jt],[180,90-jt]]).extentMinor([[-180,-80-jt],[180,80+jt]])}const i2=e=>e;var v8=new za,qU=new za,zEe,VEe,WU,GU,xp={point:xo,lineStart:xo,lineEnd:xo,polygonStart:function(){xp.lineStart=qot,xp.lineEnd=Got},polygonEnd:function(){xp.lineStart=xp.lineEnd=xp.point=xo,v8.add(Yn(qU)),qU=new za},result:function(){var e=v8/2;return v8=new za,e}};function qot(){xp.point=Wot}function Wot(e,t){xp.point=HEe,zEe=WU=e,VEe=GU=t}function HEe(e,t){qU.add(GU*e-WU*t),WU=e,GU=t}function Got(){HEe(zEe,VEe)}var pE=1/0,WO=pE,s2=-pE,GO=s2,YO={point:Yot,lineStart:xo,lineEnd:xo,polygonStart:xo,polygonEnd:xo,result:function(){var e=[[pE,WO],[s2,GO]];return s2=GO=-(WO=pE=1/0),e}};function Yot(e,t){e<pE&&(pE=e),e>s2&&(s2=e),t<WO&&(WO=t),t>GO&&(GO=t)}var YU=0,KU=0,HT=0,KO=0,XO=0,K_=0,XU=0,QU=0,qT=0,qEe,WEe,Ad,Id,oc={point:D1,lineStart:Wae,lineEnd:Gae,polygonStart:function(){oc.lineStart=Qot,oc.lineEnd=Jot},polygonEnd:function(){oc.point=D1,oc.lineStart=Wae,oc.lineEnd=Gae},result:function(){var e=qT?[XU/qT,QU/qT]:K_?[KO/K_,XO/K_]:HT?[YU/HT,KU/HT]:[NaN,NaN];return YU=KU=HT=KO=XO=K_=XU=QU=qT=0,e}};function D1(e,t){YU+=e,KU+=t,++HT}function Wae(){oc.point=Kot}function Kot(e,t){oc.point=Xot,D1(Ad=e,Id=t)}function Xot(e,t){var n=e-Ad,r=t-Id,i=Ga(n*n+r*r);KO+=i*(Ad+e)/2,XO+=i*(Id+t)/2,K_+=i,D1(Ad=e,Id=t)}function Gae(){oc.point=D1}function Qot(){oc.point=Zot}function Jot(){GEe(qEe,WEe)}function Zot(e,t){oc.point=GEe,D1(qEe=Ad=e,WEe=Id=t)}function GEe(e,t){var n=e-Ad,r=t-Id,i=Ga(n*n+r*r);KO+=i*(Ad+e)/2,XO+=i*(Id+t)/2,K_+=i,i=Id*e-Ad*t,XU+=i*(Ad+e),QU+=i*(Id+t),qT+=i*3,D1(Ad=e,Id=t)}function YEe(e){this._context=e}YEe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Wa);break}}},result:xo};var JU=new za,b8,KEe,XEe,WT,GT,o2={point:xo,lineStart:function(){o2.point=eat},lineEnd:function(){b8&&QEe(KEe,XEe),o2.point=xo},polygonStart:function(){b8=!0},polygonEnd:function(){b8=null},result:function(){var e=+JU;return JU=new za,e}};function eat(e,t){o2.point=QEe,KEe=WT=e,XEe=GT=t}function QEe(e,t){WT-=e,GT-=t,JU.add(Ga(WT*WT+GT*GT)),WT=e,GT=t}let Yae,QO,Kae,Xae;class Qae{constructor(t){this._append=t==null?JEe:tat(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Kae||this._append!==QO){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Kae=r,QO=this._append,Xae=this._,this._=i}this._+=Xae;break}}}result(){const t=this._;return this._="",t.length?t:null}}function JEe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function tat(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return JEe;if(t!==Yae){const n=10**t;Yae=t,QO=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return QO}function ZEe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Ep(a,i(s))),s.result()}return o.area=function(a){return Ep(a,i(xp)),xp.result()},o.measure=function(a){return Ep(a,i(o2)),o2.result()},o.bounds=function(a){return Ep(a,i(YO)),YO.result()},o.centroid=function(a){return Ep(a,i(oc)),oc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,i2):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new Qae(n)):new YEe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new Qae(n)),o},o.projection(e).digits(n).context(t)}function TL(e){return function(t){var n=new ZU;for(var r in e)n[r]=e[r];return n.stream=t,n}}function ZU(){}ZU.prototype={constructor:ZU,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function QG(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ep(n,e.stream(YO)),t(YO.result()),r!=null&&e.clipExtent(r),e}function CL(e,t,n){return QG(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function JG(e,t,n){return CL(e,[[0,0],t],n)}function ZG(e,t,n){return QG(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function eY(e,t,n){return QG(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Jae=16,nat=Ut(30*An);function Zae(e,t){return+t?iat(e,t):rat(e)}function rat(e){return TL({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function iat(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,x=a+h,T=u+p,S=Ga(w*w+x*x+T*T),C=ju(T/=S),A=Yn(Yn(T)-1)<jt||Yn(s-f)<jt?(s+f)/2:wc(x,w),R=e(A,C),k=R[0],O=R[1],D=k-r,$=O-i,L=v*D-y*$;(L*L/b>t||Yn((y*D+v*$)/b-.5)>.3||o*d+a*h+u*p<nat)&&(n(r,i,s,o,a,u,k,O,A,w/=S,x/=S,T,m,g),g.point(k,O),n(k,O,A,w,x,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=x},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(C,A){var R=N1([C,A]),k=e(C,A);n(f,d,c,h,p,m,f=k[0],d=k[1],c=C,h=R[0],p=R[1],m=R[2],Jae,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function x(){v(),g.point=T,g.lineEnd=S}function T(C,A){b(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=b}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,Jae,r),g.lineEnd=w,w()}return g}}var sat=TL({point:function(e,t){this.stream.point(e*An,t*An)}});function oat(e){return TL({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function aat(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function eue(e,t,n,r,i,s){if(!s)return aat(e,t,n,r,i);var o=Ut(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function $h(e){return exe(function(){return e})()}function exe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Vae,g=null,y,v,b,w=i2,x=.5,T,S,C,A,R;function k(L){return C(L[0]*An,L[1]*An)}function O(L){return L=C.invert(L[0],L[1]),L&&[L[0]*es,L[1]*es]}k.stream=function(L){return A&&R===L?A:A=sat(oat(c)(m(T(w(R=L)))))},k.preclip=function(L){return arguments.length?(m=L,p=void 0,$()):m},k.postclip=function(L){return arguments.length?(w=L,g=y=v=b=null,$()):w},k.clipAngle=function(L){return arguments.length?(m=+L?zot(p=L*An):(p=null,Vae),$()):p*es},k.clipExtent=function(L){return arguments.length?(w=L==null?(g=y=v=b=null,i2):UEe(g=+L[0][0],y=+L[0][1],v=+L[1][0],b=+L[1][1]),$()):g==null?null:[[g,y],[v,b]]},k.scale=function(L){return arguments.length?(n=+L,D()):n},k.translate=function(L){return arguments.length?(r=+L[0],i=+L[1],D()):[r,i]},k.center=function(L){return arguments.length?(s=L[0]%360*An,o=L[1]%360*An,D()):[s*es,o*es]},k.rotate=function(L){return arguments.length?(a=L[0]%360*An,u=L[1]%360*An,l=L.length>2?L[2]%360*An:0,D()):[a*es,u*es,l*es]},k.angle=function(L){return arguments.length?(f=L%360*An,D()):f*es},k.reflectX=function(L){return arguments.length?(d=L?-1:1,D()):d<0},k.reflectY=function(L){return arguments.length?(h=L?-1:1,D()):h<0},k.precision=function(L){return arguments.length?(T=Zae(S,x=L*L),$()):Ga(x)},k.fitExtent=function(L,F){return CL(k,L,F)},k.fitSize=function(L,F){return JG(k,L,F)},k.fitWidth=function(L,F){return ZG(k,L,F)},k.fitHeight=function(L,F){return eY(k,L,F)};function D(){var L=eue(n,0,0,d,h,f).apply(null,t(s,o)),F=eue(n,r-L[0],i-L[1],d,h,f);return c=LEe(a,u,l),S=VU(t,F),C=VU(c,S),T=Zae(S,x),$()}function $(){return A=R=null,k}return function(){return t=e.apply(this,arguments),k.invert=t.invert&&O,D()}}function tY(e){var t=0,n=kn/3,r=exe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*An,n=s[1]*An):[t*es,n*es]},i}function uat(e){var t=Ut(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,ju(i*t)]},n}function lat(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Yn(r)<jt)return uat(e);var i=1+n*(2*r-n),s=Ga(i)/r;function o(a,u){var l=Ga(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*Ut(a)]}return o.invert=function(a,u){var l=s-u,c=wc(a,Yn(l))*lc(l);return l*r<0&&(c-=kn*lc(a)*lc(l)),[c/r,ju((i-(a*a+l*l)*r*r)/(2*r))]},o}function JO(){return tY(lat).scale(155.424).center([0,33.6442])}function txe(){return JO().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function cat(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function fat(){var e,t,n=txe(),r,i=JO().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=JO().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=cat([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+jt,m+.12*h+jt],[p-.214*h-jt,m+.234*h-jt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+jt,m+.166*h+jt],[p-.115*h-jt,m+.234*h-jt]]).stream(l),f()},c.fitExtent=function(d,h){return CL(c,d,h)},c.fitSize=function(d,h){return JG(c,d,h)},c.fitWidth=function(d,h){return ZG(c,d,h)},c.fitHeight=function(d,h){return eY(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function nxe(e){return function(t,n){var r=Ut(t),i=Ut(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function jI(e){return function(t,n){var r=Ga(t*t+n*n),i=e(r),s=Lt(i),o=Ut(i);return[wc(t*s,r*o),ju(r&&n*s/r)]}}var rxe=nxe(function(e){return Ga(2/(1+e))});rxe.invert=jI(function(e){return 2*ju(e/2)});function dat(){return $h(rxe).scale(124.75).clipAngle(180-.001)}var ixe=nxe(function(e){return(e=CEe(e))&&e/Lt(e)});ixe.invert=jI(function(e){return e});function hat(){return $h(ixe).scale(79.4188).clipAngle(180-.001)}function AL(e,t){return[e,PO(KG((qi+t)/2))]}AL.invert=function(e,t){return[e,2*Lx(TEe(t))-qi]};function pat(){return sxe(AL).scale(961/Wa)}function sxe(e){var t=$h(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=kn*r(),d=t(Oot(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===AL?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function uN(e){return KG((qi+e)/2)}function mat(e,t){var n=Ut(e),r=e===t?Lt(e):PO(n/Ut(t))/PO(uN(t)/uN(e)),i=n*m8(uN(e),r)/r;if(!r)return AL;function s(o,a){i>0?a<-qi+jt&&(a=-qi+jt):a>qi-jt&&(a=qi-jt);var u=i/m8(uN(a),r);return[u*Lt(r*o),i-u*Ut(r*o)]}return s.invert=function(o,a){var u=i-a,l=lc(r)*Ga(o*o+u*u),c=wc(o,Yn(u))*lc(u);return u*r<0&&(c-=kn*lc(o)*lc(u)),[c/r,2*Lx(m8(i/l,1/r))-qi]},s}function gat(){return tY(mat).scale(109.5).parallels([30,30])}function ZO(e,t){return[e,t]}ZO.invert=ZO;function yat(){return $h(ZO).scale(152.63)}function vat(e,t){var n=Ut(e),r=e===t?Lt(e):(n-Ut(t))/(t-e),i=n/r+e;if(Yn(r)<jt)return ZO;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*Ut(l)]}return s.invert=function(o,a){var u=i-a,l=wc(o,Yn(u))*lc(u);return u*r<0&&(l-=kn*lc(o)*lc(u)),[l/r,i-lc(r)*Ga(o*o+u*u)]},s}function bat(){return tY(vat).scale(131.154).center([0,13.9389])}var HC=1.340264,qC=-.081106,WC=893e-6,GC=.003796,e3=Ga(3)/2,_at=12;function oxe(e,t){var n=ju(e3*Lt(t)),r=n*n,i=r*r*r;return[e*Ut(n)/(e3*(HC+3*qC*r+i*(7*WC+9*GC*r))),n*(HC+qC*r+i*(WC+GC*r))]}oxe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<_at&&(a=n*(HC+qC*r+i*(WC+GC*r))-t,u=HC+3*qC*r+i*(7*WC+9*GC*r),n-=o=a/u,r=n*n,i=r*r*r,!(Yn(o)<NO));++s);return[e3*e*(HC+3*qC*r+i*(7*WC+9*GC*r))/Ut(n),ju(Lt(n)/e3)]};function wat(){return $h(oxe).scale(177.158)}function axe(e,t){var n=Ut(t),r=Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}axe.invert=jI(Lx);function Eat(){return $h(axe).scale(144.049).clipAngle(60)}function xat(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=TL({point:function(w,x){var T=b([w,x]);this.stream.point(T[0],T[1])}}),m=i2,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var x=w[0]*d,T=w[1]*h;if(s){var S=T*o-x*a;x=x*o+T*a,T=S}return[x+t,T+n]}return b.invert=function(w){var x=w[0]-t,T=w[1]-n;if(s){var S=T*o+x*a;x=x*o-T*a,T=S}return[x/d,T/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,i2):UEe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*An,a=Lt(s),o=Ut(s),v()):s*es},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,x){return CL(b,w,x)},b.fitSize=function(w,x){return JG(b,w,x)},b.fitWidth=function(w,x){return ZG(b,w,x)},b.fitHeight=function(w,x){return eY(b,w,x)},b}function uxe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}uxe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Yn(i)>jt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Sat(){return $h(uxe).scale(175.295)}function lxe(e,t){return[Ut(t)*Lt(e),Lt(t)]}lxe.invert=jI(ju);function Tat(){return $h(lxe).scale(249.5).clipAngle(90+jt)}function cxe(e,t){var n=Ut(t),r=1+Ut(e)*n;return[n*Lt(e)/r,Lt(t)/r]}cxe.invert=jI(function(e){return 2*Lx(e)});function Cat(){return $h(cxe).scale(250).clipAngle(142)}function fxe(e,t){return[PO(KG((qi+t)/2)),-e]}fxe.invert=function(e,t){return[-t,2*Lx(TEe(e))-qi]};function Aat(){var e=sxe(fxe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Iat(e,t){return e.parent===t.parent?1:2}function kat(e){return e.reduce(Rat,0)/e.length}function Rat(e,t){return e+t.x}function Nat(e){return 1+e.reduce(Dat,0)}function Dat(e,t){return Math.max(e,t.y)}function Pat(e){for(var t;t=e.children;)e=t[0];return e}function Oat(e){for(var t;t=e.children;)e=t[t.length-1];return e}function $at(){var e=Iat,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=kat(h),d.y=Nat(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=Pat(s),l=Oat(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Mat(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Lat(){return this.eachAfter(Mat)}function Fat(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function jat(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Bat(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function Uat(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function zat(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Vat(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Hat(e){for(var t=this,n=qat(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function qat(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function Wat(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Gat(){return Array.from(this)}function Yat(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Kat(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Xat(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function nY(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Zat)):t===void 0&&(t=Jat);for(var n=new mE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new mE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(dxe)}function Qat(){return nY(this).eachBefore(eut)}function Jat(e){return e.children}function Zat(e){return Array.isArray(e)?e[1]:null}function eut(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function dxe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function mE(e){this.data=e,this.depth=this.height=0,this.parent=null}mE.prototype=nY.prototype={constructor:mE,count:Lat,each:Fat,eachAfter:Bat,eachBefore:jat,find:Uat,sum:zat,sort:Vat,path:Hat,ancestors:Wat,descendants:Gat,leaves:Yat,links:Kat,copy:Qat,[Symbol.iterator]:Xat};function DD(e){return e==null?null:hxe(e)}function hxe(e){if(typeof e!="function")throw new Error;return e}function Ev(){return 0}function x_(e){return function(){return e}}const tut=1664525,nut=1013904223,tue=4294967296;function rut(){let e=1;return()=>(e=(tut*e+nut)%tue)/tue}function iut(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sut(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function out(e,t){for(var n=0,r=(e=sut(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&pxe(o,s)?++n:(o=uut(i=aut(i,s)),n=0);return o}function aut(e,t){var n,r;if(_8(t,e))return[t];for(n=0;n<e.length;++n)if(lN(t,e[n])&&_8(YT(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(lN(YT(e[n],e[r]),t)&&lN(YT(e[n],t),e[r])&&lN(YT(e[r],t),e[n])&&_8(mxe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function lN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function pxe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function _8(e,t){for(var n=0;n<t.length;++n)if(!pxe(e,t[n]))return!1;return!0}function uut(e){switch(e.length){case 1:return lut(e[0]);case 2:return YT(e[0],e[1]);case 3:return mxe(e[0],e[1],e[2])}}function lut(e){return{x:e.x,y:e.y,r:e.r}}function YT(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function mxe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,x=h*p-d*m,T=(p*w-m*b)/(x*2)-r,S=(m*g-p*y)/x,C=(h*b-d*w)/(x*2)-i,A=(d*y-h*g)/x,R=S*S+A*A-1,k=2*(s+T*S+C*A),O=T*T+C*C-s*s,D=-(Math.abs(R)>1e-6?(k+Math.sqrt(k*k-4*R*O))/(2*R):O/k);return{x:r+T+S*D,y:i+C+A*D,r:D}}function nue(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function rue(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function iue(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function cN(e){this._=e,this.next=null,this.previous=null}function cut(e,t){if(!(s=(e=iut(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;nue(r,n,i=e[2]),n=new cN(n),r=new cN(r),i=new cN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){nue(n._,r._,i=e[u]),i=new cN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(rue(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(rue(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=iue(n);(i=i.next)!==r;)(a=iue(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=out(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function fut(e){return Math.sqrt(e.value)}function dut(){var e=null,t=1,n=1,r=Ev;function i(s){const o=rut();return s.x=t/2,s.y=n/2,e?s.eachBefore(sue(e)).eachAfter(w8(r,.5,o)).eachBefore(oue(1)):s.eachBefore(sue(fut)).eachAfter(w8(Ev,1,o)).eachAfter(w8(r,s.r/Math.min(t,n),o)).eachBefore(oue(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=DD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:x_(+s),i):r},i}function sue(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function w8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=cut(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function oue(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function gxe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function BI(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function hut(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(gxe),o}function s(o,a){return function(u){u.children&&BI(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var put={depth:-1},aue={},E8={};function mut(e){return e.id}function gut(e){return e.parentId}function uue(){var e=mut,t=gut,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,x)=>yut(n(w,x,i))),v=y.map(lue),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(lue(w)),s.push(E8));o=(w,x)=>y[x],a=(w,x)=>v[x]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new mE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?aue:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===aue)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===E8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===E8);--y)h.data=null}if(f.parent=put,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(dxe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=DD(i),r):e},r.parentId=function(i){return arguments.length?(t=DD(i),r):t},r.path=function(i){return arguments.length?(n=DD(i),r):n},r}function yut(e){e=`${e}`;let t=e.length;return e7(e,t-1)&&!e7(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function lue(e){let t=e.length;if(t<2)return"";for(;--t>1&&!e7(e,t););return e.slice(0,t)}function e7(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function vut(e,t){return e.parent===t.parent?1:2}function x8(e){var t=e.children;return t?t[0]:e.t}function S8(e){var t=e.children;return t?t[t.length-1]:e.t}function but(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function _ut(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function wut(e,t,n){return e.a.parent===t.parent?e.a:n}function PD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}PD.prototype=Object.create(mE.prototype);function Eut(e){for(var t=new PD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new PD(s[o],o)),i.parent=n;return(t.parent=new PD(null,0)).children=[t],t}function xut(){var e=vut,t=1,n=1,r=null;function i(l){var c=Eut(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){_ut(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=S8(p),d=x8(d),p&&d;)m=x8(m),h=S8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(but(wut(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!S8(h)&&(h.t=p,h.m+=v-y),d&&!x8(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function IL(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var yxe=(1+Math.sqrt(5))/2;function vxe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,x,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,x=Math.max(p/h,h/p)/(m*e),T=g*g*x,w=Math.max(v/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),T=g*g*x,b=Math.max(v/T,T/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?BI(u,n,r,i,m?r+=p*g/m:s):IL(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const bxe=function e(t){function n(r,i,s,o,a){vxe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(yxe);function Sut(){var e=bxe,t=!1,n=1,r=1,i=[0],s=Ev,o=Ev,a=Ev,u=Ev,l=Ev;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(gxe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=hxe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:x_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:x_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:x_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:x_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:x_(+d),c):l},c}function Tut(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,x=f+1,T=d-1;x<T;){var S=x+T>>>1;l[S]<w?x=S+1:T=S}w-l[x-1]<l[x]-w&&f+1<x&&--x;var C=l[x]-b,A=h-C;if(g-p>y-m){var R=h?(p*A+g*C)/h:g;c(f,x,C,p,m,R,y),c(x,d,A,R,m,g,y)}else{var k=h?(m*A+y*C)/h:y;c(f,x,C,p,m,g,k),c(x,d,A,p,k,g,y)}}}function Cut(e,t,n,r,i){(e.depth&1?IL:BI)(e,t,n,r,i)}const Aut=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?BI(l,i,s,o,m?s+=(a-s)*l.value/m:a):IL(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=vxe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(yxe);function Mh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function _y(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const t7=Symbol("implicit");function UI(){var e=new EU,t=[],n=[],r=t7;function i(s){let o=e.get(s);if(o===void 0){if(r!==t7)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new EU;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return UI(t,n).unknown(r)},Mh.apply(i,arguments),i}function Iut(e){return function(){return e}}function n7(e){return+e}var cue=[0,1];function Tu(e){return e}function r7(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Iut(isNaN(t)?NaN:.5)}function kut(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Rut(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=r7(i,r),s=n(o,s)):(r=r7(r,i),s=n(s,o)),function(a){return s(r(a))}}function Nut(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=r7(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=T0(e,a,1,r)-1;return s[u](i[u](a))}}function zI(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function kL(){var e=cue,t=cue,n=by,r,i,s,o=Tu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Tu&&(o=kut(e[0],e[d-1])),a=d>2?Nut:Rut,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),cf)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,n7),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=MI,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Tu,c()):o!==Tu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function _xe(){return kL()(Tu,Tu)}function wxe(e,t,n,r){var i=C0(e,t,n),s;switch(r=R1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=xEe(i,o))&&(r.precision=s),YG(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=SEe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=EEe(i))&&(r.precision=s-(r.type==="%")*2);break}}return Xd(r)}function wb(e){var t=e.domain;return e.ticks=function(n){var r=t();return SU(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return wxe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=TU(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function VI(){var e=_xe();return e.copy=function(){return zI(e,VI())},Mh.apply(e,arguments),wb(e)}function Exe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,n7),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return Exe(e).unknown(t)},e=arguments.length?Array.from(e,n7):[0,1],wb(n)}function xxe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function fue(e){return Math.log(e)}function due(e){return Math.exp(e)}function Dut(e){return-Math.log(-e)}function Put(e){return-Math.exp(-e)}function Out(e){return isFinite(e)?+("1e"+e):e<0?0:e}function $ut(e){return e===10?Out:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Mut(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function hue(e){return(t,n)=>-e(-t,n)}function rY(e){const t=e(fue,due),n=t.domain;let r=10,i,s;function o(){return i=Mut(r),s=$ut(r),n()[0]<0?(i=hue(i),s=hue(s),e(Dut,Put)):e(fue,due),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=SU(l,c,g))}else y=SU(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=R1(u)).precision==null&&(u.trim=!0),u=Xd(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(xxe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function Sxe(){const e=rY(kL()).domain([1,10]);return e.copy=()=>zI(e,Sxe()).base(e.base()),Mh.apply(e,arguments),e}function pue(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function mue(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function iY(e){var t=1,n=e(pue(t),mue(t));return n.constant=function(r){return arguments.length?e(pue(t=+r),mue(t)):t},wb(n)}function Txe(){var e=iY(kL());return e.copy=function(){return zI(e,Txe()).constant(e.constant())},Mh.apply(e,arguments)}function gue(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Lut(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Fut(e){return e<0?-e*e:e*e}function sY(e){var t=e(Tu,Tu),n=1;function r(){return n===1?e(Tu,Tu):n===.5?e(Lut,Fut):e(gue(n),gue(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},wb(t)}function oY(){var e=sY(kL());return e.copy=function(){return zI(e,oY()).exponent(e.exponent())},Mh.apply(e,arguments),e}function jut(){return oY.apply(null,arguments).exponent(.5)}function Cxe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=Mwe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[T0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Vp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Cxe().domain(e).range(t).unknown(r)},Mh.apply(s,arguments)}function Axe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[T0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return Axe().domain([e,t]).range(i).unknown(s)},Mh.apply(wb(o),arguments)}function Ixe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[T0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Ixe().domain(e).range(t).unknown(n)},Mh.apply(i,arguments)}const T8=new Date,C8=new Date;function $s(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>$s(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(T8.setTime(+s),C8.setTime(+o),e(T8),e(C8),Math.floor(n(T8,C8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const gE=$s(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);gE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$s(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):gE);gE.range;const Dp=1e3,cc=Dp*60,Pp=cc*60,dm=Pp*24,aY=dm*7,yue=dm*30,A8=dm*365,Op=$s(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Dp)},(e,t)=>(t-e)/Dp,e=>e.getUTCSeconds());Op.range;const RL=$s(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dp)},(e,t)=>{e.setTime(+e+t*cc)},(e,t)=>(t-e)/cc,e=>e.getMinutes());RL.range;const NL=$s(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*cc)},(e,t)=>(t-e)/cc,e=>e.getUTCMinutes());NL.range;const DL=$s(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dp-e.getMinutes()*cc)},(e,t)=>{e.setTime(+e+t*Pp)},(e,t)=>(t-e)/Pp,e=>e.getHours());DL.range;const PL=$s(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Pp)},(e,t)=>(t-e)/Pp,e=>e.getUTCHours());PL.range;const Wp=$s(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*cc)/dm,e=>e.getDate()-1);Wp.range;const r0=$s(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/dm,e=>e.getUTCDate()-1);r0.range;const kxe=$s(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/dm,e=>Math.floor(e/dm));kxe.range;function Eb(e){return $s(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*cc)/aY)}const Fx=Eb(0),t3=Eb(1),But=Eb(2),Uut=Eb(3),yE=Eb(4),zut=Eb(5),Vut=Eb(6);Fx.range;t3.range;But.range;Uut.range;yE.range;zut.range;Vut.range;function xb(e){return $s(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/aY)}const jx=xb(0),n3=xb(1),Hut=xb(2),qut=xb(3),vE=xb(4),Wut=xb(5),Gut=xb(6);jx.range;n3.range;Hut.range;qut.range;vE.range;Wut.range;Gut.range;const a2=$s(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());a2.range;const u2=$s(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());u2.range;const ch=$s(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ch.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$s(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ch.range;const fh=$s(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());fh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$s(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});fh.range;function Rxe(e,t,n,r,i,s){const o=[[Op,1,Dp],[Op,5,5*Dp],[Op,15,15*Dp],[Op,30,30*Dp],[s,1,cc],[s,5,5*cc],[s,15,15*cc],[s,30,30*cc],[i,1,Pp],[i,3,3*Pp],[i,6,6*Pp],[i,12,12*Pp],[r,1,dm],[r,2,2*dm],[n,1,aY],[t,1,yue],[t,3,3*yue],[e,1,A8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=$x(([,,g])=>g).right(o,d);if(h===o.length)return e.every(C0(l/A8,c/A8,f));if(h===0)return gE.every(Math.max(C0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[Yut,Kut]=Rxe(fh,u2,jx,kxe,PL,NL),[Xut,Qut]=Rxe(ch,a2,Fx,Wp,DL,RL);function I8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function k8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ZS(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Nxe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=eT(i),c=tT(i),f=eT(s),d=tT(s),h=eT(o),p=tT(o),m=eT(a),g=tT(a),y=eT(u),v=tT(u),b={a:B,A:U,b:q,B:P,c:null,d:xue,e:xue,f:_lt,g:Rlt,G:Dlt,H:ylt,I:vlt,j:blt,L:Dxe,m:wlt,M:Elt,p:V,q:W,Q:Cue,s:Aue,S:xlt,u:Slt,U:Tlt,V:Clt,w:Alt,W:Ilt,x:null,X:null,y:klt,Y:Nlt,Z:Plt,"%":Tue},w={a:j,A:H,b:G,B:ne,c:null,d:Sue,e:Sue,f:Llt,g:Glt,G:Klt,H:Olt,I:$lt,j:Mlt,L:Oxe,m:Flt,M:jlt,p:pe,q:fe,Q:Cue,s:Aue,S:Blt,u:Ult,U:zlt,V:Vlt,w:Hlt,W:qlt,x:null,X:null,y:Wlt,Y:Ylt,Z:Xlt,"%":Tue},x={a:R,A:k,b:O,B:D,c:$,d:wue,e:wue,f:hlt,g:_ue,G:bue,H:Eue,I:Eue,j:llt,L:dlt,m:ult,M:clt,p:A,q:alt,Q:mlt,s:glt,S:flt,u:nlt,U:rlt,V:ilt,w:tlt,W:slt,x:L,X:F,y:_ue,Y:bue,Z:olt,"%":plt};b.x=T(n,b),b.X=T(r,b),b.c=T(t,b),w.x=T(n,w),w.X=T(r,w),w.c=T(t,w);function T(de,ye){return function(Ae){var ve=[],rt=-1,ze=0,yt=de.length,ot,De,Me;for(Ae instanceof Date||(Ae=new Date(+Ae));++rt<yt;)de.charCodeAt(rt)===37&&(ve.push(de.slice(ze,rt)),(De=vue[ot=de.charAt(++rt)])!=null?ot=de.charAt(++rt):De=ot==="e"?" ":"0",(Me=ye[ot])&&(ot=Me(Ae,De)),ve.push(ot),ze=rt+1);return ve.push(de.slice(ze,rt)),ve.join("")}}function S(de,ye){return function(Ae){var ve=ZS(1900,void 0,1),rt=C(ve,de,Ae+="",0),ze,yt;if(rt!=Ae.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(ye&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(ze=k8(ZS(ve.y,0,1)),yt=ze.getUTCDay(),ze=yt>4||yt===0?n3.ceil(ze):n3(ze),ze=r0.offset(ze,(ve.V-1)*7),ve.y=ze.getUTCFullYear(),ve.m=ze.getUTCMonth(),ve.d=ze.getUTCDate()+(ve.w+6)%7):(ze=I8(ZS(ve.y,0,1)),yt=ze.getDay(),ze=yt>4||yt===0?t3.ceil(ze):t3(ze),ze=Wp.offset(ze,(ve.V-1)*7),ve.y=ze.getFullYear(),ve.m=ze.getMonth(),ve.d=ze.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),yt="Z"in ve?k8(ZS(ve.y,0,1)).getUTCDay():I8(ZS(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(yt+5)%7:ve.w+ve.U*7-(yt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,k8(ve)):I8(ve)}}function C(de,ye,Ae,ve){for(var rt=0,ze=ye.length,yt=Ae.length,ot,De;rt<ze;){if(ve>=yt)return-1;if(ot=ye.charCodeAt(rt++),ot===37){if(ot=ye.charAt(rt++),De=x[ot in vue?ye.charAt(rt++):ot],!De||(ve=De(de,Ae,ve))<0)return-1}else if(ot!=Ae.charCodeAt(ve++))return-1}return ve}function A(de,ye,Ae){var ve=l.exec(ye.slice(Ae));return ve?(de.p=c.get(ve[0].toLowerCase()),Ae+ve[0].length):-1}function R(de,ye,Ae){var ve=h.exec(ye.slice(Ae));return ve?(de.w=p.get(ve[0].toLowerCase()),Ae+ve[0].length):-1}function k(de,ye,Ae){var ve=f.exec(ye.slice(Ae));return ve?(de.w=d.get(ve[0].toLowerCase()),Ae+ve[0].length):-1}function O(de,ye,Ae){var ve=y.exec(ye.slice(Ae));return ve?(de.m=v.get(ve[0].toLowerCase()),Ae+ve[0].length):-1}function D(de,ye,Ae){var ve=m.exec(ye.slice(Ae));return ve?(de.m=g.get(ve[0].toLowerCase()),Ae+ve[0].length):-1}function $(de,ye,Ae){return C(de,t,ye,Ae)}function L(de,ye,Ae){return C(de,n,ye,Ae)}function F(de,ye,Ae){return C(de,r,ye,Ae)}function B(de){return o[de.getDay()]}function U(de){return s[de.getDay()]}function q(de){return u[de.getMonth()]}function P(de){return a[de.getMonth()]}function V(de){return i[+(de.getHours()>=12)]}function W(de){return 1+~~(de.getMonth()/3)}function j(de){return o[de.getUTCDay()]}function H(de){return s[de.getUTCDay()]}function G(de){return u[de.getUTCMonth()]}function ne(de){return a[de.getUTCMonth()]}function pe(de){return i[+(de.getUTCHours()>=12)]}function fe(de){return 1+~~(de.getUTCMonth()/3)}return{format:function(de){var ye=T(de+="",b);return ye.toString=function(){return de},ye},parse:function(de){var ye=S(de+="",!1);return ye.toString=function(){return de},ye},utcFormat:function(de){var ye=T(de+="",w);return ye.toString=function(){return de},ye},utcParse:function(de){var ye=S(de+="",!0);return ye.toString=function(){return de},ye}}}var vue={"-":"",_:" ",0:"0"},oo=/^\s*\d+/,Jut=/^%/,Zut=/[\\^$*+?|[\]().{}]/g;function hr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function elt(e){return e.replace(Zut,"\\$&")}function eT(e){return new RegExp("^(?:"+e.map(elt).join("|")+")","i")}function tT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function tlt(e,t,n){var r=oo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function nlt(e,t,n){var r=oo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function rlt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function ilt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function slt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function bue(e,t,n){var r=oo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function _ue(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function olt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function alt(e,t,n){var r=oo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function ult(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function wue(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function llt(e,t,n){var r=oo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Eue(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function clt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function flt(e,t,n){var r=oo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function dlt(e,t,n){var r=oo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function hlt(e,t,n){var r=oo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function plt(e,t,n){var r=Jut.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function mlt(e,t,n){var r=oo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function glt(e,t,n){var r=oo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function xue(e,t){return hr(e.getDate(),t,2)}function ylt(e,t){return hr(e.getHours(),t,2)}function vlt(e,t){return hr(e.getHours()%12||12,t,2)}function blt(e,t){return hr(1+Wp.count(ch(e),e),t,3)}function Dxe(e,t){return hr(e.getMilliseconds(),t,3)}function _lt(e,t){return Dxe(e,t)+"000"}function wlt(e,t){return hr(e.getMonth()+1,t,2)}function Elt(e,t){return hr(e.getMinutes(),t,2)}function xlt(e,t){return hr(e.getSeconds(),t,2)}function Slt(e){var t=e.getDay();return t===0?7:t}function Tlt(e,t){return hr(Fx.count(ch(e)-1,e),t,2)}function Pxe(e){var t=e.getDay();return t>=4||t===0?yE(e):yE.ceil(e)}function Clt(e,t){return e=Pxe(e),hr(yE.count(ch(e),e)+(ch(e).getDay()===4),t,2)}function Alt(e){return e.getDay()}function Ilt(e,t){return hr(t3.count(ch(e)-1,e),t,2)}function klt(e,t){return hr(e.getFullYear()%100,t,2)}function Rlt(e,t){return e=Pxe(e),hr(e.getFullYear()%100,t,2)}function Nlt(e,t){return hr(e.getFullYear()%1e4,t,4)}function Dlt(e,t){var n=e.getDay();return e=n>=4||n===0?yE(e):yE.ceil(e),hr(e.getFullYear()%1e4,t,4)}function Plt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+hr(t/60|0,"0",2)+hr(t%60,"0",2)}function Sue(e,t){return hr(e.getUTCDate(),t,2)}function Olt(e,t){return hr(e.getUTCHours(),t,2)}function $lt(e,t){return hr(e.getUTCHours()%12||12,t,2)}function Mlt(e,t){return hr(1+r0.count(fh(e),e),t,3)}function Oxe(e,t){return hr(e.getUTCMilliseconds(),t,3)}function Llt(e,t){return Oxe(e,t)+"000"}function Flt(e,t){return hr(e.getUTCMonth()+1,t,2)}function jlt(e,t){return hr(e.getUTCMinutes(),t,2)}function Blt(e,t){return hr(e.getUTCSeconds(),t,2)}function Ult(e){var t=e.getUTCDay();return t===0?7:t}function zlt(e,t){return hr(jx.count(fh(e)-1,e),t,2)}function $xe(e){var t=e.getUTCDay();return t>=4||t===0?vE(e):vE.ceil(e)}function Vlt(e,t){return e=$xe(e),hr(vE.count(fh(e),e)+(fh(e).getUTCDay()===4),t,2)}function Hlt(e){return e.getUTCDay()}function qlt(e,t){return hr(n3.count(fh(e)-1,e),t,2)}function Wlt(e,t){return hr(e.getUTCFullYear()%100,t,2)}function Glt(e,t){return e=$xe(e),hr(e.getUTCFullYear()%100,t,2)}function Ylt(e,t){return hr(e.getUTCFullYear()%1e4,t,4)}function Klt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?vE(e):vE.ceil(e),hr(e.getUTCFullYear()%1e4,t,4)}function Xlt(){return"+0000"}function Tue(){return"%"}function Cue(e){return+e}function Aue(e){return Math.floor(+e/1e3)}var s_,uY,$g,HI,Mxe;Qlt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Qlt(e){return s_=Nxe(e),uY=s_.format,$g=s_.parse,HI=s_.utcFormat,Mxe=s_.utcParse,s_}function Jlt(e){return new Date(e)}function Zlt(e){return e instanceof Date?+e:+new Date(+e)}function lY(e,t,n,r,i,s,o,a,u,l){var c=_xe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function x(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:v:n(T)<T?b:w)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,Zlt)):d().map(Jlt)},c.ticks=function(T){var S=d();return e(S[0],S[S.length-1],T??10)},c.tickFormat=function(T,S){return S==null?x:l(S)},c.nice=function(T){var S=d();return(!T||typeof T.range!="function")&&(T=t(S[0],S[S.length-1],T??10)),T?d(xxe(S,T)):c},c.copy=function(){return zI(c,lY(e,t,n,r,i,s,o,a,u,l))},c}function bE(){return Mh.apply(lY(Xut,Qut,ch,a2,Fx,Wp,DL,RL,Op,uY).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ect(){return Mh.apply(lY(Yut,Kut,fh,u2,jx,r0,PL,NL,Op,HI).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function OL(){var e=0,t=1,n,r,i,s,o=Tu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(by),l.rangeRound=c(MI),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function wy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function cY(){var e=wb(OL()(Tu));return e.copy=function(){return wy(e,cY())},_y.apply(e,arguments)}function Lxe(){var e=rY(OL()).domain([1,10]);return e.copy=function(){return wy(e,Lxe()).base(e.base())},_y.apply(e,arguments)}function Fxe(){var e=iY(OL());return e.copy=function(){return wy(e,Fxe()).constant(e.constant())},_y.apply(e,arguments)}function fY(){var e=sY(OL());return e.copy=function(){return wy(e,fY()).exponent(e.exponent())},_y.apply(e,arguments)}function tct(){return fY.apply(null,arguments).exponent(.5)}function $L(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Tu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=UG(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(by),h.rangeRound=p(MI),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function jxe(){var e=wb($L()(Tu));return e.copy=function(){return wy(e,jxe())},_y.apply(e,arguments)}function Bxe(){var e=rY($L()).domain([.1,1,10]);return e.copy=function(){return wy(e,Bxe()).base(e.base())},_y.apply(e,arguments)}function Uxe(){var e=iY($L());return e.copy=function(){return wy(e,Uxe()).constant(e.constant())},_y.apply(e,arguments)}function dY(){var e=sY($L());return e.copy=function(){return wy(e,dY()).exponent(e.exponent())},_y.apply(e,arguments)}function nct(){return dY.apply(null,arguments).exponent(.5)}function Lh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const rct=Lh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ict=Lh("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),sct=Lh("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),oct=Lh("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),act=Lh("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),uct=Lh("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),lct=Lh("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),cct=Lh("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),fct=Lh("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),dct=Lh("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Er(e){return function(){return e}}const Iue=Math.abs,Wo=Math.atan2,Wy=Math.cos,hct=Math.max,R8=Math.min,ud=Math.sin,Bv=Math.sqrt,Xo=1e-12,_E=Math.PI,r3=_E/2,zxe=2*_E;function pct(e){return e>1?0:e<-1?_E:Math.acos(e)}function kue(e){return e>=1?r3:e<=-1?-r3:Math.asin(e)}function ML(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new VG(t)}function mct(e){return e.innerRadius}function gct(e){return e.outerRadius}function yct(e){return e.startAngle}function vct(e){return e.endAngle}function bct(e){return e&&e.padAngle}function _ct(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<Xo))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function fN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Bv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,x=i-s,T=d*m-p*h,S=(b<0?-1:1)*Bv(hct(0,x*x*w-T*T)),C=(T*b-v*S)/w,A=(-T*v-b*S)/w,R=(T*b+v*S)/w,k=(-T*v+b*S)/w,O=C-g,D=A-y,$=R-g,L=k-y;return O*O+D*D>$*$+L*L&&(C=R,A=k),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/x-1),y11:A*(i/x-1)}}function wct(){var e=mct,t=gct,n=Er(0),r=null,i=yct,s=vct,o=bct,a=null,u=ML(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-r3,m=s.apply(this,arguments)-r3,g=Iue(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>Xo))a.moveTo(0,0);else if(g>zxe-Xo)a.moveTo(h*Wy(p),h*ud(p)),a.arc(0,0,h,p,m,!y),d>Xo&&(a.moveTo(d*Wy(m),d*ud(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,x=m,T=g,S=g,C=o.apply(this,arguments)/2,A=C>Xo&&(r?+r.apply(this,arguments):Bv(d*d+h*h)),R=R8(Iue(h-d)/2,+n.apply(this,arguments)),k=R,O=R,D,$;if(A>Xo){var L=kue(A/d*ud(C)),F=kue(A/h*ud(C));(T-=L*2)>Xo?(L*=y?1:-1,w+=L,x-=L):(T=0,w=x=(p+m)/2),(S-=F*2)>Xo?(F*=y?1:-1,v+=F,b-=F):(S=0,v=b=(p+m)/2)}var B=h*Wy(v),U=h*ud(v),q=d*Wy(x),P=d*ud(x);if(R>Xo){var V=h*Wy(b),W=h*ud(b),j=d*Wy(w),H=d*ud(w),G;if(g<_E)if(G=_ct(B,U,j,H,V,W,q,P)){var ne=B-G[0],pe=U-G[1],fe=V-G[0],de=W-G[1],ye=1/ud(pct((ne*fe+pe*de)/(Bv(ne*ne+pe*pe)*Bv(fe*fe+de*de)))/2),Ae=Bv(G[0]*G[0]+G[1]*G[1]);k=R8(R,(d-Ae)/(ye-1)),O=R8(R,(h-Ae)/(ye+1))}else k=O=0}S>Xo?O>Xo?(D=fN(j,H,B,U,h,O,y),$=fN(V,W,q,P,h,O,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),O<R?a.arc(D.cx,D.cy,O,Wo(D.y01,D.x01),Wo($.y01,$.x01),!y):(a.arc(D.cx,D.cy,O,Wo(D.y01,D.x01),Wo(D.y11,D.x11),!y),a.arc(0,0,h,Wo(D.cy+D.y11,D.cx+D.x11),Wo($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,Wo($.y11,$.x11),Wo($.y01,$.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>Xo)||!(T>Xo)?a.lineTo(q,P):k>Xo?(D=fN(q,P,V,W,d,-k,y),$=fN(B,U,j,H,d,-k,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),k<R?a.arc(D.cx,D.cy,k,Wo(D.y01,D.x01),Wo($.y01,$.x01),!y):(a.arc(D.cx,D.cy,k,Wo(D.y01,D.x01),Wo(D.y11,D.x11),!y),a.arc(0,0,d,Wo(D.cy+D.y11,D.cx+D.x11),Wo($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,k,Wo($.y11,$.x11),Wo($.y01,$.x01),!y))):a.arc(0,0,d,x,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-_E/2;return[Wy(f)*c,ud(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Er(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Er(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Er(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Er(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Er(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Er(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Er(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function Vxe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hxe(e){this._context=e}Hxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function hY(e){return new Hxe(e)}function qxe(e){return e[0]}function Wxe(e){return e[1]}function ww(e,t){var n=Er(!0),r=null,i=hY,s=null,o=ML(a);e=typeof e=="function"?e:e===void 0?qxe:Er(e),t=typeof t=="function"?t:t===void 0?Wxe:Er(t);function a(u){var l,c=(u=Vxe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Er(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Er(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Er(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function LL(e,t,n){var r=null,i=Er(!0),s=null,o=hY,a=null,u=ML(l);e=typeof e=="function"?e:e===void 0?qxe:Er(+e),t=typeof t=="function"?t:Er(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?Wxe:Er(+n);function l(f){var d,h,p,m=(f=Vxe(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return ww().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Er(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Er(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Er(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Er(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Er(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Er(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Er(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const Ect={draw(e,t){const n=Bv(t/_E);e.moveTo(n,0),e.arc(0,0,n,0,zxe)}};function xct(e,t){let n=null,r=ML(i);e=typeof e=="function"?e:Er(e||Ect),t=typeof t=="function"?t:Er(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Er(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Er(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function I0(){}function i3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function FL(e){this._context=e}FL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:i3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:i3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Uv(e){return new FL(e)}function Gxe(e){this._context=e}Gxe.prototype={areaStart:I0,areaEnd:I0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:i3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Sct(e){return new Gxe(e)}function Yxe(e){this._context=e}Yxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:i3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Tct(e){return new Yxe(e)}function Kxe(e,t){this._basis=new FL(e),this._beta=t}Kxe.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Cct=function e(t){function n(r){return t===1?new FL(r):new Kxe(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function s3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function pY(e,t){this._context=e,this._k=(1-t)/6}pY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:s3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:s3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Act=function e(t){function n(r){return new pY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function mY(e,t){this._context=e,this._k=(1-t)/6}mY.prototype={areaStart:I0,areaEnd:I0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:s3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ict=function e(t){function n(r){return new mY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function gY(e,t){this._context=e,this._k=(1-t)/6}gY.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:s3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const kct=function e(t){function n(r){return new gY(r,t)}return n.tension=function(r){return e(+r)},n}(0);function yY(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>Xo){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Xo){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function Xxe(e,t){this._context=e,this._alpha=t}Xxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:yY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Rct=function e(t){function n(r){return t?new Xxe(r,t):new pY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Qxe(e,t){this._context=e,this._alpha=t}Qxe.prototype={areaStart:I0,areaEnd:I0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:yY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Nct=function e(t){function n(r){return t?new Qxe(r,t):new mY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Jxe(e,t){this._context=e,this._alpha=t}Jxe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:yY(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Dct=function e(t){function n(r){return t?new Jxe(r,t):new gY(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function Zxe(e){this._context=e}Zxe.prototype={areaStart:I0,areaEnd:I0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Pct(e){return new Zxe(e)}function Rue(e){return e<0?-1:1}function Nue(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Rue(s)+Rue(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Due(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function N8(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function o3(e){this._context=e}o3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:N8(this,this._t0,Due(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,N8(this,Due(this,n=Nue(this,e,t)),n);break;default:N8(this,this._t0,n=Nue(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function eSe(e){this._context=new tSe(e)}(eSe.prototype=Object.create(o3.prototype)).point=function(e,t){o3.prototype.point.call(this,t,e)};function tSe(e){this._context=e}tSe.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Oct(e){return new o3(e)}function $ct(e){return new eSe(e)}function nSe(e){this._context=e}nSe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Pue(e),i=Pue(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Pue(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Mct(e){return new nSe(e)}function jL(e,t){this._context=e,this._t=t}jL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Lct(e){return new jL(e,.5)}function Fct(e){return new jL(e,0)}function jct(e){return new jL(e,1)}function KT(e,t,n){this.k=e,this.x=t,this.y=n}KT.prototype={constructor:KT,scale:function(e){return e===1?this:new KT(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new KT(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};KT.prototype;function pf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function k0(e){return!!e&&!!e[gi]}function hm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Yct}(e)||Array.isArray(e)||!!e[Bue]||!!(!((t=e.constructor)===null||t===void 0)&&t[Bue])||vY(e)||bY(e))}function P1(e,t,n){n===void 0&&(n=!1),Bx(e)===0?(n?Object.keys:xw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Bx(e){var t=e[gi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:vY(e)?2:bY(e)?3:0}function Ew(e,t){return Bx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Bct(e,t){return Bx(e)===2?e.get(t):e[t]}function rSe(e,t,n){var r=Bx(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function iSe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function vY(e){return Wct&&e instanceof Map}function bY(e){return Gct&&e instanceof Set}function lv(e){return e.o||e.t}function _Y(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=oSe(e);delete t[gi];for(var n=xw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function wY(e,t){return t===void 0&&(t=!1),EY(e)||k0(e)||!hm(e)||(Bx(e)>1&&(e.set=e.add=e.clear=e.delete=Uct),Object.freeze(e),t&&P1(e,function(n,r){return wY(r,!0)},!0)),e}function Uct(){pf(2)}function EY(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Qd(e){var t=a7[e];return t||pf(18,e),t}function zct(e,t){a7[e]||(a7[e]=t)}function i7(){return l2}function D8(e,t){t&&(Qd("Patches"),e.u=[],e.s=[],e.v=t)}function a3(e){s7(e),e.p.forEach(Vct),e.p=null}function s7(e){e===l2&&(l2=e.l)}function Oue(e){return l2={p:[],l:l2,h:e,m:!0,_:0}}function Vct(e){var t=e[gi];t.i===0||t.i===1?t.j():t.g=!0}function P8(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||Qd("ES5").S(t,e,r),r?(n[gi].P&&(a3(t),pf(4)),hm(e)&&(e=u3(t,e),t.l||l3(t,e)),t.u&&Qd("Patches").M(n[gi].t,e,t.u,t.s)):e=u3(t,n,[]),a3(t),t.u&&t.v(t.u,t.s),e!==sSe?e:void 0}function u3(e,t,n){if(EY(t))return t;var r=t[gi];if(!r)return P1(t,function(a,u){return $ue(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return l3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=_Y(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),P1(s,function(a,u){return $ue(e,r,i,a,u,n,o)}),l3(e,i,!1),n&&e.u&&Qd("Patches").N(r,n,e.u,e.s)}return r.o}function $ue(e,t,n,r,i,s,o){if(k0(i)){var a=u3(e,i,s&&t&&t.i!==3&&!Ew(t.R,r)?s.concat(r):void 0);if(rSe(n,r,a),!k0(a))return;e.m=!1}else o&&n.add(i);if(hm(i)&&!EY(i)){if(!e.h.D&&e._<1)return;u3(e,i),t&&t.A.l||l3(e,i)}}function l3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&wY(t,n)}function O8(e,t){var n=e[gi];return(n?lv(n):e)[t]}function Mue(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Tg(e){e.P||(e.P=!0,e.l&&Tg(e.l))}function $8(e){e.o||(e.o=_Y(e.t))}function o7(e,t,n){var r=vY(t)?Qd("MapSet").F(t,n):bY(t)?Qd("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:i7(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=c2;o&&(u=[a],l=XT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):Qd("ES5").J(t,n);return(n?n.A:i7()).p.push(r),r}function Hct(e){return k0(e)||pf(22,e),function t(n){if(!hm(n))return n;var r,i=n[gi],s=Bx(n);if(i){if(!i.P&&(i.i<4||!Qd("ES5").K(i)))return i.t;i.I=!0,r=Lue(n,s),i.I=!1}else r=Lue(n,s);return P1(r,function(o,a){i&&Bct(i.t,o)===a||rSe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Lue(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return _Y(e)}function qct(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[gi];return c2.get(u,s)},set:function(u){var l=this[gi];c2.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][gi];if(!a.P)switch(a.i){case 5:r(a)&&Tg(a);break;case 4:n(a)&&Tg(a)}}}function n(s){for(var o=s.t,a=s.k,u=xw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==gi){var f=o[c];if(f===void 0&&!Ew(o,c))return!0;var d=a[c],h=d&&d[gi];if(h?h.t!==f:!iSe(d,f))return!0}}var p=!!o[gi];return u.length!==xw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};zct("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=oSe(f);delete p[gi];for(var m=xw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:i7(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,gi,{value:l,writable:!0}),u},S:function(s,o,a){a?k0(o)&&o[gi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[gi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)P1(d,function(b){b!==gi&&(f[b]!==void 0||Ew(f,b)?h[b]||u(d[b]):(h[b]=!0,Tg(c)))}),P1(f,function(b){d[b]!==void 0||Ew(d,b)||(h[b]=!1,Tg(c))});else if(p===5){if(r(c)&&(Tg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Fue,l2,xY=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Wct=typeof Map<"u",Gct=typeof Set<"u",jue=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",sSe=xY?Symbol.for("immer-nothing"):((Fue={})["immer-nothing"]=!0,Fue),Bue=xY?Symbol.for("immer-draftable"):"__$immer_draftable",gi=xY?Symbol.for("immer-state"):"__$immer_state",Yct=""+Object.prototype.constructor,xw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,oSe=Object.getOwnPropertyDescriptors||function(e){var t={};return xw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},a7={},c2={get:function(e,t){if(t===gi)return e;var n=lv(e);if(!Ew(n,t))return function(i,s,o){var a,u=Mue(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!hm(r)?r:r===O8(e.t,t)?($8(e),e.o[t]=o7(e.A.h,r,e)):r},has:function(e,t){return t in lv(e)},ownKeys:function(e){return Reflect.ownKeys(lv(e))},set:function(e,t,n){var r=Mue(lv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=O8(lv(e),t),s=i==null?void 0:i[gi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(iSe(n,i)&&(n!==void 0||Ew(e.t,t)))return!0;$8(e),Tg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return O8(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,$8(e),Tg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=lv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){pf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){pf(12)}},XT={};P1(c2,function(e,t){XT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),XT.deleteProperty=function(e,t){return XT.set.call(this,e,t,void 0)},XT.set=function(e,t,n){return c2.set.call(this,e[0],t,n,e[0])};var Kct=function(){function e(n){var r=this;this.O=jue,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&pf(6),o!==void 0&&typeof o!="function"&&pf(7),hm(i)){var c=Oue(r),f=o7(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?a3(c):s7(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return D8(c,o),P8(m,c)},function(m){throw a3(c),m}):(D8(c,o),P8(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===sSe&&(l=void 0),r.D&&wY(l,!0),o){var h=[],p=[];Qd("Patches").M(i,l,h,p),o(h,p)}return l}pf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){hm(n)||pf(8),k0(n)&&(n=Hct(n));var r=Oue(this),i=o7(this,n,void 0);return i[gi].C=!0,s7(r),i},t.finishDraft=function(n,r){var i=n&&n[gi],s=i.A;return D8(s,r),P8(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!jue&&pf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=Qd("Patches").$;return k0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Rl=new Kct,Xct=Rl.produce;Rl.produceWithPatches.bind(Rl);Rl.setAutoFreeze.bind(Rl);Rl.setUseProxies.bind(Rl);Rl.applyPatches.bind(Rl);Rl.createDraft.bind(Rl);Rl.finishDraft.bind(Rl);const aSe=Xct;function f2(e){"@babel/helpers - typeof";return f2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f2(e)}function Qct(e,t){if(f2(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(f2(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Jct(e){var t=Qct(e,"string");return f2(t)=="symbol"?t:t+""}function Zct(e,t,n){return(t=Jct(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uue(Object(n),!0).forEach(function(r){Zct(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uue(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Jo(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Vue=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),M8=function(){return Math.random().toString(36).substring(7).split("").join(".")},c3={INIT:"@@redux/INIT"+M8(),REPLACE:"@@redux/REPLACE"+M8(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+M8()}};function eft(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function uSe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Jo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Jo(1));return n(uSe)(e,t)}if(typeof e!="function")throw new Error(Jo(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(Jo(3));return s}function f(m){if(typeof m!="function")throw new Error(Jo(4));if(u)throw new Error(Jo(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(Jo(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!eft(m))throw new Error(Jo(7));if(typeof m.type>"u")throw new Error(Jo(8));if(u)throw new Error(Jo(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(Jo(10));i=m,d({type:c3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(Jo(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Vue]=function(){return this},m}return d({type:c3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Vue]=p,r}function tft(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:c3.INIT});if(typeof r>"u")throw new Error(Jo(12));if(typeof n(void 0,{type:c3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Jo(13))})}function nft(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{tft(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(Jo(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function f3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function rft(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(Jo(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=f3.apply(void 0,a)(i.dispatch),zue(zue({},i),{},{dispatch:s})}}}function lSe(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var u7=lSe();u7.withExtraArgument=lSe;var cSe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qI=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},O1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},ift=Object.defineProperty,sft=Object.defineProperties,oft=Object.getOwnPropertyDescriptors,Hue=Object.getOwnPropertySymbols,aft=Object.prototype.hasOwnProperty,uft=Object.prototype.propertyIsEnumerable,que=function(e,t,n){return t in e?ift(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},i0=function(e,t){for(var n in t||(t={}))aft.call(t,n)&&que(e,n,t[n]);if(Hue)for(var r=0,i=Hue(t);r<i.length;r++){var n=i[r];uft.call(t,n)&&que(e,n,t[n])}return e},L8=function(e,t){return sft(e,oft(t))},WI=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},lft=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?f3:f3.apply(null,arguments)};function fSe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var cft=function(e){return e&&typeof e.match=="function"};function Jd(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return i0(i0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function fft(e){return fSe(e)&&"type"in e}var dft=function(e){cSe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,O1([void 0],n[0].concat(this)))):new(t.bind.apply(t,O1([void 0],n.concat(this))))},t}(Array),hft=function(e){cSe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,O1([void 0],n[0].concat(this)))):new(t.bind.apply(t,O1([void 0],n.concat(this))))},t}(Array);function l7(e){return hm(e)?aSe(e,function(){}):e}function pft(e){return typeof e=="boolean"}function mft(){return function(t){return gft(t)}}function gft(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new dft;return n&&(pft(n)?r.push(u7):r.push(u7.withExtraArgument(n.extraArgument))),r}var yft=!0;function vft(e){var t=mft(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(fSe(i))h=nft(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=rft.apply(void 0,p),g=f3;u&&(g=lft(i0({trace:!yft},typeof u=="object"&&u)));var y=new hft(m),v=y;Array.isArray(d)?v=O1([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return uSe(h,c,b)}function dSe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function bft(e){return typeof e=="function"}function _ft(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?dSe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(bft(e))u=function(){return l7(e())};else{var l=l7(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=O1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(k0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(hm(p))return aSe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function wft(e,t){return e+"/"+t}function Eft(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:l7(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=wft(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?Jd(d,p):Jd(d)});function u(){var c=typeof e.extraReducers=="function"?dSe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=i0(i0({},d),o);return _ft(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,x=p;w<x.length;w++){var T=x[w];v.addMatcher(T.matcher,T.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var xft="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",hSe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=xft[Math.random()*64|0];return t},Sft=["name","message","stack","code"],F8=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Wue=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Tft=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=Sft;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=Jd(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:L8(i0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=Jd(t+"/pending",function(l,c,f){return{payload:void 0,meta:L8(i0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=Jd(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||Tft)(l||"Rejected"),meta:L8(i0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):hSe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return WI(this,null,function(){var v,b,w,x,T,S,C;return qI(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),x=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),Aft(x)?[4,x]:[3,2];case 1:x=A.sent(),A.label=2;case 2:if(x===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(R,k){return p.signal.addEventListener("abort",function(){return k({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(R,k){return new F8(R,k)},fulfillWithValue:function(R,k){return new Wue(R,k)}})).then(function(R){if(R instanceof F8)throw R;return R instanceof Wue?i(R.payload,h,l,R.meta):i(R,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return S=A.sent(),w=S instanceof F8?o(null,h,l,S.payload,S.meta):o(S,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(Cft)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function Cft(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Aft(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Ift=function(e,t){return cft(e)?e.match(t):e(t)};function Gue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return Ift(r,n)})}}var SY=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},c7=function(){},pSe=function(e,t){return t===void 0&&(t=c7),e.catch(t),e},mSe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Sw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},kft="task",gSe="listener",ySe="completed",TY="cancelled",Rft="task-"+TY,Nft="task-"+ySe,vSe=gSe+"-"+TY,Dft=gSe+"-"+ySe,BL=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=kft+" "+TY+" (reason: "+t+")"}return e}(),Tw=function(e){if(e.aborted)throw new BL(e.reason)};function bSe(e,t){var n=c7;return new Promise(function(r,i){var s=function(){return i(new BL(e.reason))};if(e.aborted){s();return}n=mSe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=c7})}var Pft=function(e,t){return WI(void 0,null,function(){var n,r;return qI(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof BL?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},d3=function(e){return function(t){return pSe(bSe(e,t).then(function(n){return Tw(e),n}))}},_Se=function(e){var t=d3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Oft=Object.assign,Yue={},GI="listenerMiddleware",$ft=function(e,t){var n=function(r){return mSe(e,function(){return Sw(r,e.reason)})};return function(r,i){SY(r,"taskExecutor");var s=new AbortController;n(s);var o=Pft(function(){return WI(void 0,null,function(){var a;return qI(this,function(u){switch(u.label){case 0:return Tw(e),Tw(s.signal),[4,r({pause:d3(s.signal),delay:_Se(s.signal),signal:s.signal})];case 1:return a=u.sent(),Tw(s.signal),[2,a]}})})},function(){return Sw(s,Nft)});return i!=null&&i.autoJoin&&t.push(o),{result:d3(e)(o),cancel:function(){Sw(s,Rft)}}}},Mft=function(e,t){var n=function(r,i){return WI(void 0,null,function(){var s,o,a,u;return qI(this,function(l){switch(l.label){case 0:Tw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,bSe(t,Promise.race(a))];case 2:return u=l.sent(),Tw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return pSe(n(r,i))}},wSe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=Jd(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return SY(s,"options.listener"),{predicate:i,type:t,effect:s}},Lft=function(e){var t=wSe(e),n=t.type,r=t.predicate,i=t.effect,s=hSe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},f7=function(e){e.pending.forEach(function(t){Sw(t,vSe)})},Fft=function(e){return function(){e.forEach(f7),e.clear()}},Kue=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},jft=Jd(GI+"/add"),Bft=Jd(GI+"/removeAll"),Uft=Jd(GI+"/remove"),zft=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,O1([GI+"/error"],e))};function Vft(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?zft:i;SY(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&f7(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Lft(h)),o(p)},l=function(h){var p=wSe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&f7(v)),!!v},c=function(h,p,m,g){return WI(t,null,function(){var y,v,b,w;return qI(this,function(x){switch(x.label){case 0:y=new AbortController,v=Mft(u,y.signal),b=[],x.label=1;case 1:return x.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,Oft({},m,{getOriginalState:g,condition:function(T,S){return v(T,S).then(Boolean)},take:v,delay:_Se(y.signal),pause:d3(y.signal),extra:r,signal:y.signal,fork:$ft(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,S,C){T!==y&&(Sw(T,vSe),C.delete(T))})}})))];case 2:return x.sent(),[3,6];case 3:return w=x.sent(),w instanceof BL||Kue(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return x.sent(),Sw(y,Dft),h.pending.delete(y),[7];case 6:return[2]}})})},f=Fft(n),d=function(h){return function(p){return function(m){if(!fft(m))return p(m);if(jft.match(m))return u(m.payload);if(Bft.match(m)){f();return}if(Uft.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Yue)throw new Error(GI+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),x=0,T=w;x<T.length;x++){var S=T[x],C=!1;try{C=S.predicate(m,b,g)}catch(A){C=!1,Kue(s,A,{raisedBy:"predicate"})}C&&c(S,m,h,y)}}finally{g=Yue}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Xue;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);qct();function Hft(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let dN;const qft=new Uint8Array(16);function Wft(){if(!dN&&(dN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!dN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return dN(qft)}const ho=[];for(let e=0;e<256;++e)ho.push((e+256).toString(16).slice(1));function Gft(e,t=0){return(ho[e[t+0]]+ho[e[t+1]]+ho[e[t+2]]+ho[e[t+3]]+"-"+ho[e[t+4]]+ho[e[t+5]]+"-"+ho[e[t+6]]+ho[e[t+7]]+"-"+ho[e[t+8]]+ho[e[t+9]]+"-"+ho[e[t+10]]+ho[e[t+11]]+ho[e[t+12]]+ho[e[t+13]]+ho[e[t+14]]+ho[e[t+15]]).toLowerCase()}const Yft=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Que={randomUUID:Yft};function Jue(e,t,n){if(Que.randomUUID&&!t&&!e)return Que.randomUUID();e=e||{};const r=e.random||(e.rng||Wft)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Gft(r)}class Zd{static get(){let t=Jue();for(;this.ids.has(t);)t=Jue();return this.ids.set(t,!0),t}}Zd.ids=new Map;function eh(e){return"parent"in e}function Kft(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:Zd.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:Zd.get(),createdOn:Date.now(),val:r}]:[];return{id:Zd.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function Xft({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:Zd.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:Zd.get(),createdOn:Date.now(),val:s}]:[];return{id:Zd.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Ui(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=sdt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function $1(e){return!!e&&!!e[Nl]}function R0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===odt}(e)||Array.isArray(e)||!!e[YC]||!!(!((t=e.constructor)===null||t===void 0)&&t[YC])||UL(e)||zL(e))}function wE(e,t,n){n===void 0&&(n=!1),N0(e)===0?(n?Object.keys:NY)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function N0(e){var t=e[Nl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:UL(e)?2:zL(e)?3:0}function d2(e,t){return N0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function OD(e,t){return N0(e)===2?e.get(t):e[t]}function ESe(e,t,n){var r=N0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Qft(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function UL(e){return rdt&&e instanceof Map}function zL(e){return idt&&e instanceof Set}function cv(e){return e.o||e.t}function CY(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=adt(e);delete t[Nl];for(var n=NY(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function AY(e,t){return t===void 0&&(t=!1),IY(e)||$1(e)||!R0(e)||(N0(e)>1&&(e.set=e.add=e.clear=e.delete=Jft),Object.freeze(e),t&&wE(e,function(n,r){return AY(r,!0)},!0)),e}function Jft(){Ui(2)}function IY(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function th(e){var t=m7[e];return t||Ui(18,e),t}function Zft(e,t){m7[e]||(m7[e]=t)}function Zue(){return{}.NODE_ENV==="production"||EE||Ui(0),EE}function j8(e,t){t&&(th("Patches"),e.u=[],e.s=[],e.v=t)}function h3(e){d7(e),e.p.forEach(edt),e.p=null}function d7(e){e===EE&&(EE=e.l)}function ele(e){return EE={p:[],l:EE,h:e,m:!0,_:0}}function edt(e){var t=e[Nl];t.i===0||t.i===1?t.j():t.O=!0}function B8(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||th("ES5").S(t,e,r),r?(n[Nl].P&&(h3(t),Ui(4)),R0(e)&&(e=p3(t,e),t.l||m3(t,e)),t.u&&th("Patches").M(n[Nl].t,e,t.u,t.s)):e=p3(t,n,[]),h3(t),t.u&&t.v(t.u,t.s),e!==RY?e:void 0}function p3(e,t,n){if(IY(t))return t;var r=t[Nl];if(!r)return wE(t,function(s,o){return tle(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return m3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=CY(r.k):r.o;wE(r.i===3?new Set(i):i,function(s,o){return tle(e,r,i,s,o,n)}),m3(e,i,!1),n&&e.u&&th("Patches").R(r,n,e.u,e.s)}return r.o}function tle(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ui(5),$1(i)){var o=p3(e,i,s&&t&&t.i!==3&&!d2(t.D,r)?s.concat(r):void 0);if(ESe(n,r,o),!$1(o))return;e.m=!1}if(R0(i)&&!IY(i)){if(!e.h.F&&e._<1)return;p3(e,i),t&&t.A.l||m3(e,i)}}function m3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&AY(t,n)}function U8(e,t){var n=e[Nl];return(n?cv(n):e)[t]}function nle(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function h7(e){e.P||(e.P=!0,e.l&&h7(e.l))}function z8(e){e.o||(e.o=CY(e.t))}function p7(e,t,n){var r=UL(t)?th("MapSet").N(t,n):zL(t)?th("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Zue(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=g7;o&&(u=[a],l=QT);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):th("ES5").J(t,n);return(n?n.A:Zue()).p.push(r),r}function tdt(e){return $1(e)||Ui(22,e),function t(n){if(!R0(n))return n;var r,i=n[Nl],s=N0(n);if(i){if(!i.P&&(i.i<4||!th("ES5").K(i)))return i.t;i.I=!0,r=rle(n,s),i.I=!1}else r=rle(n,s);return wE(r,function(o,a){i&&OD(i.t,o)===a||ESe(r,o,t(a))}),s===3?new Set(r):r}(e)}function rle(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return CY(e)}function ndt(){function e(r){if(!R0(r))return r;if(Array.isArray(r))return r.map(e);if(UL(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(zL(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return d2(r,YC)&&(i[YC]=r[YC]),i}function t(r){return $1(r)?e(r):r}var n="add";Zft("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=N0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Ui(24),typeof u=="function"&&f==="prototype"&&Ui(24),typeof(u=OD(u,f))!="object"&&Ui(15,o.join("/"))}var d=N0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Ui(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Ui(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;wE(a.D,function(h,p){var m=OD(f,h),g=OD(d,h),y=p?d2(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===RY?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var ile,EE,kY=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",rdt=typeof Map<"u",idt=typeof Set<"u",sle=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",RY=kY?Symbol.for("immer-nothing"):((ile={})["immer-nothing"]=!0,ile),YC=kY?Symbol.for("immer-draftable"):"__$immer_draftable",Nl=kY?Symbol.for("immer-state"):"__$immer_state",sdt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},odt=""+Object.prototype.constructor,NY=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,adt=Object.getOwnPropertyDescriptors||function(e){var t={};return NY(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},m7={},g7={get:function(e,t){if(t===Nl)return e;var n=cv(e);if(!d2(n,t))return function(i,s,o){var a,u=nle(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!R0(r)?r:r===U8(e.t,t)?(z8(e),e.o[t]=p7(e.A.h,r,e)):r},has:function(e,t){return t in cv(e)},ownKeys:function(e){return Reflect.ownKeys(cv(e))},set:function(e,t,n){var r=nle(cv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=U8(cv(e),t),s=i==null?void 0:i[Nl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Qft(n,i)&&(n!==void 0||d2(e.t,t)))return!0;z8(e),h7(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return U8(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,z8(e),h7(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=cv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ui(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ui(12)}},QT={};wE(g7,function(e,t){QT[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),QT.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ui(13),QT.set.call(this,e,t,void 0)},QT.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ui(14),g7.set.call(this,e[0],t,n,e[0])};var udt=function(){function e(n){var r=this;this.g=sle,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var x;return(x=s).call.apply(x,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Ui(6),o!==void 0&&typeof o!="function"&&Ui(7),R0(i)){var c=ele(r),f=p7(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?h3(c):d7(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return j8(c,o),B8(m,c)},function(m){throw h3(c),m}):(j8(c,o),B8(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===RY&&(l=void 0),r.F&&AY(l,!0),o){var h=[],p=[];th("Patches").M(i,l,h,p),o(h,p)}return l}Ui(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){R0(n)||Ui(8),$1(n)&&(n=tdt(n));var r=ele(this),i=p7(this,n,void 0);return i[Nl].C=!0,d7(r),i},t.finishDraft=function(n,r){var i=n&&n[Nl];({}).NODE_ENV!=="production"&&(i&&i.C||Ui(9),i.I&&Ui(10));var s=i.A;return j8(s,r),B8(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!sle&&Ui(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=th("Patches").$;return $1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Dl=new udt,ldt=Dl.produce;Dl.produceWithPatches.bind(Dl);Dl.setAutoFreeze.bind(Dl);Dl.setUseProxies.bind(Dl);Dl.applyPatches.bind(Dl);Dl.createDraft.bind(Dl);Dl.finishDraft.bind(Dl);function cdt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=Kft({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return Eft({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:Zd.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:Zd.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function fdt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=cdt(e),s=Vft();s.startListening({matcher:Gue(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Gue(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=vft({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:Zd.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ddt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),hdt=Object.prototype.hasOwnProperty;function y7(e,t){return hdt.call(e,t)}function v7(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)y7(e,i)&&r.push(i);return r}function Cu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function b7(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function fv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function xSe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function _7(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(_7(e[t]))return!0}else if(typeof e=="object"){for(var r=v7(e),i=r.length,s=0;s<i;s++)if(_7(e[r[s]]))return!0}}return!1}function ole(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var SSe=function(e){ddt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,ole(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=ole(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Li=SSe,pdt=Cu,X_={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=g3(n,this.path);r&&(r=Cu(r));var i=l1(n,{op:"remove",path:this.from}).removed;return l1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=g3(n,this.from);return l1(n,{op:"add",path:this.path,value:Cu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:h2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},mdt={add:function(e,t,n){return b7(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:X_.move,copy:X_.copy,test:X_.test,_get:X_._get};function g3(e,t){if(t=="")return e;var n={op:"_get",path:t};return l1(e,n),n.value}function l1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):y3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=g3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=h2(e,t.value),o.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Li("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Cu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=y3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=xSe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!b7(h))throw new Li("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);b7(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Li("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=mdt[t.op].call(t,l,h,e);if(o.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=X_[t.op].call(t,l,h,e);if(o.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Li("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function VL(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Li("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Cu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=l1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function gdt(e,t,n){var r=l1(e,t);if(r.test===!1)throw new Li("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function y3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Li("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(X_[e.op]){if(typeof e.path!="string")throw new Li("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Li('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Li("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Li("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&_7(e.value))throw new Li("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Li("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Li("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=TSe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Li("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Li("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function TSe(e,t,n){try{if(!Array.isArray(e))throw new Li("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)VL(Cu(t),Cu(e),n||!0);else{n=n||y3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Li)return i;throw i}}function h2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!h2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!h2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const ydt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Li,_areEquals:h2,applyOperation:l1,applyPatch:VL,applyReducer:gdt,deepClone:pdt,getValueByPointer:g3,validate:TSe,validator:y3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var DY=new WeakMap,vdt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),bdt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function _dt(e){return DY.get(e)}function wdt(e,t){return e.observers.get(t)}function Edt(e,t){e.observers.delete(t.callback)}function xdt(e,t){t.unobserve()}function Sdt(e,t){var n=[],r,i=_dt(e);if(!i)i=new vdt(e),DY.set(e,i);else{var s=wdt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Cu(e),t){r.callback=t,r.next=null;var o=function(){w7(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){w7(r),clearTimeout(r.next),Edt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new bdt(t,r)),r}function w7(e,t){t===void 0&&(t=!1);var n=DY.get(e.object);PY(n.value,e.object,e.patches,"",t),e.patches.length&&VL(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function PY(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=v7(t),o=v7(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(y7(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?PY(c,f,n,r+"/"+fv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+fv(l),value:Cu(c)}),n.push({op:"replace",path:r+"/"+fv(l),value:Cu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+fv(l),value:Cu(c)}),n.push({op:"remove",path:r+"/"+fv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!y7(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+fv(l),value:Cu(t[l])})}}}function CSe(e,t,n){n===void 0&&(n=!1);var r=[];return PY(e,t,r,"",n),r}const Tdt=Object.freeze(Object.defineProperty({__proto__:null,compare:CSe,generate:w7,observe:Sdt,unobserve:xdt},Symbol.toStringTag,{value:"Module"}));Object.assign({},ydt,Tdt,{JsonPatchError:SSe,deepClone:Cu,escapePathComponent:fv,unescapePathComponent:xSe});var JT=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(JT||{});function $D(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=ASe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=$D(i,t);return VL(a,Cu(o),!0,!1).newDocument}function Cdt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function Adt({registry:e,initialState:t}){let n=!1;const r=Hft(),i=fdt(t);function s(c){return i.backend.nodes[c]}r.listen(JT.TRAVERSAL_START,()=>{n=!0}),r.listen(JT.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return $D(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=$D(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=CSe(y,f);if(Cdt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=Xft({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=$D(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(JT.TRAVERSAL_START);const f=ASe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);kdt(p,m)?eh(p)&&d.push(...p.sideEffects.undo):eh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(JT.TRAVERSAL_END)},undo(){const{current:c}=i;return eh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return ISe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function Idt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;eh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)eh(r)&&(r=n[r.parent]),eh(i)&&(i=n[i.parent]);return r.id}function ASe(e,t,n){const r=Idt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),eh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),eh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function kdt(e,t){if(eh(e)&&e.parent===t.id)return!0;if(eh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function ISe(e,t){return{...e,children:e.children.map(n=>ISe(t[n],t)),name:`${e.label}`}}ndt();function Rdt(e){return e.length===2?ldt(e):e}class OY{static create(){return new OY}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:Rdt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),Jd(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var Ndt="Expected a function",ale=NaN,Ddt="[object Symbol]",Pdt=/^\s+|\s+$/g,Odt=/^[-+]0x[0-9a-f]+$/i,$dt=/^0b[01]+$/i,Mdt=/^0o[0-7]+$/i,Ldt=parseInt,Fdt=typeof Ks=="object"&&Ks&&Ks.Object===Object&&Ks,jdt=typeof self=="object"&&self&&self.Object===Object&&self,Bdt=Fdt||jdt||Function("return this")(),Udt=Object.prototype,zdt=Udt.toString,Vdt=Math.max,Hdt=Math.min,V8=function(){return Bdt.Date.now()};function qdt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(Ndt);t=ule(t)||0,E7(n)&&(c=!!n.leading,f="maxWait"in n,s=f?Vdt(ule(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var S=r,C=i;return r=i=void 0,l=T,o=e.apply(C,S),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var S=T-u,C=T-l,A=t-S;return f?Hdt(A,s-C):A}function g(T){var S=T-u,C=T-l;return u===void 0||S>=t||S<0||f&&C>=s}function y(){var T=V8();if(g(T))return v(T);a=setTimeout(y,m(T))}function v(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(V8())}function x(){var T=V8(),S=g(T);if(r=arguments,i=this,u=T,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return x.cancel=b,x.flush=w,x}function E7(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Wdt(e){return!!e&&typeof e=="object"}function Gdt(e){return typeof e=="symbol"||Wdt(e)&&zdt.call(e)==Ddt}function ule(e){if(typeof e=="number")return e;if(Gdt(e))return ale;if(E7(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=E7(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Pdt,"");var n=$dt.test(e);return n||Mdt.test(e)?Ldt(e.slice(2),n?2:8):Odt.test(e)?ale:+e}var Ydt=qdt;const fd=jl(Ydt);function kSe({xScale:e,yRange:t,vertPosition:n,ticks:r,isDate:i=!1,showLines:s=!0}){const o=N.useMemo(()=>r.length>1?Math.abs(r[1].offset-r[0].offset):e.range()[0]-e.range()[1],[r,e]),a=N.useCallback(u=>(i?HI("%b%e, %Y"):Xd(".2s"))(u),[i]);return _.jsxs(_.Fragment,{children:[s?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,r.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${l}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),s?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-o/2,y:10,width:o,height:20,children:_.jsx(E0,{children:_.jsx(ia,{withinPortal:!0,label:u,children:_.jsx(et,{px:2,fs:"10",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+u==0?0:a(i?new Date(u):u)})})})})]},`${u}test`))]})}const Kdt=Object.freeze(Object.defineProperty({__proto__:null,XAxis:kSe},Symbol.toStringTag,{value:"Module"}));function RSe({dataset:e,yScale:t,xRange:n,horizontalPosition:r}){const i=N.useMemo(()=>t.ticks(6).map(o=>({value:o,yOffset:t(o)})),[t]),s=N.useMemo(()=>e==="clean_stocks"?Xd(",.0%"):t.domain()[1]<5?Xd(",.2r"):Xd(",.0f"),[e,t]);return _.jsx(_.Fragment,{children:i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${r}, ${a})`,children:[_.jsx("line",{x2:`${n[1]-n[0]}`,stroke:`${o===0?"black":"gainsboro"}`,strokeWidth:o===0?1:.4}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-6px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))})}const Xdt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:RSe},Symbol.toStringTag,{value:"Module"})),Go={top:30,left:40,right:80,bottom:50};function x7({parameters:e,data:t,dataname:n,items:r,selection:i,range:s,guardrail:o}){const[a,u]=N.useState(null),l=A=>i!=null&&i.includes(A)?!a||a.length===0?!0:a.includes(A):!1,c=N.useMemo(()=>{const A=r.filter(k=>i==null?void 0:i.includes(k.name)).map(k=>k.group);return r.filter(k=>A==null?void 0:A.includes(k.group)).filter(k=>!(i!=null&&i.includes(k.name))).map(k=>k.name)},[i,r,n]),f=N.useMemo(()=>{const A=r.map(D=>D.group),R=t.filter(D=>A==null?void 0:A.includes(D[e.group_var]));return[...Jrt(R,D=>({mean:yw(D,.5,$=>$[e.y_var]),upperq:yw(D,.75,$=>$[e.y_var]),lowerq:yw(D,.25,$=>$[e.y_var])}),D=>D[e.x_var])].flatMap(([D,$])=>({date:D,mean:$.mean,upperq:$.upperq,lowerq:$.lowerq}))},[t,r,e,n]),d=n==="clean_data"?800-Go.left-Go.right-60:800-Go.left-Go.right,h=400-Go.top-Go.bottom,{yMin:p,yMax:m}=N.useMemo(()=>{let A=[];switch(o){case"super_data":A=i==null?void 0:i.concat(c);break;default:A=i;break}const R=t.filter(B=>A.includes(B[e.cat_var])).map(B=>+B[e.y_var]).filter(B=>B!==null),[k,O]=n==="clean_stocks"?JA(R):[0,JA(R)[1]],[D,$]=[ZA(f.map(B=>B.lowerq)),Hp(f.map(B=>B.upperq))],L=o==="super_summ"?ZA([k,D]):k,F=o==="super_summ"?Hp([O,$]):O;return{yMin:L,yMax:F}},[t,i,o,f,c,e,n]),g=N.useMemo(()=>s?bE([Go.left,d+Go.left]).domain(s):bE([Go.left,d+Go.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[d,s,e,n]),y=N.useMemo(()=>VI([h+Go.top,Go.top]).domain([p,m]).nice(),[h,m,p,n]),v=N.useMemo(()=>{const A=Array.from(new Set(t.map(R=>R[e.cat_var])));return UI(MG).domain(A)},[t,e,n]),b=N.useMemo(()=>{if(!g||!y)return;const A=ww();return A.x(k=>g($g("%Y-%m-%d")(k[e.x_var]))),A.y(k=>y(k[e.y_var])),A.curve(Uv),i==null?void 0:i.map(k=>({country:k,path:A(t.filter(O=>O[e.cat_var]===k))}))},[t,g,y,i,e,n]),w=N.useMemo(()=>{if(o!=="super_data")return null;const A=ww();return A.x(k=>g($g("%Y-%m-%d")(k[e.x_var]))),A.y(k=>y(k[e.y_var])),A.curve(Uv),c==null?void 0:c.map(k=>({country:k,path:A(t.filter(O=>O[e.cat_var]===k))}))},[t,g,y,o,c,e,n]),x=N.useMemo(()=>{if(o!=="super_summ")return null;const A=ww();A.x(D=>g($g("%Y-%m-%d")(D.date))),A.y(D=>y(D.mean)),A.curve(Uv);const R=A(f),k=LL();k.x(D=>g($g("%Y-%m-%d")(D.date))),k.y0(D=>y(D.lowerq)),k.y1(D=>y(D.upperq)),k.curve(Uv);const O=k(f);return{meanLine:R,confidenceBands:O,data:f}},[g,y,o,f,n]),T=N.useMemo(()=>n==="clean_stocks"?"Market Index":"Average",[n]),S=A=>A==="Eldoril North"?"Policy A":A.split(" ")[0]==="Silvoria"||A.split(" ")[0]==="Mystara"?"Policy C":A==="Average"?"all policies":"Policy B",C=N.useMemo(()=>{let R=null;switch(o){case"super_data":R=i==null?void 0:i.concat(w==null?void 0:w.map(O=>O.country));break;case"super_summ":R=i==null?void 0:i.concat([T]);break;default:R=i;break}const k=R==null?void 0:R.map(O=>({country:O,country_policy:n==="clean_data"?`${O} (${S(O)})`:O,label_pos:O===T?x==null?void 0:x.data.slice(-1).map(D=>y(D.mean))[0]:t.filter(D=>D[e.cat_var]===O).slice(-1).map(D=>y(D[e.y_var]))[0]})).sort((O,D)=>O.label_pos<D.label_pos?1:-1);if(!k)return k;for(let O=0;O<(k==null?void 0:k.length);O+=1){if(!k[O-1])continue;const D=k[O-1].label_pos-k[O].label_pos;D>=10||(k[O].label_pos=k[O].label_pos-10+D)}return k},[t,i,y,o,T,e,w,x,n]);return(i==null?void 0:i.length)===0?_.jsx(E0,{style:{width:"800px",height:"400px"},children:_.jsx(et,{fs:"italic",c:"dimmed",children:"Select an item to view the chart."})}):_.jsxs("svg",{id:"baseLineChart",style:{height:"400px",width:"800px",fontFamily:'"Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsxs("g",{id:"axes",children:[_.jsx(kSe,{isDate:!0,xScale:g,yRange:y.range(),vertPosition:h+Go.top,showLines:!1,ticks:g.ticks(6).map(A=>({value:A.toString(),offset:g(A)}))}),_.jsx(RSe,{dataset:n,yScale:y,horizontalPosition:Go.left,xRange:g.range()})]}),_.jsx("svg",{style:{width:`${d}`},children:w==null?void 0:w.map(A=>_.jsx("g",{children:_.jsx("path",{id:`${A.country}`,fill:"none",stroke:l(A.country)?v(A.country):"gray",strokeDasharray:"4,1",strokeWidth:.5,d:A.path},`${A.country}_key`)},`${A.country}_g`))},"control_lines"),_.jsx("svg",{style:{width:`${d}`},children:x?_.jsxs("g",{children:[_.jsx("path",{id:"confidenceBands",fill:"lightgray",opacity:.25,stroke:"none",d:x.confidenceBands},"confidenceBands_key"),_.jsx("path",{id:"meanLine",fill:"none",stroke:"gray",strokeDasharray:"4,1",strokeWidth:.5,d:x.meanLine},"meanLine_key")]},"summary_g"):null},"control_bands"),_.jsxs("svg",{style:{width:`${d}`},children:[b==null?void 0:b.map(A=>_.jsx("g",{children:_.jsx("path",{id:`${A.country}`,fill:"none",stroke:l(A.country)?v(A.country):"gainsboro",strokeWidth:a!=null&&a.includes(A.country)?2:1.5,d:A.path},`${A.country}_key`)},`${A.country}_g`)),C==null?void 0:C.map(A=>_.jsx("foreignObject",{x:d+Go.left+5,y:A.label_pos-7,width:Go.right+60,height:20,children:_.jsx(et,{px:2,fs:"10",color:l(A.country)?v(A.country):"silver",onMouseOver:R=>{const k=R.target;i!=null&&i.includes(k.innerText)&&u([k.innerText])},onMouseOut:()=>u([]),children:A.country_policy})},`${A.country}_label`))]},"lines")]})}const Qdt=Object.freeze(Object.defineProperty({__proto__:null,LineChart:x7,default:x7},Symbol.toStringTag,{value:"Module"})),o_={top:0,left:0,right:0,bottom:0},lle=20,H8=60;function S7({parameters:e,data:t,dataname:n,items:r,selection:i,setSelection:s,trackSelection:o,range:a,guardrail:u}){const l=N.useMemo(()=>a?bE([o_.left,H8+o_.left]).domain(a):bE([o_.left,H8+o_.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[e,a]),c=N.useMemo(()=>{const p=t.filter(y=>r==null?void 0:r.map(v=>v.name).includes(y[e.cat_var])).map(y=>+y[e.y_var]).filter(y=>y!==null),[m,g]=JA(p);return VI([lle+o_.top,o_.top]).domain([m,g]).nice()},[e,t,r]),f=N.useMemo(()=>{const p=Array.from(new Set(t.map(m=>m[e.cat_var])));return UI(MG).domain(p)},[e,t]),d=N.useMemo(()=>{if(u!=="juxt_data")return null;const p=LL();p.x(y=>l($g("%Y-%m-%d")(y[e.x_var]))),p.y0(()=>c(0)),p.y1(y=>c(y[e.y_var])),p.curve(Uv);const m=ww();return m.x(y=>l($g("%Y-%m-%d")(y[e.x_var]))),m.y(y=>c(y[e.y_var])),m.curve(Uv),r==null?void 0:r.map(y=>({country:y.name,path:m(t.filter(v=>v[e.cat_var]===y.name)),area:p(t.filter(v=>v[e.cat_var]===y.name))}))},[e,u,t,r,l,c]),h=N.useMemo(()=>e.allow_selection===!1?"none":"block",[e]);return _.jsx(Lf.Group,{defaultValue:i,dir:"vertical",onChange:p=>{s(p),o(p)},styles:e.allow_selection===!1?{root:{pointerEvents:"none"}}:{root:{pointerEvents:"auto"}},children:r==null?void 0:r.map(p=>_.jsxs(_.Fragment,{children:[p.name==="Eldoril North"?_.jsx(r1,{size:"xs",label:"Policy A",labelPosition:"left",color:"black"}):null,p.name==="Eldoril West"?_.jsx(r1,{size:"xs",label:"Policy B",labelPosition:"left",color:"black"}):null,p.name==="Silvoria North"?_.jsx(r1,{size:"xs",label:"Policy C",labelPosition:"left",color:"black"}):null,_.jsxs(Fa,{grow:!0,gutter:8,columns:2,children:[_.jsx(Fa.Col,{span:1,children:_.jsx(Lf,{value:p.name,label:p.name,color:e.allow_selection?"blue":"gray",styles:{root:{display:"flex",alignItems:"flex-end",padding:"2px 0"},inner:{display:h}},children:p.name},`${p.name}_checkbox`)},`${p.name}_grid1`),_.jsx(Fa.Col,{span:u==="juxt_data"?"auto":3,children:_.jsxs("svg",{style:{width:`${H8}`,height:`${lle}`},children:[_.jsx("path",{id:`${p.name}_sparkarea`,fill:i!=null&&i.includes(p.name)?f(p.name):"gray",stroke:"none",opacity:.25,d:d==null?void 0:d.filter(m=>m.country===p.name)[0].area},`${p.name}_sparkarea`),_.jsx("path",{id:`${p.name}_spark`,fill:"none",stroke:i!=null&&i.includes(p.name)?f(p.name):"gray",strokeWidth:.75,d:d==null?void 0:d.filter(m=>m.country===p.name)[0].path},`${p.name}_spark`)]},`${p.name}_sparksvg`)},`${p.name}_grid2`)]},`${p.name}_grid`)]}))},`${n}_checkboxgroup`)}const Jdt=Object.freeze(Object.defineProperty({__proto__:null,Sidebar:S7,default:S7},Symbol.toStringTag,{value:"Module"}));function T7({parameters:e,setRange:t,trackRange:n}){function r(s){return bE([0,100]).domain([new Date(e.start_date),new Date(e.end_date)]).invert(s)}function i(s){const o=r(s);return HI("%b %e, %Y")(o)}return _.jsx(qW,{defaultValue:[0,100],label:s=>i(s),labelAlwaysOn:!0,disabled:!e.allow_time_slider,onChange:([s,o])=>{t([r(s),r(o)]),n([r(s),r(o)])}})}const Zdt=Object.freeze(Object.defineProperty({__proto__:null,RangeSelector:T7,default:T7},Symbol.toStringTag,{value:"Module"}));function C7({guardrail:e,setGuardrail:t,dataname:n,setDataname:r,setSelection:i}){return _.jsxs(_.Fragment,{children:[_.jsx(et,{children:"Data:"}),_.jsx(iO,{value:n,onChange:s=>{r(s),i([])},data:[{value:"clean_data",label:"Viral"},{value:"clean_stocks",label:"Stock"}]}),_.jsx(et,{children:"Guardrail:"}),_.jsx(iO,{value:e,onChange:s=>{t(s)},data:[{value:"none",label:"None"},{value:"super_data",label:"Sup. Data"},{value:"super_summ",label:"Sup. Summ."},{value:"juxt_data",label:"Juxt. Data"},{value:"juxt_summ",label:"Juxt. Summ."}]})]})}const eht=Object.freeze(Object.defineProperty({__proto__:null,Selector:C7,default:C7},Symbol.toStringTag,{value:"Module"})),cr=Array.isArray;function Bu(e){return e!=null?cr(e)?e:[e]:[]}function tht(e=0,t=1/0){return`${cle(e)} < row_number() && row_number() <= ${cle(t)}`}function cle(e){return e<0?`count() + ${e}`:e}class NSe{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(tht(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Bu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function _n(e){throw Error(e)}function Ya(e){return typeof e=="number"}function di(e){return typeof e=="function"}function HL(e,t){const n=Array(e);if(di(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let nht=class extends NSe{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){_n("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){_n("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){_n("Not implemented")}getter(t){_n("Not implemented")}objects(t){_n("Not implemented")}object(t){_n("Not implemented")}[Symbol.iterator](){_n("Not implemented")}print(t={}){Ya(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=HL(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},rht=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},iht=function(e){return e&&di(e.get)?e:new rht(e)};function pm(e){return e instanceof Date}function ma(e){return e===Object(e)}function v3(e){return e instanceof RegExp}function $o(e){return typeof e=="string"}function sht(e,t){const n=r=>_n(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?fle(e.entries(),t):pm(e)?n("Date"):v3(e)?n("RegExp"):$o(e)?n():cr(e)?oht(e,t):di(e[Symbol.iterator])?aht(e,t):ma(e)?fle(Object.entries(e),t):n()}function fle(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function oht(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function aht(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:uht}=Object.prototype;function Ff(e,t){return uht.call(e,t)}function zl(e){return e?new dle({...e.data()},e.columnNames()):new dle}class dle{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Ff(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const sr=void 0,lht=Object.getPrototypeOf(Int8Array);function YI(e){return e instanceof lht}function zv(e){return cr(e)||YI(e)}function _f(e){return e!=null&&e===e}const nT=e=>zv(e)||$o(e),cht={compact:e=>zv(e)?e.filter(t=>_f(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>nT(e)?e.includes(t,n):!1,indexof:(e,t)=>nT(e)?e.indexOf(t):-1,join:(e,t)=>zv(e)?e.join(t):sr,lastindexof:(e,t)=>nT(e)?e.lastIndexOf(t):-1,length:e=>nT(e)?e.length:0,pluck:(e,t)=>zv(e)?e.map(n=>_f(n)?n[t]:sr):sr,reverse:e=>zv(e)?e.slice().reverse():$o(e)?e.split("").reverse().join(""):sr,slice:(e,t,n)=>nT(e)?e.slice(t,n):sr};function fht(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function MD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const ld=e=>(e<10?"0":"")+e,dht=e=>e<0?"-"+MD(-e,6):e>9999?"+"+MD(e,6):MD(e,4);function DSe(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return dht(e)+"-"+ld(t+1)+"-"+ld(n)+(!u||o?"T"+ld(r)+":"+ld(i)+":"+ld(s)+"."+MD(o,3)+l:s?"T"+ld(r)+":"+ld(i)+":"+ld(s)+l:i||r||!a?"T"+ld(r)+":"+ld(i)+l:"")}function PSe(e,t){return isNaN(e)?"Invalid Date":DSe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function qL(e,t){return isNaN(e)?"Invalid Date":DSe(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const hht=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function pht(e){return e.match(hht)&&!isNaN(Date.parse(e))}function mht(e,t=Date.parse){return pht(e)?t(e):e}const OSe=6e4,$Se=864e5,MSe=6048e5,Bi=new Date,zi=new Date,Qi=e=>(Bi.setTime(typeof e=="string"?mht(e):e),Bi);function ght(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function yht(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function vht(e){zi.setTime(+e),zi.setHours(0,0,0,0),Bi.setTime(+zi),Bi.setMonth(0),Bi.setDate(1);const t=(zi.getTimezoneOffset()-Bi.getTimezoneOffset())*OSe;return Math.floor(1+(zi-Bi-t)/$Se)}function bht(e){zi.setTime(+e),zi.setUTCHours(0,0,0,0);const t=Date.UTC(zi.getUTCFullYear(),0,1);return Math.floor(1+(zi-t)/$Se)}function _ht(e,t){const n=t||0;zi.setTime(+e),zi.setDate(zi.getDate()-(zi.getDay()+7-n)%7),zi.setHours(0,0,0,0),Bi.setTime(+e),Bi.setMonth(0),Bi.setDate(1),Bi.setDate(1-(Bi.getDay()+7-n)%7),Bi.setHours(0,0,0,0);const r=(zi.getTimezoneOffset()-Bi.getTimezoneOffset())*OSe;return Math.floor((1+(zi-Bi)-r)/MSe)}function wht(e,t){const n=t||0;return zi.setTime(+e),zi.setUTCDate(zi.getUTCDate()-(zi.getUTCDay()+7-n)%7),zi.setUTCHours(0,0,0,0),Bi.setTime(+e),Bi.setUTCMonth(0),Bi.setUTCDate(1),Bi.setUTCDate(1-(Bi.getUTCDay()+7-n)%7),Bi.setUTCHours(0,0,0,0),Math.floor((1+(zi-Bi))/MSe)}const Eht={format_date:(e,t)=>PSe(Qi(e),!t),format_utcdate:(e,t)=>qL(Qi(e),!t),timestamp:e=>+Qi(e),year:e=>Qi(e).getFullYear(),quarter:e=>Math.floor(Qi(e).getMonth()/3),month:e=>Qi(e).getMonth(),date:e=>Qi(e).getDate(),dayofweek:e=>Qi(e).getDay(),hours:e=>Qi(e).getHours(),minutes:e=>Qi(e).getMinutes(),seconds:e=>Qi(e).getSeconds(),milliseconds:e=>Qi(e).getMilliseconds(),utcyear:e=>Qi(e).getUTCFullYear(),utcquarter:e=>Math.floor(Qi(e).getUTCMonth()/3),utcmonth:e=>Qi(e).getUTCMonth(),utcdate:e=>Qi(e).getUTCDate(),utcdayofweek:e=>Qi(e).getUTCDay(),utchours:e=>Qi(e).getUTCHours(),utcminutes:e=>Qi(e).getUTCMinutes(),utcseconds:e=>Qi(e).getUTCSeconds(),utcmilliseconds:e=>Qi(e).getUTCMilliseconds(),datetime:ght,dayofyear:vht,week:_ht,utcdatetime:yht,utcdayofyear:bht,utcweek:wht,now:Date.now};function $Y(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:pm(e)||pm(t)?+e==+t:v3(e)&&v3(t)?e+""==t+"":ma(e)&&ma(t)?xht(e,t):!1}function xht(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return hle(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!hle(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!$Y(e[o],t[o]))return!1}return!0}function hle(e,t,n=$Y){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const Sht={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let Tht=Math.random;function Ux(){return Tht()}const Cht={random:Ux,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function MY(e){return e instanceof Map}function Aht(e){return e instanceof Set}function LD(e){return MY(e)||Aht(e)}function q8(e){return Array.from(e)}const Iht={has:(e,t)=>LD(e)?e.has(t):e!=null?Ff(e,t):!1,keys:e=>MY(e)?q8(e.keys()):e!=null?Object.keys(e):[],values:e=>LD(e)?q8(e.values()):e!=null?Object.values(e):[],entries:e=>LD(e)?q8(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):sr};function kht(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Ff(t,e))return t[e];return n!==void 0?n:e}function Rht(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const Nht={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},Q_={bin:fht,equal:$Y,recode:kht,sequence:Rht,...cht,...Eht,...Sht,...Cht,...Iht,...Nht};function p2(e){return typeof e=="bigint"}function dh(e){return e===void 0?e+"":p2(e)?e+"n":JSON.stringify(e)}function mn(e,t=[],n=[]){return new Dht(e,Bu(t),Bu(n))}let Dht=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${dh(n)}]`),...this.params.map(dh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const LSe=e=>mn("any",e),FSe=()=>mn("count"),jSe=e=>mn("array_agg",e),BSe=e=>mn("array_agg_distinct",e),USe=(e,t)=>mn("map_agg",[e,t]),zSe=(e,t)=>mn("object_agg",[e,t]),VSe=(e,t)=>mn("entries_agg",[e,t]);({...Q_});function Pht(e,t){e=LD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Oht(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function $ht(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Mht(e,t,n,r){const i=r==="map"||r===!0?USe:r==="entries"?VSe:r==="object"?zSe:_n('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=Pht(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:jSe(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const Lht="ArrayPattern",Fht="ArrowFunctionExpression",jht="FunctionExpression",s0="Identifier",zx="Literal",HSe="MemberExpression",Bht="ObjectExpression",qSe="ObjectPattern",WSe="Property",KI="Column",Uht="Constant",zht="Dictionary",Vht="Function",Hht="Parameter",GSe="Op",Qr=(e,t)=>{const n=qht[e.type];return n?n(e,t):_n(`Unsupported expression construct: ${e.type}`)},W8=(e,t)=>"("+Qr(e.left,t)+" "+e.operator+" "+Qr(e.right,t)+")",G8=(e,t)=>"("+yd(e.params,t)+")=>"+Qr(e.body,t),ple=(e,t)=>Qr(e.callee,t)+"("+yd(e.arguments,t)+")",yd=(e,t,n=",")=>e.map(r=>Qr(r,t)).join(n),YSe=e=>e.computed?`[${dh(e.name)}]`:`.${e.name}`,mle=(e,t,n)=>{const r=e.table||"";return`data${r}${YSe(e)}.${n}(${t.index}${r})`},qht={Constant:e=>e.raw,Column:(e,t)=>mle(e,t,"get"),Dictionary:(e,t)=>mle(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${YSe(e)}`,Op:(e,t)=>`op(${dh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Qr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Qr(e.object,t),i=Qr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:ple,NewExpression:(e,t)=>"new "+ple(e,t),ArrayExpression:(e,t)=>"["+yd(e.elements,t)+"]",AssignmentExpression:W8,BinaryExpression:W8,LogicalExpression:W8,UnaryExpression:(e,t)=>"("+e.operator+Qr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Qr(e.test,t)+"?"+Qr(e.consequent,t)+":"+Qr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+yd(e.properties,t)+"})",Property:(e,t)=>{const n=Qr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Qr(e.value,t)},ArrowFunctionExpression:G8,FunctionExpression:G8,FunctionDeclaration:G8,ArrayPattern:(e,t)=>"["+yd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+yd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+yd(e.declarations,t,","),VariableDeclarator:(e,t)=>Qr(e.id,t)+"="+Qr(e.init,t),SpreadElement:(e,t)=>"..."+Qr(e.argument,t),BlockStatement:(e,t)=>"{"+yd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Qr(e.expression,t),IfStatement:(e,t)=>"if ("+Qr(e.test,t)+")"+Qr(e.consequent,t)+(e.alternate?" else "+Qr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Qr(e.discriminant,t)+") {"+yd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Qr(e.test,t):"default")+": "+yd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Qr(e.argument,t),Program:(e,t)=>Qr(e.body[0],t)};function b3(e,t={index:"row"}){return Qr(e,t)}function Wht(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function xE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:pm(e)?+e:cr(e)||YI(e)?`[${e.map(xE)}]`:v3(e)?e+"":Ght(e)}function Ght(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${xE(e[r])}`;return t+="}",t}function _3(e,t){const n=e.length;return n===1?(r,i)=>xE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=xE(a)}return s}}function Yht(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=xE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=xE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function yp(){}function Kht(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function vs(e){return e.init=e.init||yp,e.add=e.add||yp,e.rem=e.rem||yp,e}function gle(e,t){return e.product_v=!1,e.product=t}const KSe={count:{create:()=>vs({value:e=>e.count}),param:[]},array_agg:{create:()=>vs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>vs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>vs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>vs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>vs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:sr}),param:[1]},valid:{create:()=>vs({value:e=>e.valid}),param:[1]},invalid:{create:()=>vs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Yht(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>vs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>vs({value:e=>{let t=sr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:sr,add:(e,t)=>p2(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>gle(e,1),value:e=>e.valid?e.product_v?gle(e,Kht(e.list.values())):e.product:void 0,add:(e,t)=>p2(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:sr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>vs({value:e=>e.valid?e.mean:sr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):sr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>vs({value:e=>e.valid>1?e.dev/e.valid:sr}),param:[1],req:["variance"]},stdev:{create:()=>vs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):sr}),param:[1],req:["variance"]},stdevp:{create:()=>vs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):sr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=sr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===sr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=sr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===sr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>vs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>vs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):sr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>vs({value:e=>e.valid>1?e.cov/e.valid:sr}),param:[2],req:["covariance"]},corr:{create:()=>vs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):sr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>vs({value:i=>Wht(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},yle={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},vle={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},XSe={row_number:{create(){return{init:yp,value:e=>e.index+1}},param:[]},rank:yle,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=yle.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:vle,ntile:{create(e){e=+e,e>0||_n("ntile num must be greater than zero.");const{init:t,value:n}=vle.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=sr){return e=+e||1,{init:yp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=sr){return e=+e||1,{init:yp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:yp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:yp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||_n("nth_value nth must be greater than zero."),{init:yp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):sr}}},param:[1,1]},fill_down:{create(e=sr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return _f(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=sr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Xht(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Xht(e,t,n){for(const r=e.size;n<r;++n)if(_f(e.value(n,t)))return n;return-1}function LY(e){return Ff(KSe,e)}function FY(e){return Ff(XSe,e)}function QSe(e){return Ff(Q_,e)||e==="row_object"}function JSe(e){return LY(e)&&KSe[e]}function ZSe(e){return FY(e)&&XSe[e]}function rT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const jY={escape:(e,t,n)=>rT(e,t,n),expr:(e,t)=>rT(`(row,data,op)=>${e}`,Q_,t),expr2:(e,t)=>rT(`(row0,data0,row,data)=>${e}`,Q_,t),join:(e,t)=>rT(`(row1,data1,row2,data2)=>${e}`,Q_,t),param:(e,t)=>rT(e,Q_,t)},Qht={"==":1,"!=":1,"===":1,"!==":1};function eTe(e,t,n=0,r,i){if(e.type=KI,e.name=t,e.table=n,i&&r&&di(r.keyFor)){const s=Qht[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===zx&&Jht(i,e,s,r.keyFor(s.value))}return e}function Jht(e,t,n,r){return r<0?(e.type=zx,e.value=!1,e.raw="false"):(t.type=zht,n.value=r,n.raw=r+""),!0}function WL(e){return cr(e)?e:MY(e)?e.entries():e?Object.entries(e):[]}const tTe="row_object";function nTe(e,t){e.type=Bht;const n=e.properties=[];for(const r of WL(t)){const[i,s]=cr(r)?r:[r,r];n.push({type:WSe,key:{type:zx,raw:dh(s)},value:eTe({computed:!0},i)})}return e}function rTe(e){return b3(nTe({},e))}function iTe(e){return jY.expr(rTe(e))}const Zht=new TextDecoder("utf-8"),A7=e=>Zht.decode(e),ept=new TextEncoder,BY=e=>ept.encode(e),tpt=e=>typeof e=="boolean",du=e=>typeof e=="function",Ey=e=>e!=null&&Object(e)===e,GL=e=>Ey(e)&&du(e.then),UY=e=>Ey(e)&&du(e[Symbol.iterator]),YL=e=>Ey(e)&&du(e[Symbol.asyncIterator]),npt=e=>Ey(e)&&"done"in e&&"value"in e,sTe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,rpt=e=>Ey(e)&&du(e.abort)&&du(e.getWriter)&&!sTe(e),ipt=e=>Ey(e)&&du(e.end)&&du(e.write)&&tpt(e.writable)&&!sTe(e),spt=e=>Ey(e)&&du(e.clear)&&du(e.bytes)&&du(e.position)&&du(e.setPosition)&&du(e.capacity)&&du(e.getBufferIdentifier)&&du(e.createLong),zY=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function opt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function w3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function hh(e,t){const n=opt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?w3(o,s,a):o=s;break}w3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function zs(e,t){let n=npt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=BY(n)),n instanceof ArrayBuffer?new e(n):n instanceof zY?new e(n):spt(n)?zs(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const iT=e=>zs(Int32Array,e),Rr=e=>zs(Uint8Array,e),I7=e=>(e.next(),e);function*apt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof zY?n(t):UY(t)?t:n(t);return yield*I7(function*(i){let s=null;do s=i.next(yield zs(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const upt=e=>apt(Uint8Array,e);function oTe(e,t){return $v(this,arguments,function*(){if(GL(t))return yield Wn(yield Wn(yield*b5(PC(oTe(e,yield Wn(t))))));const r=function(o){return $v(this,arguments,function*(){yield yield Wn(yield Wn(o))})},i=function(o){return $v(this,arguments,function*(){yield Wn(yield*b5(PC(I7(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof zY?r(t):UY(t)?i(t):YL(t)?t:r(t);return yield Wn(yield*b5(PC(I7(function(o){return $v(this,arguments,function*(){let a=null;do a=yield Wn(o.next(yield yield Wn(zs(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Wn(new e)})}const lpt=e=>oTe(Uint8Array,e);function aTe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function cpt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const ble={fromIterable(e){return hN(fpt(e))},fromAsyncIterable(e){return hN(dpt(e))},fromDOMStream(e){return hN(hpt(e))},fromNodeStream(e){return hN(mpt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},hN=e=>(e.next(),e);function*fpt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?hh(r,o)[0]:([i,r,a]=hh(r,o),i)}({cmd:s,size:o}=yield null);const l=upt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function dpt(e){return $v(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?hh(i,a)[0]:([s,i,u]=hh(i,a),s)}({cmd:o,size:a}=yield yield Wn(null));const c=lpt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Wn(c.next()):yield Wn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Wn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Wn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Wn(c.return(new Uint8Array(0))))}return yield Wn(null)})}function hpt(e){return $v(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?hh(i,a)[0]:([s,i,u]=hh(i,a),s)}({cmd:o,size:a}=yield yield Wn(null));const c=new ppt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Wn(c.read()):yield Wn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Rr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Wn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Wn(c.cancel(f)))}finally{r===!1?yield Wn(c.cancel()):e.locked&&c.releaseLock()}return yield Wn(null)})}class ppt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return wp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return wp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Rr(n)),n})}}const Y8=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function mpt(e){return $v(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?hh(l,a)[0]:([c,l,u]=hh(l,a),c)}if({cmd:o,size:a}=yield yield Wn(null),e.isTTY)return yield yield Wn(new Uint8Array(0)),yield Wn(null);try{n[0]=Y8(e,"end"),n[1]=Y8(e,"error");do{if(n[2]=Y8(e,"readable"),[r,s]=yield Wn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Rr(e.read(a-u)),c.byteLength<a-u&&(c=Rr(e.read()))):c=Rr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Wn(f()));while(a<u)}while(!i)}finally{yield Wn(d(n,r==="error"?s:null))}return yield Wn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var La;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(La||(La={}));var Uu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Uu||(Uu={}));var Co;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Co||(Co={}));var ph;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(ph||(ph={}));var Ht;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Ht||(Ht={}));var mh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(mh||(mh={}));var qs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(qs||(qs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var fp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(fp||(fp={}));const gpt=void 0;function M1(e){if(e===null)return"null";if(e===gpt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>M1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const ypt=Symbol.for("isArrowBigNum");function Kf(e,...t){return t.length===0?Object.setPrototypeOf(zs(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}Kf.prototype[ypt]=!0;Kf.prototype.toJSON=function(){return`"${g2(this)}"`};Kf.prototype.valueOf=function(){return uTe(this)};Kf.prototype.toString=function(){return g2(this)};Kf.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return uTe(this);case"string":return g2(this);case"default":return vpt(this)}return g2(this)};function Cw(...e){return Kf.apply(this,e)}function Aw(...e){return Kf.apply(this,e)}function m2(...e){return Kf.apply(this,e)}Object.setPrototypeOf(Cw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Aw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(m2.prototype,Object.create(Uint32Array.prototype));Object.assign(Cw.prototype,Kf.prototype,{constructor:Cw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Aw.prototype,Kf.prototype,{constructor:Aw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(m2.prototype,Kf.prototype,{constructor:m2,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function uTe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const g2=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return K8(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return K8(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${K8(t)}`},vpt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:g2(e);function K8(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class VY{static new(t,n){switch(n){case!0:return new Cw(t);case!1:return new Aw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Cw(t)}return t.byteLength===16?new m2(t):new Aw(t)}static signed(t){return new Cw(t)}static unsigned(t){return new Aw(t)}static decimal(t){return new m2(t)}constructor(t,n){return VY.new(t,n)}}function jf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var lTe,cTe,fTe,dTe,hTe,pTe,mTe,gTe,yTe,vTe,bTe,_Te,wTe,ETe,xTe,STe,TTe,CTe,ATe,ITe;let wn=class k7{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return k7.isUnion(t)&&t.mode===Uu.Dense}static isSparseUnion(t){return k7.isUnion(t)&&t.mode===Uu.Sparse}get typeId(){return re.NONE}};lTe=Symbol.toStringTag;wn[lTe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(wn.prototype);let mm=class extends wn{toString(){return"Null"}get typeId(){return re.Null}};cTe=Symbol.toStringTag;mm[cTe]=(e=>e[Symbol.toStringTag]="Null")(mm.prototype);class Ka extends wn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}fTe=Symbol.toStringTag;Ka[fTe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(Ka.prototype);class HY extends Ka{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class qY extends Ka{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class D0 extends Ka{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class WY extends Ka{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class GY extends Ka{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class YY extends Ka{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class KY extends Ka{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class XY extends Ka{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(HY.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(qY.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(D0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(WY.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(GY.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(YY.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(KY.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(XY.prototype,"ArrayType",{value:BigUint64Array});class P0 extends wn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Co.HALF:return Uint16Array;case Co.SINGLE:return Float32Array;case Co.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}dTe=Symbol.toStringTag;P0[dTe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(P0.prototype);class kTe extends P0{constructor(){super(Co.HALF)}}class QY extends P0{constructor(){super(Co.SINGLE)}}class JY extends P0{constructor(){super(Co.DOUBLE)}}Object.defineProperty(kTe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(QY.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(JY.prototype,"ArrayType",{value:Float64Array});let y2=class extends wn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};hTe=Symbol.toStringTag;y2[hTe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(y2.prototype);let SE=class extends wn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};pTe=Symbol.toStringTag;SE[pTe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(SE.prototype);let v2=class extends wn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};mTe=Symbol.toStringTag;v2[mTe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(v2.prototype);let E3=class extends wn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};gTe=Symbol.toStringTag;E3[gTe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(E3.prototype);class TE extends wn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${ph[this.unit]}>`}}yTe=Symbol.toStringTag;TE[yTe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(TE.prototype);class bpt extends TE{constructor(){super(ph.DAY)}}class _pt extends TE{constructor(){super(ph.MILLISECOND)}}class gm extends wn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Ht[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}vTe=Symbol.toStringTag;gm[vTe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(gm.prototype);class wpt extends gm{constructor(){super(Ht.SECOND,32)}}class Ept extends gm{constructor(){super(Ht.MILLISECOND,32)}}class xpt extends gm{constructor(){super(Ht.MICROSECOND,64)}}class Spt extends gm{constructor(){super(Ht.NANOSECOND,64)}}class x3 extends wn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Ht[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}bTe=Symbol.toStringTag;x3[bTe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(x3.prototype);class CE extends wn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${mh[this.unit]}>`}}_Te=Symbol.toStringTag;CE[_Te]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(CE.prototype);class Tpt extends CE{constructor(){super(mh.DAY_TIME)}}class Cpt extends CE{constructor(){super(mh.YEAR_MONTH)}}let S3=class extends wn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Ht[this.unit]}>`}};wTe=Symbol.toStringTag;S3[wTe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(S3.prototype);let AE=class extends wn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};ETe=Symbol.toStringTag;AE[ETe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(AE.prototype);class sa extends wn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}xTe=Symbol.toStringTag;sa[xTe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(sa.prototype);class b2 extends wn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}STe=Symbol.toStringTag;b2[STe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(b2.prototype);let T3=class extends wn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};TTe=Symbol.toStringTag;T3[TTe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(T3.prototype);let IE=class extends wn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};CTe=Symbol.toStringTag;IE[CTe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(IE.prototype);class _2 extends wn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}ATe=Symbol.toStringTag;_2[ATe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(_2.prototype);const Apt=(e=>()=>++e)(-1);class O0 extends wn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?Apt():jf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}ITe=Symbol.toStringTag;O0[ITe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(O0.prototype);function _d(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class En{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Ipt(this,t,n)}getVisitFnByTypeId(t,n=!0){return S_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function Ipt(e,t,n=!0){return typeof t=="number"?S_(e,t,n):typeof t=="string"&&t in re?S_(e,re[t],n):t&&t instanceof wn?S_(e,_le(t),n):t!=null&&t.type&&t.type instanceof wn?S_(e,_le(t.type),n):S_(e,re.NONE,n)}function S_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function _le(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Co.HALF:return re.Float16;case Co.SINGLE:return re.Float32;case Co.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Ht.SECOND:return re.TimeSecond;case Ht.MILLISECOND:return re.TimeMillisecond;case Ht.MICROSECOND:return re.TimeMicrosecond;case Ht.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Ht.SECOND:return re.TimestampSecond;case Ht.MILLISECOND:return re.TimestampMillisecond;case Ht.MICROSECOND:return re.TimestampMicrosecond;case Ht.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case ph.DAY:return re.DateDay;case ph.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case mh.DAY_TIME:return re.IntervalDayTime;case mh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Ht.SECOND:return re.DurationSecond;case Ht.MILLISECOND:return re.DurationMillisecond;case Ht.MICROSECOND:return re.DurationMicrosecond;case Ht.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Uu.Dense:return re.DenseUnion;case Uu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}En.prototype.visitInt8=null;En.prototype.visitInt16=null;En.prototype.visitInt32=null;En.prototype.visitInt64=null;En.prototype.visitUint8=null;En.prototype.visitUint16=null;En.prototype.visitUint32=null;En.prototype.visitUint64=null;En.prototype.visitFloat16=null;En.prototype.visitFloat32=null;En.prototype.visitFloat64=null;En.prototype.visitDateDay=null;En.prototype.visitDateMillisecond=null;En.prototype.visitTimestampSecond=null;En.prototype.visitTimestampMillisecond=null;En.prototype.visitTimestampMicrosecond=null;En.prototype.visitTimestampNanosecond=null;En.prototype.visitTimeSecond=null;En.prototype.visitTimeMillisecond=null;En.prototype.visitTimeMicrosecond=null;En.prototype.visitTimeNanosecond=null;En.prototype.visitDenseUnion=null;En.prototype.visitSparseUnion=null;En.prototype.visitIntervalDayTime=null;En.prototype.visitIntervalYearMonth=null;En.prototype.visitDuration=null;En.prototype.visitDurationSecond=null;En.prototype.visitDurationMillisecond=null;En.prototype.visitDurationMicrosecond=null;En.prototype.visitDurationNanosecond=null;const RTe=new Float64Array(1),a_=new Uint32Array(RTe.buffer);function NTe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function DTe(e){if(e!==e)return 32256;RTe[0]=e;const t=(a_[1]&2147483648)>>16&65535;let n=a_[1]&2146435072,r=0;return n>=1089470464?a_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(a_[1]&1048575)>>10):n<=1056964608?(r=1048576+(a_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(a_[1]&1048575)+512>>10),t|n|r&65535}class Xt extends En{}function tn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const kpt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},ZY=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},Rpt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},Npt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},PTe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},Dpt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Lm=({values:e},t,n)=>{e[t]=n},eK=({values:e},t,n)=>{e[t]=n},OTe=({values:e},t,n)=>{e[t]=DTe(n)},Ppt=(e,t,n)=>{switch(e.type.precision){case Co.HALF:return OTe(e,t,n);case Co.SINGLE:case Co.DOUBLE:return eK(e,t,n)}},tK=({values:e},t,n)=>{kpt(e,t,n.valueOf())},nK=({values:e},t,n)=>{ZY(e,t*2,n.valueOf())},$Te=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},Opt=({values:e,valueOffsets:t},n,r)=>PTe(e,t,n,r),$pt=({values:e,valueOffsets:t},n,r)=>{PTe(e,t,n,BY(r))},MTe=(e,t,n)=>{e.type.unit===ph.DAY?tK(e,t,n):nK(e,t,n)},rK=({values:e},t,n)=>ZY(e,t*2,n/1e3),iK=({values:e},t,n)=>ZY(e,t*2,n),sK=({values:e},t,n)=>Rpt(e,t*2,n),oK=({values:e},t,n)=>Npt(e,t*2,n),LTe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return rK(e,t,n);case Ht.MILLISECOND:return iK(e,t,n);case Ht.MICROSECOND:return sK(e,t,n);case Ht.NANOSECOND:return oK(e,t,n)}},aK=({values:e},t,n)=>{e[t]=n},uK=({values:e},t,n)=>{e[t]=n},lK=({values:e},t,n)=>{e[t]=n},cK=({values:e},t,n)=>{e[t]=n},FTe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return aK(e,t,n);case Ht.MILLISECOND:return uK(e,t,n);case Ht.MICROSECOND:return lK(e,t,n);case Ht.NANOSECOND:return cK(e,t,n)}},jTe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},Mpt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Ec.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},Lpt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Ec.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},Fpt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),jpt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),Bpt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),Upt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),zpt=(e,t,n)=>{const r=e.type.children.map(s=>Ec.getVisitFn(s.type)),i=n instanceof Map?Bpt(t,n):n instanceof fr?jpt(t,n):Array.isArray(n)?Fpt(t,n):Upt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},Vpt=(e,t,n)=>{e.type.mode===Uu.Dense?BTe(e,t,n):UTe(e,t,n)},BTe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Ec.visit(i,e.valueOffsets[t],n)},UTe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Ec.visit(i,t,n)},Hpt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},zTe=(e,t,n)=>{e.type.unit===mh.DAY_TIME?fK(e,t,n):dK(e,t,n)},fK=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},dK=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},hK=({values:e},t,n)=>{e[t]=n},pK=({values:e},t,n)=>{e[t]=n},mK=({values:e},t,n)=>{e[t]=n},gK=({values:e},t,n)=>{e[t]=n},VTe=(e,t,n)=>{switch(e.type.unit){case Ht.SECOND:return hK(e,t,n);case Ht.MILLISECOND:return pK(e,t,n);case Ht.MICROSECOND:return mK(e,t,n);case Ht.NANOSECOND:return gK(e,t,n)}},qpt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Ec.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Xt.prototype.visitBool=tn(Dpt);Xt.prototype.visitInt=tn(Lm);Xt.prototype.visitInt8=tn(Lm);Xt.prototype.visitInt16=tn(Lm);Xt.prototype.visitInt32=tn(Lm);Xt.prototype.visitInt64=tn(Lm);Xt.prototype.visitUint8=tn(Lm);Xt.prototype.visitUint16=tn(Lm);Xt.prototype.visitUint32=tn(Lm);Xt.prototype.visitUint64=tn(Lm);Xt.prototype.visitFloat=tn(Ppt);Xt.prototype.visitFloat16=tn(OTe);Xt.prototype.visitFloat32=tn(eK);Xt.prototype.visitFloat64=tn(eK);Xt.prototype.visitUtf8=tn($pt);Xt.prototype.visitBinary=tn(Opt);Xt.prototype.visitFixedSizeBinary=tn($Te);Xt.prototype.visitDate=tn(MTe);Xt.prototype.visitDateDay=tn(tK);Xt.prototype.visitDateMillisecond=tn(nK);Xt.prototype.visitTimestamp=tn(LTe);Xt.prototype.visitTimestampSecond=tn(rK);Xt.prototype.visitTimestampMillisecond=tn(iK);Xt.prototype.visitTimestampMicrosecond=tn(sK);Xt.prototype.visitTimestampNanosecond=tn(oK);Xt.prototype.visitTime=tn(FTe);Xt.prototype.visitTimeSecond=tn(aK);Xt.prototype.visitTimeMillisecond=tn(uK);Xt.prototype.visitTimeMicrosecond=tn(lK);Xt.prototype.visitTimeNanosecond=tn(cK);Xt.prototype.visitDecimal=tn(jTe);Xt.prototype.visitList=tn(Mpt);Xt.prototype.visitStruct=tn(zpt);Xt.prototype.visitUnion=tn(Vpt);Xt.prototype.visitDenseUnion=tn(BTe);Xt.prototype.visitSparseUnion=tn(UTe);Xt.prototype.visitDictionary=tn(Hpt);Xt.prototype.visitInterval=tn(zTe);Xt.prototype.visitIntervalDayTime=tn(fK);Xt.prototype.visitIntervalYearMonth=tn(dK);Xt.prototype.visitDuration=tn(VTe);Xt.prototype.visitDurationSecond=tn(hK);Xt.prototype.visitDurationMillisecond=tn(pK);Xt.prototype.visitDurationMicrosecond=tn(mK);Xt.prototype.visitDurationNanosecond=tn(gK);Xt.prototype.visitFixedSizeList=tn(qpt);Xt.prototype.visitMap=tn(Lpt);const Ec=new Xt,sf=Symbol.for("parent"),Iw=Symbol.for("rowIndex");class yK{constructor(t,n){return this[sf]=t,this[Iw]=n,new Proxy(this,new Gpt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Iw],n=this[sf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=zu.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${M1(t)}: ${M1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Wpt(this[sf],this[Iw])}}class Wpt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,zu.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(yK.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[sf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Iw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Gpt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[sf].type.children.map(n=>n.name)}has(t,n){return t[sf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[sf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[sf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=zu.visit(t[sf].children[r],t[Iw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[sf].type.children.findIndex(s=>s.name===n);return i!==-1?(Ec.visit(t[sf].children[i],t[Iw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Wt extends En{}function Qt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const Ypt=(e,t)=>864e5*e[t],vK=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Kpt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,Xpt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,HTe=e=>new Date(e),Qpt=(e,t)=>HTe(Ypt(e,t)),Jpt=(e,t)=>HTe(vK(e,t)),Zpt=(e,t)=>null,qTe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},emt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},WTe=({values:e},t)=>Qpt(e,t),GTe=({values:e},t)=>Jpt(e,t*2),xy=({stride:e,values:t},n)=>t[e*n],tmt=({stride:e,values:t},n)=>NTe(t[e*n]),YTe=({values:e},t)=>e[t],nmt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),rmt=({values:e,valueOffsets:t},n)=>qTe(e,t,n),imt=({values:e,valueOffsets:t},n)=>{const r=qTe(e,t,n);return r!==null?A7(r):null},smt=({values:e},t)=>e[t],omt=({type:e,values:t},n)=>e.precision!==Co.HALF?t[n]:NTe(t[n]),amt=(e,t)=>e.type.unit===ph.DAY?WTe(e,t):GTe(e,t),KTe=({values:e},t)=>1e3*vK(e,t*2),XTe=({values:e},t)=>vK(e,t*2),QTe=({values:e},t)=>Kpt(e,t*2),JTe=({values:e},t)=>Xpt(e,t*2),umt=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return KTe(e,t);case Ht.MILLISECOND:return XTe(e,t);case Ht.MICROSECOND:return QTe(e,t);case Ht.NANOSECOND:return JTe(e,t)}},ZTe=({values:e},t)=>e[t],eCe=({values:e},t)=>e[t],tCe=({values:e},t)=>e[t],nCe=({values:e},t)=>e[t],lmt=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return ZTe(e,t);case Ht.MILLISECOND:return eCe(e,t);case Ht.MICROSECOND:return tCe(e,t);case Ht.NANOSECOND:return nCe(e,t)}},cmt=({values:e,stride:t},n)=>VY.decimal(e.subarray(t*n,t*(n+1))),fmt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new fr([u])},dmt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new KL(o.slice(i,s-i))},hmt=(e,t)=>new yK(e,t),pmt=(e,t)=>e.type.mode===Uu.Dense?rCe(e,t):iCe(e,t),rCe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return zu.visit(r,e.valueOffsets[t])},iCe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return zu.visit(r,t)},mmt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},gmt=(e,t)=>e.type.unit===mh.DAY_TIME?sCe(e,t):oCe(e,t),sCe=({values:e},t)=>e.subarray(2*t,2*(t+1)),oCe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},aCe=({values:e},t)=>e[t],uCe=({values:e},t)=>e[t],lCe=({values:e},t)=>e[t],cCe=({values:e},t)=>e[t],ymt=(e,t)=>{switch(e.type.unit){case Ht.SECOND:return aCe(e,t);case Ht.MILLISECOND:return uCe(e,t);case Ht.MICROSECOND:return lCe(e,t);case Ht.NANOSECOND:return cCe(e,t)}},vmt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new fr([s])};Wt.prototype.visitNull=Qt(Zpt);Wt.prototype.visitBool=Qt(emt);Wt.prototype.visitInt=Qt(smt);Wt.prototype.visitInt8=Qt(xy);Wt.prototype.visitInt16=Qt(xy);Wt.prototype.visitInt32=Qt(xy);Wt.prototype.visitInt64=Qt(YTe);Wt.prototype.visitUint8=Qt(xy);Wt.prototype.visitUint16=Qt(xy);Wt.prototype.visitUint32=Qt(xy);Wt.prototype.visitUint64=Qt(YTe);Wt.prototype.visitFloat=Qt(omt);Wt.prototype.visitFloat16=Qt(tmt);Wt.prototype.visitFloat32=Qt(xy);Wt.prototype.visitFloat64=Qt(xy);Wt.prototype.visitUtf8=Qt(imt);Wt.prototype.visitBinary=Qt(rmt);Wt.prototype.visitFixedSizeBinary=Qt(nmt);Wt.prototype.visitDate=Qt(amt);Wt.prototype.visitDateDay=Qt(WTe);Wt.prototype.visitDateMillisecond=Qt(GTe);Wt.prototype.visitTimestamp=Qt(umt);Wt.prototype.visitTimestampSecond=Qt(KTe);Wt.prototype.visitTimestampMillisecond=Qt(XTe);Wt.prototype.visitTimestampMicrosecond=Qt(QTe);Wt.prototype.visitTimestampNanosecond=Qt(JTe);Wt.prototype.visitTime=Qt(lmt);Wt.prototype.visitTimeSecond=Qt(ZTe);Wt.prototype.visitTimeMillisecond=Qt(eCe);Wt.prototype.visitTimeMicrosecond=Qt(tCe);Wt.prototype.visitTimeNanosecond=Qt(nCe);Wt.prototype.visitDecimal=Qt(cmt);Wt.prototype.visitList=Qt(fmt);Wt.prototype.visitStruct=Qt(hmt);Wt.prototype.visitUnion=Qt(pmt);Wt.prototype.visitDenseUnion=Qt(rCe);Wt.prototype.visitSparseUnion=Qt(iCe);Wt.prototype.visitDictionary=Qt(mmt);Wt.prototype.visitInterval=Qt(gmt);Wt.prototype.visitIntervalDayTime=Qt(sCe);Wt.prototype.visitIntervalYearMonth=Qt(oCe);Wt.prototype.visitDuration=Qt(ymt);Wt.prototype.visitDurationSecond=Qt(aCe);Wt.prototype.visitDurationMillisecond=Qt(uCe);Wt.prototype.visitDurationMicrosecond=Qt(lCe);Wt.prototype.visitDurationNanosecond=Qt(cCe);Wt.prototype.visitFixedSizeList=Qt(vmt);Wt.prototype.visitMap=Qt(dmt);const zu=new Wt,mf=Symbol.for("keys"),kw=Symbol.for("vals");class KL{constructor(t){return this[mf]=new fr([t.children[0]]).memoize(),this[kw]=t.children[1],new Proxy(this,new _mt)}[Symbol.iterator](){return new bmt(this[mf],this[kw])}get size(){return this[mf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[mf],n=this[kw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=zu.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${M1(t)}: ${M1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class bmt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),zu.visit(this.vals,t)]})}}class _mt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[mf].toArray().map(String)}has(t,n){return t[mf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[mf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[mf].indexOf(n);if(r!==-1){const i=zu.visit(Reflect.get(t,kw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[mf].indexOf(n);return i!==-1?(Ec.visit(Reflect.get(t,kw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(KL.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[mf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[kw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let wle;function fCe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(wle=s,s=o,o=wle),o>i&&(o=i),r?r(e,s,o):[s,o]}const Ele=e=>e!==e;function Vx(e){if(typeof e!=="object"||e===null)return Ele(e)?Ele:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?cpt(e,n):!1:e instanceof Map?Emt(e):Array.isArray(e)?wmt(e):e instanceof fr?xmt(e):Smt(e,!0)}function wmt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Vx(e[n]);return XL(t)}function Emt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=Vx(r);return XL(n)}function xmt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=Vx(e.get(n));return XL(t)}function Smt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=Vx(e[n[i]]);return XL(r,n)}function XL(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return Tmt(e,n);case Map:return xle(e,n,n.keys());case KL:case yK:case Object:case void 0:return xle(e,n,t||Object.keys(n))}return n instanceof fr?Cmt(e,n):!1}}function Tmt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function Cmt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function xle(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function dCe(e,t,n,r){return(n&1<<r)!==0}function Amt(e,t,n,r){return(n&1<<r)>>r}function C3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):hCe(new bK(n,e,t,null,dCe)).subarray(0,r)),i}return n}function hCe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class bK{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function R7(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new bK(e,t,n-t,e,Amt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return R7(e,t,i)+R7(e,r,n)+Imt(e,i>>3,r-i>>3)}function Imt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=X8(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=X8(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=X8(s.getUint8(i)),i+=1;return r}function X8(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const kmt=-1;class kr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return wn.isSparseUnion(t)?this.children.some(n=>n.nullable):wn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(wn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=kmt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-R7(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof kr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=_d(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(wn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Uu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(wn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Uu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(C3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new kr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(C3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[fp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[fp.TYPE])&&(o[fp.TYPE]=s.subarray(t,t+n)),(s=o[fp.OFFSET])&&(o[fp.OFFSET]=s.subarray(t,t+n+1))||(s=o[fp.DATA])&&(o[fp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}kr.prototype.children=Object.freeze([]);class KC extends En{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new kr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=iT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.data),s=Rr(t.nullBitmap),o=iT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/_d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/_d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/_d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/_d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/_d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Rr(t.nullBitmap),o=iT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Rr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=zs(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(wn.isSparseUnion(n))return new kr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=iT(t.valueOffsets);return new kr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.indices.ArrayType,t.data),{["dictionary"]:o=new fr([new KC().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length/_d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Rr(t.nullBitmap),s=zs(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new KC().visit({type:n.valueType})}=t,s=Rr(t.nullBitmap),{["length"]:o=i.length/_d(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new kr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new KC().visit({type:n.childType})}=t,s=Rr(t.nullBitmap),o=iT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new kr(n,r,a,u,[o,void 0,s],[i])}}const Rmt=new KC;function ea(e){return Rmt.visit(e)}class Sle{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function pCe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function mCe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function gCe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function _K(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function wK(e,t){return e.getValid(t)}function Rw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return _K(r,this._offsets,n,t)}}function yCe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=_K(s,this._offsets,r,n);return t=void 0,o}}function vCe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):_K(s,this._offsets,i,n);return t=void 0,o}}class Gt extends En{}function Nmt(e,t){return t===null&&e.length>0?0:-1}function Dmt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new bK(n,e.offset+(t||0),e.length,n,dCe)){if(!i)return r;++r}return-1}function un(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return Dmt(e,n)}const r=zu.getVisitFn(e),i=Vx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function bCe(e,t,n){const r=zu.getVisitFn(e),i=Vx(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Gt.prototype.visitNull=Nmt;Gt.prototype.visitBool=un;Gt.prototype.visitInt=un;Gt.prototype.visitInt8=un;Gt.prototype.visitInt16=un;Gt.prototype.visitInt32=un;Gt.prototype.visitInt64=un;Gt.prototype.visitUint8=un;Gt.prototype.visitUint16=un;Gt.prototype.visitUint32=un;Gt.prototype.visitUint64=un;Gt.prototype.visitFloat=un;Gt.prototype.visitFloat16=un;Gt.prototype.visitFloat32=un;Gt.prototype.visitFloat64=un;Gt.prototype.visitUtf8=un;Gt.prototype.visitBinary=un;Gt.prototype.visitFixedSizeBinary=un;Gt.prototype.visitDate=un;Gt.prototype.visitDateDay=un;Gt.prototype.visitDateMillisecond=un;Gt.prototype.visitTimestamp=un;Gt.prototype.visitTimestampSecond=un;Gt.prototype.visitTimestampMillisecond=un;Gt.prototype.visitTimestampMicrosecond=un;Gt.prototype.visitTimestampNanosecond=un;Gt.prototype.visitTime=un;Gt.prototype.visitTimeSecond=un;Gt.prototype.visitTimeMillisecond=un;Gt.prototype.visitTimeMicrosecond=un;Gt.prototype.visitTimeNanosecond=un;Gt.prototype.visitDecimal=un;Gt.prototype.visitList=un;Gt.prototype.visitStruct=un;Gt.prototype.visitUnion=un;Gt.prototype.visitDenseUnion=bCe;Gt.prototype.visitSparseUnion=bCe;Gt.prototype.visitDictionary=un;Gt.prototype.visitInterval=un;Gt.prototype.visitIntervalDayTime=un;Gt.prototype.visitIntervalYearMonth=un;Gt.prototype.visitDuration=un;Gt.prototype.visitDurationSecond=un;Gt.prototype.visitDurationMillisecond=un;Gt.prototype.visitDurationMicrosecond=un;Gt.prototype.visitDurationNanosecond=un;Gt.prototype.visitFixedSizeList=un;Gt.prototype.visitMap=un;const A3=new Gt;class Yt extends En{}function Jt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof Ka&&t.bitWidth!==64||t instanceof gm&&t.bitWidth!==64||t instanceof P0&&t.precision!==Co.HALF))return new Sle(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Sle(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new Pmt(o)})}class Pmt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Yt.prototype.visitNull=Jt;Yt.prototype.visitBool=Jt;Yt.prototype.visitInt=Jt;Yt.prototype.visitInt8=Jt;Yt.prototype.visitInt16=Jt;Yt.prototype.visitInt32=Jt;Yt.prototype.visitInt64=Jt;Yt.prototype.visitUint8=Jt;Yt.prototype.visitUint16=Jt;Yt.prototype.visitUint32=Jt;Yt.prototype.visitUint64=Jt;Yt.prototype.visitFloat=Jt;Yt.prototype.visitFloat16=Jt;Yt.prototype.visitFloat32=Jt;Yt.prototype.visitFloat64=Jt;Yt.prototype.visitUtf8=Jt;Yt.prototype.visitBinary=Jt;Yt.prototype.visitFixedSizeBinary=Jt;Yt.prototype.visitDate=Jt;Yt.prototype.visitDateDay=Jt;Yt.prototype.visitDateMillisecond=Jt;Yt.prototype.visitTimestamp=Jt;Yt.prototype.visitTimestampSecond=Jt;Yt.prototype.visitTimestampMillisecond=Jt;Yt.prototype.visitTimestampMicrosecond=Jt;Yt.prototype.visitTimestampNanosecond=Jt;Yt.prototype.visitTime=Jt;Yt.prototype.visitTimeSecond=Jt;Yt.prototype.visitTimeMillisecond=Jt;Yt.prototype.visitTimeMicrosecond=Jt;Yt.prototype.visitTimeNanosecond=Jt;Yt.prototype.visitDecimal=Jt;Yt.prototype.visitList=Jt;Yt.prototype.visitStruct=Jt;Yt.prototype.visitUnion=Jt;Yt.prototype.visitDenseUnion=Jt;Yt.prototype.visitSparseUnion=Jt;Yt.prototype.visitDictionary=Jt;Yt.prototype.visitInterval=Jt;Yt.prototype.visitIntervalDayTime=Jt;Yt.prototype.visitIntervalYearMonth=Jt;Yt.prototype.visitDuration=Jt;Yt.prototype.visitDurationSecond=Jt;Yt.prototype.visitDurationMillisecond=Jt;Yt.prototype.visitDurationMicrosecond=Jt;Yt.prototype.visitDurationNanosecond=Jt;Yt.prototype.visitFixedSizeList=Jt;Yt.prototype.visitMap=Jt;const EK=new Yt,Omt=(e,t)=>e+t;class Sy extends En{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Ht.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+gh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+gh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const $mt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Mmt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),Lmt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=gh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},Fmt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=gh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},jmt=(e,t)=>e.type.mode===Uu.Dense?_Ce(e,t):wCe(e,t),_Ce=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+gh.visit(t[s],r[i])},wCe=({children:e},t)=>4+gh.visitMany(e,e.map(()=>t)).reduce(Omt,0);Sy.prototype.visitUtf8=$mt;Sy.prototype.visitBinary=Mmt;Sy.prototype.visitList=Lmt;Sy.prototype.visitFixedSizeList=Fmt;Sy.prototype.visitUnion=jmt;Sy.prototype.visitDenseUnion=_Ce;Sy.prototype.visitSparseUnion=wCe;const gh=new Sy;var ECe;const xCe={},SCe={};class fr{constructor(t){var n,r,i;const s=t[0]instanceof fr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof kr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=xCe[o.typeId],f=s[0];this.isValid=d=>wK(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,SCe[o.typeId]),this._offsets=mCe(s);break}this.data=s,this.type=o,this.stride=_d(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return pCe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return EK.visit(this)}concat(...t){return new fr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new fr(fCe(this,t,n,({data:r,_offsets:i},s,o)=>gCe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new fr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return wn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(wn.isDictionary(this.type)){const t=new I3(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new fr(n)}return new I3(this)}unmemoize(){if(wn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new fr(n)}return this}}ECe=Symbol.toStringTag;fr[ECe]=(e=>{e.type=wn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=zu.getVisitFnByTypeId(n),i=Ec.getVisitFnByTypeId(n),s=A3.getVisitFnByTypeId(n),o=gh.getVisitFnByTypeId(n);xCe[n]={get:r,set:i,indexOf:s,byteLength:o},SCe[n]=Object.create(e,{isValid:{value:Rw(wK)},get:{value:Rw(zu.getVisitFnByTypeId(n))},set:{value:yCe(Ec.getVisitFnByTypeId(n))},indexOf:{value:vCe(A3.getVisitFnByTypeId(n))},getByteLength:{value:Rw(gh.getVisitFnByTypeId(n))}})}return"Vector"})(fr.prototype);class I3 extends fr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new I3(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new fr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Bmt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${Umt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function Umt(e){return typeof e!="bigint"?M1(e):`${M1(e)}n`}const Q8=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,zmt=(e,t=0)=>e.length>=t?e.subarray(0,t):w3(new e.constructor(t),e,0);class QL{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?Q8(r*1,this.BYTES_PER_ELEMENT):Q8(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=Q8(t*this.stride,this.BYTES_PER_ELEMENT);const n=zmt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=w3(new this.ArrayType(t),this.buffer)}}QL.prototype.offset=0;class XI extends QL{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class TCe extends XI{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class CCe extends XI{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let Xu=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=_d(t),this._nulls=new TCe,n&&n.length>0&&(this._isValid=Bmt(n))}toVector(){return new fr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),ea({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};Xu.prototype.length=1;Xu.prototype.stride=1;Xu.prototype.children=null;Xu.prototype.finished=!1;Xu.prototype.nullValues=null;Xu.prototype._isValid=()=>!0;class Fm extends Xu{constructor(t){super(t),this._values=new XI(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class JL extends Xu{constructor(t){super(t),this._pendingLength=0,this._offsets=new CCe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof KL?n[mf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class N7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const J8=2,kd=4,Sp=4,jr=4,mg=new Int32Array(2),Tle=new Float32Array(mg.buffer),Cle=new Float64Array(mg.buffer),pN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var D7;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(D7||(D7={}));let k3=class ACe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new ACe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return mg[0]=this.readInt32(t),Tle[0]}readFloat64(t){return mg[pN?0:1]=this.readInt32(t),mg[pN?1:0]=this.readInt32(t+4),Cle[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Tle[0]=n,this.writeInt32(t,mg[0])}writeFloat64(t,n){Cle[0]=n,this.writeInt32(t,mg[pN?0:1]),this.writeInt32(t+4,mg[pN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+kd+Sp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Sp;n++)t+=String.fromCharCode(this.readInt8(this.position_+kd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=kd;const i=this.bytes_.subarray(t,t+r);return n===D7.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+kd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Sp)throw new Error("FlatBuffers: file identifier must be length "+Sp);for(let n=0;n<Sp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+kd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},ICe=class kCe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=k3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=kCe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=k3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(kd,0),this.writeInt32(this.offset()-t+kd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*J8;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=J8;l<s;l+=J8)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?jr:0;if(n){const s=n;if(this.prep(this.minalign,kd+Sp+i),s.length!=Sp)throw new TypeError("FlatBuffers: file identifier must be length "+Sp);for(let o=Sp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,kd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(kd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class ws{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+jr),(n||new ws).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return ws.startKeyValue(t),ws.addKey(t,n),ws.addValue(t,r),ws.endKeyValue(t)}}var kE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(kE||(kE={}));var RE;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(RE||(RE={}));var R3;(function(e){e[e.DenseArray=0]="DenseArray"})(R3||(R3={}));class ll{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new ll).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+jr),(n||new ll).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return ll.startInt(t),ll.addBitWidth(t,n),ll.addIsSigned(t,r),ll.endInt(t)}}class Tp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Tp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+jr),(n||new Tp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new ll).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):R3.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,R3.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Vv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new Vv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+jr),(n||new Vv).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return Vv.startBinary(t),Vv.endBinary(t)}}class Hv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new Hv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+jr),(n||new Hv).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Hv.startBool(t),Hv.endBool(t)}}var N3;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(N3||(N3={}));let FD=class T_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new T_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+jr),(n||new T_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):N3.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,N3.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return T_.startDate(t),T_.addUnit(t,n),T_.endDate(t)}};class hu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new hu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+jr),(n||new hu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return hu.startDecimal(t),hu.addPrecision(t,n),hu.addScale(t,r),hu.addBitWidth(t,i),hu.endDecimal(t)}}var $0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})($0||($0={}));class Rd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Rd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+jr),(n||new Rd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,$0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Rd.startDuration(t),Rd.addUnit(t,n),Rd.endDuration(t)}}class Nd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Nd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+jr),(n||new Nd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Nd.startFixedSizeBinary(t),Nd.addByteWidth(t,n),Nd.endFixedSizeBinary(t)}}class Dd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Dd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+jr),(n||new Dd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Dd.startFixedSizeList(t),Dd.addListSize(t,n),Dd.endFixedSizeList(t)}}var D3;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(D3||(D3={}));class Pd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Pd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+jr),(n||new Pd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):D3.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,D3.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Pd.startFloatingPoint(t),Pd.addPrecision(t,n),Pd.endFloatingPoint(t)}}var P3;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(P3||(P3={}));class Od{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Od).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+jr),(n||new Od).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):P3.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,P3.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Od.startInterval(t),Od.addUnit(t,n),Od.endInterval(t)}}class qv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new qv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+jr),(n||new qv).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return qv.startList(t),qv.endList(t)}}let jD=class C_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new C_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+jr),(n||new C_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return C_.startMap(t),C_.addKeysSorted(t,n),C_.endMap(t)}};class Wv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+jr),(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return Wv.startNull(t),Wv.endNull(t)}}class Gv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Gv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+jr),(n||new Gv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Gv.startStruct_(t),Gv.endStruct_(t)}}let ZT=class dv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new dv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+jr),(n||new dv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,$0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return dv.startTime(t),dv.addUnit(t,n),dv.addBitWidth(t,r),dv.endTime(t)}},eC=class hv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+jr),(n||new hv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,$0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return hv.startTimestamp(t),hv.addUnit(t,n),hv.addTimezone(t,r),hv.endTimestamp(t)}};var O3;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(O3||(O3={}));let pv=class mv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new mv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+jr),(n||new mv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):O3.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,O3.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return mv.startUnion(t),mv.addMode(t,n),mv.addTypeIds(t,r),mv.endUnion(t)}};class Yv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new Yv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+jr),(n||new Yv).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Yv.startUtf8(t),Yv.endUtf8(t)}}var pi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(pi||(pi={}));let Xl=class BD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new BD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+jr),(n||new BD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):pi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Tp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new BD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new ws).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,pi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},vd=class lp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new lp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+jr),(n||new lp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):RE.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Xl).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new ws).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,RE.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return lp.startSchema(t),lp.addEndianness(t,n),lp.addFields(t,r),lp.addCustomMetadata(t,i),lp.addFeatures(t,s),lp.endSchema(t)}};class il{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new il).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+jr),(n||new il).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):kE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new vd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new N7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new N7).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ws).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,kE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class xr{constructor(t=[],n,r,i=La.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=O7(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new xr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new xr(n,this.metadata)}assign(...t){const n=t[0]instanceof xr?t[0]:Array.isArray(t[0])?new xr(t[0]):new xr(t),r=[...this.fields],i=mN(mN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:mN(mN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=O7(s,new Map);return new xr([...r,...s],i,new Map([...this.dictionaries,...o]))}}xr.prototype.fields=null;xr.prototype.metadata=null;xr.prototype.dictionaries=null;let Mr=class P7{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new P7(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],P7.new(n,r,i,s)}};Mr.prototype.type=null;Mr.prototype.name=null;Mr.prototype.nullable=null;Mr.prototype.metadata=null;function mN(e,t){return new Map([...e||new Map,...t||new Map])}function O7(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(wn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&O7(s.children,t)}return t}var Vmt=ICe,Hmt=k3;class $7{static decode(t){t=new Hmt(Rr(t));const n=il.getRootAsFooter(t),r=xr.decode(n.schema(),new Map,n.version());return new qmt(r,n)}static encode(t){const n=new Vmt,r=xr.encode(n,t.schema);il.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())M0.encode(n,o);const i=n.endVector();il.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())M0.encode(n,o);const s=n.endVector();return il.startFooter(n),il.addSchema(n,r),il.addVersion(n,La.V5),il.addRecordBatches(n,i),il.addDictionaries(n,s),il.finishFooterBuffer(n,il.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=La.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class qmt extends $7{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return M0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return M0.decode(n)}return null}}class M0{static decode(t){return new M0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return N7.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=jf(r),this.bodyLength=jf(n)}}const gN=Object.freeze({done:!0,value:void 0});class RCe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Wmt extends RCe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return wp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(gN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return ble.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return ble.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return wp(this,void 0,void 0,function*(){return yield this.abort(t),gN})}return(t){return wp(this,void 0,void 0,function*(){return yield this.close(),gN})}read(t){return wp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return wp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(gN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Z8 extends Wmt{write(t){if((t=Rr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?A7(this.toUint8Array(!0)):this.toUint8Array(!1).then(A7)}toUint8Array(t=!1){return t?hh(this._values)[0]:wp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=PC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return hh(o,a)[0]})}}class NCe extends JL{constructor(t){super(t),this._values=new QL(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Rr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class Gmt extends Xu{constructor(t){super(t),this._values=new TCe}setValue(t,n){this._values.set(t,+n)}}class ZL extends Fm{}ZL.prototype._setValue=MTe;class DCe extends ZL{}DCe.prototype._setValue=tK;class PCe extends ZL{}PCe.prototype._setValue=nK;class OCe extends Fm{}OCe.prototype._setValue=jTe;class Ymt extends Xu{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new O0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=$3({type:this.type.indices,nullValues:n}),this.dictionary=$3({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class $Ce extends Fm{}$Ce.prototype._setValue=$Te;class Kmt extends Xu{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new IE(this.type.listSize,new Mr(n,t.type,!0)),r}}class e6 extends Fm{setValue(t,n){this._values.set(t,n)}}class Xmt extends e6{setValue(t,n){super.setValue(t,DTe(n))}}class Qmt extends e6{}class Jmt extends e6{}class t6 extends Fm{}t6.prototype._setValue=zTe;class MCe extends t6{}MCe.prototype._setValue=fK;class LCe extends t6{}LCe.prototype._setValue=dK;class Hx extends Fm{}Hx.prototype._setValue=VTe;class FCe extends Hx{}FCe.prototype._setValue=hK;class jCe extends Hx{}jCe.prototype._setValue=pK;class BCe extends Hx{}BCe.prototype._setValue=mK;class UCe extends Hx{}UCe.prototype._setValue=gK;class jm extends Fm{setValue(t,n){this._values.set(t,n)}}class Zmt extends jm{}class egt extends jm{}class tgt extends jm{}class ngt extends jm{}class rgt extends jm{}class igt extends jm{}class sgt extends jm{}class ogt extends jm{}class agt extends JL{constructor(t){super(t),this._offsets=new CCe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new AE(new Mr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class ugt extends JL{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new _2(new Mr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class lgt extends Xu{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class cgt extends Xu{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new sa([...this.type.children,new Mr(n,t.type,!0)]),r}}class qx extends Fm{}qx.prototype._setValue=LTe;class zCe extends qx{}zCe.prototype._setValue=rK;class VCe extends qx{}VCe.prototype._setValue=iK;class HCe extends qx{}HCe.prototype._setValue=sK;class qCe extends qx{}qCe.prototype._setValue=oK;class Wx extends Fm{}Wx.prototype._setValue=FTe;class WCe extends Wx{}WCe.prototype._setValue=aK;class GCe extends Wx{}GCe.prototype._setValue=uK;class YCe extends Wx{}YCe.prototype._setValue=lK;class KCe extends Wx{}KCe.prototype._setValue=cK;class xK extends Xu{constructor(t){super(t),this._typeIds=new XI(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Mr(n,t.type)];return this.type=new b2(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class fgt extends xK{}class dgt extends xK{constructor(t){super(t),this._offsets=new XI(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class XCe extends JL{constructor(t){super(t),this._values=new QL(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,BY(n))}_flushPending(t,n){}}XCe.prototype._flushPending=NCe.prototype._flushPending;class hgt extends En{visitNull(){return lgt}visitBool(){return Gmt}visitInt(){return jm}visitInt8(){return Zmt}visitInt16(){return egt}visitInt32(){return tgt}visitInt64(){return ngt}visitUint8(){return rgt}visitUint16(){return igt}visitUint32(){return sgt}visitUint64(){return ogt}visitFloat(){return e6}visitFloat16(){return Xmt}visitFloat32(){return Qmt}visitFloat64(){return Jmt}visitUtf8(){return XCe}visitBinary(){return NCe}visitFixedSizeBinary(){return $Ce}visitDate(){return ZL}visitDateDay(){return DCe}visitDateMillisecond(){return PCe}visitTimestamp(){return qx}visitTimestampSecond(){return zCe}visitTimestampMillisecond(){return VCe}visitTimestampMicrosecond(){return HCe}visitTimestampNanosecond(){return qCe}visitTime(){return Wx}visitTimeSecond(){return WCe}visitTimeMillisecond(){return GCe}visitTimeMicrosecond(){return YCe}visitTimeNanosecond(){return KCe}visitDecimal(){return OCe}visitList(){return agt}visitStruct(){return cgt}visitUnion(){return xK}visitDenseUnion(){return dgt}visitSparseUnion(){return fgt}visitDictionary(){return Ymt}visitInterval(){return t6}visitIntervalDayTime(){return MCe}visitIntervalYearMonth(){return LCe}visitDuration(){return Hx}visitDurationSecond(){return FCe}visitDurationMillisecond(){return jCe}visitDurationMicrosecond(){return BCe}visistDurationNanosecond(){return UCe}visitFixedSizeList(){return Kmt}visitMap(){return ugt}}const pgt=new hgt;class Kt extends En{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function eu(e,t){return t instanceof e.constructor}function QI(e,t){return e===t||eu(e,t)}function Bm(e,t){return e===t||eu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function n6(e,t){return e===t||eu(e,t)&&e.precision===t.precision}function mgt(e,t){return e===t||eu(e,t)&&e.byteWidth===t.byteWidth}function SK(e,t){return e===t||eu(e,t)&&e.unit===t.unit}function JI(e,t){return e===t||eu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function ZI(e,t){return e===t||eu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function ggt(e,t){return e===t||eu(e,t)&&e.children.length===t.children.length&&L0.compareManyFields(e.children,t.children)}function ygt(e,t){return e===t||eu(e,t)&&e.children.length===t.children.length&&L0.compareManyFields(e.children,t.children)}function TK(e,t){return e===t||eu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&L0.compareManyFields(e.children,t.children)}function vgt(e,t){return e===t||eu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&L0.visit(e.indices,t.indices)&&L0.visit(e.dictionary,t.dictionary)}function CK(e,t){return e===t||eu(e,t)&&e.unit===t.unit}function ek(e,t){return e===t||eu(e,t)&&e.unit===t.unit}function bgt(e,t){return e===t||eu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&L0.compareManyFields(e.children,t.children)}function _gt(e,t){return e===t||eu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&L0.compareManyFields(e.children,t.children)}Kt.prototype.visitNull=QI;Kt.prototype.visitBool=QI;Kt.prototype.visitInt=Bm;Kt.prototype.visitInt8=Bm;Kt.prototype.visitInt16=Bm;Kt.prototype.visitInt32=Bm;Kt.prototype.visitInt64=Bm;Kt.prototype.visitUint8=Bm;Kt.prototype.visitUint16=Bm;Kt.prototype.visitUint32=Bm;Kt.prototype.visitUint64=Bm;Kt.prototype.visitFloat=n6;Kt.prototype.visitFloat16=n6;Kt.prototype.visitFloat32=n6;Kt.prototype.visitFloat64=n6;Kt.prototype.visitUtf8=QI;Kt.prototype.visitBinary=QI;Kt.prototype.visitFixedSizeBinary=mgt;Kt.prototype.visitDate=SK;Kt.prototype.visitDateDay=SK;Kt.prototype.visitDateMillisecond=SK;Kt.prototype.visitTimestamp=JI;Kt.prototype.visitTimestampSecond=JI;Kt.prototype.visitTimestampMillisecond=JI;Kt.prototype.visitTimestampMicrosecond=JI;Kt.prototype.visitTimestampNanosecond=JI;Kt.prototype.visitTime=ZI;Kt.prototype.visitTimeSecond=ZI;Kt.prototype.visitTimeMillisecond=ZI;Kt.prototype.visitTimeMicrosecond=ZI;Kt.prototype.visitTimeNanosecond=ZI;Kt.prototype.visitDecimal=QI;Kt.prototype.visitList=ggt;Kt.prototype.visitStruct=ygt;Kt.prototype.visitUnion=TK;Kt.prototype.visitDenseUnion=TK;Kt.prototype.visitSparseUnion=TK;Kt.prototype.visitDictionary=vgt;Kt.prototype.visitInterval=CK;Kt.prototype.visitIntervalDayTime=CK;Kt.prototype.visitIntervalYearMonth=CK;Kt.prototype.visitDuration=ek;Kt.prototype.visitDurationSecond=ek;Kt.prototype.visitDurationMillisecond=ek;Kt.prototype.visitDurationMicrosecond=ek;Kt.prototype.visitDurationNanosecond=ek;Kt.prototype.visitFixedSizeList=bgt;Kt.prototype.visitMap=_gt;const L0=new Kt;function M7(e,t){return L0.compareSchemas(e,t)}function $3(e){const t=e.type,n=new(pgt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push($3(Object.assign(Object.assign({},l),{type:u})))}}return n}function ej(e,t){return wgt(e,t.map(n=>n.data.concat()))}function wgt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=Egt(n,o,c,t,i),o>0&&(r[s++]=ea({type:new sa(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new cl(e,f))]}function Egt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:ea({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var QCe;class vu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new xr([]),this._offsets=[0],this;let i,s;t[0]instanceof xr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof cl)return[u];if(u instanceof vu)return u.batches;if(u instanceof kr){if(u.type instanceof sa)return[new cl(new xr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new fr([u[h]])),f=new xr(l.map((h,p)=>new Mr(String(h),c[p].type))),[,d]=ej(f,c);return d.length===0?[new cl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new xr([]),!(i instanceof xr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof cl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!M7(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??mCe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=pCe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?EK.visit(new fr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new vu(n,r.map(i=>new cl(n,i)))}slice(t,n){const r=this.schema;[t,n]=fCe({length:this.numRows},t,n);const i=gCe(this.data,this._offsets,t,n);return new vu(r,i.map(s=>new cl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=ea({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new fr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new fr([ea({type:new mm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=ej(r,a)}return new vu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new vu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new vu(...ej(s,o))}}QCe=Symbol.toStringTag;vu[QCe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Rw(wK),e.get=Rw(zu.getVisitFn(re.Struct)),e.set=yCe(Ec.getVisitFn(re.Struct)),e.indexOf=vCe(A3.getVisitFn(re.Struct)),e.getByteLength=Rw(gh.getVisitFn(re.Struct)),"Table"))(vu.prototype);var JCe;let cl=class tC{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof xr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ea({nullCount:0,type:new sa(this.schema.fields),children:this.schema.fields.map(n=>ea({type:n.type,nullCount:0}))})]=t,!(this.data instanceof kr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Ale(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Mr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new xr(r),a=ea({type:new sa(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Ale(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=ZCe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return zu.visit(this.data,t)}set(t,n){return Ec.visit(this.data,t,n)}indexOf(t,n){return A3.visit(this.data,t,n)}getByteLength(t){return gh.visit(this.data,t)}[Symbol.iterator](){return EK.visit(new fr([this.data]))}toArray(){return[...this]}concat(...t){return new vu(this.schema,[this,...t])}slice(t,n){const[r]=new fr([this.data]).slice(t,n).data;return new tC(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new fr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new fr([ea({type:new mm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new xr(s,new Map(this.schema.metadata)),i=ea({type:new sa(s),children:o})}return new tC(r,i)}select(t){const n=this.schema.select(t),r=new sa(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new tC(n,ea({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=ea({type:new sa(n.fields),length:this.numRows,children:r});return new tC(n,i)}};JCe=Symbol.toStringTag;cl[JCe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(cl.prototype);function Ale(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:ea({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),ea({type:new sa(i),length:n,children:s})]}function ZCe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])ZCe(a.children,l==null?void 0:l.children,n);if(wn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class xgt extends cl{constructor(t){const n=t.fields.map(i=>ea({type:i.type})),r=ea({type:new sa(t.fields),nullCount:0,children:n});super(t,r)}}var M3;(function(e){e[e.BUFFER=0]="BUFFER"})(M3||(M3={}));var L3;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(L3||(L3={}));class gg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new gg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+jr),(n||new gg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):L3.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):M3.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,L3.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,M3.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return gg.startBodyCompression(t),gg.addCodec(t,n),gg.addMethod(t,r),gg.endBodyCompression(t)}}let eAe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},tAe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},dp=class L7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new L7).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+jr),(n||new L7).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new tAe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new eAe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new gg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},A_=class F7{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new F7).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+jr),(n||new F7).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new dp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var F3;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(F3||(F3={}));let tg=class dd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new dd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+jr),(n||new dd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):kE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):F3.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new ws).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,kE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,F3.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return dd.startMessage(t),dd.addVersion(t,n),dd.addHeaderType(t,r),dd.addHeader(t,i),dd.addBodyLength(t,s),dd.addCustomMetadata(t,o),dd.endMessage(t)}};class Sgt extends En{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Wv.startNull(n),Wv.endNull(n)}visitInt(t,n){return ll.startInt(n),ll.addBitWidth(n,t.bitWidth),ll.addIsSigned(n,t.isSigned),ll.endInt(n)}visitFloat(t,n){return Pd.startFloatingPoint(n),Pd.addPrecision(n,t.precision),Pd.endFloatingPoint(n)}visitBinary(t,n){return Vv.startBinary(n),Vv.endBinary(n)}visitBool(t,n){return Hv.startBool(n),Hv.endBool(n)}visitUtf8(t,n){return Yv.startUtf8(n),Yv.endUtf8(n)}visitDecimal(t,n){return hu.startDecimal(n),hu.addScale(n,t.scale),hu.addPrecision(n,t.precision),hu.addBitWidth(n,t.bitWidth),hu.endDecimal(n)}visitDate(t,n){return FD.startDate(n),FD.addUnit(n,t.unit),FD.endDate(n)}visitTime(t,n){return ZT.startTime(n),ZT.addUnit(n,t.unit),ZT.addBitWidth(n,t.bitWidth),ZT.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return eC.startTimestamp(n),eC.addUnit(n,t.unit),r!==void 0&&eC.addTimezone(n,r),eC.endTimestamp(n)}visitInterval(t,n){return Od.startInterval(n),Od.addUnit(n,t.unit),Od.endInterval(n)}visitDuration(t,n){return Rd.startDuration(n),Rd.addUnit(n,t.unit),Rd.endDuration(n)}visitList(t,n){return qv.startList(n),qv.endList(n)}visitStruct(t,n){return Gv.startStruct_(n),Gv.endStruct_(n)}visitUnion(t,n){pv.startTypeIdsVector(n,t.typeIds.length);const r=pv.createTypeIdsVector(n,t.typeIds);return pv.startUnion(n),pv.addMode(n,t.mode),pv.addTypeIds(n,r),pv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Tp.startDictionaryEncoding(n),Tp.addId(n,BigInt(t.id)),Tp.addIsOrdered(n,t.isOrdered),r!==void 0&&Tp.addIndexType(n,r),Tp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Nd.startFixedSizeBinary(n),Nd.addByteWidth(n,t.byteWidth),Nd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Dd.startFixedSizeList(n),Dd.addListSize(n,t.listSize),Dd.endFixedSizeList(n)}visitMap(t,n){return jD.startMap(n),jD.addKeysSorted(n,t.keysSorted),jD.endMap(n)}}const tj=new Sgt;function Tgt(e,t=new Map){return new xr(Agt(e,t),UD(e.metadata),t)}function nAe(e){return new Pl(e.count,rAe(e.columns),iAe(e.columns))}function Cgt(e){return new yh(nAe(e.data),e.id,e.isDelta)}function Agt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function Ile(e,t){return(e.children||[]).filter(Boolean).map(n=>Mr.fromJSON(n,t))}function rAe(e){return(e||[]).reduce((t,n)=>[...t,new F0(n.count,Igt(n.VALIDITY)),...rAe(n.children)],[])}function iAe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Bd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Bd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Bd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Bd(t.length,i.DATA.length)),t=iAe(i.children,t)}return t}function Igt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function kgt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Rle(e,Ile(e,t)),i=new Mr(e.name,o,e.nullable,UD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?kle(r):new D0,a=new O0(t.get(n),r,n,s.isOrdered),i=new Mr(e.name,a,e.nullable,UD(e.metadata))):(r=(r=s.indexType)?kle(r):new D0,t.set(n,o=Rle(e,Ile(e,t))),a=new O0(o,r,n,s.isOrdered),i=new Mr(e.name,a,e.nullable,UD(e.metadata))),i||null}function UD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function kle(e){return new Ka(e.isSigned,e.bitWidth)}function Rle(e,t){const n=e.type.name;switch(n){case"NONE":return new mm;case"null":return new mm;case"binary":return new y2;case"utf8":return new SE;case"bool":return new v2;case"list":return new AE((t||[])[0]);case"struct":return new sa(t||[]);case"struct_":return new sa(t||[])}switch(n){case"int":{const r=e.type;return new Ka(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new P0(Co[r.precision])}case"decimal":{const r=e.type;return new E3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new TE(ph[r.unit])}case"time":{const r=e.type;return new gm(Ht[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new x3(Ht[r.unit],r.timezone)}case"interval":{const r=e.type;return new CE(mh[r.unit])}case"duration":{const r=e.type;return new S3(Ht[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new b2(Uu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new T3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new IE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new _2((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Rgt=ICe,Ngt=k3;class $d{static fromJSON(t,n){const r=new $d(0,La.V5,n);return r._createHeader=Dgt(t,n),r}static decode(t){t=new Ngt(Rr(t));const n=tg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new $d(r,i,s);return o._createHeader=Pgt(n,s),o}static encode(t){const n=new Rgt;let r=-1;return t.isSchema()?r=xr.encode(n,t.header()):t.isRecordBatch()?r=Pl.encode(n,t.header()):t.isDictionaryBatch()&&(r=yh.encode(n,t.header())),tg.startMessage(n),tg.addVersion(n,La.V5),tg.addHeader(n,r),tg.addHeaderType(n,t.headerType),tg.addBodyLength(n,BigInt(t.bodyLength)),tg.finishMessageBuffer(n,tg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof xr)return new $d(0,La.V5,qs.Schema,t);if(t instanceof Pl)return new $d(n,La.V5,qs.RecordBatch,t);if(t instanceof yh)return new $d(n,La.V5,qs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===qs.Schema}isRecordBatch(){return this.headerType===qs.RecordBatch}isDictionaryBatch(){return this.headerType===qs.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=jf(t)}}class Pl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=jf(t)}}class yh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=jf(n)}}class Bd{constructor(t,n){this.offset=jf(t),this.length=jf(n)}}class F0{constructor(t,n){this.length=jf(t),this.nullCount=jf(n)}}function Dgt(e,t){return()=>{switch(t){case qs.Schema:return xr.fromJSON(e);case qs.RecordBatch:return Pl.fromJSON(e);case qs.DictionaryBatch:return yh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${qs[t]}, type: ${t} }`)}}function Pgt(e,t){return()=>{switch(t){case qs.Schema:return xr.decode(e.header(new vd),new Map,e.version());case qs.RecordBatch:return Pl.decode(e.header(new dp),e.version());case qs.DictionaryBatch:return yh.decode(e.header(new A_),e.version())}throw new Error(`Unrecognized Message type: { name: ${qs[t]}, type: ${t} }`)}}Mr.encode=Hgt;Mr.decode=zgt;Mr.fromJSON=kgt;xr.encode=Vgt;xr.decode=Ogt;xr.fromJSON=Tgt;Pl.encode=qgt;Pl.decode=$gt;Pl.fromJSON=nAe;yh.encode=Wgt;yh.decode=Mgt;yh.fromJSON=Cgt;F0.encode=Ggt;F0.decode=Fgt;Bd.encode=Ygt;Bd.decode=Lgt;function Ogt(e,t=new Map,n=La.V5){const r=Ugt(e,t);return new xr(r,zD(e),t,n)}function $gt(e,t=La.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Pl(e.length(),jgt(e),Bgt(e,t))}function Mgt(e,t=La.V5){return new yh(Pl.decode(e.data(),t),e.id(),e.isDelta())}function Lgt(e){return new Bd(e.offset(),e.length())}function Fgt(e){return new F0(e.length(),e.nullCount())}function jgt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=F0.decode(n));return t}function Bgt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<La.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Bd.decode(r));return n}function Ugt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Mr.decode(r,t));return n}function Nle(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Mr.decode(r,t));return n}function zgt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Ple(e,Nle(e,t)),r=new Mr(e.name(),i,e.nullable(),zD(e))):t.has(n=jf(a.id()))?(s=(s=a.indexType())?Dle(s):new D0,o=new O0(t.get(n),s,n,a.isOrdered()),r=new Mr(e.name(),o,e.nullable(),zD(e))):(s=(s=a.indexType())?Dle(s):new D0,t.set(n,i=Ple(e,Nle(e,t))),o=new O0(i,s,n,a.isOrdered()),r=new Mr(e.name(),o,e.nullable(),zD(e))),r||null}function zD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Dle(e){return new Ka(e.isSigned(),e.bitWidth())}function Ple(e,t){const n=e.typeType();switch(n){case pi.NONE:return new mm;case pi.Null:return new mm;case pi.Binary:return new y2;case pi.Utf8:return new SE;case pi.Bool:return new v2;case pi.List:return new AE((t||[])[0]);case pi.Struct_:return new sa(t||[])}switch(n){case pi.Int:{const r=e.type(new ll);return new Ka(r.isSigned(),r.bitWidth())}case pi.FloatingPoint:{const r=e.type(new Pd);return new P0(r.precision())}case pi.Decimal:{const r=e.type(new hu);return new E3(r.scale(),r.precision(),r.bitWidth())}case pi.Date:{const r=e.type(new FD);return new TE(r.unit())}case pi.Time:{const r=e.type(new ZT);return new gm(r.unit(),r.bitWidth())}case pi.Timestamp:{const r=e.type(new eC);return new x3(r.unit(),r.timezone())}case pi.Interval:{const r=e.type(new Od);return new CE(r.unit())}case pi.Duration:{const r=e.type(new Rd);return new S3(r.unit())}case pi.Union:{const r=e.type(new pv);return new b2(r.mode(),r.typeIdsArray()||[],t||[])}case pi.FixedSizeBinary:{const r=e.type(new Nd);return new T3(r.byteWidth())}case pi.FixedSizeList:{const r=e.type(new Dd);return new IE(r.listSize(),(t||[])[0])}case pi.Map:{const r=e.type(new jD);return new _2((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${pi[n]}" (${n})`)}function Vgt(e,t){const n=t.fields.map(s=>Mr.encode(e,s));vd.startFieldsVector(e,n.length);const r=vd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?vd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return ws.startKeyValue(e),ws.addKey(e,a),ws.addValue(e,u),ws.endKeyValue(e)})):-1;return vd.startSchema(e),vd.addFields(e,r),vd.addEndianness(e,Kgt?RE.Little:RE.Big),i!==-1&&vd.addCustomMetadata(e,i),vd.endSchema(e)}function Hgt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;wn.isDictionary(s)?(o=s.dictionary.typeId,i=tj.visit(s,e),r=tj.visit(s.dictionary,e)):r=tj.visit(s,e);const a=(s.children||[]).map(c=>Mr.encode(e,c)),u=Xl.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?Xl.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return ws.startKeyValue(e),ws.addKey(e,d),ws.addValue(e,h),ws.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),Xl.startField(e),Xl.addType(e,r),Xl.addTypeType(e,o),Xl.addChildren(e,u),Xl.addNullable(e,!!t.nullable),n!==-1&&Xl.addName(e,n),i!==-1&&Xl.addDictionary(e,i),l!==-1&&Xl.addCustomMetadata(e,l),Xl.endField(e)}function qgt(e,t){const n=t.nodes||[],r=t.buffers||[];dp.startNodesVector(e,n.length);for(const o of n.slice().reverse())F0.encode(e,o);const i=e.endVector();dp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Bd.encode(e,o);const s=e.endVector();return dp.startRecordBatch(e),dp.addLength(e,BigInt(t.length)),dp.addNodes(e,i),dp.addBuffers(e,s),dp.endRecordBatch(e)}function Wgt(e,t){const n=Pl.encode(e,t.data);return A_.startDictionaryBatch(e),A_.addId(e,BigInt(t.id)),A_.addIsDelta(e,t.isDelta),A_.addData(e,n),A_.endDictionaryBatch(e)}function Ggt(e,t){return tAe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Ygt(e,t){return eAe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Kgt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),j7="ARROW1",AK=new Uint8Array(j7.length);for(let e=0;e<j7.length;e+=1)AK[e]=j7.codePointAt(e);AK.length;class ss extends En{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof cl?s.data.children:s.data),r=new ss;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof fr)return this.visitMany(t.data),this;const{type:n}=t;if(!wn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(wn.isUnion(n))this.nodes.push(new F0(r,0));else{const{nullCount:i}=t;wn.isNull(n)||kf.call(this,i<=0?new Uint8Array(0):C3(t.offset,r,t.nullBitmap)),this.nodes.push(new F0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function kf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Bd(this._byteLength,t)),this._byteLength+=t,this}function Xgt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(kf.call(this,i),n.mode===Uu.Sparse)return B7.call(this,e);if(n.mode===Uu.Dense){if(e.offset<=0)return kf.call(this,s),B7.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);kf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function Qgt(e){let t;return e.nullCount>=e.length?kf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?kf.call(this,C3(e.offset,e.length,t)):kf.call(this,hCe(e.values))}function Um(e){return kf.call(this,e.values.subarray(0,e.length*e.stride))}function sAe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return kf.call(this,aTe(-i,t+1,r)),kf.call(this,n.subarray(i,i+o)),this}function IK(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return kf.call(this,aTe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function B7(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ss.prototype.visitBool=Qgt;ss.prototype.visitInt=Um;ss.prototype.visitFloat=Um;ss.prototype.visitUtf8=sAe;ss.prototype.visitBinary=sAe;ss.prototype.visitFixedSizeBinary=Um;ss.prototype.visitDate=Um;ss.prototype.visitTimestamp=Um;ss.prototype.visitTime=Um;ss.prototype.visitDecimal=Um;ss.prototype.visitList=IK;ss.prototype.visitStruct=B7;ss.prototype.visitUnion=Xgt;ss.prototype.visitInterval=Um;ss.prototype.visitDuration=Um;ss.prototype.visitFixedSizeList=IK;ss.prototype.visitMap=IK;class oAe extends RCe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Z8,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Ey(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return GL(t)?t.then(n=>this.writeAll(n)):YL(t)?DK(this,t):NK(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Z8?this._sink=t:(this._sink=new Z8,t&&rpt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&ipt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!M7(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof vu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof cl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!M7(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof cl?t instanceof xgt||this._writeRecordBatch(t):t instanceof vu?this.writeAll(t.batches):UY(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=$d.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===qs.RecordBatch?this._recordBatchBlocks.push(new M0(a,t.bodyLength,this._position)):t.headerType===qs.DictionaryBatch&&this._dictionaryBlocks.push(new M0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Rr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage($d.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(AK)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ss.assemble(t),o=new Pl(t.numRows,r,i),a=$d.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ss.assemble(new fr([t])),u=new Pl(t.length,s,o),l=new yh(u,n,r),c=$d.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class kK extends oAe{static writeAll(t,n){const r=new kK(n);return GL(t)?t.then(i=>r.writeAll(i)):YL(t)?DK(r,t):NK(r,t)}}class RK extends oAe{static writeAll(t){const n=new RK;return GL(t)?t.then(r=>n.writeAll(r)):YL(t)?DK(n,t):NK(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=$7.encode(new $7(t,La.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function NK(e,t){let n=t;t instanceof vu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function DK(e,t){var n,r,i,s,o,a,u;return wp(this,void 0,void 0,function*(){try{for(n=!0,r=PC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function Jgt(e,t="stream"){return(t==="stream"?kK:RK).writeAll(e).toUint8Array(!0)}function PK(e,t=1){return(e*t+63&-64||64)/t}function j0(e,t,n=e.BYTES_PER_ELEMENT){return new e(PK(t,n))}function OK(e){return e instanceof kr?e:new kr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function Zgt(e){return new fr([OK(e)])}const $K=new TextEncoder;function e0t(e,t,n){const r=$K.encode(n);return e.set(r,t),r.length}function t0t(e,t,n){return $K.encodeInto(n,e.subarray(t)).written}const n0t=$K.encodeInto?t0t:e0t;function Ole(e,t){const n=j0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function r0t(e,t){const n=j0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function i0t(e,t){const n=j0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function s0t(e,t){const n=j0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function o0t(e){const t=$3({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function a0t(e,t,n){const r=j0(Int32Array,t+1),i=j0(Uint8Array,3*n);let s=0;return{set(o,a){s+=n0t(i,s,o),r[a+1]=s},data:()=>{const o=PK(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function u0t(e,t){const n=[],r=j0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:l0t(e.dictionary,n,o)})}}function l0t(e,t,n){const r=a0t(e,t.length,n);return t.forEach(r.set),Zgt(r.data())}function c0t(e,t){const n=j0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function f0t(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?Ole:null;break;case re.Float:r=e.precision>0?Ole:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?u0t:null;break;case re.Bool:r=r0t;break;case re.Date:r=e.unit?s0t:i0t;break}return r==null?o0t(e):n?c0t(r(e,t),t):r(e,t)}function d0t(e,t){const n=e.length,r=PK(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),OK({type:t,length:n,buffers:[null,i]})}function aAe(e,t,n,r,i=!0){const s=f0t(r,e,i);return t(n,s.set),OK(s.data())}function MK(e){if(e instanceof wn||e==null)return e;switch(e){case re.Binary:return new y2;case re.Bool:return new v2;case re.DateDay:return new bpt;case re.DateMillisecond:case re.Date:return new _pt;case re.Dictionary:return new O0(new SE,new D0);case re.Float16:return new kTe;case re.Float32:return new QY;case re.Float64:case re.Float:return new JY;case re.Int8:return new HY;case re.Int16:return new qY;case re.Int32:case re.Int:return new D0;case re.Int64:return new WY;case re.IntervalDayTime:return new Tpt;case re.Interval:case re.IntervalYearMonth:return new Cpt;case re.Null:return new mm;case re.TimeMicrosecond:return new xpt;case re.TimeMillisecond:case re.Time:return new Ept;case re.TimeNanosecond:return new Spt;case re.TimeSecond:return new wpt;case re.Uint8:return new GY;case re.Uint16:return new YY;case re.Uint32:return new KY;case re.Uint64:return new XY;case re.Utf8:return new SE;default:_n(`Unsupported type code: ${dh(e)}. Use a data type constructor instead?`)}}function h0t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function uAe(e,t){const n=U7();return e(t,n.add),n}function U7(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(pm(t))++e.dates,h0t(t)&&++e.utcdays;else if(zv(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=U7());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=U7())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return MK(p0t(e))}};return e}function p0t(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:_n(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:_n(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Mr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new IE(e.minlen,n):new AE(n)}else if(e.structs===t){const n=e.struct_prof;return new sa(Object.keys(n).map(r=>Mr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;_n("Type inference failure")}}}}function m0t(e,t,n,r,i,s=!0){if(i=MK(i),!i){const o=uAe(r,t);s=o.nulls>0,i=o.type()}return aAe(n,r,t,i,s)}function g0t(e,t,n,r,i,s=!0){i=MK(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=y0t(o);if(u&&a&&$le(u.type,i))return u;const l=o.data;if(YI(l)){const c=v0t(l);if(a&&c&&$le(c,i))return d0t(l,c);i=i||c,s=!1}if(!i){const c=uAe(r,o);s=c.nulls>0,i=c.type()}return aAe(n,r,o,i,s)}function y0t(e){return e instanceof fr?e:e.vector instanceof fr?e.vector:null}function v0t(e){const n={Float32Array:QY,Float64Array:JY,Int8Array:HY,Int16Array:qY,Int32Array:D0,Uint8Array:GY,Uint16Array:YY,Uint32Array:KY,BigInt64Array:WY,BigUint64Array:XY}[e.constructor.name];return n?new n:null}function $le(e,t){return!e||!t?!0:e.compareTo(t)}function b0t(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function _0t(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&zv(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const w0t=()=>_n("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function E0t(){try{return vu}catch{w0t()}}function lAe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=x0t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&_n("Column length mismatch"),a[l]=c});const u=E0t();return new u(a)}function x0t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=di(n)?n(e):cr(n)?n:null;if(cr(e))return{dataFrom:m0t,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:b0t(e,r,i)};if(S0t(e))return{dataFrom:g0t,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:_0t(e,r,i)};_n("Unsupported input data type")}function S0t(e){return e&&di(e.reify)}function T0t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return Jgt(lAe(e,r),n)}function C0t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function A0t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&pm(u))++i,C0t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function r6(e,t){return di(t)?t(e):t||e.columnNames()}function cAe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=A0t(I0t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function I0t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function LK(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function k0t(e,t={}){const n=r6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":pm(l)?qL(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return LK(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function fAe(e,t={}){if(di(t))return t(e)+"";const n=typeof e;if(n==="object"){if(pm(e))return t.utc?qL(e):PSe(e);{const r=JSON.stringify(e,(s,o)=>YI(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function i6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function R0t(e,t={}){const n=r6(e,t.columns),{align:r,format:i}=cAe(e,n,t),s=N0t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(fAe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return LK(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function N0t(e){return i6(e.style,t=>di(t)?t:()=>t)}function D0t(e,t=!0,n=!1){return e===void 0||e?t:n}const P0t=e=>pm(e)?qL(e,!0):e;function O0t(e,t={}){const n=D0t(t.schema),r=t.format||{},i=r6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||P0t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function $0t(e,t={}){const n=r6(e,t.columns),{align:r,format:i}=cAe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return LK(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(fAe(u,i[l]))+"|"}}),a+`
`}function dAe(e,t){for(const[n,r]of WL(t))e.set(n,r);return e}function M0t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function ym(e,t,n=new Map){return t=Ya(t)?e.columnName(t):t,$o(t)?n.set(t,t):cr(t)?t.forEach(r=>ym(e,r,n)):di(t)?ym(e,t(e),n):ma(t)?dAe(n,t):_n(`Invalid column selection: ${dh(t)}`),n}function s6(e,t){return e.toObject=t,e}function hAe(e){return cr(e)?e.map(hAe):e&&e.toObject?e.toObject():e}function NE(){return s6(e=>e.columnNames(),()=>({all:[]}))}function pAe(...e){return e=e.flat(),s6(t=>{const n=ym(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:hAe(e)}))}function L0t(e,t){return s6(n=>{let r=Ya(e)?e:n.columnIndex(e),i=Ya(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function F0t(e){return $o(e)&&(e=RegExp(M0t(e))),s6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function j0t(e){return YI(e.data)?e.data.constructor:Array}class Cp extends nht{static from(t,n){return new Cp(sht(t,n),n)}static new(t,n){if(t instanceof Cp)return t;const r={},i=[];for(const[s,o]of WL(t))r[s]=o,i.push(s);return new Cp(r,n||i)}constructor(t,n,r,i,s,o){i6(t,iht,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Cp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Oht(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=zl(r).groupby(r.groups());return t.forEach(s=>{s=Cp.new(s),s.numRows()!==n&&_n("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):_n(`Unrecognized column: ${t}`)}object(t=0){return Mle(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=ym(this,t.columns||NE()),o=iTe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Mht(this,u,a,n)}return a}*[Symbol.iterator](){const t=Mle(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(j0t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=$ht(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return lAe(this,t)}toArrowBuffer(t){return T0t(this,t)}toCSV(t){return k0t(this,t)}toHTML(t){return R0t(this,t)}toJSON(t){return O0t(this,t)}toMarkdown(t){return $0t(this,t)}}function Mle(e){let t=e._builder;if(!t){const n=iTe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class B0t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Jn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=U0t[e.type];s&&s(e,t,n)}const yN=(e,t,n)=>{Jn(e.argument,t,n,e)},nj=(e,t,n)=>{Jn(e.left,t,n,e),Jn(e.right,t,n,e)},Lle=(e,t,n)=>{Jn(e.test,t,n,e),Jn(e.consequent,t,n,e),e.alternate&&Jn(e.alternate,t,n,e)},rj=(e,t,n)=>{bd(e.params,t,n,e),Jn(e.body,t,n,e)},Fle=(e,t,n)=>{Jn(e.callee,t,n,e),bd(e.arguments,t,n,e)},bd=(e,t,n,r)=>{e.forEach(i=>Jn(i,t,n,r))},U0t={TemplateLiteral:(e,t,n)=>{bd(e.expressions,t,n,e),bd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Jn(e.object,t,n,e),Jn(e.property,t,n,e)},CallExpression:Fle,NewExpression:Fle,ArrayExpression:(e,t,n)=>{bd(e.elements,t,n,e)},AssignmentExpression:nj,AwaitExpression:yN,BinaryExpression:nj,LogicalExpression:nj,UnaryExpression:yN,UpdateExpression:yN,ConditionalExpression:Lle,ObjectExpression:(e,t,n)=>{bd(e.properties,t,n,e)},Property:(e,t,n)=>{Jn(e.key,t,n,e),Jn(e.value,t,n,e)},ArrowFunctionExpression:rj,FunctionExpression:rj,FunctionDeclaration:rj,VariableDeclaration:(e,t,n)=>{bd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Jn(e.id,t,n,e),Jn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Jn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{bd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Jn(e.expression,t,n,e)},IfStatement:Lle,ForStatement:(e,t,n)=>{Jn(e.init,t,n,e),Jn(e.test,t,n,e),Jn(e.update,t,n,e),Jn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Jn(e.test,t,n,e),Jn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Jn(e.body,t,n,e),Jn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Jn(e.discriminant,t,n,e),bd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Jn(e.test,t,n,e),bd(e.consequent,t,n,e)},ReturnStatement:yN,Program:(e,t,n)=>{Jn(e.body[0],t,n,e)}};function mAe(e){delete e.start,delete e.end,delete e.optional}function jle(e){mAe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function z0t(e){return Jn(e,null,{Column:jle,Constant:jle,Default:mAe}),e}function xs(e,t){return t&&t.type===e}function V0t(e){return xs(jht,e)||xs(Fht,e)}function H0t(e){return di(e)?e:()=>e}const q0t="Escaped functions are not valid as rollup or pivot values.";function W0t(e,t,n){e.aggronly&&_n(q0t);const r="(row,data)=>fn("+rTe(e.table.columnNames())+",$)";return{escape:jY.escape(r,H0t(t.expr),n)}}var G0t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],gAe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],Y0t="-----------------------------------------------------------------------------------------------------------------------------------------------------",yAe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",ij={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},sj="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",K0t={5:sj,"5module":sj+" export import",6:sj+" const class extends export import super"},X0t=/^in(stanceof)?$/,Q0t=new RegExp("["+yAe+"]"),J0t=new RegExp("["+yAe+Y0t+"]");function z7(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function vm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Q0t.test(String.fromCharCode(e)):t===!1?!1:z7(e,gAe)}function DE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&J0t.test(String.fromCharCode(e)):t===!1?!1:z7(e,gAe)||z7(e,G0t)}var ir=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Wl(e,t){return new ir(e,{beforeExpr:!0,binop:t})}var Gl={beforeExpr:!0},au={startsExpr:!0},FK={};function Hn(e,t){return t===void 0&&(t={}),t.keyword=e,FK[e]=new ir(e,t)}var K={num:new ir("num",au),regexp:new ir("regexp",au),string:new ir("string",au),name:new ir("name",au),privateId:new ir("privateId",au),eof:new ir("eof"),bracketL:new ir("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ir("]"),braceL:new ir("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ir("}"),parenL:new ir("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ir(")"),comma:new ir(",",Gl),semi:new ir(";",Gl),colon:new ir(":",Gl),dot:new ir("."),question:new ir("?",Gl),questionDot:new ir("?."),arrow:new ir("=>",Gl),template:new ir("template"),invalidTemplate:new ir("invalidTemplate"),ellipsis:new ir("...",Gl),backQuote:new ir("`",au),dollarBraceL:new ir("${",{beforeExpr:!0,startsExpr:!0}),eq:new ir("=",{beforeExpr:!0,isAssign:!0}),assign:new ir("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ir("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ir("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Wl("||",1),logicalAND:Wl("&&",2),bitwiseOR:Wl("|",3),bitwiseXOR:Wl("^",4),bitwiseAND:Wl("&",5),equality:Wl("==/!=/===/!==",6),relational:Wl("</>/<=/>=",7),bitShift:Wl("<</>>/>>>",8),plusMin:new ir("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Wl("%",10),star:Wl("*",10),slash:Wl("/",10),starstar:new ir("**",{beforeExpr:!0}),coalesce:Wl("??",1),_break:Hn("break"),_case:Hn("case",Gl),_catch:Hn("catch"),_continue:Hn("continue"),_debugger:Hn("debugger"),_default:Hn("default",Gl),_do:Hn("do",{isLoop:!0,beforeExpr:!0}),_else:Hn("else",Gl),_finally:Hn("finally"),_for:Hn("for",{isLoop:!0}),_function:Hn("function",au),_if:Hn("if"),_return:Hn("return",Gl),_switch:Hn("switch"),_throw:Hn("throw",Gl),_try:Hn("try"),_var:Hn("var"),_const:Hn("const"),_while:Hn("while",{isLoop:!0}),_with:Hn("with"),_new:Hn("new",{beforeExpr:!0,startsExpr:!0}),_this:Hn("this",au),_super:Hn("super",au),_class:Hn("class",au),_extends:Hn("extends",Gl),_export:Hn("export"),_import:Hn("import",au),_null:Hn("null",au),_true:Hn("true",au),_false:Hn("false",au),_in:Hn("in",{beforeExpr:!0,binop:7}),_instanceof:Hn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Hn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Hn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Hn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Mc=/\r\n?|\n|\u2028|\u2029/,Z0t=new RegExp(Mc.source,"g");function Gx(e){return e===10||e===13||e===8232||e===8233}function vAe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(Gx(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var bAe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ic=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,_Ae=Object.prototype,eyt=_Ae.hasOwnProperty,tyt=_Ae.toString,tk=Object.hasOwn||function(e,t){return eyt.call(e,t)},Ble=Array.isArray||function(e){return tyt.call(e)==="[object Array]"},Ule=Object.create(null);function Mg(e){return Ule[e]||(Ule[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function B0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var nyt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,w2=function(t,n){this.line=t,this.column=n};w2.prototype.offset=function(t){return new w2(this.line,this.column+t)};var o6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function wAe(e,t){for(var n=1,r=0;;){var i=vAe(e,r,t);if(i<0)return new w2(n,t-r);++n,r=i}}var V7={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},zle=!1;function ryt(e){var t={};for(var n in V7)t[n]=e&&tk(e,n)?e[n]:V7[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!zle&&typeof console=="object"&&console.warn&&(zle=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Ble(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Ble(t.onComment)&&(t.onComment=iyt(t,t.onComment)),t}function iyt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new o6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var E2=1,Yx=2,jK=4,EAe=8,xAe=16,SAe=32,BK=64,TAe=128,nk=256,UK=E2|Yx|nk;function zK(e,t){return Yx|(e?jK:0)|(t?EAe:0)}var j3=0,VK=1,zm=2,CAe=3,AAe=4,IAe=5,Ds=function(t,n,r){this.options=t=ryt(t),this.sourceFile=t.sourceFile,this.keywords=Mg(K0t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=ij[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Mg(i);var s=(i?i+" ":"")+ij.strict;this.reservedWordsStrict=Mg(s),this.reservedWordsStrictBind=Mg(s+" "+ij.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Mc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(E2),this.regexpState=null,this.privateNameStack=[]},Fh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Ds.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Fh.inFunction.get=function(){return(this.currentVarScope().flags&Yx)>0};Fh.inGenerator.get=function(){return(this.currentVarScope().flags&EAe)>0&&!this.currentVarScope().inClassFieldInit};Fh.inAsync.get=function(){return(this.currentVarScope().flags&jK)>0&&!this.currentVarScope().inClassFieldInit};Fh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&nk)return!1;if(t.flags&Yx)return(t.flags&jK)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Fh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&BK)>0||n||this.options.allowSuperOutsideMethod};Fh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&TAe)>0};Fh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Fh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(Yx|nk))>0||n};Fh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&nk)>0};Ds.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Ds.parse=function(t,n){return new this(n,t).parse()};Ds.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Ds.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Ds.prototype,Fh);var tu=Ds.prototype,syt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;tu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){ic.lastIndex=e,e+=ic.exec(this.input)[0].length;var t=syt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){ic.lastIndex=e+t[0].length;var n=ic.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Mc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,ic.lastIndex=e,e+=ic.exec(this.input)[0].length,this.input[e]===";"&&e++}};tu.eat=function(e){return this.type===e?(this.next(),!0):!1};tu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};tu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};tu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};tu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Mc.test(this.input.slice(this.lastTokEnd,this.start))};tu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};tu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};tu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};tu.expect=function(e){this.eat(e)||this.unexpected()};tu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var a6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};tu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};tu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};tu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};tu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ot=Ds.prototype;Ot.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var HK={kind:"loop"},oyt={kind:"switch"};Ot.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ic.lastIndex=this.pos;var t=ic.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(vm(r,!0)){for(var i=n+1;DE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!X0t.test(s))return!0}return!1};Ot.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ic.lastIndex=this.pos;var e=ic.exec(this.input),t=this.pos+e[0].length,n;return!Mc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(DE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ot.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){ic.lastIndex=this.pos;var o=ic.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ot.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ot.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ot.parseDoStatement=function(e){return this.next(),this.labels.push(HK),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ot.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(HK),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new a6,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};Ot.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,XC|(n?0:H7),!1,t)};Ot.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ot.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ot.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(oyt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ot.parseThrowStatement=function(e){return this.next(),Mc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var ayt=[];Ot.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?SAe:0),this.checkLValPattern(e,t?AAe:zm),this.expect(K.parenR),e};Ot.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ot.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ot.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(HK),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ot.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ot.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ot.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ot.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ot.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ot.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ot.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ot.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Ot.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?VK:zm,!1)};var XC=1,H7=2,kAe=4;Ot.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&H7&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&XC&&(e.id=t&kAe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&H7)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?VK:zm:CAe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(zK(e.async,e.generator)),t&XC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&XC?"FunctionDeclaration":"FunctionExpression")};Ot.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ot.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&uyt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ot.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&B3(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ot.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Ot.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ot.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&B3(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ot.parseClassField=function(e){if(B3(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&B3(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ot.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(nk|BK);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ot.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,zm,!1)):(t===!0&&this.unexpected(),e.id=null)};Ot.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Ot.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ot.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];tk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function uyt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function B3(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ot.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ot.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ot.parseExportDeclaration=function(e){return this.parseStatement(null)};Ot.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,XC|kAe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ot.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),tk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ot.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ot.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ot.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ot.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ot.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ot.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=ayt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ot.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,zm),this.finishNode(e,"ImportSpecifier")};Ot.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,zm),this.finishNode(e,"ImportDefaultSpecifier")};Ot.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,zm),this.finishNode(e,"ImportNamespaceSpecifier")};Ot.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Ot.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return nyt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ot.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ot.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Lc=Ds.prototype;Lc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Lc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Lc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Lc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Lc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Lc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Lc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Lc.parseBindingListItem=function(e){return e};Lc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Lc.checkLValSimple=function(e,t,n){t===void 0&&(t=j3);var r=t!==j3;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===zm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(tk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==IAe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Lc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=j3),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Lc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=j3),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var Kc=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},_i={b_stat:new Kc("{",!1),b_expr:new Kc("{",!0),b_tmpl:new Kc("${",!1),p_stat:new Kc("(",!1),p_expr:new Kc("(",!0),q_tmpl:new Kc("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Kc("function",!1),f_expr:new Kc("function",!0),f_expr_gen:new Kc("function",!0,!1,null,!0),f_gen:new Kc("function",!1,!1,null,!0)},Kx=Ds.prototype;Kx.initialContext=function(){return[_i.b_stat]};Kx.curContext=function(){return this.context[this.context.length-1]};Kx.braceIsBlock=function(e){var t=this.curContext();return t===_i.f_expr||t===_i.f_stat?!0:e===K.colon&&(t===_i.b_stat||t===_i.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Mc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===_i.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};Kx.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};Kx.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};Kx.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===_i.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?_i.b_stat:_i.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(_i.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?_i.p_stat:_i.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==_i.p_stat)&&!(e===K._return&&Mc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===_i.b_stat)?this.context.push(_i.f_expr):this.context.push(_i.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===_i.q_tmpl?this.context.pop():this.context.push(_i.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===_i.f_expr?this.context[t]=_i.f_expr_gen:this.context[t]=_i.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var on=Ds.prototype;on.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};on.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};on.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new a6,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};on.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};on.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};on.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};on.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};on.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&RAe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function RAe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&RAe(e.expression)}on.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};on.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};on.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};on.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};on.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new a6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};on.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(_i.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(_i.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};on.parseExprAtomDefault=function(){this.unexpected()};on.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};on.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};on.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};on.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};on.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};on.shouldParseArrow=function(e){return!this.canInsertSemicolon()};on.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new a6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};on.parseParenItem=function(e){return e};on.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var lyt=[];on.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=lyt,this.finishNode(e,"NewExpression")};on.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};on.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};on.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Mc.test(this.input.slice(this.lastTokEnd,this.start))};on.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};on.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};on.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};on.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};on.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};on.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};on.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(zK(t,r.generator)|BK|(n?TAe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};on.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(zK(n,!1)|xAe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};on.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,IAe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};on.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};on.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,VK,t?null:n)}};on.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};on.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};on.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};on.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};on.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};on.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};on.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var U3=Ds.prototype;U3.raise=function(e,t){var n=wAe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};U3.raiseRecoverable=U3.raise;U3.curPosition=function(){if(this.options.locations)return new w2(this.curLine,this.pos-this.lineStart)};var Ty=Ds.prototype,cyt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Ty.enterScope=function(e){this.scopeStack.push(new cyt(e))};Ty.exitScope=function(){this.scopeStack.pop()};Ty.treatFunctionsAsVarInScope=function(e){return e.flags&Yx||!this.inModule&&e.flags&E2};Ty.declareName=function(e,t,n){var r=!1;if(t===zm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&E2&&delete this.undefinedExports[e]}else if(t===AAe){var s=this.currentScope();s.lexical.push(e)}else if(t===CAe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&SAe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&E2&&delete this.undefinedExports[e],u.flags&UK)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Ty.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Ty.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Ty.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&UK)return t}};Ty.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&UK&&!(t.flags&xAe))return t}};var u6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new o6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},rk=Ds.prototype;rk.startNode=function(){return new u6(this,this.start,this.startLoc)};rk.startNodeAt=function(e,t){return new u6(this,e,t)};function NAe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}rk.finishNode=function(e,t){return NAe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};rk.finishNodeAt=function(e,t,n,r){return NAe.call(this,e,t,n,r)};rk.copyNode=function(e){var t=new u6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var DAe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",PAe=DAe+" Extended_Pictographic",OAe=PAe,$Ae=OAe+" EBase EComp EMod EPres ExtPict",MAe=$Ae,fyt=MAe,dyt={9:DAe,10:PAe,11:OAe,12:$Ae,13:MAe,14:fyt},hyt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",pyt={9:"",10:"",11:"",12:"",13:"",14:hyt},Vle="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",LAe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",FAe=LAe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",jAe=FAe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",BAe=jAe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",UAe=BAe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",myt=UAe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",gyt={9:LAe,10:FAe,11:jAe,12:BAe,13:UAe,14:myt},zAe={};function yyt(e){var t=zAe[e]={binary:Mg(dyt[e]+" "+Vle),binaryOfStrings:Mg(pyt[e]),nonBinary:{General_Category:Mg(Vle),Script:Mg(gyt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var oj=0,Hle=[9,10,11,12,13,14];oj<Hle.length;oj+=1){var vyt=Hle[oj];yyt(vyt)}var Ct=Ds.prototype,jh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=zAe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};jh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};jh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};jh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};jh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};jh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};jh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};jh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};jh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};jh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return VAe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function VAe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!VAe(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=B0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=B0(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),byt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function byt(e){return vm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),_yt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function _yt(e){return DE(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!l6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return HAe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function HAe(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&wyt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function wyt(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var qAe=0,bm=1,ac=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(Eyt(t))return e.lastIntValue=-1,e.advance(),bm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===ac&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return qAe};function Eyt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),bm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return qAe};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){tk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return bm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return ac;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";WAe(t=e.current());)e.lastStringValue+=B0(t),e.advance();return e.lastStringValue!==""};function WAe(e){return HAe(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";xyt(t=e.current());)e.lastStringValue+=B0(t),e.advance();return e.lastStringValue!==""};function xyt(e){return WAe(e)||l6(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===ac&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?bm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),bm)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||KAe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=bm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===ac&&(t=ac);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==ac&&(t=bm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===ac&&(t=ac)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?bm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===ac&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===ac&&(t=ac);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?bm:ac};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&Syt(n)||Tyt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function Syt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function Tyt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return Cyt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Cyt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return l6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;l6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function l6(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;GAe(n=e.current());)e.lastIntValue=16*e.lastIntValue+YAe(n),e.advance();return e.pos!==t};function GAe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function YAe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return KAe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function KAe(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!GAe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+YAe(i),e.advance()}return!0};var qK=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new o6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Vn=Ds.prototype;Vn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new qK(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Vn.getToken=function(){return this.next(),new qK(this)};typeof Symbol<"u"&&(Vn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Vn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Vn.readToken=function(e){return vm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Vn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Vn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=vAe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Vn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Gx(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Vn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&bAe.test(String.fromCharCode(e)))++this.pos;else break e}}};Vn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Vn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Vn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Vn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Vn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Vn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Vn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Mc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Vn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Vn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Vn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Vn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),vm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+B0(t)+"'")};Vn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+B0(e)+"'")};Vn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Vn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Mc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new jh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Vn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function Ayt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function XAe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Vn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=XAe(this.input.slice(t,this.pos)),++this.pos):vm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Vn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=XAe(this.input.slice(t,this.pos));return++this.pos,vm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),vm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=Ayt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Vn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Vn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Gx(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var QAe={};Vn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===QAe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Vn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw QAe;this.raise(e,t)};Vn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Gx(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Vn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Vn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return B0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return Gx(t)?"":String.fromCharCode(t)}};Vn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Vn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(DE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?vm:DE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=B0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Vn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=FK[e]),this.finishToken(t,e)};var Iyt="8.11.3";Ds.acorn={Parser:Ds,version:Iyt,defaultOptions:V7,Position:w2,SourceLocation:o6,getLineInfo:wAe,Node:u6,TokenType:ir,tokTypes:K,keywordTypes:FK,TokContext:Kc,tokContexts:_i,isIdentifierChar:DE,isIdentifierStart:vm,Token:qK,isNewLine:Gx,lineBreak:Mc,lineBreakG:Z0t,nonASCIIwhitespace:bAe};function kyt(e,t){return Ds.parse(e,t)}const WK={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},Ryt={ecmaVersion:11},qle="$",Nyt="d",Dyt="d1",Pyt="d2",vo=e=>(t,n)=>n.error(t,e+" not allowed"),Oyt=vo("Aggregate function"),$yt=vo("Window function"),Myt="Invalid argument",GK="Invalid column reference",Lyt=GK+" (must be input to an aggregate function)",JAe="Invalid function call",Fyt="Invalid member expression",jyt="Invalid operator parameter",Byt="Invalid param reference",Uyt="Invalid variable reference",zyt="Variable not accessible in operator call",Vyt="Unsupported variable declaration",Hyt="Unsupported destructuring pattern",ZAe="Table expressions do not support closures",e2e="Use aq.escape(fn) to use a function as-is (including closures)",qyt="use table.params({ name: value }) to define dynamic parameters",Wyt="use aq.addFunction(name, fn) to add new op functions",Gyt=`
Note: ${ZAe}. ${e2e}, or ${qyt}.`,t2e=`
Note: ${ZAe}. ${e2e}, or ${Wyt}.`,Yyt=`The ${tTe} method is not valid in multi-table expressions.`;function Kyt(e,t){const n=Xyt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,V0t(r)?(Jyt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=Dyt),e.scope.add(e.tuple2=Pyt),e.scope.add(e.$param=qle)):(e.scope.add(e.tuple=Nyt),e.scope.add(e.$param=qle)),Jn(r,e,YK),e.root}function Xyt(e){try{const t=e.field?Qyt(e):cr(e)?dh(e):e;return kyt(`expr=(${t})`,Ryt).body[0].expression.right}catch{_n(`Expression parse error: ${e+""}`)}}function Qyt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const YK={FunctionDeclaration:vo("Function definitions"),ForStatement:vo("For loops"),ForOfStatement:vo("For-of loops"),ForInStatement:vo("For-in loops"),WhileStatement:vo("While loops"),DoWhileStatement:vo("Do-while loops"),AwaitExpression:vo("Await expressions"),ArrowFunctionExpression:vo("Function definitions"),AssignmentExpression:vo("Assignments"),FunctionExpression:vo("Function definitions"),NewExpression:vo('Use of "new"'),UpdateExpression:vo("Update expressions"),VariableDeclarator(e,t){G7(e.id,t)},Identifier(e,t,n){i2e(e,t,n)&&!t.scope.has(e.name)&&t.error(e,Uyt,Gyt)},CallExpression(e,t){const n=n2e(e.callee),r=JSe(n)||ZSe(n);if(r){if((t.join||t.aggregate===!1)&&LY(n)&&Oyt(e,t),(t.join||t.window===!1)&&FY(n)&&$yt(e,t),t.$op=1,t.ast)W7(e,n,t),e.arguments.forEach(i=>Jn(i,t,q7));else{const i=t.op(Zyt(t,r,n,e.arguments));Object.assign(e,{type:GSe,name:i.id})}return t.$op=0,!1}else QSe(n)?W7(e,n,t):t.error(e,JAe,t2e)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!xs(s0,r))return;const{name:s}=r;if(r2e(e)&&xs(s0,i)&&Ff(WK,i.name)){a2e(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Wle(e,o,t,s2e,n);if(s===t.$param)return Wle(e,o,t,tvt);t.paramsRef.has(s)?x2(e,t.paramsRef.get(s)):t.columnRef.has(s)?o2e(r,s,t,e):Ff(t.params,s)&&x2(r,s)}};function Wle(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(xs(zx,s))a=s.value;else try{Jn(s,n,YK,e),a=n.param(s)}catch{n.error(e,Fyt)}return r(e,a,t,n,i),!1}const q7={...YK,VariableDeclarator:vo("Variable declaration in operator call"),Identifier(e,t,n){i2e(e,t,n)&&t.error(e,zyt)},CallExpression(e,t){const n=n2e(e.callee);QSe(n)?W7(e,n,t):t.error(e,JAe,t2e)}};function Jyt(e,t){e.generator&&vo("Generator functions")(e,t),e.async&&vo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(sT(t,n[0],"tuple1",i(1)),r>1&&sT(t,n[1],"tuple2",i(2)),r>2&&sT(t,n[2],"$param",s)):(sT(t,n[0],"tuple",i(0)),r>1&&sT(t,n[1],"$param",s))),t.root=e.body}function sT(e,t,n,r){xs(s0,t)?(e.scope.add(t.name),e[n]=t.name):xs(qSe,t)&&t.properties.forEach(i=>{const s=xs(s0,i.key)?i.key.name:xs(zx,i.key)?i.key.value:e.error(i,Myt);xs(s0,i.value)||e.error(i.value,Hyt),r(i.value.name,s)})}function Zyt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Jn(u,e,q7),i.push(e.field(u))):l<a?(Jn(u,e,q7),s.push(e.param(u))):e.error(u,jyt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function n2e(e){return xs(s0,e)?e.name:xs(HSe,e)?r2e(e)?evt(e.property.name):e.property.name:null}function r2e(e){return xs(s0,e.object)&&e.object.name==="Math"}function evt(e){return e==="max"?"greatest":e==="min"?"least":e}function i2e(e,t,n){const{name:r}=e;if(!(xs(HSe,n)&&n.property===e)){if(!(xs(WSe,n)&&n.key===e))if(t.paramsRef.has(r))x2(e,t.paramsRef.get(r));else if(t.columnRef.has(r))o2e(e,r,t,n);else if(Ff(t.params,r))x2(e,r);else if(Ff(WK,r))a2e(e,r);else return!0}}function s2e(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,GK),r.aggronly&&!r.$op&&r.error(e,Lyt),eTe(e,t,n,o,i)}function o2e(e,t,n,r){const[i,s]=n.columnRef.get(t);s2e(e,i,s,n,r)}function tvt(e,t,n,r){r.params&&!Ff(r.params,t)&&r.error(e,Byt),x2(e,t)}function x2(e,t){e.type=Hht,e.name=t}function a2e(e,t){e.type=Uht,e.name=t,e.raw=WK[t]}function W7(e,t,n){if(t===tTe){const r=n.table;r||n.error(e,Yyt),nTe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Ya(s)?r.columnName(s):s;return r.column(o)||n.error(i,GK),o}):r.columnNames())}else e.callee={type:Vht,name:t}}function G7(e,t){xs(s0,e)?t.scope.add(e.name):xs(Lht,e)?e.elements.forEach(n=>G7(n,t)):xs(qSe,e)?e.properties.forEach(n=>G7(n.value,t)):t.error(e.id,Vyt)}const nvt={[KI]:1,[GSe]:1};function Vu(e,t={}){const n=t.generate||b3,r=t.compiler||jY,i=ivt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=rvt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return xs(zx,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?z0t(g):f(n(g),i));u.push(y),nvt[g.type]&&y!==g&&ma(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);_n(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of WL(e))d.value(m+"",g.escape?W0t(d,g,i):Kyt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function rvt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function ivt(e){return(e.table?aj(e.table):e.join?{...aj(e.join[1]),...aj(e.join[0])}:{})||{}}function aj(e){return e&&di(e.params)?e.params():{}}const u2e="Expr",Xc="ExprList",l2e="ExprNumber",nC="ExprObject",J_="JoinKeys",z3="JoinValues",Ql="Options",KK="OrderKeys",ug="SelectionList",xv="TableRef",Z_="TableRefList",svt="Descending",ovt="Query",avt="Selection",uvt="Verb",lvt="Window";function c6(e,t){return e&&e.expr?new Gle({...e,...t}):new Gle(t,e)}class Gle{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...di(this.expr)?{func:!0}:{}}}}function cvt(e){return c6(e,{desc:!0})}function L1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return c6(e,t?{expr:t,...r}:r)}function fvt(e,t,n){return c6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function dvt(e){const t=n=>n;return t.toString=()=>e,t}function Yle(e,t){return t=t&&di(t.query)?t.query():t,t&&di(t.evaluate)?t.evaluate(null,e):e(t)}function c2e(e){return ma(e)&&(cr(e.all)||cr(e.matches)||cr(e.not)||cr(e.range))}function S2(e){return e&&di(e.toObject)?e.toObject():di(e)?{expr:String(e),func:!0}:cr(e)?e.map(S2):ma(e)?i6(e,t=>S2(t)):e}function XK(e){return cr(e)?e.map(XK):ma(e)?cr(e.verbs)?JK.from(e):cr(e.all)?NE():cr(e.range)?L0t(...e.range):cr(e.match)?F0t(RegExp(...e.match)):cr(e.not)?pAe(e.not.map(S2)):hvt(e):e}function hvt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=L1(n):e.func===!0&&(t=n=dvt(n)),ma(e.window)){const{frame:r,peers:i}=e.window;t=n=fvt(n,r,i)}e.desc===!0&&(t=cvt(n))}return e===t?i6(e,r=>XK(r)):t}function pvt(e){return cr(e)?e.map(mvt):e}function mvt(e){const t=[];return Bu(e).forEach(n=>{Ya(n)?t.push(n):$o(n)?t.push(L1(n,null)):ma(n)&&n.expr||di(n)?t.push(n):_n(`Invalid key value: ${n+""}`)}),t}function gvt(e){return cr(e)?e.map(yvt):e}function yvt(e,t){return t<2?Bu(e):e}function vvt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ma(r)&&!di(r))for(const i in r)t.push(r[i]);else n=Ya(r)?r:$o(r)?L1(n):di(r)?n:_n(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const bvt={[u2e]:p2e,[Xc]:PE,[l2e]:Tvt,[nC]:U0,[J_]:Cvt,[z3]:Avt,[KK]:PE,[ug]:xvt};function _vt(e,t,n){return t===xv?Kle(e):t===Z_?e.map(Kle):f2e(S2(e),t,n)}function f2e(e,t,n){return t===Ql?e&&wvt(e,n):bvt[t](e)}function wvt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?f2e(i,t[r]):i}return n}function Evt(e,t){return Vu({expr:e},{...t,ast:!0}).exprs[0]}function QK(e){return{type:KI,name:e}}function d2e(e){return{type:KI,index:e}}function U0(e,t){if($o(e))return Evt(e,t);if(e.expr){let n;if(e.field===!0?n=QK(e.expr):e.func===!0&&(n=U0(e.expr,t)),n)return e.desc&&(n={type:svt,expr:n}),e.window&&(n={type:lvt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...U0(e[n],t),as:n}))}function h2e(e){const t=avt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:PE(e.not)}:e.range?{type:t,operator:"range",arguments:PE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:_n("Invalid input")}function xvt(e){return Bu(e).map(Svt).flat()}function Svt(e){return c2e(e)?h2e(e):Ya(e)?d2e(e):$o(e)?QK(e):ma(e)?Object.keys(e).map(t=>({type:KI,name:t,as:e[t]})):_n("Invalid input")}function p2e(e){return c2e(e)?h2e(e):Ya(e)?d2e(e):$o(e)?QK(e):ma(e)?U0(e):_n("Invalid input")}function PE(e){return Bu(e).map(p2e).flat()}function Tvt(e){return Ya(e)?e:U0(e)}function Cvt(e){return cr(e)?e.map(PE):U0(e,{join:!0})}function Avt(e){return cr(e)?e.map((t,n)=>n<2?PE(t):U0(t,{join:!0})):U0(e,{join:!0})}function Kle(e){return e&&di(e.toAST)?e.toAST():e}class m2e{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===J_?pvt(a):o===z3?gvt(a):o===KK?vvt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=Y7[t.verb],r=(n.schema||[]).map(({name:i})=>XK(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===xv?Yle(n,o):s===Z_?o.map(a=>Yle(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=S2(this[n])}),t}toAST(){const t={type:uvt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=_vt(this[n],r,i)}),t}}function $r(e,t){return Object.assign((...n)=>new m2e(e,t,n),{schema:t})}const Y7={count:$r("count",[{name:"options",type:Ql}]),derive:$r("derive",[{name:"values",type:nC},{name:"options",type:Ql,props:{before:ug,after:ug}}]),filter:$r("filter",[{name:"criteria",type:nC}]),groupby:$r("groupby",[{name:"keys",type:Xc}]),orderby:$r("orderby",[{name:"keys",type:KK}]),relocate:$r("relocate",[{name:"columns",type:ug},{name:"options",type:Ql,props:{before:ug,after:ug}}]),rename:$r("rename",[{name:"columns",type:ug}]),rollup:$r("rollup",[{name:"values",type:nC}]),sample:$r("sample",[{name:"size",type:l2e},{name:"options",type:Ql,props:{weight:u2e}}]),select:$r("select",[{name:"columns",type:ug}]),ungroup:$r("ungroup"),unorder:$r("unorder"),reify:$r("reify"),dedupe:$r("dedupe",[{name:"keys",type:Xc,default:[]}]),impute:$r("impute",[{name:"values",type:nC},{name:"options",type:Ql,props:{expand:Xc}}]),fold:$r("fold",[{name:"values",type:Xc},{name:"options",type:Ql}]),pivot:$r("pivot",[{name:"keys",type:Xc},{name:"values",type:Xc},{name:"options",type:Ql}]),spread:$r("spread",[{name:"values",type:Xc},{name:"options",type:Ql}]),unroll:$r("unroll",[{name:"values",type:Xc},{name:"options",type:Ql,props:{drop:Xc}}]),lookup:$r("lookup",[{name:"table",type:xv},{name:"on",type:J_},{name:"values",type:Xc}]),join:$r("join",[{name:"table",type:xv},{name:"on",type:J_},{name:"values",type:z3},{name:"options",type:Ql}]),cross:$r("cross",[{name:"table",type:xv},{name:"values",type:z3},{name:"options",type:Ql}]),semijoin:$r("semijoin",[{name:"table",type:xv},{name:"on",type:J_}]),antijoin:$r("antijoin",[{name:"table",type:xv},{name:"on",type:J_}]),concat:$r("concat",[{name:"tables",type:Z_}]),union:$r("union",[{name:"tables",type:Z_}]),intersect:$r("intersect",[{name:"tables",type:Z_}]),except:$r("except",[{name:"tables",type:Z_}])};let JK=class g2e extends NSe{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new g2e(t.map(m2e.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Xle(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Xle(this,"toAST",{type:ovt})}};function Xle(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function Ivt(e,t){return new JK(e._verbs.concat(t),e._params,e._table)}for(const e in Y7){const t=Y7[e];JK.prototype["__"+e]=function(n,...r){return Ivt(n,t(...r))}}function Xx(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function kvt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function ZK(e,t){const n=zl();return t.forEach((r,i)=>{const s=$o(r)?r:i;if(s){const o=e.column(i)||_n(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function y2e(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||_n("relocate requires a before or after option."),i&&s&&_n("relocate accepts only one of the before or after options."),t=ym(e,t);const o=[...ym(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),ZK(e,u)}function ik(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function eX(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Rvt(e,t=0,n=e.length){let r=n?e[t++]:sr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function Nvt(e,t=0,n=e.length){let r=n?e[t++]:sr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function vN(e){return p2(e)?e:+e}function Dvt(e,t){const n=e.length;if(!n)return sr;if((t=+t)<=0||n<2)return vN(e[0]);if(t>=1)return vN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=vN(e[i]);return p2(s)?s:s+(vN(e[i+1])-s)*(r-i)}class Pvt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:Rvt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:Nvt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(eX)),Dvt(this._sorted,t)}}const V3=(e,t,n)=>Xx(t,"{"+ik(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function Ovt(e,t){const{ops:n,output:r}=$vt(e,t),i=e[0].fields,s=i.length,o=s===0?tX:s===1?Mvt:s===2?Lvt:_n("Unsupported field count: "+s);return new o(i,n,r,t)}function $vt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=JSe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class tX extends B0t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new Pvt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Mvt extends tX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=V3(n,s,"add"),this._rem=V3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,_f(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,_f(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class Lvt extends tX{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=V3(n,s,"add"),this._rem=V3(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,_f(i)&&_f(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,_f(i)&&_f(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Sb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=Qx(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function Qx(e,t,n){if(!t.length)return n;const r=v2e(t),i=e.groups(),s=i?i.size:1;return n=n||HL(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=_2e(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=b2e(e,o);o.write(a,n,0)}),n}function v2e(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(Ovt(r[i],t));return n}function b2e(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function _2e(e,t,n){const{keys:r,size:i}=n,s=HL(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function w2e(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function E2e(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Qle=E2e(eX);function Fvt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?Xx(["w","r","k"],"{"+ik(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Qle.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Qle.right(o,o[p.i1-1])));for(let x=0;x<d;++x){const T=i[x],S=a[x];for(let C=b;C<p.i0;++C)T.rem(S,s[C],e);for(let C=w;C<p.i1;++C)T.add(S,s[C],e);T.write(S,u,l)}return h(p,u,l),u}};return p}const jvt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),Bvt=e=>!!e.peers;function Uvt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=ZSe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function zvt(e,t,n,r={},i){const s=e.data(),o=Vvt(i,s),a=o.length,u=Xx(["r","d","op"],"{"+ik(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=Hvt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function Vvt(e,t){const n={};return e.forEach(r=>{const i=jvt(r),s=Bvt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});LY(r.name)?a.push(r):u.push(Uvt(r))}),Object.values(n).map(r=>Fvt(t,r.frame,r.peers,r.winOps,v2e(r.aggOps,r.frame[0]!=null?-1:1)))}function Hvt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function qvt(e){return FY(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function nX(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=zl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=Wvt(r),c=e.isGrouped()?e.groups().size:1,f=Qx(e,u,HL(r.length,()=>Array(c)));return l.length?zvt(e,a,n,f,l):Gvt(e,a,n,f),e.create(o)}function Wvt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(qvt(s)?n:t).push(s)}return[t,n]}function Gvt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function Yvt(e,t,n={}){const r=nX(e,Vu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:y2e(r,Object.keys(t).filter(i=>!e.column(i)),n)}function Kvt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const bN=2147483648,Xvt=4294967295;class x2e{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&bN>>>t}set(t){this._bits[t>>5]|=bN>>>t}clear(t){this._bits[t>>5]&=~(bN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&Xvt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=bN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function Qvt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new x2e(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function Jvt(e,t){const n=Vu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=nX(e,n,{drop:!0}).column("p");r=s=>i[s]}return Qvt(e,r)}function S2e(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Sb(e,r,n),l=zl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const x=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(x))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,x)=>{for(let T=0;T<g;++T)d[T].length=m+x,d[T].fill(f[T].get(w),m,m+x)},b=p?(w,x)=>{for(let T=0;T<x;++T)p[w+T]=T}:()=>{};if(y===1){const w=u[0],x=h[0];e.scan((T,S)=>{const C=Bu(w(T,S)),A=Math.min(C.length,s);v(T,A);for(let R=0;R<A;++R)x[m+R]=C[R];b(m,A),m+=A})}else e.scan((w,x)=>{let T=0;const S=u.map(C=>{const A=Bu(C(w,x));return T=Math.min(Math.max(T,A.length),s),A});v(w,T);for(let C=0;C<y;++C){const A=h[C],R=S[C];for(let k=0;k<T;++k)A[m+k]=R[k]}b(m,T),m+=T});return e.create(l.new())}function Zvt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Sb(e,r,n);return S2e(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Bf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Ya(o)?t.columnName(o):o,$o(o)?i.set(o,L1(o)):di(o)?ym(t,o).forEach(s):ma(o)?dAe(i,o):_n(`Invalid ${e} value: ${o+""}`)};return Bu(n).forEach(s),r.preparse&&r.preparse(i),Vu(i,{table:t,...r})}function e1t(e,t,n){return Zvt(e,Bf("fold",e,t),n)}function Jle(e,t,n,r){const i=n&&n.length;return t1t(i?n1t(e,n,r):e,t,i)}function t1t(e,{names:t,exprs:n,ops:r},i){const s=Sb(e,r,n),o=i?null:zl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=_f(p)?p:d(h)})}),i?e:e.create(o)}function n1t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=_3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=zl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=_3(o.map((p,m)=>g=>g[m])),h=Xx("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Zle(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Zle(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Zle(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function rX(e,{names:t,exprs:n,ops:r}){const i=zl(),s=e.groups();return s&&w2e(i,s),r1t(t,n,s,Qx(e,r),i),e.create(i.new())}function r1t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function i1t(e,t,n={}){if(t=Vu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:_n(`Invalid impute column ${dh(r)}`)),n.expand){const r={preparse:s1t,aggronly:!0},i=Bf("impute",e,n.expand,r),s=rX(e.ungroup(),i);return Jle(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return Jle(e,t)}function s1t(e){e.forEach((t,n)=>t.field?e.set(n,BSe(t+"")):0)}function o1t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function T2e(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function a1t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function u1t(e,t){const n=["i","a","j","b"];return Xx(n,"{"+ik(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function l1t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=zl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=u1t(g,y);if((cr(n)?f1t:c1t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function c1t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function f1t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(T,S,C,A)=>e(C,A,T,S));const w=a1t(v,m,g),x=p.length;for(let T=0;T<x;++T){const S=p[T],C=w.get(d(S,f));if(C){const A=C.length;for(let R=0;R<A;++R){const k=C[R];b(S,f,v[k],m),y[k]=1}h[T]=1}}}function H3(e,t,n){const r=new Map;Bu(n).forEach((s,o)=>{s=Ya(s)?t.columnName(s):s,$o(s)?r.set(o,L1(s)):di(s)||ma(s)&&s.expr?r.set(o,s):_n(`Invalid ${e} key value: ${s+""}`)});const i=Vu(r,{table:t,aggregate:!1,window:!1});return _3(i.exprs,!0)}function d1t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function iX(e,t,n){if(n)$o(n)?n=[n,n]:cr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=d1t(e.columnNames(),t.columnNames());r.length||_n("Natural join requires shared column names."),n=[r,r]}return n}function C2e(e,t,n,r){return n.length!==r.length&&_n("Mismatched number of join keys"),[H3("join",e,n),H3("join",t,r)]}const h1t={aggregate:!1,window:!1},p1t={...h1t,index:1};function ece(e,t,n,r,i={}){n=iX(e,t,n);const s={join:[e,t]};let o;if(cr(n)){const[a,u]=n.map(Bu);o=C2e(e,t,a,u),r||(r=m1t(e,a,u,i))}else o=Vu({on:n},s).exprs[0],r||(r=[NE(),NE()]);return l1t(e,t,o,g1t(e,t,r,s,i&&i.suffix),i)}function m1t(e,t,n,r){const i=[];t.forEach((o,a)=>$o(o)&&o===n[a]?i.push(o):0);const s=pAe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${dh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,NE()]:[NE(),s]}function g1t(e,t,n,r,i=[]){if(cr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Bf("join",e,n[0],r)),u--&&(o=Bf("join",t,n[1],p1t)),u--&&(a=Vu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&tce(s.names,l,i[0]||"_1"),i[1]!==""&&tce(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Vu(n,r)}function tce(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function y1t(e,t,n,r={}){const i=new x2e(e.totalRows());return(cr(n)?v1t:b1t)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function v1t(e,t,n,[r,i]){const s=T2e(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function b1t(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function nce(e,t,n,r){n=iX(e,t,n);const i=cr(n)?C2e(e,t,...n.map(Bu)):Vu({on:n},{join:[e,t]}).exprs[0];return y1t(e,t,i,r)}function _1t(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=zl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(sr)));const l=T2e(t,r),c=Xx(["lr","rr","data"],"{"+ik(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Sb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function w1t(e,t,n,r){return n=iX(e,t,n),_1t(e,t,[H3("lookup",e,n[0]),H3("lookup",t,n[1])],Bf("lookup",t,r))}const K7=(e,t)=>e??t;function E1t(e,t,n,r={}){const{keys:i,keyColumn:s}=x1t(e,t,r),o=K7(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>Qx(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(S1t(n,a,e.groups(),u))}function x1t(e,t,n){const r=n.limit>0?+n.limit:1/0,i=K7(n.sort,!0),s=K7(n.keySeparator,"_"),o=Sb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=Qx(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function S1t({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=zl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&w2e(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function T1t(e,t,n,r){return E1t(e,Bf("fold",e,t),Bf("fold",e,n,{preparse:C1t,aggronly:!0}),r)}function C1t(e){e.forEach((t,n)=>t.field?e.set(n,LSe(t+"")):0)}function A1t(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),ZK(e,ym(e,t,n))}function rce(e,t){return rX(e,Vu(t,{table:e,aggronly:!0,window:!1}))}function I1t(e,t,n,r){return(t?r?R1t:k1t:r?D1t:N1t)(e.length,e,n,r)}function k1t(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*Ux()|0];return t}function R1t(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=E2e(eX).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*Ux())];return t}function N1t(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*Ux();s<e&&(t[s|0]=n[i])}return t}function D1t(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(Ux())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function P1t(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=Ux()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function O1t(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):I1t(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&P1t(u),e.reify(u)}function $1t(e,t,n={}){return O1t(e,M1t(e,t),L1t(e,n.weight),n)}const A2e=e=>t=>e.get(t)||0;function M1t(e,t){return Ya(t)?()=>t:A2e(rX(e,Vu({size:t},{table:e,window:!1})).column("size"))}function L1t(e,t){return t==null?null:(t=Ya(t)?e.columnName(t):t,A2e($o(t)?e.column(t):nX(e,Vu({w:t},{table:e}),{drop:!0}).column("w")))}function F1t(e,t){return ZK(e,ym(e,t))}function j1t(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Sb(e,r,n),l=zl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=B1t(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function B1t(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Bu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(sr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function U1t(e,t,n){return j1t(e,Bf("spread",e,t),n)}function z1t(e,t){return e.concat(t).dedupe()}function V1t(e,t,n){return S2e(e,Bf("unroll",e,t),n&&n.drop?{...n,drop:Bf("unroll",e,n.drop).names}:n)}function H1t(e,t){return e.create({groups:q1t(e,t)})}function q1t(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Sb(e,r,n);const o=_3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function W1t(e,t){return H1t(e,Bf("groupby",e,t))}function G1t(e,t){return e.create({order:t})}const Y1t=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function K1t(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Vu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([b3(p,{index:"a",op:o}),b3(p,{index:"b",op:a})])},window:!1}),l=Qx(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=Y1t(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function X1t(e,t){return G1t(e,Q1t(e,t))}function Q1t(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ma(o)&&!di(o))for(const a in o)i(o[a]);else i(Ya(o)?L1(s,e.columnName(o)):$o(o)?L1(s):di(o)?s:_n(`Invalid orderby field: ${s+""}`))}),K1t(e,r)}function J1t(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=zl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>sr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Z1t(e,t){const n=zl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?_2e(e,t,r):[b2e(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function ebt(e){return e.isGrouped()?e.create({groups:null}):e}function tbt(e){return e.isOrdered()?e.create({order:null}):e}const nbt={__antijoin:(e,t,n)=>nce(e,t,n,{anti:!0}),__count:(e,t={})=>rce(e,{[t.as||"count"]:FSe()}),__cross:(e,t,n,r)=>ece(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:J1t,__dedupe:kvt,__derive:Yvt,__except:Kvt,__filter:Jvt,__fold:e1t,__impute:i1t,__intersect:o1t,__join:ece,__lookup:w1t,__pivot:T1t,__relocate:y2e,__rename:A1t,__rollup:rce,__sample:$1t,__select:F1t,__semijoin:nce,__spread:U1t,__union:z1t,__unroll:V1t,__groupby:W1t,__orderby:X1t,__ungroup:ebt,__unorder:tbt,__reduce:Z1t};Object.assign(Cp.prototype,nbt);function rbt(e,t){return Cp.from(e,t)}function ibt(e){return c6(e,{escape:!0,toString(){_n("Escaped values can not be serialized.")}})}Cp.prototype;const Vc={top:30,left:60,right:80,bottom:50};function I2e({data:e,selection:t,parameters:n,dataname:r}){const o=N.useMemo(()=>{const c=e.map(f=>({...f,value:+f[n.y_var]}));return rbt(c)},[e,n]),a=N.useMemo(()=>{const c=JA(o.filter(ibt(f=>t.includes(f[n.cat_var]))).array("value"));return r==="clean_stocks"?c:[0,c[1]]},[o,t,n,r]),u=N.useMemo(()=>VI([Vc.top,400-Vc.bottom]).domain(JA(o.array("value")).reverse()),[o,400]),l=Xd(r==="clean_stocks"?".0%":",.0f");return(t==null?void 0:t.length)===0?null:_.jsxs("svg",{style:{height:"400px",width:"60px",overflow:"visible"},children:[_.jsx("rect",{y:u(a[1]),height:u(a[0])-u(a[1]),x:Vc.left-10,width:10,opacity:.1,fill:"black"}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",textAnchor:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:25,y:Vc.top-5,children:l(u.domain()[0])}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",textAnchor:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:25,y:400-Vc.bottom+8,children:l(u.domain()[1])}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:Vc.left-5,y:u(a[0]),children:l(a[0])}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:Vc.left-5,y:u(a[1]),children:l(a[1])}),e.map(c=>_.jsx("rect",{opacity:.2,fill:+c[n.y_var]>0?"steelblue":"firebrick",x:0,width:50,y:u(+c[n.y_var]),height:1},"strip")),_.jsx("line",{strokeWidth:2,stroke:"black",style:{fontSize:10,dominantBaseline:"middle"},x1:0,x2:50,y1:u(a[0]),y2:u(a[0])}),_.jsx("line",{strokeWidth:2,stroke:"black",x1:0,x2:50,y1:u(a[1]),y2:u(a[1])}),_.jsx("line",{strokeWidth:2,stroke:"black",x1:0,x2:0,y1:u(a[1]),y2:u(a[0])}),_.jsx("line",{strokeWidth:2,stroke:"black",x1:50,x2:50,y1:u(a[1]),y2:u(a[0])}),_.jsx("path",{fill:"black",opacity:"0.1",d:`M${Vc.left}, ${u(a[1])} L 113, ${Vc.top} L 113, ${400-Vc.bottom} L ${Vc.left}, ${u(a[0])}`})]})}const sbt=Object.freeze(Object.defineProperty({__proto__:null,StripPlot:I2e},Symbol.toStringTag,{value:"Module"}));function ice({parameters:e,setAnswer:t}){const[n,r]=N.useState(null),[i,s]=N.useState(e.dataset),[o,a]=N.useState(e.initial_selection),[u,l]=N.useState(null),[c,f]=N.useState([new Date(e.start_date),new Date(e.end_date)]),[d,h]=N.useState(e.guardrail);N.useEffect(()=>{Pst(`./data/${i}.csv`).then(x=>{r(x),l(Array.from(new Set(x.map(T=>JSON.stringify({name:T[e.cat_var],group:T[e.group_var]})))).map(T=>JSON.parse(T)))})},[i,e]);const p=N.useMemo(()=>n&&c?n.filter(x=>new Date(x[e.x_var]).getTime()>=c[0].getTime()).filter(x=>new Date(x[e.x_var]).getTime()<=c[1].getTime()):null,[n,c,e.x_var,i]),m=x=>{s(x),a([])},{actions:g,trrack:y}=N.useMemo(()=>{const x=OY.create(),T=x.register("selection",(A,R)=>(A.selection=R,A)),S=x.register("range",(A,R)=>(A.range=R,A)),C=Adt({registry:x,initialState:{selection:[],range:[e.start_date,e.end_date]}});return{actions:{selection:T,range:S},trrack:C}},[e.end_date,e.start_date]),v=N.useCallback(x=>{y.apply("Change daterange",g.range([x[0].toISOString().slice(0,10),x[1].toISOString().slice(0,10)]))},[y,g]),b=N.useMemo(()=>fd(v,200),[v]),w=N.useCallback(x=>{y.apply("Change selection",g.selection(x)),t({status:!0,provenanceGraph:y.graph.backend,answers:{}})},[y,g,t]);return p&&u&&c&&o?_.jsxs(Rp,{pb:50,children:[e.allow_guardrail_selector?_.jsx(tE,{shadow:"sm",radius:"md",p:"md",style:{width:"500px"},children:_.jsx(C7,{guardrail:d,setGuardrail:h,dataname:i,setDataname:m,setSelection:a})}):null,_.jsx(qt,{children:_.jsxs(tE,{shadow:"md",radius:"md",p:"md",withBorder:!0,children:[e.caption===""?null:_.jsx(qt,{style:{width:"800px"},mb:"xl",children:_.jsx(vW,{children:e.caption})}),_.jsxs(Xs,{wrap:"nowrap",children:[e.allow_selection===!1&&e.guardrail!=="juxt_data"?null:_.jsx(Xs,{wrap:"nowrap",children:_.jsx(S7,{parameters:e,data:p,dataname:i,items:u,selection:o,setSelection:a,trackSelection:w,range:c,guardrail:d})}),e.allow_selection===!1&&e.guardrail!=="juxt_data"?null:_.jsx(r1,{orientation:"vertical",size:"xs"}),_.jsxs(Rp,{children:[_.jsx(Xs,{justify:"apart",children:_.jsxs(Rp,{gap:0,justify:"flex-start",children:[_.jsx(et,{fw:600,children:i==="clean_stocks"?"Percent change in stock price":"Infections per million people"}),d==="super_summ"?_.jsx(et,{fz:"xs",c:"dimmed",children:"Shaded area represents the middle 50% of all values."}):null,d==="juxt_summ"?_.jsx(et,{fz:"xs",c:"dimmed",children:"Bar on the left highlights the range of selection among all data."}):null]})}),_.jsxs(Rp,{children:[_.jsxs(Xs,{wrap:"nowrap",children:[d==="juxt_summ"?_.jsx(I2e,{parameters:e,data:p,selection:o,dataname:i}):null,_.jsx(x7,{parameters:e,data:p,dataname:i,items:u,selection:o,range:c,guardrail:d})]}),e.allow_time_slider?_.jsx("div",{style:{width:"500px"},children:_.jsx(T7,{parameters:e,setRange:f,trackRange:b})}):null]})]})]})]})})]}):_.jsx(cy,{})}const obt=Object.freeze(Object.defineProperty({__proto__:null,DataExplorer:ice,default:ice},Symbol.toStringTag,{value:"Module"}));function abt({parameters:e}){const t=e.dataset==="clean_data"?_.jsxs(q_,{children:["Select any subset of countries to the left of the visualization to support the prompt at the top of the page.",_.jsx("h4",{children:"Background:"}),"You live in a fantasy world that consists of your home country, as well as other 15 countries located across 5 continents: Eldoril, Thundoril, Aerion, Silvoria, and Mystara. Countries within each continent are similar to each other in size and demographics.",_.jsx("h4",{children:"Scenario:"}),"You are an analyst for the Viral Disease Policy Center of your home country at time when there is a new viral disease called",_.jsx("i",{children:" Celestial Sniffles"}),". Luckily, your country has not been affected yet and has time to prepare and decide on a policy to combat it. You have access to the infection data from other countries that implemented one of the 3 available policies: A, B, or C. However, due to socioeconomic factors, the Surgeon General in your country has",_.jsx("i",{children:" already decided on a policy"}),".",_.jsx("h4",{children:"Task:"}),"You are tasked with leading the promotion efforts that make the case for the chosen policy. In the experiment, you will use an interactive data explorer that shows infection data from other countries. You should select a view that best shows (and convinces the population) that your country's"," ",_.jsx("b",{children:"chosen policy is the best policy to combat the disease"}),". After finalizing the view, click the camera button and add a caption or a slogan that will go along with your visualization."]}):_.jsxs(q_,{children:["Select any subset of stocks to the left of the visualization to support the prompt at the top of the page.",_.jsx("h4",{children:"Scenario:"})," ","You are a financial advisor. Your client approached you asking for help in picking a new investmentan industry fund that equally invests within a single industry. The client prefers to make their decisions"," ",_.jsx("i",{children:"solely based on the data"}),", and not based on any inside knowledge about the type of industry. However, your boss"," ",_.jsx("i",{children:"does"})," ","have inside knowledge and orders you to recommend a specific industry (which is ultimately in the best interest of the client). You cannot disclose this to the client and have to use data to support your recommendations.",_.jsx("h4",{children:"Task:"})," ","In the experiment, you will use an interactive data explorer that shows performance of different stocks from a variety of industries. You should select a view that best shows (and convinces your client) that"," ",_.jsx("b",{children:"the chosen industry fund would be the best investment with the highest returns"}),". After finalizing the view, click the camera button and add a caption or a slogan that will go along with your visualization."]}),n=e.dataset==="clean_data"?_.jsxs(q_,{children:[_.jsx("h4",{children:"Background:"}),"You live in a fantasy world that consists of your home country, as well as other 15 countries located across 5 continents: Eldoril, Thundoril, Aerion, Silvoria, and Mystara. Countries within each continent are similar to each other in size and demographics.",_.jsx("h4",{children:"Scenario:"}),"There's a new viral disease called"," ",_.jsx("i",{children:"Celestial Sniffles"}),". Most countries in the world have adopted one of 3 major disease containment policies: A, B, or C. Luckily, your country has not been affected yet but you may need to travel to one of the affected countries for work. Afraid of getting sick and stuck abroad with a huge hospital bill, you decide to purchase a traveler's health insurance policy. The price of the policy is very flexible and depends on the amount of coverage you'll get: anywhere between $0 (no coverage) to $100 (full coverage). Since you are not familiar with the disease trends or containment policies, you turn to social media to read what people shared about recent infection rates.",_.jsx("h4",{children:"Task:"}),"In the experiment, you will see a set of visualizations that show infection rates in different countries that adopted one of the containment policies A, B, or C. You can refer to the list of countries to the left of the visualization to see which country adopted which Policy. Based on each visualization, you will be asked to decide"," ",_.jsx("b",{children:"how much to spend on your insurance policy"})," ","and"," ",_.jsx("b",{children:"answer a short survey"}),"."]}):_.jsxs(q_,{children:[_.jsx("h4",{children:"Scenario:"}),"You have $100 that you would like to invest in"," ",_.jsx("i",{children:"industry funds"})," ","but are not sure how to best allocate that money. An industry fund is composed of all individual stocks pertaining to that industry (e.g., a Pharma fund is composed of Pharma A, Pharma B, and Pharma C stocks). Since you are not familiar with the current market, you turn to social media to read what people shared about recent stock performance.",_.jsx("h4",{children:"Task:"}),"In the experiment, you will see a set of visualizations that show performance of different stocks from a variety of industries. Based on each visualization, you will be asked to decide"," ",_.jsx("b",{children:"how much to invest in a given industry fund"})," ","and"," ",_.jsx("b",{children:"answer a short survey"}),"."]});return _.jsx(Xs,{justify:"right",children:_.jsxs(i1,{width:800,shadow:"md",children:[_.jsx(i1.Target,{children:_.jsx(jn,{variant:"light",color:"gray",size:"compact-sm",children:"Help"})}),_.jsx(i1.Dropdown,{children:_.jsx(et,{size:"sm",children:e.allow_selection?t:n})})]})})}const ubt=Object.freeze(Object.defineProperty({__proto__:null,Help:abt},Symbol.toStringTag,{value:"Module"})),sce=Object.assign({"../public/viz-guardrails/AudioTest.tsx":Vrt,"../public/viz-guardrails/Color.tsx":Hrt,"../public/viz-guardrails/DataExplorer.tsx":obt,"../public/viz-guardrails/Help.tsx":ubt,"../public/viz-guardrails/LineChart.tsx":Qdt,"../public/viz-guardrails/RangeSelector.tsx":Zdt,"../public/viz-guardrails/Selector.tsx":eht,"../public/viz-guardrails/Sidebar.tsx":Jdt,"../public/viz-guardrails/StripPlot.tsx":sbt,"../public/viz-guardrails/XAxis.tsx":Kdt,"../public/viz-guardrails/YAxis.tsx":Xdt});function lbt({currentConfig:e}){const t=Mm(),n=yy(),r=`../public/${e.path}`,i=r in sce?sce[r].default:null,s=Oh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Ph();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(A1,{path:e.path})})}function cbt({currentConfig:e}){const[t,n]=N.useState(""),[r,i]=N.useState(!0);return N.useEffect(()=>{async function s(){const o=await $G(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(qa,{text:t}):_.jsx(A1,{path:e.path})}const fbt={},dbt=Object.freeze(Object.defineProperty({__proto__:null,default:fbt},Symbol.toStringTag,{value:"Module"})),hbt=pFe(dbt);var pbt=hbt;function mbt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function gbt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function ybt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function vbt(e){return e.__COMMENTS__}function bbt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var f6={EOL:pbt.EOL||`
`,tryParseNumber:mbt,createComment:gbt,removeComment:ybt,getComment:vbt,forceComment:bbt},_bt="3.2.1";function wbt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return oce}else if(e.length===0)return oce;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return xbt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),Ebt.bind(null,n)}function Ebt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function oce(){}function xbt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function k2e(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}k2e.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function R2e(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}R2e.description="parse hexadecimal numbers prefixed with 0x";function N2e(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}N2e.description="support ISO dates";var sX={loadDsf:wbt,std:{math:k2e,hex:R2e,date:N2e}},Sbt=function(e,t){var n=f6,r=sX,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var L,F=0,B=1;for(L=s-1;L>0&&i[L]!==`
`;L--,F++);for(;L>0;L--)i[L]===`
`&&B++;throw new Error($+" at line "+B+","+F+" >>>"+i.substr(s-F,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var L="",F=o;h();){if(o===F)return h(),$&&F==="'"&&o==="'"&&L.length===0?(h(),g()):L;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var q=o.charCodeAt(0),P;o>="0"&&o<="9"?P=q-48:o>="a"&&o<="f"?P=q-97+10:o>="A"&&o<="F"?P=q-65+10:d("Bad \\u char "+o),B=B*16+P}L+=String.fromCharCode(B)}else if(typeof a[o]=="string")L+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):L+=o}d("Bad string")}function g(){for(var $="",L=0,F=0;;){var B=p(-F-5);if(!B||B===`
`)break;F++}function U(){for(var q=F;o&&o<=" "&&o!==`
`&&q-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(L++,h(),L===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;L>0;)$+="'",L--;o===`
`?($+=`
`,h(),U()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",L=s,F=-1;;){if(o===":")return $?F>=0&&F!==$.length&&(s=L+F,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?F<0&&(F=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var L=o==="\r"||o===`
`||o==="";if(L||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var F=$[0];switch(F){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(F==="-"||F>="0"&&F<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(L){$=$.trim();var U=l($);return U!==void 0?U:$}}$+=o}}function w($,L){var F;for($--,F=s-2;F>$&&i[F]<=" "&&i[F]!==`
`;F--);i[F]===`
`&&F--,i[F]==="\r"&&F--;var B=i.substr($,F-$+1);for(F=0;F<B.length;F++)if(B[F]>" "){var U=B.indexOf(`
`);if(U>=0){var q=[B.substr(0,U),B.substr(U+1)];return L&&q[0].trim().length===0&&q.shift(),q}else return[B]}return[]}function x($){function L(B,U){var q,P,V,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(q=0,V=B.length;q<V;q++)W=L(B[q],U)||W;else for(P in B)Object.prototype.hasOwnProperty.call(B,P)&&(W=L(B[P],U)||W)}return W}function F(B){var U=L($,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return F("}")||F("]")}function T(){var $=[],L,F,B;try{if(u&&(L=n.createComment($,{a:[]})),h(),F=s,v(),L&&(B=w(F,!0).join(`
`)),o==="]")return h(),L&&(L.e=[B]),$;for(;o;){if($.push(C()),F=s,v(),o===","&&(h(),F=s,v()),L){var U=w(F);L.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),L&&(L.a[L.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(q){throw q.hint=q.hint||x($),q}}function S($){var L="",F={},B,U,q;try{if(u&&(B=n.createComment(F,{c:{},o:[]})),$?U=1:(h(),U=s),v(),B&&(q=w(U,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[q]),h(),F;for(;o;){if(L=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),F[L]=C(),U=s,v(),o===","&&(h(),U=s,v()),B){var P=w(U);B.c[L]=[q||"",P[0]||""],q=P[1],B.o.push(L)}if(o==="}"&&!$)return h(),B&&(B.c[L][1]+=q||""),F;v()}if($)return F;d("End of input while parsing an object (missing '}')")}catch(V){throw V.hint=V.hint||x(F),V}}function C(){switch(v(),o){case"{":return S();case"[":return T();case"'":case'"':return m(!0);default:return b()}}function A($,L){var F=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=L.join(`
`),U=w(F).join(`
`);if(U||B){var q=n.createComment($,n.getComment($));q.r=[B,U]}}return $}function R(){v();var $=u?w(1):null;switch(o){case"{":return A(S(),$);case"[":return A(T(),$);default:return A(C(),$)}}function k(){v();var $=u?w(1):null;switch(o){case"{":return A(S(),$);case"[":return A(T(),$)}try{return A(S(!0),$)}catch(L){c();try{return A(C(),$)}catch{throw L}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),D?k():R()},Tbt=function(e,t){var n=f6,r=sX,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,x="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+x+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+x+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+x+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),R={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},k=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",D=0;function $(W,j){return D+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function L(W){return W.replace(T,function(j){var H=R[j];return typeof H=="string"?$(g.esc,H):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function F(W,j,H,G){return W?(S.lastIndex=0,A.lastIndex=0,c||H||S.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(T.lastIndex=0,C.lastIndex=0,T.test(W)?!C.test(W)&&!G&&d?B(W,j):$(g.qstr,L(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var H,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(H=0;H<G.length;H++)ne+=s,G[H]&&(ne+=j+G[H]);return ne+s+j+g.mstr[1]}function U(W){return W?l||k.test(W)?(T.lastIndex=0,$(g.qkey,T.test(W)?L(W):W)):$(g.key,W):'""'}function q(W,j,H,G){function ne(hn){return hn&&hn[hn[0]==="\r"?1:0]===`
`}function pe(hn){return hn&&!ne(hn)}function fe(hn,xn,er){if(!hn)return"";hn=n.forceComment(hn);var tr,Lo=hn.length;for(tr=0;tr<Lo&&hn[tr]<=" ";tr++);return er&&tr>0&&(hn=hn.substr(tr)),tr<Lo?xn+$(g.rem,hn):hn}var de=w(W);if(de!==void 0)return $(g.dsf,de);switch(typeof W){case"string":return F(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ye;a&&(ye=n.getComment(W));var Ae=Object.prototype.toString.apply(W)==="[object Array]",ve=O;O+=o;var rt=s+ve,ze=s+O,yt=H||u?"":rt,ot=[],De,Me=f?[]:null,Ye=c,pt=d,Pt=h?"":g.com[0],qe=0,me,ft,vt,he,Ce,Ve,ut,_t,On;if(Ae){for(me=0,ft=W.length;me<ft;me++){if(De=me<ft-1,ye?(Ve=ye.a[me]||[],ut=pe(Ve[1]),ot.push(fe(Ve[0],`
`)+ze),Me&&(Ve[0]||Ve[1]||ut)&&(Me=null)):ot.push(ze),D=0,he=W[me],ot.push(q(he,ye?ut:!1,!0)+(De?h:"")),Me){switch(typeof he){case"string":D=0,c=!0,d=0,Me.push(q(he,!1,!0)+(De?g.com[0]:"")),c=Ye,d=pt;break;case"object":if(he){Me=null;break}default:Me.push(ot[ot.length-1]+(De?Pt:""));break}De&&(D+=g.com[0].length-g.com[2]),qe+=D}ye&&Ve[1]&&ot.push(fe(Ve[1],ut?" ":`
`,ut))}ft===0?ye&&ye.e&&ot.push(fe(ye.e[0],`
`)+rt):ot.push(rt),ot.length===0?_t=$(g.arr,""):(_t=yt+$(g.arr,ot.join("")),Me&&(On=Me.join(" "),On.length-qe<=f&&(_t=$(g.arr,On))))}else{var Sr=ye?ye.o.slice():[],$n=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Sr.indexOf(vt)<0&&$n.push(vt);m&&$n.sort();var ur=Sr.concat($n);for(me=0,ft=ur.length;me<ft;me++)if(De=me<ft-1,vt=ur[me],ye?(Ve=ye.c[vt]||[],ut=pe(Ve[1]),ot.push(fe(Ve[0],`
`)+ze),Me&&(Ve[0]||Ve[1]||ut)&&(Me=null)):ot.push(ze),D=0,he=W[vt],Ce=q(he,ye&&ut),ot.push(U(vt)+g.col[0]+(ne(Ce)?"":" ")+Ce+(De?h:"")),ye&&Ve[1]&&ot.push(fe(Ve[1],ut?" ":`
`,ut)),Me){switch(typeof he){case"string":D=0,c=!0,d=0,Ce=q(he,!1),c=Ye,d=pt,Me.push(U(vt)+g.col[0]+" "+Ce+(De?g.com[0]:""));break;case"object":if(he){Me=null;break}default:Me.push(ot[ot.length-1]+(De?Pt:""));break}D+=g.col[0].length-g.col[2],De&&(D+=g.com[0].length-g.com[2]),qe+=D}ft===0?ye&&ye.e&&ot.push(fe(ye.e[0],`
`)+rt):ot.push(rt),ot.length===0?_t=$(g.obj,""):(_t=yt+$(g.obj,ot.join("")),Me&&(On=Me.join(" "),On.length-qe<=f&&(_t=$(g.obj,On))))}return O=ve,_t}}w=r.loadDsf(p,"stringify");var P="",V=a?V=(n.getComment(e)||{}).r:null;return V&&V[0]&&(P=V[0]+`
`),P+=q(e,null,!0,!0),V&&(P+=V[1]||""),P},Nw=f6;function QC(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function X7(e,t){if(!(e===null||typeof e!="object")){var n=Nw.getComment(e);n&&Nw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)ace(o.a,r,n.a[r],X7(e[r]))&&(s=!0);!s&&n.e&&(o.e=QC(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];ace(o.s,l,n.c[l],X7(e[l]))&&(s=!0)}!s&&n.e&&(o.e=QC(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=QC(n.r[0],n.r[1])),s?o:void 0}}function Cbt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Abt(e,t){var n=[];if(Q7(e,t,n,[]),n.length>0){var r=q3(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Cbt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),q3(t,r,1)}}function ace(e,t,n,r){var i=QC(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function JC(e,t){var n=QC(t.b,t.a);return n.path=e,n}function ZC(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(JC(s,o)),ZC(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(JC(u,l)),ZC(l.x,t,u))});e.e&&t.push(JC(n,e.e))}}function Q7(e,t,n,r){if(e){if(t===null||typeof t!="object"){ZC(e,n,r);return}var i,s=Nw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],Q7(u.x,t[i],n,l)):(n.push(JC(l,u)),ZC(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],Q7(d.x,t[c],n,f))):d&&(n.push(JC(f,d)),ZC(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function q3(e,t,n){var r=Nw.createComment(e,Nw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Nw.forceComment(t)),r.r[n]||""}var Ibt={extract:function(e){return X7(e,!0)},merge:Abt,header:function(e,t){return q3(e,t,0)},footer:function(e,t){return q3(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var uce=f6,kbt=_bt,lce=Sbt,cce=Tbt,Rbt=Ibt,Nbt=sX,oX={parse:lce,stringify:cce,endOfLine:function(){return uce.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(uce.EOL=e)},version:kbt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,lce(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,cce(e,t)}},comments:Rbt,dsf:Nbt.std},J7={exports:{}},D2e={},Rf={},OE={},sk={},Rn={},T2={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(T2);var Z7={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=T2;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(Z7);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=T2,n=Z7;var r=T2;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=Z7;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(H,G){return this}}class o extends s{constructor(H,G,ne){super(),this.varKind=H,this.name=G,this.rhs=ne}render({es5:H,_n:G}){const ne=H?n.varKinds.var:this.varKind,pe=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${pe};`+G}optimizeNames(H,G){if(H[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,H,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(H,G,ne){super(),this.lhs=H,this.rhs=G,this.sideEffects=ne}render({_n:H}){return`${this.lhs} = ${this.rhs};`+H}optimizeNames(H,G){if(!(this.lhs instanceof t.Name&&!H[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,H,G),this}get names(){const H=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(H,this.rhs)}}class u extends a{constructor(H,G,ne,pe){super(H,ne,pe),this.op=G}render({_n:H}){return`${this.lhs} ${this.op}= ${this.rhs};`+H}}class l extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`${this.label}:`+H}}class c extends s{constructor(H){super(),this.label=H,this.names={}}render({_n:H}){return`break${this.label?` ${this.label}`:""};`+H}}class f extends s{constructor(H){super(),this.error=H}render({_n:H}){return`throw ${this.error};`+H}get names(){return this.error.names}}class d extends s{constructor(H){super(),this.code=H}render({_n:H}){return`${this.code};`+H}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(H,G){return this.code=$(this.code,H,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(H=[]){super(),this.nodes=H}render(H){return this.nodes.reduce((G,ne)=>G+ne.render(H),"")}optimizeNodes(){const{nodes:H}=this;let G=H.length;for(;G--;){const ne=H[G].optimizeNodes();Array.isArray(ne)?H.splice(G,1,...ne):ne?H[G]=ne:H.splice(G,1)}return H.length>0?this:void 0}optimizeNames(H,G){const{nodes:ne}=this;let pe=ne.length;for(;pe--;){const fe=ne[pe];fe.optimizeNames(H,G)||(L(H,fe.names),ne.splice(pe,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((H,G)=>O(H,G.names),{})}}class p extends h{render(H){return"{"+H._n+super.render(H)+"}"+H._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(H,G){super(G),this.condition=H}render(H){let G=`if(${this.condition})`+super.render(H);return this.else&&(G+="else "+this.else.render(H)),G}optimizeNodes(){super.optimizeNodes();const H=this.condition;if(H===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return H===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(F(H),G instanceof y?[G]:G.nodes);if(!(H===!1||!this.nodes.length))return this}optimizeNames(H,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(H,G),!!(super.optimizeNames(H,G)||this.else))return this.condition=$(this.condition,H,G),this}get names(){const H=super.names;return D(H,this.condition),this.else&&O(H,this.else.names),H}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(H){super(),this.iteration=H}render(H){return`for(${this.iteration})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iteration=$(this.iteration,H,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(H,G,ne,pe){super(),this.varKind=H,this.name=G,this.from=ne,this.to=pe}render(H){const G=H.es5?n.varKinds.var:this.varKind,{name:ne,from:pe,to:fe}=this;return`for(${G} ${ne}=${pe}; ${ne}<${fe}; ${ne}++)`+super.render(H)}get names(){const H=D(super.names,this.from);return D(H,this.to)}}class x extends v{constructor(H,G,ne,pe){super(),this.loop=H,this.varKind=G,this.name=ne,this.iterable=pe}render(H){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(H)}optimizeNames(H,G){if(super.optimizeNames(H,G))return this.iterable=$(this.iterable,H,G),this}get names(){return O(super.names,this.iterable.names)}}class T extends p{constructor(H,G,ne){super(),this.name=H,this.args=G,this.async=ne}render(H){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(H)}}T.kind="func";class S extends h{render(H){return"return "+super.render(H)}}S.kind="return";class C extends p{render(H){let G="try"+super.render(H);return this.catch&&(G+=this.catch.render(H)),this.finally&&(G+=this.finally.render(H)),G}optimizeNodes(){var H,G;return super.optimizeNodes(),(H=this.catch)===null||H===void 0||H.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(H,G){var ne,pe;return super.optimizeNames(H,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(H,G),(pe=this.finally)===null||pe===void 0||pe.optimizeNames(H,G),this}get names(){const H=super.names;return this.catch&&O(H,this.catch.names),this.finally&&O(H,this.finally.names),H}}class A extends p{constructor(H){super(),this.error=H}render(H){return`catch(${this.error})`+super.render(H)}}A.kind="catch";class R extends p{render(H){return"finally"+super.render(H)}}R.kind="finally";class k{constructor(H,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=H,this._scope=new n.Scope({parent:H}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(H){return this._scope.name(H)}scopeName(H){return this._extScope.name(H)}scopeValue(H,G){const ne=this._extScope.value(H,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(H,G){return this._extScope.getValue(H,G)}scopeRefs(H){return this._extScope.scopeRefs(H,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(H,G,ne,pe){const fe=this._scope.toName(G);return ne!==void 0&&pe&&(this._constants[fe.str]=ne),this._leafNode(new o(H,fe,ne)),fe}const(H,G,ne){return this._def(n.varKinds.const,H,G,ne)}let(H,G,ne){return this._def(n.varKinds.let,H,G,ne)}var(H,G,ne){return this._def(n.varKinds.var,H,G,ne)}assign(H,G,ne){return this._leafNode(new a(H,G,ne))}add(H,G){return this._leafNode(new u(H,e.operators.ADD,G))}code(H){return typeof H=="function"?H():H!==t.nil&&this._leafNode(new d(H)),this}object(...H){const G=["{"];for(const[ne,pe]of H)G.length>1&&G.push(","),G.push(ne),(ne!==pe||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,pe));return G.push("}"),new t._Code(G)}if(H,G,ne){if(this._blockNode(new y(H)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(H){return this._elseNode(new y(H))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(H,G){return this._blockNode(H),G&&this.code(G).endFor(),this}for(H,G){return this._for(new b(H),G)}forRange(H,G,ne,pe,fe=this.opts.es5?n.varKinds.var:n.varKinds.let){const de=this._scope.toName(H);return this._for(new w(fe,de,G,ne),()=>pe(de))}forOf(H,G,ne,pe=n.varKinds.const){const fe=this._scope.toName(H);if(this.opts.es5){const de=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${de}.length`,ye=>{this.var(fe,(0,t._)`${de}[${ye}]`),ne(fe)})}return this._for(new x("of",pe,fe,G),()=>ne(fe))}forIn(H,G,ne,pe=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(H,(0,t._)`Object.keys(${G})`,ne);const fe=this._scope.toName(H);return this._for(new x("in",pe,fe,G),()=>ne(fe))}endFor(){return this._endBlockNode(v)}label(H){return this._leafNode(new l(H))}break(H){return this._leafNode(new c(H))}return(H){const G=new S;if(this._blockNode(G),this.code(H),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(H,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const pe=new C;if(this._blockNode(pe),this.code(H),G){const fe=this.name("e");this._currNode=pe.catch=new A(fe),G(fe)}return ne&&(this._currNode=pe.finally=new R,this.code(ne)),this._endBlockNode(A,R)}throw(H){return this._leafNode(new f(H))}block(H,G){return this._blockStarts.push(this._nodes.length),H&&this.code(H).endBlock(G),this}endBlock(H){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||H!==void 0&&ne!==H)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${H} expected`);return this._nodes.length=G,this}func(H,G=t.nil,ne,pe){return this._blockNode(new T(H,G,ne)),pe&&this.code(pe).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(H=1){for(;H-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(H){return this._currNode.nodes.push(H),this}_blockNode(H){this._currNode.nodes.push(H),this._nodes.push(H)}_endBlockNode(H,G){const ne=this._currNode;if(ne instanceof H||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${H.kind}/${G.kind}`:H.kind}"`)}_elseNode(H){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=H,this}get _root(){return this._nodes[0]}get _currNode(){const H=this._nodes;return H[H.length-1]}set _currNode(H){const G=this._nodes;G[G.length-1]=H}}e.CodeGen=k;function O(j,H){for(const G in H)j[G]=(j[G]||0)+(H[G]||0);return j}function D(j,H){return H instanceof t._CodeOrName?O(j,H.names):j}function $(j,H,G){if(j instanceof t.Name)return ne(j);if(!pe(j))return j;return new t._Code(j._items.reduce((fe,de)=>(de instanceof t.Name&&(de=ne(de)),de instanceof t._Code?fe.push(...de._items):fe.push(de),fe),[]));function ne(fe){const de=G[fe.str];return de===void 0||H[fe.str]!==1?fe:(delete H[fe.str],de)}function pe(fe){return fe instanceof t._Code&&fe._items.some(de=>de instanceof t.Name&&H[de.str]===1&&G[de.str]!==void 0)}}function L(j,H){for(const G in H)j[G]=(j[G]||0)-(H[G]||0)}function F(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=F;const B=V(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const q=V(e.operators.OR);function P(...j){return j.reduce(q)}e.or=P;function V(j){return(H,G)=>H===t.nil?G:G===t.nil?H:(0,t._)`${W(H)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Rn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const qr=Rn,Dbt=T2;function Pbt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=Pbt;function Obt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(P2e(e,t),!O2e(t,e.self.RULES.all))}wt.alwaysValidSchema=Obt;function P2e(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||L2e(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=P2e;function O2e(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=O2e;function $bt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=$bt;function Mbt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,qr._)`${n}`}return(0,qr._)`${e}${t}${(0,qr.getProperty)(r)}`}wt.schemaRefOrVal=Mbt;function Lbt(e){return $2e(decodeURIComponent(e))}wt.unescapeFragment=Lbt;function Fbt(e){return encodeURIComponent(aX(e))}wt.escapeFragment=Fbt;function aX(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=aX;function $2e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=$2e;function jbt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=jbt;function fce({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof qr.Name?(s instanceof qr.Name?e(i,s,o):t(i,s,o),o):s instanceof qr.Name?(t(i,o,s),s):n(s,o);return a===qr.Name&&!(u instanceof qr.Name)?r(i,u):u}}wt.mergeEvaluated={props:fce({mergeNames:(e,t,n)=>e.if((0,qr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,qr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,qr._)`${n} || {}`).code((0,qr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,qr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,qr._)`${n} || {}`),uX(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:M2e}),items:fce({mergeNames:(e,t,n)=>e.if((0,qr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,qr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,qr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,qr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function M2e(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,qr._)`{}`);return t!==void 0&&uX(e,n,t),n}wt.evaluatedPropsToName=M2e;function uX(e,t,n){Object.keys(n).forEach(r=>e.assign((0,qr._)`${t}${(0,qr.getProperty)(r)}`,!0))}wt.setEvaluated=uX;const dce={};function Bbt(e,t){return e.scopeValue("func",{ref:t,code:dce[t.code]||(dce[t.code]=new Dbt._Code(t.code))})}wt.useFunc=Bbt;var ez;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(ez||(wt.Type=ez={}));function Ubt(e,t,n){if(e instanceof qr.Name){const r=t===ez.Num;return n?r?(0,qr._)`"[" + ${e} + "]"`:(0,qr._)`"['" + ${e} + "']"`:r?(0,qr._)`"/" + ${e}`:(0,qr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,qr.getProperty)(e).toString():"/"+aX(e)}wt.getErrorPath=Ubt;function L2e(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=L2e;var Bh={};Object.defineProperty(Bh,"__esModule",{value:!0});const Yo=Rn,zbt={data:new Yo.Name("data"),valCxt:new Yo.Name("valCxt"),instancePath:new Yo.Name("instancePath"),parentData:new Yo.Name("parentData"),parentDataProperty:new Yo.Name("parentDataProperty"),rootData:new Yo.Name("rootData"),dynamicAnchors:new Yo.Name("dynamicAnchors"),vErrors:new Yo.Name("vErrors"),errors:new Yo.Name("errors"),this:new Yo.Name("this"),self:new Yo.Name("self"),scope:new Yo.Name("scope"),json:new Yo.Name("json"),jsonPos:new Yo.Name("jsonPos"),jsonLen:new Yo.Name("jsonLen"),jsonPart:new Yo.Name("jsonPart")};Bh.default=zbt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Rn,n=wt,r=Bh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:x,compositeRule:T,allErrors:S}=w,C=f(g,y,v);b??(T||S)?u(x,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:x,allErrors:T}=b,S=f(g,y,v);u(w,S),x||T||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:x}){if(w===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",w,r.default.errors,S=>{g.const(T,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,x.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${x.errSchemaPath}/${y}`),x.opts.verbose&&(g.assign((0,t._)`${T}.schema`,v),g.assign((0,t._)`${T}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,x=[h(w,v),p(g,v)];return m(g,y,x),b.object(...x)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:x,schemaValue:T,it:S}=g,{opts:C,propertyName:A,topSchemaRef:R,schemaPath:k}=S;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&b.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&b.push([c.schema,T],[c.parentSchema,(0,t._)`${R}${k}`],[r.default.data,x]),A&&b.push([c.propertyName,A])}})(sk);Object.defineProperty(OE,"__esModule",{value:!0});OE.boolOrEmptySchema=OE.topBoolOrEmptySchema=void 0;const Vbt=sk,Hbt=Rn,qbt=Bh,Wbt={message:"boolean schema is false"};function Gbt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?F2e(e,!1):typeof n=="object"&&n.$async===!0?t.return(qbt.default.data):(t.assign((0,Hbt._)`${r}.errors`,null),t.return(!0))}OE.topBoolOrEmptySchema=Gbt;function Ybt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),F2e(e)):n.var(t,!0)}OE.boolOrEmptySchema=Ybt;function F2e(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,Vbt.reportError)(i,Wbt,void 0,t)}var _s={},F1={};Object.defineProperty(F1,"__esModule",{value:!0});F1.getRules=F1.isJSONType=void 0;const Kbt=["string","number","integer","boolean","null","object","array"],Xbt=new Set(Kbt);function Qbt(e){return typeof e=="string"&&Xbt.has(e)}F1.isJSONType=Qbt;function Jbt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}F1.getRules=Jbt;var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.shouldUseRule=Gp.shouldUseGroup=Gp.schemaHasRulesForType=void 0;function Zbt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&j2e(e,r)}Gp.schemaHasRulesForType=Zbt;function j2e(e,t){return t.rules.some(n=>B2e(e,n))}Gp.shouldUseGroup=j2e;function B2e(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Gp.shouldUseRule=B2e;Object.defineProperty(_s,"__esModule",{value:!0});_s.reportTypeError=_s.checkDataTypes=_s.checkDataType=_s.coerceAndCheckDataType=_s.getJSONTypes=_s.getSchemaTypes=_s.DataType=void 0;const e_t=F1,t_t=Gp,n_t=sk,bn=Rn,U2e=wt;var Dw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Dw||(_s.DataType=Dw={}));function r_t(e){const t=z2e(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}_s.getSchemaTypes=r_t;function z2e(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(e_t.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}_s.getJSONTypes=z2e;function i_t(e,t){const{gen:n,data:r,opts:i}=e,s=s_t(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,t_t.schemaHasRulesForType)(e,t[0]));if(o){const a=lX(t,r,i.strictNumbers,Dw.Wrong);n.if(a,()=>{s.length?o_t(e,t,s):cX(e)})}return o}_s.coerceAndCheckDataType=i_t;const V2e=new Set(["string","number","integer","boolean","null"]);function s_t(e,t){return t?e.filter(n=>V2e.has(n)||t==="array"&&n==="array"):[]}function o_t(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,bn._)`typeof ${i}`),a=r.let("coerced",(0,bn._)`undefined`);s.coerceTypes==="array"&&r.if((0,bn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,bn._)`${i}[0]`).assign(o,(0,bn._)`typeof ${i}`).if(lX(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,bn._)`${a} !== undefined`);for(const l of n)(V2e.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),cX(e),r.endIf(),r.if((0,bn._)`${a} !== undefined`,()=>{r.assign(i,a),a_t(e,a)});function u(l){switch(l){case"string":r.elseIf((0,bn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,bn._)`"" + ${i}`).elseIf((0,bn._)`${i} === null`).assign(a,(0,bn._)`""`);return;case"number":r.elseIf((0,bn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,bn._)`+${i}`);return;case"integer":r.elseIf((0,bn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,bn._)`+${i}`);return;case"boolean":r.elseIf((0,bn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,bn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,bn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,bn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,bn._)`[${i}]`)}}}function a_t({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,bn._)`${t} !== undefined`,()=>e.assign((0,bn._)`${t}[${n}]`,r))}function tz(e,t,n,r=Dw.Correct){const i=r===Dw.Correct?bn.operators.EQ:bn.operators.NEQ;let s;switch(e){case"null":return(0,bn._)`${t} ${i} null`;case"array":s=(0,bn._)`Array.isArray(${t})`;break;case"object":s=(0,bn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,bn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,bn._)`typeof ${t} ${i} ${e}`}return r===Dw.Correct?s:(0,bn.not)(s);function o(a=bn.nil){return(0,bn.and)((0,bn._)`typeof ${t} == "number"`,a,n?(0,bn._)`isFinite(${t})`:bn.nil)}}_s.checkDataType=tz;function lX(e,t,n,r){if(e.length===1)return tz(e[0],t,n,r);let i;const s=(0,U2e.toHash)(e);if(s.array&&s.object){const o=(0,bn._)`typeof ${t} != "object"`;i=s.null?o:(0,bn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=bn.nil;s.number&&delete s.integer;for(const o in s)i=(0,bn.and)(i,tz(o,t,n,r));return i}_s.checkDataTypes=lX;const u_t={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,bn._)`{type: ${e}}`:(0,bn._)`{type: ${t}}`};function cX(e){const t=l_t(e);(0,n_t.reportError)(t,u_t)}_s.reportTypeError=cX;function l_t(e){const{gen:t,data:n,schema:r}=e,i=(0,U2e.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var d6={};Object.defineProperty(d6,"__esModule",{value:!0});d6.assignDefaults=void 0;const u_=Rn,c_t=wt;function f_t(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)hce(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>hce(e,s,i.default))}d6.assignDefaults=f_t;function hce(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,u_._)`${s}${(0,u_.getProperty)(t)}`;if(i){(0,c_t.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,u_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,u_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,u_._)`${a} = ${(0,u_.stringify)(n)}`)}var Ud={},In={};Object.defineProperty(In,"__esModule",{value:!0});In.validateUnion=In.validateArray=In.usePattern=In.callValidateCode=In.schemaProperties=In.allSchemaProperties=In.noPropertyInData=In.propertyInData=In.isOwnProperty=In.hasPropFunc=In.reportMissingProp=In.checkMissingProp=In.checkReportMissingProp=void 0;const oi=Rn,fX=wt,ng=Bh,d_t=wt;function h_t(e,t){const{gen:n,data:r,it:i}=e;n.if(hX(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,oi._)`${t}`},!0),e.error()})}In.checkReportMissingProp=h_t;function p_t({gen:e,data:t,it:{opts:n}},r,i){return(0,oi.or)(...r.map(s=>(0,oi.and)(hX(e,t,s,n.ownProperties),(0,oi._)`${i} = ${s}`)))}In.checkMissingProp=p_t;function m_t(e,t){e.setParams({missingProperty:t},!0),e.error()}In.reportMissingProp=m_t;function H2e(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,oi._)`Object.prototype.hasOwnProperty`})}In.hasPropFunc=H2e;function dX(e,t,n){return(0,oi._)`${H2e(e)}.call(${t}, ${n})`}In.isOwnProperty=dX;function g_t(e,t,n,r){const i=(0,oi._)`${t}${(0,oi.getProperty)(n)} !== undefined`;return r?(0,oi._)`${i} && ${dX(e,t,n)}`:i}In.propertyInData=g_t;function hX(e,t,n,r){const i=(0,oi._)`${t}${(0,oi.getProperty)(n)} === undefined`;return r?(0,oi.or)(i,(0,oi.not)(dX(e,t,n))):i}In.noPropertyInData=hX;function q2e(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}In.allSchemaProperties=q2e;function y_t(e,t){return q2e(t).filter(n=>!(0,fX.alwaysValidSchema)(e,t[n]))}In.schemaProperties=y_t;function v_t({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,oi._)`${e}, ${t}, ${r}${i}`:t,f=[[ng.default.instancePath,(0,oi.strConcat)(ng.default.instancePath,s)],[ng.default.parentData,o.parentData],[ng.default.parentDataProperty,o.parentDataProperty],[ng.default.rootData,ng.default.rootData]];o.opts.dynamicRef&&f.push([ng.default.dynamicAnchors,ng.default.dynamicAnchors]);const d=(0,oi._)`${c}, ${n.object(...f)}`;return u!==oi.nil?(0,oi._)`${a}.call(${u}, ${d})`:(0,oi._)`${a}(${d})`}In.callValidateCode=v_t;const b_t=(0,oi._)`new RegExp`;function __t({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,oi._)`${i.code==="new RegExp"?b_t:(0,d_t.useFunc)(e,i)}(${n}, ${r})`})}In.usePattern=__t;function w_t(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,oi._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:fX.Type.Num},s),t.if((0,oi.not)(s),a)})}}In.validateArray=w_t;function E_t(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,fX.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,oi._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,oi.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}In.validateUnion=E_t;Object.defineProperty(Ud,"__esModule",{value:!0});Ud.validateKeywordUsage=Ud.validSchemaType=Ud.funcKeywordCode=Ud.macroKeywordCode=void 0;const Na=Rn,Sv=Bh,x_t=In,S_t=sk;function T_t(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=W2e(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Na.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Ud.macroKeywordCode=T_t;function C_t(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;I_t(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=W2e(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&pce(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&pce(e),g(()=>A_t(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Na._)`await `),v=>r.assign(f,!1).if((0,Na._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Na._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Na._)`${c}.errors`;return r.assign(y,null),m(Na.nil),y}function m(y=t.async?(0,Na._)`await `:Na.nil){const v=u.opts.passContext?Sv.default.this:Sv.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Na._)`${y}${(0,x_t.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Na.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Ud.funcKeywordCode=C_t;function pce(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Na._)`${r.parentData}[${r.parentDataProperty}]`))}function A_t(e,t){const{gen:n}=e;n.if((0,Na._)`Array.isArray(${t})`,()=>{n.assign(Sv.default.vErrors,(0,Na._)`${Sv.default.vErrors} === null ? ${t} : ${Sv.default.vErrors}.concat(${t})`).assign(Sv.default.errors,(0,Na._)`${Sv.default.vErrors}.length`),(0,S_t.extendErrors)(e)},()=>e.error())}function I_t({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function W2e(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Na.stringify)(n)})}function k_t(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Ud.validSchemaType=k_t;function R_t({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Ud.validateKeywordUsage=R_t;var o0={};Object.defineProperty(o0,"__esModule",{value:!0});o0.extendSubschemaMode=o0.extendSubschemaData=o0.getSubschema=void 0;const Md=Rn,G2e=wt;function N_t(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Md._)`${e.schemaPath}${(0,Md.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Md._)`${e.schemaPath}${(0,Md.getProperty)(t)}${(0,Md.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,G2e.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}o0.getSubschema=N_t;function D_t(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Md._)`${t.data}${(0,Md.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Md.str)`${l}${(0,G2e.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Md._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Md.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}o0.extendSubschemaData=D_t;function P_t(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}o0.extendSubschemaMode=P_t;var wo={},Y2e={exports:{}},Lg=Y2e.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};VD(t,r,i,e,"",e)};Lg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Lg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Lg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Lg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function VD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Lg.arrayKeywords)for(var d=0;d<f.length;d++)VD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Lg.propsKeywords){if(f&&typeof f=="object")for(var h in f)VD(e,t,n,f[h],i+"/"+c+"/"+O_t(h),s,i,c,r,h)}else(c in Lg.keywords||e.allKeys&&!(c in Lg.skipKeywords))&&VD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function O_t(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var $_t=Y2e.exports;Object.defineProperty(wo,"__esModule",{value:!0});wo.getSchemaRefs=wo.resolveUrl=wo.normalizeId=wo._getFullPath=wo.getFullPath=wo.inlineRef=void 0;const M_t=wt,L_t=OG,F_t=$_t,j_t=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function B_t(e,t=!0){return typeof e=="boolean"?!0:t===!0?!nz(e):t?K2e(e)<=t:!1}wo.inlineRef=B_t;const U_t=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function nz(e){for(const t in e){if(U_t.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(nz)||typeof n=="object"&&nz(n))return!0}return!1}function K2e(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!j_t.has(n)&&(typeof e[n]=="object"&&(0,M_t.eachItem)(e[n],r=>t+=K2e(r)),t===1/0))return 1/0}return t}function X2e(e,t="",n){n!==!1&&(t=Pw(t));const r=e.parse(t);return Q2e(e,r)}wo.getFullPath=X2e;function Q2e(e,t){return e.serialize(t).split("#")[0]+"#"}wo._getFullPath=Q2e;const z_t=/#\/?$/;function Pw(e){return e?e.replace(z_t,""):""}wo.normalizeId=Pw;function V_t(e,t,n){return n=Pw(n),e.resolve(t,n)}wo.resolveUrl=V_t;const H_t=/^[a-z_][-a-z0-9._]*$/i;function q_t(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=Pw(e[n]||t),s={"":i},o=X2e(r,i,!1),a={},u=new Set;return F_t(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=Pw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let x=this.refs[b];return typeof x=="string"&&(x=this.refs[x]),typeof x=="object"?l(f,x.schema,b):b!==Pw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!H_t.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!L_t(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}wo.getSchemaRefs=q_t;Object.defineProperty(Rf,"__esModule",{value:!0});Rf.getData=Rf.KeywordCxt=Rf.validateFunctionCode=void 0;const J2e=OE,mce=_s,pX=Gp,W3=_s,W_t=d6,eA=Ud,uj=o0,Dt=Rn,nn=Bh,G_t=wo,Yp=wt,oT=sk;function Y_t(e){if(tIe(e)&&(nIe(e),eIe(e))){Q_t(e);return}Z2e(e,()=>(0,J2e.topBoolOrEmptySchema)(e))}Rf.validateFunctionCode=Y_t;function Z2e({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Dt._)`${nn.default.data}, ${nn.default.valCxt}`,r.$async,()=>{e.code((0,Dt._)`"use strict"; ${gce(n,i)}`),X_t(e,i),e.code(s)}):e.func(t,(0,Dt._)`${nn.default.data}, ${K_t(i)}`,r.$async,()=>e.code(gce(n,i)).code(s))}function K_t(e){return(0,Dt._)`{${nn.default.instancePath}="", ${nn.default.parentData}, ${nn.default.parentDataProperty}, ${nn.default.rootData}=${nn.default.data}${e.dynamicRef?(0,Dt._)`, ${nn.default.dynamicAnchors}={}`:Dt.nil}}={}`}function X_t(e,t){e.if(nn.default.valCxt,()=>{e.var(nn.default.instancePath,(0,Dt._)`${nn.default.valCxt}.${nn.default.instancePath}`),e.var(nn.default.parentData,(0,Dt._)`${nn.default.valCxt}.${nn.default.parentData}`),e.var(nn.default.parentDataProperty,(0,Dt._)`${nn.default.valCxt}.${nn.default.parentDataProperty}`),e.var(nn.default.rootData,(0,Dt._)`${nn.default.valCxt}.${nn.default.rootData}`),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,Dt._)`${nn.default.valCxt}.${nn.default.dynamicAnchors}`)},()=>{e.var(nn.default.instancePath,(0,Dt._)`""`),e.var(nn.default.parentData,(0,Dt._)`undefined`),e.var(nn.default.parentDataProperty,(0,Dt._)`undefined`),e.var(nn.default.rootData,nn.default.data),t.dynamicRef&&e.var(nn.default.dynamicAnchors,(0,Dt._)`{}`)})}function Q_t(e){const{schema:t,opts:n,gen:r}=e;Z2e(e,()=>{n.$comment&&t.$comment&&iIe(e),nwt(e),r.let(nn.default.vErrors,null),r.let(nn.default.errors,0),n.unevaluated&&J_t(e),rIe(e),swt(e)})}function J_t(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Dt._)`${n}.evaluated`),t.if((0,Dt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Dt._)`${e.evaluated}.props`,(0,Dt._)`undefined`)),t.if((0,Dt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Dt._)`${e.evaluated}.items`,(0,Dt._)`undefined`))}function gce(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Dt._)`/*# sourceURL=${n} */`:Dt.nil}function Z_t(e,t){if(tIe(e)&&(nIe(e),eIe(e))){ewt(e,t);return}(0,J2e.boolOrEmptySchema)(e,t)}function eIe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function tIe(e){return typeof e.schema!="boolean"}function ewt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&iIe(e),rwt(e),iwt(e);const s=r.const("_errs",nn.default.errors);rIe(e,s),r.var(t,(0,Dt._)`${s} === ${nn.default.errors}`)}function nIe(e){(0,Yp.checkUnknownRules)(e),twt(e)}function rIe(e,t){if(e.opts.jtd)return yce(e,[],!1,t);const n=(0,mce.getSchemaTypes)(e.schema),r=(0,mce.coerceAndCheckDataType)(e,n);yce(e,n,!r,t)}function twt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Yp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function nwt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Yp.checkStrictMode)(e,"default is ignored in the schema root")}function rwt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,G_t.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function iwt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function iIe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Dt._)`${nn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Dt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Dt._)`${nn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function swt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Dt._)`${nn.default.errors} === 0`,()=>t.return(nn.default.data),()=>t.throw((0,Dt._)`new ${i}(${nn.default.vErrors})`)):(t.assign((0,Dt._)`${r}.errors`,nn.default.vErrors),s.unevaluated&&owt(e),t.return((0,Dt._)`${nn.default.errors} === 0`))}function owt({gen:e,evaluated:t,props:n,items:r}){n instanceof Dt.Name&&e.assign((0,Dt._)`${t}.props`,n),r instanceof Dt.Name&&e.assign((0,Dt._)`${t}.items`,r)}function yce(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Yp.schemaHasRulesButRef)(s,c))){i.block(()=>aIe(e,"$ref",c.all.$ref.definition));return}u.jtd||awt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,pX.shouldUseGroup)(s,d)&&(d.type?(i.if((0,W3.checkDataType)(d.type,o,u.strictNumbers)),vce(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,W3.reportTypeError)(e)),i.endIf()):vce(e,d),a||i.if((0,Dt._)`${nn.default.errors} === ${r||0}`))}}function vce(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,W_t.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,pX.shouldUseRule)(r,s)&&aIe(e,s.keyword,s.definition,t.type)})}function awt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(uwt(e,t),e.opts.allowUnionTypes||lwt(e,t),cwt(e,e.dataTypes))}function uwt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{sIe(e.dataTypes,n)||mX(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),dwt(e,t)}}function lwt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&mX(e,"use allowUnionTypes to allow union type keyword")}function cwt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,pX.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>fwt(t,o))&&mX(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function fwt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function sIe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function dwt(e,t){const n=[];for(const r of e.dataTypes)sIe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function mX(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Yp.checkStrictMode)(e,t,e.opts.strictTypes)}class oIe{constructor(t,n,r){if((0,eA.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Yp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",uIe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,eA.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",nn.default.errors))}result(t,n,r){this.failResult((0,Dt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Dt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Dt._)`${n} !== undefined && (${(0,Dt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?oT.reportExtraError:oT.reportError)(this,this.def.error,n)}$dataError(){(0,oT.reportError)(this,this.def.$dataError||oT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,oT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Dt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Dt.nil,n=Dt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Dt.or)((0,Dt._)`${i} === undefined`,n)),t!==Dt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Dt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Dt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Dt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Dt._)`${(0,W3.checkDataTypes)(u,n,s.opts.strictNumbers,W3.DataType.Wrong)}`}return Dt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Dt._)`!${u}(${n})`}return Dt.nil}}subschema(t,n){const r=(0,uj.getSubschema)(this.it,t);(0,uj.extendSubschemaData)(r,this.it,t),(0,uj.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return Z_t(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Yp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Yp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Dt.Name)),!0}}Rf.KeywordCxt=oIe;function aIe(e,t,n,r){const i=new oIe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,eA.funcKeywordCode)(i,n):"macro"in n?(0,eA.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,eA.funcKeywordCode)(i,n)}const hwt=/^\/(?:[^~]|~0|~1)*$/,pwt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function uIe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return nn.default.rootData;if(e[0]==="/"){if(!hwt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=nn.default.rootData}else{const l=pwt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Dt._)`${s}${(0,Dt.getProperty)((0,Yp.unescapeJsonPointer)(l))}`,o=(0,Dt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Rf.getData=uIe;var ok={};Object.defineProperty(ok,"__esModule",{value:!0});class mwt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}ok.default=mwt;var Jx={};Object.defineProperty(Jx,"__esModule",{value:!0});const lj=wo;class gwt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,lj.resolveUrl)(t,n,r),this.missingSchema=(0,lj.normalizeId)((0,lj.getFullPath)(t,this.missingRef))}}Jx.default=gwt;var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.resolveSchema=_u.getCompilingSchema=_u.resolveRef=_u.compileSchema=_u.SchemaEnv=void 0;const Hc=Rn,ywt=ok,Gy=Bh,gf=wo,bce=wt,vwt=Rf;class h6{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,gf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}_u.SchemaEnv=h6;function gX(e){const t=lIe.call(this,e);if(t)return t;const n=(0,gf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Hc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:ywt.default,code:(0,Hc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Gy.default.data,parentData:Gy.default.parentData,parentDataProperty:Gy.default.parentDataProperty,dataNames:[Gy.default.data],dataPathArr:[Hc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Hc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Hc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Hc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,vwt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Gy.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Gy.default.self}`,`${Gy.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Hc.Name?void 0:p,items:m instanceof Hc.Name?void 0:m,dynamicProps:p instanceof Hc.Name,dynamicItems:m instanceof Hc.Name},h.source&&(h.source.evaluated=(0,Hc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}_u.compileSchema=gX;function bwt(e,t,n){var r;n=(0,gf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=Ewt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new h6({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=_wt.call(this,s)}_u.resolveRef=bwt;function _wt(e){return(0,gf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:gX.call(this,e)}function lIe(e){for(const t of this._compilations)if(wwt(t,e))return t}_u.getCompilingSchema=lIe;function wwt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Ewt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||p6.call(this,e,t)}function p6(e,t){const n=this.opts.uriResolver.parse(t),r=(0,gf._getFullPath)(this.opts.uriResolver,n);let i=(0,gf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return cj.call(this,n,e);const s=(0,gf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=p6.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:cj.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||gX.call(this,o),s===(0,gf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,gf.resolveUrl)(this.opts.uriResolver,i,l)),new h6({schema:a,schemaId:u,root:e,baseId:i})}return cj.call(this,n,o)}}_u.resolveSchema=p6;const xwt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function cj(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,bce.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!xwt.has(a)&&l&&(t=(0,gf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,bce.schemaHasRulesButRef)(n,this.RULES)){const a=(0,gf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=p6.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new h6({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Swt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Twt="Meta-schema for $data reference (JSON AnySchema extension proposal)",Cwt="object",Awt=["$data"],Iwt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},kwt=!1,Rwt={$id:Swt,description:Twt,type:Cwt,required:Awt,properties:Iwt,additionalProperties:kwt};var yX={},rz={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Ks,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Se=ee.length-1,xe=1;xe<Se;++xe)ee[xe]=ee[xe].slice(1,-1);return ee[Se]=ee[Se].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Se in ee)ae[Se]=ee[Se];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Se=r(ae,"[A-Fa-f]"),xe=i(i("%[EFef]"+Se+"%"+Se+Se+"%"+Se+Se)+"|"+i("%[89A-Fa-f]"+Se+"%"+Se+Se)+"|"+i("%"+Se+Se)),st="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Vt=r(st,St),Nn=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Mn=oe?"[\\uE000-\\uF8FF]":"[]",fn=r(ee,ae,"[\\-\\.\\_\\~]",Nn);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(xe+"|"+r(fn,St,"[\\:]"))+"*");var nr=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Cr=i(nr+"\\."+nr+"\\."+nr+"\\."+nr),zt=i(Se+"{1,4}"),rr=i(i(zt+"\\:"+zt)+"|"+Cr),Ur=i(i(zt+"\\:")+"{6}"+rr),Xn=i("\\:\\:"+i(zt+"\\:")+"{5}"+rr),Si=i(i(zt)+"?\\:\\:"+i(zt+"\\:")+"{4}"+rr),Ls=i(i(i(zt+"\\:")+"{0,1}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{3}"+rr),Xr=i(i(i(zt+"\\:")+"{0,2}"+zt)+"?\\:\\:"+i(zt+"\\:")+"{2}"+rr),uo=i(i(i(zt+"\\:")+"{0,3}"+zt)+"?\\:\\:"+zt+"\\:"+rr),Oi=i(i(i(zt+"\\:")+"{0,4}"+zt)+"?\\:\\:"+rr),$i=i(i(i(zt+"\\:")+"{0,5}"+zt)+"?\\:\\:"+zt),Fo=i(i(i(zt+"\\:")+"{0,6}"+zt)+"?\\:\\:"),Sa=i([Ur,Xn,Si,Ls,Xr,uo,Oi,$i,Fo].join("|")),Fs=i(i(fn+"|"+xe)+"+");i("[vV]"+Se+"+\\."+r(fn,St,"[\\:]")+"+"),i(i(xe+"|"+r(fn,St))+"*");var Hl=i(xe+"|"+r(fn,St,"[\\:\\@]"));return i(i(xe+"|"+r(fn,St,"[\\@]"))+"+"),i(i(Hl+"|"+r("[\\/\\?]",Mn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",fn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",fn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",fn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",fn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",fn,St,"[\\:\\@\\/\\?]",Mn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",fn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",fn,St),"g"),UNRESERVED:new RegExp(fn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",fn,Vt),"g"),PCT_ENCODED:new RegExp(xe,"g"),IPV4ADDRESS:new RegExp("^("+Cr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Sa+")"+i(i("\\%25|\\%(?!"+Se+"{2})")+"("+Fs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Se=[],xe=!0,st=!1,St=void 0;try{for(var Vt=ee[Symbol.iterator](),Nn;!(xe=(Nn=Vt.next()).done)&&(Se.push(Nn.value),!(ae&&Se.length===ae));xe=!0);}catch(Mn){st=!0,St=Mn}finally{try{!xe&&Vt.return&&Vt.return()}finally{if(st)throw St}}return Se}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,x=128,T="-",S=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,R={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=m-g,O=Math.floor,D=String.fromCharCode;function $(oe){throw new RangeError(R[oe])}function L(oe,ee){for(var ae=[],Se=oe.length;Se--;)ae[Se]=ee(oe[Se]);return ae}function F(oe,ee){var ae=oe.split("@"),Se="";ae.length>1&&(Se=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var xe=oe.split("."),st=L(xe,ee).join(".");return Se+st}function B(oe){for(var ee=[],ae=0,Se=oe.length;ae<Se;){var xe=oe.charCodeAt(ae++);if(xe>=55296&&xe<=56319&&ae<Se){var st=oe.charCodeAt(ae++);(st&64512)==56320?ee.push(((xe&1023)<<10)+(st&1023)+65536):(ee.push(xe),ae--)}else ee.push(xe)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},q=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},P=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},V=function(ee,ae,Se){var xe=0;for(ee=Se?O(ee/b):ee>>1,ee+=O(ee/ae);ee>k*y>>1;xe+=m)ee=O(ee/k);return O(xe+(k+1)*ee/(ee+v))},W=function(ee){var ae=[],Se=ee.length,xe=0,st=x,St=w,Vt=ee.lastIndexOf(T);Vt<0&&(Vt=0);for(var Nn=0;Nn<Vt;++Nn)ee.charCodeAt(Nn)>=128&&$("not-basic"),ae.push(ee.charCodeAt(Nn));for(var Mn=Vt>0?Vt+1:0;Mn<Se;){for(var fn=xe,nr=1,Cr=m;;Cr+=m){Mn>=Se&&$("invalid-input");var zt=q(ee.charCodeAt(Mn++));(zt>=m||zt>O((p-xe)/nr))&&$("overflow"),xe+=zt*nr;var rr=Cr<=St?g:Cr>=St+y?y:Cr-St;if(zt<rr)break;var Ur=m-rr;nr>O(p/Ur)&&$("overflow"),nr*=Ur}var Xn=ae.length+1;St=V(xe-fn,Xn,fn==0),O(xe/Xn)>p-st&&$("overflow"),st+=O(xe/Xn),xe%=Xn,ae.splice(xe++,0,st)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Se=ee.length,xe=x,st=0,St=w,Vt=!0,Nn=!1,Mn=void 0;try{for(var fn=ee[Symbol.iterator](),nr;!(Vt=(nr=fn.next()).done);Vt=!0){var Cr=nr.value;Cr<128&&ae.push(D(Cr))}}catch(Pe){Nn=!0,Mn=Pe}finally{try{!Vt&&fn.return&&fn.return()}finally{if(Nn)throw Mn}}var zt=ae.length,rr=zt;for(zt&&ae.push(T);rr<Se;){var Ur=p,Xn=!0,Si=!1,Ls=void 0;try{for(var Xr=ee[Symbol.iterator](),uo;!(Xn=(uo=Xr.next()).done);Xn=!0){var Oi=uo.value;Oi>=xe&&Oi<Ur&&(Ur=Oi)}}catch(Pe){Si=!0,Ls=Pe}finally{try{!Xn&&Xr.return&&Xr.return()}finally{if(Si)throw Ls}}var $i=rr+1;Ur-xe>O((p-st)/$i)&&$("overflow"),st+=(Ur-xe)*$i,xe=Ur;var Fo=!0,Sa=!1,Fs=void 0;try{for(var Hl=ee[Symbol.iterator](),sd;!(Fo=(sd=Hl.next()).done);Fo=!0){var Y=sd.value;if(Y<xe&&++st>p&&$("overflow"),Y==xe){for(var se=st,Z=m;;Z+=m){var ce=Z<=St?g:Z>=St+y?y:Z-St;if(se<ce)break;var ge=se-ce,le=m-ce;ae.push(D(P(ce+ge%le,0))),se=O(ge/le)}ae.push(D(P(se,0))),St=V(st,$i,rr==zt),st=0,++rr}}}catch(Pe){Sa=!0,Fs=Pe}finally{try{!Fo&&Hl.return&&Hl.return()}finally{if(Sa)throw Fs}}++st,++xe}return ae.join("")},H=function(ee){return F(ee,function(ae){return S.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return F(ee,function(ae){return C.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:H},pe={};function fe(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function de(oe){for(var ee="",ae=0,Se=oe.length;ae<Se;){var xe=parseInt(oe.substr(ae+1,2),16);if(xe<128)ee+=String.fromCharCode(xe),ae+=3;else if(xe>=194&&xe<224){if(Se-ae>=6){var st=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((xe&31)<<6|st&63)}else ee+=oe.substr(ae,6);ae+=6}else if(xe>=224){if(Se-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Vt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((xe&15)<<12|(St&63)<<6|Vt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ye(oe,ee){function ae(Se){var xe=de(Se);return xe.match(ee.UNRESERVED)?xe:Se}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,fe).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,fe).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,fe).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,fe).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,fe).replace(ee.PCT_ENCODED,o)),oe}function Ae(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function ve(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Se=d(ae,2),xe=Se[1];return xe?xe.split(".").map(Ae).join("."):oe}function rt(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Se=d(ae,3),xe=Se[1],st=Se[2];if(xe){for(var St=xe.toLowerCase().split("::").reverse(),Vt=d(St,2),Nn=Vt[0],Mn=Vt[1],fn=Mn?Mn.split(":").map(Ae):[],nr=Nn.split(":").map(Ae),Cr=ee.IPV4ADDRESS.test(nr[nr.length-1]),zt=Cr?7:8,rr=nr.length-zt,Ur=Array(zt),Xn=0;Xn<zt;++Xn)Ur[Xn]=fn[Xn]||nr[rr+Xn]||"";Cr&&(Ur[zt-1]=ve(Ur[zt-1],ee));var Si=Ur.reduce(function($i,Fo,Sa){if(!Fo||Fo==="0"){var Fs=$i[$i.length-1];Fs&&Fs.index+Fs.length===Sa?Fs.length++:$i.push({index:Sa,length:1})}return $i},[]),Ls=Si.sort(function($i,Fo){return Fo.length-$i.length})[0],Xr=void 0;if(Ls&&Ls.length>1){var uo=Ur.slice(0,Ls.index),Oi=Ur.slice(Ls.index+Ls.length);Xr=uo.join(":")+"::"+Oi.join(":")}else Xr=Ur.join(":");return st&&(Xr+="%"+st),Xr}else return oe}var ze=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function ot(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Se=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var xe=oe.match(ze);if(xe){yt?(ae.scheme=xe[1],ae.userinfo=xe[3],ae.host=xe[4],ae.port=parseInt(xe[5],10),ae.path=xe[6]||"",ae.query=xe[7],ae.fragment=xe[8],isNaN(ae.port)&&(ae.port=xe[5])):(ae.scheme=xe[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?xe[3]:void 0,ae.host=oe.indexOf("//")!==-1?xe[4]:void 0,ae.port=parseInt(xe[5],10),ae.path=xe[6]||"",ae.query=oe.indexOf("?")!==-1?xe[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?xe[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?xe[4]:void 0)),ae.host&&(ae.host=rt(ve(ae.host,Se),Se)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var st=pe[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!st||!st.unicodeSupport)){if(ae.host&&(ee.domainHost||st&&st.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Se.PCT_ENCODED,de).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ye(ae,c)}else ye(ae,Se);st&&st.parse&&st.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function De(oe,ee){var ae=ee.iri!==!1?f:c,Se=[];return oe.userinfo!==void 0&&(Se.push(oe.userinfo),Se.push("@")),oe.host!==void 0&&Se.push(rt(ve(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(xe,st,St){return"["+st+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Se.push(":"),Se.push(String(oe.port))),Se.length?Se.join(""):void 0}var Me=/^\.\.?\//,Ye=/^\/\.(\/|$)/,pt=/^\/\.\.(\/|$)/,Pt=/^\/?(?:.|\n)*?(?=\/|$)/;function qe(oe){for(var ee=[];oe.length;)if(oe.match(Me))oe=oe.replace(Me,"");else if(oe.match(Ye))oe=oe.replace(Ye,"/");else if(oe.match(pt))oe=oe.replace(pt,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Pt);if(ae){var Se=ae[0];oe=oe.slice(Se.length),ee.push(Se)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function me(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Se=[],xe=pe[(ee.scheme||oe.scheme||"").toLowerCase()];if(xe&&xe.serialize&&xe.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||xe&&xe.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,de).toLowerCase())}catch(Vt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Vt}}ye(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Se.push(oe.scheme),Se.push(":"));var st=De(oe,ee);if(st!==void 0&&(ee.reference!=="suffix"&&Se.push("//"),Se.push(st),oe.path&&oe.path.charAt(0)!=="/"&&Se.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!xe||!xe.absolutePath)&&(St=qe(St)),st===void 0&&(St=St.replace(/^\/\//,"/%2F")),Se.push(St)}return oe.query!==void 0&&(Se.push("?"),Se.push(oe.query)),oe.fragment!==void 0&&(Se.push("#"),Se.push(oe.fragment)),Se.join("")}function ft(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Se=arguments[3],xe={};return Se||(oe=ot(me(oe,ae),ae),ee=ot(me(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(xe.scheme=ee.scheme,xe.userinfo=ee.userinfo,xe.host=ee.host,xe.port=ee.port,xe.path=qe(ee.path||""),xe.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(xe.userinfo=ee.userinfo,xe.host=ee.host,xe.port=ee.port,xe.path=qe(ee.path||""),xe.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?xe.path=qe(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?xe.path="/"+ee.path:oe.path?xe.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:xe.path=ee.path,xe.path=qe(xe.path)),xe.query=ee.query):(xe.path=oe.path,ee.query!==void 0?xe.query=ee.query:xe.query=oe.query),xe.userinfo=oe.userinfo,xe.host=oe.host,xe.port=oe.port),xe.scheme=oe.scheme),xe.fragment=ee.fragment,xe}function vt(oe,ee,ae){var Se=u({scheme:"null"},ae);return me(ft(ot(oe,Se),ot(ee,Se),Se,!0),Se)}function he(oe,ee){return typeof oe=="string"?oe=me(ot(oe,ee),ee):s(oe)==="object"&&(oe=ot(me(oe,ee),ee)),oe}function Ce(oe,ee,ae){return typeof oe=="string"?oe=me(ot(oe,ae),ae):s(oe)==="object"&&(oe=me(oe,ae)),typeof ee=="string"?ee=me(ot(ee,ae),ae):s(ee)==="object"&&(ee=me(ee,ae)),oe===ee}function Ve(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,fe)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,de)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Se=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Se?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},On={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Sr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var $n={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Se=ee;return Se.secure=Sr(Se),Se.resourceName=(Se.path||"/")+(Se.query?"?"+Se.query:""),Se.path=void 0,Se.query=void 0,Se},serialize:function(ee,ae){if((ee.port===(Sr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Se=ee.resourceName.split("?"),xe=d(Se,2),st=xe[0],St=xe[1];ee.path=st&&st!=="/"?st:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},ur={scheme:"wss",domainHost:$n.domainHost,parse:$n.parse,serialize:$n.serialize},hn={},xn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",er="[0-9A-Fa-f]",tr=i(i("%[EFef]"+er+"%"+er+er+"%"+er+er)+"|"+i("%[89A-Fa-f]"+er+"%"+er+er)+"|"+i("%"+er+er)),Lo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Di="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",Sn=r(Di,'[\\"\\\\]'),Pi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Tr=new RegExp(xn,"g"),cs=new RegExp(tr,"g"),Jh=new RegExp(r("[^]",Lo,"[\\.]",'[\\"]',Sn),"g"),Zu=new RegExp(r("[^]",xn,Pi),"g"),id=Zu;function _r(oe){var ee=de(oe);return ee.match(Tr)?ee:oe}var xi={scheme:"mailto",parse:function(ee,ae){var Se=ee,xe=Se.to=Se.path?Se.path.split(","):[];if(Se.path=void 0,Se.query){for(var st=!1,St={},Vt=Se.query.split("&"),Nn=0,Mn=Vt.length;Nn<Mn;++Nn){var fn=Vt[Nn].split("=");switch(fn[0]){case"to":for(var nr=fn[1].split(","),Cr=0,zt=nr.length;Cr<zt;++Cr)xe.push(nr[Cr]);break;case"subject":Se.subject=ut(fn[1],ae);break;case"body":Se.body=ut(fn[1],ae);break;default:st=!0,St[ut(fn[0],ae)]=ut(fn[1],ae);break}}st&&(Se.headers=St)}Se.query=void 0;for(var rr=0,Ur=xe.length;rr<Ur;++rr){var Xn=xe[rr].split("@");if(Xn[0]=ut(Xn[0]),ae.unicodeSupport)Xn[1]=ut(Xn[1],ae).toLowerCase();else try{Xn[1]=ne.toASCII(ut(Xn[1],ae).toLowerCase())}catch(Si){Se.error=Se.error||"Email address's domain name can not be converted to ASCII via punycode: "+Si}xe[rr]=Xn.join("@")}return Se},serialize:function(ee,ae){var Se=ee,xe=a(ee.to);if(xe){for(var st=0,St=xe.length;st<St;++st){var Vt=String(xe[st]),Nn=Vt.lastIndexOf("@"),Mn=Vt.slice(0,Nn).replace(cs,_r).replace(cs,o).replace(Jh,fe),fn=Vt.slice(Nn+1);try{fn=ae.iri?ne.toUnicode(fn):ne.toASCII(ut(fn,ae).toLowerCase())}catch(rr){Se.error=Se.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+rr}xe[st]=Mn+"@"+fn}Se.path=xe.join(",")}var nr=ee.headers=ee.headers||{};ee.subject&&(nr.subject=ee.subject),ee.body&&(nr.body=ee.body);var Cr=[];for(var zt in nr)nr[zt]!==hn[zt]&&Cr.push(zt.replace(cs,_r).replace(cs,o).replace(Zu,fe)+"="+nr[zt].replace(cs,_r).replace(cs,o).replace(id,fe));return Cr.length&&(Se.query=Cr.join("&")),Se}},Kr=/^([^\:]+)\:(.*)/,ru={scheme:"urn",parse:function(ee,ae){var Se=ee.path&&ee.path.match(Kr),xe=ee;if(Se){var st=ae.scheme||xe.scheme||"urn",St=Se[1].toLowerCase(),Vt=Se[2],Nn=st+":"+(ae.nid||St),Mn=pe[Nn];xe.nid=St,xe.nss=Vt,xe.path=void 0,Mn&&(xe=Mn.parse(xe,ae))}else xe.error=xe.error||"URN can not be parsed.";return xe},serialize:function(ee,ae){var Se=ae.scheme||ee.scheme||"urn",xe=ee.nid,st=Se+":"+(ae.nid||xe),St=pe[st];St&&(ee=St.serialize(ee,ae));var Vt=ee,Nn=ee.nss;return Vt.path=(xe||ae.nid)+":"+Nn,Vt}},Ea=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,xa={scheme:"urn:uuid",parse:function(ee,ae){var Se=ee;return Se.uuid=Se.nss,Se.nss=void 0,!ae.tolerant&&(!Se.uuid||!Se.uuid.match(Ea))&&(Se.error=Se.error||"UUID is not valid."),Se},serialize:function(ee,ae){var Se=ee;return Se.nss=(ee.uuid||"").toLowerCase(),Se}};pe[_t.scheme]=_t,pe[On.scheme]=On,pe[$n.scheme]=$n,pe[ur.scheme]=ur,pe[xi.scheme]=xi,pe[ru.scheme]=ru,pe[xa.scheme]=xa,n.SCHEMES=pe,n.pctEncChar=fe,n.pctDecChars=de,n.parse=ot,n.removeDotSegments=qe,n.serialize=me,n.resolveComponents=ft,n.resolve=vt,n.normalize=he,n.equal=Ce,n.escapeComponent=Ve,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(rz,rz.exports);var Nwt=rz.exports;Object.defineProperty(yX,"__esModule",{value:!0});const cIe=Nwt;cIe.code='require("ajv/dist/runtime/uri").default';yX.default=cIe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Rf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Rn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=ok,i=Jx,s=F1,o=_u,a=Rn,u=wo,l=_s,c=wt,f=Rwt,d=yX,h=(P,V)=>new RegExp(P,V);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(P){var V,W,j,H,G,ne,pe,fe,de,ye,Ae,ve,rt,ze,yt,ot,De,Me,Ye,pt,Pt,qe,me,ft,vt;const he=P.strict,Ce=(V=P.code)===null||V===void 0?void 0:V.optimize,Ve=Ce===!0||Ce===void 0?1:Ce||0,ut=(j=(W=P.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(H=P.uriResolver)!==null&&H!==void 0?H:d.default;return{strictSchema:(ne=(G=P.strictSchema)!==null&&G!==void 0?G:he)!==null&&ne!==void 0?ne:!0,strictNumbers:(fe=(pe=P.strictNumbers)!==null&&pe!==void 0?pe:he)!==null&&fe!==void 0?fe:!0,strictTypes:(ye=(de=P.strictTypes)!==null&&de!==void 0?de:he)!==null&&ye!==void 0?ye:"log",strictTuples:(ve=(Ae=P.strictTuples)!==null&&Ae!==void 0?Ae:he)!==null&&ve!==void 0?ve:"log",strictRequired:(ze=(rt=P.strictRequired)!==null&&rt!==void 0?rt:he)!==null&&ze!==void 0?ze:!1,code:P.code?{...P.code,optimize:Ve,regExp:ut}:{optimize:Ve,regExp:ut},loopRequired:(yt=P.loopRequired)!==null&&yt!==void 0?yt:v,loopEnum:(ot=P.loopEnum)!==null&&ot!==void 0?ot:v,meta:(De=P.meta)!==null&&De!==void 0?De:!0,messages:(Me=P.messages)!==null&&Me!==void 0?Me:!0,inlineRefs:(Ye=P.inlineRefs)!==null&&Ye!==void 0?Ye:!0,schemaId:(pt=P.schemaId)!==null&&pt!==void 0?pt:"$id",addUsedSchema:(Pt=P.addUsedSchema)!==null&&Pt!==void 0?Pt:!0,validateSchema:(qe=P.validateSchema)!==null&&qe!==void 0?qe:!0,validateFormats:(me=P.validateFormats)!==null&&me!==void 0?me:!0,unicodeRegExp:(ft=P.unicodeRegExp)!==null&&ft!==void 0?ft:!0,int32range:(vt=P.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:_t}}class w{constructor(V={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,V=this.opts={...V,...b(V)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(V.logger);const H=V.validateFormats;V.validateFormats=!1,this.RULES=(0,s.getRules)(),x.call(this,g,V,"NOT SUPPORTED"),x.call(this,y,V,"DEPRECATED","warn"),this._metaOpts=R.call(this),V.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),V.keywords&&A.call(this,V.keywords),typeof V.meta=="object"&&this.addMetaSchema(V.meta),S.call(this),V.validateFormats=H}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:V,meta:W,schemaId:j}=this.opts;let H=f;j==="id"&&(H={...f},H.id=H.$id,delete H.$id),W&&V&&this.addMetaSchema(H,H[j],!1)}defaultMeta(){const{meta:V,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof V=="object"?V[W]||V:void 0}validate(V,W){let j;if(typeof V=="string"){if(j=this.getSchema(V),!j)throw new Error(`no schema with key or ref "${V}"`)}else j=this.compile(V);const H=j(W);return"$async"in j||(this.errors=j.errors),H}compile(V,W){const j=this._addSchema(V,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(V,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return H.call(this,V,W);async function H(ye,Ae){await G.call(this,ye.$schema);const ve=this._addSchema(ye,Ae);return ve.validate||ne.call(this,ve)}async function G(ye){ye&&!this.getSchema(ye)&&await H.call(this,{$ref:ye},!0)}async function ne(ye){try{return this._compileSchemaEnv(ye)}catch(Ae){if(!(Ae instanceof i.default))throw Ae;return pe.call(this,Ae),await fe.call(this,Ae.missingSchema),ne.call(this,ye)}}function pe({missingSchema:ye,missingRef:Ae}){if(this.refs[ye])throw new Error(`AnySchema ${ye} is loaded but ${Ae} cannot be resolved`)}async function fe(ye){const Ae=await de.call(this,ye);this.refs[ye]||await G.call(this,Ae.$schema),this.refs[ye]||this.addSchema(Ae,ye,W)}async function de(ye){const Ae=this._loading[ye];if(Ae)return Ae;try{return await(this._loading[ye]=j(ye))}finally{delete this._loading[ye]}}}addSchema(V,W,j,H=this.opts.validateSchema){if(Array.isArray(V)){for(const ne of V)this.addSchema(ne,void 0,j,H);return this}let G;if(typeof V=="object"){const{schemaId:ne}=this.opts;if(G=V[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(V,j,W,H,!0),this}addMetaSchema(V,W,j=this.opts.validateSchema){return this.addSchema(V,W,!0,j),this}validateSchema(V,W){if(typeof V=="boolean")return!0;let j;if(j=V.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const H=this.validate(j,V);if(!H&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return H}getSchema(V){let W;for(;typeof(W=T.call(this,V))=="string";)V=W;if(W===void 0){const{schemaId:j}=this.opts,H=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,H,V),!W)return;this.refs[V]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(V){if(V instanceof RegExp)return this._removeAllSchemas(this.schemas,V),this._removeAllSchemas(this.refs,V),this;switch(typeof V){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=T.call(this,V);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[V],delete this.refs[V],this}case"object":{const W=V;this._cache.delete(W);let j=V[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(V){for(const W of V)this.addKeyword(W);return this}addKeyword(V,W){let j;if(typeof V=="string")j=V,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof V=="object"&&W===void 0){if(W=V,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>L.call(this,G)),this;B.call(this,W);const H={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,H.type.length===0?G=>L.call(this,G,H):G=>H.type.forEach(ne=>L.call(this,G,H,ne))),this}getKeyword(V){const W=this.RULES.all[V];return typeof W=="object"?W.definition:!!W}removeKeyword(V){const{RULES:W}=this;delete W.keywords[V],delete W.all[V];for(const j of W.rules){const H=j.rules.findIndex(G=>G.keyword===V);H>=0&&j.rules.splice(H,1)}return this}addFormat(V,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[V]=W,this}errorsText(V=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!V||V.length===0?"No errors":V.map(H=>`${j}${H.instancePath} ${H.message}`).reduce((H,G)=>H+W+G)}$dataMetaSchema(V,W){const j=this.RULES.all;V=JSON.parse(JSON.stringify(V));for(const H of W){const G=H.split("/").slice(1);let ne=V;for(const pe of G)ne=ne[pe];for(const pe in j){const fe=j[pe];if(typeof fe!="object")continue;const{$data:de}=fe.definition,ye=ne[pe];de&&ye&&(ne[pe]=q(ye))}}return V}_removeAllSchemas(V,W){for(const j in V){const H=V[j];(!W||W.test(j))&&(typeof H=="string"?delete V[j]:H&&!H.meta&&(this._cache.delete(H.schema),delete V[j]))}}_addSchema(V,W,j,H=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:pe}=this.opts;if(typeof V=="object")ne=V[pe];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof V!="boolean")throw new Error("schema must be object or boolean")}let fe=this._cache.get(V);if(fe!==void 0)return fe;j=(0,u.normalizeId)(ne||j);const de=u.getSchemaRefs.call(this,V,j);return fe=new o.SchemaEnv({schema:V,schemaId:pe,meta:W,baseId:j,localRefs:de}),this._cache.set(fe.schema,fe),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=fe),H&&this.validateSchema(V,!0),fe}_checkUnique(V){if(this.schemas[V]||this.refs[V])throw new Error(`schema with key or id "${V}" already exists`)}_compileSchemaEnv(V){if(V.meta?this._compileMetaSchema(V):o.compileSchema.call(this,V),!V.validate)throw new Error("ajv implementation error");return V.validate}_compileMetaSchema(V){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,V)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function x(P,V,W,j="error"){for(const H in P){const G=H;G in V&&this.logger[j](`${W}: option ${H}. ${P[G]}`)}}function T(P){return P=(0,u.normalizeId)(P),this.schemas[P]||this.refs[P]}function S(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const V in P)this.addSchema(P[V],V)}function C(){for(const P in this.opts.formats){const V=this.opts.formats[P];V&&this.addFormat(P,V)}}function A(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const V in P){const W=P[V];W.keyword||(W.keyword=V),this.addKeyword(W)}}function R(){const P={...this.opts};for(const V of p)delete P[V];return P}const k={log(){},warn(){},error(){}};function O(P){if(P===!1)return k;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function $(P,V){const{RULES:W}=this;if((0,c.eachItem)(P,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!D.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!V&&V.$data&&!("code"in V||"validate"in V))throw new Error('$data keyword must have "code" or "validate" function')}function L(P,V,W){var j;const H=V==null?void 0:V.post;if(W&&H)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=H?G.post:G.rules.find(({type:fe})=>fe===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[P]=!0,!V)return;const pe={keyword:P,definition:{...V,type:(0,l.getJSONTypes)(V.type),schemaType:(0,l.getJSONTypes)(V.schemaType)}};V.before?F.call(this,ne,pe,V.before):ne.rules.push(pe),G.all[P]=pe,(j=V.implements)===null||j===void 0||j.forEach(fe=>this.addKeyword(fe))}function F(P,V,W){const j=P.rules.findIndex(H=>H.keyword===W);j>=0?P.rules.splice(j,0,V):(P.rules.push(V),this.logger.warn(`rule ${W} is not defined`))}function B(P){let{metaSchema:V}=P;V!==void 0&&(P.$data&&this.opts.$data&&(V=q(V)),P.validateSchema=this.compile(V,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function q(P){return{anyOf:[P,U]}}})(D2e);var vX={},bX={},_X={};Object.defineProperty(_X,"__esModule",{value:!0});const Dwt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};_X.default=Dwt;var j1={};Object.defineProperty(j1,"__esModule",{value:!0});j1.callRef=j1.getValidate=void 0;const Pwt=Jx,_ce=In,cu=Rn,l_=Bh,wce=_u,_N=wt,Owt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=wce.resolveRef.call(u,l,i,n);if(c===void 0)throw new Pwt.default(r.opts.uriResolver,i,n);if(c instanceof wce.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return HD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return HD(e,(0,cu._)`${p}.validate`,l,l.$async)}function d(p){const m=fIe(e,p);HD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,cu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:cu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function fIe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,cu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}j1.getValidate=fIe;function HD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?l_.default.this:cu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,cu._)`await ${(0,_ce.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,cu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,_ce.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,cu._)`${p}.errors`;i.assign(l_.default.vErrors,(0,cu._)`${l_.default.vErrors} === null ? ${m} : ${l_.default.vErrors}.concat(${m})`),i.assign(l_.default.errors,(0,cu._)`${l_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=_N.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,cu._)`${p}.evaluated.props`);s.props=_N.mergeEvaluated.props(i,y,s.props,cu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=_N.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,cu._)`${p}.evaluated.items`);s.items=_N.mergeEvaluated.items(i,y,s.items,cu.Name)}}}j1.callRef=HD;j1.default=Owt;Object.defineProperty(bX,"__esModule",{value:!0});const $wt=_X,Mwt=j1,Lwt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",$wt.default,Mwt.default];bX.default=Lwt;var wX={},EX={};Object.defineProperty(EX,"__esModule",{value:!0});const G3=Rn,rg=G3.operators,Y3={maximum:{okStr:"<=",ok:rg.LTE,fail:rg.GT},minimum:{okStr:">=",ok:rg.GTE,fail:rg.LT},exclusiveMaximum:{okStr:"<",ok:rg.LT,fail:rg.GTE},exclusiveMinimum:{okStr:">",ok:rg.GT,fail:rg.LTE}},Fwt={message:({keyword:e,schemaCode:t})=>(0,G3.str)`must be ${Y3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,G3._)`{comparison: ${Y3[e].okStr}, limit: ${t}}`},jwt={keyword:Object.keys(Y3),type:"number",schemaType:"number",$data:!0,error:Fwt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,G3._)`${n} ${Y3[t].fail} ${r} || isNaN(${n})`)}};EX.default=jwt;var xX={};Object.defineProperty(xX,"__esModule",{value:!0});const tA=Rn,Bwt={message:({schemaCode:e})=>(0,tA.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,tA._)`{multipleOf: ${e}}`},Uwt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:Bwt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,tA._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,tA._)`${o} !== parseInt(${o})`;e.fail$data((0,tA._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};xX.default=Uwt;var SX={},TX={};Object.defineProperty(TX,"__esModule",{value:!0});function dIe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}TX.default=dIe;dIe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(SX,"__esModule",{value:!0});const Tv=Rn,zwt=wt,Vwt=TX,Hwt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Tv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Tv._)`{limit: ${e}}`},qwt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:Hwt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Tv.operators.GT:Tv.operators.LT,o=i.opts.unicode===!1?(0,Tv._)`${n}.length`:(0,Tv._)`${(0,zwt.useFunc)(e.gen,Vwt.default)}(${n})`;e.fail$data((0,Tv._)`${o} ${s} ${r}`)}};SX.default=qwt;var CX={};Object.defineProperty(CX,"__esModule",{value:!0});const Wwt=In,K3=Rn,Gwt={message:({schemaCode:e})=>(0,K3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,K3._)`{pattern: ${e}}`},Ywt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:Gwt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,K3._)`(new RegExp(${i}, ${o}))`:(0,Wwt.usePattern)(e,r);e.fail$data((0,K3._)`!${a}.test(${t})`)}};CX.default=Ywt;var AX={};Object.defineProperty(AX,"__esModule",{value:!0});const nA=Rn,Kwt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,nA.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,nA._)`{limit: ${e}}`},Xwt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:Kwt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?nA.operators.GT:nA.operators.LT;e.fail$data((0,nA._)`Object.keys(${n}).length ${i} ${r}`)}};AX.default=Xwt;var IX={};Object.defineProperty(IX,"__esModule",{value:!0});const aT=In,rA=Rn,Qwt=wt,Jwt={message:({params:{missingProperty:e}})=>(0,rA.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,rA._)`{missingProperty: ${e}}`},Zwt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Jwt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,Qwt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(rA.nil,f);else for(const h of n)(0,aT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,aT.checkMissingProp)(e,n,h)),(0,aT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,aT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,aT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,rA.not)(p),()=>{e.error(),t.break()})},rA.nil)}}};IX.default=Zwt;var kX={};Object.defineProperty(kX,"__esModule",{value:!0});const iA=Rn,eEt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,iA.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,iA._)`{limit: ${e}}`},tEt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:eEt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?iA.operators.GT:iA.operators.LT;e.fail$data((0,iA._)`${n}.length ${i} ${r}`)}};kX.default=tEt;var RX={},ak={};Object.defineProperty(ak,"__esModule",{value:!0});const hIe=OG;hIe.code='require("ajv/dist/runtime/equal").default';ak.default=hIe;Object.defineProperty(RX,"__esModule",{value:!0});const fj=_s,mo=Rn,nEt=wt,rEt=ak,iEt={message:({params:{i:e,j:t}})=>(0,mo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,mo._)`{i: ${e}, j: ${t}}`},sEt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:iEt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,fj.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,mo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,mo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,mo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,fj.checkDataTypes)(l,g,a.opts.strictNumbers,fj.DataType.Wrong),v=t.const("indices",(0,mo._)`{}`);t.for((0,mo._)`;${p}--;`,()=>{t.let(g,(0,mo._)`${n}[${p}]`),t.if(y,(0,mo._)`continue`),l.length>1&&t.if((0,mo._)`typeof ${g} == "string"`,(0,mo._)`${g} += "_"`),t.if((0,mo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,mo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,mo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,nEt.useFunc)(t,rEt.default),y=t.name("outer");t.label(y).for((0,mo._)`;${p}--;`,()=>t.for((0,mo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,mo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};RX.default=sEt;var NX={};Object.defineProperty(NX,"__esModule",{value:!0});const iz=Rn,oEt=wt,aEt=ak,uEt={message:"must be equal to constant",params:({schemaCode:e})=>(0,iz._)`{allowedValue: ${e}}`},lEt={keyword:"const",$data:!0,error:uEt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,iz._)`!${(0,oEt.useFunc)(t,aEt.default)}(${n}, ${i})`):e.fail((0,iz._)`${s} !== ${n}`)}};NX.default=lEt;var DX={};Object.defineProperty(DX,"__esModule",{value:!0});const rC=Rn,cEt=wt,fEt=ak,dEt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,rC._)`{allowedValues: ${e}}`},hEt={keyword:"enum",schemaType:"array",$data:!0,error:dEt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,cEt.useFunc)(t,fEt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,rC.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,rC._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,rC._)`${l()}(${n}, ${h}[${p}])`:(0,rC._)`${n} === ${m}`}}};DX.default=hEt;Object.defineProperty(wX,"__esModule",{value:!0});const pEt=EX,mEt=xX,gEt=SX,yEt=CX,vEt=AX,bEt=IX,_Et=kX,wEt=RX,EEt=NX,xEt=DX,SEt=[pEt.default,mEt.default,gEt.default,yEt.default,vEt.default,bEt.default,_Et.default,wEt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},EEt.default,xEt.default];wX.default=SEt;var PX={},Zx={};Object.defineProperty(Zx,"__esModule",{value:!0});Zx.validateAdditionalItems=void 0;const Cv=Rn,sz=wt,TEt={message:({params:{len:e}})=>(0,Cv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Cv._)`{limit: ${e}}`},CEt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:TEt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,sz.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}pIe(e,r)}};function pIe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Cv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Cv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,sz.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Cv._)`${a} <= ${t.length}`);n.if((0,Cv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:sz.Type.Num},l),o.allErrors||n.if((0,Cv.not)(l),()=>n.break())})}}Zx.validateAdditionalItems=pIe;Zx.default=CEt;var OX={},eS={};Object.defineProperty(eS,"__esModule",{value:!0});eS.validateTuple=void 0;const Ece=Rn,qD=wt,AEt=In,IEt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return mIe(e,"additionalItems",t);n.items=!0,!(0,qD.alwaysValidSchema)(n,t)&&e.ok((0,AEt.validateArray)(e))}};function mIe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=qD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Ece._)`${s}.length`);n.forEach((f,d)=>{(0,qD.alwaysValidSchema)(a,f)||(r.if((0,Ece._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,qD.checkStrictMode)(a,g,d.strictTuples)}}}eS.validateTuple=mIe;eS.default=IEt;Object.defineProperty(OX,"__esModule",{value:!0});const kEt=eS,REt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,kEt.validateTuple)(e,"items")};OX.default=REt;var $X={};Object.defineProperty($X,"__esModule",{value:!0});const xce=Rn,NEt=wt,DEt=In,PEt=Zx,OEt={message:({params:{len:e}})=>(0,xce.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,xce._)`{limit: ${e}}`},$Et={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:OEt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,NEt.alwaysValidSchema)(r,t)&&(i?(0,PEt.validateAdditionalItems)(e,i):e.ok((0,DEt.validateArray)(e)))}};$X.default=$Et;var MX={};Object.defineProperty(MX,"__esModule",{value:!0});const ec=Rn,wN=wt,MEt={message:({params:{min:e,max:t}})=>t===void 0?(0,ec.str)`must contain at least ${e} valid item(s)`:(0,ec.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,ec._)`{minContains: ${e}}`:(0,ec._)`{minContains: ${e}, maxContains: ${t}}`},LEt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:MEt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,ec._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,wN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,wN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,wN.alwaysValidSchema)(s,n)){let m=(0,ec._)`${c} >= ${o}`;a!==void 0&&(m=(0,ec._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,ec._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:wN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,ec._)`${m}++`),a===void 0?t.if((0,ec._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,ec._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,ec._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};MX.default=LEt;var gIe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Rn,n=wt,r=In;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(gIe);var LX={};Object.defineProperty(LX,"__esModule",{value:!0});const yIe=Rn,FEt=wt,jEt={message:"property name must be valid",params:({params:e})=>(0,yIe._)`{propertyName: ${e.propertyName}}`},BEt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:jEt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,FEt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,yIe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};LX.default=BEt;var m6={};Object.defineProperty(m6,"__esModule",{value:!0});const EN=In,Qc=Rn,UEt=Bh,xN=wt,zEt={message:"must NOT have additional properties",params:({params:e})=>(0,Qc._)`{additionalProperty: ${e.additionalProperty}}`},VEt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:zEt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,xN.alwaysValidSchema)(o,n))return;const l=(0,EN.allSchemaProperties)(r.properties),c=(0,EN.allSchemaProperties)(r.patternProperties);f(),e.ok((0,Qc._)`${s} === ${UEt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,xN.schemaRefOrVal)(o,r.properties,"properties");y=(0,EN.isOwnProperty)(t,v,g)}else l.length?y=(0,Qc.or)(...l.map(v=>(0,Qc._)`${g} === ${v}`)):y=Qc.nil;return c.length&&(y=(0,Qc.or)(y,...c.map(v=>(0,Qc._)`${(0,EN.usePattern)(e,v)}.test(${g})`))),(0,Qc.not)(y)}function h(g){t.code((0,Qc._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,xN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,Qc.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,Qc.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:xN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};m6.default=VEt;var FX={};Object.defineProperty(FX,"__esModule",{value:!0});const HEt=Rf,Sce=In,dj=wt,Tce=m6,qEt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Tce.default.code(new HEt.KeywordCxt(s,Tce.default,"additionalProperties"));const o=(0,Sce.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=dj.mergeEvaluated.props(t,(0,dj.toHash)(o),s.props));const a=o.filter(f=>!(0,dj.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Sce.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};FX.default=qEt;var jX={};Object.defineProperty(jX,"__esModule",{value:!0});const Cce=In,SN=Rn,Ace=wt,Ice=wt,WEt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Cce.allSchemaProperties)(n),u=a.filter(m=>(0,Ace.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof SN.Name)&&(s.props=(0,Ice.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Ace.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,SN._)`${(0,Cce.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Ice.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,SN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,SN.not)(c),()=>t.break())})})}}};jX.default=WEt;var BX={};Object.defineProperty(BX,"__esModule",{value:!0});const GEt=wt,YEt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,GEt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};BX.default=YEt;var UX={};Object.defineProperty(UX,"__esModule",{value:!0});const KEt=In,XEt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:KEt.validateUnion,error:{message:"must match a schema in anyOf"}};UX.default=XEt;var zX={};Object.defineProperty(zX,"__esModule",{value:!0});const WD=Rn,QEt=wt,JEt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,WD._)`{passingSchemas: ${e.passing}}`},ZEt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:JEt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,QEt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,WD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,WD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,WD.Name)})})}}};zX.default=ZEt;var VX={};Object.defineProperty(VX,"__esModule",{value:!0});const ext=wt,txt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,ext.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};VX.default=txt;var HX={};Object.defineProperty(HX,"__esModule",{value:!0});const X3=Rn,vIe=wt,nxt={message:({params:e})=>(0,X3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,X3._)`{failingKeyword: ${e.ifClause}}`},rxt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:nxt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,vIe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=kce(r,"then"),s=kce(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,X3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,X3._)`${c}`):e.setParams({ifClause:c})}}}};function kce(e,t){const n=e.schema[t];return n!==void 0&&!(0,vIe.alwaysValidSchema)(e,n)}HX.default=rxt;var qX={};Object.defineProperty(qX,"__esModule",{value:!0});const ixt=wt,sxt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,ixt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};qX.default=sxt;Object.defineProperty(PX,"__esModule",{value:!0});const oxt=Zx,axt=OX,uxt=eS,lxt=$X,cxt=MX,fxt=gIe,dxt=LX,hxt=m6,pxt=FX,mxt=jX,gxt=BX,yxt=UX,vxt=zX,bxt=VX,_xt=HX,wxt=qX;function Ext(e=!1){const t=[gxt.default,yxt.default,vxt.default,bxt.default,_xt.default,wxt.default,dxt.default,hxt.default,fxt.default,pxt.default,mxt.default];return e?t.push(axt.default,lxt.default):t.push(oxt.default,uxt.default),t.push(cxt.default),t}PX.default=Ext;var WX={},GX={};Object.defineProperty(GX,"__esModule",{value:!0});const Ji=Rn,xxt={message:({schemaCode:e})=>(0,Ji.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Ji._)`{format: ${e}}`},Sxt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:xxt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,Ji._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,Ji._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,Ji._)`${m}.type || "string"`).assign(y,(0,Ji._)`${m}.validate`),()=>n.assign(g,(0,Ji._)`"string"`).assign(y,m)),e.fail$data((0,Ji.or)(v(),b()));function v(){return u.strictSchema===!1?Ji.nil:(0,Ji._)`${o} && !${y}`}function b(){const w=c.$async?(0,Ji._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,Ji._)`${y}(${r})`,x=(0,Ji._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,Ji._)`${y} && ${y} !== true && ${g} === ${t} && !${x}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(x());return}throw new Error(x());function x(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(x){const T=x instanceof RegExp?(0,Ji.regexpCode)(x):u.code.formats?(0,Ji._)`${u.code.formats}${(0,Ji.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:x,code:T});return typeof x=="object"&&!(x instanceof RegExp)?[x.type||"string",x.validate,(0,Ji._)`${S}.validate`]:["string",x,S]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,Ji._)`await ${y}(${r})`}return typeof g=="function"?(0,Ji._)`${y}(${r})`:(0,Ji._)`${y}.test(${r})`}}}};GX.default=Sxt;Object.defineProperty(WX,"__esModule",{value:!0});const Txt=GX,Cxt=[Txt.default];WX.default=Cxt;var $E={};Object.defineProperty($E,"__esModule",{value:!0});$E.contentVocabulary=$E.metadataVocabulary=void 0;$E.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];$E.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(vX,"__esModule",{value:!0});const Axt=bX,Ixt=wX,kxt=PX,Rxt=WX,Rce=$E,Nxt=[Axt.default,Ixt.default,(0,kxt.default)(),Rxt.default,Rce.metadataVocabulary,Rce.contentVocabulary];vX.default=Nxt;var YX={},g6={};Object.defineProperty(g6,"__esModule",{value:!0});g6.DiscrError=void 0;var Nce;(function(e){e.Tag="tag",e.Mapping="mapping"})(Nce||(g6.DiscrError=Nce={}));Object.defineProperty(YX,"__esModule",{value:!0});const I_=Rn,oz=g6,Dce=_u,Dxt=Jx,Pxt=wt,Oxt={message:({params:{discrError:e,tagName:t}})=>e===oz.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,I_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},$xt={keyword:"discriminator",type:"object",schemaType:"object",error:Oxt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,I_._)`${n}${(0,I_.getProperty)(a)}`);t.if((0,I_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:oz.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,I_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:oz.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,I_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let x=o[w];if(x!=null&&x.$ref&&!(0,Pxt.schemaHasRulesButRef)(x,s.self.RULES)){const S=x.$ref;if(x=Dce.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),x instanceof Dce.SchemaEnv&&(x=x.schema),x===void 0)throw new Dxt.default(s.opts.uriResolver,s.baseId,S)}const T=(h=x==null?void 0:x.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(x)),v(T,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,x){if(w.const)b(w.const,x);else if(w.enum)for(const T of w.enum)b(T,x);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,x){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=x}}}};YX.default=$xt;const Mxt="http://json-schema.org/draft-07/schema#",Lxt="http://json-schema.org/draft-07/schema#",Fxt="Core schema meta-schema",jxt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},Bxt=["object","boolean"],Uxt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},zxt={$schema:Mxt,$id:Lxt,title:Fxt,definitions:jxt,type:Bxt,properties:Uxt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=D2e,r=vX,i=YX,s=zxt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Rf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Rn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=ok;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=Jx;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(J7,J7.exports);var Vxt=J7.exports;const bIe=jl(Vxt),Hxt="#/definitions/StudyConfig",qxt="http://json-schema.org/draft-07/schema#",Wxt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js {   "type": "markdown",   "path": "<study-name>/assets/question.md",   "response": [     {       "id": "response1",       "prompt": "What is 2 + 2?",       "required": true,       "location": "belowStimulus",       "type": "numerical"     }   ]   "correctAnswer": [{     "id": "response1",     "answer": 4   }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": {     "instructionLocation": "sidebar",     "nextButtonLocation": "sidebar",     "path": "<study-name>/assets/my-image.jpg",     "response": [         {             "id": "my-image-id",             "options": [                 {                     "label": "Europe",                     "value": "Europe"                 },                 {                     "label": "Japan",                     "value": "Japan"                 },                 {                     "label": "USA",                     "value": "USA"                 }             ],             "prompt": "Your Selected Answer:",             "type": "dropdown"         }     ],     "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": {     "baseComponent": "my-image-component",     "description": "Choosing section with largest GDP",     "instruction": "Which region has the largest GDP?" }, "q2": {     "baseComponent": "my-image-component",     "description": "Choosing section with lowest GDP",     "instruction": "Which region has the lowest GDP?" }, "q3": {     "baseComponent": "my-image-component",     "description": "Choosing section with highest exports of Wheat",     "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js {  "id": "q7",  "prompt": "Checkbox example (not required)",  "required": false,  "location": "aboveStimulus",  "type": "checkbox",  "options": [      {          "label": "Option 1",          "value": "opt-1"      },      {          "label": "Option 2",          "value": "opt-2"      },      {          "label": "Option 3",          "value": "opt-3"      }  ] }',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js {  "order": "random",  "components": [    "component1",    "component2",    "component3"  ] }\n\nThis snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [  ["component2", "component3", "component1"],  ["component1", "component3", "component2"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2", "component3"],  ["component2", "component3", "component1"],  ["component3", "component1", "component2"],  ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ["component1", "component2", "component3"],  ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js {  "order": "latinSquare",  "components": [    "component1",    "component2",    "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [  ["component1", "component2"],  ["component2", "component3"],  ["component3", "component1"],  ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "check": "block",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "firstLocation": 2,      "spacing": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"],  ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js {  "id": "q-color",  "prompt": "What is your favorite color?",  "required": true,  "location": "aboveStimulus",  "type": "dropdown",  "placeholder": "Please choose your favorite color",  "options": [      {          "label": "Red",          "value": "red"      },      {          "label": "Blue",          "value": "blue"      }  ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js {   "type": "image",   "path": "<study-name>/assets/image.jpg",   "style": {     "maxWidth": "50%"   } }',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "responses",      "to": "end"    }  ]  ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "response",      "responseId": "attentionCheckResponse",      "value": "the right answer",      "to": "end"    }  ]  ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likerts Scale:

\`\`\`js {    "id": "q-satisfaction",    "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).",    "required": true,    "location": "aboveStimulus",    "type": "likert",    "leftLabel": "Not Enjoyable",    "rightLabel": "Very Enjoyable",    "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js {  "id": "q-name",  "prompt": "What is your first name?",  "required": true,  "location": "aboveStimulus",  "type": "longText",  "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js {   "type": "markdown",   "path": "<study-name>/assets/help.md",   "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js {  "id": "q-numerical",  "prompt": "Numerical example",  "required": true,  "location": "aboveStimulus",  "type": "numerical",  "placeholder": "Enter your age, range from 0 - 120",  "max": 120,  "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js {  "type": "questionnaire",  "response": [    {      "id": "gender",      "prompt": "Gender:",      "required": true,      "location": "belowStimulus",      "type": "checkbox",      "options": [        {          "label": "Man",          "value": "Man"        },        {          "label": "Woman",          "value": "Woman"        },        {          "label": "Genderqueer",          "value": "Genderqueer"        },        {          "label": "Third-gender",          "value": "Third-gender"        },        ... etc.      ]    }  ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js {  "order": "fixed",  "components": [    "component1",    "component2",    "component3",    "component4",    "component5",    "component6"  ],  "interruptions": [    {      "spacing": "random",      "numInterruptions": 3,      "components": [        "interruption1",        "interruption2"      ]    }  ] } ```\n\nThe resulting sequence array could be:\n\n```js [  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6],  ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6],  ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6],  ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types. ```ts {  parameters: T;  setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ``` parameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js {  type: 'react-component';  path: 'my_study/CoolComponent.tsx';  parameters: {    name: 'Zach';    age: 26;  } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) {    // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0-beta13/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0-beta13/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js {  ...  "skip": [    {      "name": "attentionCheck",      "check": "repeatedComponent",      "condition": "numIncorrect",      "value": 2,      "to": "end"    }  ]  ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js {  "id": "q-short-text",  "prompt": "Short text example",  "required": true,  "location": "aboveStimulus",  "type": "shortText",  "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js {  "id": "q-slider",  "prompt": "How are you feeling?",  "location": "aboveStimulus",  "required": true,  "type": "slider",  "options": [      {          "label": "Bad",          "value": 0      },      {          "label": "OK",          "value": 50      },      {          "label": "Good",          "value": 100      }  ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js {  "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0-beta13/src/parser/StudyConfigSchema.json",  "studyMetadata": {    ...  },  "uiConfig": {    ...  },  "components": {    ...  },  "sequence": {    ...  } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. This data is also included in the data file that is downloaded at the end of the study, to help identify the study and version. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : {  "title": "My New Study",  "version": "pilot",  "authors": [    "Jane Doe",    "John Doe"  ],  "date": "2024-04-01",  "description": "This study is meant to test your patience.",  "organizations": [    "The reVISit Team",    "The Other Team"  ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study, shown on the landing page and attached to participant data. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration ```js uiConfig:{  "contactEmail": "contact@revisit.dev",  "helpTextPath": "<study-name>/assets/help.md",  "logoPath": "<study-name>/assets/logo.jpg",  "withProgressBar": true,  "autoDownloadStudy": true  "autoDownloadTime": 5000,  "studyEndMsg": "Thank you for completing this study. You\'re the best!",  "sidebar": true,  "windowEventDebounceTime": 500,  "urlParticipantIdParam": "PROLIFIC_ID",  "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js {  "type": "website",  "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js {  "type": "website",  "path": "<study-name>/website.html",  "parameters": {    "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3]  }  "response": [    {      "id": "barChart",      "prompt": "Your selected answer:",      "required": true,      "location": "belowStimulus",      "type": "iframe"    }  ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script>  Revisit.onDataReceive((data) => {    const barData = data[\'barData\'];    ...  });\n\n // Call out that \'barChart\' needs to match ID in \'response\' object  Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js  const trrack = initializeTrrack({      initialState,      registry  });\n\n ...  Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},Gxt={$ref:Hxt,$schema:qxt,definitions:Wxt},Yxt="#/definitions/GlobalConfig",Kxt="http://json-schema.org/draft-07/schema#",Xxt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples for more information",type:"string"},adminUsers:{description:"A required property listing out the emails of users who require admin access.",items:{type:"string"},type:"array"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList","adminUsers"],type:"object"}},Qxt={$ref:Yxt,$schema:Kxt,definitions:Xxt},_Ie=new bIe;_Ie.addSchema(Qxt);const Pce=_Ie.getSchema("#/definitions/GlobalConfig"),wIe=new bIe;wIe.addSchema(Gxt);const hj=wIe.getSchema("#/definitions/StudyConfig");function Jxt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function y6(e){return e.baseComponent!==void 0}function Zxt(e){const t=oX.parse(e),n=Pce(t),r=Jxt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Pce.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function EIe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):EIe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function eSt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;y6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=vwe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return EIe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function tSt(e){let t=!1,n;try{n=oX.parse(e),t=hj(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=eSt(n);r=[...hj.errors||[],...s],i=o}else r=hj.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function xIe(){const e=Mm(),{setAlertModal:t}=Ph(),n=Oh();N.useEffect(()=>{const i=(new URLSearchParams(window.location.search).get("admin")||"f")==="t"},[e,t,n])}const Oce=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta"],$ce=["participantId","trialId","trialOrder","responseId"];function KX(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function nSt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(lm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=t.components[o],l=y6(u)&&u.baseComponent&&t.baseComponents?DG({},t.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(n.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),n.includes("percentComplete")&&(p.percentComplete=r),n.includes("description")&&(p.description=l.description),n.includes("instruction")&&(p.instruction=l.instruction),n.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),n.includes("answer")&&(p.answer=h),n.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return n.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),n.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),n.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),n.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),n.includes("duration")&&(p.duration=c),n.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}function rSt({opened:e,close:t,filename:n,studyConfig:r,data:i}){const[s,o]=N.useState([...Oce].filter(c=>c!=="meta")),a=N.useMemo(()=>{const c=[...$ce,...s],f=c,d=i.map(h=>nSt(h,r,c)).flat().sort((h,p)=>h!==p?h.participantId.localeCompare(p.participantId):h.trialOrder-p.trialOrder);return{header:f,rows:d}},[i,s,r]),u=N.useCallback(()=>{const c=[a.header.join(","),...a.rows.map(f=>a.header.map(d=>f[d]).join(","))].join(`
`);KX(c,n)},[n,a.header,a.rows]),l=N.useMemo(()=>{const c=a.rows.length>5?5:a.rows.length,f=c===1?"":"s";return`This is a preview of the first ${f?c:""} row${f} of the CSV. The full CSV contains ${a.rows.length} row${f}.`},[a.rows]);return _.jsxs(gs,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(OW,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Oce],value:s,onChange:c=>o(c),label:"Included optional columns:",leftSection:_.jsx(MGe,{}),variant:"filled"}),_.jsx(If,{h:"md"}),_.jsx(_e,{mih:300,style:{width:"100%",overflow:"scroll"},children:_.jsxs(Tn,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(Tn.Thead,{children:_.jsx(Tn.Tr,{children:a.header.map(c=>_.jsx(Tn.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(c)?200:void 0},children:_.jsxs(qt,{direction:"row",justify:"space-between",align:"center",children:[c,!$ce.includes(c)&&_.jsx(w0,{onClick:()=>o(s.filter(f=>f!==c)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(Tbe,{size:16})})]})},c))})}),_.jsx(Tn.Tbody,{children:a.rows.slice(0,5).map((c,f)=>_.jsx(Tn.Tr,{children:a.header.map(d=>_.jsx(Tn.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(d)?"normal":"nowrap"},children:c[d]},`${f}-${d}`))},f))})]})}),_.jsx(If,{h:"sm"}),_.jsx(qt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(et,{children:l})}),_.jsx(If,{h:"md"}),_.jsxs(Xs,{justify:"right",children:[_.jsx(jn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(jn,{leftSection:_.jsx(xbe,{}),onClick:()=>u(),"data-autofocus":!0,children:"Download"})]})]})}function iSt(){const e=cm(),{storageEngine:t}=ba(),{answers:n}=$c(m=>m),[r,i]=N.useState(!1);N.useEffect(()=>{const m=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(m))},1e3)},[]),xIe();const[s,o]=N.useState(),[a,u]=N.useState(""),l=e.studyMetadata.title.replace(" ","_");N.useEffect(()=>{async function m(){if(t){const g=await t.getCurrentParticipantId(),y=await t.getParticipantData();u(g),o(y)}}m()},[t]);const c=N.useCallback(async()=>{KX(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=N.useState(Math.floor(d/1e3));return N.useEffect(()=>{if(r){const m=setInterval(()=>{p(g=>g-1)},1e3);return h<=0?(f&&c(),clearInterval(m),()=>clearInterval(m)):()=>clearInterval(m)}return()=>{}},[f,r,h,c]),_.jsx(E0,{style:{height:"100%"},children:_.jsx(qt,{direction:"column",children:r?_.jsx(et,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(qa,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(et,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(If,{h:"lg"}),_.jsx(E0,{children:_.jsx(cy,{color:"blue"})})]})})})}function sSt(){var d;const e=cm(),t=Mm(),n=yy()||"Notfound",r=e.components[n],i=PG();xIe();const{storageEngine:s}=ba(),o=Oh(),{setAlertModal:a}=Ph();if(N.useEffect(()=>{s==null||s.getEngine()},[a,s,o]),n==="end")return _.jsx(iSt,{});if(n==="Notfound")return _.jsx(A1,{email:e.uiConfig.contactEmail});const u=y6(r)&&e.baseComponents?DG({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(qa,{text:l}),_.jsx(vO,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(N.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(cbt,{currentConfig:u}),u.type==="website"&&_.jsx(Brt,{currentConfig:u}),u.type==="image"&&_.jsx(zrt,{currentConfig:u}),u.type==="react-component"&&_.jsx(lbt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(qa,{text:l}),_.jsx(vO,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function az(e){const[t]=rG();return _.jsx(nG,{...e,to:{pathname:e.to,search:t.toString()}})}function SIe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=SIe(o,t,n,r),r.includes(o.orderPath))break}return i}function TIe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=TIe(s,r)}}),n}function oSt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function aSt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=OI(),u=$m(),l=Mm(),c=cm(),[f,{close:d,open:h}]=t1(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?SIe(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return _.jsxs(Nr,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[_.jsx(Nr.Target,{children:_.jsx(_e,{onMouseEnter:h,onMouseLeave:d,children:_.jsx(QM,{active:g,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(_e,{children:[i&&_.jsx(AGe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?_.jsx(et,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(et,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&_.jsx(Nr.Dropdown,{onMouseLeave:d,children:_.jsx(et,{size:"sm",children:_.jsxs(_e,{children:[p.description&&_.jsxs(_e,{children:[_.jsx(et,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(et,{fw:400,component:"span",children:p.description})]}),p.meta&&_.jsxs(et,{children:[_.jsx(et,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(et,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function uz({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=o1(e.components);return n&&r&&(i=oSt(o1(e.components),o1(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),_.jsx(_.Fragment,{children:i.map((o,a)=>{if(typeof o=="string")return _.jsx(aSt,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?lm(u).length-TIe(o,u):0,c=lm(o);return _.jsx(QM,{label:_.jsxs(_e,{style:{opacity:l>0?1:.5},children:[_.jsx(et,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?_.jsx(TGe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(zp,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&_.jsx(zp,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(_e,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(uz,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function CIe(e,t,n,r){e==null||e.nextParticipant(t,n).then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function AIe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>AIe(n,`${t}-${r}`))}}function Mce({text:e}){return _.jsx(ia,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx($Ge,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function uSt(){const{showStudyBrowser:e,sequence:t,metadata:n}=$c(h=>h),{toggleStudyBrowser:r}=Ph(),i=yy(),s=cm(),o=Oh(),a=OI(),u=ybe(`/${a}`),{storageEngine:l}=ba(),c=N.useMemo(()=>{let h=o1(s.sequence);return h=AIe(h,"root"),h.components.push("end"),h},[s.sequence]),[f,d]=N.useState("participant");return e||i==="end"&&s.uiConfig.autoDownloadStudy?_.jsxs(fi.Aside,{p:"0",children:[_.jsx(fi.Section,{children:_.jsxs(qt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(et,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(jn,{variant:"light",leftSection:_.jsx(sG,{size:14}),onClick:()=>CIe(l,s,n,u),size:"xs",disabled:f==="allTrials",children:"Next Participant"}),_.jsx(fy,{onClick:()=>o(r()),mt:1})]})}),_.jsx(fi.Section,{grow:!0,component:hb,p:"xs",pt:0,children:_.jsxs(Zi,{value:f,onChange:d,children:[_.jsx(_e,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(Zi.List,{grow:!0,children:[_.jsxs(Zi.Tab,{value:"participant",children:["Participant View",_.jsx(Mce,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(Zi.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Mce,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(Zi.Panel,{value:"participant",children:_.jsx(uz,{configSequence:c,participantSequence:t,fullSequence:t,participantView:!0})}),_.jsx(Zi.Panel,{value:"allTrials",children:_.jsx(uz,{configSequence:c,participantSequence:t,fullSequence:t,participantView:!1})})]})})]}):null}var Lce={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IIe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},lSt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},XX={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(IIe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):lSt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new cSt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class cSt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const fSt=function(e){const t=IIe(e);return XX.encodeByteArray(t,!0)},Q3=function(e){return fSt(e).replace(/\./g,"")},kIe=function(e){try{return XX.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RIe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dSt=()=>RIe().__FIREBASE_DEFAULTS__,hSt=()=>{if(typeof process>"u"||typeof Lce>"u")return;const e=Lce.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},pSt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&kIe(e[1]);return t&&JSON.parse(t)},v6=()=>{try{return dSt()||hSt()||pSt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},NIe=e=>{var t,n;return(n=(t=v6())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},mSt=e=>{const t=NIe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},DIe=()=>{var e;return(e=v6())===null||e===void 0?void 0:e.config},PIe=e=>{var t;return(t=v6())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gSt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Q3(JSON.stringify(n)),Q3(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Do(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ySt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Do())}function vSt(){var e;const t=(e=v6())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bSt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function _St(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function wSt(){const e=Do();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function ESt(){return!vSt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function QX(){try{return typeof indexedDB=="object"}catch{return!1}}function xSt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SSt="FirebaseError";class Uh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=SSt,Object.setPrototypeOf(this,Uh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tS.prototype.create)}}class tS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?TSt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Uh(i,a,r)}}function TSt(e,t){return e.replace(CSt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const CSt=/\{\$([^}]+)}/g;function ASt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function A2(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Fce(s)&&Fce(o)){if(!A2(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Fce(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function ISt(e,t){const n=new kSt(e,t);return n.subscribe.bind(n)}class kSt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");RSt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=pj),i.error===void 0&&(i.error=pj),i.complete===void 0&&(i.complete=pj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function RSt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function pj(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NSt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DSt=1e3,PSt=2,OSt=4*60*60*1e3,$St=.5;function MSt(e,t=DSt,n=PSt){const r=t*Math.pow(n,e),i=Math.round($St*r*(Math.random()-.5)*2);return Math.min(OSt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ni(e){return e&&e._delegate?e._delegate:e}class vh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LSt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new C2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(jSt(t))try{this.getOrInitializeService({instanceIdentifier:gv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=gv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=gv){return this.instances.has(t)}getOptions(t=gv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FSt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=gv){return this.component?this.component.multipleInstances?t:gv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FSt(e){return e===gv?void 0:e}function jSt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BSt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new LSt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(qn||(qn={}));const USt={debug:qn.DEBUG,verbose:qn.VERBOSE,info:qn.INFO,warn:qn.WARN,error:qn.ERROR,silent:qn.SILENT},zSt=qn.INFO,VSt={[qn.DEBUG]:"log",[qn.VERBOSE]:"log",[qn.INFO]:"info",[qn.WARN]:"warn",[qn.ERROR]:"error"},HSt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=VSt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class b6{constructor(t){this.name=t,this._logLevel=zSt,this._logHandler=HSt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in qn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?USt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,qn.DEBUG,...t),this._logHandler(this,qn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,qn.VERBOSE,...t),this._logHandler(this,qn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,qn.INFO,...t),this._logHandler(this,qn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,qn.WARN,...t),this._logHandler(this,qn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,qn.ERROR,...t),this._logHandler(this,qn.ERROR,...t)}}const qSt=(e,t)=>t.some(n=>e instanceof n);let jce,Bce;function WSt(){return jce||(jce=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function GSt(){return Bce||(Bce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OIe=new WeakMap,lz=new WeakMap,$Ie=new WeakMap,mj=new WeakMap,JX=new WeakMap;function YSt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(a0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&OIe.set(n,e)}).catch(()=>{}),JX.set(t,e),t}function KSt(e){if(lz.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});lz.set(e,t)}let cz={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return lz.get(e);if(t==="objectStoreNames")return e.objectStoreNames||$Ie.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return a0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function XSt(e){cz=e(cz)}function QSt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(gj(this),t,...n);return $Ie.set(r,t.sort?t.sort():[t]),a0(r)}:GSt().includes(e)?function(...t){return e.apply(gj(this),t),a0(OIe.get(this))}:function(...t){return a0(e.apply(gj(this),t))}}function JSt(e){return typeof e=="function"?QSt(e):(e instanceof IDBTransaction&&KSt(e),qSt(e,WSt())?new Proxy(e,cz):e)}function a0(e){if(e instanceof IDBRequest)return YSt(e);if(mj.has(e))return mj.get(e);const t=JSt(e);return t!==e&&(mj.set(e,t),JX.set(t,e)),t}const gj=e=>JX.get(e);function ZSt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=a0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(a0(o.result),u.oldVersion,u.newVersion,a0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const eTt=["get","getKey","getAll","getAllKeys","count"],tTt=["put","add","delete","clear"],yj=new Map;function Uce(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(yj.get(t))return yj.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=tTt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eTt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return yj.set(t,s),s}XSt(e=>({...e,get:(t,n,r)=>Uce(t,n)||e.get(t,n,r),has:(t,n)=>!!Uce(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nTt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rTt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rTt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const fz="@firebase/app",zce="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new b6("@firebase/app"),iTt="@firebase/app-compat",sTt="@firebase/analytics-compat",oTt="@firebase/analytics",aTt="@firebase/app-check-compat",uTt="@firebase/app-check",lTt="@firebase/auth",cTt="@firebase/auth-compat",fTt="@firebase/database",dTt="@firebase/database-compat",hTt="@firebase/functions",pTt="@firebase/functions-compat",mTt="@firebase/installations",gTt="@firebase/installations-compat",yTt="@firebase/messaging",vTt="@firebase/messaging-compat",bTt="@firebase/performance",_Tt="@firebase/performance-compat",wTt="@firebase/remote-config",ETt="@firebase/remote-config-compat",xTt="@firebase/storage",STt="@firebase/storage-compat",TTt="@firebase/firestore",CTt="@firebase/vertexai-preview",ATt="@firebase/firestore-compat",ITt="firebase",kTt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dz="[DEFAULT]",RTt={[fz]:"fire-core",[iTt]:"fire-core-compat",[oTt]:"fire-analytics",[sTt]:"fire-analytics-compat",[uTt]:"fire-app-check",[aTt]:"fire-app-check-compat",[lTt]:"fire-auth",[cTt]:"fire-auth-compat",[fTt]:"fire-rtdb",[dTt]:"fire-rtdb-compat",[hTt]:"fire-fn",[pTt]:"fire-fn-compat",[mTt]:"fire-iid",[gTt]:"fire-iid-compat",[yTt]:"fire-fcm",[vTt]:"fire-fcm-compat",[bTt]:"fire-perf",[_Tt]:"fire-perf-compat",[wTt]:"fire-rc",[ETt]:"fire-rc-compat",[xTt]:"fire-gcs",[STt]:"fire-gcs-compat",[TTt]:"fire-fst",[ATt]:"fire-fst-compat",[CTt]:"fire-vertex","fire-js":"fire-js",[ITt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3=new Map,NTt=new Map,hz=new Map;function Vce(e,t){try{e.container.addComponent(t)}catch(n){B1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function _m(e){const t=e.name;if(hz.has(t))return B1.debug(`There were multiple attempts to register component ${t}.`),!1;hz.set(t,e);for(const n of J3.values())Vce(n,e);for(const n of NTt.values())Vce(n,e);return!0}function nS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function zd(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DTt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},u0=new tS("app","Firebase",DTt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PTt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new vh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw u0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb=kTt;function MIe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:dz,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw u0.create("bad-app-name",{appName:String(i)});if(n||(n=DIe()),!n)throw u0.create("no-options");const s=J3.get(i);if(s){if(A2(n,s.options)&&A2(r,s.config))return s;throw u0.create("duplicate-app",{appName:i})}const o=new BSt(i);for(const u of hz.values())o.addComponent(u);const a=new PTt(n,r,o);return J3.set(i,a),a}function ZX(e=dz){const t=J3.get(e);if(!t&&e===dz&&DIe())return MIe();if(!t)throw u0.create("no-app",{appName:e});return t}function Nf(e,t,n){var r;let i=(r=RTt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),B1.warn(a.join(" "));return}_m(new vh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OTt="firebase-heartbeat-database",$Tt=1,I2="firebase-heartbeat-store";let vj=null;function LIe(){return vj||(vj=ZSt(OTt,$Tt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(I2)}catch(n){console.warn(n)}}}}).catch(e=>{throw u0.create("idb-open",{originalErrorMessage:e.message})})),vj}async function MTt(e){try{const n=(await LIe()).transaction(I2),r=await n.objectStore(I2).get(FIe(e));return await n.done,r}catch(t){if(t instanceof Uh)B1.warn(t.message);else{const n=u0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});B1.warn(n.message)}}}async function Hce(e,t){try{const r=(await LIe()).transaction(I2,"readwrite");await r.objectStore(I2).put(t,FIe(e)),await r.done}catch(n){if(n instanceof Uh)B1.warn(n.message);else{const r=u0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});B1.warn(r.message)}}}function FIe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LTt=1024,FTt=30*24*60*60*1e3;class jTt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UTt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=qce();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=FTt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=qce(),{heartbeatsToSend:r,unsentEntries:i}=BTt(this._heartbeatsCache.heartbeats),s=Q3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function qce(){return new Date().toISOString().substring(0,10)}function BTt(e,t=LTt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Wce(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Wce(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class UTt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return QX()?xSt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await MTt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hce(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Hce(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Wce(e){return Q3(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zTt(e){_m(new vh("platform-logger",t=>new nTt(t),"PRIVATE")),_m(new vh("heartbeat",t=>new jTt(t),"PRIVATE")),Nf(fz,zce,e),Nf(fz,zce,"esm2017"),Nf("fire-js","")}zTt("");function jIe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VTt=jIe,BIe=new tS("auth","Firebase",jIe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z3=new b6("@firebase/auth");function HTt(e,...t){Z3.logLevel<=qn.WARN&&Z3.warn(`Auth (${Tb}): ${e}`,...t)}function GD(e,...t){Z3.logLevel<=qn.ERROR&&Z3.error(`Auth (${Tb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(e,...t){throw tQ(e,...t)}function Df(e,...t){return tQ(e,...t)}function eQ(e,t,n){const r=Object.assign(Object.assign({},VTt()),{[t]:n});return new tS("auth","Firebase",r).create(t,{appName:e.name})}function l0(e){return eQ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qTt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&bh(e,"argument-error"),eQ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tQ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return BIe.create(e,...t)}function rn(e,t,...n){if(!e)throw tQ(t,...n)}function $p(e){const t="INTERNAL ASSERTION FAILED: "+e;throw GD(t),new Error(t)}function wm(e,t){e||$p(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pz(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function WTt(){return Gce()==="http:"||Gce()==="https:"}function Gce(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GTt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(WTt()||bSt()||"connection"in navigator)?navigator.onLine:!0}function YTt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(t,n){this.shortDelay=t,this.longDelay=n,wm(n>t,"Short delay should be less than long delay!"),this.isMobile=ySt()||_St()}get(){return GTt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nQ(e,t){wm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UIe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$p("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$p("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$p("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KTt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XTt=new lk(3e4,6e4);function _6(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function rS(e,t,n,r,i={}){return zIe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=uk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),UIe.fetch()(HIe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function zIe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},KTt),t);try{const i=new QTt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw TN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw TN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw TN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw TN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw eQ(e,c,l);bh(e,c)}}catch(i){if(i instanceof Uh)throw i;bh(e,"network-request-failed",{message:String(i)})}}async function VIe(e,t,n,r,i={}){const s=await rS(e,t,n,r,i);return"mfaPendingCredential"in s&&bh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function HIe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?nQ(e.config,i):`${e.config.apiScheme}://${i}`}class QTt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Df(this.auth,"network-request-failed")),XTt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function TN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Df(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JTt(e,t){return rS(e,"POST","/v1/accounts:delete",t)}async function qIe(e,t){return rS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function ZTt(e,t=!1){const n=ni(e),r=await n.getIdToken(t),i=rQ(r);rn(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:sA(bj(i.auth_time)),issuedAtTime:sA(bj(i.iat)),expirationTime:sA(bj(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function bj(e){return Number(e)*1e3}function rQ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return GD("JWT malformed, contained fewer than 3 sections"),null;try{const i=kIe(n);return i?JSON.parse(i):(GD("Failed to decode base64 JWT payload"),null)}catch(i){return GD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Yce(e){const t=rQ(e);return rn(t,"internal-error"),rn(typeof t.exp<"u","internal-error"),rn(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Uh&&eCt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function eCt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tCt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mz{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sA(this.lastLoginAt),this.creationTime=sA(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await k2(e,qIe(n,{idToken:r}));rn(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?WIe(s.providerUserInfo):[],a=rCt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mz(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function nCt(e){const t=ni(e);await e$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function rCt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function WIe(e){return e.map(t=>{var{providerId:n}=t,r=gI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iCt(e,t){const n=await zIe(e,{},async()=>{const r=uk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=HIe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",UIe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function sCt(e,t){return rS(e,"POST","/v2/accounts:revokeToken",_6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){rn(t.idToken,"internal-error"),rn(typeof t.idToken<"u","internal-error"),rn(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Yce(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){rn(t.length!==0,"internal-error");const n=Yce(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(rn(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await iCt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ow;return r&&(rn(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(rn(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(rn(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Ow,this.toJSON())}_performRefresh(){return $p("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(e,t){rn(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Mp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=gI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tCt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mz(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await k2(this,this.stsTokenManager.getToken(this.auth,t));return rn(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return ZTt(this,t)}reload(){return nCt(this)}_assign(t){this!==t&&(rn(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Mp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){rn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await e$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zd(this.auth.app))return Promise.reject(l0(this.auth));const t=await this.getIdToken();return await k2(this,JTt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:T,stsTokenManager:S}=n;rn(b&&S,t,"internal-error");const C=Ow.fromJSON(this.name,S);rn(typeof b=="string",t,"internal-error"),ig(f,t.name),ig(d,t.name),rn(typeof w=="boolean",t,"internal-error"),rn(typeof x=="boolean",t,"internal-error"),ig(h,t.name),ig(p,t.name),ig(m,t.name),ig(g,t.name),ig(y,t.name),ig(v,t.name);const A=new Mp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return T&&Array.isArray(T)&&(A.providerData=T.map(R=>Object.assign({},R))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new Ow;i.updateFromServerResponse(n);const s=new Mp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await e$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];rn(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?WIe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Ow;a.updateFromIdToken(r);const u=new Mp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new mz(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kce=new Map;function Lp(e){wm(e instanceof Function,"Expected a class definition");let t=Kce.get(e);return t?(wm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Kce.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GIe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}GIe.type="NONE";const Xce=GIe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YD(e,t,n){return`firebase:${e}:${t}:${n}`}class $w{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=YD(this.userKey,i.apiKey,s),this.fullPersistenceKey=YD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Mp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new $w(Lp(Xce),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Lp(Xce);const o=YD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Mp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new $w(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new $w(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qce(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(XIe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(YIe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(JIe(t))return"Blackberry";if(ZIe(t))return"Webos";if(iQ(t))return"Safari";if((t.includes("chrome/")||KIe(t))&&!t.includes("edge/"))return"Chrome";if(QIe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function YIe(e=Do()){return/firefox\//i.test(e)}function iQ(e=Do()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function KIe(e=Do()){return/crios\//i.test(e)}function XIe(e=Do()){return/iemobile/i.test(e)}function QIe(e=Do()){return/android/i.test(e)}function JIe(e=Do()){return/blackberry/i.test(e)}function ZIe(e=Do()){return/webos/i.test(e)}function w6(e=Do()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function oCt(e=Do()){var t;return w6(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function aCt(){return wSt()&&document.documentMode===10}function eke(e=Do()){return w6(e)||QIe(e)||ZIe(e)||JIe(e)||/windows phone/i.test(e)||XIe(e)}function uCt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tke(e,t=[]){let n;switch(e){case"Browser":n=Qce(Do());break;case"Worker":n=`${Qce(Do())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Tb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lCt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cCt(e,t={}){return rS(e,"GET","/v2/passwordPolicy",_6(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fCt=6;class dCt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:fCt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hCt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jce(this),this.idTokenSubscription=new Jce(this),this.beforeStateQueue=new lCt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BIe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Lp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await $w.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await qIe(this,{idToken:t}),r=await Mp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(zd(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return rn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await e$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=YTt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(zd(this.app))return Promise.reject(l0(this));const n=t?ni(t):null;return n&&rn(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&rn(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return zd(this.app)?Promise.reject(l0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return zd(this.app)?Promise.reject(l0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Lp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await cCt(this),n=new dCt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new tS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await sCt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Lp(t)||this._popupRedirectResolver;rn(n,this,"argument-error"),this.redirectPersistenceManager=await $w.create(this,[Lp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(rn(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return rn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=tke(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&HTt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ck(e){return ni(e)}class Jce{constructor(t){this.auth=t,this.observer=null,this.addObserver=ISt(n=>this.observer=n)}get next(){return rn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sQ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pCt(e){sQ=e}function mCt(e){return sQ.loadJS(e)}function gCt(){return sQ.gapiScript}function yCt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vCt(e,t){const n=nS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(A2(s,t??{}))return i;bh(i,"already-initialized")}return n.initialize({options:t})}function bCt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Lp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function _Ct(e,t,n){const r=ck(e);rn(r._canInitEmulator,r,"emulator-config-failed"),rn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=nke(t),{host:o,port:a}=wCt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),ECt()}function nke(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function wCt(e){const t=nke(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Zce(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Zce(o)}}}function Zce(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function ECt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rke{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return $p("not implemented")}_getIdTokenResponse(t){return $p("not implemented")}_linkToIdToken(t,n){return $p("not implemented")}_getReauthenticationResolver(t){return $p("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mw(e,t){return VIe(e,"POST","/v1/accounts:signInWithIdp",_6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xCt="http://localhost";class U1 extends rke{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new U1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):bh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=gI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new U1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return Mw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,Mw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,Mw(t,n)}buildRequest(){const t={requestUri:xCt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=uk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk extends oQ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg extends fk{constructor(){super("facebook.com")}static credential(t){return U1._fromParams({providerId:Cg.PROVIDER_ID,signInMethod:Cg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Cg.credentialFromTaggedObject(t)}static credentialFromError(t){return Cg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Cg.credential(t.oauthAccessToken)}catch{return null}}}Cg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ap extends fk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return U1._fromParams({providerId:Ap.PROVIDER_ID,signInMethod:Ap.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Ap.credentialFromTaggedObject(t)}static credentialFromError(t){return Ap.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ap.credential(n,r)}catch{return null}}}Ap.GOOGLE_SIGN_IN_METHOD="google.com";Ap.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends fk{constructor(){super("github.com")}static credential(t){return U1._fromParams({providerId:Ag.PROVIDER_ID,signInMethod:Ag.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ag.credentialFromTaggedObject(t)}static credentialFromError(t){return Ag.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ag.credential(t.oauthAccessToken)}catch{return null}}}Ag.GITHUB_SIGN_IN_METHOD="github.com";Ag.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends fk{constructor(){super("twitter.com")}static credential(t,n){return U1._fromParams({providerId:Ig.PROVIDER_ID,signInMethod:Ig.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ig.credentialFromTaggedObject(t)}static credentialFromError(t){return Ig.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ig.credential(n,r)}catch{return null}}}Ig.TWITTER_SIGN_IN_METHOD="twitter.com";Ig.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SCt(e,t){return VIe(e,"POST","/v1/accounts:signUp",_6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Mp._fromIdTokenResponse(t,r,i),o=efe(r);return new z0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=efe(r);return new z0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function efe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TCt(e){var t;if(zd(e.app))return Promise.reject(l0(e));const n=ck(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new z0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await SCt(n,{returnSecureToken:!0}),i=await z0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t$ extends Uh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new t$(t,n,r,i)}}function ike(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?t$._fromErrorAndOperation(e,s,t,r):s})}async function CCt(e,t,n=!1){const r=await k2(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return z0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ACt(e,t,n=!1){const{auth:r}=e;if(zd(r.app))return Promise.reject(l0(r));const i="reauthenticate";try{const s=await k2(e,ike(r,i,t,e),n);rn(s.idToken,r,"internal-error");const o=rQ(s.idToken);rn(o,r,"internal-error");const{sub:a}=o;return rn(e.uid===a,r,"user-mismatch"),z0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&bh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ICt(e,t,n=!1){if(zd(e.app))return Promise.reject(l0(e));const r="signIn",i=await ike(e,r,t),s=await z0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function kCt(e,t,n,r){return ni(e).onIdTokenChanged(t,n,r)}function RCt(e,t,n){return ni(e).beforeAuthStateChanged(t,n)}function NCt(e,t,n,r){return ni(e).onAuthStateChanged(t,n,r)}function DCt(e){return ni(e).signOut()}const n$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ske{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(n$,"1"),this.storage.removeItem(n$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PCt(){const e=Do();return iQ(e)||w6(e)}const OCt=1e3,$Ct=10;class oke extends ske{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=PCt()&&uCt(),this.fallbackToPolling=eke(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);aCt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,$Ct):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},OCt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}oke.type="LOCAL";const MCt=oke;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ake extends ske{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}ake.type="SESSION";const uke=ake;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LCt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new E6(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await LCt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}E6.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aQ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FCt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=aQ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(){return window}function jCt(e){nh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lke(){return typeof nh().WorkerGlobalScope<"u"&&typeof nh().importScripts=="function"}async function BCt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function UCt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function zCt(){return lke()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cke="firebaseLocalStorageDb",VCt=1,r$="firebaseLocalStorage",fke="fbase_key";class dk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function x6(e,t){return e.transaction([r$],t?"readwrite":"readonly").objectStore(r$)}function HCt(){const e=indexedDB.deleteDatabase(cke);return new dk(e).toPromise()}function gz(){const e=indexedDB.open(cke,VCt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(r$,{keyPath:fke})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(r$)?t(r):(r.close(),await HCt(),t(await gz()))})})}async function tfe(e,t,n){const r=x6(e,!0).put({[fke]:t,value:n});return new dk(r).toPromise()}async function qCt(e,t){const n=x6(e,!1).get(t),r=await new dk(n).toPromise();return r===void 0?null:r.value}function nfe(e,t){const n=x6(e,!0).delete(t);return new dk(n).toPromise()}const WCt=800,GCt=3;class dke{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await gz(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>GCt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return lke()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=E6._getInstance(zCt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await BCt(),!this.activeServiceWorker)return;this.sender=new FCt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||UCt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await gz();return await tfe(t,n$,"1"),await nfe(t,n$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>tfe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>qCt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>nfe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=x6(i,!1).getAll();return new dk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),WCt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}dke.type="LOCAL";const YCt=dke;new lk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hke(e,t){return t?Lp(t):(rn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ extends rke{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Mw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return Mw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return Mw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function KCt(e){return ICt(e.auth,new uQ(e),e.bypassAuthState)}function XCt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),ACt(n,new uQ(e),e.bypassAuthState)}async function QCt(e){const{auth:t,user:n}=e;return rn(n,t,"internal-error"),CCt(n,new uQ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pke{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return KCt;case"linkViaPopup":case"linkViaRedirect":return QCt;case"reauthViaPopup":case"reauthViaRedirect":return XCt;default:bh(this.auth,"internal-error")}}resolve(t){wm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){wm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JCt=new lk(2e3,1e4);async function ZCt(e,t,n){if(zd(e.app))return Promise.reject(Df(e,"operation-not-supported-in-this-environment"));const r=ck(e);qTt(e,t,oQ);const i=hke(r,n);return new Kv(r,"signInViaPopup",t,i).executeNotNull()}class Kv extends pke{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Kv.currentPopupAction&&Kv.currentPopupAction.cancel(),Kv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return rn(t,this.auth,"internal-error"),t}async onExecution(){wm(this.filter.length===1,"Popup operations only handle one event");const t=aQ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Df(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Df(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Kv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Df(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,JCt.get())};t()}}Kv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eAt="pendingRedirect",KD=new Map;class tAt extends pke{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=KD.get(this.auth._key());if(!t){try{const r=await nAt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}KD.set(this.auth._key(),t)}return this.bypassAuthState||KD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function nAt(e,t){const n=sAt(t),r=iAt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function rAt(e,t){KD.set(e._key(),t)}function iAt(e){return Lp(e._redirectPersistence)}function sAt(e){return YD(eAt,e.config.apiKey,e.name)}async function oAt(e,t,n=!1){if(zd(e.app))return Promise.reject(l0(e));const r=ck(e),i=hke(r,t),o=await new tAt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aAt=10*60*1e3;class uAt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!lAt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!mke(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Df(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=aAt&&this.cachedEventUids.clear(),this.cachedEventUids.has(rfe(t))}saveEventToCache(t){this.cachedEventUids.add(rfe(t)),this.lastProcessedEventTime=Date.now()}}function rfe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function mke({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function lAt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return mke(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cAt(e,t={}){return rS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fAt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dAt=/^https?/;async function hAt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await cAt(e);for(const n of t)try{if(pAt(n))return}catch{}bh(e,"unauthorized-domain")}function pAt(e){const t=pz(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!dAt.test(n))return!1;if(fAt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mAt=new lk(3e4,6e4);function ife(){const e=nh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function gAt(e){return new Promise((t,n)=>{var r,i,s;function o(){ife(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ife(),n(Df(e,"network-request-failed"))},timeout:mAt.get()})}if(!((i=(r=nh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=nh().gapi)===null||s===void 0)&&s.load)o();else{const a=yCt("iframefcb");return nh()[a]=()=>{gapi.load?o():n(Df(e,"network-request-failed"))},mCt(`${gCt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw XD=null,t})}let XD=null;function yAt(e){return XD=XD||gAt(e),XD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vAt=new lk(5e3,15e3),bAt="__/auth/iframe",_At="emulator/auth/iframe",wAt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EAt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function xAt(e){const t=e.config;rn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?nQ(t,_At):`https://${e.config.authDomain}/${bAt}`,r={apiKey:t.apiKey,appName:e.name,v:Tb},i=EAt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${uk(r).slice(1)}`}async function SAt(e){const t=await yAt(e),n=nh().gapi;return rn(n,e,"internal-error"),t.open({where:document.body,url:xAt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:wAt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Df(e,"network-request-failed"),a=nh().setTimeout(()=>{s(o)},vAt.get());function u(){nh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TAt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},CAt=500,AAt=600,IAt="_blank",kAt="http://localhost";class sfe{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function RAt(e,t,n,r=CAt,i=AAt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},TAt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Do().toLowerCase();n&&(a=KIe(l)?IAt:n),YIe(l)&&(t=t||kAt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(oCt(l)&&a!=="_self")return NAt(t||"",a),new sfe(null);const f=window.open(t||"",a,c);rn(f,e,"popup-blocked");try{f.focus()}catch{}return new sfe(f)}function NAt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DAt="__/auth/handler",PAt="emulator/auth/handler",OAt=encodeURIComponent("fac");async function ofe(e,t,n,r,i,s){rn(e.config.authDomain,e,"auth-domain-config-required"),rn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Tb,eventId:i};if(t instanceof oQ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",ASt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof fk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${OAt}=${encodeURIComponent(u)}`:"";return`${$At(e)}?${uk(a).slice(1)}${l}`}function $At({config:e}){return e.emulator?nQ(e,PAt):`https://${e.authDomain}/${DAt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j="webStorageSupport";class MAt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=uke,this._completeRedirectFn=oAt,this._overrideRedirectResult=rAt}async _openPopup(t,n,r,i){var s;wm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await ofe(t,n,r,pz(),i);return RAt(t,o,aQ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await ofe(t,n,r,pz(),i);return jCt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(wm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await SAt(t),r=new uAt(t);return n.register("authEvent",i=>(rn(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(_j,{type:_j},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[_j];o!==void 0&&n(!!o),bh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=hAt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return eke()||iQ()||w6()}}const gke=MAt;var afe="@firebase/auth",ufe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LAt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){rn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FAt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jAt(e){_m(new vh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;rn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:tke(e)},l=new hCt(r,i,s,u);return bCt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),_m(new vh("auth-internal",t=>{const n=ck(t.getProvider("auth").getImmediate());return(r=>new LAt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Nf(afe,ufe,FAt(e)),Nf(afe,ufe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BAt=5*60,UAt=PIe("authIdTokenMaxAge")||BAt;let lfe=null;const zAt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>UAt)return;const i=n==null?void 0:n.token;lfe!==i&&(lfe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function i$(e=ZX()){const t=nS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=vCt(e,{popupRedirectResolver:gke,persistence:[YCt,MCt,uke]}),r=PIe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=zAt(s.toString());RCt(n,o,()=>o(n.currentUser)),kCt(n,a=>o(a))}}const i=NIe("auth");return i&&_Ct(n,`http://${i}`),n}function VAt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}pCt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Df("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",VAt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jAt("Browser");var HAt="firebase",qAt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Nf(HAt,qAt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yke="firebasestorage.googleapis.com",vke="storageBucket",WAt=2*60*1e3,GAt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Uh{constructor(t,n,r=0){super(wj(t),`Firebase Storage: ${n} (${wj(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ki.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return wj(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Yi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Yi||(Yi={}));function wj(e){return"storage/"+e}function lQ(){const e="An unknown error occurred, please check the error payload for server response.";return new Ki(Yi.UNKNOWN,e)}function YAt(e){return new Ki(Yi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function KAt(e){return new Ki(Yi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function XAt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ki(Yi.UNAUTHENTICATED,e)}function QAt(){return new Ki(Yi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function JAt(e){return new Ki(Yi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function ZAt(){return new Ki(Yi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function e2t(){return new Ki(Yi.CANCELED,"User canceled the upload/download.")}function t2t(e){return new Ki(Yi.INVALID_URL,"Invalid URL '"+e+"'.")}function n2t(e){return new Ki(Yi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function r2t(){return new Ki(Yi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vke+"' property when initializing the app?")}function i2t(){return new Ki(Yi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function s2t(){return new Ki(Yi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function o2t(e){return new Ki(Yi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yz(e){return new Ki(Yi.INVALID_ARGUMENT,e)}function bke(){return new Ki(Yi.APP_DELETED,"The Firebase app was deleted.")}function a2t(e){return new Ki(Yi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oA(e,t){return new Ki(Yi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function uT(e){throw new Ki(Yi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ba.makeFromUrl(t,n)}catch{return new Ba(t,"")}if(r.path==="")return r;throw n2t(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===yke?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const x=b[w],T=x.regex.exec(t);if(T){const S=T[x.indices.bucket];let C=T[x.indices.path];C||(C=""),r=new Ba(S,C),x.postModify(r);break}}if(r==null)throw t2t(t);return r}}class u2t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function c2t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2t(e){return e!==void 0}function d2t(e){return typeof e=="object"&&!Array.isArray(e)}function cQ(e){return typeof e=="string"||e instanceof String}function cfe(e){return fQ()&&e instanceof Blob}function fQ(){return typeof Blob<"u"}function vz(e,t,n,r){if(r<t)throw yz(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw yz(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function _ke(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var c1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(c1||(c1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p2t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new CN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===c1.NO_ERROR,u=s.getStatus();if(!a||h2t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===c1.ABORT;r(!1,new CN(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new CN(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());f2t(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=lQ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?bke():e2t();o(u)}else{const u=ZAt();o(u)}};this.canceled_?n(!1,new CN(!1,null,!0)):this.backoffId_=l2t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&c2t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class CN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function m2t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function g2t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function y2t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function v2t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function b2t(e,t,n,r,i,s,o=!0){const a=_ke(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return y2t(l,t),m2t(l,n),g2t(l,s),v2t(l,r),new p2t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function w2t(...e){const t=_2t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(fQ())return new Blob(e);throw new Ki(Yi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function E2t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2t(e){if(typeof atob>"u")throw o2t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vd={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ej{constructor(t,n){this.data=t,this.contentType=n||null}}function S2t(e,t){switch(e){case Vd.RAW:return new Ej(wke(t));case Vd.BASE64:case Vd.BASE64URL:return new Ej(Eke(e,t));case Vd.DATA_URL:return new Ej(C2t(t),A2t(t))}throw lQ()}function wke(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function T2t(e){let t;try{t=decodeURIComponent(e)}catch{throw oA(Vd.DATA_URL,"Malformed data URL.")}return wke(t)}function Eke(e,t){switch(e){case Vd.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw oA(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Vd.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw oA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=x2t(t)}catch(i){throw i.message.includes("polyfill")?i:oA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class xke{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw oA(Vd.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=I2t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function C2t(e){const t=new xke(e);return t.base64?Eke(Vd.BASE64,t.rest):T2t(t.rest)}function A2t(e){return new xke(e).contentType}function I2t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kg{constructor(t,n){let r=0,i="";cfe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(cfe(this.data_)){const r=this.data_,i=E2t(r,t,n);return i===null?null:new kg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new kg(r,!0)}}static getBlob(...t){if(fQ()){const n=t.map(r=>r instanceof kg?r.data_:r);return new kg(w2t.apply(null,n))}else{const n=t.map(o=>cQ(o)?S2t(Vd.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new kg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dQ(e){let t;try{t=JSON.parse(e)}catch{return null}return d2t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k2t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function R2t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function Ske(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2t(e,t){return t}class Aa{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||N2t}}let AN=null;function D2t(e){return!cQ(e)||e.length<2?e:Ske(e)}function Tke(){if(AN)return AN;const e=[];e.push(new Aa("bucket")),e.push(new Aa("generation")),e.push(new Aa("metageneration")),e.push(new Aa("name","fullPath",!0));function t(s,o){return D2t(o)}const n=new Aa("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Aa("size");return i.xform=r,e.push(i),e.push(new Aa("timeCreated")),e.push(new Aa("updated")),e.push(new Aa("md5Hash",null,!0)),e.push(new Aa("cacheControl",null,!0)),e.push(new Aa("contentDisposition",null,!0)),e.push(new Aa("contentEncoding",null,!0)),e.push(new Aa("contentLanguage",null,!0)),e.push(new Aa("contentType",null,!0)),e.push(new Aa("metadata","customMetadata",!0)),AN=e,AN}function P2t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ba(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function O2t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return P2t(r,e),r}function Cke(e,t,n){const r=dQ(t);return r===null?null:O2t(e,r,n)}function $2t(e,t,n,r){const i=dQ(t);if(i===null||!cQ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=hk(d,n,r),p=_ke({alt:"media",token:l});return h+p})[0]}function M2t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ffe="prefixes",dfe="items";function L2t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ffe])for(const i of n[ffe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ba(t,s));r.prefixes.push(o)}if(n[dfe])for(const i of n[dfe]){const s=e._makeStorageReference(new Ba(t,i.name));r.items.push(s)}return r}function F2t(e,t,n){const r=dQ(n);return r===null?null:L2t(e,t,r)}class S6{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hQ(e){if(!e)throw lQ()}function j2t(e,t){function n(r,i){const s=Cke(e,i,t);return hQ(s!==null),s}return n}function B2t(e,t){function n(r,i){const s=F2t(e,t,i);return hQ(s!==null),s}return n}function U2t(e,t){function n(r,i){const s=Cke(e,i,t);return hQ(s!==null),$2t(s,i,e.host,e._protocol)}return n}function pQ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=QAt():i=XAt():n.getStatus()===402?i=KAt(e.bucket):n.getStatus()===403?i=JAt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function Ake(e){const t=pQ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=YAt(e.path)),s.serverResponse=i.serverResponse,s}return n}function z2t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=hk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new S6(a,u,B2t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=pQ(t),c}function V2t(e,t,n){const r=t.fullServerUrl(),i=hk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new S6(i,s,U2t(e,n),o);return a.errorHandler=Ake(t),a}function H2t(e,t){const n=t.fullServerUrl(),r=hk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new S6(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=Ake(t),a}function q2t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function W2t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=q2t(null,t)),r}function G2t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=W2t(t,r,i),c=M2t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=kg.getBlob(f,r,d);if(h===null)throw i2t();const p={name:l.fullPath},m=hk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new S6(m,g,j2t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=pQ(t),v}class Y2t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=c1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=c1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=c1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw uT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class K2t extends Y2t{initXhr(){this.xhr_.responseType="text"}}function T6(){return new K2t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(t,n){this._service=t,n instanceof Ba?this._location=n:this._location=Ba.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new z1(t,n)}get root(){const t=new Ba(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Ske(this._location.path)}get storage(){return this._service}get parent(){const t=k2t(this._location.path);if(t===null)return null;const n=new Ba(this._location.bucket,t);return new z1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw a2t(t)}}function X2t(e,t,n){e._throwIfRoot("uploadBytes");const r=G2t(e.storage,e._location,Tke(),new kg(t,!0),n);return e.storage.makeRequestWithTokens(r,T6).then(i=>({metadata:i,ref:e}))}function Q2t(e){const t={prefixes:[],items:[]};return Ike(e,t).then(()=>t)}async function Ike(e,t,n){const i=await J2t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await Ike(e,t,i.nextPageToken)}function J2t(e,t){t!=null&&typeof t.maxResults=="number"&&vz("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=z2t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,T6)}function Z2t(e){e._throwIfRoot("getDownloadURL");const t=V2t(e.storage,e._location,Tke());return e.storage.makeRequestWithTokens(t,T6).then(n=>{if(n===null)throw s2t();return n})}function eIt(e){e._throwIfRoot("deleteObject");const t=H2t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,T6)}function tIt(e,t){const n=R2t(e._location.path,t),r=new Ba(e._location.bucket,n);return new z1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nIt(e){return/^[A-Za-z]+:\/\//.test(e)}function rIt(e,t){return new z1(e,t)}function kke(e,t){if(e instanceof mQ){const n=e;if(n._bucket==null)throw r2t();const r=new z1(n,n._bucket);return t!=null?kke(r,t):r}else return t!==void 0?tIt(e,t):e}function iIt(e,t){if(t&&nIt(t)){if(e instanceof mQ)return rIt(e,t);throw yz("To use ref(service, url), the first argument must be a Storage instance.")}else return kke(e,t)}function hfe(e,t){const n=t==null?void 0:t[vke];return n==null?null:Ba.makeFromBucketSpec(n,e)}function sIt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:gSt(i,e.app.options.projectId))}class mQ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=yke,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WAt,this._maxUploadRetryTime=GAt,this._requests=new Set,i!=null?this._bucket=Ba.makeFromBucketSpec(i,this._host):this._bucket=hfe(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ba.makeFromBucketSpec(this._url,t):this._bucket=hfe(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){vz("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){vz("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new z1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new u2t(bke());{const o=b2t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const pfe="@firebase/storage",mfe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rke="storage";function xj(e,t,n){return e=ni(e),X2t(e,t,n)}function lT(e){return e=ni(e),Q2t(e)}function Sj(e){return e=ni(e),Z2t(e)}function gfe(e){return e=ni(e),eIt(e)}function qc(e,t){return e=ni(e),iIt(e,t)}function oIt(e=ZX(),t){e=ni(e);const r=nS(e,Rke).getImmediate({identifier:t}),i=mSt("storage");return i&&aIt(r,...i),r}function aIt(e,t,n,r={}){sIt(e,t,n,r)}function uIt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new mQ(n,r,i,t,Tb)}function lIt(){_m(new vh(Rke,uIt,"PUBLIC").setMultipleInstances(!0)),Nf(pfe,mfe,""),Nf(pfe,mfe,"esm2017")}lIt();var yfe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var f1,Nke;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,C){function A(){}A.prototype=C.prototype,S.D=C.prototype,S.prototype=new A,S.prototype.constructor=S,S.C=function(R,k,O){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return C.prototype[k].apply(R,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,C,A){A||(A=0);var R=Array(16);if(typeof C=="string")for(var k=0;16>k;++k)R[k]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(k=0;16>k;++k)R[k]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=S.g[0],A=S.g[1],k=S.g[2];var O=S.g[3],D=C+(O^A&(k^O))+R[0]+3614090360&4294967295;C=A+(D<<7&4294967295|D>>>25),D=O+(k^C&(A^k))+R[1]+3905402710&4294967295,O=C+(D<<12&4294967295|D>>>20),D=k+(A^O&(C^A))+R[2]+606105819&4294967295,k=O+(D<<17&4294967295|D>>>15),D=A+(C^k&(O^C))+R[3]+3250441966&4294967295,A=k+(D<<22&4294967295|D>>>10),D=C+(O^A&(k^O))+R[4]+4118548399&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(k^C&(A^k))+R[5]+1200080426&4294967295,O=C+(D<<12&4294967295|D>>>20),D=k+(A^O&(C^A))+R[6]+2821735955&4294967295,k=O+(D<<17&4294967295|D>>>15),D=A+(C^k&(O^C))+R[7]+4249261313&4294967295,A=k+(D<<22&4294967295|D>>>10),D=C+(O^A&(k^O))+R[8]+1770035416&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(k^C&(A^k))+R[9]+2336552879&4294967295,O=C+(D<<12&4294967295|D>>>20),D=k+(A^O&(C^A))+R[10]+4294925233&4294967295,k=O+(D<<17&4294967295|D>>>15),D=A+(C^k&(O^C))+R[11]+2304563134&4294967295,A=k+(D<<22&4294967295|D>>>10),D=C+(O^A&(k^O))+R[12]+1804603682&4294967295,C=A+(D<<7&4294967295|D>>>25),D=O+(k^C&(A^k))+R[13]+4254626195&4294967295,O=C+(D<<12&4294967295|D>>>20),D=k+(A^O&(C^A))+R[14]+2792965006&4294967295,k=O+(D<<17&4294967295|D>>>15),D=A+(C^k&(O^C))+R[15]+1236535329&4294967295,A=k+(D<<22&4294967295|D>>>10),D=C+(k^O&(A^k))+R[1]+4129170786&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^k&(C^A))+R[6]+3225465664&4294967295,O=C+(D<<9&4294967295|D>>>23),D=k+(C^A&(O^C))+R[11]+643717713&4294967295,k=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(k^O))+R[0]+3921069994&4294967295,A=k+(D<<20&4294967295|D>>>12),D=C+(k^O&(A^k))+R[5]+3593408605&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^k&(C^A))+R[10]+38016083&4294967295,O=C+(D<<9&4294967295|D>>>23),D=k+(C^A&(O^C))+R[15]+3634488961&4294967295,k=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(k^O))+R[4]+3889429448&4294967295,A=k+(D<<20&4294967295|D>>>12),D=C+(k^O&(A^k))+R[9]+568446438&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^k&(C^A))+R[14]+3275163606&4294967295,O=C+(D<<9&4294967295|D>>>23),D=k+(C^A&(O^C))+R[3]+4107603335&4294967295,k=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(k^O))+R[8]+1163531501&4294967295,A=k+(D<<20&4294967295|D>>>12),D=C+(k^O&(A^k))+R[13]+2850285829&4294967295,C=A+(D<<5&4294967295|D>>>27),D=O+(A^k&(C^A))+R[2]+4243563512&4294967295,O=C+(D<<9&4294967295|D>>>23),D=k+(C^A&(O^C))+R[7]+1735328473&4294967295,k=O+(D<<14&4294967295|D>>>18),D=A+(O^C&(k^O))+R[12]+2368359562&4294967295,A=k+(D<<20&4294967295|D>>>12),D=C+(A^k^O)+R[5]+4294588738&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^k)+R[8]+2272392833&4294967295,O=C+(D<<11&4294967295|D>>>21),D=k+(O^C^A)+R[11]+1839030562&4294967295,k=O+(D<<16&4294967295|D>>>16),D=A+(k^O^C)+R[14]+4259657740&4294967295,A=k+(D<<23&4294967295|D>>>9),D=C+(A^k^O)+R[1]+2763975236&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^k)+R[4]+1272893353&4294967295,O=C+(D<<11&4294967295|D>>>21),D=k+(O^C^A)+R[7]+4139469664&4294967295,k=O+(D<<16&4294967295|D>>>16),D=A+(k^O^C)+R[10]+3200236656&4294967295,A=k+(D<<23&4294967295|D>>>9),D=C+(A^k^O)+R[13]+681279174&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^k)+R[0]+3936430074&4294967295,O=C+(D<<11&4294967295|D>>>21),D=k+(O^C^A)+R[3]+3572445317&4294967295,k=O+(D<<16&4294967295|D>>>16),D=A+(k^O^C)+R[6]+76029189&4294967295,A=k+(D<<23&4294967295|D>>>9),D=C+(A^k^O)+R[9]+3654602809&4294967295,C=A+(D<<4&4294967295|D>>>28),D=O+(C^A^k)+R[12]+3873151461&4294967295,O=C+(D<<11&4294967295|D>>>21),D=k+(O^C^A)+R[15]+530742520&4294967295,k=O+(D<<16&4294967295|D>>>16),D=A+(k^O^C)+R[2]+3299628645&4294967295,A=k+(D<<23&4294967295|D>>>9),D=C+(k^(A|~O))+R[0]+4096336452&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~k))+R[7]+1126891415&4294967295,O=C+(D<<10&4294967295|D>>>22),D=k+(C^(O|~A))+R[14]+2878612391&4294967295,k=O+(D<<15&4294967295|D>>>17),D=A+(O^(k|~C))+R[5]+4237533241&4294967295,A=k+(D<<21&4294967295|D>>>11),D=C+(k^(A|~O))+R[12]+1700485571&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~k))+R[3]+2399980690&4294967295,O=C+(D<<10&4294967295|D>>>22),D=k+(C^(O|~A))+R[10]+4293915773&4294967295,k=O+(D<<15&4294967295|D>>>17),D=A+(O^(k|~C))+R[1]+2240044497&4294967295,A=k+(D<<21&4294967295|D>>>11),D=C+(k^(A|~O))+R[8]+1873313359&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~k))+R[15]+4264355552&4294967295,O=C+(D<<10&4294967295|D>>>22),D=k+(C^(O|~A))+R[6]+2734768916&4294967295,k=O+(D<<15&4294967295|D>>>17),D=A+(O^(k|~C))+R[13]+1309151649&4294967295,A=k+(D<<21&4294967295|D>>>11),D=C+(k^(A|~O))+R[4]+4149444226&4294967295,C=A+(D<<6&4294967295|D>>>26),D=O+(A^(C|~k))+R[11]+3174756917&4294967295,O=C+(D<<10&4294967295|D>>>22),D=k+(C^(O|~A))+R[2]+718787259&4294967295,k=O+(D<<15&4294967295|D>>>17),D=A+(O^(k|~C))+R[9]+3951481745&4294967295,S.g[0]=S.g[0]+C&4294967295,S.g[1]=S.g[1]+(k+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+k&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,C){C===void 0&&(C=S.length);for(var A=C-this.blockSize,R=this.B,k=this.h,O=0;O<C;){if(k==0)for(;O<=A;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<C;)if(R[k++]=S.charCodeAt(O++),k==this.blockSize){i(this,R),k=0;break}}else for(;O<C;)if(R[k++]=S[O++],k==this.blockSize){i(this,R),k=0;break}}this.h=k,this.o+=C},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var C=1;C<S.length-8;++C)S[C]=0;var A=8*this.o;for(C=S.length-8;C<S.length;++C)S[C]=A&255,A/=256;for(this.u(S),S=Array(16),C=A=0;4>C;++C)for(var R=0;32>R;R+=8)S[A++]=this.g[C]>>>R&255;return S};function s(S,C){var A=a;return Object.prototype.hasOwnProperty.call(A,S)?A[S]:A[S]=C(S)}function o(S,C){this.h=C;for(var A=[],R=!0,k=S.length-1;0<=k;k--){var O=S[k]|0;R&&O==C||(A[k]=O,R=!1)}this.g=A}var a={};function u(S){return-128<=S&&128>S?s(S,function(C){return new o([C|0],0>C?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var C=[],A=1,R=0;S>=A;R++)C[R]=S/A|0,A*=4294967296;return new o(C,0)}function c(S,C){if(S.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S.charAt(0)=="-")return g(c(S.substring(1),C));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),R=f,k=0;k<S.length;k+=8){var O=Math.min(8,S.length-k),D=parseInt(S.substring(k,k+O),C);8>O?(O=l(Math.pow(C,O)),R=R.j(O).add(l(D))):(R=R.j(A),R=R.add(l(D)))}return R}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,C=1,A=0;A<this.g.length;A++){var R=this.i(A);S+=(0<=R?R:4294967296+R)*C,C*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var C=l(Math.pow(S,6)),A=this,R="";;){var k=w(A,C).g;A=y(A,k.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(S);if(A=k,p(A))return O+R;for(;6>O.length;)O="0"+O;R=O+R}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var C=0;C<S.g.length;C++)if(S.g[C]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var C=S.g.length,A=[],R=0;R<C;R++)A[R]=~S.g[R];return new o(A,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],R=0,k=0;k<=C;k++){var O=R+(this.i(k)&65535)+(S.i(k)&65535),D=(O>>>16)+(this.i(k)>>>16)+(S.i(k)>>>16);R=D>>>16,O&=65535,D&=65535,A[k]=D<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(S,C){return S.add(g(C))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var C=this.g.length+S.g.length,A=[],R=0;R<2*C;R++)A[R]=0;for(R=0;R<this.g.length;R++)for(var k=0;k<S.g.length;k++){var O=this.i(R)>>>16,D=this.i(R)&65535,$=S.i(k)>>>16,L=S.i(k)&65535;A[2*R+2*k]+=D*L,v(A,2*R+2*k),A[2*R+2*k+1]+=O*L,v(A,2*R+2*k+1),A[2*R+2*k+1]+=D*$,v(A,2*R+2*k+1),A[2*R+2*k+2]+=O*$,v(A,2*R+2*k+2)}for(R=0;R<C;R++)A[R]=A[2*R+1]<<16|A[2*R];for(R=C;R<2*C;R++)A[R]=0;return new o(A,0)};function v(S,C){for(;(S[C]&65535)!=S[C];)S[C+1]+=S[C]>>>16,S[C]&=65535,C++}function b(S,C){this.g=S,this.h=C}function w(S,C){if(p(C))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return C=w(g(S),C),new b(g(C.g),g(C.h));if(m(C))return C=w(S,g(C)),new b(g(C.g),C.h);if(30<S.g.length){if(m(S)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,R=C;0>=R.l(S);)A=x(A),R=x(R);var k=T(A,1),O=T(R,1);for(R=T(R,2),A=T(A,2);!p(R);){var D=O.add(R);0>=D.l(S)&&(k=k.add(A),O=D),R=T(R,1),A=T(A,1)}return C=y(S,k.j(C)),new b(k,C)}for(k=f;0<=S.l(C);){for(A=Math.max(1,Math.floor(S.m()/C.m())),R=Math.ceil(Math.log(A)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),O=l(A),D=O.j(C);m(D)||0<D.l(S);)A-=R,O=l(A),D=O.j(C);p(O)&&(O=d),k=k.add(O),S=y(S,D)}return new b(k,S)}e.A=function(S){return w(this,S).h},e.and=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)&S.i(R);return new o(A,this.h&S.h)},e.or=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)|S.i(R);return new o(A,this.h|S.h)},e.xor=function(S){for(var C=Math.max(this.g.length,S.g.length),A=[],R=0;R<C;R++)A[R]=this.i(R)^S.i(R);return new o(A,this.h^S.h)};function x(S){for(var C=S.g.length+1,A=[],R=0;R<C;R++)A[R]=S.i(R)<<1|S.i(R-1)>>>31;return new o(A,S.h)}function T(S,C){var A=C>>5;C%=32;for(var R=S.g.length-A,k=[],O=0;O<R;O++)k[O]=0<C?S.i(O+A)>>>C|S.i(O+A+1)<<32-C:S.i(O+A);return new o(k,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Nke=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,f1=o}).apply(typeof yfe<"u"?yfe:typeof self<"u"?self:typeof window<"u"?window:{});var IN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dke,Pke,iC,Oke,QD,bz,$ke,Mke,Lke;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(E,M,z){return E==Array.prototype||E==Object.prototype||(E[M]=z.value),E};function n(E){E=[typeof globalThis=="object"&&globalThis,E,typeof window=="object"&&window,typeof self=="object"&&self,typeof IN=="object"&&IN];for(var M=0;M<E.length;++M){var z=E[M];if(z&&z.Math==Math)return z}throw Error("Cannot find global object")}var r=n(this);function i(E,M){if(M)e:{var z=r;E=E.split(".");for(var Q=0;Q<E.length-1;Q++){var be=E[Q];if(!(be in z))break e;z=z[be]}E=E[E.length-1],Q=z[E],M=M(Q),M!=Q&&M!=null&&t(z,E,{configurable:!0,writable:!0,value:M})}}function s(E,M){E instanceof String&&(E+="");var z=0,Q=!1,be={next:function(){if(!Q&&z<E.length){var Ne=z++;return{value:M(Ne,E[Ne]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return be[Symbol.iterator]=function(){return be},be}i("Array.prototype.values",function(E){return E||function(){return s(this,function(M,z){return z})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(E){var M=typeof E;return M=M!="object"?M:E?Array.isArray(E)?"array":M:"null",M=="array"||M=="object"&&typeof E.length=="number"}function l(E){var M=typeof E;return M=="object"&&E!=null||M=="function"}function c(E,M,z){return E.call.apply(E.bind,arguments)}function f(E,M,z){if(!E)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var be=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(be,Q),E.apply(M,be)}}return function(){return E.apply(M,arguments)}}function d(E,M,z){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(E,M){var z=Array.prototype.slice.call(arguments,1);return function(){var Q=z.slice();return Q.push.apply(Q,arguments),E.apply(this,Q)}}function p(E,M){function z(){}z.prototype=M.prototype,E.aa=M.prototype,E.prototype=new z,E.prototype.constructor=E,E.Qb=function(Q,be,Ne){for(var ct=Array(arguments.length-2),Hr=2;Hr<arguments.length;Hr++)ct[Hr-2]=arguments[Hr];return M.prototype[be].apply(Q,ct)}}function m(E){const M=E.length;if(0<M){const z=Array(M);for(let Q=0;Q<M;Q++)z[Q]=E[Q];return z}return[]}function g(E,M){for(let z=1;z<arguments.length;z++){const Q=arguments[z];if(u(Q)){const be=E.length||0,Ne=Q.length||0;E.length=be+Ne;for(let ct=0;ct<Ne;ct++)E[be+ct]=Q[ct]}else E.push(Q)}}class y{constructor(M,z){this.i=M,this.j=z,this.h=0,this.g=null}get(){let M;return 0<this.h?(this.h--,M=this.g,this.g=M.next,M.next=null):M=this.i(),M}}function v(E){return/^[\s\xa0]*$/.test(E)}function b(){var E=a.navigator;return E&&(E=E.userAgent)?E:""}function w(E){return w[" "](E),E}w[" "]=function(){};var x=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function T(E,M,z){for(const Q in E)M.call(z,E[Q],Q,E)}function S(E,M){for(const z in E)M.call(void 0,E[z],z,E)}function C(E){const M={};for(const z in E)M[z]=E[z];return M}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(E,M){let z,Q;for(let be=1;be<arguments.length;be++){Q=arguments[be];for(z in Q)E[z]=Q[z];for(let Ne=0;Ne<A.length;Ne++)z=A[Ne],Object.prototype.hasOwnProperty.call(Q,z)&&(E[z]=Q[z])}}function k(E){var M=1;E=E.split(":");const z=[];for(;0<M&&E.length;)z.push(E.shift()),M--;return E.length&&z.push(E.join(":")),z}function O(E){a.setTimeout(()=>{throw E},0)}function D(){var E=q;let M=null;return E.g&&(M=E.g,E.g=E.g.next,E.g||(E.h=null),M.next=null),M}class ${constructor(){this.h=this.g=null}add(M,z){const Q=L.get();Q.set(M,z),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var L=new y(()=>new F,E=>E.reset());class F{constructor(){this.next=this.g=this.h=null}set(M,z){this.h=M,this.g=z,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,q=new $,P=()=>{const E=a.Promise.resolve(void 0);B=()=>{E.then(V)}};var V=()=>{for(var E;E=D();){try{E.h.call(E.g)}catch(z){O(z)}var M=L;M.j(E),100>M.h&&(M.h++,E.next=M.g,M.g=E)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(E,M){this.type=E,this.g=this.target=M,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var E=!1,M=Object.defineProperty({},"passive",{get:function(){E=!0}});try{const z=()=>{};a.addEventListener("test",z,M),a.removeEventListener("test",z,M)}catch{}return E}();function G(E,M){if(j.call(this,E?E.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,E){var z=this.type=E.type,Q=E.changedTouches&&E.changedTouches.length?E.changedTouches[0]:null;if(this.target=E.target||E.srcElement,this.g=M,M=E.relatedTarget){if(x){e:{try{w(M.nodeName);var be=!0;break e}catch{}be=!1}be||(M=null)}}else z=="mouseover"?M=E.fromElement:z=="mouseout"&&(M=E.toElement);this.relatedTarget=M,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0),this.button=E.button,this.key=E.key||"",this.ctrlKey=E.ctrlKey,this.altKey=E.altKey,this.shiftKey=E.shiftKey,this.metaKey=E.metaKey,this.pointerId=E.pointerId||0,this.pointerType=typeof E.pointerType=="string"?E.pointerType:ne[E.pointerType]||"",this.state=E.state,this.i=E,E.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var E=this.i;E.preventDefault?E.preventDefault():E.returnValue=!1};var pe="closure_listenable_"+(1e6*Math.random()|0),fe=0;function de(E,M,z,Q,be){this.listener=E,this.proxy=null,this.src=M,this.type=z,this.capture=!!Q,this.ha=be,this.key=++fe,this.da=this.fa=!1}function ye(E){E.da=!0,E.listener=null,E.proxy=null,E.src=null,E.ha=null}function Ae(E){this.src=E,this.g={},this.h=0}Ae.prototype.add=function(E,M,z,Q,be){var Ne=E.toString();E=this.g[Ne],E||(E=this.g[Ne]=[],this.h++);var ct=rt(E,M,Q,be);return-1<ct?(M=E[ct],z||(M.fa=!1)):(M=new de(M,this.src,Ne,!!Q,be),M.fa=z,E.push(M)),M};function ve(E,M){var z=M.type;if(z in E.g){var Q=E.g[z],be=Array.prototype.indexOf.call(Q,M,void 0),Ne;(Ne=0<=be)&&Array.prototype.splice.call(Q,be,1),Ne&&(ye(M),E.g[z].length==0&&(delete E.g[z],E.h--))}}function rt(E,M,z,Q){for(var be=0;be<E.length;++be){var Ne=E[be];if(!Ne.da&&Ne.listener==M&&Ne.capture==!!z&&Ne.ha==Q)return be}return-1}var ze="closure_lm_"+(1e6*Math.random()|0),yt={};function ot(E,M,z,Q,be){if(Array.isArray(M)){for(var Ne=0;Ne<M.length;Ne++)ot(E,M[Ne],z,Q,be);return null}return z=vt(z),E&&E[pe]?E.K(M,z,l(Q)?!!Q.capture:!!Q,be):De(E,M,z,!1,Q,be)}function De(E,M,z,Q,be,Ne){if(!M)throw Error("Invalid event type");var ct=l(be)?!!be.capture:!!be,Hr=me(E);if(Hr||(E[ze]=Hr=new Ae(E)),z=Hr.add(M,z,Q,ct,Ne),z.proxy)return z;if(Q=Me(),z.proxy=Q,Q.src=E,Q.listener=z,E.addEventListener)H||(be=ct),be===void 0&&(be=!1),E.addEventListener(M.toString(),Q,be);else if(E.attachEvent)E.attachEvent(Pt(M.toString()),Q);else if(E.addListener&&E.removeListener)E.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return z}function Me(){function E(z){return M.call(E.src,E.listener,z)}const M=qe;return E}function Ye(E,M,z,Q,be){if(Array.isArray(M))for(var Ne=0;Ne<M.length;Ne++)Ye(E,M[Ne],z,Q,be);else Q=l(Q)?!!Q.capture:!!Q,z=vt(z),E&&E[pe]?(E=E.i,M=String(M).toString(),M in E.g&&(Ne=E.g[M],z=rt(Ne,z,Q,be),-1<z&&(ye(Ne[z]),Array.prototype.splice.call(Ne,z,1),Ne.length==0&&(delete E.g[M],E.h--)))):E&&(E=me(E))&&(M=E.g[M.toString()],E=-1,M&&(E=rt(M,z,Q,be)),(z=-1<E?M[E]:null)&&pt(z))}function pt(E){if(typeof E!="number"&&E&&!E.da){var M=E.src;if(M&&M[pe])ve(M.i,E);else{var z=E.type,Q=E.proxy;M.removeEventListener?M.removeEventListener(z,Q,E.capture):M.detachEvent?M.detachEvent(Pt(z),Q):M.addListener&&M.removeListener&&M.removeListener(Q),(z=me(M))?(ve(z,E),z.h==0&&(z.src=null,M[ze]=null)):ye(E)}}}function Pt(E){return E in yt?yt[E]:yt[E]="on"+E}function qe(E,M){if(E.da)E=!0;else{M=new G(M,this);var z=E.listener,Q=E.ha||E.src;E.fa&&pt(E),E=z.call(Q,M)}return E}function me(E){return E=E[ze],E instanceof Ae?E:null}var ft="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(E){return typeof E=="function"?E:(E[ft]||(E[ft]=function(M){return E.handleEvent(M)}),E[ft])}function he(){W.call(this),this.i=new Ae(this),this.M=this,this.F=null}p(he,W),he.prototype[pe]=!0,he.prototype.removeEventListener=function(E,M,z,Q){Ye(this,E,M,z,Q)};function Ce(E,M){var z,Q=E.F;if(Q)for(z=[];Q;Q=Q.F)z.push(Q);if(E=E.M,Q=M.type||M,typeof M=="string")M=new j(M,E);else if(M instanceof j)M.target=M.target||E;else{var be=M;M=new j(Q,E),R(M,be)}if(be=!0,z)for(var Ne=z.length-1;0<=Ne;Ne--){var ct=M.g=z[Ne];be=Ve(ct,Q,!0,M)&&be}if(ct=M.g=E,be=Ve(ct,Q,!0,M)&&be,be=Ve(ct,Q,!1,M)&&be,z)for(Ne=0;Ne<z.length;Ne++)ct=M.g=z[Ne],be=Ve(ct,Q,!1,M)&&be}he.prototype.N=function(){if(he.aa.N.call(this),this.i){var E=this.i,M;for(M in E.g){for(var z=E.g[M],Q=0;Q<z.length;Q++)ye(z[Q]);delete E.g[M],E.h--}}this.F=null},he.prototype.K=function(E,M,z,Q){return this.i.add(String(E),M,!1,z,Q)},he.prototype.L=function(E,M,z,Q){return this.i.add(String(E),M,!0,z,Q)};function Ve(E,M,z,Q){if(M=E.i.g[String(M)],!M)return!0;M=M.concat();for(var be=!0,Ne=0;Ne<M.length;++Ne){var ct=M[Ne];if(ct&&!ct.da&&ct.capture==z){var Hr=ct.listener,lo=ct.ha||ct.src;ct.fa&&ve(E.i,ct),be=Hr.call(lo,Q)!==!1&&be}}return be&&!Q.defaultPrevented}function ut(E,M,z){if(typeof E=="function")z&&(E=d(E,z));else if(E&&typeof E.handleEvent=="function")E=d(E.handleEvent,E);else throw Error("Invalid listener argument");return 2147483647<Number(M)?-1:a.setTimeout(E,M||0)}function _t(E){E.g=ut(()=>{E.g=null,E.i&&(E.i=!1,_t(E))},E.l);const M=E.h;E.h=null,E.m.apply(null,M)}class On extends W{constructor(M,z){super(),this.m=M,this.l=z,this.h=null,this.i=!1,this.g=null}j(M){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sr(E){W.call(this),this.h=E,this.g={}}p(Sr,W);var $n=[];function ur(E){T(E.g,function(M,z){this.g.hasOwnProperty(z)&&pt(M)},E),E.g={}}Sr.prototype.N=function(){Sr.aa.N.call(this),ur(this)},Sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var hn=a.JSON.stringify,xn=a.JSON.parse,er=class{stringify(E){return a.JSON.stringify(E,void 0)}parse(E){return a.JSON.parse(E,void 0)}};function tr(){}tr.prototype.h=null;function Lo(E){return E.h||(E.h=E.i())}function Di(){}var Sn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Pi(){j.call(this,"d")}p(Pi,j);function Tr(){j.call(this,"c")}p(Tr,j);var cs={},Jh=null;function Zu(){return Jh=Jh||new he}cs.La="serverreachability";function id(E){j.call(this,cs.La,E)}p(id,j);function _r(E){const M=Zu();Ce(M,new id(M))}cs.STAT_EVENT="statevent";function xi(E,M){j.call(this,cs.STAT_EVENT,E),this.stat=M}p(xi,j);function Kr(E){const M=Zu();Ce(M,new xi(M,E))}cs.Ma="timingevent";function ru(E,M){j.call(this,cs.Ma,E),this.size=M}p(ru,j);function Ea(E,M){if(typeof E!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){E()},M)}function xa(){this.g=!0}xa.prototype.xa=function(){this.g=!1};function oe(E,M,z,Q,be,Ne){E.info(function(){if(E.g)if(Ne)for(var ct="",Hr=Ne.split("&"),lo=0;lo<Hr.length;lo++){var lr=Hr[lo].split("=");if(1<lr.length){var Uo=lr[0];lr=lr[1];var zo=Uo.split("_");ct=2<=zo.length&&zo[1]=="type"?ct+(Uo+"="+lr+"&"):ct+(Uo+"=redacted&")}}else ct=null;else ct=Ne;return"XMLHTTP REQ ("+Q+") [attempt "+be+"]: "+M+`
`+z+`
`+ct})}function ee(E,M,z,Q,be,Ne,ct){E.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+be+"]: "+M+`
`+z+`
`+Ne+" "+ct})}function ae(E,M,z,Q){E.info(function(){return"XMLHTTP TEXT ("+M+"): "+xe(E,z)+(Q?" "+Q:"")})}function Se(E,M){E.info(function(){return"TIMEOUT: "+M})}xa.prototype.info=function(){};function xe(E,M){if(!E.g)return M;if(!M)return null;try{var z=JSON.parse(M);if(z){for(E=0;E<z.length;E++)if(Array.isArray(z[E])){var Q=z[E];if(!(2>Q.length)){var be=Q[1];if(Array.isArray(be)&&!(1>be.length)){var Ne=be[0];if(Ne!="noop"&&Ne!="stop"&&Ne!="close")for(var ct=1;ct<be.length;ct++)be[ct]=""}}}}return hn(z)}catch{return M}}var st={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Vt;function Nn(){}p(Nn,tr),Nn.prototype.g=function(){return new XMLHttpRequest},Nn.prototype.i=function(){return{}},Vt=new Nn;function Mn(E,M,z,Q){this.j=E,this.i=M,this.l=z,this.R=Q||1,this.U=new Sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fn}function fn(){this.i=null,this.g="",this.h=!1}var nr={},Cr={};function zt(E,M,z){E.L=1,E.v=Ln(We(M)),E.m=z,E.P=!0,rr(E,null)}function rr(E,M){E.F=Date.now(),Si(E),E.A=We(E.v);var z=E.A,Q=E.R;Array.isArray(Q)||(Q=[String(Q)]),lR(z.i,"t",Q),E.C=0,z=E.j.J,E.h=new fn,E.g=Jne(E.j,z?M:null,!E.m),0<E.O&&(E.M=new On(d(E.Y,E,E.g),E.O)),M=E.U,z=E.g,Q=E.ca;var be="readystatechange";Array.isArray(be)||(be&&($n[0]=be.toString()),be=$n);for(var Ne=0;Ne<be.length;Ne++){var ct=ot(z,be[Ne],Q||M.handleEvent,!1,M.h||M);if(!ct)break;M.g[ct.key]=ct}M=E.H?C(E.H):{},E.m?(E.u||(E.u="POST"),M["Content-Type"]="application/x-www-form-urlencoded",E.g.ea(E.A,E.u,E.m,M)):(E.u="GET",E.g.ea(E.A,E.u,null,M)),_r(),oe(E.i,E.u,E.A,E.l,E.R,E.m)}Mn.prototype.ca=function(E){E=E.target;const M=this.M;M&&Xi(E)==3?M.j():this.Y(E)},Mn.prototype.Y=function(E){try{if(E==this.g)e:{const zo=Xi(this.g);var M=this.g.Ba();const Yb=this.g.Z();if(!(3>zo)&&(zo!=3||this.g&&(this.h.h||this.g.oa()||Bo(this.g)))){this.J||zo!=4||M==7||(M==8||0>=Yb?_r(3):_r(2)),Xr(this);var z=this.g.Z();this.X=z;t:if(Ur(this)){var Q=Bo(this.g);E="";var be=Q.length,Ne=Xi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Oi(this),uo(this);var ct="";break t}this.h.i=new a.TextDecoder}for(M=0;M<be;M++)this.h.h=!0,E+=this.h.i.decode(Q[M],{stream:!(Ne&&M==be-1)});Q.length=0,this.h.g+=E,this.C=0,ct=this.h.g}else ct=this.g.oa();if(this.o=z==200,ee(this.i,this.u,this.A,this.l,this.R,zo,z),this.o){if(this.T&&!this.K){t:{if(this.g){var Hr,lo=this.g;if((Hr=lo.g?lo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Hr)){var lr=Hr;break t}}lr=null}if(z=lr)ae(this.i,this.l,z,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,$i(this,z);else{this.o=!1,this.s=3,Kr(12),Oi(this),uo(this);break e}}if(this.P){z=!0;let Uc;for(;!this.J&&this.C<ct.length;)if(Uc=Xn(this,ct),Uc==Cr){zo==4&&(this.s=4,Kr(14),z=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Uc==nr){this.s=4,Kr(15),ae(this.i,this.l,ct,"[Invalid Chunk]"),z=!1;break}else ae(this.i,this.l,Uc,null),$i(this,Uc);if(Ur(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),zo!=4||ct.length!=0||this.h.h||(this.s=1,Kr(16),z=!1),this.o=this.o&&z,!z)ae(this.i,this.l,ct,"[Invalid Chunked Response]"),Oi(this),uo(this);else if(0<ct.length&&!this.W){this.W=!0;var Uo=this.j;Uo.g==this&&Uo.ba&&!Uo.M&&(Uo.j.info("Great, no buffering proxy detected. Bytes received: "+ct.length),qF(Uo),Uo.M=!0,Kr(11))}}else ae(this.i,this.l,ct,null),$i(this,ct);zo==4&&Oi(this),this.o&&!this.J&&(zo==4?Yne(this.j,this):(this.o=!1,Si(this)))}else Hy(this.g),z==400&&0<ct.indexOf("Unknown SID")?(this.s=3,Kr(12)):(this.s=0,Kr(13)),Oi(this),uo(this)}}}catch{}finally{}};function Ur(E){return E.g?E.u=="GET"&&E.L!=2&&E.j.Ca:!1}function Xn(E,M){var z=E.C,Q=M.indexOf(`
`,z);return Q==-1?Cr:(z=Number(M.substring(z,Q)),isNaN(z)?nr:(Q+=1,Q+z>M.length?Cr:(M=M.slice(Q,Q+z),E.C=Q+z,M)))}Mn.prototype.cancel=function(){this.J=!0,Oi(this)};function Si(E){E.S=Date.now()+E.I,Ls(E,E.I)}function Ls(E,M){if(E.B!=null)throw Error("WatchDog timer not null");E.B=Ea(d(E.ba,E),M)}function Xr(E){E.B&&(a.clearTimeout(E.B),E.B=null)}Mn.prototype.ba=function(){this.B=null;const E=Date.now();0<=E-this.S?(Se(this.i,this.A),this.L!=2&&(_r(),Kr(17)),Oi(this),this.s=2,uo(this)):Ls(this,this.S-E)};function uo(E){E.j.G==0||E.J||Yne(E.j,E)}function Oi(E){Xr(E);var M=E.M;M&&typeof M.ma=="function"&&M.ma(),E.M=null,ur(E.U),E.g&&(M=E.g,E.g=null,M.abort(),M.ma())}function $i(E,M){try{var z=E.j;if(z.G!=0&&(z.g==E||sd(z.h,E))){if(!E.K&&sd(z.h,E)&&z.G==3){try{var Q=z.Da.g.parse(M)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var be=Q;if(be[0]==0){e:if(!z.u){if(z.g)if(z.g.F+3e3<E.F)gR(z),pR(z);else break e;HF(z),Kr(18)}}else z.za=be[1],0<z.za-z.T&&37500>be[2]&&z.F&&z.v==0&&!z.C&&(z.C=Ea(d(z.Za,z),6e3));if(1>=Hl(z.h)&&z.ca){try{z.ca()}catch{}z.ca=void 0}}else qy(z,11)}else if((E.K||z.g==E)&&gR(z),!v(M))for(be=z.Da.g.parse(M),M=0;M<be.length;M++){let lr=be[M];if(z.T=lr[0],lr=lr[1],z.G==2)if(lr[0]=="c"){z.K=lr[1],z.ia=lr[2];const Uo=lr[3];Uo!=null&&(z.la=Uo,z.j.info("VER="+z.la));const zo=lr[4];zo!=null&&(z.Aa=zo,z.j.info("SVER="+z.Aa));const Yb=lr[5];Yb!=null&&typeof Yb=="number"&&0<Yb&&(Q=1.5*Yb,z.L=Q,z.j.info("backChannelRequestTimeoutMs_="+Q)),Q=z;const Uc=E.g;if(Uc){const vR=Uc.g?Uc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(vR){var Ne=Q.h;Ne.g||vR.indexOf("spdy")==-1&&vR.indexOf("quic")==-1&&vR.indexOf("h2")==-1||(Ne.j=Ne.l,Ne.g=new Set,Ne.h&&(Y(Ne,Ne.h),Ne.h=null))}if(Q.D){const WF=Uc.g?Uc.g.getResponseHeader("X-HTTP-Session-Id"):null;WF&&(Q.ya=WF,Nt(Q.I,Q.D,WF))}}z.G=3,z.l&&z.l.ua(),z.ba&&(z.R=Date.now()-E.F,z.j.info("Handshake RTT: "+z.R+"ms")),Q=z;var ct=E;if(Q.qa=Qne(Q,Q.J?Q.ia:null,Q.W),ct.K){se(Q.h,ct);var Hr=ct,lo=Q.L;lo&&(Hr.I=lo),Hr.B&&(Xr(Hr),Si(Hr)),Q.g=ct}else Wne(Q);0<z.i.length&&mR(z)}else lr[0]!="stop"&&lr[0]!="close"||qy(z,7);else z.G==3&&(lr[0]=="stop"||lr[0]=="close"?lr[0]=="stop"?qy(z,7):Wb(z):lr[0]!="noop"&&z.l&&z.l.ta(lr),z.v=0)}}_r(4)}catch{}}var Fo=class{constructor(E,M){this.g=E,this.map=M}};function Sa(E){this.l=E||10,a.PerformanceNavigationTiming?(E=a.performance.getEntriesByType("navigation"),E=0<E.length&&(E[0].nextHopProtocol=="hq"||E[0].nextHopProtocol=="h2")):E=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=E?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Fs(E){return E.h?!0:E.g?E.g.size>=E.j:!1}function Hl(E){return E.h?1:E.g?E.g.size:0}function sd(E,M){return E.h?E.h==M:E.g?E.g.has(M):!1}function Y(E,M){E.g?E.g.add(M):E.h=M}function se(E,M){E.h&&E.h==M?E.h=null:E.g&&E.g.has(M)&&E.g.delete(M)}Sa.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const E of this.g.values())E.cancel();this.g.clear()}};function Z(E){if(E.h!=null)return E.i.concat(E.h.D);if(E.g!=null&&E.g.size!==0){let M=E.i;for(const z of E.g.values())M=M.concat(z.D);return M}return m(E.i)}function ce(E){if(E.V&&typeof E.V=="function")return E.V();if(typeof Map<"u"&&E instanceof Map||typeof Set<"u"&&E instanceof Set)return Array.from(E.values());if(typeof E=="string")return E.split("");if(u(E)){for(var M=[],z=E.length,Q=0;Q<z;Q++)M.push(E[Q]);return M}M=[],z=0;for(Q in E)M[z++]=E[Q];return M}function ge(E){if(E.na&&typeof E.na=="function")return E.na();if(!E.V||typeof E.V!="function"){if(typeof Map<"u"&&E instanceof Map)return Array.from(E.keys());if(!(typeof Set<"u"&&E instanceof Set)){if(u(E)||typeof E=="string"){var M=[];E=E.length;for(var z=0;z<E;z++)M.push(z);return M}M=[],z=0;for(const Q in E)M[z++]=Q;return M}}}function le(E,M){if(E.forEach&&typeof E.forEach=="function")E.forEach(M,void 0);else if(u(E)||typeof E=="string")Array.prototype.forEach.call(E,M,void 0);else for(var z=ge(E),Q=ce(E),be=Q.length,Ne=0;Ne<be;Ne++)M.call(void 0,Q[Ne],z&&z[Ne],E)}var Pe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ue(E,M){if(E){E=E.split("&");for(var z=0;z<E.length;z++){var Q=E[z].indexOf("="),be=null;if(0<=Q){var Ne=E[z].substring(0,Q);be=E[z].substring(Q+1)}else Ne=E[z];M(Ne,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function He(E){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,E instanceof He){this.h=E.h,it(this,E.j),this.o=E.o,this.g=E.g,Et(this,E.s),this.l=E.l;var M=E.i,z=new ql;z.i=M.i,M.g&&(z.g=new Map(M.g),z.h=M.h),dn(this,z),this.m=E.m}else E&&(M=String(E).match(Pe))?(this.h=!1,it(this,M[1]||"",!0),this.o=Ar(M[2]||""),this.g=Ar(M[3]||"",!0),Et(this,M[4]),this.l=Ar(M[5]||"",!0),dn(this,M[6]||"",!0),this.m=Ar(M[7]||"")):(this.h=!1,this.i=new ql(null,this.h))}He.prototype.toString=function(){var E=[],M=this.j;M&&E.push(Ir(M,od,!0),":");var z=this.g;return(z||M=="file")&&(E.push("//"),(M=this.o)&&E.push(Ir(M,od,!0),"@"),E.push(encodeURIComponent(String(z)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),z=this.s,z!=null&&E.push(":",String(z))),(z=this.l)&&(this.g&&z.charAt(0)!="/"&&E.push("/"),E.push(Ir(z,z.charAt(0)=="/"?RS:Zh,!0))),(z=this.i.toString())&&E.push("?",z),(z=this.m)&&E.push("#",Ir(z,uR)),E.join("")};function We(E){return new He(E)}function it(E,M,z){E.j=z?Ar(M,!0):M,E.j&&(E.j=E.j.replace(/:$/,""))}function Et(E,M){if(M){if(M=Number(M),isNaN(M)||0>M)throw Error("Bad port number "+M);E.s=M}else E.s=null}function dn(E,M,z){M instanceof ql?(E.i=M,NS(E.i,E.h)):(z||(M=Ir(M,By)),E.i=new ql(M,E.h))}function Nt(E,M,z){E.i.set(M,z)}function Ln(E){return Nt(E,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),E}function Ar(E,M){return E?M?decodeURI(E.replace(/%25/g,"%2525")):decodeURIComponent(E):""}function Ir(E,M,z){return typeof E=="string"?(E=encodeURI(E).replace(M,jo),z&&(E=E.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E):null}function jo(E){return E=E.charCodeAt(0),"%"+(E>>4&15).toString(16)+(E&15).toString(16)}var od=/[#\/\?@]/g,Zh=/[#\?:]/g,RS=/[#\?]/g,By=/[#\?@]/g,uR=/#/g;function ql(E,M){this.h=this.g=null,this.i=E||null,this.j=!!M}function iu(E){E.g||(E.g=new Map,E.h=0,E.i&&Ue(E.i,function(M,z){E.add(decodeURIComponent(M.replace(/\+/g," ")),z)}))}e=ql.prototype,e.add=function(E,M){iu(this),this.i=null,E=tp(this,E);var z=this.g.get(E);return z||this.g.set(E,z=[]),z.push(M),this.h+=1,this};function ep(E,M){iu(E),M=tp(E,M),E.g.has(M)&&(E.i=null,E.h-=E.g.get(M).length,E.g.delete(M))}function Hb(E,M){return iu(E),M=tp(E,M),E.g.has(M)}e.forEach=function(E,M){iu(this),this.g.forEach(function(z,Q){z.forEach(function(be){E.call(M,be,Q,this)},this)},this)},e.na=function(){iu(this);const E=Array.from(this.g.values()),M=Array.from(this.g.keys()),z=[];for(let Q=0;Q<M.length;Q++){const be=E[Q];for(let Ne=0;Ne<be.length;Ne++)z.push(M[Q])}return z},e.V=function(E){iu(this);let M=[];if(typeof E=="string")Hb(this,E)&&(M=M.concat(this.g.get(tp(this,E))));else{E=Array.from(this.g.values());for(let z=0;z<E.length;z++)M=M.concat(E[z])}return M},e.set=function(E,M){return iu(this),this.i=null,E=tp(this,E),Hb(this,E)&&(this.h-=this.g.get(E).length),this.g.set(E,[M]),this.h+=1,this},e.get=function(E,M){return E?(E=this.V(E),0<E.length?String(E[0]):M):M};function lR(E,M,z){ep(E,M),0<z.length&&(E.i=null,E.g.set(tp(E,M),m(z)),E.h+=z.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const E=[],M=Array.from(this.g.keys());for(var z=0;z<M.length;z++){var Q=M[z];const Ne=encodeURIComponent(String(Q)),ct=this.V(Q);for(Q=0;Q<ct.length;Q++){var be=Ne;ct[Q]!==""&&(be+="="+encodeURIComponent(String(ct[Q]))),E.push(be)}}return this.i=E.join("&")};function tp(E,M){return M=String(M),E.j&&(M=M.toLowerCase()),M}function NS(E,M){M&&!E.j&&(iu(E),E.i=null,E.g.forEach(function(z,Q){var be=Q.toLowerCase();Q!=be&&(ep(this,Q),lR(this,be,z))},E)),E.j=M}function cR(E,M){const z=new xa;if(a.Image){const Q=new Image;Q.onload=h(su,z,"TestLoadImage: loaded",!0,M,Q),Q.onerror=h(su,z,"TestLoadImage: error",!1,M,Q),Q.onabort=h(su,z,"TestLoadImage: abort",!1,M,Q),Q.ontimeout=h(su,z,"TestLoadImage: timeout",!1,M,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=E}else M(!1)}function np(E,M){const z=new xa,Q=new AbortController,be=setTimeout(()=>{Q.abort(),su(z,"TestPingServer: timeout",!1,M)},1e4);fetch(E,{signal:Q.signal}).then(Ne=>{clearTimeout(be),Ne.ok?su(z,"TestPingServer: ok",!0,M):su(z,"TestPingServer: server error",!1,M)}).catch(()=>{clearTimeout(be),su(z,"TestPingServer: error",!1,M)})}function su(E,M,z,Q,be){try{be&&(be.onload=null,be.onerror=null,be.onabort=null,be.ontimeout=null),Q(z)}catch{}}function VF(){this.g=new er}function fR(E,M,z){const Q=z||"";try{le(E,function(be,Ne){let ct=be;l(be)&&(ct=hn(be)),M.push(Q+Ne+"="+encodeURIComponent(ct))})}catch(be){throw M.push(Q+"type="+encodeURIComponent("_badmap")),be}}function Uy(E){this.l=E.Ub||null,this.j=E.eb||!1}p(Uy,tr),Uy.prototype.g=function(){return new zy(this.l,this.j)},Uy.prototype.i=function(E){return function(){return E}}({});function zy(E,M){he.call(this),this.D=E,this.o=M,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(zy,he),e=zy.prototype,e.open=function(E,M){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=E,this.A=M,this.readyState=1,Jm(this)},e.send=function(E){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const M={headers:this.u,method:this.B,credentials:this.m,cache:void 0};E&&(M.body=E),(this.D||a).fetch(new Request(this.A,M)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vy(this)),this.readyState=0},e.Sa=function(E){if(this.g&&(this.l=E,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=E.headers,this.readyState=2,Jm(this)),this.g&&(this.readyState=3,Jm(this),this.g)))if(this.responseType==="arraybuffer")E.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in E){if(this.j=E.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;dR(this)}else E.text().then(this.Ra.bind(this),this.ga.bind(this))};function dR(E){E.j.read().then(E.Pa.bind(E)).catch(E.ga.bind(E))}e.Pa=function(E){if(this.g){if(this.o&&E.value)this.response.push(E.value);else if(!this.o){var M=E.value?E.value:new Uint8Array(0);(M=this.v.decode(M,{stream:!E.done}))&&(this.response=this.responseText+=M)}E.done?Vy(this):Jm(this),this.readyState==3&&dR(this)}},e.Ra=function(E){this.g&&(this.response=this.responseText=E,Vy(this))},e.Qa=function(E){this.g&&(this.response=E,Vy(this))},e.ga=function(){this.g&&Vy(this)};function Vy(E){E.readyState=4,E.l=null,E.j=null,E.v=null,Jm(E)}e.setRequestHeader=function(E,M){this.u.append(E,M)},e.getResponseHeader=function(E){return this.h&&this.h.get(E.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const E=[],M=this.h.entries();for(var z=M.next();!z.done;)z=z.value,E.push(z[0]+": "+z[1]),z=M.next();return E.join(`\r
`)};function Jm(E){E.onreadystatechange&&E.onreadystatechange.call(E)}Object.defineProperty(zy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(E){this.m=E?"include":"same-origin"}});function hR(E){let M="";return T(E,function(z,Q){M+=Q,M+=":",M+=z,M+=`\r
`}),M}function te(E,M,z){e:{for(Q in z){var Q=!1;break e}Q=!0}Q||(z=hR(z),typeof E=="string"?z!=null&&encodeURIComponent(String(z)):Nt(E,M,z))}function ue(E){he.call(this),this.headers=new Map,this.o=E||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,he);var Ie=/^https?$/i,At=["POST","PUT"];e=ue.prototype,e.Ha=function(E){this.J=E},e.ea=function(E,M,z,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+E);M=M?M.toUpperCase():"GET",this.D=E,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Vt.g(),this.v=this.o?Lo(this.o):Lo(Vt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(M,String(E),!0),this.B=!1}catch(Ne){Dn(this,Ne);return}if(E=z||"",z=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var be in Q)z.set(be,Q[be]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Ne of Q.keys())z.set(Ne,Q.get(Ne));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(z.keys()).find(Ne=>Ne.toLowerCase()=="content-type"),be=a.FormData&&E instanceof a.FormData,!(0<=Array.prototype.indexOf.call(At,M,void 0))||Q||be||z.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Ne,ct]of z)this.g.setRequestHeader(Ne,ct);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vr(this),this.u=!0,this.g.send(E),this.u=!1}catch(Ne){Dn(this,Ne)}};function Dn(E,M){E.h=!1,E.g&&(E.j=!0,E.g.abort(),E.j=!1),E.l=M,E.m=5,wr(E),Fn(E)}function wr(E){E.A||(E.A=!0,Ce(E,"complete"),Ce(E,"error"))}e.abort=function(E){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=E||7,Ce(this,"complete"),Ce(this,"abort"),Fn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Fn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?zr(this):this.bb())},e.bb=function(){zr(this)};function zr(E){if(E.h&&typeof o<"u"&&(!E.v[1]||Xi(E)!=4||E.Z()!=2)){if(E.u&&Xi(E)==4)ut(E.Ea,0,E);else if(Ce(E,"readystatechange"),Xi(E)==4){E.h=!1;try{const ct=E.Z();e:switch(ct){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var M=!0;break e;default:M=!1}var z;if(!(z=M)){var Q;if(Q=ct===0){var be=String(E.D).match(Pe)[1]||null;!be&&a.self&&a.self.location&&(be=a.self.location.protocol.slice(0,-1)),Q=!Ie.test(be?be.toLowerCase():"")}z=Q}if(z)Ce(E,"complete"),Ce(E,"success");else{E.m=6;try{var Ne=2<Xi(E)?E.g.statusText:""}catch{Ne=""}E.l=Ne+" ["+E.Z()+"]",wr(E)}}finally{Fn(E)}}}}function Fn(E,M){if(E.g){Vr(E);const z=E.g,Q=E.v[0]?()=>{}:null;E.g=null,E.v=null,M||Ce(E,"ready");try{z.onreadystatechange=Q}catch{}}}function Vr(E){E.I&&(a.clearTimeout(E.I),E.I=null)}e.isActive=function(){return!!this.g};function Xi(E){return E.g?E.g.readyState:0}e.Z=function(){try{return 2<Xi(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(E){if(this.g){var M=this.g.responseText;return E&&M.indexOf(E)==0&&(M=M.substring(E.length)),xn(M)}};function Bo(E){try{if(!E.g)return null;if("response"in E.g)return E.g.response;switch(E.H){case"":case"text":return E.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in E.g)return E.g.mozResponseArrayBuffer}return null}catch{return null}}function Hy(E){const M={};E=(E.g&&2<=Xi(E)&&E.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<E.length;Q++){if(v(E[Q]))continue;var z=k(E[Q]);const be=z[0];if(z=z[1],typeof z!="string")continue;z=z.trim();const Ne=M[be]||[];M[be]=Ne,Ne.push(z)}S(M,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rp(E,M,z){return z&&z.internalChannelParams&&z.internalChannelParams[E]||M}function qb(E){this.Aa=0,this.i=[],this.j=new xa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rp("failFast",!1,E),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rp("baseRetryDelayMs",5e3,E),this.cb=rp("retryDelaySeedMs",1e4,E),this.Wa=rp("forwardChannelMaxRetries",2,E),this.wa=rp("forwardChannelRequestTimeoutMs",2e4,E),this.pa=E&&E.xmlHttpFactory||void 0,this.Xa=E&&E.Tb||void 0,this.Ca=E&&E.useFetchStreams||!1,this.L=void 0,this.J=E&&E.supportsCrossDomainXhr||!1,this.K="",this.h=new Sa(E&&E.concurrentRequestLimit),this.Da=new VF,this.P=E&&E.fastHandshake||!1,this.O=E&&E.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=E&&E.Rb||!1,E&&E.xa&&this.j.xa(),E&&E.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&E&&E.detectBufferingProxy||!1,this.ja=void 0,E&&E.longPollingTimeout&&0<E.longPollingTimeout&&(this.ja=E.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=qb.prototype,e.la=8,e.G=1,e.connect=function(E,M,z,Q){Kr(0),this.W=E,this.H=M||{},z&&Q!==void 0&&(this.H.OSID=z,this.H.OAID=Q),this.F=this.X,this.I=Qne(this,null,this.W),mR(this)};function Wb(E){if(Vne(E),E.G==3){var M=E.U++,z=We(E.I);if(Nt(z,"SID",E.K),Nt(z,"RID",M),Nt(z,"TYPE","terminate"),DS(E,z),M=new Mn(E,E.j,M),M.L=2,M.v=Ln(We(z)),z=!1,a.navigator&&a.navigator.sendBeacon)try{z=a.navigator.sendBeacon(M.v.toString(),"")}catch{}!z&&a.Image&&(new Image().src=M.v,z=!0),z||(M.g=Jne(M.j,null),M.g.ea(M.v)),M.F=Date.now(),Si(M)}Xne(E)}function pR(E){E.g&&(qF(E),E.g.cancel(),E.g=null)}function Vne(E){pR(E),E.u&&(a.clearTimeout(E.u),E.u=null),gR(E),E.h.cancel(),E.s&&(typeof E.s=="number"&&a.clearTimeout(E.s),E.s=null)}function mR(E){if(!Fs(E.h)&&!E.s){E.s=!0;var M=E.Ga;B||P(),U||(B(),U=!0),q.add(M,E),E.B=0}}function lFe(E,M){return Hl(E.h)>=E.h.j-(E.s?1:0)?!1:E.s?(E.i=M.D.concat(E.i),!0):E.G==1||E.G==2||E.B>=(E.Va?0:E.Wa)?!1:(E.s=Ea(d(E.Ga,E,M),Kne(E,E.B)),E.B++,!0)}e.Ga=function(E){if(this.s)if(this.s=null,this.G==1){if(!E){this.U=Math.floor(1e5*Math.random()),E=this.U++;const be=new Mn(this,this.j,E);let Ne=this.o;if(this.S&&(Ne?(Ne=C(Ne),R(Ne,this.S)):Ne=this.S),this.m!==null||this.O||(be.H=Ne,Ne=null),this.P)e:{for(var M=0,z=0;z<this.i.length;z++){t:{var Q=this.i[z];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(M+=Q,4096<M){M=z;break e}if(M===4096||z===this.i.length-1){M=z+1;break e}}M=1e3}else M=1e3;M=qne(this,be,M),z=We(this.I),Nt(z,"RID",E),Nt(z,"CVER",22),this.D&&Nt(z,"X-HTTP-Session-Id",this.D),DS(this,z),Ne&&(this.O?M="headers="+encodeURIComponent(String(hR(Ne)))+"&"+M:this.m&&te(z,this.m,Ne)),Y(this.h,be),this.Ua&&Nt(z,"TYPE","init"),this.P?(Nt(z,"$req",M),Nt(z,"SID","null"),be.T=!0,zt(be,z,null)):zt(be,z,M),this.G=2}}else this.G==3&&(E?Hne(this,E):this.i.length==0||Fs(this.h)||Hne(this))};function Hne(E,M){var z;M?z=M.l:z=E.U++;const Q=We(E.I);Nt(Q,"SID",E.K),Nt(Q,"RID",z),Nt(Q,"AID",E.T),DS(E,Q),E.m&&E.o&&te(Q,E.m,E.o),z=new Mn(E,E.j,z,E.B+1),E.m===null&&(z.H=E.o),M&&(E.i=M.D.concat(E.i)),M=qne(E,z,1e3),z.I=Math.round(.5*E.wa)+Math.round(.5*E.wa*Math.random()),Y(E.h,z),zt(z,Q,M)}function DS(E,M){E.H&&T(E.H,function(z,Q){Nt(M,Q,z)}),E.l&&le({},function(z,Q){Nt(M,Q,z)})}function qne(E,M,z){z=Math.min(E.i.length,z);var Q=E.l?d(E.l.Na,E.l,E):null;e:{var be=E.i;let Ne=-1;for(;;){const ct=["count="+z];Ne==-1?0<z?(Ne=be[0].g,ct.push("ofs="+Ne)):Ne=0:ct.push("ofs="+Ne);let Hr=!0;for(let lo=0;lo<z;lo++){let lr=be[lo].g;const Uo=be[lo].map;if(lr-=Ne,0>lr)Ne=Math.max(0,be[lo].g-100),Hr=!1;else try{fR(Uo,ct,"req"+lr+"_")}catch{Q&&Q(Uo)}}if(Hr){Q=ct.join("&");break e}}}return E=E.i.splice(0,z),M.D=E,Q}function Wne(E){if(!E.g&&!E.u){E.Y=1;var M=E.Fa;B||P(),U||(B(),U=!0),q.add(M,E),E.v=0}}function HF(E){return E.g||E.u||3<=E.v?!1:(E.Y++,E.u=Ea(d(E.Fa,E),Kne(E,E.v)),E.v++,!0)}e.Fa=function(){if(this.u=null,Gne(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var E=2*this.R;this.j.info("BP detection timer enabled: "+E),this.A=Ea(d(this.ab,this),E)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Kr(10),pR(this),Gne(this))};function qF(E){E.A!=null&&(a.clearTimeout(E.A),E.A=null)}function Gne(E){E.g=new Mn(E,E.j,"rpc",E.Y),E.m===null&&(E.g.H=E.o),E.g.O=0;var M=We(E.qa);Nt(M,"RID","rpc"),Nt(M,"SID",E.K),Nt(M,"AID",E.T),Nt(M,"CI",E.F?"0":"1"),!E.F&&E.ja&&Nt(M,"TO",E.ja),Nt(M,"TYPE","xmlhttp"),DS(E,M),E.m&&E.o&&te(M,E.m,E.o),E.L&&(E.g.I=E.L);var z=E.g;E=E.ia,z.L=1,z.v=Ln(We(M)),z.m=null,z.P=!0,rr(z,E)}e.Za=function(){this.C!=null&&(this.C=null,pR(this),HF(this),Kr(19))};function gR(E){E.C!=null&&(a.clearTimeout(E.C),E.C=null)}function Yne(E,M){var z=null;if(E.g==M){gR(E),qF(E),E.g=null;var Q=2}else if(sd(E.h,M))z=M.D,se(E.h,M),Q=1;else return;if(E.G!=0){if(M.o)if(Q==1){z=M.m?M.m.length:0,M=Date.now()-M.F;var be=E.B;Q=Zu(),Ce(Q,new ru(Q,z)),mR(E)}else Wne(E);else if(be=M.s,be==3||be==0&&0<M.X||!(Q==1&&lFe(E,M)||Q==2&&HF(E)))switch(z&&0<z.length&&(M=E.h,M.i=M.i.concat(z)),be){case 1:qy(E,5);break;case 4:qy(E,10);break;case 3:qy(E,6);break;default:qy(E,2)}}}function Kne(E,M){let z=E.Ta+Math.floor(Math.random()*E.cb);return E.isActive()||(z*=2),z*M}function qy(E,M){if(E.j.info("Error code "+M),M==2){var z=d(E.fb,E),Q=E.Xa;const be=!Q;Q=new He(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||it(Q,"https"),Ln(Q),be?cR(Q.toString(),z):np(Q.toString(),z)}else Kr(2);E.G=0,E.l&&E.l.sa(M),Xne(E),Vne(E)}e.fb=function(E){E?(this.j.info("Successfully pinged google.com"),Kr(2)):(this.j.info("Failed to ping google.com"),Kr(1))};function Xne(E){if(E.G=0,E.ka=[],E.l){const M=Z(E.h);(M.length!=0||E.i.length!=0)&&(g(E.ka,M),g(E.ka,E.i),E.h.i.length=0,m(E.i),E.i.length=0),E.l.ra()}}function Qne(E,M,z){var Q=z instanceof He?We(z):new He(z);if(Q.g!="")M&&(Q.g=M+"."+Q.g),Et(Q,Q.s);else{var be=a.location;Q=be.protocol,M=M?M+"."+be.hostname:be.hostname,be=+be.port;var Ne=new He(null);Q&&it(Ne,Q),M&&(Ne.g=M),be&&Et(Ne,be),z&&(Ne.l=z),Q=Ne}return z=E.D,M=E.ya,z&&M&&Nt(Q,z,M),Nt(Q,"VER",E.la),DS(E,Q),Q}function Jne(E,M,z){if(M&&!E.J)throw Error("Can't create secondary domain capable XhrIo object.");return M=E.Ca&&!E.pa?new ue(new Uy({eb:z})):new ue(E.pa),M.Ha(E.J),M}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zne(){}e=Zne.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function yR(){}yR.prototype.g=function(E,M){return new el(E,M)};function el(E,M){he.call(this),this.g=new qb(M),this.l=E,this.h=M&&M.messageUrlParams||null,E=M&&M.messageHeaders||null,M&&M.clientProtocolHeaderRequired&&(E?E["X-Client-Protocol"]="webchannel":E={"X-Client-Protocol":"webchannel"}),this.g.o=E,E=M&&M.initMessageHeaders||null,M&&M.messageContentType&&(E?E["X-WebChannel-Content-Type"]=M.messageContentType:E={"X-WebChannel-Content-Type":M.messageContentType}),M&&M.va&&(E?E["X-WebChannel-Client-Profile"]=M.va:E={"X-WebChannel-Client-Profile":M.va}),this.g.S=E,(E=M&&M.Sb)&&!v(E)&&(this.g.m=E),this.v=M&&M.supportsCrossDomainXhr||!1,this.u=M&&M.sendRawJson||!1,(M=M&&M.httpSessionIdParam)&&!v(M)&&(this.g.D=M,E=this.h,E!==null&&M in E&&(E=this.h,M in E&&delete E[M])),this.j=new Gb(this)}p(el,he),el.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},el.prototype.close=function(){Wb(this.g)},el.prototype.o=function(E){var M=this.g;if(typeof E=="string"){var z={};z.__data__=E,E=z}else this.u&&(z={},z.__data__=hn(E),E=z);M.i.push(new Fo(M.Ya++,E)),M.G==3&&mR(M)},el.prototype.N=function(){this.g.l=null,delete this.j,Wb(this.g),delete this.g,el.aa.N.call(this)};function ere(E){Pi.call(this),E.__headers__&&(this.headers=E.__headers__,this.statusCode=E.__status__,delete E.__headers__,delete E.__status__);var M=E.__sm__;if(M){e:{for(const z in M){E=z;break e}E=void 0}(this.i=E)&&(E=this.i,M=M!==null&&E in M?M[E]:void 0),this.data=M}else this.data=E}p(ere,Pi);function tre(){Tr.call(this),this.status=1}p(tre,Tr);function Gb(E){this.g=E}p(Gb,Zne),Gb.prototype.ua=function(){Ce(this.g,"a")},Gb.prototype.ta=function(E){Ce(this.g,new ere(E))},Gb.prototype.sa=function(E){Ce(this.g,new tre)},Gb.prototype.ra=function(){Ce(this.g,"b")},yR.prototype.createWebChannel=yR.prototype.g,el.prototype.send=el.prototype.o,el.prototype.open=el.prototype.m,el.prototype.close=el.prototype.close,Lke=function(){return new yR},Mke=function(){return Zu()},$ke=cs,bz={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},st.NO_ERROR=0,st.TIMEOUT=8,st.HTTP_ERROR=6,QD=st,St.COMPLETE="complete",Oke=St,Di.EventType=Sn,Sn.OPEN="a",Sn.CLOSE="b",Sn.ERROR="c",Sn.MESSAGE="d",he.prototype.listen=he.prototype.K,iC=Di,Pke=Uy,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,Dke=ue}).apply(typeof IN<"u"?IN:typeof self<"u"?self:typeof window<"u"?window:{});const vfe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}fu.UNAUTHENTICATED=new fu(null),fu.GOOGLE_CREDENTIALS=new fu("google-credentials-uid"),fu.FIRST_PARTY=new fu("first-party-uid"),fu.MOCK_USER=new fu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new b6("@firebase/firestore");function cT(){return V1.logLevel}function It(e,...t){if(V1.logLevel<=qn.DEBUG){const n=t.map(gQ);V1.debug(`Firestore (${iS}): ${e}`,...n)}}function Em(e,...t){if(V1.logLevel<=qn.ERROR){const n=t.map(gQ);V1.error(`Firestore (${iS}): ${e}`,...n)}}function R2(e,...t){if(V1.logLevel<=qn.WARN){const n=t.map(gQ);V1.warn(`Firestore (${iS}): ${e}`,...n)}}function gQ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(e="Unexpected state"){const t=`FIRESTORE (${iS}) INTERNAL ASSERTION FAILED: `+e;throw Em(t),new Error(t)}function ti(e,t){e||sn()}function cn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Uh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cIt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class fIt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(fu.UNAUTHENTICATED))}shutdown(){}}class dIt{constructor(t){this.t=t,this.currentUser=fu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Kp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Kp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Kp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ti(typeof r.accessToken=="string"),new cIt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ti(t===null||typeof t=="string"),new fu(t)}}class hIt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=fu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pIt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new hIt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(fu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class mIt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gIt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ti(typeof n.token=="string"),this.R=n.token,new mIt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yIt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fke{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=yIt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function gr(e,t){return e<t?-1:e>t?1:0}function ME(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return ks.fromMillis(Date.now())}static fromDate(t){return ks.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new ks(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?gr(this.nanoseconds,t.nanoseconds):gr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t){this.timestamp=t}static fromTimestamp(t){return new ln(t)}static min(){return new ln(new ks(0,0))}static max(){return new ln(new ks(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(t,n,r){n===void 0?n=0:n>t.length&&sn(),r===void 0?r=t.length-n:r>t.length-n&&sn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return N2.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof N2?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ai extends N2{construct(t,n,r){return new ai(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ai(n)}static emptyPath(){return new ai([])}}const vIt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Eo extends N2{construct(t,n,r){return new Eo(t,n,r)}static isValidIdentifier(t){return vIt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Eo.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Eo(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Eo(n)}static emptyPath(){return new Eo([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(t){this.path=t}static fromPath(t){return new Bt(ai.fromString(t))}static fromName(t){return new Bt(ai.fromString(t).popFirst(5))}static empty(){return new Bt(ai.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ai.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ai.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Bt(new ai(t.slice()))}}function bIt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ln.fromTimestamp(r===1e9?new ks(n+1,0):new ks(n,r));return new V0(i,Bt.empty(),t)}function _It(e){return new V0(e.readTime,e.key,-1)}class V0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new V0(ln.min(),Bt.empty(),-1)}static max(){return new V0(ln.max(),Bt.empty(),-1)}}function wIt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Bt.comparator(e.documentKey,t.documentKey),n!==0?n:gr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EIt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class xIt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pk(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==EIt)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&sn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Ke((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Ke?n:Ke.resolve(n)}catch(n){return Ke.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Ke.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Ke.reject(n)}static resolve(t){return new Ke((n,r)=>{n(t)})}static reject(t){return new Ke((n,r)=>{r(t)})}static waitFor(t){return new Ke((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Ke.resolve(!1);for(const r of t)n=n.next(i=>i?Ke.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Ke((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Ke((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function SIt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function mk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}yQ.oe=-1;function C6(e){return e==null}function s$(e){return e===0&&1/e==-1/0}function TIt(e){return typeof e=="number"&&Number.isInteger(e)&&!s$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bfe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function jke(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t,n){this.comparator=t,this.root=n||bo.EMPTY}insert(t,n){return new Ni(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,bo.BLACK,null,null))}remove(t){return new Ni(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bo.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new kN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new kN(this.root,t,this.comparator,!1)}getReverseIterator(){return new kN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new kN(this.root,t,this.comparator,!0)}}class kN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class bo{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??bo.RED,this.left=i??bo.EMPTY,this.right=s??bo.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new bo(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bo.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return bo.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,bo.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,bo.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw sn();const t=this.left.check();if(t!==this.right.check())throw sn();return t+(this.isRed()?0:1)}}bo.EMPTY=null,bo.RED=!0,bo.BLACK=!1;bo.EMPTY=new class{constructor(){this.size=0}get key(){throw sn()}get value(){throw sn()}get color(){throw sn()}get left(){throw sn()}get right(){throw sn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new bo(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{constructor(t){this.comparator=t,this.data=new Ni(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new _fe(this.data.getIterator())}getIteratorFrom(t){return new _fe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Ao)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Ao(this.comparator);return n.data=t,n}}class _fe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t){this.fields=t,t.sort(Eo.comparator)}static empty(){return new vl([])}unionWith(t){let n=new Ao(Eo.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new vl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ME(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bke extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Bke("Invalid base64 string: "+s):s}}(t);return new ga(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new ga(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return gr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}ga.EMPTY_BYTE_STRING=new ga("");const CIt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function H0(e){if(ti(!!e),typeof e=="string"){let t=0;const n=CIt.exec(e);if(ti(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:hs(e.seconds),nanos:hs(e.nanos)}}function hs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function H1(e){return typeof e=="string"?ga.fromBase64String(e):ga.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vQ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function bQ(e){const t=e.mapValue.fields.__previous_value__;return vQ(t)?bQ(t):t}function D2(e){const t=H0(e.mapValue.fields.__local_write_time__.timestampValue);return new ks(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AIt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class P2{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new P2("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof P2&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function q1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?vQ(e)?4:IIt(e)?9007199254740991:10:sn()}function _h(e,t){if(e===t)return!0;const n=q1(e);if(n!==q1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return D2(e).isEqual(D2(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=H0(i.timestampValue),a=H0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return H1(i.bytesValue).isEqual(H1(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return hs(i.geoPointValue.latitude)===hs(s.geoPointValue.latitude)&&hs(i.geoPointValue.longitude)===hs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return hs(i.integerValue)===hs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=hs(i.doubleValue),a=hs(s.doubleValue);return o===a?s$(o)===s$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return ME(e.arrayValue.values||[],t.arrayValue.values||[],_h);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(bfe(o)!==bfe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!_h(o[u],a[u])))return!1;return!0}(e,t);default:return sn()}}function O2(e,t){return(e.values||[]).find(n=>_h(n,t))!==void 0}function LE(e,t){if(e===t)return 0;const n=q1(e),r=q1(t);if(n!==r)return gr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return gr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=hs(s.integerValue||s.doubleValue),u=hs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return wfe(e.timestampValue,t.timestampValue);case 4:return wfe(D2(e),D2(t));case 5:return gr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=H1(s),u=H1(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=gr(a[l],u[l]);if(c!==0)return c}return gr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=gr(hs(s.latitude),hs(o.latitude));return a!==0?a:gr(hs(s.longitude),hs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=LE(a[l],u[l]);if(c)return c}return gr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===RN.mapValue&&o===RN.mapValue)return 0;if(s===RN.mapValue)return 1;if(o===RN.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=gr(u[f],c[f]);if(d!==0)return d;const h=LE(a[u[f]],l[c[f]]);if(h!==0)return h}return gr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw sn()}}function wfe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return gr(e,t);const n=H0(e),r=H0(t),i=gr(n.seconds,r.seconds);return i!==0?i:gr(n.nanos,r.nanos)}function FE(e){return _z(e)}function _z(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=H0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return H1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Bt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=_z(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${_z(n.fields[o])}`;return i+"}"}(e.mapValue):sn()}function Efe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function wz(e){return!!e&&"integerValue"in e}function _Q(e){return!!e&&"arrayValue"in e}function xfe(e){return!!e&&"nullValue"in e}function Sfe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function JD(e){return!!e&&"mapValue"in e}function aA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Cb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=aA(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=aA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function IIt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(t){this.value=t}static empty(){return new wu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!JD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=aA(n)}setAll(t){let n=Eo.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=aA(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());JD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return _h(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];JD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Cb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new wu(aA(this.value))}}function Uke(e){const t=[];return Cb(e.fields,(n,r)=>{const i=new Eo([n]);if(JD(r)){const s=Uke(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new vl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ra(t,0,ln.min(),ln.min(),ln.min(),wu.empty(),0)}static newFoundDocument(t,n,r,i){return new ra(t,1,n,ln.min(),r,i,0)}static newNoDocument(t,n){return new ra(t,2,n,ln.min(),ln.min(),wu.empty(),0)}static newUnknownDocument(t,n){return new ra(t,3,n,ln.min(),ln.min(),wu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(ln.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=wu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=wu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ln.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ra&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ra(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let o$=class{constructor(t,n){this.position=t,this.inclusive=n}};function Tfe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Bt.comparator(Bt.fromName(o.referenceValue),n.key):r=LE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Cfe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!_h(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(t,n="asc"){this.field=t,this.dir=n}}function kIt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zke=class{};class ms extends zke{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new NIt(t,n,r):n==="array-contains"?new OIt(t,r):n==="in"?new $It(t,r):n==="not-in"?new MIt(t,r):n==="array-contains-any"?new LIt(t,r):new ms(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new DIt(t,r):new PIt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(LE(n,this.value)):n!==null&&q1(this.value)===q1(n)&&this.matchesComparison(LE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return sn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Uf extends zke{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Uf(t,n)}matches(t){return Vke(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Vke(e){return e.op==="and"}function Hke(e){return RIt(e)&&Vke(e)}function RIt(e){for(const t of e.filters)if(t instanceof Uf)return!1;return!0}function Ez(e){if(e instanceof ms)return e.field.canonicalString()+e.op.toString()+FE(e.value);if(Hke(e))return e.filters.map(t=>Ez(t)).join(",");{const t=e.filters.map(n=>Ez(n)).join(",");return`${e.op}(${t})`}}function qke(e,t){return e instanceof ms?function(r,i){return i instanceof ms&&r.op===i.op&&r.field.isEqual(i.field)&&_h(r.value,i.value)}(e,t):e instanceof Uf?function(r,i){return i instanceof Uf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&qke(o,i.filters[a]),!0):!1}(e,t):void sn()}function Wke(e){return e instanceof ms?function(n){return`${n.field.canonicalString()} ${n.op} ${FE(n.value)}`}(e):e instanceof Uf?function(n){return n.op.toString()+" {"+n.getFilters().map(Wke).join(" ,")+"}"}(e):"Filter"}class NIt extends ms{constructor(t,n,r){super(t,n,r),this.key=Bt.fromName(r.referenceValue)}matches(t){const n=Bt.comparator(t.key,this.key);return this.matchesComparison(n)}}class DIt extends ms{constructor(t,n){super(t,"in",n),this.keys=Gke("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class PIt extends ms{constructor(t,n){super(t,"not-in",n),this.keys=Gke("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Gke(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Bt.fromName(r.referenceValue))}class OIt extends ms{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return _Q(n)&&O2(n.arrayValue,this.value)}}class $It extends ms{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&O2(this.value.arrayValue,n)}}class MIt extends ms{constructor(t,n){super(t,"not-in",n)}matches(t){if(O2(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!O2(this.value.arrayValue,n)}}class LIt extends ms{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!_Q(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>O2(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FIt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function Afe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new FIt(e,t,n,r,i,s,o)}function wQ(e){const t=cn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>Ez(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),C6(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>FE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>FE(r)).join(",")),t.ue=n}return t.ue}function EQ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!kIt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!qke(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Cfe(e.startAt,t.startAt)&&Cfe(e.endAt,t.endAt)}function xz(e){return Bt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function jIt(e,t,n,r,i,s,o,a){return new sS(e,t,n,r,i,s,o,a)}function xQ(e){return new sS(e)}function Ife(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Yke(e){return e.collectionGroup!==null}function uA(e){const t=cn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ao(Eo.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new $2(s,r))}),n.has(Eo.keyField().canonicalString())||t.ce.push(new $2(Eo.keyField(),r))}return t.ce}function rh(e){const t=cn(e);return t.le||(t.le=BIt(t,uA(e))),t.le}function BIt(e,t){if(e.limitType==="F")return Afe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new $2(i.field,s)});const n=e.endAt?new o$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new o$(e.startAt.position,e.startAt.inclusive):null;return Afe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Sz(e,t){const n=e.filters.concat([t]);return new sS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Tz(e,t,n){return new sS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function A6(e,t){return EQ(rh(e),rh(t))&&e.limitType===t.limitType}function Kke(e){return`${wQ(rh(e))}|lt:${e.limitType}`}function k_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Wke(i)).join(", ")}]`),C6(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>FE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>FE(i)).join(",")),`Target(${r})`}(rh(e))}; limitType=${e.limitType})`}function I6(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Bt.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of uA(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Tfe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,uA(r),i)||r.endAt&&!function(o,a,u){const l=Tfe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,uA(r),i))}(e,t)}function UIt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Xke(e){return(t,n)=>{let r=!1;for(const i of uA(e)){const s=zIt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function zIt(e,t,n){const r=e.field.isKeyField()?Bt.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?LE(u,l):sn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return sn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Cb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return jke(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VIt=new Ni(Bt.comparator);function xm(){return VIt}const Qke=new Ni(Bt.comparator);function sC(...e){let t=Qke;for(const n of e)t=t.insert(n.key,n);return t}function Jke(e){let t=Qke;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Xv(){return lA()}function Zke(){return lA()}function lA(){return new oS(e=>e.toString(),(e,t)=>e.isEqual(t))}const HIt=new Ni(Bt.comparator),qIt=new Ao(Bt.comparator);function Bn(...e){let t=qIt;for(const n of e)t=t.add(n);return t}const WIt=new Ao(gr);function GIt(){return WIt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eRe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:s$(t)?"-0":t}}function tRe(e){return{integerValue:""+e}}function YIt(e,t){return TIt(t)?tRe(t):eRe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k6{constructor(){this._=void 0}}function KIt(e,t,n){return e instanceof M2?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&vQ(s)&&(s=bQ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof L2?rRe(e,t):e instanceof F2?iRe(e,t):function(i,s){const o=nRe(i,s),a=kfe(o)+kfe(i.Pe);return wz(o)&&wz(i.Pe)?tRe(a):eRe(i.serializer,a)}(e,t)}function XIt(e,t,n){return e instanceof L2?rRe(e,t):e instanceof F2?iRe(e,t):n}function nRe(e,t){return e instanceof a$?function(r){return wz(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class M2 extends k6{}class L2 extends k6{constructor(t){super(),this.elements=t}}function rRe(e,t){const n=sRe(t);for(const r of e.elements)n.some(i=>_h(i,r))||n.push(r);return{arrayValue:{values:n}}}class F2 extends k6{constructor(t){super(),this.elements=t}}function iRe(e,t){let n=sRe(t);for(const r of e.elements)n=n.filter(i=>!_h(i,r));return{arrayValue:{values:n}}}class a$ extends k6{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function kfe(e){return hs(e.integerValue||e.doubleValue)}function sRe(e){return _Q(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QIt{constructor(t,n){this.field=t,this.transform=n}}function JIt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof L2&&i instanceof L2||r instanceof F2&&i instanceof F2?ME(r.elements,i.elements,_h):r instanceof a$&&i instanceof a$?_h(r.Pe,i.Pe):r instanceof M2&&i instanceof M2}(e.transform,t.transform)}class ZIt{constructor(t,n){this.version=t,this.transformResults=n}}class Ou{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ou}static exists(t){return new Ou(void 0,t)}static updateTime(t){return new Ou(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ZD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class R6{}function oRe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new N6(e.key,Ou.none()):new gk(e.key,e.data,Ou.none());{const n=e.data,r=wu.empty();let i=new Ao(Eo.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Cy(e.key,r,new vl(i.toArray()),Ou.none())}}function ekt(e,t,n){e instanceof gk?function(i,s,o){const a=i.value.clone(),u=Nfe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof Cy?function(i,s,o){if(!ZD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Nfe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(aRe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function cA(e,t,n,r){return e instanceof gk?function(s,o,a,u){if(!ZD(s.precondition,o))return a;const l=s.value.clone(),c=Dfe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof Cy?function(s,o,a,u){if(!ZD(s.precondition,o))return a;const l=Dfe(s.fieldTransforms,u,o),c=o.data;return c.setAll(aRe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return ZD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function tkt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=nRe(r.transform,i||null);s!=null&&(n===null&&(n=wu.empty()),n.set(r.field,s))}return n||null}function Rfe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ME(r,i,(s,o)=>JIt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class gk extends R6{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Cy extends R6{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function aRe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Nfe(e,t,n){const r=new Map;ti(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,XIt(o,a,n[i]))}return r}function Dfe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,KIt(s,o,t))}return r}class N6 extends R6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class nkt extends R6{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rkt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&ekt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=cA(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=cA(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Zke();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=oRe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(ln.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Bn())}isEqual(t){return this.batchId===t.batchId&&ME(this.mutations,t.mutations,(n,r)=>Rfe(n,r))&&ME(this.baseMutations,t.baseMutations,(n,r)=>Rfe(n,r))}}class SQ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ti(t.mutations.length===r.length);let i=function(){return HIt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new SQ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ikt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class skt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs,Qn;function okt(e){switch(e){default:return sn();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function uRe(e){if(e===void 0)return Em("GRPC error has no .code"),Be.UNKNOWN;switch(e){case fs.OK:return Be.OK;case fs.CANCELLED:return Be.CANCELLED;case fs.UNKNOWN:return Be.UNKNOWN;case fs.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case fs.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case fs.INTERNAL:return Be.INTERNAL;case fs.UNAVAILABLE:return Be.UNAVAILABLE;case fs.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case fs.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case fs.NOT_FOUND:return Be.NOT_FOUND;case fs.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case fs.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case fs.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case fs.ABORTED:return Be.ABORTED;case fs.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case fs.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case fs.DATA_LOSS:return Be.DATA_LOSS;default:return sn()}}(Qn=fs||(fs={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function akt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ukt=new f1([4294967295,4294967295],0);function Pfe(e){const t=akt().encode(e),n=new Nke;return n.update(t),new Uint8Array(n.digest())}function Ofe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new f1([n,r],0),new f1([i,s],0)]}class TQ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new oC(`Invalid padding: ${n}`);if(r<0)throw new oC(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new oC(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new oC(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=f1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(f1.fromNumber(r)));return i.compare(ukt)===1&&(i=new f1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=Pfe(t),[r,i]=Ofe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new TQ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=Pfe(t),[r,i]=Ofe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class oC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D6{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,yk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new D6(ln.min(),i,new Ni(gr),xm(),Bn())}}class yk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new yk(r,n,Bn(),Bn(),Bn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class lRe{constructor(t,n){this.targetId=t,this.me=n}}class cRe{constructor(t,n,r=ga.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $fe{constructor(){this.fe=0,this.ge=Lfe(),this.pe=ga.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Bn(),n=Bn(),r=Bn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:sn()}}),new yk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=Lfe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ti(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class lkt{constructor(t){this.Le=t,this.Be=new Map,this.ke=xm(),this.qe=Mfe(),this.Qe=new Ni(gr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:sn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(xz(s))if(r===0){const o=new Bt(s.path);this.Ue(n,o,ra.newNoDocument(o,ln.min()))}else ti(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=H1(r).toUint8Array()}catch(u){if(u instanceof Bke)return R2("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new TQ(o,i,s)}catch(u){return R2(u instanceof oC?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&xz(a.target)){const u=new Bt(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ra.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Bn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new D6(t,n,this.Qe,this.ke,r);return this.ke=xm(),this.qe=Mfe(),this.Qe=new Ni(gr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new $fe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Ao(gr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new $fe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Mfe(){return new Ni(Bt.comparator)}function Lfe(){return new Ni(Bt.comparator)}const ckt={asc:"ASCENDING",desc:"DESCENDING"},fkt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},dkt={and:"AND",or:"OR"};class hkt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Cz(e,t){return e.useProto3Json||C6(t)?t:{value:t}}function u$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function fRe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function pkt(e,t){return u$(e,t.toTimestamp())}function ih(e){return ti(!!e),ln.fromTimestamp(function(n){const r=H0(n);return new ks(r.seconds,r.nanos)}(e))}function CQ(e,t){return Az(e,t).canonicalString()}function Az(e,t){const n=function(i){return new ai(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function dRe(e){const t=ai.fromString(e);return ti(yRe(t)),t}function Iz(e,t){return CQ(e.databaseId,t.path)}function Tj(e,t){const n=dRe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Bt(pRe(n))}function hRe(e,t){return CQ(e.databaseId,t)}function mkt(e){const t=dRe(e);return t.length===4?ai.emptyPath():pRe(t)}function kz(e){return new ai(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function pRe(e){return ti(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Ffe(e,t,n){return{name:Iz(e,t),fields:n.value.mapValue.fields}}function gkt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:sn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ti(c===void 0||typeof c=="string"),ga.fromBase64String(c||"")):(ti(c===void 0||c instanceof Buffer||c instanceof Uint8Array),ga.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:uRe(l.code);return new bt(c,l.message||"")}(o);n=new cRe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Tj(e,r.document.name),s=ih(r.document.updateTime),o=r.document.createTime?ih(r.document.createTime):ln.min(),a=new wu({mapValue:{fields:r.document.fields}}),u=ra.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new eP(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Tj(e,r.document),s=r.readTime?ih(r.readTime):ln.min(),o=ra.newNoDocument(i,s),a=r.removedTargetIds||[];n=new eP([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Tj(e,r.document),s=r.removedTargetIds||[];n=new eP([],s,i,null)}else{if(!("filter"in t))return sn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new skt(i,s),a=r.targetId;n=new lRe(a,o)}}return n}function ykt(e,t){let n;if(t instanceof gk)n={update:Ffe(e,t.key,t.value)};else if(t instanceof N6)n={delete:Iz(e,t.key)};else if(t instanceof Cy)n={update:Ffe(e,t.key,t.data),updateMask:Ckt(t.fieldMask)};else{if(!(t instanceof nkt))return sn();n={verify:Iz(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof M2)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof L2)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof F2)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof a$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw sn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pkt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:sn()}(e,t.precondition)),n}function vkt(e,t){return e&&e.length>0?(ti(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?ih(i.updateTime):ih(s);return o.isEqual(ln.min())&&(o=ih(s)),new ZIt(o,i.transformResults||[])}(n,t))):[]}function bkt(e,t){return{documents:[hRe(e,t.path)]}}function _kt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=hRe(e,i);const s=function(l){if(l.length!==0)return gRe(Uf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:R_(d.field),direction:xkt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Cz(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function wkt(e){let t=mkt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ti(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=mRe(f);return d instanceof Uf&&Hke(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new $2(N_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,C6(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new o$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new o$(h,d)}(n.endAt)),jIt(t,i,o,s,a,"F",u,l)}function Ekt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return sn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function mRe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=N_(n.unaryFilter.field);return ms.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=N_(n.unaryFilter.field);return ms.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=N_(n.unaryFilter.field);return ms.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=N_(n.unaryFilter.field);return ms.create(o,"!=",{nullValue:"NULL_VALUE"});default:return sn()}}(e):e.fieldFilter!==void 0?function(n){return ms.create(N_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return sn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Uf.create(n.compositeFilter.filters.map(r=>mRe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return sn()}}(n.compositeFilter.op))}(e):sn()}function xkt(e){return ckt[e]}function Skt(e){return fkt[e]}function Tkt(e){return dkt[e]}function R_(e){return{fieldPath:e.canonicalString()}}function N_(e){return Eo.fromServerFormat(e.fieldPath)}function gRe(e){return e instanceof ms?function(n){if(n.op==="=="){if(Sfe(n.value))return{unaryFilter:{field:R_(n.field),op:"IS_NAN"}};if(xfe(n.value))return{unaryFilter:{field:R_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Sfe(n.value))return{unaryFilter:{field:R_(n.field),op:"IS_NOT_NAN"}};if(xfe(n.value))return{unaryFilter:{field:R_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:R_(n.field),op:Skt(n.op),value:n.value}}}(e):e instanceof Uf?function(n){const r=n.getFilters().map(i=>gRe(i));return r.length===1?r[0]:{compositeFilter:{op:Tkt(n.op),filters:r}}}(e):sn()}function Ckt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function yRe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(t,n,r,i,s=ln.min(),o=ln.min(),a=ga.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Fg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Fg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Fg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Fg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Akt{constructor(t){this.ct=t}}function Ikt(e){const t=wkt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?Tz(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kkt{constructor(){this._n=new Rkt}addToCollectionParentIndex(t,n){return this._n.add(n),Ke.resolve()}getCollectionParents(t,n){return Ke.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Ke.resolve()}deleteFieldIndex(t,n){return Ke.resolve()}deleteAllFieldIndexes(t){return Ke.resolve()}createTargetIndexes(t,n){return Ke.resolve()}getDocumentsMatchingTarget(t,n){return Ke.resolve(null)}getIndexType(t,n){return Ke.resolve(0)}getFieldIndexes(t,n){return Ke.resolve([])}getNextCollectionGroupToUpdate(t){return Ke.resolve(null)}getMinOffset(t,n){return Ke.resolve(V0.min())}getMinOffsetFromCollectionGroup(t,n){return Ke.resolve(V0.min())}updateCollectionGroup(t,n,r){return Ke.resolve()}updateIndexEntries(t,n){return Ke.resolve()}}class Rkt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Ao(ai.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Ao(ai.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new jE(0)}static Ln(){return new jE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nkt{constructor(){this.changes=new oS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ra.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ke.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dkt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pkt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&cA(r.mutation,i,vl.empty(),ks.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Bn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Bn()){const i=Xv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=sC();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Xv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Bn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=xm();const o=lA(),a=function(){return lA()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Cy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),cA(c.mutation,l,c.mutation.getFieldMask(),ks.now())):o.set(l.key,vl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new Dkt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=lA();let i=new Ni((o,a)=>o-a),s=Bn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||vl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Bn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=Zke();c.forEach(d=>{if(!s.has(d)){const h=oRe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Ke.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Bt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Yke(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Ke.resolve(Xv());let a=-1,u=s;return o.next(l=>Ke.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Ke.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Bn())).next(c=>({batchId:a,changes:Jke(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Bt(n)).next(r=>{let i=sC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=sC();return this.indexManager.getCollectionParents(t,s).next(a=>Ke.forEach(a,u=>{const l=function(f,d){return new sS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ra.newInvalidDocument(c)))});let a=sC();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&cA(c.mutation,l,vl.empty(),ks.now()),I6(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Okt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Ke.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ih(i.createTime)}}(n)),Ke.resolve()}getNamedQuery(t,n){return Ke.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Ikt(i.bundledQuery),readTime:ih(i.readTime)}}(n)),Ke.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $kt{constructor(){this.overlays=new Ni(Bt.comparator),this.hr=new Map}getOverlay(t,n){return Ke.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Xv();return Ke.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Ke.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Ke.resolve()}getOverlaysForCollection(t,n,r){const i=Xv(),s=n.length+1,o=new Bt(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ke.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Ni((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Xv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Xv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Ke.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new ikt(n,r));let s=this.hr.get(n);s===void 0&&(s=Bn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AQ{constructor(){this.Pr=new Ao(Vs.Ir),this.Tr=new Ao(Vs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Vs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Vs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Bt(new ai([])),r=new Vs(n,t),i=new Vs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Bt(new ai([])),r=new Vs(n,t),i=new Vs(n,t+1);let s=Bn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Vs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Vs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Bt.comparator(t.key,n.key)||gr(t.pr,n.pr)}static Er(t,n){return gr(t.pr,n.pr)||Bt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mkt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ao(Vs.Ir)}checkEmpty(t){return Ke.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new rkt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Vs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ke.resolve(o)}lookupMutationBatch(t,n){return Ke.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Ke.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ke.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Vs(n,0),i=new Vs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Ke.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Ao(gr);return n.forEach(i=>{const s=new Vs(i,0),o=new Vs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Ke.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Bt.isDocumentKey(s)||(s=s.child(""));const o=new Vs(new Bt(s),0);let a=new Ao(gr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Ke.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ti(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Ke.forEach(n.mutations,i=>{const s=new Vs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Vs(n,0),i=this.wr.firstAfterOrEqual(r);return Ke.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ke.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lkt{constructor(t){this.vr=t,this.docs=function(){return new Ni(Bt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Ke.resolve(r?r.document.mutableCopy():ra.newInvalidDocument(n))}getEntries(t,n){let r=xm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ra.newInvalidDocument(i))}),Ke.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=xm();const o=n.path,a=new Bt(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||wIt(_It(c),r)<=0||(i.has(c.key)||I6(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ke.resolve(s)}getAllFromCollectionGroup(t,n,r,i){sn()}Fr(t,n){return Ke.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new Fkt(this)}getSize(t){return Ke.resolve(this.size)}}class Fkt extends Nkt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Ke.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jkt{constructor(t){this.persistence=t,this.Mr=new oS(n=>wQ(n),EQ),this.lastRemoteSnapshotVersion=ln.min(),this.highestTargetId=0,this.Or=0,this.Nr=new AQ,this.targetCount=0,this.Lr=jE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Ke.resolve()}getLastRemoteSnapshotVersion(t){return Ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ke.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Ke.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Ke.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new jE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Ke.resolve()}updateTargetData(t,n){return this.qn(n),Ke.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Ke.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ke.waitFor(s).next(()=>i)}getTargetCount(t){return Ke.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Ke.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Ke.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Ke.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Ke.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Ke.resolve(r)}containsKey(t,n){return Ke.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bkt{constructor(t,n){this.Br={},this.overlays={},this.kr=new yQ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new jkt(this),this.indexManager=new kkt,this.remoteDocumentCache=function(i){return new Lkt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Akt(n),this.$r=new Okt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new $kt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new Mkt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new Ukt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Ke.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class Ukt extends xIt{constructor(t){super(),this.currentSequenceNumber=t}}class IQ{constructor(t){this.persistence=t,this.zr=new AQ,this.jr=null}static Hr(t){return new IQ(t)}get Jr(){if(this.jr)return this.jr;throw sn()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Ke.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Ke.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Ke.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ke.forEach(this.Jr,r=>{const i=Bt.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,ln.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Ke.or([()=>Ke.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Bn(),i=Bn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new kQ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zkt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vkt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return ESt()?8:SIt(Do())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new zkt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(cT()<=qn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",k_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Ke.resolve()):(cT()<=qn.DEBUG&&It("QueryEngine","Query:",k_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(cT()<=qn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",k_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,rh(n))):Ke.resolve())}ji(t,n){if(Ife(n))return Ke.resolve(null);let r=rh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Tz(n,null,"F"),r=rh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Bn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,Tz(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return Ife(n)||i.isEqual(ln.min())?Ke.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Ke.resolve(null):(cT()<=qn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),k_(n)),this.es(t,o,n,bIt(i,-1)).next(a=>a))})}Zi(t,n){let r=new Ao(Xke(t));return n.forEach((i,s)=>{I6(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return cT()<=qn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",k_(n)),this.zi.getDocumentsMatchingQuery(t,n,V0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hkt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Ni(gr),this.rs=new oS(s=>wQ(s),EQ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Pkt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function qkt(e,t,n,r){return new Hkt(e,t,n,r)}async function vRe(e,t){const n=cn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Bn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function Wkt(e,t){const n=cn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Ke.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ti(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Bn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function bRe(e){const t=cn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function Gkt(e,t){const n=cn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(ga.EMPTY_BYTE_STRING,ln.min()).withLastLimboFreeSnapshotVersion(ln.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=xm(),l=Bn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(Ykt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(ln.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Ke.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function Ykt(e,t,n){let r=Bn(),i=Bn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=xm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ln.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function Kkt(e,t){const n=cn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function Xkt(e,t){const n=cn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Ke.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Fg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function Rz(e,t,n){const r=cn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!mk(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function jfe(e,t,n){const r=cn(e);let i=ln.min(),s=Bn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=cn(u),d=f.rs.get(c);return d!==void 0?Ke.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,rh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:ln.min(),n?s:Bn())).next(a=>(Qkt(r,UIt(t),a),{documents:a,hs:s})))}function Qkt(e,t,n){let r=e.ss.get(t)||ln.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Bfe{constructor(){this.activeTargetIds=GIt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Jkt{constructor(){this.no=new Bfe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Bfe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zkt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ufe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NN=null;function Cj(){return NN===null?NN=function(){return 268435456+Math.round(2147483648*Math.random())}():NN++,"0x"+NN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eRt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tRt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko="WebChannelConnection";class nRt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=Cj(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw R2("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+iS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=eRt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=Cj();return new Promise((o,a)=>{const u=new Dke;u.setWithCredentials(!0),u.listenOnce(Oke.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case QD.NO_ERROR:const c=u.getResponseJson();It(Ko,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case QD.TIMEOUT:It(Ko,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case QD.HTTP_ERROR:const f=u.getStatus();if(It(Ko,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:sn()}}finally{It(Ko,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(Ko,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=Cj(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=Lke(),a=Mke(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new Pke({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(Ko,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new tRt({lo:g=>{h?It(Ko,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(Ko,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(Ko,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,iC.EventType.OPEN,()=>{h||(It(Ko,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,iC.EventType.CLOSE,()=>{h||(h=!0,It(Ko,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,iC.EventType.ERROR,g=>{h||(h=!0,R2(Ko,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,iC.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ti(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){It(Ko,`RPC '${t}' stream ${i} received error:`,w);const x=w.status;let T=function(A){const R=fs[A];if(R!==void 0)return uRe(R)}(x),S=w.message;T===void 0&&(T=Be.INTERNAL,S="Unknown error status: "+x+" with message "+w.message),h=!0,p.po(new bt(T,S)),f.close()}else It(Ko,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,$ke.STAT_EVENT,g=>{g.stat===bz.PROXY?It(Ko,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===bz.NOPROXY&&It(Ko,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function Aj(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(e){return new hkt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Re{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wRe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new _Re(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Em(n.toString()),Em("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rRt extends wRe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=gkt(this.serializer,t),r=function(s){if(!("targetChange"in s))return ln.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ln.min():o.readTime?ih(o.readTime):ln.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=kz(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=xz(u)?{documents:bkt(s,u)}:{query:_kt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=fRe(s,o.resumeToken);const l=Cz(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ln.min())>0){a.readTime=u$(s,o.snapshotVersion.toTimestamp());const l=Cz(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=Ekt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=kz(this.serializer),n.removeTarget=t,this.i_(n)}}class iRt extends wRe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ti(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=vkt(t.writeResults,t.commitTime),r=ih(t.commitTime);return this.listener.A_(r,n)}return ti(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=kz(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>ykt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sRt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,Az(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,Az(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class oRt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Em(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aRt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Ab(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=cn(u);l.M_.add(4),await bk(l),l.N_.set("Unknown"),l.M_.delete(4),await vk(l)}(this))})}),this.N_=new oRt(r,i)}}async function vk(e){if(Ab(e))for(const t of e.x_)await t(!0)}async function bk(e){for(const t of e.x_)await t(!1)}function ERe(e,t){const n=cn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),PQ(n)?DQ(n):aS(n).Xo()&&NQ(n,t))}function RQ(e,t){const n=cn(e),r=aS(n);n.F_.delete(t),r.Xo()&&xRe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Ab(n)&&n.N_.set("Unknown"))}function NQ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ln.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}aS(e).P_(t)}function xRe(e,t){e.L_.xe(t),aS(e).I_(t)}function DQ(e){e.L_=new lkt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),aS(e).start(),e.N_.w_()}function PQ(e){return Ab(e)&&!aS(e).Zo()&&e.F_.size>0}function Ab(e){return cn(e).M_.size===0}function SRe(e){e.L_=void 0}async function uRt(e){e.N_.set("Online")}async function lRt(e){e.F_.forEach((t,n)=>{NQ(e,t)})}async function cRt(e,t){SRe(e),PQ(e)?(e.N_.D_(t),DQ(e)):e.N_.set("Unknown")}async function fRt(e,t,n){if(e.N_.set("Online"),t instanceof cRe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await l$(e,r)}else if(t instanceof eP?e.L_.Ke(t):t instanceof lRe?e.L_.He(t):e.L_.We(t),!n.isEqual(ln.min()))try{const r=await bRe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(ga.EMPTY_BYTE_STRING,c.snapshotVersion)),xRe(s,u);const f=new Fg(c.target,u,l,c.sequenceNumber);NQ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await l$(e,r)}}async function l$(e,t,n){if(!mk(t))throw t;e.M_.add(1),await bk(e),e.N_.set("Offline"),n||(n=()=>bRe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await vk(e)})}function TRe(e,t){return t().catch(n=>l$(e,n,t))}async function O6(e){const t=cn(e),n=q0(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;dRt(t);)try{const i=await Kkt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,hRt(t,i)}catch(i){await l$(t,i)}CRe(t)&&ARe(t)}function dRt(e){return Ab(e)&&e.v_.length<10}function hRt(e,t){e.v_.push(t);const n=q0(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function CRe(e){return Ab(e)&&!q0(e).Zo()&&e.v_.length>0}function ARe(e){q0(e).start()}async function pRt(e){q0(e).V_()}async function mRt(e){const t=q0(e);for(const n of e.v_)t.d_(n.mutations)}async function gRt(e,t,n){const r=e.v_.shift(),i=SQ.from(r,t,n);await TRe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await O6(e)}async function yRt(e,t){t&&q0(e).E_&&await async function(r,i){if(function(o){return okt(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();q0(r).t_(),await TRe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await O6(r)}}(e,t),CRe(e)&&ARe(e)}async function zfe(e,t){const n=cn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Ab(n);n.M_.add(3),await bk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await vk(n)}async function vRt(e,t){const n=cn(e);t?(n.M_.delete(2),await vk(n)):t||(n.M_.add(2),await bk(n),n.N_.set("Unknown"))}function aS(e){return e.B_||(e.B_=function(n,r,i){const s=cn(n);return s.f_(),new rRt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:uRt.bind(null,e),To:lRt.bind(null,e),Ao:cRt.bind(null,e),h_:fRt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),PQ(e)?DQ(e):e.N_.set("Unknown")):(await e.B_.stop(),SRe(e))})),e.B_}function q0(e){return e.k_||(e.k_=function(n,r,i){const s=cn(n);return s.f_(),new iRt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:pRt.bind(null,e),Ao:yRt.bind(null,e),R_:mRt.bind(null,e),A_:gRt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await O6(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OQ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Kp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new OQ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function $Q(e,t){if(Em("AsyncQueue",`${t}: ${e}`),mk(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Bt.comparator(n.key,r.key):(n,r)=>Bt.comparator(n.key,r.key),this.keyedMap=sC(),this.sortedSet=new Ni(this.comparator)}static emptySet(t){return new Lw(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Lw)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Lw;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vfe{constructor(){this.q_=new Ni(Bt.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):sn():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class BE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new BE(t,n,Lw.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&A6(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bRt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class _Rt{constructor(){this.queries=new oS(t=>Kke(t),A6),this.onlineState="Unknown",this.z_=new Set}}async function IRe(e,t){const n=cn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new bRt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=$Q(o,`Initialization of query '${k_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&MQ(n)}async function kRe(e,t){const n=cn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function wRt(e,t){const n=cn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&MQ(n)}function ERt(e,t,n){const r=cn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function MQ(e){e.z_.forEach(t=>{t.next()})}var Nz,Hfe;(Hfe=Nz||(Nz={})).J_="default",Hfe.Cache="cache";class RRe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new BE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=BE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==Nz.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NRe{constructor(t){this.key=t}}class DRe{constructor(t){this.key=t}}class xRt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Bn(),this.mutatedKeys=Bn(),this.Ia=Xke(t),this.Ta=new Lw(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new Vfe,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=I6(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return sn()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new BE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Vfe,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Bn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new DRe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new NRe(r))}),n}pa(t){this.la=t.hs,this.Pa=Bn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return BE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class SRt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class TRt{constructor(t){this.key=t,this.wa=!1}}class CRt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new oS(a=>Kke(a),A6),this.Da=new Map,this.Ca=new Set,this.va=new Ni(Bt.comparator),this.Fa=new Map,this.Ma=new AQ,this.xa={},this.Oa=new Map,this.Na=jE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function ARt(e,t,n=!0){const r=FRe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await PRe(r,t,n,!0),i}async function IRt(e,t){const n=FRe(e);await PRe(n,t,!0,!1)}async function PRe(e,t,n,r){const i=await Xkt(e.localStore,rh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await kRt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&ERe(e.remoteStore,i),a}async function kRt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await jfe(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,b)));const w=v&&v.targetChanges.get(g.targetId),x=v&&v.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(b,m.isPrimaryClient,w,x);return Wfe(m,g.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await jfe(e.localStore,t,!0),o=new xRt(t,s.hs),a=o.da(s.documents),u=yk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Wfe(e,n,l.fa);const c=new SRt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function RRt(e,t,n){const r=cn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!A6(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Rz(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&RQ(r.remoteStore,i.targetId),Dz(r,i.targetId)}).catch(pk)):(Dz(r,i.targetId),await Rz(r.localStore,i.targetId,!0))}async function NRt(e,t){const n=cn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),RQ(n.remoteStore,r.targetId))}async function DRt(e,t,n){const r=jRt(e);try{const i=await function(o,a){const u=cn(o),l=ks.now(),c=a.reduce((h,p)=>h.add(p.key),Bn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=xm(),m=Bn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=tkt(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new Cy(v.key,b,Uke(b.value.mapValue),Ou.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:Jke(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ni(gr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await _k(r,i.changes),await O6(r.remoteStore)}catch(i){const s=$Q(i,"Failed to persist write");n.reject(s)}}async function ORe(e,t){const n=cn(e);try{const r=await Gkt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ti(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ti(o.wa):i.removedDocuments.size>0&&(ti(o.wa),o.wa=!1))}),await _k(n,r,t)}catch(r){await pk(r)}}function qfe(e,t,n){const r=cn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=cn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&MQ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function PRt(e,t,n){const r=cn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Ni(Bt.comparator);o=o.insert(s,ra.newNoDocument(s,ln.min()));const a=Bn().add(s),u=new D6(ln.min(),new Map,new Ni(gr),o,a);await ORe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),LQ(r)}else await Rz(r.localStore,t,!1).then(()=>Dz(r,t,n)).catch(pk)}async function ORt(e,t){const n=cn(e),r=t.batch.batchId;try{const i=await Wkt(n.localStore,t);MRe(n,r,null),$Re(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await _k(n,i)}catch(i){await pk(i)}}async function $Rt(e,t,n){const r=cn(e);try{const i=await function(o,a){const u=cn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ti(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);MRe(r,t,n),$Re(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await _k(r,i)}catch(i){await pk(i)}}function $Re(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function MRe(e,t,n){const r=cn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function Dz(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||LRe(e,r)})}function LRe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(RQ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),LQ(e))}function Wfe(e,t,n){for(const r of n)r instanceof NRe?(e.Ma.addReference(r.key,t),MRt(e,r)):r instanceof DRe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||LRe(e,r.key)):sn()}function MRt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),LQ(e))}function LQ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Bt(ai.fromString(t)),r=e.Na.next();e.Fa.set(r,new TRt(n)),e.va=e.va.insert(n,r),ERe(e.remoteStore,new Fg(rh(xQ(n.path)),r,"TargetPurposeLimboResolution",yQ.oe))}}async function _k(e,t,n){const r=cn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=kQ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=cn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ke.forEach(l,d=>Ke.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Ke.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!mk(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function LRt(e,t){const n=cn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await vRe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await _k(n,r.us)}}function FRt(e,t){const n=cn(e),r=n.Fa.get(t);if(r&&r.wa)return Bn().add(r.key);{let i=Bn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function FRe(e){const t=cn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ORe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FRt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=PRt.bind(null,t),t.Sa.h_=wRt.bind(null,t.eventManager),t.Sa.ka=ERt.bind(null,t.eventManager),t}function jRt(e){const t=cn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ORt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=$Rt.bind(null,t),t}class Gfe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=P6(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return qkt(this.persistence,new Vkt,t.initialUser,this.serializer)}createPersistence(t){return new Bkt(IQ.Hr,this.serializer)}createSharedClientState(t){return new Jkt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class BRt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>qfe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=LRt.bind(null,this.syncEngine),await vRt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new _Rt}()}createDatastore(t){const n=P6(t.databaseInfo.databaseId),r=function(s){return new nRt(s)}(t.databaseInfo);return function(s,o,a,u){return new sRt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new aRt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>qfe(this.syncEngine,n,0),function(){return Ufe.D()?new Ufe:new Zkt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new CRt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=cn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await bk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jRe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Em("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class URt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=fu.UNAUTHENTICATED,this.clientId=Fke.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Kp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=$Q(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Ij(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await vRe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Yfe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await BRe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>zfe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>zfe(t.remoteStore,i)),e._onlineComponents=t}function zRt(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function BRe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await Ij(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!zRt(n))throw n;R2("Error using user provided cache. Falling back to memory cache: "+n),await Ij(e,new Gfe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await Ij(e,new Gfe);return e._offlineComponents}async function FQ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await Yfe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await Yfe(e,new BRt))),e._onlineComponents}function VRt(e){return BRe(e).then(t=>t.persistence)}function HRt(e){return FQ(e).then(t=>t.remoteStore)}function qRt(e){return FQ(e).then(t=>t.syncEngine)}async function URe(e){const t=await FQ(e),n=t.eventManager;return n.onListen=ARt.bind(null,t.syncEngine),n.onUnlisten=RRt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=IRt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=NRt.bind(null,t.syncEngine),n}function WRt(e){return e.asyncQueue.enqueue(async()=>{const t=await VRt(e),n=await HRt(e);return t.setNetworkEnabled(!0),function(i){const s=cn(i);return s.M_.delete(0),vk(s)}(n)})}function GRt(e,t,n={}){const r=new Kp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new jRe({next:d=>{o.enqueueAndForget(()=>kRe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new RRe(xQ(a.path),c,{includeMetadataChanges:!0,ra:!0});return IRe(s,f)}(await URe(e),e.asyncQueue,t,n,r)),r.promise}function YRt(e,t,n={}){const r=new Kp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new jRe({next:d=>{o.enqueueAndForget(()=>kRe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new RRe(a,c,{includeMetadataChanges:!0,ra:!0});return IRe(s,f)}(await URe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zRe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kfe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VRe(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function KRt(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Xfe(e){if(!Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Qfe(e){if(Bt.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function $6(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":sn()}function zf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$6(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jfe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}KRt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zRe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class jQ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Jfe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Jfe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new fIt;switch(r.type){case"firstParty":return new pIt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Kfe.get(n);r&&(It("ComponentProvider","Removing Datastore"),Kfe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Ib(this.firestore,t,this._query)}}class Va{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new c0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Va(this.firestore,t,this._key)}}class c0 extends Ib{constructor(t,n,r){super(t,n,xQ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Va(this.firestore,null,new Bt(t))}withConverter(t){return new c0(this.firestore,t,this._path)}}function Wc(e,t,...n){if(e=ni(e),VRe("collection","path",t),e instanceof jQ){const r=ai.fromString(t,...n);return Qfe(r),new c0(e,null,r)}{if(!(e instanceof Va||e instanceof c0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ai.fromString(t,...n));return Qfe(r),new c0(e.firestore,null,r)}}function js(e,t,...n){if(e=ni(e),arguments.length===1&&(t=Fke.newId()),VRe("doc","path",t),e instanceof jQ){const r=ai.fromString(t,...n);return Xfe(r),new Va(e,null,new Bt(r))}{if(!(e instanceof Va||e instanceof c0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ai.fromString(t,...n));return Xfe(r),new Va(e.firestore,e instanceof c0?e.converter:null,new Bt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XRt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new _Re(this,"async_queue_retry"),this.hu=()=>{const n=Aj();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=Aj();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=Aj();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Kp;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!mk(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Em("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=OQ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&sn()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Ay extends jQ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new XRt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||HRe(this),this._firestoreClient.terminate()}}function QRt(e,t,n){n||(n="(default)");const r=nS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(A2(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function wk(e){return e._firestoreClient||HRe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function HRe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new AIt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,zRe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new URt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function JRt(e){return WRt(wk(e=zf(e,Ay)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new UE(ga.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new UE(ga.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Eo(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M6{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BQ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return gr(this._lat,t._lat)||gr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZRt=/^__.*__$/;class eNt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Cy(t,this.data,this.fieldMask,n,this.fieldTransforms):new gk(t,this.data,n,this.fieldTransforms)}}class qRe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Cy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function WRe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw sn()}}class UQ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new UQ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return c$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(WRe(this.fu)&&ZRt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class tNt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||P6(t)}Fu(t,n,r,i=!1){return new UQ({fu:t,methodName:n,vu:r,path:Eo.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function L6(e){const t=e._freezeSettings(),n=P6(e._databaseId);return new tNt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function GRe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);VQ("Data must be an object, but it was:",o,r);const a=XRe(r,o);let u,l;if(s.merge)u=new vl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=Pz(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);JRe(c,d)||c.push(d)}u=new vl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new eNt(new wu(a),u,l)}class F6 extends M6{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof F6}}class zQ extends M6{_toFieldTransform(t){return new QIt(t.path,new M2)}isEqual(t){return t instanceof zQ}}function YRe(e,t,n,r){const i=e.Fu(1,t,n);VQ("Data must be an object, but it was:",i,r);const s=[],o=wu.empty();Cb(r,(u,l)=>{const c=HQ(t,u,n);l=ni(l);const f=i.Su(c);if(l instanceof F6)s.push(c);else{const d=xk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new vl(s);return new qRe(o,a,i.fieldTransforms)}function KRe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[Pz(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Pz(t,s[d])),u.push(s[d+1]);const l=[],c=wu.empty();for(let d=a.length-1;d>=0;--d)if(!JRe(l,a[d])){const h=a[d];let p=u[d];p=ni(p);const m=o.Su(h);if(p instanceof F6)l.push(h);else{const g=xk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new vl(l);return new qRe(c,f,o.fieldTransforms)}function nNt(e,t,n,r=!1){return xk(n,e.Fu(r?4:3,t))}function xk(e,t){if(QRe(e=ni(e)))return VQ("Unsupported field value:",t,e),XRe(e,t);if(e instanceof M6)return function(r,i){if(!WRe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=xk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ni(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return YIt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=ks.fromDate(r);return{timestampValue:u$(i.serializer,s)}}if(r instanceof ks){const s=new ks(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:u$(i.serializer,s)}}if(r instanceof BQ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof UE)return{bytesValue:fRe(i.serializer,r._byteString)};if(r instanceof Va){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:CQ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${$6(r)}`)}(e,t)}function XRe(e,t){const n={};return jke(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cb(e,(r,i)=>{const s=xk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function QRe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof ks||e instanceof BQ||e instanceof UE||e instanceof Va||e instanceof M6)}function VQ(e,t,n){if(!QRe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=$6(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function Pz(e,t,n){if((t=ni(t))instanceof Ek)return t._internalPath;if(typeof t=="string")return HQ(e,t);throw c$("Field path arguments must be of type string or ",e,!1,void 0,n)}const rNt=new RegExp("[~\\*/\\[\\]]");function HQ(e,t,n){if(t.search(rNt)>=0)throw c$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ek(...t.split("."))._internalPath}catch{throw c$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function c$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function JRe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZRe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Va(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new iNt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(j6("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iNt extends ZRe{data(){return super.data()}}function j6(e,t){return typeof t=="string"?HQ(e,t):t instanceof Ek?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sNt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qQ{}class eNe extends qQ{}function Zfe(e,t,...n){let r=[];t instanceof qQ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof WQ).length,a=s.filter(u=>u instanceof B6).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class B6 extends eNe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new B6(t,n,r)}_apply(t){const n=this._parse(t);return tNe(t._query,n),new Ib(t.firestore,t.converter,Sz(t._query,n))}_parse(t){const n=L6(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){tde(f,c);const h=[];for(const p of f)h.push(ede(u,s,p));d={arrayValue:{values:h}}}else d=ede(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||tde(f,c),d=nNt(a,o,f,c==="in"||c==="not-in");return ms.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function oNt(e,t,n){const r=t,i=j6("where",e);return B6._create(i,r,n)}class WQ extends qQ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new WQ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Uf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)tNe(o,u),o=Sz(o,u)}(t._query,n),new Ib(t.firestore,t.converter,Sz(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class GQ extends eNe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new GQ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new $2(s,o)}(t._query,this._field,this._direction);return new Ib(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new sS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function aNt(e,t="asc"){const n=t,r=j6("orderBy",e);return GQ._create(r,n)}function ede(e,t,n){if(typeof(n=ni(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Yke(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ai.fromString(n));if(!Bt.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Efe(e,new Bt(r))}if(n instanceof Va)return Efe(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$6(n)}.`)}function tde(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function tNe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class uNt{convertValue(t,n="none"){switch(q1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(H1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw sn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Cb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new BQ(hs(t.latitude),hs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=bQ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(D2(t));default:return null}}convertTimestamp(t){const n=H0(t);return new ks(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ai.fromString(t);ti(yRe(r));const i=new P2(r.get(1),r.get(3)),s=new Bt(r.popFirst(5));return i.isEqual(n)||Em(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nNe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class rNe extends ZRe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new tP(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(j6("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class tP extends rNe{data(t={}){return super.data(t)}}class lNt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new aC(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new tP(this._firestore,this._userDataWriter,r.key,r,new aC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new tP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new aC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new tP(i._firestore,i._userDataWriter,a.doc.key,a.doc,new aC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:cNt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function cNt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return sn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(e){e=zf(e,Va);const t=zf(e.firestore,Ay);return GRt(wk(t),e._key).then(n=>hNt(t,e,n))}class iNe extends uNt{constructor(t){super(),this.firestore=t}convertBytes(t){return new UE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Va(this.firestore,null,n)}}function fT(e){e=zf(e,Ib);const t=zf(e.firestore,Ay),n=wk(t),r=new iNe(t);return sNt(e._query),YRt(n,e._query).then(i=>new lNt(t,r,e,i))}function Gc(e,t,n){e=zf(e,Va);const r=zf(e.firestore,Ay),i=nNe(e.converter,t,n);return U6(r,[GRe(L6(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Ou.none())])}function fNt(e,t,n,...r){e=zf(e,Va);const i=zf(e.firestore,Ay),s=L6(i);let o;return o=typeof(t=ni(t))=="string"||t instanceof Ek?KRe(s,"updateDoc",e._key,t,n,r):YRe(s,"updateDoc",e._key,t),U6(i,[o.toMutation(e._key,Ou.exists(!0))])}function dNt(e){return U6(zf(e.firestore,Ay),[new N6(e._key,Ou.none())])}function U6(e,t){return function(r,i){const s=new Kp;return r.asyncQueue.enqueueAndForget(async()=>DRt(await qRt(r),i,s)),s.promise}(wk(e),t)}function hNt(e,t,n){const r=n.docs.get(t._key),i=new iNe(e);return new rNe(e,i,t._key,r,new aC(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pNt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=L6(t)}set(t,n,r){this._verifyNotCommitted();const i=Rj(t,this._firestore),s=nNe(i.converter,n,r),o=GRe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ou.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=Rj(t,this._firestore);let o;return o=typeof(n=ni(n))=="string"||n instanceof Ek?KRe(this._dataReader,"WriteBatch.update",s._key,n,r,i):YRe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ou.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=Rj(t,this._firestore);return this._mutations=this._mutations.concat(new N6(n._key,Ou.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Rj(e,t){if((e=ni(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function mNt(){return new zQ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nde(e){return wk(e=zf(e,Ay)),new pNt(e,t=>U6(e,t))}(function(t,n=!0){(function(i){iS=i})(Tb),_m(new vh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ay(new dIt(r.getProvider("auth-internal")),new gIt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new P2(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Nf(vfe,"4.6.3",t),Nf(vfe,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oz=new Map,sNe={activated:!1,tokenObservers:[]},gNt={initialized:!1,enabled:!1};function Rs(e){return Oz.get(e)||Object.assign({},sNe)}function yNt(e,t){return Oz.set(e,t),Oz.get(e)}function z6(){return gNt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oNe="https://content-firebaseappcheck.googleapis.com/v1",vNt="exchangeRecaptchaV3Token",bNt="exchangeDebugToken",rde={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},_Nt=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wNt{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new C2,this.pending.promise.catch(n=>{}),await ENt(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new C2,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function ENt(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xNt={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Au=new tS("appCheck","AppCheck",xNt);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ide(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function YQ(e){if(!Rs(e).activated)throw Au.create("use-before-activation",{appName:e.name})}function aNe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=DN(n)+"d:"),r&&(o+=DN(r)+"h:"),o+=DN(i)+"m:"+DN(s)+"s",o}function DN(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KQ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Au.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Au.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Au.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Au.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function SNt(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${oNe}/projects/${n}/apps/${r}:${vNt}?key=${i}`,body:{recaptcha_v3_token:t}}}function uNe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${oNe}/projects/${n}/apps/${r}:${bNt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TNt="firebase-app-check-database",CNt=1,j2="firebase-app-check-store",lNe="debug-token";let PN=null;function cNe(){return PN||(PN=new Promise((e,t)=>{try{const n=indexedDB.open(TNt,CNt);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Au.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(j2,{keyPath:"compositeKey"})}}}catch(n){t(Au.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),PN)}function ANt(e){return dNe(hNe(e))}function INt(e,t){return fNe(hNe(e),t)}function kNt(e){return fNe(lNe,e)}function RNt(){return dNe(lNe)}async function fNe(e,t){const r=(await cNe()).transaction(j2,"readwrite"),s=r.objectStore(j2).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Au.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function dNe(e){const n=(await cNe()).transaction(j2,"readonly"),i=n.objectStore(j2).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Au.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function hNe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B2=new b6("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NNt(e){if(QX()){let t;try{t=await ANt(e)}catch(n){B2.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function Nj(e,t){return QX()?INt(e,t).catch(n=>{B2.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function DNt(){let e;try{e=await RNt()}catch{}if(e)return e;{const t=NSt();return kNt(t).catch(n=>B2.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XQ(){return z6().enabled}async function QQ(){const e=z6();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function PNt(){const e=RIe(),t=z6();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new C2;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(DNt())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ONt={error:"UNKNOWN_ERROR"};function $Nt(e){return XX.encodeString(JSON.stringify(e),!1)}async function $z(e,t=!1){const n=e.app;YQ(n);const r=Rs(n);let i=r.token,s;if(i&&!ew(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(ew(u)?i=u:await Nj(n,void 0))}if(!t&&i&&ew(i))return{token:i.token};let o=!1;if(XQ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=KQ(uNe(n,await QQ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await Nj(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Rs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?B2.warn(u.message):B2.error(u),s=u}let a;return i?s?ew(i)?a={token:i.token,internalError:s}:a=ode(s):(a={token:i.token},r.token=i,await Nj(n,i)):a=ode(s),o&&gNe(n,a),a}async function MNt(e){const t=e.app;YQ(t);const{provider:n}=Rs(t);if(XQ()){const r=await QQ(),{token:i}=await KQ(uNe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function pNe(e,t,n,r){const{app:i}=e,s=Rs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&ew(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),sde(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>sde(e))}function mNe(e,t){const n=Rs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function sde(e){const{app:t}=e,n=Rs(t);let r=n.tokenRefresher;r||(r=LNt(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function LNt(e){const{app:t}=e;return new wNt(async()=>{const n=Rs(t);let r;if(n.token?r=await $z(e,!0):r=await $z(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Rs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},rde.RETRIAL_MIN_WAIT,rde.RETRIAL_MAX_WAIT)}function gNe(e,t){const n=Rs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function ew(e){return e.expireTimeMillis-Date.now()>0}function ode(e){return{token:$Nt(ONt),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FNt{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Rs(this.app);for(const n of t)mNe(this.app,n.next);return Promise.resolve()}}function jNt(e,t){return new FNt(e,t)}function BNt(e){return{getToken:t=>$z(e,t),getLimitedUseToken:()=>MNt(e),addTokenListener:t=>pNe(e,"INTERNAL",t),removeTokenListener:t=>mNe(e.app,t)}}const UNt="@firebase/app-check",zNt="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VNt="https://www.google.com/recaptcha/api.js";function HNt(e,t){const n=new C2,r=Rs(e);r.reCAPTCHAState={initialized:n};const i=qNt(e),s=ide(!1);return s?ade(e,t,s,i,n):YNt(()=>{const o=ide(!1);if(!o)throw new Error("no recaptcha");ade(e,t,o,i,n)}),n.promise}function ade(e,t,n,r,i){n.ready(()=>{GNt(e,t,n,r),i.resolve(n)})}function qNt(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function WNt(e){YQ(e);const n=await Rs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Rs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function GNt(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Rs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Rs(e).reCAPTCHAState.succeeded=!1}}),s=Rs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function YNt(e){const t=document.createElement("script");t.src=VNt,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JQ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;XNt(this._throttleData);const i=await WNt(this._app).catch(o=>{throw Au.create("recaptcha-error")});if(!(!((t=Rs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Au.create("recaptcha-error");let s;try{s=await KQ(SNt(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=KNt(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Au.create("throttled",{time:aNe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=nS(t,"heartbeat"),HNt(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof JQ?this._siteKey===t._siteKey:!1}}function KNt(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+_Nt,httpStatus:e};{const n=t?t.backoffCount:0,r=MSt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function XNt(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Au.create("throttled",{time:aNe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QNt(e=ZX(),t){e=ni(e);const n=nS(e,"app-check");if(z6().initialized||PNt(),XQ()&&QQ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Au.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return JNt(e,t.provider,t.isTokenAutoRefreshEnabled),Rs(e).isTokenAutoRefreshEnabled&&pNe(r,"INTERNAL",()=>{}),r}function JNt(e,t,n){const r=yNt(e,Object.assign({},sNe));r.activated=!0,r.provider=t,r.cachedTokenPromise=NNt(e).then(i=>(i&&ew(i)&&(r.token=i,gNe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const ZNt="app-check",ude="app-check-internal";function eDt(){_m(new vh(ZNt,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return jNt(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(ude).initialize()})),_m(new vh(ude,e=>{const t=e.getProvider("app-check").getImmediate();return BNt(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Nf(UNt,zNt)}eDt();function ON(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var yNe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof ON=="function"&&ON;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof ON=="function"&&ON,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Ks<"u"?Ks:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(x){if(typeof x!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,x!==o&&m(this,x)}f.prototype.catch=function(x){return this.then(null,x)},f.prototype.then=function(x,T){if(typeof x!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var C=this.state===l?x:T;h(S,C,this.outcome)}else this.queue.push(new d(S,x,T));return S};function d(x,T,S){this.promise=x,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(x){a.resolve(this.promise,x)},d.prototype.otherCallFulfilled=function(x){h(this.promise,this.onFulfilled,x)},d.prototype.callRejected=function(x){a.reject(this.promise,x)},d.prototype.otherCallRejected=function(x){h(this.promise,this.onRejected,x)};function h(x,T,S){s(function(){var C;try{C=T(S)}catch(A){return a.reject(x,A)}C===x?a.reject(x,new TypeError("Cannot resolve promise with itself")):a.resolve(x,C)})}a.resolve=function(x,T){var S=g(p,T);if(S.status==="error")return a.reject(x,S.value);var C=S.value;if(C)m(x,C);else{x.state=l,x.outcome=T;for(var A=-1,R=x.queue.length;++A<R;)x.queue[A].callFulfilled(T)}return x},a.reject=function(x,T){x.state=u,x.outcome=T;for(var S=-1,C=x.queue.length;++S<C;)x.queue[S].callRejected(T);return x};function p(x){var T=x&&x.then;if(x&&(typeof x=="object"||typeof x=="function")&&typeof T=="function")return function(){T.apply(x,arguments)}}function m(x,T){var S=!1;function C(O){S||(S=!0,a.reject(x,O))}function A(O){S||(S=!0,a.resolve(x,O))}function R(){T(A,C)}var k=g(R);k.status==="error"&&C(k.value)}function g(x,T){var S={};try{S.value=x(T),S.status="success"}catch(C){S.status="error",S.value=C}return S}f.resolve=y;function y(x){return x instanceof this?x:a.resolve(new this(o),x)}f.reject=v;function v(x){var T=new this(o);return a.reject(T,x)}f.all=b;function b(x){var T=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,C=!1;if(!S)return this.resolve([]);for(var A=new Array(S),R=0,k=-1,O=new this(o);++k<S;)D(x[k],k);return O;function D($,L){T.resolve($).then(F,function(B){C||(C=!0,a.reject(O,B))});function F(B){A[L]=B,++R===S&&!C&&(C=!0,a.resolve(O,A))}}}f.race=w;function w(x){var T=this;if(Object.prototype.toString.call(x)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=x.length,C=!1;if(!S)return this.resolve([]);for(var A=-1,R=new this(o);++A<S;)k(x[A]);return R;function k(O){T.resolve(O).then(function(D){C||(C=!0,a.resolve(R,D))},function(D){C||(C=!0,a.reject(R,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Ks<"u"?Ks:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,ce=new Z,ge=0;ge<Y.length;ge+=1)ce.append(Y[ge]);return ce.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",x="readwrite";function T(Y){for(var se=Y.length,Z=new ArrayBuffer(se),ce=new Uint8Array(Z),ge=0;ge<se;ge++)ce[ge]=Y.charCodeAt(ge);return Z}function S(Y){return new f(function(se){var Z=Y.transaction(g,x),ce=c([""]);Z.objectStore(g).put(ce,"key"),Z.onabort=function(ge){ge.preventDefault(),ge.stopPropagation(),se(!1)},Z.oncomplete=function(){var ge=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ge||parseInt(ge[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):S(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(ce,ge){Z.resolve=ce,Z.reject=ge}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function R(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function k(Y,se){var Z=v[Y.name],ce=Z.deferredOperations.pop();if(ce)return ce.reject(se),ce.promise}function O(Y,se){return new f(function(Z,ce){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ge=[Y.name];se&&ge.push(Y.version);var le=u.open.apply(u,ge);se&&(le.onupgradeneeded=function(Pe){var Ue=le.result;try{Ue.createObjectStore(Y.storeName),Pe.oldVersion<=1&&Ue.createObjectStore(g)}catch(He){if(He.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Pe.oldVersion+" to version "+Pe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw He}}),le.onerror=function(Pe){Pe.preventDefault(),ce(le.error)},le.onsuccess=function(){var Pe=le.result;Pe.onversionchange=function(Ue){Ue.target.close()},Z(Pe),R(Y)}})}function D(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function L(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),ce=Y.version<Y.db.version,ge=Y.version>Y.db.version;if(ce&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ge||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function F(Y){return new f(function(se,Z){var ce=new FileReader;ce.onerror=Z,ce.onloadend=function(ge){var le=btoa(ge.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},ce.readAsBinaryString(Y)})}function B(Y){var se=T(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function q(Y){var se=this,Z=se._initReady().then(function(){var ce=v[se._dbInfo.name];if(ce&&ce.dbReady)return ce.dbReady});return h(Z,Y,Y),Z}function P(Y){A(Y);for(var se=v[Y.name],Z=se.forages,ce=0;ce<Z.length;ce++){var ge=Z[ce];ge._dbInfo.db&&(ge._dbInfo.db.close(),ge._dbInfo.db=null)}return Y.db=null,D(Y).then(function(le){return Y.db=le,L(Y)?$(Y):le}).then(function(le){Y.db=se.db=le;for(var Pe=0;Pe<Z.length;Pe++)Z[Pe]._dbInfo.db=le}).catch(function(le){throw k(Y,le),le})}function V(Y,se,Z,ce){ce===void 0&&(ce=1);try{var ge=Y.db.transaction(Y.storeName,se);Z(null,ge)}catch(le){if(ce>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return P(Y).then(function(){V(Y,se,Z,ce-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var ce in Y)Z[ce]=Y[ce];var ge=v[Z.name];ge||(ge=W(),v[Z.name]=ge),ge.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=q);var le=[];function Pe(){return f.resolve()}for(var Ue=0;Ue<ge.forages.length;Ue++){var He=ge.forages[Ue];He!==se&&le.push(He._initReady().catch(Pe))}var We=ge.forages.slice(0);return f.all(le).then(function(){return Z.db=ge.db,D(Z)}).then(function(it){return Z.db=it,L(Z,se._defaultConfig.version)?$(Z):it}).then(function(it){Z.db=ge.db=it,se._dbInfo=Z;for(var Et=0;Et<We.length;Et++){var dn=We[Et];dn!==se&&(dn._dbInfo.db=Z.db,dn._dbInfo.version=Z.version)}})}function H(Y,se){var Z=this;Y=p(Y);var ce=new f(function(ge,le){Z.ready().then(function(){V(Z._dbInfo,w,function(Pe,Ue){if(Pe)return le(Pe);try{var He=Ue.objectStore(Z._dbInfo.storeName),We=He.get(Y);We.onsuccess=function(){var it=We.result;it===void 0&&(it=null),U(it)&&(it=B(it)),ge(it)},We.onerror=function(){le(We.error)}}catch(it){le(it)}})}).catch(le)});return d(ce,se),ce}function G(Y,se){var Z=this,ce=new f(function(ge,le){Z.ready().then(function(){V(Z._dbInfo,w,function(Pe,Ue){if(Pe)return le(Pe);try{var He=Ue.objectStore(Z._dbInfo.storeName),We=He.openCursor(),it=1;We.onsuccess=function(){var Et=We.result;if(Et){var dn=Et.value;U(dn)&&(dn=B(dn));var Nt=Y(dn,Et.key,it++);Nt!==void 0?ge(Nt):Et.continue()}else ge()},We.onerror=function(){le(We.error)}}catch(Et){le(Et)}})}).catch(le)});return d(ce,se),ce}function ne(Y,se,Z){var ce=this;Y=p(Y);var ge=new f(function(le,Pe){var Ue;ce.ready().then(function(){return Ue=ce._dbInfo,b.call(se)==="[object Blob]"?C(Ue.db).then(function(He){return He?se:F(se)}):se}).then(function(He){V(ce._dbInfo,x,function(We,it){if(We)return Pe(We);try{var Et=it.objectStore(ce._dbInfo.storeName);He===null&&(He=void 0);var dn=Et.put(He,Y);it.oncomplete=function(){He===void 0&&(He=null),le(He)},it.onabort=it.onerror=function(){var Nt=dn.error?dn.error:dn.transaction.error;Pe(Nt)}}catch(Nt){Pe(Nt)}})}).catch(Pe)});return d(ge,Z),ge}function pe(Y,se){var Z=this;Y=p(Y);var ce=new f(function(ge,le){Z.ready().then(function(){V(Z._dbInfo,x,function(Pe,Ue){if(Pe)return le(Pe);try{var He=Ue.objectStore(Z._dbInfo.storeName),We=He.delete(Y);Ue.oncomplete=function(){ge()},Ue.onerror=function(){le(We.error)},Ue.onabort=function(){var it=We.error?We.error:We.transaction.error;le(it)}}catch(it){le(it)}})}).catch(le)});return d(ce,se),ce}function fe(Y){var se=this,Z=new f(function(ce,ge){se.ready().then(function(){V(se._dbInfo,x,function(le,Pe){if(le)return ge(le);try{var Ue=Pe.objectStore(se._dbInfo.storeName),He=Ue.clear();Pe.oncomplete=function(){ce()},Pe.onabort=Pe.onerror=function(){var We=He.error?He.error:He.transaction.error;ge(We)}}catch(We){ge(We)}})}).catch(ge)});return d(Z,Y),Z}function de(Y){var se=this,Z=new f(function(ce,ge){se.ready().then(function(){V(se._dbInfo,w,function(le,Pe){if(le)return ge(le);try{var Ue=Pe.objectStore(se._dbInfo.storeName),He=Ue.count();He.onsuccess=function(){ce(He.result)},He.onerror=function(){ge(He.error)}}catch(We){ge(We)}})}).catch(ge)});return d(Z,Y),Z}function ye(Y,se){var Z=this,ce=new f(function(ge,le){if(Y<0){ge(null);return}Z.ready().then(function(){V(Z._dbInfo,w,function(Pe,Ue){if(Pe)return le(Pe);try{var He=Ue.objectStore(Z._dbInfo.storeName),We=!1,it=He.openKeyCursor();it.onsuccess=function(){var Et=it.result;if(!Et){ge(null);return}Y===0||We?ge(Et.key):(We=!0,Et.advance(Y))},it.onerror=function(){le(it.error)}}catch(Et){le(Et)}})}).catch(le)});return d(ce,se),ce}function Ae(Y){var se=this,Z=new f(function(ce,ge){se.ready().then(function(){V(se._dbInfo,w,function(le,Pe){if(le)return ge(le);try{var Ue=Pe.objectStore(se._dbInfo.storeName),He=Ue.openKeyCursor(),We=[];He.onsuccess=function(){var it=He.result;if(!it){ce(We);return}We.push(it.key),it.continue()},He.onerror=function(){ge(He.error)}}catch(it){ge(it)}})}).catch(ge)});return d(Z,Y),Z}function ve(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var ce=this,ge;if(!Y.name)ge=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&ce._dbInfo.db,Pe=le?f.resolve(ce._dbInfo.db):D(Y).then(function(Ue){var He=v[Y.name],We=He.forages;He.db=Ue;for(var it=0;it<We.length;it++)We[it]._dbInfo.db=Ue;return Ue});Y.storeName?ge=Pe.then(function(Ue){if(Ue.objectStoreNames.contains(Y.storeName)){var He=Ue.version+1;A(Y);var We=v[Y.name],it=We.forages;Ue.close();for(var Et=0;Et<it.length;Et++){var dn=it[Et];dn._dbInfo.db=null,dn._dbInfo.version=He}var Nt=new f(function(Ln,Ar){var Ir=u.open(Y.name,He);Ir.onerror=function(jo){var od=Ir.result;od.close(),Ar(jo)},Ir.onupgradeneeded=function(){var jo=Ir.result;jo.deleteObjectStore(Y.storeName)},Ir.onsuccess=function(){var jo=Ir.result;jo.close(),Ln(jo)}});return Nt.then(function(Ln){We.db=Ln;for(var Ar=0;Ar<it.length;Ar++){var Ir=it[Ar];Ir._dbInfo.db=Ln,R(Ir._dbInfo)}}).catch(function(Ln){throw(k(Y,Ln)||f.resolve()).catch(function(){}),Ln})}}):ge=Pe.then(function(Ue){A(Y);var He=v[Y.name],We=He.forages;Ue.close();for(var it=0;it<We.length;it++){var Et=We[it];Et._dbInfo.db=null}var dn=new f(function(Nt,Ln){var Ar=u.deleteDatabase(Y.name);Ar.onerror=function(){var Ir=Ar.result;Ir&&Ir.close(),Ln(Ar.error)},Ar.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Ar.onsuccess=function(){var Ir=Ar.result;Ir&&Ir.close(),Nt(Ir)}});return dn.then(function(Nt){He.db=Nt;for(var Ln=0;Ln<We.length;Ln++){var Ar=We[Ln];R(Ar._dbInfo)}}).catch(function(Nt){throw(k(Y,Nt)||f.resolve()).catch(function(){}),Nt})})}return d(ge,se),ge}var rt={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:H,setItem:ne,removeItem:pe,clear:fe,length:de,key:ye,keys:Ae,dropInstance:ve};function ze(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ot="~~local_forage_type~",De=/^~~local_forage_type~([^~]+)~/,Me="__lfsc__:",Ye=Me.length,pt="arbf",Pt="blob",qe="si08",me="ui08",ft="uic8",vt="si16",he="si32",Ce="ur16",Ve="ui32",ut="fl32",_t="fl64",On=Ye+pt.length,Sr=Object.prototype.toString;function $n(Y){var se=Y.length*.75,Z=Y.length,ce,ge=0,le,Pe,Ue,He;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var We=new ArrayBuffer(se),it=new Uint8Array(We);for(ce=0;ce<Z;ce+=4)le=yt.indexOf(Y[ce]),Pe=yt.indexOf(Y[ce+1]),Ue=yt.indexOf(Y[ce+2]),He=yt.indexOf(Y[ce+3]),it[ge++]=le<<2|Pe>>4,it[ge++]=(Pe&15)<<4|Ue>>2,it[ge++]=(Ue&3)<<6|He&63;return We}function ur(Y){var se=new Uint8Array(Y),Z="",ce;for(ce=0;ce<se.length;ce+=3)Z+=yt[se[ce]>>2],Z+=yt[(se[ce]&3)<<4|se[ce+1]>>4],Z+=yt[(se[ce+1]&15)<<2|se[ce+2]>>6],Z+=yt[se[ce+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function hn(Y,se){var Z="";if(Y&&(Z=Sr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Sr.call(Y.buffer)==="[object ArrayBuffer]")){var ce,ge=Me;Y instanceof ArrayBuffer?(ce=Y,ge+=pt):(ce=Y.buffer,Z==="[object Int8Array]"?ge+=qe:Z==="[object Uint8Array]"?ge+=me:Z==="[object Uint8ClampedArray]"?ge+=ft:Z==="[object Int16Array]"?ge+=vt:Z==="[object Uint16Array]"?ge+=Ce:Z==="[object Int32Array]"?ge+=he:Z==="[object Uint32Array]"?ge+=Ve:Z==="[object Float32Array]"?ge+=ut:Z==="[object Float64Array]"?ge+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ge+ur(ce))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Pe=ot+Y.type+"~"+ur(this.result);se(Me+Pt+Pe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Pe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Pe)}}function xn(Y){if(Y.substring(0,Ye)!==Me)return JSON.parse(Y);var se=Y.substring(On),Z=Y.substring(Ye,On),ce;if(Z===Pt&&De.test(se)){var ge=se.match(De);ce=ge[1],se=se.substring(ge[0].length)}var le=$n(se);switch(Z){case pt:return le;case Pt:return c([le],{type:ce});case qe:return new Int8Array(le);case me:return new Uint8Array(le);case ft:return new Uint8ClampedArray(le);case vt:return new Int16Array(le);case Ce:return new Uint16Array(le);case he:return new Int32Array(le);case Ve:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var er={serialize:hn,deserialize:xn,stringToBuffer:$n,bufferToString:ur};function tr(Y,se,Z,ce){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,ce)}function Lo(Y){var se=this,Z={db:null};if(Y)for(var ce in Y)Z[ce]=typeof Y[ce]!="string"?Y[ce].toString():Y[ce];var ge=new f(function(le,Pe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ue){return Pe(Ue)}Z.db.transaction(function(Ue){tr(Ue,Z,function(){se._dbInfo=Z,le()},function(He,We){Pe(We)})},Pe)});return Z.serializer=er,ge}function Di(Y,se,Z,ce,ge,le){Y.executeSql(Z,ce,ge,function(Pe,Ue){Ue.code===Ue.SYNTAX_ERR?Pe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(He,We){We.rows.length?le(He,Ue):tr(He,se,function(){He.executeSql(Z,ce,ge,le)},le)},le):le(Pe,Ue)},le)}function Sn(Y,se){var Z=this;Y=p(Y);var ce=new f(function(ge,le){Z.ready().then(function(){var Pe=Z._dbInfo;Pe.db.transaction(function(Ue){Di(Ue,Pe,"SELECT * FROM "+Pe.storeName+" WHERE key = ? LIMIT 1",[Y],function(He,We){var it=We.rows.length?We.rows.item(0).value:null;it&&(it=Pe.serializer.deserialize(it)),ge(it)},function(He,We){le(We)})})}).catch(le)});return d(ce,se),ce}function Pi(Y,se){var Z=this,ce=new f(function(ge,le){Z.ready().then(function(){var Pe=Z._dbInfo;Pe.db.transaction(function(Ue){Di(Ue,Pe,"SELECT * FROM "+Pe.storeName,[],function(He,We){for(var it=We.rows,Et=it.length,dn=0;dn<Et;dn++){var Nt=it.item(dn),Ln=Nt.value;if(Ln&&(Ln=Pe.serializer.deserialize(Ln)),Ln=Y(Ln,Nt.key,dn+1),Ln!==void 0){ge(Ln);return}}ge()},function(He,We){le(We)})})}).catch(le)});return d(ce,se),ce}function Tr(Y,se,Z,ce){var ge=this;Y=p(Y);var le=new f(function(Pe,Ue){ge.ready().then(function(){se===void 0&&(se=null);var He=se,We=ge._dbInfo;We.serializer.serialize(se,function(it,Et){Et?Ue(Et):We.db.transaction(function(dn){Di(dn,We,"INSERT OR REPLACE INTO "+We.storeName+" (key, value) VALUES (?, ?)",[Y,it],function(){Pe(He)},function(Nt,Ln){Ue(Ln)})},function(dn){if(dn.code===dn.QUOTA_ERR){if(ce>0){Pe(Tr.apply(ge,[Y,He,Z,ce-1]));return}Ue(dn)}})})}).catch(Ue)});return d(le,Z),le}function cs(Y,se,Z){return Tr.apply(this,[Y,se,Z,1])}function Jh(Y,se){var Z=this;Y=p(Y);var ce=new f(function(ge,le){Z.ready().then(function(){var Pe=Z._dbInfo;Pe.db.transaction(function(Ue){Di(Ue,Pe,"DELETE FROM "+Pe.storeName+" WHERE key = ?",[Y],function(){ge()},function(He,We){le(We)})})}).catch(le)});return d(ce,se),ce}function Zu(Y){var se=this,Z=new f(function(ce,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Pe){Di(Pe,le,"DELETE FROM "+le.storeName,[],function(){ce()},function(Ue,He){ge(He)})})}).catch(ge)});return d(Z,Y),Z}function id(Y){var se=this,Z=new f(function(ce,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Pe){Di(Pe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ue,He){var We=He.rows.item(0).c;ce(We)},function(Ue,He){ge(He)})})}).catch(ge)});return d(Z,Y),Z}function _r(Y,se){var Z=this,ce=new f(function(ge,le){Z.ready().then(function(){var Pe=Z._dbInfo;Pe.db.transaction(function(Ue){Di(Ue,Pe,"SELECT key FROM "+Pe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(He,We){var it=We.rows.length?We.rows.item(0).key:null;ge(it)},function(He,We){le(We)})})}).catch(le)});return d(ce,se),ce}function xi(Y){var se=this,Z=new f(function(ce,ge){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Pe){Di(Pe,le,"SELECT key FROM "+le.storeName,[],function(Ue,He){for(var We=[],it=0;it<He.rows.length;it++)We.push(He.rows.item(it).key);ce(We)},function(Ue,He){ge(He)})})}).catch(ge)});return d(Z,Y),Z}function Kr(Y){return new f(function(se,Z){Y.transaction(function(ce){ce.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ge,le){for(var Pe=[],Ue=0;Ue<le.rows.length;Ue++)Pe.push(le.rows.item(Ue).name);se({db:Y,storeNames:Pe})},function(ge,le){Z(le)})},function(ce){Z(ce)})})}function ru(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var ce=this,ge;return Y.name?ge=new f(function(le){var Pe;Y.name===Z.name?Pe=ce._dbInfo.db:Pe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Pe,storeNames:[Y.storeName]}):le(Kr(Pe))}).then(function(le){return new f(function(Pe,Ue){le.db.transaction(function(He){function We(Nt){return new f(function(Ln,Ar){He.executeSql("DROP TABLE IF EXISTS "+Nt,[],function(){Ln()},function(Ir,jo){Ar(jo)})})}for(var it=[],Et=0,dn=le.storeNames.length;Et<dn;Et++)it.push(We(le.storeNames[Et]));f.all(it).then(function(){Pe()}).catch(function(Nt){Ue(Nt)})},function(He){Ue(He)})})}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var Ea={_driver:"webSQLStorage",_initStorage:Lo,_support:ze(),iterate:Pi,getItem:Sn,setItem:cs,removeItem:Jh,clear:Zu,length:id,key:_r,keys:xi,dropInstance:ru};function xa(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Se(Y){var se=this,Z={};if(Y)for(var ce in Y)Z[ce]=Y[ce];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=er,f.resolve()):f.reject()}function xe(Y){var se=this,Z=se.ready().then(function(){for(var ce=se._dbInfo.keyPrefix,ge=localStorage.length-1;ge>=0;ge--){var le=localStorage.key(ge);le.indexOf(ce)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function st(Y,se){var Z=this;Y=p(Y);var ce=Z.ready().then(function(){var ge=Z._dbInfo,le=localStorage.getItem(ge.keyPrefix+Y);return le&&(le=ge.serializer.deserialize(le)),le});return d(ce,se),ce}function St(Y,se){var Z=this,ce=Z.ready().then(function(){for(var ge=Z._dbInfo,le=ge.keyPrefix,Pe=le.length,Ue=localStorage.length,He=1,We=0;We<Ue;We++){var it=localStorage.key(We);if(it.indexOf(le)===0){var Et=localStorage.getItem(it);if(Et&&(Et=ge.serializer.deserialize(Et)),Et=Y(Et,it.substring(Pe),He++),Et!==void 0)return Et}}});return d(ce,se),ce}function Vt(Y,se){var Z=this,ce=Z.ready().then(function(){var ge=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ge.keyPrefix.length)),le});return d(ce,se),ce}function Nn(Y){var se=this,Z=se.ready().then(function(){for(var ce=se._dbInfo,ge=localStorage.length,le=[],Pe=0;Pe<ge;Pe++){var Ue=localStorage.key(Pe);Ue.indexOf(ce.keyPrefix)===0&&le.push(Ue.substring(ce.keyPrefix.length))}return le});return d(Z,Y),Z}function Mn(Y){var se=this,Z=se.keys().then(function(ce){return ce.length});return d(Z,Y),Z}function fn(Y,se){var Z=this;Y=p(Y);var ce=Z.ready().then(function(){var ge=Z._dbInfo;localStorage.removeItem(ge.keyPrefix+Y)});return d(ce,se),ce}function nr(Y,se,Z){var ce=this;Y=p(Y);var ge=ce.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Pe,Ue){var He=ce._dbInfo;He.serializer.serialize(se,function(We,it){if(it)Ue(it);else try{localStorage.setItem(He.keyPrefix+Y,We),Pe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ue(Et),Ue(Et)}})})});return d(ge,Z),ge}function Cr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var ce=this,ge;return Y.name?ge=new f(function(le){Y.storeName?le(oe(Y,ce._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Pe=localStorage.length-1;Pe>=0;Pe--){var Ue=localStorage.key(Pe);Ue.indexOf(le)===0&&localStorage.removeItem(Ue)}}):ge=f.reject("Invalid arguments"),d(ge,se),ge}var zt={_driver:"localStorageWrapper",_initStorage:Se,_support:xa(),iterate:St,getItem:st,setItem:nr,removeItem:fn,clear:xe,length:Mn,key:Vt,keys:Nn,dropInstance:Cr},rr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Ur=function(se,Z){for(var ce=se.length,ge=0;ge<ce;){if(rr(se[ge],Z))return!0;ge++}return!1},Xn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Si={},Ls={},Xr={INDEXEDDB:rt,WEBSQL:Ea,LOCALSTORAGE:zt},uo=[Xr.INDEXEDDB._driver,Xr.WEBSQL._driver,Xr.LOCALSTORAGE._driver],Oi=["dropInstance"],$i=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Oi),Fo={description:"",driver:uo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Sa(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Fs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Xn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var Hl=function(){function Y(se){o(this,Y);for(var Z in Xr)if(Xr.hasOwnProperty(Z)){var ce=Xr[Z],ge=ce._driver;this[Z]=ge,Si[ge]||this.defineDriver(ce)}this._defaultConfig=Fs({},Fo),this._config=Fs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var ce in Z){if(ce==="storeName"&&(Z[ce]=Z[ce].replace(/\W/g,"_")),ce==="version"&&typeof Z[ce]!="number")return new Error("Database version must be a number.");this._config[ce]=Z[ce]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,ce,ge){var le=new f(function(Pe,Ue){try{var He=Z._driver,We=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ue(We);return}for(var it=$i.concat("_initStorage"),Et=0,dn=it.length;Et<dn;Et++){var Nt=it[Et],Ln=!Ur(Oi,Nt);if((Ln||Z[Nt])&&typeof Z[Nt]!="function"){Ue(We);return}}var Ar=function(){for(var od=function(ql){return function(){var iu=new Error("Method "+ql+" is not implemented by the current driver"),ep=f.reject(iu);return d(ep,arguments[arguments.length-1]),ep}},Zh=0,RS=Oi.length;Zh<RS;Zh++){var By=Oi[Zh];Z[By]||(Z[By]=od(By))}};Ar();var Ir=function(od){Si[He]&&console.info("Redefining LocalForage driver: "+He),Si[He]=Z,Ls[He]=od,Pe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Ir,Ue):Ir(!!Z._support):Ir(!0)}catch(jo){Ue(jo)}});return h(le,ce,ge),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,ce,ge){var le=Si[Z]?f.resolve(Si[Z]):f.reject(new Error("Driver not found."));return h(le,ce,ge),le},Y.prototype.getSerializer=function(Z){var ce=f.resolve(er);return h(ce,Z),ce},Y.prototype.ready=function(Z){var ce=this,ge=ce._driverSet.then(function(){return ce._ready===null&&(ce._ready=ce._initDriver()),ce._ready});return h(ge,Z,Z),ge},Y.prototype.setDriver=function(Z,ce,ge){var le=this;Xn(Z)||(Z=[Z]);var Pe=this._getSupportedDrivers(Z);function Ue(){le._config.driver=le.driver()}function He(Et){return le._extend(Et),Ue(),le._ready=le._initStorage(le._config),le._ready}function We(Et){return function(){var dn=0;function Nt(){for(;dn<Et.length;){var Ln=Et[dn];return dn++,le._dbInfo=null,le._ready=null,le.getDriver(Ln).then(He).catch(Nt)}Ue();var Ar=new Error("No available storage method found.");return le._driverSet=f.reject(Ar),le._driverSet}return Nt()}}var it=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=it.then(function(){var Et=Pe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(dn){le._driver=dn._driver,Ue(),le._wrapLibraryMethodsWithReady(),le._initDriver=We(Pe)})}).catch(function(){Ue();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,ce,ge),this._driverSet},Y.prototype.supports=function(Z){return!!Ls[Z]},Y.prototype._extend=function(Z){Fs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var ce=[],ge=0,le=Z.length;ge<le;ge++){var Pe=Z[ge];this.supports(Pe)&&ce.push(Pe)}return ce},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,ce=$i.length;Z<ce;Z++)Sa(this,$i[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),sd=new Hl;r.exports=sd},{3:3}]},{},[4])(4)})})(yNe);var tDt=yNe.exports;const Mz=jl(tDt);var po=[];for(var Dj=0;Dj<256;++Dj)po.push((Dj+256).toString(16).slice(1));function nDt(e,t=0){return(po[e[t+0]]+po[e[t+1]]+po[e[t+2]]+po[e[t+3]]+"-"+po[e[t+4]]+po[e[t+5]]+"-"+po[e[t+6]]+po[e[t+7]]+"-"+po[e[t+8]]+po[e[t+9]]+"-"+po[e[t+10]]+po[e[t+11]]+po[e[t+12]]+po[e[t+13]]+po[e[t+14]]+po[e[t+15]]).toLowerCase()}var $N,rDt=new Uint8Array(16);function iDt(){if(!$N&&($N=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$N))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $N(rDt)}var sDt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const lde={randomUUID:sDt};function f$(e,t,n){if(lde.randomUUID&&!t&&!e)return lde.randomUUID();e=e||{};var r=e.random||(e.rng||iDt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,nDt(r)}class vNe{constructor(t){tl(this,"engine");tl(this,"connected",!1);tl(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function Fw(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function dT(e){return e.participantId!==void 0}class vp extends vNe{constructor(){super("firebase");tl(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");tl(this,"firestore");tl(this,"collectionPrefix","prod-");tl(this,"studyCollection");tl(this,"storage");tl(this,"studyId","");tl(this,"localForage",Mz.createInstance({name:"currentParticipantId"}));tl(this,"participantData",null);const n=oX.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=MIe(n);this.firestore=QRt(r,{}),this.storage=oIt();try{QNt(r,{provider:new JQ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await JRt(this.firestore);const n=await js(this.firestore,".info/connected");await kj(n),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=i$();if(!i.currentUser&&(await TCt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await Fw(JSON.stringify(r));if(this.studyCollection=Wc(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");if(dT(o))return this.participantData=o,o;const a=await Fw(JSON.stringify(r));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=f$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=js(this.studyCollection,"sequenceAssignment");await Gc(r,{});const i=Wc(r,"sequenceAssignment"),s=js(i,this.currentParticipantId),o=Zfe(i,oNt("participantId","==","")),a=await fT(o);if(a.docs.length>0){const h=a.docs[0],p=h.data().timestamp;await dNt(h.ref),await Gc(s,{participantId:this.currentParticipantId,timestamp:p})}else await Gc(s,{participantId:this.currentParticipantId,timestamp:mNt()});const u=Zfe(i,aNt("timestamp","asc")),f=(await fT(u)).docs.map(h=>h.data()).findIndex(h=>h.participantId===this.currentParticipantId),d=n[f%n.length];if(!d)throw new Error("Latin square is empty");return d}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=qc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await lT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");dT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return dT(n)?n:null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const i=f$();await this.localForage.setItem("currentParticipantId",i),this.currentParticipantId=i;const s=await Fw(JSON.stringify(n)),o={participantId:i,participantConfigHash:s,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};return await this._pushToFirebaseStorage(`participants/${i}`,"participantData",o),o}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");return this.participantData.completed=!0,await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=Wc(this.firestore,"user-management"),i=await fT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.user.uid=n.user.uid),await Gc(js(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await Gc(js(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await Gc(js(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await Gc(js(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await Gc(js(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=qc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await lT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");dT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=Wc(this.firestore,`${this.collectionPrefix}${n}`),s=qc(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!dT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=js(i,"sequenceAssignment"),u=Wc(a,"sequenceAssignment"),l=js(u,r);await fNt(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=js(this.firestore,"metadata","collections"),i=await kj(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=js(this.firestore,"metadata","collections");await Gc(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=js(this.firestore,"metadata","collections"),i=await kj(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await Gc(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=qc(this.storage,n),s=(await lT(r)).items.map(o=>gfe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=qc(this.storage,n),o=(await lT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=qc(this.storage,n),s=qc(this.storage,r),o=await Sj(i),u=await(await fetch(o)).blob();await xj(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=Wc(this.firestore,n),s=js(i,"sequenceAssignment"),o=Wc(s,"sequenceAssignment"),a=Wc(this.firestore,r),u=js(a,"sequenceAssignment");await Gc(u,{});const l=Wc(u,"sequenceAssignment"),c=await fT(o),f=nde(this.firestore);c.docs.forEach(d=>{const h=js(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=Wc(this.firestore,n),i=js(r,"sequenceAssignment"),s=Wc(i,"sequenceAssignment"),o=await fT(s),a=nde(this.firestore);o.forEach(u=>{const l=js(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=qc(this.storage,n);return(await lT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=qc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await Sj(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await Sj(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=qc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await xj(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await xj(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=qc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await gfe(i)}}const bNe=N.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),uS=()=>N.useContext(bNe);function oDt({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=N.useState(t),[o,a]=N.useState(!1),{storageEngine:u}=ba(),l=async()=>{const h=i$();try{await DCt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;N.useEffect(()=>{s(t);let h;if(u instanceof vp)try{h=i$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof vp){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=NCt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=N.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx(bNe.Provider,{value:d,children:i.determiningStatus?_.jsx(_c,{visible:!0}):e})}function aDt(){const{config:e,metadata:t}=$c(b=>b),n=NG(),r=Oh(),{toggleShowHelpText:i,toggleStudyBrowser:s}=Ph(),{storageEngine:o}=ba(),a=Mm();uS();const u=n.length-1,l=typeof a=="number"?a/u*100:0,[c,f]=N.useState(!1),d=e==null?void 0:e.uiConfig.logoPath,h=e==null?void 0:e.uiConfig.withProgressBar,p=OI(),m=ybe(`/${p}`),g=N.useRef(null),[y,v]=N.useState(!1);return N.useEffect(()=>{const b=g.current;b&&v(b.scrollWidth>b.offsetWidth)},[e]),_.jsx(fi.Header,{p:"md",children:_.jsxs(Fa,{mt:-7,align:"center",children:[_.jsx(Fa.Col,{span:4,children:_.jsxs(qt,{align:"center",children:[_.jsx(py,{w:40,src:`${Nh}${d}`,alt:"Study Logo"}),_.jsx(If,{w:"md"}),_.jsx(ns,{ref:g,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:y?e==null?void 0:e.studyMetadata.title:void 0,children:e==null?void 0:e.studyMetadata.title})]})}),_.jsx(Fa.Col,{span:4,children:h&&_.jsx(Ax,{radius:"md",size:"lg",value:l})}),_.jsx(Fa.Col,{span:4,children:_.jsxs(Xs,{wrap:"nowrap",justify:"right",children:[_.jsx(ia,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data. Navigate the study via the study browser on the right.",children:_.jsx(zp,{size:"lg",color:"orange",children:"Demo Mode"})}),(e==null?void 0:e.uiConfig.helpTextPath)!==void 0&&_.jsx(jn,{variant:"outline",onClick:()=>r(i()),children:"Help"}),_.jsxs(gu,{shadow:"md",width:200,withinPortal:!0,opened:c,onChange:f,children:[_.jsx(gu.Target,{children:_.jsx(w0,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(PGe,{})})}),_.jsxs(gu.Dropdown,{children:[_.jsx(gu.Item,{leftSection:_.jsx(UGe,{size:14}),onClick:()=>r(s()),children:"Study Browser"}),_.jsx(gu.Item,{component:"a",href:e!==null?`mailto:${e.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(LGe,{size:14}),children:"Contact"}),_.jsx(gu.Item,{leftSection:_.jsx(sG,{size:14}),onClick:()=>CIe(o,e,t,m),children:"Next Participant"})]})]})]})})]})})}function uDt(){var u;const e=(u=cm())==null?void 0:u.uiConfig.sidebar,t=cm(),n=yy(),r=t.components[n],i=N.useMemo(()=>{var l;return r?y6(r)&&t.baseComponents?DG({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=PG(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(fi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(fi.Section,{bg:"gray.3",p:"md",children:_.jsxs(et,{c:"gray.9",children:[_.jsx(et,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(qa,{text:o})]})}),_.jsx(fi.Section,{p:"md",children:_.jsx(vO,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(fi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(vO,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function lDt(){const{showHelpText:e,config:t}=$c(u=>u),n=Oh(),{toggleShowHelpText:r}=Ph(),[i,s]=N.useState(""),[o,a]=N.useState(!0);return N.useEffect(()=>{async function u(){const l=await $G(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(gs,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(qa,{text:i}):_.jsx(A1,{path:t.uiConfig.helpTextPath})})}function cDt(){const{alertModal:e}=$c(o=>o),{setAlertModal:t}=Ph(),n=Oh(),[r,i]=N.useState(e.show),s=N.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return N.useEffect(()=>i(e.show),[e.show]),_.jsx(gs,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(Kq,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(SGe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(et,{my:"md",children:e.message}),_.jsx(Xs,{w:"100%",justify:"end",children:_.jsx(jn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function fDt(){const e=N.useRef([]),t=cm(),n=t.uiConfig.windowEventDebounceTime??100,r=$c(s=>s.showStudyBrowser);N.useEffect(()=>{const s=fd(p=>{e.current.push([Date.now(),"focus",p.target instanceof HTMLElement?p.target.tagName:""])},n,{maxWait:n}),o=fd(p=>{e.current.push([Date.now(),"input",p.data??""])},n,{maxWait:n}),a=fd(p=>{e.current.push([Date.now(),"keypress",p.key])},n,{maxWait:n}),u=fd(p=>{e.current.push([Date.now(),"mousedown",[p.clientX,p.clientY]])},n,{maxWait:n}),l=fd(p=>{e.current.push([Date.now(),"mouseup",[p.clientX,p.clientY]])},n,{maxWait:n}),c=fd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),f=fd(p=>{e.current.push([Date.now(),"mousemove",[p.clientX,p.clientY]])},n,{maxWait:n}),d=fd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),h=fd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",s,!0),window.addEventListener("input",o),window.addEventListener("keypress",a),window.addEventListener("mousedown",u),window.addEventListener("mouseup",l),window.addEventListener("resize",c),window.addEventListener("mousemove",f),window.addEventListener("scroll",d),document.addEventListener("visibilitychange",h),()=>{window.removeEventListener("focus",s,!0),window.removeEventListener("input",o),window.removeEventListener("keypress",a),window.addEventListener("mousedown",u),window.addEventListener("mouseup",l),window.removeEventListener("resize",c),window.removeEventListener("mousemove",f),window.removeEventListener("scroll",d),document.removeEventListener("visibilitychange",h)}},[]);const i=t.uiConfig.sidebarWidth??300;return _.jsx(Swe.Provider,{value:e,children:_.jsxs(fi,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!r,mobile:!r}},children:[_.jsx(uDt,{}),_.jsx(uSt,{}),_.jsx(aDt,{}),_.jsx(lDt,{}),_.jsx(cDt,{}),_.jsx(fi.Main,{children:_.jsx(cGe,{})})]})})}function dDt(e,t=!1){return typeof e=="number"?cde(e,t):cde(e.length,t).map(r=>r.map(i=>e[i]))}function cde(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function _Ne(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=_Ne(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function hDt(e,t){const n=o1(e);return _Ne(n,t,"root")}function wNe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&wNe(s,t,i,o)})}function pDt(e){const t=[];return wNe(e,t,"",0),t}function fde(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return dDt(i.sort(()=>.5-Math.random()),!0)}function mDt(e){const n=pDt(e.sequence).map(s=>({[s]:fde(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=hDt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=fde(e,o))})}),i}var gDt={VITE_BASE_PATH:"/guardrails-think-aloud/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth",VITE_REVISIT_MODE:"public",BASE_URL:"/guardrails-think-aloud/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function yDt(e){const t=await(await fetch(`${Nh}${e}`)).text();return tSt(t)}async function V6(e,t){const n=t.configsList.find(r=>Cbe(r)===e);if(n){const r=t.configs[n];return await yDt(`${r.path}`)}return null}async function vDt(e){const t={},n=e.configsList.filter(i=>gDt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>V6(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function bDt({globalConfig:e}){const t=OI(),[n,r]=N.useState(null),i=e.configsList.includes(t),s=uS();N.useEffect(()=>{V6(t,e).then(p=>{r(p)})},[e,t]);const[o,a]=N.useState([]),[u,l]=N.useState(null),{storageEngine:c}=ba(),[f]=rG();N.useEffect(()=>{async function p(){if(!c||!n||!t)return;await c.initializeStudyDb(t,n),await c.getSequenceArray()||await c.setSequenceArray(await mDt(n));const g=n.uiConfig.urlParticipantIdParam&&f.get(n.uiConfig.urlParticipantIdParam)||void 0,y=Object.fromEntries(f.entries()),v=await fetch("https://api.ipify.org?format=json").catch(S=>""),b=v instanceof Response?await v.json():{ip:""},w={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:b.ip},x=await c.initializeParticipantSession(y,n,w,g),T=await irt(t,n,x.sequence,w,x.answers,s.user.isAdmin);l(T),a([{element:_.jsx(fDt,{}),children:[{path:"/",element:_.jsx(az,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ns,{order:2,mb:8,children:"Error loading config"}),_.jsx(dU,{issues:n.errors,type:"error"})]}):_.jsx(sSt,{})}]}])}p()},[c,n,t,f,s.user.isAdmin]);const d=bbe(o);let h=null;return i?o.length===0?h=_.jsx(_c,{visible:!0}):h=d&&u?_.jsx(xwe.Provider,{value:u,children:_.jsx(Jtt,{store:u.store,children:d})}):_.jsx(A1,{}):h=_.jsx(A1,{}),h}function fA({studyIds:e}){const t=$m(),{studyId:n}=sE(),r=yb(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=ba(),{user:o,logout:a}=uS(),[u,l]=N.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(OGe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(IGe,{}),href:"/analysis/dashboard",needAdmin:!0},{name:"Settings",leftIcon:_.jsx(Ebe,{}),href:"/settings",needAdmin:!0}];return _.jsx(fi.Header,{p:"md",children:_.jsxs(Fa,{mt:-7,align:"center",children:[_.jsx(Fa.Col,{span:6,children:_.jsxs(qt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(py,{w:40,src:`${Nh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(If,{w:"md"}),_.jsx(ns,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Fa.Col,{span:6,children:_.jsxs(qt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(TI,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(bW,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(kh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(qt,{direction:"column",mt:20,children:[_.jsx(et,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(jn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(jn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(_e,{ml:10,children:[_.jsx(r1,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:a,children:"Logout"}):_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function ENe({allParticipants:e,studyId:t,config:n}){const[r,{close:i,open:s}]=t1(!1),[o,{close:a,open:u}]=t1(!1),[l,{open:c,close:f}]=t1(!1);return _.jsxs(_.Fragment,{children:[_.jsxs(Xs,{children:[_.jsxs(Nr,{opened:r,children:[_.jsx(Nr.Target,{children:_.jsx(jn,{variant:"light",disabled:e.length===0,onClick:()=>{KX(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:s,onMouseLeave:i,px:4,children:_.jsx(DGe,{})})}),_.jsx(Nr.Dropdown,{children:_.jsx(et,{children:"Download all participants data as JSON"})})]}),_.jsxs(Nr,{opened:o,children:[_.jsx(Nr.Target,{children:_.jsx(jn,{variant:"light",disabled:e.length===0,onClick:c,onMouseEnter:u,onMouseLeave:a,px:4,children:_.jsx(xbe,{})})}),_.jsx(Nr.Dropdown,{children:_.jsx(et,{children:"Download all participants data as a tidy CSV"})})]})]}),l&&_.jsx(rSt,{opened:l,close:f,filename:`${t}_all_tidy.csv`,studyConfig:n,data:e})]})}function _Dt({cellData:e}){return _.jsx(Tn.Td,{children:_.jsx(Rp,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(_e,{children:[_.jsxs(et,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(et,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function dde({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(Tn.Td,{children:[t.toFixed(1)," ","s"]})}function wDt(e){const{metaData:t}=e;return _.jsx(Tn.Td,{children:_.jsx(WW,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Rp,{gap:"xs",children:[_.jsxs(_e,{children:["IP:"," ",t.ip]}),_.jsxs(_e,{children:["Language:"," ",t.language]}),_.jsxs(_e,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(_e,{children:["User Agent:"," ",t.userAgent]})]})})})}function EDt({completed:e,inProgress:t,studyConfig:n,refresh:r}){const{storageEngine:i}=ba(),{studyId:s}=sE(),o=async g=>{i&&s&&(await i.rejectParticipant(s,g),await r())},[a,u]=N.useState([]),[l,c]=N.useState(!1),f=()=>QB({title:"Confirm rejecting participants",children:_.jsxs(et,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(et,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{c(!0);const g=a.map(async y=>await o(y));await Promise.all(g),u([]),await r(),c(!1)}});function d(g){g==="all"?a.length===[...e,...t].length?u([]):u([...e,...t].map(y=>y.participantId)):a.includes(g)?u(a.filter(y=>y!==g)):u([...a,g])}const h=Ewe(n.sequence),p=[_.jsx(Tn.Th,{children:_.jsx(qt,{justify:"center",children:_.jsx(Lf,{mb:-4,checked:a.length===[...e,...t].length,onChange:()=>d("all")})})},"action"),_.jsx(Tn.Th,{children:"ID"},"ID"),_.jsx(Tn.Th,{children:"Status"},"status"),_.jsx(Tn.Th,{children:"Meta"},"meta"),...h.flatMap(g=>[_.jsx(Tn.Th,{children:g.componentName},`header-${g.componentName}-${g.timesSeenInBlock}`),_.jsxs(Tn.Th,{children:[g.componentName," ","Duration"]},`header-${g.componentName}-${g.timesSeenInBlock}-duration`)]),_.jsx(Tn.Th,{children:"Total Duration"},"total-duration")],m=[...e,...t].map(g=>_.jsxs(Tn.Tr,{children:[_.jsx(Tn.Td,{children:_.jsx(qt,{justify:"center",children:_.jsx(Lf,{mb:-4,checked:a.includes(g.participantId),onChange:()=>d(g.participantId)})})}),_.jsx(Tn.Td,{style:{whiteSpace:"nowrap"},children:g.participantId}),_.jsx(Tn.Td,{children:_.jsxs(qt,{direction:"row",align:"center",children:[g.rejected?_.jsx(ia,{label:"Rejected",children:_.jsx(Tbe,{size:16,color:"red",style:{marginBottom:-3}})}):g.completed?_.jsx(ia,{label:"Completed",children:_.jsx(NGe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(ia,{label:"In Progress",children:_.jsx(jGe,{size:16,color:"orange",style:{marginBottom:-3}})}),!g.completed&&_.jsxs(et,{size:"sm",mb:-1,ml:4,children:[(Object.entries(g.answers).filter(([y,v])=>v.endTime!==void 0).length/(lm(g.sequence).length-1)*100).toFixed(2),"%"]})]})}),g.metadata?_.jsx(wDt,{metaData:g.metadata}):_.jsx(Tn.Td,{children:"N/A"}),h.map(y=>{const v=_we(g.sequence,y.orderPath),b=v&&Object.entries(g.answers).sort((w,x)=>{const T=parseInt(w[0].slice(w[0].lastIndexOf("_")+1),10),S=parseInt(x[0].slice(x[0].lastIndexOf("_")+1),10);return T-S}).filter(([w])=>{const x=w.slice(0,w.lastIndexOf("_")),T=parseInt(w.slice(w.lastIndexOf("_")+1),10);return x===y.componentName&&T<=v[0].lastIndex&&T>=v[0].firstIndex});return b!==null&&b.length>=y.timesSeenInBlock+1?_.jsxs(Hi.Fragment,{children:[_.jsx(_Dt,{cellData:b[y.timesSeenInBlock][1]}),_.jsx(dde,{cellData:b[y.timesSeenInBlock][1]})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`):_.jsxs(Hi.Fragment,{children:[_.jsx(Tn.Td,{children:"N/A"}),_.jsx(Tn.Td,{children:"N/A"})]},`cellgroup-${g.participantId}-${y.componentName}-${y.timesSeenInBlock}`)}),_.jsx(dde,{cellData:{startTime:Math.min(...Object.values(g.answers).map(y=>y.startTime)),endTime:Math.max(...Object.values(g.answers).map(y=>y.endTime)),answer:{},windowEvents:[]}},`cell-${g.participantId}-total-duration`)]},g.participantId));return[...e,...t].length>0?_.jsxs(_.Fragment,{children:[_.jsx(_c,{visible:l,overlayProps:{blur:2}}),_.jsxs(qt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Xs,{children:_.jsx(TI,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:[...e,...t].map(g=>({value:g.participantId,label:g.participantId})),searchable:!0,value:null,leftSection:_.jsx(zGe,{size:14}),onChange:g=>g&&d(g)})}),_.jsxs(Xs,{children:[_.jsx(ENe,{allParticipants:[...e,...t],studyId:s||"",config:n}),_.jsx(jn,{disabled:a.length===0,onClick:f,color:"red",children:"Reject Participants"})]})]}),_.jsxs(Tn,{striped:!0,withTableBorder:!0,children:[_.jsx(Tn.Thead,{children:_.jsx(Tn.Tr,{children:p})}),_.jsx(Tn.Tbody,{children:m})]})]}):_.jsx(qt,{justify:"center",align:"center",style:{height:"100%"},children:_.jsx(et,{children:"No data available"})})}function xDt({studyId:e,refresh:t}){const[n,r]=N.useState(!1),[i,s]=N.useState(!1),[o,a]=N.useState(!1),[u,l]=N.useState(""),[c,f]=N.useState([]),[d,h]=N.useState(""),[p,m]=N.useState(!1),[g,y]=N.useState(!1),{storageEngine:v}=ba(),b=v,w=N.useCallback(async()=>{y(!0);const O=await b.getSnapshots(e);f(O),y(!1)},[b,e]);N.useEffect(()=>{w()},[w]);const x=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},T=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},S=async O=>{m(!0),await b.restoreSnapshot(e,O),w(),m(!1),await t()},C=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},A=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},R=()=>QB({title:"Create a Snapshot",children:_.jsx(et,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>x()}),k=O=>QB({title:"Restore Snapshot",children:_.jsx(et,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>S(O)});return _.jsxs(_.Fragment,{children:[_.jsx(_c,{visible:p}),_.jsx(Ih,{children:_.jsxs(hy,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ns,{mb:"lg",order:4,children:"Data Management"}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(_e,{style:{width:"70%"},children:[_.jsx(ns,{order:5,children:"Create a Snapshot"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(et,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ia,{label:"Create a snapshot",children:_.jsx(jn,{onClick:R,children:"Snapshot"})})]}),_.jsx(If,{h:"lg"}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(_e,{style:{width:"70%"},children:[_.jsx(ns,{order:5,children:"Archive Data"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(ia,{label:"Snapshot and Delete Data",children:_.jsx(jn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(If,{h:"lg"}),_.jsxs(qt,{justify:"space-between",align:"center",children:[_.jsxs(_e,{style:{width:"70%"},children:[_.jsx(ns,{order:5,children:"Delete Data"}),_.jsxs(et,{children:["This will delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(ia,{label:"Delete Data",children:_.jsx(jn,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(If,{h:"xl"}),_.jsxs(qt,{direction:"column",children:[_.jsx(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(ns,{order:5,children:"Snapshots"})}),_.jsxs(_e,{style:{position:"relative"},children:[_.jsx(_c,{visible:g}),c.length>0?c.map(O=>_.jsxs(qt,{justify:"space-between",mb:"xs",children:[_.jsx(et,{children:O}),_.jsxs(qt,{direction:"row",gap:"xs",children:[_.jsx(ia,{label:"Restore Snapshot",children:_.jsx(w0,{color:"blue",variant:"subtle",onClick:()=>{k(O)},children:_.jsx(BGe,{})})}),_.jsx(ia,{label:"Delete Snapshot",children:_.jsx(w0,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(O)},children:_.jsx(Sbe,{})})})]})]},O)):_.jsx(et,{children:"No snapshots."})]})]})]})}),_.jsxs(gs,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(et,{children:"Archive Data"}),children:[_.jsx(et,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(s1,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(jn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(jn,{color:"red",onClick:T,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(gs,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(et,{children:"Delete Snapshot"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(s1,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(jn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(jn,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(gs,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(et,{children:"Delete Live Data"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(s1,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(qt,{mt:"sm",justify:"right",children:[_.jsx(jn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(jn,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]})]})}function SDt(e){const{globalConfig:t}=e,{studyId:n}=sE(),[r,i]=N.useState([]),[s,o]=N.useState(void 0),[a,u]=N.useState(!1),{storageEngine:l}=ba(),c=$m(),{tab:f}=sE(),d=N.useCallback(async()=>{if(u(!0),n){const g=await V6(n,t);if(!g||!l)return;await l.initializeStudyDb(n,g);const y=await l.getAllParticipantsData();i(y),o(g),u(!1)}},[t,l,n]);N.useEffect(()=>{d()},[t,l,n,d]);const[h,p]=N.useMemo(()=>{const g=r.filter(v=>v.completed),y=r.filter(v=>!v.completed);return[g,y]},[r]),m=!1;return _.jsxs(_.Fragment,{children:[_.jsx(fA,{studyIds:e.globalConfig.configsList}),_.jsx(fi.Main,{children:_.jsxs(Ih,{fluid:!0,style:{height:"100%"},children:[_.jsx(_c,{visible:a}),_.jsxs(Zi,{variant:"outline",value:f,onChange:g=>c(`./../${g}`),style:{height:"100%"},children:[_.jsxs(Zi.List,{children:[_.jsx(Zi.Tab,{value:"table",leftSection:_.jsx(VGe,{size:16}),children:"Table View"}),_.jsx(Zi.Tab,{value:"stats",leftSection:_.jsx(kGe,{size:16}),children:"Trial Stats"}),_.jsx(Zi.Tab,{value:"replay",leftSection:_.jsx(FGe,{size:16}),children:"Individual Replay"}),_.jsx(Zi.Tab,{value:"manage",leftSection:_.jsx(Ebe,{size:16}),disabled:!m,children:"Manage"})]}),_.jsx(Zi.Panel,{value:"table",pt:"xs",style:{height:"calc(100% - 38px - 10px)",width:"100%",overflow:"scroll"},children:s&&_.jsx(EDt,{completed:h,inProgress:p,studyConfig:s,refresh:d})}),_.jsx(Zi.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(Zi.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(Zi.Panel,{value:"manage",pt:"xs",children:n&&m&&_.jsx(xDt,{studyId:n,refresh:d})})]})]})})]})}function Pj({children:e}){const{user:t,verifyAdminStatus:n,logout:r}=uS(),{storageEngine:i}=ba();return N.useEffect(()=>{(async()=>{try{t&&await n(t)||r()}catch(o){r(),console.warn(o)}})()},[t.isAdmin]),t.determiningStatus||!i?_.jsx(_c,{visible:t.determiningStatus||!(i!=null&&i.getEngine())}):!t.isAdmin&&!t.determiningStatus?_.jsx(nG,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function xNe(e,t,n){if(e instanceof vp){t(!0);const r=new Ap,i=i$();try{await ZCt(i,r,gke)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function TDt(){const{user:e}=uS(),[t,n]=N.useState(null),[r,i]=N.useState(!1),{storageEngine:s}=ba();return N.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(nG,{to:"/"}):_.jsx(Ih,{children:_.jsx(hy,{padding:"lg",children:_.jsxs(qt,{align:"center",direction:"column",justify:"center",children:[_.jsx(py,{maw:200,mt:50,mb:100,src:`${Nh}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(et,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(jn,{onClick:()=>xNe(s,i,n),leftSection:_.jsx(HGe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(zp,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(_c,{visible:r})]})})})}var SNe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ks,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var L=["th","st","nd","rd"],F=$%100;return"["+$+(L[(F-20)%10]||L[F]||L[0])+"]"}},b=function($,L,F){var B=String($);return!B||B.length>=L?$:""+Array(L+1-B.length).join(F)+$},w={s:b,z:function($){var L=-$.utcOffset(),F=Math.abs(L),B=Math.floor(F/60),U=F%60;return(L<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function $(L,F){if(L.date()<F.date())return-$(F,L);var B=12*(F.year()-L.year())+(F.month()-L.month()),U=L.clone().add(B,f),q=F-U<0,P=L.clone().add(B+(q?-1:1),f);return+(-(B+(F-U)/(q?U-P:P-U))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},x="en",T={};T[x]=v;var S="$isDayjsObject",C=function($){return $ instanceof O||!(!$||!$[S])},A=function $(L,F,B){var U;if(!L)return x;if(typeof L=="string"){var q=L.toLowerCase();T[q]&&(U=q),F&&(T[q]=F,U=q);var P=L.split("-");if(!U&&P.length>1)return $(P[0])}else{var V=L.name;T[V]=L,U=V}return!B&&U&&(x=U),U||!B&&x},R=function($,L){if(C($))return $.clone();var F=typeof L=="object"?L:{};return F.date=$,F.args=arguments,new O(F)},k=w;k.l=A,k.i=C,k.w=function($,L){return R($,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var O=function(){function $(F){this.$L=A(F.locale,null,!0),this.parse(F),this.$x=this.$x||F.x||{},this[S]=!0}var L=$.prototype;return L.parse=function(F){this.$d=function(B){var U=B.date,q=B.utc;if(U===null)return new Date(NaN);if(k.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var P=U.match(g);if(P){var V=P[2]-1||0,W=(P[7]||"0").substring(0,3);return q?new Date(Date.UTC(P[1],V,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)):new Date(P[1],V,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)}}return new Date(U)}(F),this.init()},L.init=function(){var F=this.$d;this.$y=F.getFullYear(),this.$M=F.getMonth(),this.$D=F.getDate(),this.$W=F.getDay(),this.$H=F.getHours(),this.$m=F.getMinutes(),this.$s=F.getSeconds(),this.$ms=F.getMilliseconds()},L.$utils=function(){return k},L.isValid=function(){return this.$d.toString()!==m},L.isSame=function(F,B){var U=R(F);return this.startOf(B)<=U&&U<=this.endOf(B)},L.isAfter=function(F,B){return R(F)<this.startOf(B)},L.isBefore=function(F,B){return this.endOf(B)<R(F)},L.$g=function(F,B,U){return k.u(F)?this[B]:this.set(U,F)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(F,B){var U=this,q=!!k.u(B)||B,P=k.p(F),V=function(de,ye){var Ae=k.w(U.$u?Date.UTC(U.$y,ye,de):new Date(U.$y,ye,de),U);return q?Ae:Ae.endOf(l)},W=function(de,ye){return k.w(U.toDate()[de].apply(U.toDate("s"),(q?[0,0,0,0]:[23,59,59,999]).slice(ye)),U)},j=this.$W,H=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(P){case h:return q?V(1,0):V(31,11);case f:return q?V(1,H):V(0,H+1);case c:var pe=this.$locale().weekStart||0,fe=(j<pe?j+7:j)-pe;return V(q?G-fe:G+(6-fe),H);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},L.endOf=function(F){return this.startOf(F,!1)},L.$set=function(F,B){var U,q=k.p(F),P="set"+(this.$u?"UTC":""),V=(U={},U[l]=P+"Date",U[p]=P+"Date",U[f]=P+"Month",U[h]=P+"FullYear",U[u]=P+"Hours",U[a]=P+"Minutes",U[o]=P+"Seconds",U[s]=P+"Milliseconds",U)[q],W=q===l?this.$D+(B-this.$W):B;if(q===f||q===h){var j=this.clone().set(p,1);j.$d[V](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else V&&this.$d[V](W);return this.init(),this},L.set=function(F,B){return this.clone().$set(F,B)},L.get=function(F){return this[k.p(F)]()},L.add=function(F,B){var U,q=this;F=Number(F);var P=k.p(B),V=function(H){var G=R(q);return k.w(G.date(G.date()+Math.round(H*F)),q)};if(P===f)return this.set(f,this.$M+F);if(P===h)return this.set(h,this.$y+F);if(P===l)return V(1);if(P===c)return V(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[P]||1,j=this.$d.getTime()+F*W;return k.w(j,this)},L.subtract=function(F,B){return this.add(-1*F,B)},L.format=function(F){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var q=F||"YYYY-MM-DDTHH:mm:ssZ",P=k.z(this),V=this.$H,W=this.$m,j=this.$M,H=U.weekdays,G=U.months,ne=U.meridiem,pe=function(ye,Ae,ve,rt){return ye&&(ye[Ae]||ye(B,q))||ve[Ae].slice(0,rt)},fe=function(ye){return k.s(V%12||12,ye,"0")},de=ne||function(ye,Ae,ve){var rt=ye<12?"AM":"PM";return ve?rt.toLowerCase():rt};return q.replace(y,function(ye,Ae){return Ae||function(ve){switch(ve){case"YY":return String(B.$y).slice(-2);case"YYYY":return k.s(B.$y,4,"0");case"M":return j+1;case"MM":return k.s(j+1,2,"0");case"MMM":return pe(U.monthsShort,j,G,3);case"MMMM":return pe(G,j);case"D":return B.$D;case"DD":return k.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return pe(U.weekdaysMin,B.$W,H,2);case"ddd":return pe(U.weekdaysShort,B.$W,H,3);case"dddd":return H[B.$W];case"H":return String(V);case"HH":return k.s(V,2,"0");case"h":return fe(1);case"hh":return fe(2);case"a":return de(V,W,!0);case"A":return de(V,W,!1);case"m":return String(W);case"mm":return k.s(W,2,"0");case"s":return String(B.$s);case"ss":return k.s(B.$s,2,"0");case"SSS":return k.s(B.$ms,3,"0");case"Z":return P}return null}(ye)||P.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(F,B,U){var q,P=this,V=k.p(B),W=R(F),j=(W.utcOffset()-this.utcOffset())*r,H=this-W,G=function(){return k.m(P,W)};switch(V){case h:q=G()/12;break;case f:q=G();break;case d:q=G()/3;break;case c:q=(H-j)/6048e5;break;case l:q=(H-j)/864e5;break;case u:q=H/i;break;case a:q=H/r;break;case o:q=H/n;break;default:q=H}return U?q:k.a(q)},L.daysInMonth=function(){return this.endOf(f).$D},L.$locale=function(){return T[this.$L]},L.locale=function(F,B){if(!F)return this.$L;var U=this.clone(),q=A(F,B,!0);return q&&(U.$L=q),U},L.clone=function(){return k.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},$}(),D=O.prototype;return R.prototype=D,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){D[$[1]]=function(L){return this.$g(L,$[0],$[1])}}),R.extend=function($,L){return $.$i||($(L,O,R),$.$i=!0),R},R.locale=A,R.isDayjs=C,R.unix=function($){return R(1e3*$)},R.en=T[x],R.Ls=T,R.p={},R})})(SNe);var CDt=SNe.exports;const Tt=jl(CDt);function ADt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function IDt({formatter:e,...t}){return(e||ADt)(t)}function kDt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function TNe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=kDt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?TNe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function RDt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function NDt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function ZQ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=RDt(i.key);if(s){i.preventDefault();const o=NDt(e);TNe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var CNe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ks,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,x=r[w];return x||(x=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=x),x}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var x=m[3],T=x===24?0:x,S=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(S).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(T,S,C){var A=T-60*S*1e3,R=l(A,C);if(S===R)return[A,S];var k=l(A-=60*(R-S)*1e3,C);return R===k?[A,R]:[T-60*Math.min(R,k)*1e3,Math.max(R,k)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],x=o(b).utcOffset(w);return x.$x.$timezone=g,x},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(CNe);var DDt=CNe.exports;const PDt=jl(DDt);var ANe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ks,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(x){x===void 0&&(x="");var T=x.match(r);if(!T)return null;var S=(""+T[0]).match(i)||["-",0,0],C=S[0],A=60*+S[1]+ +S[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(ANe);var ODt=ANe.exports;const $Dt=jl(ODt);Tt.extend($Dt);Tt.extend(PDt);function MDt(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const hde=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=MDt(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function f0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>hde(i,n,e)):hde(t,n,e)}function LDt({minDate:e,maxDate:t,timezone:n}){const r=f0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const FDt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},jDt=N.createContext(FDt);function Vl(){const e=N.useContext(jDt),t=N.useCallback(o=>o||e.locale,[e.locale]),n=N.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=N.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=N.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=N.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function BDt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function INe({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:BDt(e,t),name:n,form:r})}INe.displayName="@mantine/dates/HiddenDatesInput";var kNe={day:"m_396ce5cb"};const UDt={},zDt=(e,{size:t})=>({day:{"--day-size":yn(t,"day-size")}}),eJ=je((e,t)=>{const n=Ee("Day",UDt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...x}=n,T=gt({name:f||"Day",classes:kNe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zDt,rootSelector:"day"}),S=Vl();return _.jsx(Is,{...T("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(f0("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...x,children:(m==null?void 0:m(l))||l.getDate()})});eJ.classes=kNe;eJ.displayName="@mantine/dates/Day";function VDt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var RNe={weekday:"m_18a3eca"};const HDt={},qDt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":ro(t),"--wr-spacing":Cl(t)}}),tJ=je((e,t)=>{const n=Ee("WeekdaysRow",HDt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=gt({name:h||"WeekdaysRow",classes:RNe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qDt,rootSelector:"weekdaysRow"}),g=Vl(),y=VDt({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(_e,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});tJ.classes=RNe;tJ.displayName="@mantine/dates/WeekdaysRow";function WDt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function GDt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function YDt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=WDt(s,t),a=GDt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function NNe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function DNe(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function PNe(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function KDt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return PNe(c,n)&&DNe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||NNe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var ONe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const XDt={withCellSpacing:!0},H6=je((e,t)=>{const n=Ee("Month",XDt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:x,getDayAriaLabel:T,static:S,__getDayRef:C,__onDayKeyDown:A,__onDayClick:R,__onDayMouseEnter:k,__preventFocus:O,__stopPropagation:D,withCellSpacing:$,size:L,...F}=n,B=gt({name:l||"Month",classes:ONe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=Vl(),q=YDt({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),P=KDt(q,y,v,m,g,w,h),{resolvedClassNames:V,resolvedStyles:W}=km({classNames:r,styles:o,props:n}),j=q.map((H,G)=>{const ne=H.map((pe,fe)=>{const de=!NNe(pe,h),ye=(T==null?void 0:T(pe))||Tt(pe).locale(c||U.locale).format("D MMMM YYYY"),Ae=m==null?void 0:m(pe),ve=Tt(pe).isSame(P,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(eJ,{__staticSelector:l||"Month",classNames:V,styles:W,unstyled:a,"data-mantine-stop-propagation":D||void 0,renderDay:b,date:pe,size:L,weekend:U.getWeekendDays(p).includes(pe.getDay()),outside:de,hidden:w?de:!1,"aria-label":ye,static:S,disabled:(g==null?void 0:g(pe))||!PNe(pe,v)||!DNe(pe,y),ref:rt=>C==null?void 0:C(G,fe,rt),...Ae,onKeyDown:rt=>{var ze;(ze=Ae==null?void 0:Ae.onKeyDown)==null||ze.call(Ae,rt),A==null||A(rt,{rowIndex:G,cellIndex:fe,date:pe})},onMouseEnter:rt=>{var ze;(ze=Ae==null?void 0:Ae.onMouseEnter)==null||ze.call(Ae,rt),k==null||k(rt,pe)},onClick:rt=>{var ze;(ze=Ae==null?void 0:Ae.onClick)==null||ze.call(Ae,rt),R==null||R(rt,pe)},onMouseDown:rt=>{var ze;(ze=Ae==null?void 0:Ae.onMouseDown)==null||ze.call(Ae,rt),O&&rt.preventDefault()},tabIndex:O||!ve?-1:0})},pe.toString())});return _.jsx("tr",{...B("monthRow"),children:ne},G)});return _.jsxs(_e,{component:"table",...B("month"),size:L,ref:t,...F,children:[!x&&_.jsx("thead",{...B("monthThead"),children:_.jsx(tJ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:L,classNames:V,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});H6.classes=ONe;H6.displayName="@mantine/dates/Month";var $Ne={pickerControl:"m_dc6a3c71"};const QDt={},JDt=(e,{size:t})=>({pickerControl:{"--dpc-fz":ro(t),"--dpc-size":yn(t,"dpc-size")}}),q6=je((e,t)=>{const n=Ee("PickerControl",QDt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=gt({name:d||"PickerControl",classes:$Ne,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JDt,rootSelector:"pickerControl"});return _.jsx(Is,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});q6.classes=$Ne;q6.displayName="@mantine/dates/PickerControl";function MNe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function ZDt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!MNe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function LNe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var FNe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const ePt={yearsListFormat:"YYYY",withCellSpacing:!0},W6=je((e,t)=>{const n=Ee("YearsList",ePt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:x,withCellSpacing:T,size:S,...C}=n,A=gt({name:m||"YearsList",classes:FNe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),R=Vl(),k=LNe(l),O=ZDt(k,d,h,p),D=k.map(($,L)=>{const F=$.map((B,U)=>{const q=p==null?void 0:p(B),P=Tt(B).isSame(O,"year");return _.jsx("td",{...A("yearsListCell"),"data-with-spacing":T||void 0,children:_.jsx(q6,{...A("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":x||void 0,disabled:MNe(B,d,h),ref:V=>g==null?void 0:g(L,U,V),...q,onKeyDown:V=>{var W;(W=q==null?void 0:q.onKeyDown)==null||W.call(q,V),y==null||y(V,{rowIndex:L,cellIndex:U,date:B})},onClick:V=>{var W;(W=q==null?void 0:q.onClick)==null||W.call(q,V),v==null||v(V,B)},onMouseEnter:V=>{var W;(W=q==null?void 0:q.onMouseEnter)==null||W.call(q,V),b==null||b(V,B)},onMouseDown:V=>{var W;(W=q==null?void 0:q.onMouseDown)==null||W.call(q,V),w&&V.preventDefault()},tabIndex:w||!P?-1:0,children:Tt(B).locale(R.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...A("yearsListRow"),children:F},L)});return _.jsx(_e,{component:"table",ref:t,size:S,...A("yearsList"),...C,children:_.jsx("tbody",{children:D})})});W6.classes=FNe;W6.displayName="@mantine/dates/YearsList";function jNe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function tPt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!jNe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function nPt(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var BNe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const rPt={monthsListFormat:"MMM",withCellSpacing:!0},G6=je((e,t)=>{const n=Ee("MonthsList",rPt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:x,withCellSpacing:T,size:S,...C}=n,A=gt({name:l||"MonthsList",classes:BNe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),R=Vl(),k=nPt(c),O=tPt(k,h,p,m),D=k.map(($,L)=>{const F=$.map((B,U)=>{const q=m==null?void 0:m(B),P=Tt(B).isSame(O,"month");return _.jsx("td",{...A("monthsListCell"),"data-with-spacing":T||void 0,children:_.jsx(q6,{...A("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":x||void 0,disabled:jNe(B,h,p),ref:V=>g==null?void 0:g(L,U,V),...q,onKeyDown:V=>{var W;(W=q==null?void 0:q.onKeyDown)==null||W.call(q,V),y==null||y(V,{rowIndex:L,cellIndex:U,date:B})},onClick:V=>{var W;(W=q==null?void 0:q.onClick)==null||W.call(q,V),v==null||v(V,B)},onMouseEnter:V=>{var W;(W=q==null?void 0:q.onMouseEnter)==null||W.call(q,V),b==null||b(V,B)},onMouseDown:V=>{var W;(W=q==null?void 0:q.onMouseDown)==null||W.call(q,V),w&&V.preventDefault()},tabIndex:w||!P?-1:0,children:Tt(B).locale(R.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...A("monthsListRow"),children:F},L)});return _.jsx(_e,{component:"table",ref:t,size:S,...A("monthsList"),...C,children:_.jsx("tbody",{children:D})})});G6.classes=BNe;G6.displayName="@mantine/dates/MonthsList";var UNe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const iPt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},sPt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":yn(t,"dch-control-size"),"--dch-fz":ro(t)}}),Iy=je((e,t)=>{const n=Ee("CalendarHeader",iPt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:x,withPrevious:T,__staticSelector:S,__preventFocus:C,__stopPropagation:A,...R}=n,k=gt({name:S||"CalendarHeader",classes:UNe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sPt,rootSelector:"calendarHeader"}),O=C?D=>D.preventDefault():void 0;return _.jsxs(_e,{...k("calendarHeader"),ref:t,...R,children:[T&&_.jsx(Is,{...k("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||_.jsx(nO,{...k("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Is,{component:b?"button":"div",...k("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:C||!b?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),x&&_.jsx(Is,{...k("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||_.jsx(nO,{...k("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});Iy.classes=UNe;Iy.displayName="@mantine/dates/CalendarHeader";function oPt(e){const t=LNe(e);return[t[0][0],t[3][0]]}const aPt={decadeLabelFormat:"YYYY"},Y6=je((e,t)=>{const n=Ee("DecadeLevel",aPt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:x,previousDisabled:T,levelControlAriaLabel:S,withNext:C,withPrevious:A,decadeLabelFormat:R,classNames:k,styles:O,unstyled:D,__staticSelector:$,__stopPropagation:L,size:F,...B}=n,U=Vl(),[q,P]=oPt(r),V={__staticSelector:$||"DecadeLevel",classNames:k,styles:O,unstyled:D,size:F},W=typeof x=="boolean"?x:o?!Tt(P).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(q).startOf("year").isAfter(s):!1,H=(G,ne)=>Tt(G).locale(i||U.locale).format(ne);return _.jsxs(_e,{"data-decade-level":!0,size:F,ref:t,...B,children:[_.jsx(Iy,{label:typeof R=="function"?R(q,P):`${H(q,R)}  ${H(P,R)}`,__preventFocus:p,__stopPropagation:L,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:S,withNext:C,withPrevious:A,...V}),_.jsx(W6,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:L,withCellSpacing:h,...V})]})});Y6.classes={...W6.classes,...Iy.classes};Y6.displayName="@mantine/dates/DecadeLevel";const uPt={yearLabelFormat:"YYYY"},K6=je((e,t)=>{const n=Ee("YearLevel",uPt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:x,nextDisabled:T,previousDisabled:S,hasNextLevel:C,levelControlAriaLabel:A,withNext:R,withPrevious:k,yearLabelFormat:O,__staticSelector:D,__stopPropagation:$,size:L,classNames:F,styles:B,unstyled:U,...q}=n,P=Vl(),V={__staticSelector:D||"YearLevel",classNames:F,styles:B,unstyled:U,size:L},W=typeof T=="boolean"?T:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(_e,{"data-year-level":!0,size:L,ref:t,...q,children:[_.jsx(Iy,{label:typeof O=="function"?O(r):Tt(r).locale(i||P.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:x,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:A,withNext:R,withPrevious:k,...V}),_.jsx(G6,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...V})]})});K6.classes={...Iy.classes,...G6.classes};K6.displayName="@mantine/dates/YearLevel";const lPt={monthLabelFormat:"MMMM YYYY"},X6=je((e,t)=>{const n=Ee("MonthLevel",lPt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:x,__stopPropagation:T,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:R,onNext:k,onPrevious:O,onLevelClick:D,nextDisabled:$,previousDisabled:L,hasNextLevel:F,levelControlAriaLabel:B,withNext:U,withPrevious:q,monthLabelFormat:P,classNames:V,styles:W,unstyled:j,__staticSelector:H,size:G,static:ne,...pe}=n,fe=Vl(),de={__staticSelector:H||"MonthLevel",classNames:V,styles:W,unstyled:j,size:G},ye=typeof $=="boolean"?$:f?!Tt(r).endOf("month").isBefore(f):!1,Ae=typeof L=="boolean"?L:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(_e,{"data-month-level":!0,size:G,ref:t,...pe,children:[_.jsx(Iy,{label:typeof P=="function"?P(r):Tt(r).locale(i||fe.locale).format(P),__preventFocus:x,__stopPropagation:T,nextIcon:S,previousIcon:C,nextLabel:A,previousLabel:R,onNext:k,onPrevious:O,onLevelClick:D,nextDisabled:ye,previousDisabled:Ae,hasNextLevel:F,levelControlAriaLabel:B,withNext:U,withPrevious:q,...de}),_.jsx(H6,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:x,__stopPropagation:T,static:ne,withCellSpacing:w,...de})]})});X6.classes={...H6.classes,...Iy.classes};X6.displayName="@mantine/dates/MonthLevel";var zNe={levelsGroup:"m_30b26e33"};const cPt={},ky=je((e,t)=>{const n=Ee("LevelsGroup",cPt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=gt({name:l||"LevelsGroup",classes:zNe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(_e,{ref:t,...f("levelsGroup"),...c})});ky.classes=zNe;ky.displayName="@mantine/dates/LevelsGroup";const fPt={numberOfColumns:1},Q6=je((e,t)=>{const n=Ee("DecadeLevelGroup",fPt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:x,styles:T,unstyled:S,__staticSelector:C,__stopPropagation:A,numberOfColumns:R,levelControlAriaLabel:k,decadeLabelFormat:O,size:D,vars:$,...L}=n,F=N.useRef([]),B=Array(R).fill(0).map((U,q)=>{const P=Tt(r).add(q*10,"years").toDate();return _.jsx(Y6,{size:D,yearsListFormat:a,decade:P,withNext:q===R-1,withPrevious:q===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(V,W)=>ZQ({levelIndex:q,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:V,controlsRef:F}),__getControlRef:(V,W,j)=>{Array.isArray(F.current[q])||(F.current[q]=[]),Array.isArray(F.current[q][V])||(F.current[q][V]=[]),F.current[q][V][W]=j},levelControlAriaLabel:typeof k=="function"?k(P):k,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:x,styles:T,unstyled:S,withCellSpacing:f},q)});return _.jsx(ky,{classNames:x,styles:T,__staticSelector:C||"DecadeLevelGroup",ref:t,size:D,unstyled:S,...L,children:B})});Q6.classes={...ky.classes,...Y6.classes};Q6.displayName="@mantine/dates/DecadeLevelGroup";const dPt={numberOfColumns:1},J6=je((e,t)=>{const n=Ee("YearLevelGroup",dPt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:x,hasNextLevel:T,classNames:S,styles:C,unstyled:A,__staticSelector:R,__stopPropagation:k,numberOfColumns:O,levelControlAriaLabel:D,yearLabelFormat:$,size:L,vars:F,...B}=n,U=N.useRef([]),q=Array(O).fill(0).map((P,V)=>{const W=Tt(r).add(V,"years").toDate();return _.jsx(K6,{size:L,monthsListFormat:a,year:W,withNext:V===O-1,withPrevious:V===0,yearLabelFormat:$,__stopPropagation:k,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,H)=>ZQ({levelIndex:V,rowIndex:H.rowIndex,cellIndex:H.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,H,G)=>{Array.isArray(U.current[V])||(U.current[V]=[]),Array.isArray(U.current[V][j])||(U.current[V][j]=[]),U.current[V][j][H]=G},levelControlAriaLabel:typeof D=="function"?D(W):D,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:x,hasNextLevel:T,getMonthControlProps:u,classNames:S,styles:C,unstyled:A,__staticSelector:R||"YearLevelGroup",withCellSpacing:f},V)});return _.jsx(ky,{classNames:S,styles:C,__staticSelector:R||"YearLevelGroup",ref:t,size:L,unstyled:A,...B,children:q})});J6.classes={...K6.classes,...ky.classes};J6.displayName="@mantine/dates/YearLevelGroup";const hPt={numberOfColumns:1},Z6=je((e,t)=>{const n=Ee("MonthLevelGroup",hPt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:x,nextLabel:T,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:R,nextDisabled:k,previousDisabled:O,hasNextLevel:D,classNames:$,styles:L,unstyled:F,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:q,__staticSelector:P,__stopPropagation:V,size:W,static:j,vars:H,...G}=n,ne=N.useRef([]),pe=Array(B).fill(0).map((fe,de)=>{const ye=Tt(r).add(de,"months").toDate();return _.jsx(X6,{month:ye,withNext:de===B-1,withPrevious:de===0,monthLabelFormat:q,__stopPropagation:V,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ae,ve)=>ZQ({levelIndex:de,rowIndex:ve.rowIndex,cellIndex:ve.cellIndex,event:Ae,controlsRef:ne}),__getDayRef:(Ae,ve,rt)=>{Array.isArray(ne.current[de])||(ne.current[de]=[]),Array.isArray(ne.current[de][Ae])||(ne.current[de][Ae]=[]),ne.current[de][Ae][ve]=rt},levelControlAriaLabel:typeof U=="function"?U(ye):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:x,nextLabel:T,previousLabel:S,onNext:C,onPrevious:A,onLevelClick:R,nextDisabled:k,previousDisabled:O,hasNextLevel:D,classNames:$,styles:L,unstyled:F,__staticSelector:P||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},de)});return _.jsx(ky,{classNames:$,styles:L,__staticSelector:P||"MonthLevelGroup",ref:t,size:W,...G,children:pe})});Z6.classes={...ky.classes,...X6.classes};Z6.displayName="@mantine/dates/MonthLevelGroup";var VNe={input:"m_6fa5e2aa"};const pPt={},e4=je((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:x,disabled:T,value:S,name:C,form:A,type:R,...k}=Wve("PickerInputBase",pPt,e),O=b||(g&&w&&!x&&!T?_.jsx(fy,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),D=()=>{R==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!x&&_.jsx(gs,{opened:p,onClose:D,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(ki.Wrapper,{...r,children:_.jsxs(Nr,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||x,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),D()},children:[_.jsx(Nr.Target,{children:_.jsx(ki,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":x||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Gi(VNe.input,s==null?void 0:s.input)},...k,children:d||_.jsx(ki.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Nr.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(INe,{value:S,name:C,form:A,type:R})]})});e4.classes=VNe;e4.displayName="@mantine/dates/PickerInputBase";const pde=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function nJ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=N.useRef(e),o=Vl(),[a,u,l]=No({value:f0("add",t,o.getTimezone(),!i),defaultValue:f0("add",n,o.getTimezone(),!i),finalValue:pde(e),onChange:f=>{r==null||r(f0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:pde(e),u(c))),[c,u,l]}function Oj(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function mPt(e){return e===0?"month":e===1?"year":"decade"}function hT(e,t,n){return mPt(Fd(Oj(e,0),Oj(t,0),Oj(n,2)))}const gPt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},t4=je((e,t)=>{const n=Ee("Calendar",gPt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:x,weekdayFormat:T,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:R,hideOutsideDates:k,hideWeekdays:O,getDayAriaLabel:D,monthLabelFormat:$,nextIcon:L,previousIcon:F,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:q,monthsListFormat:P,getMonthControlProps:V,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:H,decadeLabelFormat:G,classNames:ne,styles:pe,unstyled:fe,minDate:de,maxDate:ye,locale:Ae,__staticSelector:ve,size:rt,__preventFocus:ze,__stopPropagation:yt,onNextDecade:ot,onPreviousDecade:De,onNextYear:Me,onPreviousYear:Ye,onNextMonth:pt,onPreviousMonth:Pt,static:qe,__timezoneApplied:me,...ft}=n,{resolvedClassNames:vt,resolvedStyles:he}=km({classNames:ne,styles:pe,props:n}),[Ce,Ve]=No({value:a?hT(a,s,i):void 0,defaultValue:o?hT(o,s,i):void 0,finalValue:hT(void 0,s,i),onChange:u}),[ut,_t]=nJ({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!me}),On={__staticSelector:ve||"Calendar",styles:he,classNames:vt,unstyled:fe,size:rt},Sr=Vl(),$n=h||d||1,ur=ut||f0("add",new Date,Sr.getTimezone()),hn=()=>{const Sn=Tt(ur).add($n,"month").toDate();pt==null||pt(Sn),_t(Sn)},xn=()=>{const Sn=Tt(ur).subtract($n,"month").toDate();Pt==null||Pt(Sn),_t(Sn)},er=()=>{const Sn=Tt(ur).add($n,"year").toDate();Me==null||Me(Sn),_t(Sn)},tr=()=>{const Sn=Tt(ur).subtract($n,"year").toDate();Ye==null||Ye(Sn),_t(Sn)},Lo=()=>{const Sn=Tt(ur).add(10*$n,"year").toDate();ot==null||ot(Sn),_t(Sn)},Di=()=>{const Sn=Tt(ur).subtract(10*$n,"year").toDate();De==null||De(Sn),_t(Sn)};return _.jsxs(_e,{ref:t,size:rt,"data-calendar":!0,...ft,children:[Ce==="month"&&_.jsx(Z6,{month:ur,minDate:de,maxDate:ye,firstDayOfWeek:x,weekdayFormat:T,weekendDays:S,getDayProps:C,excludeDate:A,renderDay:R,hideOutsideDates:k,hideWeekdays:O,getDayAriaLabel:D,onNext:hn,onPrevious:xn,hasNextLevel:i!=="month",onLevelClick:()=>Ve("year"),numberOfColumns:d,locale:Ae,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:L,previousLabel:p==null?void 0:p.previousMonth,previousIcon:F,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:ze,__stopPropagation:yt,static:qe,withCellSpacing:q,...On}),Ce==="year"&&_.jsx(J6,{year:ur,numberOfColumns:d,minDate:de,maxDate:ye,monthsListFormat:P,getMonthControlProps:V,locale:Ae,onNext:er,onPrevious:tr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>Ve("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:L,previousLabel:p==null?void 0:p.previousYear,previousIcon:F,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(Sn,Pi)=>{w&&_t(Pi),Ve(hT("month",s,i)),g==null||g(Pi)},__preventFocus:ze,__stopPropagation:yt,withCellSpacing:q,...On}),Ce==="decade"&&_.jsx(Q6,{decade:ur,minDate:de,maxDate:ye,yearsListFormat:j,getYearControlProps:H,locale:Ae,onNext:Lo,onPrevious:Di,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:L,previousLabel:p==null?void 0:p.previousDecade,previousIcon:F,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(Sn,Pi)=>{b&&_t(Pi),Ve(hT("year",s,i)),m==null||m(Pi)},__preventFocus:ze,__stopPropagation:yt,withCellSpacing:q,...On})]})});t4.classes={...Q6.classes,...J6.classes,...Z6.classes};t4.displayName="@mantine/dates/Calendar";function yPt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:x,onNextDecade:T,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:R,firstDayOfWeek:k,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:L,renderDay:F,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:q,monthLabelFormat:P,monthsListFormat:V,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:pe,allowDeselect:fe,minDate:de,maxDate:ye,locale:Ae,...ve}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:x,onNextDecade:T,onPreviousDecade:S,withCellSpacing:C,__updateDateOnYearSelect:A,__updateDateOnMonthSelect:R,firstDayOfWeek:k,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:L,renderDay:F,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:q,monthLabelFormat:P,monthsListFormat:V,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:H,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:pe,allowDeselect:fe,minDate:de,maxDate:ye,locale:Ae},others:ve}}function mde(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function vPt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=nJ({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=N.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=N.useState(null),m=T=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(T).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[T,f];S.sort((C,A)=>C.getTime()-A.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(T).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([T,null]),p(null),d(T);return}if(e==="multiple"){l.some(S=>Tt(S).isSame(T,t))?c(l.filter(S=>!Tt(S).isSame(T,t))):c([...l,T]);return}l&&o&&Tt(T).isSame(l,t)?c(null):c(T)},g=T=>f instanceof Date&&h instanceof Date?mde(T,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?mde(T,l):!1,y=e==="range"?T=>{a==null||a(T),p(null)}:a,v=T=>l[0]instanceof Date&&Tt(T).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=T=>l[1]instanceof Date?Tt(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(T).isSame(l[0],t),w=T=>{if(e==="range")return{selected:l.some(C=>C&&Tt(C).isSame(T,t)),inRange:g(T),firstInRange:v(T),lastInRange:b(T),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&Tt(C).isSame(T,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(T,t)||void 0};const S=Tt(l).isSame(T,t);return{selected:S,"data-autofocus":S||void 0}},x=e==="range"&&f?p:()=>{};return N.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:x,getControlProps:w,_value:l,setValue:c}}const bPt={type:"default",defaultLevel:"month",numberOfColumns:1},n4=je((e,t)=>{const n=Ee("DatePicker",bPt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:x,onRootMouseLeave:T,onHoveredDateChange:S,getControlProps:C}=vPt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:A,resolvedStyles:R}=km({classNames:r,styles:i,props:n}),k=Vl();return _.jsx(t4,{ref:t,minLevel:"month",classNames:A,styles:R,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,D)=>{S(D),y==null||y(O,D)},__onDayClick:(O,D)=>{x(D),v==null||v(O,D)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...w,date:f0("add",w.date,k.getTimezone(),b),__timezoneApplied:!0})});n4.classes=t4.classes;n4.displayName="@mantine/dates/DatePicker";function _Pt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Vl(),[f,d]=t1(!1),[h,p]=nJ({type:e,value:t,defaultValue:n,onChange:r}),m=IDt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,x)=>w.getTime()-x.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const wPt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},rJ=je((e,t)=>{const n=Ee("DatePickerInput",wPt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:x,valueFormatter:T,...S}=n,{resolvedClassNames:C,resolvedStyles:A}=km({classNames:c,styles:f,props:n}),{calendarProps:R,others:k}=yPt(S),{_value:O,setValue:D,formattedValue:$,dropdownHandlers:L,dropdownOpened:F,onClear:B,shouldClear:U}=_Pt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:T}),q=Array.isArray(O)?O[0]||x:O||x,P=Vl();return _.jsx(e4,{formattedValue:$,dropdownOpened:F,dropdownHandlers:L,classNames:C,styles:A,unstyled:d,ref:t,onClear:B,shouldClear:U,value:O,size:p,variant:m,dropdownType:g,...k,type:r,__staticSelector:"DatePickerInput",children:_.jsx(n4,{...R,size:p,variant:m,type:r,value:O,defaultDate:q||LDt({maxDate:b,minDate:v,timezone:P.getTimezone()}),onChange:D,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:f0("add",R.date,P.getTimezone()),__timezoneApplied:!0})})});rJ.classes={...e4.classes,...n4.classes};rJ.displayName="@mantine/dates/DatePickerInput";var HNe={exports:{}},EPt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",xPt=EPt,SPt=xPt;function qNe(){}function WNe(){}WNe.resetWarningCache=qNe;var TPt=function(){function e(r,i,s,o,a,u){if(u!==SPt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:WNe,resetWarningCache:qNe};return n.PropTypes=n,n};HNe.exports=TPt();var CPt=HNe.exports;const gde=jl(CPt),yde={};function Lz(e,t){e===void 0&&(e=yde),t===void 0&&(t=yde);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var APt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),IPt=Object.prototype.hasOwnProperty;function Fz(e,t){return IPt.call(e,t)}function jz(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Fz(e,i)&&r.push(i);return r}function bl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Bz(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function yv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function GNe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Uz(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Uz(e[t]))return!0}else if(typeof e=="object"){for(var r=jz(e),i=r.length,s=0;s<i;s++)if(Uz(e[r[s]]))return!0}}return!1}function vde(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var YNe=function(e){APt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,vde(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=vde(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Fi=YNe,kPt=bl,tw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=d$(n,this.path);r&&(r=bl(r));var i=d1(n,{op:"remove",path:this.from}).removed;return d1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=d$(n,this.from);return d1(n,{op:"add",path:this.path,value:bl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:U2(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},RPt={add:function(e,t,n){return Bz(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:tw.move,copy:tw.copy,test:tw.test,_get:tw._get};function d$(e,t){if(t=="")return e;var n={op:"_get",path:t};return d1(e,n),n.value}function d1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):h$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=d$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=U2(e,t.value),o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=bl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=h$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=GNe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!Bz(h))throw new Fi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);Bz(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Fi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=RPt[t.op].call(t,l,h,e);if(o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=tw[t.op].call(t,l,h,e);if(o.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Fi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function r4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=bl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=d1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function NPt(e,t,n){var r=d1(e,t);if(r.test===!1)throw new Fi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function h$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Fi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(tw[e.op]){if(typeof e.path!="string")throw new Fi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Fi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Fi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Uz(e.value))throw new Fi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Fi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Fi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=KNe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Fi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Fi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function KNe(e,t,n){try{if(!Array.isArray(e))throw new Fi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)r4(bl(t),bl(e),n||!0);else{n=n||h$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Fi)return i;throw i}}function U2(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!U2(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!U2(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const DPt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Fi,_areEquals:U2,applyOperation:d1,applyPatch:r4,applyReducer:NPt,deepClone:kPt,getValueByPointer:d$,validate:KNe,validator:h$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var iJ=new WeakMap,PPt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),OPt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function $Pt(e){return iJ.get(e)}function MPt(e,t){return e.observers.get(t)}function LPt(e,t){e.observers.delete(t.callback)}function FPt(e,t){t.unobserve()}function jPt(e,t){var n=[],r,i=$Pt(e);if(!i)i=new PPt(e),iJ.set(e,i);else{var s=MPt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=bl(e),t){r.callback=t,r.next=null;var o=function(){zz(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){zz(r),clearTimeout(r.next),LPt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new OPt(t,r)),r}function zz(e,t){t===void 0&&(t=!1);var n=iJ.get(e.object);sJ(n.value,e.object,e.patches,"",t),e.patches.length&&r4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function sJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=jz(t),o=jz(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Fz(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?sJ(c,f,n,r+"/"+yv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+yv(l),value:bl(c)}),n.push({op:"replace",path:r+"/"+yv(l),value:bl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+yv(l),value:bl(c)}),n.push({op:"remove",path:r+"/"+yv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Fz(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+yv(l),value:bl(t[l])})}}}function BPt(e,t,n){n===void 0&&(n=!1);var r=[];return sJ(e,t,r,"",n),r}const UPt=Object.freeze(Object.defineProperty({__proto__:null,compare:BPt,generate:zz,observe:jPt,unobserve:FPt},Symbol.toStringTag,{value:"Module"}));Object.assign({},DPt,UPt,{JsonPatchError:YNe,deepClone:bl,escapePathComponent:yv,unescapePathComponent:GNe});var zPt=/("(?:[^\\"]|\\.)*")|[:,]/g,VPt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,x;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(zPt,function(T,S){return S||T+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",x=o(a[h],y,p.length+(f===g-1?0:1)),x!==void 0&&d.push(p+x);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const $j=jl(VPt);function Qu(e,t,n){return e.fields=t||[],e.fname=n,e}function Wi(e){return e==null?null:e.fname}function ca(e){return e==null?null:e.fields}function XNe(e){return e.length===1?HPt(e[0]):qPt(e)}const HPt=e=>function(t){return t[e]},qPt=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function $e(e){throw Error(e)}function zh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||$e("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&$e("Access path missing closing bracket: "+e),r&&$e("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function xc(e,t,n){const r=zh(e);return e=r.length===1?r[0]:e,Qu((n&&n.get||XNe)(r),[e],t||e)}const Sk=xc("id"),ya=Qu(e=>e,[],"identity"),Rg=Qu(()=>0,[],"zero"),lS=Qu(()=>1,[],"one"),Sc=Qu(()=>!0,[],"true"),lg=Qu(()=>!1,[],"false");function WPt(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const QNe=0,oJ=1,aJ=2,JNe=3,ZNe=4;function uJ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:WPt,r=e||QNe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=oJ&&n(t||"error","ERROR",arguments),this},warn(){return r>=aJ&&n(t||"warn","WARN",arguments),this},info(){return r>=JNe&&n(t||"log","INFO",arguments),this},debug(){return r>=ZNe&&n(t||"log","DEBUG",arguments),this}}}var Fe=Array.isArray;function mt(e){return e===Object(e)}const bde=e=>e!=="__proto__";function cS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=GPt(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;fS(r,s,i[s],o)}return r},{})}function fS(e,t,n,r){if(!bde(t))return;let i,s;if(mt(n)&&!Fe(n)){s=mt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?fS(s,i,n[i]):bde(i)&&(s[i]=n[i])}else e[t]=n}function GPt(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Kn(e){return e[e.length-1]}function aa(e){return e==null||e===""?null:+e}const eDe=e=>t=>e*Math.exp(t),tDe=e=>t=>Math.log(e*t),nDe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),rDe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,p$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function i4(e,t,n,r){const i=n(e[0]),s=n(Kn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function iDe(e,t){return i4(e,t,aa,ya)}function sDe(e,t){var n=Math.sign(e[0]);return i4(e,t,tDe(n),eDe(n))}function oDe(e,t,n){return i4(e,t,p$(n),p$(1/n))}function aDe(e,t,n){return i4(e,t,nDe(n),rDe(n))}function s4(e,t,n,r,i){const s=r(e[0]),o=r(Kn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function lJ(e,t,n){return s4(e,t,n,aa,ya)}function cJ(e,t,n){const r=Math.sign(e[0]);return s4(e,t,n,tDe(r),eDe(r))}function m$(e,t,n,r){return s4(e,t,n,p$(r),p$(1/r))}function fJ(e,t,n,r){return s4(e,t,n,nDe(r),rDe(r))}function uDe(e){return 1+~~(new Date(e).getMonth()/3)}function lDe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function dt(e){return e!=null?Fe(e)?e:[e]:[]}function cDe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function vn(e){return typeof e=="function"}const YPt="descending";function dJ(e,t,n){n=n||{},t=dt(t)||[];const r=[],i=[],s={},o=n.comparator||KPt;return dt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===YPt?-1:1),i.push(a=vn(a)?a:xc(a,null,n)),(ca(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:Qu(o(i,r),Object.keys(s))}const o4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),KPt=(e,t)=>e.length===1?XPt(e[0],t[0]):QPt(e,t,e.length),XPt=(e,t)=>function(n,r){return o4(e(n),e(r))*t},QPt=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=o4(s(r),s(i));return o*t[a]});function va(e){return vn(e)?e:()=>e}function hJ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function gn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function wh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function fDe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const JPt=Object.prototype.hasOwnProperty;function Ft(e,t){return JPt.call(e,t)}const MN={};function dS(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==MN}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===MN&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=MN),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==MN&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function dDe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Kn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),gn(r,n)}function nw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Ry(e){return typeof e=="boolean"}function d0(e){return Object.prototype.toString.call(e)==="[object Date]"}function hDe(e){return e&&vn(e[Symbol.iterator])}function ar(e){return typeof e=="number"}function pDe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ht(e){return typeof e=="string"}function pJ(e,t,n){e&&(e=t?dt(e).map(a=>a.replace(/\\(.)/g,"$1")):dt(e));const r=e&&e.length,i=n&&n.get||XNe,s=a=>i(t?[a]:zh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return Qu(o,e,"key")}function mDe(e,t){const n=e[0],r=Kn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const ZPt=1e4;function gDe(e){e=+e||ZPt;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function yDe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function uC(e,t){let n="";for(;--t>=0;)n+=e;return n}function vDe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?uC(i,o)+s:r==="center"?uC(i,~~(o/2))+s+uC(i,Math.ceil(o/2)):s+uC(i,o)}function Tk(e){return e&&Kn(e)-e[0]||0}function nt(e){return Fe(e)?"["+e.map(nt)+"]":mt(e)||ht(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function mJ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const eOt=e=>ar(e)||d0(e)?e:Date.parse(e);function gJ(e,t){return t=t||eOt,e==null||e===""?null:t(e)}function yJ(e){return e==null||e===""?null:e+""}function Vf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function bDe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function yg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function tOt(e){return e}function nOt(e){if(e==null)return tOt;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function rOt(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function iOt(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return _de(e,n)})}:_de(e,t)}function _de(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=_De(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function _De(e,t){var n=nOt(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&rOt(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function sOt(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function oOt(e){return _De(e,aOt.apply(this,arguments))}function aOt(e,t,n){var r,i,s;if(arguments.length>1)r=uOt(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:sOt(e,r)}}function uOt(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Io="year",Hu="quarter",fa="month",Cs="week",qu="date",oa="day",Eh="dayofyear",Ol="hours",$l="minutes",Tc="seconds",Hf="milliseconds",vJ=[Io,Hu,fa,Cs,qu,oa,Eh,Ol,$l,Tc,Hf],Mj=vJ.reduce((e,t,n)=>(e[t]=1+n,e),{});function bJ(e){const t=dt(e).slice(),n={};return t.length||$e("Missing time unit."),t.forEach(i=>{Ft(Mj,i)?n[i]=1:$e(`Invalid time unit: ${i}.`)}),(n[Cs]||n[oa]?1:0)+(n[Hu]||n[fa]||n[qu]?1:0)+(n[Eh]?1:0)>1&&$e(`Incompatible time units: ${e}`),t.sort((i,s)=>Mj[i]-Mj[s]),t}const lOt={[Io]:"%Y ",[Hu]:"Q%q ",[fa]:"%b ",[qu]:"%d ",[Cs]:"W%U ",[oa]:"%a ",[Eh]:"%j ",[Ol]:"%H:00",[$l]:"00:%M",[Tc]:":%S",[Hf]:".%L",[`${Io}-${fa}`]:"%Y-%m ",[`${Io}-${fa}-${qu}`]:"%Y-%m-%d ",[`${Ol}-${$l}`]:"%H:%M"};function wDe(e,t){const n=gn({},lOt,t),r=bJ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Av=new Date;function _J(e){return Av.setFullYear(e),Av.setMonth(0),Av.setDate(1),Av.setHours(0,0,0,0),Av}function EDe(e){return SDe(new Date(e))}function xDe(e){return Vz(new Date(e))}function SDe(e){return Wp.count(_J(e.getFullYear())-1,e)}function Vz(e){return Fx.count(_J(e.getFullYear())-1,e)}function Hz(e){return _J(e).getDay()}function cOt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function TDe(e){return ADe(new Date(e))}function CDe(e){return qz(new Date(e))}function ADe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return r0.count(t-1,e)}function qz(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return jx.count(t-1,e)}function Wz(e){return Av.setTime(Date.UTC(e,0,1)),Av.getUTCDay()}function fOt(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function IDe(e,t,n,r,i){const s=t||1,o=Kn(e),a=(y,v,b)=>(b=b||y,dOt(n[b],r[b],y===o&&s,v)),u=new Date,l=Vf(e),c=l[Io]?a(Io):va(2012),f=l[fa]?a(fa):l[Hu]?a(Hu):Rg,d=l[Cs]&&l[oa]?a(oa,1,Cs+oa):l[Cs]?a(Cs,1):l[oa]?a(oa,1):l[qu]?a(qu,1):l[Eh]?a(Eh,1):lS,h=l[Ol]?a(Ol):Rg,p=l[$l]?a($l):Rg,m=l[Tc]?a(Tc):Rg,g=l[Hf]?a(Hf):Rg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function dOt(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function zE(e,t,n){return t+e*7-(n+6)%7}const hOt={[Io]:e=>e.getFullYear(),[Hu]:e=>Math.floor(e.getMonth()/3),[fa]:e=>e.getMonth(),[qu]:e=>e.getDate(),[Ol]:e=>e.getHours(),[$l]:e=>e.getMinutes(),[Tc]:e=>e.getSeconds(),[Hf]:e=>e.getMilliseconds(),[Eh]:e=>SDe(e),[Cs]:e=>Vz(e),[Cs+oa]:(e,t)=>zE(Vz(e),e.getDay(),Hz(t)),[oa]:(e,t)=>zE(1,e.getDay(),Hz(t))},pOt={[Hu]:e=>3*e,[Cs]:(e,t)=>zE(e,0,Hz(t))};function kDe(e,t){return IDe(e,t||1,hOt,pOt,cOt)}const mOt={[Io]:e=>e.getUTCFullYear(),[Hu]:e=>Math.floor(e.getUTCMonth()/3),[fa]:e=>e.getUTCMonth(),[qu]:e=>e.getUTCDate(),[Ol]:e=>e.getUTCHours(),[$l]:e=>e.getUTCMinutes(),[Tc]:e=>e.getUTCSeconds(),[Hf]:e=>e.getUTCMilliseconds(),[Eh]:e=>ADe(e),[Cs]:e=>qz(e),[oa]:(e,t)=>zE(1,e.getUTCDay(),Wz(t)),[Cs+oa]:(e,t)=>zE(qz(e),e.getUTCDay(),Wz(t))},gOt={[Hu]:e=>3*e,[Cs]:(e,t)=>zE(e,0,Wz(t))};function RDe(e,t){return IDe(e,t||1,mOt,gOt,fOt)}const yOt={[Io]:ch,[Hu]:a2.every(3),[fa]:a2,[Cs]:Fx,[qu]:Wp,[oa]:Wp,[Eh]:Wp,[Ol]:DL,[$l]:RL,[Tc]:Op,[Hf]:gE},vOt={[Io]:fh,[Hu]:u2.every(3),[fa]:u2,[Cs]:jx,[qu]:r0,[oa]:r0,[Eh]:r0,[Ol]:PL,[$l]:NL,[Tc]:Op,[Hf]:gE};function hS(e){return yOt[e]}function pS(e){return vOt[e]}function NDe(e,t,n){return e?e.offset(t,n):void 0}function DDe(e,t,n){return NDe(hS(e),t,n)}function PDe(e,t,n){return NDe(pS(e),t,n)}function ODe(e,t,n,r){return e?e.range(t,n,r):void 0}function $De(e,t,n,r){return ODe(hS(e),t,n,r)}function MDe(e,t,n,r){return ODe(pS(e),t,n,r)}const lC=1e3,cC=lC*60,fC=cC*60,a4=fC*24,bOt=a4*7,wde=a4*30,Gz=a4*365,LDe=[Io,fa,qu,Ol,$l,Tc,Hf],dC=LDe.slice(0,-1),hC=dC.slice(0,-1),pC=hC.slice(0,-1),_Ot=pC.slice(0,-1),wOt=[Io,Cs],Ede=[Io,fa],FDe=[Io],pT=[[dC,1,lC],[dC,5,5*lC],[dC,15,15*lC],[dC,30,30*lC],[hC,1,cC],[hC,5,5*cC],[hC,15,15*cC],[hC,30,30*cC],[pC,1,fC],[pC,3,3*fC],[pC,6,6*fC],[pC,12,12*fC],[_Ot,1,a4],[wOt,1,bOt],[Ede,1,wde],[Ede,3,3*wde],[FDe,1,Gz]];function jDe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Tk(t))/n;let i=$x(a=>a[2]).right(pT,r),s,o;return i===pT.length?(s=FDe,o=C0(t[0]/Gz,t[1]/Gz,n)):i?(i=pT[r/pT[i-1][2]<pT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=LDe,o=Math.max(C0(t[0],t[1],n),1)),{units:s,step:o}}function mC(e){const t={};return n=>t[n]||(t[n]=e(n))}function EOt(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=xOt(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function xOt(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function BDe(e){const t=mC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=R1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return EOt(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=R1(o??",f");const a=C0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=xEe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=SEe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=EEe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let Yz;UDe();function UDe(){return Yz=BDe({format:Xd,formatPrefix:YG})}function zDe(e){return BDe(wEe(e))}function g$(e){return arguments.length?Yz=zDe(e):Yz}function xde(e,t,n){n=n||{},mt(n)||$e(`Invalid time multi-format specifier: ${n}`);const r=t(Tc),i=t($l),s=t(Ol),o=t(qu),a=t(Cs),u=t(fa),l=t(Hu),c=t(Io),f=e(n[Hf]||".%L"),d=e(n[Tc]||":%S"),h=e(n[$l]||"%I:%M"),p=e(n[Ol]||"%I %p"),m=e(n[qu]||n[oa]||"%a %d"),g=e(n[Cs]||"%b %d"),y=e(n[fa]||"%B"),v=e(n[Hu]||"%B"),b=e(n[Io]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function VDe(e){const t=mC(e.format),n=mC(e.utcFormat);return{timeFormat:r=>ht(r)?t(r):xde(t,hS,r),utcFormat:r=>ht(r)?n(r):xde(n,pS,r),timeParse:mC(e.parse),utcParse:mC(e.utcParse)}}let Kz;HDe();function HDe(){return Kz=VDe({format:uY,parse:$g,utcFormat:HI,utcParse:Mxe})}function qDe(e){return VDe(Nxe(e))}function z2(e){return arguments.length?Kz=qDe(e):Kz}const Xz=(e,t)=>gn({},e,t);function WDe(e,t){const n=e?zDe(e):g$(),r=t?qDe(t):z2();return Xz(n,r)}function wJ(e,t){const n=arguments.length;return n&&n!==2&&$e("defaultLocale expects either zero or two arguments."),n?Xz(g$(e),z2(t)):Xz(g$(),z2())}function SOt(){return UDe(),HDe(),wJ()}const TOt=/^(data:|([A-Za-z]+:)?\/\/)/,COt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,AOt=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Sde="file://";function IOt(e,t){return n=>({options:n||{},sanitize:ROt,load:kOt,fileAccess:!!t,file:NOt(t),http:POt(e)})}async function kOt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function ROt(e,t){t=gn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=COt.test(e.replace(AOt,""));(e==null||typeof e!="string"||!a)&&$e("Sanitize failure, invalid URI: "+nt(e));const u=TOt.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(Sde))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(Sde.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function NOt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):DOt}async function DOt(){$e("No file system access.")}function POt(e){return e?async function(t,n){const r=gn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?vn(s[i])?s[i]():s.text():$e(s.status+""+s.statusText)}:OOt}async function OOt(){$e("No HTTP fetch method available.")}const $Ot=e=>e!=null&&e===e,MOt=e=>e==="true"||e==="false"||e===!0||e===!1,LOt=e=>!Number.isNaN(Date.parse(e)),GDe=e=>!Number.isNaN(+e)&&!(e instanceof Date),FOt=e=>GDe(e)&&Number.isInteger(+e),Qz={boolean:mJ,integer:aa,number:aa,date:gJ,string:yJ,unknown:ya},LN=[MOt,FOt,GDe,LOt],jOt=["boolean","integer","number","date"];function YDe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=LN.length,i=LN.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&$Ot(u)&&!LN[a](u)&&(i[a]=0,++o,o===LN.length))return"string";return jOt[i.reduce((s,o)=>s===0?o:s,0)-1]}function KDe(e,t){return t.reduce((n,r)=>(n[r]=YDe(e,r),n),{})}function Tde(e){const t=function(n,r){const i={delimiter:e};return EJ(n,r?gn(r,i):i)};return t.responseType="text",t}function EJ(e,t){return t.header&&(e=t.header.map(nt).join(t.delimiter)+`
`+e),vEe(t.delimiter).parse(e+"")}EJ.responseType="text";function BOt(e){return typeof Buffer=="function"&&vn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function xJ(e,t){const n=t&&t.property?xc(t.property):ya;return mt(e)&&!BOt(e)?UOt(n(e),t):n(JSON.parse(e))}xJ.responseType="json";function UOt(e,t){return!Fe(e)&&hDe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const zOt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function XDe(e,t){let n,r,i,s;return e=xJ(e,t),t&&t.feature?(n=iOt,i=t.feature):t&&t.mesh?(n=oOt,i=t.mesh,s=zOt[t.filter]):$e("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):$e("Invalid TopoJSON object: "+i),r&&r.features||[r]}XDe.responseType="json";const nP={dsv:EJ,csv:Tde(","),tsv:Tde("	"),json:xJ,topojson:XDe};function SJ(e,t){return arguments.length>1?(nP[e]=t,this):Ft(nP,e)?nP[e]:null}function QDe(e){const t=SJ(e);return t&&t.responseType||"text"}function JDe(e,t,n,r){t=t||{};const i=SJ(t.type||"json");return i||$e("Unknown data format type: "+t.type),e=i(e,t),t.parse&&VOt(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function VOt(e,t,n,r){if(!e.length)return;const i=z2();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=KDe(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!Qz[p])throw Error("Illegal format pattern: "+h+":"+p);return Qz[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const u4=IOt(typeof fetch<"u"&&fetch,null);function l4(e){const t=e||ya,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function rP(e,t){try{await t(e)}catch(n){e.error(n)}}const ZDe=Symbol("vega_id");let HOt=1;function c4(e){return!!(e&&Mt(e))}function Mt(e){return e[ZDe]}function ePe(e,t){return e[ZDe]=t,e}function br(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:ePe(t,HOt++)}function TJ(e){return f4(e,br({}))}function f4(e,t){for(const n in e)t[n]=e[n];return t}function tPe(e,t){return ePe(t,Mt(e))}function kb(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function nPe(e){return e&&e.constructor===Rb}function Rb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Rb,insert(a){const u=dt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=vn(a)?r:t,l=dt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:va(l)};return vn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return vn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(br(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const iP="_:mod:_";function d4(){Object.defineProperty(this,iP,{writable:!0,value:{}})}d4.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[iP];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Fe(n)?1+n.length:-1),i},modified(e,t){const n=this[iP];if(arguments.length){if(Fe(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[iP]={},this}};let qOt=0;const WOt="pulse",GOt=new d4,YOt=1,KOt=2;function Wr(e,t,n,r){this.id=++qOt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function Cde(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Wr.prototype={targets(){return this._targets||(this._targets=l4(Sk))},set(e){return this.value!==e?(this.value=e,1):0},skip:Cde(YOt),modified:Cde(KOt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new d4,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Wr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===WOt)dt(a).forEach(f=>{f instanceof Wr?f!==this&&(f.targets().add(this),s.push(f)):$e("Pulse parameters must be operator instances.")}),this.source=a;else if(Fe(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||GOt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function XOt(e,t,n,r){let i=1,s;return e instanceof Wr?s=e:e&&e.prototype instanceof Wr?s=new e:vn(e)?s=new Wr(null,e):(i=0,s=new Wr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function QOt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let JOt=0;function h4(e,t,n){this.id=++JOt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function cg(e,t,n){return new h4(e,t,n)}h4.prototype={_filter:Sc,_apply:ya,targets(){return this._targets||(this._targets=l4(Sk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=cg(e);return this.targets().add(t),t},apply(e){const t=cg(null,e);return this.targets().add(t),t},merge(){const e=cg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=cg();return this.targets().add(cg(null,null,hJ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(cg(null,null,()=>n=!0)),t.targets().add(cg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Sc,this._targets=null}};function ZOt(e,t,n,r){const i=this,s=cg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=dt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function e3t(e,t){const n=this.locale();return JDe(e,t,n.timeParse,n.utcParse)}function t3t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function n3t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:QDe(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function r3t(e,t,n){const r=this,i=r._pending||i3t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Sc).insert(s.data||[])),i.done(),s}function i3t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const s3t={skip:!0};function o3t(e,t,n,r,i){return(e instanceof Wr?u3t:a3t)(this,e,t,n,r,i),this}function a3t(e,t,n,r,i,s){const o=gn({},s,s3t);let a,u;vn(n)||(n=va(n)),r===void 0?a=l=>e.touch(n(l)):vn(r)?(u=new Wr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;nPe(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function u3t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Wr(null,l3t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function l3t(e,t){return t=vn(t)?t:va(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function c3t(e){e.rank=++this._rank}function f3t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&$e("Cycle detected in dataflow graph.")}const y$={},wd=1,vg=2,hp=4,d3t=wd|vg,Ade=wd|hp,c_=wd|vg|hp,Ide=8,mT=16,kde=32,Rde=64;function h0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function Lj(e,t){const n=[];return yg(e,t,r=>n.push(r)),n}function Nde(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function FN(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}h0.prototype={StopPropagation:y$,ADD:wd,REM:vg,MOD:hp,ADD_REM:d3t,ADD_MOD:Ade,ALL:c_,REFLOW:Ide,SOURCE:mT,NO_SOURCE:kde,NO_FIELDS:Rde,fork(e){return new h0(this.dataflow).init(this,e)},clone(){const e=this.fork(c_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(c_|mT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new h0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Rde)&&(n.fields=e.fields),t&wd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&vg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&hp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&kde?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||c_;return t&wd&&this.add.length||t&vg&&this.rem.length||t&hp&&this.mod.length},reflow(e){if(e)return this.fork(c_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(hp,Nde(this,wd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Fe(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Fe(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&wd&&(n.addF=FN(n.addF,t)),e&vg&&(n.remF=FN(n.remF,t)),e&hp&&(n.modF=FN(n.modF,t)),e&mT&&(n.srcF=FN(n.srcF,t)),n},materialize(e){e=e||c_;const t=this;return e&wd&&t.addF&&(t.add=Lj(t.add,t.addF),t.addF=null),e&vg&&t.remF&&(t.rem=Lj(t.rem,t.remF),t.remF=null),e&hp&&t.modF&&(t.mod=Lj(t.mod,t.modF),t.modF=null),e&mT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&mT)return yg(n.source,n.srcF,r),n;e&wd&&yg(n.add,n.addF,r),e&vg&&yg(n.rem,n.remF,r),e&hp&&yg(n.mod,n.modF,r);const i=n.source;if(e&Ide&&i){const s=n.add.length+n.mod.length;s===i.length||(s?yg(i,Nde(n,Ade),r):yg(i,n.srcF,r))}return n}};function CJ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(CJ,h0,{fork(e){const t=new h0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Fe(e)?e.some(r=>n[r]):n[e]:0},filter(){$e("MultiPulse does not support filtering.")},materialize(){$e("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function h3t(e,t,n){const r=this,i=[];if(r._pulse)return rPe(r);if(r._pending&&await r._pending,t&&await rP(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new h0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=l4(Sk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=y$),u!==y$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await rP(r,c[f].callback)}return n&&await rP(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function p3t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function m3t(e,t,n){return this._pulse?rPe(this):(this.evaluate(e,t,n),this)}function g3t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function rPe(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function y3t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function v3t(e,t){const n=e.source,r=this._clock;return n&&Fe(n)?new CJ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||b3t(this._pulse,n&&n.pulse)}function b3t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==y$&&(e.source=t.source),e)}const AJ={skip:!1,force:!1};function _3t(e,t){const n=t||AJ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function w3t(e,t,n){const r=n||AJ;return(e.set(t)||r.force)&&this.touch(e,r),this}function E3t(e,t,n){this.touch(e,n||AJ);const r=new h0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function x3t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),iPe(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,S3t(t,0,e)):r=n,r}}}function iPe(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function S3t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,iPe(e,r,t,n)}function jw(){this.logger(uJ()),this.logLevel(oJ),this._clock=0,this._rank=0,this._locale=wJ();try{this._loader=u4()}catch{}this._touched=l4(Sk),this._input={},this._pulse=null,this._heap=x3t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function gT(e){return function(){return this._log[e].apply(this,arguments)}}jw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:gT("error"),warn:gT("warn"),info:gT("info"),debug:gT("debug"),logLevel:gT("level"),cleanThreshold:1e4,add:XOt,connect:QOt,rank:c3t,rerank:f3t,pulse:E3t,touch:_3t,update:w3t,changeset:Rb,ingest:t3t,parse:e3t,preload:r3t,request:n3t,events:ZOt,on:o3t,evaluate:h3t,run:m3t,runAsync:p3t,runAfter:g3t,_enqueue:y3t,_getPulse:v3t};function Re(e,t){Wr.call(this,e,null,t)}lt(Re,Wr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const VE={};function sPe(e){const t=oPe(e);return t&&t.Definition||null}function oPe(e){return e=e&&e.toLowerCase(),Ft(VE,e)?VE[e]:null}function*aPe(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function IJ(e,t,n){const r=Float64Array.from(aPe(e,n));return r.sort(Vp),t.map(i=>Mwe(r,i))}function kJ(e,t){return IJ(e,[.25,.5,.75],t)}function RJ(e,t){const n=e.length,r=Xrt(e,t),i=kJ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function uPe(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Cc=Math.random;function T3t(e){Cc=e}function lPe(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(aPe(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Cc()*s)];c[l]=a/s}return c.sort(Vp),[yw(c,n/2),yw(c,1-n/2)]}function cPe(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?C3t(s,t+t/4):s}function C3t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function A3t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function I3t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Cc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const fPe=Math.sqrt(2*Math.PI),k3t=Math.SQRT2;let yT=NaN;function p4(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(yT===yT)n=yT,yT=NaN;else{do n=Cc()*2-1,r=Cc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,yT=r*s}return e+n*t}function NJ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*fPe)}function m4(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function g4(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*k3t*R3t(2*e-1)}function R3t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function DJ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>p4(n,r),pdf:s=>NJ(s,n,r),cdf:s=>m4(s,n,r),icdf:s=>g4(s,n,r)};return i.mean(e).stdev(t)}function PJ(e,t){const n=DJ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=RJ(e)),i):t},sample(){return e[~~(Cc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function OJ(e,t){return e=e||0,t=t??1,Math.exp(e+p4()*t)}function $J(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*fPe*e)}function MJ(e,t,n){return m4(Math.log(e),t,n)}function LJ(e,t,n){return Math.exp(g4(e,t,n))}function dPe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>OJ(n,r),pdf:s=>$J(s,n,r),cdf:s=>MJ(s,n,r),icdf:s=>LJ(s,n,r)};return i.mean(e).stdev(t)}function hPe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Cc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function FJ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Cc()}function jJ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function BJ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function UJ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function pPe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>FJ(n,r),pdf:s=>jJ(s,n,r),cdf:s=>BJ(s,n,r),icdf:s=>UJ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function zJ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Ck(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function y4(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Ak(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function mS(e,t,n,r,i){let s=0,o=0;return Ak(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function VJ(e,t,n){let r=0,i=0,s=0,o=0,a=0;Ak(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Ck(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:mS(e,t,n,i,l)}}function mPe(e,t,n){let r=0,i=0,s=0,o=0,a=0;Ak(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Ck(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:mS(e,t,n,i,l)}}function gPe(e,t,n){const[r,i,s,o]=y4(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Ak(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=Ck(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:mS(e,t,n,o,y)}}function yPe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Ak(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Ck(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:mS(e,t,n,a,c)}}function HJ(e,t,n){const[r,i,s,o]=y4(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,x=-b*u,T=S=>(S=S-s,b*S*S+w*S+x+o);return{coef:[x-w*s+b*s*s+o,w-2*b*s,b],predict:T,rSquared:mS(e,t,n,o,T)}}function vPe(e,t,n,r){if(r===0)return zJ(e,t,n);if(r===1)return VJ(e,t,n);if(r===2)return HJ(e,t,n);const[i,s,o,a]=y4(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=D3t(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:N3t(f,y,-o,a),predict:v,rSquared:mS(e,t,n,a,v)}}function N3t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function D3t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const Dde=2,Pde=1e-12;function bPe(e,t,n,r){const[i,s,o,a]=y4(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=Dde;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let x=0,T=0,S=0,C=0,A=0;const R=1/Math.abs(i[w]-y||1);for(let D=v;D<=b;++D){const $=i[D],L=s[D],F=P3t(Math.abs(y-$)*R)*d[D],B=$*F;x+=F,T+=B,S+=L*F,C+=L*B,A+=$*B}const[k,O]=Ck(T/x,S/x,C/x,A/x);c[g]=k+O*y,f[g]=Math.abs(s[g]-c[g]),O3t(i,g+1,p)}if(h===Dde)break;const m=Lwe(f);if(Math.abs(m)<Pde)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?Pde:(v=1-y*y)*v}return $3t(i,c,o,a)}function P3t(e){return(e=1-e*e*e)*e*e}function O3t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function $3t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const M3t=.5*Math.PI/180;function v4(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=L3t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&F3t(f,m,d,h,p)>M3t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function L3t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function F3t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function j3t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function Jz(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:j3t(e)}function _Pe(e,t,n){return n||e+(t?"_"+t:"")}const Fj=()=>{},B3t={init:Fj,add:Fj,rem:Fj,idx:0},V2={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Ik=Object.keys(V2).filter(e=>e!=="__count__");function U3t(e,t){return(n,r)=>gn({name:e,aggregate_param:r,out:n||e},B3t,t)}[...Ik,"__count__"].forEach(e=>{V2[e]=U3t(e,V2[e])});function wPe(e,t,n){return V2[e](n,t)}function EPe(e,t){return e.idx-t.idx}function z3t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=V2[i]())})};return e.forEach(n),Object.values(t).sort(EPe)}function V3t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function H3t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function q3t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function W3t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function xPe(e,t){const n=t||ya,r=z3t(e),i=e.slice().sort(EPe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=V3t,s.prototype.add=H3t,s.prototype.rem=q3t,s.prototype.set=W3t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function qJ(e){this._key=e?xc(e):Mt,this.reset()}const Mo=qJ.prototype;Mo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Mo.add=function(e){this._add.push(e)};Mo.rem=function(e){this._rem.push(e)};Mo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Mo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};Mo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=fDe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Mo.argmin=function(e){return this.extent(e)[0]||{}};Mo.argmax=function(e){return this.extent(e)[1]||{}};Mo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Mo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Mo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=kJ(this.values(),e),this._get=e),this._q};Mo.q1=function(e){return this.quartile(e)[0]};Mo.q2=function(e){return this.quartile(e)[1]};Mo.q3=function(e){return this.quartile(e)[2]};Mo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=lPe(this.values(),1e3,.05,e),this._get=e),this._ci};Mo.ci0=function(e){return this.ci(e)[0]};Mo.ci1=function(e){return this.ci(e)[1]};function W0(e){Re.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}W0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ik},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(W0,Re,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=dt(ca(v)),w=b.length;let x=0,T;for(;x<w;++x)r[T=b[x]]||(r[T]=1,t.push(T))}this._dims=dt(e.groupby),this._dnames=this._dims.map(v=>{const b=Wi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:Jz(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&$e("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&$e("Null aggregate field specified."),m=Wi(f),g=_Pe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(wPe(d,h,g))}return this._measures=this._measures.map(v=>xPe(v,v.field)),Object.create(null)},cellkey:Jz(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new qJ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?tPe(t.tuple,s):br(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const G3t=1e-14;function WJ(e){Re.call(this,null,e)}WJ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(WJ,Re,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ca(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=uPe(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=aa(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(G3t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=Qu(u,ca(t),e.name||"bin_"+Wi(t))}});function SPe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?yDe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function GJ(e){Re.call(this,[],e)}GJ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(GJ,Re,{transform(e,t){const n=t.fork(t.ALL),r=SPe(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(kb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function TPe(e){Wr.call(this,null,Y3t,e)}lt(TPe,Wr);function Y3t(e){return this.value&&!e.modified()?this.value:dJ(e.fields,e.orders)}function YJ(e){Re.call(this,null,e)}YJ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function K3t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(YJ,Re,{transform(e,t){const n=f=>d=>{for(var h=K3t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=br({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function KJ(e){Re.call(this,null,e)}KJ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(KJ,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=X3t(a,i,s,e.filter||Sc)):n.mod=a,n.source=this.value,n.modifies(r)}});function X3t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(br(s)),s={},s[t]=l);return i}const Ode={kde:PJ,mixture:hPe,normal:DJ,lognormal:dPe,uniform:pPe},Q3t="distributions",$de="function",J3t="field";function CPe(e,t){const n=e[$de];Ft(Ode,n)||$e("Unknown distribution function: "+n);const r=Ode[n]();for(const i in e)i===J3t?r.data((e.from||t()).map(e[i])):i===Q3t?r[i](e[i].map(s=>CPe(s,t))):typeof r[i]===$de&&r[i](e[i]);return r}function XJ(e){Re.call(this,null,e)}const APe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Z3t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:APe},{name:"weights",type:"number",array:!0}]};XJ.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:APe.concat(Z3t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(XJ,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=CPe(e.distribution,e$t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&$e("Invalid density method: "+o),!e.extent&&!r.data&&$e("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||wh(r.data()),l=v4(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],br(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function e$t(e){return()=>e.materialize(e.SOURCE).source}function IPe(e,t){return e?e.map((n,r)=>t[r]||Wi(n)):null}function QJ(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const kPe="bin";function JJ(e){Re.call(this,null,e)}JJ.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:kPe}]};const t$t=(e,t)=>Tk(wh(e,t))/30;lt(JJ,Re,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=QJ(t.source,e.groupby,ya),i=e.smooth||!1,s=e.field,o=e.step||t$t(n,s),a=kb((p,m)=>s(p)-s(m)),u=e.as||kPe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of cPe(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function RPe(e){Wr.call(this,null,n$t,e),this.modified(!0)}lt(RPe,Wr);function n$t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Qu(n=>t(n,e),ca(t),Wi(t))}function ZJ(e){Re.call(this,[void 0,void 0],e)}ZJ.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(ZJ,Re,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=aa(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Wi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function eZ(e,t){Wr.call(this,e),this.parent=t,this.count=0}lt(eZ,Wr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function b4(e){Re.call(this,{},e),this._keys=dS();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(b4,Re,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new eZ(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function NPe(e){Wr.call(this,null,r$t,e)}lt(NPe,Wr);function r$t(e){return this.value&&!e.modified()?this.value:Fe(e.name)?dt(e.name).map(t=>xc(t)):xc(e.name,e.as)}function tZ(e){Re.call(this,dS(),e)}tZ.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(tZ,Re,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function nZ(e){Re.call(this,[],e)}nZ.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(nZ,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=IPe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=TJ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function rZ(e){Re.call(this,[],e)}rZ.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(rZ,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Wi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=TJ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function iZ(e){Re.call(this,null,e)}iZ.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(iZ,Re,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function DPe(e){Re.call(this,[],e)}lt(DPe,Re,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=br(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const jN={value:"value",median:Lwe,mean:sit,min:ZA,max:Hp},i$t=[];function sZ(e){Re.call(this,[],e)}sZ.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function s$t(e){var t=e.method||jN.value,n;if(jN[t]==null)$e("Unrecognized imputation method: "+t);else return t===jN.value?(n=e.value!==void 0?e.value:0,()=>n):jN[t]}function o$t(e){const t=e.field;return n=>n?t(n):NaN}lt(sZ,Re,{transform(e,t){var n=t.fork(t.ALL),r=s$t(e),i=o$t(e),s=Wi(e.field),o=Wi(e.key),a=(e.groupby||[]).map(Wi),u=a$t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,x;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],x={_impute:!0},y=0,w=p.length;y<w;++y)x[a[y]]=p[y];x[o]=m,x[s]=Number.isNaN(h)?h=r(d,i):h,l.push(br(x))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function a$t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):i$t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function oZ(e){W0.call(this,e)}oZ.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Ik},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(oZ,W0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{gn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function aZ(e){Re.call(this,null,e)}aZ.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(aZ,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=QJ(r,e.groupby,e.field),s=(e.groupby||[]).map(Wi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&$e("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=wh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=PJ(h,o)[a],m=e.counts?h.length:1,g=c||wh(h);v4(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(br(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function PPe(e){Wr.call(this,null,u$t,e)}lt(PPe,Wr);function u$t(e){return this.value&&!e.modified()?this.value:pJ(e.fields,e.flat)}function OPe(e){Re.call(this,[],e),this._pending=null}lt(OPe,Re,{transform(e,t){const n=t.dataflow;return this._pending?jj(this,t,this._pending):l$t(e)?t.StopPropagation:e.values?jj(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=dt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>jj(this,t,dt(r.data)))}});function l$t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function jj(e,t,n){n.forEach(br);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function uZ(e){Re.call(this,{},e)}uZ.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(uZ,Re,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&$e('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&$e('The "as" parameter has too few output field names.'),c=c||i.map(Wi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||$e("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function $Pe(e){Wr.call(this,null,c$t,e)}lt($Pe,Wr);function c$t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function MPe(e){Wr.call(this,null,f$t,e)}lt(MPe,Wr);function f$t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function LPe(e){Re.call(this,null,e)}lt(LPe,Re,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function lZ(e){W0.call(this,e)}lZ.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Ik,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(lZ,W0,{_transform:W0.prototype.transform,transform(e,t){return this._transform(d$t(e,t),t)}});function d$t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ca(n).concat(ca(r)),o=p$t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>h$t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function h$t(e,t,n,r){return Qu(i=>t(i)===e?n(i):NaN,r,e+"")}function p$t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(o4),t?i.slice(0,t):i}function FPe(e){b4.call(this,e)}lt(FPe,b4,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(ca(r)))&&$e("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(br(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function cZ(e){Re.call(this,null,e)}cZ.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(cZ,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=IPe(e.fields,e.as||[]),s=r?(a,u)=>m$t(a,u,r,i):f4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,br({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function m$t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function jPe(e){Re.call(this,null,e)}lt(jPe,Re,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function fZ(e){Re.call(this,null,e)}fZ.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const g$t=1e-14;lt(fZ,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=QJ(i,e.groupby,e.field),o=(e.groupby||[]).map(Wi),a=[],u=e.step||.01,l=e.probs||yl(u/2,1-g$t,u),c=l.length;return s.forEach(f=>{const d=IJ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(br(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function BPe(e){Re.call(this,null,e)}lt(BPe,Re,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=TJ(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function dZ(e){Re.call(this,[],e),this.count=0}dZ.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(dZ,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Cc()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function hZ(e){Re.call(this,null,e)}hZ.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(hZ,Re,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=yl(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,br(s)}),n.add=t.add.concat(this.value),n}});function UPe(e){Re.call(this,null,e),this.modified(!0)}lt(UPe,Re,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function pZ(e){Re.call(this,null,e)}const zPe=["unit0","unit1"];pZ.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:vJ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:zPe}]};lt(pZ,Re,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?pS:hS)(s.unit).offset,a=e.as||zPe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ca(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:jDe({extent:e.extent||wh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=bJ(r),o=this.value||{},a=(n?RDe:kDe)(s,i);return a.unit=Kn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function VPe(e){Re.call(this,dS(),e)}lt(VPe,Re,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function HPe(e){Re.call(this,null,e)}lt(HPe,Re,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(kb(e.sort)):t.source).map(e.field))}});function y$t(e,t,n,r){const i=H2[e](t,n);return{init:i.init||Rg,update:function(s,o){o[r]=i.next(s)}}}const H2={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=H2.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||$e("ntile num must be greater than zero.");const n=H2.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||$e("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=v$t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function v$t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const b$t=Object.keys(H2);function qPe(e){const t=dt(e.ops),n=dt(e.fields),r=dt(e.params),i=dt(e.aggregate_params),s=dt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){dt(ca(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Wi(g),w=_Pe(p,b,s[m]);if(h(g),o.push(w),Ft(H2,p))a.push(y$t(p,g,y,w));else{if(g==null&&p!=="count"&&$e("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let x=l[b];x||(x=l[b]=[],x.field=g,f.push(x)),x.push(wPe(p,v,w))}}),(c.length||f.length)&&(this.cell=_$t(f,c,d)),this.inputs=Object.keys(u)}const WPe=qPe.prototype;WPe.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};WPe.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function _$t(e,t,n){e=e.map(u=>xPe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new qJ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function mZ(e){Re.call(this,{},e),this._mlen=0,this._mods=[]}mZ.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:b$t.concat(Ik)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(mZ,Re,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=kb(e.sort),i=Jz(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new qPe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)w$t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=SPe(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function w$t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?$x(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||va(-1)};t.init();for(let f=0;f<u;++f)E$t(c,o,f,u),s&&x$t(c,l),t.update(c,a[f])}function E$t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function x$t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const S$t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:W0,bin:WJ,collect:GJ,compare:TPe,countpattern:YJ,cross:KJ,density:XJ,dotbin:JJ,expression:RPe,extent:ZJ,facet:b4,field:NPe,filter:tZ,flatten:nZ,fold:rZ,formula:iZ,generate:DPe,impute:sZ,joinaggregate:oZ,kde:aZ,key:PPe,load:OPe,lookup:uZ,multiextent:$Pe,multivalues:MPe,params:LPe,pivot:lZ,prefacet:FPe,project:cZ,proxy:jPe,quantile:fZ,relay:BPe,sample:dZ,sequence:hZ,sieve:UPe,subflow:eZ,timeunit:pZ,tupleindex:VPe,values:HPe,window:mZ},Symbol.toStringTag,{value:"Module"}));function p0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const T$t=()=>typeof Image<"u"?Image:null;function gZ(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const C$t="identity",HE="linear",Sm="log",kk="pow",Rk="sqrt",_4="symlog",W1="time",G1="utc",sh="sequential",gS="diverging",qE="quantile",w4="quantize",E4="threshold",yZ="ordinal",Zz="point",GPe="band",vZ="bin-ordinal",Ms="continuous",Nk="discrete",Dk="discretizing",Fc="interpolating",bZ="temporal";function A$t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function I$t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function _Z(){const e=UI().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=gZ(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=yl(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,T0(h,m)-1),v=m===g?y:T0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return _Z().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function YPe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return YPe(t())},e}function k$t(){return YPe(_Z().paddingInner(1))}var R$t=Array.prototype.map;function N$t(e){return R$t.call(e,aa)}const D$t=Array.prototype.slice;function KPe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(T0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=N$t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=D$t.call(r),n):t.slice()},n.tickFormat=function(r,i){return wxe(e[0],Kn(e),r??10,i)},n.copy=function(){return KPe().domain(n.domain()).range(n.range())},n}const v$=new Map,XPe=Symbol("vega_scale");function QPe(e){return e[XPe]=!0,e}function P$t(e){return e&&e[XPe]===!0}function O$t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?A$t(s):s.invertExtent?I$t(s):void 0),s.type=e,QPe(s)};return r.metadata=Vf(dt(n)),r}function pr(e,t,n){return arguments.length>1?(v$.set(e,O$t(e,t,n)),this):JPe(e)?v$.get(e):void 0}pr(C$t,Exe);pr(HE,VI,Ms);pr(Sm,Sxe,[Ms,Sm]);pr(kk,oY,Ms);pr(Rk,jut,Ms);pr(_4,Txe,Ms);pr(W1,bE,[Ms,bZ]);pr(G1,ect,[Ms,bZ]);pr(sh,cY,[Ms,Fc]);pr(`${sh}-${HE}`,cY,[Ms,Fc]);pr(`${sh}-${Sm}`,Lxe,[Ms,Fc,Sm]);pr(`${sh}-${kk}`,fY,[Ms,Fc]);pr(`${sh}-${Rk}`,tct,[Ms,Fc]);pr(`${sh}-${_4}`,Fxe,[Ms,Fc]);pr(`${gS}-${HE}`,jxe,[Ms,Fc]);pr(`${gS}-${Sm}`,Bxe,[Ms,Fc,Sm]);pr(`${gS}-${kk}`,dY,[Ms,Fc]);pr(`${gS}-${Rk}`,nct,[Ms,Fc]);pr(`${gS}-${_4}`,Uxe,[Ms,Fc]);pr(qE,Cxe,[Dk,qE]);pr(w4,Axe,Dk);pr(E4,Ixe,Dk);pr(vZ,KPe,[Nk,Dk]);pr(yZ,UI,Nk);pr(GPe,_Z,Nk);pr(Zz,k$t,Nk);function JPe(e){return v$.has(e)}function Nb(e,t){const n=v$.get(e);return n&&n.metadata[t]}function wZ(e){return Nb(e,Ms)}function WE(e){return Nb(e,Nk)}function eV(e){return Nb(e,Dk)}function ZPe(e){return Nb(e,Sm)}function $$t(e){return Nb(e,bZ)}function eOe(e){return Nb(e,Fc)}function tOe(e){return Nb(e,qE)}const M$t=["clamp","base","constant","exponent"];function nOe(e,t){const n=t[0],r=Kn(t)-n;return function(i){return e(n+i*r)}}function x4(e,t,n){return UG(EZ(t||"rgb",n),e)}function rOe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function iOe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?va(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=pr(s)().domain([t,n]).range([0,1]),M$t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function EZ(e,t){const n=Qit[L$t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function L$t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const F$t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},j$t={accent:ict,category10:rct,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:sct,observable10:oct,paired:act,pastel1:uct,pastel2:lct,set1:cct,set2:fct,set3:dct,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function sOe(e){if(Fe(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function oOe(e,t){for(const n in e)xZ(n,t(e[n]))}const Mde={};oOe(j$t,sOe);oOe(F$t,e=>x4(sOe(e)));function xZ(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Mde[e]=t,this):Mde[e]}const sP="symbol",B$t="discrete",U$t="gradient",z$t=e=>Fe(e)?e.map(t=>String(t)):String(e),V$t=(e,t)=>e[1]-t[1],H$t=(e,t)=>t[1]-e[1];function SZ(e,t,n){let r;return ar(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Tk(e.domain())/n||1)+1))),mt(t)&&(r=t.step,t=t.interval),ht(t)&&(t=e.type===W1?hS(t):e.type==G1?pS(t):$e("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function aOe(e,t,n){let r=e.range(),i=r[0],s=Kn(r),o=V$t;if(i>s&&(r=s,s=i,i=r,o=H$t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Kn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function TZ(e,t){return e.bins?aOe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function uOe(e,t,n,r,i,s){const o=t.type;let a=z$t;if(o===W1||i===W1)a=e.timeFormat(r);else if(o===G1||i===G1)a=e.utcFormat(r);else if(ZPe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=lOe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function lOe(e,t,n){const r=TZ(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const tV={[qE]:"quantiles",[w4]:"thresholds",[E4]:"domain"},cOe={[qE]:"quantiles",[w4]:"domain"};function fOe(e,t){return e.bins?G$t(e.bins):e.type===Sm?lOe(e,t,!0):tV[e.type]?W$t(e[tV[e.type]]()):TZ(e,t)}function q$t(e,t,n){const r=t[cOe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function W$t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function G$t(e){const t=e.slice(0,-1);return t.max=Kn(e),t}const Y$t=e=>tV[e.type]||e.bins;function dOe(e,t,n,r,i,s,o){const a=cOe[t.type]&&s!==W1&&s!==G1?q$t(e,t,i):uOe(e,t,n,i,s,o);return r===sP&&Y$t(t)?K$t(a):r===B$t?X$t(a):Q$t(a)}const K$t=e=>(t,n,r)=>{const i=Lde(r[n+1],Lde(r.max,1/0)),s=Fde(t,e),o=Fde(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},Lde=(e,t)=>e??t,X$t=e=>(t,n)=>n?e(t):null,Q$t=e=>t=>e(t),Fde=(e,t)=>Number.isFinite(e)?t(e):null;function J$t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Kn(t),s=i-r;if(e.type===E4){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Z$t(e,t,n,r){const i=r||t.type;return ht(n)&&$$t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===W1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===G1?e.utcFormat("%A, %d %B %Y, %X UTC"):dOe(e,t,5,null,n,r,!0)}function hOe(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Z$t(e,t,n.format,n.formatType);if(eV(t.type)){const s=fOe(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(WE(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Kn(s))}`}}let pOe=0;function eMt(){pOe=0}const b$="p_";function CZ(e){return e&&e.gradient}function mOe(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?b$:"";return i||(i=e.id="gradient_"+pOe++,r==="radial"?(e.x1=cd(e.x1,.5),e.y1=cd(e.y1,.5),e.r1=cd(e.r1,0),e.x2=cd(e.x2,.5),e.y2=cd(e.y2,.5),e.r2=cd(e.r2,.5),s=b$):(e.x1=cd(e.x1,0),e.y1=cd(e.y1,0),e.x2=cd(e.x2,1),e.y2=cd(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function cd(e,t){return e??t}function gOe(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const jde={basis:{curve:Uv},"basis-closed":{curve:Sct},"basis-open":{curve:Tct},bundle:{curve:Cct,tension:"beta",value:.85},cardinal:{curve:Act,tension:"tension",value:0},"cardinal-open":{curve:kct,tension:"tension",value:0},"cardinal-closed":{curve:Ict,tension:"tension",value:0},"catmull-rom":{curve:Rct,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Nct,tension:"alpha",value:.5},"catmull-rom-open":{curve:Dct,tension:"alpha",value:.5},linear:{curve:hY},"linear-closed":{curve:Pct},monotone:{horizontal:$ct,vertical:Oct},natural:{curve:Mct},step:{curve:Lct},"step-after":{curve:jct},"step-before":{curve:Fct}};function AZ(e,t,n){var r=Ft(jde,e)&&jde[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const tMt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},nMt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,rMt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,iMt=/^((\s+,?\s*)|(,\s*))/,sMt=/^[01]/;function GE(e){const t=[];return(e.match(nMt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=tMt[s],a=oMt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function oMt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?sMt:rMt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(iMt);u!==null&&(i+=u[0].length)}return r}const G0=Math.PI/180,aMt=1e-14,Iv=Math.PI/2,Ld=Math.PI*2,f_=Math.sqrt(3)/2;var Bj={},Uj={},yOe=[].join;function uMt(e,t,n,r,i,s,o,a,u){const l=yOe.call(arguments);if(Bj[l])return Bj[l];const c=o*G0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,x=v*a+b*u,T=g*e+y*t,S=v*e+b*t;let A=1/((T-w)*(T-w)+(S-x)*(S-x))-.25;A<0&&(A=0);let R=Math.sqrt(A);s==i&&(R=-R);const k=.5*(w+T)-R*(S-x),O=.5*(x+S)+R*(T-w),D=Math.atan2(x-O,w-k);let L=Math.atan2(S-O,T-k)-D;L<0&&s===1?L+=Ld:L>0&&s===0&&(L-=Ld);const F=Math.ceil(Math.abs(L/(Iv+.001))),B=[];for(let U=0;U<F;++U){const q=D+U*L/F,P=D+(U+1)*L/F;B[U]=[k,O,q,P,n,r,f,d]}return Bj[l]=B}function lMt(e){const t=yOe.call(e);if(Uj[t])return Uj[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),x=n+p-w*m,T=r+m+w*p,S=n+g,C=r+y,A=S+w*y,R=C-w*g;return Uj[t]=[c*x+f*T,d*x+h*T,c*A+f*R,d*A+h*R,c*S+f*C,d*S+h*C]}const Yl=["l",0,0,0,0,0,0,0];function cMt(e,t,n){const r=Yl[0]=e[0];if(r==="a"||r==="A")Yl[1]=t*e[1],Yl[2]=n*e[2],Yl[3]=e[3],Yl[4]=e[4],Yl[5]=e[5],Yl[6]=t*e[6],Yl[7]=n*e[7];else if(r==="h"||r==="H")Yl[1]=t*e[1];else if(r==="v"||r==="V")Yl[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)Yl[i]=(i%2==1?t:n)*e[i];return Yl}function q2(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=cMt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Bde(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Bde(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Bde(e,t,n,r){const i=uMt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=lMt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Ude=.5773502691896257,zde={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ld)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=f_*n,i=r-n*Ude,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=f_*n,i=r-n*Ude;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=f_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=f_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=f_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=f_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function vOe(e){return Ft(zde,e)?zde[e]:fMt(e)}var zj={};function fMt(e){if(!Ft(zj,e)){const t=GE(e);zj[e]={draw:function(n,r){q2(n,t,0,0,Math.sqrt(r)/2)}}}return zj[e]}const sg=.448084975506;function dMt(e){return e.x}function hMt(e){return e.y}function pMt(e){return e.width}function mMt(e){return e.height}function ip(e){return typeof e=="function"?e:()=>+e}function BN(e,t,n){return Math.max(t,Math.min(e,n))}function bOe(){var e=dMt,t=hMt,n=pMt,r=mMt,i=ip(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=BN(+i.call(this,c),0,v),w=BN(+s.call(this,c),0,v),x=BN(+o.call(this,c),0,v),T=BN(+a.call(this,c),0,v);if(u||(u=h=SL()),b<=0&&w<=0&&x<=0&&T<=0)u.rect(p,m,g,y);else{var S=p+g,C=m+y;u.moveTo(p+b,m),u.lineTo(S-w,m),u.bezierCurveTo(S-sg*w,m,S,m+sg*w,S,m+w),u.lineTo(S,C-T),u.bezierCurveTo(S,C-sg*T,S-sg*T,C,S-T,C),u.lineTo(p+x,C),u.bezierCurveTo(p+sg*x,C,p,C-sg*x,p,C-x),u.lineTo(p,m+b),u.bezierCurveTo(p,m+sg*b,p+sg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=ip(c),l):e},l.y=function(c){return arguments.length?(t=ip(c),l):t},l.width=function(c){return arguments.length?(n=ip(c),l):n},l.height=function(c){return arguments.length?(r=ip(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=ip(c),s=f!=null?ip(f):i,a=d!=null?ip(d):i,o=h!=null?ip(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function _Oe(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Ld);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=SL()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Pk(e,t){return e??t}const Ok=e=>e.x||0,$k=e=>e.y||0,gMt=e=>e.width||0,yMt=e=>e.height||0,vMt=e=>(e.x||0)+(e.width||0),bMt=e=>(e.y||0)+(e.height||0),_Mt=e=>e.startAngle||0,wMt=e=>e.endAngle||0,EMt=e=>e.padAngle||0,xMt=e=>e.innerRadius||0,SMt=e=>e.outerRadius||0,TMt=e=>e.cornerRadius||0,CMt=e=>Pk(e.cornerRadiusTopLeft,e.cornerRadius)||0,AMt=e=>Pk(e.cornerRadiusTopRight,e.cornerRadius)||0,IMt=e=>Pk(e.cornerRadiusBottomRight,e.cornerRadius)||0,kMt=e=>Pk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,RMt=e=>Pk(e.size,64),NMt=e=>e.size||1,S4=e=>e.defined!==!1,DMt=e=>vOe(e.shape||"circle"),PMt=wct().startAngle(_Mt).endAngle(wMt).padAngle(EMt).innerRadius(xMt).outerRadius(SMt).cornerRadius(TMt),OMt=LL().x(Ok).y1($k).y0(bMt).defined(S4),$Mt=LL().y($k).x1(Ok).x0(vMt).defined(S4),MMt=ww().x(Ok).y($k).defined(S4),LMt=bOe().x(Ok).y($k).width(gMt).height(yMt).cornerRadius(CMt,AMt,IMt,kMt),FMt=xct().type(DMt).size(RMt),jMt=_Oe().x(Ok).y($k).defined(S4).size(NMt);function IZ(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function BMt(e,t){return PMt.context(e)(t)}function UMt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?$Mt:OMt).curve(AZ(r,n.orient,n.tension)).context(e)(t)}function zMt(e,t){const n=t[0],r=n.interpolate||"linear";return MMt.curve(AZ(r,n.orient,n.tension)).context(e)(t)}function yS(e,t,n,r){return LMt.context(e)(t,n,r)}function VMt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function HMt(e,t){return FMt.context(e)(t)}function qMt(e,t){return jMt.context(e)(t)}var wOe=1;function EOe(){wOe=1}function kZ(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+wOe++),o=i.clipping[s]||(i.clipping[s]={id:s});return vn(r)?o.path=r(null):IZ(n)?o.path=yS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function ys(e){this.clear(),e&&this.union(e)}ys.prototype={clone(){return new ys(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function T4(e){this.mark=e,this.bounds=this.bounds||new ys}function C4(e){T4.call(this,e),this.items=this.items||[]}lt(C4,T4);class xOe{constructor(t){this._pending=0,this._loader=t||u4()}pending(){return this._pending}sanitizeURL(t){const n=this;return Vde(n),n._loader.sanitize(t,{context:"href"}).then(r=>(vT(n),r)).catch(()=>(vT(n),null))}loadImage(t){const n=this,r=T$t();return Vde(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>vT(n),o.onerror=()=>vT(n),o.src=s,o}).catch(i=>(vT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Vde(e){e._pending+=1}function vT(e){e._pending-=1}function Vm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?WMt(t,r):0))}return e}function WMt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const GMt=Ld-1e-8;let A4,oP,aP,Qv,nV,uP,rV,iV;const jg=(e,t)=>A4.add(e,t),lP=(e,t)=>jg(oP=e,aP=t),Hde=e=>jg(e,A4.y1),qde=e=>jg(A4.x1,e),kv=(e,t)=>nV*e+rV*t,Rv=(e,t)=>uP*e+iV*t,Vj=(e,t)=>jg(kv(e,t),Rv(e,t)),Hj=(e,t)=>lP(kv(e,t),Rv(e,t));function Mk(e,t){return A4=e,t?(Qv=t*G0,nV=iV=Math.cos(Qv),uP=Math.sin(Qv),rV=-uP):(nV=iV=1,Qv=uP=rV=0),YMt}const YMt={beginPath(){},closePath(){},moveTo:Hj,lineTo:Hj,rect(e,t,n,r){Qv?(Vj(e+n,t),Vj(e+n,t+r),Vj(e,t+r),Hj(e,t)):(jg(e+n,t+r),lP(e,t))},quadraticCurveTo(e,t,n,r){const i=kv(e,t),s=Rv(e,t),o=kv(n,r),a=Rv(n,r);Wde(oP,i,o,Hde),Wde(aP,s,a,qde),lP(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=kv(e,t),a=Rv(e,t),u=kv(n,r),l=Rv(n,r),c=kv(i,s),f=Rv(i,s);Gde(oP,o,u,c,Hde),Gde(aP,a,l,f,qde),lP(c,f)},arc(e,t,n,r,i,s){if(r+=Qv,i+=Qv,oP=n*Math.cos(i)+e,aP=n*Math.sin(i)+t,Math.abs(i-r)>GMt)jg(e-n,t-n),jg(e+n,t+n);else{const o=l=>jg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Ld,r<0&&(r+=Ld),i=i%Ld,i<0&&(i+=Ld),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Ld,a=r-r%Iv,u=0;u<4&&a>i;++u,a-=Iv)o(a);else for(a=r-r%Iv+Iv,u=0;u<4&&a<i;++u,a=a+Iv)o(a)}}};function Wde(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Gde(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>aMt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Yde(u,e,t,n,r)),0<l&&l<1&&i(Yde(l,e,t,n,r))}function Yde(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var m0=(m0=p0(1,1))?m0.getContext("2d"):null;const sV=new ys;function RZ(e){return function(t,n){if(!m0)return!0;e(m0,t),sV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=sV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(m0.isPointInPath(u,a))return!0;return!1}}function NZ(e,t){return t.contains(e.x||0,e.y||0)}function SOe(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(sV.set(n,r,n+i,r+s))}function TOe(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return rw(t,n,r,i,s)}function rw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function YE(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Jc(e,t){return e??t}function Kde(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function KMt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+Jc(t.x1,.5)*r,n.y1+Jc(t.y1,.5)*i,Math.max(r,i)*Jc(t.r1,0),n.x1+Jc(t.x2,.5)*r,n.y1+Jc(t.y2,.5)*i,Math.max(r,i)*Jc(t.r2,.5));else{const o=Jc(t.x1,0),a=Jc(t.y1,0),u=Jc(t.x2,1),l=Jc(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=p0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Kde(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Kde(s,t.stops)}function COe(e,t,n){return CZ(n)?KMt(e,n,t.bounds):n}function _$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=COe(e,t,t.fill),!0):!1}var XMt=[];function KE(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=COe(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||XMt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function QMt(e,t){return e.zindex-t.zindex||e.index-t.index}function DZ(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(QMt)}function qf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=DZ(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function w$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=DZ(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function PZ(e){return function(t,n,r){qf(n,i=>{(!r||r.intersects(i.bounds))&&AOe(e,t,i,i)})}}function JMt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&AOe(e,t,n.items[0],n.items)}}function AOe(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(YE(t,n),n.fill&&_$(t,n,i)&&t.fill(),n.stroke&&KE(t,n,i)&&t.stroke()))}function I4(e){return e=e||Sc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,w$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function Lk(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function OZ(e){return I4(Lk(e))}function h1(e,t){return"translate("+e+","+t+")"}function $Z(e){return"rotate("+e+")"}function ZMt(e,t){return"scale("+e+","+t+")"}function IOe(e){return h1(e.x||0,e.y||0)}function eLt(e){return h1(e.x||0,e.y||0)+(e.angle?" "+$Z(e.angle):"")}function tLt(e){return h1(e.x||0,e.y||0)+(e.angle?" "+$Z(e.angle):"")+(e.scaleX||e.scaleY?" "+ZMt(e.scaleX||1,e.scaleY||1):"")}function MZ(e,t,n){function r(o,a){o("transform",eLt(a)),o("d",t(null,a))}function i(o,a){return t(Mk(o,a.angle),a),Vm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=G0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:PZ(s),pick:OZ(s),isect:n||RZ(s)}}var nLt=MZ("arc",BMt);function rLt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function iLt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function sLt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function LZ(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Mk(u),c),Vm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=Lk(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:JMt(s),pick:a,isect:NZ,tip:n}}var oLt=LZ("area",UMt,rLt);function aLt(e,t){var n=t.clip;e.save(),vn(n)?(e.beginPath(),n(e),e.clip()):kOe(e,t.group)}function kOe(e,t){e.beginPath(),IZ(t)?yS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function ROe(e){const t=Jc(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function uLt(e,t){e("transform",IOe(t))}function NOe(e,t){const n=ROe(t);e("d",yS(null,t,n,n))}function lLt(e,t){e("class","background"),e("aria-hidden",!0),NOe(e,t)}function cLt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?NOe(e,t):e("d","")}function fLt(e,t,n){const r=t.clip?kZ(n,t,t):null;e("clip-path",r)}function dLt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Vm(e,t),e.translate(t.x||0,t.y||0)}function W2(e,t,n,r){const i=ROe(t);e.beginPath(),yS(e,t,(n||0)+i,(r||0)+i)}const hLt=Lk(W2),pLt=Lk(W2,!1),mLt=Lk(W2,!0);function gLt(e,t,n,r){qf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(W2(e,i,s,o),YE(e,i),i.fill&&_$(e,i,u)&&e.fill(),i.stroke&&!a&&KE(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&kOe(e,i),n&&n.translate(-s,-o),qf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(W2(e,i,s,o),YE(e,i),KE(e,i,u)&&e.stroke())})}function yLt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return w$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&IZ(u)&&!mLt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&pLt(e,u,o,a)?(e.restore(),u):(l=w$(u,v=>vLt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&hLt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function vLt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var bLt={type:"group",tag:"g",nested:!1,attr:uLt,bound:dLt,draw:gLt,pick:yLt,isect:SOe,content:fLt,background:lLt,foreground:cLt},G2={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function FZ(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function jZ(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function BZ(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function k4(e,t){return e==="center"?t/2:e==="right"?t:0}function R4(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function _Lt(e,t,n){const r=FZ(t,n),i=jZ(t,r),s=BZ(t,r),o=(t.x||0)-k4(t.align,i),a=(t.y||0)-R4(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,G2["xmlns:xlink"],"xlink:href"),e("transform",h1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function wLt(e,t){const n=t.image,r=jZ(t,n),i=BZ(t,n),s=(t.x||0)-k4(t.align,r),o=(t.y||0)-R4(t.baseline,i);return e.set(s,o,s+r,o+i)}function ELt(e,t,n){qf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=FZ(r,this);let s=jZ(r,i),o=BZ(r,i);if(s===0||o===0)return;let a=(r.x||0)-k4(r.align,s),u=(r.y||0)-R4(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(YE(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var xLt={type:"image",tag:"image",nested:!1,attr:_Lt,bound:wLt,draw:ELt,pick:I4(),isect:Sc,get:FZ,xOffset:k4,yOffset:R4},SLt=LZ("line",zMt,iLt);function TLt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",tLt(t)),e("d",t.path)}function cP(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*G0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=GE(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),q2(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):q2(e,u,r,i,s,o)}function CLt(e,t){return cP(Mk(e,t.angle),t)?e.set(0,0,0,0):Vm(e,t,!0)}var ALt={type:"path",tag:"path",nested:!1,attr:TLt,bound:CLt,draw:PZ(cP),pick:OZ(cP),isect:RZ(cP)};function ILt(e,t){e("d",yS(null,t))}function kLt(e,t){var n,r;return Vm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Xde(e,t){e.beginPath(),yS(e,t)}var RLt={type:"rect",tag:"path",nested:!1,attr:ILt,bound:kLt,draw:PZ(Xde),pick:OZ(Xde),isect:SOe};function NLt(e,t){e("transform",IOe(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function DLt(e,t){var n,r;return Vm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function DOe(e,t,n){var r,i,s,o;return t.stroke&&KE(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function PLt(e,t,n){qf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&DOe(e,r,i)&&(YE(e,r),e.stroke())}})}function OLt(e,t,n,r){return e.isPointInStroke?DOe(e,t,1)&&e.isPointInStroke(n,r):!1}var $Lt={type:"rule",tag:"line",nested:!1,attr:NLt,bound:DLt,draw:PLt,pick:I4(OLt),isect:TOe},MLt=MZ("shape",VMt),LLt=MZ("symbol",HMt,NZ);const Qde=gDe();var El={height:Vh,measureWidth:UZ,estimateWidth:E$,width:E$,canvas:POe};POe(!0);function POe(e){El.width=e&&m0?UZ:E$}function E$(e,t){return OOe(K0(e,t),Vh(e))}function OOe(e,t){return~~(.8*e.length*t)}function UZ(e,t){return Vh(e)<=0||!(t=K0(e,t))?0:$Oe(t,N4(e))}function $Oe(e,t){const n=`(${t}) ${e}`;let r=Qde.get(n);return r===void 0&&(m0.font=t,r=m0.measureText(e).width,Qde.set(n,r)),r}function Vh(e){return e.fontSize!=null?+e.fontSize||0:11}function Y0(e){return e.lineHeight!=null?e.lineHeight:Vh(e)+2}function FLt(e){return Fe(e)?e.length>1?e:e[0]:e}function Fk(e){return FLt(e.lineBreak&&e.text&&!Fe(e.text)?e.text.split(e.lineBreak):e.text)}function zZ(e){const t=Fk(e);return(Fe(t)?t.length-1:0)*Y0(e)}function K0(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?BLt(e,n):n}function jLt(e){if(El.width===UZ){const t=N4(e);return n=>$Oe(n,t)}else if(El.width===E$){const t=Vh(e);return n=>OOe(n,t)}else return t=>El.width(e,t)}function BLt(e,t){var n=+e.limit,r=jLt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function jk(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function N4(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Vh(e)+"px "+jk(e,t)}function VZ(e){var t=e.baseline,n=Vh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Y0(e):t==="line-bottom"?.29*n-.5*Y0(e):0)}const ULt={left:"start",center:"middle",right:"end"},dA=new ys;function D4(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Iv,t+=r*Math.cos(i),n+=r*Math.sin(i)),dA.x1=t,dA.y1=n,dA}function zLt(e,t){var n=t.dx||0,r=(t.dy||0)+VZ(t),i=D4(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",ULt[t.align]||"start"),a?(u=h1(s,o)+" "+$Z(a),(n||r)&&(u+=" "+h1(n,r))):u=h1(s+n,o+r),e("transform",u)}function HZ(e,t,n){var r=El.height(t),i=t.align,s=D4(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+VZ(t)-Math.round(.8*r),c=Fk(t),f;if(Fe(c)?(r+=Y0(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,El.width(t,h)),0)):f=El.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*G0,o,a);else if(n===2)return e.rotatedPoints(t.angle*G0,o,a);return e}function VLt(e,t,n){qf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=N4(r),e.textAlign=r.align||"left",s=D4(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*G0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+VZ(r),c=Fk(r),YE(e,r),Fe(c))for(l=Y0(r),u=0;u<c.length;++u)f=K0(r,c[u]),r.fill&&_$(e,r,i)&&e.fillText(f,o,a),r.stroke&&KE(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=K0(r,c),r.fill&&_$(e,r,i)&&e.fillText(f,o,a),r.stroke&&KE(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function HLt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=D4(t),a=o.x1,u=o.y1,l=HZ(dA,t,1),c=-t.angle*G0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function qLt(e,t){const n=HZ(dA,e,2);return rw(t,n[0],n[1],n[2],n[3])||rw(t,n[0],n[1],n[4],n[5])||rw(t,n[4],n[5],n[6],n[7])||rw(t,n[2],n[3],n[6],n[7])}var WLt={type:"text",tag:"text",nested:!1,attr:zLt,bound:HZ,draw:VLt,pick:I4(HLt),isect:qLt},GLt=LZ("trail",qMt,sLt),Ml={arc:nLt,area:oLt,group:bLt,image:xLt,line:SLt,path:ALt,rect:RLt,rule:$Lt,shape:MLt,symbol:LLt,text:WLt,trail:GLt};function oV(e,t,n){var r=Ml[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new ys),e,n)}var Jde={mark:null};function MOe(e,t,n){var r=Ml[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Jde.mark=e,l=Jde),c=oV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new ys,o)for(a=0,u=s.length;a<u;++a)t.union(oV(s[a],i,n));return e.bounds=t}const YLt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function LOe(e,t){return JSON.stringify(e,YLt,t)}function FOe(e){const t=typeof e=="string"?JSON.parse(e):e;return jOe(t)}function jOe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&jOe(n[i]);return t&&MOe(e),e}class BOe{constructor(t){arguments.length?this.root=FOe(t):(this.root=Zde({marktype:"group",name:"root",role:"frame"}),this.root.items=[new C4(this.root)])}toJSON(t){return LOe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Zde(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Zde(e,t){const n={bounds:new ys,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Bg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function qZ(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ss(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Bg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function sc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function UOe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function P4(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function KLt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Ml[i.marktype]).tip){for(o=P4(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let WZ=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||u4(),this._tooltip=n||XLt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Bg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=KLt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function XLt(e,t,n,r){e.element().setAttribute("title",r||"")}class Bk{constructor(t){this._el=null,this._bgcolor=null,this._loader=new xOe(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const QLt="keydown",JLt="keypress",ZLt="keyup",zOe="dragenter",fP="dragleave",VOe="dragover",aV="pointerdown",e6t="pointerup",x$="pointermove",dP="pointerout",HOe="pointerover",uV="mousedown",t6t="mouseup",qOe="mousemove",S$="mouseout",WOe="mouseover",T$="click",n6t="dblclick",r6t="wheel",GOe="mousewheel",C$="touchstart",A$="touchmove",I$="touchend",i6t=[QLt,JLt,ZLt,zOe,fP,VOe,aV,e6t,x$,dP,HOe,uV,t6t,qOe,S$,WOe,T$,n6t,r6t,GOe,C$,A$,I$],lV=x$,hA=S$,cV=T$;class Uk extends WZ{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=i6t,this.pointermove=the([x$,qOe],[HOe,WOe],[dP,S$]),this.dragover=the([VOe],[zOe],[fP]),this.pointerout=nhe([dP,S$]),this.dragleave=nhe([fP])}initialize(t,n,r){return this._canvas=t&&qZ(t,"canvas"),[T$,uV,aV,x$,dP,fP].forEach(i=>ehe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(GOe,t)}pointerdown(t){this._down=this._active,this.fire(aV,t)}mousedown(t){this._down=this._active,this.fire(uV,t)}click(t){this._down===this._active&&(this.fire(T$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(C$,t,!0)}touchmove(t){this.fire(A$,t,!0)}touchend(t){this.fire(I$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===cV&&i&&i.href?this.handleHref(n,i,i.href):(t===lV||t===hA)&&this.handleTooltip(n,i,t!==hA),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(ehe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=P4(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Ml[t.marktype].pick.call(this,o,t,n,r,i,s)}}const s6t=e=>e===C$||e===A$||e===I$?[C$,A$,I$]:[e];function ehe(e,t){s6t(t).forEach(n=>o6t(e,n))}function o6t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function gC(e,t,n){t.forEach(r=>e.fire(r,n))}function the(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?gC(this,e,r):((!i||!i.exit)&&gC(this,n,r),this._active=s,gC(this,t,r),gC(this,e,r))}}function nhe(e){return function(t){gC(this,e,t),this._active=null}}function a6t(){return typeof window<"u"&&window.devicePixelRatio||1}function u6t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?a6t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class k$ extends Bk{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new ys,this._tempb=new ys}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:p0(1,1,this._options.type),t&&this._canvas&&(sc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)u6t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||$e("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=l6t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):c6t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Ml[n.marktype];n.clip&&aLt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const l6t=(e,t,n)=>new ys().set(0,0,t,n).translate(-e[0],-e[1]);function c6t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class YOe extends WZ{constructor(t,n){super(t,n);const r=this;r._hrefHandler=qj(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=qj(r,(i,s)=>{r.handleTooltip(i,s,i.type!==hA)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(cV,this._hrefHandler),i.removeEventListener(lV,this._tooltipHandler),i.removeEventListener(hA,this._tooltipHandler)),this._svg=i=t&&qZ(t,"svg"),i&&(i.addEventListener(cV,this._hrefHandler),i.addEventListener(lV,this._tooltipHandler),i.addEventListener(hA,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:qj(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const qj=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},KOe="aria-hidden",GZ="aria-label",YZ="role",KZ="aria-roledescription",XOe="graphics-object",XZ="graphics-symbol",QOe=(e,t,n)=>({[YZ]:e,[KZ]:t,[GZ]:n||void 0}),f6t=Vf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),rhe={axis:{desc:"axis",caption:p6t},legend:{desc:"legend",caption:m6t},"title-text":{desc:"title",caption:e=>`Title text '${she(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${she(e)}'`}},ihe={ariaRole:YZ,ariaRoleDescription:KZ,description:GZ};function JOe(e,t){const n=t.aria===!1;if(e(KOe,n||void 0),n||t.description==null)for(const r in ihe)e(ihe[r],void 0);else{const r=t.mark.marktype;e(GZ,t.description),e(YZ,t.ariaRole||(r==="group"?XOe:XZ)),e(KZ,t.ariaRoleDescription||`${r} mark`)}}function ZOe(e){return e.aria===!1?{[KOe]:!0}:f6t[e.role]?null:rhe[e.role]?h6t(e,rhe[e.role]):d6t(e)}function d6t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return QOe(n?XOe:XZ,`${t} mark container`,e.description)}function h6t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return QOe(t.role||XZ,t.desc,n.description||r(n))}catch{return null}}function she(e){return dt(e.text).join(" ")}function p6t(e){const t=e.datum,n=e.orient,r=t.title?e3e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${WE(a)?"discrete":a} scale with ${hOe(o,s,e)}`}function m6t(e){const t=e.datum,n=t.title?e3e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return y6t(r)+(n?` titled '${n}'`:"")+` for ${g6t(s)} with ${hOe(u,a,e)}`}function e3e(e){try{return dt(Kn(e.items).items[0].text).join(" ")}catch{return null}}function g6t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Kn(e)}function y6t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const t3e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),v6t=e=>t3e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function QZ(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${v6t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=t3e(u),a),toString:()=>e};return a}const n3e=e=>r3e(QZ(),e)+"";function r3e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):r3e(e,r)}return e.close()}const R$={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},N$={blend:"mix-blend-mode"},i3e={fill:"none","stroke-miterlimit":10},bT=0,ohe="http://www.w3.org/2000/xmlns/",Es=G2.xmlns;class JZ extends Bk{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ss(t,0,"svg",Es),this._svg.setAttributeNS(ohe,"xmlns",Es),this._svg.setAttributeNS(ohe,"xmlns:xlink",G2["xmlns:xlink"]),this._svg.setAttribute("version",G2.version),this._svg.setAttribute("class","marks"),sc(t,1),this._root=Ss(this._svg,bT,"g",Es),Ug(this._root,i3e),sc(this._svg,bT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Ug(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ss(t,bT,"rect",Es),Ug(r,{width:this._width,height:this._height,fill:n}));const i=n3e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),sc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Ml[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,ahe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,ahe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Ml[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=uhe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return sc(c,0),n._svg;c.setAttribute("class",UOe(n));const f=ZOe(n);for(const m in f)ka(c,m,f[m]);l||ka(c,"pointer-events",u),ka(c,"clip-path",n.clip?kZ(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=uhe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&w6t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):qf(n,p),sc(c,h),c}_update(t,n,r){Fp=n,Zo=n.__values__,JOe(pA,r),t.attr(pA,r,this);const i=x6t[t.type];i&&i.call(this,t,n,r),Fp&&this.style(Fp,r)}style(t,n){if(n!=null){for(const r in R$){let i=r==="font"?jk(n):n[r];if(i===Zo[r])continue;const s=R$[r];i==null?t.removeAttribute(s):(CZ(i)&&(i=mOe(i,this._defs.gradient,s3e())),t.setAttribute(s,i+"")),Zo[r]=i}for(const r in N$)hP(t,N$[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ss(t,bT+1,"defs",Es)),i=b6t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ss(t,bT+1,"defs",Es)),i=_6t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):sc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function ahe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function b6t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ss(e,n++,"pattern",Es);Ug(o,{id:b$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ss(o,0,"rect",Es),Ug(o,{width:1,height:1,fill:`url(${s3e()}#${t.id})`}),e=Ss(e,n++,"radialGradient",Es),Ug(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ss(e,n++,"linearGradient",Es),Ug(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ss(e,r,"stop",Es),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return sc(e,r),n}function _6t(e,t,n){let r;return e=Ss(e,n,"clipPath",Es),e.setAttribute("id",t.id),t.path?(r=Ss(e,0,"path",Es),r.setAttribute("d",t.path)):(r=Ss(e,0,"rect",Es),Ug(r,{x:0,y:0,width:t.width,height:t.height})),sc(e,1),n+1}function w6t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;qf(n,o=>{i=e.mark(t,o,i,r),++s}),sc(t,1+s)}function uhe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Bg(o,r,Es),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Bg(o,"path",Es);s.appendChild(a),a.__data__=e;const u=Bg(o,"g",Es);s.appendChild(u),u.__data__=e;const l=Bg(o,"path",Es);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||E6t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function E6t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Fp=null,Zo=null;const x6t={group(e,t,n){const r=Fp=t.childNodes[2];Zo=r.__values__,e.foreground(pA,n,this),Zo=t.__values__,Fp=t.childNodes[1],e.content(pA,n,this);const i=Fp=t.childNodes[0];e.background(pA,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==Zo.events&&(ka(r,"pointer-events",s),ka(i,"pointer-events",s),Zo.events=s),n.strokeForeground&&n.stroke){const o=n.fill;ka(r,"display",null),this.style(i,n),ka(i,"stroke",null),o&&(n.fill=null),Zo=r.__values__,this.style(r,n),o&&(n.fill=o),Fp=null}else ka(r,"display","none")},image(e,t,n){n.smooth===!1?(hP(t,"image-rendering","optimizeSpeed"),hP(t,"image-rendering","pixelated")):hP(t,"image-rendering",null)},text(e,t,n){const r=Fk(n);let i,s,o,a;Fe(r)?(s=r.map(u=>K0(n,u)),i=s.join(`
`),i!==Zo.text&&(sc(t,0),o=t.ownerDocument,a=Y0(n),s.forEach((u,l)=>{const c=Bg(o,"tspan",Es);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),Zo.text=i)):(s=K0(n,r),s!==Zo.text&&(t.textContent=s,Zo.text=s)),ka(t,"font-family",jk(n)),ka(t,"font-size",Vh(n)+"px"),ka(t,"font-style",n.fontStyle),ka(t,"font-variant",n.fontVariant),ka(t,"font-weight",n.fontWeight)}};function pA(e,t,n){t!==Zo[e]&&(n?S6t(Fp,e,t,n):ka(Fp,e,t),Zo[e]=t)}function hP(e,t,n){n!==Zo[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Zo[t]=n)}function Ug(e,t){for(const n in t)ka(e,n,t[n])}function ka(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function S6t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function s3e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class o3e extends Bk{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=QZ();n.open("svg",gn({},G2,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",i3e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Ml[n.marktype],i=r.tag,s=[JOe,r.attr];t.open("g",{class:UOe(n),"clip-path":n.clip?kZ(this,n,n.group):null},ZOe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=Fk(a);if(Fe(l)){const c={x:0,dy:Y0(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(K0(a,l[f])).close()}else t.text(K0(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),qf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):qf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&T6t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:b$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function T6t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=jk(t),e["font-size"]=Vh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in R$){let a=t[o];const u=R$[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(CZ(a)&&(a=mOe(a,i.gradient,"")),e[u]=a)}for(const o in N$){const a=t[o];a!=null&&(s=s||[],s.push(`${N$[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const of={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function C6t(e){of.svgMarkTypes=e.svgMarkTypes??["text"],of.svgOnTop=e.svgOnTop??!0,of.debug=e.debug??!1}class fV extends Bk{constructor(t){super(t),this._svgRenderer=new JZ(t),this._canvasRenderer=new k$(t)}initialize(t,n,r,i,s){this._root_el=Ss(t,0,"div");const o=Ss(this._root_el,0,"div"),a=Ss(this._root_el,1,"div");return this._root_el.style.position="relative",of.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=of.svgOnTop?a:o,this._canvasEl=of.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return of.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!of.svgMarkTypes.includes(s));this._svgRenderer.render(t,of.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return of.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class a3e extends Uk{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ss(Ss(t,0,"div"),of.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const u3e="canvas",l3e="hybrid",c3e="png",f3e="svg",d3e="none",zg={Canvas:u3e,PNG:c3e,SVG:f3e,Hybrid:l3e,None:d3e},Y1={};Y1[u3e]=Y1[c3e]={renderer:k$,headless:k$,handler:Uk};Y1[f3e]={renderer:JZ,headless:o3e,handler:YOe};Y1[l3e]={renderer:fV,headless:fV,handler:a3e};Y1[d3e]={};function O4(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Y1[e]=t,this):Y1[e]}function h3e(e,t,n){const r=[],i=new ys().union(t),s=e.marktype;return s?p3e(e,i,n,r):s==="group"?m3e(e,i,n,r):$e("Intersect scene must be mark node or group item.")}function p3e(e,t,n,r){if(A6t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)m3e(i[a],t,n,r);else for(const u=Ml[s].isect;a<o;++a){const l=i[a];g3e(l,t,u)&&r.push(l)}}return r}function A6t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function m3e(e,t,n,r){n&&n(e.mark)&&g3e(e,t,Ml.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)p3e(i[u],t,n,r);t.translate(o,a)}return r}function g3e(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const Wj=new ys;function y3e(e){const t=e.clip;if(vn(t))t(Mk(Wj.clear()));else if(t)Wj.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(Wj)}const I6t=1e-9;function ZZ(e,t,n){return e===t?!0:n==="path"?v3e(e,t):e instanceof Date&&t instanceof Date?+e==+t:ar(e)&&ar(t)?Math.abs(e-t)<=I6t:!e||!t||!mt(e)&&!mt(t)?e==t:k6t(e,t)}function v3e(e,t){return ZZ(GE(e),GE(t))}function k6t(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!ZZ(e[i],t[i],i))return!1;return typeof e==typeof t}function R6t(){EOe(),eMt()}const XE="top",yf="left",wf="right",X0="bottom",N6t="top-left",D6t="top-right",P6t="bottom-left",O6t="bottom-right",eee="start",dV="middle",Da="end",$6t="x",M6t="y",$4="group",tee="axis",nee="title",L6t="frame",F6t="scope",ree="legend",b3e="row-header",_3e="row-footer",w3e="row-title",E3e="column-header",x3e="column-footer",S3e="column-title",j6t="padding",B6t="symbol",T3e="fit",C3e="fit-x",A3e="fit-y",U6t="pad",iee="none",UN="all",hV="each",see="flush",Vg="column",Hg="row";function I3e(e){Re.call(this,null,e)}lt(I3e,Re,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Ml[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=zN(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===$4||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(zN(l,o))),r.role){case tee:case ree:case nee:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(zN(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(zN(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return y3e(r),t.modifies("bounds")}});function zN(e,t,n){return t(e.bounds.clear(),e,n)}const lhe=":vega_identifier:";function oee(e){Re.call(this,0,e)}oee.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(oee,Re,{transform(e,t){const n=z6t(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function z6t(e){return e._signals[lhe]||(e._signals[lhe]=e.add(0))}function k3e(e){Re.call(this,null,e)}lt(k3e,Re,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,V6t(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===$4?C4:T4;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function V6t(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function R3e(e){Re.call(this,null,e)}const che={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!N3e(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},N3e=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),fhe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(N3e(i,s=e[n].bounds,t))return!0},H6t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},q6t=(e,t,n)=>{var r=e.range(),i=new ys;return t===XE||t===X0?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},dhe=e=>(e.forEach(t=>t.opacity=1),e),hhe=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(R3e,Re,{transform(e,t){const n=che[e.method]||che.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(dhe(i),t=hhe(t,e)),t;if(i=i.filter(H6t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=dhe(i),t=hhe(t,e),s.length>=3&&fhe(s,r)){do s=n(s,r);while(s.length>=3&&fhe(s,r));s.length<3&&!Kn(i).opacity&&(s.length>1&&(Kn(s).opacity=0),Kn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=q6t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function D3e(e){Re.call(this,null,e)}lt(D3e,Re,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Qo=new ys;function iw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function W6t(e){var t=e.items[0].orient;return t===yf||t===wf}function G6t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Y6t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=G6t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&zZ(p),v=0,b=0,w,x;switch(Qo.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case XE:v=f||0,b=-c,x=Math.max(d,Math.min(h,-g.y1)),g.add(0,-x).add(l,0),p&&VN(e,p,x,m,y,0,-1,g);break;case yf:v=-c,b=f||0,x=Math.max(d,Math.min(h,-g.x1)),g.add(-x,0).add(0,l),p&&VN(e,p,x,m,y,1,-1,g);break;case wf:v=n+c,b=f||0,x=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(x,l),p&&VN(e,p,x,m,y,1,1,g);break;case X0:v=f||0,b=r+c,x=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,x),p&&VN(e,p,x,m,0,0,1,g);break;default:v=i.x,b=i.y}return Vm(g.translate(v,b),i),iw(i,"x",v+o)|iw(i,"y",b+o)&&(i.bounds=Qo,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function VN(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const phe=(e,t)=>Math.floor(Math.min(e,t)),mhe=(e,t)=>Math.ceil(Math.max(e,t));function K6t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===$4)switch(i.role){case tee:case ree:case nee:break;case b3e:o.rowheaders.push(...s);break;case _3e:o.rowfooters.push(...s);break;case E3e:o.colheaders.push(...s);break;case x3e:o.colfooters.push(...s);break;case w3e:o.rowtitle=s[0];break;case S3e:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function X6t(e){return new ys().set(0,0,e.width||0,e.height||0)}function Q6t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function mi(e,t,n){const r=mt(e)?e[t]:e;return r??(n!==void 0?n:0)}function ghe(e){return e<0?Math.ceil(-e):0}function P3e(e,t,n){var r=!n.nodirty,i=n.bounds===see?X6t:Q6t,s=Qo.set(0,0,0,0),o=mi(n.align,Vg),a=mi(n.align,Hg),u=mi(n.padding,Vg),l=mi(n.padding,Hg),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),x=Array(d),T,S,C,A,R,k,O,D,$,L,F;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)k=t[S],R=x[S]=i(k),k.x=k.x||0,b[S]=0,k.y=k.y||0,w[S]=0,C=S%c,A=~~(S/c),m=Math.max(m,O=Math.ceil(R.x2)),v=Math.max(v,D=Math.ceil(R.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],D),h[S]=u+ghe(R.x1),g[S]=l+ghe(R.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===hV)for(C=1;C<c;++C){for(F=0,S=C;S<d;S+=c)F<h[S]&&(F=h[S]);for(S=C;S<d;S+=c)h[S]=F+p[C-1]}else if(o===UN){for(F=0,S=0;S<d;++S)S%c&&F<h[S]&&(F=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=F+m)}else for(o=!1,C=1;C<c;++C)for(S=C;S<d;S+=c)h[S]+=p[C-1];if(a===hV)for(A=1;A<f;++A){for(F=0,S=A*c,T=S+c;S<T;++S)F<g[S]&&(F=g[S]);for(S=A*c;S<T;++S)g[S]=F+y[A-1]}else if(a===UN){for(F=0,S=c;S<d;++S)F<g[S]&&(F=g[S]);for(S=c;S<d;++S)g[S]=F+v}else for(a=!1,A=1;A<f;++A)for(S=A*c,T=S+c;S<T;++S)g[S]+=y[A-1];for($=0,S=0;S<d;++S)$=h[S]+(S%c?$:0),b[S]+=$-t[S].x;for(C=0;C<c;++C)for(L=0,S=C;S<d;S+=c)L+=g[S],w[S]+=L-t[S].y;if(o&&mi(n.center,Vg)&&f>1)for(S=0;S<d;++S)R=o===UN?m:p[S%c],$=R-x[S].x2-t[S].x-b[S],$>0&&(b[S]+=$/2);if(a&&mi(n.center,Hg)&&c!==1)for(S=0;S<d;++S)R=a===UN?v:y[~~(S/c)],L=R-x[S].y2-t[S].y-w[S],L>0&&(w[S]+=L/2);for(S=0;S<d;++S)s.union(x[S].translate(b[S],w[S]));switch($=mi(n.anchor,$6t),L=mi(n.anchor,M6t),mi(n.anchor,Vg)){case Da:$-=s.width();break;case dV:$-=s.width()/2}switch(mi(n.anchor,Hg)){case Da:L-=s.height();break;case dV:L-=s.height()/2}for($=Math.round($),L=Math.round(L),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)k=t[S],k.x+=b[S]+=$,k.y+=w[S]+=L,s.union(k.mark.bounds.union(k.bounds.translate(b[S],w[S]))),r&&e.dirty(k);return s}function J6t(e,t,n){var r=K6t(t),i=r.marks,s=n.bounds===see?Z6t:e4t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=P3e(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=mi(n.headerBand,Hg,null),c=HN(e,r.rowheaders,i,a,u,-mi(o,"rowHeader"),phe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=mi(n.headerBand,Vg,null),f=HN(e,r.colheaders,i,a,a,-mi(o,"columnHeader"),phe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=mi(n.footerBand,Hg,null),d=HN(e,r.rowfooters,i,a,u,mi(o,"rowFooter"),mhe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=mi(n.footerBand,Vg,null),h=HN(e,r.colfooters,i,a,a,mi(o,"columnFooter"),mhe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=mi(n.titleAnchor,Hg),g=mi(o,"rowTitle"),g=p===Da?d+g:c-g,m=mi(n.titleBand,Hg,.5),yhe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=mi(n.titleAnchor,Vg),g=mi(o,"columnTitle"),g=p===Da?h+g:f-g,m=mi(n.titleBand,Vg,.5),yhe(e,r.coltitle,g,1,y,m))}function Z6t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function e4t(e,t){return e.bounds[t]}function HN(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,x,T,S,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(T=t[v],x=T.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(C=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),A=m):(C=m,A=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),x.union(T.bounds.translate(C-(T.x||0),A-(T.y||0))),T.x=C,T.y=A,e.dirty(T),g=o(g,x[l])}return g}function yhe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function t4t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function n4t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function r4t(e,t,n,r,i,s,o){const a=t4t(n,t),u=n4t(e,a("offset",0)),l=a("anchor",eee),c=l===Da?1:l===dV?.5:0,f={align:hV,bounds:a("bounds",see),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case yf:f.anchor={x:Math.floor(r.x1)-u,column:Da,y:c*(o||r.height()+2*r.y1),row:l};break;case wf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case XE:f.anchor={y:Math.floor(i.y1)-u,row:Da,x:c*(s||i.width()+2*i.x1),column:l};break;case X0:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case N6t:f.anchor={x:u,y:u};break;case D6t:f.anchor={x:s-u,y:u,column:Da};break;case P6t:f.anchor={x:u,y:o-u,row:Da};break;case O6t:f.anchor={x:s-u,y:o-u,column:Da,row:Da};break}return f}function i4t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),o4t(e,n,n.items[0].items[0]),s=s4t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===B6t&&a4t(n.items[0].items[0].items[0].items),i!==iee&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Vm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function s4t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function o4t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&_T(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case yf:i+=Math.ceil(o.bounds.width())+u;break;case wf:case X0:break;default:s+=o.bounds.height()+u}switch((i||s)&&_T(e,n,i,s),o.orient){case yf:c+=d_(t,n,o,a,1,1);break;case wf:l+=d_(t,n,o,Da,0,0)+u,c+=d_(t,n,o,a,1,1);break;case X0:l+=d_(t,n,o,a,0,0),c+=d_(t,n,o,Da,-1,0,1)+u;break;default:l+=d_(t,n,o,a,0,0)}(l||c)&&_T(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(_T(e,n,-l,0),_T(e,o,-l,0))}}function d_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:zZ(n);return Math.round(r===eee?f:r===Da?d-h:.5*(c-h))}function _T(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function a4t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function u4t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===yf||a===wf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==$4?a===yf?(p=i.y2,h=i.y1):a===wf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===yf&&(p=r,h=0),b=u===eee?p:u===Da?h:(p+h)/2,d&&d.text){switch(a){case XE:case X0:v=f.bounds.height()+c;break;case yf:y=f.bounds.width()+c;break;case wf:y=-f.bounds.width()-c;break}Qo.clear().union(d.bounds),Qo.translate(y-(d.x||0),v-(d.y||0)),iw(d,"x",y)|iw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(Qo),d.mark.bounds.clear().union(Qo),e.dirty(d)),Qo.clear().union(d.bounds)}else Qo.clear();switch(Qo.union(f.bounds),a){case XE:m=b,g=i.y1-Qo.height()-l;break;case yf:m=i.x1-Qo.width()-l,g=b;break;case wf:m=i.x2+Qo.width()+l,g=b;break;case X0:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return iw(s,"x",m)|iw(s,"y",g)&&(Qo.translate(m,g),e.dirty(s),s.bounds.clear().union(Qo),t.bounds.clear().union(Qo),e.dirty(s)),s.bounds}function O3e(e){Re.call(this,null,e)}lt(O3e,Re,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&J6t(n,r,e.layout),c4t(n,r,e)}),l4t(e.mark.group)?t.reflow():t}});function l4t(e){return e&&e.mark.role!=="legend-entry"}function c4t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new ys().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case tee:h=W6t(f)?a:u,h.union(Y6t(e,f,i,s));break;case nee:c=f;break;case ree:l.push(i4t(e,f));break;case L6t:case F6t:case b3e:case _3e:case w3e:case E3e:case x3e:case S3e:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||wf,d!==iee&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];P3e(e,v,r4t(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===T3e||n.autosize.type===C3e||n.autosize.type===A3e))switch(y.orient){case yf:case wf:o.add(v.x1,0).add(v.x2,0);break;case XE:case X0:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(u4t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),f4t(e,t,o,n)}function f4t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===j6t){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===iee?(l=0,f=0,u=o,c=a):s===T3e?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===C3e?(u=Math.max(0,o-l-d),a=c+f+h):s===A3e?(o=u+l+d,c=Math.max(0,a-f-h)):s===U6t&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const d4t=Object.freeze(Object.defineProperty({__proto__:null,bound:I3e,identifier:oee,mark:k3e,overlap:R3e,render:D3e,viewlayout:O3e},Symbol.toStringTag,{value:"Module"}));function $3e(e){Re.call(this,null,e)}lt($3e,Re,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=SZ(s,o,e.minstep),u=e.format||uOe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?aOe(s,e.values,a):TZ(s,a);return i&&(r.rem=i),i=l.map((c,f)=>br({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(br({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function M3e(e){Re.call(this,null,e)}function h4t(){return br({})}function p4t(e){const t=dS().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(M3e,Re,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||h4t,s=e.key||Mt,o=this.value;return Fe(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&$e("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=p4t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function L3e(e){Re.call(this,null,e)}lt(L3e,Re,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Fe(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||lg,u=i.enter||lg,l=i.exit||lg,c=(s&&!o?i[s]:a)||lg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==lg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==lg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==lg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function F3e(e){Re.call(this,[],e)}lt(F3e,Re,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||sP,o=e.scale,a=+e.limit,u=SZ(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===sP,c=e.format||dOe(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||fOe(o,u),d,h,p,m,g;return i&&(r.rem=i),s===sP?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,vn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=va(m=p||8),i=i.map((y,v)=>br({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(br({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===U$t?(d=o.domain(),h=iOe(o,d[0],Kn(d)),f.length<3&&!e.values&&d[0]!==Kn(d)&&(f=[d[0],Kn(d)]),i=f.map((y,v)=>br({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=J$t(o),i=f.map((y,v)=>br({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const m4t=e=>e.source.x,g4t=e=>e.source.y,y4t=e=>e.target.x,v4t=e=>e.target.y;function aee(e){Re.call(this,{},e)}aee.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(aee,Re,{transform(e,t){var n=e.sourceX||m4t,r=e.sourceY||g4t,i=e.targetX||y4t,s=e.targetY||v4t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=vhe.get(u+"-"+a)||vhe.get(u);return l||$e("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const j3e=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,b4t=(e,t,n,r)=>j3e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),B3e=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},_4t=(e,t,n,r)=>B3e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),U3e=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},w4t=(e,t,n,r)=>U3e(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),E4t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,x4t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,S4t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},T4t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},C4t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},A4t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},vhe=dS({line:j3e,"line-radial":b4t,arc:B3e,"arc-radial":_4t,curve:U3e,"curve-radial":w4t,"orthogonal-horizontal":E4t,"orthogonal-vertical":x4t,"orthogonal-radial":S4t,"diagonal-horizontal":T4t,"diagonal-vertical":C4t,"diagonal-radial":A4t});function uee(e){Re.call(this,null,e)}uee.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(uee,Re,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||lS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/jwe(l),h=yl(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const I4t=5;function k4t(e){const t=e.type;return!e.bins&&(t===HE||t===kk||t===Rk)}function z3e(e){return wZ(e)&&e!==sh}const R4t=Vf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function V3e(e){Re.call(this,null,e),this.modified(!0)}lt(V3e,Re,{transform(e,t){var n=t.dataflow,r=this.value,i=N4t(e);(!r||i!==r.type)&&(this.value=r=pr(i)());for(i in e)if(!R4t[i]){if(i==="padding"&&z3e(r.type))continue;vn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return L4t(r,e,M4t(r,e,P4t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function N4t(e){var t=e.type,n="",r;return t===sh?sh+"-"+HE:(D4t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?sh+"-":r===3?gS+"-":""),(n+t||HE).toLowerCase())}function D4t(e){const t=e.type;return wZ(t)&&t!==W1&&t!==G1&&(e.scheme||e.range&&e.range.length&&e.range.every(ht))}function P4t(e,t,n){const r=O4t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&k4t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return z3e(s)&&t.padding&&i[0]!==Kn(i)&&(i=$4t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(H3e(s,i,n)),s===yZ&&e.unknown(t.domainImplicit?t7:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&SZ(e,t.nice)||null),i.length}function O4t(e,t,n){return t?(e.domain(H3e(e.type,t,n)),t.length):-1}function $4t(e,t,n,r,i,s){var o=Math.abs(Kn(n)-n[0]),a=o/(o-2*r),u=e===Sm?cJ(t,null,a):e===Rk?m$(t,null,a,.5):e===kk?m$(t,null,a,i||1):e===_4?fJ(t,null,a,s||1):lJ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function H3e(e,t,n){if(ZPe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+nt(t))}return t}function M4t(e,t,n){let r=t.bins;if(r&&!Fe(r)){const i=e.domain(),s=i[0],o=Kn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||$e("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=yl(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===vZ&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function L4t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=F4t(r,t,n);else if(t.scheme&&(s=j4t(r,t,n),vn(s))){if(e.interpolator)return e.interpolator(s);$e(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&eOe(r))return e.interpolator(x4(pV(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(EZ(t.interpolate,t.interpolateGamma)):vn(e.round)?e.round(i):vn(e.rangeRound)&&e.interpolate(i?MI:by),s&&e.range(pV(s,t.reverse))}function F4t(e,t,n){e!==GPe&&e!==Zz&&$e("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===Zz?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*gZ(n,i,r)]}function j4t(e,t,n){var r=t.schemeExtent,i,s;return Fe(t.scheme)?s=x4(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=xZ(i),s||$e(`Unrecognized scheme name: ${t.scheme}`)),n=e===E4?n+1:e===vZ?n-1:e===qE||e===w4?+t.schemeCount||I4t:n,eOe(e)?bhe(s,r,t.reverse):vn(s)?rOe(bhe(s,r),n):e===yZ?s:s.slice(0,n)}function bhe(e,t,n){return vn(e)&&(t||n)?nOe(e,pV(t||[0,1],n)):e}function pV(e,t){return t?e.slice().reverse():e}function q3e(e){Re.call(this,null,e)}lt(q3e,Re,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(kb(e.sort)),this.modified(n),t}});const _he="zero",W3e="center",G3e="normalize",Y3e=["y0","y1"];function lee(e){Re.call(this,null,e)}lee.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:_he,values:[_he,W3e,G3e]},{name:"as",type:"string",array:!0,length:2,default:Y3e}]};lt(lee,Re,{transform(e,t){var n=e.as||Y3e,r=n[0],i=n[1],s=kb(e.sort),o=e.field||lS,a=e.offset===W3e?B4t:e.offset===G3e?U4t:z4t,u,l,c,f;for(u=V4t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function B4t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function U4t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function z4t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function V4t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const H4t=Object.freeze(Object.defineProperty({__proto__:null,axisticks:$3e,datajoin:M3e,encode:L3e,legendentries:F3e,linkpath:aee,pie:uee,scale:V3e,sortitems:q3e,stack:lee},Symbol.toStringTag,{value:"Module"}));var q4t=Math.abs,mV=Math.cos,D$=Math.sin,W4t=1e-6,K3e=Math.PI,gV=K3e/2,whe=G4t(2);function Ehe(e){return e>1?gV:e<-1?-gV:Math.asin(e)}function G4t(e){return e>0?Math.sqrt(e):0}function Y4t(e,t){var n=e*D$(t),r=30,i;do t-=i=(t+D$(t)-n)/(1+mV(t));while(q4t(i)>W4t&&--r>0);return t/2}function K4t(e,t,n){function r(i,s){return[e*i*mV(s=Y4t(n,s)),t*D$(s)]}return r.invert=function(i,s){return s=Ehe(s/t),[i/(e*mV(s)),Ehe((2*s+D$(2*s))/n)]},r}var X4t=K4t(whe/gV,whe,K3e);function Q4t(){return $h(X4t).scale(169.529)}const J4t=ZEe(),yV=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Z4t(e,t){return function n(){const r=t();return r.type=e,r.path=ZEe().projection(r),r.copy=r.copy||function(){const i=n();return yV.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},QPe(r)}}function cee(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(P$[e]=Z4t(e,t),this):P$[e]||null}function X3e(e){return e&&e.path||J4t}const P$={albers:txe,albersusa:fat,azimuthalequalarea:dat,azimuthalequidistant:hat,conicconformal:gat,conicequalarea:JO,conicequidistant:bat,equalEarth:wat,equirectangular:yat,gnomonic:Eat,identity:xat,mercator:pat,mollweide:Q4t,naturalEarth1:Sat,orthographic:Tat,stereographic:Cat,transversemercator:Aat};for(const e in P$)cee(e,P$[e]);function eFt(){}const sp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function Q3e(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),tFt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(nFt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,sp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,sp[m|g<<1].forEach(b);for(sp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,sp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,sp[m|g<<1|y<<2|v<<3].forEach(b);sp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,sp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,sp[y<<2|v<<3].forEach(b);sp[y<<3].forEach(b);function b(w){var x=[w[0][0]+h,w[0][1]+p],T=[w[1][0]+h,w[1][1]+p],S=o(x),C=o(T),A,R;(A=d[S])?(R=f[C])?(delete d[A.end],delete f[R.start],A===R?(A.ring.push(T),c(A.ring)):f[A.start]=d[R.end]={start:A.start,end:R.end,ring:A.ring.concat(R.ring)}):(delete d[A.end],A.ring.push(T),d[A.end=C]=A):(A=f[C])?(R=d[S])?(delete f[A.start],delete d[R.end],A===R?(A.ring.push(T),c(A.ring)):f[R.start]=d[A.end]={start:R.start,end:A.end,ring:R.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(x),f[A.start=S]=A):f[S]=d[C]={start:S,end:C,ring:[x,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||$e("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:eFt,r):n===a},r}function tFt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function nFt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=rFt(e,t[n]))return i;return 0}function rFt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(iFt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function iFt(e,t,n){var r;return sFt(e,t,n)&&oFt(e[r=+(e[0]===t[0])],n[r],t[r])}function sFt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function oFt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function J3e(e,t,n){return function(r){var i=wh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?C0(s,o,e):a/(e+1);return yl(s+u,o,u)}}function fee(e){Re.call(this,null,e)}fee.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(fee,Re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ya,s=Q3e().smooth(e.smooth!==!1),o=e.thresholds||aFt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Fe(o)?o:o(c.values));uFt(f,c,l,e),f.forEach(d=>{u.push(f4(l,br(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function aFt(e,t,n){const r=J3e(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Hp(t(i).values)))}function uFt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(vn(i)&&(i=i(n,r)),vn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(ar(i)?i:i[0])||1,a=(ar(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(Z3e(t,o,a,u,l))}function Z3e(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function xhe(e,t,n){const r=e>=0?e:RJ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Gj(e){return vn(e)?e:va(+e)}function e$e(){var e=u=>u[0],t=u=>u[1],n=lS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=xhe(r[0],u,e)>>o,f=xhe(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const x=d+(+e(w)>>o),T=h+(+t(w)>>o);x>=0&&x<p&&T>=0&&T<m&&(g[x+T*p]+=+n(w))}),c>0&&f>0?(h_(p,m,g,y,c),p_(p,m,y,g,f),h_(p,m,g,y,c),p_(p,m,y,g,f),h_(p,m,g,y,c),p_(p,m,y,g,f)):c>0?(h_(p,m,g,y,c),h_(p,m,y,g,c),h_(p,m,g,y,c),v=y):f>0&&(p_(p,m,g,y,f),p_(p,m,y,g,f),p_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/jwe(v);for(let w=0,x=p*m;w<x;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=Gj(u),a):e},a.y=function(u){return arguments.length?(t=Gj(u),a):t},a.weight=function(u){return arguments.length?(n=Gj(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||$e("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||$e("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=dt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&$e("invalid bandwidth"),r=u,a):r},a}function h_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function p_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function dee(e){Re.call(this,null,e)}dee.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const lFt=["x","y","weight","size","cellSize","bandwidth"];function t$e(e,t){return lFt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(dee,Re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=cFt(r,e.groupby),s=(e.groupby||[]).map(Wi),o=t$e(e$e(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>br(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function cFt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function hee(e){Re.call(this,null,e)}hee.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(hee,Re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=Q3e().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||J3e(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=t$e(e$e(),e)(i,!0),u=Z3e(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Fe(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(br),n}});const vV="Feature",pee="FeatureCollection",fFt="MultiPoint";function mee(e){Re.call(this,null,e)}mee.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(mee,Re,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&ya,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ca(a))||s&&t.modified(ca(s))||o&&t.modified(ca(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:vV,geometry:{type:fFt,coordinates:r}})),this.value={type:pee,features:n}}});function gee(e){Re.call(this,null,e)}gee.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(gee,Re,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ya,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=X3e(e.projection),n.materialize().reflow()):o=i===ya||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=dFt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function dFt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function yee(e){Re.call(this,null,e)}yee.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(yee,Re,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function vee(e){Re.call(this,null,e)}vee.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(vee,Re,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=hFt(X3e(e.projection),e.field||xc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function hFt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function bee(e){Re.call(this,[],e),this.generator=Hot()}bee.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(bee,Re,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)vn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(tPe(n[0],i)):t.add.push(br(i)),n[0]=i,t}});function _ee(e){Re.call(this,null,e)}_ee.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(_ee,Re,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ya,s=mFt(e.opacity,e),o=pFt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Hp(n.map(l=>Hp(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=gn({},l,u);r||(f.$max=Hp(c.values||[])),l[a]=gFt(c,f,o.dep?o:va(o(f)),s.dep?s:va(s(f)))}),t.reflow(!0).modifies(a)}});function pFt(e,t){let n;return vn(e)?(n=r=>A0(e(r,t)),n.dep=n$e(e)):n=va(A0(e||"#888")),n}function mFt(e,t){let n;return vn(e)?(n=r=>e(r,t),n.dep=n$e(e)):e?n=va(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function n$e(e){if(!vn(e))return!1;const t=Vf(ca(e));return t.$x||t.$y||t.$value||t.$max}function gFt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Rg,d=p0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function r$e(e){Re.call(this,null,e),this.modified(!0)}lt(r$e,Re,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=vFt(e.type),yV.forEach(r=>{e[r]!=null&&She(n,r,e[r])})):yV.forEach(r=>{e.modified(r)&&She(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&yFt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function yFt(e,t){const n=bFt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function vFt(e){const t=cee((e||"mercator").toLowerCase());return t||$e("Unrecognized projection type: "+e),t()}function She(e,t,n){vn(e[t])&&e[t](n)}function bFt(e){return e=dt(e),e.length===1?e[0]:{type:pee,features:e.reduce((t,n)=>t.concat(_Ft(n)),[])}}function _Ft(e){return e.type===pee?e.features:dt(e).filter(t=>t!=null).map(t=>t.type===vV?t:{type:vV,geometry:t})}const wFt=Object.freeze(Object.defineProperty({__proto__:null,contour:hee,geojson:mee,geopath:gee,geopoint:yee,geoshape:vee,graticule:bee,heatmap:_ee,isocontour:fee,kde2d:dee,projection:r$e},Symbol.toStringTag,{value:"Module"})),The={center:Ost,collide:Zst,nbody:cot,link:tot,x:fot,y:dot},yC="forces",bV=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],EFt=["static","iterations"],i$e=["x","y","vx","vy"];function wee(e){Re.call(this,null,e)}wee.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:i$e}]};lt(wee,Re,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(bV),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&s$e(n,e,0,t)):(this.value=n=SFt(t.source,e),n.on("tick",xFt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(EFt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==yC||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(i$e)}});function xFt(e,t){return()=>e.touch(t).run()}function SFt(e,t){const n=lot(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),s$e(n,t,!0).on("end",()=>s=!0)}function s$e(e,t,n,r){var i=dt(t.forces),s,o,a,u;for(s=0,o=bV.length;s<o;++s)a=bV[s],a!==yC&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=yC+s,a=n||t.modified(yC,s)?CFt(i[s]):r&&TFt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(yC+s,null);return e.numForces=i.length,e}function TFt(e,t){var n,r;for(n in e)if(vn(r=e[n])&&t.modified(ca(r)))return 1;return 0}function CFt(e){var t,n;Ft(The,e.force)||$e("Unrecognized force: "+e.force),t=The[e.force]();for(n in e)vn(t[n])&&AFt(t[n],e[n],e);return t}function AFt(e,t,n){e(vn(t)?r=>t(r,n):t)}const IFt=Object.freeze(Object.defineProperty({__proto__:null,force:wee},Symbol.toStringTag,{value:"Module"}));function _V(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Eee(e){Re.call(this,null,e)}Eee.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const kFt=e=>e.values;lt(Eee,Re,{transform(e,t){t.source||$e("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&c4(o.data)&&i.rem.push(o.data)}),this.value=s=nY({values:dt(e.keys).reduce((o,a)=>(o.key(a),o),RFt()).entries(i.source)},kFt),n&&s.each(o=>{o.children&&(o=br(o.data),i.add.push(o),i.source.push(o))}),_V(s,Mt,Mt)),i.source.root=s,i}});function RFt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Hm(e){Re.call(this,null,e)}const NFt=(e,t)=>e.parent===t.parent?1:2;lt(Hm,Re,{transform(e,t){(!t.source||!t.source.root)&&$e(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(kb(e.sort,o=>o.data)),DFt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?NFt:lS);try{this.value=n(i)}catch(o){$e(o)}return i.each(o=>PFt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function DFt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function PFt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const wV=["x","y","r","depth","children"];function xee(e){Hm.call(this,e)}xee.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:wV.length,default:wV}]};lt(xee,Hm,{layout:dut,params:["radius","size","padding"],fields:wV});const EV=["x0","y0","x1","y1","depth","children"];function See(e){Hm.call(this,e)}See.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:EV.length,default:EV}]};lt(See,Hm,{layout:hut,params:["size","round","padding"],fields:EV});function Tee(e){Re.call(this,null,e)}Tee.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(Tee,Re,{transform(e,t){t.source||$e("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?_V(uue().id(e.key).parentId(e.parentKey)(i.source),e.key,Sc):_V(uue()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const Che={tidy:xut,cluster:$at},xV=["x","y","depth","children"];function Cee(e){Hm.call(this,e)}Cee.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:xV.length,default:xV}]};lt(Cee,Hm,{layout(e){const t=e||"tidy";if(Ft(Che,t))return Che[t]();$e("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:xV});function Aee(e){Re.call(this,[],e)}Aee.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(Aee,Re,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||$e("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(br({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const Ahe={binary:Tut,dice:BI,slice:IL,slicedice:Cut,squarify:bxe,resquarify:Aut},SV=["x0","y0","x1","y1","depth","children"];function Iee(e){Hm.call(this,e)}Iee.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:SV.length,default:SV}]};lt(Iee,Hm,{layout(){const e=Sut();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(Ahe,t)?e.tile(Ahe[t]):$e("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:SV});const OFt=Object.freeze(Object.defineProperty({__proto__:null,nest:Eee,pack:xee,partition:See,stratify:Tee,tree:Cee,treelinks:Aee,treemap:Iee},Symbol.toStringTag,{value:"Module"})),Yj=4278190080;function $Ft(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function MFt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=p0(s,o).getContext("2d"),l=p0(s,o).getContext("2d"),c=a&&p0(s,o).getContext("2d");n.forEach(C=>pP(u,C,!1)),pP(l,t,!1),a&&pP(c,t,!0);const f=Kj(u,s,o),d=Kj(l,s,o),h=a&&Kj(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,x,T,S;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,x=f[w]&Yj,S=d[w]&Yj,T=a&&h[w]&Yj,(x||T||S)&&(v=e(g),b=e(y),!i&&(x||S)&&p.set(v,b),a&&(x||T)&&m.set(v,b));return[p,m]}function Kj(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function pP(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>pP(e,s.items,n))}):Ml[r].draw(e,{items:n?t.map(LFt):t})}function LFt(e){const t=f4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const op=5,Ia=31,Y2=32,bg=new Uint32Array(Y2+1),ff=new Uint32Array(Y2+1);ff[0]=0;bg[0]=~ff[0];for(let e=1;e<=Y2;++e)ff[e]=ff[e-1]<<1|1,bg[e]=~ff[e];function FFt(e,t){const n=new Uint32Array(~~((e*t+Y2)/Y2));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>op]&1<<(a&Ia)},set:(s,o)=>{const a=o*e+s;r(a>>>op,1<<(a&Ia))},clear:(s,o)=>{const a=o*e+s;i(a>>>op,~(1<<(a&Ia)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>op,h=f>>>op,d===h){if(n[d]&bg[c&Ia]&ff[(f&Ia)+1])return!0}else{if(n[d]&bg[c&Ia]||n[h]&ff[(f&Ia)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>op,d=c>>>op,f===d)r(f,bg[l&Ia]&ff[(c&Ia)+1]);else for(r(f,bg[l&Ia]),r(d,ff[(c&Ia)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>op,d=c>>>op,f===d)i(f,ff[l&Ia]|bg[(c&Ia)+1]);else for(i(f,ff[l&Ia]),i(d,bg[(c&Ia)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function jFt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>FFt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function BFt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=El.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function O$(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function qg(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function UFt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!O$(p,m,d,h,i,s)&&!qg(e,p,m,h,d,g,o,a)&&!qg(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,qg(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=El.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,x,T,S,C,A,R,k,O,D,$,L,F,B,U;for(let q=0;q<f;++q){for(v=c[q].x,w=c[q].y,b=c[q].x2===void 0?v:c[q].x2,x=c[q].y2===void 0?w:c[q].y2,v>b&&(U=v,v=b,b=U),w>x&&(U=w,w=x,x=U),R=e(v),O=e(b),k=~~((R+O)/2),D=e(w),L=e(x),$=~~((D+L)/2),C=k;C>=R;--C)for(A=$;A>=D;--A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);for(C=k;C<=O;++C)for(A=$;A<=L;++A)B=u(C,A,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(F=Math.abs(b-v+x-w),T=(v+b)/2,S=(w+x)/2,F>=y&&!O$(T,S,h,d,i,s)&&!qg(e,T,S,d,h,d,o,null)&&(y=F,l.x=T,l.y=S,g=!0))}return m||g?(T=h/2,S=d/2,o.setRange(e(l.x-T),e(l.y-S),e(l.x+T),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const zFt=[-1,-1,1,1],VFt=[-1,1,-1,1];function HFt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=El.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,x,T,S,C,A,R,k,O,D,$;for(let L=0;L<f;++L){for(b=c[L].x,x=c[L].y,w=c[L].x2===void 0?b:c[L].x2,T=c[L].y2===void 0?x:c[L].y2,p.push([e((b+w)/2),e((x+T)/2)]);p.length;)if([A,R]=p.pop(),!(o.get(A,R)||a.get(A,R)||u.get(A,R))){u.set(A,R);for(let F=0;F<4;++F)S=A+zFt[F],C=R+VFt[F],u.outOfBounds(S,C,S,C)||p.push([S,C]);if(S=e.invert(A),C=e.invert(R),k=m,O=s,!O$(S,C,h,d,i,s)&&!qg(e,S,C,d,h,k,o,a)&&!qg(e,S,C,d,h,d,o,null)){for(;O-k>=1;)D=(k+O)/2,qg(e,S,C,d,h,D,o,a)?O=D:k=D;k>m&&(l.x=S,l.y=C,m=k,g=!0)}}!g&&!n&&($=Math.abs(w-b+T-x),S=(b+w)/2,C=(x+T)/2,$>=v&&!O$(S,C,h,d,i,s)&&!qg(e,S,C,d,h,d,o,null)&&(v=$,l.x=S,l.y=C,y=!0))}return g||y?(S=h/2,C=d/2,o.setRange(e(l.x-S),e(l.y-C),e(l.x+S),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const qFt=["right","center","left"],WFt=["bottom","middle","top"];function GFt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,x,T,S,C,A,R,k;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,S=c[4+p]+y*f*p/2+r[O]*p*g,w=S-f/2,x=S+f/2,C=e(v),R=e(w),k=e(x),!d)if(Ihe(C,C,R,k,o,a,v,v,w,x,c,m))d=El.width(l.datum,l.datum.text);else continue;if(T=v+y*d*h/2,v=T-d/2,b=T+d/2,C=e(v),A=e(b),Ihe(C,A,R,k,o,a,v,b,w,x,c,m))return l.x=h?h*y<0?b:v:T,l.y=p?p*y<0?x:w:S,l.align=qFt[h*y+1],l.baseline=WFt[p*y+1],o.setRange(C,R,A,k),!0}return!1}}function Ihe(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const Xj=0,Qj=4,Jj=8,Zj=0,e9=1,t9=2,YFt={"top-left":Xj+Zj,top:Xj+e9,"top-right":Xj+t9,left:Qj+Zj,middle:Qj+e9,right:Qj+t9,"bottom-left":Jj+Zj,bottom:Jj+e9,"bottom-right":Jj+t9},KFt={naive:BFt,"reduced-search":UFt,floodfill:HFt};function XFt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=QFt(r,f),h=JFt(i,f),p=ZFt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=e5t(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,x=-1;const T=e.map(R=>{const k=v?El.width(R,R.text):void 0;return w=Math.max(w,k),x=Math.max(x,R.fontSize),{datum:R,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(R),textWidth:k}});l=l===null||l===1/0?Math.max(w,x)+Math.max(...r):l;const S=jFt(t[0],t[1],l);let C;if(!b){n&&T.sort((O,D)=>n(O.datum,D.datum));let R=!1;for(let O=0;O<h.length&&!R;++O)R=h[O]===5||d[O]<0;const k=(p&&o||g)&&e.map(O=>O.datum);C=s.length||k?MFt(S,k||[],s,R,g):$Ft(S,o&&T)}const A=g?KFt[c](S,C,o,u):GFt(S,C,h,d);return T.forEach(R=>R.opacity=+A(R)),T}function QFt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function JFt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=YFt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function ZFt(e){return e&&e.mark&&e.mark.marktype}function e5t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const TV=["x","y","opacity","align","baseline"],o$e=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function kee(e){Re.call(this,null,e)}kee.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:o$e},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:TV.length,default:TV}]};lt(kee,Re,{transform(e,t){function n(s){const o=e[s];return vn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&$e("Size parameter should be specified as a [width, height] array.");const i=e.as||TV;return XFt(t.materialize(t.SOURCE).source||[],e.size,e.sort,dt(e.offset==null?1:e.offset),dt(e.anchor||o$e),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const t5t=Object.freeze(Object.defineProperty({__proto__:null,label:kee},Symbol.toStringTag,{value:"Module"}));function a$e(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Ree(e){Re.call(this,null,e)}Ree.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(Ree,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=a$e(r,e.groupby),s=(e.groupby||[]).map(Wi),o=s.length,a=e.as||[Wi(e.x),Wi(e.y)],u=[];i.forEach(l=>{bPe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(br(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const CV={constant:zJ,linear:VJ,log:mPe,exp:gPe,pow:yPe,quad:HJ,poly:vPe},n5t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Nee(e){Re.call(this,null,e)}Nee.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(CV)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(Nee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=a$e(r,e.groupby),s=(e.groupby||[]).map(Wi),o=e.method||"linear",a=e.order==null?3:e.order,u=n5t(o,a),l=e.as||[Wi(e.x),Wi(e.y)],c=CV[o],f=[];let d=e.extent;Ft(CV,o)||$e("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(br({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||wh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(br(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):v4(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const r5t=Object.freeze(Object.defineProperty({__proto__:null,loess:Ree,regression:Nee},Symbol.toStringTag,{value:"Module"}));function Dee(e){Re.call(this,null,e)}Dee.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const i5t=[-1e5,-1e5,1e5,1e5];lt(Dee,Re,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:i5t;const s=this.value=HG.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!o5t(u)?s5t(u):null}return t.reflow(e.modified()).modifies(n)}});function s5t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function o5t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const a5t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Dee},Symbol.toStringTag,{value:"Module"}));var n9=Math.PI/180,vC=64,mP=2048;function u5t(){var e=[256,256],t,n,r,i,s,o,a,u=u$e,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(p0()),m=p5t((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,S)=>S.size-T.size);++v<y;){var x=w[v];x.x=e[0]*(c()+.5)>>1,x.y=e[1]*(c()+.5)>>1,l5t(p,x,w,v),x.hasText&&h(m,x,g)&&(b.push(x),g?f5t(g,x):g=[{x:x.x+x.x0,y:x.y+x.y0},{x:x.x+x.x1,y:x.y+x.y1}],x.x-=e[0]>>1,x.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(vC<<5)/m,p.height=mP/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),x=c()<.5?1:-1,T=-x,S,C,A;(S=w(T+=x))&&(C=~~S[0],A=~~S[1],!(Math.min(Math.abs(C),Math.abs(A))>=b));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!c5t(m,p,e[0]))&&(!g||d5t(m,g))){for(var R=m.sprite,k=m.width>>5,O=e[0]>>5,D=m.x-(k<<4),$=D&127,L=32-$,F=m.y1-m.y0,B=(m.y+m.y0)*O+(D>>5),U,q=0;q<F;q++){U=0;for(var P=0;P<=k;P++)p[B+P]|=U<<L|(P<k?(U=R[q*k+P])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Yy(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Yy(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Yy(p),f):s},f.rotate=function(p){return arguments.length?(o=Yy(p),f):o},f.text=function(p){return arguments.length?(t=Yy(p),f):t},f.spiral=function(p){return arguments.length?(u=m5t[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Yy(p),f):r},f.padding=function(p){return arguments.length?(a=Yy(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function l5t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(vC<<5)/s,mP/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*n9),g=Math.cos(t.rotate*n9),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=vC<<5&&(o=0,a+=u,u=0),a+d>=mP)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*n9),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var x=i.getImageData(0,0,(vC<<5)/s,mP/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),R=x[(a+p)*(vC<<5)+(o+h)<<2]?1<<31-h%32:0;T[A]|=R,S|=R}S?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function c5t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function f5t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function d5t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function u$e(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function h5t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function p5t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Yy(e){return typeof e=="function"?e:function(){return e}}var m5t={archimedean:u$e,rectangular:h5t};const l$e=["x","y","font","fontSize","fontStyle","fontWeight","angle"],g5t=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Pee(e){Re.call(this,u5t(),e)}Pee.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:l$e}]};lt(Pee,Re,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&$e("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return vn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||g5t.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||l$e;let a=e.fontSize||14,u;if(vn(a)?u=e.fontSizeRange:a=va(a),u){const p=a,m=pr("sqrt")().domain(wh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Cc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const y5t=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Pee},Symbol.toStringTag,{value:"Module"})),v5t=e=>new Uint8Array(e),b5t=e=>new Uint16Array(e),mA=e=>new Uint32Array(e);function _5t(){let e=8,t=[],n=mA(0),r=qN(0,e),i=qN(0,e);return{data:()=>t,seen:()=>n=w5t(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=qN(s,e,r),i=qN(s,e))}}}function w5t(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function qN(e,t,n){const r=(t<257?v5t:t<65537?b5t:mA)(e);return n&&r.set(n),r}function khe(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function Rhe(){let e=mA(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=mA(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=E5t(h,d),c)p=t,m=e,t=Array(c+f),e=mA(c+f),x5t(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[Yrt(u,a[0],0,l),T0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function E5t(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),eit(e,t)}function x5t(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Oee(e){Re.call(this,_5t(),e),this._indices=null,this._dims=null}Oee.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(Oee,Re,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=Rhe()),s.push(khe(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,x,T,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,x=0,T=v.length;x<T;++x)w[v[x]._index]=1;for(x=0;x<h;++x)S=r[x],(!o[x]||e.modified("fields",x)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=Rhe(),p[y]=m=g.insert(S,t.source,0)),o[x]=khe(g,x,i[x]).onAdd(m,u));for(x=0,T=a.data().length;x<T;++x)b[x]||(l[x]!==u[x]?f.push(x):w[x]&&u[x]!==c&&d.push(x));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function $ee(e){Re.call(this,null,e)}$ee.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt($ee,Re,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const S5t=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Oee,resolvefilter:$ee},Symbol.toStringTag,{value:"Module"})),T5t="RawCode",K1="Literal",C5t="Property",A5t="Identifier",I5t="ArrayExpression",k5t="BinaryExpression",c$e="CallExpression",R5t="ConditionalExpression",N5t="LogicalExpression",D5t="MemberExpression",P5t="ObjectExpression",O5t="UnaryExpression";function Xf(e){this.type=e}Xf.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=$5t(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function $5t(e){switch(e.type){case I5t:return e.elements;case k5t:case N5t:return[e.left,e.right];case c$e:return[e.callee].concat(e.arguments);case R5t:return[e.test,e.consequent,e.alternate];case D5t:return[e.object,e.property];case P5t:return e.properties;case C5t:return[e.key,e.value];case O5t:return[e.argument];case A5t:case K1:case T5t:default:return[]}}var Hh,kt,Oe,da,Dr,M4=1,zk=2,X1=3,Ny=4,L4=5,Db=6,pu=7,Vk=8,M5t=9;Hh={};Hh[M4]="Boolean";Hh[zk]="<end>";Hh[X1]="Identifier";Hh[Ny]="Keyword";Hh[L4]="Null";Hh[Db]="Numeric";Hh[pu]="Punctuator";Hh[Vk]="String";Hh[M5t]="RegularExpression";var L5t="ArrayExpression",F5t="BinaryExpression",j5t="CallExpression",B5t="ConditionalExpression",f$e="Identifier",U5t="Literal",z5t="LogicalExpression",V5t="MemberExpression",H5t="ObjectExpression",q5t="Property",W5t="UnaryExpression",Zs="Unexpected token %0",G5t="Unexpected number",Y5t="Unexpected string",K5t="Unexpected identifier",X5t="Unexpected reserved word",Q5t="Unexpected end of input",AV="Invalid regular expression",r9="Invalid regular expression: missing /",d$e="Octal literals are not allowed in strict mode.",J5t="Duplicate data property in object literal not allowed in strict mode",So="ILLEGAL",K2="Disabled.",Z5t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),e8t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function F4(e,t){if(!e)throw new Error("ASSERT: "+t)}function bp(e){return e>=48&&e<=57}function Mee(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function gA(e){return"01234567".indexOf(e)>=0}function t8t(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function X2(e){return e===10||e===13||e===8232||e===8233}function Hk(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Z5t.test(String.fromCharCode(e))}function $$(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&e8t.test(String.fromCharCode(e))}const n8t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function h$e(){for(;Oe<da;){const e=kt.charCodeAt(Oe);if(t8t(e)||X2(e))++Oe;else break}}function IV(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)Oe<da&&Mee(kt[Oe])?(r=kt[Oe++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):dr({},Zs,So);return String.fromCharCode(i)}function r8t(){var e,t,n,r;for(e=kt[Oe],t=0,e==="}"&&dr({},Zs,So);Oe<da&&(e=kt[Oe++],!!Mee(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&dr({},Zs,So),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function p$e(){var e,t;for(e=kt.charCodeAt(Oe++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt(Oe)!==117&&dr({},Zs,So),++Oe,e=IV("u"),(!e||e==="\\"||!Hk(e.charCodeAt(0)))&&dr({},Zs,So),t=e);Oe<da&&(e=kt.charCodeAt(Oe),!!$$(e));)++Oe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt(Oe)!==117&&dr({},Zs,So),++Oe,e=IV("u"),(!e||e==="\\"||!$$(e.charCodeAt(0)))&&dr({},Zs,So),t+=e);return t}function i8t(){var e,t;for(e=Oe++;Oe<da;){if(t=kt.charCodeAt(Oe),t===92)return Oe=e,p$e();if($$(t))++Oe;else break}return kt.slice(e,Oe)}function s8t(){var e,t,n;return e=Oe,t=kt.charCodeAt(Oe)===92?p$e():i8t(),t.length===1?n=X1:n8t.hasOwnProperty(t)?n=Ny:t==="null"?n=L4:t==="true"||t==="false"?n=M4:n=X1,{type:n,value:t,start:e,end:Oe}}function i9(){var e=Oe,t=kt.charCodeAt(Oe),n,r=kt[Oe],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++Oe,{type:pu,value:String.fromCharCode(t),start:e,end:Oe};default:if(n=kt.charCodeAt(Oe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return Oe+=2,{type:pu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:Oe};case 33:case 61:return Oe+=2,kt.charCodeAt(Oe)===61&&++Oe,{type:pu,value:kt.slice(e,Oe),start:e,end:Oe}}}if(o=kt.substr(Oe,4),o===">>>=")return Oe+=4,{type:pu,value:o,start:e,end:Oe};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return Oe+=3,{type:pu,value:s,start:e,end:Oe};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return Oe+=2,{type:pu,value:i,start:e,end:Oe};if(i==="//"&&dr({},Zs,So),"<>=!+-*%&|^/".indexOf(r)>=0)return++Oe,{type:pu,value:r,start:e,end:Oe};dr({},Zs,So)}function o8t(e){let t="";for(;Oe<da&&Mee(kt[Oe]);)t+=kt[Oe++];return t.length===0&&dr({},Zs,So),Hk(kt.charCodeAt(Oe))&&dr({},Zs,So),{type:Db,value:parseInt("0x"+t,16),start:e,end:Oe}}function a8t(e){let t="0"+kt[Oe++];for(;Oe<da&&gA(kt[Oe]);)t+=kt[Oe++];return(Hk(kt.charCodeAt(Oe))||bp(kt.charCodeAt(Oe)))&&dr({},Zs,So),{type:Db,value:parseInt(t,8),octal:!0,start:e,end:Oe}}function Nhe(){var e,t,n;if(n=kt[Oe],F4(bp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=Oe,e="",n!=="."){if(e=kt[Oe++],n=kt[Oe],e==="0"){if(n==="x"||n==="X")return++Oe,o8t(t);if(gA(n))return a8t(t);n&&bp(n.charCodeAt(0))&&dr({},Zs,So)}for(;bp(kt.charCodeAt(Oe));)e+=kt[Oe++];n=kt[Oe]}if(n==="."){for(e+=kt[Oe++];bp(kt.charCodeAt(Oe));)e+=kt[Oe++];n=kt[Oe]}if(n==="e"||n==="E")if(e+=kt[Oe++],n=kt[Oe],(n==="+"||n==="-")&&(e+=kt[Oe++]),bp(kt.charCodeAt(Oe)))for(;bp(kt.charCodeAt(Oe));)e+=kt[Oe++];else dr({},Zs,So);return Hk(kt.charCodeAt(Oe))&&dr({},Zs,So),{type:Db,value:parseFloat(e),start:t,end:Oe}}function u8t(){var e="",t,n,r,i,s=!1;for(t=kt[Oe],F4(t==="'"||t==='"',"String literal must starts with a quote"),n=Oe,++Oe;Oe<da;)if(r=kt[Oe++],r===t){t="";break}else if(r==="\\")if(r=kt[Oe++],!r||!X2(r.charCodeAt(0)))switch(r){case"u":case"x":kt[Oe]==="{"?(++Oe,e+=r8t()):e+=IV(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:gA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),Oe<da&&gA(kt[Oe])&&(s=!0,i=i*8+"01234567".indexOf(kt[Oe++]),"0123".indexOf(r)>=0&&Oe<da&&gA(kt[Oe])&&(i=i*8+"01234567".indexOf(kt[Oe++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[Oe]===`
`&&++Oe;else{if(X2(r.charCodeAt(0)))break;e+=r}return t!==""&&dr({},Zs,So),{type:Vk,value:e,octal:s,start:n,end:Oe}}function l8t(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";dr({},AV)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{dr({},AV)}try{return new RegExp(e,t)}catch{return null}}function c8t(){var e,t,n,r,i;for(e=kt[Oe],F4(e==="/","Regular expression literal must start with a slash"),t=kt[Oe++],n=!1,r=!1;Oe<da;)if(e=kt[Oe++],t+=e,e==="\\")e=kt[Oe++],X2(e.charCodeAt(0))&&dr({},r9),t+=e;else if(X2(e.charCodeAt(0)))dr({},r9);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||dr({},r9),i=t.substr(1,t.length-2),{value:i,literal:t}}function f8t(){var e,t,n;for(t="",n="";Oe<da&&(e=kt[Oe],!!$$(e.charCodeAt(0)));)++Oe,e==="\\"&&Oe<da?dr({},Zs,So):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&dr({},AV,n),{value:n,literal:t}}function d8t(){var e,t,n,r;return Dr=null,h$e(),e=Oe,t=c8t(),n=f8t(),r=l8t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:Oe}}function h8t(e){return e.type===X1||e.type===Ny||e.type===M4||e.type===L4}function m$e(){if(h$e(),Oe>=da)return{type:zk,start:Oe,end:Oe};const e=kt.charCodeAt(Oe);return Hk(e)?s8t():e===40||e===41||e===59?i9():e===39||e===34?u8t():e===46?bp(kt.charCodeAt(Oe+1))?Nhe():i9():bp(e)?Nhe():i9()}function Eu(){const e=Dr;return Oe=e.end,Dr=m$e(),Oe=e.end,e}function g$e(){const e=Oe;Dr=m$e(),Oe=e}function p8t(e){const t=new Xf(L5t);return t.elements=e,t}function Dhe(e,t,n){const r=new Xf(e==="||"||e==="&&"?z5t:F5t);return r.operator=e,r.left=t,r.right=n,r}function m8t(e,t){const n=new Xf(j5t);return n.callee=e,n.arguments=t,n}function g8t(e,t,n){const r=new Xf(B5t);return r.test=e,r.consequent=t,r.alternate=n,r}function Lee(e){const t=new Xf(f$e);return t.name=e,t}function bC(e){const t=new Xf(U5t);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function Phe(e,t,n){const r=new Xf(V5t);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function y8t(e){const t=new Xf(H5t);return t.properties=e,t}function Ohe(e,t,n){const r=new Xf(q5t);return r.key=t,r.value=n,r.kind=e,r}function v8t(e,t){const n=new Xf(W5t);return n.operator=e,n.argument=t,n.prefix=!0,n}function dr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(F4(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=Oe,n.description=i,n}function j4(e){e.type===zk&&dr(e,Q5t),e.type===Db&&dr(e,G5t),e.type===Vk&&dr(e,Y5t),e.type===X1&&dr(e,K5t),e.type===Ny&&dr(e,X5t),dr(e,Zs,e.value)}function ha(e){const t=Eu();(t.type!==pu||t.value!==e)&&j4(t)}function ui(e){return Dr.type===pu&&Dr.value===e}function s9(e){return Dr.type===Ny&&Dr.value===e}function b8t(){const e=[];for(Oe=Dr.start,ha("[");!ui("]");)ui(",")?(Eu(),e.push(null)):(e.push(Q1()),ui("]")||ha(","));return Eu(),p8t(e)}function $he(){Oe=Dr.start;const e=Eu();return e.type===Vk||e.type===Db?(e.octal&&dr(e,d$e),bC(e)):Lee(e.value)}function _8t(){var e,t,n,r;if(Oe=Dr.start,e=Dr,e.type===X1)return n=$he(),ha(":"),r=Q1(),Ohe("init",n,r);if(e.type===zk||e.type===pu)j4(e);else return t=$he(),ha(":"),r=Q1(),Ohe("init",t,r)}function w8t(){var e=[],t,n,r,i={},s=String;for(Oe=Dr.start,ha("{");!ui("}");)t=_8t(),t.key.type===f$e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?dr({},J5t):i[r]=!0,e.push(t),ui("}")||ha(",");return ha("}"),y8t(e)}function E8t(){ha("(");const e=Fee();return ha(")"),e}const x8t={if:1};function S8t(){var e,t,n;if(ui("("))return E8t();if(ui("["))return b8t();if(ui("{"))return w8t();if(e=Dr.type,Oe=Dr.start,e===X1||x8t[Dr.value])n=Lee(Eu().value);else if(e===Vk||e===Db)Dr.octal&&dr(Dr,d$e),n=bC(Eu());else{if(e===Ny)throw new Error(K2);e===M4?(t=Eu(),t.value=t.value==="true",n=bC(t)):e===L4?(t=Eu(),t.value=null,n=bC(t)):ui("/")||ui("/=")?(n=bC(d8t()),g$e()):j4(Eu())}return n}function T8t(){const e=[];if(ha("("),!ui(")"))for(;Oe<da&&(e.push(Q1()),!ui(")"));)ha(",");return ha(")"),e}function C8t(){Oe=Dr.start;const e=Eu();return h8t(e)||j4(e),Lee(e.value)}function A8t(){return ha("."),C8t()}function I8t(){ha("[");const e=Fee();return ha("]"),e}function k8t(){var e,t,n;for(e=S8t();;)if(ui("."))n=A8t(),e=Phe(".",e,n);else if(ui("("))t=T8t(),e=m8t(e,t);else if(ui("["))n=I8t(),e=Phe("[",e,n);else break;return e}function Mhe(){const e=k8t();if(Dr.type===pu&&(ui("++")||ui("--")))throw new Error(K2);return e}function gP(){var e,t;if(Dr.type!==pu&&Dr.type!==Ny)t=Mhe();else{if(ui("++")||ui("--"))throw new Error(K2);if(ui("+")||ui("-")||ui("~")||ui("!"))e=Eu(),t=gP(),t=v8t(e.value,t);else{if(s9("delete")||s9("void")||s9("typeof"))throw new Error(K2);t=Mhe()}}return t}function Lhe(e){let t=0;if(e.type!==pu&&e.type!==Ny)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function R8t(){var e,t,n,r,i,s,o,a,u,l;if(e=Dr,u=gP(),r=Dr,i=Lhe(r),i===0)return u;for(r.prec=i,Eu(),t=[e,Dr],o=gP(),s=[u,r,o];(i=Lhe(Dr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=Dhe(a,u,o),s.push(n);r=Eu(),r.prec=i,s.push(r),t.push(Dr),n=gP(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=Dhe(s[l-1].value,s[l-2],n),l-=2;return n}function Q1(){var e,t,n;return e=R8t(),ui("?")&&(Eu(),t=Q1(),ha(":"),n=Q1(),e=g8t(e,t,n)),e}function Fee(){const e=Q1();if(ui(","))throw new Error(K2);return e}function jee(e){kt=e,Oe=0,da=kt.length,Dr=null,g$e();const t=Fee();if(Dr.type!==zk)throw new Error("Unexpect token after expression.");return t}var y$e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function v$e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&$e("Missing arguments to clamp function."),o.length>3&&$e("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&$e("Missing arguments to if function."),o.length>3&&$e("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function N8t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function b$e(e){e=e||{};const t=e.allowed?Vf(e.allowed):{},n=e.forbidden?Vf(e.forbidden):{},r=e.constants||y$e,i=(e.functions||v$e)(f),s=e.globalvar,o=e.fieldvar,a=vn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(ht(p))return p;const m=d[p.type];return m==null&&$e("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?$e("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[N8t(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&$e("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||$e("Unrecognized function: "+m),vn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Fhe=Symbol("vega_selection_getter");function _$e(e){return(!e.getter||!e.getter[Fhe])&&(e.getter=xc(e.field),e.getter[Fhe]=!0),e.getter}const Bee="intersect",jhe="union",D8t="vlMulti",P8t="vlPoint",Bhe="or",O8t="and",xd="_vgsid_",Q2=xc(xd),$8t="E",M8t="R",L8t="R-E",F8t="R-LE",j8t="R-RE",M$="index:unit";function Uhe(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=_$e(a)(e),d0(o)&&(o=aa(o)),d0(r[s])&&(r[s]=aa(r[s])),Fe(r[s])&&d0(r[s][0])&&(r[s]=r[s].map(aa)),a.type===$8t){if(Fe(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===M8t){if(!nw(o,r[s]))return!1}else if(a.type===j8t){if(!nw(o,r[s],!0,!1))return!1}else if(a.type===L8t){if(!nw(o,r[s],!1,!1))return!1}else if(a.type===F8t&&!nw(o,r[s],!1,!0))return!1;return!0}function B8t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[M$]&&r[M$].value:void 0,o=n===Bee,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Uhe(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Uhe(t,l),o^h)return h;return a&&o}const w$e=$x(Q2),U8t=w$e.left,z8t=w$e.right;function V8t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[M$]&&r[M$].value:void 0,o=n===Bee,a=Q2(t),u=U8t(i,a);if(u===i.length||Q2(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(z8t(i,a)-u<s.size)return!1}return!0}function H8t(e,t){return e.map(n=>gn(t.fields?{values:t.fields.map(r=>_$e(r)(n.datum))}:{[xd]:Q2(n.datum)},t))}function q8t(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,x,T;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(x=0,T=c.length;x<T;++x)h=c[x],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=o9[`${y}_union`],m[d]=v(g,dt(f[x]));n&&(g=a[d]||(a[d]=[]),g.push(dt(f).reduce((S,C,A)=>(S[c[A].field]=C,S),{})))}else h=xd,p=Q2(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[xd]:p}));if(t=t||jhe,o[xd]?o[xd]=o9[`${xd}_${t}`](...Object.values(o[xd])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(C=>o[S][C]).reduce((C,A)=>C===void 0?A:o9[`${u[S]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const S=r?P8t:D8t;o[S]=t===jhe?{[Bhe]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[O8t]:s.map(C=>({[Bhe]:a[C]}))}}return o}var o9={[`${xd}_union`]:lit,[`${xd}_intersect`]:ait,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=aa(t[0]),r=aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=aa(t[0]),r=aa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const W8t=":",G8t="@";function Uee(e,t,n,r){t[0].type!==K1&&$e("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Kn(t).value,o="unit",a=G8t+o,u=W8t+i;s===Bee&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function E$e(e){const t=this.context.data[e];return t?t.values.value:[]}function Y8t(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function K8t(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Sc).insert(t)),1}function X8t(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const qk=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},Q8t=qk("format"),x$e=qk("timeFormat"),J8t=qk("utcFormat"),Z8t=qk("timeParse"),ejt=qk("utcParse"),WN=new Date(2e3,0,1);function B4(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(WN.setYear(2e3),WN.setMonth(e),WN.setDate(t),x$e.call(this,WN,n))}function tjt(e){return B4.call(this,e,1,"%B")}function njt(e){return B4.call(this,e,1,"%b")}function rjt(e){return B4.call(this,0,2+e,"%A")}function ijt(e){return B4.call(this,0,2+e,"%a")}const sjt=":",ojt="@",kV="%",S$e="$";function zee(e,t,n,r){t[0].type!==K1&&$e("First argument to data functions must be a string literal.");const i=t[0].value,s=sjt+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function ajt(e,t,n,r){t[0].type!==K1&&$e("First argument to indata must be a string literal."),t[1].type!==K1&&$e("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=ojt+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ha(e,t,n,r){if(t[0].type===K1)zhe(n,r,t[0].value);else for(e in n.scales)zhe(n,r,e)}function zhe(e,t,n){const r=kV+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function qh(e,t){if(vn(e))return e;if(ht(e)){const n=t.scales[e];return n&&P$t(n.value)?n.value:void 0}}function ujt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ha,n._range=Ha,n._scale=Ha;const r=i=>"_["+(i.type===K1?nt(kV+i.value):nt(kV)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Vee(e,t){return function(n,r,i){if(n){const s=qh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const ljt=Vee("area",xot),cjt=Vee("bounds",Aot),fjt=Vee("centroid",Pot);function djt(e,t){const n=qh(e,(t||this).context);return n&&n.scale()}function hjt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Hee(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function pjt(){return Hee(this.context.dataflow,"warn",arguments)}function mjt(){return Hee(this.context.dataflow,"info",arguments)}function gjt(){return Hee(this.context.dataflow,"debug",arguments)}function a9(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function RV(e){const t=A0(e),n=a9(t.r),r=a9(t.g),i=a9(t.b);return .2126*n+.7152*r+.0722*i}function yjt(e,t){const n=RV(e),r=RV(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function vjt(){const e=[].slice.call(arguments);return e.unshift({}),gn(...e)}function T$e(e,t){return e===t||e!==e&&t!==t?!0:Fe(e)?Fe(t)&&e.length===t.length?bjt(e,t):!1:mt(e)&&mt(t)?C$e(e,t):!1}function bjt(e,t){for(let n=0,r=e.length;n<r;++n)if(!T$e(e[n],t[n]))return!1;return!0}function C$e(e,t){for(const n in e)if(!T$e(e[n],t[n]))return!1;return!0}function Vhe(e){return t=>C$e(e,t)}function _jt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Sc:Fe(n)||c4(n)?n:Vhe(n),c.remove(f)),t&&c.insert(t),r&&(f=Vhe(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function wjt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Ejt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Hhe={};function xjt(e,t){const n=Hhe[t]||(Hhe[t]=xc(t));return Fe(e)?e.map(n):n(e)}function qee(e){return Fe(e)||ArrayBuffer.isView(e)?e:null}function Wee(e){return qee(e)||(ht(e)?e:null)}function Sjt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return qee(e).join(...n)}function Tjt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Wee(e).indexOf(...n)}function Cjt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Wee(e).lastIndexOf(...n)}function Ajt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Wee(e).slice(...n)}function Ijt(e,t,n){return vn(n)&&$e("Function argument passed to replace."),String(e).replace(t,n)}function kjt(e){return qee(e).slice().reverse()}function Rjt(e,t,n){return gZ(e||0,t||0,n||0)}function Njt(e,t){const n=qh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Djt(e,t){const n=qh(e,(t||this).context);return n?n.copy():void 0}function Pjt(e,t){const n=qh(e,(t||this).context);return n?n.domain():[]}function Ojt(e,t,n){const r=qh(e,(n||this).context);return r?Fe(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function $jt(e,t){const n=qh(e,(t||this).context);return n&&n.range?n.range():[]}function Mjt(e,t,n){const r=qh(e,(n||this).context);return r?r(t):void 0}function Ljt(e,t,n,r,i){e=qh(e,(i||this).context);const s=gOe(t,n);let o=e.domain(),a=o[0],u=Kn(o),l=ya;return u-a?l=iOe(e,a,u):e=(e.interpolator?pr("sequential")().interpolator(e.interpolator()):pr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Kn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Fjt(e,t,n){const r=qh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function jjt(e){let t=null;return function(n){return n?q2(n,t=t||GE(e)):e}}const A$e=e=>e.data;function I$e(e,t){const n=E$e.call(t,e);return n.root&&n.root.lookup||{}}function Bjt(e,t,n){const r=I$e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(A$e):void 0}function Ujt(e,t){const n=I$e(e,this)[t];return n?n.ancestors().map(A$e):void 0}const k$e=()=>typeof window<"u"&&window||null;function zjt(){const e=k$e();return e?e.screen:{}}function Vjt(){const e=k$e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Hjt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function R$e(e,t,n){if(!e)return[];const[r,i]=e,s=new ys().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return h3e(o,s,qjt(t))}function qjt(e){let t=null;if(e){const n=dt(e.marktype),r=dt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function Wjt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=dt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function Gjt(e){return dt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function Yjt(e,t,n){const{x:r,y:i,mark:s}=n,o=new ys().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),R$e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>Kjt(u.x,u.y,t))}function Kjt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const J2={random(){return Cc()},cumulativeNormal:m4,cumulativeLogNormal:MJ,cumulativeUniform:BJ,densityNormal:NJ,densityLogNormal:$J,densityUniform:jJ,quantileNormal:g4,quantileLogNormal:LJ,quantileUniform:UJ,sampleNormal:p4,sampleLogNormal:OJ,sampleUniform:FJ,isArray:Fe,isBoolean:Ry,isDate:d0,isDefined(e){return e!==void 0},isNumber:ar,isObject:mt,isRegExp:pDe,isString:ht,isTuple:c4,isValid(e){return e!=null&&e===e},toBoolean:mJ,toDate(e){return gJ(e)},toNumber:aa,toString:yJ,indexof:Tjt,join:Sjt,lastindexof:Cjt,replace:Ijt,reverse:kjt,slice:Ajt,flush:dDe,lerp:mDe,merge:vjt,pad:vDe,peek:Kn,pluck:xjt,span:Tk,inrange:nw,truncate:bDe,rgb:A0,lab:SO,hcl:TO,hsl:EO,luminance:RV,contrast:yjt,sequence:yl,format:Q8t,utcFormat:J8t,utcParse:ejt,utcOffset:PDe,utcSequence:MDe,timeFormat:x$e,timeParse:Z8t,timeOffset:DDe,timeSequence:$De,timeUnitSpecifier:wDe,monthFormat:tjt,monthAbbrevFormat:njt,dayFormat:rjt,dayAbbrevFormat:ijt,quarter:uDe,utcquarter:lDe,week:xDe,utcweek:CDe,dayofyear:EDe,utcdayofyear:TDe,warn:pjt,info:mjt,debug:gjt,extent(e){return wh(e)},inScope:hjt,intersect:R$e,clampRange:cDe,pinchDistance:wjt,pinchAngle:Ejt,screen:zjt,containerSize:Hjt,windowSize:Vjt,bandspace:Rjt,setdata:K8t,pathShape:jjt,panLinear:iDe,panLog:sDe,panPow:oDe,panSymlog:aDe,zoomLinear:lJ,zoomLog:cJ,zoomPow:m$,zoomSymlog:fJ,encode:X8t,modify:_jt,lassoAppend:Wjt,lassoPath:Gjt,intersectLasso:Yjt},Xjt=["view","item","group","xy","x","y"],Qjt="event.vega.",N$e="this.",Gee={},D$e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${nt(S$e+e)}]`,functions:Jjt,constants:y$e,visitors:Gee},NV=b$e(D$e);function Jjt(e){const t=v$e(e);Xjt.forEach(n=>t[n]=Qjt+n);for(const n in J2)t[n]=N$e+n;return gn(t,ujt(e,J2,Gee)),t}function ls(e,t,n){return arguments.length===1?J2[e]:(J2[e]=t,n&&(Gee[e]=n),NV&&(NV.functions[e]=N$e+e),this)}ls("bandwidth",Njt,Ha);ls("copy",Djt,Ha);ls("domain",Pjt,Ha);ls("range",$jt,Ha);ls("invert",Ojt,Ha);ls("scale",Mjt,Ha);ls("gradient",Ljt,Ha);ls("geoArea",ljt,Ha);ls("geoBounds",cjt,Ha);ls("geoCentroid",fjt,Ha);ls("geoShape",Fjt,Ha);ls("geoScale",djt,Ha);ls("indata",Y8t,ajt);ls("data",E$e,zee);ls("treePath",Bjt,zee);ls("treeAncestors",Ujt,zee);ls("vlSelectionTest",B8t,Uee);ls("vlSelectionIdTest",V8t,Uee);ls("vlSelectionResolve",q8t,Uee);ls("vlSelectionTuples",H8t);function xh(e,t){const n={};let r;try{e=ht(e)?e:nt(e)+"",r=jee(e)}catch{$e("Expression parse error: "+e)}r.visit(s=>{if(s.type!==c$e)return;const o=s.callee.name,a=D$e.visitors[o];a&&a(o,s.arguments,t,n)});const i=NV(r);return i.globals.forEach(s=>{const o=S$e+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:gn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function Zjt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const e9t=Vf(["rule"]),qhe=Vf(["group","image","rect"]);function t9t(e,t){let n="";return e9t[t]||(e.x2&&(e.x?(qhe[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(qhe[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Yee(e){return(e+"").toLowerCase()}function n9t(e){return Yee(e)==="operator"}function r9t(e){return Yee(e)==="collect"}function wT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function i9t(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var s9t={operator:(e,t)=>wT(e,["_"],t.code),parameter:(e,t)=>wT(e,["datum","_"],t.code),event:(e,t)=>wT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return wT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+nt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=t9t(r,n),i+="return m;",wT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(nt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),i9t(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function o9t(e){const t=this;n9t(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function a9t(e){const t=this;if(e.params){const n=t.get(e.id);n||$e("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function u9t(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Fe(i)?i.map(s=>Whe(s,n,t)):Whe(i,n,t)}return t}function Whe(e,t,n){if(!e||!mt(e))return e;for(let r=0,i=Ghe.length,s;r<i;++r)if(s=Ghe[r],Ft(e,s.key))return s.parse(e,t,n);return e}var Ghe=[{key:"$ref",parse:l9t},{key:"$key",parse:f9t},{key:"$expr",parse:c9t},{key:"$field",parse:d9t},{key:"$encode",parse:p9t},{key:"$compare",parse:h9t},{key:"$context",parse:m9t},{key:"$subflow",parse:g9t},{key:"$tupleid",parse:y9t}];function l9t(e,t){return t.get(e.$ref)||$e("Operator not defined: "+e.$ref)}function c9t(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Qu(t.parameterExpression(e.$expr),e.$fields))}function f9t(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=pJ(e.$key,e.$flat,t.expr.codegen))}function d9t(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=xc(e.$field,e.$name,t.expr.codegen))}function h9t(e,t){const n="c:"+e.$compare+"_"+e.$order,r=dt(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=dJ(r,e.$order,t.expr.codegen))}function p9t(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=Qu(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function m9t(e,t){return t}function g9t(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function y9t(){return Mt}function v9t(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&$e("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function b9t(e){var t=this,n=mt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||$e("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const _9t={skip:!0};function w9t(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function E9t(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],_9t)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Sc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function P$e(e,t,n,r){return new O$e(e,t,n,r)}function O$e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||s9t,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Yhe(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}O$e.prototype=Yhe.prototype={fork(){const e=new Yhe(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),r9t(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Yee(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:Zjt,parseOperator:o9t,parseOperatorParameters:a9t,parseParameters:u9t,parseStream:v9t,parseUpdate:b9t,getState:w9t,setState:E9t};function x9t(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),$$e(t,e.description()))}function $$e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function S9t(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const u9="default";function T9t(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:u9,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?ht(i)?i:i.user:u9,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return ht(r)||(i=r.item,r=r.user),DV(e,r&&r!==u9?r:i||r),i},{cursor:t})}function DV(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function L$(e,t){var n=e._runtime.data;return Ft(n,t)||$e("Unrecognized data set: "+t),n[t]}function C9t(e,t){return arguments.length<2?L$(this,e).values.value:U4.call(this,e,Rb().remove(Sc).insert(t))}function U4(e,t){nPe(t)||$e("Second argument to changes must be a changeset.");const n=L$(this,e);return n.modified=!0,this.pulse(n.input,t)}function A9t(e,t){return U4.call(this,e,Rb().insert(t))}function I9t(e,t){return U4.call(this,e,Rb().remove(t))}function M$e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function L$e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function z4(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function k9t(e){var t=z4(e),n=M$e(e),r=L$e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function R9t(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=z4(e),o=t.changedTouches?t.changedTouches[0]:t,s=P4(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=N9t(e,n,s),t}function N9t(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;ht(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:va(e),item:va(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Khe="view",D9t="timer",P9t="window",O9t={trap:!1};function $9t(e){const t=gn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Fe(r[s])&&(r[s]=Vf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function F$e(e,t,n,r){e._eventListeners.push({type:n,sources:dt(t),handler:r})}function M9t(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function GN(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||mt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function L9t(e,t,n){var r=this,i=new h4(n),s=function(l,c){r.runAsync(null,()=>{e===Khe&&M9t(r,t)&&l.preventDefault(),i.receive(R9t(r,l,c))})},o;if(e===D9t)GN(r,"timer",t)&&r.timer(s,t);else if(e===Khe)GN(r,"view",t)&&r.addEventListener(t,s,O9t);else if(e===P9t?GN(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&GN(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);F$e(r,o,t,s)}return i}function Xhe(e){return e.item}function Qhe(e){return e.item.mark.source}function Jhe(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function F9t(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Xhe),Qhe,Jhe(e)),this.on(this.events("view","pointerout",Xhe),Qhe,Jhe(t)),this}function j9t(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function xl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const B9t="vega-bind",U9t="vega-bind-name",z9t="vega-bind-radio";function V9t(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=hJ(r.debounce,i.update))),(r.input==null&&r.element?H9t:W9t)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function H9t(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),F$e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(q9t(i))}}function q9t(e){return typeof Event<"u"?new Event(e):{type:e}}function W9t(e,t,n,r){const i=r.signal(n.signal),s=xl("div",{class:B9t}),o=n.input==="radio"?s:s.appendChild(xl("label"));o.appendChild(xl("span",{class:U9t},n.name||n.signal)),t.appendChild(s);let a=G9t;switch(n.input){case"checkbox":a=Y9t;break;case"select":a=K9t;break;case"radio":a=X9t;break;case"range":a=Q9t;break}a(e,o,n,i)}function G9t(e,t,n,r){const i=xl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function Y9t(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=xl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function K9t(e,t,n,r){const i=xl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};F$(o,r)&&(u.selected=!0),i.appendChild(xl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(F$(n.options[a],o)){i.selectedIndex=a;return}}}function X9t(e,t,n,r){const i=xl("span",{class:z9t}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};F$(o,r)&&(u.checked=!0);const l=xl("input",u);l.addEventListener("change",()=>e.update(o));const c=xl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)F$(a[l].value,o)&&(a[l].checked=!0)}}function Q9t(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||C0(s,i,100),a=xl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=xl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function F$(e,t){return e===t||e+""==t+""}function j$e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,M$e(e),L$e(e),z4(e),i,s).background(e.background())}function Kee(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function J9t(e,t,n,r){const i=new r(e.loader(),Kee(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,z4(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Z9t(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=O4(r);e=n._el=e?l9(n,e,!0):null,x9t(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||Uk,a=e?s.renderer:s.headless;return n._renderer=a?j$e(n,n._renderer,e,a):null,n._handler=J9t(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=l9(n,t,!0):e.appendChild(xl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=l9(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{V9t(n,u.element||t,u)})),n}function l9(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const ET=e=>+e||0,eBt=e=>({top:e,bottom:e,left:e,right:e});function Zhe(e){return mt(e)?{top:ET(e.top),bottom:ET(e.bottom),left:ET(e.left),right:ET(e.right)}:eBt(ET(e))}async function Xee(e,t,n,r){const i=O4(t),s=i&&i.headless;return s||$e("Unrecognized renderer type: "+t),await e.runAsync(),j$e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function tBt(e,t){e!==zg.Canvas&&e!==zg.SVG&&e!==zg.PNG&&$e("Unrecognized image type: "+e);const n=await Xee(this,e,t);return e===zg.SVG?nBt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function nBt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function rBt(e,t){return(await Xee(this,zg.Canvas,e,t)).canvas()}async function iBt(e){return(await Xee(this,zg.SVG,e)).svg()}function sBt(e,t,n){return P$e(e,VE,J2,n).parse(t)}function oBt(e){var t=this._runtime.scales;return Ft(t,e)||$e("Unrecognized scale or projection: "+e),t[e].value}var B$e="width",U$e="height",Qee="padding",epe={skip:!0};function z$e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Qee?r.left+r.right:0)}function V$e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===Qee?r.top+r.bottom:0)}function aBt(e){var t=e._signals,n=t[B$e],r=t[U$e],i=t[Qee];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=z$e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=V$e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function uBt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(B$e,n,epe),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(U$e,r,epe),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function lBt(e){return this._runtime.getState(e||{data:cBt,signals:fBt,recurse:!0})}function cBt(e,t){return t.modified&&Fe(t.input.value)&&!e.startsWith("_:vega:_")}function fBt(e,t){return!(e==="parent"||t instanceof VE.proxy)}function dBt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function hBt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(nst(n,t))}function pBt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",mBt(r))}function mBt(e){return e==null?"":Fe(e)?H$e(e):mt(e)&&!d0(e)?gBt(e):e+""}function gBt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Fe(n)?H$e(n):q$e(n))}).join(`
`)}function H$e(e){return"["+e.map(q$e).join(", ")+"]"}function q$e(e){return Fe(e)?"[]":mt(e)&&!d0(e)?"{}":e}function yBt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function W$e(e,t){const n=this;if(t=t||{},jw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=gn({},e.locale,t.locale);n.locale(WDe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||zg.Canvas,n._scenegraph=new BOe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||pBt,n._redraw=!0,n._handler=new Uk().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=$9t(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=sBt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:gn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=z$e(n,n._width),n._viewHeight=V$e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,aBt(n),S9t(n),T9t(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function YN(e,t){return Ft(e._signals,t)?e._signals[t]:$e("Unrecognized signal name: "+nt(t))}function G$e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function tpe(e,t,n,r){let i=G$e(n,r);return i||(i=Kee(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function npe(e,t,n){const r=G$e(t,n);return r&&t._targets.remove(r),e}lt(W$e,jw,{async evaluate(e,t,n){if(await jw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,k9t(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&rP(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&$$e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=YN(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Zhe(e)):Zhe(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(O4(e)||$e("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(jw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(YN(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:uBt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Kee(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return tpe(this,e,YN(this,e),t)},removeSignalListener(e,t){return npe(this,YN(this,e),t)},addDataListener(e,t){return tpe(this,e,L$(this,e).values,t)},removeDataListener(e,t){return npe(this,L$(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=DV(this,null);this._globalCursor=!!e,t&&DV(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:hBt,events:L9t,finalize:j9t,hover:F9t,data:C9t,change:U4,insert:A9t,remove:I9t,scale:oBt,initialize:Z9t,toImageURL:tBt,toCanvas:rBt,toSVG:iBt,getState:lBt,setState:dBt,_watchPixelRatio:yBt});const vBt="view",j$="[",B$="]",Y$e="{",K$e="}",bBt=":",X$e=",",_Bt="@",wBt=">",EBt=/[[\]{}]/,xBt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Q$e,J$e;function Dy(e,t,n){return Q$e=t||vBt,J$e=n||xBt,Z$e(e.trim()).map(PV)}function SBt(e){return J$e[e]}function yA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function Z$e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=yA(e,i,X$e,j$+Y$e,B$+K$e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function PV(e){return e[0]==="["?TBt(e):CBt(e)}function TBt(e){const t=e.length;let n=1,r;if(n=yA(e,n,B$,j$,B$),n===t)throw"Empty between selector: "+e;if(r=Z$e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==wBt)throw"Expected '>' after between selector: "+e;r=r.map(PV);const i=PV(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function CBt(e){const t={source:Q$e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===K$e){if(a=e.lastIndexOf(Y$e),a>=0){try{r=ABt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===_Bt&&(i=++a),u=yA(e,a,bBt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=yA(e,a,j$),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=yA(e,a,B$),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==j$)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||EBt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):SBt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function ABt(e){const t=e.split(X$e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function IBt(e){return mt(e)?e:{type:e||"pad"}}const xT=e=>+e||0,kBt=e=>({top:e,bottom:e,left:e,right:e});function RBt(e){return mt(e)?e.signal?e:{top:xT(e.top),bottom:xT(e.bottom),left:xT(e.left),right:xT(e.right)}:kBt(xT(e))}const eo=e=>mt(e)&&!Fe(e)?gn({},e):{value:e};function rpe(e,t,n,r){return n!=null?(mt(n)&&!Fe(n)||Fe(n)&&n.length&&mt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Po(e,t,n){for(const r in t)rpe(e,r,t[r]);for(const r in n)rpe(e,r,n[r],"update")}function vS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=gn(e[r]||{},t[r]));return e}function D_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Jee="mark",Zee="frame",ete="scope",NBt="axis",DBt="axis-domain",PBt="axis-grid",OBt="axis-label",$Bt="axis-tick",MBt="axis-title",LBt="legend",FBt="legend-band",jBt="legend-entry",BBt="legend-gradient",eMe="legend-label",UBt="legend-symbol",zBt="legend-title",VBt="title",HBt="title-text",qBt="title-subtitle";function WBt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!D_(u,e)&&c9(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Zee?i.group:n===Jee?gn({},i.mark,i[t]):null;for(u in c)l=D_(u,e)||(u==="fill"||u==="stroke")&&(D_("fill",e)||D_("stroke",e)),l||c9(s,u,c[u]);dt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)D_(h,e)||c9(s,h,d[h])}),e=gn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=gn(o,e.enter),a&&(e.update=gn(a,e.update)),e}function c9(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const tMe=e=>ht(e)?nt(e):e.signal?`(${e.signal})`:nMe(e);function V4(e){if(e.gradient!=null)return YBt(e);let t=e.signal?`(${e.signal})`:e.color?GBt(e.color):e.field!=null?nMe(e.field):e.value!==void 0?nt(e.value):void 0;return e.scale!=null&&(t=KBt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${yP(e.exponent)})`),e.mult!=null&&(t+=`*${yP(e.mult)}`),e.offset!=null&&(t+=`+${yP(e.offset)}`),e.round&&(t=`round(${t})`),t}const KN=(e,t,n,r)=>`(${e}(${[t,n,r].map(V4).join(",")})+'')`;function GBt(e){return e.c?KN("hcl",e.h,e.c,e.l):e.h||e.s?KN("hsl",e.h,e.s,e.l):e.l||e.a?KN("lab",e.l,e.a,e.b):e.r||e.g||e.b?KN("rgb",e.r,e.g,e.b):null}function YBt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:nt(n));for(;t.length&&Kn(t)==null;)t.pop();return t.unshift(tMe(e.gradient)),`gradient(${t.join(",")})`}function yP(e){return mt(e)?"("+V4(e)+")":e}function nMe(e){return rMe(mt(e)?e:{datum:e})}function rMe(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):$e("Invalid field reference: "+nt(e));return e.signal||(r=ht(r)?zh(r).map(nt).join("]["):rMe(r)),t+"["+r+"]"}function KBt(e,t){const n=tMe(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+yP(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function XBt(e){let t="";return e.forEach(n=>{const r=V4(n);t+=n.test?`(${n.test})?${r}:`:r}),Kn(t)===":"&&(t+="null"),t}function iMe(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=WBt(e,t,n,r,i.config);for(const a in e)o[a]=QBt(e[a],t,s,i);return s}function QBt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=ZBt(JBt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function JBt(e){return Fe(e)?XBt(e):V4(e)}function ZBt(e,t,n,r){const i=xh(e,t);return i.$fields.forEach(s=>r[s]=1),gn(n,i.$params),i.$expr}const eUt="outer",tUt=["value","update","init","react","bind"];function ipe(e,t){$e(e+' for "outer" push: '+nt(t))}function sMe(e,t){const n=e.name;if(e.push===eUt)t.signals[n]||ipe("No prior signal definition",n),tUt.forEach(r=>{e[r]!==void 0&&ipe("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function OV(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function H4(e,t,n,r){return new OV(e,t,n,r)}function U$(e,t){return H4("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function Z2(e,t){return t?{$field:e,$name:t}:{$field:e}}const $V=Z2("key");function spe(e,t){return{$compare:e,$order:t}}function nUt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const rUt="ascending",iUt="descending";function sUt(e){return mt(e)?(e.order===iUt?"-":"+")+q4(e.op,e.field):""}function q4(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const tte="scope",MV="view";function Ns(e){return e&&e.signal}function oUt(e){return e&&e.expr}function vP(e){if(Ns(e))return!0;if(mt(e)){for(const t in e)if(vP(e[t]))return!0}return!1}function af(e,t){return e??t}function p1(e){return e&&e.signal||e}const ope="timer";function eI(e,t){return(e.merge?uUt:e.stream?lUt:e.type?cUt:$e("Invalid stream specification: "+nt(e)))(e,t)}function aUt(e){return e===tte?MV:e||MV}function uUt(e,t){const n=e.merge.map(i=>eI(i,t)),r=nte({merge:n},e,t);return t.addStream(r).id}function lUt(e,t){const n=eI(e.stream,t),r=nte({stream:n},e,t);return t.addStream(r).id}function cUt(e,t){let n;e.type===ope?(n=t.event(ope,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(aUt(e.source),e.type);const r=nte({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function nte(e,t,n){let r=t.between;return r&&(r.length!==2&&$e('Stream "between" parameter must have 2 entries: '+nt(t)),e.between=[eI(r[0],n),eI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(fUt(t.marktype,t.markname,t.markrole)),t.source===tte&&r.push("inScope(event.item)"),r.length&&(e.filter=xh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function fUt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const dUt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function hUt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||$e("Signal update missing events specification."),ht(s)&&(s=Dy(s,t.isSubscope()?tte:MV)),s=dt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[mUt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&$e("Signal encode and update are mutually exclusive."),o="encode(item(),"+nt(r)+")"),i.update=ht(o)?xh(o,t):o.expr!=null?xh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:dUt,$params:{$value:t.signalRef(o.signal)}}:$e("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(gn(pUt(u,t),i)))}function pUt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):eI(e,t)}}function mUt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function gUt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?$e("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=xh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>hUt(i,t,n.id))}const Br=e=>(t,n,r)=>H4(e,n,t||void 0,r),oMe=Br("aggregate"),yUt=Br("axisticks"),aMe=Br("bound"),Qf=Br("collect"),ape=Br("compare"),vUt=Br("datajoin"),uMe=Br("encode"),bUt=Br("expression"),_Ut=Br("facet"),wUt=Br("field"),EUt=Br("key"),xUt=Br("legendentries"),SUt=Br("load"),TUt=Br("mark"),CUt=Br("multiextent"),AUt=Br("multivalues"),IUt=Br("overlap"),kUt=Br("params"),lMe=Br("prefacet"),RUt=Br("projection"),NUt=Br("proxy"),DUt=Br("relay"),cMe=Br("render"),PUt=Br("scale"),Pb=Br("sieve"),OUt=Br("sortitems"),fMe=Br("viewlayout"),$Ut=Br("values");let MUt=0;const dMe={min:"min",max:"max",count:"sum"};function LUt(e,t){const n=e.type||"linear";JPe(n)||$e("Unrecognized scale type: "+nt(n)),t.addScale(e.name,{type:n,domain:void 0})}function FUt(e,t){const n=t.getScale(e.name).params;let r;n.domain=hMe(e.domain,e,t),e.range!=null&&(n.range=mMe(e,t,n)),e.interpolate!=null&&YUt(e.interpolate,n),e.nice!=null&&(n.nice=GUt(e.nice,t)),e.bins!=null&&(n.bins=WUt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=fc(e[r],t))}function fc(e,t){return mt(e)?e.signal?t.signalRef(e.signal):$e("Unsupported object: "+nt(e)):e}function bP(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>fc(n,t))}function W4(e){$e("Can not find data set: "+nt(e))}function hMe(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&$e("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Fe(e)?jUt:e.fields?UUt:BUt)(e,t,n)}function jUt(e,t,n){return e.map(r=>fc(r,n))}function BUt(e,t,n){const r=n.getData(e.data);return r||W4(e.data),WE(t.type)?r.valuesRef(n,e.field,pMe(e.sort,!1)):tOe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function UUt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=ht(o)?{data:r,field:o}:Fe(o)||o.signal?zUt(o,n):o,s.push(o),s),[]);return(WE(t.type)?VUt:tOe(t.type)?HUt:qUt)(e,n,i)}function zUt(e,t){const n="_:vega:_"+MUt++,r=Qf({});if(Fe(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+nt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Pb({})]),{data:n,field:"data"}}function VUt(e,t,n){const r=pMe(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||W4(l.data),c.countsRef(t,l.field,r)}),a={groupby:$V,pulse:o};r&&(i=r.op||"count",s=r.field?q4(i,r.field):"count",a.ops=[dMe[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(oMe(a));const u=t.add(Qf({pulse:$t(i)}));return s=t.add($Ut({field:$V,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function pMe(e,t){return e&&(!e.field&&!e.op?mt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?$e("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!dMe[e.op]&&$e("Multiple domain scales can not be sorted using "+e.op)),e}function HUt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||W4(i.data),s.domainRef(t,i.field)});return $t(t.add(AUt({values:r})))}function qUt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||W4(i.data),s.extentRef(t,i.field)});return $t(t.add(CUt({extents:r})))}function WUt(e,t){return e.signal||Fe(e)?bP(e,t):t.objectProperty(e)}function GUt(e,t){return e.signal?t.signalRef(e.signal):mt(e)?{interval:fc(e.interval),step:fc(e.step)}:fc(e)}function YUt(e,t){t.interpolate=fc(e.type||e),e.gamma!=null&&(t.interpolateGamma=fc(e.gamma))}function mMe(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(ht(i)){if(r&&Ft(r,i))return e=gn({},e,{range:r[i]}),mMe(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=WE(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:$e("Unrecognized scale range value: "+nt(i))}else if(i.scheme){n.scheme=Fe(i.scheme)?bP(i.scheme,t):fc(i.scheme,t),i.extent&&(n.schemeExtent=bP(i.extent,t)),i.count&&(n.schemeCount=fc(i.count,t));return}else if(i.step){n.rangeStep=fc(i.step,t);return}else{if(WE(e.type)&&!Fe(i))return hMe(i,e,t);Fe(i)||$e("Unsupported range type: "+nt(i))}return i.map(s=>(Fe(s)?bP:fc)(s,t))}function KUt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=LV(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=LV(n[i],i,t));t.addProjection(e.name,r)}function LV(e,t,n){return Fe(e)?e.map(r=>LV(r,t,n)):mt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:$e("Unsupported parameter object: "+nt(e)):e}const Jf="top",bS="left",_S="right",Q0="bottom",gMe="center",XUt="vertical",QUt="start",JUt="middle",ZUt="end",FV="index",rte="label",e7t="offset",QE="perc",t7t="perc2",pc="value",Wk="guide-label",ite="guide-title",n7t="group-title",r7t="group-subtitle",upe="symbol",_P="gradient",jV="discrete",BV="size",i7t="shape",s7t="fill",o7t="stroke",a7t="strokeWidth",u7t="strokeDash",l7t="opacity",ste=[BV,i7t,s7t,o7t,a7t,u7t,l7t],Gk={name:1,style:1,interactive:1},Zn={value:0},mc={value:1},G4="group",yMe="rect",ote="rule",c7t="symbol",Ob="text";function tI(e){return e.type=G4,e.interactive=e.interactive||!1,e}function Ju(e,t){const n=(r,i)=>af(e[r],af(t[r],i));return n.isVertical=r=>XUt===af(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>af(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>af(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>af(e.columns,af(t.columns,+n.isVertical(!0))),n}function vMe(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function f7t(e,t,n){const r=t.config.style[n];return r&&r[e]}function Y4(e,t,n){return`item.anchor === '${QUt}' ? ${e} : item.anchor === '${ZUt}' ? ${t} : ${n}`}const ate=Y4(nt(bS),nt(_S),nt(gMe));function d7t(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},mt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function bMe(e,t){return t?e?mt(e)?Object.assign({},e,{offset:bMe(e.offset,t)}):{value:e,offset:t}:t:e}function Ll(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=vS(e.encode,t,Gk)):e.interactive=!1,e}function h7t(e,t,n,r){const i=Ju(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:Zn,x:Zn,y:Zn,width:eo(f),height:eo(d)},update:gn({},u,{opacity:mc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Zn}};return Po(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Ll({type:yMe,role:BBt,encode:h},r)}function p7t(e,t,n,r,i){const s=Ju(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Zn,fill:{scale:t,field:pc}};p[l]={signal:h+"datum."+QE,mult:u},p[c]=Zn,p[f]={signal:h+"datum."+t7t,mult:u},p[d]=eo(a);const m={enter:p,update:gn({},p,{opacity:mc}),exit:{opacity:Zn}};return Po(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Ll({type:yMe,role:FBt,key:pc,from:i,encode:m},r)}const m7t=`datum.${QE}<=0?"${bS}":datum.${QE}>=1?"${_S}":"${gMe}"`,g7t=`datum.${QE}<=0?"${Q0}":datum.${QE}>=1?"${Jf}":"${JUt}"`;function lpe(e,t,n,r){const i=Ju(e,t),s=i.isVertical(),o=eo(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:Zn},update:c={opacity:mc,text:{field:rte}},exit:{opacity:Zn}};return Po(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:af(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:g7t},f="y",d="x",h="1-"):(l.align=c.align={signal:m7t},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+QE,mult:a},l[d]=c[d]=o,o.offset=af(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+FV}:void 0,Ll({type:Ob,role:eMe,style:Wk,key:pc,from:r,encode:p,overlap:u},n)}function y7t(e,t,n,r,i){const s=Ju(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${e7t} : datum.${BV}`,h=l?eo(l):{field:BV},p=`datum.${FV}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:Zn,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:mc,x:y.x,y:y.y},exit:{opacity:Zn}};let x=null,T=null;e.fill||(x=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),Po(g,{fill:s("symbolFillColor",x),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),ste.forEach(R=>{e[R]&&(v[R]=y[R]={scale:e[R],field:pc})});const S=Ll({type:c7t,role:UBt,key:pc,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=eo(c);C.offset=s("labelOffset"),g={enter:y={opacity:Zn,x:{signal:d,offset:C},y:h},update:v={opacity:mc,text:{field:rte},x:y.x,y:y.y},exit:{opacity:Zn}},Po(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Ll({type:Ob,role:eMe,style:Wk,key:pc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Zn,height:l?eo(l):Zn,opacity:Zn},exit:{opacity:Zn},update:v={opacity:mc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:FV}},tI({role:ete,from:r,encode:vS(g,o,Gk),marks:[S,A],name:u,interactive:a,sort:w})}function v7t(e,t){const n=Ju(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const ute='item.orient === "left"',lte='item.orient === "right"',K4=`(${ute} || ${lte})`,b7t=`datum.vgrad && ${K4}`,_7t=Y4('"top"','"bottom"','"middle"'),w7t=Y4('"right"','"left"','"center"'),E7t=`datum.vgrad && ${lte} ? (${w7t}) : (${K4} && !(datum.vgrad && ${ute})) ? "left" : ${ate}`,x7t=`item._anchor || (${K4} ? "middle" : "start")`,S7t=`${b7t} ? (${ute} ? -90 : 90) : 0`,T7t=`${K4} ? (datum.vgrad ? (${lte} ? "bottom" : "top") : ${_7t}) : "top"`;function C7t(e,t,n,r){const i=Ju(e,t),s={enter:{opacity:Zn},update:{opacity:mc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Zn}};return Po(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:x7t},angle:{signal:S7t},align:{signal:E7t},baseline:{signal:T7t},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Ll({type:Ob,role:zBt,style:ite,from:r,encode:s},n)}function A7t(e,t){let n;return mt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+cpe(e.path)+")":e.sphere&&(n="geoShape("+cpe(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function cpe(e){return mt(e)&&e.signal?e.signal:nt(e)}function _Me(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===G4?ete:t||Jee}function I7t(e){return{marktype:e.type,name:e.name||void 0,role:e.role||_Me(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function k7t(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function cte(e,t){const n=sPe(e.type);n||$e("Unrecognized transform type: "+nt(e.type));const r=H4(n.type.toLowerCase(),null,wMe(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function wMe(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=R7t(o,t,n)}return r}function R7t(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return N7t(e,t,n);if(i===void 0){e.required&&$e("Missing required "+nt(t.type)+" parameter: "+nt(e.name));return}else{if(r==="param")return D7t(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Ns(i)?i.map(s=>fpe(e,s,n)):fpe(e,i,n)}function fpe(e,t,n){const r=e.type;if(Ns(t))return hpe(r)?$e("Expression references can not be signals."):f9(r)?n.fieldRef(t):ppe(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||f9(r);return i&&P7t(t)?n.exprRef(t.expr,t.as):i&&O7t(t)?Z2(t.field,t.as):hpe(r)?xh(t,n):$7t(r)?$t(n.getData(t).values):f9(r)?Z2(t):ppe(r)?n.compareRef(t):t}}function N7t(e,t,n){return ht(t.from)||$e('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function D7t(e,t,n){const r=t[e.name];return e.array?(Fe(r)||$e("Expected an array of sub-parameters. Instead: "+nt(r)),r.map(i=>dpe(e,i,n))):dpe(e,r,n)}function dpe(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||$e("Unsupported parameter: "+nt(t));const s=gn(wMe(i,t,n),i.key);return $t(n.add(kUt(s)))}const P7t=e=>e&&e.expr,O7t=e=>e&&e.field,$7t=e=>e==="data",hpe=e=>e==="expr",f9=e=>e==="field",ppe=e=>e==="compare";function M7t(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||$e("Only group marks can be faceted."),r.field!=null?o=a=wP(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=cte(gn({type:"aggregate",groupby:dt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=wP(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(Qf(null,[{}]))),o||(o=wP(e,n)),{key:i,pulse:o,parent:a}}function wP(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function J1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}J1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new J1(e,s,i,r,o)};function EMe(e){return ht(e)?e:null}function mpe(e,t,n){const r=q4(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function ST(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=sUt(s);let l=EMe(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:$V,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(H4(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}J1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=EMe(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&mpe(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&mpe(e,u,n),a=e.add(oMe(u)),o=e.add(Qf({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return ST(e,this,"extent","extent",t,!1)},domainRef(e,t){return ST(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return ST(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return ST(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return ST(e,this,"indata","tupleindex",t,!0,!0)}};function L7t(e,t,n){const r=e.from.facet,i=r.name,s=wP(r,t);let o;r.name||$e("Facet must have a name: "+nt(r)),r.data||$e("Facet must reference a data set: "+nt(r)),r.field?o=t.add(lMe({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(_Ut({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):$e("Facet must specify groupby or field: "+nt(r));const a=t.fork(),u=a.add(Qf()),l=a.add(Pb({pulse:$t(u)}));a.addData(i,new J1(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function F7t(e,t,n){const r=t.add(lMe({pulse:n.pulse})),i=t.fork();i.add(Pb()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function xMe(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(U$()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=xh(l,t);u.update=c.$expr,u.params=c.$params}function X4(e,t){const n=_Me(e),r=e.type===G4,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===ete||n===Zee,a,u,l,c,f,d,h;const p=n===Jee||o||i,m=M7t(e.from,r,t);u=t.add(vUt({key:m.key||(e.key?Z2(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(Qf({pulse:g})),u=t.add(TUt({markdef:I7t(e),interactive:k7t(e.interactive,t),clip:A7t(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add(uMe(iMe(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const S=cte(T,t),C=S.metadata;(C.generates||C.changes)&&$e("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),S.params.pulse=$t(u),t.add(u=S)}),e.sort&&(u=t.add(OUt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(fMe({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(aMe({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?L7t(e,t,m):p?F7t(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=j7t(s,h,t));const w=t.add(cMe({pulse:h})),x=t.add(Pb({pulse:$t(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new J1(t,l,w,x)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&$e("Marks only support modify triggers."),xMe(T,t,f)}))}function j7t(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Ns(s)?n.signalRef(s.signal):s,method:Ns(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Ns(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(IUt(o)))}function B7t(e,t){const n=t.config.legend,r=e.encode||{},i=Ju(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;ste.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||$e("Missing valid scale for legend.");const p=U7t(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(Qf(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(xUt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===_P?(h=[h7t(e,c,n,r.gradient),lpe(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${p1(i.gradientLength())})/100))`)):p===jV?h=[p7t(e,c,n,r.gradient,v),lpe(e,n,r.labels,v)]:(f=v7t(e,n),h=[y7t(e,n,r,v,p1(f.columns))],d.size=H7t(e,t,h[0].marks)),h=[tI({role:jBt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(C7t(e,n,r.title,g)),X4(tI({role:LBt,from:g,encode:vS(V7t(i,e,n),s,Gk),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function U7t(e,t){let n=e.type||upe;return!e.type&&z7t(e)===1&&(e.fill||e.stroke)&&(n=wZ(t)?_P:eV(t)?jV:upe),n!==_P?n:eV(t)?jV:_P}function z7t(e){return ste.reduce((t,n)=>t+(e[n]?1:0),0)}function V7t(e,t,n){const r={enter:{},update:{}};return Po(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function H7t(e,t,n){const r=p1(gpe("size",e,n)),i=p1(gpe("strokeWidth",e,n)),s=p1(q7t(n[1].encode,t,Wk));return xh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function gpe(e,t,n){return t[e]?`scale("${t[e]}",datum)`:vMe(e,n[0].encode)}function q7t(e,t,n){return vMe("fontSize",e)||f7t("fontSize",t,n)}const W7t=`item.orient==="${bS}"?-90:item.orient==="${_S}"?90:0`;function G7t(e,t){e=ht(e)?{text:e}:e;const n=Ju(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(Qf(null,[l])));return u.push(X7t(e,n,Y7t(e),c)),e.subtitle&&u.push(Q7t(e,n,r.subtitle,c)),X4(tI({role:VBt,from:c,encode:K7t(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function Y7t(e){const t=e.encode;return t&&t.title||gn({name:e.name,interactive:e.interactive,style:e.style},t)}function K7t(e,t){const n={enter:{},update:{}};return Po(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:ate},angle:{signal:W7t},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),vS(n,t,Gk)}function X7t(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Po(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ll({type:Ob,role:HBt,style:n7t,from:r,encode:o},n)}function Q7t(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Po(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Ll({type:Ob,role:qBt,style:r7t,from:r,encode:o},n)}function J7t(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(cte(r,t))}),e.on&&e.on.forEach(r=>{xMe(r,t,e.name)}),t.addDataPipeline(e.name,Z7t(e,t,n))}function Z7t(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Ns(e.values)||vP(e.format)?(r.push(ype(t,e)),r.push(i=Ky())):r.push(i=Ky({$ingest:e.values,$format:e.format})):e.url?vP(e.url)||vP(e.format)?(r.push(ype(t,e)),r.push(i=Ky())):r.push(i=Ky({$request:e.url,$format:e.format})):e.source&&(i=a=dt(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=Ky()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=DUt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,Ky())),i||r.push(Ky()),r.push(Pb({})),r}function Ky(e){const t=Qf({},e);return t.metadata={source:!0},t}function ype(e,t){return SUt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const SMe=e=>e===Q0||e===Jf,Q4=(e,t,n)=>Ns(e)?rzt(e.signal,t,n):e===bS||e===Jf?t:n,to=(e,t,n)=>Ns(e)?tzt(e.signal,t,n):SMe(e)?t:n,Pf=(e,t,n)=>Ns(e)?nzt(e.signal,t,n):SMe(e)?n:t,TMe=(e,t,n)=>Ns(e)?izt(e.signal,t,n):e===Jf?{value:t}:{value:n},ezt=(e,t,n)=>Ns(e)?szt(e.signal,t,n):e===_S?{value:t}:{value:n},tzt=(e,t,n)=>CMe(`${e} === '${Jf}' || ${e} === '${Q0}'`,t,n),nzt=(e,t,n)=>CMe(`${e} !== '${Jf}' && ${e} !== '${Q0}'`,t,n),rzt=(e,t,n)=>fte(`${e} === '${bS}' || ${e} === '${Jf}'`,t,n),izt=(e,t,n)=>fte(`${e} === '${Jf}'`,t,n),szt=(e,t,n)=>fte(`${e} === '${_S}'`,t,n),CMe=(e,t,n)=>(t=t!=null?eo(t):t,n=n!=null?eo(n):n,vpe(t)&&vpe(n)?(t=t?t.signal||nt(t.value):null,n=n?n.signal||nt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[gn({test:e},t)].concat(n||[])),vpe=e=>e==null||Object.keys(e).length===1,fte=(e,t,n)=>({signal:`${e} ? (${sw(t)}) : (${sw(n)})`}),ozt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${bS}' ? (${sw(r)}) : `:"")+(n!=null?`${e} === '${Q0}' ? (${sw(n)}) : `:"")+(i!=null?`${e} === '${_S}' ? (${sw(i)}) : `:"")+(t!=null?`${e} === '${Jf}' ? (${sw(t)}) : `:"")+"(null)"}),sw=e=>Ns(e)?e.signal:e==null?null:nt(e),azt=(e,t)=>t===0?0:Ns(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Bw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function m_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[ite][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Wk][i]}return null}function bpe(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function uzt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Ns(o)){const f=bpe([n.axisX,n.axisY]),d=bpe([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=to(o,m_(l,n.axisX,i,r),m_(l,n.axisY,i,r));u={};for(l of d)u[l]=ozt(o.signal,m_(l,n.axisTop,i,r),m_(l,n.axisBottom,i,r),m_(l,n.axisLeft,i,r),m_(l,n.axisRight,i,r))}else a=o===Jf||o===Q0?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?gn({},i,a,u,s):i}function lzt(e,t,n,r){const i=Ju(e,t),s=e.orient;let o,a;const u={enter:o={opacity:Zn},update:a={opacity:mc},exit:{opacity:Zn}};Po(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=_pe(e,0),c=_pe(e,1);return o.x=a.x=to(s,l,Zn),o.x2=a.x2=to(s,c),o.y=a.y=Pf(s,l,Zn),o.y2=a.y2=Pf(s,c),Ll({type:ote,role:DBt,from:r,encode:u},n)}function _pe(e,t){return{scale:e.scale,range:t}}function czt(e,t,n,r,i){const s=Ju(e,t),o=e.orient,a=e.gridScale,u=Q4(o,1,-1),l=fzt(e.offset,u);let c,f,d;const h={enter:c={opacity:Zn},update:d={opacity:mc},exit:f={opacity:Zn}};Po(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:pc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=to(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:gn(m,{mult:u,offset:l});return c.x=d.x=to(o,p,g),c.y=d.y=Pf(o,p,g),c.x2=d.x2=Pf(o,y),c.y2=d.y2=to(o,y),f.x=to(o,p),f.y=Pf(o,p),Ll({type:ote,role:PBt,key:pc,from:r,encode:h},n)}function fzt(e,t){if(t!==1)if(!mt(e))e=Ns(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=gn({},e);for(;n.mult!=null;)if(mt(n.mult))n=n.mult=gn({},n.mult);else return n.mult=Ns(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function dzt(e,t,n,r,i,s){const o=Ju(e,t),a=e.orient,u=Q4(a,-1,1);let l,c,f;const d={enter:l={opacity:Zn},update:f={opacity:mc},exit:c={opacity:Zn}};Po(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=eo(i);h.mult=u;const p={scale:e.scale,field:pc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=to(a,Zn,p),f.y2=l.y2=to(a,h),c.x=to(a,p),f.x=l.x=Pf(a,Zn,p),f.x2=l.x2=Pf(a,h),c.y=Pf(a,p),Ll({type:ote,role:$Bt,key:pc,from:r,encode:d},n)}function d9(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function hzt(e,t,n,r,i,s){const o=Ju(e,t),a=e.orient,u=e.scale,l=Q4(a,-1,1),c=p1(o("labelFlush")),f=p1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=eo(i);g.mult=l,g.offset=eo(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:pc,band:.5,offset:bMe(s.offset,o("labelOffset"))},v=to(a,p?d9(u,c,'"left"','"right"','"center"'):{value:"center"},ezt(a,"left","right")),b=to(a,TMe(a,"bottom","top"),p?d9(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=d9(u,c,`-(${f})`,f,0);p=p&&f;const x={opacity:Zn,x:to(a,y,g),y:Pf(a,y,g)},T={enter:x,update:m={opacity:mc,text:{field:rte},x:x.x,y:x.y,align:v,baseline:b},exit:{opacity:Zn,x:x.x,y:x.y}};Po(T,{dx:!d&&p?to(a,w):null,dy:!h&&p?Pf(a,w):null}),Po(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let C=o("labelOverlap");return C=C||S?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=Bw(m.align,v)),m.baseline!==b&&(m.baseline=Bw(m.baseline,b)),Ll({type:Ob,role:OBt,style:Wk,key:pc,from:r,encode:T,overlap:C},n)}function pzt(e,t,n,r){const i=Ju(e,t),s=e.orient,o=Q4(s,-1,1);let a,u;const l={enter:a={opacity:Zn,anchor:eo(i("titleAnchor",null)),align:{signal:ate}},update:u=gn({},a,{opacity:mc,text:eo(e.title)}),exit:{opacity:Zn}},c={signal:`lerp(range("${e.scale}"), ${Y4(0,1,.5)})`};return u.x=to(s,c),u.y=Pf(s,c),a.angle=to(s,Zn,azt(o,90)),a.baseline=to(s,TMe(s,Q0,Jf),{value:Q0}),u.angle=a.angle,u.baseline=a.baseline,Po(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),mzt(i,s,l,n),l.update.align=Bw(l.update.align,a.align),l.update.angle=Bw(l.update.angle,a.angle),l.update.baseline=Bw(l.update.baseline,a.baseline),Ll({type:Ob,role:MBt,style:ite,from:r,encode:l},n)}function mzt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Bw(eo(a),n.update[u]),!1):!D_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?eo(o):to(t,eo(o),eo(s))}function gzt(e,t){const n=uzt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=Ju(e,n),l=d7t(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(Qf({},[c]))),d=$t(t.add(yUt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(czt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(dzt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(hzt(e,n,r.labels,d,p,l))),c.domain&&h.push(lzt(e,n,r.domain,f)),c.title&&h.push(pzt(e,n,r.title,f)),X4(tI({role:NBt,from:f,encode:vS(yzt(u,e),i,Gk),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function yzt(e,t){const n={enter:{},update:{}};return Po(n,{orient:e("orient"),offset:e("offset")||0,position:af(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function AMe(e,t,n){const r=dt(e.signals),i=dt(e.scales);return n||r.forEach(s=>sMe(s,t)),dt(e.projections).forEach(s=>KUt(s,t)),i.forEach(s=>LUt(s,t)),dt(e.data).forEach(s=>J7t(s,t)),i.forEach(s=>FUt(s,t)),(n||r).forEach(s=>gUt(s,t)),dt(e.axes).forEach(s=>gzt(s,t)),dt(e.marks).forEach(s=>X4(s,t)),dt(e.legends).forEach(s=>B7t(s,t)),e.title&&G7t(e.title,t),t.parseLambdas(),t}const vzt=e=>vS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function bzt(e,t){const n=t.config,r=$t(t.root=t.add(U$())),i=_zt(e,n);i.forEach(l=>sMe(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(Qf()),o=t.add(uMe(iMe(vzt(e.encode),G4,Zee,e.style,t,{pulse:$t(s)}))),a=t.add(fMe({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),AMe(e,t,i),t.operators.push(a);let u=t.add(aMe({mark:r,pulse:$t(a)}));return u=t.add(cMe({pulse:$t(u)})),u=t.add(Pb({pulse:$t(u)})),t.addData("root",new J1(t,s,s,u)),t}function TT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function _zt(e,t){const n=o=>af(e[o],t[o]),r=[TT("background",n("background")),TT("autosize",IBt(n("autosize"))),TT("padding",RBt(n("padding"))),TT("width",n("width")||0),TT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return dt(e.signals).forEach(o=>{Ft(i,o.name)?o=gn(i[o.name],o):r.push(o),s[o.name]=o}),dt(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function IMe(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function wpe(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}IMe.prototype=wpe.prototype={parse(e){return AMe(e,this)},fork(){return new wpe(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof OV?$t(e):e;return this.add(NUt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(Pb({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Kn(this._parent)},encode(){return Kn(this._encode)},lookup(){return Kn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ht(e))return Z2(e,t);e.signal||$e("Unsupported field reference: "+nt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add(wUt(i)))}return r},compareRef(e){let t=!1;const n=s=>Ns(s)?(t=!0,this.signalRef(s.signal)):oUt(s)?(t=!0,this.exprRef(s.expr)):s,r=dt(e.field).map(n),i=dt(e.order).map(n);return t?$t(this.add(ape({fields:r,orders:i}))):spe(r,i)},keyRef(e,t){let n=!1;const r=s=>Ns(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=dt(e).map(r),n?$t(this.add(EUt({fields:e,flat:t}))):nUt(e,t)},sortRef(e){if(!e)return e;const t=q4(e.op,e.field),n=e.order||rUt;return n.signal?$t(this.add(ape({fields:t,orders:this.signalRef(n.signal)}))):spe(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&$e("Duplicate signal name: "+nt(e));const n=t instanceof OV?t:this.add(U$(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||$e("Unrecognized signal name: "+nt(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(U$(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=xh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!mt(e)?e:this.signalRef(e.signal||dte(e))},exprRef(e,t){const n={expr:xh(e,this)};return t&&(n.expr.$name=t),$t(this.add(bUt(n)))},addBinding(e,t){this.bindings||$e("Nested signals do not support binding: "+nt(e)),this.bindings.push(gn({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&$e("Duplicate scale or projection name: "+nt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,PUt(t))},addProjection(e,t){this.addScaleProj(e,RUt(t))},getScale(e){return this.scales[e]||$e("Unrecognized scale name: "+nt(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&$e("Duplicate data set name: "+nt(e)),this.data[e]=t},getData(e){return this.data[e]||$e("Undefined data set name: "+nt(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&$e("Duplicate data set name: "+nt(e)),this.addData(e,J1.fromEntries(this,t))}};function dte(e){return(Fe(e)?wzt:Ezt)(e)}function wzt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(mt(i)?i.signal||dte(i):nt(i))}return n+"]"}function Ezt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+nt(r)+":"+(mt(i)?i.signal||dte(i):nt(i));return t+"}"}function xzt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Szt(e,t,n){return mt(e)||$e("Input Vega specification must be an object."),t=cS(xzt(),t,e.config),bzt(e,new IMe(t,n)).toRuntime()}var Tzt="5.29.0";gn(VE,S$t,d4t,H4t,wFt,IFt,t5t,OFt,r5t,a5t,y5t,S5t);const Czt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:ys,CanvasHandler:Uk,CanvasRenderer:k$,DATE:qu,DAY:oa,DAYOFYEAR:Eh,Dataflow:jw,Debug:ZNe,Error:oJ,EventStream:h4,Gradient:gOe,GroupItem:C4,HOURS:Ol,Handler:WZ,HybridHandler:a3e,HybridRenderer:fV,Info:JNe,Item:T4,MILLISECONDS:Hf,MINUTES:$l,MONTH:fa,Marks:Ml,MultiPulse:CJ,None:QNe,Operator:Wr,Parameters:d4,Pulse:h0,QUARTER:Hu,RenderType:zg,Renderer:Bk,ResourceLoader:xOe,SECONDS:Tc,SVGHandler:YOe,SVGRenderer:JZ,SVGStringRenderer:o3e,Scenegraph:BOe,TIME_UNITS:vJ,Transform:Re,View:W$e,WEEK:Cs,Warn:aJ,YEAR:Io,accessor:Qu,accessorFields:ca,accessorName:Wi,array:dt,ascending:o4,bandwidthNRD:RJ,bin:uPe,bootstrapCI:lPe,boundClip:y3e,boundContext:Mk,boundItem:oV,boundMark:MOe,boundStroke:Vm,changeset:Rb,clampRange:cDe,codegenExpression:b$e,compare:dJ,constant:va,cumulativeLogNormal:MJ,cumulativeNormal:m4,cumulativeUniform:BJ,dayofyear:EDe,debounce:hJ,defaultLocale:wJ,definition:sPe,densityLogNormal:$J,densityNormal:NJ,densityUniform:jJ,domChild:Ss,domClear:sc,domCreate:Bg,domFind:qZ,dotbin:cPe,error:$e,expressionFunction:ls,extend:gn,extent:wh,extentIndex:fDe,falsy:lg,fastmap:dS,field:xc,flush:dDe,font:N4,fontFamily:jk,fontSize:Vh,format:nP,formatLocale:g$,formats:SJ,hasOwnProperty:Ft,id:Sk,identity:ya,inferType:YDe,inferTypes:KDe,ingest:br,inherits:lt,inrange:nw,interpolate:EZ,interpolateColors:x4,interpolateRange:nOe,intersect:h3e,intersectBoxLine:rw,intersectPath:RZ,intersectPoint:NZ,intersectRule:TOe,isArray:Fe,isBoolean:Ry,isDate:d0,isFunction:vn,isIterable:hDe,isNumber:ar,isObject:mt,isRegExp:pDe,isString:ht,isTuple:c4,key:pJ,lerp:mDe,lineHeight:Y0,loader:u4,locale:WDe,logger:uJ,lruCache:gDe,markup:QZ,merge:yDe,mergeConfig:cS,multiLineOffset:zZ,one:lS,pad:vDe,panLinear:iDe,panLog:sDe,panPow:oDe,panSymlog:aDe,parse:Szt,parseExpression:jee,parseSelector:Dy,path:SL,pathCurves:AZ,pathEqual:v3e,pathParse:GE,pathRectangle:bOe,pathRender:q2,pathSymbols:vOe,pathTrail:_Oe,peek:Kn,point:P4,projection:cee,quantileLogNormal:LJ,quantileNormal:g4,quantileUniform:UJ,quantiles:IJ,quantizeInterpolator:rOe,quarter:uDe,quartiles:kJ,get random(){return Cc},randomInteger:I3t,randomKDE:PJ,randomLCG:A3t,randomLogNormal:dPe,randomMixture:hPe,randomNormal:DJ,randomUniform:pPe,read:JDe,regressionConstant:zJ,regressionExp:gPe,regressionLinear:VJ,regressionLoess:bPe,regressionLog:mPe,regressionPoly:vPe,regressionPow:yPe,regressionQuad:HJ,renderModule:O4,repeat:uC,resetDefaultLocale:SOt,resetSVGClipId:EOe,resetSVGDefIds:R6t,responseType:QDe,runtimeContext:P$e,sampleCurve:v4,sampleLogNormal:OJ,sampleNormal:p4,sampleUniform:FJ,scale:pr,sceneEqual:ZZ,sceneFromJSON:FOe,scenePickVisit:w$,sceneToJSON:LOe,sceneVisit:qf,sceneZOrder:DZ,scheme:xZ,serializeXML:n3e,setHybridRendererOptions:C6t,setRandom:T3t,span:Tk,splitAccessPath:zh,stringValue:nt,textMetrics:El,timeBin:jDe,timeFloor:kDe,timeFormatLocale:z2,timeInterval:hS,timeOffset:DDe,timeSequence:$De,timeUnitSpecifier:wDe,timeUnits:bJ,toBoolean:mJ,toDate:gJ,toNumber:aa,toSet:Vf,toString:yJ,transform:oPe,transforms:VE,truncate:bDe,truthy:Sc,tupleid:Mt,typeParsers:Qz,utcFloor:RDe,utcInterval:pS,utcOffset:PDe,utcSequence:MDe,utcdayofyear:TDe,utcquarter:lDe,utcweek:CDe,version:Tzt,visitArray:yg,week:xDe,writeConfig:fS,zero:Rg,zoomLinear:lJ,zoomLog:cJ,zoomPow:m$,zoomSymlog:fJ},Symbol.toStringTag,{value:"Module"}));function Azt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Izt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},kzt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Rzt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Nzt=Array.prototype.slice,Xy=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,Nzt.call(t,1))},Dzt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var Pzt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Dzt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Xy("join",arguments)},indexof:function(){return Xy("indexOf",arguments)},lastindexof:function(){return Xy("lastIndexOf",arguments)},slice:function(){return Xy("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Xy("substring",arguments,String)},split:function(){return Xy("split",arguments,String)},replace:function(){return Xy("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Ozt=["view","item","group","xy","x","y"],UV=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&UV.add(setImmediate);const $zt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Izt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),UV.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||Pzt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>kzt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Rzt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,UV.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function CT(e,t,n,r,i,s){const o=a=>$zt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,Ozt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var Mzt={operator(e,t){const n=t.ast,r=e.functions;return i=>CT(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>CT(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>CT(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return CT(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=CT(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&Azt(o,r,s),l}}};const Lzt="vega-lite",Fzt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',jzt="5.18.1",Bzt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Uzt="https://vega.github.io/vega-lite/",zzt="Vega-Lite is a concise high-level language for interactive visualization.",Vzt=["vega","chart","visualization"],Hzt="build/vega-lite.js",qzt="build/vega-lite.min.js",Wzt="build/vega-lite.min.js",Gzt="build/src/index",Yzt="build/src/index.d.ts",Kzt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},Xzt=["bin","build","src","vega-lite*","tsconfig.json"],Qzt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},Jzt={type:"git",url:"https://github.com/vega/vega-lite.git"},Zzt="BSD-3-Clause",eVt={url:"https://github.com/vega/vega-lite/issues"},tVt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},nVt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},rVt={vega:"^5.24.0"},iVt={node:">=18"},sVt="yarn@1.22.19",oVt={name:Lzt,author:Fzt,version:jzt,collaborators:Bzt,homepage:Uzt,description:zzt,keywords:Vzt,main:Hzt,unpkg:qzt,jsdelivr:Wzt,module:Gzt,types:Yzt,bin:Kzt,files:Xzt,scripts:Qzt,repository:Jzt,license:Zzt,bugs:eVt,devDependencies:tVt,dependencies:nVt,peerDependencies:rVt,engines:iVt,packageManager:sVt};function hte(e){return!!e.or}function pte(e){return!!e.and}function mte(e){return!!e.not}function EP(e,t){if(mte(e))EP(e.not,t);else if(pte(e))for(const n of e.and)EP(n,t);else if(hte(e))for(const n of e.or)EP(n,t);else t(e)}function Uw(e,t){return mte(e)?{not:Uw(e.not,t)}:pte(e)?{and:e.and.map(n=>Uw(n,t))}:hte(e)?{or:e.or.map(n=>Uw(n,t))}:t(e)}const en=structuredClone;function kMe(e){throw new Error(e)}function JE(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function $u(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Fr(e)).join(",")})`};function Un(e){if(ar(e))return e;const t=ht(e)?e:Fr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function zV(e){return e===!1||e===null}function zn(e,t){return e.includes(t)}function Z1(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function gte(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function RMe(e,...t){for(const n of t)aVt(e,n??{});return e}function aVt(e,t){for(const n of Ge(t))fS(e,n,t[n],!0)}function Hd(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function uVt(e,t){const n=Ge(e),r=Ge(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function NMe(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function yte(e,t){for(const n of e)if(t.has(n))return!0;return!1}function VV(e){const t=new Set;for(const n of e){const i=zh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function vte(e,t){return e===void 0||t===void 0?!0:yte(VV(e),VV(t))}function Lr(e){return Ge(e).length===0}const Ge=Object.keys,ko=Object.values,J0=Object.entries;function nI(e){return e===!0||e===!1}function wi(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function vA(e,t){return mte(e)?`!(${vA(e.not,t)})`:pte(e)?`(${e.and.map(n=>vA(n,t)).join(") && (")})`:hte(e)?`(${e.or.map(n=>vA(n,t)).join(") || (")})`:t(e)}function z$(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&z$(e[n],t)&&delete e[n],Lr(e)}function Yk(e){return e.charAt(0).toUpperCase()+e.substr(1)}function bte(e,t="datum"){const n=zh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(nt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function DMe(e,t="datum"){return`${t}[${nt(zh(e).join("."))}]`}function lVt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Ac(e){return`${zh(e).map(lVt).join("\\.")}`}function eb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function wS(e){return`${zh(e).join(".")}`}function ZE(e){return e?zh(e).length:0}function os(...e){for(const t of e)if(t!==void 0)return t}let PMe=42;function OMe(e){const t=++PMe;return e?String(e)+t:t}function cVt(){PMe=42}function $Me(e){return MMe(e)?e:`__${e}`}function MMe(e){return e.startsWith("__")}function rI(e){if(e!==void 0)return(e%360+360)%360}function J4(e){return ar(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const Epe=Object.getPrototypeOf(structuredClone({}));function _l(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!_l(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!_l(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==Epe.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==Epe.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!_l(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Fr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Xp="row",Qp="column",Z4="facet",Ei="x",ao="y",Zf="x2",Wh="y2",Py="xOffset",ES="yOffset",ed="radius",qm="radius2",jc="theta",Wm="theta2",td="latitude",nd="longitude",rd="latitude2",Ic="longitude2",Wu="color",Gh="fill",Yh="stroke",Gu="shape",Gm="size",$b="angle",Ym="opacity",Oy="fillOpacity",$y="strokeOpacity",My="strokeWidth",Ly="strokeDash",Kk="text",ex="order",Xk="detail",eF="key",tb="tooltip",tF="href",nF="url",rF="description",fVt={x:1,y:1,x2:1,y2:1},LMe={theta:1,theta2:1,radius:1,radius2:1};function FMe(e){return e in LMe}const _te={longitude:1,longitude2:1,latitude:1,latitude2:1};function jMe(e){switch(e){case td:return"y";case rd:return"y2";case nd:return"x";case Ic:return"x2"}}function BMe(e){return e in _te}const dVt=Ge(_te),wte={...fVt,...LMe,..._te,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function zw(e){return e===Wu||e===Gh||e===Yh}const UMe={row:1,column:1,facet:1},dc=Ge(UMe),Ete={...wte,...UMe},hVt=Ge(Ete),{order:Hen,detail:qen,tooltip:Wen,...pVt}=Ete,{row:Gen,column:Yen,facet:Ken,...mVt}=pVt;function gVt(e){return!!mVt[e]}function zMe(e){return!!Ete[e]}const yVt=[Zf,Wh,rd,Ic,Wm,qm];function VMe(e){return Mb(e)!==e}function Mb(e){switch(e){case Zf:return Ei;case Wh:return ao;case rd:return td;case Ic:return nd;case Wm:return jc;case qm:return ed}return e}function Z0(e){if(FMe(e))switch(e){case jc:return"startAngle";case Wm:return"endAngle";case ed:return"outerRadius";case qm:return"innerRadius"}return e}function Kh(e){switch(e){case Ei:return Zf;case ao:return Wh;case td:return rd;case nd:return Ic;case jc:return Wm;case ed:return qm}}function Yu(e){switch(e){case Ei:case Zf:return"width";case ao:case Wh:return"height"}}function HMe(e){switch(e){case Ei:return"xOffset";case ao:return"yOffset";case Zf:return"x2Offset";case Wh:return"y2Offset";case jc:return"thetaOffset";case ed:return"radiusOffset";case Wm:return"theta2Offset";case qm:return"radius2Offset"}}function xte(e){switch(e){case Ei:return"xOffset";case ao:return"yOffset"}}function vVt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const bVt=Ge(wte),{x:Xen,y:Qen,x2:Jen,y2:Zen,xOffset:etn,yOffset:ttn,latitude:ntn,longitude:rtn,latitude2:itn,longitude2:stn,theta:otn,theta2:atn,radius:utn,radius2:ltn,...Ste}=wte,_Vt=Ge(Ste),Tte={x:1,y:1},Xh=Ge(Tte);function as(e){return e in Tte}const Cte={theta:1,radius:1},wVt=Ge(Cte);function iF(e){return e==="width"?Ei:ao}const qMe={xOffset:1,yOffset:1};function Qk(e){return e in qMe}const{text:ctn,tooltip:ftn,href:dtn,url:htn,description:ptn,detail:mtn,key:gtn,order:ytn,...WMe}=Ste,EVt=Ge(WMe);function xVt(e){return!!Ste[e]}function SVt(e){switch(e){case Wu:case Gh:case Yh:case Gm:case Gu:case Ym:case My:case Ly:return!0;case Oy:case $y:case $b:return!1}}const GMe={...Tte,...Cte,...qMe,...WMe},sF=Ge(GMe);function Km(e){return!!GMe[e]}function TVt(e,t){return AVt(e)[t]}const YMe={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:vtn,...CVt}=YMe;function AVt(e){switch(e){case Wu:case Gh:case Yh:case rF:case Xk:case eF:case tb:case tF:case ex:case Ym:case Oy:case $y:case My:case Z4:case Xp:case Qp:return YMe;case Ei:case ao:case Py:case ES:case td:case nd:return CVt;case Zf:case Wh:case rd:case Ic:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Gm:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ly:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Gu:return{point:"always",geoshape:"always"};case Kk:return{text:"always"};case $b:return{point:"always",square:"always",text:"always"};case nF:return{image:"always"};case jc:return{text:"always",arc:"always"};case ed:return{text:"always",arc:"always"};case Wm:case qm:return{arc:"always"}}}function h9(e){switch(e){case Ei:case ao:case jc:case ed:case Py:case ES:case Gm:case $b:case My:case Ym:case Oy:case $y:case Zf:case Wh:case Wm:case qm:return;case Z4:case Xp:case Qp:case Gu:case Ly:case Kk:case tb:case tF:case nF:case rF:return"discrete";case Wu:case Gh:case Yh:return"flexible";case td:case nd:case rd:case Ic:case Xk:case eF:case ex:return}}const IVt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},kVt={count:1,min:1,max:1};function Tm(e){return!!e&&!!e.argmin}function Fy(e){return!!e&&!!e.argmax}function Ate(e){return ht(e)&&!!IVt[e]}const RVt=new Set(["count","valid","missing","distinct"]);function KMe(e){return ht(e)&&RVt.has(e)}function NVt(e){return ht(e)&&zn(["min","max"],e)}const DVt=new Set(["count","sum","distinct","valid","missing"]),PVt=new Set(["mean","average","median","q1","q3","min","max"]);function XMe(e){return Ry(e)&&(e=yF(e,void 0)),"bin"+Ge(e).map(t=>oF(e[t])?wi(`_${t}_${J0(e[t])}`):wi(`_${t}_${e[t]}`)).join("")}function ri(e){return e===!0||Lb(e)&&!e.binned}function _o(e){return e==="binned"||Lb(e)&&e.binned===!0}function Lb(e){return mt(e)}function oF(e){return e==null?void 0:e.param}function xpe(e){switch(e){case Xp:case Qp:case Gm:case Wu:case Gh:case Yh:case My:case Ym:case Oy:case $y:case Gu:return 6;case Ly:return 4;default:return 10}}function Jk(e){return!!(e!=null&&e.expr)}function bu(e){const t=Ge(e||{}),n={};for(const r of t)n[r]=fl(e[r]);return n}function QMe(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=JE(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function _g(e){return ht(e)||Fe(e)&&ht(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function jy(e){return!!e.step}function OVt(e){return Fe(e)?!1:"fields"in e&&!("data"in e)}function $Vt(e){return Fe(e)?!1:"fields"in e&&"data"in e}function jp(e){return Fe(e)?!1:"field"in e&&"data"in e}const MVt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},LVt=Ge(MVt),FVt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},HV=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function JMe(e){const t=Fe(e.condition)?e.condition.map(Spe):Spe(e.condition);return{...fl(e),condition:t}}function fl(e){if(Jk(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Spe(e){if(Jk(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function li(e){if(Jk(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function jVt(e){return Rt(e)?e.signal:nt(e)}function Tpe(e){return Rt(e)?e.signal:nt(e.value)}function Ef(e){return Rt(e)?e.signal:e==null?null:nt(e)}function BVt(e,t,n){for(const r of n){const i=Cm(r,t.markDef,t.config);i!==void 0&&(e[r]=li(i))}return e}function ZMe(e){return[].concat(e.type,e.style??[])}function vr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Cm(e,t,n,r)}function Cm(e,t,n,{vgChannel:r}={}){return os(r?V$(e,t,n.style):void 0,V$(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function V$(e,t,n){return eLe(e,ZMe(t),n)}function eLe(e,t,n){t=dt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function tLe(e,t){return dt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function nLe(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(_l(i,r))return;n.push(r)}),n}function rLe(e,t){return _l(e,t)||!t?e:e?[...dt(e),...dt(t)].join(", "):t}function iLe(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((_g(n)||Rt(n))&&(_g(r)||Rt(r)))return{explicit:e.explicit,value:rLe(n,r)};if(_g(n)||Rt(n))return{explicit:e.explicit,value:n};if(_g(r)||Rt(r))return{explicit:e.explicit,value:r};if(!_g(n)&&!Rt(n)&&!_g(r)&&!Rt(r))return{explicit:e.explicit,value:nLe(n,r)};throw new Error("It should never reach here")}function Ite(e){return`Invalid specification ${Fr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const UVt='Autosize "fit" only works for single views and layered views.';function Cpe(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function Ape(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function Ipe(e){return e?`Dropping "fit-${e}" because spec has discrete ${Yu(e)}.`:'Dropping "fit" because spec has discrete size.'}function kte(e){return`Unknown field for ${e}. Cannot calculate view size.`}function kpe(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function zVt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function VVt(e){return`The "nearest" transform is not supported for ${e} marks.`}function sLe(e){return`Selection not supported for ${e} yet.`}function HVt(e){return`Cannot find a selection named "${e}".`}const qVt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",WVt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",GVt="Legend bindings are only supported for selections over an individual field or encoding channel.";function YVt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function KVt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const XVt="The same selection must be used to override scale domains in a layered view.",QVt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function JVt(e){return`Unknown repeated value "${e}".`}function Rpe(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const ZVt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function eHt(e){return`Unrecognized parse "${e}".`}function Npe(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const tHt="Attempt to add the same child twice.";function nHt(e){return`Ignoring an invalid transform: ${Fr(e)}.`}const rHt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function Dpe(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function iHt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Fr(t)} is overridden by a child projection ${Fr(n)}.`}const sHt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function oHt(e){return`${e}Offset dropped because ${e} is continuous`}function aHt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Fr(n)}}.`}function oLe(e){return`Invalid field type "${e}".`}function uHt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function lHt(e){return`Invalid aggregation operator "${e}".`}function aLe(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function cHt(e){return`Position range does not support relative band size for ${e}.`}function qV(e,t){return`Dropping ${Fr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const fHt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function aF(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function dHt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function hHt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function pHt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function mHt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function p9(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function gHt(e){return`The ${e} for range marks cannot be an expression`}function yHt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function vHt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function bHt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function _Ht(e){return`Cannot use the relative band size with ${e} scale.`}function wHt(e){return`Using unaggregated domain with raw field has no effect (${Fr(e)}).`}function EHt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function xHt(e){return`Unaggregated domain is currently unsupported for log scale (${Fr(e)}).`}function SHt(e){return`Cannot apply size to non-oriented mark "${e}".`}function THt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function CHt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function uLe(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function lLe(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function AHt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using ${Fr(n)}.`}function IHt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Fr(n)} and ${Fr(r)}). Using the union of the two domains.`}function kHt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function RHt(e){return`Dropping sort property ${Fr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const Ppe="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",NHt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",DHt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",PHt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function OHt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function $Ht(e){return`Stack is applied to a non-linear scale (${e}).`}function MHt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function H$(e,t){return`Invalid ${e}: ${Fr(t)}.`}function LHt(e){return`Dropping day from datetime ${Fr(e)} as day cannot be combined with other units.`}function FHt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function jHt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function BHt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function Ope(e){return`1D error band does not support ${e}.`}function cLe(e){return`Channel ${e} is required for "binned" bin.`}function UHt(e){return`Channel ${e} should not be used with "binned" bin.`}function zHt(e){return`Domain for ${e} is required for threshold scale.`}const fLe=uJ(aJ);let tx=fLe;function VHt(e){return tx=e,tx}function HHt(){return tx=fLe,tx}function Qe(...e){tx.warn(...e)}function qHt(...e){tx.debug(...e)}function Fb(e){if(e&&mt(e)){for(const t of Nte)if(t in e)return!0}return!1}const dLe=["january","february","march","april","may","june","july","august","september","october","november","december"],WHt=dLe.map(e=>e.substr(0,3)),hLe=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],GHt=hLe.map(e=>e.substr(0,3));function YHt(e){if(J4(e)&&(e=+e),ar(e))return e>4&&Qe(H$("quarter",e)),e-1;throw new Error(H$("quarter",e))}function KHt(e){if(J4(e)&&(e=+e),ar(e))return e-1;{const t=e.toLowerCase(),n=dLe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=WHt.indexOf(r);if(i!==-1)return i;throw new Error(H$("month",e))}}function XHt(e){if(J4(e)&&(e=+e),ar(e))return e%7;{const t=e.toLowerCase(),n=hLe.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=GHt.indexOf(r);if(i!==-1)return i;throw new Error(H$("day",e))}}function Rte(e,t){const n=[];if(t&&e.day!==void 0&&Ge(e).length>1&&(Qe(LHt(e)),e=en(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?KHt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?YHt(e.quarter):e.quarter;n.push(ar(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?XHt(e.day):e.day;n.push(ar(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function nb(e){const n=Rte(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function QHt(e){const n=Rte(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function JHt(e){const t=Rte(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const pLe={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Nte=Ge(pLe);function ZHt(e){return!!pLe[e]}function jb(e){return mt(e)?e.binned:mLe(e)}function mLe(e){return e&&e.startsWith("binned")}function Dte(e){return e.startsWith("utc")}function eqt(e){return e.substring(3)}const tqt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function uF(e){return Nte.filter(t=>yLe(e,t))}function gLe(e){const t=uF(e);return t[t.length-1]}function yLe(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function nqt(e,t,{end:n}={end:!1}){const r=bte(t),i=Dte(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Nte)yLe(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),QHt(a)}function vLe(e){if(!e)return;const t=uF(e);return`timeUnitSpecifier(${Fr(t)}, ${Fr(tqt)})`}function rqt(e,t,n){if(!e)return;const r=vLe(e);return`${n||Dte(e)?"utc":"time"}Format(${t}, ${r})`}function io(e){if(!e)return;let t;return ht(e)?mLe(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:mt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Dte(t.unit)&&(t.utc=!0,t.unit=eqt(t.unit)),t}function iqt(e){const{utc:t,...n}=io(e);return n.unit?(t?"utc":"")+Ge(n).map(r=>wi(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ge(n).map(r=>wi(`_${r}_${n[r]}`)).join("")}function bLe(e,t=n=>n){const n=io(e),r=gLe(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=_Le(r,n.step),a={...i,[o]:+i[o]+s};return`${t(nb(a))} - ${t(nb(i))}`}}const sqt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function oqt(e){return!!sqt[e]}function _Le(e,t=1){if(oqt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function aqt(e){return e==null?void 0:e.param}function Pte(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function Ote(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function $te(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Mte(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function Lte(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Fte(e){if(e!=null&&e.field){if(Fe(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function jte(e){return!!(e!=null&&e.field)&&(Fe(e.oneOf)||Fe(e.in))}function uqt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function wLe(e){return jte(e)||Pte(e)||Fte(e)||Ote(e)||Mte(e)||$te(e)||Lte(e)}function hd(e,t){return vF(e,{timeUnit:t,wrapTime:!0})}function lqt(e,t){return e.map(n=>hd(n,t))}function ELe(e,t=!0){const{field:n}=e,r=io(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:nqt(i,n)})`:o;if(Pte(e))return`${a}===${hd(e.equal,i)}`;if(Ote(e)){const u=e.lt;return`${a}<${hd(u,i)}`}else if(Mte(e)){const u=e.gt;return`${a}>${hd(u,i)}`}else if($te(e)){const u=e.lte;return`${a}<=${hd(u,i)}`}else if(Lte(e)){const u=e.gte;return`${a}>=${hd(u,i)}`}else{if(jte(e))return`indexof([${lqt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(uqt(e))return Bte(a,e.valid);if(Fte(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+hd(l,i)+", "+hd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${hd(l,i)}`),c!==null&&f.push(`${a} <= ${hd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Fr(e)}`)}function Bte(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function cqt(e){return wLe(e)&&e.timeUnit?{...e,timeUnit:io(e.timeUnit)}:e}const Zk={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function fqt(e){return e==="quantitative"||e==="temporal"}function xLe(e){return e==="ordinal"||e==="nominal"}const rb=Zk.quantitative,Ute=Zk.ordinal,nx=Zk.temporal,zte=Zk.nominal,xS=Zk.geojson;function dqt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case rb:return"quantitative";case"t":case nx:return"temporal";case"o":case Ute:return"ordinal";case"n":case zte:return"nominal";case xS:return"geojson"}}const Mu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},WV={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function hqt(e,t){const n=WV[e],r=WV[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const pqt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function $pe(e){return pqt[e]}const SLe=new Set(["linear","log","pow","sqrt","symlog"]),TLe=new Set([...SLe,"time","utc"]);function CLe(e){return SLe.has(e)}const ALe=new Set(["quantile","quantize","threshold"]),mqt=new Set([...TLe,...ALe,"sequential","identity"]),gqt=new Set(["ordinal","bin-ordinal","point","band"]);function so(e){return gqt.has(e)}function Fl(e){return mqt.has(e)}function xf(e){return TLe.has(e)}function rx(e){return ALe.has(e)}const yqt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function vqt(e){return!ht(e)&&!!e.name}function ILe(e){return e==null?void 0:e.param}function bqt(e){return e==null?void 0:e.unionWith}function _qt(e){return mt(e)&&"field"in e}const wqt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:btn,domain:_tn,range:wtn,rangeMax:Etn,rangeMin:xtn,scheme:Stn,...Eqt}=wqt,xqt=Ge(Eqt);function GV(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return xf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return xf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return xf(e);case"nice":return xf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Fl(e)&&!zn(["log","time","utc","threshold","quantile"],e)}}function kLe(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return zw(e)?void 0:bHt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Sqt(e,t){return zn([Ute,zte],t)?e===void 0||so(e):t===nx?zn([Mu.TIME,Mu.UTC,void 0],e):t===rb?CLe(e)||rx(e)||e===void 0:!0}function Tqt(e,t,n=!1){if(!Km(e))return!1;switch(e){case Ei:case ao:case Py:case ES:case jc:case ed:return xf(t)||t==="band"?!0:t==="point"?!n:!1;case Gm:case My:case Ym:case Oy:case $y:case $b:return xf(t)||rx(t)||zn(["band","point","ordinal"],t);case Wu:case Gh:case Yh:return t!=="band";case Ly:case Gu:return t==="ordinal"||rx(t)}}function Vte(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=qte(e);return Je(n)&&!KMe(n.aggregate)&&i&&xf(i.get("type"))?Cqt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function Cqt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return vr("invalid",n,i)===null?[Aqt(e,t),r]:r}function Aqt(e,t){const n=Hte(e,!0),i=Mb(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Hte(e,t=!0){return Bte(ht(e)?e:at(e,{expr:"datum"}),!t)}function Iqt(e){const{datum:t}=e;return Fb(t)?nb(t):`${Fr(t)}`}function m1(e,t,n,r){const i={};if(t&&(i.scale=t),Qh(e)){const{datum:s}=e;Fb(s)?i.signal=nb(s):Rt(s)?i.signal=s.signal:Jk(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function q$({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function kqt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function qte({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(an(t)){const f=o==null?void 0:o.get("type");if(Xa(t)){c??(c=ey({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(ri(d)||c&&h&&p===nx)return a!=null&&a.impute?m1(t,s,{binSuffix:"mid"},{offset:u}):c&&!so(f)?q$({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):m1(t,s,rR(t,e)?{binSuffix:"range"}:{},{offset:u});if(_o(d)){if(Je(n))return q$({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Qe(cLe(e===Ei?Zf:Wh))}}return m1(t,s,so(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Wf(t)){const f=t.value,d=u?{offset:u}:{};return{...bA(e,f),...d}}}return vn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function bA(e,t){return zn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:zn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:li(t)}function ib(e){return e&&e!=="number"&&e!=="time"}function RLe(e,t,n){return`${e}(${t}${n?`, ${Fr(n)}`:""})`}const Rqt="  ";function Wte({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(ib(n))return Sf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=NLe(e,r,i),a=ix(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Sf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Sf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Je(e)&&e.timeUnit===void 0)return Sf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(ox(e)){const c=Dqt({field:o,timeUnit:Je(e)?(u=io(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Ub(e)&&((l=e.scale)==null?void 0:l.type)===Mu.UTC});return c?{signal:c}:void 0}if(t=YV({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Je(e)&&ri(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:eR(o,c,t,n,s)}}else return t||ix(e)==="quantitative"?{signal:`${OLe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function NLe(e,t,n){return Je(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):Iqt(e)}function Sf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=NLe(e,r,i)),o!=="datum.value"&&Je(e)&&ri(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:eR(o,a,t,n,s)}}return{signal:RLe(n,o,t)}}function DLe(e,t,n,r,i,s){var o;if(!(ht(r)&&ib(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&ix(e)==="quantitative"&&(i.normalizedNumberFormatType&&sx(e)&&e.stack==="normalize"||i.numberFormatType))){if(sx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return YV({type:"quantitative",config:i,normalizeStack:!0});if(ox(e)){const a=Je(e)?(o=io(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Nqt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return YV({type:t,specifiedFormat:n,config:i})}}function PLe(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(ox(t)&&n!=="time"&&n!=="utc")return Je(t)&&((r=io(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function YV({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(ht(t))return t;if(e===rb)return r?n.normalizedNumberFormat:n.numberFormat}function Nqt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:vLe(t)}:r?void 0:n.timeFormat)}function OLe(e,t){return`format(${e}, "${t||""}")`}function Mpe(e,t,n,r){return ib(n)?RLe(n,e,t):OLe(e,(ht(t)?t:void 0)??r.numberFormat)}function eR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return eR(e,t,i.numberFormat,i.numberFormatType,i);const s=Mpe(e,n,r,i),o=Mpe(t,n,r,i);return`${Bte(e,!1)} ? "null" : ${s} + "${Rqt}" + ${o}`}function Dqt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=ht(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):rqt(t,e,s)}const nu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},$Le=nu.arc,lF=nu.area,cF=nu.bar,Pqt=nu.image,fF=nu.line,dF=nu.point,Oqt=nu.rect,W$=nu.rule,MLe=nu.text,Gte=nu.tick,$qt=nu.trail,Yte=nu.circle,Kte=nu.square,LLe=nu.geoshape;function Bb(e){return["line","area","trail"].includes(e)}function iI(e){return["rect","bar","image","arc"].includes(e)}const Mqt=new Set(Ge(nu));function Sh(e){return e.type}const Lqt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Fqt=["fill","fillOpacity"],jqt=[...Lqt,...Fqt],Bqt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},Lpe=Ge(Bqt),Uqt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},zqt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},Vqt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},FLe=Ge(Vqt);function sb(e){return e&&e.band!=null}const Hqt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},jLe=5,qqt={binSpacing:1,continuousBandSize:jLe,minBandSize:.25,timeUnitBandPosition:.5},Wqt={binSpacing:0,continuousBandSize:jLe,minBandSize:.25,timeUnitBandPosition:.5},Gqt={thickness:1};function Yqt(e){return Sh(e)?e.type:e}const hF="min",Kqt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Fpe(e){return e in Kqt}function BLe(e){return!!(e!=null&&e.encoding)}function oh(e){return e&&(e.op==="count"||!!e.field)}function ULe(e){return e&&Fe(e)}function tR(e){return"row"in e||"column"in e}function Xte(e){return!!e&&"header"in e}function pF(e){return"facet"in e}function Xqt(e){return e.param}function Qqt(e){return e&&!ht(e)&&"repeat"in e}function jpe(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Qte(e){return"sort"in e}function ey({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(an(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Je(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Cm("timeUnitBandPosition",n,r);if(ri(s))return .5}}function zLe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=Yu(e),u=vr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Je(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Cm("timeUnitBandSize",r,i)};if(ri(h)&&!so(s))return{band:1}}if(iI(r.type))return s?so(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function VLe(e,t,n,r){return ri(e.bin)||e.timeUnit&&Xa(e)&&e.type==="temporal"?ey({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function HLe(e){return e&&!!e.sort&&!e.field}function mF(e){return e&&"condition"in e}function gF(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&Je(t)}function nR(e){const t=e==null?void 0:e.condition;return!!t&&!Fe(t)&&an(t)}function Jqt(e){const t=e==null?void 0:e.condition;return!!t&&(Fe(t)||Wf(t))}function Je(e){return e&&(!!e.field||e.aggregate==="count")}function ix(e){return e==null?void 0:e.type}function Qh(e){return e&&"datum"in e}function Wg(e){return Xa(e)&&!Y$(e)||G$(e)}function Bpe(e){return Xa(e)&&e.type==="quantitative"&&!e.bin||G$(e)}function G$(e){return Qh(e)&&ar(e.datum)}function an(e){return Je(e)||Qh(e)}function Xa(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Wf(e){return e&&"value"in e&&"value"in e}function Ub(e){return e&&("scale"in e||"sort"in e)}function sx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function qLe(e){return e&&"legend"in e}function WLe(e){return e&&("format"in e||"formatType"in e)}function Zqt(e){return $u(e,["legend","axis","header","scale"])}function eWt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(nWt(e))n=$Me("count");else{let o;if(!t.nofn)if(eWt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;ri(a)?(o=XMe(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Fy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Tm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!jb(l)&&(o=iqt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?wS(n):t.expr?DMe(n,t.expr)+s:Ac(n)+s}function Y$(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Je(e)&&!!e.bin;case"temporal":return!1}throw new Error(oLe(e.type))}function tWt(e){var t;return Ub(e)&&rx((t=e.scale)==null?void 0:t.type)}function nWt(e){return e.aggregate==="count"}function rWt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(ri(r))return`${n} (binned)`;if(i&&!jb(i)){const a=(o=io(i))==null?void 0:o.unit;if(a)return`${n} (${uF(a).join("-")})`}else if(s)return Fy(s)?`${n} for max ${s.argmax}`:Tm(s)?`${n} for min ${s.argmin}`:`${Yk(s)} of ${n}`;return n}function iWt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Fy(t))return`${i} for argmax(${t.argmax})`;if(Tm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!jb(r)?io(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||ri(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const GLe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return iWt(e);default:return rWt(e,t)}};let YLe=GLe;function KLe(e){YLe=e}function sWt(){KLe(GLe)}function Vw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Jte(e))==null?void 0:a.title;if(!Je(e))return i??e.title;const s=e,o=r?Zte(s,t):void 0;return n?os(i,s.title,o):i??s.title??o}function Jte(e){if(sx(e)&&e.axis)return e.axis;if(qLe(e)&&e.legend)return e.legend;if(Xte(e)&&e.header)return e.header}function Zte(e,t){return YLe(e,t)}function K$(e){if(WLe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Jte(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function oWt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Qte(e)&&Fe(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Fy(n)&&!Tm(n))return"quantitative";if(Ub(e)&&((s=e.scale)!=null&&s.type))switch(WV[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Th(e){if(Je(e))return e;if(gF(e))return e.condition}function As(e){if(an(e))return e;if(nR(e))return e.condition}function XLe(e,t,n,r={}){if(ht(e)||ar(e)||Ry(e)){const i=ht(e)?"string":ar(e)?"number":"boolean";return Qe(aHt(t,i,e)),{value:e}}return an(e)?X$(e,t,n,r):nR(e)?{...e,condition:X$(e.condition,t,n,r)}:e}function X$(e,t,n,r){if(WLe(e)){const{format:i,formatType:s,...o}=e;if(ib(s)&&!n.customFormatTypes)return Qe(Dpe(t)),X$(o,t,n,r)}else{const i=sx(e)?"axis":qLe(e)?"legend":Xte(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(ib(o)&&!n.customFormatTypes)return Qe(Dpe(t)),X$({...e,[i]:a},t,n,r)}}return Je(e)?ene(e,t,r):aWt(e)}function aWt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ar(n)?"quantitative":ht(n)?"nominal":Fb(n)?"temporal":void 0,{...e,type:t}}function ene(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Ate(r)&&!Fy(r)&&!Tm(r)&&(Qe(lHt(r)),delete a.aggregate),i&&(a.timeUnit=io(i)),o&&(a.field=`${o}`),ri(s)&&(a.bin=yF(s,t)),_o(s)&&!as(t)&&Qe(UHt(t)),Xa(a)){const{type:u}=a,l=dqt(u);u!==l&&(a.type=l),u!=="quantitative"&&KMe(r)&&(Qe(uHt(u,r)),a.type="quantitative")}else if(!VMe(t)){const u=oWt(a,t);a.type=u}if(Xa(a)){const{compatible:u,warning:l}=uWt(a,t)||{};u===!1&&Qe(l)}if(Qte(a)&&ht(a.sort)){const{sort:u}=a;if(Fpe(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Fpe(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Xte(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function yF(e,t){return Ry(e)?{maxbins:xpe(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:xpe(t)}:e}const g_={compatible:!0};function uWt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Xp:case Qp:case Z4:return Y$(e)?g_:{compatible:!1,warning:hHt(t)};case Ei:case ao:case Py:case ES:case Wu:case Gh:case Yh:case Kk:case Xk:case eF:case tb:case tF:case nF:case $b:case jc:case ed:case rF:return g_;case nd:case Ic:case td:case rd:return n!==rb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:g_;case Ym:case Oy:case $y:case My:case Gm:case Wm:case qm:case Zf:case Wh:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:g_;case Gu:case Ly:return!Y$(e)&&!tWt(e)?{compatible:!1,warning:pHt(t)}:g_;case ex:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:g_}}function ox(e){const{formatType:t}=K$(e);return t==="time"||!t&&lWt(e)}function lWt(e){return e&&(e.type==="temporal"||Je(e)&&!!e.timeUnit)}function vF(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=io(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return Jk(e)?a=e.expr:Rt(e)?a=e.signal:Fb(e)?(o=!0,a=nb(e)):(ht(e)||ar(e))&&o&&(a=`datetime(${Fr(e)})`,ZHt(s)&&(ar(e)&&e<1e4||ht(e)&&isNaN(Date.parse(e)))&&(a=nb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Fr(e)}function QLe(e,t){const{type:n}=e;return t.map(r=>{const i=Je(e)&&!jb(e.timeUnit)?e.timeUnit:void 0,s=vF(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function rR(e,t){return ri(e.bin)?Km(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Upe={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function iR(e){return e==null?void 0:e.condition}const JLe=["domain","grid","labels","ticks","title"],cWt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},ZLe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},fWt={...ZLe,style:1,labelExpr:1,encoding:1};function zpe(e){return!!fWt[e]}const dWt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},e6e=Ge(dWt);function Xm(e){return"mark"in e}class bF{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Xm(t)?Yqt(t.mark)===this.name:!1}}function g1(e,t){const n=e&&e[t];return n?Fe(n)?Z1(n,r=>!!r.field):Je(n)||gF(n):!1}function t6e(e,t){const n=e&&e[t];return n?Fe(n)?Z1(n,r=>!!r.field):Je(n)||Qh(n)||nR(n):!1}function n6e(e,t){if(as(t)){const n=e[t];if((Je(n)||Qh(n))&&(xLe(n.type)||Je(n)&&n.timeUnit)){const r=xte(t);return t6e(e,r)}}return!1}function tne(e){return Z1(hVt,t=>{if(g1(e,t)){const n=e[t];if(Fe(n))return Z1(n,r=>!!r.aggregate);{const r=Th(n);return r&&!!r.aggregate}}return!1})}function r6e(e,t){const n=[],r=[],i=[],s=[],o={};return nne(e,(a,u)=>{if(Je(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Jte(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:Vw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Fy(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Tm(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),Xa(a)&&ri(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),rR(a,u)&&n.push(at(a,{binSuffix:"range"})),as(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",VMe(u)||(y.type=rb)}else if(d&&!jb(d)){i.push({timeUnit:d,field:l,as:g});const v=Xa(a)&&a.type!==nx&&"time";v&&(u===Kk||u===tb?y.formatType=v:xVt(u)?y.legend={formatType:v,...y.legend}:as(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function hWt(e,t,n){const r=TVt(t,n);if(r){if(r==="binned"){const i=e[t===Zf?Ei:ao];return!!(Je(i)&&Je(e[t])&&_o(i.bin))}}else return!1;return!0}function pWt(e,t,n,r){const i={};for(const s of Ge(e))zMe(s)||Qe(dHt(s));for(let s of bVt){if(!e[s])continue;const o=e[s];if(Qk(s)){const a=vVt(s),u=i[a];if(Je(u)&&fqt(u.type)&&Je(o)&&!u.timeUnit){Qe(oHt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Qe(sHt),s=jc),!hWt(e,s,t)){Qe(aF(s,t));continue}if(s===Gm&&t==="line"){const a=Th(e[s]);if(a!=null&&a.aggregate){Qe(fHt);continue}}if(s===Wu&&(n?"fill"in e:"stroke"in e)){Qe(aLe("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===Xk||s===ex&&!Fe(o)&&!Wf(o)||s===tb&&Fe(o)){if(o){if(s===ex){const a=e[s];if(HLe(a)){i[s]=a;continue}}i[s]=dt(o).reduce((a,u)=>(Je(u)?a.push(ene(u,s)):Qe(qV(u,s)),a),[])}}else{if(s===tb&&o===null)i[s]=null;else if(!Je(o)&&!Qh(o)&&!Wf(o)&&!mF(o)&&!Rt(o)){Qe(qV(o,s));continue}i[s]=XLe(o,s,r)}}return i}function _F(e,t){const n={};for(const r of Ge(e)){const i=XLe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function mWt(e){const t=[];for(const n of Ge(e))if(g1(e,n)){const r=e[n],i=dt(r);for(const s of i)Je(s)?t.push(s):gF(s)&&t.push(s.condition)}return t}function nne(e,t,n){if(e)for(const r of Ge(e)){const i=e[r];if(Fe(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function gWt(e,t,n,r){return e?Ge(e).reduce((i,s)=>{const o=e[s];return Fe(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function i6e(e,t){return Ge(t).reduce((n,r)=>{switch(r){case Ei:case ao:case tF:case rF:case nF:case Zf:case Wh:case Py:case ES:case jc:case Wm:case ed:case qm:case td:case nd:case rd:case Ic:case Kk:case Gu:case $b:case tb:return n;case ex:if(e==="line"||e==="trail")return n;case Xk:case eF:{const i=t[r];if(Fe(i)||Je(i))for(const s of dt(i))s.aggregate||n.push(at(s,{}));return n}case Gm:if(e==="trail")return n;case Wu:case Gh:case Yh:case Ym:case Oy:case $y:case Ly:case My:{const i=Th(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function yWt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Fe(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Fe(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function KV(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${rne(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=mWt(n).map(Zqt);return{tooltip:[...i,...Hd(s,Un)]}}function rne(e){const{title:t,field:n}=e;return os(t,n)}function ine(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=rne(n);return s6e(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...ht(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function s6e(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Sh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Ry(e[t])?{}:e[t]}}]:[]}function o6e(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:XN(s,n),continuousAxisChannelDef2:XN(o,n),continuousAxisChannelDefError:XN(a,n),continuousAxisChannelDefError2:XN(u,n),continuousAxis:i}}function XN(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Qe(BHt(n,t)),r}else return e}function a6e(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Sh(n)&&n.orient)return n.orient;if(Wg(i)){if(Wg(s)){const o=Je(i)&&i.aggregate,a=Je(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return ox(s)&&!ox(i)?"horizontal":"vertical"}return"horizontal"}else{if(Wg(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Q$="boxplot",vWt=["box","median","outliers","rule","ticks"],bWt=new bF(Q$,l6e);function u6e(e){return ar(e)?"tukey":e}function l6e(e,{config:t}){e={...e,encoding:_F(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Sh(n)?n:{type:n};i&&Qe(sLe("boxplot"));const u=a.extent??t.boxplot.extent,l=vr("size",a,t),c=a.invalid,f=u6e(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:T}=_Wt(e,u,t),S=wS(m.field),{color:C,size:A,...R}=b,k=Me=>ine(a,g,m,Me,t.boxplot),O=k(R),D=k(b),$=(mt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",L=k({...R,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:$}}}}),F=KV([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?F:KV([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),q=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],P=[...f!=="tukey"?q:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:F}),...L({partName:"median",mark:{type:"tick",invalid:c,...mt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:F})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:P};const V=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${V})`,H=`${V} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,pe={joinaggregate:c6e(m.field),groupby:y},fe={transform:[{filter:`(${H} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:q},{tooltip:de,...ye}=R,{scale:Ae,axis:ve}=m,rt=rne(m),ze=$u(ve,["title"]),yt=s6e(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${H}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...rt!==void 0?{title:rt}:{},...Ae!==void 0?{scale:Ae}:{},...Lr(ze)?{}:{axis:ze}},...ye,...C?{color:C}:{},...T?{tooltip:T}:{}}})[0];let ot;const De=[...d,...h,pe];return yt?ot={transform:De,layer:[yt,fe]}:(ot=fe,ot.transform.unshift(...De)),{...o,layer:[ot,{transform:p,layer:P}]}}function c6e(e){const t=wS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function _Wt(e,t,n){const r=a6e(e,Q$),{continuousAxisChannelDef:i,continuousAxis:s}=o6e(e,r,Q$),o=i.field,a=wS(o),u=u6e(t),l=[...c6e(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=yWt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=r6e(p,n),w=r==="vertical"?"horizontal":"vertical",x=r,T=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:T,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:x,customTooltipWithoutAggregatedField:h}}const sne="errorbar",wWt=["ticks","rule"],EWt=new bF(sne,f6e);function f6e(e,{config:t}){e={...e,encoding:_F(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=d6e(e,sne,t);delete s.size;const c=ine(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function xWt(e,t){const{encoding:n}=e;if(SWt(n))return{orient:a6e(e,t),inputType:"raw"};const r=TWt(n),i=CWt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(an(a)&&an(u))throw new Error(`${t} cannot have both x2 and y2`);if(an(a)){if(Wg(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(an(u)){if(Wg(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(an(u)&&!an(a))throw new Error(`${t} cannot have xError2 without xError`);if(an(c)&&!an(l))throw new Error(`${t} cannot have yError2 without yError`);if(an(a)&&an(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(an(a)){if(Wg(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(an(l)){if(Wg(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function SWt(e){return(an(e.x)||an(e.y))&&!an(e.x2)&&!an(e.y2)&&!an(e.xError)&&!an(e.xError2)&&!an(e.yError)&&!an(e.yError2)}function TWt(e){return an(e.x2)||an(e.y2)}function CWt(e){return an(e.xError)||an(e.xError2)||an(e.yError)||an(e.yError2)}function d6e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Sh(r)?r:{type:r};s&&Qe(sLe(t));const{orient:l,inputType:c}=xWt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=o6e(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=AWt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:x,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:S,...C}=i,{bins:A,timeUnits:R,aggregate:k,groupby:O,encoding:D}=r6e(C,n),$=[...k,...g],L=c!=="raw"?[]:O,F=KV(v,f,D,b);return{transform:[...a.transform??[],...A,...R,...$.length===0?[]:[{aggregate:$,groupby:L}],...y],groupby:L,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:F}}function AWt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Qe(jHt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:Yk(h)},{fieldPrefix:"upper_",titlePrefix:Vpe(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Vpe(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Vw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Vw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Vw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Qe(FHt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:eb(eb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Vpe(e,t,n){return`${Yk(e)} ${n} ${t}`}const one="errorband",IWt=["band","borders"],kWt=new bF(one,h6e);function h6e(e,{config:t}){e={...e,encoding:_F(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=d6e(e,one,t),l=o,c=ine(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Qe(Ope("interpolate")):l.tension&&Qe(Ope("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const p6e={};function ane(e,t,n){const r=new bF(e,t);p6e[e]={normalizer:r,parts:n}}function RWt(){return Ge(p6e)}ane(Q$,l6e,vWt);ane(sne,f6e,wWt);ane(one,h6e,IWt);const NWt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],m6e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},g6e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},DWt=Ge(m6e),PWt=Ge(g6e),OWt={header:1,headerRow:1,headerColumn:1,headerFacet:1},y6e=Ge(OWt),v6e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],$Wt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},MWt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Gf="_vgsid_",LWt={point:{on:"click",fields:[Gf],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function une(e){return e==="legend"||!!(e!=null&&e.legend)}function m9(e){return une(e)&&mt(e)}function lne(e){return!!(e!=null&&e.select)}function b6e(e){const t=[];for(const n of e||[]){if(lne(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function FWt(e){return wF(e)||fne(e)||cne(e)}function cne(e){return"concat"in e}function wF(e){return"vconcat"in e}function fne(e){return"hconcat"in e}function _6e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Ch(e){return mt(e)&&e.step!==void 0}function Hpe(e){return e.view||e.width||e.height}const qpe=20,jWt={align:1,bounds:1,center:1,columns:1,spacing:1},BWt=Ge(jWt);function UWt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(pF(e)&&!tR(e.facet)||cne(e))&&(i.columns=o),wF(e)&&(i.columns=1);for(const a of BWt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=ar(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function XV(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function J$(e,t){const n=Z$(e,t);return Ch(n)?n.step:w6e}function Z$(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return os(n,{step:e.step})}const w6e=20,zWt={continuousWidth:200,continuousHeight:200,step:w6e},VWt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:zWt,mark:zqt,arc:{},area:{},bar:qqt,circle:{},geoshape:{},image:{},line:{},point:{},rect:Wqt,rule:{color:"black"},square:{},text:{color:"black"},tick:Gqt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:yqt,projection:{},legend:$Wt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:LWt,style:{},title:{},facet:{spacing:qpe},concat:{spacing:qpe},normalizedNumberFormat:".0%"},ap=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Wpe={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Gpe={blue:ap[0],orange:ap[1],red:ap[2],teal:ap[3],green:ap[4],yellow:ap[5],purple:ap[6],pink:ap[7],brown:ap[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function HWt(e={}){return{signals:[{name:"color",value:mt(e)?{...Gpe,...e}:Gpe}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function qWt(e){return{signals:[{name:"fontSize",value:mt(e)?{...Wpe,...e}:Wpe}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function WWt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function E6e(e){const t=Ge(e||{}),n={};for(const r of t){const i=e[r];n[r]=iR(i)?JMe(i):fl(i)}return n}function GWt(e){const t=Ge(e),n={};for(const r of t)n[r]=E6e(e[r]);return n}const YWt=[...FLe,...e6e,...y6e,"background","padding","legend","lineBreak","scale","style","title","view"];function x6e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=cS({},en(VWt),n?WWt(n):{},t?HWt(t):{},r?qWt(r):{},s||{});i&&fS(o,"selection",i,!0);const a=$u(o,YWt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=fl(o[u]));for(const u of FLe)o[u]&&(a[u]=bu(o[u]));for(const u of e6e)o[u]&&(a[u]=E6e(o[u]));for(const u of y6e)o[u]&&(a[u]=bu(o[u]));return o.legend&&(a.legend=bu(o.legend)),o.scale&&(a.scale=bu(o.scale)),o.style&&(a.style=GWt(o.style)),o.title&&(a.title=bu(o.title)),o.view&&(a.view=bu(o.view)),a}const KWt=new Set(["view",...Mqt]),XWt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],QWt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Uqt};function JWt(e){e=en(e);for(const t of XWt)delete e[t];if(e.axis)for(const t in e.axis)iR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of NWt)delete e.legend[t];if(e.mark){for(const t of Lpe)delete e.mark[t];e.mark.tooltip&&mt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(b6e(e.params)),delete e.params);for(const t of KWt){for(const r of Lpe)delete e[t][r];const n=QWt[t];if(n)for(const r of n)delete e[t][r];eGt(e,t)}for(const t of RWt())delete e[t];ZWt(e);for(const t in e)mt(e[t])&&Lr(e[t])&&delete e[t];return Lr(e)?void 0:e}function ZWt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=QMe(e.title);Lr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Lr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Lr(r)?delete e.title:e.title=r}function eGt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Lr(s)||(e.style[n??t]=s),delete e[t]}function EF(e){return"layer"in e}function tGt(e){return"repeat"in e}function nGt(e){return!Fe(e.repeat)&&e.repeat.layer}class dne{map(t,n){return pF(t)?this.mapFacet(t,n):tGt(t)?this.mapRepeat(t,n):fne(t)?this.mapHConcat(t,n):wF(t)?this.mapVConcat(t,n):cne(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(EF(t))return this.mapLayer(t,n);if(Xm(t))return this.mapUnit(t,n);throw new Error(Ite(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const rGt={zero:1,center:1,normalize:1};function iGt(e){return e in rGt}const sGt=new Set([$Le,cF,lF,W$,dF,Yte,Kte,fF,MLe,Gte]),oGt=new Set([cF,lF,$Le]);function y_(e){return Je(e)&&ix(e)==="quantitative"&&!e.bin}function Ype(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Je(o)&&Je(a))if(y_(o)&&y_(a)){if(o.stack)return t;if(a.stack)return i;const u=Je(o)&&!!o.aggregate,l=Je(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(y_(o))return t;if(y_(a))return i}else{if(y_(o))return s&&n==="vertical"?void 0:t;if(y_(a))return s&&n==="horizontal"?void 0:i}}function aGt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function S6e(e,t){var m,g;const n=Sh(e)?e:{type:e},r=n.type;if(!sGt.has(r))return null;const i=Ype(t,"x",n)||Ype(t,"theta",n);if(!i)return null;const s=t[i],o=Je(s)?at(s,{}):void 0,a=aGt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Je(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Je(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=_Vt.reduce((y,v)=>{if(v!=="tooltip"&&g1(t,v)){const b=t[v];for(const w of dt(b)){const x=Th(w);if(x.aggregate)continue;const T=at(x,{});(!T||!l.has(T))&&y.push({channel:v,fieldDef:x})}}return y},[]);let p;return s.stack!==void 0?Ry(s.stack)?p=s.stack?"zero":null:p=s.stack:oGt.has(r)&&(p="zero"),!p||!iGt(p)||tne(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Mu.LINEAR&&s!=null&&s.stack&&Qe($Ht(s.scale.type)),an(t[Kh(i)])?(s.stack!==void 0&&Qe(OHt(i)),null):(Je(s)&&s.aggregate&&!DVt.has(s.aggregate)&&Qe(MHt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Bb(r),stackBy:h,offset:p}))}function T6e(e,t,n){const r=bu(e),i=vr("orient",r,n);if(r.orient=fGt(r.type,t,i),i!==void 0&&i!==r.orient&&Qe(vHt(r.orient,i)),r.type==="bar"&&r.orient){const u=vr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:Hqt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=vr("opacity",r,n),o=vr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=lGt(r.type,t)),vr("cursor",r,n)===void 0&&(r.cursor=uGt(r,t,n)),r}function uGt(e,t,n){return t.href||e.href||vr("href",e,n)?"pointer":e.cursor}function lGt(e,t){if(zn([dF,Gte,Yte,Kte],e)&&!tne(t))return .7}function cGt(e,t,{graticule:n}){if(n)return!1;const r=Cm("filled",e,t),i=e.type;return os(r,i!==dF&&i!==fF&&i!==W$)}function fGt(e,t,n){switch(e){case dF:case Yte:case Kte:case MLe:case Oqt:case Pqt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case cF:if(Je(r)&&(_o(r.bin)||Je(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Je(i)&&(_o(i.bin)||Je(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Je(r)&&r.type===rb&&!ri(r.bin)||G$(r))&&Je(i)&&_o(i.bin)?"horizontal":"vertical";if(!o)return(Je(i)&&i.type===rb&&!ri(i.bin)||G$(i))&&Je(r)&&_o(r.bin)?"vertical":"horizontal"}case W$:if(s&&!(Je(r)&&_o(r.bin))&&o&&!(Je(i)&&_o(i.bin)))return;case lF:if(o)return Je(i)&&_o(i.bin)?"horizontal":"vertical";if(s)return Je(r)&&_o(r.bin)?"vertical":"horizontal";if(e===W$){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case fF:case Gte:{const a=Bpe(r),u=Bpe(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=Xa(r)&&r.type===nx,c=Xa(i)&&i.type===nx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function dGt(e){const{point:t,line:n,...r}=e;return Ge(r).length>1?r:r.type}function hGt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:$u(e[t],["point","line"])});return e}function g9(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?mt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?mt(t.point)?t.point:{}:void 0}function Kpe(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class pGt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Xm(t)){const{mark:r,encoding:i}=t,s=Sh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!g9(s,n[s.type],i);case"area":return!!g9(s,n[s.type],i)||!!Kpe(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=_F(l,i),d=Sh(a)?a:{type:a},h=g9(d,i[d.type],f),p=d.type==="area"&&Kpe(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:dGt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:$u(f,["shape"])}],g=S6e(T6e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=$u(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...JE(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...JE(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:hGt(i)})}}function mGt(e,t){return t?tR(e)?A6e(e,t):C6e(e,t):e}function y9(e,t){return t?A6e(e,t):e}function QV(e,t,n){const r=t[e];if(Qqt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Qe(JVt(r.repeat));return}return t}function C6e(e,t){if(e=QV("field",e,t),e!==void 0){if(e===null)return null;if(Qte(e)&&oh(e.sort)){const n=QV("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Xpe(e,t){if(Je(e))return C6e(e,t);{const n=QV("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Qpe(e,t){if(an(e)){const n=Xpe(e,t);if(n)return n;if(mF(e))return{condition:e.condition}}else{if(nR(e)){const n=Xpe(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function A6e(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(Fe(i))n[r]=i.map(s=>Qpe(s,t)).filter(s=>s);else{const s=Qpe(i,t);s!==void 0&&(n[r]=s)}}return n}class gGt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Xm(t)){const{encoding:n,mark:r}=t;if(r==="line"||Sh(r)&&r.type==="line")for(const i of yVt){const s=Mb(i),o=n[s];if(n[i]&&(Je(o)&&!_o(o.bin)||Qh(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Qe(yHt(!!i.x2,!!i.y2)),r({...t,mark:mt(s)?{...s,type:"rule"}:"rule"},n)}}class yGt extends dne{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[bWt,EWt,kWt,new pGt,new gGt]}map(t,n){if(Xm(t)){const r=g1(t.encoding,Xp),i=g1(t.encoding,Qp),s=g1(t.encoding,Z4);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=y9(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return nGt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${wi(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Fe(r)&&t.columns&&(t=$u(t,["columns"]),Qe(Rpe("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Fe(r)&&r.row||[u?u.row:null],f=!Fe(r)&&r.column||[u?u.column:null],d=Fe(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Fe(r)?`${wi(p)}`:(r.row?`row_${wi(m)}`:"")+(r.column?`column_${wi(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push($u(b,["data"]))}const h=Fe(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return tR(r)&&t.columns&&(t=$u(t,["columns"]),Qe(Rpe("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Zpe({parentProjection:o,projection:i}),l=Jpe({parentEncoding:s,encoding:y9(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=y9(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Qe(mHt([...r?[Xp]:[],...i?[Qp]:[]]));const o={},a={};for(const u of[Xp,Qp]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:mGt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Jpe({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Zpe({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Jpe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ge(e),...Ge(t)]);for(const s of i){const o=t[s],a=e[s];if(an(o)){const u={...a,...o};r[s]=u}else nR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Wf(a)||Rt(a)||an(a)||Fe(a))&&(r[s]=a)}}else r=t;return!r||Lr(r)?void 0:r}function Zpe(e){const{parentProjection:t,projection:n}=e;return t&&n&&Qe(iHt({parentProjection:t,projection:n})),n??t}function hne(e){return"filter"in e}function vGt(e){return(e==null?void 0:e.stop)!==void 0}function I6e(e){return"lookup"in e}function bGt(e){return"data"in e}function _Gt(e){return"param"in e}function wGt(e){return"pivot"in e}function EGt(e){return"density"in e}function xGt(e){return"quantile"in e}function SGt(e){return"regression"in e}function TGt(e){return"loess"in e}function CGt(e){return"sample"in e}function AGt(e){return"window"in e}function IGt(e){return"joinaggregate"in e}function kGt(e){return"flatten"in e}function RGt(e){return"calculate"in e}function k6e(e){return"bin"in e}function NGt(e){return"impute"in e}function DGt(e){return"timeUnit"in e}function PGt(e){return"aggregate"in e}function OGt(e){return"stack"in e}function $Gt(e){return"fold"in e}function MGt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function LGt(e){return e.map(t=>hne(t)?{filter:Uw(t.filter,cqt)}:t)}class FGt extends dne{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=eme(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=eme(t,n),t.encoding){const r={};for(const[i,s]of J0(t.encoding))r[i]=R6e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:J0(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of ko(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function eme(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(hne(s))return{filter:JV(s,t)};if(k6e(s)&&Lb(s.bin))return{...s,bin:N6e(s.bin)};if(I6e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function R6e(e,t){var r,i;const n=en(e);if(Je(n)&&Lb(n.bin)&&(n.bin=N6e(n.bin)),Ub(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(mF(n))if(Fe(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:JV(s,t)}});else{const{selection:s,param:o,test:a,...u}=R6e(n.condition,t);n.condition=o?n.condition:{...u,test:JV(n.condition,t)}}return n}function N6e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function JV(e,t){const n=r=>Uw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Uw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class ZV extends dne{map(t,n){const r=n.selections??[];if(t.params&&!Xm(t)){const i=[];for(const s of t.params)lne(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(ht(a)&&(a===t.name||i.includes(a))||Fe(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=ZV.prototype[e];ZV.prototype[e]=function(n,r){return t.call(this,n,jGt(n,r))}}function jGt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function D6e(e,t){t===void 0&&(t=x6e(e.config));const n=VGt(e,t),{width:r,height:i}=e,s=HGt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const BGt=new yGt,UGt=new FGt,zGt=new ZV;function VGt(e,t={}){const n={config:t};return zGt.map(BGt.map(UGt.map(e,n),n),n)}function tme(e){return ht(e)?{type:e}:e??{}}function HGt(e,t,n){let{width:r,height:i}=t;const s=Xm(e)||EF(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Qe(Cpe("width")),r=void 0),i=="container"&&(Qe(Cpe("height")),i=void 0));const a={type:"pad",...o,...n?tme(n.autosize):{},...tme(e.autosize)};if(a.type==="fit"&&!s&&(Qe(UVt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Qe(Ape("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Qe(Ape("height")),!_l(a,{type:"pad"}))return a}function qGt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function WGt(e){return e?`fit-${iF(e)}`:"fit"}const GGt=["background","padding"];function nme(e,t){const n={};for(const r of GGt)e&&e[r]!==void 0&&(n[r]=fl(e[r]));return t&&(n.params=e.params),n}class Qm{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Qm(en(this.explicit),en(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return os(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ge(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ed(e){return{explicit:!0,value:e}}function rl(e){return{explicit:!1,value:e}}function P6e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:xF(t,n,r,i)}}function xF(e,t,n,r){return e.explicit&&t.explicit&&Qe(AHt(n,r,e.value,t.value)),e}function ty(e,t,n,r,i=xF){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:_l(e.value,t.value)?e:i(e,t,n,r)}class YGt extends Qm{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function ax(e){return"url"in e}function sI(e){return"values"in e}function O6e(e){return"name"in e&&!ax(e)&&!sI(e)&&!g0(e)}function g0(e){return e&&($6e(e)||M6e(e)||pne(e))}function $6e(e){return"sequence"in e}function M6e(e){return"sphere"in e}function pne(e){return"graticule"in e}var yi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(yi||(yi={}));function L6e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Ac(i.field),i}function ob(e,t=!0,n=ya){if(Fe(e)){const r=e.map(i=>ob(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Fb(e))return n(t?nb(e):JHt(e));return t?n(Fr(e)):e}function KGt(e,t){for(const n of ko(e.component.selection??{})){const r=n.name;let i=`${r}${ry}, ${n.resolve==="global"?"true":`{unit: ${y1(e)}}`}`;for(const s of AF)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+AYt,on:[{events:{signal:n.name+ry},update:`modify(${nt(n.name+ab)}, ${i})`}]})}return mne(t)}function XGt(e,t){if(e.component.selection&&Ge(e.component.selection).length){const n=nt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Dy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return mne(t)}function QGt(e,t){let n=!1;for(const r of ko(e.component.selection??{})){const i=r.name,s=nt(i+ab);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${t4e}(${s}, ${nt(a)}${u}`})}n=!0;for(const a of AF)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),mne(t)}function JGt(e,t){const n=[...t],r=y1(e,{escape:!1});for(const i of ko(e.component.selection??{})){const s={name:i.name+ab};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:Gf}}]),i.init){const a=i.project.items.map(L6e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[Gf]:ob(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:ob(u,!1)}))}n.filter(a=>a.name===i.name+ab).length||n.push(s)}return n}function F6e(e,t){for(const n of ko(e.component.selection??{}))for(const r of AF)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function ZGt(e,t){for(const n of e.children)Vi(n)&&(t=F6e(n,t));return t}function eYt(e,t,n,r){const i=o4e(e,t.param,t);return{signal:Fl(n.get("type"))&&Fe(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function mne(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Or{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Qe(tHt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Lu extends Or{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${OMe()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function v9(e){return e.as!==void 0}function rme(e){return`${e}_end`}class ah extends Or{clone(){return new ah(null,en(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(jb(u)){if(Vi(n)){const{mark:c,markDef:f,config:d}=n,h=ey({fieldDef:s,markDef:f,config:d});(iI(c)||h)&&(l={timeUnit:io(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Vi(n)){const{mark:c,markDef:f,config:d}=n,h=ey({fieldDef:s,markDef:f,config:d});iI(c)&&as(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Un(l)]=l)}return i},{});return Lr(r)?null:new ah(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=io(r),o={...i,timeUnit:s};return new ah(t,{[Un(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of J0(this.timeUnits)){const s=v9(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(ko(this.timeUnits).map(t=>v9(t)?t.as:rme(t.field)))}dependentFields(){return new Set(ko(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Un(this.timeUnits)}`}assemble(){const t=[];for(const n of ko(this.timeUnits)){const{rectBandPosition:r}=n,i=io(n.timeUnit);if(v9(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Ac(s),type:"timeunit",...a?{units:uF(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...ime(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=j6e({timeUnit:i,field:o}),u=rme(o);t.push({type:"formula",expr:a,as:u}),t.push(...ime([o,u],r,i))}}return t}}const SF="offsetted_rect_start",TF="offsetted_rect_end";function j6e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=gLe(r),{part:o,step:a}=_Le(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function ime([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:sme([j6e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${SF}`},{type:"formula",expr:sme([i,s],n+.5),as:`${e}_${TF}`}]}return[]}function sme([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const sR="_tuple_fields";class tYt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const nYt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new tYt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=wi(`${r}_${g}`);for(let v=1;a.has(y);v++)y=wi(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?dt(n.value):null;let{fields:d,encodings:h}=mt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(mt(p))for(const m of Ge(p))gVt(m)?(h||(h=[])).push(m):l==="interval"?(Qe(QVt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Qe(zVt(p,m.aggregate));continue}else if(!g){Qe(kpe(p));continue}if(m.timeUnit&&!jb(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Un(y)]=y}if(!s[g]){const y=l==="interval"&&Km(p)&&Fl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===Gf,BMe(p)?(v.geoChannel=p,v.channel=jMe(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Qe(kpe(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===Gf}f&&(t.init=f.map(p=>i.items.map(m=>mt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Lr(o)||(i.timeUnit=new ah(null,o))},signals:(e,t,n)=>{const r=t.name+sR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(L6e)})}},Jp={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Km(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Qe(WVt),!s||!Fl(o)){Qe(qVt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||ome(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(t4e)>=0)i.update=`{${r.map(o=>`${nt(Ac(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${nt(Ac(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!ome(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function eH(e,t){return`domain(${nt(e.scaleName(t))})`}function ome(e){return e.parent&&IS(e.parent)&&!e.parent.parent}const Hw="_brush",B6e="_scale_trigger",AT="geo_interval_init_tick",U6e="_init",rYt="_center",iYt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...mt(n.select)?n.select:{}};i.fields=[Gf],i.encodings||(i.encodings=n.value?Ge(n.value):[nd,td]),n.select={type:"interval",...i}}if(t.translate&&!Jp.defined(t)){const i=`!event.item || event.item.mark.name !== ${nt(t.name+Hw)}`;for(const s of t.events){if(!s.between){Qe(`${s} is not an ordered event stream for interval selections.`);continue}const o=dt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ry,s=ko(t.project.hasChannel).filter(a=>a.channel===Ei||a.channel===ao),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(sYt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=nt(e.projectionName()),u=e.projectionName()+rYt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=x=>e.getSizeSignalRef(x).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+U6e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${nt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${y1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(x=>x.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:AT}]:[]],update:b}]})}else{if(!Jp.defined(t)){const l=r+B6e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=nt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Fl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${y1(e)}, fields: ${r+sR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${ob(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Vi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===AT).length||n.unshift({name:AT,value:null,on:[{events:"timer{1}",update:`${AT} === null ? {} : ${AT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${nt(t.name+ab)})`;if(Jp.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ge(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${y1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ge(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Hw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Hw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function sYt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=nt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ei?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=Jp.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:ob(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+B6e},update:Fl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:ob(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ei?0:1,h=t.name+U6e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const oYt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+sR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=ko(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Hw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${y1(e)}, `;if(t.project.hasSelectionId)l+=`${Gf}: ${o}[${nt(Gf)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${nt(e.vgField(d.channel,{}))}], ${o}[${nt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${nt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+ry,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function SS(e,t,n,r){const i=mF(t)&&t.condition,s=r(t);if(i){const a=dt(i).map(u=>{const l=r(u);if(Xqt(u)){const{param:c,empty:f}=u;return{test:s4e(e,{param:c,empty:f}),...l}}else return{test:nM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function gne(e,t="text"){const n=e.encoding[t];return SS(e,n,t,r=>CF(r,e.config))}function CF(e,t,n="datum"){if(e){if(Wf(e))return li(e.value);if(an(e)){const{format:r,formatType:i}=K$(e);return Wte({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function z6e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Fe(o))return{tooltip:ame({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return SS(e,o,"tooltip",u=>{const l=CF(u,i,a);if(l)return l;if(u===null)return;let c=vr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),ht(c))return{value:c};if(mt(c))return Rt(c)?c:c.content==="encoding"?ame(n,s,i,t):{signal:a}})}}function V6e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Mb(f),h=Xa(c)?c:{...c,type:e[d].type},p=h.title||Zte(h,i),m=dt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(as(f)){const y=f==="x"?"x2":"y2",v=Th(e[y]);if(_o(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:x,formatType:T}=K$(h);g=eR(b,w,x,T,i),s[y]=!0}}if((as(f)||f===jc||f===ed)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=K$(h);g=Wte({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=CF(h,i,o).signal),a.push({channel:f,key:m,value:g})}nne(e,(c,f)=>{Je(c)?u(c,f):gF(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function ame(e,t,n,{reactiveGeom:r}={}){const i=V6e(e,t,n,{reactiveGeom:r}),s=J0(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function aYt(e){const{markDef:t,config:n}=e,r=vr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...uYt(e),...lYt(e)}}function uYt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=vr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in FVt?{}:{ariaRoleDescription:{value:t}}}function lYt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return SS(e,s,"description",u=>CF(u,e.config));const o=vr("description",n,r);if(o!=null)return{description:li(o)};if(r.aria===!1)return{};const a=V6e(t,i,r);if(!Lr(a))return{description:{signal:J0(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function Ys(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=vr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=li(u)));const l=i[e];return SS(t,l,o??e,c=>qte({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function H6e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??vr("filled",n,i),a=zn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=vr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=vr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:li(u)}:{},...l?{stroke:li(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Qe(aLe("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Ys("color",e,{vgChannel:c,defaultValue:o?u:l}),...Ys("fill",e,{defaultValue:r.fill?u:void 0}),...Ys("stroke",e,{defaultValue:r.stroke?l:void 0})}}function cYt(e){const{encoding:t,mark:n}=e,r=t.order;return!Bb(n)&&Wf(r)?SS(e,r,"zindex",i=>li(i.value)):{}}function ux({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:qte({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:li(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ua(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[Kh(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=ux({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=yne({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&as(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:fYt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function fYt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(an(n)&&i&&t===i.fieldChannel){if(Je(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return q$({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return m1(n,r,{suffix:"end"},{offset:s})}return Vte(e)}function yne({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Mb(n),u=Z0(n),l=vr(n,s,o,{vgChannel:u});if(l!==void 0)return bA(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!zn([Mu.LOG,Mu.TIME,Mu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[Yu(n)],mult:.5}}}}const dYt={left:"x",center:"xc",right:"x2"},hYt={top:"y",middle:"yc",bottom:"y2"};function q6e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Z0(e);const i=e==="x"?"align":"baseline",s=vr(i,t,n);let o;return Rt(s)?(Qe(gHt(i)),o=void 0):o=s,e==="x"?dYt[o||(r==="top"?"left":"center")]:hYt[o||r]}function eM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?W6e(e,t,{defaultPos:n,defaultPos2:r}):ua(e,t,{defaultPos:n})}function W6e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=Kh(e),a=Yu(e),u=pYt(t,r,o),l=u[a]?q6e(e,i,s):Z0(e);return{...ua(e,t,{defaultPos:n,vgChannel:l}),...u}}function pYt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Mb(n),l=Yu(n),c=Z0(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?ux({channel:n,markDef:s,encoding:r,model:e}):ux({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=Yu(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=mYt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:QN(n,s)||QN(n,{[n]:V$(n,s,a.style),[l]:V$(l,s,a.style)})||QN(n,a[i])||QN(n,a.mark)||{[c]:yne({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function mYt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return an(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?m1(t,s,{suffix:"start"},{offset:u}):Vte({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function QN(e,t){const n=Yu(e),r=Z0(e);if(t[r]!==void 0)return{[r]:bA(e,t[r])};if(t[e]!==void 0)return{[r]:bA(e,t[e])};if(t[n]){const i=t[n];if(sb(i))Qe(cHt(n));else return{[n]:bA(e,i)}}}function ny(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=Kh(t),a=Yu(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??vr("size",i,n,{vgChannel:a}),p=HMe(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Je(u)&&(ri(u.bin)||_o(u.bin)||u.timeUnit&&!l)&&!(h&&!sb(h))&&!r[p]&&!so(f)?vYt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(an(u)&&so(f)||m)&&!l?yYt(u,t,e):W6e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function gYt(e,t,n,r,i,s,o){if(sb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Cm("minBandSize",{type:o},r);return{signal:c?`max(${Ef(c)}, ${l})`:l}}else i.band!==1&&(Qe(_Ht(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(jy(u)&&ar(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=os(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(ar(f))return{signal:`${1-f} * ${e}`}}return{value:J$(r.view,e)-2}}function yYt(e,t,n){var A,R;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=Yu(t),f=Kh(t),d=HMe(t),h=n.scaleName(d),p=n.getScaleComponent(xte(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=Ys("size",n,{vgChannel:c,defaultRef:li(r.size)}):Qe(SHt(r.type)));const y=!!g,v=zLe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:gYt(c,h||u,p||l,s,v,!!e,r.type)};const b=((R=l||p)==null?void 0:R.get("type"))==="band"&&sb(v)&&!y?"top":"middle",w=q6e(t,r,s,b),x=w==="xc"||w==="yc",{offset:T,offsetType:S}=ux({channel:t,markDef:r,encoding:i,model:n,bandPosition:x?.5:0}),C=Vte({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:yne({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:x?S==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:sb(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const k=Z0(f),O=g[c],D=T?{...O,offset:T}:O;return{[w]:C,[k]:Fe(C)?[C[0],{...C[1],offset:D}]:{...C,offset:D}}}}function ume(e,t,n,r,i,s,o){if(FMe(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=Ef(n),c=Ef(i),f=Ef(r),d=Ef(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function vYt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var R;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=zLe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(R=r.component.axes[n])==null?void 0:R[0],h=(d==null?void 0:d.get("translate"))??.5,p=as(n)?vr("binSpacing",s,i)??0:0,m=Kh(n),g=Z0(n),y=Z0(m),v=Cm("minBandSize",s,i),{offset:b}=ux({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=ux({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),x=kqt({fieldDef:e,scaleName:u}),T=ume(n,p,c,h,b,v,x),S=ume(m,p,c,h,w??b,v,x),C=Rt(f)?{signal:`(1-${f.signal})/2`}:sb(f)?(1-f.band)/2:.5,A=ey({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(ri(e.bin)||e.timeUnit){const k=e.timeUnit&&A!==.5;return{[y]:lme({fieldDef:e,scaleName:u,bandPosition:C,offset:S,useRectOffsetField:k}),[g]:lme({fieldDef:e,scaleName:u,bandPosition:Rt(C)?{signal:`1-${C.signal}`}:1-C,offset:T,useRectOffsetField:k})}}else if(_o(e.bin)){const k=m1(e,u,{},{offset:S});if(Je(t))return{[y]:k,[g]:m1(t,u,{},{offset:T})};if(Lb(e.bin)&&e.bin.step)return{[y]:k,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}Qe(cLe(m))}function lme({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return q$({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:SF,endSuffix:TF}:{}})}const bYt=new Set(["aria","width","height"]);function Bc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?H6e(e):{};return{..._Yt(e.markDef,t),...cme(e,"fill",n),...cme(e,"stroke",r),...Ys("opacity",e),...Ys("fillOpacity",e),...Ys("strokeOpacity",e),...Ys("strokeWidth",e),...Ys("strokeDash",e),...cYt(e),...z6e(e),...gne(e,"href"),...aYt(e)}}function cme(e,t,n){const{config:r,mark:i,markDef:s}=e;if(vr("invalid",s,r)==="hide"&&n&&!Bb(i)){const a=wYt(e,{invalid:!0,channels:sF});if(a)return{[t]:[{test:a,value:null},...dt(n)]}}return n?{[t]:n}:{}}function _Yt(e,t){return LVt.reduce((n,r)=>(!bYt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=li(e[r])),n),{})}function wYt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Fl(u)&&(s[l]=!0)}return s},{}),i=Ge(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Hte(o,t)).join(` ${s} `)}}function vne(e){const{config:t,markDef:n}=e;if(vr("invalid",n,t)){const i=EYt(e,{channels:Xh});if(i)return{defined:{signal:i}}}return{}}function EYt(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Fl(l)&&(s[c]=!0)}return s},{}),i=Ge(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Hte(o,t)).join(` ${s} `)}}function fme(e,t){if(t!==void 0)return{[e]:li(t)}}const b9="voronoi",G6e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(b9)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Bb(s))return Qe(VVt(s)),n;const o={name:e.getName(b9),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...z6e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(b9)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},Y6e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!une(e.bind),parse:(e,t,n)=>n4e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=G6e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=wi(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:ob(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${nt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+ry)[0],o=r+sR,a=i.items.map(l=>wi(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},tM="_toggle",K6e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+tM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ry,r=t.name+tM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${y1(e)}}, `)+`${r} ? ${n} : null`}},xYt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=ht(t.clear)?Dy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Y6e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===wi(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+ry);r(i,"null"),K6e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+tM),r(i,"false"))}return n}},X6e={defined:e=>{const t=e.resolve==="global"&&e.bind&&une(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Gf;return t&&!n&&Qe(GVt),t&&n},parse:(e,t,n)=>{const r=en(n);if(r.select=ht(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},n4e(t,r),mt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=dt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=m9(t.bind)?t.bind.legend:"click",s=ht(i)?Dy(i,"view"):dt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=m9(t.bind)&&t.bind.legend,s=o=>a=>{const u=en(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${wi(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+ry),o=r+sR,a=i.items.filter(d=>d.hasLegend).map(d=>wi(`${r}_${wi(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+tM),f=m9(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function SYt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of ko(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&X6e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const Q6e="_translate_anchor",J6e="_translate_delta",TYt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Jp.defined(t),s=r+Q6e,{x:o,y:a}=t.project.hasChannel;let u=Dy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Hw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?eH(e,Ei):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?eH(e,ao):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+J6e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&dme(e,t,o,"width",n),a!==void 0&&dme(e,t,a,"height",n),n}};function dme(e,t,n,r,i){const s=t.name,o=s+Q6e,a=s+J6e,u=n.channel,l=Jp.defined(t),c=i.filter(x=>x.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ei?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const Z6e="_zoom_anchor",e4e="_zoom_delta",CYt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Jp.defined(t),s=r+e4e,{x:o,y:a}=t.project.hasChannel,u=nt(e.scaleName(Ei)),l=nt(e.scaleName(ao));let c=Dy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Hw,f))),n.push({name:r+Z6e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&hme(e,t,o,"width",n),a!==void 0&&hme(e,t,a,"height",n),n}};function hme(e,t,n,r,i){const s=t.name,o=n.channel,a=Jp.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?eH(e,o):u.name,h=s+e4e,p=`${s}${Z6e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const ab="_store",ry="_tuple",AYt="_modify",t4e="vlSelectionResolve",AF=[oYt,iYt,nYt,K6e,Y6e,Jp,X6e,xYt,TYt,CYt,G6e];function IYt(e){let t=e.parent;for(;t&&!Sl(t);)t=t.parent;return t}function y1(e,{escape:t}={escape:!0}){let n=t?nt(e.name):e.name;const r=IYt(e);if(r){const{facet:i}=r;for(const s of dc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${nt(r.vgField(s))}])`)}return n}function bne(e){return ko(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function n4e(e,t){(ht(t.select)||!t.select.on)&&delete e.events,(ht(t.select)||!t.select.clear)&&delete e.clear,(ht(t.select)||!t.select.toggle)&&delete e.toggle}function tH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...tH(e.object)),t.push(...tH(e.property))),t)}function r4e(e){return e.object.type==="MemberExpression"?r4e(e.object):e.object.name==="datum"}function i4e(e){const t=jee(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&r4e(r)&&n.add(tH(r).slice(1).join("."))}),n}class TS extends Or{clone(){return new TS(null,this.model,en(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=nM(this.model,this.filter,this),this._dependentFields=i4e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function kYt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=wi(i.name),o=i.select,a=ht(o)?o:o.type,u=mt(o)?en(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=en(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:ht(u.on)?Dy(u.on,"scope"):dt(en(u.on))},f=en(i);for(const d of AF)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function s4e(e,t,n,r="datum"){const i=ht(t)?t:t.param,s=wi(i),o=nt(s+ab);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${nt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function o4e(e,t,n){const r=wi(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Qe(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${nt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Qe((a.length?"Multiple ":"No ")+`matching ${nt(i)} encoding found for selection ${nt(n.param)}. Using "field": ${nt(s)}.`)):s=a[0].field}return`${o.name}[${nt(Ac(s))}]`}function RYt(e,t){for(const[n,r]of J0(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Lu(new TS(t,e,{param:n}),i,yi.Lookup,e.component.data.outputNodeRefCounts)}}function nM(e,t,n){return vA(t,r=>ht(r)?r:aqt(r)?s4e(e,r,n):ELe(r))}function NYt(e,t){if(e)return Fe(e)&&!_g(e)?e.map(n=>Zte(n,t)).join(", "):e}function _9(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function _C(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=cWt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(iR(m)){const{condition:g,...y}=m,v=dt(g),b=Upe[h];if(b){const{vgProp:w,part:x}=b,T=[...v.map(S=>{const{test:C,...A}=S;return{test:nM(null,C),...A}}),y];_9(c,x,w,T),delete c[h]}else if(b===null){const w={signal:v.map(x=>{const{test:T,...S}=x;return`${nM(null,T)} ? ${Tpe(S)} : `}).join("")+Tpe(y)};c[h]=w}}else if(Rt(m)){const g=Upe[h];if(g){const{vgProp:y,part:v}=g;_9(c,v,y,m),delete c[h]}}zn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Lr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:os(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=eb(a,"datum.label",c.encode.labels.update.text.signal)),_9(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of JLe)e.hasAxisPart(p)||delete c.encode[p];Lr(c.encode)&&delete c.encode}const h=NYt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:os(l,0)}}}}function a4e(e){const{axes:t}=e.component,n=[];for(const r of Xh)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function DYt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>_C(i,"grid",t)),...r.map(i=>_C(i,"grid",t)),...n.map(i=>_C(i,"main",t)),...r.map(i=>_C(i,"main",t))].filter(i=>i)}function pme(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ge(o),...Ge(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Ef(o[c])} : ${Ef(a[c])}`};return l}return t[i]})])}function PYt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:CLe(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${Yk(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:pme(a,r,e,n),vgAxisConfig:pme(u,r,e,n),axisConfigStyle:OYt([...u,...a],r)}}function OYt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=dt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function nH(e,t,n,r={}){var s;const i=eLe(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const mme={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??$Yt(n,e),gridScale:({model:e,channel:t})=>MYt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||l4e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||u4e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??FYt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??jYt(t.type,n,Je(t)&&!!t.timeUnit,Je(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??UYt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:zYt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=c4e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return nLe(i?[jpe(i)]:[],Je(o)?[jpe(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>VYt(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??HYt(n,t)};function $Yt(e,t){return!so(e)&&Je(t)&&!ri(t==null?void 0:t.bin)&&!_o(t==null?void 0:t.bin)}function MYt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function LYt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:rI(s);{const{configValue:o}=nH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?rI(o):n===Ei&&zn([zte,Ute],e.type)&&!(Je(e)&&e.timeUnit)?270:void 0}}function rH(e){return`(((${e.signal} % 360) + 360) % 360)`}function u4e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=rH(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=rH(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function l4e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=rH(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function FYt(e,t){if(t==="x"&&zn(["quantitative","temporal"],e))return!0}function jYt(e,t,n,r){if(n&&!mt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function BYt(e){return e==="x"?"bottom":"left"}function UYt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!so(t)&&t!=="log"){if(Je(e)){if(ri(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&zn(["month","hours","day","quarter"],(i=io(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function zYt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Je(t)){const{timeUnit:n}=t;if(n){const r=bLe(n);if(r)return{signal:r}}}}function c4e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return rLe(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function VYt(e,t){const n=e.values;if(Fe(n))return QLe(t,n);if(Rt(n))return n}function HYt(e,t){return e==="rect"&&Y$(t)?1:0}class lx extends Or{clone(){return new lx(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=i4e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Ub(r)&&ULe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${ELe({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new lx(t,{calculate:u,as:cx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Un(this.transform)}`}}function cx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function IF(e,t){return zn(["top","bottom"],t)?"column":zn(["left","right"],t)||e==="row"?"row":"column"}function fx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return os((t||{})[e],i[e],n.header[e])}function kF(e,t,n,r){const i={};for(const s of e){const o=fx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const _ne=["row","column"],wne=["header","footer"];function qYt(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=kF(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=IF(t,a),l=rI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...d4e(l,u),...f4e(u,l,s),...h4e(r,i,t,DWt,m6e)}}}function f4e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=l4e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function d4e(e,t){const n=u4e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function WYt(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of wne)if(n[i])for(const s of n[i]){const o=YYt(e,t,i,n,s);o!=null&&r.push(o)}return r}function GYt(e,t){const{sort:n}=e;return oh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:Fe(n)?{field:cx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function iH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=kF(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Wte({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=IF(t,a);return{text:{signal:u?eb(eb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...d4e(s,c),...f4e(c,s,o),...h4e(n,e,t,PWt,g6e)}}function YYt(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=kF(["labelOrient"],o.header,a,t);(t==="row"&&!zn(["top","bottom"],f)||t==="column"&&!zn(["left","right"],f))&&(s=iH(o,t,a))}const u=Sl(e)&&!tR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:GYt(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const KYt={column:{start:0,end:1},row:{start:1,end:0}};function XYt(e,t){return KYt[t][e]}function QYt(e,t){const n={};for(const r of dc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=kF(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=IF(r,o),u=XYt(s,a);u!==void 0&&(n[a]=u)}}return Lr(n)?void 0:n}function h4e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=fx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Ene(e){return[...JN(e,"width"),...JN(e,"height"),...JN(e,"childWidth"),...JN(e,"childHeight")]}function JN(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(so(o)&&jy(a)){const u=e.scaleName(n);return Sl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[gme(u,a)]:[gme(u,a),{name:i,update:p4e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=XV(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function gme(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function p4e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=os(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Ef(o)}, ${Ef(s)}) * ${e}_step`}function m4e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function g4e(e,t){return Ge(e).reduce((n,r)=>{const i=e[r];return{...n,...SS(t,i,r,s=>li(s.value))}},{})}function y4e(e,t){if(Sl(t))return e==="theta"?"independent":"shared";if(IS(t))return"shared";if(kne(t))return as(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function xne(e,t){const n=e.scale[t],r=as(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Qe(kHt(t)),"independent"):e[r][t]||"shared"}const JYt={...MWt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},v4e=Ge(JYt);class ZYt extends Qm{}const yme={symbols:eKt,gradient:tKt,labels:nKt,entries:rKt};function eKt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...BVt({},n,jqt),...H6e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?b4e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Wu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=li(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=li(m??1));else if(Fe(f.fill)){const g=sH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=li(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Wu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Fe(f.stroke)){const g=os(sH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Ym){const g=Je(t)&&w4e(n,i,t);g?f.opacity=[{test:g,...li(m??1)},li(u.legend.unselectedOpacity)]:m&&(f.opacity=li(m))}return f={...f,...e},Lr(f)?void 0:f}function tKt(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?b4e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=li(l)),a={...a,...e},Lr(a)?void 0:a}function nKt(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Je(t)?w4e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;ib(c)?f=Sf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Sf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Je(t)&&t.timeUnit===void 0&&(f=Sf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Lr(d)?void 0:d}function rKt(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function b4e(e){return _4e(e,(t,n)=>Math.max(t,n.value))}function sH(e){return _4e(e,(t,n)=>os(t,n.value))}function _4e(e,t){if(Jqt(e))return dt(e.condition).reduce(t,e.value);if(Wf(e))return e.value}function w4e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=nt(n.field);return r.map(s=>`(!length(data(${nt(wi(s)+ab)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const vme={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return DLe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return PLe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??cKt(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??fKt(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??sKt(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Vw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(zw(n)&&xf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>iKt(t,e)};function iKt(e,t){const n=e.values;if(Fe(n))return QLe(t,n);if(Rt(n))return n}function sKt(e,t,n,r){if(t!=="shape"){const i=sH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function oKt(e){const{legend:t}=e;return os(t.type,aKt(e))}function aKt({channel:e,timeUnit:t,scaleType:n}){if(zw(e)){if(zn(["quarter","month","day"],t))return"symbol";if(xf(n))return"gradient"}return"symbol"}function uKt({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??lKt(n,t)}function lKt(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function cKt({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(xf(i))return n==="horizontal"?r==="top"||r==="bottom"?bme(t,"width",o,s):o:bme(t,"height",u,a)}function bme(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function fKt(e){if(zn(["quantile","threshold","log","symlog"],e))return"greedy"}function E4e(e){const t=Vi(e)?dKt(e):gKt(e);return e.component.legends=t,t}function dKt(e){const{encoding:t}=e,n={};for(const r of[Wu,...v6e]){const i=As(t[r]);!i||!e.getScaleComponent(r)||r===Gu&&Je(i)&&i.type===xS||(n[r]=mKt(e,r))}return n}function hKt(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function pKt(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function mKt(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new ZYt({},hKt(e,t));SYt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=As(i[t]),f=Je(c)?(w=io(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=oKt({legend:n,channel:t,timeUnit:f,scaleType:l}),p=uKt({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const x of v4e){if(h==="gradient"&&x.startsWith("symbol")||h==="symbol"&&x.startsWith("gradient"))continue;const T=x in vme?vme[x](m):n[x];if(T!==void 0){const S=pKt(T,x,n,e.fieldDef(t));(S||s.legend[x]===void 0)&&a.set(x,T,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const x of["labels","legend","title","symbols","gradient","entries"]){const T=g4e(g[x]??{},e),S=x in yme?yme[x](T,b):T;S!==void 0&&!Lr(S)&&(v[x]={...y!=null&&y.length&&Je(c)?{name:`${wi(c.field)}_legend_${x}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return Lr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function gKt(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){E4e(r);for(const i of Ge(r.component.legends))n.legend[i]=xne(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=x4e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ge(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function x4e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of v4e){const c=ty(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return yKt(f,d);case"title":return iLe(f,d);case"type":return i=!0,rl("symbol")}return xF(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&z$(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&z$(e.explicit,["encode","gradient"])),e}function yKt(e,t){return t.value==="circle"?t:e}function vKt(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function S4e(e){const t=e.component.legends,n={};for(const i of Ge(t)){const s=e.getScaleComponent(i),o=Fr(s.get("domains"));if(n[o])for(const a of n[o])x4e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return ko(n).flat().map(i=>bKt(i,e.config)).filter(i=>i!==void 0)}function bKt(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of v6e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=eb(r,"datum.label",s.encode.labels.update.text.signal)),vKt(s,"labels","text",{signal:l})}return s}}function _Kt(e){return IS(e)||kne(e)?wKt(e):T4e(e)}function wKt(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),T4e(e))}function T4e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return zn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const EKt=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class C4e extends Qm{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function A4e(e){e.component.projection=Vi(e)?xKt(e):CKt(e)}function xKt(e){if(e.hasProjection){const t=bu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?SKt(e):void 0,s=new C4e(e.projectionName(!0),{...bu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function SKt(e){const t=[],{encoding:n}=e;for(const r of[[nd,td],[Ic,rd]])(As(n[r[0]])||As(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Gu)&&e.typedFieldDef(Gu).type===xS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(yi.Main)),t}function TKt(e,t){const n=gte(EKt,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&_l(e.get(i),t.get(i))));if(_l(e.size,t.size)){if(n)return e;if(_l(e.explicit,{}))return t;if(_l(t.explicit,{}))return e}return null}function CKt(e){if(e.children.length===0)return;let t;for(const r of e.children)A4e(r);const n=gte(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=TKt(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new C4e(r,t.specifiedProjection,t.size,en(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function AKt(e,t,n,r){if(rR(t,n)){const i=Vi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:eR(s,o,i.format,i.formatType,r)}}return{}}function I4e(e,t){return`${XMe(e)}_${t}`}function IKt(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Sne(e,t,n){const r=yF(n,void 0)??{},i=I4e(r,t);return e.getName(`${i}_bins`)}function kKt(e){return"as"in e}function _me(e,t,n){let r,i;kKt(e)?r=ht(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...yF(t,void 0)},o=I4e(s,e.field),{signal:a,extentSignal:u}=IKt(n,o);if(oF(s.extent)){const c=s.extent;i=o4e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class uh extends Or{clone(){return new uh(null,en(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(Xa(s)&&ri(s.bin)){const{key:a,binComponent:u}=_me(s,s.bin,n);i[a]={...u,...i[a],...AKt(n,s,o,n.config)}}return i},{});return Lr(r)?null:new uh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=_me(n,n.bin,r);return new uh(t,{[i]:s})}merge(t,n){for(const r of Ge(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Hd([...this.bins[r].as,...t.bins[r].as],Un)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(ko(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(ko(this.bins).map(t=>t.field))}hash(){return`Bin ${Un(this.bins)}`}assemble(){return ko(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Ac(t.field),as:r,signal:t.signal,...oF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Ac(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function RKt(e,t,n,r){var s;const i=Vi(r)?r.encoding[Kh(t)]:void 0;if(Xa(n)&&Vi(r)&&VLe(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=ey({fieldDef:n,markDef:a,config:u});iI(o)&&l!==.5&&as(t)&&(e.add(at(n,{suffix:SF})),e.add(at(n,{suffix:TF}))),n.bin&&rR(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(BMe(t)){const o=jMe(t);e.add(r.getName(o))}else e.add(at(n));return Ub(n)&&_qt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function NKt(e,t){for(const n of Ge(t)){const r=t[n];for(const i of Ge(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Of extends Or{clone(){return new Of(null,new Set(this.dimensions),en(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Tm(u)||Fy(u)){const c=Tm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);Km(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else RKt(s,a,o,n)}),s.size+Ge(i).length===0)?null:new Of(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ge(i).length===0?null:new Of(t,r,i)}merge(t){return NMe(this.dimensions,t.dimensions)?(NKt(this.measures,t.measures),!0):(qHt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ge(this.measures)])}producedFields(){const t=new Set;for(const n of Ge(this.measures))for(const r of Ge(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Un({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ge(this.measures))for(const o of Ge(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Ac(s));return{type:"aggregate",groupby:[...this.dimensions].map(Ac),ops:t,fields:n,as:r}}}class CS extends Or{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of dc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...ri(a)?[at(o,{binSuffix:"end"})]:[]],...oh(u)?{sortField:u}:Fe(u)?{sortIndexField:cx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of dc)this[n]&&(t+=` ${n.charAt(0)}:${Un(this[n])}`);return t}get fields(){var n;const t=[];for(const r of dc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of dc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Xh){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(so(i)&&jy(s)){const o=RF(this.childModel,n),a=Ine(o);a?t[n]=a:Qe(kte(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=hF,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of _ne){for(const c of wne){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[Qp,Xp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function wme(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function DKt(e,t){const n=bte(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=wme(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=wme(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Qe(eHt(t)),null}function PKt(e){const t={};return EP(e.filter,n=>{if(wLe(n)){let r=null;Pte(n)?r=fl(n.equal):$te(n)?r=fl(n.lte):Ote(n)?r=fl(n.lt):Mte(n)?r=fl(n.gt):Lte(n)?r=fl(n.gte):Fte(n)?r=n.range[0]:jte(n)&&(r=(n.oneOf??n.in)[0]),r&&(Fb(r)?t[n.field]="date":ar(r)?t[n.field]="number":ht(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function OKt(e){const t={};function n(r){ox(r)?t[r.field]="date":r.type==="quantitative"&&NVt(r.aggregate)?t[r.field]="number":ZE(r.field)>1?r.field in t||(t[r.field]="flatten"):Ub(r)&&oh(r.sort)&&ZE(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Vi(e)||Sl(e))&&e.forEachFieldDef((r,i)=>{if(Xa(r))n(r);else{const s=Mb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Vi(e)){const{mark:r,markDef:i,encoding:s}=e;if(Bb(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Je(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function $Kt(e){const t={};if(Vi(e)&&e.component.selection)for(const n of Ge(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&ZE(i.field)>1&&(t[i.field]="flatten")}return t}class la extends Or{clone(){return new la(null,en(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Un(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!g0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ge(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Qe(Npe(a,r[a],u.value)))}for(const a of Ge(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Qe(Npe(a,n[a],u)))}const s=new Qm(n,r);i.copyAll(s);const o={};for(const a of Ge(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ge(o).length===0||i.parseNothing?null:new la(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ge(this._parse)){const r=this._parse[n];ZE(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ge(this._parse))}dependentFields(){return new Set(Ge(this._parse))}assembleTransforms(t=!1){return Ge(this._parse).filter(n=>t?ZE(n)>1:!0).map(n=>{const r=DKt(n,this._parse[n]);return r?{type:"formula",expr:r,as:wS(n)}:null}).filter(n=>n!==null)}}class iy extends Or{clone(){return new iy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Gf])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Gf}}}class oR extends Or{clone(){return new oR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Un(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class aR extends Or{clone(){return new aR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Un(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class ub extends Or{constructor(t){super(null),t??(t={name:"source"});let n;if(g0(t)||(n=t.format?{...$u(t.format,["parse"])}:{}),sI(t))this._data={values:t.values};else if(ax(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];zn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else M6e(t)?this._data={values:[{type:"Sphere"}]}:(O6e(t)||g0(t))&&(this._data={});this._generator=g0(t),t.name&&(this._name=t.name),n&&!Lr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Eme=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},MKt=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},wC;function Tne(e){return e instanceof ub||e instanceof oR||e instanceof aR}class Cne{constructor(){wC.set(this,void 0),Eme(this,wC,!1,"f")}setModified(){Eme(this,wC,!0,"f")}get modifiedFlag(){return MKt(this,wC,"f")}}wC=new WeakMap;class zb extends Cne{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Ane extends Cne{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class LKt extends Ane{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ge(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class FKt extends Ane{constructor(t){super(),this.requiresSelectionId=t&&bne(t)}run(t){t instanceof iy&&(this.requiresSelectionId&&(Tne(t.parent)||t.parent instanceof Of||t.parent instanceof la)||(this.setModified(),t.remove()))}}class jKt extends Cne{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof ah&&(r=t.producedFields(),yte(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class BKt extends Ane{constructor(){super()}run(t){t instanceof Lu&&!t.isRequired()&&(this.setModified(),t.remove())}}class UKt extends zb{run(t){if(!Tne(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof la)if(t instanceof la)this.setModified(),t.merge(n);else{if(vte(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class zKt extends zb{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof la);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ge(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Lr(i)){this.setModified();const o=new la(t,i);for(const a of n){if(a instanceof la)for(const u of Ge(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof la&&Ge(a.parse).length===0&&a.remove()}}}}}class VKt extends zb{run(t){t instanceof Lu||t.numChildren()>0||t instanceof CS||t instanceof ub||(this.setModified(),t.remove())}}class HKt extends zb{run(t){const n=t.children.filter(i=>i instanceof ah),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class qKt extends zb{run(t){const n=t.children.filter(i=>i instanceof Of),r={};for(const i of n){const s=Un(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ge(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class WKt extends zb{constructor(t){super(),this.model=t}run(t){const n=!(Tne(t)||t instanceof TS||t instanceof la||t instanceof iy),r=[],i=[];for(const s of t.children)s instanceof uh&&(n&&!vte(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof uh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class GKt extends zb{run(t){const n=[...t.children];if(!Z1(n,o=>o instanceof Lu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Lu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Lu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Vb extends Or{clone(){return new Vb(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Hd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Un(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function YKt(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function KKt(e){return Fe(e)&&e.every(t=>ht(t))&&e.length>1}class Zp extends Or{clone(){return new Zp(null,en(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(os(f.order,"ascending"));const l={field:a,order:u};let c;return KKt(s)?c=s:ht(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new Zp(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Th(p)}).filter(h=>!!h),c=YKt(n),f=n.encoding.order;let d;if(Fe(f)||Je(f))d=tLe(f);else{const h=HLe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new Zp(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Un(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class AS extends Or{clone(){return new AS(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Hd(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Un(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Ate(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function XKt(e){function t(n){if(!(n instanceof CS)){const r=n.clone();if(r instanceof Lu){const i=aH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Of||r instanceof Zp||r instanceof AS||r instanceof Vb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function oH(e){if(e instanceof CS)if(e.numChildren()===1&&!(e.children[0]instanceof Lu)){const t=e.children[0];(t instanceof Of||t instanceof Zp||t instanceof AS||t instanceof Vb)&&t.addDimensions(e.fields),t.swapWithParent(),oH(e)}else{const t=e.model.component.data.main;k4e(t);const n=XKt(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(oH)}function k4e(e){if(e instanceof Lu&&e.type===yi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof CS||(t.swapWithParent(),k4e(e))}}const aH="scale_",ZN=5;function uH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!uH(t.children))return!1}return!0}function Yc(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function xme(e,t,n){let r=e.sources,i=!1;return i=Yc(new BKt,r)||i,i=Yc(new FKt(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=Yc(new VKt,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=Yc(new UKt,r)||i,i=Yc(new WKt(t),r)||i,i=Yc(new jKt,r)||i,i=Yc(new zKt,r)||i,i=Yc(new qKt,r)||i,i=Yc(new HKt,r)||i,i=Yc(new LKt,r)||i,i=Yc(new GKt,r)||i),e.sources=r,i}function QKt(e,t){uH(e.sources);let n=0,r=0;for(let i=0;i<ZN&&xme(e,t,!0);i++)n++;e.sources.map(oH);for(let i=0;i<ZN&&xme(e,t,!1);i++)r++;uH(e.sources),Math.max(n,r)===ZN&&Qe(`Maximum optimization runs(${ZN}) reached.`)}class Ws{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Ws(()=>t(n))}}function R4e(e){Vi(e)?JKt(e):ZKt(e)}function JKt(e){const t=e.component.scales;for(const n of Ge(t)){const r=tXt(e,n);if(t[n].setWithExplicit("domains",r),rXt(e,n),e.component.data.isFaceted){let s=e;for(;!Sl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)jp(a)&&(a.data=aH+a.data.replace(aH,""))}}}function ZKt(e){for(const n of e.children)R4e(n);const t=e.component.scales;for(const n of Ge(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=ty(r,o.getWithExplicit("domains"),"domains","scale",lH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Qe(XVt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function eXt(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=Sme(t,n);if(!i){Qe(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=Sme(t,n);if(i)return"unaggregated"}return e}function tXt(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=eXt(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&As(r.x2)?As(r.x)?ty(fg(n,i,e,"x"),fg(n,i,e,"x2"),"domain","scale",lH):fg(n,i,e,"x2"):t==="y"&&As(r.y2)?As(r.y)?ty(fg(n,i,e,"y"),fg(n,i,e,"y2"),"domain","scale",lH):fg(n,i,e,"y2"):fg(n,i,e,t)}function nXt(e,t,n){return e.map(r=>({signal:`{data: ${vF(r,{timeUnit:n,type:t})}}`}))}function w9(e,t,n){var i;const r=(i=io(n))==null?void 0:i.unit;return t==="temporal"||r?nXt(e,t,r):[e]}function fg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=As(i[r]),{type:c}=l,f=l.timeUnit;if(bqt(t)){const p=fg(e,void 0,n,r),m=w9(t.unionWith,c,f);return Ed([...m,...p.value])}else{if(Rt(t))return Ed([t]);if(t&&t!=="unaggregated"&&!ILe(t))return Ed(w9(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return rl([[0,1]]);const p=n.requestDataName(yi.Main);return rl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=Km(r)&&Je(l)?iXt(n,r,e):void 0;if(Qh(l)){const p=w9([l.datum],c,f);return rl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(yi.Main),{field:m}=l;return rl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(ri(h.bin)){if(so(e))return rl(e==="bin-ordinal"?[]:[{data:nI(d)?n.requestDataName(yi.Main):n.requestDataName(yi.Raw),field:n.vgField(r,rR(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!mt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(ri(p)){const m=Sne(n,h.field,p);return rl([new Ws(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return rl([{data:n.requestDataName(yi.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&zn(["time","utc"],e)){const p=i[Kh(r)];if(VLe(h,p,s,a)){const m=n.requestDataName(yi.Main),g=ey({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=iI(o)&&g!==.5&&as(r);return rl([{data:m,field:n.vgField(r,y?{suffix:SF}:{})},{data:m,field:n.vgField(r,{suffix:y?TF:"end"})}])}}return rl(d?[{data:nI(d)?n.requestDataName(yi.Main):n.requestDataName(yi.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(yi.Main),field:n.vgField(r)}])}function E9(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":hF),...r?{field:Ac(r)}:{},...i?{order:i}:{}}}function rXt(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=ILe(r)&&r,o=Lb(i)&&oF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function iXt(e,t,n){if(!so(n))return;const r=e.fieldDef(t),i=r.sort;if(ULe(i))return{op:"min",field:cx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(oh(i)){const a=s&&!o.has(i.field);return E9(i,a)}else if(BLe(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Tm(c)||Fy(c))return E9({field:at(l),order:u},d);if(Ate(c)||!c)return E9({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(zn(["ascending",void 0],i))return!0}}function Sme(e,t){const{aggregate:n,type:r}=e;return n?ht(n)&&!PVt.has(n)?{valid:!1,reason:EHt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:xHt(e)}:{valid:!0}:{valid:!1,reason:wHt(e)}}function lH(e,t,n,r){return e.explicit&&t.explicit&&Qe(IHt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function sXt(e){const t=Hd(e.map(o=>{if(jp(o)){const{sort:a,...u}=o;return u}return o}),Un),n=Hd(e.map(o=>{if(jp(o)){const a=o.sort;return a!==void 0&&!nI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Un);if(t.length===0)return;if(t.length===1){const o=e[0];if(jp(o)&&n.length>0){let a=n[0];if(n.length>1){Qe(Ppe);const u=n.filter(l=>mt(l)&&"op"in l&&l.op!=="min");n.every(l=>mt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(mt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=Hd(n.map(o=>nI(o)||!("op"in o)||ht(o.op)&&o.op in kVt?o:(Qe(RHt(o)),!0)),Un);let i;r.length===1?i=r[0]:r.length>1&&(Qe(Ppe),i=!0);const s=Hd(e.map(o=>jp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Ine(e){if(jp(e)&&ht(e.field))return e.field;if(OVt(e)){let t;for(const n of e.fields)if(jp(n)&&ht(n.field)){if(!t)t=n.field;else if(t!==n.field)return Qe(NHt),t}return Qe(DHt),t}else if($Vt(e)){Qe(PHt);const t=e.fields[0];return ht(t)?t:void 0}}function RF(e,t){const r=e.component.scales[t].get("domains").map(i=>(jp(i)&&(i.data=e.lookupDataSource(i.data)),i));return sXt(r)}function N4e(e){return IS(e)||kne(e)?e.children.reduce((t,n)=>t.concat(N4e(n)),Tme(e)):Tme(e)}function Tme(e){return Ge(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=oXt(i.range,s,n,e),h=RF(e,n),p=a?eYt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function oXt(e,t,n,r){if(as(n)){if(jy(e))return{step:{signal:`${t}_step`}}}else if(mt(e)&&jp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class D4e extends Qm{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Z1(this.get("domains"),t=>Fe(t)&&t.length===2&&ar(t[0])&&t[0]<=0&&ar(t[1])&&t[1]>=0)}}const aXt=["range","scheme"];function uXt(e){const t=e.component.scales;for(const n of sF){const r=t[n];if(!r)continue;const i=lXt(n,e);r.setWithExplicit("range",i)}}function Cme(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=Yu(t),o=e.getName(s);if(mt(r)&&r.binned&&r.step!==void 0)return new Ws(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(ri(r)){const a=Sne(e,i,r);return new Ws(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function lXt(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of aXt)if(n[f]!==void 0){const d=GV(s,f),h=kLe(e,f);if(!d)Qe(uLe(s,f,e));else if(h)Qe(h);else switch(f){case"range":{const p=n.range;if(Fe(p)){if(as(e))return Ed(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Ws.fromName(y,g)}return m}))}else if(mt(p))return Ed({data:t.requestDataName(yi.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ed(p)}case"scheme":return Ed(cXt(n[f]))}}const o=e===Ei||e==="xOffset"?"width":"height",a=r[o];if(Ch(a)){if(as(e))if(so(s)){const f=O4e(a,t,e);if(f)return Ed({step:f})}else Qe(lLe(o));else if(Qk(e)){const f=e===Py?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=$4e(a,s);if(p)return Ed(p)}}}const{rangeMin:u,rangeMax:l}=n,c=fXt(e,t);return(u!==void 0||l!==void 0)&&GV(s,"rangeMin")&&Fe(c)&&c.length===2?Ed([u??c[0],l??c[1]]):rl(c)}function cXt(e){return vqt(e)?{scheme:e.name,...$u(e,["name"])}:{scheme:e}}function P4e(e,t,n,{center:r}={}){const i=Yu(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===ao&&Fl(n)?r?[Ws.fromName(a=>`${o(a)}/2`,s),Ws.fromName(a=>`-${o(a)}/2`,s)]:[Ws.fromName(o,s),0]:r?[Ws.fromName(a=>`-${o(a)}/2`,s),Ws.fromName(a=>`${o(a)}/2`,s)]:[0,Ws.fromName(o,s)]}function fXt(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=As(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ei:case ao:{if(zn(["point","band"],u)){const f=M4e(e,n,r.view);if(Ch(f))return{step:O4e(f,t,e)}}return P4e(e,t,u)}case Py:case ES:return dXt(e,t,u);case Gm:{const f=t.component.scales[e].get("zero"),d=L4e(i,f,r),h=mXt(i,n,t,r);return rx(u)?pXt(d,h,hXt(u,r,l,e)):[d,h]}case jc:return[0,Math.PI*2];case $b:return[0,360];case ed:return[0,new Ws(()=>{const f=t.getSignalName(Sl(t.parent)?"child_width":"width"),d=t.getSignalName(Sl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case My:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Ly:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Gu:return"symbol";case Wu:case Gh:case Yh:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Ym:case Oy:case $y:return[r.scale.minOpacity,r.scale.maxOpacity]}}function O4e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=xte(n),o=r[s];if(_6e({step:e,offsetIsDiscrete:an(o)&&xLe(o.type)})==="offset"&&t6e(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${jVt(f)})`}}else return e.step}function $4e(e,t){if(_6e({step:e,offsetIsDiscrete:so(t)})==="offset")return{step:e.step}}function dXt(e,t,n){const r=e===Py?"x":"y",i=t.getScaleComponent(r);if(!i)return P4e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=M4e(r,t.size,t.config.view);if(Ch(l)){const c=$4e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Je(l)&&l.timeUnit){const c=bLe(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=ey({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return kMe(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function M4e(e,t,n){const r=e===Ei?"width":"height",i=t[r];return i||Z$(n,r)}function hXt(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Fe(n)?n.length+1:(Qe(zHt(r)),3)}}function pXt(e,t,n){const r=()=>{const i=Ef(t),s=Ef(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Ws(r):{signal:r()}}function L4e(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${L4e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(aF("size",e))}const Ame=.95;function mXt(e,t,n,r){const i={x:Cme(n,"x"),y:Cme(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=Ime(t,i,r.view);return ar(s)?s-1:new Ws(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=Ime(t,i,r.view);return ar(s)?Math.pow(Ame*s,2):new Ws(()=>`pow(${Ame} * ${s.signal}, 2)`)}}throw new Error(aF("size",e))}function Ime(e,t,n){const r=Ch(e.width)?e.width.step:J$(n,"width"),i=Ch(e.height)?e.height.step:J$(n,"height");return t.x||t.y?new Ws(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function F4e(e,t){Vi(e)?gXt(e,t):B4e(e,t)}function gXt(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ge(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=As(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=GV(h,t),y=kLe(a,t);if(d!==void 0&&(g?y&&Qe(y):Qe(uLe(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":Fb(u[t])||b==="temporal"||v?l.set(t,{signal:vF(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in kme?kme[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:n6e(i,a),hasSecondaryRangeChannel:!!i[Kh(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const kme={bins:({model:e,fieldOrDatumDef:t})=>Je(t)?yXt(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>vXt(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>bXt(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>_Xt(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>wXt(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>EXt(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Je(e)?e.sort:void 0;return xXt(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>SXt(e,t,n,r,i,s.scale,o)};function j4e(e){Vi(e)?uXt(e):B4e(e,"range")}function B4e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?j4e(r):F4e(r,t);for(const r of Ge(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=ty(i,a,t,"scale",P6e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function yXt(e,t){const n=t.bin;if(ri(n)){const r=Sne(e,t.field,n);return new Ws(()=>e.getSignalName(r))}else if(_o(n)&&Lb(n)&&n.step!==void 0)return{step:n.step}}function vXt(e,t){if(zn([Wu,Gh,Yh],e)&&t!=="nominal")return"hcl"}function bXt(e,t,n,r,i,s){var o;if(!((o=Th(s))!=null&&o.bin||Fe(n)||i!=null||r!=null||zn([Mu.TIME,Mu.UTC],e)))return as(t)?!0:void 0}function _Xt(e,t,n,r,i,s){if(as(e)){if(xf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Je(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Mu.POINT)return n.pointPadding}}function wXt(e,t,n,r,i,s=!1){if(e===void 0){if(as(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:os(o,n==="bar"?a:u)}else if(Qk(t)&&r===Mu.BAND)return i.offsetBandPaddingInner}}function EXt(e,t,n,r,i,s=!1){if(e===void 0){if(as(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Mu.BAND)return os(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(Qk(t)){if(n===Mu.POINT)return .5;if(n===Mu.BAND)return i.offsetBandPaddingOuter}}}function xXt(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Fl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Fl(e)&&t==="descending")return!0}function SXt(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Fl(i)){if(Fe(n)){const u=n[0],l=n[n.length-1];if(ar(u)&&u<=0&&ar(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!rx(i))return!0;if(!(Je(t)&&t.bin)&&zn([...Xh,...wVt],e)){const{orient:u,type:l}=r;return zn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:zn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function TXt(e,t,n,r,i=!1){const s=CXt(t,n,r,i),{type:o}=e;return Km(t)?o!==void 0?Tqt(t,o)?Je(n)&&!Sqt(o,n.type)?(Qe(CHt(o,s)),s):o:(Qe(THt(t,o,s)),s):s:null}function CXt(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(zw(e)||h9(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Qe(p9(e,"ordinal")),"ordinal";if(as(e)||Qk(e)){if(zn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Cte)return"band";const s=n[Yu(e)];return sb(s)||sx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return zw(e)?"time":h9(e)==="discrete"?(Qe(p9(e,"temporal")),"ordinal"):Je(t)&&t.timeUnit&&io(t.timeUnit).utc?"utc":"time";case"quantitative":return zw(e)?Je(t)&&ri(t.bin)?"bin-ordinal":"linear":h9(e)==="discrete"?(Qe(p9(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(oLe(t.type))}function AXt(e,{ignoreRange:t}={}){U4e(e),R4e(e);for(const n of xqt)F4e(e,n);t||j4e(e)}function U4e(e){Vi(e)?e.component.scales=IXt(e):e.component.scales=RXt(e)}function IXt(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of sF){const o=As(t[s]);if(o&&n===LLe&&s===Gu&&o.type===xS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=n6e(t,s),l=TXt(a,s,o,r,u);i[s]=new D4e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const kXt=P6e((e,t)=>$pe(e)-$pe(t));function RXt(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){U4e(s);for(const o of Ge(s.component.scales))if((t=i.scale)[o]??(t[o]=y4e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?hqt(a.value,u.value)?r[o]=ty(a,u,"type","scale",kXt):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ge(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new D4e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class x9{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Vi(e){return(e==null?void 0:e.type)==="unit"}function Sl(e){return(e==null?void 0:e.type)==="facet"}function kne(e){return(e==null?void 0:e.type)==="concat"}function IS(e){return(e==null?void 0:e.type)==="layer"}class Rne{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=bu(a),this.name=t.name??i,this.title=_g(t.title)?{text:t.title}:t.title?bu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new x9,this.projectionNameMap=r?r.projectionNameMap:new x9,this.signalNameMap=r?r.signalNameMap:new x9,this.data=t.data,this.description=t.description,this.transforms=LGt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:UWt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:pF(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new Qm,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?en(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){AXt(this)}parseProjection(){A4e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){E4e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ge(r)){const o=r[s];o!==void 0&&(i[s]=li(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=li(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Lr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=QYt(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of dc)t[r].title&&n.push(qYt(this,r));for(const r of _ne)n=n.concat(WYt(this,r));return n}assembleAxes(){return DYt(this.component.axes,this.config)}assembleLegends(){return S4e(this)}assembleProjections(){return _Kt(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...QMe(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return zn(["unit","layer"],this.type)?zn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Lr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Sl(this.parent)?N4e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return wi((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(yi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Sl(this.parent)){const n=m4e(t),r=iF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(so(s)&&jy(o)){const a=i.get("name"),u=RF(this,r),l=Ine(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:p4e(a,i,c)}}else return Qe(kte(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(zMe(t)&&Km(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(HVt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class z4e extends Rne{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return gWt(this.getMapping(),(r,i,s)=>{const o=Th(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){nne(this.getMapping(),(r,i)=>{const s=Th(r);s&&t(s,i)},n)}}class NF extends Or{clone(){return new NF(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Un(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class DF extends Or{clone(){return new DF(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Un(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class oI extends Or{clone(){return new oI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(vr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=Km(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Fl(d)&&l.aggregate!=="count"&&!Bb(i)&&(u[l.field]=l)}return u},{});return Ge(a).length?new oI(t,a):null}dependentFields(){return new Set(Ge(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Un(this.filter)}`}assemble(){const t=Ge(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class PF extends Or{clone(){return new PF(this.parent,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Un(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class OF extends Or{clone(){return new OF(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Un(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class qw extends Or{clone(){return new qw(null,en(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[nd,td],[Ic,rd]]){const s=i.map(o=>{const a=As(n.encoding[o]);return Je(a)?a.field:Qh(a)?{expr:`${a.datum}`}:Wf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new qw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Gu)){const i=n.typedFieldDef(Gu);i.type===xS&&(t=new qw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(ht);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Un(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class aI extends Or{clone(){return new aI(null,this.projection,en(this.fields),en(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[nd,td],[Ic,rd]]){const i=r.map(o=>{const a=As(n.encoding[o]);return Je(a)?a.field:Qh(a)?{expr:`${a.datum}`}:Wf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Ic?"2":"";(i[0]||i[1])&&(t=new aI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ht))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Un(this.fields)} ${Un(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class v1 extends Or{clone(){return new v1(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new v1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Je(i)&&Je(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=i6e(n.mark,r);return new v1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Un(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:vGt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class $F extends Or{clone(){return new $F(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Un(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class uI extends Or{clone(){return new uI(null,en(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(bGt(o)){let u=q4e(o.data,s);u||(u=new ub(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Lu(u,l,yi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(_Gt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(wi(u),u)}catch{throw new Error(YVt(u))}if(a=l.materialized,!a)throw new Error(KVt(u))}return new uI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?dt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Un({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:dt(this.transform.as)}:{}};else{let n=this.transform.as;ht(n)||(Qe(rHt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class MF extends Or{clone(){return new MF(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Un(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class LF extends Or{clone(){return new LF(null,en(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=en(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Un(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class FF extends Or{clone(){return new FF(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Hd((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Un(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class jF extends Or{clone(){return new jF(null,en(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Un(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function V4e(e){let t=0;function n(r,i){if(r instanceof ub&&!r.isGenerator&&!ax(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof la&&(r.parent instanceof ub&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof CS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof oR||r instanceof aR||r instanceof oI||r instanceof TS||r instanceof lx||r instanceof aI||r instanceof Of||r instanceof uI||r instanceof AS||r instanceof Vb||r instanceof OF||r instanceof PF||r instanceof NF||r instanceof $F||r instanceof MF||r instanceof LF||r instanceof iy||r instanceof jF||r instanceof FF||r instanceof DF)&&i.transform.push(r.assemble()),(r instanceof uh||r instanceof ah||r instanceof v1||r instanceof Zp||r instanceof qw)&&i.transform.push(...r.assemble()),r instanceof Lu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Lu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Lu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function NXt(e){const t=[],n=V4e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function DXt(e,t){const n=[],r=V4e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function PXt(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function OXt(e){for(const t of dc)$Xt(e,t);Rme(e,"x"),Rme(e,"y")}function $Xt(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=fx("title",null,r,t);let l=Vw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Fe(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=fx("labelOrient",a.header,r,t),f=a.header!==null?os((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=zn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[H4e(e,t,f)]}}}function H4e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Rme(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=xne(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=PXt(a.get("orient"));o[u]??(o[u]=[H4e(e,s,!1)]);const l=_C(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function MXt(e){Nne(e),rM(e,"width"),rM(e,"height")}function LXt(e){Nne(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";rM(e,t),rM(e,n)}function Nne(e){for(const t of e.children)t.parseLayoutSize()}function rM(e,t){const n=m4e(t),r=iF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??y4e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=ty(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function FXt(e){const{size:t,component:n}=e;for(const r of Xh){const i=Yu(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Ch(s)?"step":s,!0)}else{const s=jXt(e,i);n.layoutSize.set(i,s,!1)}}}function jXt(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(so(s)){const a=Z$(r.view,t);return jy(o)||Ch(a)?"step":a}else return XV(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return XV(r.view,t);{const s=Z$(r.view,t);return Ch(s)?s.step:s}}}function cH(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class _A extends z4e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=Mne(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!tR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ge(t),r={};for(const i of n){if(![Xp,Qp].includes(i)){Qe(aF(i,"facet"));break}const s=t[i];if(s.field===void 0){Qe(qV(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=ene(t,n);return r.header?r.header=bu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=BF(this),this.child.parseData()}parseLayoutSize(){Nne(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),OXt(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of dc)for(const r of wne){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=fx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=IF(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof _A))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof _A?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof _A){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Xh){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(so(o)&&jy(a)){const u=RF(this.child,i),l=Ine(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Qe(kte(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of dc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(ri(d)&&u.push(at(f,{binSuffix:"end"})),oh(h)){const{field:p,op:m=hF}=h,g=cH(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Fe(h)){const p=cx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?oh(r.sort)?[cH(r,r.sort,{expr:"datum"})]:Fe(r.sort)?[cx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(oh(i)?i.order:!Fe(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return iH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of _ne)if(t[s]){const o=fx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return iH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=NXt(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:dc.map(u=>this.facetSortFields(u)).flat(),order:dc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(XGt(this,[]))}]}getMapping(){return this.facet}}function BXt(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(oh(s.sort)){const{field:o,op:a=hF}=s.sort;e=i=new Vb(e,{joinaggregate:[{op:a,field:o,as:cH(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function q4e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(sI(e)&&sI(a)){if(_l(e.values,a.values))return o}else if(ax(e)&&ax(a)){if(e.url===a.url)return o}else if(O6e(e)&&e.name===o.dataName)return o}}return null}function UXt(e,t){if(e.data||!e.parent){if(e.data===null){const r=new ub({values:[]});return t.push(r),r}const n=q4e(e.data,t);if(n)return g0(e.data)||(n.data.format=RMe({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new ub(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function zXt(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(RGt(i))o=e=new lx(e,i),s="derived";else if(hne(i)){const a=PKt(i);o=e=la.makeWithAncestors(e,{},a,n)??e,e=new TS(e,t,i.filter)}else if(k6e(i))o=e=uh.makeFromTransform(e,i,t),s="number";else if(DGt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new la(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=ah.makeFromTransform(e,i);else if(PGt(i))o=e=Of.makeFromTransform(e,i),s="number",bne(t)&&(e=new iy(e));else if(I6e(i))o=e=uI.make(e,t,i,r++),s="derived";else if(AGt(i))o=e=new AS(e,i),s="number";else if(IGt(i))o=e=new Vb(e,i),s="number";else if(OGt(i))o=e=Zp.makeFromTransform(e,i),s="derived";else if($Gt(i))o=e=new OF(e,i),s="derived";else if(MGt(i))o=e=new DF(e,i),s="derived";else if(kGt(i))o=e=new PF(e,i),s="derived";else if(wGt(i))o=e=new FF(e,i),s="derived";else if(CGt(i))e=new jF(e,i);else if(NGt(i))o=e=v1.makeFromTransform(e,i),s="derived";else if(EGt(i))o=e=new NF(e,i),s="derived";else if(xGt(i))o=e=new MF(e,i),s="derived";else if(SGt(i))o=e=new LF(e,i),s="derived";else if(TGt(i))o=e=new $F(e,i),s="derived";else{Qe(nHt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function BF(e){var h;let t=UXt(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(g0(i)||ax(i)||sI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new YGt;g0(i)?($6e(i)?t=new aR(t,i.sequence):pne(i)&&(t=new oR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=la.makeExplicit(t,e,o)??t,t=new iy(t);const a=e.parent&&IS(e.parent);(Vi(e)||Sl(e))&&a&&(t=uh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=zXt(t,e,o));const u=$Kt(e),l=OKt(e);t=la.makeWithAncestors(t,{},{...u,...l},o)??t,Vi(e)&&(t=qw.parseAll(t,e),t=aI.parseAll(t,e)),(Vi(e)||Sl(e))&&(a||(t=uh.makeFromEncoding(t,e)??t),t=ah.makeFromEncoding(t,e)??t,t=lx.parseAllForSortIndex(t,e));const c=t=Nme(yi.Raw,e,t);if(Vi(e)){const p=Of.makeFromEncoding(t,e);p&&(t=p,bne(e)&&(t=new iy(t))),t=v1.makeFromEncoding(t,e)??t,t=Zp.makeFromEncoding(t,e)??t}Vi(e)&&(t=oI.make(t,e)??t);const f=t=Nme(yi.Main,e,t);Vi(e)&&RYt(e,f);let d=null;if(Sl(e)){const p=e.getName("facet");t=BXt(t,e.facet)??t,d=new CS(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function Nme(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Lu(n,s,e,i);return r[s]=o,o}class VXt extends Rne{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Qe(ZVt),this.children=this.getChildren(t).map((l,c)=>Mne(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=BF(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ge(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return wF(t)?t.vconcat:fne(t)?t.hconcat:t.concat}parseLayoutSize(){LXt(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Ene(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function HXt(e){return e===!1||e===null}const qXt={disable:1,gridScale:1,scale:1,...ZLe,labelExpr:1,encode:1},W4e=Ge(qXt);class Dne extends Qm{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Dne(en(this.explicit),en(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!HXt(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function WXt(e,t,n){const{encoding:r,config:i}=e,s=As(r[t])??As(r[Kh(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(ib(u))return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(ix(s)==="quantitative"){if(sx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(ix(s)==="temporal"&&i.timeFormatType&&Je(s)&&!s.timeUnit)return{text:Sf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function GXt(e){return Xh.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[eQt(n,e)]),t),{})}const YXt={bottom:"top",top:"bottom",left:"right",right:"left"};function KXt(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ge(i.component.axes))n.axis[s]=xne(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=XXt(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Xh){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=YXt[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function XXt(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=QXt(i,s)}}}else return t.map(n=>n.clone());return e}function QXt(e,t){for(const n of W4e){const r=ty(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return iLe(i,s);case"gridScale":return{explicit:i.explicit,value:os(i.value,s.value)}}return xF(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function JXt(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:rI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===c4e(r,i))return!0}return e===n[t]}const ZXt=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function eQt(e,t){var y,v;let n=t.axis(e);const r=new Dne,i=As(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||BYt(e),u=t.getScaleComponent(e).get("type"),l=PYt(e,u,a,t.config),c=n!==void 0?!n:nH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=LYt(i,n,e,o.style,l),d=PLe(n.formatType,i,u),h=DLe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of W4e){const w=b in mme?mme[b](p):zpe(b)?n[b]:void 0,x=w!==void 0,T=JXt(w,b,n,t,e);if(x&&T)r.set(b,w,T);else{const{configValue:S=void 0,configFrom:C=void 0}=zpe(b)&&b!=="values"?nH(b,o.style,n.style,l):{},A=S!==void 0;x&&!A?r.set(b,w,T):(C!=="vgAxisConfig"||ZXt.has(b)&&A||iR(S)||Rt(S))&&r.set(b,S,!1)}}const m=n.encoding??{},g=JLe.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const x=g4e(m[w]??{},t),T=w==="labels"?WXt(t,e,x):x;return T!==void 0&&!Lr(T)&&(b[w]={update:T}),b},{});return Lr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function tQt({encoding:e,size:t}){for(const n of Xh){const r=Yu(n);Ch(t[r])&&Wg(e[n])&&(delete t[r],Qe(lLe(r)))}return t}const nQt={vgMark:"arc",encodeEntry:e=>({...Bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ua("x",e,{defaultPos:"mid"}),...ua("y",e,{defaultPos:"mid"}),...ny(e,"radius"),...ny(e,"theta")})},rQt={vgMark:"area",encodeEntry:e=>({...Bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...eM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...eM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...vne(e)})},iQt={vgMark:"rect",encodeEntry:e=>({...Bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ny(e,"x"),...ny(e,"y")})},sQt={vgMark:"shape",encodeEntry:e=>({...Bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Je(n)&&n.type===xS?{field:at(n,{expr:"datum"})}:{}}]}},oQt={vgMark:"image",encodeEntry:e=>({...Bc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...ny(e,"x"),...ny(e,"y"),...gne(e,"url")})},aQt={vgMark:"line",encodeEntry:e=>({...Bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ua("x",e,{defaultPos:"mid"}),...ua("y",e,{defaultPos:"mid"}),...Ys("size",e,{vgChannel:"strokeWidth"}),...vne(e)})},uQt={vgMark:"trail",encodeEntry:e=>({...Bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ua("x",e,{defaultPos:"mid"}),...ua("y",e,{defaultPos:"mid"}),...Ys("size",e),...vne(e)})};function Pne(e,t){const{config:n}=e;return{...Bc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ua("x",e,{defaultPos:"mid"}),...ua("y",e,{defaultPos:"mid"}),...Ys("size",e),...Ys("angle",e),...lQt(e,n,t)}}function lQt(e,t,n){return n?{shape:{value:n}}:Ys("shape",e)}const cQt={vgMark:"symbol",encodeEntry:e=>Pne(e)},fQt={vgMark:"symbol",encodeEntry:e=>Pne(e,"circle")},dQt={vgMark:"symbol",encodeEntry:e=>Pne(e,"square")},hQt={vgMark:"rect",encodeEntry:e=>({...Bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ny(e,"x"),...ny(e,"y")})},pQt={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...eM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...eM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ys("size",e,{vgChannel:"strokeWidth"})}}},mQt={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Bc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ua("x",e,{defaultPos:"mid"}),...ua("y",e,{defaultPos:"mid"}),...gne(e),...Ys("size",e,{vgChannel:"fontSize"}),...Ys("angle",e),...fme("align",gQt(e.markDef,n,t)),...fme("baseline",yQt(e.markDef,n,t)),...ua("radius",e,{defaultPos:null}),...ua("theta",e,{defaultPos:null})}}};function gQt(e,t,n){if(vr("align",e,n)===void 0)return"center"}function yQt(e,t,n){if(vr("baseline",e,n)===void 0)return"middle"}const vQt={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Bc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ua("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ua("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Ys("size",e,{defaultValue:bQt(e),vgChannel:i}),[s]:li(vr("thickness",n,t))}}};function bQt(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=vr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&jy(a)&&ar(a.step)?a.step*3/4:J$(t.view,i)*3/4}}const eD={arc:nQt,area:rQt,bar:iQt,circle:fQt,geoshape:sQt,image:oQt,line:aQt,point:cQt,rect:hQt,rule:pQt,square:dQt,text:mQt,tick:vQt,trail:uQt};function _Qt(e){if(zn([fF,lF,$qt],e.mark)){const t=i6e(e.mark,e.encoding);if(t.length>0)return wQt(e,t)}else if(e.mark===cF){const t=HV.some(n=>vr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return EQt(e)}return One(e)}const Dme="faceted_path_";function wQt(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Dme+e.requestDataName(yi.Main),data:e.requestDataName(yi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:One(e,{fromPrefix:Dme})}]}const Pme="stack_group_";function EQt(e){var l;const[t]=One(e,{fromPrefix:Pme}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...JE(t.encode.update,["y","yc","y2","height",...HV]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...$u(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...JE(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...$u(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of HV){const f=Cm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=li(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Cm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:li(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(yi.Main),name:Pme+e.requestDataName(yi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function xQt(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Fe(o)&&Wf(o)&&zV(o.value)||!o&&zV(vr("order",i,s)))){if((Fe(o)||Je(o))&&!n)return tLe(o,{expr:"datum"});if(Bb(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Je(l)){const c=l.sort;if(Fe(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(oh(c))return{field:at({aggregate:tne(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(BLe(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function One(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=os(r.clip,SQt(e),TQt(e)),a=ZMe(r),u=i.key,l=xQt(e),c=CQt(e),f=vr("aria",r,s),d=eD[n].postEncodingTransform?eD[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:eD[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(yi.Main)},encode:{update:eD[n].encodeEntry(e)},...d?{transform:d}:{}}]}function SQt(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function TQt(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function CQt(e){if(!e.component.selection)return null;const t=Ge(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ge(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class G4e extends z4e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Hpe(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Sh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=cGt(o,s,{graticule:t.data&&pne(t.data)}));const u=this.encoding=pWt(t.encoding||{},a,o.filled,s);this.markDef=T6e(o,u,s),this.size=tQt({encoding:u,size:Hpe(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=S6e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>lne(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===LLe,r=t&&dVt.some(i=>an(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return sF.reduce((r,i)=>{const s=As(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=bu(t);return Fe(n)&&(i.domain=n.map(fl)),Fe(r)&&(i.range=r.map(fl)),i}initAxes(t){return Xh.reduce((n,r)=>{const i=t[r];if(an(i)||r===Ei&&an(t.x2)||r===ao&&an(t.y2)){const s=an(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ge(t),r={};for(const i of n){const s=t[i];r[i]=iR(s)?JMe(s):fl(s)}return r}initLegends(t){return EVt.reduce((n,r)=>{const i=As(t[r]);if(i&&SVt(r)){const s=i.legend;n[r]=s&&bu(s)}return n},{})}parseData(){this.component.data=BF(this)}parseLayoutSize(){FXt(this)}parseSelections(){this.component.selection=kYt(this,this.selection)}parseMarkGroup(){this.component.mark=_Qt(this)}parseAxesAndHeaders(){this.component.axes=GXt(this)}assembleSelectionTopLevelSignals(t){return QGt(this,t)}assembleSignals(){return[...a4e(this),...KGt(this,[])]}assembleSelectionData(t){return JGt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Ene(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!IS(this.parent))&&(t=F6e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return g1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Th(n)}typedFieldDef(t){const n=this.fieldDef(t);return Xa(n)?n:null}}class $ne extends Rne{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(EF(a))return new $ne(a,this,this.getName(`layer_${u}`),o,s);if(Xm(a))return new G4e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Ite(a))})}parseData(){this.component.data=BF(this);for(const t of this.children)t.parseData()}parseLayoutSize(){MXt(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ge(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){KXt(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),a4e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Ene(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of dt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return ZGt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),S4e(this))}}function Mne(e,t,n,r,i){if(pF(e))return new _A(e,t,n,i);if(EF(e))return new $ne(e,t,n,r,i);if(Xm(e))return new G4e(e,t,n,r,i);if(FWt(e))return new VXt(e,t,n,i);throw new Error(Ite(e))}function AQt(e,t={}){t.logger&&VHt(t.logger),t.fieldTitle&&KLe(t.fieldTitle);try{const n=x6e(cS(t.config,e.config)),r=D6e(e,n),i=Mne(r,null,"",void 0,n);return i.parse(),QKt(i.component.data,i),{spec:kQt(i,IQt(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&HHt(),t.fieldTitle&&sWt()}}function IQt(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):ht(t)&&(t={type:t}),i&&s&&qGt(t.type)){if(i==="step"&&s==="step")Qe(Ipe()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Qe(Ipe(iF(o)));const a=o==="width"?"height":"width";t.type=WGt(a)}}return{...Ge(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...nme(n,!1),...nme(e,!0)}}function kQt(e,t,n={},r){const i=e.config?JWt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),DXt(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...b6e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const RQt=oVt.version,NQt=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ZE,accessPathWithDatum:bte,compile:AQt,contains:zn,deepEqual:_l,deleteNestedProperty:z$,duplicate:en,entries:J0,every:gte,fieldIntersection:vte,flatAccessWithDatum:DMe,getFirstDefined:os,hasIntersection:yte,hash:Un,internalField:$Me,isBoolean:nI,isEmpty:Lr,isEqual:uVt,isInternalField:MMe,isNullOrFalse:zV,isNumeric:J4,keys:Ge,logicalExpr:vA,mergeDeep:RMe,never:kMe,normalize:D6e,normalizeAngle:rI,omit:$u,pick:JE,prefixGenerator:VV,removePathFromField:wS,replaceAll:eb,replacePathInField:Ac,resetIdCounter:cVt,setEqual:NMe,some:Z1,stringify:Fr,titleCase:Yk,unique:Hd,uniqueId:OMe,vals:ko,varName:wi,version:RQt},Symbol.toStringTag,{value:"Module"}));function Y4e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var DQt="vega-themes",PQt="2.15.0",OQt="Themes for stylized Vega and Vega-Lite visualizations.",$Qt=["vega","vega-lite","themes","style"],MQt="BSD-3-Clause",LQt={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},FQt=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],jQt="build/vega-themes.js",Lne="build/vega-themes.module.js",BQt="build/vega-themes.min.js",UQt="build/vega-themes.min.js",zQt="build/vega-themes.module.d.ts",VQt={type:"git",url:"https://github.com/vega/vega-themes.git"},HQt=["src","build"],qQt={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},WQt={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},GQt={vega:"*","vega-lite":"*"},YQt={},KQt={name:DQt,version:PQt,description:OQt,keywords:$Qt,license:MQt,author:LQt,contributors:FQt,main:jQt,module:Lne,unpkg:BQt,jsdelivr:UQt,types:zQt,repository:VQt,files:HQt,scripts:qQt,devDependencies:WQt,peerDependencies:GQt,dependencies:YQt};const v_="#fff",Ome="#888",XQt={background:"#333",view:{stroke:Ome},title:{color:v_,subtitleColor:v_},style:{"guide-label":{fill:v_},"guide-title":{fill:v_}},axis:{domainColor:v_,gridColor:Ome,tickColor:v_}},Qy="#4572a7",QQt={background:"#fff",arc:{fill:Qy},area:{fill:Qy},line:{stroke:Qy,strokeWidth:2},path:{stroke:Qy},rect:{fill:Qy},shape:{stroke:Qy},symbol:{fill:Qy,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Jy="#30a2da",S9="#cbcbcb",JQt="#999",ZQt="#333",$me="#f0f0f0",Mme="#333",eJt={arc:{fill:Jy},area:{fill:Jy},axis:{domainColor:S9,grid:!0,gridColor:S9,gridWidth:1,labelColor:JQt,labelFontSize:10,titleColor:ZQt,tickColor:S9,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:$me,group:{fill:$me},legend:{labelColor:Mme,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Mme,titleFontSize:14,titlePadding:10},line:{stroke:Jy,strokeWidth:2},path:{stroke:Jy,strokeWidth:.5},rect:{fill:Jy},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Jy},bar:{binSpacing:2,fill:Jy,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Zy="#000",tJt={group:{fill:"#e5e5e5"},arc:{fill:Zy},area:{fill:Zy},line:{stroke:Zy},path:{stroke:Zy},rect:{fill:Zy},shape:{stroke:Zy},symbol:{fill:Zy,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},nJt=22,rJt="normal",Lme="Benton Gothic, sans-serif",Fme=11.5,iJt="normal",ev="#82c6df",T9="Benton Gothic Bold, sans-serif",jme="normal",Bme=13,IT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},sJt={background:"#ffffff",title:{anchor:"start",color:"#000000",font:T9,fontSize:nJt,fontWeight:rJt},arc:{fill:ev},area:{fill:ev},line:{stroke:ev,strokeWidth:2},path:{stroke:ev},rect:{fill:ev},shape:{stroke:ev},symbol:{fill:ev,size:30},axis:{labelFont:Lme,labelFontSize:Fme,labelFontWeight:iJt,titleFont:T9,titleFontSize:Bme,titleFontWeight:jme},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Lme,labelFontSize:Fme,symbolType:"square",titleFont:T9,titleFontSize:Bme,titleFontWeight:jme},range:{category:IT["category-6"],diverging:IT["fireandice-6"],heatmap:IT["fire-7"],ordinal:IT["fire-7"],ramp:IT["fire-7"]}},tv="#ab5787",tD="#979797",oJt={background:"#f9f9f9",arc:{fill:tv},area:{fill:tv},line:{stroke:tv},path:{stroke:tv},rect:{fill:tv},shape:{stroke:tv},symbol:{fill:tv,size:30},axis:{domainColor:tD,domainWidth:.5,gridWidth:.2,labelColor:tD,tickColor:tD,tickWidth:.2,titleColor:tD},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},nv="#3e5c69",aJt={background:"#fff",arc:{fill:nv},area:{fill:nv},line:{stroke:nv},path:{stroke:nv},rect:{fill:nv},shape:{stroke:nv},symbol:{fill:nv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Kl="#1696d2",Ume="#000000",uJt="#FFFFFF",nD="Lato",C9="Lato",lJt="Lato",cJt="#DEDDDD",fJt=18,kT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},dJt={background:uJt,title:{anchor:"start",fontSize:fJt,font:nD},axisX:{domain:!0,domainColor:Ume,domainWidth:1,grid:!1,labelFontSize:12,labelFont:C9,labelAngle:0,tickColor:Ume,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:nD},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:cJt,gridWidth:1,labelFontSize:12,labelFont:C9,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:nD,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:C9,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:nD,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:kT["six-groups-cat-1"],diverging:kT["diverging-colors"],heatmap:kT["diverging-colors"],ordinal:kT["six-groups-seq"],ramp:kT["shades-blue"]},area:{fill:Kl},rect:{fill:Kl},line:{color:Kl,stroke:Kl,strokeWidth:5},trail:{color:Kl,stroke:Kl,strokeWidth:0,size:1},path:{stroke:Kl,strokeWidth:.5},point:{filled:!0},text:{font:lJt,color:Kl,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Kl,stroke:null}},arc:{fill:Kl},shape:{stroke:Kl},symbol:{fill:Kl,size:30}},rv="#3366CC",zme="#ccc",rD="Arial, sans-serif",hJt={arc:{fill:rv},area:{fill:rv},path:{stroke:rv},rect:{fill:rv},shape:{stroke:rv},symbol:{stroke:rv},circle:{fill:rv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:rD,fontSize:12},"guide-title":{font:rD,fontSize:12},"group-title":{font:rD,fontSize:12}},title:{font:rD,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:zme,tickColor:zme,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Fne=e=>e*(1/3+1),Vme=Fne(9),Hme=Fne(10),qme=Fne(12),RT="Segoe UI",Wme="wf_standard-font, helvetica, arial, sans-serif",Gme="#252423",NT="#605E5C",Yme="transparent",pJt="#C8C6C4",Zc="#118DFF",mJt="#12239E",gJt="#E66C37",yJt="#6B007B",vJt="#E044A7",bJt="#744EC2",_Jt="#D9B300",wJt="#D64550",K4e=Zc,X4e="#DEEFFF",Kme=[X4e,K4e],EJt=[X4e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",K4e],xJt={view:{stroke:Yme},background:Yme,font:RT,header:{titleFont:Wme,titleFontSize:qme,titleColor:Gme,labelFont:RT,labelFontSize:Hme,labelColor:NT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:NT,labelFontSize:Vme,titleFont:Wme,titleColor:Gme,titleFontSize:qme,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:pJt,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Zc},line:{stroke:Zc,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:RT,fontSize:Vme,fill:NT},arc:{fill:Zc},area:{fill:Zc,line:!0,opacity:.6},path:{stroke:Zc},rect:{fill:Zc},point:{fill:Zc,filled:!0,size:75},shape:{stroke:Zc},symbol:{fill:Zc,strokeWidth:1.5,size:50},legend:{titleFont:RT,titleFontWeight:"bold",titleColor:NT,labelFont:RT,labelFontSize:Hme,labelColor:NT,symbolType:"circle",symbolSize:75},range:{category:[Zc,mJt,gJt,yJt,vJt,bJt,_Jt,wJt],diverging:Kme,heatmap:Kme,ordinal:EJt}},A9='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',SJt='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',I9=400,iD={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},TJt=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],CJt=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function UF({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=iD.gridBg[e],i=iD.textPrimary[e],s=iD.textSecondary[e],o=n==="dark"?TJt:CJt,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:A9,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:SJt,labelFontWeight:I9,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:iD.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:A9,fill:s,fontWeight:I9},"guide-title":{font:A9,fill:s,fontWeight:I9}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const AJt=UF({theme:"white",background:"#ffffff"}),IJt=UF({theme:"g10",background:"#f4f4f4"}),kJt=UF({theme:"g90",background:"#262626"}),RJt=UF({theme:"g100",background:"#161616"}),NJt=KQt.version,DJt=Object.freeze(Object.defineProperty({__proto__:null,carbong10:IJt,carbong100:RJt,carbong90:kJt,carbonwhite:AJt,dark:XQt,excel:QQt,fivethirtyeight:eJt,ggplot2:tJt,googlecharts:hJt,latimes:sJt,powerbi:xJt,quartz:oJt,urbaninstitute:dJt,version:NJt,vox:aJt},Symbol.toStringTag,{value:"Module"}));function PJt(e,t,n,r){if(Fe(e))return`[${e.map(i=>t(ht(i)?i:Xme(i,n))).join(", ")}]`;if(mt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(mt(c)&&(c=Xme(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function OJt(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Xme(e,t){return JSON.stringify(e,OJt(t))}var $Jt=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const Q4e="vg-tooltip-element",MJt={offsetX:10,offsetY:10,id:Q4e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:LJt,maxDepth:2,formatTooltip:PJt,baseURL:""};function LJt(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function FJt(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return $Jt.toString().replace(Q4e,e)}function jJt(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class BJt{constructor(t){this.options={...MJt,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=FJt(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=jJt(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var k9={};function UJt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R9,Qme;function zJt(){return Qme||(Qme=1,R9=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),R9}var VJt=mr;mr.Node=lb;mr.create=mr;function mr(e){var t=this;if(t instanceof mr||(t=new mr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}mr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};mr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};mr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};mr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)qJt(this,arguments[e]);return this.length};mr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)WJt(this,arguments[e]);return this.length};mr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};mr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};mr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};mr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};mr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};mr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};mr.prototype.map=function(e,t){t=t||this;for(var n=new mr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};mr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new mr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};mr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};mr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};mr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};mr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};mr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new mr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};mr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new mr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};mr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=HJt(this,i,n[r]);return s};mr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function HJt(e,t,n){var r=t===e.head?new lb(n,null,t,e):new lb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function qJt(e,t){e.tail=new lb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function WJt(e,t){e.head=new lb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function lb(e,t,n,r){if(!(this instanceof lb))return new lb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{zJt()(mr)}catch{}const GJt=VJt,Nv=Symbol("max"),_p=Symbol("length"),b_=Symbol("lengthCalculator"),wA=Symbol("allowStale"),Jv=Symbol("maxAge"),pp=Symbol("dispose"),Jme=Symbol("noDisposeOnSet"),Us=Symbol("lruList"),ef=Symbol("cache"),J4e=Symbol("updateAgeOnGet"),N9=()=>1;class YJt{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Nv]=t.max||1/0;const n=t.length||N9;if(this[b_]=typeof n!="function"?N9:n,this[wA]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[Jv]=t.maxAge||0,this[pp]=t.dispose,this[Jme]=t.noDisposeOnSet||!1,this[J4e]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Nv]=t||1/0,DT(this)}get max(){return this[Nv]}set allowStale(t){this[wA]=!!t}get allowStale(){return this[wA]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[Jv]=t,DT(this)}get maxAge(){return this[Jv]}set lengthCalculator(t){typeof t!="function"&&(t=N9),t!==this[b_]&&(this[b_]=t,this[_p]=0,this[Us].forEach(n=>{n.length=this[b_](n.value,n.key),this[_p]+=n.length})),DT(this)}get lengthCalculator(){return this[b_]}get length(){return this[_p]}get itemCount(){return this[Us].length}rforEach(t,n){n=n||this;for(let r=this[Us].tail;r!==null;){const i=r.prev;Zme(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Us].head;r!==null;){const i=r.next;Zme(this,t,r,n),r=i}}keys(){return this[Us].toArray().map(t=>t.key)}values(){return this[Us].toArray().map(t=>t.value)}reset(){this[pp]&&this[Us]&&this[Us].length&&this[Us].forEach(t=>this[pp](t.key,t.value)),this[ef]=new Map,this[Us]=new GJt,this[_p]=0}dump(){return this[Us].map(t=>iM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Us]}set(t,n,r){if(r=r||this[Jv],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[b_](n,t);if(this[ef].has(t)){if(s>this[Nv])return Ww(this,this[ef].get(t)),!1;const u=this[ef].get(t).value;return this[pp]&&(this[Jme]||this[pp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[_p]+=s-u.length,u.length=s,this.get(t),DT(this),!0}const o=new KJt(t,n,s,i,r);return o.length>this[Nv]?(this[pp]&&this[pp](t,n),!1):(this[_p]+=o.length,this[Us].unshift(o),this[ef].set(t,this[Us].head),DT(this),!0)}has(t){if(!this[ef].has(t))return!1;const n=this[ef].get(t).value;return!iM(this,n)}get(t){return D9(this,t,!0)}peek(t){return D9(this,t,!1)}pop(){const t=this[Us].tail;return t?(Ww(this,t),t.value):null}del(t){Ww(this,this[ef].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[ef].forEach((t,n)=>D9(this,n,!1))}}const D9=(e,t,n)=>{const r=e[ef].get(t);if(r){const i=r.value;if(iM(e,i)){if(Ww(e,r),!e[wA])return}else n&&(e[J4e]&&(r.value.now=Date.now()),e[Us].unshiftNode(r));return i.value}},iM=(e,t)=>{if(!t||!t.maxAge&&!e[Jv])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[Jv]&&n>e[Jv]},DT=e=>{if(e[_p]>e[Nv])for(let t=e[Us].tail;e[_p]>e[Nv]&&t!==null;){const n=t.prev;Ww(e,t),t=n}},Ww=(e,t)=>{if(t){const n=t.value;e[pp]&&e[pp](n.key,n.value),e[_p]-=n.length,e[ef].delete(n.key),e[Us].removeNode(t)}};class KJt{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Zme=(e,t,n,r)=>{let i=n.value;iM(e,i)&&(Ww(e,n),e[wA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var XJt=YJt;const QJt=Object.freeze({loose:!0}),JJt=Object.freeze({}),ZJt=e=>e?typeof e!="object"?QJt:e:JJt;var jne=ZJt,fH={exports:{}};const eZt="2.0.0",Z4e=256,tZt=Number.MAX_SAFE_INTEGER||9007199254740991,nZt=16,rZt=Z4e-6,iZt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Bne={MAX_LENGTH:Z4e,MAX_SAFE_COMPONENT_LENGTH:nZt,MAX_SAFE_BUILD_LENGTH:rZt,MAX_SAFE_INTEGER:tZt,RELEASE_TYPES:iZt,SEMVER_SPEC_VERSION:eZt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const sZt=typeof process=="object"&&k9&&k9.NODE_DEBUG&&/\bsemver\b/i.test(k9.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var zF=sZt;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Bne,s=zF;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(fH,fH.exports);var Une=fH.exports;const ege=/^[0-9]+$/,eFe=(e,t)=>{const n=ege.test(e),r=ege.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},oZt=(e,t)=>eFe(t,e);var aZt={compareIdentifiers:eFe,rcompareIdentifiers:oZt};const sD=zF,{MAX_LENGTH:tge,MAX_SAFE_INTEGER:oD}=Bne,{safeRe:nge,t:rge}=Une,uZt=jne,{compareIdentifiers:__}=aZt;let lZt=class pd{constructor(t,n){if(n=uZt(n),t instanceof pd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>tge)throw new TypeError(`version is longer than ${tge} characters`);sD("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?nge[rge.LOOSE]:nge[rge.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>oD||this.major<0)throw new TypeError("Invalid major version");if(this.minor>oD||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>oD||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<oD)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(sD("SemVer.compare",this.version,this.options,t),!(t instanceof pd)){if(typeof t=="string"&&t===this.version)return 0;t=new pd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof pd||(t=new pd(t,this.options)),__(this.major,t.major)||__(this.minor,t.minor)||__(this.patch,t.patch)}comparePre(t){if(t instanceof pd||(t=new pd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(sD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return __(r,i)}while(++n)}compareBuild(t){t instanceof pd||(t=new pd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(sD("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return __(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),__(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var zne=lZt;const ige=zne,cZt=(e,t,n)=>new ige(e,n).compare(new ige(t,n));var kS=cZt;const fZt=kS,dZt=(e,t,n)=>fZt(e,t,n)===0;var hZt=dZt;const pZt=kS,mZt=(e,t,n)=>pZt(e,t,n)!==0;var gZt=mZt;const yZt=kS,vZt=(e,t,n)=>yZt(e,t,n)>0;var bZt=vZt;const _Zt=kS,wZt=(e,t,n)=>_Zt(e,t,n)>=0;var EZt=wZt;const xZt=kS,SZt=(e,t,n)=>xZt(e,t,n)<0;var TZt=SZt;const CZt=kS,AZt=(e,t,n)=>CZt(e,t,n)<=0;var IZt=AZt;const kZt=hZt,RZt=gZt,NZt=bZt,DZt=EZt,PZt=TZt,OZt=IZt,$Zt=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return kZt(e,n,r);case"!=":return RZt(e,n,r);case">":return NZt(e,n,r);case">=":return DZt(e,n,r);case"<":return PZt(e,n,r);case"<=":return OZt(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var MZt=$Zt,P9,sge;function LZt(){if(sge)return P9;sge=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}P9=t;const n=jne,{safeRe:r,t:i}=Une,s=MZt,o=zF,a=zne,u=tFe();return P9}var O9,oge;function tFe(){if(oge)return O9;oge=1;class e{constructor($,L){if(L=r(L),$ instanceof e)return $.loose===!!L.loose&&$.includePrerelease===!!L.includePrerelease?$:new e($.raw,L);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(F=>this.parseRange(F.trim())).filter(F=>F.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const F=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[F];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const F=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(F);if(B)return B;const U=this.options.loose,q=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(q,k(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let P=$.split(" ").map(H=>y(H,this.options)).join(" ").split(/\s+/).map(H=>R(H,this.options));U&&(P=P.filter(H=>(s("loose invalid filter",H,this.options),!!H.match(a[u.COMPARATORLOOSE])))),s("range list",P);const V=new Map,W=P.map(H=>new i(H,this.options));for(const H of W){if(p(H))return[H];V.set(H.value,H)}V.size>1&&V.has("")&&V.delete("");const j=[...V.values()];return n.set(F,j),j}intersects($,L){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(F=>g(F,L)&&$.set.some(B=>g(B,L)&&F.every(U=>B.every(q=>U.intersects(q,L)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(O(this.set[L],$,this.options))return!0;return!1}}O9=e;const t=XJt,n=new t({max:1e3}),r=jne,i=LZt(),s=zF,o=zne,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Une,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Bne,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,$)=>{let L=!0;const F=D.slice();let B=F.pop();for(;L&&F.length;)L=F.every(U=>B.intersects(U,$)),B=F.pop();return L},y=(D,$)=>(s("comp",D,$),D=x(D,$),s("caret",D),D=b(D,$),s("tildes",D),D=S(D,$),s("xrange",D),D=A(D,$),s("stars",D),D),v=D=>!D||D.toLowerCase()==="x"||D==="*",b=(D,$)=>D.trim().split(/\s+/).map(L=>w(L,$)).join(" "),w=(D,$)=>{const L=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(L,(F,B,U,q,P)=>{s("tilde",D,F,B,U,q,P);let V;return v(B)?V="":v(U)?V=`>=${B}.0.0 <${+B+1}.0.0-0`:v(q)?V=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:P?(s("replaceTilde pr",P),V=`>=${B}.${U}.${q}-${P} <${B}.${+U+1}.0-0`):V=`>=${B}.${U}.${q} <${B}.${+U+1}.0-0`,s("tilde return",V),V})},x=(D,$)=>D.trim().split(/\s+/).map(L=>T(L,$)).join(" "),T=(D,$)=>{s("caret",D,$);const L=$.loose?a[u.CARETLOOSE]:a[u.CARET],F=$.includePrerelease?"-0":"";return D.replace(L,(B,U,q,P,V)=>{s("caret",D,B,U,q,P,V);let W;return v(U)?W="":v(q)?W=`>=${U}.0.0${F} <${+U+1}.0.0-0`:v(P)?U==="0"?W=`>=${U}.${q}.0${F} <${U}.${+q+1}.0-0`:W=`>=${U}.${q}.0${F} <${+U+1}.0.0-0`:V?(s("replaceCaret pr",V),U==="0"?q==="0"?W=`>=${U}.${q}.${P}-${V} <${U}.${q}.${+P+1}-0`:W=`>=${U}.${q}.${P}-${V} <${U}.${+q+1}.0-0`:W=`>=${U}.${q}.${P}-${V} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?q==="0"?W=`>=${U}.${q}.${P}${F} <${U}.${q}.${+P+1}-0`:W=`>=${U}.${q}.${P}${F} <${U}.${+q+1}.0-0`:W=`>=${U}.${q}.${P} <${+U+1}.0.0-0`),s("caret return",W),W})},S=(D,$)=>(s("replaceXRanges",D,$),D.split(/\s+/).map(L=>C(L,$)).join(" ")),C=(D,$)=>{D=D.trim();const L=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(L,(F,B,U,q,P,V)=>{s("xRange",D,F,B,U,q,P,V);const W=v(U),j=W||v(q),H=j||v(P),G=H;return B==="="&&G&&(B=""),V=$.includePrerelease?"-0":"",W?B===">"||B==="<"?F="<0.0.0-0":F="*":B&&G?(j&&(q=0),P=0,B===">"?(B=">=",j?(U=+U+1,q=0,P=0):(q=+q+1,P=0)):B==="<="&&(B="<",j?U=+U+1:q=+q+1),B==="<"&&(V="-0"),F=`${B+U}.${q}.${P}${V}`):j?F=`>=${U}.0.0${V} <${+U+1}.0.0-0`:H&&(F=`>=${U}.${q}.0${V} <${U}.${+q+1}.0-0`),s("xRange return",F),F})},A=(D,$)=>(s("replaceStars",D,$),D.trim().replace(a[u.STAR],"")),R=(D,$)=>(s("replaceGTE0",D,$),D.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),k=D=>($,L,F,B,U,q,P,V,W,j,H,G,ne)=>(v(F)?L="":v(B)?L=`>=${F}.0.0${D?"-0":""}`:v(U)?L=`>=${F}.${B}.0${D?"-0":""}`:q?L=`>=${L}`:L=`>=${L}${D?"-0":""}`,v(W)?V="":v(j)?V=`<${+W+1}.0.0-0`:v(H)?V=`<${W}.${+j+1}.0-0`:G?V=`<=${W}.${j}.${H}-${G}`:D?V=`<${W}.${j}.${+H+1}-0`:V=`<=${V}`,`${L} ${V}`.trim()),O=(D,$,L)=>{for(let F=0;F<D.length;F++)if(!D[F].test($))return!1;if($.prerelease.length&&!L.includePrerelease){for(let F=0;F<D.length;F++)if(s(D[F].semver),D[F].semver!==i.ANY&&D[F].semver.prerelease.length>0){const B=D[F].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return O9}const FZt=tFe(),jZt=(e,t,n)=>{try{t=new FZt(t,n)}catch{return!1}return t.test(e)};var BZt=jZt,nFe=UJt(BZt);function UZt(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var zZt=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function rFe(e,...t){for(const n of t)VZt(e,n);return e}function VZt(e,t){for(const n of Object.keys(t))fS(e,n,t[n],!0)}const nf=Czt;let lI=NQt;const aD=typeof window<"u"?window:void 0;var dge;lI===void 0&&((dge=aD==null?void 0:aD.vl)!=null&&dge.compile)&&(lI=aD.vl);const HZt={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},qZt={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},EC={vega:"Vega","vega-lite":"Vega-Lite"},sM={vega:nf.version,"vega-lite":lI?lI.version:"not available"},WZt={vega:e=>e,"vega-lite":(e,t)=>lI.compile(e,{config:t}).spec},GZt=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,YZt="chart-wrapper";function KZt(e){return typeof e=="function"}function age(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${EC[r]} JSON Source`}function XZt(e,t){if(e.$schema){const n=Y4e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${EC[n.library]}, but mode argument sets ${EC[t]??t}.`);const r=n.library;return nFe(sM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${EC[r]} ${n.version}, but the current version of ${EC[r]} is v${sM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function iFe(e){return!!(e&&"load"in e)}function uge(e){return iFe(e)?e:nf.loader(e)}function QZt(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return ht(t.defaultStyle)&&(t.defaultStyle=!1),t}async function JZt(e,t,n={}){let r,i;ht(t)?(i=uge(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=QZt(r),o=s.loader;(!i||o)&&(i=uge(n.loader??o));const a=await lge(s,i),u=await lge(n,i),l={...rFe(u,a),config:cS(u.config??{},a.config??{})};return await een(e,r,l,i)}async function lge(e,t){const n=ht(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=ht(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function ZZt(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function een(e,t,n={},r){const i=n.theme?cS(DJt[n.theme],n.config??{}):n.config,s=Ry(n.actions)?n.actions:rFe({},HZt,n.actions??{}),o={...qZt,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??nf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const x="vega-embed-style",{root:T,rootContainer:S}=ZZt(c);if(!T.getElementById(x)){const C=document.createElement("style");C.id=x,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?zZt.toString():n.defaultStyle,S.appendChild(C)}}const f=XZt(t,n.mode);let d=WZt[f](t,i);if(f==="vega-lite"&&d.$schema){const x=Y4e(d.$schema);nFe(sM.vega,`^${x.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${x.version}, but current version is v${sM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const x=document.createElement("div");x.classList.add(YZt),c.appendChild(x),h=x}const p=n.patch;if(p&&(d=p instanceof Function?p(d):r4(d,p,!0,!1).newDocument),n.formatLocale&&nf.formatLocale(n.formatLocale),n.timeFormatLocale&&nf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const x in n.expressionFunctions){const T=n.expressionFunctions[x];"fn"in T?nf.expressionFunction(x,T.fn,T.visitor):T instanceof Function&&nf.expressionFunction(x,T)}const{ast:m}=n,g=nf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||nf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:nf.expressionInterpreter??n.expr??Mzt}:{}});if(y.addSignalListener("autosize",(x,T)=>{const{type:S}=T;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:x,tooltip:T}=n,S=x&&!iFe(x)?x==null?void 0:x.baseURL:void 0,C=KZt(T)?T:new BJt({baseURL:S,...T===!0?{}:T}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:x,updateSet:T}=typeof v=="boolean"?{}:v;y.hover(x,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let x=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),x=S;const C=document.createElement("summary");C.innerHTML=GZt,S.append(C),b=A=>{S.contains(A.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const T=document.createElement("div");if(x.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const C=o[`${S.toUpperCase()}_ACTION`],A=document.createElement("a"),R=mt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${S}`,A.addEventListener("mousedown",async function(k){k.preventDefault();const O=await y.toImageURL(S,R);this.href=O}),T.append(A)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(C){age($j(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),T.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(C){age($j(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),T.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){UZt(window,S,{config:i,mode:f,renderer:a,spec:$j(t)}),A.preventDefault()}),T.append(C)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function ten(e){return!!e&&{}.toString.call(e)==="[object Function]"}function nen(e,t,n){n&&(ten(n)?n(e.data(t)):e.change(t,nf.changeset().remove(()=>!0).insert(n)))}function ren(e,t){Object.keys(t).forEach(n=>{nen(e,n,t[n])})}function sFe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const oFe=()=>{};function $9(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function ien(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=sFe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!kD(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function cge(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function M9(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function xC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class aFe extends Hi.PureComponent{constructor(){super(...arguments),xC(this,"containerRef",Hi.createRef()),xC(this,"resultPromise",void 0),xC(this,"handleError",t=>{const{onError:n=oFe}=this.props;n(t,this.containerRef.current),console.warn(t)}),xC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=sFe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=ien(M9(this.props),M9(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!Lz(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&cge(a,s),i&&$9(a,i)),a.run()})}else Lz(i,s)||this.modifyView(o=>{s&&cge(o,s),i&&$9(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=M9(this.props);this.resultPromise=JZt(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;$9(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Hi.createElement("div",{ref:this.containerRef,className:t,style:n})}}xC(aFe,"propTypes",{className:gde.string,onError:gde.func});function dH(){return dH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dH.apply(this,arguments)}function hH(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const sen={};class uFe extends Hi.PureComponent{constructor(){super(...arguments),hH(this,"vegaEmbed",Hi.createRef()),hH(this,"handleNewView",t=>{this.update();const{onNewView:n=oFe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){Lz(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{ren(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Hi.createElement(aFe,dH({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}hH(uFe,"defaultProps",{data:sen});function pH(){return pH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pH.apply(this,arguments)}function oen(e){return Hi.createElement(uFe,pH({},e,{mode:"vega-lite"}))}function fge(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function aen(e){const{studyId:t,allParticipants:n,config:r}=e,i=$m(),[s,o]=zye(),a=n.filter(y=>y.completed).map(y=>Math.max(...Object.values(y.answers).map(v=>v.endTime).filter(v=>v!==void 0))).filter(y=>Number.isFinite(y)),[u,l]=N.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),c=N.useMemo(()=>n.filter(y=>y.completed&&fge(y.answers,u)),[n,u]),f=N.useMemo(()=>n.filter(y=>!y.completed&&fge(y.answers,u)),[n,u]),d=N.useMemo(()=>{var y,v;return c.length>0?[{Date:(y=u[0])==null?void 0:y.getTime(),Participants:0},...c.map(b=>Math.max(...Object.values(b.answers).map(w=>w.endTime).flat())).sort((b,w)=>b-w).map((b,w)=>({Date:b,Participants:w})),{Date:(v=u[1])==null?void 0:v.getTime(),Participants:c.length}]:[]},[c,u]),h=N.useMemo(()=>{var y,v;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(y=u[0])==null?void 0:y.getTime(),(v=u[1])==null?void 0:v.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[o.width,u,d]),[p,{close:m,open:g}]=t1(!1);return _.jsx(Ih,{children:_.jsxs(hy,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(qt,{align:"center",mb:16,justify:"space-between",children:[_.jsxs(qt,{direction:"column",children:[_.jsx(ns,{order:5,mb:4,children:t}),_.jsxs(qt,{direction:"row",wrap:"nowrap",gap:"xs",align:"center",mb:4,children:[_.jsxs(zp,{size:"sm",color:"orange",children:["Total:",f.length+c.length]}),_.jsxs(zp,{size:"sm",color:"green",children:["Completed:",c.length]}),_.jsxs(zp,{size:"sm",color:"cyan",children:["In Progress:",f.length]})]})]}),_.jsxs(Xs,{children:[_.jsx(ENe,{allParticipants:n,studyId:t,config:r}),_.jsxs(Nr,{opened:p,children:[_.jsx(Nr.Target,{children:_.jsx(jn,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:g,onMouseLeave:m,px:4,children:_.jsx(RGe,{})})}),_.jsx(Nr.Dropdown,{children:_.jsx(et,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(rJ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{mt:16,children:"Finished Participants"}),_.jsx(oen,{spec:h,actions:!1})]}):_.jsx(_e,{h:293.4,children:_.jsx(E0,{style:{height:"100%"},children:_.jsx(et,{children:"Not enough participants for chart"})})})]})})}function uen(e){const{globalConfig:t}=e,[n,r]=N.useState(!1),[i,s]=N.useState({}),[o,a]=N.useState({}),{storageEngine:u}=ba();return N.useEffect(()=>{(async()=>{r(!0);const c={},f={},d=async p=>{const m=await V6(p,t);if(u){if(c[p]=await u.getAllParticipantsDataByStudy(p),m===null)return;f[p]=m}};await(async()=>{const p=t.configsList.map(m=>d(m));try{await Promise.all(p),s(c),a(f)}catch(m){console.error("Error fetching data:",m)}finally{r(!1)}})()})()},[t,u]),_.jsxs(_e,{children:[_.jsx(ns,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Fa,{children:[t.configsList.map(l=>i[l]&&_.jsx(Fa.Col,{span:{md:12,xl:6},children:_.jsx(aen,{studyId:l,allParticipants:i[l],config:o[l]})},`${l}-panel`)),_.jsx(_c,{visible:n})]})]})}function len({globalConfig:e}){return _.jsxs(_.Fragment,{children:[_.jsx(fA,{studyIds:e.configsList}),_.jsx(fi.Main,{children:_.jsx(Ih,{fluid:!0,children:_.jsx(uen,{globalConfig:e})})})]})}function cen(){const{user:e,triggerAuth:t}=uS(),{storageEngine:n}=ba(),[r,i]=N.useState(!1),[s,o]=N.useState([]),[a,u]=N.useState(!1),[l,c]=N.useState(!1),[f,d]=N.useState(!1),[h,p]=N.useState(!1),[m,g]=N.useState(""),[y,v]=N.useState(null),b=Awe({initialValues:{email:""},validate:{email:Trt("Invalid email")}});N.useEffect(()=>{(async()=>{if(u(!0),n instanceof vp){const k=await(n==null?void 0:n.getUserManagementData("authentication"));i(k==null?void 0:k.isEnabled);const O=await(n==null?void 0:n.getUserManagementData("adminUsers"));O&&O.adminUsersList&&o(O==null?void 0:O.adminUsersList.map(D=>D.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof vp){const R=await xNe(n,u);R&&R.email&&v({email:R.email,uid:R.uid}),p(!0)}u(!1)},x=async R=>{u(!0),n instanceof vp&&R&&(await n.changeAuth(!0),await n.addAdminUser(R),o([R.email]),i(!0),t()),p(!1),u(!1)},T=async()=>{if(u(!0),n instanceof vp){await n.addAdminUser({email:b.values.email,uid:null});const R=await n.getUserManagementData("adminUsers");o(R==null?void 0:R.adminUsersList.map(k=>k.email))}u(!1),c(!1),b.setValues({email:""})},S=R=>{d(!0),g(R)},C=async()=>{if(u(!0),n instanceof vp){await n.removeAdminUser(m);const R=await n.getUserManagementData("adminUsers");o(R==null?void 0:R.adminUsersList.map(k=>k.email))}d(!1),u(!1)},A=N.useMemo(()=>n instanceof vp,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Ih,{children:_.jsxs(hy,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ns,{mb:20,order:3,children:"Authentication"}),r?_.jsx(qt,{children:_.jsx(et,{children:"Authentication is enabled."})}):_.jsxs(qt,{justify:"space-between",children:[_.jsx(_e,{children:_.jsx(et,{children:"Authentication is currently disabled."})}),_.jsx(ia,{label:"You can only enable auth when using Firebase",disabled:A,children:_.jsx(jn,{onClick:R=>A?w():R.preventDefault(),color:"green","data-disabled":A?void 0:!0,style:{"&[data-disabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(qt,{mt:40,direction:"column",children:[_.jsxs(qt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(ns,{order:6,children:"Enabled Users"}),_.jsx(sG,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(R=>{var k;return _.jsxs(qt,{justify:"space-between",mb:10,children:[_.jsx(et,{children:R}),R===((k=e.user)==null?void 0:k.email)?_.jsx(et,{color:"blue",size:"xs",children:"You"}):_.jsx(w0,{variant:"subtle",onClick:()=>S(R),children:_.jsx(Sbe,{color:"red"})})]},R)}):null]}):null]})}),_.jsx(gs,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(_e,{component:"form",onSubmit:b.onSubmit(()=>T()),children:[_.jsx(s1,{leftSection:_.jsx(CGe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs(qt,{mt:30,justify:"right",children:[_.jsx(jn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(jn,{type:"submit",children:"Save"})]})]})}),_.jsxs(gs,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(et,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(et,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(qt,{mt:40,justify:"right",children:[_.jsx(jn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(jn,{onClick:()=>C(),children:"Yes, I'm sure."})]})]}),_.jsxs(gs,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(et,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(et,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(qt,{mt:40,justify:"right",children:[_.jsx(jn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(jn,{onClick:()=>x(y),children:"Yes, I'm sure."})]})]}),_.jsx(_c,{visible:a})]})}class fen extends vNe{constructor(){super("localStorage");tl(this,"studyDatabase")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyDatabase=await Mz.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await Fw(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s){var l;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(s),!this.currentParticipantId)throw new Error("Participant not initialized");const o=await this.studyDatabase.getItem(this.currentParticipantId);if(o)return o;const a=await Fw(JSON.stringify(r)),u={participantId:this.currentParticipantId,participantConfigHash:a,sequence:await this.getSequence(),answers:{},searchParams:n,metadata:i,completed:!1,rejected:!1};return await((l=this.studyDatabase)==null?void 0:l.setItem(this.currentParticipantId,u)),u}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=f$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");const r=n.pop();if(!r)throw new Error("Latin square is empty");return await this.studyDatabase.setItem("sequenceArray",n),r}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Mz.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=f$();this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i;let s=await this.studyDatabase.getItem(i);if(!s){const o=await Fw(JSON.stringify(n)),a={participantId:i,participantConfigHash:o,sequence:await this.getSequence(),answers:{},searchParams:{},metadata:r,completed:!1,rejected:!1};await this.studyDatabase.setItem(i,a),s=a}return s}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}_verifyStudyDatabase(n){return n!==void 0}}async function den(){let e;{const t=new fen;await t.connect(),e=t}return e}async function hen(){const t=await(await fetch(`${Nh}global.json`)).text();return Zxt(t)}function pen(){const[e,t]=N.useState(null),[n,r]=N.useState({});N.useEffect(()=>{async function o(){e&&r(await vDt(e))}o()},[e]),N.useEffect(()=>{e||hen().then(o=>{t(o)})},[e]);const{storageEngine:i,setStorageEngine:s}=ba();return N.useEffect(()=>{if(i!==void 0)return;async function o(){const a=await den();s(a)}o()},[s,i]),e?_.jsx(gGe,{basename:Nh,children:_.jsx(oDt,{children:_.jsx(EGe,{children:_.jsx(fi,{padding:"md",header:{height:70},children:_.jsxs(dGe,{children:[_.jsx(up,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(fA,{studyIds:e.configsList}),_.jsx(Rtt,{globalConfig:e,studyConfigs:n})]})}),_.jsx(up,{path:"/:studyId/*",element:_.jsx(bDt,{globalConfig:e})}),_.jsx(up,{path:"/analysis/dashboard",element:_.jsx(Pj,{children:_.jsx(len,{globalConfig:e})})}),_.jsx(up,{path:"/analysis",element:_.jsx(az,{to:"/analysis/dashboard"})}),_.jsx(up,{path:"/analysis/stats/:studyId/:tab",element:_.jsx(Pj,{children:_.jsx(SDt,{globalConfig:e})})}),_.jsx(up,{path:"/analysis/stats/:studyId",element:_.jsx(az,{to:"./table",replace:!0})}),_.jsx(up,{path:"/settings",element:_.jsxs(Pj,{children:[_.jsx(fA,{studyIds:e.configsList}),_.jsx(fi.Main,{children:_.jsx(cen,{})})]})}),_.jsx(up,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(fA,{studyIds:e.configsList}),_.jsx(fi.Main,{children:_.jsx(TDt,{})})]})})]})})})})}):null}L9.createRoot(document.getElementById("root")).render(_.jsx(Hi.StrictMode,{children:_.jsx(EWe,{children:_.jsx(Kye,{children:_.jsx(pen,{})})})}))});export default men();
