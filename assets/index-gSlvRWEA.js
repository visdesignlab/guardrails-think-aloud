var D8e=Object.defineProperty;var O8e=(e,t,n)=>t in e?D8e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $8e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var hu=(e,t,n)=>O8e(e,typeof t!="symbol"?t+"":t,n);var Esn=$8e((Con,Bre)=>{function M8e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ms=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function nl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function H0e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var q0e={exports:{}},kM={},W0e={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CI=Symbol.for("react.element"),L8e=Symbol.for("react.portal"),F8e=Symbol.for("react.fragment"),j8e=Symbol.for("react.strict_mode"),B8e=Symbol.for("react.profiler"),U8e=Symbol.for("react.provider"),z8e=Symbol.for("react.context"),V8e=Symbol.for("react.forward_ref"),H8e=Symbol.for("react.suspense"),q8e=Symbol.for("react.memo"),W8e=Symbol.for("react.lazy"),sie=Symbol.iterator;function G8e(e){return e===null||typeof e!="object"?null:(e=sie&&e[sie]||e["@@iterator"],typeof e=="function"?e:null)}var G0e={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Y0e=Object.assign,K0e={};function Ex(e,t,n){this.props=e,this.context=t,this.refs=K0e,this.updater=n||G0e}Ex.prototype.isReactComponent={};Ex.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ex.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function X0e(){}X0e.prototype=Ex.prototype;function nq(e,t,n){this.props=e,this.context=t,this.refs=K0e,this.updater=n||G0e}var rq=nq.prototype=new X0e;rq.constructor=nq;Y0e(rq,Ex.prototype);rq.isPureReactComponent=!0;var oie=Array.isArray,Q0e=Object.prototype.hasOwnProperty,iq={current:null},J0e={key:!0,ref:!0,__self:!0,__source:!0};function Z0e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Q0e.call(t,r)&&!J0e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:CI,type:e,key:s,ref:o,props:i,_owner:iq.current}}function Y8e(e,t){return{$$typeof:CI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function sq(e){return typeof e=="object"&&e!==null&&e.$$typeof===CI}function K8e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var aie=/\/+/g;function C5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?K8e(""+e.key):t.toString(36)}function RP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case CI:case L8e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+C5(o,0):r,oie(i)?(n="",e!=null&&(n=e.replace(aie,"$&/")+"/"),RP(i,t,n,"",function(l){return l})):i!=null&&(sq(i)&&(i=Y8e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(aie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",oie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+C5(s,a);o+=RP(s,t,n,u,i)}else if(u=G8e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+C5(s,a++),o+=RP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function MR(e,t,n){if(e==null)return e;var r=[],i=0;return RP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function X8e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ru={current:null},NP={transition:null},Q8e={ReactCurrentDispatcher:ru,ReactCurrentBatchConfig:NP,ReactCurrentOwner:iq};function eye(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:MR,forEach:function(e,t,n){MR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return MR(e,function(){t++}),t},toArray:function(e){return MR(e,function(t){return t})||[]},only:function(e){if(!sq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=Ex;Mn.Fragment=F8e;Mn.Profiler=B8e;Mn.PureComponent=nq;Mn.StrictMode=j8e;Mn.Suspense=H8e;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q8e;Mn.act=eye;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Y0e({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=iq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)Q0e.call(t,u)&&!J0e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:CI,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:z8e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:U8e,_context:e},e.Consumer=e};Mn.createElement=Z0e;Mn.createFactory=function(e){var t=Z0e.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:V8e,render:e}};Mn.isValidElement=sq;Mn.lazy=function(e){return{$$typeof:W8e,_payload:{_status:-1,_result:e},_init:X8e}};Mn.memo=function(e,t){return{$$typeof:q8e,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=NP.transition;NP.transition={};try{e()}finally{NP.transition=t}};Mn.unstable_act=eye;Mn.useCallback=function(e,t){return ru.current.useCallback(e,t)};Mn.useContext=function(e){return ru.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return ru.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return ru.current.useEffect(e,t)};Mn.useId=function(){return ru.current.useId()};Mn.useImperativeHandle=function(e,t,n){return ru.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return ru.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return ru.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return ru.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return ru.current.useReducer(e,t,n)};Mn.useRef=function(e){return ru.current.useRef(e)};Mn.useState=function(e){return ru.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return ru.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return ru.current.useTransition()};Mn.version="18.3.1";W0e.exports=Mn;var I=W0e.exports;const Wi=nl(I),KD=M8e({__proto__:null,default:Wi},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J8e=I,Z8e=Symbol.for("react.element"),eje=Symbol.for("react.fragment"),tje=Object.prototype.hasOwnProperty,nje=J8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rje={key:!0,ref:!0,__self:!0,__source:!0};function tye(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)tje.call(t,r)&&!rje.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Z8e,type:e,key:s,ref:o,props:i,_owner:nje.current}}kM.Fragment=eje;kM.jsx=tye;kM.jsxs=tye;q0e.exports=kM;var _=q0e.exports,yB={},nye={exports:{}},Gl={},rye={exports:{}},iye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(B,V){var D=B.length;B.push(V);e:for(;0<D;){var z=D-1>>>1,W=B[z];if(0<i(W,V))B[z]=V,B[D]=W,D=z;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var V=B[0],D=B.pop();if(D!==V){B[0]=D;e:for(var z=0,W=B.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=B[q],te=q+1,ve=B[te];if(0>i(G,D))te<W&&0>i(ve,G)?(B[z]=ve,B[te]=D,z=te):(B[z]=G,B[q]=D,z=q);else if(te<W&&0>i(ve,D))B[z]=ve,B[te]=D,z=te;else break e}}return V}function i(B,V){var D=B.sortIndex-V.sortIndex;return D!==0?D:B.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var V=n(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=B)r(l),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(l)}}function w(B){if(m=!1,b(B),!p)if(n(u)!==null)p=!0,M(E);else{var V=n(l);V!==null&&U(w,V.startTime-B)}}function E(B,V){p=!1,m&&(m=!1,y(C),C=-1),h=!0;var D=d;try{for(b(V),f=n(u);f!==null&&(!(f.expirationTime>V)||B&&!k());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=V);V=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(V)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&U(w,q.startTime-V),j=!1}return j}finally{f=null,d=D,h=!1}}var S=!1,T=null,C=-1,A=5,N=-1;function k(){return!(e.unstable_now()-N<A)}function O(){if(T!==null){var B=e.unstable_now();N=B;var V=!0;try{V=T(!0,B)}finally{V?P():(S=!1,T=null)}}else S=!1}var P;if(typeof v=="function")P=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,L=$.port2;$.port1.onmessage=O,P=function(){L.postMessage(null)}}else P=function(){g(O,0)};function M(B){T=B,S||(S=!0,P())}function U(B,V){C=g(function(){B(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(B){B.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(E))},e.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(B){switch(d){case 1:case 2:case 3:var V=3;break;default:V=d}var D=d;d=V;try{return B()}finally{d=D}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(B,V){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var D=d;d=B;try{return V()}finally{d=D}},e.unstable_scheduleCallback=function(B,V,D){var z=e.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?z+D:z):D=z,B){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=D+W,B={id:c++,callback:V,priorityLevel:B,startTime:D,expirationTime:W,sortIndex:-1},D>z?(B.sortIndex=D,t(l,B),n(u)===null&&B===n(l)&&(m?(y(C),C=-1):m=!0,U(w,D-z))):(B.sortIndex=W,t(u,B),p||h||(p=!0,M(E))),B},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(B){var V=d;return function(){var D=d;d=V;try{return B.apply(this,arguments)}finally{d=D}}}})(iye);rye.exports=iye;var ije=rye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sje=I,Dl=ije;function rt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var sye=new Set,L2={};function ub(e,t){eE(e,t),eE(e+"Capture",t)}function eE(e,t){for(L2[e]=t,e=0;e<t.length;e++)sye.add(t[e])}var im=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vB=Object.prototype.hasOwnProperty,oje=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,uie={},lie={};function aje(e){return vB.call(lie,e)?!0:vB.call(uie,e)?!1:oje.test(e)?lie[e]=!0:(uie[e]=!0,!1)}function uje(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lje(e,t,n,r){if(t===null||typeof t>"u"||uje(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function iu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Lo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Lo[e]=new iu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Lo[t]=new iu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Lo[e]=new iu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Lo[e]=new iu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Lo[e]=new iu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Lo[e]=new iu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Lo[e]=new iu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Lo[e]=new iu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Lo[e]=new iu(e,5,!1,e.toLowerCase(),null,!1,!1)});var oq=/[\-:]([a-z])/g;function aq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(oq,aq);Lo[t]=new iu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(oq,aq);Lo[t]=new iu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(oq,aq);Lo[t]=new iu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Lo[e]=new iu(e,1,!1,e.toLowerCase(),null,!1,!1)});Lo.xlinkHref=new iu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Lo[e]=new iu(e,1,!1,e.toLowerCase(),null,!0,!0)});function uq(e,t,n,r){var i=Lo.hasOwnProperty(t)?Lo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(lje(t,n,i,r)&&(n=null),r||i===null?aje(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rm=sje.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,LR=Symbol.for("react.element"),z_=Symbol.for("react.portal"),V_=Symbol.for("react.fragment"),lq=Symbol.for("react.strict_mode"),bB=Symbol.for("react.profiler"),oye=Symbol.for("react.provider"),aye=Symbol.for("react.context"),cq=Symbol.for("react.forward_ref"),_B=Symbol.for("react.suspense"),wB=Symbol.for("react.suspense_list"),fq=Symbol.for("react.memo"),vg=Symbol.for("react.lazy"),uye=Symbol.for("react.offscreen"),cie=Symbol.iterator;function US(e){return e===null||typeof e!="object"?null:(e=cie&&e[cie]||e["@@iterator"],typeof e=="function"?e:null)}var Pi=Object.assign,A5;function UT(e){if(A5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);A5=t&&t[1]||""}return`
`+A5+e}var I5=!1;function k5(e,t){if(!e||I5)return"";I5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{I5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?UT(e):""}function cje(e){switch(e.tag){case 5:return UT(e.type);case 16:return UT("Lazy");case 13:return UT("Suspense");case 19:return UT("SuspenseList");case 0:case 2:case 15:return e=k5(e.type,!1),e;case 11:return e=k5(e.type.render,!1),e;case 1:return e=k5(e.type,!0),e;default:return""}}function EB(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case V_:return"Fragment";case z_:return"Portal";case bB:return"Profiler";case lq:return"StrictMode";case _B:return"Suspense";case wB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case aye:return(e.displayName||"Context")+".Consumer";case oye:return(e._context.displayName||"Context")+".Provider";case cq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fq:return t=e.displayName||null,t!==null?t:EB(e.type)||"Memo";case vg:t=e._payload,e=e._init;try{return EB(e(t))}catch{}}return null}function fje(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return EB(t);case 8:return t===lq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function C0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function dje(e){var t=lye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function FR(e){e._valueTracker||(e._valueTracker=dje(e))}function cye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=lye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function XD(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function xB(e,t){var n=t.checked;return Pi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function fie(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=C0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function fye(e,t){t=t.checked,t!=null&&uq(e,"checked",t,!1)}function SB(e,t){fye(e,t);var n=C0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?TB(e,t.type,n):t.hasOwnProperty("defaultValue")&&TB(e,t.type,C0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function die(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function TB(e,t,n){(t!=="number"||XD(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var zT=Array.isArray;function mw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+C0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function CB(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(rt(91));return Pi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function hie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(rt(92));if(zT(n)){if(1<n.length)throw Error(rt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:C0(n)}}function dye(e,t){var n=C0(t.value),r=C0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function hye(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function AB(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?hye(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var jR,pye=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(jR=jR||document.createElement("div"),jR.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=jR.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function F2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var jC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hje=["Webkit","ms","Moz","O"];Object.keys(jC).forEach(function(e){hje.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),jC[t]=jC[e]})});function mye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||jC.hasOwnProperty(e)&&jC[e]?(""+t).trim():t+"px"}function gye(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=mye(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var pje=Pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function IB(e,t){if(t){if(pje[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(rt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(rt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(rt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(rt(62))}}function kB(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var RB=null;function dq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var NB=null,gw=null,yw=null;function mie(e){if(e=kI(e)){if(typeof NB!="function")throw Error(rt(280));var t=e.stateNode;t&&(t=OM(t),NB(e.stateNode,e.type,t))}}function yye(e){gw?yw?yw.push(e):yw=[e]:gw=e}function vye(){if(gw){var e=gw,t=yw;if(yw=gw=null,mie(e),t)for(e=0;e<t.length;e++)mie(t[e])}}function bye(e,t){return e(t)}function _ye(){}var R5=!1;function wye(e,t,n){if(R5)return e(t,n);R5=!0;try{return bye(e,t,n)}finally{R5=!1,(gw!==null||yw!==null)&&(_ye(),vye())}}function j2(e,t){var n=e.stateNode;if(n===null)return null;var r=OM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(rt(231,t,typeof n));return n}var PB=!1;if(im)try{var zS={};Object.defineProperty(zS,"passive",{get:function(){PB=!0}}),window.addEventListener("test",zS,zS),window.removeEventListener("test",zS,zS)}catch{PB=!1}function mje(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var BC=!1,QD=null,JD=!1,DB=null,gje={onError:function(e){BC=!0,QD=e}};function yje(e,t,n,r,i,s,o,a,u){BC=!1,QD=null,mje.apply(gje,arguments)}function vje(e,t,n,r,i,s,o,a,u){if(yje.apply(this,arguments),BC){if(BC){var l=QD;BC=!1,QD=null}else throw Error(rt(198));JD||(JD=!0,DB=l)}}function lb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Eye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gie(e){if(lb(e)!==e)throw Error(rt(188))}function bje(e){var t=e.alternate;if(!t){if(t=lb(e),t===null)throw Error(rt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return gie(i),e;if(s===r)return gie(i),t;s=s.sibling}throw Error(rt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(rt(189))}}if(n.alternate!==r)throw Error(rt(190))}if(n.tag!==3)throw Error(rt(188));return n.stateNode.current===n?e:t}function xye(e){return e=bje(e),e!==null?Sye(e):null}function Sye(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Sye(e);if(t!==null)return t;e=e.sibling}return null}var Tye=Dl.unstable_scheduleCallback,yie=Dl.unstable_cancelCallback,_je=Dl.unstable_shouldYield,wje=Dl.unstable_requestPaint,ss=Dl.unstable_now,Eje=Dl.unstable_getCurrentPriorityLevel,hq=Dl.unstable_ImmediatePriority,Cye=Dl.unstable_UserBlockingPriority,ZD=Dl.unstable_NormalPriority,xje=Dl.unstable_LowPriority,Aye=Dl.unstable_IdlePriority,RM=null,ih=null;function Sje(e){if(ih&&typeof ih.onCommitFiberRoot=="function")try{ih.onCommitFiberRoot(RM,e,void 0,(e.current.flags&128)===128)}catch{}}var Lf=Math.clz32?Math.clz32:Aje,Tje=Math.log,Cje=Math.LN2;function Aje(e){return e>>>=0,e===0?32:31-(Tje(e)/Cje|0)|0}var BR=64,UR=4194304;function VT(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function eO(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=VT(a):(s&=o,s!==0&&(r=VT(s)))}else o=n&~i,o!==0?r=VT(o):s!==0&&(r=VT(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Lf(t),i=1<<n,r|=e[n],t&=~i;return r}function Ije(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kje(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Lf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Ije(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function OB(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Iye(){var e=BR;return BR<<=1,!(BR&4194240)&&(BR=64),e}function N5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function AI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Lf(t),e[t]=n}function Rje(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Lf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function pq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Lf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var $r=0;function kye(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Rye,mq,Nye,Pye,Dye,$B=!1,zR=[],e0=null,t0=null,n0=null,B2=new Map,U2=new Map,Ag=[],Nje="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vie(e,t){switch(e){case"focusin":case"focusout":e0=null;break;case"dragenter":case"dragleave":t0=null;break;case"mouseover":case"mouseout":n0=null;break;case"pointerover":case"pointerout":B2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":U2.delete(t.pointerId)}}function VS(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=kI(t),t!==null&&mq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function Pje(e,t,n,r,i){switch(t){case"focusin":return e0=VS(e0,e,t,n,r,i),!0;case"dragenter":return t0=VS(t0,e,t,n,r,i),!0;case"mouseover":return n0=VS(n0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return B2.set(s,VS(B2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,U2.set(s,VS(U2.get(s)||null,e,t,n,r,i)),!0}return!1}function Oye(e){var t=Lv(e.target);if(t!==null){var n=lb(t);if(n!==null){if(t=n.tag,t===13){if(t=Eye(n),t!==null){e.blockedOn=t,Dye(e.priority,function(){Nye(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function PP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=MB(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);RB=r,n.target.dispatchEvent(r),RB=null}else return t=kI(n),t!==null&&mq(t),e.blockedOn=n,!1;t.shift()}return!0}function bie(e,t,n){PP(e)&&n.delete(t)}function Dje(){$B=!1,e0!==null&&PP(e0)&&(e0=null),t0!==null&&PP(t0)&&(t0=null),n0!==null&&PP(n0)&&(n0=null),B2.forEach(bie),U2.forEach(bie)}function HS(e,t){e.blockedOn===t&&(e.blockedOn=null,$B||($B=!0,Dl.unstable_scheduleCallback(Dl.unstable_NormalPriority,Dje)))}function z2(e){function t(i){return HS(i,e)}if(0<zR.length){HS(zR[0],e);for(var n=1;n<zR.length;n++){var r=zR[n];r.blockedOn===e&&(r.blockedOn=null)}}for(e0!==null&&HS(e0,e),t0!==null&&HS(t0,e),n0!==null&&HS(n0,e),B2.forEach(t),U2.forEach(t),n=0;n<Ag.length;n++)r=Ag[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ag.length&&(n=Ag[0],n.blockedOn===null);)Oye(n),n.blockedOn===null&&Ag.shift()}var vw=Rm.ReactCurrentBatchConfig,tO=!0;function Oje(e,t,n,r){var i=$r,s=vw.transition;vw.transition=null;try{$r=1,gq(e,t,n,r)}finally{$r=i,vw.transition=s}}function $je(e,t,n,r){var i=$r,s=vw.transition;vw.transition=null;try{$r=4,gq(e,t,n,r)}finally{$r=i,vw.transition=s}}function gq(e,t,n,r){if(tO){var i=MB(e,t,n,r);if(i===null)U5(e,t,r,nO,n),vie(e,r);else if(Pje(i,e,t,n,r))r.stopPropagation();else if(vie(e,r),t&4&&-1<Nje.indexOf(e)){for(;i!==null;){var s=kI(i);if(s!==null&&Rye(s),s=MB(e,t,n,r),s===null&&U5(e,t,r,nO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else U5(e,t,r,null,n)}}var nO=null;function MB(e,t,n,r){if(nO=null,e=dq(r),e=Lv(e),e!==null)if(t=lb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Eye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nO=e,null}function $ye(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eje()){case hq:return 1;case Cye:return 4;case ZD:case xje:return 16;case Aye:return 536870912;default:return 16}default:return 16}}var Fg=null,yq=null,DP=null;function Mye(){if(DP)return DP;var e,t=yq,n=t.length,r,i="value"in Fg?Fg.value:Fg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return DP=i.slice(e,1<r?1-r:void 0)}function OP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function VR(){return!0}function _ie(){return!1}function Yl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?VR:_ie,this.isPropagationStopped=_ie,this}return Pi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=VR)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=VR)},persist:function(){},isPersistent:VR}),t}var xx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vq=Yl(xx),II=Pi({},xx,{view:0,detail:0}),Mje=Yl(II),P5,D5,qS,NM=Pi({},II,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:bq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==qS&&(qS&&e.type==="mousemove"?(P5=e.screenX-qS.screenX,D5=e.screenY-qS.screenY):D5=P5=0,qS=e),P5)},movementY:function(e){return"movementY"in e?e.movementY:D5}}),wie=Yl(NM),Lje=Pi({},NM,{dataTransfer:0}),Fje=Yl(Lje),jje=Pi({},II,{relatedTarget:0}),O5=Yl(jje),Bje=Pi({},xx,{animationName:0,elapsedTime:0,pseudoElement:0}),Uje=Yl(Bje),zje=Pi({},xx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Vje=Yl(zje),Hje=Pi({},xx,{data:0}),Eie=Yl(Hje),qje={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wje={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gje={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yje(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gje[e])?!!t[e]:!1}function bq(){return Yje}var Kje=Pi({},II,{key:function(e){if(e.key){var t=qje[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=OP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Wje[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:bq,charCode:function(e){return e.type==="keypress"?OP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?OP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xje=Yl(Kje),Qje=Pi({},NM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xie=Yl(Qje),Jje=Pi({},II,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:bq}),Zje=Yl(Jje),e9e=Pi({},xx,{propertyName:0,elapsedTime:0,pseudoElement:0}),t9e=Yl(e9e),n9e=Pi({},NM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),r9e=Yl(n9e),i9e=[9,13,27,32],_q=im&&"CompositionEvent"in window,UC=null;im&&"documentMode"in document&&(UC=document.documentMode);var s9e=im&&"TextEvent"in window&&!UC,Lye=im&&(!_q||UC&&8<UC&&11>=UC),Sie=" ",Tie=!1;function Fye(e,t){switch(e){case"keyup":return i9e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jye(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var H_=!1;function o9e(e,t){switch(e){case"compositionend":return jye(t);case"keypress":return t.which!==32?null:(Tie=!0,Sie);case"textInput":return e=t.data,e===Sie&&Tie?null:e;default:return null}}function a9e(e,t){if(H_)return e==="compositionend"||!_q&&Fye(e,t)?(e=Mye(),DP=yq=Fg=null,H_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lye&&t.locale!=="ko"?null:t.data;default:return null}}var u9e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!u9e[e.type]:t==="textarea"}function Bye(e,t,n,r){yye(r),t=rO(t,"onChange"),0<t.length&&(n=new vq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zC=null,V2=null;function l9e(e){Qye(e,0)}function PM(e){var t=G_(e);if(cye(t))return e}function c9e(e,t){if(e==="change")return t}var Uye=!1;if(im){var $5;if(im){var M5="oninput"in document;if(!M5){var Aie=document.createElement("div");Aie.setAttribute("oninput","return;"),M5=typeof Aie.oninput=="function"}$5=M5}else $5=!1;Uye=$5&&(!document.documentMode||9<document.documentMode)}function Iie(){zC&&(zC.detachEvent("onpropertychange",zye),V2=zC=null)}function zye(e){if(e.propertyName==="value"&&PM(V2)){var t=[];Bye(t,V2,e,dq(e)),wye(l9e,t)}}function f9e(e,t,n){e==="focusin"?(Iie(),zC=t,V2=n,zC.attachEvent("onpropertychange",zye)):e==="focusout"&&Iie()}function d9e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return PM(V2)}function h9e(e,t){if(e==="click")return PM(t)}function p9e(e,t){if(e==="input"||e==="change")return PM(t)}function m9e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kf=typeof Object.is=="function"?Object.is:m9e;function H2(e,t){if(Kf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!vB.call(t,i)||!Kf(e[i],t[i]))return!1}return!0}function kie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Rie(e,t){var n=kie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kie(n)}}function Vye(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Vye(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Hye(){for(var e=window,t=XD();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=XD(e.document)}return t}function wq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function g9e(e){var t=Hye(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Vye(n.ownerDocument.documentElement,n)){if(r!==null&&wq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Rie(n,s);var o=Rie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var y9e=im&&"documentMode"in document&&11>=document.documentMode,q_=null,LB=null,VC=null,FB=!1;function Nie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;FB||q_==null||q_!==XD(r)||(r=q_,"selectionStart"in r&&wq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),VC&&H2(VC,r)||(VC=r,r=rO(LB,"onSelect"),0<r.length&&(t=new vq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=q_)))}function HR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var W_={animationend:HR("Animation","AnimationEnd"),animationiteration:HR("Animation","AnimationIteration"),animationstart:HR("Animation","AnimationStart"),transitionend:HR("Transition","TransitionEnd")},L5={},qye={};im&&(qye=document.createElement("div").style,"AnimationEvent"in window||(delete W_.animationend.animation,delete W_.animationiteration.animation,delete W_.animationstart.animation),"TransitionEvent"in window||delete W_.transitionend.transition);function DM(e){if(L5[e])return L5[e];if(!W_[e])return e;var t=W_[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in qye)return L5[e]=t[n];return e}var Wye=DM("animationend"),Gye=DM("animationiteration"),Yye=DM("animationstart"),Kye=DM("transitionend"),Xye=new Map,Pie="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fy(e,t){Xye.set(e,t),ub(t,[e])}for(var F5=0;F5<Pie.length;F5++){var j5=Pie[F5],v9e=j5.toLowerCase(),b9e=j5[0].toUpperCase()+j5.slice(1);fy(v9e,"on"+b9e)}fy(Wye,"onAnimationEnd");fy(Gye,"onAnimationIteration");fy(Yye,"onAnimationStart");fy("dblclick","onDoubleClick");fy("focusin","onFocus");fy("focusout","onBlur");fy(Kye,"onTransitionEnd");eE("onMouseEnter",["mouseout","mouseover"]);eE("onMouseLeave",["mouseout","mouseover"]);eE("onPointerEnter",["pointerout","pointerover"]);eE("onPointerLeave",["pointerout","pointerover"]);ub("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ub("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ub("onBeforeInput",["compositionend","keypress","textInput","paste"]);ub("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ub("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ub("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var HT="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_9e=new Set("cancel close invalid load scroll toggle".split(" ").concat(HT));function Die(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,vje(r,t,void 0,e),e.currentTarget=null}function Qye(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;Die(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;Die(i,a,l),s=u}}}if(JD)throw e=DB,JD=!1,DB=null,e}function ui(e,t){var n=t[VB];n===void 0&&(n=t[VB]=new Set);var r=e+"__bubble";n.has(r)||(Jye(t,e,2,!1),n.add(r))}function B5(e,t,n){var r=0;t&&(r|=4),Jye(n,e,r,t)}var qR="_reactListening"+Math.random().toString(36).slice(2);function q2(e){if(!e[qR]){e[qR]=!0,sye.forEach(function(n){n!=="selectionchange"&&(_9e.has(n)||B5(n,!1,e),B5(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qR]||(t[qR]=!0,B5("selectionchange",!1,t))}}function Jye(e,t,n,r){switch($ye(t)){case 1:var i=Oje;break;case 4:i=$je;break;default:i=gq}n=i.bind(null,t,n,e),i=void 0,!PB||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function U5(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Lv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}wye(function(){var l=s,c=dq(n),f=[];e:{var d=Xye.get(e);if(d!==void 0){var h=vq,p=e;switch(e){case"keypress":if(OP(n)===0)break e;case"keydown":case"keyup":h=Xje;break;case"focusin":p="focus",h=O5;break;case"focusout":p="blur",h=O5;break;case"beforeblur":case"afterblur":h=O5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=wie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Fje;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Zje;break;case Wye:case Gye:case Yye:h=Uje;break;case Kye:h=t9e;break;case"scroll":h=Mje;break;case"wheel":h=r9e;break;case"copy":case"cut":case"paste":h=Vje;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=xie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=j2(v,y),w!=null&&m.push(W2(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==RB&&(p=n.relatedTarget||n.fromElement)&&(Lv(p)||p[sm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Lv(p):null,p!==null&&(g=lb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=wie,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=xie,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:G_(h),b=p==null?d:G_(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,Lv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=Kb(b))v++;for(b=0,w=y;w;w=Kb(w))b++;for(;0<v-b;)m=Kb(m),v--;for(;0<b-v;)y=Kb(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=Kb(m),y=Kb(y)}m=null}else m=null;h!==null&&Oie(f,d,h,m,!1),p!==null&&g!==null&&Oie(f,g,p,m,!0)}}e:{if(d=l?G_(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=c9e;else if(Cie(d))if(Uye)E=p9e;else{E=d9e;var S=f9e}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=h9e);if(E&&(E=E(e,l))){Bye(f,E,n,c);break e}S&&S(e,d,l),e==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&TB(d,"number",d.value)}switch(S=l?G_(l):window,e){case"focusin":(Cie(S)||S.contentEditable==="true")&&(q_=S,LB=l,VC=null);break;case"focusout":VC=LB=q_=null;break;case"mousedown":FB=!0;break;case"contextmenu":case"mouseup":case"dragend":FB=!1,Nie(f,n,c);break;case"selectionchange":if(y9e)break;case"keydown":case"keyup":Nie(f,n,c)}var T;if(_q)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else H_?Fye(e,n)&&(C="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(Lye&&n.locale!=="ko"&&(H_||C!=="onCompositionStart"?C==="onCompositionEnd"&&H_&&(T=Mye()):(Fg=c,yq="value"in Fg?Fg.value:Fg.textContent,H_=!0)),S=rO(l,C),0<S.length&&(C=new Eie(C,e,null,n,c),f.push({event:C,listeners:S}),T?C.data=T:(T=jye(n),T!==null&&(C.data=T)))),(T=s9e?o9e(e,n):a9e(e,n))&&(l=rO(l,"onBeforeInput"),0<l.length&&(c=new Eie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=T))}Qye(f,t)})}function W2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function rO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=j2(e,n),s!=null&&r.unshift(W2(e,s,i)),s=j2(e,t),s!=null&&r.push(W2(e,s,i))),e=e.return}return r}function Kb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Oie(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=j2(n,s),u!=null&&o.unshift(W2(n,u,a))):i||(u=j2(n,s),u!=null&&o.push(W2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var w9e=/\r\n?/g,E9e=/\u0000|\uFFFD/g;function $ie(e){return(typeof e=="string"?e:""+e).replace(w9e,`
`).replace(E9e,"")}function WR(e,t,n){if(t=$ie(t),$ie(e)!==t&&n)throw Error(rt(425))}function iO(){}var jB=null,BB=null;function UB(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var zB=typeof setTimeout=="function"?setTimeout:void 0,x9e=typeof clearTimeout=="function"?clearTimeout:void 0,Mie=typeof Promise=="function"?Promise:void 0,S9e=typeof queueMicrotask=="function"?queueMicrotask:typeof Mie<"u"?function(e){return Mie.resolve(null).then(e).catch(T9e)}:zB;function T9e(e){setTimeout(function(){throw e})}function z5(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),z2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);z2(t)}function r0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Lie(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Sx=Math.random().toString(36).slice(2),Bd="__reactFiber$"+Sx,G2="__reactProps$"+Sx,sm="__reactContainer$"+Sx,VB="__reactEvents$"+Sx,C9e="__reactListeners$"+Sx,A9e="__reactHandles$"+Sx;function Lv(e){var t=e[Bd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[sm]||n[Bd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Lie(e);e!==null;){if(n=e[Bd])return n;e=Lie(e)}return t}e=n,n=e.parentNode}return null}function kI(e){return e=e[Bd]||e[sm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function G_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(rt(33))}function OM(e){return e[G2]||null}var HB=[],Y_=-1;function dy(e){return{current:e}}function pi(e){0>Y_||(e.current=HB[Y_],HB[Y_]=null,Y_--)}function ti(e,t){Y_++,HB[Y_]=e.current,e.current=t}var A0={},wa=dy(A0),$u=dy(!1),v1=A0;function tE(e,t){var n=e.type.contextTypes;if(!n)return A0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Mu(e){return e=e.childContextTypes,e!=null}function sO(){pi($u),pi(wa)}function Fie(e,t,n){if(wa.current!==A0)throw Error(rt(168));ti(wa,t),ti($u,n)}function Zye(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(rt(108,fje(e)||"Unknown",i));return Pi({},n,r)}function oO(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||A0,v1=wa.current,ti(wa,e),ti($u,$u.current),!0}function jie(e,t,n){var r=e.stateNode;if(!r)throw Error(rt(169));n?(e=Zye(e,t,v1),r.__reactInternalMemoizedMergedChildContext=e,pi($u),pi(wa),ti(wa,e)):pi($u),ti($u,n)}var Ep=null,$M=!1,V5=!1;function eve(e){Ep===null?Ep=[e]:Ep.push(e)}function I9e(e){$M=!0,eve(e)}function hy(){if(!V5&&Ep!==null){V5=!0;var e=0,t=$r;try{var n=Ep;for($r=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ep=null,$M=!1}catch(i){throw Ep!==null&&(Ep=Ep.slice(e+1)),Tye(hq,hy),i}finally{$r=t,V5=!1}}return null}var K_=[],X_=0,aO=null,uO=0,lc=[],cc=0,b1=null,Dp=1,Op="";function fv(e,t){K_[X_++]=uO,K_[X_++]=aO,aO=e,uO=t}function tve(e,t,n){lc[cc++]=Dp,lc[cc++]=Op,lc[cc++]=b1,b1=e;var r=Dp;e=Op;var i=32-Lf(r)-1;r&=~(1<<i),n+=1;var s=32-Lf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Dp=1<<32-Lf(t)+i|n<<i|r,Op=s+e}else Dp=1<<s|n<<i|r,Op=e}function Eq(e){e.return!==null&&(fv(e,1),tve(e,1,0))}function xq(e){for(;e===aO;)aO=K_[--X_],K_[X_]=null,uO=K_[--X_],K_[X_]=null;for(;e===b1;)b1=lc[--cc],lc[cc]=null,Op=lc[--cc],lc[cc]=null,Dp=lc[--cc],lc[cc]=null}var Il=null,bl=null,bi=!1,wf=null;function nve(e,t){var n=yc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Bie(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Il=e,bl=r0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Il=e,bl=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=b1!==null?{id:Dp,overflow:Op}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=yc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Il=e,bl=null,!0):!1;default:return!1}}function qB(e){return(e.mode&1)!==0&&(e.flags&128)===0}function WB(e){if(bi){var t=bl;if(t){var n=t;if(!Bie(e,t)){if(qB(e))throw Error(rt(418));t=r0(n.nextSibling);var r=Il;t&&Bie(e,t)?nve(r,n):(e.flags=e.flags&-4097|2,bi=!1,Il=e)}}else{if(qB(e))throw Error(rt(418));e.flags=e.flags&-4097|2,bi=!1,Il=e}}}function Uie(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Il=e}function GR(e){if(e!==Il)return!1;if(!bi)return Uie(e),bi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!UB(e.type,e.memoizedProps)),t&&(t=bl)){if(qB(e))throw rve(),Error(rt(418));for(;t;)nve(e,t),t=r0(t.nextSibling)}if(Uie(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(rt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){bl=r0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}bl=null}}else bl=Il?r0(e.stateNode.nextSibling):null;return!0}function rve(){for(var e=bl;e;)e=r0(e.nextSibling)}function nE(){bl=Il=null,bi=!1}function Sq(e){wf===null?wf=[e]:wf.push(e)}var k9e=Rm.ReactCurrentBatchConfig;function WS(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(rt(309));var r=n.stateNode}if(!r)throw Error(rt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(rt(284));if(!n._owner)throw Error(rt(290,e))}return e}function YR(e,t){throw e=Object.prototype.toString.call(t),Error(rt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function zie(e){var t=e._init;return t(e._payload)}function ive(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=a0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=X5(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===V_?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===vg&&zie(E)===v.type)?(w=i(v,b.props),w.ref=WS(y,v,b),w.return=y,w):(w=UP(b.type,b.key,b.props,null,y.mode,w),w.ref=WS(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Q5(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=t1(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=X5(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case LR:return b=UP(v.type,v.key,v.props,null,y.mode,b),b.ref=WS(y,null,v),b.return=y,b;case z_:return v=Q5(v,y.mode,b),v.return=y,v;case vg:var w=v._init;return f(y,w(v._payload),b)}if(zT(v)||US(v))return v=t1(v,y.mode,b,null),v.return=y,v;YR(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case LR:return b.key===E?u(y,v,b,w):null;case z_:return b.key===E?l(y,v,b,w):null;case vg:return E=b._init,d(y,v,E(b._payload),w)}if(zT(b)||US(b))return E!==null?null:c(y,v,b,w,null);YR(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case LR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case z_:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case vg:var S=w._init;return h(y,v,b,S(w._payload),E)}if(zT(w)||US(w))return y=y.get(b)||null,c(v,y,w,E,null);YR(v,w)}return null}function p(y,v,b,w){for(var E=null,S=null,T=v,C=v=0,A=null;T!==null&&C<b.length;C++){T.index>C?(A=T,T=null):A=T.sibling;var N=d(y,T,b[C],w);if(N===null){T===null&&(T=A);break}e&&T&&N.alternate===null&&t(y,T),v=s(N,v,C),S===null?E=N:S.sibling=N,S=N,T=A}if(C===b.length)return n(y,T),bi&&fv(y,C),E;if(T===null){for(;C<b.length;C++)T=f(y,b[C],w),T!==null&&(v=s(T,v,C),S===null?E=T:S.sibling=T,S=T);return bi&&fv(y,C),E}for(T=r(y,T);C<b.length;C++)A=h(T,y,C,b[C],w),A!==null&&(e&&A.alternate!==null&&T.delete(A.key===null?C:A.key),v=s(A,v,C),S===null?E=A:S.sibling=A,S=A);return e&&T.forEach(function(k){return t(y,k)}),bi&&fv(y,C),E}function m(y,v,b,w){var E=US(b);if(typeof E!="function")throw Error(rt(150));if(b=E.call(b),b==null)throw Error(rt(151));for(var S=E=null,T=v,C=v=0,A=null,N=b.next();T!==null&&!N.done;C++,N=b.next()){T.index>C?(A=T,T=null):A=T.sibling;var k=d(y,T,N.value,w);if(k===null){T===null&&(T=A);break}e&&T&&k.alternate===null&&t(y,T),v=s(k,v,C),S===null?E=k:S.sibling=k,S=k,T=A}if(N.done)return n(y,T),bi&&fv(y,C),E;if(T===null){for(;!N.done;C++,N=b.next())N=f(y,N.value,w),N!==null&&(v=s(N,v,C),S===null?E=N:S.sibling=N,S=N);return bi&&fv(y,C),E}for(T=r(y,T);!N.done;C++,N=b.next())N=h(T,y,C,N.value,w),N!==null&&(e&&N.alternate!==null&&T.delete(N.key===null?C:N.key),v=s(N,v,C),S===null?E=N:S.sibling=N,S=N);return e&&T.forEach(function(O){return t(y,O)}),bi&&fv(y,C),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===V_&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case LR:e:{for(var E=b.key,S=v;S!==null;){if(S.key===E){if(E=b.type,E===V_){if(S.tag===7){n(y,S.sibling),v=i(S,b.props.children),v.return=y,y=v;break e}}else if(S.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===vg&&zie(E)===S.type){n(y,S.sibling),v=i(S,b.props),v.ref=WS(y,S,b),v.return=y,y=v;break e}n(y,S);break}else t(y,S);S=S.sibling}b.type===V_?(v=t1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=UP(b.type,b.key,b.props,null,y.mode,w),w.ref=WS(y,v,b),w.return=y,y=w)}return o(y);case z_:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=Q5(b,y.mode,w),v.return=y,y=v}return o(y);case vg:return S=b._init,g(y,v,S(b._payload),w)}if(zT(b))return p(y,v,b,w);if(US(b))return m(y,v,b,w);YR(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=X5(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var rE=ive(!0),sve=ive(!1),lO=dy(null),cO=null,Q_=null,Tq=null;function Cq(){Tq=Q_=cO=null}function Aq(e){var t=lO.current;pi(lO),e._currentValue=t}function GB(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function bw(e,t){cO=e,Tq=Q_=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ru=!0),e.firstContext=null)}function Ic(e){var t=e._currentValue;if(Tq!==e)if(e={context:e,memoizedValue:t,next:null},Q_===null){if(cO===null)throw Error(rt(308));Q_=e,cO.dependencies={lanes:0,firstContext:e}}else Q_=Q_.next=e;return t}var Fv=null;function Iq(e){Fv===null?Fv=[e]:Fv.push(e)}function ove(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Iq(t)):(n.next=i.next,i.next=n),t.interleaved=n,om(e,r)}function om(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var bg=!1;function kq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ave(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Hp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function i0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ar&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,om(e,n)}return i=r.interleaved,i===null?(t.next=t,Iq(r)):(t.next=i.next,i.next=t),r.interleaved=t,om(e,n)}function $P(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,pq(e,n)}}function Vie(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fO(e,t,n,r){var i=e.updateQueue;bg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Pi({},f,d);break e;case 2:bg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);w1|=o,e.lanes=o,e.memoizedState=f}}function Hie(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(rt(191,i));i.call(r)}}}var RI={},sh=dy(RI),Y2=dy(RI),K2=dy(RI);function jv(e){if(e===RI)throw Error(rt(174));return e}function Rq(e,t){switch(ti(K2,t),ti(Y2,e),ti(sh,RI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:AB(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=AB(t,e)}pi(sh),ti(sh,t)}function iE(){pi(sh),pi(Y2),pi(K2)}function uve(e){jv(K2.current);var t=jv(sh.current),n=AB(t,e.type);t!==n&&(ti(Y2,e),ti(sh,n))}function Nq(e){Y2.current===e&&(pi(sh),pi(Y2))}var Ai=dy(0);function dO(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var H5=[];function Pq(){for(var e=0;e<H5.length;e++)H5[e]._workInProgressVersionPrimary=null;H5.length=0}var MP=Rm.ReactCurrentDispatcher,q5=Rm.ReactCurrentBatchConfig,_1=0,Ri=null,ks=null,Js=null,hO=!1,HC=!1,X2=0,R9e=0;function Xo(){throw Error(rt(321))}function Dq(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kf(e[n],t[n]))return!1;return!0}function Oq(e,t,n,r,i,s){if(_1=s,Ri=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,MP.current=e===null||e.memoizedState===null?O9e:$9e,e=n(r,i),HC){s=0;do{if(HC=!1,X2=0,25<=s)throw Error(rt(301));s+=1,Js=ks=null,t.updateQueue=null,MP.current=M9e,e=n(r,i)}while(HC)}if(MP.current=pO,t=ks!==null&&ks.next!==null,_1=0,Js=ks=Ri=null,hO=!1,t)throw Error(rt(300));return e}function $q(){var e=X2!==0;return X2=0,e}function Nd(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Js===null?Ri.memoizedState=Js=e:Js=Js.next=e,Js}function kc(){if(ks===null){var e=Ri.alternate;e=e!==null?e.memoizedState:null}else e=ks.next;var t=Js===null?Ri.memoizedState:Js.next;if(t!==null)Js=t,ks=e;else{if(e===null)throw Error(rt(310));ks=e,e={memoizedState:ks.memoizedState,baseState:ks.baseState,baseQueue:ks.baseQueue,queue:ks.queue,next:null},Js===null?Ri.memoizedState=Js=e:Js=Js.next=e}return Js}function Q2(e,t){return typeof t=="function"?t(e):t}function W5(e){var t=kc(),n=t.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=e;var r=ks,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((_1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ri.lanes|=c,w1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Kf(r,t.memoizedState)||(Ru=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ri.lanes|=s,w1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function G5(e){var t=kc(),n=t.queue;if(n===null)throw Error(rt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Kf(s,t.memoizedState)||(Ru=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function lve(){}function cve(e,t){var n=Ri,r=kc(),i=t(),s=!Kf(r.memoizedState,i);if(s&&(r.memoizedState=i,Ru=!0),r=r.queue,Mq(hve.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Js!==null&&Js.memoizedState.tag&1){if(n.flags|=2048,J2(9,dve.bind(null,n,r,i,t),void 0,null),lo===null)throw Error(rt(349));_1&30||fve(n,t,i)}return i}function fve(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function dve(e,t,n,r){t.value=n,t.getSnapshot=r,pve(t)&&mve(e)}function hve(e,t,n){return n(function(){pve(t)&&mve(e)})}function pve(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kf(e,n)}catch{return!0}}function mve(e){var t=om(e,1);t!==null&&Ff(t,e,1,-1)}function qie(e){var t=Nd();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Q2,lastRenderedState:e},t.queue=e,e=e.dispatch=D9e.bind(null,Ri,e),[t.memoizedState,e]}function J2(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ri.updateQueue,t===null?(t={lastEffect:null,stores:null},Ri.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function gve(){return kc().memoizedState}function LP(e,t,n,r){var i=Nd();Ri.flags|=e,i.memoizedState=J2(1|t,n,void 0,r===void 0?null:r)}function MM(e,t,n,r){var i=kc();r=r===void 0?null:r;var s=void 0;if(ks!==null){var o=ks.memoizedState;if(s=o.destroy,r!==null&&Dq(r,o.deps)){i.memoizedState=J2(t,n,s,r);return}}Ri.flags|=e,i.memoizedState=J2(1|t,n,s,r)}function Wie(e,t){return LP(8390656,8,e,t)}function Mq(e,t){return MM(2048,8,e,t)}function yve(e,t){return MM(4,2,e,t)}function vve(e,t){return MM(4,4,e,t)}function bve(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _ve(e,t,n){return n=n!=null?n.concat([e]):null,MM(4,4,bve.bind(null,t,e),n)}function Lq(){}function wve(e,t){var n=kc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Dq(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Eve(e,t){var n=kc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Dq(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function xve(e,t,n){return _1&21?(Kf(n,t)||(n=Iye(),Ri.lanes|=n,w1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ru=!0),e.memoizedState=n)}function N9e(e,t){var n=$r;$r=n!==0&&4>n?n:4,e(!0);var r=q5.transition;q5.transition={};try{e(!1),t()}finally{$r=n,q5.transition=r}}function Sve(){return kc().memoizedState}function P9e(e,t,n){var r=o0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Tve(e))Cve(t,n);else if(n=ove(e,t,n,r),n!==null){var i=Wa();Ff(n,e,r,i),Ave(n,t,r)}}function D9e(e,t,n){var r=o0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Tve(e))Cve(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Kf(a,o)){var u=t.interleaved;u===null?(i.next=i,Iq(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=ove(e,t,i,r),n!==null&&(i=Wa(),Ff(n,e,r,i),Ave(n,t,r))}}function Tve(e){var t=e.alternate;return e===Ri||t!==null&&t===Ri}function Cve(e,t){HC=hO=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ave(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,pq(e,n)}}var pO={readContext:Ic,useCallback:Xo,useContext:Xo,useEffect:Xo,useImperativeHandle:Xo,useInsertionEffect:Xo,useLayoutEffect:Xo,useMemo:Xo,useReducer:Xo,useRef:Xo,useState:Xo,useDebugValue:Xo,useDeferredValue:Xo,useTransition:Xo,useMutableSource:Xo,useSyncExternalStore:Xo,useId:Xo,unstable_isNewReconciler:!1},O9e={readContext:Ic,useCallback:function(e,t){return Nd().memoizedState=[e,t===void 0?null:t],e},useContext:Ic,useEffect:Wie,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,LP(4194308,4,bve.bind(null,t,e),n)},useLayoutEffect:function(e,t){return LP(4194308,4,e,t)},useInsertionEffect:function(e,t){return LP(4,2,e,t)},useMemo:function(e,t){var n=Nd();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Nd();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=P9e.bind(null,Ri,e),[r.memoizedState,e]},useRef:function(e){var t=Nd();return e={current:e},t.memoizedState=e},useState:qie,useDebugValue:Lq,useDeferredValue:function(e){return Nd().memoizedState=e},useTransition:function(){var e=qie(!1),t=e[0];return e=N9e.bind(null,e[1]),Nd().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ri,i=Nd();if(bi){if(n===void 0)throw Error(rt(407));n=n()}else{if(n=t(),lo===null)throw Error(rt(349));_1&30||fve(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Wie(hve.bind(null,r,s,e),[e]),r.flags|=2048,J2(9,dve.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Nd(),t=lo.identifierPrefix;if(bi){var n=Op,r=Dp;n=(r&~(1<<32-Lf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=X2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=R9e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$9e={readContext:Ic,useCallback:wve,useContext:Ic,useEffect:Mq,useImperativeHandle:_ve,useInsertionEffect:yve,useLayoutEffect:vve,useMemo:Eve,useReducer:W5,useRef:gve,useState:function(){return W5(Q2)},useDebugValue:Lq,useDeferredValue:function(e){var t=kc();return xve(t,ks.memoizedState,e)},useTransition:function(){var e=W5(Q2)[0],t=kc().memoizedState;return[e,t]},useMutableSource:lve,useSyncExternalStore:cve,useId:Sve,unstable_isNewReconciler:!1},M9e={readContext:Ic,useCallback:wve,useContext:Ic,useEffect:Mq,useImperativeHandle:_ve,useInsertionEffect:yve,useLayoutEffect:vve,useMemo:Eve,useReducer:G5,useRef:gve,useState:function(){return G5(Q2)},useDebugValue:Lq,useDeferredValue:function(e){var t=kc();return ks===null?t.memoizedState=e:xve(t,ks.memoizedState,e)},useTransition:function(){var e=G5(Q2)[0],t=kc().memoizedState;return[e,t]},useMutableSource:lve,useSyncExternalStore:cve,useId:Sve,unstable_isNewReconciler:!1};function mf(e,t){if(e&&e.defaultProps){t=Pi({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function YB(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Pi({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var LM={isMounted:function(e){return(e=e._reactInternals)?lb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Wa(),i=o0(e),s=Hp(r,i);s.payload=t,n!=null&&(s.callback=n),t=i0(e,s,i),t!==null&&(Ff(t,e,i,r),$P(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Wa(),i=o0(e),s=Hp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=i0(e,s,i),t!==null&&(Ff(t,e,i,r),$P(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Wa(),r=o0(e),i=Hp(n,r);i.tag=2,t!=null&&(i.callback=t),t=i0(e,i,r),t!==null&&(Ff(t,e,r,n),$P(t,e,r))}};function Gie(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!H2(n,r)||!H2(i,s):!0}function Ive(e,t,n){var r=!1,i=A0,s=t.contextType;return typeof s=="object"&&s!==null?s=Ic(s):(i=Mu(t)?v1:wa.current,r=t.contextTypes,s=(r=r!=null)?tE(e,i):A0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=LM,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Yie(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&LM.enqueueReplaceState(t,t.state,null)}function KB(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},kq(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ic(s):(s=Mu(t)?v1:wa.current,i.context=tE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(YB(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&LM.enqueueReplaceState(i,i.state,null),fO(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function sE(e,t){try{var n="",r=t;do n+=cje(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Y5(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function XB(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var L9e=typeof WeakMap=="function"?WeakMap:Map;function kve(e,t,n){n=Hp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){gO||(gO=!0,oU=r),XB(e,t)},n}function Rve(e,t,n){n=Hp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){XB(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){XB(e,t),typeof r!="function"&&(s0===null?s0=new Set([this]):s0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Kie(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new L9e;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Q9e.bind(null,e,t,n),t.then(e,e))}function Xie(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Qie(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Hp(-1,1),t.tag=2,i0(n,t,1))),n.lanes|=1),e)}var F9e=Rm.ReactCurrentOwner,Ru=!1;function Ma(e,t,n,r){t.child=e===null?sve(t,null,n,r):rE(t,e.child,n,r)}function Jie(e,t,n,r,i){n=n.render;var s=t.ref;return bw(t,i),r=Oq(e,t,n,r,s,i),n=$q(),e!==null&&!Ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(bi&&n&&Eq(t),t.flags|=1,Ma(e,t,r,i),t.child)}function Zie(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!qq(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Nve(e,t,s,r,i)):(e=UP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:H2,n(o,r)&&e.ref===t.ref)return am(e,t,i)}return t.flags|=1,e=a0(s,r),e.ref=t.ref,e.return=t,t.child=e}function Nve(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(H2(s,r)&&e.ref===t.ref)if(Ru=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ru=!0);else return t.lanes=e.lanes,am(e,t,i)}return QB(e,t,n,r,i)}function Pve(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ti(Z_,dl),dl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ti(Z_,dl),dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ti(Z_,dl),dl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ti(Z_,dl),dl|=r;return Ma(e,t,i,n),t.child}function Dve(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function QB(e,t,n,r,i){var s=Mu(n)?v1:wa.current;return s=tE(t,s),bw(t,i),n=Oq(e,t,n,r,s,i),r=$q(),e!==null&&!Ru?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,am(e,t,i)):(bi&&r&&Eq(t),t.flags|=1,Ma(e,t,n,i),t.child)}function ese(e,t,n,r,i){if(Mu(n)){var s=!0;oO(t)}else s=!1;if(bw(t,i),t.stateNode===null)FP(e,t),Ive(t,n,r),KB(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Ic(l):(l=Mu(n)?v1:wa.current,l=tE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Yie(t,o,r,l),bg=!1;var d=t.memoizedState;o.state=d,fO(t,r,o,i),u=t.memoizedState,a!==r||d!==u||$u.current||bg?(typeof c=="function"&&(YB(t,n,c,r),u=t.memoizedState),(a=bg||Gie(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ave(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:mf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Ic(u):(u=Mu(n)?v1:wa.current,u=tE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Yie(t,o,r,u),bg=!1,d=t.memoizedState,o.state=d,fO(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||$u.current||bg?(typeof h=="function"&&(YB(t,n,h,r),p=t.memoizedState),(l=bg||Gie(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return JB(e,t,n,r,s,i)}function JB(e,t,n,r,i,s){Dve(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&jie(t,n,!1),am(e,t,s);r=t.stateNode,F9e.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=rE(t,e.child,null,s),t.child=rE(t,null,a,s)):Ma(e,t,a,s),t.memoizedState=r.state,i&&jie(t,n,!0),t.child}function Ove(e){var t=e.stateNode;t.pendingContext?Fie(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fie(e,t.context,!1),Rq(e,t.containerInfo)}function tse(e,t,n,r,i){return nE(),Sq(i),t.flags|=256,Ma(e,t,n,r),t.child}var ZB={dehydrated:null,treeContext:null,retryLane:0};function eU(e){return{baseLanes:e,cachePool:null,transitions:null}}function $ve(e,t,n){var r=t.pendingProps,i=Ai.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ti(Ai,i&1),e===null)return WB(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=BM(o,r,0,null),e=t1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=eU(n),t.memoizedState=ZB,e):Fq(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return j9e(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=a0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=a0(a,s):(s=t1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?eU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=ZB,r}return s=e.child,e=s.sibling,r=a0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fq(e,t){return t=BM({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function KR(e,t,n,r){return r!==null&&Sq(r),rE(t,e.child,null,n),e=Fq(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function j9e(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Y5(Error(rt(422))),KR(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=BM({mode:"visible",children:r.children},i,0,null),s=t1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&rE(t,e.child,null,o),t.child.memoizedState=eU(o),t.memoizedState=ZB,s);if(!(t.mode&1))return KR(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(rt(419)),r=Y5(s,r,void 0),KR(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ru||a){if(r=lo,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,om(e,i),Ff(r,e,i,-1))}return Hq(),r=Y5(Error(rt(421))),KR(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=J9e.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,bl=r0(i.nextSibling),Il=t,bi=!0,wf=null,e!==null&&(lc[cc++]=Dp,lc[cc++]=Op,lc[cc++]=b1,Dp=e.id,Op=e.overflow,b1=t),t=Fq(t,r.children),t.flags|=4096,t)}function nse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),GB(e.return,t,n)}function K5(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Mve(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Ma(e,t,r.children,n),r=Ai.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&nse(e,n,t);else if(e.tag===19)nse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ti(Ai,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&dO(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),K5(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&dO(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}K5(t,!0,n,null,s);break;case"together":K5(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function FP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function am(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),w1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(rt(153));if(t.child!==null){for(e=t.child,n=a0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=a0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function B9e(e,t,n){switch(t.tag){case 3:Ove(t),nE();break;case 5:uve(t);break;case 1:Mu(t.type)&&oO(t);break;case 4:Rq(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ti(lO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ti(Ai,Ai.current&1),t.flags|=128,null):n&t.child.childLanes?$ve(e,t,n):(ti(Ai,Ai.current&1),e=am(e,t,n),e!==null?e.sibling:null);ti(Ai,Ai.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Mve(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ti(Ai,Ai.current),r)break;return null;case 22:case 23:return t.lanes=0,Pve(e,t,n)}return am(e,t,n)}var Lve,tU,Fve,jve;Lve=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tU=function(){};Fve=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,jv(sh.current);var s=null;switch(n){case"input":i=xB(e,i),r=xB(e,r),s=[];break;case"select":i=Pi({},i,{value:void 0}),r=Pi({},r,{value:void 0}),s=[];break;case"textarea":i=CB(e,i),r=CB(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=iO)}IB(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(L2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(L2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ui("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};jve=function(e,t,n,r){n!==r&&(t.flags|=4)};function GS(e,t){if(!bi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function U9e(e,t,n){var r=t.pendingProps;switch(xq(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qo(t),null;case 1:return Mu(t.type)&&sO(),Qo(t),null;case 3:return r=t.stateNode,iE(),pi($u),pi(wa),Pq(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(GR(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,wf!==null&&(lU(wf),wf=null))),tU(e,t),Qo(t),null;case 5:Nq(t);var i=jv(K2.current);if(n=t.type,e!==null&&t.stateNode!=null)Fve(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(rt(166));return Qo(t),null}if(e=jv(sh.current),GR(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Bd]=t,r[G2]=s,e=(t.mode&1)!==0,n){case"dialog":ui("cancel",r),ui("close",r);break;case"iframe":case"object":case"embed":ui("load",r);break;case"video":case"audio":for(i=0;i<HT.length;i++)ui(HT[i],r);break;case"source":ui("error",r);break;case"img":case"image":case"link":ui("error",r),ui("load",r);break;case"details":ui("toggle",r);break;case"input":fie(r,s),ui("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ui("invalid",r);break;case"textarea":hie(r,s),ui("invalid",r)}IB(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&WR(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&WR(r.textContent,a,e),i=["children",""+a]):L2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ui("scroll",r)}switch(n){case"input":FR(r),die(r,s,!0);break;case"textarea":FR(r),pie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=iO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=hye(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Bd]=t,e[G2]=r,Lve(e,t,!1,!1),t.stateNode=e;e:{switch(o=kB(n,r),n){case"dialog":ui("cancel",e),ui("close",e),i=r;break;case"iframe":case"object":case"embed":ui("load",e),i=r;break;case"video":case"audio":for(i=0;i<HT.length;i++)ui(HT[i],e);i=r;break;case"source":ui("error",e),i=r;break;case"img":case"image":case"link":ui("error",e),ui("load",e),i=r;break;case"details":ui("toggle",e),i=r;break;case"input":fie(e,r),i=xB(e,r),ui("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Pi({},r,{value:void 0}),ui("invalid",e);break;case"textarea":hie(e,r),i=CB(e,r),ui("invalid",e);break;default:i=r}IB(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?gye(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&pye(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&F2(e,u):typeof u=="number"&&F2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(L2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ui("scroll",e):u!=null&&uq(e,s,u,o))}switch(n){case"input":FR(e),die(e,r,!1);break;case"textarea":FR(e),pie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+C0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?mw(e,!!r.multiple,s,!1):r.defaultValue!=null&&mw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=iO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Qo(t),null;case 6:if(e&&t.stateNode!=null)jve(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(rt(166));if(n=jv(K2.current),jv(sh.current),GR(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bd]=t,(s=r.nodeValue!==n)&&(e=Il,e!==null))switch(e.tag){case 3:WR(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&WR(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bd]=t,t.stateNode=r}return Qo(t),null;case 13:if(pi(Ai),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(bi&&bl!==null&&t.mode&1&&!(t.flags&128))rve(),nE(),t.flags|=98560,s=!1;else if(s=GR(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(rt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(rt(317));s[Bd]=t}else nE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Qo(t),s=!1}else wf!==null&&(lU(wf),wf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ai.current&1?Ls===0&&(Ls=3):Hq())),t.updateQueue!==null&&(t.flags|=4),Qo(t),null);case 4:return iE(),tU(e,t),e===null&&q2(t.stateNode.containerInfo),Qo(t),null;case 10:return Aq(t.type._context),Qo(t),null;case 17:return Mu(t.type)&&sO(),Qo(t),null;case 19:if(pi(Ai),s=t.memoizedState,s===null)return Qo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)GS(s,!1);else{if(Ls!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=dO(e),o!==null){for(t.flags|=128,GS(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ti(Ai,Ai.current&1|2),t.child}e=e.sibling}s.tail!==null&&ss()>oE&&(t.flags|=128,r=!0,GS(s,!1),t.lanes=4194304)}else{if(!r)if(e=dO(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),GS(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!bi)return Qo(t),null}else 2*ss()-s.renderingStartTime>oE&&n!==1073741824&&(t.flags|=128,r=!0,GS(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ss(),t.sibling=null,n=Ai.current,ti(Ai,r?n&1|2:n&1),t):(Qo(t),null);case 22:case 23:return Vq(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?dl&1073741824&&(Qo(t),t.subtreeFlags&6&&(t.flags|=8192)):Qo(t),null;case 24:return null;case 25:return null}throw Error(rt(156,t.tag))}function z9e(e,t){switch(xq(t),t.tag){case 1:return Mu(t.type)&&sO(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return iE(),pi($u),pi(wa),Pq(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Nq(t),null;case 13:if(pi(Ai),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(rt(340));nE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return pi(Ai),null;case 4:return iE(),null;case 10:return Aq(t.type._context),null;case 22:case 23:return Vq(),null;case 24:return null;default:return null}}var XR=!1,la=!1,V9e=typeof WeakSet=="function"?WeakSet:Set,xt=null;function J_(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zi(e,t,r)}else n.current=null}function nU(e,t,n){try{n()}catch(r){zi(e,t,r)}}var rse=!1;function H9e(e,t){if(jB=tO,e=Hye(),wq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(BB={focusedElem:e,selectionRange:n},tO=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:mf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(rt(163))}}catch(w){zi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=rse,rse=!1,p}function qC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&nU(t,n,s)}i=i.next}while(i!==r)}}function FM(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function rU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Bve(e){var t=e.alternate;t!==null&&(e.alternate=null,Bve(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bd],delete t[G2],delete t[VB],delete t[C9e],delete t[A9e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uve(e){return e.tag===5||e.tag===3||e.tag===4}function ise(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uve(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function iU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=iO));else if(r!==4&&(e=e.child,e!==null))for(iU(e,t,n),e=e.sibling;e!==null;)iU(e,t,n),e=e.sibling}function sU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(sU(e,t,n),e=e.sibling;e!==null;)sU(e,t,n),e=e.sibling}var So=null,yf=!1;function ng(e,t,n){for(n=n.child;n!==null;)zve(e,t,n),n=n.sibling}function zve(e,t,n){if(ih&&typeof ih.onCommitFiberUnmount=="function")try{ih.onCommitFiberUnmount(RM,n)}catch{}switch(n.tag){case 5:la||J_(n,t);case 6:var r=So,i=yf;So=null,ng(e,t,n),So=r,yf=i,So!==null&&(yf?(e=So,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):So.removeChild(n.stateNode));break;case 18:So!==null&&(yf?(e=So,n=n.stateNode,e.nodeType===8?z5(e.parentNode,n):e.nodeType===1&&z5(e,n),z2(e)):z5(So,n.stateNode));break;case 4:r=So,i=yf,So=n.stateNode.containerInfo,yf=!0,ng(e,t,n),So=r,yf=i;break;case 0:case 11:case 14:case 15:if(!la&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nU(n,t,o),i=i.next}while(i!==r)}ng(e,t,n);break;case 1:if(!la&&(J_(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zi(n,t,a)}ng(e,t,n);break;case 21:ng(e,t,n);break;case 22:n.mode&1?(la=(r=la)||n.memoizedState!==null,ng(e,t,n),la=r):ng(e,t,n);break;default:ng(e,t,n)}}function sse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new V9e),t.forEach(function(r){var i=Z9e.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:So=a.stateNode,yf=!1;break e;case 3:So=a.stateNode.containerInfo,yf=!0;break e;case 4:So=a.stateNode.containerInfo,yf=!0;break e}a=a.return}if(So===null)throw Error(rt(160));zve(s,o,i),So=null,yf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){zi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Vve(t,e),t=t.sibling}function Vve(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(rf(t,e),Sd(e),r&4){try{qC(3,e,e.return),FM(3,e)}catch(m){zi(e,e.return,m)}try{qC(5,e,e.return)}catch(m){zi(e,e.return,m)}}break;case 1:rf(t,e),Sd(e),r&512&&n!==null&&J_(n,n.return);break;case 5:if(rf(t,e),Sd(e),r&512&&n!==null&&J_(n,n.return),e.flags&32){var i=e.stateNode;try{F2(i,"")}catch(m){zi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&fye(i,s),kB(a,o);var l=kB(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?gye(i,f):c==="dangerouslySetInnerHTML"?pye(i,f):c==="children"?F2(i,f):uq(i,c,f,l)}switch(a){case"input":SB(i,s);break;case"textarea":dye(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?mw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?mw(i,!!s.multiple,s.defaultValue,!0):mw(i,!!s.multiple,s.multiple?[]:"",!1))}i[G2]=s}catch(m){zi(e,e.return,m)}}break;case 6:if(rf(t,e),Sd(e),r&4){if(e.stateNode===null)throw Error(rt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){zi(e,e.return,m)}}break;case 3:if(rf(t,e),Sd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{z2(t.containerInfo)}catch(m){zi(e,e.return,m)}break;case 4:rf(t,e),Sd(e);break;case 13:rf(t,e),Sd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Uq=ss())),r&4&&sse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(la=(l=la)||c,rf(t,e),la=l):rf(t,e),Sd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:qC(4,d,d.return);break;case 1:J_(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){zi(r,n,m)}}break;case 5:J_(d,d.return);break;case 22:if(d.memoizedState!==null){ase(f);continue}}h!==null?(h.return=d,xt=h):ase(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=mye("display",o))}catch(m){zi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){zi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:rf(t,e),Sd(e),r&4&&sse(e);break;case 21:break;default:rf(t,e),Sd(e)}}function Sd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Uve(n)){var r=n;break e}n=n.return}throw Error(rt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(F2(i,""),r.flags&=-33);var s=ise(e);sU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=ise(e);iU(e,a,o);break;default:throw Error(rt(161))}}catch(u){zi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function q9e(e,t,n){xt=e,Hve(e)}function Hve(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||XR;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||la;a=XR;var l=la;if(XR=o,(la=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?use(i):u!==null?(u.return=o,xt=u):use(i);for(;s!==null;)xt=s,Hve(s),s=s.sibling;xt=i,XR=a,la=l}ose(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):ose(e)}}function ose(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:la||FM(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!la)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:mf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Hie(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Hie(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&z2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(rt(163))}la||t.flags&512&&rU(t)}catch(d){zi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function ase(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function use(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{FM(4,t)}catch(u){zi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){zi(t,i,u)}}var s=t.return;try{rU(t)}catch(u){zi(t,s,u)}break;case 5:var o=t.return;try{rU(t)}catch(u){zi(t,o,u)}}}catch(u){zi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var W9e=Math.ceil,mO=Rm.ReactCurrentDispatcher,jq=Rm.ReactCurrentOwner,Sc=Rm.ReactCurrentBatchConfig,ar=0,lo=null,bs=null,Do=0,dl=0,Z_=dy(0),Ls=0,Z2=null,w1=0,jM=0,Bq=0,WC=null,xu=null,Uq=0,oE=1/0,vp=null,gO=!1,oU=null,s0=null,QR=!1,jg=null,yO=0,GC=0,aU=null,jP=-1,BP=0;function Wa(){return ar&6?ss():jP!==-1?jP:jP=ss()}function o0(e){return e.mode&1?ar&2&&Do!==0?Do&-Do:k9e.transition!==null?(BP===0&&(BP=Iye()),BP):(e=$r,e!==0||(e=window.event,e=e===void 0?16:$ye(e.type)),e):1}function Ff(e,t,n,r){if(50<GC)throw GC=0,aU=null,Error(rt(185));AI(e,n,r),(!(ar&2)||e!==lo)&&(e===lo&&(!(ar&2)&&(jM|=n),Ls===4&&Ig(e,Do)),Lu(e,r),n===1&&ar===0&&!(t.mode&1)&&(oE=ss()+500,$M&&hy()))}function Lu(e,t){var n=e.callbackNode;kje(e,t);var r=eO(e,e===lo?Do:0);if(r===0)n!==null&&yie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&yie(n),t===1)e.tag===0?I9e(lse.bind(null,e)):eve(lse.bind(null,e)),S9e(function(){!(ar&6)&&hy()}),n=null;else{switch(kye(r)){case 1:n=hq;break;case 4:n=Cye;break;case 16:n=ZD;break;case 536870912:n=Aye;break;default:n=ZD}n=Jve(n,qve.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function qve(e,t){if(jP=-1,BP=0,ar&6)throw Error(rt(327));var n=e.callbackNode;if(_w()&&e.callbackNode!==n)return null;var r=eO(e,e===lo?Do:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=vO(e,r);else{t=r;var i=ar;ar|=2;var s=Gve();(lo!==e||Do!==t)&&(vp=null,oE=ss()+500,e1(e,t));do try{K9e();break}catch(a){Wve(e,a)}while(!0);Cq(),mO.current=s,ar=i,bs!==null?t=0:(lo=null,Do=0,t=Ls)}if(t!==0){if(t===2&&(i=OB(e),i!==0&&(r=i,t=uU(e,i))),t===1)throw n=Z2,e1(e,0),Ig(e,r),Lu(e,ss()),n;if(t===6)Ig(e,r);else{if(i=e.current.alternate,!(r&30)&&!G9e(i)&&(t=vO(e,r),t===2&&(s=OB(e),s!==0&&(r=s,t=uU(e,s))),t===1))throw n=Z2,e1(e,0),Ig(e,r),Lu(e,ss()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(rt(345));case 2:dv(e,xu,vp);break;case 3:if(Ig(e,r),(r&130023424)===r&&(t=Uq+500-ss(),10<t)){if(eO(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Wa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=zB(dv.bind(null,e,xu,vp),t);break}dv(e,xu,vp);break;case 4:if(Ig(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Lf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ss()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*W9e(r/1960))-r,10<r){e.timeoutHandle=zB(dv.bind(null,e,xu,vp),r);break}dv(e,xu,vp);break;case 5:dv(e,xu,vp);break;default:throw Error(rt(329))}}}return Lu(e,ss()),e.callbackNode===n?qve.bind(null,e):null}function uU(e,t){var n=WC;return e.current.memoizedState.isDehydrated&&(e1(e,t).flags|=256),e=vO(e,t),e!==2&&(t=xu,xu=n,t!==null&&lU(t)),e}function lU(e){xu===null?xu=e:xu.push.apply(xu,e)}function G9e(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Kf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ig(e,t){for(t&=~Bq,t&=~jM,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Lf(t),r=1<<n;e[n]=-1,t&=~r}}function lse(e){if(ar&6)throw Error(rt(327));_w();var t=eO(e,0);if(!(t&1))return Lu(e,ss()),null;var n=vO(e,t);if(e.tag!==0&&n===2){var r=OB(e);r!==0&&(t=r,n=uU(e,r))}if(n===1)throw n=Z2,e1(e,0),Ig(e,t),Lu(e,ss()),n;if(n===6)throw Error(rt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,dv(e,xu,vp),Lu(e,ss()),null}function zq(e,t){var n=ar;ar|=1;try{return e(t)}finally{ar=n,ar===0&&(oE=ss()+500,$M&&hy())}}function E1(e){jg!==null&&jg.tag===0&&!(ar&6)&&_w();var t=ar;ar|=1;var n=Sc.transition,r=$r;try{if(Sc.transition=null,$r=1,e)return e()}finally{$r=r,Sc.transition=n,ar=t,!(ar&6)&&hy()}}function Vq(){dl=Z_.current,pi(Z_)}function e1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,x9e(n)),bs!==null)for(n=bs.return;n!==null;){var r=n;switch(xq(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&sO();break;case 3:iE(),pi($u),pi(wa),Pq();break;case 5:Nq(r);break;case 4:iE();break;case 13:pi(Ai);break;case 19:pi(Ai);break;case 10:Aq(r.type._context);break;case 22:case 23:Vq()}n=n.return}if(lo=e,bs=e=a0(e.current,null),Do=dl=t,Ls=0,Z2=null,Bq=jM=w1=0,xu=WC=null,Fv!==null){for(t=0;t<Fv.length;t++)if(n=Fv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Fv=null}return e}function Wve(e,t){do{var n=bs;try{if(Cq(),MP.current=pO,hO){for(var r=Ri.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hO=!1}if(_1=0,Js=ks=Ri=null,HC=!1,X2=0,jq.current=null,n===null||n.return===null){Ls=1,Z2=t,bs=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Do,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Xie(o);if(h!==null){h.flags&=-257,Qie(h,o,a,s,t),h.mode&1&&Kie(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){Kie(s,l,t),Hq();break e}u=Error(rt(426))}}else if(bi&&a.mode&1){var g=Xie(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Qie(g,o,a,s,t),Sq(sE(u,a));break e}}s=u=sE(u,a),Ls!==4&&(Ls=2),WC===null?WC=[s]:WC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=kve(s,u,t);Vie(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(s0===null||!s0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=Rve(s,a,t);Vie(s,w);break e}}s=s.return}while(s!==null)}Kve(n)}catch(E){t=E,bs===n&&n!==null&&(bs=n=n.return);continue}break}while(!0)}function Gve(){var e=mO.current;return mO.current=pO,e===null?pO:e}function Hq(){(Ls===0||Ls===3||Ls===2)&&(Ls=4),lo===null||!(w1&268435455)&&!(jM&268435455)||Ig(lo,Do)}function vO(e,t){var n=ar;ar|=2;var r=Gve();(lo!==e||Do!==t)&&(vp=null,e1(e,t));do try{Y9e();break}catch(i){Wve(e,i)}while(!0);if(Cq(),ar=n,mO.current=r,bs!==null)throw Error(rt(261));return lo=null,Do=0,Ls}function Y9e(){for(;bs!==null;)Yve(bs)}function K9e(){for(;bs!==null&&!_je();)Yve(bs)}function Yve(e){var t=Qve(e.alternate,e,dl);e.memoizedProps=e.pendingProps,t===null?Kve(e):bs=t,jq.current=null}function Kve(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=z9e(n,t),n!==null){n.flags&=32767,bs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ls=6,bs=null;return}}else if(n=U9e(n,t,dl),n!==null){bs=n;return}if(t=t.sibling,t!==null){bs=t;return}bs=t=e}while(t!==null);Ls===0&&(Ls=5)}function dv(e,t,n){var r=$r,i=Sc.transition;try{Sc.transition=null,$r=1,X9e(e,t,n,r)}finally{Sc.transition=i,$r=r}return null}function X9e(e,t,n,r){do _w();while(jg!==null);if(ar&6)throw Error(rt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(rt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(Rje(e,s),e===lo&&(bs=lo=null,Do=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||QR||(QR=!0,Jve(ZD,function(){return _w(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sc.transition,Sc.transition=null;var o=$r;$r=1;var a=ar;ar|=4,jq.current=null,H9e(e,n),Vve(n,e),g9e(BB),tO=!!jB,BB=jB=null,e.current=n,q9e(n),wje(),ar=a,$r=o,Sc.transition=s}else e.current=n;if(QR&&(QR=!1,jg=e,yO=i),s=e.pendingLanes,s===0&&(s0=null),Sje(n.stateNode),Lu(e,ss()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gO)throw gO=!1,e=oU,oU=null,e;return yO&1&&e.tag!==0&&_w(),s=e.pendingLanes,s&1?e===aU?GC++:(GC=0,aU=e):GC=0,hy(),null}function _w(){if(jg!==null){var e=kye(yO),t=Sc.transition,n=$r;try{if(Sc.transition=null,$r=16>e?16:e,jg===null)var r=!1;else{if(e=jg,jg=null,yO=0,ar&6)throw Error(rt(331));var i=ar;for(ar|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:qC(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(Bve(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:qC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:FM(9,a)}}catch(E){zi(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ar=i,hy(),ih&&typeof ih.onPostCommitFiberRoot=="function")try{ih.onPostCommitFiberRoot(RM,e)}catch{}r=!0}return r}finally{$r=n,Sc.transition=t}}return!1}function cse(e,t,n){t=sE(n,t),t=kve(e,t,1),e=i0(e,t,1),t=Wa(),e!==null&&(AI(e,1,t),Lu(e,t))}function zi(e,t,n){if(e.tag===3)cse(e,e,n);else for(;t!==null;){if(t.tag===3){cse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(s0===null||!s0.has(r))){e=sE(n,e),e=Rve(t,e,1),t=i0(t,e,1),e=Wa(),t!==null&&(AI(t,1,e),Lu(t,e));break}}t=t.return}}function Q9e(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Wa(),e.pingedLanes|=e.suspendedLanes&n,lo===e&&(Do&n)===n&&(Ls===4||Ls===3&&(Do&130023424)===Do&&500>ss()-Uq?e1(e,0):Bq|=n),Lu(e,t)}function Xve(e,t){t===0&&(e.mode&1?(t=UR,UR<<=1,!(UR&130023424)&&(UR=4194304)):t=1);var n=Wa();e=om(e,t),e!==null&&(AI(e,t,n),Lu(e,n))}function J9e(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Xve(e,n)}function Z9e(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(rt(314))}r!==null&&r.delete(t),Xve(e,n)}var Qve;Qve=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||$u.current)Ru=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ru=!1,B9e(e,t,n);Ru=!!(e.flags&131072)}else Ru=!1,bi&&t.flags&1048576&&tve(t,uO,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;FP(e,t),e=t.pendingProps;var i=tE(t,wa.current);bw(t,n),i=Oq(null,t,r,e,i,n);var s=$q();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mu(r)?(s=!0,oO(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kq(t),i.updater=LM,t.stateNode=i,i._reactInternals=t,KB(t,r,e,n),t=JB(null,t,r,!0,s,n)):(t.tag=0,bi&&s&&Eq(t),Ma(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(FP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=tBe(r),e=mf(r,e),i){case 0:t=QB(null,t,r,e,n);break e;case 1:t=ese(null,t,r,e,n);break e;case 11:t=Jie(null,t,r,e,n);break e;case 14:t=Zie(null,t,r,mf(r.type,e),n);break e}throw Error(rt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mf(r,i),QB(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mf(r,i),ese(e,t,r,i,n);case 3:e:{if(Ove(t),e===null)throw Error(rt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,ave(e,t),fO(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=sE(Error(rt(423)),t),t=tse(e,t,r,n,i);break e}else if(r!==i){i=sE(Error(rt(424)),t),t=tse(e,t,r,n,i);break e}else for(bl=r0(t.stateNode.containerInfo.firstChild),Il=t,bi=!0,wf=null,n=sve(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(nE(),r===i){t=am(e,t,n);break e}Ma(e,t,r,n)}t=t.child}return t;case 5:return uve(t),e===null&&WB(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,UB(r,i)?o=null:s!==null&&UB(r,s)&&(t.flags|=32),Dve(e,t),Ma(e,t,o,n),t.child;case 6:return e===null&&WB(t),null;case 13:return $ve(e,t,n);case 4:return Rq(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=rE(t,null,r,n):Ma(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mf(r,i),Jie(e,t,r,i,n);case 7:return Ma(e,t,t.pendingProps,n),t.child;case 8:return Ma(e,t,t.pendingProps.children,n),t.child;case 12:return Ma(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ti(lO,r._currentValue),r._currentValue=o,s!==null)if(Kf(s.value,o)){if(s.children===i.children&&!$u.current){t=am(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Hp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),GB(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(rt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),GB(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ma(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,bw(t,n),i=Ic(i),r=r(i),t.flags|=1,Ma(e,t,r,n),t.child;case 14:return r=t.type,i=mf(r,t.pendingProps),i=mf(r.type,i),Zie(e,t,r,i,n);case 15:return Nve(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:mf(r,i),FP(e,t),t.tag=1,Mu(r)?(e=!0,oO(t)):e=!1,bw(t,n),Ive(t,r,i),KB(t,r,i,n),JB(null,t,r,!0,e,n);case 19:return Mve(e,t,n);case 22:return Pve(e,t,n)}throw Error(rt(156,t.tag))};function Jve(e,t){return Tye(e,t)}function eBe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yc(e,t,n,r){return new eBe(e,t,n,r)}function qq(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tBe(e){if(typeof e=="function")return qq(e)?1:0;if(e!=null){if(e=e.$$typeof,e===cq)return 11;if(e===fq)return 14}return 2}function a0(e,t){var n=e.alternate;return n===null?(n=yc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function UP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")qq(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case V_:return t1(n.children,i,s,t);case lq:o=8,i|=8;break;case bB:return e=yc(12,n,t,i|2),e.elementType=bB,e.lanes=s,e;case _B:return e=yc(13,n,t,i),e.elementType=_B,e.lanes=s,e;case wB:return e=yc(19,n,t,i),e.elementType=wB,e.lanes=s,e;case uye:return BM(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case oye:o=10;break e;case aye:o=9;break e;case cq:o=11;break e;case fq:o=14;break e;case vg:o=16,r=null;break e}throw Error(rt(130,e==null?e:typeof e,""))}return t=yc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function t1(e,t,n,r){return e=yc(7,e,r,t),e.lanes=n,e}function BM(e,t,n,r){return e=yc(22,e,r,t),e.elementType=uye,e.lanes=n,e.stateNode={isHidden:!1},e}function X5(e,t,n){return e=yc(6,e,null,t),e.lanes=n,e}function Q5(e,t,n){return t=yc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function nBe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=N5(0),this.expirationTimes=N5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=N5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Wq(e,t,n,r,i,s,o,a,u){return e=new nBe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=yc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},kq(s),e}function rBe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z_,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Zve(e){if(!e)return A0;e=e._reactInternals;e:{if(lb(e)!==e||e.tag!==1)throw Error(rt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(rt(171))}if(e.tag===1){var n=e.type;if(Mu(n))return Zye(e,n,t)}return t}function e1e(e,t,n,r,i,s,o,a,u){return e=Wq(n,r,!0,e,i,s,o,a,u),e.context=Zve(null),n=e.current,r=Wa(),i=o0(n),s=Hp(r,i),s.callback=t??null,i0(n,s,i),e.current.lanes=i,AI(e,i,r),Lu(e,r),e}function UM(e,t,n,r){var i=t.current,s=Wa(),o=o0(i);return n=Zve(n),t.context===null?t.context=n:t.pendingContext=n,t=Hp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=i0(i,t,o),e!==null&&(Ff(e,i,o,s),$P(e,i,o)),o}function bO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function fse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Gq(e,t){fse(e,t),(e=e.alternate)&&fse(e,t)}function iBe(){return null}var t1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function Yq(e){this._internalRoot=e}zM.prototype.render=Yq.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(rt(409));UM(e,t,null,null)};zM.prototype.unmount=Yq.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;E1(function(){UM(null,e,null,null)}),t[sm]=null}};function zM(e){this._internalRoot=e}zM.prototype.unstable_scheduleHydration=function(e){if(e){var t=Pye();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ag.length&&t!==0&&t<Ag[n].priority;n++);Ag.splice(n,0,e),n===0&&Oye(e)}};function Kq(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function VM(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dse(){}function sBe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=bO(o);s.call(l)}}var o=e1e(t,r,e,0,null,!1,!1,"",dse);return e._reactRootContainer=o,e[sm]=o.current,q2(e.nodeType===8?e.parentNode:e),E1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=bO(u);a.call(l)}}var u=Wq(e,0,!1,null,null,!1,!1,"",dse);return e._reactRootContainer=u,e[sm]=u.current,q2(e.nodeType===8?e.parentNode:e),E1(function(){UM(t,u,n,r)}),u}function HM(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=bO(o);a.call(u)}}UM(t,o,e,i)}else o=sBe(n,t,e,i,r);return bO(o)}Rye=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=VT(t.pendingLanes);n!==0&&(pq(t,n|1),Lu(t,ss()),!(ar&6)&&(oE=ss()+500,hy()))}break;case 13:E1(function(){var r=om(e,1);if(r!==null){var i=Wa();Ff(r,e,1,i)}}),Gq(e,1)}};mq=function(e){if(e.tag===13){var t=om(e,134217728);if(t!==null){var n=Wa();Ff(t,e,134217728,n)}Gq(e,134217728)}};Nye=function(e){if(e.tag===13){var t=o0(e),n=om(e,t);if(n!==null){var r=Wa();Ff(n,e,t,r)}Gq(e,t)}};Pye=function(){return $r};Dye=function(e,t){var n=$r;try{return $r=e,t()}finally{$r=n}};NB=function(e,t,n){switch(t){case"input":if(SB(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=OM(r);if(!i)throw Error(rt(90));cye(r),SB(r,i)}}}break;case"textarea":dye(e,n);break;case"select":t=n.value,t!=null&&mw(e,!!n.multiple,t,!1)}};bye=zq;_ye=E1;var oBe={usingClientEntryPoint:!1,Events:[kI,G_,OM,yye,vye,zq]},YS={findFiberByHostInstance:Lv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aBe={bundleType:YS.bundleType,version:YS.version,rendererPackageName:YS.rendererPackageName,rendererConfig:YS.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=xye(e),e===null?null:e.stateNode},findFiberByHostInstance:YS.findFiberByHostInstance||iBe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var JR=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!JR.isDisabled&&JR.supportsFiber)try{RM=JR.inject(aBe),ih=JR}catch{}}Gl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oBe;Gl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kq(t))throw Error(rt(200));return rBe(e,t,null,n)};Gl.createRoot=function(e,t){if(!Kq(e))throw Error(rt(299));var n=!1,r="",i=t1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Wq(e,1,!1,null,null,n,!1,r,i),e[sm]=t.current,q2(e.nodeType===8?e.parentNode:e),new Yq(t)};Gl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(rt(188)):(e=Object.keys(e).join(","),Error(rt(268,e)));return e=xye(t),e=e===null?null:e.stateNode,e};Gl.flushSync=function(e){return E1(e)};Gl.hydrate=function(e,t,n){if(!VM(t))throw Error(rt(200));return HM(null,e,t,!0,n)};Gl.hydrateRoot=function(e,t,n){if(!Kq(e))throw Error(rt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=t1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=e1e(t,null,e,1,n??null,i,!1,s,o),e[sm]=t.current,q2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new zM(t)};Gl.render=function(e,t,n){if(!VM(t))throw Error(rt(200));return HM(null,e,t,!1,n)};Gl.unmountComponentAtNode=function(e){if(!VM(e))throw Error(rt(40));return e._reactRootContainer?(E1(function(){HM(null,null,e,!1,function(){e._reactRootContainer=null,e[sm]=null})}),!0):!1};Gl.unstable_batchedUpdates=zq;Gl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!VM(n))throw Error(rt(200));if(e==null||e._reactInternals===void 0)throw Error(rt(38));return HM(e,t,n,!1,r)};Gl.version="18.3.1-next-f1338f8080-20240426";function n1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n1e)}catch(e){console.error(e)}}n1e(),nye.exports=Gl;var NI=nye.exports;const uBe=nl(NI);var hse=NI;yB.createRoot=hse.createRoot,yB.hydrateRoot=hse.hydrateRoot;var Ud=function(){return Ud=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Ud.apply(this,arguments)};function PI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Cp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function pse(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function lBe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Gn(e){return this instanceof Gn?(this.v=e,this):new Gn(e)}function Bv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Gn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function J5(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Gn(e[i](o)),done:!1}:s?s(o):o}:s}}function YC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof pse=="function"?pse(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var zP="right-scroll-bar-position",VP="width-before-scroll-bar",cBe="with-scroll-bars-hidden",fBe="--removed-body-scroll-bar-size";function Z5(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function dBe(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var hBe=typeof window<"u"?I.useLayoutEffect:I.useEffect,mse=new WeakMap;function pBe(e,t){var n=dBe(null,function(r){return e.forEach(function(i){return Z5(i,r)})});return hBe(function(){var r=mse.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||Z5(a,null)}),s.forEach(function(a){i.has(a)||Z5(a,o)})}mse.set(n,e)},[e]),n}function mBe(e){return e}function gBe(e,t){t===void 0&&(t=mBe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function yBe(e){e===void 0&&(e={});var t=gBe(null);return t.options=Ud({async:!0,ssr:!1},e),t}var r1e=function(e){var t=e.sideCar,n=PI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Ud({},n))};r1e.isSideCarExport=!0;function vBe(e,t){return e.useMedium(t),r1e}var i1e=yBe(),e8=function(){},qM=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:e8,onWheelCapture:e8,onTouchMoveCapture:e8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=PI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=pBe([n,t]),S=Ud(Ud({},b),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:i1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Ud(Ud({},S),{ref:E})):I.createElement(y,Ud({},S,{className:u,ref:E}),a))});qM.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};qM.classNames={fullWidth:VP,zeroRight:zP};var bBe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function _Be(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=bBe();return t&&e.setAttribute("nonce",t),e}function wBe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function EBe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var xBe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=_Be())&&(wBe(t,n),EBe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},SBe=function(){var e=xBe();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},s1e=function(){var e=SBe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},TBe={left:0,top:0,right:0,gap:0},t8=function(e){return parseInt(e||"",10)||0},CBe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[t8(n),t8(r),t8(i)]},ABe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return TBe;var t=CBe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},IBe=s1e(),ww="data-scroll-locked",kBe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(cBe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(ww,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(VP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(zP," .").concat(zP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(VP," .").concat(VP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ww,`] {
    `).concat(fBe,": ").concat(a,`px;
  }
`)},gse=function(){var e=parseInt(document.body.getAttribute(ww)||"0",10);return isFinite(e)?e:0},RBe=function(){I.useEffect(function(){return document.body.setAttribute(ww,(gse()+1).toString()),function(){var e=gse()-1;e<=0?document.body.removeAttribute(ww):document.body.setAttribute(ww,e.toString())}},[])},NBe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;RBe();var s=I.useMemo(function(){return ABe(i)},[i]);return I.createElement(IBe,{styles:kBe(s,!t,i,n?"":"!important")})},cU=!1;if(typeof window<"u")try{var ZR=Object.defineProperty({},"passive",{get:function(){return cU=!0,!0}});window.addEventListener("test",ZR,ZR),window.removeEventListener("test",ZR,ZR)}catch{cU=!1}var Xb=cU?{passive:!1}:!1,PBe=function(e){return e.tagName==="TEXTAREA"},o1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!PBe(e)&&n[t]==="visible")},DBe=function(e){return o1e(e,"overflowY")},OBe=function(e){return o1e(e,"overflowX")},yse=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=a1e(e,r);if(i){var s=u1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},$Be=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},MBe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},a1e=function(e,t){return e==="v"?DBe(t):OBe(t)},u1e=function(e,t){return e==="v"?$Be(t):MBe(t)},LBe=function(e,t){return e==="h"&&t==="rtl"?-1:1},FBe=function(e,t,n,r,i){var s=LBe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=u1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&a1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},eN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},vse=function(e){return[e.deltaX,e.deltaY]},bse=function(e){return e&&"current"in e?e.current:e},jBe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},BBe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},UBe=0,Qb=[];function zBe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(UBe++)[0],s=I.useState(s1e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=lBe([e.lockRef.current],(e.shards||[]).map(bse),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=eN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,S=m.target,T=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&T==="h"&&S.type==="range")return!1;var C=yse(T,S);if(!C)return!0;if(C?E=T:(E=T==="v"?"h":"v",C=yse(T,S)),!C)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var A=r.current||E;return FBe(A,g,m,A==="h"?b:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!Qb.length||Qb[Qb.length-1]!==s)){var y="deltaY"in g?vse(g):eN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&jBe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(bse).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:VBe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=I.useCallback(function(m){n.current=eN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,vse(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,eN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return Qb.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,Xb),document.addEventListener("touchmove",u,Xb),document.addEventListener("touchstart",c,Xb),function(){Qb=Qb.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,Xb),document.removeEventListener("touchmove",u,Xb),document.removeEventListener("touchstart",c,Xb)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:BBe(i)}):null,h?I.createElement(NBe,{gapMode:e.gapMode}):null)}function VBe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const HBe=vBe(i1e,zBe);var WM=I.forwardRef(function(e,t){return I.createElement(qM,Ud({},e,{ref:t,sideCar:HBe}))});WM.classNames=qM.classNames;function Ni(e){return Object.keys(e)}function n8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function Xq(e,t){const n={...e},r=t;return n8(e)&&n8(t)&&Object.keys(t).forEach(i=>{n8(r[i])&&i in e?n[i]=Xq(n[i],r[i]):n[i]=r[i]}),n}function qBe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function WBe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function fU(e){const t=WBe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function r8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function l1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?r8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?r8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?r8(s):s}}return r}return n}const xe=l1e("rem",{shouldScale:!0}),_O=l1e("em");function Tx(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function c1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Nm(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function qs(e){const t=I.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function cb(e=null){const t=I.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function wO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function EO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function GBe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function YBe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function KBe(e,t,n){return EO(e,n)===EO(t,n)}function Qq({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=EO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>KBe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=YBe(l,u,r),f=GBe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const XBe={app:100,modal:200,popover:300,overlay:400,max:9999};function qc(e){return XBe[e]}const QBe=()=>{};function JBe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||QBe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function Ht(e,t="size",n=!0){if(e!==void 0)return c1e(e)?n?xe(e):e:`var(--${t}-${e})`}function qu(e){return Ht(e,"mantine-spacing")}function Mr(e){return e===void 0?"var(--mantine-radius-default)":Ht(e,"mantine-radius")}function co(e){return Ht(e,"mantine-font-size")}function f1e(e){return Ht(e,"mantine-line-height",!1)}function Jq(e){if(e)return Ht(e,"mantine-shadow",!1)}function _l(e,t){return n=>{e==null||e(n),t==null||t(n)}}function Zq(e,t){return e in t.breakpoints?fU(t.breakpoints[e]):fU(e)}function xO(e,t){const n=e.map(r=>({value:r,px:Zq(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function qT(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function ZBe(e,t,n){var r;return n?Array.from(((r=EO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function eUe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function vc(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function KC(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function kg(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function GM(e,t){const n=kg(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const _se=["mousedown","touchstart"];function tUe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||_se).forEach(s=>document.addEventListener(s,i)),()=>{(t||_se).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function nUe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function rUe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function iUe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:rUe(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),nUe(s.current,o=>i(o.matches))},[e]),r}const fb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function Rc(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function d1e({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return Rc(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function sUe(e,t="body > :not(script)"){const n=KC(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const oUe=/input|select|textarea|button|object/,h1e="a, input, select, textarea, button, object, [tabindex]";function aUe(e){return e.style.display==="none"}function uUe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(aUe(n))return!1;n=n.parentNode}return!0}function p1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function dU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(p1e(e));return(oUe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&uUe(e)}function m1e(e){const t=p1e(e);return(Number.isNaN(t)||t>=0)&&dU(e)}function lUe(e){return Array.from(e.querySelectorAll(h1e)).filter(m1e)}function cUe(e,t){const n=lUe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function fUe(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(h1e));o=a.find(m1e)||a.find(dU)||null,!o&&dU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=sUe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&cUe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const dUe=Wi.useId||(()=>{});function hUe(){const e=dUe();return e?`mantine-${e.replace(/:/g,"")}`:""}function su(e){const t=hUe(),[n,r]=I.useState(t);return fb(()=>{r(KC())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function g1e(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function eW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function y1e(...e){return t=>{e.forEach(n=>eW(n,t))}}function Ji(...e){return I.useCallback(y1e(...e),e)}function v1e(e){return{x:vc(e.x,0,1),y:vc(e.y,0,1)}}function YM(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const S=r.current.getBoundingClientRect();if(S.width&&S.height){const T=vc((w-S.left)/S.width,0,1);e({x:n==="ltr"?T:1-T,y:vc((E-S.top)/S.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function ls({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function tW(e,t){return iUe("(prefers-reduced-motion: reduce)",e,t)}const pUe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function KM(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(pUe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function n1(e=!1,t){const{onOpen:n,onClose:r}=t||{},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function mUe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function gUe(e){const t=I.useRef();return I.useEffect(()=>{t.current=e},[e]),t.current}function yUe(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function vUe(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function bUe(e,t){const n=kg(e),r=I.useRef(),i=I.useRef(),s=I.useRef(!0),o=I.useRef(t),a=I.useRef(-1),u=()=>window.clearTimeout(a.current),l=I.useCallback((...d)=>{n(...d),r.current=d,i.current=d,s.current=!1},[n]),c=I.useCallback(()=>{r.current&&r.current!==i.current?(l(...r.current),a.current=window.setTimeout(c,o.current)):s.current=!0},[l]),f=I.useCallback((...d)=>{s.current?(l(...d),a.current=window.setTimeout(c,o.current)):r.current=d},[l,c]);return I.useEffect(()=>{o.current=t},[t]),[f,u]}function _Ue(e,t){const[n,r]=I.useState(e),[i,s]=bUe(r,t);return I.useEffect(()=>s,[]),[n,i]}function wUe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function EUe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});fb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>wUe(`${e}:${String(r)}`,i[0])}return[t,n]}var xUe={};function b1e(){return typeof process<"u"&&xUe?"production":"development"}function _1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=_1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Xi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=_1e(e))&&(r&&(r+=" "),r+=t);return r}const SUe={};function TUe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Xi(t[r],i):t[r]=i})}),t}function XM({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||SUe);return TUe(s)}function SO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const w1e=I.createContext(null);function py(){const e=I.useContext(w1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function CUe(){return py().cssVariablesResolver}function AUe(){return py().classNamesPrefix}function nW(){return py().getStyleNonce}function IUe(){return py().withStaticClasses}function kUe(){return py().headless}function RUe(){var e;return(e=py().stylesTransform)==null?void 0:e.sx}function NUe(){var e;return(e=py().stylesTransform)==null?void 0:e.styles}function PUe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function DUe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function OUe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function $Ue(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function rW(e){return PUe(e)?DUe(e):e.startsWith("rgb")?OUe(e):e.startsWith("hsl")?$Ue(e):{r:0,g:0,b:0,a:1}}function tN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=rW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function eA(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function i8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function MUe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function LUe(e){if(e.startsWith("oklch("))return(MUe(e)||0)/100;const{r:t,g:n,b:r}=rW(e),i=t/255,s=n/255,o=r/255,a=i8(i),u=i8(s),l=i8(o);return .2126*a+.7152*u+.0722*l}function KS(e,t=.179){return e.startsWith("var(")?!1:LUe(e)>t}function Nc({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:KS(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:KS(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:KS(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][eA(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:KS(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:KS(e,t.luminanceThreshold),shade:s,variable:void 0}}function jr(e,t){const n=Nc({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function hU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=jr(n.from,t),i=jr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function oc(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=rW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const Jb=oc,FUe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Nc({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${xe(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${xe(1)} solid transparent`}:{background:e,hover:tN(e,.1),color:a,border:`${xe(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${xe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:oc(a,.1),hover:oc(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${xe(1)} solid transparent`}}return{background:oc(e,.1),hover:oc(e,.12),color:e,border:`${xe(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${xe(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:oc(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${xe(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:oc(e,.05),color:e,border:`${xe(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${xe(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:oc(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${xe(1)} solid transparent`}}return{background:"transparent",hover:oc(e,.12),color:e,border:`${xe(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${xe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${xe(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${xe(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:tN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${xe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:tN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${xe(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:tN(t.white,.01),color:e,border:`${xe(1)} solid transparent`}:n==="gradient"?{background:hU(r,t),hover:hU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${xe(1)} solid var(--mantine-color-default-border)`}:{}},jUe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},wse="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",iW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:jUe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:FUe,autoContrast:!1,luminanceThreshold:.3,fontFamily:wse,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:wse,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:xe(34),lineHeight:"1.3"},h2:{fontSize:xe(26),lineHeight:"1.35"},h3:{fontSize:xe(22),lineHeight:"1.4"},h4:{fontSize:xe(18),lineHeight:"1.45"},h5:{fontSize:xe(16),lineHeight:"1.5"},h6:{fontSize:xe(14),lineHeight:"1.5"}}},fontSizes:{xs:xe(12),sm:xe(14),md:xe(16),lg:xe(18),xl:xe(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:xe(2),sm:xe(4),md:xe(8),lg:xe(16),xl:xe(32)},spacing:{xs:xe(10),sm:xe(12),md:xe(16),lg:xe(20),xl:xe(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), 0 ${xe(1)} ${xe(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(10)} ${xe(15)} ${xe(-5)}, rgba(0, 0, 0, 0.04) 0 ${xe(7)} ${xe(7)} ${xe(-5)}`,md:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(20)} ${xe(25)} ${xe(-5)}, rgba(0, 0, 0, 0.04) 0 ${xe(10)} ${xe(10)} ${xe(-5)}`,lg:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(28)} ${xe(23)} ${xe(-7)}, rgba(0, 0, 0, 0.04) 0 ${xe(12)} ${xe(12)} ${xe(-7)}`,xl:`0 ${xe(1)} ${xe(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${xe(36)} ${xe(28)} ${xe(-7)}, rgba(0, 0, 0, 0.04) 0 ${xe(17)} ${xe(17)} ${xe(-7)}`},other:{},components:{}};function Ese(e){return e==="auto"||e==="dark"||e==="light"}function BUe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Ese(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Ese(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const UUe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",xse="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function s8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Sse(e){if(!(e.primaryColor in e.colors))throw new Error(UUe);if(typeof e.primaryShade=="object"&&(!s8(e.primaryShade.dark)||!s8(e.primaryShade.light)))throw new Error(xse);if(typeof e.primaryShade=="number"&&!s8(e.primaryShade))throw new Error(xse)}function zUe(e,t){var r;if(!t)return Sse(e),e;const n=Xq(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Sse(n),n}const sW=I.createContext(null),VUe=()=>I.useContext(sW)||iW;function Ss(){const e=I.useContext(sW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function E1e({theme:e,children:t,inherit:n=!0}){const r=VUe(),i=I.useMemo(()=>zUe(n?r:iW,e),[e,r,n]);return _.jsx(sW.Provider,{value:i,children:t})}E1e.displayName="@mantine/core/MantineThemeProvider";function HUe(){const e=Ss(),t=nW(),n=Ni(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=fU(e.breakpoints[i]),a=s?`${o-.1}px`:_O(o-.1),u=s?`${o}px`:_O(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function o8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function XS(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function qUe(e,t){const n=o8(e.variables),r=n?XS(t,n):"",i=o8(e.dark),s=o8(e.light),o=i?XS(t===":host"?`${t}([data-mantine-color-scheme="dark"])`:`${t}[data-mantine-color-scheme="dark"]`,i):"",a=s?XS(t===":host"?`${t}([data-mantine-color-scheme="light"])`:`${t}[data-mantine-color-scheme="light"]`,s):"";return`${r}${o}${a}`}function my({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Nc({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Tse(e,t){return my({color:e.colors[e.primaryColor][eA(e,t)],theme:e,autoContrast:null})}function nN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=eA(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:Jb(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:Jb(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:Jb(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=eA(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:Jb(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:Jb(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:Jb(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function WUe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function Zb(e,t,n){Ni(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const x1e=e=>{const t=eA(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:xe(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Tse(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Tse(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};Zb(r.variables,e.breakpoints,"breakpoint"),Zb(r.variables,e.spacing,"spacing"),Zb(r.variables,e.fontSizes,"font-size"),Zb(r.variables,e.lineHeights,"line-height"),Zb(r.variables,e.shadows,"shadow"),Zb(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Ni(e.colors).forEach(s=>{const o=e.colors[s];if(WUe(o)){Object.assign(r.light,nN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,nN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,nN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,nN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Ni(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function GUe({theme:e,generator:t}){const n=x1e(e),r=t==null?void 0:t(e);return r?Xq(n,r):n}const a8=x1e(iW);function YUe(e){const t={variables:{},light:{},dark:{}};return Ni(e.variables).forEach(n=>{a8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Ni(e.light).forEach(n=>{a8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Ni(e.dark).forEach(n=>{a8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function KUe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function S1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=Ss(),r=nW(),i=CUe(),s=GUe({theme:n,generator:i}),o=e===":root"&&t,a=o?YUe(s):s,u=qUe(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":KUe(e)}`}}):null}S1e.displayName="@mantine/CssVariables";function XUe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function e_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function QUe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(e_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),e_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),fb(()=>{e_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return e_(r,n),()=>{};r===void 0&&e_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&e_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function JUe({respectReducedMotion:e,getRootElement:t}){fb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}XUe();function T1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=BUe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=QUe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return JUe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(w1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(E1e,{theme:e,children:[o&&_.jsx(S1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(HUe,{}),t]})})}T1e.displayName="@mantine/core/MantineProvider";function Pm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=Ss();return{resolvedClassNames:XM({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:SO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const ZUe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function e7e({theme:e,options:t,unstyled:n}){return Xi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||ZUe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function t7e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return XM({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Cse({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return XM({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function n7e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function r7e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function i7e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function s7e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=XM({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function o7e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function a7e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Xi(e7e({theme:e,options:t,unstyled:a||h}),s7e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),o7e({options:t,classes:o,selector:r,unstyled:a}),Cse({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Cse({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),t7e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),n7e({rootSelector:l,selector:r,className:u}),r7e({selector:r,classes:o,unstyled:a||h}),d&&!h&&i7e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function u7e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return SO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function pU({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...pU({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function l7e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Tx(n[r])}}),t),{})}function c7e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=l7e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function f7e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&u7e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&SO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&SO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...c7e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?pU({style:u,theme:e}):null,...pU({style:r==null?void 0:r.style,theme:e})}}function d7e({props:e,stylesCtx:t,themeName:n}){var o;const r=Ss(),i=(o=NUe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function mt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=Ss(),h=AUe(),p=IUe(),m=kUe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=d7e({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:a7e({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:f7e({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function Cx(e,t){return typeof e=="boolean"?e:t.autoContrast}function we(e,t,n){var o;const r=Ss(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Tx(n)}}function u8(e){return Ni(e).reduce((t,n)=>e[n]!==void 0?`${t}${qBe(n)}:${e[n]};`:t,"").trim()}function h7e({selector:e,styles:t,media:n,container:r}){const i=t?u8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${u8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${u8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function DI(e){const t=nW();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:h7e(e)}})}function db(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:C,fw:A,lts:N,ta:k,lh:O,fs:P,tt:$,td:L,w:M,miw:U,maw:B,h:V,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:te,top:ve,left:he,bottom:ce,right:me,inset:Le,display:fe,flex:ct,hiddenFrom:ze,visibleFrom:Ke,lightHidden:it,darkHidden:De,sx:Ae,...Ge}=e;return{styleProps:Tx({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:S,ff:T,fz:C,fw:A,lts:N,ta:k,lh:O,fs:P,tt:$,td:L,w:M,miw:U,maw:B,h:V,mih:D,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:te,top:ve,left:he,bottom:ce,right:me,inset:Le,display:fe,flex:ct,hiddenFrom:ze,visibleFrom:Ke,lightHidden:it,darkHidden:De,sx:Ae}),rest:Ge}}const p7e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function oW(e,t){const n=Nc({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function m7e(e,t){const n=Nc({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:oW(e,t)}function g7e(e,t){if(typeof e=="number")return xe(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${xe(n)}`;return r&&(s+=` ${r}`),i.length>0&&(s+=` ${oW(i.join(" "),t)}`),s.trim()}return e}const Ase={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function y7e(e){return typeof e=="string"&&e in Ase?Ase[e]:e}const v7e=["h1","h2","h3","h4","h5","h6"];function b7e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&v7e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?xe(e):e}function _7e(e){return e}const w7e=["h1","h2","h3","h4","h5","h6"];function E7e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&w7e.includes(e)?`var(--mantine-${e}-line-height)`:e}function x7e(e){return typeof e=="number"?xe(e):e}function S7e(e,t){if(typeof e=="number")return xe(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return xe(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const l8={color:oW,textColor:m7e,fontSize:b7e,spacing:S7e,identity:_7e,size:x7e,lineHeight:E7e,fontFamily:y7e,border:g7e};function Ise(e){return e.replace("(min-width: ","").replace("em)","")}function T7e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Ise(i))-Number(Ise(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function C7e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function A7e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function I7e(e){return typeof e=="object"&&e!==null?Ni(e).filter(t=>t!=="base"):[]}function k7e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function C1e({styleProps:e,data:t,theme:n}){return T7e(Ni(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=A7e(e[i]);if(!C7e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=l8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=I7e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=l8[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:l8[s.type](k7e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function QM(){return`__m__-${I.useId().replace(/:/g,"")}`}function aW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...aW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function A1e(e){return e.startsWith("data-")?e:`data-${e}`}function R7e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[A1e(n)]=e[n]),t},{})}function I1e(e){return e?typeof e=="string"?{[A1e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...I1e(n)}),{}):R7e(e):null}function mU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...mU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function N7e({theme:e,style:t,vars:n,styleProps:r}){const i=mU(t,e),s=mU(n,e);return{...i,...s,...r}}const k1e=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var C;const m=Ss(),g=e||"div",{styleProps:y,rest:v}=db(h),b=RUe(),w=(C=b==null?void 0:b())==null?void 0:C(y.sx),E=QM(),S=C1e({styleProps:y,theme:m,data:p7e}),T={ref:p,style:N7e({theme:m,style:t,vars:n,styleProps:S.inlineStyles}),className:Xi(r,w,{[E]:S.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":c1e(o)?void 0:o||void 0,size:d,...I1e(s),...v};return _.jsxs(_.Fragment,{children:[S.hasResponsiveStyles&&_.jsx(DI,{selector:`.${E}`,styles:S.styles,media:S.media}),typeof f=="function"?f(T):_.jsx(g,{...T})]})});k1e.displayName="@mantine/core/Box";const be=k1e;function R1e(e){return e}function Me(e){const t=I.forwardRef(e);return t.extend=R1e,t.withProps=n=>{const r=I.forwardRef((i,s)=>_.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t}function Ts(e){const t=I.forwardRef(e);return t.withProps=n=>{const r=I.forwardRef((i,s)=>_.jsx(t,{...n,...i,ref:s}));return r.extend=t.extend,r.displayName=`WithProps(${t.displayName})`,r},t.extend=R1e,t}const P7e=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Fh(){return I.useContext(P7e)}function D7e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function c8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const QS=typeof window<"u"&&window.requestAnimationFrame;function O7e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=I.useState(r?{}:o),l=p=>{NI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||D7e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}Rc(()=>{typeof QS=="function"&&QS(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),QS(()=>{const p=c8(i);c({...f(p),height:p})})}:()=>{const p=c8(i);c({...f(p),willChange:"height",height:p}),QS(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=c8(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:y1e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const $7e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},uW=Me((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=we("Collapse",$7e,e),c=Ss(),f=tW(),h=(c.respectReducedMotion?f:!1)?0:i,p=O7e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(be,{...l,children:n}):null:_.jsx(be,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...aW(o,c)},ref:t,...l}),children:n})});uW.displayName="@mantine/core/Collapse";const[M7e,Wc]=qs("ScrollArea.Root component was not found in tree");function aE(e,t){const n=kg(t);fb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const L7e=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Wc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return aE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),aE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),F7e=I.forwardRef((e,t)=>{const n=Wc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(L7e,{...e,ref:t}):null}),j7e={scrollHideDelay:1e3,type:"hover"},N1e=I.forwardRef((e,t)=>{const n=we("ScrollAreaRoot",j7e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[b,w]=I.useState(0),[E,S]=I.useState(!1),[T,C]=I.useState(!1),A=Ji(t,N=>u(N));return _.jsx(M7e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:S,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:T,onScrollbarYEnabledChange:C,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(be,{...o,ref:A,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});N1e.displayName="@mantine/core/ScrollAreaRoot";function P1e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function JM(e){const t=P1e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function D1e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function B7e(e,[t,n]){return Math.min(n,Math.max(t,e))}function kse(e,t,n="ltr"){const r=JM(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=B7e(e,u);return D1e([0,o],[0,a])(l)}function U7e(e,t,n,r="ltr"){const i=JM(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return D1e([u,l],f)(e)}function O1e(e,t){return e>0&&e<t}function TO(e){return e?parseInt(e,10):0}function r1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[z7e,$1e]=qs("ScrollAreaScrollbar was not found in tree"),M1e=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Wc(),[h,p]=I.useState(null),m=Ji(t,C=>p(C)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=kg(l),E=kg(a),S=GM(c,10),T=C=>{if(g.current){const A=C.clientX-g.current.left,N=C.clientY-g.current.top;u({x:A,y:N})}};return I.useEffect(()=>{const C=A=>{const N=A.target;(h==null?void 0:h.contains(N))&&w(A,b)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[v,h,b,w]),I.useEffect(E,[n,E]),aE(h,S),aE(d.content,S),_.jsx(z7e,{value:{scrollbar:h,hasThumb:r,onThumbChange:kg(i),onThumbPointerUp:kg(s),onThumbPositionChange:E,onThumbPointerDown:kg(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:r1(e.onPointerDown,C=>{C.preventDefault(),C.button===0&&(C.target.setPointerCapture(C.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",document.body.style.pointerEvents="none",T(C))}),onPointerMove:r1(e.onPointerMove,T),onPointerUp:r1(e.onPointerUp,C=>{C.preventDefault();const A=C.target;A.hasPointerCapture(C.pointerId)&&A.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=y.current,document.body.style.pointerEvents="auto",g.current=null})})})}),V7e=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Wc(),[a,u]=I.useState(),l=I.useRef(null),c=Ji(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(M1e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${JM(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),O1e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:TO(a.paddingLeft),paddingEnd:TO(a.paddingRight)}})}})}),H7e=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Wc(),[a,u]=I.useState(),l=I.useRef(null),c=Ji(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(M1e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${JM(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),O1e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:TO(a.paddingTop),paddingEnd:TO(a.paddingBottom)}})}})}),lW=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Fh(),s=Wc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=P1e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>U7e(h,a.current,u,p);return n==="horizontal"?_.jsx(V7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=kse(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(H7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=kse(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),L1e=I.forwardRef((e,t)=>{const n=Wc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=GM(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return aE(n.viewport,u),aE(n.content,u),r||s?_.jsx(lW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),q7e=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Wc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(L1e,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),W7e=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Wc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=GM(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(lW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:r1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:r1(e.onPointerLeave,()=>a("idle"))}):null}),Rse=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Wc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(q7e,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(W7e,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(L1e,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(lW,{...r,ref:t}):null});function G7e(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const Y7e=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Wc(),s=$1e(),{onThumbPositionChange:o}=s,a=Ji(t,c=>s.onThumbChange(c)),u=I.useRef(),l=GM(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=G7e(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:r1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:r1(e.onPointerUp,s.onThumbPointerUp)})}),Nse=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=$1e();return n||i.hasThumb?_.jsx(Y7e,{ref:t,...r}):null}),F1e=I.forwardRef(({children:e,style:t,...n},r)=>{const i=Wc(),s=Ji(r,i.onViewportChange);return _.jsx(be,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});F1e.displayName="@mantine/core/ScrollAreaViewport";var cW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const j1e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},K7e=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":xe(t)}}),hb=Me((e,t)=>{const n=we("ScrollArea",j1e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=I.useState(!1),E=mt({name:"ScrollArea",props:n,classes:cW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:K7e});return _.jsxs(N1e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(F1e,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:S=>{var T;(T=d==null?void 0:d.onScroll)==null||T.call(d,S),p==null||p({x:S.currentTarget.scrollLeft,y:S.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(Rse,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Nse,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(Rse,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Nse,{...E("thumb")})}),_.jsx(F7e,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});hb.displayName="@mantine/core/ScrollArea";const fW=Me((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=we("ScrollAreaAutosize",j1e,e);return _.jsx(be,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(be,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(hb,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});hb.classes=cW;fW.displayName="@mantine/core/ScrollAreaAutosize";fW.classes=cW;hb.Autosize=fW;var B1e={root:"m_87cf2631"};const X7e={__staticSelector:"UnstyledButton"},ws=Ts((e,t)=>{const n=we("UnstyledButton",X7e,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=mt({name:s,props:n,classes:B1e,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(be,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});ws.classes=B1e;ws.displayName="@mantine/core/UnstyledButton";var U1e={root:"m_515a97f8"};const Q7e={},dW=Me((e,t)=>{const n=we("VisuallyHidden",Q7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=mt({name:"VisuallyHidden",classes:U1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(be,{component:"span",ref:t,...c("root"),...l})});dW.classes=U1e;dW.displayName="@mantine/core/VisuallyHidden";var z1e={root:"m_1b7284a3"};const J7e={},Z7e=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Mr(t),"--paper-shadow":Jq(n)}}),uE=Ts((e,t)=>{const n=we("Paper",J7e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=mt({name:"Paper",props:n,classes:z1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:Z7e});return _.jsx(be,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});uE.classes=z1e;uE.displayName="@mantine/core/Paper";function Ax(e){return V1e(e)?(e.nodeName||"").toLowerCase():"#document"}function Fu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Dm(e){var t;return(t=(V1e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function V1e(e){return e instanceof Node||e instanceof Fu(e).Node}function _i(e){return e instanceof Element||e instanceof Fu(e).Element}function Ol(e){return e instanceof HTMLElement||e instanceof Fu(e).HTMLElement}function gU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Fu(e).ShadowRoot}function OI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Pc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function eze(e){return["table","td","th"].includes(Ax(e))}function ZM(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function hW(e){const t=pW(),n=Pc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function tze(e){let t=um(e);for(;Ol(t)&&!I0(t);){if(ZM(t))return null;if(hW(t))return t;t=um(t)}return null}function pW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function I0(e){return["html","body","#document"].includes(Ax(e))}function Pc(e){return Fu(e).getComputedStyle(e)}function eL(e){return _i(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function um(e){if(Ax(e)==="html")return e;const t=e.assignedSlot||e.parentNode||gU(e)&&e.host||Dm(e);return gU(t)?t.host:t}function H1e(e){const t=um(e);return I0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ol(t)&&OI(t)?t:H1e(t)}function qp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=H1e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Fu(i);return s?t.concat(o,o.visualViewport||[],OI(i)?i:[],o.frameElement&&n?qp(o.frameElement):[]):t.concat(i,qp(i,[],n))}function Pse(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function tA(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&gU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function q1e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function W1e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function nze(e){return sze()?!1:!Dse()&&e.width===0&&e.height===0||Dse()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function rze(){return/apple/i.test(navigator.vendor)}function Dse(){const e=/android/i;return e.test(q1e())||e.test(W1e())}function ize(){return q1e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function sze(){return W1e().includes("jsdom/")}function yU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function oze(e){return"nativeEvent"in e}function aze(e){return e.matches("html,body")}function Uv(e){return(e==null?void 0:e.ownerDocument)||document}function f8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function S_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const uze="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function lze(e){return Ol(e)&&e.matches(uze)}const wl=Math.min,ca=Math.max,CO=Math.round,rN=Math.floor,k0=e=>({x:e,y:e}),cze={left:"right",right:"left",bottom:"top",top:"bottom"},fze={start:"end",end:"start"};function vU(e,t,n){return ca(e,wl(t,n))}function lm(e,t){return typeof e=="function"?e(t):e}function Xf(e){return e.split("-")[0]}function Ix(e){return e.split("-")[1]}function mW(e){return e==="x"?"y":"x"}function gW(e){return e==="y"?"height":"width"}function cm(e){return["top","bottom"].includes(Xf(e))?"y":"x"}function yW(e){return mW(cm(e))}function dze(e,t,n){n===void 0&&(n=!1);const r=Ix(e),i=yW(e),s=gW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=AO(o)),[o,AO(o)]}function hze(e){const t=AO(e);return[bU(e),t,bU(t)]}function bU(e){return e.replace(/start|end/g,t=>fze[t])}function pze(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function mze(e,t,n,r){const i=Ix(e);let s=pze(Xf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(bU)))),s}function AO(e){return e.replace(/left|right|bottom|top/g,t=>cze[t])}function gze(e){return{top:0,right:0,bottom:0,left:0,...e}}function vW(e){return typeof e!="number"?gze(e):{top:e,right:e,bottom:e,left:e}}function lE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function Ose(e,t,n){let{reference:r,floating:i}=e;const s=cm(t),o=yW(t),a=gW(o),u=Xf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(Ix(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const yze=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=Ose(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=Ose(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function bW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=lm(t,e),p=vW(h),g=a[d?f==="floating"?"reference":"floating":f],y=lE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=lE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const vze=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=lm(e,t)||{};if(l==null)return{};const f=vW(c),d={x:n,y:r},h=yW(i),p=gW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let T=S?S[b]:0;(!T||!await(o.isElement==null?void 0:o.isElement(S)))&&(T=a.floating[b]||s.floating[p]);const C=w/2-E/2,A=T/2-m[p]/2-1,N=wl(f[y],A),k=wl(f[v],A),O=N,P=T-m[p]-k,$=T/2-m[p]/2+C,L=vU(O,$,P),M=!u.arrow&&Ix(i)!=null&&$!==L&&s.reference[p]/2-($<O?N:k)-m[p]/2<0,U=M?$<O?$-O:$-P:0;return{[h]:d[h]+U,data:{[h]:L,centerOffset:$-L-U,...M&&{alignmentOffset:U}},reset:M}}}),bze=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=lm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Xf(i),v=cm(a),b=Xf(a)===a,w=await(u.isRTL==null?void 0:u.isRTL(l.floating)),E=d||(b||!m?[AO(a)]:hze(a)),S=p!=="none";!d&&S&&E.push(...mze(a,m,p,w));const T=[a,...E],C=await bW(t,g),A=[];let N=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&A.push(C[y]),f){const $=dze(i,o,w);A.push(C[$[0]],C[$[1]])}if(N=[...N,{placement:i,overflows:A}],!A.every($=>$<=0)){var k,O;const $=(((k=s.flip)==null?void 0:k.index)||0)+1,L=T[$];if(L)return{data:{index:$,overflows:N},reset:{placement:L}};let M=(O=N.filter(U=>U.overflows[0]<=0).sort((U,B)=>U.overflows[1]-B.overflows[1])[0])==null?void 0:O.placement;if(!M)switch(h){case"bestFit":{var P;const U=(P=N.filter(B=>{if(S){const V=cm(B.placement);return V===v||V==="y"}return!0}).map(B=>[B.placement,B.overflows.filter(V=>V>0).reduce((V,D)=>V+D,0)]).sort((B,V)=>B[1]-V[1])[0])==null?void 0:P[0];U&&(M=U);break}case"initialPlacement":M=a;break}if(i!==M)return{reset:{placement:M}}}return{}}}};function G1e(e){const t=wl(...e.map(s=>s.left)),n=wl(...e.map(s=>s.top)),r=ca(...e.map(s=>s.right)),i=ca(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function _ze(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>lE(G1e(i)))}const wze=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=lm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=_ze(c),d=lE(G1e(c)),h=vW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(cm(n)==="y"){const N=f[0],k=f[f.length-1],O=Xf(n)==="top",P=N.top,$=k.bottom,L=O?N.left:k.left,M=O?N.right:k.right,U=M-L,B=$-P;return{top:P,bottom:$,left:L,right:M,width:U,height:B,x:L,y:P}}const g=Xf(n)==="left",y=ca(...f.map(N=>N.right)),v=wl(...f.map(N=>N.left)),b=f.filter(N=>g?N.left===v:N.right===y),w=b[0].top,E=b[b.length-1].bottom,S=v,T=y,C=T-S,A=E-w;return{top:w,bottom:E,left:S,right:T,width:C,height:A,x:S,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Eze(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Xf(n),a=Ix(n),u=cm(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=lm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const xze=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Eze(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Sze=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=lm(e,t),l={x:n,y:r},c=await bW(t,u),f=cm(Xf(i)),d=mW(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=vU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=vU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Tze=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=lm(e,t),c={x:n,y:r},f=cm(i),d=mW(f);let h=c[d],p=c[f];const m=lm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Xf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),S=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>S&&(p=S)}return{[d]:h,[f]:p}}}},Cze=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=lm(e,t),u=await bW(t,a),l=Xf(n),c=Ix(n),f=cm(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=wl(h-u[p],g),b=wl(d-u[m],y),w=!t.middlewareData.shift;let E=v,S=b;if(f?S=c||w?wl(b,y):y:E=c||w?wl(v,g):g,w&&!c){const C=ca(u.left,0),A=ca(u.right,0),N=ca(u.top,0),k=ca(u.bottom,0);f?S=d-2*(C!==0||A!==0?C+A:ca(u.left,u.right)):E=h-2*(N!==0||k!==0?N+k:ca(u.top,u.bottom))}await o({...t,availableWidth:S,availableHeight:E});const T=await i.getDimensions(s.floating);return d!==T.width||h!==T.height?{reset:{rects:!0}}:{}}}};function Y1e(e){const t=Pc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ol(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=CO(n)!==s||CO(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function _W(e){return _i(e)?e:e.contextElement}function Ew(e){const t=_W(e);if(!Ol(t))return k0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Y1e(t);let o=(s?CO(n.width):n.width)/r,a=(s?CO(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const Aze=k0(0);function K1e(e){const t=Fu(e);return!pW()||!t.visualViewport?Aze:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ize(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Fu(e)?!1:t}function x1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=_W(e);let o=k0(1);t&&(r?_i(r)&&(o=Ew(r)):o=Ew(e));const a=Ize(s,n,r)?K1e(s):k0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Fu(s),h=r&&_i(r)?Fu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Ew(m),y=m.getBoundingClientRect(),v=Pc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Fu(m),m=p.frameElement}}return lE({width:c,height:f,x:u,y:l})}function kze(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Dm(r),a=t?ZM(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=k0(1);const c=k0(0),f=Ol(r);if((f||!f&&!s)&&((Ax(r)!=="body"||OI(o))&&(u=eL(r)),Ol(r))){const d=x1(r);l=Ew(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function Rze(e){return Array.from(e.getClientRects())}function X1e(e){return x1(Dm(e)).left+eL(e).scrollLeft}function Nze(e){const t=Dm(e),n=eL(e),r=e.ownerDocument.body,i=ca(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=ca(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+X1e(e);const a=-n.scrollTop;return Pc(r).direction==="rtl"&&(o+=ca(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Pze(e,t){const n=Fu(e),r=Dm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=pW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function Dze(e,t){const n=x1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ol(e)?Ew(e):k0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function $se(e,t,n){let r;if(t==="viewport")r=Pze(e,n);else if(t==="document")r=Nze(Dm(e));else if(_i(t))r=Dze(t,n);else{const i=K1e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return lE(r)}function Q1e(e,t){const n=um(e);return n===t||!_i(n)||I0(n)?!1:Pc(n).position==="fixed"||Q1e(n,t)}function Oze(e,t){const n=t.get(e);if(n)return n;let r=qp(e,[],!1).filter(a=>_i(a)&&Ax(a)!=="body"),i=null;const s=Pc(e).position==="fixed";let o=s?um(e):e;for(;_i(o)&&!I0(o);){const a=Pc(o),u=hW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||OI(o)&&!u&&Q1e(e,o))?r=r.filter(c=>c!==o):i=a,o=um(o)}return t.set(e,r),r}function $ze(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?ZM(t)?[]:Oze(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=$se(t,c,i);return l.top=ca(f.top,l.top),l.right=wl(f.right,l.right),l.bottom=wl(f.bottom,l.bottom),l.left=ca(f.left,l.left),l},$se(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function Mze(e){const{width:t,height:n}=Y1e(e);return{width:t,height:n}}function Lze(e,t,n){const r=Ol(t),i=Dm(t),s=n==="fixed",o=x1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=k0(0);if(r||!r&&!s)if((Ax(t)!=="body"||OI(i))&&(a=eL(t)),r){const f=x1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=X1e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function d8(e){return Pc(e).position==="static"}function Mse(e,t){return!Ol(e)||Pc(e).position==="fixed"?null:t?t(e):e.offsetParent}function J1e(e,t){const n=Fu(e);if(ZM(e))return n;if(!Ol(e)){let i=um(e);for(;i&&!I0(i);){if(_i(i)&&!d8(i))return i;i=um(i)}return n}let r=Mse(e,t);for(;r&&eze(r)&&d8(r);)r=Mse(r,t);return r&&I0(r)&&d8(r)&&!hW(r)?n:r||tze(e)||n}const Fze=async function(e){const t=this.getOffsetParent||J1e,n=this.getDimensions,r=await n(e.floating);return{reference:Lze(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function jze(e){return Pc(e).direction==="rtl"}const Bze={convertOffsetParentRelativeRectToViewportRelativeRect:kze,getDocumentElement:Dm,getClippingRect:$ze,getOffsetParent:J1e,getElementRects:Fze,getClientRects:Rze,getDimensions:Mze,getScale:Ew,isElement:_i,isRTL:jze};function Uze(e,t){let n=null,r;const i=Dm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=rN(c),p=rN(i.clientWidth-(l+f)),m=rN(i.clientHeight-(c+d)),g=rN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:ca(0,wl(1,u))||1};let b=!0;function w(E){const S=E[0].intersectionRatio;if(S!==u){if(!b)return o();S?o(!1,S):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function zze(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=_W(e),c=i||s?[...l?qp(l):[],...qp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?Uze(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?x1(e):null;u&&g();function g(){const y=x1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const Vze=xze,Hze=Sze,qze=bze,Wze=Cze,Lse=vze,Gze=wze,Yze=Tze,Kze=(e,t,n)=>{const r=new Map,i={platform:Bze,...n},s={...i.platform,_c:r};return yze(e,t,{...i,platform:s})};var HP=typeof document<"u"?I.useLayoutEffect:I.useEffect;function IO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!IO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!IO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Z1e(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Fse(e,t){const n=Z1e(e);return Math.round(t*n)/n}function jse(e){const t=I.useRef(e);return HP(()=>{t.current=e}),t}function Xze(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);IO(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(U=>{U!==S.current&&(S.current=U,m(U))},[]),b=I.useCallback(U=>{U!==T.current&&(T.current=U,y(U))},[]),w=s||p,E=o||g,S=I.useRef(null),T=I.useRef(null),C=I.useRef(c),A=u!=null,N=jse(u),k=jse(i),O=I.useCallback(()=>{if(!S.current||!T.current)return;const U={placement:t,strategy:n,middleware:d};k.current&&(U.platform=k.current),Kze(S.current,T.current,U).then(B=>{const V={...B,isPositioned:!0};P.current&&!IO(C.current,V)&&(C.current=V,NI.flushSync(()=>{f(V)}))})},[d,t,n,k]);HP(()=>{l===!1&&C.current.isPositioned&&(C.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[l]);const P=I.useRef(!1);HP(()=>(P.current=!0,()=>{P.current=!1}),[]),HP(()=>{if(w&&(S.current=w),E&&(T.current=E),w&&E){if(N.current)return N.current(w,E,O);O()}},[w,E,O,N,A]);const $=I.useMemo(()=>({reference:S,floating:T,setReference:v,setFloating:b}),[v,b]),L=I.useMemo(()=>({reference:w,floating:E}),[w,E]),M=I.useMemo(()=>{const U={position:n,left:0,top:0};if(!L.floating)return U;const B=Fse(L.floating,c.x),V=Fse(L.floating,c.y);return a?{...U,transform:"translate("+B+"px, "+V+"px)",...Z1e(L.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:V}},[n,a,L.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:O,refs:$,elements:L,floatingStyles:M}),[c,O,$,L,M])}const Qze=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Lse({element:r.current,padding:i}).fn(n):{}:r?Lse({element:r,padding:i}).fn(n):{}}}},ebe=(e,t)=>({...Vze(e),options:[e,t]}),wW=(e,t)=>({...Hze(e),options:[e,t]}),Bse=(e,t)=>({...Yze(e),options:[e,t]}),_U=(e,t)=>({...qze(e),options:[e,t]}),Jze=(e,t)=>({...Wze(e),options:[e,t]}),wU=(e,t)=>({...Gze(e),options:[e,t]}),tbe=(e,t)=>({...Qze(e),options:[e,t]}),nbe={...KD},Zze=nbe.useInsertionEffect,eVe=Zze||(e=>e());function Rg(e){const t=I.useRef(()=>{});return eVe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var oh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let Use=!1,tVe=0;const zse=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+tVe++;function nVe(){const[e,t]=I.useState(()=>Use?zse():void 0);return oh(()=>{e==null&&t(zse())},[]),I.useEffect(()=>{Use=!0},[]),e}const rVe=nbe.useId,rbe=rVe||nVe;function iVe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const sVe=I.createContext(null),oVe=I.createContext(null),EW=()=>{var e;return((e=I.useContext(sVe))==null?void 0:e.id)||null},xW=()=>I.useContext(oVe);function SW(e){return"data-floating-ui-"+e}function h8(e){const t=I.useRef(e);return oh(()=>{t.current=e}),t}const Vse=SW("safe-polygon");function qP(e,t,n){return n&&!yU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function aVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:o}=e,{enabled:a=!0,delay:u=0,handleClose:l=null,mouseOnly:c=!1,restMs:f=0,move:d=!0}=t,h=xW(),p=EW(),m=h8(l),g=h8(u),y=h8(n),v=I.useRef(),b=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),S=I.useRef(!0),T=I.useRef(!1),C=I.useRef(()=>{}),A=I.useCallback(()=>{var L;const M=(L=i.current.openEvent)==null?void 0:L.type;return(M==null?void 0:M.includes("mouse"))&&M!=="mousedown"},[i]);I.useEffect(()=>{if(!a)return;function L(M){let{open:U}=M;U||(clearTimeout(b.current),clearTimeout(E.current),S.current=!0)}return s.on("openchange",L),()=>{s.off("openchange",L)}},[a,s]),I.useEffect(()=>{if(!a||!m.current||!n)return;function L(U){A()&&r(!1,U,"hover")}const M=Uv(o.floating).documentElement;return M.addEventListener("mouseleave",L),()=>{M.removeEventListener("mouseleave",L)}},[o.floating,n,r,a,m,A]);const N=I.useCallback(function(L,M,U){M===void 0&&(M=!0),U===void 0&&(U="hover");const B=qP(g.current,"close",v.current);B&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,L,U),B)):M&&(clearTimeout(b.current),r(!1,L,U))},[g,r]),k=Rg(()=>{C.current(),w.current=void 0}),O=Rg(()=>{if(T.current){const L=Uv(o.floating).body;L.style.pointerEvents="",L.removeAttribute(Vse),T.current=!1}});I.useEffect(()=>{if(!a)return;function L(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function M(D){if(clearTimeout(b.current),S.current=!1,c&&!yU(v.current)||f>0&&!qP(g.current,"open"))return;const z=qP(g.current,"open",v.current);z?b.current=window.setTimeout(()=>{y.current||r(!0,D,"hover")},z):r(!0,D,"hover")}function U(D){if(L())return;C.current();const z=Uv(o.floating);if(clearTimeout(E.current),m.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=m.current({...i.current.floatingContext,tree:h,x:D.clientX,y:D.clientY,onClose(){O(),k(),N(D,!0,"safe-polygon")}});const j=w.current;z.addEventListener("mousemove",j),C.current=()=>{z.removeEventListener("mousemove",j)};return}(v.current==="touch"?!tA(o.floating,D.relatedTarget):!0)&&N(D)}function B(D){L()||i.current.floatingContext&&(m.current==null||m.current({...i.current.floatingContext,tree:h,x:D.clientX,y:D.clientY,onClose(){O(),k(),N(D)}})(D))}if(_i(o.domReference)){var V;const D=o.domReference;return n&&D.addEventListener("mouseleave",B),(V=o.floating)==null||V.addEventListener("mouseleave",B),d&&D.addEventListener("mousemove",M,{once:!0}),D.addEventListener("mouseenter",M),D.addEventListener("mouseleave",U),()=>{var z;n&&D.removeEventListener("mouseleave",B),(z=o.floating)==null||z.removeEventListener("mouseleave",B),d&&D.removeEventListener("mousemove",M),D.removeEventListener("mouseenter",M),D.removeEventListener("mouseleave",U)}}},[o,a,e,c,f,d,N,k,O,r,n,y,h,g,m,i]),oh(()=>{var L;if(a&&n&&(L=m.current)!=null&&L.__options.blockPointerEvents&&A()){const U=Uv(o.floating).body;U.setAttribute(Vse,""),U.style.pointerEvents="none",T.current=!0;const B=o.floating;if(_i(o.domReference)&&B){var M;const V=o.domReference,D=h==null||(M=h.nodesRef.current.find(z=>z.id===p))==null||(M=M.context)==null?void 0:M.elements.floating;return D&&(D.style.pointerEvents=""),V.style.pointerEvents="auto",B.style.pointerEvents="auto",()=>{V.style.pointerEvents="",B.style.pointerEvents=""}}}},[a,n,p,o,h,m,A]),oh(()=>{n||(v.current=void 0,k(),O())},[n,k,O]),I.useEffect(()=>()=>{k(),clearTimeout(b.current),clearTimeout(E.current),O()},[a,o.domReference,k,O]);const P=I.useMemo(()=>{function L(M){v.current=M.pointerType}return{onPointerDown:L,onPointerEnter:L,onMouseMove(M){const{nativeEvent:U}=M;function B(){!S.current&&!y.current&&r(!0,U,"hover")}c&&!yU(v.current)||n||f===0||(clearTimeout(E.current),v.current==="touch"?B():E.current=window.setTimeout(B,f))}}},[c,r,n,y,f]),$=I.useMemo(()=>({onMouseEnter(){clearTimeout(b.current)},onMouseLeave(L){N(L.nativeEvent,!1)}}),[N]);return I.useMemo(()=>a?{reference:P,floating:$}:{},[a,P,$])}const EU=()=>{},ibe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:EU,setState:EU,isInstantPhase:!1}),sbe=()=>I.useContext(ibe);function uVe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return oh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(ibe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function lVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=sbe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return oh(()=>{u&&(f({delay:{open:1,close:qP(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),oh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),oh(()=>{l===EU||!n||l(o)},[n,l,o]),a}function p8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const cVe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},fVe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Hse=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function dVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:s}=e,{enabled:o=!0,escapeKey:a=!0,outsidePress:u=!0,outsidePressEvent:l="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:d=!1,bubbles:h,capture:p}=t,m=xW(),g=Rg(typeof u=="function"?u:()=>!1),y=typeof u=="function"?g:u,v=I.useRef(!1),b=I.useRef(!1),{escapeKey:w,outsidePress:E}=Hse(h),{escapeKey:S,outsidePress:T}=Hse(p),C=Rg($=>{var L;if(!n||!o||!a||$.key!=="Escape")return;const M=(L=s.current.floatingContext)==null?void 0:L.nodeId,U=m?p8(m.nodesRef.current,M):[];if(!w&&($.stopPropagation(),U.length>0)){let B=!0;if(U.forEach(V=>{var D;if((D=V.context)!=null&&D.open&&!V.context.dataRef.current.__escapeKeyBubbles){B=!1;return}}),!B)return}r(!1,oze($)?$.nativeEvent:$,"escape-key")}),A=Rg($=>{var L;const M=()=>{var U;C($),(U=S_($))==null||U.removeEventListener("keydown",M)};(L=S_($))==null||L.addEventListener("keydown",M)}),N=Rg($=>{var L;const M=v.current;v.current=!1;const U=b.current;if(b.current=!1,l==="click"&&U||M||typeof y=="function"&&!y($))return;const B=S_($),V="["+SW("inert")+"]",D=Uv(i.floating).querySelectorAll(V);let z=_i(B)?B:null;for(;z&&!I0(z);){const G=um(z);if(I0(G)||!_i(G))break;z=G}if(D.length&&_i(B)&&!aze(B)&&!tA(B,i.floating)&&Array.from(D).every(G=>!tA(z,G)))return;if(Ol(B)&&P){const G=B.clientWidth>0&&B.scrollWidth>B.clientWidth,te=B.clientHeight>0&&B.scrollHeight>B.clientHeight;let ve=te&&$.offsetX>B.clientWidth;if(te&&Pc(B).direction==="rtl"&&(ve=$.offsetX<=B.offsetWidth-B.clientWidth),ve||G&&$.offsetY>B.clientHeight)return}const W=(L=s.current.floatingContext)==null?void 0:L.nodeId,j=m&&p8(m.nodesRef.current,W).some(G=>{var te;return f8($,(te=G.context)==null?void 0:te.elements.floating)});if(f8($,i.floating)||f8($,i.domReference)||j)return;const q=m?p8(m.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(te=>{var ve;if((ve=te.context)!=null&&ve.open&&!te.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),k=Rg($=>{var L;const M=()=>{var U;N($),(U=S_($))==null||U.removeEventListener(l,M)};(L=S_($))==null||L.addEventListener(l,M)});I.useEffect(()=>{if(!n||!o)return;s.current.__escapeKeyBubbles=w,s.current.__outsidePressBubbles=E;function $(U){r(!1,U,"ancestor-scroll")}const L=Uv(i.floating);a&&L.addEventListener("keydown",S?A:C,S),y&&L.addEventListener(l,T?k:N,T);let M=[];return d&&(_i(i.domReference)&&(M=qp(i.domReference)),_i(i.floating)&&(M=M.concat(qp(i.floating))),!_i(i.reference)&&i.reference&&i.reference.contextElement&&(M=M.concat(qp(i.reference.contextElement)))),M=M.filter(U=>{var B;return U!==((B=L.defaultView)==null?void 0:B.visualViewport)}),M.forEach(U=>{U.addEventListener("scroll",$,{passive:!0})}),()=>{a&&L.removeEventListener("keydown",S?A:C,S),y&&L.removeEventListener(l,T?k:N,T),M.forEach(U=>{U.removeEventListener("scroll",$)})}},[s,i,a,y,l,n,r,d,o,w,E,C,S,A,N,T,k]),I.useEffect(()=>{v.current=!1},[y,l]);const O=I.useMemo(()=>({onKeyDown:C,[cVe[f]]:$=>{c&&r(!1,$.nativeEvent,"reference-press")}}),[C,r,c,f]),P=I.useMemo(()=>({onKeyDown:C,onMouseDown(){b.current=!0},onMouseUp(){b.current=!0},[fVe[l]]:()=>{v.current=!0}}),[C,l]);return I.useMemo(()=>o?{reference:O,floating:P}:{},[o,O,P])}function hVe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=rbe(),s=I.useRef({}),[o]=I.useState(()=>iVe()),a=EW()!=null,[u,l]=I.useState(r.reference),c=Rg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function TW(e){e===void 0&&(e={});const{nodeId:t}=e,n=hVe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=xW();oh(()=>{c&&(f.current=c)},[c]);const h=Xze({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(b=>{const w=_i(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(b=>{(_i(b)||b===null)&&(f.current=b,o(b)),(_i(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!_i(b))&&h.refs.setReference(b)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return oh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function pVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:o}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);I.useEffect(()=>{if(!a)return;const h=Fu(o.domReference);function p(){!n&&Ol(o.domReference)&&o.domReference===Pse(Uv(o.domReference))&&(l.current=!0)}function m(){f.current=!0}return h.addEventListener("blur",p),h.addEventListener("keydown",m,!0),()=>{h.removeEventListener("blur",p),h.removeEventListener("keydown",m,!0)}},[o.domReference,n,a]),I.useEffect(()=>{if(!a)return;function h(p){let{reason:m}=p;(m==="reference-press"||m==="escape-key")&&(l.current=!0)}return i.on("openchange",h),()=>{i.off("openchange",h)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]);const d=I.useMemo(()=>({onPointerDown(h){nze(h.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(h){if(l.current)return;const p=S_(h.nativeEvent);if(u&&_i(p))try{if(rze()&&ize())throw Error();if(!p.matches(":focus-visible"))return}catch{if(!f.current&&!lze(p))return}r(!0,h.nativeEvent,"focus")},onBlur(h){l.current=!1;const p=h.relatedTarget,m=h.nativeEvent,g=_i(p)&&p.hasAttribute(SW("focus-guard"))&&p.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var y;const v=Pse(o.domReference?o.domReference.ownerDocument:document);!p&&v===o.domReference||tA((y=s.current.floatingContext)==null?void 0:y.refs.floating.current,v)||tA(o.domReference,v)||g||r(!1,m,"focus")})}}),[s,o.domReference,r,u]);return I.useMemo(()=>a?{reference:d}:{},[a,d])}const qse="active",Wse="selected";function m8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[qse]:o,[Wse]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[qse,Wse].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function mVe(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),i=I.useCallback(a=>m8(a,e,"reference"),t),s=I.useCallback(a=>m8(a,e,"floating"),n),o=I.useCallback(a=>m8(a,e,"item"),r);return I.useMemo(()=>({getReferenceProps:i,getFloatingProps:s,getItemProps:o}),[i,s,o])}const gVe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function yVe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=gVe.get(o))!=null?n:o,u=rbe(),c=EW()!=null,f=I.useMemo(()=>a==="tooltip"||o==="label"?{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},[a,i,c,r,u,o]),d=I.useMemo(()=>{const p={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?p:{...p,...a==="menu"&&{"aria-labelledby":u}}},[a,i,u,o]),h=I.useCallback(p=>{let{active:m,selected:g}=p;const y={role:"option",...m&&{id:i+"-option"}};switch(o){case"select":return{...y,"aria-selected":m&&g};case"combobox":return{...y,...m&&{"aria-selected":!0}}}return{}},[i,o]);return I.useMemo(()=>s?{reference:f,floating:d,item:h}:{},[s,f,d,h])}function obe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Gse(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function Yse(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const vVe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function bVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:t,height:t,transform:"rotate(45deg)",position:"absolute",[vVe[u]]:r},f=-t/2;return u==="left"?{...c,...Gse(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Gse(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...Yse(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...Yse(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const CW=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Fh();return s?_.jsx("div",{...l,ref:c,style:{...u,...bVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});CW.displayName="@mantine/core/FloatingArrow";const[_Ve,abe]=qs("Popover component was not found in the tree");function tL({children:e,active:t=!0,refProp:n="ref"}){const r=fUe(t),i=Ji(r,e==null?void 0:e.ref);return Nm(e)?I.cloneElement(e,{[n]:i}):e}function ube(e){return _.jsx(dW,{tabIndex:-1,"data-autofocus":!0,...e})}tL.displayName="@mantine/core/FocusTrap";ube.displayName="@mantine/core/FocusTrapInitialFocus";tL.InitialFocus=ube;function wVe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const EVe={},lbe=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=we("Portal",EVe,e),[s,o]=I.useState(!1),a=I.useRef(null);return fb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:wVe(i),eW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:NI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});lbe.displayName="@mantine/core/Portal";function $I({withinPortal:e=!0,children:t,...n}){return e?_.jsx(lbe,{...n,children:t}):_.jsx(_.Fragment,{children:t})}$I.displayName="@mantine/core/OptionalPortal";const JS=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${xe(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),iN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${xe(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${xe(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${xe(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${xe(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${xe(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${xe(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${xe(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${xe(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...JS("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...JS("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...JS("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...JS("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...JS("top"),common:{transformOrigin:"top right"}}},Kse={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function xVe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in iN?{transitionProperty:iN[e].transitionProperty,...i,...iN[e].common,...iN[e][Kse[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Kse[t]]}}function SVe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a,enterDelay:u,exitDelay:l}){const c=Ss(),f=tW(),d=c.respectReducedMotion?f:!1,[h,p]=I.useState(d?0:e),[m,g]=I.useState(r?"entered":"exited"),y=I.useRef(-1),v=I.useRef(-1),b=I.useRef(-1),w=S=>{const T=S?i:s,C=S?o:a;window.clearTimeout(y.current);const A=d?0:S?e:t;p(A),A===0?(typeof T=="function"&&T(),typeof C=="function"&&C(),g(S?"entered":"exited")):b.current=requestAnimationFrame(()=>{uBe.flushSync(()=>{g(S?"pre-entering":"pre-exiting")}),b.current=requestAnimationFrame(()=>{typeof T=="function"&&T(),g(S?"entering":"exiting"),y.current=window.setTimeout(()=>{typeof C=="function"&&C(),g(S?"entered":"exited")},A)})})},E=S=>{if(window.clearTimeout(v.current),typeof(S?u:l)!="number"){w(S);return}v.current=window.setTimeout(()=>{w(S)},S?u:l)};return Rc(()=>{E(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(y.current),cancelAnimationFrame(b.current)},[]),{transitionDuration:h,transitionStatus:m,transitionTimingFunction:n||"ease"}}function Om({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d}){const{transitionDuration:h,transitionStatus:p,transitionTimingFunction:m}=SVe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c,enterDelay:f,exitDelay:d});return h===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:p==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(xVe({transition:t,duration:h,state:p,timingFunction:m}))})}Om.displayName="@mantine/core/Transition";var cbe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const TVe={},AW=Me((e,t)=>{var g,y,v,b;const n=we("PopoverDropdown",TVe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=abe(),h=d1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=Ji(t,d.floating);return d.disabled?null:_.jsx($I,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(Om,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(tL,{active:d.trapFocus,children:_.jsxs(be,{...p,...f,variant:u,ref:m,onKeyDownCapture:JBe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,"data-fixed":d.floatingStrategy==="fixed"||void 0,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:xe(d.width)},i]}),children:[o,_.jsx(CW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});AW.classes=cbe;AW.displayName="@mantine/core/PopoverDropdown";const CVe={refProp:"ref",popupType:"dialog"},fbe=Me((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=we("PopoverTarget",CVe,e);if(!Nm(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=abe(),u=Ji(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:Xi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});fbe.displayName="@mantine/core/PopoverTarget";function dbe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return zze(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),Rc(()=>{t.update()},r),Rc(()=>{s(o=>o+1)},[e])}function AVe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function IVe(e,t){const n=AVe(e.middlewares),r=[ebe(e.offset)];return n.shift&&r.push(wW(typeof n.shift=="boolean"?{limiter:Bse(),padding:5}:{limiter:Bse(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?_U():_U(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?wU():wU(n.inline)),r.push(tbe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(Jze({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function kVe(e){const[t,n]=ls({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=TW({strategy:e.strategy,placement:e.position,middleware:IVe(e,()=>s)});return dbe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),Rc(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),Rc(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const RVe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:qc("popover"),__staticSelector:"Popover",width:"max-content"},NVe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Mr(t),"--popover-shadow":Jq(n)}});function xn(e){var De,Ae,Ge,ht,Ct,Se;const t=we("Popover",RVe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:S,clickOutsideEvents:T,trapFocus:C,onClose:A,onOpen:N,onChange:k,zIndex:O,radius:P,shadow:$,id:L,defaultOpened:M,__staticSelector:U,withRoles:B,disabled:V,returnFocus:D,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,te=mt({name:U,props:t,classes:cbe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:NVe}),ve=I.useRef(null),[he,ce]=I.useState(null),[me,Le]=I.useState(null),{dir:fe}=Fh(),ct=su(L),ze=kVe({middlewares:c,width:l,position:obe(fe,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ve,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:k,onOpen:N,onClose:A,strategy:q});tUe(()=>b&&ze.onClose(),T,[he,me]);const Ke=I.useCallback(ue=>{ce(ue),ze.floating.refs.setReference(ue)},[ze.floating.refs.setReference]),it=I.useCallback(ue=>{Le(ue),ze.floating.refs.setFloating(ue)},[ze.floating.refs.setFloating]);return _.jsx(_Ve,{value:{returnFocus:D,disabled:V,controlled:ze.controlled,reference:Ke,floating:it,x:ze.floating.x,y:ze.floating.y,arrowX:(Ge=(Ae=(De=ze.floating)==null?void 0:De.middlewareData)==null?void 0:Ae.arrow)==null?void 0:Ge.x,arrowY:(Se=(Ct=(ht=ze.floating)==null?void 0:ht.middlewareData)==null?void 0:Ct.arrow)==null?void 0:Se.y,opened:ze.opened,arrowRef:ve,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:ze.floating.placement,trapFocus:C,withinPortal:w,portalProps:E,zIndex:O,radius:P,shadow:$,closeOnEscape:S,onClose:ze.onClose,onToggle:ze.onToggle,getTargetId:()=>`${ct}-target`,getDropdownId:()=>`${ct}-dropdown`,withRoles:B,targetProps:G,__staticSelector:U,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:te,floatingStrategy:q},children:n})}xn.Target=fbe;xn.Dropdown=AW;xn.displayName="@mantine/core/Popover";xn.extend=e=>e;var Nf={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const PVe=I.forwardRef(({className:e,...t},n)=>_.jsxs(be,{component:"span",className:Xi(Nf.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Nf.bar}),_.jsx("span",{className:Nf.bar}),_.jsx("span",{className:Nf.bar})]})),DVe=I.forwardRef(({className:e,...t},n)=>_.jsxs(be,{component:"span",className:Xi(Nf.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Nf.dot}),_.jsx("span",{className:Nf.dot}),_.jsx("span",{className:Nf.dot})]})),OVe=I.forwardRef(({className:e,...t},n)=>_.jsx(be,{component:"span",className:Xi(Nf.ovalLoader,e),...t,ref:n})),hbe={bars:PVe,oval:OVe,dots:DVe},$Ve={loaders:hbe,type:"oval"},MVe=(e,{size:t,color:n})=>({root:{"--loader-size":Ht(t,"loader-size"),"--loader-color":n?jr(n,e):void 0}}),ju=Me((e,t)=>{const n=we("Loader",$Ve,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=mt({name:"Loader",props:n,classes:Nf,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:MVe});return p?_.jsx(be,{...g("root"),ref:t,...m,children:p}):_.jsx(be,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});ju.defaultLoaders=hbe;ju.classes=Nf;ju.displayName="@mantine/core/Loader";var nL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Xse={orientation:"horizontal"},LVe=(e,{borderWidth:t})=>({group:{"--ai-border-width":xe(t)}}),IW=Me((e,t)=>{const n=we("ActionIconGroup",Xse,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=we("ActionIconGroup",Xse,e),p=mt({name:"ActionIconGroup",props:n,classes:nL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:LVe,rootSelector:"group"});return _.jsx(be,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});IW.classes=nL;IW.displayName="@mantine/core/ActionIconGroup";const FVe={},jVe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":Ht(t,"ai-size"),"--ai-radius":n===void 0?void 0:Mr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},jf=Ts((e,t)=>{const n=we("ActionIcon",FVe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...S}=n,T=mt({name:["ActionIcon",p],props:n,className:r,style:u,classes:nL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:jVe});return _.jsxs(ws,{...T("root",{active:!v&&!l&&!b}),...S,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(Om,{mounted:!!l,transition:"slide-down",duration:150,children:C=>_.jsx(be,{component:"span",...T("loader",{style:C}),"aria-hidden":!0,children:_.jsx(ju,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(be,{component:"span",mod:{loading:l},...T("icon"),children:y})]})});jf.classes=nL;jf.displayName="@mantine/core/ActionIcon";jf.Group=IW;const pbe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));pbe.displayName="@mantine/core/CloseIcon";var mbe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const BVe={variant:"subtle"},UVe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":Ht(t,"cb-size"),"--cb-radius":n===void 0?void 0:Mr(n),"--cb-icon-size":xe(r)}}),gy=Ts((e,t)=>{const n=we("CloseButton",BVe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=mt({name:"CloseButton",props:n,className:a,style:l,classes:mbe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:UVe});return _.jsxs(ws,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(pbe,{}),i]})});gy.classes=mbe;gy.displayName="@mantine/core/CloseButton";function zVe(e){return I.Children.toArray(e).filter(Boolean)}var gbe={root:"m_4081bf90"};const VVe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},HVe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":qu(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),mr=Me((e,t)=>{const n=we("Group",VVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=zVe(u),E=w.length,S=qu(l??"md"),C={childWidth:`calc(${100/E}% - (${S} - ${S} / ${E}))`},A=mt({name:"Group",props:n,stylesCtx:C,className:i,style:s,classes:gbe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:HVe});return _.jsx(be,{...A("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});mr.classes=gbe;mr.displayName="@mantine/core/Group";var ybe={root:"m_9814e45f"};const qVe={zIndex:qc("modal")},WVe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&oc(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${xe(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Mr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),nA=Ts((e,t)=>{const n=we("Overlay",qVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=mt({name:"Overlay",props:n,classes:ybe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WVe});return _.jsx(be,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});nA.classes=ybe;nA.displayName="@mantine/core/Overlay";const[GVe,$m]=qs("ModalBase component was not found in tree");function YVe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=tW()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function KVe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=su(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=YVe({opened:n,transitionDuration:d});return g1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),d1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const vbe=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:S,bodyMounted:T,shouldLockScroll:C,setTitleMounted:A,setBodyMounted:N}=KVe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a}),{key:k,...O}=v||{};return _.jsx($I,{...c,withinPortal:l,children:_.jsx(GVe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:S,bodyMounted:T,setTitleMounted:A,setBodyMounted:N,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(WM,{enabled:C&&f,...O,children:_.jsx(be,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||qc("modal")).toString(),"--mb-shadow":Jq(p),"--mb-padding":qu(m)},children:d})},k)})})});function XVe(){const e=$m();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var cE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const kW=I.forwardRef(({className:e,...t},n)=>{const r=XVe(),i=$m();return _.jsx(be,{ref:n,...t,id:r,className:Xi({[cE.body]:!i.unstyled},e)})});kW.displayName="@mantine/core/ModalBaseBody";const RW=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=$m();return _.jsx(gy,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Xi({[cE.close]:!i.unstyled},e),unstyled:i.unstyled})});RW.displayName="@mantine/core/ModalBaseCloseButton";const bbe=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=$m();return _.jsx(Om,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Xi({[cE.inner]:!a.unstyled},n.className),children:_.jsx(tL,{active:a.opened&&a.trapFocus,children:_.jsx(uE,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Xi({[cE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),NW=I.forwardRef(({className:e,...t},n)=>{const r=$m();return _.jsx(be,{component:"header",ref:n,className:Xi({[cE.header]:!r.unstyled},e),...t})});NW.displayName="@mantine/core/ModalBaseHeader";const QVe={duration:200,timingFunction:"ease",transition:"fade"};function JVe(e){const t=$m();return{...QVe,...t.transitionProps,...e}}const PW=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=$m(),o=JVe(t);return _.jsx(Om,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(nA,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});PW.displayName="@mantine/core/ModalBaseOverlay";function ZVe(){const e=$m();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const DW=I.forwardRef(({className:e,...t},n)=>{const r=ZVe(),i=$m();return _.jsx(be,{component:"h2",ref:n,className:Xi({[cE.title]:!i.unstyled},e),...t,id:r})});DW.displayName="@mantine/core/ModalBaseTitle";function _be({children:e}){return _.jsx(_.Fragment,{children:e})}const[eHe,kx]=cb({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Gc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Qse={},tHe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${co(t)} - ${xe(2)})`}}),rL=Me((e,t)=>{const n=we("InputDescription",Qse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=we("InputDescription",Qse,n),p=kx(),m=mt({name:["InputWrapper",c],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:tHe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(be,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});rL.classes=Gc;rL.displayName="@mantine/core/InputDescription";const nHe={},rHe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${co(t)} - ${xe(2)})`}}),iL=Me((e,t)=>{const n=we("InputError",nHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=mt({name:["InputWrapper",c],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:rHe}),m=kx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(be,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});iL.classes=Gc;iL.displayName="@mantine/core/InputError";const Jse={labelElement:"label"},iHe=(e,{size:t})=>({label:{"--input-label-size":co(t),"--input-asterisk-color":void 0}}),sL=Me((e,t)=>{const n=we("InputLabel",Jse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=we("InputLabel",Jse,n),b=mt({name:["InputWrapper",m],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:iHe}),w=kx(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(be,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:S=>{h==null||h(S),!S.defaultPrevented&&S.detail>1&&S.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});sL.classes=Gc;sL.displayName="@mantine/core/InputLabel";const Zse={},OW=Me((e,t)=>{const n=we("InputPlaceholder",Zse,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=we("InputPlaceholder",Zse,n),p=mt({name:["InputPlaceholder",l],props:n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(be,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});OW.classes=Gc;OW.displayName="@mantine/core/InputPlaceholder";function sHe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const oHe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},aHe=(e,{size:t})=>({label:{"--input-label-size":co(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${co(t)} - ${xe(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${co(t)} - ${xe(2)})`}}),$W=Me((e,t)=>{const n=we("InputWrapper",oHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:S,id:T,required:C,__stylesApiProps:A,mod:N,...k}=n,O=mt({name:["InputWrapper",f],props:A||n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aHe}),P={size:l,variant:c,__staticSelector:f},$=su(T),L=typeof S=="boolean"?S:C,M=(b==null?void 0:b.id)||`${$}-error`,U=(v==null?void 0:v.id)||`${$}-description`,B=$,V=!!m&&typeof m!="boolean",D=!!g,z=`${V?M:""} ${D?U:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,q=p&&_.jsx(sL,{labelElement:w,id:j,htmlFor:B,required:L,...P,...y,children:p},"label"),G=D&&_.jsx(rL,{...v,...P,size:(v==null?void 0:v.size)||P.size,id:(v==null?void 0:v.id)||U,children:g},"description"),te=_.jsx(I.Fragment,{children:d(E)},"input"),ve=V&&I.createElement(iL,{...b,...P,size:(b==null?void 0:b.size)||P.size,key:"error",id:(b==null?void 0:b.id)||M},m),he=h.map(ce=>{switch(ce){case"label":return q;case"input":return te;case"description":return G;case"error":return ve;default:return null}});return _.jsx(eHe,{value:{getStyles:O,describedBy:W,inputId:B,labelId:j,...sHe(h,{hasDescription:D,hasError:V})},children:_.jsx(be,{ref:t,variant:c,size:l,mod:[{error:!!m},N],...O("root"),...k,children:he})})});$W.classes=Gc;$W.displayName="@mantine/core/InputWrapper";const uHe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},lHe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":Ht(t.size,"input-height"),"--input-fz":co(t.size),"--input-radius":t.radius===void 0?void 0:Mr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?xe(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?xe(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?Ht(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),ri=Ts((e,t)=>{const n=we("Input",uHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:S,variant:T,vars:C,pointer:A,multiline:N,radius:k,id:O,withAria:P,withErrorStyles:$,mod:L,inputSize:M,...U}=n,{styleProps:B,rest:V}=db(U),D=kx(),z={offsetBottom:D==null?void 0:D.offsetBottom,offsetTop:D==null?void 0:D.offsetTop},W=mt({name:["Input",l],props:c||n,classes:Gc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:C,varsResolver:lHe}),j=P?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":D==null?void 0:D.describedBy,id:(D==null?void 0:D.inputId)||O}:{};return _.jsxs(be,{...W("wrapper"),...B,...d,mod:[{error:!!h&&$,pointer:A,disabled:p,multiline:N,"data-with-right-section":!!v,"data-with-left-section":!!m},L],variant:T,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(be,{component:"input",...V,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:T,__size:M,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});ri.classes=Gc;ri.Wrapper=$W;ri.Label=sL;ri.Error=iL;ri.Description=rL;ri.Placeholder=OW;ri.displayName="@mantine/core/Input";function wbe(e,t,n){const r=we(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:C,vars:A,mod:N,...k}=r,{styleProps:O,rest:P}=db(k),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:S,withAsterisk:T,variant:C,id:v,mod:N,...y};return{...P,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:C,id:v}}}const cHe={__staticSelector:"InputBase",withAria:!0},Yc=Ts((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=wbe("InputBase",cHe,e);return _.jsx(ri.Wrapper,{...r,children:_.jsx(ri,{...n,...i,ref:t})})});Yc.classes={...ri.classes,...ri.Wrapper.classes};Yc.displayName="@mantine/core/InputBase";const fHe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Ebe={root:"m_8bffd616"};const dHe={},fn=Ts((e,t)=>{const n=we("Flex",dHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=mt({name:"Flex",classes:Ebe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=Ss(),b=QM(),w=C1e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:fHe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(DI,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(be,{ref:t,...y("root",{className:b,style:Tx(w.inlineStyles)}),...g})]})});fn.classes=Ebe;fn.displayName="@mantine/core/Flex";function hHe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function pHe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{hHe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),mUe(()=>{b1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),yUe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var xbe={root:"m_96b553a6"};const mHe={},gHe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),MW=Me((e,t)=>{const n=we("FloatingIndicator",mHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=mt({name:"FloatingIndicator",classes:xbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gHe}),g=I.useRef(null),{initialized:y,hidden:v}=pHe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=Ji(t,g);return!l||!c?null:_.jsx(be,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});MW.displayName="@mantine/core/FloatingIndicator";MW.classes=xbe;const[yHe,LW]=qs("Accordion component was not found in the tree");function fE({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:xe(t),height:xe(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}fE.displayName="@mantine/core/AccordionChevron";const[vHe,Sbe]=qs("Accordion.Item component was not found in the tree");var MI={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const bHe={},FW=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=we("AccordionControl",bHe,e),{value:m}=Sbe(),g=LW(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(ws,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:Qq({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(be,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(be,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});FW.displayName="@mantine/core/AccordionControl";FW.classes=MI;const _He={},jW=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=we("AccordionItem",_He,e),c=LW();return _.jsx(vHe,{value:{value:a},children:_.jsx(be,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});jW.displayName="@mantine/core/AccordionItem";jW.classes=MI;const wHe={},BW=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=we("AccordionPanel",wHe,e),{value:l}=Sbe(),c=LW();return _.jsx(uW,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});BW.displayName="@mantine/core/AccordionPanel";BW.classes=MI;const EHe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(fE,{})},xHe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:xe(n),"--accordion-radius":r===void 0?void 0:Mr(r)}});function _u(e){const t=we("Accordion",EHe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:S,...T}=t,C=su(h),[A,N]=ls({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),k=$=>Array.isArray(A)?A.includes($):$===A,O=$=>{const L=Array.isArray(A)?A.includes($)?A.filter(M=>M!==$):[...A,$]:$===A?null:$;N(L)},P=mt({name:"Accordion",classes:MI,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:xHe});return _.jsx(yHe,{value:{isItemActive:k,onChange:O,getControlId:wO(`${C}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:wO(`${C}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:P,variant:E,unstyled:o},children:_.jsx(be,{...P("root"),id:C,...T,variant:E,"data-accordion":!0,children:u})})}const SHe=e=>e;_u.extend=SHe;_u.classes=MI;_u.displayName="@mantine/core/Accordion";_u.Item=jW;_u.Panel=BW;_u.Control=FW;_u.Chevron=fE;var Tbe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const THe={},CHe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Mr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},LI=Me((e,t)=>{const n=we("Alert",THe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=mt({name:"Alert",classes:Tbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CHe}),S=su(h),T=f&&`${S}-title`||void 0,C=`${S}-body`;return _.jsx(be,{id:S,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":C,"aria-labelledby":T,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:T,...E("label"),children:f})}),d&&_.jsx("div",{id:C,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(gy,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});LI.classes=Tbe;LI.displayName="@mantine/core/Alert";var Cbe={root:"m_b6d8b162"};function AHe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const IHe={inherit:!1},kHe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":co(i),"--text-lh":f1e(i),"--text-gradient":t==="gradient"?hU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?jr(s,e):void 0}}),et=Ts((e,t)=>{const n=we("Text",IHe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=mt({name:["Text",l],props:n,classes:Cbe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:kHe});return _.jsx(be,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":AHe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});et.classes=Cbe;et.displayName="@mantine/core/Text";var Abe={root:"m_849cf0da"};const RHe={underline:"hover"},Rx=Ts((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=we("Anchor",RHe,e);return _.jsx(et,{component:"a",ref:t,className:Xi({[Abe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Rx.classes=Abe;Rx.displayName="@mantine/core/Anchor";const[NHe,Nx]=qs("AppShell was not found in tree");var yy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const PHe={},UW=Me((e,t)=>{const n=we("AppShellAside",PHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Nx();return h.disabled?null:_.jsx(be,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});UW.classes=yy;UW.displayName="@mantine/core/AppShellAside";const DHe={},zW=Me((e,t)=>{var p;const n=we("AppShellFooter",DHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Nx();return h.disabled?null:_.jsx(be,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Xi({[WM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});zW.classes=yy;zW.displayName="@mantine/core/AppShellFooter";const OHe={},VW=Me((e,t)=>{var p;const n=we("AppShellHeader",OHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Nx();return h.disabled?null:_.jsx(be,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Xi({[WM.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});VW.classes=yy;VW.displayName="@mantine/core/AppShellHeader";const $He={},HW=Me((e,t)=>{const n=we("AppShellMain",$He,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Nx();return _.jsx(be,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});HW.classes=yy;HW.displayName="@mantine/core/AppShellMain";function FI(e){return typeof e=="object"?e.base:e}function jI(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function BI(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function MHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),jI(s)){const f=xe(FI(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(BI(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=xe(s.base),e["--app-shell-aside-offset"]=xe(s.base)),Ni(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=xe(s[f]),t[f]["--app-shell-aside-offset"]=xe(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Zq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function LHe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(jI(r)){const o=xe(FI(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}BI(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=xe(r.base),s&&(e["--app-shell-footer-offset"]=xe(r.base))),Ni(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=xe(r[o]),s&&(t[o]["--app-shell-footer-offset"]=xe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function FHe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(jI(r)){const o=xe(FI(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}BI(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=xe(r.base),s&&(e["--app-shell-header-offset"]=xe(r.base))),Ni(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=xe(r[o]),s&&(t[o]["--app-shell-header-offset"]=xe(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function jHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),jI(s)){const f=xe(FI(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(BI(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=xe(s.base),e["--app-shell-navbar-offset"]=xe(s.base)),Ni(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=xe(s[f]),t[f]["--app-shell-navbar-offset"]=xe(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=Zq(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function g8(e){return Number(e)===0?"0px":qu(e)}function BHe({padding:e,baseStyles:t,minMediaStyles:n}){jI(e)&&(t["--app-shell-padding"]=g8(FI(e))),BI(e)&&(e.base&&(t["--app-shell-padding"]=g8(e.base)),Ni(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=g8(e[r]))}))}function UHe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};jHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),MHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),FHe({baseStyles:u,minMediaStyles:o,header:t}),LHe({baseStyles:u,minMediaStyles:o,footer:n}),BHe({baseStyles:u,minMediaStyles:o,padding:i});const l=xO(Ni(o),s).map(d=>({query:`(min-width: ${_O(d.px)})`,styles:o[d.value]})),c=xO(Ni(a),s).map(d=>({query:`(max-width: ${_O(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function zHe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=Ss(),o=py(),{media:a,baseStyles:u}=UHe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(DI,{media:a,styles:u,selector:o.cssVariablesSelector})}const VHe={},qW=Me((e,t)=>{const n=we("AppShellNavbar",VHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Nx();return h.disabled?null:_.jsx(be,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});qW.classes=yy;qW.displayName="@mantine/core/AppShellNavbar";const HHe={},WW=Ts((e,t)=>{const n=we("AppShellSection",HHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Nx();return _.jsx(be,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});WW.classes=yy;WW.displayName="@mantine/core/AppShellSection";function qHe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return g1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),fb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const WHe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:qc("app")},GHe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),pr=Me((e,t)=>{const n=we("AppShell",WHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...S}=n,T=mt({name:"AppShell",classes:yy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:GHe}),C=qHe({disabled:y,transitionDuration:d});return _.jsxs(NHe,{value:{getStyles:T,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(zHe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(be,{ref:t,...T("root"),mod:[{resizing:C,layout:g,disabled:y},E],...S})]})});pr.classes=yy;pr.displayName="@mantine/core/AppShell";pr.Navbar=qW;pr.Header=VW;pr.Main=HW;pr.Aside=UW;pr.Footer=zW;pr.Section=WW;function Ibe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Ibe(t))}:e}function kbe(e){return e?e.map(t=>Ibe(t)):[]}function GW(e){return e.reduce((t,n)=>"group"in n?{...t,...GW(n.items)}:(t[n.value]=n,t),{})}var Wu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const YHe={error:null},KHe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":Ht(t,"combobox-chevron-size")}}),YW=Me((e,t)=>{const n=we("ComboboxChevron",YHe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=mt({name:"ComboboxChevron",classes:Wu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:KHe,rootSelector:"chevron"});return _.jsx(be,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});YW.classes=Wu;YW.displayName="@mantine/core/ComboboxChevron";const[XHe,Kc]=qs("Combobox component was not found in tree"),Rbe=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(gy,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Rbe.displayName="@mantine/core/ComboboxClearButton";const QHe={},KW=Me((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=we("ComboboxDropdown",QHe,e),u=Kc();return _.jsx(xn.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});KW.classes=Wu;KW.displayName="@mantine/core/ComboboxDropdown";const JHe={refProp:"ref"},Nbe=Me((e,t)=>{const{children:n,refProp:r}=we("ComboboxDropdownTarget",JHe,e);if(Kc(),!Nm(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(xn.Target,{ref:t,refProp:r,children:n})});Nbe.displayName="@mantine/core/ComboboxDropdownTarget";const ZHe={},XW=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("ComboboxEmpty",ZHe,e),u=Kc();return _.jsx(be,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});XW.classes=Wu;XW.displayName="@mantine/core/ComboboxEmpty";function QW({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Kc(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const eqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Pbe=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=we("ComboboxEventsTarget",eqe,e);if(!Nm(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Kc(),f=QW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:Ji(t,c.store.targetRef,n==null?void 0:n.ref)})});Pbe.displayName="@mantine/core/ComboboxEventsTarget";const tqe={},JW=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("ComboboxFooter",tqe,e),u=Kc();return _.jsx(be,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});JW.classes=Wu;JW.displayName="@mantine/core/ComboboxFooter";const nqe={},ZW=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=we("ComboboxGroup",nqe,e),c=Kc();return _.jsxs(be,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});ZW.classes=Wu;ZW.displayName="@mantine/core/ComboboxGroup";const rqe={},eG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("ComboboxHeader",rqe,e),u=Kc();return _.jsx(be,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a,onMouseDown:l=>{l.preventDefault()}})});eG.classes=Wu;eG.displayName="@mantine/core/ComboboxHeader";function Dbe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Dbe.displayName="@mantine/core/ComboboxHiddenInput";const iqe={},tG=Me((e,t)=>{const n=we("ComboboxOption",iqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Kc(),v=I.useId(),b=l||v;return _.jsx(be,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});tG.classes=Wu;tG.displayName="@mantine/core/ComboboxOption";const sqe={},nG=Me((e,t)=>{const n=we("ComboboxOptions",sqe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Kc(),d=su(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(be,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});nG.classes=Wu;nG.displayName="@mantine/core/ComboboxOptions";const oqe={withAriaAttributes:!0,withKeyboardNavigation:!0},rG=Me((e,t)=>{const n=we("ComboboxSearch",oqe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Kc(),h=d.getStyles("search"),p=QW({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(ri,{ref:Ji(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});rG.classes=Wu;rG.displayName="@mantine/core/ComboboxSearch";const aqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Obe=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=we("ComboboxTarget",aqe,e);if(!Nm(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Kc(),f=QW({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return _.jsx(xn.Target,{ref:Ji(t,c.store.targetRef),children:d})});Obe.displayName="@mantine/core/ComboboxTarget";function uqe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function lqe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function cqe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function oL({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=ls({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((M="unknown")=>{a||(u(!0),i==null||i(M))},[u,i,a]),y=I.useCallback((M="unknown")=>{a&&(u(!1),r==null||r(M))},[u,r,a]),v=I.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),b=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),w=I.useCallback(M=>{const U=document.getElementById(l.current),B=U==null?void 0:U.querySelectorAll("[data-combobox-option]");if(!B)return null;const V=M>=B.length?0:M<0?B.length-1:M;return c.current=V,B!=null&&B[V]&&!B[V].hasAttribute("data-combobox-disabled")?(b(),B[V].setAttribute("data-combobox-selected","true"),B[V].setAttribute("aria-selected","true"),B[V].scrollIntoView({block:"nearest",behavior:o}),B[V].id):null},[o,b]),E=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-active]`);if(M){const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=Array.from(U).findIndex(V=>V===M);return w(B)}return w(0)},[w]),S=I.useCallback(()=>w(lqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),T=I.useCallback(()=>w(uqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),C=I.useCallback(()=>w(cqe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),A=I.useCallback((M="selected",U)=>{m.current=window.setTimeout(()=>{var D;const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),V=Array.from(B).findIndex(z=>z.hasAttribute(`data-combobox-${M}`));c.current=V,U!=null&&U.scrollIntoView&&((D=B[V])==null||D.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),N=I.useCallback(()=>{c.current=-1,b()},[b]),k=I.useCallback(()=>{const M=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=M==null?void 0:M[c.current];U==null||U.click()},[]),O=I.useCallback(M=>{l.current=M},[]),P=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),L=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:L,selectOption:w,selectFirstOption:C,selectActiveOption:E,selectNextOption:S,selectPreviousOption:T,resetSelectedOption:N,updateSelectedOptionIndex:A,listId:l.current,setListId:O,clickSelectedOption:k,searchRef:f,focusSearchInput:P,targetRef:d,focusTarget:$}}const fqe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},dqe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":co(t),"--combobox-option-padding":Ht(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:xe(n),"--combobox-option-fz":co(t),"--combobox-option-padding":Ht(t,"combobox-option-padding")}});function tn(e){const t=we("Combobox",fqe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=oL(),y=o||g,v=mt({name:h||"Combobox",classes:Wu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:dqe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(XHe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(xn,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const hqe=e=>e;tn.extend=hqe;tn.classes=Wu;tn.displayName="@mantine/core/Combobox";tn.Target=Obe;tn.Dropdown=KW;tn.Options=nG;tn.Option=tG;tn.Search=rG;tn.Empty=XW;tn.Chevron=YW;tn.Footer=JW;tn.Header=eG;tn.EventsTarget=Pbe;tn.DropdownTarget=Nbe;tn.Group=ZW;tn.ClearButton=Rbe;tn.HiddenInput=Dbe;var $be={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Mbe=$be,aL=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const S=mt({name:e,props:t,className:n,style:y,classes:$be,classNames:r,styles:i,unstyled:s});return _.jsx(be,{...S("root"),ref:E,__vars:{"--label-fz":co(d),"--label-lh":Ht(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(be,{component:p,htmlFor:p==="label"?l:void 0,...S("body"),children:[o,_.jsxs("div",{...S("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(be,{component:m,htmlFor:m==="label"?l:void 0,...S("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(ri.Description,{size:d,__inheritStyles:!1,...S("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(ri.Error,{size:d,__inheritStyles:!1,...S("error"),children:f})]})]})})});aL.displayName="@mantine/core/InlineInput";const Lbe=I.createContext(null),pqe=Lbe.Provider,Fbe=()=>I.useContext(Lbe),[mqe,gqe]=cb();var jbe={card:"m_26775b0a"};const yqe={withBorder:!0},vqe=(e,{radius:t})=>({card:{"--card-radius":Mr(t)}}),iG=Me((e,t)=>{const n=we("CheckboxCard",yqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=mt({name:"CheckboxCard",classes:jbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vqe,rootSelector:"card"}),g=Fbe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(mqe,{value:{checked:y},children:_.jsx(ws,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});iG.displayName="@mantine/core/CheckboxCard";iG.classes=jbe;function sG({children:e,role:t}){const n=kx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const bqe={},oG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=we("CheckboxGroup",bqe,e),[c,f]=ls({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(pqe,{value:{value:c,onChange:d,size:s},children:_.jsx(ri.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(sG,{role:"group",children:a})})})});oG.classes=ri.Wrapper.classes;oG.displayName="@mantine/core/CheckboxGroup";function Bbe({size:e,style:t,...n}){const r=e!==void 0?{width:xe(e),height:xe(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Ube({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(Bbe,{...t})}var zbe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const _qe={icon:Ube},wqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Nc({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":Ht(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Mr(t),"--checkbox-color":s==="outline"?u:jr(n,e),"--checkbox-icon-color":i?jr(i,e):Cx(o,e)?my({color:n,theme:e,autoContrast:o}):void 0}}},aG=Me((e,t)=>{const n=we("CheckboxIndicator",_qe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=mt({name:"CheckboxIndicator",classes:zbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wqe,rootSelector:"indicator"}),S=gqe(),T=typeof m=="boolean"||typeof c=="boolean"?m||c:(S==null?void 0:S.checked)||!1;return _.jsx(be,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:T,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});aG.displayName="@mantine/core/CheckboxIndicator";aG.classes=zbe;var Vbe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Eqe={labelPosition:"right",icon:Ube},xqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Nc({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":Ht(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Mr(t),"--checkbox-color":s==="outline"?u:jr(n,e),"--checkbox-icon-color":i?jr(i,e):Cx(o,e)?my({color:n,theme:e,autoContrast:o}):void 0}}},fm=Me((e,t)=>{const n=we("Checkbox",Eqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:S,icon:T,rootRef:C,iconColor:A,onChange:N,autoContrast:k,mod:O,...P}=n,$=Fbe(),L=d||($==null?void 0:$.size),M=T,U=mt({name:"Checkbox",props:n,classes:Vbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xqe}),{styleProps:B,rest:V}=db(P),D=su(f),z=$?{checked:$.value.includes(V.value),onChange:W=>{$.onChange(W),N==null||N(W)}}:{};return _.jsx(aL,{...U("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:D,size:L,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:C,mod:O,...B,...p,children:_.jsxs(be,{...U("inner"),mod:{"data-label-position":y},children:[_.jsx(be,{component:"input",id:D,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:S},...U("input",{focusable:!0,variant:E}),onChange:N,...V,...z,type:"checkbox"}),_.jsx(M,{indeterminate:S,...U("icon")})]})})});fm.classes={...Vbe,...Mbe};fm.displayName="@mantine/core/Checkbox";fm.Group=oG;fm.Indicator=aG;fm.Card=iG;function dE(e){return"group"in e}function Hbe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;dE(o)&&i.push({group:o.group,items:Hbe({options:o.items,search:t,limit:n-i.length})}),dE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Sqe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function qbe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(dE(n))qbe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Tqe(e,t){return Array.isArray(e)?e.includes(t):e===t}function Wbe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!dE(e)){const a=Tqe(n,e.value),u=t&&a&&_.jsx(Bbe,{className:Wu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(tn.Option,{value:e.value,disabled:e.disabled,className:Xi({[Wu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(Wbe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(tn.Group,{label:e.group,children:o})}function Gbe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){qbe(e);const b=typeof i=="string"?(r||Hbe)({options:e,search:u?i:"",limit:s??1/0}):e,w=Sqe(b),E=b.map(S=>_.jsx(Wbe,{data:S,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},dE(S)?S.group:S.value));return _.jsx(tn.Dropdown,{hidden:t||n&&w,children:_.jsxs(tn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(hb.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(tn.Empty,{children:d})]})})}var Ybe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const Cqe={},Aqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":Ht(s,"badge-height"),"--badge-padding-x":Ht(s,"badge-padding-x"),"--badge-fz":Ht(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Mr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?jr(n,e):void 0}}},Wp=Ts((e,t)=>{const n=we("Badge",Cqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=mt({name:"Badge",props:n,classes:Ybe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Aqe});return _.jsxs(be,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});Wp.classes=Ybe;Wp.displayName="@mantine/core/Badge";var Kbe={root:"m_ddec01c0",icon:"m_dde7bd57",cite:"m_dde51a35"};const Iqe={iconSize:48},kqe=(e,{color:t,iconSize:n,radius:r})=>{const i=Nc({color:t||e.primaryColor,theme:e,colorScheme:"dark"}),s=Nc({color:t||e.primaryColor,theme:e,colorScheme:"light"});return{root:{"--bq-bg-light":oc(s.value,.07),"--bq-bg-dark":oc(i.value,.06),"--bq-bd":jr(t,e),"--bq-icon-size":xe(n),"--bq-radius":Mr(r)}}},uG=Me((e,t)=>{const n=we("Blockquote",Iqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,icon:c,iconSize:f,cite:d,...h}=n,p=mt({name:"Blockquote",classes:Kbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kqe});return _.jsxs(be,{component:"blockquote",ref:t,...p("root"),...h,children:[c&&_.jsx("span",{...p("icon"),children:c}),l,d&&_.jsx("cite",{...p("cite"),children:d})]})});uG.classes=Kbe;uG.displayName="@mantine/core/Blockquote";var Xbe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const Rqe={},Nqe=(e,{color:t,size:n,lineSize:r,transitionDuration:i,transitionTimingFunction:s})=>({root:{"--burger-color":t?jr(t,e):void 0,"--burger-size":Ht(n,"burger-size"),"--burger-line-size":r?xe(r):void 0,"--burger-transition-duration":i===void 0?void 0:`${i}ms`,"--burger-transition-timing-function":s}}),lG=Me((e,t)=>{const n=we("Burger",Rqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=mt({name:"Burger",classes:Xbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Nqe});return _.jsxs(ws,{...p("root"),ref:t,...h,children:[_.jsx(be,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});lG.classes=Xbe;lG.displayName="@mantine/core/Burger";var uL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const eoe={orientation:"horizontal"},Pqe=(e,{borderWidth:t})=>({group:{"--button-border-width":xe(t)}}),cG=Me((e,t)=>{const n=we("ButtonGroup",eoe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=we("ButtonGroup",eoe,e),p=mt({name:"ButtonGroup",props:n,classes:uL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:Pqe,rootSelector:"group"});return _.jsx(be,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});cG.classes=uL;cG.displayName="@mantine/core/ButtonGroup";const Dqe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${xe(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Oqe={},$qe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":Ht(s,"button-height"),"--button-padding-x":Ht(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?co(s.replace("compact-","")):co(s),"--button-radius":t===void 0?void 0:Mr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},On=Ts((e,t)=>{const n=we("Button",Oqe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:S,...T}=n,C=mt({name:"Button",props:n,classes:uL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:$qe}),A=!!l,N=!!c;return _.jsxs(ws,{ref:t,...C("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":A,"with-right-section":N},S],...T,children:[_.jsx(Om,{mounted:!!p,transition:Dqe,duration:150,children:k=>_.jsx(be,{component:"span",...C("loader",{style:k}),"aria-hidden":!0,children:_.jsx(ju,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...C("inner"),children:[l&&_.jsx(be,{component:"span",...C("section"),mod:{position:"left"},children:l}),_.jsx(be,{component:"span",mod:{loading:p},...C("label"),children:u}),c&&_.jsx(be,{component:"span",...C("section"),mod:{position:"right"},children:c})]})]})});On.classes=uL;On.displayName="@mantine/core/Button";On.Group=cG;const[Mqe,Lqe]=qs("Card component was not found in tree");var fG={root:"m_e615b15f",section:"m_599a2148"};const Fqe={},lL=Ts((e,t)=>{const n=we("CardSection",Fqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=Lqe();return _.jsx(be,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});lL.classes=fG;lL.displayName="@mantine/core/CardSection";const jqe={},Bqe=(e,{padding:t})=>({root:{"--card-padding":qu(t)}}),pb=Ts((e,t)=>{const n=we("Card",jqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=mt({name:"Card",props:n,classes:fG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Bqe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===lL?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(Mqe,{value:{getStyles:d},children:_.jsx(uE,{ref:t,unstyled:a,...d("root"),...f,children:p})})});pb.classes=fG;pb.displayName="@mantine/core/Card";pb.Section=lL;var Qbe={root:"m_4451eb3a"};const Uqe={},$l=Ts((e,t)=>{const n=we("Center",Uqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=mt({name:"Center",props:n,classes:Qbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(be,{ref:t,mod:[{inline:l},c],...d("root"),...f})});$l.classes=Qbe;$l.displayName="@mantine/core/Center";var Jbe={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const toe={withShadow:!0},zqe=(e,{radius:t,size:n})=>({root:{"--cs-radius":t===void 0?void 0:Mr(t),"--cs-size":xe(n)}}),ah=Ts((e,t)=>{const n=we("ColorSwatch",toe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,size:c,radius:f,withShadow:d,children:h,variant:p,...m}=we("ColorSwatch",toe,n),g=mt({name:"ColorSwatch",props:n,classes:Jbe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zqe});return _.jsxs(be,{ref:t,variant:p,size:c,...g("root",{focusable:!0}),...m,children:[_.jsx("span",{...g("alphaOverlay")}),d&&_.jsx("span",{...g("shadowOverlay")}),_.jsx("span",{...g("colorOverlay",{style:{backgroundColor:l}})}),_.jsx("span",{...g("childrenOverlay"),children:h})]})});ah.classes=Jbe;ah.displayName="@mantine/core/ColorSwatch";const[Vqe,dG]=cb(null),hG=I.forwardRef(({position:e,...t},n)=>_.jsx(be,{ref:n,__vars:{"--thumb-y-offset":`${e.y*100}%`,"--thumb-x-offset":`${e.x*100}%`},...t}));hG.displayName="@mantine/core/ColorPickerThumb";var pG={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const Hqe={},mG=Me((e,t)=>{var B;const n=we("ColorSlider",Hqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onChange:l,onChangeEnd:c,maxValue:f,round:d,size:h="md",focusable:p=!0,value:m,overlays:g,thumbColor:y="transparent",onScrubStart:v,onScrubEnd:b,__staticSelector:w="ColorPicker",...E}=n,S=mt({name:w,classes:pG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a}),C=((B=dG())==null?void 0:B.getStyles)||S,A=Ss(),[N,k]=I.useState({y:0,x:m/f}),O=I.useRef(N),P=V=>d?Math.round(V*f):V*f,{ref:$}=YM(({x:V,y:D})=>{O.current={x:V,y:D},l==null||l(P(V))},{onScrubEnd:()=>{const{x:V}=O.current;c==null||c(P(V)),b==null||b()},onScrubStart:v});Rc(()=>{k({y:0,x:m/f})},[m]);const L=(V,D)=>{V.preventDefault();const z=v1e(D);l==null||l(P(z.x)),c==null||c(P(z.x))},M=V=>{switch(V.key){case"ArrowRight":{L(V,{x:N.x+.05,y:N.y});break}case"ArrowLeft":{L(V,{x:N.x-.05,y:N.y});break}}},U=g.map((V,D)=>I.createElement("div",{...C("sliderOverlay"),style:V,key:D}));return _.jsxs(be,{...E,ref:Ji($,t),...C("slider"),role:"slider","aria-valuenow":m,"aria-valuemax":f,"aria-valuemin":0,tabIndex:p?0:-1,onKeyDown:M,"data-focus-ring":A.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${h})`},children:[U,_.jsx(hG,{position:N,...C("thumb",{style:{top:xe(1),background:y}})})]})});mG.displayName="@mantine/core/ColorSlider";function bc(e,t=0,n=10**t){return Math.round(n*e)/n}function qqe({h:e,s:t,l:n,a:r}){const i=t*((n<50?n:100-n)/100);return{h:e,s:i>0?2*i/(n+i)*100:0,v:n+i,a:r}}const Wqe={grad:360/400,turn:360,rad:360/(Math.PI*2)};function Gqe(e,t="deg"){return Number(e)*(Wqe[t]||1)}const Yqe=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function noe(e){const t=Yqe.exec(e);return t?qqe({h:Gqe(t[1],t[2]),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)}):{h:0,s:0,v:0,a:1}}function xU({r:e,g:t,b:n,a:r}){const i=Math.max(e,t,n),s=i-Math.min(e,t,n),o=s?i===e?(t-n)/s:i===t?2+(n-e)/s:4+(e-t)/s:0;return{h:bc(60*(o<0?o+6:o),3),s:bc(i?s/i*100:0,3),v:bc(i/255*100,3),a:r}}function SU(e){const t=e[0]==="#"?e.slice(1):e;return t.length===3?xU({r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:1}):xU({r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:1})}function Kqe(e){const t=e[0]==="#"?e.slice(1):e,n=o=>bc(parseInt(o,16)/255,3);if(t.length===4){const o=t.slice(0,3),a=n(t[3]+t[3]);return{...SU(o),a}}const r=t.slice(0,6),i=n(t.slice(6,8));return{...SU(r),a:i}}const Xqe=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function roe(e){const t=Xqe.exec(e);return t?xU({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):{h:0,s:0,v:0,a:1}}const Zbe={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},Qqe={hex:SU,hexa:Kqe,rgb:roe,rgba:roe,hsl:noe,hsla:noe};function Jqe(e){for(const[,t]of Object.entries(Zbe))if(t.test(e))return!0;return!1}function sN(e){if(typeof e!="string")return{h:0,s:0,v:0,a:1};if(e==="transparent")return{h:0,s:0,v:0,a:0};const t=e.trim();for(const[n,r]of Object.entries(Zbe))if(r.test(t))return Qqe[n](t);return{h:0,s:0,v:0,a:1}}const Zqe={},e_e=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=we("AlphaSlider",Zqe,e);return _.jsx(mG,{...o,ref:t,value:n,onChange:a=>r==null?void 0:r(bc(a,2)),onChangeEnd:a=>i==null?void 0:i(bc(a,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${xe(8)} ${xe(8)}`,backgroundPosition:`0 0, 0 ${xe(4)}, ${xe(4)} ${xe(-4)}, ${xe(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${s})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${xe(1)} inset, rgb(0, 0, 0, .15) 0 0 ${xe(4)} inset`}]})});e_e.displayName="@mantine/core/AlphaSlider";function t_e({h:e,s:t,v:n,a:r}){const i=e/360*6,s=t/100,o=n/100,a=Math.floor(i),u=o*(1-s),l=o*(1-(i-a)*s),c=o*(1-(1-i+a)*s),f=a%6;return{r:bc([o,l,u,u,c,o][f]*255),g:bc([c,o,o,l,u,u][f]*255),b:bc([u,u,c,o,o,l][f]*255),a:bc(r,2)}}function ioe(e,t){const{r:n,g:r,b:i,a:s}=t_e(e);return t?`rgba(${n}, ${r}, ${i}, ${bc(s,2)})`:`rgb(${n}, ${r}, ${i})`}function soe({h:e,s:t,v:n,a:r},i){const s=(200-t)*n/100,o={h:Math.round(e),s:Math.round(s>0&&s<200?t*n/100/(s<=100?s:200-s)*100:0),l:Math.round(s/2)};return i?`hsla(${o.h}, ${o.s}%, ${o.l}%, ${bc(r,2)})`:`hsl(${o.h}, ${o.s}%, ${o.l}%)`}function WP(e){const t=e.toString(16);return t.length<2?`0${t}`:t}function n_e(e){const{r:t,g:n,b:r}=t_e(e);return`#${WP(t)}${WP(n)}${WP(r)}`}function eWe(e){const t=Math.round(e.a*255);return`${n_e(e)}${WP(t)}`}const y8={hex:n_e,hexa:e=>eWe(e),rgb:e=>ioe(e,!1),rgba:e=>ioe(e,!0),hsl:e=>soe(e,!1),hsla:e=>soe(e,!0)};function cg(e,t){return t?e in y8?y8[e](t):y8.hex(t):"#000000"}const r_e=I.forwardRef((e,t)=>{const{value:n,onChange:r,onChangeEnd:i,color:s,...o}=we("HueSlider",{},e);return _.jsx(mG,{...o,ref:t,value:n,onChange:r,onChangeEnd:i,maxValue:360,thumbColor:`hsl(${n}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${xe(1)} inset, rgb(0, 0, 0, .15) 0 0 ${xe(4)} inset`}]})});r_e.displayName="@mantine/core/HueSlider";function i_e({className:e,onChange:t,onChangeEnd:n,value:r,saturationLabel:i,focusable:s=!0,size:o,color:a,onScrubStart:u,onScrubEnd:l,...c}){const{getStyles:f}=dG(),[d,h]=I.useState({x:r.s/100,y:1-r.v/100}),p=I.useRef(d),{ref:m}=YM(({x:v,y:b})=>{p.current={x:v,y:b},t({s:Math.round(v*100),v:Math.round((1-b)*100)})},{onScrubEnd:()=>{const{x:v,y:b}=p.current;n({s:Math.round(v*100),v:Math.round((1-b)*100)}),l==null||l()},onScrubStart:u});I.useEffect(()=>{h({x:r.s/100,y:1-r.v/100})},[r.s,r.v]);const g=(v,b)=>{v.preventDefault();const w=v1e(b);t({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)}),n({s:Math.round(w.x*100),v:Math.round((1-w.y)*100)})},y=v=>{switch(v.key){case"ArrowUp":{g(v,{y:d.y-.05,x:d.x});break}case"ArrowDown":{g(v,{y:d.y+.05,x:d.x});break}case"ArrowRight":{g(v,{x:d.x+.05,y:d.y});break}case"ArrowLeft":{g(v,{x:d.x-.05,y:d.y});break}}};return _.jsxs(be,{...f("saturation"),ref:m,...c,role:"slider","aria-label":i,"aria-valuenow":d.x,"aria-valuetext":cg("rgba",r),tabIndex:s?0:-1,onKeyDown:y,children:[_.jsx("div",{...f("saturationOverlay",{style:{backgroundColor:`hsl(${r.h}, 100%, 50%)`}})}),_.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),_.jsx("div",{...f("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),_.jsx(hG,{position:d,...f("thumb",{style:{backgroundColor:a}})})]})}i_e.displayName="@mantine/core/Saturation";const s_e=I.forwardRef(({className:e,datatype:t,setValue:n,onChangeEnd:r,size:i,focusable:s,data:o,swatchesPerRow:a,...u},l)=>{const c=dG(),f=o.map((d,h)=>I.createElement(ah,{...c.getStyles("swatch"),unstyled:c.unstyled,component:"button",type:"button",color:d,key:h,radius:"sm",onClick:()=>{n(d),r==null||r(d)},"aria-label":d,tabIndex:s?0:-1,"data-swatch":!0}));return _.jsx(be,{...c.getStyles("swatches"),ref:l,...u,children:f})});s_e.displayName="@mantine/core/Swatches";const tWe={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},nWe=(e,{size:t,swatchesPerRow:n})=>({wrapper:{"--cp-preview-size":Ht(t,"cp-preview-size"),"--cp-width":Ht(t,"cp-width"),"--cp-body-spacing":qu(t),"--cp-swatch-size":`${100/n}%`,"--cp-thumb-size":Ht(t,"cp-thumb-size"),"--cp-saturation-height":Ht(t,"cp-saturation-height")}}),gG=Me((e,t)=>{const n=we("ColorPicker",tWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,format:l,value:c,defaultValue:f,onChange:d,onChangeEnd:h,withPicker:p,size:m,saturationLabel:g,hueLabel:y,alphaLabel:v,focusable:b,swatches:w,swatchesPerRow:E,fullWidth:S,onColorSwatchClick:T,__staticSelector:C,mod:A,...N}=n,k=mt({name:C,props:n,classes:pG,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"wrapper",vars:u,varsResolver:nWe}),O=I.useRef(l),P=I.useRef(),$=I.useRef(-1),L=I.useRef(!1),M=l==="hexa"||l==="rgba"||l==="hsla",[U,B,V]=ls({value:c,defaultValue:f,finalValue:"#FFFFFF",onChange:d}),[D,z]=I.useState(sN(U)),W=()=>{window.clearTimeout($.current),L.current=!0},j=()=>{window.clearTimeout($.current),$.current=window.setTimeout(()=>{L.current=!1},200)},q=G=>{z(te=>{const ve={...te,...G};return P.current=cg(O.current,ve),ve}),B(P.current)};return Rc(()=>{Jqe(c)&&!L.current&&z(sN(c))},[c]),Rc(()=>{O.current=l,B(cg(l,D))},[l]),_.jsx(Vqe,{value:{getStyles:k,unstyled:a},children:_.jsxs(be,{ref:t,...k("wrapper"),size:m,mod:[{"full-width":S},A],...N,children:[p&&_.jsxs(_.Fragment,{children:[_.jsx(i_e,{value:D,onChange:q,onChangeEnd:({s:G,v:te})=>h==null?void 0:h(cg(O.current,{...D,s:G,v:te})),color:U,size:m,focusable:b,saturationLabel:g,onScrubStart:W,onScrubEnd:j}),_.jsxs("div",{...k("body"),children:[_.jsxs("div",{...k("sliders"),children:[_.jsx(r_e,{value:D.h,onChange:G=>q({h:G}),onChangeEnd:G=>h==null?void 0:h(cg(O.current,{...D,h:G})),size:m,focusable:b,"aria-label":y,onScrubStart:W,onScrubEnd:j}),M&&_.jsx(e_e,{value:D.a,onChange:G=>q({a:G}),onChangeEnd:G=>{h==null||h(cg(O.current,{...D,a:G}))},size:m,color:cg("hex",D),focusable:b,"aria-label":v,onScrubStart:W,onScrubEnd:j})]}),M&&_.jsx(ah,{color:U,radius:"sm",size:"var(--cp-preview-size)",...k("preview")})]})]}),Array.isArray(w)&&_.jsx(s_e,{data:w,swatchesPerRow:E,focusable:b,setValue:B,onChangeEnd:G=>{const te=cg(l,sN(G));T==null||T(te),h==null||h(te),V||z(sN(G))}})]})})});gG.classes=pG;gG.displayName="@mantine/core/ColorPicker";var o_e={root:"m_7485cace"};const rWe={},iWe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:Ht(t,"container-size")}}),ld=Me((e,t)=>{const n=we("Container",rWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=mt({name:"Container",classes:o_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:iWe});return _.jsx(be,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});ld.classes=o_e;ld.displayName="@mantine/core/Container";var a_e={root:"m_3eebeb36",label:"m_9e365f20"};const sWe={orientation:"horizontal"},oWe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?jr(t,e):void 0,"--divider-border-style":n,"--divider-size":Ht(r,"divider-size")}}),u0=Me((e,t)=>{const n=we("Divider",sWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=mt({name:"Divider",classes:a_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oWe});return _.jsx(be,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(be,{component:"span",mod:{position:d},...m("label"),children:f})})});u0.classes=a_e;u0.displayName="@mantine/core/Divider";const[aWe,Px]=qs("Drawer component was not found in tree");var Mm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const uWe={},cL=Me((e,t)=>{const n=we("DrawerBody",uWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(kW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});cL.classes=Mm;cL.displayName="@mantine/core/DrawerBody";const lWe={},fL=Me((e,t)=>{const n=we("DrawerCloseButton",lWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(RW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});fL.classes=Mm;fL.displayName="@mantine/core/DrawerCloseButton";const cWe={},dL=Me((e,t)=>{const n=we("DrawerContent",cWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Px(),d=f.scrollAreaComponent||_be;return _.jsx(bbe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});dL.classes=Mm;dL.displayName="@mantine/core/DrawerContent";const fWe={},hL=Me((e,t)=>{const n=we("DrawerHeader",fWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(NW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});hL.classes=Mm;hL.displayName="@mantine/core/DrawerHeader";const dWe={},pL=Me((e,t)=>{const n=we("DrawerOverlay",dWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(PW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});pL.classes=Mm;pL.displayName="@mantine/core/DrawerOverlay";function hWe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function pWe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const mWe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},gWe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},yWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qc("modal"),position:"left"},vWe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":Ht(n,"drawer-size"),"--drawer-flex":pWe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":hWe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":xe(r)}}),mL=Me((e,t)=>{const n=we("DrawerRoot",yWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Fh(),m=mt({name:"Drawer",classes:Mm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:vWe}),g=(p==="rtl"?gWe:mWe)[c];return _.jsx(aWe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(vbe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});mL.classes=Mm;mL.displayName="@mantine/core/DrawerRoot";const bWe={},gL=Me((e,t)=>{const n=we("DrawerTitle",bWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Px();return _.jsx(DW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});gL.classes=Mm;gL.displayName="@mantine/core/DrawerTitle";const _We={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qc("modal"),withOverlay:!0,withCloseButton:!0},jh=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=we("Drawer",_We,e),l=!!n||s;return _.jsxs(mL,{ref:t,...u,children:[r&&_.jsx(pL,{...i}),_.jsxs(dL,{children:[l&&_.jsxs(hL,{children:[n&&_.jsx(gL,{children:n}),s&&_.jsx(fL,{...o})]}),_.jsx(cL,{children:a})]})]})});jh.classes=Mm;jh.displayName="@mantine/core/Drawer";jh.Root=mL;jh.Overlay=pL;jh.Content=dL;jh.Body=cL;jh.Header=hL;jh.Title=gL;jh.CloseButton=fL;function u_e({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[wWe,l_e]=qs("Grid component was not found in tree"),TU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,ooe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":TU(e,t),aoe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},uoe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function EWe({span:e,order:t,offset:n,selector:r}){var d;const i=Ss(),s=l_e(),a=qT(e)===void 0?12:qT(e),u=Tx({"--col-order":(d=qT(t))==null?void 0:d.toString(),"--col-flex-grow":aoe(a,s.grow),"--col-flex-basis":TU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":ooe(a,s.columns,s.grow),"--col-offset":uoe(qT(n),s.columns)}),l=Ni(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=aoe(e[p],s.grow),h[p]["--col-flex-basis"]=TU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=ooe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=uoe(n[p],s.columns)),h},{}),f=xO(Ni(l),i).filter(h=>Ni(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(DI,{styles:u,media:f,selector:r})}var yG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const xWe={span:12},vG=Me((e,t)=>{const n=we("GridCol",xWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=l_e(),h=QM();return _.jsxs(_.Fragment,{children:[_.jsx(EWe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(be,{ref:t,...d.getStyles("col",{className:Xi(i,h),style:s,classNames:r,styles:o}),...f})]})});vG.classes=yG;vG.displayName="@mantine/core/GridCol";function SWe({gutter:e,selector:t}){const n=Ss(),r=Tx({"--grid-gutter":qu(qT(e))}),i=Ni(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=qu(e[u])),a),{}),o=xO(Ni(i),n).filter(a=>Ni(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(DI,{styles:r,media:o,selector:t})}const TWe={gutter:"md",grow:!1,columns:12},CWe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Va=Me((e,t)=>{const n=we("Grid",TWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=mt({name:"Grid",classes:yG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CWe}),y=QM();return _.jsxs(wWe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(SWe,{selector:`.${y}`,...n}),_.jsx(be,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});Va.classes=yG;Va.displayName="@mantine/core/Grid";Va.Col=vG;const[AWe,c_e]=qs("HoverCard component was not found in the tree"),IWe={};function f_e(e){const{children:t,onMouseEnter:n,onMouseLeave:r,...i}=we("HoverCardDropdown",IWe,e),s=c_e(),o=_l(n,s.openDropdown),a=_l(r,s.closeDropdown);return _.jsx(xn.Dropdown,{onMouseEnter:o,onMouseLeave:a,...i,children:t})}f_e.displayName="@mantine/core/HoverCardDropdown";const kWe={refProp:"ref"},d_e=I.forwardRef((e,t)=>{const{children:n,refProp:r,eventPropsWrapperName:i,...s}=we("HoverCardTarget",kWe,e);if(!Nm(n))throw new Error("HoverCard.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=c_e(),a=_l(n.props.onMouseEnter,o.openDropdown),u=_l(n.props.onMouseLeave,o.closeDropdown),l={onMouseEnter:a,onMouseLeave:u};return _.jsx(xn.Target,{refProp:r,ref:t,...s,children:I.cloneElement(n,i?{[i]:l}:l)})});d_e.displayName="@mantine/core/HoverCardTarget";const RWe={openDelay:0,closeDelay:150,initiallyOpened:!1};function i1(e){const{children:t,onOpen:n,onClose:r,openDelay:i,closeDelay:s,initiallyOpened:o,...a}=we("HoverCard",RWe,e),[u,{open:l,close:c}]=n1(o,{onClose:r,onOpen:n}),{openDropdown:f,closeDropdown:d}=u_e({open:l,close:c,openDelay:i,closeDelay:s});return _.jsx(AWe,{value:{openDropdown:f,closeDropdown:d},children:_.jsx(xn,{...a,opened:u,__staticSelector:"HoverCard",children:t})})}i1.displayName="@mantine/core/HoverCard";i1.Target=d_e;i1.Dropdown=f_e;i1.extend=e=>e;var h_e={root:"m_9e117634"};const NWe={},PWe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Mr(t),"--image-object-fit":n}}),vy=Ts((e,t)=>{const n=we("Image",NWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=mt({name:"Image",classes:h_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:PWe});return g&&h?_.jsx(be,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(be,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});vy.classes=h_e;vy.displayName="@mantine/core/Image";function CU(){return CU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CU.apply(null,arguments)}function DWe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var OWe=I.useLayoutEffect,$We=function(t){var n=I.useRef(t);return OWe(function(){n.current=t}),n},loe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},MWe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&loe(r.current,null),r.current=n,n&&loe(n,i)},[n])},coe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},LWe=function(t){Object.keys(coe).forEach(function(n){t.style.setProperty(n,coe[n],"important")})},foe=LWe,Na=null,doe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function FWe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Na||(Na=document.createElement("textarea"),Na.setAttribute("tabindex","-1"),Na.setAttribute("aria-hidden","true"),foe(Na)),Na.parentNode===null&&document.body.appendChild(Na);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Na.style[h]=o[h]}),foe(Na),Na.value=t;var u=doe(Na,e);Na.value=t,u=doe(Na,e),Na.value="x";var l=Na.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var hoe=function(){},jWe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},BWe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],UWe=!!document.documentElement.currentStyle,zWe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=jWe(BWe,n),i=r.boxSizing;if(i==="")return null;UWe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},VWe=zWe;function p_e(e,t,n){var r=$We(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var HWe=function(t){p_e(window,"resize",t)},qWe=function(t){p_e(document.fonts,"loadingdone",t)},WWe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],GWe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?hoe:o,u=t.onHeightChange,l=u===void 0?hoe:u,c=DWe(t,WWe),f=c.value!==void 0,d=I.useRef(null),h=MWe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:VWe(b);if(w){m.current=w;var E=FWe(w,b.value||b.placeholder||"x",s,i),S=E[0],T=E[1];p.current!==S&&(p.current=S,b.style.setProperty("height",S+"px","important"),l(S,{rowHeight:T}))}},y=function(b){f||g(),a(b)};return I.useLayoutEffect(g),HWe(g),qWe(g),I.createElement("textarea",CU({},c,{onChange:y,ref:h}))},YWe=I.forwardRef(GWe);const KWe={},rA=Me((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=we("Textarea",KWe,e),u=n&&b1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Yc,{component:u?YWe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});rA.classes=Yc.classes;rA.displayName="@mantine/core/Textarea";const[XWe,QWe]=qs("List component was not found in tree");var bG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const JWe={},_G=Me((e,t)=>{const n=we("ListItem",JWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=QWe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(be,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});_G.classes=bG;_G.displayName="@mantine/core/ListItem";const ZWe={type:"unordered"},eGe=(e,{size:t,spacing:n})=>({root:{"--list-fz":co(t),"--list-lh":f1e(t),"--list-spacing":qu(n)}}),Bf=Me((e,t)=>{const n=we("List",ZWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=mt({name:"List",classes:bG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eGe});return _.jsx(XWe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(be,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Bf.classes=bG;Bf.displayName="@mantine/core/List";Bf.Item=_G;var m_e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const poe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:qc("overlay")},tGe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),Dc=Me((e,t)=>{const n=we("LoadingOverlay",poe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=Ss(),g=mt({name:"LoadingOverlay",classes:m_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tGe}),y={...poe.overlayProps,...f};return _.jsx(Om,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(be,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(ju,{...g("loader"),unstyled:a,...c}),_.jsx(nA,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(nA,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});Dc.classes=m_e;Dc.displayName="@mantine/core/LoadingOverlay";const[nGe,UI]=qs("Menu component was not found in the tree");var Dx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const rGe={},wG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("MenuDivider",rGe,e),u=UI();return _.jsx(be,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});wG.classes=Dx;wG.displayName="@mantine/core/MenuDivider";const iGe={},EG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=we("MenuDropdown",iGe,e),f=I.useRef(null),d=UI(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=_l(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=_l(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(xn.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:Ji(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});EG.classes=Dx;EG.displayName="@mantine/core/MenuDropdown";const sGe={},xG=Ts((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=we("MenuItem",sGe,e),p=UI(),m=Ss(),{dir:g}=Fh(),y=I.useRef(),v=p.getItemIndex(y.current),b=h,w=_l(b.onMouseLeave,()=>p.setHovered(-1)),E=_l(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),S=_l(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),T=_l(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),C=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,A=a?Nc({color:a,theme:m}):null;return _.jsxs(ws,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:T,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:Ji(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:S,onKeyDown:Qq({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":A!=null&&A.isThemeColor&&(A==null?void 0:A.shade)===void 0?`var(--mantine-color-${A.color}-6)`:C==null?void 0:C.color,"--menu-item-hover":C==null?void 0:C.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});xG.classes=Dx;xG.displayName="@mantine/core/MenuItem";const oGe={},SG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("MenuLabel",oGe,e),u=UI();return _.jsx(be,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});SG.classes=Dx;SG.displayName="@mantine/core/MenuLabel";const aGe={refProp:"ref"},g_e=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=we("MenuTarget",aGe,e);if(!Nm(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=UI(),o=_l(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=_l(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=_l(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(xn.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});g_e.displayName="@mantine/core/MenuTarget";const uGe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Su(e){const t=we("Menu",uGe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...S}=t,T=mt({name:"Menu",classes:Dx,props:t,classNames:m,styles:g,unstyled:y}),[C,{setHovered:A,resetHovered:N}]=eUe(),[k,O]=ls({value:s,defaultValue:o,finalValue:!1,onChange:u}),[P,$]=I.useState(!1),L=()=>{O(!1),$(!1),k&&(i==null||i())},M=()=>{O(!0),!k&&(r==null||r())},U=()=>{k?L():M()},{openDropdown:B,closeDropdown:V}=u_e({open:M,close:L,closeDelay:p,openDelay:h}),D=j=>ZBe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=Pm({classNames:m,styles:g,props:t});return Rc(()=>{N()},[k]),_.jsx(nGe,{value:{getStyles:T,opened:k,toggleDropdown:U,getItemIndex:D,hovered:C,setHovered:A,openedViaClick:P,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?L:V,openDropdown:d==="click"?M:B,closeDropdownImmediately:L,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(xn,{...S,opened:k,onChange:U,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Su.extend=e=>e;Su.classes=Dx;Su.displayName="@mantine/core/Menu";Su.Item=xG;Su.Label=SG;Su.Dropdown=EG;Su.Target=g_e;Su.Divider=wG;const[lGe,Ox]=qs("Modal component was not found in tree");var Lm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const cGe={},yL=Me((e,t)=>{const n=we("ModalBody",cGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(kW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});yL.classes=Lm;yL.displayName="@mantine/core/ModalBody";const fGe={},vL=Me((e,t)=>{const n=we("ModalCloseButton",fGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(RW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});vL.classes=Lm;vL.displayName="@mantine/core/ModalCloseButton";const dGe={},bL=Me((e,t)=>{const n=we("ModalContent",dGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Ox(),f=c.scrollAreaComponent||_be;return _.jsx(bbe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${xe(c.yOffset)} * 2))`},children:u})})});bL.classes=Lm;bL.displayName="@mantine/core/ModalContent";const hGe={},_L=Me((e,t)=>{const n=we("ModalHeader",hGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(NW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});_L.classes=Lm;_L.displayName="@mantine/core/ModalHeader";const pGe={},wL=Me((e,t)=>{const n=we("ModalOverlay",pGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(PW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});wL.classes=Lm;wL.displayName="@mantine/core/ModalOverlay";const mGe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},gGe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Mr(t),"--modal-size":Ht(n,"modal-size"),"--modal-y-offset":xe(r),"--modal-x-offset":xe(i)}}),EL=Me((e,t)=>{const n=we("ModalRoot",mGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=mt({name:m,classes:Lm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gGe});return _.jsx(lGe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(vbe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});EL.classes=Lm;EL.displayName="@mantine/core/ModalRoot";const yGe={},xL=Me((e,t)=>{const n=we("ModalTitle",yGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Ox();return _.jsx(DW,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});xL.classes=Lm;xL.displayName="@mantine/core/ModalTitle";const vGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:qc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Es=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=we("Modal",vGe,e),c=!!n||s;return _.jsxs(EL,{ref:t,radius:u,...l,children:[r&&_.jsx(wL,{...i}),_.jsxs(bL,{radius:u,children:[c&&_.jsxs(_L,{children:[n&&_.jsx(xL,{children:n}),s&&_.jsx(vL,{...o})]}),_.jsx(yL,{children:a})]})]})});Es.classes=Lm;Es.displayName="@mantine/core/Modal";Es.Root=EL;Es.Overlay=wL;Es.Content=bL;Es.Body=yL;Es.Header=_L;Es.Title=xL;Es.CloseButton=vL;const[bGe,TG]=cb(),[_Ge,wGe]=cb();var SL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const EGe={},xGe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?Ht(t):Ht(n,"pg-gap")}}),CG=Me((e,t)=>{const n=we("PillGroup",EGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=TG(),h=(d==null?void 0:d.size)||l||void 0,p=mt({name:"PillGroup",classes:SL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xGe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(_Ge,{value:{size:h,disabled:c},children:_.jsx(be,{ref:t,size:h,...p("group"),...f})})});CG.classes=SL;CG.displayName="@mantine/core/PillGroup";const SGe={variant:"default"},TGe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":Ht(n,"pill-fz"),"--pill-height":Ht(n,"pill-height"),"--pill-radius":t===void 0?void 0:Mr(t)}}),S1=Me((e,t)=>{const n=we("Pill",SGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=wGe(),w=TG(),E=m||(b==null?void 0:b.size)||void 0,S=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",T=mt({name:"Pill",classes:SL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TGe,stylesCtx:{size:E}});return _.jsxs(be,{component:"span",ref:t,variant:S,size:E,...T("root",{variant:S}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...T("label"),children:c}),f&&_.jsx(gy,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...T("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:C=>{var A;C.preventDefault(),C.stopPropagation(),(A=h==null?void 0:h.onMouseDown)==null||A.call(h,C)},onClick:C=>{var A;C.stopPropagation(),d==null||d(),(A=h==null?void 0:h.onClick)==null||A.call(h,C)}})]})});S1.classes=SL;S1.displayName="@mantine/core/Pill";S1.Group=CG;var y_e={field:"m_45c4369d"};const CGe={type:"visible"},AG=Me((e,t)=>{const n=we("PillsInputField",CGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=TG(),g=kx(),y=mt({name:"PillsInputField",classes:y_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(be,{component:"input",ref:Ji(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});AG.classes=y_e;AG.displayName="@mantine/core/PillsInputField";const AGe={},hE=Me((e,t)=>{const n=we("PillsInput",AGe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return _.jsx(bGe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Yc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});hE.displayName="@mantine/core/PillsInput";hE.Field=AG;function IGe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(dE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const kGe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},IG=Me((e,t)=>{const n=we("MultiSelect",kGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:S,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:N,searchValue:k,defaultSearchValue:O,onSearchChange:P,readOnly:$,disabled:L,onFocus:M,onBlur:U,onPaste:B,radius:V,rightSection:D,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:ve,inputContainer:he,inputWrapperOrder:ce,withAsterisk:me,labelProps:Le,descriptionProps:fe,errorProps:ct,wrapperProps:ze,description:Ke,label:it,error:De,maxValues:Ae,searchable:Ge,nothingFoundMessage:ht,withCheckIcon:Ct,checkIconPosition:Se,hidePickedOptions:ue,withErrorStyles:Ve,name:st,form:ge,id:Ne,clearable:qe,clearButtonProps:Je,hiddenInputProps:Et,placeholder:wn,hiddenInputValuesDivider:vr,required:br,mod:kr,renderOption:Kt,onRemove:Tn,onClear:tr,scrollAreaProps:nr,...Ho}=n,Mi=su(Ne),es=kbe(m),Ln=GW(es),Hn=oL({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Hn.resetSelectedOption()}}),{styleProps:hs,rest:{type:op,autoComplete:ol,...wd}}=db(Ho),[Sr,Si]=ls({value:c,defaultValue:f,finalValue:[],onChange:d}),[ai,cu]=ls({value:k,defaultValue:O,finalValue:"",onChange:P}),Ia=mt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:ka,resolvedStyles:oe}=Pm({props:n,styles:o,classNames:r}),ee=lt=>{h==null||h(lt),lt.key===" "&&!Ge&&(lt.preventDefault(),Hn.toggleDropdown()),lt.key==="Backspace"&&ai.length===0&&Sr.length>0&&(Tn==null||Tn(Sr[Sr.length-1]),Si(Sr.slice(0,Sr.length-1)))},ae=Sr.map((lt,St)=>{var Xt,Pn;return _.jsx(S1,{withRemoveButton:!$&&!((Xt=Ln[lt])!=null&&Xt.disabled),onRemove:()=>{Si(Sr.filter(Fn=>lt!==Fn)),Tn==null||Tn(lt)},unstyled:a,disabled:L,...Ia("pill"),children:((Pn=Ln[lt])==null?void 0:Pn.label)||lt},`${lt}-${St}`)});I.useEffect(()=>{w&&Hn.selectFirstOption()},[w,Sr]);const Te=qe&&Sr.length>0&&!L&&!$&&_.jsx(tn.ClearButton,{size:l,...Je,onClear:()=>{tr==null||tr(),Si([]),cu("")}}),Ce=IGe({data:es,value:Sr});return _.jsxs(_.Fragment,{children:[_.jsxs(tn,{store:Hn,classNames:ka,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:lt=>{E==null||E(lt),cu(""),Hn.updateSelectedOptionIndex("selected"),Sr.includes(Ln[lt].value)?(Si(Sr.filter(St=>St!==Ln[lt].value)),Tn==null||Tn(Ln[lt].value)):Sr.length<Ae&&Si([...Sr,Ln[lt].value])},...S,children:[_.jsx(tn.DropdownTarget,{children:_.jsx(hE,{...hs,__staticSelector:"MultiSelect",classNames:ka,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:L,radius:V,rightSection:D||Te||_.jsx(tn.Chevron,{size:l,error:De,unstyled:a}),rightSectionPointerEvents:W||(Te?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:te,leftSectionProps:ve,inputContainer:he,inputWrapperOrder:ce,withAsterisk:me,labelProps:Le,descriptionProps:fe,errorProps:ct,wrapperProps:ze,description:Ke,label:it,error:De,multiline:!0,withErrorStyles:Ve,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Te?"all":"none"),multiline:!0},pointer:!Ge,onClick:()=>Ge?Hn.openDropdown():Hn.toggleDropdown(),"data-expanded":Hn.dropdownOpened||void 0,id:Mi,required:br,mod:kr,children:_.jsxs(S1.Group,{disabled:L,unstyled:a,...Ia("pillsList"),children:[ae,_.jsx(tn.EventsTarget,{autoComplete:ol,children:_.jsx(hE.Field,{...wd,ref:t,id:Mi,placeholder:wn,type:!Ge&&!wn?"hidden":"visible",...Ia("inputField"),unstyled:a,onFocus:lt=>{M==null||M(lt),Ge&&Hn.openDropdown()},onBlur:lt=>{U==null||U(lt),Hn.closeDropdown(),cu("")},onKeyDown:ee,value:ai,onChange:lt=>{cu(lt.currentTarget.value),Ge&&Hn.openDropdown(),w&&Hn.selectFirstOption()},disabled:L,readOnly:$||!Ge,pointer:!Ge})})]})})}),_.jsx(Gbe,{data:ue?Ce:es,hidden:$||L,filter:T,search:ai,limit:C,hiddenWhenEmpty:!ht,withScrollArea:A,maxDropdownHeight:N,filterOptions:Ge,value:Sr,checkIconPosition:Se,withCheckIcon:Ct,nothingFoundMessage:ht,unstyled:a,labelId:it?`${Mi}-label`:void 0,"aria-label":it?void 0:Ho["aria-label"],renderOption:Kt,scrollAreaProps:nr})]}),_.jsx(tn.HiddenInput,{name:st,valuesDivider:vr,value:Sr,form:ge,disabled:L,...Et})]})});IG.classes={...Yc.classes,...tn.classes};IG.displayName="@mantine/core/MultiSelect";var v_e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const RGe={},NGe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":qu(r)}}},TL=Ts((e,t)=>{const n=we("NavLink",RGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:S,onKeyDown:T,autoContrast:C,mod:A,...N}=n,k=mt({name:"NavLink",props:n,classes:v_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NGe}),[O,P]=ls({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,L=M=>{h==null||h(M),$&&(M.preventDefault(),P(!O))};return _.jsxs(_.Fragment,{children:[_.jsxs(ws,{...k("root"),component:"a",ref:t,onClick:L,onKeyDown:M=>{T==null||T(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),P(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},A],...N,children:[g&&_.jsx(be,{component:"span",...k("section"),mod:{position:"left"},children:g}),_.jsxs(be,{...k("body"),mod:{"no-wrap":E},children:[_.jsx(be,{component:"span",...k("label"),children:v}),_.jsx(be,{component:"span",mod:{active:p},...k("description"),children:b})]}),($||y)&&_.jsx(be,{...k("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||_.jsx(fE,{...k("chevron")}):y})]}),_.jsx(uW,{in:O,...k("collapse"),children:_.jsx("div",{...k("children"),children:d})})]})});TL.classes=v_e;TL.displayName="@mantine/core/NavLink";function b_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var iA;(function(e){e.event="event",e.props="prop"})(iA||(iA={}));function Ng(){}function PGe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function sA(e){return!!(e||"").match(/\d/)}function xw(e){return e==null}function DGe(e){return typeof e=="number"&&isNaN(e)}function __e(e){return xw(e)||DGe(e)||typeof e=="number"&&!isFinite(e)}function w_e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function OGe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function $Ge(e,t,n){var r=OGe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function MGe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function kG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function LGe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function E_e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function moe(e,t){return Array(t+1).join(e)}function x_e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+moe("0",Math.abs(o))+i:o>=a?i=i+moe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function goe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=kG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=E_e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Tv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var S_e=PGe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),FGe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function jGe(e,t,n){return Math.min(Math.max(e,t),n)}function v8(e){return Math.max(e.selectionStart,e.selectionEnd)}function BGe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function UGe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function zGe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function VGe(e,t,n,r,i,s,o){o===void 0&&(o=zGe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function yoe(e,t,n,r){var i=e.length;if(t=jGe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function HGe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(sA(e[n])||sA(e[n-1]));return t}function T_e(e,t,n,r,i,s){s===void 0&&(s=Ng);var o=MGe(function(p,m){var g,y;return __e(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?x_e(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(xw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;xw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function qGe(e){return e.replace(/[^0-9]/g,"")}function WGe(e){return e}function GGe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=WGe);var a=e.removeFormatting;a===void 0&&(a=qGe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Ng);var h=e.onKeyDown;h===void 0&&(h=Ng);var p=e.onMouseUp;p===void 0&&(p=Ng);var m=e.onFocus;m===void 0&&(m=Ng);var g=e.onBlur;g===void 0&&(g=Ng);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=HGe);var b=e.isValidInputCharacter;b===void 0&&(b=sA);var w=e.isCharacterSame,E=b_e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),S=T_e(y,u,!!l,o,a,c),T=S[0],C=T.formattedValue,A=T.numAsString,N=S[1],k=I.useRef(),O=I.useRef({formattedValue:C,numAsString:A}),P=function(De,Ae){O.current={formattedValue:De.formattedValue,numAsString:De.value},N(De,Ae)},$=I.useState(!1),L=$[0],M=$[1],U=I.useRef(null),B=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return M(!0),function(){clearTimeout(B.current.setCaretTimeout),clearTimeout(B.current.focusTimeout)}},[]);var V=o,D=function(De,Ae){var Ge=parseFloat(Ae);return{formattedValue:De,value:Ae,floatValue:isNaN(Ge)?void 0:Ge}},z=function(De,Ae,Ge){De.selectionStart===0&&De.selectionEnd===De.value.length||(Tv(De,Ae),B.current.setCaretTimeout=setTimeout(function(){De.value===Ge&&De.selectionStart!==Ae&&Tv(De,Ae)},0))},W=function(De,Ae,Ge){return yoe(De,Ae,v(De),Ge)},j=function(De,Ae,Ge){var ht=v(Ae),Ct=VGe(Ae,C,De,Ge,ht,b,w);return Ct=yoe(Ae,Ct,ht),Ct},q=function(De){var Ae=De.formattedValue;Ae===void 0&&(Ae="");var Ge=De.input,ht=De.source,Ct=De.event,Se=De.numAsString,ue;if(Ge){var Ve=De.inputValue||Ge.value,st=v8(Ge);Ge.value=Ae,ue=j(Ve,Ae,st),ue!==void 0&&z(Ge,ue,Ae)}Ae!==C&&P(D(Ae,Se),{event:Ct,source:ht})};I.useEffect(function(){var De=O.current,Ae=De.formattedValue,Ge=De.numAsString;(C!==Ae||A!==Ge)&&P(D(C,A),{event:void 0,source:iA.props})},[C,A]);var G=U.current?v8(U.current):void 0,te=typeof window<"u"?I.useLayoutEffect:I.useEffect;te(function(){var De=U.current;if(C!==O.current.formattedValue&&De){var Ae=j(O.current.formattedValue,C,G);De.value=C,z(De,Ae,C)}},[C]);var ve=function(De,Ae,Ge){var ht=Ae.target,Ct=k.current?FGe(k.current,ht.selectionEnd):S_e(C,De),Se=Object.assign(Object.assign({},Ct),{lastValue:C}),ue=a(De,Se),Ve=V(ue);if(ue=a(Ve,void 0),f&&!f(D(Ve,ue))){var st=Ae.target,ge=v8(st),Ne=j(De,C,ge);return st.value=C,z(st,Ne,C),!1}return q({formattedValue:Ve,numAsString:ue,inputValue:De,event:Ae,source:Ge,input:Ae.target}),!0},he=function(De,Ae){Ae===void 0&&(Ae=0);var Ge=De.selectionStart,ht=De.selectionEnd;k.current={selectionStart:Ge,selectionEnd:ht+Ae}},ce=function(De){var Ae=De.target,Ge=Ae.value,ht=ve(Ge,De,iA.event);ht&&d(De),k.current=void 0},me=function(De){var Ae=De.target,Ge=De.key,ht=Ae.selectionStart,Ct=Ae.selectionEnd,Se=Ae.value;Se===void 0&&(Se="");var ue;Ge==="ArrowLeft"||Ge==="Backspace"?ue=Math.max(ht-1,0):Ge==="ArrowRight"?ue=Math.min(ht+1,Se.length):Ge==="Delete"&&(ue=ht);var Ve=0;Ge==="Delete"&&ht===Ct&&(Ve=1);var st=Ge==="ArrowLeft"||Ge==="ArrowRight";if(ue===void 0||ht!==Ct&&!st){h(De),he(Ae,Ve);return}var ge=ue;if(st){var Ne=Ge==="ArrowLeft"?"left":"right";ge=W(Se,ue,Ne),ge!==ue&&De.preventDefault()}else Ge==="Delete"&&!b(Se[ue])?ge=W(Se,ue,"right"):Ge==="Backspace"&&!b(Se[ue])&&(ge=W(Se,ue,"left"));ge!==ue&&z(Ae,ge,Se),h(De),he(Ae,Ve)},Le=function(De){var Ae=De.target,Ge=function(){var ht=Ae.selectionStart,Ct=Ae.selectionEnd,Se=Ae.value;if(Se===void 0&&(Se=""),ht===Ct){var ue=W(Se,ht);ue!==ht&&z(Ae,ue,Se)}};Ge(),requestAnimationFrame(function(){Ge()}),p(De),he(Ae)},fe=function(De){De.persist&&De.persist();var Ae=De.target,Ge=De.currentTarget;U.current=Ae,B.current.focusTimeout=setTimeout(function(){var ht=Ae.selectionStart,Ct=Ae.selectionEnd,Se=Ae.value;Se===void 0&&(Se="");var ue=W(Se,ht);ue!==ht&&!(ht===0&&Ct===Se.length)&&z(Ae,ue,Se),m(Object.assign(Object.assign({},De),{currentTarget:Ge}))},0)},ct=function(De){U.current=null,clearTimeout(B.current.focusTimeout),clearTimeout(B.current.setCaretTimeout),g(De)},ze=L&&BGe()?"numeric":void 0,Ke=Object.assign({inputMode:ze},E,{type:t,value:C,onChange:ce,onKeyDown:me,onMouseUp:Le,onFocus:fe,onBlur:ct});if(n==="text")return i?Wi.createElement(Wi.Fragment,null,i(C,E)||null):Wi.createElement("span",Object.assign({},E,{ref:s}),C);if(r){var it=r;return Wi.createElement(it,Object.assign({},Ke,{ref:s}))}return Wi.createElement("input",Object.assign({},Ke,{ref:s}))}function voe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=CL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=kG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=E_e(p,n,!!r)),l&&(h=$Ge(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function CL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function YGe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function KGe(e,t){return new RegExp("(^-)|[0-9]|"+w_e(e),"g")}function XGe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function QGe(e,t,n){var r;t===void 0&&(t=UGe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=CL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(sA(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(U,B,V){var D=!1,z=!1;s.startsWith("-")?D=!1:U.startsWith("--")?(D=!1,z=!0):o.startsWith("-")&&U.length===o.length?D=!1:U[0]==="-"&&(D=!0);var W=D?1:0;return z&&(W=2),W&&(U=U.substring(W),B-=W,V-=W),{value:U,start:B,end:V,hasNegation:D}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,S=w.end,T=w.value,C=e.substring(c,f);e.length&&T.length&&(E>T.length-o.length||S<s.length)&&!(C&&o.startsWith(C))&&(e=T);var A=0;e.startsWith(s)?A+=s.length:c<s.length&&(A=c),e=e.substring(A),f-=A;var N=e.length,k=e.length-o.length;e.endsWith(o)?N=k:(f>k||f>e.length-o.length)&&(N=f),e=e.substring(0,N),e=YGe(b?"-"+e:e,i),e=(e.match(KGe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(w_e(p),"g"),function(U,B){return B===O?".":""});var P=kG(e,i),$=P.beforeDecimal,L=P.afterDecimal,M=P.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(L)&&(e=M?"-":""),e}function JGe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function ZGe(e){var t=CL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function eYe(e){e=ZGe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Ng);var s=e.onBlur;s===void 0&&(s=Ng);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=b_e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=CL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(M){return voe(M,e)},b=function(M,U){return QGe(M,U,e)},w=xw(f)?c:f,E=d??XGe(w,l,t);xw(f)?xw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var S=function(M){return __e(M)?M:(typeof M=="number"&&(M=x_e(M)),E&&typeof a=="number"?goe(M,a,!!u):M)},T=T_e(S(f),S(c),!!E,v,b,h),C=T[0],A=C.numAsString,N=C.formattedValue,k=T[1],O=function(M){var U=M.target,B=M.key,V=U.selectionStart,D=U.selectionEnd,z=U.value;if(z===void 0&&(z=""),(B==="Backspace"||B==="Delete")&&D<l.length){M.preventDefault();return}if(V!==D){i(M);return}B==="Backspace"&&z[0]==="-"&&V===l.length+1&&n&&Tv(U,1),a&&u&&(B==="Backspace"&&z[V-1]===g?(Tv(U,V-1),M.preventDefault()):B==="Delete"&&z[V]===g&&M.preventDefault()),y!=null&&y.includes(B)&&z[V]===g&&Tv(U,V+1);var W=o===!0?",":o;B==="Backspace"&&z[V-1]===W&&Tv(U,V-1),B==="Delete"&&z[V]===W&&Tv(U,V+1),i(M)},P=function(M){var U=A;if(U.match(/\d/g)||(U=""),r||(U=LGe(U)),u&&a&&(U=goe(U,a,u)),U!==A){var B=voe(U,e);k({formattedValue:B,value:U,floatValue:parseFloat(U)},{event:M,source:iA.event})}s(M)},$=function(M){return M===g?!0:sA(M)},L=function(M){var U=M.currentValue,B=M.lastValue,V=M.formattedValue,D=M.currentValueIndex,z=M.formattedValueIndex,W=U[D],j=V[z],q=S_e(B,U),G=q.to;return D>=G.start&&D<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:N,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:L,onValueChange:k,format:v,removeFormatting:b,getCaretBoundary:function(M){return JGe(M,e)},onKeyDown:O,onBlur:P})}function tYe(e){var t=eYe(e);return Wi.createElement(GGe,Object.assign({},t))}function boe({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var AU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const nYe=/^(0\.0*|-0(\.0*)?)$/,rYe=/^-?0\d+(\.\d+)?\.?$/;function iYe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function _oe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const sYe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},oYe=(e,{size:t})=>({controls:{"--ni-chevron-size":Ht(t,"ni-chevron-size")}}),RG=Me((e,t)=>{const n=we("NumberInput",sYe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:S,onKeyDownCapture:T,handlersRef:C,startValue:A,disabled:N,rightSectionPointerEvents:k,allowNegative:O,readOnly:P,size:$,rightSectionWidth:L,stepHoldInterval:M,stepHoldDelay:U,allowLeadingZeros:B,withKeyboardEvents:V,trimLeadingZeroesOnBlur:D,...z}=n,W=mt({name:"NumberInput",classes:AU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:oYe}),{resolvedClassNames:j,resolvedStyles:q}=Pm({classNames:i,styles:s,props:n}),[G,te]=ls({value:c,defaultValue:f,onChange:u}),ve=U!==void 0&&M!==void 0,he=I.useRef(null),ce=I.useRef(null),me=I.useRef(0),Le=(ue,Ve)=>{Ve.source==="event"&&te(iYe(ue.floatValue)&&!nYe.test(ue.value)&&!(B&&rYe.test(ue.value))?ue.floatValue:ue.value),l==null||l(ue,Ve)},fe=ue=>{const Ve=String(ue).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return Ve?Math.max(0,(Ve[1]?Ve[1].length:0)-(Ve[2]?+Ve[2]:0)):0},ct=ue=>{he.current&&typeof ue<"u"&&he.current.setSelectionRange(ue,ue)},ze=I.useRef();ze.current=()=>{let ue;const Ve=fe(G),st=fe(p),ge=Math.max(Ve,st),Ne=10**ge;if(typeof G!="number"||Number.isNaN(G))ue=vc(A,h,d);else if(d!==void 0){const Je=(Math.round(G*Ne)+Math.round(p*Ne))/Ne;ue=Je<=d?Je:d}else ue=(Math.round(G*Ne)+Math.round(p*Ne))/Ne;const qe=ue.toFixed(ge);te(parseFloat(qe)),l==null||l({floatValue:parseFloat(qe),formattedValue:qe,value:qe},{source:"increment"}),setTimeout(()=>{var Je;return ct((Je=he.current)==null?void 0:Je.value.length)},0)};const Ke=I.useRef();Ke.current=()=>{let ue;const Ve=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,st=fe(G),ge=fe(p),Ne=Math.max(st,ge),qe=10**Ne;if(typeof G!="number"||Number.isNaN(G))ue=vc(A,Ve,d);else{const Et=(Math.round(G*qe)-Math.round(p*qe))/qe;ue=Ve!==void 0&&Et<Ve?Ve:Et}const Je=ue.toFixed(Ne);te(parseFloat(Je)),l==null||l({floatValue:parseFloat(Je),formattedValue:Je,value:Je},{source:"decrement"}),setTimeout(()=>{var Et;return ct((Et=he.current)==null?void 0:Et.value.length)},0)};const it=ue=>{S==null||S(ue),!(P||!V)&&(ue.key==="ArrowUp"&&(ue.preventDefault(),ze.current()),ue.key==="ArrowDown"&&(ue.preventDefault(),Ke.current()))},De=ue=>{if(T==null||T(ue),ue.key==="Backspace"){const Ve=he.current;Ve.selectionStart===0&&Ve.selectionStart===Ve.selectionEnd&&(ue.preventDefault(),window.setTimeout(()=>ct(0),0))}};eW(C,{increment:ze.current,decrement:Ke.current});const Ae=ue=>{ue?ze.current():Ke.current(),me.current+=1},Ge=ue=>{if(Ae(ue),ve){const Ve=typeof M=="number"?M:M(me.current);ce.current=window.setTimeout(()=>Ge(ue),Ve)}},ht=(ue,Ve)=>{var st;ue.preventDefault(),(st=he.current)==null||st.focus(),Ae(Ve),ve&&(ce.current=window.setTimeout(()=>Ge(Ve),U))},Ct=()=>{ce.current&&window.clearTimeout(ce.current),ce.current=null,me.current=0},Se=_.jsxs("div",{...W("controls"),children:[_.jsx(ws,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:N||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ue=>ue.preventDefault(),onPointerDown:ue=>{ht(ue,!0)},onPointerUp:Ct,onPointerLeave:Ct,children:_.jsx(boe,{direction:"up"})}),_.jsx(ws,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:N||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ue=>ue.preventDefault(),onPointerDown:ue=>{ht(ue,!1)},onPointerUp:Ct,onPointerLeave:Ct,children:_.jsx(boe,{direction:"down"})})]});return _.jsx(Yc,{component:tYe,allowNegative:O,className:Xi(AU.root,r),size:$,...z,readOnly:P,disabled:N,value:G,getInputRef:Ji(t,he),onValueChange:Le,rightSection:m||P?g:g||Se,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:De,rightSectionPointerEvents:k??(N?"none":void 0),rightSectionWidth:L??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:B,onBlur:ue=>{if(b==null||b(ue),v==="blur"&&typeof G=="number"&&vc(G,h,d)!==G&&te(vc(G,h,d)),D&&typeof G=="string"){const Ve=G.replace(/^0+/,""),st=parseFloat(Ve);te(Number.isNaN(st)||st>Number.MAX_SAFE_INTEGER?Ve:st)}},isAllowed:ue=>v==="strict"?y?y(ue)&&_oe(ue.floatValue,h,d):_oe(ue.floatValue,h,d):y?y(ue):!0})});RG.classes={...Yc.classes,...AU};RG.displayName="@mantine/core/NumberInput";const[aYe,C_e]=qs("Progress.Root component was not found in tree");var zI={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const uYe={},NG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=we("ProgressLabel",uYe,e),u=C_e();return _.jsx(be,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});NG.classes=zI;NG.displayName="@mantine/core/ProgressLabel";const lYe={},cYe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":Ht(t,"progress-size"),"--progress-radius":n===void 0?void 0:Mr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),AL=Me((e,t)=>{const n=we("ProgressRoot",lYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=mt({name:"Progress",classes:zI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cYe});return _.jsx(aYe,{value:{getStyles:d,autoContrast:l},children:_.jsx(be,{ref:t,...d("root"),...f})})});AL.classes=zI;AL.displayName="@mantine/core/ProgressRoot";const fYe={withAria:!0},IL=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=we("ProgressSection",fYe,e),p=C_e(),m=Ss(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(be,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":jr(l,m),"--progress-label-color":Cx(p.autoContrast,m)?my({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});IL.classes=zI;IL.displayName="@mantine/core/ProgressSection";const dYe={},$x=Me((e,t)=>{const n=we("Progress",dYe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Pm({classNames:i,styles:s,props:n});return _.jsx(AL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(IL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});$x.classes=zI;$x.displayName="@mantine/core/Progress";$x.Section=IL;$x.Root=AL;$x.Label=NG;const[hYe,A_e]=cb(),[pYe,mYe]=cb();var I_e={card:"m_9dc8ae12"};const gYe={withBorder:!0},yYe=(e,{radius:t})=>({card:{"--card-radius":Mr(t)}}),PG=Me((e,t)=>{const n=we("RadioCard",gYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=mt({name:"RadioCard",classes:I_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:yYe,rootSelector:"card"}),{dir:v}=Fh(),b=A_e(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),S=T=>{if(m==null||m(T),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(T.nativeEvent.code)){T.preventDefault();const C=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),A=C.findIndex(O=>O===T.target),N=A+1>=C.length?0:A+1,k=A-1<0?C.length-1:A-1;T.nativeEvent.code==="ArrowDown"&&(C[N].focus(),C[N].click()),T.nativeEvent.code==="ArrowUp"&&(C[k].focus(),C[k].click()),T.nativeEvent.code==="ArrowLeft"&&(C[v==="ltr"?k:N].focus(),C[v==="ltr"?k:N].click()),T.nativeEvent.code==="ArrowRight"&&(C[v==="ltr"?N:k].focus(),C[v==="ltr"?N:k].click())}};return _.jsx(pYe,{value:{checked:w},children:_.jsx(ws,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:T=>{h==null||h(T),b==null||b.onChange(d||"")},onKeyDown:S})})});PG.displayName="@mantine/core/RadioCard";PG.classes=I_e;const vYe={},DG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=we("RadioGroup",vYe,e),f=su(u),[d,h]=ls({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(hYe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(ri.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(sG,{role:"radiogroup",children:a})})})});DG.classes=ri.Wrapper.classes;DG.displayName="@mantine/core/RadioGroup";function k_e({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:xe(e),height:xe(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var R_e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const bYe={icon:k_e},_Ye=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Nc({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":Ht(r,"radio-size"),"--radio-radius":t===void 0?void 0:Mr(t),"--radio-color":s==="outline"?u:jr(n,e),"--radio-icon-size":Ht(r,"radio-icon-size"),"--radio-icon-color":i?jr(i,e):Cx(o,e)?my({color:n,theme:e,autoContrast:o}):void 0}}},OG=Me((e,t)=>{const n=we("RadioIndicator",bYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=mt({name:"RadioIndicator",classes:R_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ye,rootSelector:"indicator"}),E=mYe(),S=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(be,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:S,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});OG.displayName="@mantine/core/RadioIndicator";OG.classes=R_e;var N_e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const wYe={labelPosition:"right"},EYe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Nc({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":Ht(t,"radio-size"),"--radio-radius":n===void 0?void 0:Mr(n),"--radio-color":s==="outline"?u:jr(r,e),"--radio-icon-color":i?jr(i,e):Cx(o,e)?my({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":Ht(t,"radio-icon-size")}}},T1=Me((e,t)=>{const n=we("Radio",wYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=k_e,rootRef:E,iconColor:S,onChange:T,mod:C,...A}=n,N=mt({name:"Radio",classes:N_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EYe}),k=A_e(),O=(k==null?void 0:k.size)??c,P=n.size?c:O,{styleProps:$,rest:L}=db(A),M=su(l),U=k?{checked:k.value===L.value,name:L.name??k.name,onChange:B=>{k.onChange(B),T==null||T(B)}}:{};return _.jsx(aL,{...N("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:P,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":U.checked||void 0,variant:y,ref:E,mod:C,...$,...b,children:_.jsxs(be,{...N("inner"),mod:{"label-position":d},children:[_.jsx(be,{...N("radio",{focusable:!0,variant:y}),onChange:T,...L,...U,component:"input",mod:{error:!!p},ref:t,id:M,disabled:v,type:"radio"}),_.jsx(w,{...N("icon"),"aria-hidden":!0})]})})});T1.classes=N_e;T1.displayName="@mantine/core/Radio";T1.Group=DG;T1.Card=PG;T1.Indicator=OG;const xYe={duration:100,transition:"fade"};function SYe(e,t){return{...xYe,...t,...e}}function TYe({offset:e,position:t,defaultOpened:n}){const[r,i]=I.useState(n),s=I.useRef(),{x:o,y:a,elements:u,refs:l,update:c,placement:f}=TW({placement:t,middleware:[wW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),d=f.includes("right")?e:t.includes("left")?e*-1:0,h=f.includes("bottom")?e:t.includes("top")?e*-1:0,p=I.useCallback(({clientX:m,clientY:g})=>{l.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:m,y:g,left:m+d,top:g+h,right:m,bottom:g}}})},[u.reference]);return I.useEffect(()=>{if(l.floating.current){const m=s.current;m.addEventListener("mousemove",p);const g=qp(l.floating.current);return g.forEach(y=>{y.addEventListener("scroll",c)}),()=>{m.removeEventListener("mousemove",p),g.forEach(y=>{y.removeEventListener("scroll",c)})}}},[u.reference,l.floating.current,c,p,r]),{handleMouseMove:p,x:o,y:a,opened:r,setOpened:i,boundaryRef:s,floating:l.setFloating}}var kL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const CYe={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:qc("popover")},AYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Mr(t),"--tooltip-bg":n?jr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),$G=Me((e,t)=>{const n=we("TooltipFloating",CYe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,defaultOpened:b,variant:w,vars:E,portalProps:S,...T}=n,C=Ss(),A=mt({name:"TooltipFloating",props:n,classes:kL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:E,varsResolver:AYe}),{handleMouseMove:N,x:k,y:O,opened:P,boundaryRef:$,floating:L,setOpened:M}=TYe({offset:p,position:m,defaultOpened:b});if(!Nm(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const U=Ji($,r.ref,t),B=D=>{var z,W;(W=(z=r.props).onMouseEnter)==null||W.call(z,D),N(D),M(!0)},V=D=>{var z,W;(W=(z=r.props).onMouseLeave)==null||W.call(z,D),M(!1)};return _.jsxs(_.Fragment,{children:[_.jsx($I,{...S,withinPortal:s,children:_.jsx(be,{...T,...A("tooltip",{style:{...aW(o,C),zIndex:y,display:!v&&P?"block":"none",top:(O&&Math.round(O))??"",left:(k&&Math.round(k))??""}}),variant:w,ref:L,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:U,onMouseEnter:B,onMouseLeave:V})]})});$G.classes=kL;$G.displayName="@mantine/core/TooltipFloating";const P_e=I.createContext(!1),IYe=P_e.Provider,kYe=()=>I.useContext(P_e),RYe={openDelay:0,closeDelay:0};function D_e(e){const{openDelay:t,closeDelay:n,children:r}=we("TooltipGroup",RYe,e);return _.jsx(IYe,{value:!0,children:_.jsx(uVe,{delay:{open:t,close:n},children:r})})}D_e.displayName="@mantine/core/TooltipGroup";function NYe(e){var S,T,C;const[t,n]=I.useState(e.defaultOpened),i=typeof e.opened=="boolean"?e.opened:t,s=kYe(),o=su(),{delay:a,currentId:u,setCurrentId:l}=sbe(),c=I.useCallback(A=>{n(A),A&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=TW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[ebe(e.offset),wW({padding:8}),_U(),tbe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[wU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=mVe([aVe(h,{enabled:(S=e.events)==null?void 0:S.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((T=e.events)!=null&&T.touch)}),pVe(h,{enabled:(C=e.events)==null?void 0:C.focus,visibleOnly:!0}),yVe(h,{role:"tooltip"}),dVe(h,{enabled:typeof e.opened>"u"}),lVe(h,{id:o})]);dbe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),Rc(()=>{var A;(A=e.onPositionChange)==null||A.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const woe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:qc("popover"),positionDependencies:[]},PYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Mr(t),"--tooltip-bg":n?jr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),os=Me((e,t)=>{const n=we("Tooltip",woe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,defaultOpened:f,withinPortal:d,radius:h,color:p,classNames:m,styles:g,unstyled:y,style:v,className:b,withArrow:w,arrowSize:E,arrowOffset:S,arrowRadius:T,arrowPosition:C,offset:A,transitionProps:N,multiline:k,events:O,zIndex:P,disabled:$,positionDependencies:L,onClick:M,onMouseEnter:U,onMouseLeave:B,inline:V,variant:D,keepMounted:z,vars:W,portalProps:j,mod:q,floatingStrategy:G,...te}=we("Tooltip",woe,n),{dir:ve}=Fh(),he=I.useRef(null),ce=NYe({position:obe(ve,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,defaultOpened:f,events:O,arrowRef:he,arrowOffset:S,offset:typeof A=="number"?A+(w?E/2:0):A,positionDependencies:[...L,r],inline:V,strategy:G}),me=mt({name:"Tooltip",props:n,classes:kL,className:b,style:v,classNames:m,styles:g,unstyled:y,rootSelector:"tooltip",vars:W,varsResolver:PYe});if(!Nm(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const Le=Ji(ce.reference,r.ref,t),fe=SYe(N,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx($I,{...j,withinPortal:d,children:_.jsx(Om,{...fe,keepMounted:z,mounted:!$&&!!ce.opened,duration:ce.isGroupPhase?10:fe.duration,children:ct=>_.jsxs(be,{...te,variant:D,mod:[{multiline:k},q],...ce.getFloatingProps({ref:ce.floating,className:me("tooltip").className,style:{...me("tooltip").style,...ct,zIndex:P,top:ce.y??0,left:ce.x??0}}),children:[o,_.jsx(CW,{ref:he,arrowX:ce.arrowX,arrowY:ce.arrowY,visible:w,position:ce.placement,arrowSize:E,arrowOffset:S,arrowRadius:T,arrowPosition:C,...me("arrow")})]})})}),I.cloneElement(r,ce.getReferenceProps({onClick:M,onMouseEnter:U,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:Le,className:Xi(b,r.props.className),...r.props}))]})});os.classes=kL;os.displayName="@mantine/core/Tooltip";os.Floating=$G;os.Group=D_e;var O_e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const DYe={withItemsBorders:!0},OYe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Mr(t),"--sc-color":n?jr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":Ht(i,"sc-padding"),"--sc-font-size":co(i)}}),kO=Me((e,t)=>{var te,ve;const n=we("SegmentedControl",DYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:S,variant:T,autoContrast:C,withItemsBorders:A,mod:N,...k}=n,O=mt({name:"SegmentedControl",props:n,classes:O_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OYe}),P=Ss(),$=l.map(he=>typeof he=="string"?{label:he,value:he}:he),L=vUe(),[M,U]=I.useState(null),[B,V]=I.useState({}),D=(he,ce)=>{B[ce]=he,V(B)},[z,W]=ls({value:c,defaultValue:f,finalValue:Array.isArray(l)?((te=$.find(he=>!he.disabled))==null?void 0:te.value)??((ve=l[0])==null?void 0:ve.value)??null:null,onChange:d}),j=su(p),q=$.map(he=>I.createElement(be,{...O("control"),mod:{active:z===he.value,orientation:v},key:he.value},I.createElement("input",{...O("input"),disabled:m||he.disabled,type:"radio",name:j,value:he.value,id:`${j}-${he.value}`,checked:z===he.value,onChange:()=>!g&&W(he.value),"data-focus-ring":P.focusRing,key:`${he.value}-input`}),I.createElement(be,{component:"label",...O("label"),mod:{active:z===he.value&&!(m||he.disabled),disabled:m||he.disabled,"read-only":g},htmlFor:`${j}-${he.value}`,ref:ce=>D(ce,he.value),__vars:{"--sc-label-color":w!==void 0?my({color:w,theme:P,autoContrast:C}):void 0},key:`${he.value}-label`},_.jsx("span",{...O("innerLabel"),children:he.label})))),G=Ji(t,he=>U(he));return l.length===0?null:_.jsxs(be,{...O("root"),variant:T,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:L,"with-items-borders":A},N],...k,role:"radiogroup",children:[typeof z=="string"&&_.jsx(MW,{target:B[z],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),q]})});kO.classes=O_e;kO.displayName="@mantine/core/SegmentedControl";const $Ye={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},pE=Me((e,t)=>{const n=we("Select",$Ye,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:S,filter:T,limit:C,withScrollArea:A,maxDropdownHeight:N,size:k,searchable:O,rightSection:P,checkIconPosition:$,withCheckIcon:L,nothingFoundMessage:M,name:U,form:B,searchValue:V,defaultSearchValue:D,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:te,clearButtonProps:ve,hiddenInputProps:he,renderOption:ce,onClear:me,autoComplete:Le,scrollAreaProps:fe,...ct}=n,ze=I.useMemo(()=>kbe(m),[m]),Ke=I.useMemo(()=>GW(ze),[ze]),it=su(G),[De,Ae,Ge]=ls({value:g,defaultValue:y,finalValue:null,onChange:p}),ht=typeof De=="string"?Ke[De]:void 0,Ct=gUe(ht),[Se,ue]=ls({value:V,defaultValue:D,finalValue:ht?ht.label:"",onChange:z}),Ve=oL({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),Ve.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),Ve.resetSelectedOption()}}),{resolvedClassNames:st,resolvedStyles:ge}=Pm({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&Ve.selectFirstOption()},[v,De]),I.useEffect(()=>{g===null&&ue(""),typeof g=="string"&&ht&&((Ct==null?void 0:Ct.value)!==ht.value||(Ct==null?void 0:Ct.label)!==ht.label)&&ue(ht.label)},[g,ht]);const Ne=te&&!!De&&!S&&!E&&_.jsx(tn.ClearButton,{size:k,...ve,onClear:()=>{Ae(null,null),ue(""),me==null||me()}});return _.jsxs(_.Fragment,{children:[_.jsxs(tn,{store:Ve,__staticSelector:"Select",classNames:st,styles:ge,unstyled:s,readOnly:E,onOptionSubmit:qe=>{b==null||b(qe);const Je=W&&Ke[qe].value===De?null:Ke[qe],Et=Je?Je.value:null;Et!==De&&Ae(Et,Je),!Ge&&ue(typeof Et=="string"&&(Je==null?void 0:Je.label)||""),Ve.closeDropdown()},size:k,...w,children:[_.jsx(tn.Target,{targetType:O?"input":"button",autoComplete:Le,children:_.jsx(Yc,{id:it,ref:t,rightSection:P||Ne||_.jsx(tn.Chevron,{size:k,error:j,unstyled:s}),rightSectionPointerEvents:q||(Ne?"all":"none"),...ct,size:k,__staticSelector:"Select",disabled:S,readOnly:E||!O,value:Se,onChange:qe=>{ue(qe.currentTarget.value),Ve.openDropdown(),v&&Ve.selectFirstOption()},onFocus:qe=>{O&&Ve.openDropdown(),f==null||f(qe)},onBlur:qe=>{var Je;O&&Ve.closeDropdown(),ue(De!=null&&((Je=Ke[De])==null?void 0:Je.label)||""),d==null||d(qe)},onClick:qe=>{O?Ve.openDropdown():Ve.toggleDropdown(),h==null||h(qe)},classNames:st,styles:ge,unstyled:s,pointer:!O,error:j})}),_.jsx(Gbe,{data:ze,hidden:E||S,filter:T,search:Se,limit:C,hiddenWhenEmpty:!M,withScrollArea:A,maxDropdownHeight:N,filterOptions:O&&(ht==null?void 0:ht.label)!==Se,value:De,checkIconPosition:$,withCheckIcon:L,nothingFoundMessage:M,unstyled:s,labelId:ct.label?`${it}-label`:void 0,"aria-label":ct.label?void 0:ct["aria-label"],renderOption:ce,scrollAreaProps:fe})]}),_.jsx(tn.HiddenInput,{value:De,name:U,form:B,disabled:S,...he})]})});pE.classes={...Yc.classes,...tn.classes};pE.displayName="@mantine/core/Select";const[$_e,RL]=qs("SliderProvider was not found in tree"),MG=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=RL();return _.jsx(be,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});MG.displayName="@mantine/core/SliderRoot";const RO=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=RL(),[b,w]=I.useState(!1),E=l||s||b||h&&p;return _.jsxs(be,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:S=>S.stopPropagation(),children:[m,_.jsx(Om,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:S=>_.jsx("div",{...v("label",{style:S}),children:i})})]})});RO.displayName="@mantine/core/SliderThumb";function NO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function MYe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function M_e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=RL();if(!e)return null;const u=e.map((l,c)=>I.createElement(be,{...a("markWrapper"),__vars:{"--mark-offset":`${NO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(be,{...a("mark"),mod:{filled:MYe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}M_e.displayName="@mantine/core/SliderMarks";function LG({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=RL();return _.jsx(_.Fragment,{children:_.jsx(be,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(be,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(be,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(M_e,{...a,offset:i,disabled:r,inverted:s})]})})})}LG.displayName="@mantine/core/SliderTrack";function IU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function ac(e,t){return parseFloat(e.toFixed(t))}function L_e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var NL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const LYe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},FYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Ht(t,"slider-size"),"--slider-color":n?jr(n,e):void 0,"--slider-radius":i===void 0?void 0:Mr(i),"--slider-thumb-size":r!==void 0?xe(r):"calc(var(--slider-size) * 2)"}}),FG=Me((e,t)=>{const n=we("Slider",LYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:S,unstyled:T,scale:C,inverted:A,className:N,style:k,vars:O,hiddenInputProps:P,...$}=n,L=mt({name:"Slider",props:n,classes:NL,classNames:r,className:N,styles:i,style:k,vars:O,varsResolver:FYe,unstyled:T}),{dir:M}=Fh(),[U,B]=I.useState(!1),[V,D]=ls({value:typeof s=="number"?vc(s,l,c):s,defaultValue:typeof h=="number"?vc(h,l,c):h,finalValue:vc(0,l,c),onChange:o}),z=I.useRef(V),W=I.useRef(),j=I.useRef(),q=NO({value:V,min:l,max:c}),G=C(V),te=typeof g=="function"?g(G):g,ve=d??L_e(f),he=I.useCallback(({x:fe})=>{if(!S){const ct=IU({value:fe,min:l,max:c,step:f,precision:ve});D(ct),z.current=ct}},[S,l,c,f,ve,D]),{ref:ce,active:me}=YM(he,{onScrubEnd:()=>a==null?void 0:a(z.current)},M),Le=fe=>{var ct,ze,Ke,it,De,Ae;if(!S)switch(fe.key){case"ArrowUp":{fe.preventDefault(),(ct=j.current)==null||ct.focus();const Ge=ac(Math.min(Math.max(V+f,l),c),ve);D(Ge),a==null||a(Ge);break}case"ArrowRight":{fe.preventDefault(),(ze=j.current)==null||ze.focus();const Ge=ac(Math.min(Math.max(M==="rtl"?V-f:V+f,l),c),ve);D(Ge),a==null||a(Ge);break}case"ArrowDown":{fe.preventDefault(),(Ke=j.current)==null||Ke.focus();const Ge=ac(Math.min(Math.max(V-f,l),c),ve);D(Ge),a==null||a(Ge);break}case"ArrowLeft":{fe.preventDefault(),(it=j.current)==null||it.focus();const Ge=ac(Math.min(Math.max(M==="rtl"?V+f:V-f,l),c),ve);D(Ge),a==null||a(Ge);break}case"Home":{fe.preventDefault(),(De=j.current)==null||De.focus(),D(l),a==null||a(l);break}case"End":{fe.preventDefault(),(Ae=j.current)==null||Ae.focus(),D(c),a==null||a(c);break}}};return _.jsx($_e,{value:{getStyles:L},children:_.jsxs(MG,{...$,ref:Ji(t,W),onKeyDownCapture:Le,onMouseDownCapture:()=>{var fe;return(fe=W.current)==null?void 0:fe.focus()},size:u,disabled:S,children:[_.jsx(LG,{inverted:A,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:S,containerProps:{ref:ce,onMouseEnter:w?()=>B(!0):void 0,onMouseLeave:w?()=>B(!1):void 0},children:_.jsx(RO,{max:c,min:l,value:G,position:q,dragging:me,label:te,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:U,disabled:S,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...P})]})})});FG.classes=NL;FG.displayName="@mantine/core/Slider";function jYe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const BYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":Ht(t,"slider-size"),"--slider-color":n?jr(n,e):void 0,"--slider-radius":i===void 0?void 0:Mr(i),"--slider-thumb-size":r!==void 0?xe(r):"calc(var(--slider-size) * 2)"}}),UYe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},jG=Me((e,t)=>{const n=we("RangeSlider",UYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:S,showLabelOnHover:T,thumbChildren:C,disabled:A,unstyled:N,scale:k,inverted:O,className:P,style:$,vars:L,hiddenInputProps:M,...U}=n,B=mt({name:"Slider",props:n,classes:NL,classNames:r,className:P,styles:i,style:$,vars:L,varsResolver:BYe,unstyled:N}),{dir:V}=Fh(),[D,z]=I.useState(-1),[W,j]=I.useState(!1),[q,G]=ls({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),te=I.useRef(q),ve=I.useRef([]),he=I.useRef(void 0),ce=[NO({value:q[0],min:l,max:c}),NO({value:q[1],min:l,max:c})],me=p??L_e(h),Le=Se=>{G(Se),te.current=Se};I.useEffect(()=>{Array.isArray(s)&&(te.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const fe=(Se,ue,Ve)=>{const st=[...te.current];st[ue]=Se,ue===0&&(Se>st[1]-(f-1e-9)&&(st[1]=Math.min(Se+f,c)),Se>(c-(f-1e-9)||l)&&(st[ue]=te.current[ue]),st[1]-Se>d&&(st[1]=Se+d)),ue===1&&(Se<st[0]+f&&(st[0]=Math.max(Se-f,l)),Se<st[0]+f&&(st[ue]=te.current[ue]),Se-st[0]>d&&(st[0]=Se-d)),st[0]=ac(st[0],me),st[1]=ac(st[1],me),Le(st),Ve&&(a==null||a(te.current))},ct=Se=>{if(!A){const ue=IU({value:Se,min:l,max:c,step:h,precision:me});fe(ue,he.current,!1)}},{ref:ze,active:Ke}=YM(({x:Se})=>ct(Se),{onScrubEnd:()=>a==null?void 0:a(te.current)},V);function it(Se){he.current=Se}const De=Se=>{ze.current.focus();const ue=ze.current.getBoundingClientRect(),Ve=jYe(Se.nativeEvent),st=IU({value:Ve-ue.left,max:c,min:l,step:h,containerWidth:ue.width}),ge=Math.abs(q[0]-st)>Math.abs(q[1]-st)?1:0,Ne=V==="ltr"?ge:ge===1?0:1;he.current=Ne},Ae=()=>D!==1&&D!==0?(z(0),0):D,Ge=Se=>{if(!A)switch(Se.key){case"ArrowUp":{Se.preventDefault();const ue=Ae();ve.current[ue].focus(),fe(ac(Math.min(Math.max(te.current[ue]+h,l),c),me),ue,!0);break}case"ArrowRight":{Se.preventDefault();const ue=Ae();ve.current[ue].focus(),fe(ac(Math.min(Math.max(V==="rtl"?te.current[ue]-h:te.current[ue]+h,l),c),me),ue,!0);break}case"ArrowDown":{Se.preventDefault();const ue=Ae();ve.current[ue].focus(),fe(ac(Math.min(Math.max(te.current[ue]-h,l),c),me),ue,!0);break}case"ArrowLeft":{Se.preventDefault();const ue=Ae();ve.current[ue].focus(),fe(ac(Math.min(Math.max(V==="rtl"?te.current[ue]+h:te.current[ue]-h,l),c),me),ue,!0);break}}},ht={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},Ct=Array.isArray(C);return _.jsx($_e,{value:{getStyles:B},children:_.jsxs(MG,{...U,size:u,ref:t,disabled:A,children:[_.jsxs(LG,{offset:ce[0],marksOffset:q[0],filled:ce[1]-ce[0],marks:y,inverted:O,min:l,max:c,value:q[1],disabled:A,containerProps:{ref:ze,onMouseEnter:T?()=>j(!0):void 0,onMouseLeave:T?()=>j(!1):void 0,onTouchStartCapture:De,onTouchEndCapture:()=>{he.current=-1},onMouseDownCapture:De,onMouseUpCapture:()=>{he.current=-1},onKeyDownCapture:Ge},children:[_.jsx(RO,{...ht,value:k(q[0]),position:ce[0],dragging:Ke,label:typeof v=="function"?v(ac(k(q[0]),me)):v,ref:Se=>{ve.current[0]=Se},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:T,isHovered:W,disabled:A,children:Ct?C[0]:C}),_.jsx(RO,{...ht,thumbLabel:S,value:k(q[1]),position:ce[1],dragging:Ke,label:typeof v=="function"?v(ac(k(q[1]),me)):v,ref:Se=>{ve.current[1]=Se},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:T,isHovered:W,disabled:A,children:Ct?C[1]:C})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...M}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...M})]})})});jG.classes=NL;jG.displayName="@mantine/core/RangeSlider";const zYe={},Tc=Me((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=we("Space",zYe,e);return _.jsx(be,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});Tc.displayName="@mantine/core/Space";var F_e={root:"m_6d731127"};const VYe={gap:"md",align:"stretch",justify:"flex-start"},HYe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":qu(t),"--stack-align":n,"--stack-justify":r}}),ro=Me((e,t)=>{const n=we("Stack",VYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=mt({name:"Stack",props:n,classes:F_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HYe});return _.jsx(be,{ref:t,...p("root"),variant:d,...h})});ro.classes=F_e;ro.displayName="@mantine/core/Stack";const j_e=I.createContext(null),qYe=j_e.Provider,WYe=()=>I.useContext(j_e),GYe={},BG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=we("SwitchGroup",GYe,e),[c,f]=ls({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(qYe,{value:{value:c,onChange:d,size:s},children:_.jsx(ri.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(sG,{role:"group",children:a})})})});BG.classes=ri.Wrapper.classes;BG.displayName="@mantine/core/SwitchGroup";var B_e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const YYe={labelPosition:"right"},KYe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Mr(t),"--switch-height":Ht(r,"switch-height"),"--switch-width":Ht(r,"switch-width"),"--switch-thumb-size":Ht(r,"switch-thumb-size"),"--switch-label-font-size":Ht(r,"switch-label-font-size"),"--switch-track-label-padding":Ht(r,"switch-track-label-padding"),"--switch-color":n?jr(n,e):void 0}}),Sw=Me((e,t)=>{const n=we("Switch",YYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:S,description:T,error:C,disabled:A,variant:N,rootRef:k,mod:O,...P}=n,$=WYe(),L=p||($==null?void 0:$.size),M=mt({name:"Switch",props:n,classes:B_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KYe}),{styleProps:U,rest:B}=db(P),V=su(h),D=$?{checked:$.value.includes(B.value),onChange:$.onChange}:{},[z,W]=ls({value:D.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(aL,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:V,size:L,labelPosition:S,label:c,description:T,error:C,disabled:A,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":D.checked||void 0,variant:N,ref:k,mod:O,...U,...g,children:[_.jsx("input",{...B,disabled:A,checked:z,onChange:j=>{var q;$?(q=D.onChange)==null||q.call(D,j):E==null||E(j),W(j.currentTarget.checked)},id:V,ref:t,type:"checkbox",role:"switch",...M("input")}),_.jsxs(be,{"aria-hidden":"true",mod:{error:C,"label-position":S},...M("track"),children:[_.jsx(be,{component:"span",mod:"reduce-motion",...M("thumb"),children:v}),_.jsx("span",{...M("trackLabel"),children:z?d:f})]})]})});Sw.classes={...B_e,...Mbe};Sw.displayName="@mantine/core/Switch";Sw.Group=BG;const[XYe,QYe]=qs("Table component was not found in the tree");var VI={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function JYe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function mb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Me((i,s)=>{const o=we(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=QYe();return _.jsx(be,{component:e,ref:s,...JYe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=VI,r}const kU=mb("th",{columnBorder:!0}),U_e=mb("td",{columnBorder:!0}),GP=mb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),z_e=mb("thead",{stickyHeader:!0}),V_e=mb("tbody"),H_e=mb("tfoot"),q_e=mb("caption",{captionSide:!0});function UG({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(q_e,{children:e.caption}),e.head&&_.jsx(z_e,{children:_.jsx(GP,{children:e.head.map((t,n)=>_.jsx(kU,{children:t},n))})}),e.body&&_.jsx(V_e,{children:e.body.map((t,n)=>_.jsx(GP,{children:t.map((r,i)=>_.jsx(U_e,{children:r},i))},n))}),e.foot&&_.jsx(H_e,{children:_.jsx(GP,{children:e.foot.map((t,n)=>_.jsx(kU,{children:t},n))})})]})}UG.displayName="@mantine/core/TableDataRenderer";const ZYe={type:"scrollarea"},eKe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":xe(t),"--table-overflow":n==="native"?"auto":void 0}}),zG=Me((e,t)=>{const n=we("TableScrollContainer",ZYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=mt({name:"TableScrollContainer",classes:VI,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eKe,rootSelector:"scrollContainer"});return _.jsx(be,{component:f==="scrollarea"?hb:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});zG.classes=VI;zG.displayName="@mantine/core/TableScrollContainer";const tKe={withRowBorders:!0,verticalSpacing:7},nKe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":qu(r),"--table-vertical-spacing":qu(i),"--table-border-color":s?jr(s,e):void 0,"--table-striped-color":u&&o?jr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?jr(a,e):void 0,"--table-sticky-header-offset":f?xe(c):void 0}}),Zs=Me((e,t)=>{const n=we("Table",tKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:S,children:T,stickyHeader:C,stickyHeaderOffset:A,mod:N,...k}=n,O=mt({name:"Table",props:n,className:i,style:s,classes:VI,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:nKe});return _.jsx(XYe,{value:{getStyles:O,stickyHeader:C,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(be,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},N],...O("table"),...k,children:T||!!S&&_.jsx(UG,{data:S})})})});Zs.classes=VI;Zs.displayName="@mantine/core/Table";Zs.Td=U_e;Zs.Th=kU;Zs.Tr=GP;Zs.Thead=z_e;Zs.Tbody=V_e;Zs.Tfoot=H_e;Zs.Caption=q_e;Zs.ScrollContainer=zG;Zs.DataRenderer=UG;const[rKe,VG]=qs("Tabs component was not found in the tree");var HI={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const iKe={},HG=Me((e,t)=>{const n=we("TabsList",iKe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=VG();return _.jsx(be,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});HG.classes=HI;HG.displayName="@mantine/core/TabsList";const sKe={},qG=Me((e,t)=>{const n=we("TabsPanel",sKe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=VG(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(be,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});qG.classes=HI;qG.displayName="@mantine/core/TabsPanel";const oKe={},WG=Me((e,t)=>{const n=we("TabsTab",oKe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=Ss(),{dir:b}=Fh(),w=VG(),E=a===w.value,S=C=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(C)},T={classNames:h,styles:p,props:n};return _.jsxs(ws,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...T}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:S,__vars:{"--tabs-color":f?jr(f,v):void 0},onKeyDown:Qq({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",T),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",T),"data-position":"right",children:s})]})});WG.classes=HI;WG.displayName="@mantine/core/TabsTab";const Eoe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",aKe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},uKe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Mr(t),"--tabs-color":jr(n,e),"--tabs-text-color":Cx(r,e)?my({color:n,theme:e,autoContrast:r}):void 0}}),gs=Me((e,t)=>{const n=we("Tabs",aKe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:S,vars:T,autoContrast:C,mod:A,...N}=n,k=su(l),[O,P]=ls({value:i,defaultValue:r,finalValue:null,onChange:s}),$=mt({name:"Tabs",props:n,classes:HI,className:E,style:S,classNames:v,styles:b,unstyled:w,vars:T,varsResolver:uKe});return _.jsx(rKe,{value:{placement:g,value:O,orientation:o,id:k,loop:u,activateTabWithKeyboard:c,getTabId:wO(`${k}-tab`,Eoe),getPanelId:wO(`${k}-panel`,Eoe),onChange:P,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(be,{ref:t,id:k,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},A],...$("root"),...N,children:a})})});gs.classes=HI;gs.displayName="@mantine/core/Tabs";gs.Tab=WG;gs.Panel=qG;gs.List=HG;const lKe={},l0=Me((e,t)=>{const n=we("TextInput",lKe,e);return _.jsx(Yc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});l0.classes=Yc.classes;l0.displayName="@mantine/core/TextInput";const cKe=["h1","h2","h3","h4","h5","h6"];function fKe(e,t){const n=t!==void 0?t:`h${e}`;return cKe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:xe(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var W_e={root:"m_8a5d1357"};const dKe={order:1},hKe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=fKe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},ki=Me((e,t)=>{const n=we("Title",dKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=mt({name:"Title",props:n,classes:W_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:hKe});return[1,2,3,4,5,6].includes(u)?_.jsx(be,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});ki.classes=W_e;ki.displayName="@mantine/core/Title";var G_e={root:"m_d6493fad"};const pKe={},ew=Me((e,t)=>{const n=we("TypographyStylesProvider",pKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,...u}=n,l=mt({name:"TypographyStylesProvider",classes:G_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(be,{ref:t,...l("root"),...u})});ew.classes=G_e;ew.displayName="@mantine/core/TypographyStylesProvider";const Y_e=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),Di=()=>I.useContext(Y_e);function mKe({children:e}){const[t,n]=Wi.useState(void 0),r=Wi.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(Y_e.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function oA(){return oA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},oA.apply(this,arguments)}var Bg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Bg||(Bg={}));const xoe="popstate";function gKe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return RU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:PO(i)}return vKe(t,n,null,e)}function us(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function K_e(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function yKe(){return Math.random().toString(36).substr(2,8)}function Soe(e,t){return{usr:e.state,key:e.key,idx:t}}function RU(e,t,n,r){return n===void 0&&(n=null),oA({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Mx(t):t,{state:n,key:t&&t.key||r||yKe()})}function PO(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Mx(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function vKe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Bg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(oA({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Bg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Bg.Push;let v=RU(m.location,g,y);l=c()+1;let b=Soe(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Bg.Replace;let v=RU(m.location,g,y);l=c();let b=Soe(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:PO(g);return v=v.replace(/ $/,"%20"),us(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(xoe,f),u=g,()=>{i.removeEventListener(xoe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Toe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Toe||(Toe={}));function bKe(e,t,n){return n===void 0&&(n="/"),_Ke(e,t,n,!1)}function _Ke(e,t,n,r){let i=typeof t=="string"?Mx(t):t,s=GG(i.pathname||"/",n);if(s==null)return null;let o=X_e(e);wKe(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let l=PKe(s);a=RKe(o[u],l,r)}return a}function X_e(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(us(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=c0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(us(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),X_e(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:IKe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of Q_e(s.path))i(s,o,u)}),t}function Q_e(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Q_e(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function wKe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:kKe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const EKe=/^:[\w-]+$/,xKe=3,SKe=2,TKe=1,CKe=10,AKe=-2,Coe=e=>e==="*";function IKe(e,t){let n=e.split("/"),r=n.length;return n.some(Coe)&&(r+=AKe),t&&(r+=SKe),n.filter(i=>!Coe(i)).reduce((i,s)=>i+(EKe.test(s)?xKe:s===""?TKe:CKe),r)}function kKe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function RKe(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],l=a===r.length-1,c=s==="/"?t:t.slice(s.length)||"/",f=Aoe({path:u.relativePath,caseSensitive:u.caseSensitive,end:l},c),d=u.route;if(!f&&l&&n&&!r[r.length-1].route.index&&(f=Aoe({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},c)),!f)return null;Object.assign(i,f.params),o.push({params:i,pathname:c0([s,f.pathname]),pathnameBase:MKe(c0([s,f.pathnameBase])),route:d}),f.pathnameBase!=="/"&&(s=c0([s,f.pathnameBase]))}return o}function Aoe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=NKe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function NKe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),K_e(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function PKe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return K_e(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function GG(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function DKe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Mx(e):e;return{pathname:n?n.startsWith("/")?n:OKe(n,t):t,search:LKe(r),hash:FKe(i)}}function OKe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function b8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $Ke(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function YG(e,t){let n=$Ke(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function KG(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Mx(e):(i=oA({},e),us(!i.pathname||!i.pathname.includes("?"),b8("?","pathname","search",i)),us(!i.pathname||!i.pathname.includes("#"),b8("#","pathname","hash",i)),us(!i.search||!i.search.includes("#"),b8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=DKe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const c0=e=>e.join("/").replace(/\/\/+/g,"/"),MKe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),LKe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,FKe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function jKe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const J_e=["post","put","patch","delete"];new Set(J_e);const BKe=["get",...J_e];new Set(BKe);/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function aA(){return aA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},aA.apply(this,arguments)}const XG=I.createContext(null),UKe=I.createContext(null),by=I.createContext(null),PL=I.createContext(null),Bh=I.createContext({outlet:null,matches:[],isDataRoute:!1}),Z_e=I.createContext(null);function QG(e,t){let{relative:n}=t===void 0?{}:t;Lx()||us(!1);let{basename:r,navigator:i}=I.useContext(by),{hash:s,pathname:o,search:a}=twe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:c0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function Lx(){return I.useContext(PL)!=null}function Fm(){return Lx()||us(!1),I.useContext(PL).location}function ewe(e){I.useContext(by).static||I.useLayoutEffect(e)}function Kl(){let{isDataRoute:e}=I.useContext(Bh);return e?tXe():zKe()}function zKe(){Lx()||us(!1);let e=I.useContext(XG),{basename:t,future:n,navigator:r}=I.useContext(by),{matches:i}=I.useContext(Bh),{pathname:s}=Fm(),o=JSON.stringify(YG(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return ewe(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=KG(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:c0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const VKe=I.createContext(null);function HKe(e){let t=I.useContext(Bh).outlet;return t&&I.createElement(VKe.Provider,{value:e},t)}function Eh(){let{matches:e}=I.useContext(Bh),t=e[e.length-1];return t?t.params:{}}function twe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(by),{matches:i}=I.useContext(Bh),{pathname:s}=Fm(),o=JSON.stringify(YG(i,r.v7_relativeSplatPath));return I.useMemo(()=>KG(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function nwe(e,t){return qKe(e,t)}function qKe(e,t,n,r){Lx()||us(!1);let{navigator:i}=I.useContext(by),{matches:s}=I.useContext(Bh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Fm(),c;if(t){var f;let g=typeof t=="string"?Mx(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||us(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=bKe(e,{pathname:h}),m=XKe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:c0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:c0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(PL.Provider,{value:{location:aA({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Bg.Pop}},m):m}function WKe(){let e=eXe(),t=jKe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const GKe=I.createElement(WKe,null);class YKe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(Bh.Provider,{value:this.props.routeContext},I.createElement(Z_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function KKe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(XG);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Bh.Provider,{value:t},r)}function XKe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||us(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||GKe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,I.createElement(KKe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(YKe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var rwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(rwe||{}),DO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(DO||{});function QKe(e){let t=I.useContext(XG);return t||us(!1),t}function JKe(e){let t=I.useContext(UKe);return t||us(!1),t}function ZKe(e){let t=I.useContext(Bh);return t||us(!1),t}function iwe(e){let t=ZKe(),n=t.matches[t.matches.length-1];return n.route.id||us(!1),n.route.id}function eXe(){var e;let t=I.useContext(Z_e),n=JKe(DO.UseRouteError),r=iwe(DO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function tXe(){let{router:e}=QKe(rwe.UseNavigateStable),t=iwe(DO.UseNavigateStable),n=I.useRef(!1);return ewe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,aA({fromRouteId:t},s)))},[e,t])}function JG(e){let{to:t,replace:n,state:r,relative:i}=e;Lx()||us(!1);let{future:s,static:o}=I.useContext(by),{matches:a}=I.useContext(Bh),{pathname:u}=Fm(),l=Kl(),c=KG(t,YG(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function nXe(e){return HKe(e.context)}function gp(e){us(!1)}function rXe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Bg.Pop,navigator:s,static:o=!1,future:a}=e;Lx()&&us(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:aA({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=Mx(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=GG(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(by.Provider,{value:l},I.createElement(PL.Provider,{children:n,value:m}))}function iXe(e){let{children:t,location:n}=e;return nwe(NU(t),n)}new Promise(()=>{});function NU(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,NU(r.props.children,s));return}r.type!==gp&&us(!1),!r.props.index||!r.props.children||us(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=NU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function PU(){return PU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PU.apply(this,arguments)}function sXe(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function oXe(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function aXe(e,t){return e.button===0&&(!t||t==="_self")&&!oXe(e)}function DU(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function uXe(e,t){let n=DU(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const lXe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],cXe="6";try{window.__reactRouterVersion=cXe}catch{}const fXe="startTransition",Ioe=KD[fXe];function dXe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=gKe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&Ioe?Ioe(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(rXe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const hXe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",pXe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,swe=I.forwardRef(function(t,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:u,to:l,preventScrollReset:c,unstable_viewTransition:f}=t,d=sXe(t,lXe),{basename:h}=I.useContext(by),p,m=!1;if(typeof l=="string"&&pXe.test(l)&&(p=l,hXe))try{let b=new URL(window.location.href),w=l.startsWith("//")?new URL(b.protocol+l):new URL(l),E=GG(w.pathname,h);w.origin===b.origin&&E!=null?l=E+w.search+w.hash:m=!0}catch{}let g=QG(l,{relative:i}),y=mXe(l,{replace:o,state:a,target:u,preventScrollReset:c,relative:i,unstable_viewTransition:f});function v(b){r&&r(b),b.defaultPrevented||y(b)}return I.createElement("a",PU({},d,{href:p||g,onClick:m||s?r:v,ref:n,target:u}))});var koe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(koe||(koe={}));var Roe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Roe||(Roe={}));function mXe(e,t){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=t===void 0?{}:t,u=Kl(),l=Fm(),c=twe(e,{relative:o});return I.useCallback(f=>{if(aXe(f,n)){f.preventDefault();let d=r!==void 0?r:PO(l)===PO(c);u(e,{replace:d,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[l,u,c,r,i,n,e,s,o,a])}function ZG(e){let t=I.useRef(DU(e)),n=I.useRef(!1),r=Fm(),i=I.useMemo(()=>uXe(r.search,n.current?null:t.current),[r.search]),s=Kl(),o=I.useCallback((a,u)=>{const l=DU(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const eY=I.createContext(null);eY.displayName="@mantine/modals/ModalsContext";function gXe(){const e=I.useContext(eY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function yXe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=gXe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(be,{mb:"md",children:l}),_.jsxs(mr,{mt:l?0:"md",justify:"flex-end",...o,children:[_.jsx(On,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(On,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[vXe,DL]=EUe("mantine-modals");DL("openModal");DL("closeModal");DL("closeAllModals");const Noe=DL("openConfirmModal");function Poe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function bXe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Poe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Poe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function _Xe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function wXe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(bXe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||KC();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||KC();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const b=y||KC();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);vXe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=_Xe(g.props);return{modalProps:y,content:_.jsx(yXe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(eY.Provider,{value:d,children:[_.jsx(Es,{zIndex:qc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var EXe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,title:u,className:l,children:c,...f},d)=>I.createElement("svg",{ref:d,...EXe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,l].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...f},[u&&I.createElement("title",{key:"svg-title"},u),...r.map(([h,p])=>I.createElement(h,p)),...Array.isArray(c)?c:[c]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var xXe=lr("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Doe=lr("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var SXe=lr("outline","arrow-left","IconArrowLeft",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M5 12l6 6",key:"svg-1"}],["path",{d:"M5 12l6 -6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var TXe=lr("outline","arrow-right","IconArrowRight",[["path",{d:"M5 12l14 0",key:"svg-0"}],["path",{d:"M13 18l6 -6",key:"svg-1"}],["path",{d:"M13 6l6 6",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CXe=lr("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var AXe=lr("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IXe=lr("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kXe=lr("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RXe=lr("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NXe=lr("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PXe=lr("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DXe=lr("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OXe=lr("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Xe=lr("outline","edit","IconEdit",[["path",{d:"M7 7h-1a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-1",key:"svg-0"}],["path",{d:"M20.385 6.585a2.1 2.1 0 0 0 -2.97 -2.97l-8.415 8.385v3h3l8.385 -8.415z",key:"svg-1"}],["path",{d:"M16 5l3 3",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MXe=lr("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var owe=lr("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LXe=lr("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FXe=lr("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ooe=lr("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jXe=lr("outline","plus","IconPlus",[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BXe=lr("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UXe=lr("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zXe=lr("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var awe=lr("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VXe=lr("outline","sticker-2","IconSticker2",[["path",{d:"M6 4h12a2 2 0 0 1 2 2v7h-5a2 2 0 0 0 -2 2v5h-7a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2z",key:"svg-0"}],["path",{d:"M20 13v.172a2 2 0 0 1 -.586 1.414l-4.828 4.828a2 2 0 0 1 -1.414 .586h-.172",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uwe=lr("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HXe=lr("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lwe=lr("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tY=lr("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cwe=lr("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qXe=lr("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WXe=lr("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.10.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GXe=lr("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function fwe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const cd="/guardrails-think-aloud/";function $oe(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function dwe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const YXe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,KXe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,XXe={};function Moe(e,t){return(XXe.jsx?KXe:YXe).test(e)}const QXe=/[ \t\n\f\r]/g;function JXe(e){return typeof e=="object"?e.type==="text"?Loe(e.value):!1:Loe(e)}function Loe(e){return e.replace(QXe,"")===""}let qI=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};qI.prototype.property={};qI.prototype.normal={};qI.prototype.space=null;function hwe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new qI(n,r,t)}function uA(e){return e.toLowerCase()}let Xc=class{constructor(t,n){this.property=t,this.attribute=n}};Xc.prototype.space=null;Xc.prototype.boolean=!1;Xc.prototype.booleanish=!1;Xc.prototype.overloadedBoolean=!1;Xc.prototype.number=!1;Xc.prototype.commaSeparated=!1;Xc.prototype.spaceSeparated=!1;Xc.prototype.commaOrSpaceSeparated=!1;Xc.prototype.mustUseProperty=!1;Xc.prototype.defined=!1;let ZXe=0;const yn=gb(),ms=gb(),pwe=gb(),ot=gb(),ei=gb(),Tw=gb(),ll=gb();function gb(){return 2**++ZXe}const OU=Object.freeze(Object.defineProperty({__proto__:null,boolean:yn,booleanish:ms,commaOrSpaceSeparated:ll,commaSeparated:Tw,number:ot,overloadedBoolean:pwe,spaceSeparated:ei},Symbol.toStringTag,{value:"Module"})),_8=Object.keys(OU);class nY extends Xc{constructor(t,n,r,i){let s=-1;if(super(t,n),Foe(this,"space",i),typeof r=="number")for(;++s<_8.length;){const o=_8[s];Foe(this,_8[s],(r&OU[o])===OU[o])}}}nY.prototype.defined=!0;function Foe(e,t,n){n&&(e[t]=n)}const eQe={}.hasOwnProperty;function Fx(e){const t={},n={};let r;for(r in e.properties)if(eQe.call(e.properties,r)){const i=e.properties[r],s=new nY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[uA(r)]=r,n[uA(s.attribute)]=r}return new qI(t,n,e.space)}const mwe=Fx({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),gwe=Fx({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function ywe(e,t){return t in e?e[t]:t}function vwe(e,t){return ywe(e,t.toLowerCase())}const bwe=Fx({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:vwe,properties:{xmlns:null,xmlnsXLink:null}}),_we=Fx({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:ms,ariaAutoComplete:null,ariaBusy:ms,ariaChecked:ms,ariaColCount:ot,ariaColIndex:ot,ariaColSpan:ot,ariaControls:ei,ariaCurrent:null,ariaDescribedBy:ei,ariaDetails:null,ariaDisabled:ms,ariaDropEffect:ei,ariaErrorMessage:null,ariaExpanded:ms,ariaFlowTo:ei,ariaGrabbed:ms,ariaHasPopup:null,ariaHidden:ms,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ei,ariaLevel:ot,ariaLive:null,ariaModal:ms,ariaMultiLine:ms,ariaMultiSelectable:ms,ariaOrientation:null,ariaOwns:ei,ariaPlaceholder:null,ariaPosInSet:ot,ariaPressed:ms,ariaReadOnly:ms,ariaRelevant:null,ariaRequired:ms,ariaRoleDescription:ei,ariaRowCount:ot,ariaRowIndex:ot,ariaRowSpan:ot,ariaSelected:ms,ariaSetSize:ot,ariaSort:null,ariaValueMax:ot,ariaValueMin:ot,ariaValueNow:ot,ariaValueText:null,role:null}}),tQe=Fx({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:vwe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Tw,acceptCharset:ei,accessKey:ei,action:null,allow:null,allowFullScreen:yn,allowPaymentRequest:yn,allowUserMedia:yn,alt:null,as:null,async:yn,autoCapitalize:null,autoComplete:ei,autoFocus:yn,autoPlay:yn,blocking:ei,capture:null,charSet:null,checked:yn,cite:null,className:ei,cols:ot,colSpan:null,content:null,contentEditable:ms,controls:yn,controlsList:ei,coords:ot|Tw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yn,defer:yn,dir:null,dirName:null,disabled:yn,download:pwe,draggable:ms,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yn,formTarget:null,headers:ei,height:ot,hidden:yn,high:ot,href:null,hrefLang:null,htmlFor:ei,httpEquiv:ei,id:null,imageSizes:null,imageSrcSet:null,inert:yn,inputMode:null,integrity:null,is:null,isMap:yn,itemId:null,itemProp:ei,itemRef:ei,itemScope:yn,itemType:ei,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yn,low:ot,manifest:null,max:null,maxLength:ot,media:null,method:null,min:null,minLength:ot,multiple:yn,muted:yn,name:null,nonce:null,noModule:yn,noValidate:yn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yn,optimum:ot,pattern:null,ping:ei,placeholder:null,playsInline:yn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yn,referrerPolicy:null,rel:ei,required:yn,reversed:yn,rows:ot,rowSpan:ot,sandbox:ei,scope:null,scoped:yn,seamless:yn,selected:yn,shadowRootClonable:yn,shadowRootDelegatesFocus:yn,shadowRootMode:null,shape:null,size:ot,sizes:null,slot:null,span:ot,spellCheck:ms,src:null,srcDoc:null,srcLang:null,srcSet:null,start:ot,step:null,style:null,tabIndex:ot,target:null,title:null,translate:null,type:null,typeMustMatch:yn,useMap:null,value:ms,width:ot,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ei,axis:null,background:null,bgColor:null,border:ot,borderColor:null,bottomMargin:ot,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yn,declare:yn,event:null,face:null,frame:null,frameBorder:null,hSpace:ot,leftMargin:ot,link:null,longDesc:null,lowSrc:null,marginHeight:ot,marginWidth:ot,noResize:yn,noHref:yn,noShade:yn,noWrap:yn,object:null,profile:null,prompt:null,rev:null,rightMargin:ot,rules:null,scheme:null,scrolling:ms,standby:null,summary:null,text:null,topMargin:ot,valueType:null,version:null,vAlign:null,vLink:null,vSpace:ot,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yn,disableRemotePlayback:yn,prefix:null,property:null,results:ot,security:null,unselectable:null}}),nQe=Fx({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:ywe,properties:{about:ll,accentHeight:ot,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:ot,amplitude:ot,arabicForm:null,ascent:ot,attributeName:null,attributeType:null,azimuth:ot,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:ot,by:null,calcMode:null,capHeight:ot,className:ei,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:ot,diffuseConstant:ot,direction:null,display:null,dur:null,divisor:ot,dominantBaseline:null,download:yn,dx:null,dy:null,edgeMode:null,editable:null,elevation:ot,enableBackground:null,end:null,event:null,exponent:ot,externalResourcesRequired:null,fill:null,fillOpacity:ot,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Tw,g2:Tw,glyphName:Tw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:ot,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:ot,horizOriginX:ot,horizOriginY:ot,id:null,ideographic:ot,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:ot,k:ot,k1:ot,k2:ot,k3:ot,k4:ot,kernelMatrix:ll,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:ot,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:ot,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:ot,overlineThickness:ot,paintOrder:null,panose1:null,path:null,pathLength:ot,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ei,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:ot,pointsAtY:ot,pointsAtZ:ot,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:ll,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:ll,rev:ll,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:ll,requiredFeatures:ll,requiredFonts:ll,requiredFormats:ll,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:ot,specularExponent:ot,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:ot,strikethroughThickness:ot,string:null,stroke:null,strokeDashArray:ll,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:ot,strokeOpacity:ot,strokeWidth:null,style:null,surfaceScale:ot,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:ll,tabIndex:ot,tableValues:null,target:null,targetX:ot,targetY:ot,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:ll,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:ot,underlineThickness:ot,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:ot,values:null,vAlphabetic:ot,vMathematical:ot,vectorEffect:null,vHanging:ot,vIdeographic:ot,version:null,vertAdvY:ot,vertOriginX:ot,vertOriginY:ot,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:ot,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),rQe=/^data[-\w.:]+$/i,joe=/-[a-z]/g,iQe=/[A-Z]/g;function OL(e,t){const n=uA(t);let r=t,i=Xc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&rQe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(joe,oQe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!joe.test(s)){let o=s.replace(iQe,sQe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=nY}return new i(r,t)}function sQe(e){return"-"+e.toLowerCase()}function oQe(e){return e.charAt(1).toUpperCase()}const aQe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},WI=hwe([gwe,mwe,bwe,_we,tQe],"html"),_y=hwe([gwe,mwe,bwe,_we,nQe],"svg");function Boe(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function wwe(e){return e.join(" ").trim()}var Ewe={},Uoe=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,uQe=/\n/g,lQe=/^\s*/,cQe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,fQe=/^:\s*/,dQe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,hQe=/^[;\s]*/,pQe=/^\s+|\s+$/g,mQe=`
`,zoe="/",Voe="*",Cv="",gQe="comment",yQe="declaration",vQe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(uQe);m&&(n+=m.length);var g=p.lastIndexOf(mQe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(lQe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(zoe!=e.charAt(0)||Voe!=e.charAt(1))){for(var m=2;Cv!=e.charAt(m)&&(Voe!=e.charAt(m)||zoe!=e.charAt(m+1));)++m;if(m+=2,Cv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:gQe,comment:g})}}function d(){var p=s(),m=u(cQe);if(m){if(f(),!u(fQe))return a("property missing ':'");var g=u(dQe),y=p({type:yQe,property:Hoe(m[0].replace(Uoe,Cv)),value:g?Hoe(g[0].replace(Uoe,Cv)):Cv});return u(hQe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Hoe(e){return e?e.replace(pQe,Cv):Cv}var bQe=Ms&&Ms.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ewe,"__esModule",{value:!0});var _Qe=bQe(vQe);function wQe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,_Qe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var qoe=Ewe.default=wQe;const EQe=qoe.default||qoe,$L=xwe("end"),Uh=xwe("start");function xwe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function xQe(e){const t=Uh(e),n=$L(e);if(t&&n)return{start:t,end:n}}function XC(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?Woe(e.position):"start"in e||"end"in e?Woe(e):"line"in e||"column"in e?$U(e):""}function $U(e){return Goe(e&&e.line)+":"+Goe(e&&e.column)}function Woe(e){return $U(e&&e.start)+"-"+$U(e&&e.end)}function Goe(e){return e&&typeof e=="number"?e:1}class Ca extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=XC(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Ca.prototype.file="";Ca.prototype.name="";Ca.prototype.reason="";Ca.prototype.message="";Ca.prototype.stack="";Ca.prototype.column=void 0;Ca.prototype.line=void 0;Ca.prototype.ancestors=void 0;Ca.prototype.cause=void 0;Ca.prototype.fatal=void 0;Ca.prototype.place=void 0;Ca.prototype.ruleId=void 0;Ca.prototype.source=void 0;const rY={}.hasOwnProperty,SQe=new Map,TQe=/[A-Z]/g,CQe=/-([a-z])/g,AQe=new Set(["table","tbody","thead","tfoot","tr"]),IQe=new Set(["td","th"]),Swe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function kQe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=LQe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=MQe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?_y:WI,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Twe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Twe(e,t,n){if(t.type==="element")return RQe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return NQe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return DQe(e,t,n);if(t.type==="mdxjsEsm")return PQe(e,t);if(t.type==="root")return OQe(e,t,n);if(t.type==="text")return $Qe(e,t)}function RQe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=_y,e.schema=i),e.ancestors.push(t);const s=Awe(e,t.tagName,!1),o=FQe(e,t);let a=sY(e,t);return AQe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!JXe(u):!0})),Cwe(e,o,s,t),iY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function NQe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}lA(e,t.position)}function PQe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);lA(e,t.position)}function DQe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=_y,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Awe(e,t.name,!0),o=jQe(e,t),a=sY(e,t);return Cwe(e,o,s,t),iY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function OQe(e,t,n){const r={};return iY(r,sY(e,t)),e.create(t,e.Fragment,r,n)}function $Qe(e,t){return t.value}function Cwe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function iY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function MQe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function LQe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Uh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function FQe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&rY.call(t.properties,i)){const s=BQe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&IQe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function jQe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else lA(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else lA(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function sY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:SQe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Twe(e,s,o);a!==void 0&&n.push(a)}return n}function BQe(e,t,n){const r=OL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?dwe(n):wwe(n)),r.property==="style"){let i=typeof n=="object"?n:UQe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=zQe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?aQe[r.property]||r.property:r.attribute,n]}}function UQe(e,t){const n={};try{EQe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Ca("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Swe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(CQe,HQe)),n[o]=s}}function Awe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=Moe(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Moe(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return rY.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);lA(e)}function lA(e,t){const n=new Ca("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Swe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function zQe(e){const t={};let n;for(n in e)rY.call(e,n)&&(t[VQe(n)]=e[n]);return t}function VQe(e){let t=e.replace(TQe,qQe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function HQe(e,t){return t.toUpperCase()}function qQe(e){return"-"+e.toLowerCase()}const w8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},WQe={};function GQe(e,t){const n=WQe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Iwe(e,r,i)}function Iwe(e,t,n){if(YQe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Yoe(e.children,t,n)}return Array.isArray(e)?Yoe(e,t,n):""}function Yoe(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Iwe(e[i],t,n);return r.join("")}function YQe(e){return!!(e&&typeof e=="object")}const Koe=document.createElement("i");function oY(e){const t="&"+e+";";Koe.innerHTML=t;const n=Koe.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function dm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function fc(e,t){return e.length>0?(dm(e,e.length,0,t),e):t}const Xoe={}.hasOwnProperty;function KQe(e){const t={};let n=-1;for(;++n<e.length;)XQe(t,e[n]);return t}function XQe(e,t){let n;for(n in t){const i=(Xoe.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Xoe.call(i,o)||(i[o]=[]);const a=s[o];QQe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function QQe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);dm(e,0,0,r)}function kwe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function Cw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const zd=wy(/[A-Za-z]/),El=wy(/[\dA-Za-z]/),JQe=wy(/[#-'*+\--9=?A-Z^-~]/);function MU(e){return e!==null&&(e<32||e===127)}const LU=wy(/\d/),ZQe=wy(/[\dA-Fa-f]/),eJe=wy(/[!-/:-@[-`{-~]/);function nn(e){return e!==null&&e<-2}function Bu(e){return e!==null&&(e<0||e===32)}function Er(e){return e===-2||e===-1||e===32}const tJe=wy(new RegExp("\\p{P}|\\p{S}","u")),nJe=wy(/\s/);function wy(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function jx(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&El(e.charCodeAt(n+1))&&El(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ni(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Er(u)?(e.enter(n),a(u)):t(u)}function a(u){return Er(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const rJe={tokenize:iJe};function iJe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ni(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return nn(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const sJe={tokenize:oJe},Qoe={tokenize:aJe};function oJe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,S;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){S=t.events[E][1].end;break}y(r);let T=w;for(;T<t.events.length;)t.events[T][1].end=Object.assign({},S),T++;return dm(t.events,E+1,0,t.events.slice(w)),t.events.length=T,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Qoe,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Qoe,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return nn(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let S=i.events.length;for(;S--;)if(i.events[S][1].start.offset<o&&(!i.events[S][1].end||i.events[S][1].end.offset>o))return;const T=t.events.length;let C=T,A,N;for(;C--;)if(t.events[C][0]==="exit"&&t.events[C][1].type==="chunkFlow"){if(A){N=t.events[C][1].end;break}A=!0}for(y(r),S=T;S<t.events.length;)t.events[S][1].end=Object.assign({},N),S++;dm(t.events,C+1,0,t.events.slice(T)),t.events.length=S}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function aJe(e,t,n){return ni(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Joe(e){if(e===null||Bu(e)||nJe(e))return 1;if(tJe(e))return 2}function aY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const FU={name:"attention",tokenize:lJe,resolveAll:uJe};function uJe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Zoe(f,-u),Zoe(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=fc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=fc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=fc(l,aY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=fc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=fc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,dm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function lJe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=Joe(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=Joe(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Zoe(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const cJe={name:"autolink",tokenize:fJe};function fJe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return zd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||El(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||El(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||MU(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):JQe(h)?(e.consume(h),l):n(h)}function c(h){return El(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||El(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const ML={tokenize:dJe,partial:!0};function dJe(e,t,n){return r;function r(s){return Er(s)?ni(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||nn(s)?t(s):n(s)}}const Rwe={name:"blockQuote",tokenize:hJe,continuation:{tokenize:pJe},exit:mJe};function hJe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Er(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function pJe(e,t,n){const r=this;return i;function i(o){return Er(o)?ni(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Rwe,t,n)(o)}}function mJe(e){e.exit("blockQuote")}const Nwe={name:"characterEscape",tokenize:gJe};function gJe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return eJe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Pwe={name:"characterReference",tokenize:yJe};function yJe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=El,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=ZQe,c):(e.enter("characterReferenceValue"),s=7,o=LU,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===El&&!oY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const eae={tokenize:bJe,partial:!0},tae={name:"codeFenced",tokenize:vJe,concrete:!0};function vJe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(S){return l(S)}function l(S){const T=r.events[r.events.length-1];return s=T&&T[1].type==="linePrefix"?T[2].sliceSerialize(T[1],!0).length:0,a=S,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(S)}function c(S){return S===a?(o++,e.consume(S),c):o<3?n(S):(e.exit("codeFencedFenceSequence"),Er(S)?ni(e,f,"whitespace")(S):f(S))}function f(S){return S===null||nn(S)?(e.exit("codeFencedFence"),r.interrupt?t(S):e.check(eae,m,w)(S)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(S))}function d(S){return S===null||nn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(S)):Er(S)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ni(e,h,"whitespace")(S)):S===96&&S===a?n(S):(e.consume(S),d)}function h(S){return S===null||nn(S)?f(S):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(S))}function p(S){return S===null||nn(S)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(S)):S===96&&S===a?n(S):(e.consume(S),p)}function m(S){return e.attempt(i,w,g)(S)}function g(S){return e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y}function y(S){return s>0&&Er(S)?ni(e,v,"linePrefix",s+1)(S):v(S)}function v(S){return S===null||nn(S)?e.check(eae,m,w)(S):(e.enter("codeFlowValue"),b(S))}function b(S){return S===null||nn(S)?(e.exit("codeFlowValue"),v(S)):(e.consume(S),b)}function w(S){return e.exit("codeFenced"),t(S)}function E(S,T,C){let A=0;return N;function N(L){return S.enter("lineEnding"),S.consume(L),S.exit("lineEnding"),k}function k(L){return S.enter("codeFencedFence"),Er(L)?ni(S,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(L):O(L)}function O(L){return L===a?(S.enter("codeFencedFenceSequence"),P(L)):C(L)}function P(L){return L===a?(A++,S.consume(L),P):A>=o?(S.exit("codeFencedFenceSequence"),Er(L)?ni(S,$,"whitespace")(L):$(L)):C(L)}function $(L){return L===null||nn(L)?(S.exit("codeFencedFence"),T(L)):C(L)}}}function bJe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const E8={name:"codeIndented",tokenize:wJe},_Je={tokenize:EJe,partial:!0};function wJe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ni(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):nn(l)?e.attempt(_Je,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||nn(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function EJe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):nn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ni(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):nn(o)?i(o):n(o)}}const xJe={name:"codeText",tokenize:CJe,resolve:SJe,previous:TJe};function SJe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function TJe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function CJe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):nn(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||nn(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class AJe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ZS(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),ZS(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),ZS(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);ZS(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);ZS(this.left,n.reverse())}}}function ZS(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Dwe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new AJe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,IJe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return dm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function IJe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const kJe={tokenize:PJe,resolve:NJe},RJe={tokenize:DJe,partial:!0};function NJe(e){return Dwe(e),e}function PJe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):nn(a)?e.check(RJe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function DJe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ni(e,s,"linePrefix")}function s(o){if(o===null||nn(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Owe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||MU(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||nn(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Bu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||MU(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function $we(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):nn(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||nn(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!Er(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Mwe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):nn(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ni(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||nn(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function QC(e,t){let n;return r;function r(i){return nn(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):Er(i)?ni(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const OJe={name:"definition",tokenize:MJe},$Je={tokenize:LJe,partial:!0};function MJe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return $we.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=Cw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Bu(h)?QC(e,l)(h):l(h)}function l(h){return Owe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt($Je,f,f)(h)}function f(h){return Er(h)?ni(e,d,"whitespace")(h):d(h)}function d(h){return h===null||nn(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function LJe(e,t,n){return r;function r(a){return Bu(a)?QC(e,i)(a):n(a)}function i(a){return Mwe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Er(a)?ni(e,o,"whitespace")(a):o(a)}function o(a){return a===null||nn(a)?t(a):n(a)}}const FJe={name:"hardBreakEscape",tokenize:jJe};function jJe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return nn(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const BJe={name:"headingAtx",tokenize:zJe,resolve:UJe};function UJe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},dm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function zJe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Bu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||nn(c)?(e.exit("atxHeading"),t(c)):Er(c)?ni(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Bu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const VJe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],nae=["pre","script","style","textarea"],HJe={name:"htmlFlow",tokenize:YJe,resolveTo:GJe,concrete:!0},qJe={tokenize:XJe,partial:!0},WJe={tokenize:KJe,partial:!0};function GJe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function YJe(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:D):zd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):zd(j)?(e.consume(j),i=4,r.interrupt?t:D):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:D):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:O:p):n(j)}function m(j){return zd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Bu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&nae.includes(G)?(i=1,r.interrupt?t(j):O(j)):VJe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||El(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return Er(j)?(e.consume(j),v):N(j)}function b(j){return j===47?(e.consume(j),N):j===58||j===95||zd(j)?(e.consume(j),w):Er(j)?(e.consume(j),b):N(j)}function w(j){return j===45||j===46||j===58||j===95||El(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),S):Er(j)?(e.consume(j),E):b(j)}function S(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,T):Er(j)?(e.consume(j),S):C(j)}function T(j){return j===u?(e.consume(j),u=null,A):j===null||nn(j)?n(j):(e.consume(j),T)}function C(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Bu(j)?E(j):(e.consume(j),C)}function A(j){return j===47||j===62||Er(j)?b(j):n(j)}function N(j){return j===62?(e.consume(j),k):n(j)}function k(j){return j===null||nn(j)?O(j):Er(j)?(e.consume(j),k):n(j)}function O(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),U):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),D):j===93&&i===5?(e.consume(j),V):nn(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(qJe,W,P)(j)):j===null||nn(j)?(e.exit("htmlFlowData"),P(j)):(e.consume(j),O)}function P(j){return e.check(WJe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),L}function L(j){return j===null||nn(j)?P(j):(e.enter("htmlFlowData"),O(j))}function M(j){return j===45?(e.consume(j),D):O(j)}function U(j){return j===47?(e.consume(j),o="",B):O(j)}function B(j){if(j===62){const q=o.toLowerCase();return nae.includes(q)?(e.consume(j),z):O(j)}return zd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),B):O(j)}function V(j){return j===93?(e.consume(j),D):O(j)}function D(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),D):O(j)}function z(j){return j===null||nn(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function KJe(e,t,n){const r=this;return i;function i(o){return nn(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function XJe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(ML,t,n)}}const QJe={name:"htmlText",tokenize:JJe};function JJe(e,t,n){const r=this;let i,s,o;return a;function a(D){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(D),u}function u(D){return D===33?(e.consume(D),l):D===47?(e.consume(D),E):D===63?(e.consume(D),b):zd(D)?(e.consume(D),C):n(D)}function l(D){return D===45?(e.consume(D),c):D===91?(e.consume(D),s=0,p):zd(D)?(e.consume(D),v):n(D)}function c(D){return D===45?(e.consume(D),h):n(D)}function f(D){return D===null?n(D):D===45?(e.consume(D),d):nn(D)?(o=f,U(D)):(e.consume(D),f)}function d(D){return D===45?(e.consume(D),h):f(D)}function h(D){return D===62?M(D):D===45?d(D):f(D)}function p(D){const z="CDATA[";return D===z.charCodeAt(s++)?(e.consume(D),s===z.length?m:p):n(D)}function m(D){return D===null?n(D):D===93?(e.consume(D),g):nn(D)?(o=m,U(D)):(e.consume(D),m)}function g(D){return D===93?(e.consume(D),y):m(D)}function y(D){return D===62?M(D):D===93?(e.consume(D),y):m(D)}function v(D){return D===null||D===62?M(D):nn(D)?(o=v,U(D)):(e.consume(D),v)}function b(D){return D===null?n(D):D===63?(e.consume(D),w):nn(D)?(o=b,U(D)):(e.consume(D),b)}function w(D){return D===62?M(D):b(D)}function E(D){return zd(D)?(e.consume(D),S):n(D)}function S(D){return D===45||El(D)?(e.consume(D),S):T(D)}function T(D){return nn(D)?(o=T,U(D)):Er(D)?(e.consume(D),T):M(D)}function C(D){return D===45||El(D)?(e.consume(D),C):D===47||D===62||Bu(D)?A(D):n(D)}function A(D){return D===47?(e.consume(D),M):D===58||D===95||zd(D)?(e.consume(D),N):nn(D)?(o=A,U(D)):Er(D)?(e.consume(D),A):M(D)}function N(D){return D===45||D===46||D===58||D===95||El(D)?(e.consume(D),N):k(D)}function k(D){return D===61?(e.consume(D),O):nn(D)?(o=k,U(D)):Er(D)?(e.consume(D),k):A(D)}function O(D){return D===null||D===60||D===61||D===62||D===96?n(D):D===34||D===39?(e.consume(D),i=D,P):nn(D)?(o=O,U(D)):Er(D)?(e.consume(D),O):(e.consume(D),$)}function P(D){return D===i?(e.consume(D),i=void 0,L):D===null?n(D):nn(D)?(o=P,U(D)):(e.consume(D),P)}function $(D){return D===null||D===34||D===39||D===60||D===61||D===96?n(D):D===47||D===62||Bu(D)?A(D):(e.consume(D),$)}function L(D){return D===47||D===62||Bu(D)?A(D):n(D)}function M(D){return D===62?(e.consume(D),e.exit("htmlTextData"),e.exit("htmlText"),t):n(D)}function U(D){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(D),e.exit("lineEnding"),B}function B(D){return Er(D)?ni(e,V,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(D):V(D)}function V(D){return e.enter("htmlTextData"),o(D)}}const uY={name:"labelEnd",tokenize:iZe,resolveTo:rZe,resolveAll:nZe},ZJe={tokenize:sZe},eZe={tokenize:oZe},tZe={tokenize:aZe};function nZe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function rZe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=fc(a,e.slice(s+1,s+r+3)),a=fc(a,[["enter",c,t]]),a=fc(a,aY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=fc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=fc(a,e.slice(o+1)),a=fc(a,[["exit",u,t]]),dm(e,s,e.length,a),e}function iZe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(Cw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(ZJe,c,o?c:f)(d):d===91?e.attempt(eZe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(tZe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function sZe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Bu(f)?QC(e,s)(f):s(f)}function s(f){return f===41?c(f):Owe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Bu(f)?QC(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Mwe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Bu(f)?QC(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function oZe(e,t,n){const r=this;return i;function i(a){return $we.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(Cw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function aZe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const uZe={name:"labelStartImage",tokenize:lZe,resolveAll:uY.resolveAll};function lZe(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const cZe={name:"labelStartLink",tokenize:fZe,resolveAll:uY.resolveAll};function fZe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const x8={name:"lineEnding",tokenize:dZe};function dZe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ni(e,t,"linePrefix")}}const YP={name:"thematicBreak",tokenize:hZe};function hZe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||nn(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),Er(l)?ni(e,a,"whitespace")(l):a(l))}}const gu={name:"list",tokenize:gZe,continuation:{tokenize:yZe},exit:bZe},pZe={tokenize:_Ze,partial:!0},mZe={tokenize:vZe,partial:!0};function gZe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:LU(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(YP,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return LU(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(ML,r.interrupt?n:c,e.attempt(pZe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return Er(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function yZe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(ML,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ni(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Er(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(mZe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ni(e,e.attempt(gu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function vZe(e,t,n){const r=this;return ni(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function bZe(e){e.exit(this.containerState.type)}function _Ze(e,t,n){const r=this;return ni(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Er(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const rae={name:"setextUnderline",tokenize:EZe,resolveTo:wZe};function wZe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function EZe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),Er(l)?ni(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||nn(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const xZe={tokenize:SZe};function SZe(e){const t=this,n=e.attempt(ML,r,e.attempt(this.parser.constructs.flowInitial,i,ni(e,e.attempt(this.parser.constructs.flow,i,e.attempt(kJe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const TZe={resolveAll:Fwe()},CZe=Lwe("string"),AZe=Lwe("text");function Lwe(e){return{tokenize:t,resolveAll:Fwe(e==="text"?IZe:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Fwe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function IZe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function kZe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:T(E),check:T(S),interrupt:T(S,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(k){return o=fc(o,k),g(),o[o.length-1]!==null?[]:(C(t,0),l.events=aY(s,l.events,l),l.events)}function d(k,O){return NZe(h(k),O)}function h(k){return RZe(o,k)}function p(){const{line:k,column:O,offset:P,_index:$,_bufferIndex:L}=r;return{line:k,column:O,offset:P,_index:$,_bufferIndex:L}}function m(k){i[k.line]=k.column,N()}function g(){let k;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(k=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===k&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(k){c=c(k)}function v(k){nn(k)?(r.line++,r.column=1,r.offset+=k===-3?2:1,N()):k!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=k}function b(k,O){const P=O||{};return P.type=k,P.start=p(),l.events.push(["enter",P,l]),a.push(P),P}function w(k){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(k,O){C(k,O.from)}function S(k,O){O.restore()}function T(k,O){return P;function P($,L,M){let U,B,V,D;return Array.isArray($)?W($):"tokenize"in $?W([$]):z($);function z(te){return ve;function ve(he){const ce=he!==null&&te[he],me=he!==null&&te.null,Le=[...Array.isArray(ce)?ce:ce?[ce]:[],...Array.isArray(me)?me:me?[me]:[]];return W(Le)(he)}}function W(te){return U=te,B=0,te.length===0?M:j(te[B])}function j(te){return ve;function ve(he){return D=A(),V=te,te.partial||(l.currentConstruct=te),te.name&&l.parser.constructs.disable.null.includes(te.name)?G():te.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,G)(he)}}function q(te){return k(V,D),L}function G(te){return D.restore(),++B<U.length?j(U[B]):M}}}function C(k,O){k.resolveAll&&!s.includes(k)&&s.push(k),k.resolve&&dm(l.events,O,l.events.length-O,k.resolve(l.events.slice(O),l)),k.resolveTo&&(l.events=k.resolveTo(l.events,l))}function A(){const k=p(),O=l.previous,P=l.currentConstruct,$=l.events.length,L=Array.from(a);return{restore:M,from:$};function M(){r=k,l.previous=O,l.currentConstruct=P,l.events.length=$,a=L,N()}}function N(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function RZe(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function NZe(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const PZe={42:gu,43:gu,45:gu,48:gu,49:gu,50:gu,51:gu,52:gu,53:gu,54:gu,55:gu,56:gu,57:gu,62:Rwe},DZe={91:OJe},OZe={[-2]:E8,[-1]:E8,32:E8},$Ze={35:BJe,42:YP,45:[rae,YP],60:HJe,61:rae,95:YP,96:tae,126:tae},MZe={38:Pwe,92:Nwe},LZe={[-5]:x8,[-4]:x8,[-3]:x8,33:uZe,38:Pwe,42:FU,60:[cJe,QJe],91:cZe,92:[FJe,Nwe],93:uY,95:FU,96:xJe},FZe={null:[FU,TZe]},jZe={null:[42,95]},BZe={null:[]},UZe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:jZe,contentInitial:DZe,disable:BZe,document:PZe,flow:$Ze,flowInitial:OZe,insideSpan:FZe,string:MZe,text:LZe},Symbol.toStringTag,{value:"Module"}));function zZe(e){const n=KQe([UZe,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(rJe),document:i(sJe),flow:i(xZe),string:i(CZe),text:i(AZe)};return r;function i(s){return o;function o(a){return kZe(r,s,a)}}}function VZe(e){for(;!Dwe(e););return e}const iae=/[\0\t\n\r]/g;function HZe(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(iae.lastIndex=f,l=iae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const qZe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function WZe(e){return e.replace(qZe,GZe)}function GZe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return kwe(n.slice(s?2:1),s?16:10)}return oY(n)||e}const jwe={}.hasOwnProperty;function YZe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),KZe(n)(VZe(zZe(n).document().write(HZe()(e,t,!0))))}function KZe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ge),autolinkProtocol:A,autolinkEmail:A,atxHeading:s(Ke),blockQuote:s(me),characterEscape:A,characterReference:A,codeFenced:s(Le),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Le,o),codeText:s(fe,o),codeTextData:A,data:A,codeFlowValue:A,definition:s(ct),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ze),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(De,o),htmlFlowData:A,htmlText:s(De,o),htmlTextData:A,image:s(Ae),label:o,link:s(Ge),listItem:s(Ct),listItemValue:d,listOrdered:s(ht,f),listUnordered:s(ht),paragraph:s(Se),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Ke),strong:s(ue),thematicBreak:s(st)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:ce,autolinkProtocol:he,blockQuote:u(),characterEscapeValue:N,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:te,characterReference:ve,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:N,codeIndented:u(y),codeText:u(L),codeTextData:N,data:N,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(P),htmlFlowData:N,htmlText:u($),htmlTextData:N,image:u(U),label:V,labelText:B,lineEnding:k,link:u(M),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:D,resourceTitleString:z,resource:W,setextHeading:u(C),setextHeadingLineSequence:T,setextHeadingText:S,strong:u(),thematicBreak:u()}};Bwe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(ge){let Ne={type:"root",children:[]};const qe={stack:[Ne],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},Je=[];let Et=-1;for(;++Et<ge.length;)if(ge[Et][1].type==="listOrdered"||ge[Et][1].type==="listUnordered")if(ge[Et][0]==="enter")Je.push(Et);else{const wn=Je.pop();Et=i(ge,wn,Et)}for(Et=-1;++Et<ge.length;){const wn=t[ge[Et][0]];jwe.call(wn,ge[Et][1].type)&&wn[ge[Et][1].type].call(Object.assign({sliceSerialize:ge[Et][2].sliceSerialize},qe),ge[Et][1])}if(qe.tokenStack.length>0){const wn=qe.tokenStack[qe.tokenStack.length-1];(wn[1]||sae).call(qe,void 0,wn[0])}for(Ne.position={start:rg(ge.length>0?ge[0][1].start:{line:1,column:1,offset:0}),end:rg(ge.length>0?ge[ge.length-2][1].end:{line:1,column:1,offset:0})},Et=-1;++Et<t.transforms.length;)Ne=t.transforms[Et](Ne)||Ne;return Ne}function i(ge,Ne,qe){let Je=Ne-1,Et=-1,wn=!1,vr,br,kr,Kt;for(;++Je<=qe;){const Tn=ge[Je];switch(Tn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Tn[0]==="enter"?Et++:Et--,Kt=void 0;break}case"lineEndingBlank":{Tn[0]==="enter"&&(vr&&!Kt&&!Et&&!kr&&(kr=Je),Kt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Kt=void 0}if(!Et&&Tn[0]==="enter"&&Tn[1].type==="listItemPrefix"||Et===-1&&Tn[0]==="exit"&&(Tn[1].type==="listUnordered"||Tn[1].type==="listOrdered")){if(vr){let tr=Je;for(br=void 0;tr--;){const nr=ge[tr];if(nr[1].type==="lineEnding"||nr[1].type==="lineEndingBlank"){if(nr[0]==="exit")continue;br&&(ge[br][1].type="lineEndingBlank",wn=!0),nr[1].type="lineEnding",br=tr}else if(!(nr[1].type==="linePrefix"||nr[1].type==="blockQuotePrefix"||nr[1].type==="blockQuotePrefixWhitespace"||nr[1].type==="blockQuoteMarker"||nr[1].type==="listItemIndent"))break}kr&&(!br||kr<br)&&(vr._spread=!0),vr.end=Object.assign({},br?ge[br][1].start:Tn[1].end),ge.splice(br||Je,0,["exit",vr,Tn[2]]),Je++,qe++}if(Tn[1].type==="listItemPrefix"){const tr={type:"listItem",_spread:!1,start:Object.assign({},Tn[1].start),end:void 0};vr=tr,ge.splice(Je,0,["enter",tr,Tn[2]]),Je++,qe++,kr=void 0,Kt=!0}}}return ge[Ne][1]._spread=wn,qe}function s(ge,Ne){return qe;function qe(Je){a.call(this,ge(Je),Je),Ne&&Ne.call(this,Je)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(ge,Ne,qe){this.stack[this.stack.length-1].children.push(ge),this.stack.push(ge),this.tokenStack.push([Ne,qe]),ge.position={start:rg(Ne.start),end:void 0}}function u(ge){return Ne;function Ne(qe){ge&&ge.call(this,qe),l.call(this,qe)}}function l(ge,Ne){const qe=this.stack.pop(),Je=this.tokenStack.pop();if(Je)Je[0].type!==ge.type&&(Ne?Ne.call(this,ge,Je[0]):(Je[1]||sae).call(this,ge,Je[0]));else throw new Error("Cannot close `"+ge.type+"` ("+XC({start:ge.start,end:ge.end})+"): its not open");qe.position.end=rg(ge.end)}function c(){return GQe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(ge){if(this.data.expectingFirstListItemValue){const Ne=this.stack[this.stack.length-2];Ne.start=Number.parseInt(this.sliceSerialize(ge),10),this.data.expectingFirstListItemValue=void 0}}function h(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.lang=ge}function p(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.meta=ge}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ge.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ge.replace(/(\r?\n|\r)$/g,"")}function v(ge){const Ne=this.resume(),qe=this.stack[this.stack.length-1];qe.label=Ne,qe.identifier=Cw(this.sliceSerialize(ge)).toLowerCase()}function b(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=ge}function w(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=ge}function E(ge){const Ne=this.stack[this.stack.length-1];if(!Ne.depth){const qe=this.sliceSerialize(ge).length;Ne.depth=qe}}function S(){this.data.setextHeadingSlurpLineEnding=!0}function T(ge){const Ne=this.stack[this.stack.length-1];Ne.depth=this.sliceSerialize(ge).codePointAt(0)===61?1:2}function C(){this.data.setextHeadingSlurpLineEnding=void 0}function A(ge){const qe=this.stack[this.stack.length-1].children;let Je=qe[qe.length-1];(!Je||Je.type!=="text")&&(Je=Ve(),Je.position={start:rg(ge.start),end:void 0},qe.push(Je)),this.stack.push(Je)}function N(ge){const Ne=this.stack.pop();Ne.value+=this.sliceSerialize(ge),Ne.position.end=rg(ge.end)}function k(ge){const Ne=this.stack[this.stack.length-1];if(this.data.atHardBreak){const qe=Ne.children[Ne.children.length-1];qe.position.end=rg(ge.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ne.type)&&(A.call(this,ge),N.call(this,ge))}function O(){this.data.atHardBreak=!0}function P(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ge}function $(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ge}function L(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.value=ge}function M(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=Ne,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function U(){const ge=this.stack[this.stack.length-1];if(this.data.inReference){const Ne=this.data.referenceType||"shortcut";ge.type+="Reference",ge.referenceType=Ne,delete ge.url,delete ge.title}else delete ge.identifier,delete ge.label;this.data.referenceType=void 0}function B(ge){const Ne=this.sliceSerialize(ge),qe=this.stack[this.stack.length-2];qe.label=WZe(Ne),qe.identifier=Cw(Ne).toLowerCase()}function V(){const ge=this.stack[this.stack.length-1],Ne=this.resume(),qe=this.stack[this.stack.length-1];if(this.data.inReference=!0,qe.type==="link"){const Je=ge.children;qe.children=Je}else qe.alt=Ne}function D(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.url=ge}function z(){const ge=this.resume(),Ne=this.stack[this.stack.length-1];Ne.title=ge}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(ge){const Ne=this.resume(),qe=this.stack[this.stack.length-1];qe.label=Ne,qe.identifier=Cw(this.sliceSerialize(ge)).toLowerCase(),this.data.referenceType="full"}function G(ge){this.data.characterReferenceType=ge.type}function te(ge){const Ne=this.sliceSerialize(ge),qe=this.data.characterReferenceType;let Je;qe?(Je=kwe(Ne,qe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Je=oY(Ne);const Et=this.stack[this.stack.length-1];Et.value+=Je}function ve(ge){const Ne=this.stack.pop();Ne.position.end=rg(ge.end)}function he(ge){N.call(this,ge);const Ne=this.stack[this.stack.length-1];Ne.url=this.sliceSerialize(ge)}function ce(ge){N.call(this,ge);const Ne=this.stack[this.stack.length-1];Ne.url="mailto:"+this.sliceSerialize(ge)}function me(){return{type:"blockquote",children:[]}}function Le(){return{type:"code",lang:null,meta:null,value:""}}function fe(){return{type:"inlineCode",value:""}}function ct(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ze(){return{type:"emphasis",children:[]}}function Ke(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function De(){return{type:"html",value:""}}function Ae(){return{type:"image",title:null,url:"",alt:null}}function Ge(){return{type:"link",title:null,url:"",children:[]}}function ht(ge){return{type:"list",ordered:ge.type==="listOrdered",start:null,spread:ge._spread,children:[]}}function Ct(ge){return{type:"listItem",spread:ge._spread,checked:null,children:[]}}function Se(){return{type:"paragraph",children:[]}}function ue(){return{type:"strong",children:[]}}function Ve(){return{type:"text",value:""}}function st(){return{type:"thematicBreak"}}}function rg(e){return{line:e.line,column:e.column,offset:e.offset}}function Bwe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Bwe(e,r):XZe(e,r)}}function XZe(e,t){let n;for(n in t)if(jwe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function sae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+XC({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+XC({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+XC({start:t.start,end:t.end})+") is still open")}function QZe(e){const t=this;t.parser=n;function n(r){return YZe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function JZe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function ZZe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function eet(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function tet(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function net(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function ret(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=jx(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function iet(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function set(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Uwe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function oet(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Uwe(e,t);const i={src:jx(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function aet(e,t){const n={src:jx(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function uet(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function cet(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Uwe(e,t);const i={href:jx(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function fet(e,t){const n={href:jx(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function det(e,t,n){const r=e.all(t),i=n?het(n):zwe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function het(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=zwe(n[r])}return t}function zwe(e){const t=e.spread;return t??e.children.length>1}function pet(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function met(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function get(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function yet(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function vet(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Uh(t.children[1]),u=$L(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function bet(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function _et(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const oae=9,aae=32;function wet(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(uae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(uae(t.slice(i),i>0,!1)),s.join("")}function uae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===oae||s===aae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===oae||s===aae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Eet(e,t){const n={type:"text",value:wet(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function xet(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Tet={blockquote:JZe,break:ZZe,code:eet,delete:tet,emphasis:net,footnoteReference:ret,heading:iet,html:set,imageReference:oet,image:aet,inlineCode:uet,linkReference:cet,link:fet,listItem:det,list:pet,paragraph:met,root:get,strong:yet,table:vet,tableCell:_et,tableRow:bet,text:Eet,thematicBreak:xet,toml:oN,yaml:oN,definition:oN,footnoteDefinition:oN};function oN(){}const Vwe=-1,LL=0,OO=1,$O=2,lY=3,cY=4,fY=5,dY=6,Hwe=7,qwe=8,lae=typeof self=="object"?self:globalThis,Cet=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case LL:case Vwe:return n(o,i);case OO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case $O:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case lY:return n(new Date(o),i);case cY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case fY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case dY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case Hwe:{const{name:a,message:u}=o;return n(new lae[a](u),i)}case qwe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new lae[s](o),i)};return r},cae=e=>Cet(new Map,e)(0),t_="",{toString:Aet}={},{keys:Iet}=Object,eT=e=>{const t=typeof e;if(t!=="object"||!e)return[LL,t];const n=Aet.call(e).slice(8,-1);switch(n){case"Array":return[OO,t_];case"Object":return[$O,t_];case"Date":return[lY,t_];case"RegExp":return[cY,t_];case"Map":return[fY,t_];case"Set":return[dY,t_]}return n.includes("Array")?[OO,n]:n.includes("Error")?[Hwe,n]:[$O,n]},aN=([e,t])=>e===LL&&(t==="function"||t==="symbol"),ket=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=eT(o);switch(a){case LL:{let c=o;switch(u){case"bigint":a=qwe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([Vwe],o)}return i([a,c],o)}case OO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case $O:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Iet(o))(e||!aN(eT(o[d])))&&c.push([s(d),s(o[d])]);return f}case lY:return i([a,o.toISOString()],o);case cY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case fY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(aN(eT(d))||aN(eT(h))))&&c.push([s(d),s(h)]);return f}case dY:{const c=[],f=i([a,c],o);for(const d of o)(e||!aN(eT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},fae=(e,{json:t,lossy:n}={})=>{const r=[];return ket(!(t||n),!!t,new Map,r)(e),r},mE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?cae(fae(e,t)):structuredClone(e):(e,t)=>cae(fae(e,t));function Ret(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Net(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function Pet(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ret,r=e.options.footnoteBackLabel||Net,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=jx(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...mE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const Wwe=function(e){if(e==null)return Met;if(typeof e=="function")return FL(e);if(typeof e=="object")return Array.isArray(e)?Det(e):Oet(e);if(typeof e=="string")return $et(e);throw new Error("Expected function, string, or object as test")};function Det(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Wwe(e[n]);return FL(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Oet(e){const t=e;return FL(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function $et(e){return FL(t);function t(n){return n&&n.type===e}}function FL(e){return t;function t(n,r,i){return!!(Let(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Met(){return!0}function Let(e){return e!==null&&typeof e=="object"&&"type"in e}const Gwe=[],Fet=!0,dae=!1,jet="skip";function Bet(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Wwe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=Gwe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Uet(n(u,c)),h[0]===dae))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==jet)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===dae)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Uet(e){return Array.isArray(e)?e:typeof e=="number"?[Fet,e]:e==null?Gwe:[e]}function hY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Bet(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const jU={}.hasOwnProperty,zet={};function Vet(e,t){const n=t||zet,r=new Map,i=new Map,s=new Map,o={...Tet,...n.handlers},a={all:l,applyData:qet,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:Het,wrap:Get};return hY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(jU.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=mE(g);return y.children=a.all(c),y}return mE(c)}return(a.options.unknownHandler||Wet)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=hae(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=hae(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function Het(e,t){e.position&&(t.position=xQe(e))}function qet(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,mE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function Wet(e,t){const n=t.data||{},r="value"in t&&!(jU.call(n,"hProperties")||jU.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function Get(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function hae(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function pae(e,t){const n=Vet(e,t),r=n.one(e,void 0),i=Pet(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function Yet(e,t){return e&&"run"in e?async function(n,r){const i=pae(n,{file:r,...t});await e.run(i,r)}:function(n,r){return pae(n,{file:r,...t||e})}}function mae(e){if(e)throw e}var KP=Object.prototype.hasOwnProperty,Ywe=Object.prototype.toString,gae=Object.defineProperty,yae=Object.getOwnPropertyDescriptor,vae=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Ywe.call(t)==="[object Array]"},bae=function(t){if(!t||Ywe.call(t)!=="[object Object]")return!1;var n=KP.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&KP.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||KP.call(t,i)},_ae=function(t,n){gae&&n.name==="__proto__"?gae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},wae=function(t,n){if(n==="__proto__")if(KP.call(t,n)){if(yae)return yae(t,n).value}else return;return t[n]},Ket=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=wae(a,n),i=wae(t,n),a!==i&&(c&&i&&(bae(i)||(s=vae(i)))?(s?(s=!1,o=r&&vae(r)?r:[]):o=r&&bae(r)?r:{},_ae(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&_ae(a,{name:n,newValue:i}));return a};const S8=nl(Ket);function BU(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Xet(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?Qet(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function Qet(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Pd={basename:Jet,dirname:Zet,extname:ett,join:ttt,sep:"/"};function Jet(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');GI(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Zet(e){if(GI(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function ett(e){GI(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function ttt(...e){let t=-1,n;for(;++t<e.length;)GI(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":ntt(n)}function ntt(e){GI(e);const t=e.codePointAt(0)===47;let n=rtt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function rtt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function GI(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const itt={cwd:stt};function stt(){return"/"}function UU(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function ott(e){if(typeof e=="string")e=new URL(e);else if(!UU(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return att(e)}function att(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const T8=["history","path","basename","stem","extname","dirname"];class Kwe{constructor(t){let n;t?UU(t)?n={path:t}:typeof t=="string"||utt(t)?n={value:t}:n=t:n={},this.cwd=itt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<T8.length;){const s=T8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)T8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Pd.basename(this.path):void 0}set basename(t){A8(t,"basename"),C8(t,"basename"),this.path=Pd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Pd.dirname(this.path):void 0}set dirname(t){Eae(this.basename,"dirname"),this.path=Pd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Pd.extname(this.path):void 0}set extname(t){if(C8(t,"extname"),Eae(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Pd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){UU(t)&&(t=ott(t)),A8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Pd.basename(this.path,this.extname):void 0}set stem(t){A8(t,"stem"),C8(t,"stem"),this.path=Pd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Ca(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function C8(e,t){if(e&&e.includes(Pd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Pd.sep+"`")}function A8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Eae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function utt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const ltt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},ctt={}.hasOwnProperty;class pY extends ltt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Xet()}copy(){const t=new pY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(S8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(R8("data",this.frozen),this.namespace[t]=n,this):ctt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(R8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=uN(t),r=this.parser||this.Parser;return I8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),I8("process",this.parser||this.Parser),k8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=uN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);htt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),I8("processSync",this.parser||this.Parser),k8("processSync",this.compiler||this.Compiler),this.process(t,i),Sae("processSync","process",n),r;function i(s,o){n=!0,mae(s),r=o}}run(t,n,r){xae(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=uN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Sae("runSync","run",r),i;function s(o,a){mae(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=uN(n),i=this.compiler||this.Compiler;return k8("stringify",i),xae(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(R8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=S8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];BU(m)&&BU(h)&&(h=S8(!0,m,h)),r[d]=[l,h,...p]}}}}const ftt=new pY().freeze();function I8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function k8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function R8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function xae(e){if(!BU(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Sae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function uN(e){return dtt(e)?e:new Kwe(e)}function dtt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function htt(e){return typeof e=="string"||ptt(e)}function ptt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const mtt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Tae=[],Cae={allowDangerousHtml:!0},gtt=/^(https?|ircs?|mailto|xmpp)$/i,ytt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function vtt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Tae,u=e.remarkPlugins||Tae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Cae}:Cae,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||btt,h=ftt().use(QZe).use(u).use(Yet,l).use(a),p=new Kwe;typeof r=="string"&&(p.value=r);for(const v of ytt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+mtt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),hY(g,y),kQe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in w8)if(Object.hasOwn(w8,E)&&Object.hasOwn(v.properties,E)){const S=v.properties[E],T=w8[E];(T===null||T.includes(v.tagName))&&(v.properties[E]=d(String(S||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function btt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||gtt.test(e.slice(0,t))?e:""}const Aae=/[#.]/g;function _tt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Aae.lastIndex=i;const a=Aae.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const wtt=new Set(["button","menu","reset","submit"]),zU={}.hasOwnProperty;function Xwe(e,t,n){const r=n&&Ttt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=_tt(s,t),l.tagName=l.tagName.toLowerCase(),r&&zU.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Ett(o,l.tagName)){let c;for(c in o)zU.call(o,c)&&xtt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)VU(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Ett(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?wtt.has(e.type.toLowerCase()):!("value"in e)}function xtt(e,t,n,r){const i=OL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=Boe(r):i.commaSeparated?o=$oe(r):i.commaOrSpaceSeparated?o=Boe($oe(r).join(" ")):o=Iae(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Stt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Iae(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function VU(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)VU(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?VU(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Iae(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||uA(n)===uA(t)))return!0}return n}function Stt(e){const t=[];let n;for(n in e)zU.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Ttt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Ctt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Att=Xwe(WI,"div"),Itt=Xwe(_y,"g",Ctt),N8=/\r?\n|\r/g;function ktt(e){const t=String(e),n=[];for(N8.lastIndex=0;N8.test(t);)n.push(N8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const zv={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Qwe={}.hasOwnProperty,Rtt=Object.prototype;function Ntt(e,t){const n=t||{};return mY({file:n.file||void 0,location:!1,schema:n.space==="svg"?_y:WI,verbose:n.verbose||!1},e)}function mY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},XP(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:Jwe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=ktt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},XP(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},XP(e,r,n),n}default:return n=Ptt(e,t),n}}function Jwe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=mY(e,t[n]);r.push(i)}return r}function Ptt(e,t){const n=e.schema;e.schema=t.namespaceURI===zv.svg?_y:WI;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;Qwe.call(Rtt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Itt:Att)(t.tagName,i,Jwe(e,t.childNodes));if(XP(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&tw(u.startTag),c=u&&u.endTag&&tw(u.endTag),f=mY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function XP(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Dtt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Dtt(e,t,n){const r=tw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)Qwe.call(n.attrs,o)&&(s[OL(e.schema,o).property]=tw(n.attrs[o]));n.startTag;const a=tw(n.startTag),u=n.endTag?tw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function tw(e){const t=kae({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=kae({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function kae(e){return e.line&&e.column?e:void 0}const Rae={}.hasOwnProperty;function Zwe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Rae.call(i,e)){const u=String(i[e]);o=Rae.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Ott={},$tt={}.hasOwnProperty,eEe=Zwe("type",{handlers:{root:Ltt,element:ztt,text:Btt,comment:Utt,doctype:jtt}});function Mtt(e,t){const r=(t||Ott).space;return eEe(e,r==="svg"?_y:WI)}function Ltt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=gY(e.children,n,t),Bx(e,n),n}function Ftt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=gY(e.children,n,t),Bx(e,n),n}function jtt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return Bx(e,t),t}function Btt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return Bx(e,t),t}function Utt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return Bx(e,t),t}function ztt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=_y);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&$tt.call(e.properties,s)){const u=Vtt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:zv[o],childNodes:[],parentNode:null};return a.childNodes=gY(e.children,a,r),Bx(e,a),e.tagName==="template"&&e.content&&(a.content=Ftt(e.content,r)),a}function Vtt(e,t,n){const r=OL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?dwe(n):wwe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=zv[r.space]}return i}function gY(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=eEe(e[r],n);s.parentNode=t,i.push(s)}return i}function Bx(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const Htt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],qtt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),gi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const pu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function tEe(e){return e>=55296&&e<=57343}function Wtt(e){return e>=56320&&e<=57343}function Gtt(e,t){return(e-55296)*1024+9216+t}function nEe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function rEe(e){return e>=64976&&e<=65007||qtt.has(e)}var ke;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(ke=ke||(ke={}));const Ytt=65536;class Ktt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=Ytt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(Wtt(n))return this.pos++,this._addGap(),Gtt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(ke.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,tEe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){nEe(t)?this._err(ke.controlCharacterInInputStream):rEe(t)&&this._err(ke.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Cn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Cn=Cn||(Cn={}));function iEe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const fg=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Xtt=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var P8;const Qtt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Jtt=(P8=String.fromCodePoint)!==null&&P8!==void 0?P8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Ztt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=Qtt.get(e))!==null&&t!==void 0?t:e}var to;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(to||(to={}));const ent=32;var Qd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Qd||(Qd={}));function HU(e){return e>=to.ZERO&&e<=to.NINE}function tnt(e){return e>=to.UPPER_A&&e<=to.UPPER_F||e>=to.LOWER_A&&e<=to.LOWER_F}function nnt(e){return e>=to.UPPER_A&&e<=to.UPPER_Z||e>=to.LOWER_A&&e<=to.LOWER_Z||HU(e)}function rnt(e){return e===to.EQUALS||nnt(e)}var Xs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Xs||(Xs={}));var Av;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(Av||(Av={}));class int{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Xs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=Av.Strict}startEntity(t){this.decodeMode=t,this.state=Xs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Xs.EntityStart:return t.charCodeAt(n)===to.NUM?(this.state=Xs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Xs.NamedEntity,this.stateNamedEntity(t,n));case Xs.NumericStart:return this.stateNumericStart(t,n);case Xs.NumericDecimal:return this.stateNumericDecimal(t,n);case Xs.NumericHex:return this.stateNumericHex(t,n);case Xs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|ent)===to.LOWER_X?(this.state=Xs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Xs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(HU(i)||tnt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(HU(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===to.SEMI)this.consumed+=1;else if(this.decodeMode===Av.Strict)return 0;return this.emitCodePoint(Ztt(this.result),this.consumed),this.errors&&(t!==to.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Qd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=oEe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===Av.Attribute&&(s===0||rnt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Qd.VALUE_LENGTH)>>14,s!==0){if(o===to.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==Av.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Qd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Qd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Xs.NamedEntity:return this.result!==0&&(this.decodeMode!==Av.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Xs.NumericDecimal:return this.emitNumericEntity(0,2);case Xs.NumericHex:return this.emitNumericEntity(0,3);case Xs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Xs.EntityStart:return 0}}}function sEe(e){let t="";const n=new int(e,r=>t+=Jtt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function oEe(e,t,n,r){const i=(t&Qd.BRANCH_LENGTH)>>7,s=t&Qd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}sEe(fg);sEe(Xtt);var je;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(je=je||(je={}));var f0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(f0=f0||(f0={}));var pl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(pl=pl||(pl={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var R;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(R=R||(R={}));const snt=new Map([[Ee.A,R.A],[Ee.ADDRESS,R.ADDRESS],[Ee.ANNOTATION_XML,R.ANNOTATION_XML],[Ee.APPLET,R.APPLET],[Ee.AREA,R.AREA],[Ee.ARTICLE,R.ARTICLE],[Ee.ASIDE,R.ASIDE],[Ee.B,R.B],[Ee.BASE,R.BASE],[Ee.BASEFONT,R.BASEFONT],[Ee.BGSOUND,R.BGSOUND],[Ee.BIG,R.BIG],[Ee.BLOCKQUOTE,R.BLOCKQUOTE],[Ee.BODY,R.BODY],[Ee.BR,R.BR],[Ee.BUTTON,R.BUTTON],[Ee.CAPTION,R.CAPTION],[Ee.CENTER,R.CENTER],[Ee.CODE,R.CODE],[Ee.COL,R.COL],[Ee.COLGROUP,R.COLGROUP],[Ee.DD,R.DD],[Ee.DESC,R.DESC],[Ee.DETAILS,R.DETAILS],[Ee.DIALOG,R.DIALOG],[Ee.DIR,R.DIR],[Ee.DIV,R.DIV],[Ee.DL,R.DL],[Ee.DT,R.DT],[Ee.EM,R.EM],[Ee.EMBED,R.EMBED],[Ee.FIELDSET,R.FIELDSET],[Ee.FIGCAPTION,R.FIGCAPTION],[Ee.FIGURE,R.FIGURE],[Ee.FONT,R.FONT],[Ee.FOOTER,R.FOOTER],[Ee.FOREIGN_OBJECT,R.FOREIGN_OBJECT],[Ee.FORM,R.FORM],[Ee.FRAME,R.FRAME],[Ee.FRAMESET,R.FRAMESET],[Ee.H1,R.H1],[Ee.H2,R.H2],[Ee.H3,R.H3],[Ee.H4,R.H4],[Ee.H5,R.H5],[Ee.H6,R.H6],[Ee.HEAD,R.HEAD],[Ee.HEADER,R.HEADER],[Ee.HGROUP,R.HGROUP],[Ee.HR,R.HR],[Ee.HTML,R.HTML],[Ee.I,R.I],[Ee.IMG,R.IMG],[Ee.IMAGE,R.IMAGE],[Ee.INPUT,R.INPUT],[Ee.IFRAME,R.IFRAME],[Ee.KEYGEN,R.KEYGEN],[Ee.LABEL,R.LABEL],[Ee.LI,R.LI],[Ee.LINK,R.LINK],[Ee.LISTING,R.LISTING],[Ee.MAIN,R.MAIN],[Ee.MALIGNMARK,R.MALIGNMARK],[Ee.MARQUEE,R.MARQUEE],[Ee.MATH,R.MATH],[Ee.MENU,R.MENU],[Ee.META,R.META],[Ee.MGLYPH,R.MGLYPH],[Ee.MI,R.MI],[Ee.MO,R.MO],[Ee.MN,R.MN],[Ee.MS,R.MS],[Ee.MTEXT,R.MTEXT],[Ee.NAV,R.NAV],[Ee.NOBR,R.NOBR],[Ee.NOFRAMES,R.NOFRAMES],[Ee.NOEMBED,R.NOEMBED],[Ee.NOSCRIPT,R.NOSCRIPT],[Ee.OBJECT,R.OBJECT],[Ee.OL,R.OL],[Ee.OPTGROUP,R.OPTGROUP],[Ee.OPTION,R.OPTION],[Ee.P,R.P],[Ee.PARAM,R.PARAM],[Ee.PLAINTEXT,R.PLAINTEXT],[Ee.PRE,R.PRE],[Ee.RB,R.RB],[Ee.RP,R.RP],[Ee.RT,R.RT],[Ee.RTC,R.RTC],[Ee.RUBY,R.RUBY],[Ee.S,R.S],[Ee.SCRIPT,R.SCRIPT],[Ee.SECTION,R.SECTION],[Ee.SELECT,R.SELECT],[Ee.SOURCE,R.SOURCE],[Ee.SMALL,R.SMALL],[Ee.SPAN,R.SPAN],[Ee.STRIKE,R.STRIKE],[Ee.STRONG,R.STRONG],[Ee.STYLE,R.STYLE],[Ee.SUB,R.SUB],[Ee.SUMMARY,R.SUMMARY],[Ee.SUP,R.SUP],[Ee.TABLE,R.TABLE],[Ee.TBODY,R.TBODY],[Ee.TEMPLATE,R.TEMPLATE],[Ee.TEXTAREA,R.TEXTAREA],[Ee.TFOOT,R.TFOOT],[Ee.TD,R.TD],[Ee.TH,R.TH],[Ee.THEAD,R.THEAD],[Ee.TITLE,R.TITLE],[Ee.TR,R.TR],[Ee.TRACK,R.TRACK],[Ee.TT,R.TT],[Ee.U,R.U],[Ee.UL,R.UL],[Ee.SVG,R.SVG],[Ee.VAR,R.VAR],[Ee.WBR,R.WBR],[Ee.XMP,R.XMP]]);function Ux(e){var t;return(t=snt.get(e))!==null&&t!==void 0?t:R.UNKNOWN}const Ze=R,ont={[je.HTML]:new Set([Ze.ADDRESS,Ze.APPLET,Ze.AREA,Ze.ARTICLE,Ze.ASIDE,Ze.BASE,Ze.BASEFONT,Ze.BGSOUND,Ze.BLOCKQUOTE,Ze.BODY,Ze.BR,Ze.BUTTON,Ze.CAPTION,Ze.CENTER,Ze.COL,Ze.COLGROUP,Ze.DD,Ze.DETAILS,Ze.DIR,Ze.DIV,Ze.DL,Ze.DT,Ze.EMBED,Ze.FIELDSET,Ze.FIGCAPTION,Ze.FIGURE,Ze.FOOTER,Ze.FORM,Ze.FRAME,Ze.FRAMESET,Ze.H1,Ze.H2,Ze.H3,Ze.H4,Ze.H5,Ze.H6,Ze.HEAD,Ze.HEADER,Ze.HGROUP,Ze.HR,Ze.HTML,Ze.IFRAME,Ze.IMG,Ze.INPUT,Ze.LI,Ze.LINK,Ze.LISTING,Ze.MAIN,Ze.MARQUEE,Ze.MENU,Ze.META,Ze.NAV,Ze.NOEMBED,Ze.NOFRAMES,Ze.NOSCRIPT,Ze.OBJECT,Ze.OL,Ze.P,Ze.PARAM,Ze.PLAINTEXT,Ze.PRE,Ze.SCRIPT,Ze.SECTION,Ze.SELECT,Ze.SOURCE,Ze.STYLE,Ze.SUMMARY,Ze.TABLE,Ze.TBODY,Ze.TD,Ze.TEMPLATE,Ze.TEXTAREA,Ze.TFOOT,Ze.TH,Ze.THEAD,Ze.TITLE,Ze.TR,Ze.TRACK,Ze.UL,Ze.WBR,Ze.XMP]),[je.MATHML]:new Set([Ze.MI,Ze.MO,Ze.MN,Ze.MS,Ze.MTEXT,Ze.ANNOTATION_XML]),[je.SVG]:new Set([Ze.TITLE,Ze.FOREIGN_OBJECT,Ze.DESC]),[je.XLINK]:new Set,[je.XML]:new Set,[je.XMLNS]:new Set};function aEe(e){return e===Ze.H1||e===Ze.H2||e===Ze.H3||e===Ze.H4||e===Ze.H5||e===Ze.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const ant=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const as={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function JC(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function WT(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function unt(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function dg(e){return unt(e)||WT(e)}function qU(e){return dg(e)||JC(e)}function uEe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function lEe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function lnt(e){return JC(e)||uEe(e)||lEe(e)}function lN(e){return e+32}function cEe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function cnt(e){return e===X.EQUALS_SIGN||qU(e)}function Nae(e){return cEe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class fnt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new Ktt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Cn.START_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Cn.END_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Cn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Cn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(iEe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(ke.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=Ux(t.tagName),t.type===Cn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(ke.endTagWithAttributes),t.selfClosing&&this._err(ke.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Cn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Cn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Cn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Cn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=cEe(t)?Cn.WHITESPACE_CHARACTER:t===X.NULL?Cn.NULL_CHARACTER:Cn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Cn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=fg[0];s>=0&&(s=oEe(fg,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=fg[s];const a=o&Qd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&cnt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[fg[s]&~Qd.VALUE_LENGTH]:u===1?[fg[++s]]:[fg[++s],fg[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(ke.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(dg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(ke.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(ke.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(ke.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(dg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(ke.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(ke.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.tagName+=gi;break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(WT(t)?lN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){dg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){dg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){dg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:dg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){dg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(pu.SCRIPT,!1)&&Nae(this.preprocessor.peek(pu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<pu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(ke.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(pu.SCRIPT,!1)&&Nae(this.preprocessor.peek(pu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<pu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(ke.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(ke.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.name+=gi;break}default:this.currentAttr.name+=String.fromCodePoint(WT(t)?lN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(ke.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(ke.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this._err(ke.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(ke.eofInTag),this._emitEOFToken();break}default:this._err(ke.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.data+=gi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(pu.DASH_DASH,!0)?(this._createCommentToken(pu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(pu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(pu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(pu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(ke.cdataInHtmlContent),this._createCommentToken(pu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(ke.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.data+=gi;break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(ke.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(ke.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(ke.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(ke.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(WT(t))this._createDoctypeToken(String.fromCharCode(lN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(ke.unexpectedNullCharacter),this._createDoctypeToken(gi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.name+=gi;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(WT(t)?lN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(pu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(pu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(ke.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(ke.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ke.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.publicId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.publicId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(ke.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ke.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(ke.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(ke.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(ke.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.systemId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(ke.unexpectedNullCharacter),n.systemId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(ke.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(ke.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(ke.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(ke.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(ke.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:qU(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){qU(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(ke.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:JC(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(ke.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){lnt(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(ke.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){uEe(t)?this.charRefCode=this.charRefCode*16+t-55:lEe(t)?this.charRefCode=this.charRefCode*16+t-87:JC(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ke.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){JC(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(ke.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(ke.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(ke.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(tEe(this.charRefCode))this._err(ke.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(rEe(this.charRefCode))this._err(ke.noncharacterCharacterReference);else if(nEe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(ke.controlCharacterReference);const n=ant.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const fEe=new Set([R.DD,R.DT,R.LI,R.OPTGROUP,R.OPTION,R.P,R.RB,R.RP,R.RT,R.RTC]),Pae=new Set([...fEe,R.CAPTION,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]),cN=new Map([[R.APPLET,je.HTML],[R.CAPTION,je.HTML],[R.HTML,je.HTML],[R.MARQUEE,je.HTML],[R.OBJECT,je.HTML],[R.TABLE,je.HTML],[R.TD,je.HTML],[R.TEMPLATE,je.HTML],[R.TH,je.HTML],[R.ANNOTATION_XML,je.MATHML],[R.MI,je.MATHML],[R.MN,je.MATHML],[R.MO,je.MATHML],[R.MS,je.MATHML],[R.MTEXT,je.MATHML],[R.DESC,je.SVG],[R.FOREIGN_OBJECT,je.SVG],[R.TITLE,je.SVG]]),dnt=[R.H1,R.H2,R.H3,R.H4,R.H5,R.H6],hnt=[R.TR,R.TEMPLATE,R.HTML],pnt=[R.TBODY,R.TFOOT,R.THEAD,R.TEMPLATE,R.HTML],mnt=[R.TABLE,R.TEMPLATE,R.HTML],gnt=[R.TD,R.TH];class ynt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=R.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===R.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===je.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==je.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(dnt,je.HTML)}popUntilTableCellPopped(){this.popUntilPopped(gnt,je.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(mnt,je.HTML)}clearBackToTableBodyContext(){this.clearBackTo(pnt,je.HTML)}clearBackToTableRowContext(){this.clearBackTo(hnt,je.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===R.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===R.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===je.HTML)return!0;if(cN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(aEe(n)&&r===je.HTML)return!0;if(cN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===je.HTML)return!0;if((r===R.UL||r===R.OL)&&i===je.HTML||cN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===je.HTML)return!0;if(r===R.BUTTON&&i===je.HTML||cN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===je.HTML){if(r===t)return!0;if(r===R.TABLE||r===R.TEMPLATE||r===R.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===je.HTML){if(n===R.TBODY||n===R.THEAD||n===R.TFOOT)return!0;if(n===R.TABLE||n===R.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===je.HTML){if(r===t)return!0;if(r!==R.OPTION&&r!==R.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;fEe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Pae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Pae.has(this.currentTagId);)this.pop()}}const D8=3;var Ef;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Ef=Ef||(Ef={}));const Dae={type:Ef.Marker};class vnt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Ef.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<D8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<D8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=D8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Dae)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Ef.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Ef.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Dae);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Ef.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Ef.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Ef.Element&&n.element===t)}}function Oae(e){return{nodeName:"#text",value:e,parentNode:null}}const T_={createDocument(){return{nodeName:"#document",mode:pl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};T_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(T_.isTextNode(n)){n.value+=t;return}}T_.appendChild(e,Oae(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&T_.isTextNode(r)?r.value+=t:T_.insertBefore(e,Oae(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},dEe="html",bnt="about:legacy-compat",_nt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",hEe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],wnt=[...hEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Ent=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),pEe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],xnt=[...pEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function $ae(e,t){return t.some(n=>e.startsWith(n))}function Snt(e){return e.name===dEe&&e.publicId===null&&(e.systemId===null||e.systemId===bnt)}function Tnt(e){if(e.name!==dEe)return pl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===_nt)return pl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Ent.has(n))return pl.QUIRKS;let r=t===null?wnt:hEe;if($ae(n,r))return pl.QUIRKS;if(r=t===null?pEe:xnt,$ae(n,r))return pl.LIMITED_QUIRKS}return pl.NO_QUIRKS}const Mae={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Cnt="definitionurl",Ant="definitionURL",Int=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),knt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:je.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:je.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:je.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:je.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:je.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:je.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:je.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:je.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:je.XML}],["xml:space",{prefix:"xml",name:"space",namespace:je.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:je.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:je.XMLNS}]]),Rnt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Nnt=new Set([R.B,R.BIG,R.BLOCKQUOTE,R.BODY,R.BR,R.CENTER,R.CODE,R.DD,R.DIV,R.DL,R.DT,R.EM,R.EMBED,R.H1,R.H2,R.H3,R.H4,R.H5,R.H6,R.HEAD,R.HR,R.I,R.IMG,R.LI,R.LISTING,R.MENU,R.META,R.NOBR,R.OL,R.P,R.PRE,R.RUBY,R.S,R.SMALL,R.SPAN,R.STRONG,R.STRIKE,R.SUB,R.SUP,R.TABLE,R.TT,R.U,R.UL,R.VAR]);function Pnt(e){const t=e.tagID;return t===R.FONT&&e.attrs.some(({name:r})=>r===f0.COLOR||r===f0.SIZE||r===f0.FACE)||Nnt.has(t)}function mEe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Cnt){e.attrs[t].name=Ant;break}}function gEe(e){for(let t=0;t<e.attrs.length;t++){const n=Int.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function yY(e){for(let t=0;t<e.attrs.length;t++){const n=knt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Dnt(e){const t=Rnt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=Ux(e.tagName))}function Ont(e,t){return t===je.MATHML&&(e===R.MI||e===R.MO||e===R.MN||e===R.MS||e===R.MTEXT)}function $nt(e,t,n){if(t===je.MATHML&&e===R.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===f0.ENCODING){const i=n[r].value.toLowerCase();return i===Mae.TEXT_HTML||i===Mae.APPLICATION_XML}}return t===je.SVG&&(e===R.FOREIGN_OBJECT||e===R.DESC||e===R.TITLE)}function Mnt(e,t,n,r){return(!r||r===je.HTML)&&$nt(e,t,n)||(!r||r===je.MATHML)&&Ont(e,t)}const Lnt="hidden",Fnt=8,jnt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Bnt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},yEe=new Set([R.TABLE,R.TBODY,R.TFOOT,R.THEAD,R.TR]),Lae={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:T_,onParseError:null};let Fae=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...Lae,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new fnt(this.options,this),this.activeFormattingElements=new vnt(this.treeAdapter),this.fragmentContextID=r?Ux(this.treeAdapter.getTagName(r)):R.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new ynt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...Lae,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,je.HTML,[]));const i=r.treeAdapter.createElement("documentmock",je.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===R.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Bnt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===je.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,je.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=as.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==je.HTML))switch(this.fragmentContextID){case R.TITLE:case R.TEXTAREA:{this.tokenizer.state=as.RCDATA;break}case R.STYLE:case R.XMP:case R.IFRAME:case R.NOEMBED:case R.NOFRAMES:case R.NOSCRIPT:{this.tokenizer.state=as.RAWTEXT;break}case R.SCRIPT:{this.tokenizer.state=as.SCRIPT_DATA;break}case R.PLAINTEXT:{this.tokenizer.state=as.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,je.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,je.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,je.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,R.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Cn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===R.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===je.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===R.MGLYPH||t.tagID===R.MALIGNMARK)&&!this._isIntegrationPoint(r,n,je.HTML)}_processToken(t){switch(t.type){case Cn.CHARACTER:{this.onCharacter(t);break}case Cn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Cn.COMMENT:{this.onComment(t);break}case Cn.DOCTYPE:{this.onDoctype(t);break}case Cn.START_TAG:{this._processStartTag(t);break}case Cn.END_TAG:{this.onEndTag(t);break}case Cn.EOF:{this.onEof(t);break}case Cn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Mnt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Ef.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(R.P),this.openElements.popUntilTagNamePopped(R.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case R.TR:{this.insertionMode=ie.IN_ROW;return}case R.TBODY:case R.THEAD:case R.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case R.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case R.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case R.TABLE:{this.insertionMode=ie.IN_TABLE;return}case R.BODY:{this.insertionMode=ie.IN_BODY;return}case R.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case R.SELECT:{this._resetInsertionModeForSelect(t);return}case R.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case R.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case R.TD:case R.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case R.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===R.TEMPLATE)break;if(r===R.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return yEe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case R.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===je.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case R.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return ont[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){git(this,t);return}switch(this.insertionMode){case ie.INITIAL:{tT(this,t);break}case ie.BEFORE_HTML:{ZC(this,t);break}case ie.BEFORE_HEAD:{e2(this,t);break}case ie.IN_HEAD:{t2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{n2(this,t);break}case ie.AFTER_HEAD:{r2(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{bEe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{O8(this,t);break}case ie.IN_TABLE_TEXT:{TEe(this,t);break}case ie.IN_COLUMN_GROUP:{MO(this,t);break}case ie.AFTER_BODY:{LO(this,t);break}case ie.AFTER_AFTER_BODY:{QP(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){mit(this,t);return}switch(this.insertionMode){case ie.INITIAL:{tT(this,t);break}case ie.BEFORE_HTML:{ZC(this,t);break}case ie.BEFORE_HEAD:{e2(this,t);break}case ie.IN_HEAD:{t2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{n2(this,t);break}case ie.AFTER_HEAD:{r2(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{O8(this,t);break}case ie.IN_COLUMN_GROUP:{MO(this,t);break}case ie.AFTER_BODY:{LO(this,t);break}case ie.AFTER_AFTER_BODY:{QP(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){WU(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{WU(this,t);break}case ie.IN_TABLE_TEXT:{nT(this,t);break}case ie.AFTER_BODY:{Gnt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{Ynt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{Knt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,ke.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{nT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,ke.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?yit(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{tT(this,t);break}case ie.BEFORE_HTML:{Xnt(this,t);break}case ie.BEFORE_HEAD:{Jnt(this,t);break}case ie.IN_HEAD:{fd(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{trt(this,t);break}case ie.AFTER_HEAD:{rrt(this,t);break}case ie.IN_BODY:{Aa(this,t);break}case ie.IN_TABLE:{gE(this,t);break}case ie.IN_TABLE_TEXT:{nT(this,t);break}case ie.IN_CAPTION:{Zrt(this,t);break}case ie.IN_COLUMN_GROUP:{_Y(this,t);break}case ie.IN_TABLE_BODY:{UL(this,t);break}case ie.IN_ROW:{zL(this,t);break}case ie.IN_CELL:{nit(this,t);break}case ie.IN_SELECT:{IEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{iit(this,t);break}case ie.IN_TEMPLATE:{oit(this,t);break}case ie.AFTER_BODY:{uit(this,t);break}case ie.IN_FRAMESET:{lit(this,t);break}case ie.AFTER_FRAMESET:{fit(this,t);break}case ie.AFTER_AFTER_BODY:{hit(this,t);break}case ie.AFTER_AFTER_FRAMESET:{pit(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?vit(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{tT(this,t);break}case ie.BEFORE_HTML:{Qnt(this,t);break}case ie.BEFORE_HEAD:{Znt(this,t);break}case ie.IN_HEAD:{ert(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{nrt(this,t);break}case ie.AFTER_HEAD:{irt(this,t);break}case ie.IN_BODY:{BL(this,t);break}case ie.TEXT:{Vrt(this,t);break}case ie.IN_TABLE:{cA(this,t);break}case ie.IN_TABLE_TEXT:{nT(this,t);break}case ie.IN_CAPTION:{eit(this,t);break}case ie.IN_COLUMN_GROUP:{tit(this,t);break}case ie.IN_TABLE_BODY:{GU(this,t);break}case ie.IN_ROW:{AEe(this,t);break}case ie.IN_CELL:{rit(this,t);break}case ie.IN_SELECT:{kEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{sit(this,t);break}case ie.IN_TEMPLATE:{ait(this,t);break}case ie.AFTER_BODY:{NEe(this,t);break}case ie.IN_FRAMESET:{cit(this,t);break}case ie.AFTER_FRAMESET:{dit(this,t);break}case ie.AFTER_AFTER_BODY:{QP(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{tT(this,t);break}case ie.BEFORE_HTML:{ZC(this,t);break}case ie.BEFORE_HEAD:{e2(this,t);break}case ie.IN_HEAD:{t2(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{n2(this,t);break}case ie.AFTER_HEAD:{r2(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{xEe(this,t);break}case ie.TEXT:{Hrt(this,t);break}case ie.IN_TABLE_TEXT:{nT(this,t);break}case ie.IN_TEMPLATE:{REe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{bY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{vEe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{O8(this,t);break}case ie.IN_TABLE_TEXT:{SEe(this,t);break}}}};function Unt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):EEe(e,t),n}function znt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Vnt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=jnt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=Hnt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function Hnt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function qnt(e,t,n){const r=e.treeAdapter.getTagName(t),i=Ux(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===R.TEMPLATE&&s===je.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function Wnt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function vY(e,t){for(let n=0;n<Fnt;n++){const r=Unt(e,t);if(!r)break;const i=znt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Vnt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&qnt(e,o,s),Wnt(e,i,r)}}function WU(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function Gnt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function Ynt(e,t){e._appendCommentNode(t,e.document)}function bY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function Knt(e,t){e._setDocumentType(t);const n=t.forceQuirks?pl.QUIRKS:Tnt(t);Snt(t)||e._err(t,ke.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function tT(e,t){e._err(t,ke.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,pl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Xnt(e,t){t.tagID===R.HTML?(e._insertElement(t,je.HTML),e.insertionMode=ie.BEFORE_HEAD):ZC(e,t)}function Qnt(e,t){const n=t.tagID;(n===R.HTML||n===R.HEAD||n===R.BODY||n===R.BR)&&ZC(e,t)}function ZC(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function Jnt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.HEAD:{e._insertElement(t,je.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:e2(e,t)}}function Znt(e,t){const n=t.tagID;n===R.HEAD||n===R.BODY||n===R.HTML||n===R.BR?e2(e,t):e._err(t,ke.endTagWithoutMatchingOpenElement)}function e2(e,t){e._insertFakeElement(Ee.HEAD,R.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function fd(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:{e._appendElement(t,je.HTML),t.ackSelfClosing=!0;break}case R.TITLE:{e._switchToTextParsing(t,as.RCDATA);break}case R.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,as.RAWTEXT):(e._insertElement(t,je.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case R.NOFRAMES:case R.STYLE:{e._switchToTextParsing(t,as.RAWTEXT);break}case R.SCRIPT:{e._switchToTextParsing(t,as.SCRIPT_DATA);break}case R.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case R.HEAD:{e._err(t,ke.misplacedStartTagForHeadElement);break}default:t2(e,t)}}function ert(e,t){switch(t.tagID){case R.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case R.BODY:case R.BR:case R.HTML:{t2(e,t);break}case R.TEMPLATE:{yb(e,t);break}default:e._err(t,ke.endTagWithoutMatchingOpenElement)}}function yb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==R.TEMPLATE&&e._err(t,ke.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,ke.endTagWithoutMatchingOpenElement)}function t2(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function trt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BASEFONT:case R.BGSOUND:case R.HEAD:case R.LINK:case R.META:case R.NOFRAMES:case R.STYLE:{fd(e,t);break}case R.NOSCRIPT:{e._err(t,ke.nestedNoscriptInHead);break}default:n2(e,t)}}function nrt(e,t){switch(t.tagID){case R.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case R.BR:{n2(e,t);break}default:e._err(t,ke.endTagWithoutMatchingOpenElement)}}function n2(e,t){const n=t.type===Cn.EOF?ke.openElementsLeftAfterEof:ke.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function rrt(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.BODY:{e._insertElement(t,je.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case R.FRAMESET:{e._insertElement(t,je.HTML),e.insertionMode=ie.IN_FRAMESET;break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{e._err(t,ke.abandonedHeadElementChild),e.openElements.push(e.headElement,R.HEAD),fd(e,t),e.openElements.remove(e.headElement);break}case R.HEAD:{e._err(t,ke.misplacedStartTagForHeadElement);break}default:r2(e,t)}}function irt(e,t){switch(t.tagID){case R.BODY:case R.HTML:case R.BR:{r2(e,t);break}case R.TEMPLATE:{yb(e,t);break}default:e._err(t,ke.endTagWithoutMatchingOpenElement)}}function r2(e,t){e._insertFakeElement(Ee.BODY,R.BODY),e.insertionMode=ie.IN_BODY,jL(e,t)}function jL(e,t){switch(t.type){case Cn.CHARACTER:{bEe(e,t);break}case Cn.WHITESPACE_CHARACTER:{vEe(e,t);break}case Cn.COMMENT:{WU(e,t);break}case Cn.START_TAG:{Aa(e,t);break}case Cn.END_TAG:{BL(e,t);break}case Cn.EOF:{xEe(e,t);break}}}function vEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function bEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function srt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function ort(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function art(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_FRAMESET)}function urt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,je.HTML)}function lrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),aEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,je.HTML)}function crt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,je.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function frt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,je.HTML),n||(e.formElement=e.openElements.current))}function drt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===R.LI&&i===R.LI||(n===R.DD||n===R.DT)&&(i===R.DD||i===R.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==R.ADDRESS&&i!==R.DIV&&i!==R.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,je.HTML)}function hrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,je.HTML),e.tokenizer.state=as.PLAINTEXT}function prt(e,t){e.openElements.hasInScope(R.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.framesetOk=!1}function mrt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(vY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function grt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function yrt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(R.NOBR)&&(vY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,je.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function vrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function brt(e,t){e.treeAdapter.getDocumentMode(e.document)!==pl.QUIRKS&&e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,je.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function _Ee(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,je.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function wEe(e){const t=iEe(e,f0.TYPE);return t!=null&&t.toLowerCase()===Lnt}function _rt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,je.HTML),wEe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function wrt(e,t){e._appendElement(t,je.HTML),t.ackSelfClosing=!0}function Ert(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._appendElement(t,je.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function xrt(e,t){t.tagName=Ee.IMG,t.tagID=R.IMG,_Ee(e,t)}function Srt(e,t){e._insertElement(t,je.HTML),e.skipNextNewLine=!0,e.tokenizer.state=as.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function Trt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,as.RAWTEXT)}function Crt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,as.RAWTEXT)}function jae(e,t){e._switchToTextParsing(t,as.RAWTEXT)}function Art(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Irt(e,t){e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML)}function krt(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,je.HTML)}function Rrt(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(R.RTC),e._insertElement(t,je.HTML)}function Nrt(e,t){e._reconstructActiveFormattingElements(),mEe(t),yY(t),t.selfClosing?e._appendElement(t,je.MATHML):e._insertElement(t,je.MATHML),t.ackSelfClosing=!0}function Prt(e,t){e._reconstructActiveFormattingElements(),gEe(t),yY(t),t.selfClosing?e._appendElement(t,je.SVG):e._insertElement(t,je.SVG),t.ackSelfClosing=!0}function Bae(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,je.HTML)}function Aa(e,t){switch(t.tagID){case R.I:case R.S:case R.B:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.SMALL:case R.STRIKE:case R.STRONG:{grt(e,t);break}case R.A:{mrt(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{lrt(e,t);break}case R.P:case R.DL:case R.OL:case R.UL:case R.DIV:case R.DIR:case R.NAV:case R.MAIN:case R.MENU:case R.ASIDE:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.DETAILS:case R.ADDRESS:case R.ARTICLE:case R.SECTION:case R.SUMMARY:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{urt(e,t);break}case R.LI:case R.DD:case R.DT:{drt(e,t);break}case R.BR:case R.IMG:case R.WBR:case R.AREA:case R.EMBED:case R.KEYGEN:{_Ee(e,t);break}case R.HR:{Ert(e,t);break}case R.RB:case R.RTC:{krt(e,t);break}case R.RT:case R.RP:{Rrt(e,t);break}case R.PRE:case R.LISTING:{crt(e,t);break}case R.XMP:{Trt(e,t);break}case R.SVG:{Prt(e,t);break}case R.HTML:{srt(e,t);break}case R.BASE:case R.LINK:case R.META:case R.STYLE:case R.TITLE:case R.SCRIPT:case R.BGSOUND:case R.BASEFONT:case R.TEMPLATE:{fd(e,t);break}case R.BODY:{ort(e,t);break}case R.FORM:{frt(e,t);break}case R.NOBR:{yrt(e,t);break}case R.MATH:{Nrt(e,t);break}case R.TABLE:{brt(e,t);break}case R.INPUT:{_rt(e,t);break}case R.PARAM:case R.TRACK:case R.SOURCE:{wrt(e,t);break}case R.IMAGE:{xrt(e,t);break}case R.BUTTON:{prt(e,t);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{vrt(e,t);break}case R.IFRAME:{Crt(e,t);break}case R.SELECT:{Art(e,t);break}case R.OPTION:case R.OPTGROUP:{Irt(e,t);break}case R.NOEMBED:{jae(e,t);break}case R.FRAMESET:{art(e,t);break}case R.TEXTAREA:{Srt(e,t);break}case R.NOSCRIPT:{e.options.scriptingEnabled?jae(e,t):Bae(e,t);break}case R.PLAINTEXT:{hrt(e,t);break}case R.COL:case R.TH:case R.TD:case R.TR:case R.HEAD:case R.FRAME:case R.TBODY:case R.TFOOT:case R.THEAD:case R.CAPTION:case R.COLGROUP:break;default:Bae(e,t)}}function Drt(e,t){if(e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Ort(e,t){e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,NEe(e,t))}function $rt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Mrt(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(R.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(R.FORM):n&&e.openElements.remove(n))}function Lrt(e){e.openElements.hasInButtonScope(R.P)||e._insertFakeElement(Ee.P,R.P),e._closePElement()}function Frt(e){e.openElements.hasInListItemScope(R.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(R.LI),e.openElements.popUntilTagNamePopped(R.LI))}function jrt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Brt(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Urt(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function zrt(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,R.BR),e.openElements.pop(),e.framesetOk=!1}function EEe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==R.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function BL(e,t){switch(t.tagID){case R.A:case R.B:case R.I:case R.S:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.NOBR:case R.SMALL:case R.STRIKE:case R.STRONG:{vY(e,t);break}case R.P:{Lrt(e);break}case R.DL:case R.UL:case R.OL:case R.DIR:case R.DIV:case R.NAV:case R.PRE:case R.MAIN:case R.MENU:case R.ASIDE:case R.BUTTON:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.ADDRESS:case R.ARTICLE:case R.DETAILS:case R.SECTION:case R.SUMMARY:case R.LISTING:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{$rt(e,t);break}case R.LI:{Frt(e);break}case R.DD:case R.DT:{jrt(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{Brt(e);break}case R.BR:{zrt(e);break}case R.BODY:{Drt(e,t);break}case R.HTML:{Ort(e,t);break}case R.FORM:{Mrt(e);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{Urt(e,t);break}case R.TEMPLATE:{yb(e,t);break}default:EEe(e,t)}}function xEe(e,t){e.tmplInsertionModeStack.length>0?REe(e,t):bY(e,t)}function Vrt(e,t){var n;t.tagID===R.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function Hrt(e,t){e._err(t,ke.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function O8(e,t){if(yEe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case Cn.CHARACTER:{TEe(e,t);break}case Cn.WHITESPACE_CHARACTER:{SEe(e,t);break}}else YI(e,t)}function qrt(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_CAPTION}function Wrt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function Grt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,R.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,_Y(e,t)}function Yrt(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_TABLE_BODY}function Krt(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,R.TBODY),e.insertionMode=ie.IN_TABLE_BODY,UL(e,t)}function Xrt(e,t){e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function Qrt(e,t){wEe(t)?e._appendElement(t,je.HTML):YI(e,t),t.ackSelfClosing=!0}function Jrt(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,je.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function gE(e,t){switch(t.tagID){case R.TD:case R.TH:case R.TR:{Krt(e,t);break}case R.STYLE:case R.SCRIPT:case R.TEMPLATE:{fd(e,t);break}case R.COL:{Grt(e,t);break}case R.FORM:{Jrt(e,t);break}case R.TABLE:{Xrt(e,t);break}case R.TBODY:case R.TFOOT:case R.THEAD:{Yrt(e,t);break}case R.INPUT:{Qrt(e,t);break}case R.CAPTION:{qrt(e,t);break}case R.COLGROUP:{Wrt(e,t);break}default:YI(e,t)}}function cA(e,t){switch(t.tagID){case R.TABLE:{e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode());break}case R.TEMPLATE:{yb(e,t);break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:YI(e,t)}}function YI(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,jL(e,t),e.fosterParentingEnabled=n}function SEe(e,t){e.pendingCharacterTokens.push(t)}function TEe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function nT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)YI(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const CEe=new Set([R.CAPTION,R.COL,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]);function Zrt(e,t){const n=t.tagID;CEe.has(n)?e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,gE(e,t)):Aa(e,t)}function eit(e,t){const n=t.tagID;switch(n){case R.CAPTION:case R.TABLE:{e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===R.TABLE&&cA(e,t));break}case R.BODY:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:BL(e,t)}}function _Y(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.COL:{e._appendElement(t,je.HTML),t.ackSelfClosing=!0;break}case R.TEMPLATE:{fd(e,t);break}default:MO(e,t)}}function tit(e,t){switch(t.tagID){case R.COLGROUP:{e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TEMPLATE:{yb(e,t);break}case R.COL:break;default:MO(e,t)}}function MO(e,t){e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function UL(e,t){switch(t.tagID){case R.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_ROW;break}case R.TH:case R.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,R.TR),e.insertionMode=ie.IN_ROW,zL(e,t);break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,gE(e,t));break}default:gE(e,t)}}function GU(e,t){const n=t.tagID;switch(t.tagID){case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,cA(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:case R.TR:break;default:cA(e,t)}}function zL(e,t){switch(t.tagID){case R.TH:case R.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,je.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,UL(e,t));break}default:gE(e,t)}}function AEe(e,t){switch(t.tagID){case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case R.TABLE:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,GU(e,t));break}case R.TBODY:case R.TFOOT:case R.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(R.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,GU(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:break;default:cA(e,t)}}function nit(e,t){const n=t.tagID;CEe.has(n)?(e.openElements.hasInTableScope(R.TD)||e.openElements.hasInTableScope(R.TH))&&(e._closeTableCell(),zL(e,t)):Aa(e,t)}function rit(e,t){const n=t.tagID;switch(n){case R.TD:case R.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case R.TABLE:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),AEe(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:break;default:BL(e,t)}}function IEe(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._insertElement(t,je.HTML);break}case R.OPTGROUP:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop(),e._insertElement(t,je.HTML);break}case R.INPUT:case R.KEYGEN:case R.TEXTAREA:case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),t.tagID!==R.SELECT&&e._processStartTag(t));break}case R.SCRIPT:case R.TEMPLATE:{fd(e,t);break}}}function kEe(e,t){switch(t.tagID){case R.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===R.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===R.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop();break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop();break}case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode());break}case R.TEMPLATE:{yb(e,t);break}}}function iit(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e._processStartTag(t)):IEe(e,t)}function sit(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e.onEndTag(t)):kEe(e,t)}function oit(e,t){switch(t.tagID){case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{fd(e,t);break}case R.CAPTION:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,gE(e,t);break}case R.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,_Y(e,t);break}case R.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,UL(e,t);break}case R.TD:case R.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,zL(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Aa(e,t)}}function ait(e,t){t.tagID===R.TEMPLATE&&yb(e,t)}function REe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):bY(e,t)}function uit(e,t){t.tagID===R.HTML?Aa(e,t):LO(e,t)}function NEe(e,t){var n;if(t.tagID===R.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===R.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else LO(e,t)}function LO(e,t){e.insertionMode=ie.IN_BODY,jL(e,t)}function lit(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.FRAMESET:{e._insertElement(t,je.HTML);break}case R.FRAME:{e._appendElement(t,je.HTML),t.ackSelfClosing=!0;break}case R.NOFRAMES:{fd(e,t);break}}}function cit(e,t){t.tagID===R.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==R.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function fit(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.NOFRAMES:{fd(e,t);break}}}function dit(e,t){t.tagID===R.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function hit(e,t){t.tagID===R.HTML?Aa(e,t):QP(e,t)}function QP(e,t){e.insertionMode=ie.IN_BODY,jL(e,t)}function pit(e,t){switch(t.tagID){case R.HTML:{Aa(e,t);break}case R.NOFRAMES:{fd(e,t);break}}}function mit(e,t){t.chars=gi,e._insertCharacters(t)}function git(e,t){e._insertCharacters(t),e.framesetOk=!1}function PEe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==je.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function yit(e,t){if(Pnt(t))PEe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===je.MATHML?mEe(t):r===je.SVG&&(Dnt(t),gEe(t)),yY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function vit(e,t){if(t.tagID===R.P||t.tagID===R.BR){PEe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===je.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const bit=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Uae={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function DEe(e,t){const n=kit(e),r=Zwe("type",{handlers:{root:_it,element:wit,text:Eit,comment:$Ee,doctype:xit,raw:Tit},unknown:Cit}),i={parser:n?new Fae(Uae):Fae.getFragmentParser(void 0,Uae),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),zx(i,Uh());const s=n?i.parser.document:i.parser.getFragment(),o=Ntt(s,{file:i.options.file});return i.stitches&&hY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function OEe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function _it(e,t){OEe(e.children,t)}function wit(e,t){Ait(e,t),OEe(e.children,t),Iit(e,t)}function Eit(e,t){t.parser.tokenizer.state>4&&(t.parser.tokenizer.state=0);const n={type:Cn.CHARACTER,chars:e.value,location:KI(e)};zx(t,Uh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function xit(e,t){const n={type:Cn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:KI(e)};zx(t,Uh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Sit(e,t){t.stitches=!0;const n=Rit(e);if("children"in e&&"children"in n){const r=DEe({type:"root",children:e.children},t.options);n.children=r.children}$Ee({type:"comment",value:{stitch:n}},t)}function $Ee(e,t){const n=e.value,r={type:Cn.COMMENT,data:n,location:KI(e)};zx(t,Uh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Tit(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,MEe(t,Uh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Cit(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Sit(n,t);else{let r="";throw bit.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function zx(e,t){MEe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=as.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function MEe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Ait(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===as.PLAINTEXT)return;zx(t,Uh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:zv.html;i===zv.html&&n==="svg"&&(i=zv.svg);const s=Mtt({...e,children:[]},{space:i===zv.svg?"svg":"html"}),o={type:Cn.START_TAG,tagName:n,tagID:Ux(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:KI(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Iit(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&Htt.includes(n)||t.parser.tokenizer.state===as.PLAINTEXT)return;zx(t,$L(e));const r={type:Cn.END_TAG,tagName:n,tagID:Ux(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:KI(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===as.RCDATA||t.parser.tokenizer.state===as.RAWTEXT||t.parser.tokenizer.state===as.SCRIPT_DATA)&&(t.parser.tokenizer.state=as.DATA)}function kit(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function KI(e){const t=Uh(e)||{line:void 0,column:void 0,offset:void 0},n=$L(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Rit(e){return"children"in e?mE({...e,children:[]}):mE(e)}function Nit(e){return function(t,n){return DEe(t,{...e,file:n})}}function Xa({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(vy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(et,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(ki,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(ki,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(ki,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(ki,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(ki,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(ki,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Rx,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Bf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Bf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(vtt,{components:n,rehypePlugins:[Nit],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function YU({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Xa,{text:n})}const Pit="https://github.com/revisit-studies/study/tree/main/public/";function Dit({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Kl();return _.jsx(pr.Main,{children:_.jsxs(ld,{size:"xs",px:"xs",children:[_.jsx(vy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${cd}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(et,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=fwe(i);return _.jsx(ws,{onClick:()=>{r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(pb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:i}),_.jsxs(fn,{align:"center",direction:"row",children:[_.jsx(Doe,{color:"red"}),_.jsx(et,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(YU,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:s.studyMetadata.title}),_.jsxs(et,{c:"dimmed",children:[_.jsx(et,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(et,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(et,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Rx,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${Pit}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(fn,{align:"center",direction:"row",children:[_.jsx(Doe,{color:"orange"}),_.jsx(et,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(YU,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var LEe={exports:{}},FEe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XI=I;function Oit(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $it=typeof Object.is=="function"?Object.is:Oit,Mit=XI.useSyncExternalStore,Lit=XI.useRef,Fit=XI.useEffect,jit=XI.useMemo,Bit=XI.useDebugValue;FEe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Lit(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=jit(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,$it(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Mit(e,s[0],s[1]);return Fit(function(){o.hasValue=!0,o.value=a},[a]),Bit(a),a};LEe.exports=FEe;var Uit=LEe.exports,xl="default"in KD?Wi:KD,zae=Symbol.for("react-redux-context"),Vae=typeof globalThis<"u"?globalThis:{};function zit(){if(!xl.createContext)return{};const e=Vae[zae]??(Vae[zae]=new Map);let t=e.get(xl.createContext);return t||(t=xl.createContext(null),e.set(xl.createContext,t)),t}var R0=zit(),Vit=()=>{throw new Error("uSES not initialized!")};function wY(e=R0){return function(){return xl.useContext(e)}}var jEe=wY(),BEe=Vit,Hit=e=>{BEe=e},qit=(e,t)=>e===t;function Wit(e=R0){const t=e===R0?jEe:wY(e),n=(r,i={})=>{const{equalityFn:s=qit,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();xl.useRef(!0);const d=xl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=BEe(u.addNestedSub,a.getState,l||a.getState,d,s);return xl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var Git=Wit();function Yit(e){e()}function Kit(){let e=null,t=null;return{clear(){e=null,t=null},notify(){Yit(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Hae={notify(){},get:()=>[]};function Xit(e,t){let n,r=Hae,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=Kit())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Hae)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var Qit=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Jit=typeof navigator<"u"&&navigator.product==="ReactNative",Zit=Qit||Jit?xl.useLayoutEffect:xl.useEffect;function est({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=xl.useMemo(()=>{const l=Xit(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=xl.useMemo(()=>e.getState(),[e]);Zit(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||R0;return xl.createElement(u.Provider,{value:o},n)}var tst=est;function UEe(e=R0){const t=e===R0?jEe:wY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var nst=UEe();function rst(e=R0){const t=e===R0?nst:UEe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var zEe=rst();Hit(Uit.useSyncExternalStoreWithSelector);function xo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ist=typeof Symbol=="function"&&Symbol.observable||"@@observable",qae=ist,$8=()=>Math.random().toString(36).substring(7).split("").join("."),sst={INIT:`@@redux/INIT${$8()}`,REPLACE:`@@redux/REPLACE${$8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${$8()}`},FO=sst;function EY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function VEe(e,t,n){if(typeof e!="function")throw new Error(xo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(xo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(xo(1));return n(VEe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(xo(3));return i}function f(g){if(typeof g!="function")throw new Error(xo(4));if(u)throw new Error(xo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(xo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!EY(g))throw new Error(xo(7));if(typeof g.type>"u")throw new Error(xo(8));if(typeof g.type!="string")throw new Error(xo(17));if(u)throw new Error(xo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(xo(10));r=g,d({type:FO.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(xo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[qae](){return this}}}return d({type:FO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[qae]:p}}function ost(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:FO.INIT})>"u")throw new Error(xo(12));if(typeof n(void 0,{type:FO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(xo(13))})}function ast(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{ost(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(xo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function jO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function ust(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(xo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=jO(...a)(i.dispatch),{...i,dispatch:s}}}function lst(e){return EY(e)&&"type"in e&&typeof e.type=="string"}var HEe=Symbol.for("immer-nothing"),Wae=Symbol.for("immer-draftable"),Ml=Symbol.for("immer-state");function Tf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var yE=Object.getPrototypeOf;function N0(e){return!!e&&!!e[Ml]}function hm(e){var t;return e?qEe(e)||Array.isArray(e)||!!e[Wae]||!!((t=e.constructor)!=null&&t[Wae])||HL(e)||qL(e):!1}var cst=Object.prototype.constructor.toString();function qEe(e){if(!e||typeof e!="object")return!1;const t=yE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===cst}function BO(e,t){VL(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function VL(e){const t=e[Ml];return t?t.type_:Array.isArray(e)?1:HL(e)?2:qL(e)?3:0}function KU(e,t){return VL(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function WEe(e,t,n){const r=VL(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function fst(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function HL(e){return e instanceof Map}function qL(e){return e instanceof Set}function hv(e){return e.copy_||e.base_}function XU(e,t){if(HL(e))return new Map(e);if(qL(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=qEe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ml];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(yE(e),r)}else{const r=yE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function xY(e,t=!1){return WL(e)||N0(e)||!hm(e)||(VL(e)>1&&(e.set=e.add=e.clear=e.delete=dst),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>xY(r,!0))),e}function dst(){Tf(2)}function WL(e){return Object.isFrozen(e)}var hst={};function C1(e){const t=hst[e];return t||Tf(0,e),t}var fA;function GEe(){return fA}function pst(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Gae(e,t){t&&(C1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function QU(e){JU(e),e.drafts_.forEach(mst),e.drafts_=null}function JU(e){e===fA&&(fA=e.parent_)}function Yae(e){return fA=pst(fA,e)}function mst(e){const t=e[Ml];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Kae(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ml].modified_&&(QU(t),Tf(4)),hm(e)&&(e=UO(t,e),t.parent_||zO(t,e)),t.patches_&&C1("Patches").generateReplacementPatches_(n[Ml].base_,e,t.patches_,t.inversePatches_)):e=UO(t,n,[]),QU(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==HEe?e:void 0}function UO(e,t,n){if(WL(t))return t;const r=t[Ml];if(!r)return BO(t,(i,s)=>Xae(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return zO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),BO(s,(a,u)=>Xae(e,r,i,a,u,n,o)),zO(e,i,!1),n&&e.patches_&&C1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Xae(e,t,n,r,i,s,o){if(N0(i)){const a=s&&t&&t.type_!==3&&!KU(t.assigned_,r)?s.concat(r):void 0,u=UO(e,i,a);if(WEe(n,r,u),N0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(hm(i)&&!WL(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;UO(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&zO(e,i)}}function zO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&xY(t,n)}function gst(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:GEe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=SY;n&&(i=[r],s=dA);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var SY={get(e,t){if(t===Ml)return e;const n=hv(e);if(!KU(n,t))return yst(e,n,t);const r=n[t];return e.finalized_||!hm(r)?r:r===M8(e.base_,t)?(L8(e),e.copy_[t]=e7(r,e)):r},has(e,t){return t in hv(e)},ownKeys(e){return Reflect.ownKeys(hv(e))},set(e,t,n){const r=YEe(hv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=M8(hv(e),t),s=i==null?void 0:i[Ml];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(fst(n,i)&&(n!==void 0||KU(e.base_,t)))return!0;L8(e),ZU(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return M8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,L8(e),ZU(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=hv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Tf(11)},getPrototypeOf(e){return yE(e.base_)},setPrototypeOf(){Tf(12)}},dA={};BO(SY,(e,t)=>{dA[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});dA.deleteProperty=function(e,t){return dA.set.call(this,e,t,void 0)};dA.set=function(e,t,n){return SY.set.call(this,e[0],t,n,e[0])};function M8(e,t){const n=e[Ml];return(n?hv(n):e)[t]}function yst(e,t,n){var i;const r=YEe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function YEe(e,t){if(!(t in e))return;let n=yE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=yE(n)}}function ZU(e){e.modified_||(e.modified_=!0,e.parent_&&ZU(e.parent_))}function L8(e){e.copy_||(e.copy_=XU(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var vst=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&Tf(6),r!==void 0&&typeof r!="function"&&Tf(7);let i;if(hm(t)){const s=Yae(this),o=e7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?QU(s):JU(s)}return Gae(s,r),Kae(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===HEe&&(i=void 0),this.autoFreeze_&&xY(i,!0),r){const s=[],o=[];C1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else Tf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){hm(e)||Tf(8),N0(e)&&(e=KEe(e));const t=Yae(this),n=e7(e,void 0);return n[Ml].isManual_=!0,JU(t),n}finishDraft(e,t){const n=e&&e[Ml];(!n||!n.isManual_)&&Tf(9);const{scope_:r}=n;return Gae(r,t),Kae(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=C1("Patches").applyPatches_;return N0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function e7(e,t){const n=HL(e)?C1("MapSet").proxyMap_(e,t):qL(e)?C1("MapSet").proxySet_(e,t):gst(e,t);return(t?t.scope_:GEe()).drafts_.push(n),n}function KEe(e){return N0(e)||Tf(10,e),XEe(e)}function XEe(e){if(!hm(e)||WL(e))return e;const t=e[Ml];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=XU(e,t.scope_.immer_.useStrictShallowCopy_)}else n=XU(e,!0);return BO(n,(r,i)=>{WEe(n,r,XEe(i))}),t&&(t.finalized_=!1),n}var Ll=new vst,QEe=Ll.produce;Ll.produceWithPatches.bind(Ll);Ll.setAutoFreeze.bind(Ll);Ll.setUseStrictShallowCopy.bind(Ll);Ll.applyPatches.bind(Ll);Ll.createDraft.bind(Ll);Ll.finishDraft.bind(Ll);function bst(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function _st(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function wst(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Qae=e=>Array.isArray(e)?e:[e];function Est(e){const t=Array.isArray(e[0])?e[0]:e;return wst(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function xst(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Sst=class{constructor(e){this.value=e}deref(){return this.value}},Tst=typeof WeakRef<"u"?WeakRef:Sst,Cst=0,Jae=1;function fN(){return{s:Cst,v:void 0,o:null,p:null}}function TY(e,t={}){let n=fN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=fN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=fN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===Jae)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Tst(c):c}return l.s=Jae,l.v=c,c}return o.clearCache=()=>{n=fN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function JEe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),bst(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=TY,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Qae(d),y=Qae(p),v=Est(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const S=xst(v,arguments);return a=b.apply(null,S),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Ast=JEe(TY),Ist=Object.assign((e,t=Ast)=>{_st(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Ist});function ZEe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var kst=ZEe(),Rst=ZEe,Nst=(...e)=>{const t=JEe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(N0(o)?KEe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Nst(TY);var Pst=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jO:jO.apply(null,arguments)};function vE(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Uu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>lst(r)&&r.type===e,n}var exe=class GT extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,GT.prototype)}static get[Symbol.species](){return GT}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new GT(...t[0].concat(this)):new GT(...t.concat(this))}};function Zae(e){return hm(e)?QEe(e,()=>{}):e}function eue(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Uu(10));const r=n.insert(t,e);return e.set(t,r),r}function Dst(e){return typeof e=="boolean"}var Ost=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new exe;return n&&(Dst(n)?o.push(kst):o.push(Rst(n.extraArgument))),o},$st="RTK_autoBatch",txe=e=>t=>{setTimeout(t,e)},Mst=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:txe(10),Lst=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Mst:e.type==="callback"?e.queueNotification:txe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[$st]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Fst=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new exe(e);return r&&i.push(Lst(typeof r=="object"?r:void 0)),i},jst=!0;function Bst(e){const t=Ost(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(EY(n))a=ast(n);else throw new Error(Uu(1));let u;typeof r=="function"?u=r(t):u=t();let l=jO;i&&(l=Pst({trace:!jst,...typeof i=="object"&&i}));const c=ust(...u),f=Fst(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return VEe(a,s,h)}function nxe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Uu(28));if(a in t)throw new Error(Uu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Ust(e){return typeof e=="function"}function zst(e,t){let[n,r,i]=nxe(t),s;if(Ust(e))s=()=>Zae(e());else{const a=Zae(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(N0(c)){const h=f(c,u);return h===void 0?c:h}else{if(hm(c))return QEe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Uu(9))}return d}}return c},a)}return o.getInitialState=s,o}var Vst="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Hst=(e=21)=>{let t="",n=e;for(;n--;)t+=Vst[Math.random()*64|0];return t},qst=Symbol.for("rtk-slice-createasyncthunk");function Wst(e,t){return`${e}/${t}`}function Gst({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[qst];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Uu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Xst()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Uu(12));if(E in l.sliceCaseReducersByType)throw new Error(Uu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:Wst(s,b),createNotation:typeof i.reducers=="function"};Jst(w)?eot(E,w,c,t):Qst(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?nxe(i.extraReducers):[i.extraReducers],S={...b,...l.sliceCaseReducersByType};return zst(i.initialState,T=>{for(let C in S)T.addCase(C,S[C]);for(let C of l.sliceMatchers)T.addMatcher(C.matcher,C.reducer);for(let C of w)T.addMatcher(C.matcher,C.reducer);E&&T.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(T){let C=T[b];return typeof C>"u"&&w&&(C=g()),C}function S(T=d){const C=eue(h,w,{insert:()=>new WeakMap});return eue(C,T,{insert:()=>{const A={};for(const[N,k]of Object.entries(i.selectors??{}))A[N]=Yst(k,T,g,w);return A}})}return{reducerPath:b,getSelectors:S,get selectors(){return S(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const S=w??o;return b.inject({reducerPath:S,reducer:m},E),{...v,...y(S,!0)}}};return v}}function Yst(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var Kst=Gst();function Xst(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function Qst({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Zst(r))throw new Error(Uu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?vE(e,o):vE(e))}function Jst(e){return e._reducerDefinitionType==="asyncThunk"}function Zst(e){return e._reducerDefinitionType==="reducerWithPrepare"}function eot({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Uu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||dN,pending:a||dN,rejected:u||dN,settled:l||dN})}function dN(){}var tot=(e,t)=>{if(typeof e!="function")throw new Error(Uu(32))},CY="listenerMiddleware",not=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=vE(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Uu(21));return tot(s),{predicate:i,type:t,effect:s}},rot=Object.assign(e=>{const{type:t,predicate:n,effect:r}=not(e);return{id:Hst(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Uu(22))}}},{withTypes:()=>rot}),iot=Object.assign(vE(`${CY}/add`),{withTypes:()=>iot});vE(`${CY}/removeAll`);var sot=Object.assign(vE(`${CY}/remove`),{withTypes:()=>sot});function Uu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var li={};function oot(e){return!!(e&&typeof e.then=="function")}function VO(e){return e||(e=0),new Promise(function(t){return setTimeout(t,e)})}function aot(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function GL(){return Math.random().toString(36).substring(2)}var tue=0,F8=0;function YL(){var e=new Date().getTime();return e===tue?(F8++,e*1e3+F8):(tue=e,F8=0,e*1e3)}var QI=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]",uot=YL,lot="native";function cot(e){var t={messagesCallback:null,bc:new BroadcastChannel(e),subFns:[]};return t.bc.onmessage=function(n){t.messagesCallback&&t.messagesCallback(n.data)},t}function fot(e){e.bc.close(),e.subFns=[]}function dot(e,t){try{return e.bc.postMessage(t,!1),Promise.resolve()}catch(n){return Promise.reject(n)}}function hot(e,t){e.messagesCallback=t}function pot(){if(QI&&typeof window>"u")return!1;if(typeof BroadcastChannel=="function"){if(BroadcastChannel._pubkey)throw new Error("BroadcastChannel: Do not overwrite window.BroadcastChannel with this module, this is not a polyfill");return!0}else return!1}function mot(){return 150}const got={create:cot,close:fot,onMessage:hot,postMessage:dot,canBeUsed:pot,type:lot,averageResponseTime:mot,microSeconds:uot};var rxe=function(){function e(t){this.ttl=t,this.set=new Set,this.timeMap=new Map}return e.prototype.has=function(t){return this.set.has(t)},e.prototype.add=function(t){var n=this;this.timeMap.set(t,ixe()),this.set.add(t),setTimeout(function(){yot(n)},0)},e.prototype.clear=function(){this.set.clear(),this.timeMap.clear()},e}();function yot(e){for(var t=ixe()-e.ttl,n=e.set[Symbol.iterator]();;){var r=n.next().value;if(!r)return;var i=e.timeMap.get(r);if(i<t)e.timeMap.delete(r),e.set.delete(r);else return}}function ixe(){return new Date().getTime()}function KL(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=JSON.parse(JSON.stringify(e));return typeof t.webWorkerSupport>"u"&&(t.webWorkerSupport=!0),t.idb||(t.idb={}),t.idb.ttl||(t.idb.ttl=1e3*45),t.idb.fallbackInterval||(t.idb.fallbackInterval=150),e.idb&&typeof e.idb.onclose=="function"&&(t.idb.onclose=e.idb.onclose),t.localstorage||(t.localstorage={}),t.localstorage.removeTimeout||(t.localstorage.removeTimeout=1e3*60),e.methods&&(t.methods=e.methods),t.node||(t.node={}),t.node.ttl||(t.node.ttl=1e3*60*2),typeof t.node.useFastPath>"u"&&(t.node.useFastPath=!0),t}var vot=YL,bot="pubkey.broadcast-channel-0-",pm="messages",_ot="idb";function sxe(){if(typeof indexedDB<"u")return indexedDB;if(typeof window<"u"){if(typeof window.mozIndexedDB<"u")return window.mozIndexedDB;if(typeof window.webkitIndexedDB<"u")return window.webkitIndexedDB;if(typeof window.msIndexedDB<"u")return window.msIndexedDB}return!1}function wot(e){var t=sxe(),n=bot+e,r=t.open(n,1);r.onupgradeneeded=function(s){var o=s.target.result;o.createObjectStore(pm,{keyPath:"id",autoIncrement:!0})};var i=new Promise(function(s,o){r.onerror=function(a){return o(a)},r.onsuccess=function(){s(r.result)}});return i}function Eot(e,t,n){var r=new Date().getTime(),i={uuid:t,time:r,data:n},s=e.transaction([pm],"readwrite");return new Promise(function(o,a){s.oncomplete=function(){return o()},s.onerror=function(l){return a(l)};var u=s.objectStore(pm);u.add(i)})}function xot(e,t){var n=e.transaction(pm).objectStore(pm),r=[];function i(){try{var s=IDBKeyRange.bound(t+1,1/0);return n.openCursor(s)}catch{return n.openCursor()}}return new Promise(function(s){i().onsuccess=function(o){var a=o.target.result;a?a.value.id<t+1?a.continue(t+1):(r.push(a.value),a.continue()):s(r)}})}function Sot(e,t){var n=e.transaction([pm],"readwrite").objectStore(pm).delete(t);return new Promise(function(r){n.onsuccess=function(){return r()}})}function Tot(e,t){var n=new Date().getTime()-t,r=e.transaction(pm).objectStore(pm),i=[];return new Promise(function(s){r.openCursor().onsuccess=function(o){var a=o.target.result;if(a){var u=a.value;if(u.time<n)i.push(u),a.continue();else{s(i);return}}else s(i)}})}function Cot(e,t){return Tot(e,t).then(function(n){return Promise.all(n.map(function(r){return Sot(e,r.id)}))})}function Aot(e,t){return t=KL(t),wot(e).then(function(n){var r={closed:!1,lastCursorId:0,channelName:e,options:t,uuid:GL(),eMIs:new rxe(t.idb.ttl*2),writeBlockPromise:Promise.resolve(),messagesCallback:null,readQueuePromises:[],db:n};return n.onclose=function(){r.closed=!0,t.idb.onclose&&t.idb.onclose()},oxe(r),r})}function oxe(e){e.closed||axe(e).then(function(){return VO(e.options.idb.fallbackInterval)}).then(function(){return oxe(e)})}function Iot(e,t){return!(e.uuid===t.uuid||t.eMIs.has(e.id)||e.data.time<t.messagesCallbackTime)}function axe(e){return e.closed||!e.messagesCallback?Promise.resolve():xot(e.db,e.lastCursorId).then(function(t){var n=t.filter(function(r){return!!r}).map(function(r){return r.id>e.lastCursorId&&(e.lastCursorId=r.id),r}).filter(function(r){return Iot(r,e)}).sort(function(r,i){return r.time-i.time});return n.forEach(function(r){e.messagesCallback&&(e.eMIs.add(r.id),e.messagesCallback(r.data))}),Promise.resolve()})}function kot(e){e.closed=!0,e.db.close()}function Rot(e,t){return e.writeBlockPromise=e.writeBlockPromise.then(function(){return Eot(e.db,e.uuid,t)}).then(function(){aot(0,10)===0&&Cot(e.db,e.options.idb.ttl)}),e.writeBlockPromise}function Not(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t,axe(e)}function Pot(){if(QI)return!1;var e=sxe();return!!e}function Dot(e){return e.idb.fallbackInterval*2}const Oot={create:Aot,close:kot,onMessage:Not,postMessage:Rot,canBeUsed:Pot,type:_ot,averageResponseTime:Dot,microSeconds:vot};var $ot=YL,Mot="pubkey.broadcastChannel-",Lot="localstorage";function uxe(){var e;if(typeof window>"u")return null;try{e=window.localStorage,e=window["ie8-eventlistener/storage"]||window.localStorage}catch{}return e}function lxe(e){return Mot+e}function Fot(e,t){return new Promise(function(n){VO().then(function(){var r=lxe(e.channelName),i={token:GL(),time:new Date().getTime(),data:t,uuid:e.uuid},s=JSON.stringify(i);uxe().setItem(r,s);var o=document.createEvent("Event");o.initEvent("storage",!0,!0),o.key=r,o.newValue=s,window.dispatchEvent(o),n()})})}function jot(e,t){var n=lxe(e),r=function(s){s.key===n&&t(JSON.parse(s.newValue))};return window.addEventListener("storage",r),r}function Bot(e){window.removeEventListener("storage",e)}function Uot(e,t){if(t=KL(t),!cxe())throw new Error("BroadcastChannel: localstorage cannot be used");var n=GL(),r=new rxe(t.localstorage.removeTimeout),i={channelName:e,uuid:n,eMIs:r};return i.listener=jot(e,function(s){i.messagesCallback&&s.uuid!==n&&(!s.token||r.has(s.token)||s.data.time&&s.data.time<i.messagesCallbackTime||(r.add(s.token),i.messagesCallback(s.data)))}),i}function zot(e){Bot(e.listener)}function Vot(e,t,n){e.messagesCallbackTime=n,e.messagesCallback=t}function cxe(){if(QI)return!1;var e=uxe();if(!e)return!1;try{var t="__broadcastchannel_check";e.setItem(t,"works"),e.removeItem(t)}catch{return!1}return!0}function Hot(){var e=120,t=navigator.userAgent.toLowerCase();return t.includes("safari")&&!t.includes("chrome")?e*2:e}const qot={create:Uot,close:zot,onMessage:Vot,postMessage:Fot,canBeUsed:cxe,type:Lot,averageResponseTime:Hot,microSeconds:$ot};var Wot=YL,Got="simulate",AY=new Set;function Yot(e){var t={name:e,messagesCallback:null};return AY.add(t),t}function Kot(e){AY.delete(e)}function Xot(e,t){return new Promise(function(n){return setTimeout(function(){var r=Array.from(AY);r.filter(function(i){return i.name===e.name}).filter(function(i){return i!==e}).filter(function(i){return!!i.messagesCallback}).forEach(function(i){return i.messagesCallback(t)}),n()},5)})}function Qot(e,t){e.messagesCallback=t}function Jot(){return!0}function Zot(){return 5}const eat={create:Yot,close:Kot,onMessage:Qot,postMessage:Xot,canBeUsed:Jot,type:Got,averageResponseTime:Zot,microSeconds:Wot};var t7=[got,Oot,qot];if(QI){var nue=require("../../src/methods/node.js");typeof nue.canBeUsed=="function"&&t7.push(nue)}function fxe(e){var t=[].concat(e.methods,t7).filter(Boolean);if(e.type){if(e.type==="simulate")return eat;var n=t.find(function(i){return i.type===e.type});if(n)return n;throw new Error("method-type "+e.type+" not found")}!e.webWorkerSupport&&!QI&&(t=t.filter(function(i){return i.type!=="idb"}));var r=t.find(function(i){return i.canBeUsed()});if(r)return r;throw new Error("No useable methode found:"+JSON.stringify(t7.map(function(i){return i.type})))}var IY=function(t,n){this.name=t,n7&&(n=n7),this.options=KL(n),this.method=fxe(this.options),this._iL=!1,this._onML=null,this._addEL={message:[],internal:[]},this._uMP=new Set,this._befC=[],this._prepP=null,rat(this)};IY._pubkey=!0;function tat(e){e=KL(e);var t=fxe(e);return t.type==="node"?t.clearNodeFolder().then(function(){return!0}):Promise.resolve(!1)}var n7;function nat(e){n7=e}IY.prototype={postMessage:function(t){if(this.closed)throw new Error("BroadcastChannel.postMessage(): Cannot post message after channel has closed");return rue(this,"message",t)},postInternal:function(t){return rue(this,"internal",t)},set onmessage(e){var t=this.method.microSeconds(),n={time:t,fn:e};sue(this,"message",this._onML),e&&typeof e=="function"?(this._onML=n,iue(this,"message",n)):this._onML=null},addEventListener:function(t,n){var r=this.method.microSeconds(),i={time:r,fn:n};iue(this,t,i)},removeEventListener:function(t,n){var r=this._addEL[t].find(function(i){return i.fn===n});sue(this,t,r)},close:function(){var t=this;if(!this.closed){this.closed=!0;var n=this._prepP?this._prepP:Promise.resolve();return this._onML=null,this._addEL.message=[],n.then(function(){return Promise.all(Array.from(t._uMP))}).then(function(){return Promise.all(t._befC.map(function(r){return r()}))}).then(function(){return t.method.close(t._state)})}},get type(){return this.method.type},get isClosed(){return this.closed}};function rue(e,t,n){var r=e.method.microSeconds(),i={time:r,type:t,data:n},s=e._prepP?e._prepP:Promise.resolve();return s.then(function(){var o=e.method.postMessage(e._state,i);return e._uMP.add(o),o.catch().then(function(){return e._uMP.delete(o)}),o})}function rat(e){var t=e.method.create(e.name,e.options);oot(t)?(e._prepP=t,t.then(function(n){e._state=n})):e._state=t}function dxe(e){return e._addEL.message.length>0||e._addEL.internal.length>0}function iue(e,t,n){e._addEL[t].push(n),iat(e)}function sue(e,t,n){e._addEL[t]=e._addEL[t].filter(function(r){return r!==n}),sat(e)}function iat(e){if(!e._iL&&dxe(e)){var t=function(i){e._addEL[i.type].forEach(function(s){i.time>=s.time&&s.fn(i.data)})},n=e.method.microSeconds();e._prepP?e._prepP.then(function(){e._iL=!0,e.method.onMessage(e._state,t,n)}):(e._iL=!0,e.method.onMessage(e._state,t,n))}}function sat(e){if(e._iL&&!dxe(e)){e._iL=!1;var t=e.method.microSeconds();e.method.onMessage(e._state,null,t)}}const oat=Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";function aat(e){if(!(typeof WorkerGlobalScope=="function"&&self instanceof WorkerGlobalScope)){if(typeof window.addEventListener!="function")return;window.addEventListener("beforeunload",function(){e()},!0),window.addEventListener("unload",function(){e()},!0)}}const uat={add:aat},hxe={},lat=Object.freeze(Object.defineProperty({__proto__:null,default:hxe},Symbol.toStringTag,{value:"Module"}));var cat=oat?hxe:uat,s1=new Set,oue=!1;function fat(){oue||(oue=!0,cat.add(pxe))}function dat(e){if(fat(),typeof e!="function")throw new Error("Listener is no function");s1.add(e);var t={remove:function(){return s1.delete(e)},run:function(){return s1.delete(e),e()}};return t}function pxe(){var e=[];return s1.forEach(function(t){e.push(t()),s1.delete(t)}),Promise.all(e)}function hat(){s1.clear()}function pat(){return s1.size}const mat={add:dat,runAll:pxe,removeAll:hat,getSize:pat};var mxe=function(t,n){this._channel=t,this._options=n,this.isLeader=!1,this.isDead=!1,this.token=GL(),this._isApl=!1,this._reApply=!1,this._unl=[],this._lstns=[],this._invs=[],this._dpL=function(){},this._dpLC=!1};mxe.prototype={applyOnce:function(){var t=this;if(this.isLeader||this.isDead)return Promise.resolve(!1);if(this._isApl)return this._reApply=!0,Promise.resolve(!1);this._isApl=!0;var n=!1,r=function(o){o.context==="leader"&&o.token!=t.token&&(o.action==="apply"&&o.token>t.token&&(n=!0),o.action==="tell"&&(n=!0))};this._channel.addEventListener("internal",r);var i=Vv(this,"apply").then(function(){return VO(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):Vv(t,"apply")}).then(function(){return VO(t._options.responseTime)}).then(function(){return n?Promise.reject(new Error):Vv(t)}).then(function(){return gxe(t)}).then(function(){return!0}).catch(function(){return!1}).then(function(s){return t._channel.removeEventListener("internal",r),t._isApl=!1,!s&&t._reApply?(t._reApply=!1,t.applyOnce()):s});return i},awaitLeadership:function(){return this._aLP||(this._aLP=gat(this)),this._aLP},set onduplicate(e){this._dpL=e},die:function(){var t=this;if(!this.isDead)return this.isDead=!0,this._lstns.forEach(function(n){return t._channel.removeEventListener("internal",n)}),this._invs.forEach(function(n){return clearInterval(n)}),this._unl.forEach(function(n){n.remove()}),Vv(this,"death")}};function gat(e){return e.isLeader?Promise.resolve():new Promise(function(t){var n=!1;function r(){n||(n=!0,clearInterval(i),e._channel.removeEventListener("internal",s),t(!0))}e.applyOnce().then(function(){e.isLeader&&r()});var i=setInterval(function(){e.applyOnce().then(function(){e.isLeader&&r()})},e._options.fallbackInterval);e._invs.push(i);var s=function(a){a.context==="leader"&&a.action==="death"&&e.applyOnce().then(function(){e.isLeader&&r()})};e._channel.addEventListener("internal",s),e._lstns.push(s)})}function Vv(e,t){var n={context:"leader",action:t,token:e.token};return e._channel.postInternal(n)}function gxe(e){e.isLeader=!0;var t=mat.add(function(){return e.die()});e._unl.push(t);var n=function(i){i.context==="leader"&&i.action==="apply"&&Vv(e,"tell"),i.context==="leader"&&i.action==="tell"&&!e._dpLC&&(e._dpLC=!0,e._dpL(),Vv(e,"tell"))};return e._channel.addEventListener("internal",n),e._lstns.push(n),Vv(e,"tell")}function yat(e,t){return e||(e={}),e=JSON.parse(JSON.stringify(e)),e.fallbackInterval||(e.fallbackInterval=3e3),e.responseTime||(e.responseTime=t.method.averageResponseTime(t.options)),e}function vat(e,t){if(e._leaderElector)throw new Error("BroadcastChannel already has a leader-elector");t=yat(t,e);var n=new mxe(e,t);return e._befC.push(function(){return n.die()}),e._leaderElector=n,n}const bat=Object.freeze(Object.defineProperty({__proto__:null,BroadcastChannel:IY,beLeader:gxe,clearNodeFolder:tat,createLeaderElection:vat,enforceOptions:nat},Symbol.toStringTag,{value:"Module"})),_at=H0e(bat);var kY,RY,NY;Object.defineProperty(li,"__esModule",{value:!0});var yxe=li.initMessageListener=NY=li.initStateWithPrevTab=RY=li.withReduxStateSync=li.createReduxStateSync=kY=li.createStateSyncMiddleware=li.WINDOW_STATE_SYNC_ID=li.INIT_MESSAGE_LISTENER=li.RECEIVE_INIT_STATE=li.SEND_INIT_STATE=li.GET_INIT_STATE=void 0;li.generateUuidForAction=_xe;li.isActionAllowed=wxe;li.isActionSynced=Aat;li.MessageListener=Exe;var wat=_at,r7=0,PY=li.GET_INIT_STATE="&_GET_INIT_STATE",DY=li.SEND_INIT_STATE="&_SEND_INIT_STATE",OY=li.RECEIVE_INIT_STATE="&_RECEIVE_INIT_STATE",Eat=li.INIT_MESSAGE_LISTENER="&_INIT_MESSAGE_LISTENER",i7={channel:"redux_state_sync",predicate:null,blacklist:[],whitelist:[],broadcastChannelOption:void 0,prepareState:function(t){return t},receiveState:function(t,n){return n}},xat=function(){return{type:PY}},Sat=function(){return{type:DY}},Tat=function(t){return{type:OY,payload:t}},Cat=function(){return{type:Eat}};function ig(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}function vxe(){return""+ig()+ig()+"-"+ig()+"-"+ig()+"-"+ig()+"-"+ig()+ig()+ig()}var bxe=li.WINDOW_STATE_SYNC_ID=vxe();function _xe(e){var t=e;return t.$uuid=vxe(),t.$wuid=bxe,t}function wxe(e){var t=e.predicate,n=e.blacklist,r=e.whitelist,i=function(){return!0};return t&&typeof t=="function"?i=t:Array.isArray(n)?i=function(o){return n.indexOf(o.type)<0}:Array.isArray(r)&&(i=function(o){return r.indexOf(o.type)>=0}),i}function Aat(e){return!!e.$isSync}function Exe(e){var t=e.channel,n=e.dispatch,r=e.allowed,i=!1,s={};this.handleOnMessage=function(o){o.$wuid!==bxe&&o.type!==OY&&o.$uuid&&o.$uuid!==r7&&(o.type===PY&&!s[o.$wuid]?(s[o.$wuid]=!0,n(Sat())):o.type===DY&&!s[o.$wuid]?i||(i=!0,n(Tat(o.payload))):r(o)&&(r7=o.$uuid,n(Object.assign(o,{$isSync:!0}))))},this.messageChannel=t,this.messageChannel.onmessage=this.handleOnMessage}kY=li.createStateSyncMiddleware=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:i7,n=wxe(t),r=new wat.BroadcastChannel(t.channel,t.broadcastChannelOption),i=t.prepareState||i7.prepareState,s=null;return function(o){var a=o.getState,u=o.dispatch;return function(l){return function(c){if(s||(s=new Exe({channel:r,dispatch:u,allowed:n})),c&&!c.$uuid){var f=_xe(c);r7=f.$uuid;try{if(c.type===DY)return a()&&(f.payload=i(a()),r.postMessage(f)),l(c);(n(f)||c.type===PY)&&r.postMessage(f)}catch{console.error("Your browser doesn't support cross tab communication")}}return l(Object.assign(c,{$isSync:typeof c.$isSync>"u"?!1:c.$isSync}))}}}};var Iat=li.createReduxStateSync=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i7.receiveState;return function(r,i){var s=r;return i.type===OY&&(s=n(r,i.payload)),t(s,i)}};RY=li.withReduxStateSync=Iat;NY=li.initStateWithPrevTab=function(t){var n=t.dispatch;n(xat())};yxe=li.initMessageListener=function(t){var n=t.dispatch;n(Cat())};function kl(e){return Array.isArray(e)?e:e.components.flatMap(t=>typeof t=="string"?t:kl(t))}function xxe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:xxe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function Sxe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+kl(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+kl(e).length-1}];r+=1}else{const o=Sxe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function kat(e,t){const n=Sxe(e,t,0);return typeof n=="number"?null:n}function Txe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=Txe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Rat(e,t){const n=Txe(e,t,0);return n.found?n.distance:-1}async function Nat(e,t,n,r,i){const s=kl(n),o=Object.fromEntries(s.filter(h=>h!=="end").map((h,p)=>[`${h}_${p}`,{answer:{}}])),a=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((h,p)=>({[`${h}_${p}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,isRecording:!1,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r,analysisTrialName:null,analysisProvState:null,analysisParticipantName:null,analysisWaveformTime:0},c=Kst({name:"storeSlice",initialState:l,reducers:{setConfig(h,p){h.config=p.payload},setIsRecording(h,p){h.isRecording=p.payload},toggleStudyBrowser:h=>{h.showStudyBrowser=!h.showStudyBrowser},toggleShowHelpText:h=>{h.showHelpText=!h.showHelpText},setAlertModal:(h,p)=>{h.alertModal=p.payload},setIframeAnswers:(h,p)=>{h.iframeAnswers=p.payload},setAnalysisTrialName:(h,p)=>{h.analysisTrialName=p.payload},setAnalysisParticipantName:(h,p)=>{h.analysisParticipantName=p.payload},setAnalysisWaveformTime:(h,p)=>{h.analysisWaveformTime=p.payload},setIframeProvenance:(h,p)=>{h.iframeProvenance=p.payload},updateResponseBlockValidation:(h,{payload:p})=>{h.trialValidation[p.identifier]||(h.trialValidation[p.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),h.trialValidation[p.identifier][p.location]={valid:p.status,values:p.values},p.provenanceGraph&&(h.trialValidation[p.identifier].provenanceGraph=p.provenanceGraph)},saveAnalysisState(h,{payload:p}){h.analysisProvState=p},saveTrialAnswer(h,{payload:p}){const{identifier:m,answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}=p;h.answers[m]={answer:g,startTime:y,endTime:v,provenanceGraph:b,windowEvents:w}}}}),f=kY({}),d=Bst({reducer:RY(c.reducer),preloadedState:l,middleware:h=>h().prepend(f)});return yxe(d),NY(d),{store:d,actions:c.actions}}const Cxe=I.createContext(null);function Fl(){return I.useContext(Cxe).actions}const Oc=zEe,Fo=Git;function Pat(e){return Fo(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function $Y(){return Fo(e=>kl(e.sequence))}function vb(){const{studyId:e}=Eh();return`${e}`}function jm(){const{index:e}=Eh(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function zh(){const e=jm(),t=$Y();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var HO={exports:{}};HO.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",S="[object String]",T="[object Undefined]",C="[object WeakMap]",A="[object ArrayBuffer]",N="[object DataView]",k="[object Float32Array]",O="[object Float64Array]",P="[object Int8Array]",$="[object Int16Array]",L="[object Int32Array]",M="[object Uint8Array]",U="[object Uint8ClampedArray]",B="[object Uint16Array]",V="[object Uint32Array]",D=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[k]=j[O]=j[P]=j[$]=j[L]=j[M]=j[U]=j[B]=j[V]=!0,j[a]=j[u]=j[A]=j[c]=j[N]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[S]=j[C]=!1;var q=typeof Ms=="object"&&Ms&&Ms.Object===Object&&Ms,G=typeof self=="object"&&self&&self.Object===Object&&self,te=q||G||Function("return this")(),ve=t&&!t.nodeType&&t,he=ve&&!0&&e&&!e.nodeType&&e,ce=he&&he.exports===ve,me=ce&&q.process,Le=function(){try{var ne=he&&he.require&&he.require("util").types;return ne||me&&me.binding&&me.binding("util")}catch{}}(),fe=Le&&Le.isTypedArray;function ct(ne,le,Ie){switch(Ie.length){case 0:return ne.call(le);case 1:return ne.call(le,Ie[0]);case 2:return ne.call(le,Ie[0],Ie[1]);case 3:return ne.call(le,Ie[0],Ie[1],Ie[2])}return ne.apply(le,Ie)}function ze(ne,le){for(var Ie=-1,It=Array(ne);++Ie<ne;)It[Ie]=le(Ie);return It}function Ke(ne){return function(le){return ne(le)}}function it(ne,le){return ne==null?void 0:ne[le]}function De(ne,le){return function(Ie){return ne(le(Ie))}}var Ae=Array.prototype,Ge=Function.prototype,ht=Object.prototype,Ct=te["__core-js_shared__"],Se=Ge.toString,ue=ht.hasOwnProperty,Ve=function(){var ne=/[^.]+$/.exec(Ct&&Ct.keys&&Ct.keys.IE_PROTO||"");return ne?"Symbol(src)_1."+ne:""}(),st=ht.toString,ge=Se.call(Object),Ne=RegExp("^"+Se.call(ue).replace(D,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=ce?te.Buffer:void 0,Je=te.Symbol,Et=te.Uint8Array;qe&&qe.allocUnsafe;var wn=De(Object.getPrototypeOf,Object),vr=Object.create,br=ht.propertyIsEnumerable,kr=Ae.splice,Kt=Je?Je.toStringTag:void 0,Tn=function(){try{var ne=We(Object,"defineProperty");return ne({},"",{}),ne}catch{}}(),tr=qe?qe.isBuffer:void 0,nr=Math.max,Ho=Date.now,Mi=We(te,"Map"),es=We(Object,"create"),Ln=function(){function ne(){}return function(le){if(!cp(le))return{};if(vr)return vr(le);ne.prototype=le;var Ie=new ne;return ne.prototype=void 0,Ie}}();function Hn(ne){var le=-1,Ie=ne==null?0:ne.length;for(this.clear();++le<Ie;){var It=ne[le];this.set(It[0],It[1])}}function hs(){this.__data__=es?es(null):{},this.size=0}function op(ne){var le=this.has(ne)&&delete this.__data__[ne];return this.size-=le?1:0,le}function ol(ne){var le=this.__data__;if(es){var Ie=le[ne];return Ie===r?void 0:Ie}return ue.call(le,ne)?le[ne]:void 0}function wd(ne){var le=this.__data__;return es?le[ne]!==void 0:ue.call(le,ne)}function Sr(ne,le){var Ie=this.__data__;return this.size+=this.has(ne)?0:1,Ie[ne]=es&&le===void 0?r:le,this}Hn.prototype.clear=hs,Hn.prototype.delete=op,Hn.prototype.get=ol,Hn.prototype.has=wd,Hn.prototype.set=Sr;function Si(ne){var le=-1,Ie=ne==null?0:ne.length;for(this.clear();++le<Ie;){var It=ne[le];this.set(It[0],It[1])}}function ai(){this.__data__=[],this.size=0}function cu(ne){var le=this.__data__,Ie=Xn(le,ne);if(Ie<0)return!1;var It=le.length-1;return Ie==It?le.pop():kr.call(le,Ie,1),--this.size,!0}function Ia(ne){var le=this.__data__,Ie=Xn(le,ne);return Ie<0?void 0:le[Ie][1]}function ka(ne){return Xn(this.__data__,ne)>-1}function oe(ne,le){var Ie=this.__data__,It=Xn(Ie,ne);return It<0?(++this.size,Ie.push([ne,le])):Ie[It][1]=le,this}Si.prototype.clear=ai,Si.prototype.delete=cu,Si.prototype.get=Ia,Si.prototype.has=ka,Si.prototype.set=oe;function ee(ne){var le=-1,Ie=ne==null?0:ne.length;for(this.clear();++le<Ie;){var It=ne[le];this.set(It[0],It[1])}}function ae(){this.size=0,this.__data__={hash:new Hn,map:new(Mi||Si),string:new Hn}}function Te(ne){var le=He(this,ne).delete(ne);return this.size-=le?1:0,le}function Ce(ne){return He(this,ne).get(ne)}function lt(ne){return He(this,ne).has(ne)}function St(ne,le){var Ie=He(this,ne),It=Ie.size;return Ie.set(ne,le),this.size+=Ie.size==It?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Te,ee.prototype.get=Ce,ee.prototype.has=lt,ee.prototype.set=St;function Xt(ne){var le=this.__data__=new Si(ne);this.size=le.size}function Pn(){this.__data__=new Si,this.size=0}function Fn(ne){var le=this.__data__,Ie=le.delete(ne);return this.size=le.size,Ie}function mn(ne){return this.__data__.get(ne)}function rr(ne){return this.__data__.has(ne)}function Rr(ne,le){var Ie=this.__data__;if(Ie instanceof Si){var It=Ie.__data__;if(!Mi||It.length<n-1)return It.push([ne,le]),this.size=++Ie.size,this;Ie=this.__data__=new ee(It)}return Ie.set(ne,le),this.size=Ie.size,this}Xt.prototype.clear=Pn,Xt.prototype.delete=Fn,Xt.prototype.get=mn,Xt.prototype.has=rr,Xt.prototype.set=Rr;function Vt(ne,le){var Ie=up(ne),It=!Ie&&fu(ne),Dn=!Ie&&!It&&lp(ne),Tr=!Ie&&!It&&!Dn&&IR(ne),qr=Ie||It||Dn||Tr,Bn=qr?ze(ne.length,String):[],Wr=Bn.length;for(var ts in ne)qr&&(ts=="length"||Dn&&(ts=="offset"||ts=="parent")||Tr&&(ts=="buffer"||ts=="byteLength"||ts=="byteOffset")||wt(ts,Wr))||Bn.push(ts);return Bn}function ir(ne,le,Ie){(Ie!==void 0&&!Zl(ne[le],Ie)||Ie===void 0&&!(le in ne))&&Ti(ne,le,Ie)}function Hr(ne,le,Ie){var It=ne[le];(!(ue.call(ne,le)&&Zl(It,Ie))||Ie===void 0&&!(le in ne))&&Ti(ne,le,Ie)}function Xn(ne,le){for(var Ie=ne.length;Ie--;)if(Zl(ne[Ie][0],le))return Ie;return-1}function Ti(ne,le,Ie){le=="__proto__"&&Tn?Tn(ne,le,{configurable:!0,enumerable:!0,value:Ie,writable:!0}):ne[le]=Ie}var Ys=Oe();function Xr(ne){return ne==null?ne===void 0?T:y:Kt&&Kt in Object(ne)?Ye(ne):Wo(ne)}function go(ne){return du(ne)&&Xr(ne)==a}function Li(ne){if(!cp(ne)||jn(ne))return!1;var le=jS(ne)?Ne:z;return le.test(TR(ne))}function Fi(ne){return du(ne)&&AR(ne.length)&&!!j[Xr(ne)]}function qo(ne){if(!cp(ne))return Pr(ne);var le=Nr(ne),Ie=[];for(var It in ne)It=="constructor"&&(le||!ue.call(ne,It))||Ie.push(It);return Ie}function Ra(ne,le,Ie,It,Dn){ne!==le&&Ys(le,function(Tr,qr){if(Dn||(Dn=new Xt),cp(Tr))Ks(ne,le,qr,Ie,Ra,It,Dn);else{var Bn=It?It(ap(ne,qr),Tr,qr+"",ne,le,Dn):void 0;Bn===void 0&&(Bn=Tr),ir(ne,qr,Bn)}},Gy)}function Ks(ne,le,Ie,It,Dn,Tr,qr){var Bn=ap(ne,Ie),Wr=ap(le,Ie),ts=qr.get(Wr);if(ts){ir(ne,Ie,ts);return}var Go=Tr?Tr(Bn,Wr,Ie+"",ne,le,qr):void 0,Ky=Go===void 0;if(Ky){var fp=up(Wr),qb=!fp&&lp(Wr),Wb=!fp&&!qb&&IR(Wr);Go=Wr,fp||qb||Wb?up(Bn)?Go=Bn:CR(Bn)?Go=pe(Bn):qb?(Ky=!1,Go=Y(Wr)):Wb?(Ky=!1,Go=Z(Wr)):Go=[]:E5(Wr)||fu(Wr)?(Go=Bn,fu(Bn)?Go=Wy(Bn):(!cp(Bn)||jS(Bn))&&(Go=ut(Wr))):Ky=!1}Ky&&(qr.set(Wr,Go),Dn(Go,Wr,It,Tr,qr),qr.delete(Wr)),ir(ne,Ie,Go)}function Jl(ne,le){return FS(xd(ne,le,tg),ne+"")}var Ed=Tn?function(ne,le){return Tn(ne,"toString",{configurable:!0,enumerable:!1,value:Yy(le),writable:!0})}:tg;function Y(ne,le){return ne.slice()}function se(ne){var le=new ne.constructor(ne.byteLength);return new Et(le).set(new Et(ne)),le}function Z(ne,le){var Ie=se(ne.buffer);return new ne.constructor(Ie,ne.byteOffset,ne.length)}function pe(ne,le){var Ie=-1,It=ne.length;for(le||(le=Array(It));++Ie<It;)le[Ie]=ne[Ie];return le}function ye(ne,le,Ie,It){var Dn=!Ie;Ie||(Ie={});for(var Tr=-1,qr=le.length;++Tr<qr;){var Bn=le[Tr],Wr=void 0;Wr===void 0&&(Wr=ne[Bn]),Dn?Ti(Ie,Bn,Wr):Hr(Ie,Bn,Wr)}return Ie}function de(ne){return Jl(function(le,Ie){var It=-1,Dn=Ie.length,Tr=Dn>1?Ie[Dn-1]:void 0,qr=Dn>2?Ie[2]:void 0;for(Tr=ne.length>3&&typeof Tr=="function"?(Dn--,Tr):void 0,qr&&gn(Ie[0],Ie[1],qr)&&(Tr=Dn<3?void 0:Tr,Dn=1),le=Object(le);++It<Dn;){var Bn=Ie[It];Bn&&ne(le,Bn,It,Tr)}return le})}function Oe(ne){return function(le,Ie,It){for(var Dn=-1,Tr=Object(le),qr=It(le),Bn=qr.length;Bn--;){var Wr=qr[++Dn];if(Ie(Tr[Wr],Wr,Tr)===!1)break}return le}}function He(ne,le){var Ie=ne.__data__;return Pt(le)?Ie[typeof le=="string"?"string":"hash"]:Ie.map}function We(ne,le){var Ie=it(ne,le);return Li(Ie)?Ie:void 0}function Ye(ne){var le=ue.call(ne,Kt),Ie=ne[Kt];try{ne[Kt]=void 0;var It=!0}catch{}var Dn=st.call(ne);return It&&(le?ne[Kt]=Ie:delete ne[Kt]),Dn}function ut(ne){return typeof ne.constructor=="function"&&!Nr(ne)?Ln(wn(ne)):{}}function wt(ne,le){var Ie=typeof ne;return le=le??o,!!le&&(Ie=="number"||Ie!="symbol"&&W.test(ne))&&ne>-1&&ne%1==0&&ne<le}function gn(ne,le,Ie){if(!cp(Ie))return!1;var It=typeof le;return(It=="number"?Hb(Ie)&&wt(le,Ie.length):It=="string"&&le in Ie)?Zl(Ie[le],ne):!1}function Pt(ne){var le=typeof ne;return le=="string"||le=="number"||le=="symbol"||le=="boolean"?ne!=="__proto__":ne===null}function jn(ne){return!!Ve&&Ve in ne}function Nr(ne){var le=ne&&ne.constructor,Ie=typeof le=="function"&&le.prototype||ht;return ne===Ie}function Pr(ne){var le=[];if(ne!=null)for(var Ie in Object(ne))le.push(Ie);return le}function Wo(ne){return st.call(ne)}function xd(ne,le,Ie){return le=nr(le===void 0?ne.length-1:le,0),function(){for(var It=arguments,Dn=-1,Tr=nr(It.length-le,0),qr=Array(Tr);++Dn<Tr;)qr[Dn]=It[le+Dn];Dn=-1;for(var Bn=Array(le+1);++Dn<le;)Bn[Dn]=It[Dn];return Bn[le]=Ie(qr),ct(ne,this,Bn)}}function ap(ne,le){if(!(le==="constructor"&&typeof ne[le]=="function")&&le!="__proto__")return ne[le]}var FS=qy(Ed);function qy(ne){var le=0,Ie=0;return function(){var It=Ho(),Dn=s-(It-Ie);if(Ie=It,Dn>0){if(++le>=i)return arguments[0]}else le=0;return ne.apply(void 0,arguments)}}function TR(ne){if(ne!=null){try{return Se.call(ne)}catch{}try{return ne+""}catch{}}return""}function Zl(ne,le){return ne===le||ne!==ne&&le!==le}var fu=go(function(){return arguments}())?go:function(ne){return du(ne)&&ue.call(ne,"callee")&&!br.call(ne,"callee")},up=Array.isArray;function Hb(ne){return ne!=null&&AR(ne.length)&&!jS(ne)}function CR(ne){return du(ne)&&Hb(ne)}var lp=tr||RR;function jS(ne){if(!cp(ne))return!1;var le=Xr(ne);return le==h||le==p||le==l||le==b}function AR(ne){return typeof ne=="number"&&ne>-1&&ne%1==0&&ne<=o}function cp(ne){var le=typeof ne;return ne!=null&&(le=="object"||le=="function")}function du(ne){return ne!=null&&typeof ne=="object"}function E5(ne){if(!du(ne)||Xr(ne)!=v)return!1;var le=wn(ne);if(le===null)return!0;var Ie=ue.call(le,"constructor")&&le.constructor;return typeof Ie=="function"&&Ie instanceof Ie&&Se.call(Ie)==ge}var IR=fe?Ke(fe):Fi;function Wy(ne){return ye(ne,Gy(ne))}function Gy(ne){return Hb(ne)?Vt(ne):qo(ne)}var kR=de(function(ne,le,Ie){Ra(ne,le,Ie)});function Yy(ne){return function(){return ne}}function tg(ne){return ne}function RR(){return!1}e.exports=kR})(HO,HO.exports);var Dat=HO.exports;const MY=nl(Dat),rT="@REVISIT_COMMS",Oat={minHeight:"500px",width:"100%",border:0};function $at({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Fl(),r=Oc(),i=zEe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=zh(),u=Kl(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${rT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${rT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${rT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${rT}/ANSWERS`:r(t(d.message));break;case`${rT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${cd}${e.path}?trialid=${a}&id=${o}`,style:Oat})}async function LY(e){const n=await(await fetch(`${cd}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function JI({email:e,path:t}){const n=Fm();return _.jsxs(ld,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(ki,{order:2,children:_.jsx(et,{span:!0,c:"orange",children:"404"})}),_.jsxs(et,{children:[_.jsx(et,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(Tc,{h:"lg"}),_.jsxs(Bf,{children:[_.jsx(Bf.Item,{children:_.jsx(et,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Bf.Item,{children:_.jsxs(et,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Rx,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Mat={maxWidth:"100%"};function Lat({currentConfig:e}){const t={...Mat,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await LY(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(vy,{mx:"auto",src:`${cd}${e.path}`,style:t}):_.jsx(JI,{path:e.path})}function Fat({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await LY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Xa,{text:t}):_.jsx(JI,{path:e.path})}function Qf(){return Fo(e=>e.config)}function FY(){const{answers:e}=Fo(i=>i),t=jm(),r=`${zh()}_${t}`;return e[r]}const jat=H0e(lat);var Bat=jat;function Uat(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function zat(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function Vat(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function Hat(e){return e.__COMMENTS__}function qat(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var XL={EOL:Bat.EOL||`
`,tryParseNumber:Uat,createComment:zat,removeComment:Vat,getComment:Hat,forceComment:qat},Wat="3.2.1";function Gat(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return aue}else if(e.length===0)return aue;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return Kat(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),Yat.bind(null,n)}function Yat(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function aue(){}function Kat(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function Axe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}Axe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function Ixe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}Ixe.description="parse hexadecimal numbers prefixed with 0x";function kxe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}kxe.description="support ISO dates";var jY={loadDsf:Gat,std:{math:Axe,hex:Ixe,date:kxe}},Xat=function(e,t){var n=XL,r=jY,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var L,M=0,U=1;for(L=s-1;L>0&&i[L]!==`
`;L--,M++);for(;L>0;L--)i[L]===`
`&&U++;throw new Error($+" at line "+U+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var L="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&L.length===0?(h(),g()):L;if(o==="\\")if(h(),o==="u"){for(var U=0,B=0;B<4;B++){h();var V=o.charCodeAt(0),D;o>="0"&&o<="9"?D=V-48:o>="a"&&o<="f"?D=V-97+10:o>="A"&&o<="F"?D=V-65+10:d("Bad \\u char "+o),U=U*16+D}L+=String.fromCharCode(U)}else if(typeof a[o]=="string")L+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):L+=o}d("Bad string")}function g(){for(var $="",L=0,M=0;;){var U=p(-M-5);if(!U||U===`
`)break;M++}function B(){for(var V=M;o&&o<=" "&&o!==`
`&&V-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),B());;){if(!o)d("Bad multiline string");else if(o==="'"){if(L++,h(),L===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;L>0;)$+="'",L--;o===`
`?($+=`
`,h(),B()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",L=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=L+M,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var L=o==="\r"||o===`
`||o==="";if(L||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var U=n.tryParseNumber($);if(U!==void 0)return U}}if(L){$=$.trim();var B=l($);return B!==void 0?B:$}}$+=o}}function w($,L){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var U=i.substr($,M-$+1);for(M=0;M<U.length;M++)if(U[M]>" "){var B=U.indexOf(`
`);if(B>=0){var V=[U.substr(0,B),U.substr(B+1)];return L&&V[0].trim().length===0&&V.shift(),V}else return[U]}return[]}function E($){function L(U,B){var V,D,z,W;switch(typeof U){case"string":U.indexOf(B)>=0&&(W=U);break;case"object":if(Object.prototype.toString.apply(U)==="[object Array]")for(V=0,z=U.length;V<z;V++)W=L(U[V],B)||W;else for(D in U)Object.prototype.hasOwnProperty.call(U,D)&&(W=L(U[D],B)||W)}return W}function M(U){var B=L($,U);return B?"found '"+U+`' in a string value, your mistake could be with:
  > `+B+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function S(){var $=[],L,M,U;try{if(u&&(L=n.createComment($,{a:[]})),h(),M=s,v(),L&&(U=w(M,!0).join(`
`)),o==="]")return h(),L&&(L.e=[U]),$;for(;o;){if($.push(C()),M=s,v(),o===","&&(h(),M=s,v()),L){var B=w(M);L.a.push([U||"",B[0]||""]),U=B[1]}if(o==="]")return h(),L&&(L.a[L.a.length-1][1]+=U||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(V){throw V.hint=V.hint||E($),V}}function T($){var L="",M={},U,B,V;try{if(u&&(U=n.createComment(M,{c:{},o:[]})),$?B=1:(h(),B=s),v(),U&&(V=w(B,!0).join(`
`)),o==="}"&&!$)return U&&(U.e=[V]),h(),M;for(;o;){if(L=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),M[L]=C(),B=s,v(),o===","&&(h(),B=s,v()),U){var D=w(B);U.c[L]=[V||"",D[0]||""],V=D[1],U.o.push(L)}if(o==="}"&&!$)return h(),U&&(U.c[L][1]+=V||""),M;v()}if($)return M;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(M),z}}function C(){switch(v(),o){case"{":return T();case"[":return S();case"'":case'"':return m(!0);default:return b()}}function A($,L){var M=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var U=L.join(`
`),B=w(M).join(`
`);if(B||U){var V=n.createComment($,n.getComment($));V.r=[U,B]}}return $}function N(){v();var $=u?w(1):null;switch(o){case"{":return A(T(),$);case"[":return A(S(),$);default:return A(C(),$)}}function k(){v();var $=u?w(1):null;switch(o){case"{":return A(T(),$);case"[":return A(S(),$)}try{return A(T(!0),$)}catch(L){c();try{return A(C(),$)}catch{throw L}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,P=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,P=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),P?k():N()},Qat=function(e,t){var n=XL,r=jY,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",S=new RegExp('[\\\\\\"\0-'+E+"]","g"),T=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),C=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),A=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),N={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},k=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",P=0;function $(W,j){return P+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function L(W){return W.replace(S,function(j){var q=N[j];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,q,G){return W?(T.lastIndex=0,A.lastIndex=0,c||q||T.test(W)||n.tryParseNumber(W,!0)!==void 0||A.test(W)?(S.lastIndex=0,C.lastIndex=0,S.test(W)?!C.test(W)&&!G&&d?U(W,j):$(g.qstr,L(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function U(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var te=s+j+g.mstr[0];for(q=0;q<G.length;q++)te+=s,G[q]&&(te+=j+G[q]);return te+s+j+g.mstr[1]}function B(W){return W?l||k.test(W)?(S.lastIndex=0,$(g.qkey,S.test(W)?L(W):W)):$(g.key,W):'""'}function V(W,j,q,G){function te(Kt){return Kt&&Kt[Kt[0]==="\r"?1:0]===`
`}function ve(Kt){return Kt&&!te(Kt)}function he(Kt,Tn,tr){if(!Kt)return"";Kt=n.forceComment(Kt);var nr,Ho=Kt.length;for(nr=0;nr<Ho&&Kt[nr]<=" ";nr++);return tr&&nr>0&&(Kt=Kt.substr(nr)),nr<Ho?Tn+$(g.rem,Kt):Kt}var ce=w(W);if(ce!==void 0)return $(g.dsf,ce);switch(typeof W){case"string":return M(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var me;a&&(me=n.getComment(W));var Le=Object.prototype.toString.apply(W)==="[object Array]",fe=O;O+=o;var ct=s+fe,ze=s+O,Ke=q||u?"":ct,it=[],De,Ae=f?[]:null,Ge=c,ht=d,Ct=h?"":g.com[0],Se=0,ue,Ve,st,ge,Ne,qe,Je,Et,wn;if(Le){for(ue=0,Ve=W.length;ue<Ve;ue++){if(De=ue<Ve-1,me?(qe=me.a[ue]||[],Je=ve(qe[1]),it.push(he(qe[0],`
`)+ze),Ae&&(qe[0]||qe[1]||Je)&&(Ae=null)):it.push(ze),P=0,ge=W[ue],it.push(V(ge,me?Je:!1,!0)+(De?h:"")),Ae){switch(typeof ge){case"string":P=0,c=!0,d=0,Ae.push(V(ge,!1,!0)+(De?g.com[0]:"")),c=Ge,d=ht;break;case"object":if(ge){Ae=null;break}default:Ae.push(it[it.length-1]+(De?Ct:""));break}De&&(P+=g.com[0].length-g.com[2]),Se+=P}me&&qe[1]&&it.push(he(qe[1],Je?" ":`
`,Je))}Ve===0?me&&me.e&&it.push(he(me.e[0],`
`)+ct):it.push(ct),it.length===0?Et=$(g.arr,""):(Et=Ke+$(g.arr,it.join("")),Ae&&(wn=Ae.join(" "),wn.length-Se<=f&&(Et=$(g.arr,wn))))}else{var vr=me?me.o.slice():[],br=[];for(st in W)Object.prototype.hasOwnProperty.call(W,st)&&vr.indexOf(st)<0&&br.push(st);m&&br.sort();var kr=vr.concat(br);for(ue=0,Ve=kr.length;ue<Ve;ue++)if(De=ue<Ve-1,st=kr[ue],me?(qe=me.c[st]||[],Je=ve(qe[1]),it.push(he(qe[0],`
`)+ze),Ae&&(qe[0]||qe[1]||Je)&&(Ae=null)):it.push(ze),P=0,ge=W[st],Ne=V(ge,me&&Je),it.push(B(st)+g.col[0]+(te(Ne)?"":" ")+Ne+(De?h:"")),me&&qe[1]&&it.push(he(qe[1],Je?" ":`
`,Je)),Ae){switch(typeof ge){case"string":P=0,c=!0,d=0,Ne=V(ge,!1),c=Ge,d=ht,Ae.push(B(st)+g.col[0]+" "+Ne+(De?g.com[0]:""));break;case"object":if(ge){Ae=null;break}default:Ae.push(it[it.length-1]+(De?Ct:""));break}P+=g.col[0].length-g.col[2],De&&(P+=g.com[0].length-g.com[2]),Se+=P}Ve===0?me&&me.e&&it.push(he(me.e[0],`
`)+ct):it.push(ct),it.length===0?Et=$(g.obj,""):(Et=Ke+$(g.obj,it.join("")),Ae&&(wn=Ae.join(" "),wn.length-Se<=f&&(Et=$(g.obj,wn))))}return O=fe,Et}}w=r.loadDsf(p,"stringify");var D="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(D=z[0]+`
`),D+=V(e,null,!0,!0),z&&(D+=z[1]||""),D},Aw=XL;function i2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function s7(e,t){if(!(e===null||typeof e!="object")){var n=Aw.getComment(e);n&&Aw.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)uue(o.a,r,n.a[r],s7(e[r]))&&(s=!0);!s&&n.e&&(o.e=i2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];uue(o.s,l,n.c[l],s7(e[l]))&&(s=!0)}!s&&n.e&&(o.e=i2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=i2(n.r[0],n.r[1])),s?o:void 0}}function Jat(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function Zat(e,t){var n=[];if(o7(e,t,n,[]),n.length>0){var r=qO(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+Jat(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),qO(t,r,1)}}function uue(e,t,n,r){var i=i2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function s2(e,t){var n=i2(t.b,t.a);return n.path=e,n}function o2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(s2(s,o)),o2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(s2(u,l)),o2(l.x,t,u))});e.e&&t.push(s2(n,e.e))}}function o7(e,t,n,r){if(e){if(t===null||typeof t!="object"){o2(e,n,r);return}var i,s=Aw.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],o7(u.x,t[i],n,l)):(n.push(s2(l,u)),o2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],o7(d.x,t[c],n,f))):d&&(n.push(s2(f,d)),o2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function qO(e,t,n){var r=Aw.createComment(e,Aw.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=Aw.forceComment(t)),r.r[n]||""}var eut={extract:function(e){return s7(e,!0)},merge:Zat,header:function(e,t){return qO(e,t,0)},footer:function(e,t){return qO(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var lue=XL,tut=Wat,cue=Xat,fue=Qat,nut=eut,rut=jY,BY={parse:cue,stringify:fue,endOfLine:function(){return lue.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(lue.EOL=e)},version:tut,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,cue(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,fue(e,t)}},comments:nut,dsf:rut.std},a7={exports:{}},Rxe={},Uf={},bE={},ZI={},Nn={},hA={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(hA);var u7={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=hA;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(u7);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=hA,n=u7;var r=hA;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=u7;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,te){super(),this.varKind=q,this.name=G,this.rhs=te}render({es5:q,_n:G}){const te=q?n.varKinds.var:this.varKind,ve=this.rhs===void 0?"":` = ${this.rhs}`;return`${te} ${this.name}${ve};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,te){super(),this.lhs=q,this.rhs=G,this.sideEffects=te}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return P(q,this.rhs)}}class u extends a{constructor(q,G,te,ve){super(q,te,ve),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=$(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,te)=>G+te.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const te=q[G].optimizeNodes();Array.isArray(te)?q.splice(G,1,...te):te?q[G]=te:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:te}=this;let ve=te.length;for(;ve--;){const he=te[ve];he.optimizeNames(q,G)||(L(q,he.names),te.splice(ve,1))}return te.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>O(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const te=G.optimizeNodes();G=this.else=Array.isArray(te)?new g(te):te}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var te;if(this.else=(te=this.else)===null||te===void 0?void 0:te.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=$(this.condition,q,G),this}get names(){const q=super.names;return P(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=$(this.iteration,q,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(q,G,te,ve){super(),this.varKind=q,this.name=G,this.from=te,this.to=ve}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:te,from:ve,to:he}=this;return`for(${G} ${te}=${ve}; ${te}<${he}; ${te}++)`+super.render(q)}get names(){const q=P(super.names,this.from);return P(q,this.to)}}class E extends v{constructor(q,G,te,ve){super(),this.loop=q,this.varKind=G,this.name=te,this.iterable=ve}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=$(this.iterable,q,G),this}get names(){return O(super.names,this.iterable.names)}}class S extends p{constructor(q,G,te){super(),this.name=q,this.args=G,this.async=te}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}S.kind="func";class T extends h{render(q){return"return "+super.render(q)}}T.kind="return";class C extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var te,ve;return super.optimizeNames(q,G),(te=this.catch)===null||te===void 0||te.optimizeNames(q,G),(ve=this.finally)===null||ve===void 0||ve.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class A extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}A.kind="catch";class N extends p{render(q){return"finally"+super.render(q)}}N.kind="finally";class k{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const te=this._extScope.value(q,G);return(this._values[te.prefix]||(this._values[te.prefix]=new Set)).add(te),te}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,te,ve){const he=this._scope.toName(G);return te!==void 0&&ve&&(this._constants[he.str]=te),this._leafNode(new o(q,he,te)),he}const(q,G,te){return this._def(n.varKinds.const,q,G,te)}let(q,G,te){return this._def(n.varKinds.let,q,G,te)}var(q,G,te){return this._def(n.varKinds.var,q,G,te)}assign(q,G,te){return this._leafNode(new a(q,G,te))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[te,ve]of q)G.length>1&&G.push(","),G.push(te),(te!==ve||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ve));return G.push("}"),new t._Code(G)}if(q,G,te){if(this._blockNode(new y(q)),G&&te)this.code(G).else().code(te).endIf();else if(G)this.code(G).endIf();else if(te)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new b(q),G)}forRange(q,G,te,ve,he=this.opts.es5?n.varKinds.var:n.varKinds.let){const ce=this._scope.toName(q);return this._for(new w(he,ce,G,te),()=>ve(ce))}forOf(q,G,te,ve=n.varKinds.const){const he=this._scope.toName(q);if(this.opts.es5){const ce=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${ce}.length`,me=>{this.var(he,(0,t._)`${ce}[${me}]`),te(he)})}return this._for(new E("of",ve,he,G),()=>te(he))}forIn(q,G,te,ve=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,te);const he=this._scope.toName(q);return this._for(new E("in",ve,he,G),()=>te(he))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new T;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(T)}try(q,G,te){if(!G&&!te)throw new Error('CodeGen: "try" without "catch" and "finally"');const ve=new C;if(this._blockNode(ve),this.code(q),G){const he=this.name("e");this._currNode=ve.catch=new A(he),G(he)}return te&&(this._currNode=ve.finally=new N,this.code(te)),this._endBlockNode(A,N)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const te=this._nodes.length-G;if(te<0||q!==void 0&&te!==q)throw new Error(`CodeGen: wrong number of nodes: ${te} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,te,ve){return this._blockNode(new S(q,G,te)),ve&&this.code(ve).endFunc(),this}endFunc(){return this._endBlockNode(S)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const te=this._currNode;if(te instanceof q||G&&te instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=k;function O(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function P(j,q){return q instanceof t._CodeOrName?O(j,q.names):j}function $(j,q,G){if(j instanceof t.Name)return te(j);if(!ve(j))return j;return new t._Code(j._items.reduce((he,ce)=>(ce instanceof t.Name&&(ce=te(ce)),ce instanceof t._Code?he.push(...ce._items):he.push(ce),he),[]));function te(he){const ce=G[he.str];return ce===void 0||q[he.str]!==1?he:(delete q[he.str],ce)}function ve(he){return he instanceof t._Code&&he._items.some(ce=>ce instanceof t.Name&&q[ce.str]===1&&G[ce.str]!==void 0)}}function L(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const U=z(e.operators.AND);function B(...j){return j.reduce(U)}e.and=B;const V=z(e.operators.OR);function D(...j){return j.reduce(V)}e.or=D;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Nn);var _t={};Object.defineProperty(_t,"__esModule",{value:!0});_t.checkStrictMode=_t.getErrorPath=_t.Type=_t.useFunc=_t.setEvaluated=_t.evaluatedPropsToName=_t.mergeEvaluated=_t.eachItem=_t.unescapeJsonPointer=_t.escapeJsonPointer=_t.escapeFragment=_t.unescapeFragment=_t.schemaRefOrVal=_t.schemaHasRulesButRef=_t.schemaHasRules=_t.checkUnknownRules=_t.alwaysValidSchema=_t.toHash=void 0;const Yr=Nn,iut=hA;function sut(e){const t={};for(const n of e)t[n]=!0;return t}_t.toHash=sut;function out(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(Nxe(e,t),!Pxe(t,e.self.RULES.all))}_t.alwaysValidSchema=out;function Nxe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||$xe(e,`unknown keyword: "${s}"`)}_t.checkUnknownRules=Nxe;function Pxe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}_t.schemaHasRules=Pxe;function aut(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}_t.schemaHasRulesButRef=aut;function uut({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Yr._)`${n}`}return(0,Yr._)`${e}${t}${(0,Yr.getProperty)(r)}`}_t.schemaRefOrVal=uut;function lut(e){return Dxe(decodeURIComponent(e))}_t.unescapeFragment=lut;function cut(e){return encodeURIComponent(UY(e))}_t.escapeFragment=cut;function UY(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}_t.escapeJsonPointer=UY;function Dxe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}_t.unescapeJsonPointer=Dxe;function fut(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}_t.eachItem=fut;function due({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Yr.Name?(s instanceof Yr.Name?e(i,s,o):t(i,s,o),o):s instanceof Yr.Name?(t(i,o,s),s):n(s,o);return a===Yr.Name&&!(u instanceof Yr.Name)?r(i,u):u}}_t.mergeEvaluated={props:due({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Yr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Yr._)`${n} || {}`).code((0,Yr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Yr._)`${n} || {}`),zY(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:Oxe}),items:due({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Yr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Yr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function Oxe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Yr._)`{}`);return t!==void 0&&zY(e,n,t),n}_t.evaluatedPropsToName=Oxe;function zY(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Yr._)`${t}${(0,Yr.getProperty)(r)}`,!0))}_t.setEvaluated=zY;const hue={};function dut(e,t){return e.scopeValue("func",{ref:t,code:hue[t.code]||(hue[t.code]=new iut._Code(t.code))})}_t.useFunc=dut;var l7;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(l7||(_t.Type=l7={}));function hut(e,t,n){if(e instanceof Yr.Name){const r=t===l7.Num;return n?r?(0,Yr._)`"[" + ${e} + "]"`:(0,Yr._)`"['" + ${e} + "']"`:r?(0,Yr._)`"/" + ${e}`:(0,Yr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Yr.getProperty)(e).toString():"/"+UY(e)}_t.getErrorPath=hut;function $xe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}_t.checkStrictMode=$xe;var Vh={};Object.defineProperty(Vh,"__esModule",{value:!0});const Jo=Nn,put={data:new Jo.Name("data"),valCxt:new Jo.Name("valCxt"),instancePath:new Jo.Name("instancePath"),parentData:new Jo.Name("parentData"),parentDataProperty:new Jo.Name("parentDataProperty"),rootData:new Jo.Name("rootData"),dynamicAnchors:new Jo.Name("dynamicAnchors"),vErrors:new Jo.Name("vErrors"),errors:new Jo.Name("errors"),this:new Jo.Name("this"),self:new Jo.Name("self"),scope:new Jo.Name("scope"),json:new Jo.Name("json"),jsonPos:new Jo.Name("jsonPos"),jsonLen:new Jo.Name("jsonLen"),jsonPart:new Jo.Name("jsonPart")};Vh.default=put;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Nn,n=_t,r=Vh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:S,allErrors:T}=w,C=f(g,y,v);b??(S||T)?u(E,C):l(w,(0,t._)`[${C}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:S}=b,T=f(g,y,v);u(w,T),E||S||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const S=g.name("err");g.forRange("i",w,r.default.errors,T=>{g.const(S,(0,t._)`${r.default.vErrors}[${T}]`),g.if((0,t._)`${S}.instancePath === undefined`,()=>g.assign((0,t._)`${S}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${S}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${S}.schema`,v),g.assign((0,t._)`${S}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:S,it:T}=g,{opts:C,propertyName:A,topSchemaRef:N,schemaPath:k}=T;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),C.messages&&b.push([c.message,typeof v=="function"?v(g):v]),C.verbose&&b.push([c.schema,S],[c.parentSchema,(0,t._)`${N}${k}`],[r.default.data,E]),A&&b.push([c.propertyName,A])}})(ZI);Object.defineProperty(bE,"__esModule",{value:!0});bE.boolOrEmptySchema=bE.topBoolOrEmptySchema=void 0;const mut=ZI,gut=Nn,yut=Vh,vut={message:"boolean schema is false"};function but(e){const{gen:t,schema:n,validateName:r}=e;n===!1?Mxe(e,!1):typeof n=="object"&&n.$async===!0?t.return(yut.default.data):(t.assign((0,gut._)`${r}.errors`,null),t.return(!0))}bE.topBoolOrEmptySchema=but;function _ut(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),Mxe(e)):n.var(t,!0)}bE.boolOrEmptySchema=_ut;function Mxe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,mut.reportError)(i,vut,void 0,t)}var Rs={},A1={};Object.defineProperty(A1,"__esModule",{value:!0});A1.getRules=A1.isJSONType=void 0;const wut=["string","number","integer","boolean","null","object","array"],Eut=new Set(wut);function xut(e){return typeof e=="string"&&Eut.has(e)}A1.isJSONType=xut;function Sut(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}A1.getRules=Sut;var Gp={};Object.defineProperty(Gp,"__esModule",{value:!0});Gp.shouldUseRule=Gp.shouldUseGroup=Gp.schemaHasRulesForType=void 0;function Tut({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&Lxe(e,r)}Gp.schemaHasRulesForType=Tut;function Lxe(e,t){return t.rules.some(n=>Fxe(e,n))}Gp.shouldUseGroup=Lxe;function Fxe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}Gp.shouldUseRule=Fxe;Object.defineProperty(Rs,"__esModule",{value:!0});Rs.reportTypeError=Rs.checkDataTypes=Rs.checkDataType=Rs.coerceAndCheckDataType=Rs.getJSONTypes=Rs.getSchemaTypes=Rs.DataType=void 0;const Cut=A1,Aut=Gp,Iut=ZI,En=Nn,jxe=_t;var Iw;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Iw||(Rs.DataType=Iw={}));function kut(e){const t=Bxe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Rs.getSchemaTypes=kut;function Bxe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(Cut.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Rs.getJSONTypes=Bxe;function Rut(e,t){const{gen:n,data:r,opts:i}=e,s=Nut(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,Aut.schemaHasRulesForType)(e,t[0]));if(o){const a=VY(t,r,i.strictNumbers,Iw.Wrong);n.if(a,()=>{s.length?Put(e,t,s):HY(e)})}return o}Rs.coerceAndCheckDataType=Rut;const Uxe=new Set(["string","number","integer","boolean","null"]);function Nut(e,t){return t?e.filter(n=>Uxe.has(n)||t==="array"&&n==="array"):[]}function Put(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,En._)`typeof ${i}`),a=r.let("coerced",(0,En._)`undefined`);s.coerceTypes==="array"&&r.if((0,En._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,En._)`${i}[0]`).assign(o,(0,En._)`typeof ${i}`).if(VY(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,En._)`${a} !== undefined`);for(const l of n)(Uxe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),HY(e),r.endIf(),r.if((0,En._)`${a} !== undefined`,()=>{r.assign(i,a),Dut(e,a)});function u(l){switch(l){case"string":r.elseIf((0,En._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,En._)`"" + ${i}`).elseIf((0,En._)`${i} === null`).assign(a,(0,En._)`""`);return;case"number":r.elseIf((0,En._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,En._)`+${i}`);return;case"integer":r.elseIf((0,En._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,En._)`+${i}`);return;case"boolean":r.elseIf((0,En._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,En._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,En._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,En._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,En._)`[${i}]`)}}}function Dut({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,En._)`${t} !== undefined`,()=>e.assign((0,En._)`${t}[${n}]`,r))}function c7(e,t,n,r=Iw.Correct){const i=r===Iw.Correct?En.operators.EQ:En.operators.NEQ;let s;switch(e){case"null":return(0,En._)`${t} ${i} null`;case"array":s=(0,En._)`Array.isArray(${t})`;break;case"object":s=(0,En._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,En._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,En._)`typeof ${t} ${i} ${e}`}return r===Iw.Correct?s:(0,En.not)(s);function o(a=En.nil){return(0,En.and)((0,En._)`typeof ${t} == "number"`,a,n?(0,En._)`isFinite(${t})`:En.nil)}}Rs.checkDataType=c7;function VY(e,t,n,r){if(e.length===1)return c7(e[0],t,n,r);let i;const s=(0,jxe.toHash)(e);if(s.array&&s.object){const o=(0,En._)`typeof ${t} != "object"`;i=s.null?o:(0,En._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=En.nil;s.number&&delete s.integer;for(const o in s)i=(0,En.and)(i,c7(o,t,n,r));return i}Rs.checkDataTypes=VY;const Out={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,En._)`{type: ${e}}`:(0,En._)`{type: ${t}}`};function HY(e){const t=$ut(e);(0,Iut.reportError)(t,Out)}Rs.reportTypeError=HY;function $ut(e){const{gen:t,data:n,schema:r}=e,i=(0,jxe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var QL={};Object.defineProperty(QL,"__esModule",{value:!0});QL.assignDefaults=void 0;const n_=Nn,Mut=_t;function Lut(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)pue(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>pue(e,s,i.default))}QL.assignDefaults=Lut;function pue(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,n_._)`${s}${(0,n_.getProperty)(t)}`;if(i){(0,Mut.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,n_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,n_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,n_._)`${a} = ${(0,n_.stringify)(n)}`)}var Jd={},kn={};Object.defineProperty(kn,"__esModule",{value:!0});kn.validateUnion=kn.validateArray=kn.usePattern=kn.callValidateCode=kn.schemaProperties=kn.allSchemaProperties=kn.noPropertyInData=kn.propertyInData=kn.isOwnProperty=kn.hasPropFunc=kn.reportMissingProp=kn.checkMissingProp=kn.checkReportMissingProp=void 0;const ci=Nn,qY=_t,sg=Vh,Fut=_t;function jut(e,t){const{gen:n,data:r,it:i}=e;n.if(GY(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ci._)`${t}`},!0),e.error()})}kn.checkReportMissingProp=jut;function But({gen:e,data:t,it:{opts:n}},r,i){return(0,ci.or)(...r.map(s=>(0,ci.and)(GY(e,t,s,n.ownProperties),(0,ci._)`${i} = ${s}`)))}kn.checkMissingProp=But;function Uut(e,t){e.setParams({missingProperty:t},!0),e.error()}kn.reportMissingProp=Uut;function zxe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ci._)`Object.prototype.hasOwnProperty`})}kn.hasPropFunc=zxe;function WY(e,t,n){return(0,ci._)`${zxe(e)}.call(${t}, ${n})`}kn.isOwnProperty=WY;function zut(e,t,n,r){const i=(0,ci._)`${t}${(0,ci.getProperty)(n)} !== undefined`;return r?(0,ci._)`${i} && ${WY(e,t,n)}`:i}kn.propertyInData=zut;function GY(e,t,n,r){const i=(0,ci._)`${t}${(0,ci.getProperty)(n)} === undefined`;return r?(0,ci.or)(i,(0,ci.not)(WY(e,t,n))):i}kn.noPropertyInData=GY;function Vxe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}kn.allSchemaProperties=Vxe;function Vut(e,t){return Vxe(t).filter(n=>!(0,qY.alwaysValidSchema)(e,t[n]))}kn.schemaProperties=Vut;function Hut({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,ci._)`${e}, ${t}, ${r}${i}`:t,f=[[sg.default.instancePath,(0,ci.strConcat)(sg.default.instancePath,s)],[sg.default.parentData,o.parentData],[sg.default.parentDataProperty,o.parentDataProperty],[sg.default.rootData,sg.default.rootData]];o.opts.dynamicRef&&f.push([sg.default.dynamicAnchors,sg.default.dynamicAnchors]);const d=(0,ci._)`${c}, ${n.object(...f)}`;return u!==ci.nil?(0,ci._)`${a}.call(${u}, ${d})`:(0,ci._)`${a}(${d})`}kn.callValidateCode=Hut;const qut=(0,ci._)`new RegExp`;function Wut({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ci._)`${i.code==="new RegExp"?qut:(0,Fut.useFunc)(e,i)}(${n}, ${r})`})}kn.usePattern=Wut;function Gut(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,ci._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:qY.Type.Num},s),t.if((0,ci.not)(s),a)})}}kn.validateArray=Gut;function Yut(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,qY.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,ci._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,ci.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}kn.validateUnion=Yut;Object.defineProperty(Jd,"__esModule",{value:!0});Jd.validateKeywordUsage=Jd.validSchemaType=Jd.funcKeywordCode=Jd.macroKeywordCode=void 0;const La=Nn,Iv=Vh,Kut=kn,Xut=ZI;function Qut(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=Hxe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:La.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Jd.macroKeywordCode=Qut;function Jut(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;elt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=Hxe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&mue(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&mue(e),g(()=>Zut(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,La._)`await `),v=>r.assign(f,!1).if((0,La._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,La._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,La._)`${c}.errors`;return r.assign(y,null),m(La.nil),y}function m(y=t.async?(0,La._)`await `:La.nil){const v=u.opts.passContext?Iv.default.this:Iv.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,La._)`${y}${(0,Kut.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,La.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Jd.funcKeywordCode=Jut;function mue(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,La._)`${r.parentData}[${r.parentDataProperty}]`))}function Zut(e,t){const{gen:n}=e;n.if((0,La._)`Array.isArray(${t})`,()=>{n.assign(Iv.default.vErrors,(0,La._)`${Iv.default.vErrors} === null ? ${t} : ${Iv.default.vErrors}.concat(${t})`).assign(Iv.default.errors,(0,La._)`${Iv.default.vErrors}.length`),(0,Xut.extendErrors)(e)},()=>e.error())}function elt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function Hxe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,La.stringify)(n)})}function tlt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Jd.validSchemaType=tlt;function nlt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Jd.validateKeywordUsage=nlt;var d0={};Object.defineProperty(d0,"__esModule",{value:!0});d0.extendSubschemaMode=d0.extendSubschemaData=d0.getSubschema=void 0;const Vd=Nn,qxe=_t;function rlt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Vd._)`${e.schemaPath}${(0,Vd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Vd._)`${e.schemaPath}${(0,Vd.getProperty)(t)}${(0,Vd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,qxe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}d0.getSubschema=rlt;function ilt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Vd._)`${t.data}${(0,Vd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Vd.str)`${l}${(0,qxe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Vd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Vd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}d0.extendSubschemaData=ilt;function slt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}d0.extendSubschemaMode=slt;var Io={},YY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const JP=nl(YY);var Wxe={exports:{}},Ug=Wxe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};ZP(t,r,i,e,"",e)};Ug.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Ug.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Ug.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Ug.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function ZP(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Ug.arrayKeywords)for(var d=0;d<f.length;d++)ZP(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Ug.propsKeywords){if(f&&typeof f=="object")for(var h in f)ZP(e,t,n,f[h],i+"/"+c+"/"+olt(h),s,i,c,r,h)}else(c in Ug.keywords||e.allKeys&&!(c in Ug.skipKeywords))&&ZP(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function olt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var alt=Wxe.exports;Object.defineProperty(Io,"__esModule",{value:!0});Io.getSchemaRefs=Io.resolveUrl=Io.normalizeId=Io._getFullPath=Io.getFullPath=Io.inlineRef=void 0;const ult=_t,llt=YY,clt=alt,flt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function dlt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!f7(e):t?Gxe(e)<=t:!1}Io.inlineRef=dlt;const hlt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function f7(e){for(const t in e){if(hlt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(f7)||typeof n=="object"&&f7(n))return!0}return!1}function Gxe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!flt.has(n)&&(typeof e[n]=="object"&&(0,ult.eachItem)(e[n],r=>t+=Gxe(r)),t===1/0))return 1/0}return t}function Yxe(e,t="",n){n!==!1&&(t=kw(t));const r=e.parse(t);return Kxe(e,r)}Io.getFullPath=Yxe;function Kxe(e,t){return e.serialize(t).split("#")[0]+"#"}Io._getFullPath=Kxe;const plt=/#\/?$/;function kw(e){return e?e.replace(plt,""):""}Io.normalizeId=kw;function mlt(e,t,n){return n=kw(n),e.resolve(t,n)}Io.resolveUrl=mlt;const glt=/^[a-z_][-a-z0-9._]*$/i;function ylt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=kw(e[n]||t),s={"":i},o=Yxe(r,i,!1),a={},u=new Set;return clt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=kw(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==kw(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!glt.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!llt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Io.getSchemaRefs=ylt;Object.defineProperty(Uf,"__esModule",{value:!0});Uf.getData=Uf.KeywordCxt=Uf.validateFunctionCode=void 0;const Xxe=bE,gue=Rs,KY=Gp,WO=Rs,vlt=QL,a2=Jd,j8=d0,Dt=Nn,on=Vh,blt=Io,Yp=_t,iT=ZI;function _lt(e){if(Zxe(e)&&(eSe(e),Jxe(e))){xlt(e);return}Qxe(e,()=>(0,Xxe.topBoolOrEmptySchema)(e))}Uf.validateFunctionCode=_lt;function Qxe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Dt._)`${on.default.data}, ${on.default.valCxt}`,r.$async,()=>{e.code((0,Dt._)`"use strict"; ${yue(n,i)}`),Elt(e,i),e.code(s)}):e.func(t,(0,Dt._)`${on.default.data}, ${wlt(i)}`,r.$async,()=>e.code(yue(n,i)).code(s))}function wlt(e){return(0,Dt._)`{${on.default.instancePath}="", ${on.default.parentData}, ${on.default.parentDataProperty}, ${on.default.rootData}=${on.default.data}${e.dynamicRef?(0,Dt._)`, ${on.default.dynamicAnchors}={}`:Dt.nil}}={}`}function Elt(e,t){e.if(on.default.valCxt,()=>{e.var(on.default.instancePath,(0,Dt._)`${on.default.valCxt}.${on.default.instancePath}`),e.var(on.default.parentData,(0,Dt._)`${on.default.valCxt}.${on.default.parentData}`),e.var(on.default.parentDataProperty,(0,Dt._)`${on.default.valCxt}.${on.default.parentDataProperty}`),e.var(on.default.rootData,(0,Dt._)`${on.default.valCxt}.${on.default.rootData}`),t.dynamicRef&&e.var(on.default.dynamicAnchors,(0,Dt._)`${on.default.valCxt}.${on.default.dynamicAnchors}`)},()=>{e.var(on.default.instancePath,(0,Dt._)`""`),e.var(on.default.parentData,(0,Dt._)`undefined`),e.var(on.default.parentDataProperty,(0,Dt._)`undefined`),e.var(on.default.rootData,on.default.data),t.dynamicRef&&e.var(on.default.dynamicAnchors,(0,Dt._)`{}`)})}function xlt(e){const{schema:t,opts:n,gen:r}=e;Qxe(e,()=>{n.$comment&&t.$comment&&nSe(e),Ilt(e),r.let(on.default.vErrors,null),r.let(on.default.errors,0),n.unevaluated&&Slt(e),tSe(e),Nlt(e)})}function Slt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Dt._)`${n}.evaluated`),t.if((0,Dt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Dt._)`${e.evaluated}.props`,(0,Dt._)`undefined`)),t.if((0,Dt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Dt._)`${e.evaluated}.items`,(0,Dt._)`undefined`))}function yue(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Dt._)`/*# sourceURL=${n} */`:Dt.nil}function Tlt(e,t){if(Zxe(e)&&(eSe(e),Jxe(e))){Clt(e,t);return}(0,Xxe.boolOrEmptySchema)(e,t)}function Jxe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function Zxe(e){return typeof e.schema!="boolean"}function Clt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&nSe(e),klt(e),Rlt(e);const s=r.const("_errs",on.default.errors);tSe(e,s),r.var(t,(0,Dt._)`${s} === ${on.default.errors}`)}function eSe(e){(0,Yp.checkUnknownRules)(e),Alt(e)}function tSe(e,t){if(e.opts.jtd)return vue(e,[],!1,t);const n=(0,gue.getSchemaTypes)(e.schema),r=(0,gue.coerceAndCheckDataType)(e,n);vue(e,n,!r,t)}function Alt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,Yp.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function Ilt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,Yp.checkStrictMode)(e,"default is ignored in the schema root")}function klt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,blt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Rlt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function nSe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Dt._)`${on.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Dt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Dt._)`${on.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function Nlt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Dt._)`${on.default.errors} === 0`,()=>t.return(on.default.data),()=>t.throw((0,Dt._)`new ${i}(${on.default.vErrors})`)):(t.assign((0,Dt._)`${r}.errors`,on.default.vErrors),s.unevaluated&&Plt(e),t.return((0,Dt._)`${on.default.errors} === 0`))}function Plt({gen:e,evaluated:t,props:n,items:r}){n instanceof Dt.Name&&e.assign((0,Dt._)`${t}.props`,n),r instanceof Dt.Name&&e.assign((0,Dt._)`${t}.items`,r)}function vue(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,Yp.schemaHasRulesButRef)(s,c))){i.block(()=>sSe(e,"$ref",c.all.$ref.definition));return}u.jtd||Dlt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,KY.shouldUseGroup)(s,d)&&(d.type?(i.if((0,WO.checkDataType)(d.type,o,u.strictNumbers)),bue(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,WO.reportTypeError)(e)),i.endIf()):bue(e,d),a||i.if((0,Dt._)`${on.default.errors} === ${r||0}`))}}function bue(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,vlt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,KY.shouldUseRule)(r,s)&&sSe(e,s.keyword,s.definition,t.type)})}function Dlt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Olt(e,t),e.opts.allowUnionTypes||$lt(e,t),Mlt(e,e.dataTypes))}function Olt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{rSe(e.dataTypes,n)||XY(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),Flt(e,t)}}function $lt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&XY(e,"use allowUnionTypes to allow union type keyword")}function Mlt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,KY.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>Llt(t,o))&&XY(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function Llt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function rSe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Flt(e,t){const n=[];for(const r of e.dataTypes)rSe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function XY(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,Yp.checkStrictMode)(e,t,e.opts.strictTypes)}class iSe{constructor(t,n,r){if((0,a2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,Yp.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",oSe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,a2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",on.default.errors))}result(t,n,r){this.failResult((0,Dt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Dt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Dt._)`${n} !== undefined && (${(0,Dt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?iT.reportExtraError:iT.reportError)(this,this.def.error,n)}$dataError(){(0,iT.reportError)(this,this.def.$dataError||iT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,iT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Dt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Dt.nil,n=Dt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Dt.or)((0,Dt._)`${i} === undefined`,n)),t!==Dt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Dt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Dt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Dt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Dt._)`${(0,WO.checkDataTypes)(u,n,s.opts.strictNumbers,WO.DataType.Wrong)}`}return Dt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Dt._)`!${u}(${n})`}return Dt.nil}}subschema(t,n){const r=(0,j8.getSubschema)(this.it,t);(0,j8.extendSubschemaData)(r,this.it,t),(0,j8.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return Tlt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=Yp.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=Yp.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Dt.Name)),!0}}Uf.KeywordCxt=iSe;function sSe(e,t,n,r){const i=new iSe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,a2.funcKeywordCode)(i,n):"macro"in n?(0,a2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,a2.funcKeywordCode)(i,n)}const jlt=/^\/(?:[^~]|~0|~1)*$/,Blt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function oSe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return on.default.rootData;if(e[0]==="/"){if(!jlt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=on.default.rootData}else{const l=Blt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Dt._)`${s}${(0,Dt.getProperty)((0,Yp.unescapeJsonPointer)(l))}`,o=(0,Dt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Uf.getData=oSe;var ek={};Object.defineProperty(ek,"__esModule",{value:!0});class Ult extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}ek.default=Ult;var Vx={};Object.defineProperty(Vx,"__esModule",{value:!0});const B8=Io;class zlt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,B8.resolveUrl)(t,n,r),this.missingSchema=(0,B8.normalizeId)((0,B8.getFullPath)(t,this.missingRef))}}Vx.default=zlt;var Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.resolveSchema=Au.getCompilingSchema=Au.resolveRef=Au.compileSchema=Au.SchemaEnv=void 0;const sf=Nn,Vlt=ek,Qy=Vh,Cf=Io,_ue=_t,Hlt=Uf;class JL{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Cf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Au.SchemaEnv=JL;function QY(e){const t=aSe.call(this,e);if(t)return t;const n=(0,Cf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new sf.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:Vlt.default,code:(0,sf._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Qy.default.data,parentData:Qy.default.parentData,parentDataProperty:Qy.default.parentDataProperty,dataNames:[Qy.default.data],dataPathArr:[sf.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,sf.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:sf.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,sf._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,Hlt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Qy.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Qy.default.self}`,`${Qy.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof sf.Name?void 0:p,items:m instanceof sf.Name?void 0:m,dynamicProps:p instanceof sf.Name,dynamicItems:m instanceof sf.Name},h.source&&(h.source.evaluated=(0,sf.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Au.compileSchema=QY;function qlt(e,t,n){var r;n=(0,Cf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=Ylt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new JL({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=Wlt.call(this,s)}Au.resolveRef=qlt;function Wlt(e){return(0,Cf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:QY.call(this,e)}function aSe(e){for(const t of this._compilations)if(Glt(t,e))return t}Au.getCompilingSchema=aSe;function Glt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Ylt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||ZL.call(this,e,t)}function ZL(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Cf._getFullPath)(this.opts.uriResolver,n);let i=(0,Cf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return U8.call(this,n,e);const s=(0,Cf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=ZL.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:U8.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||QY.call(this,o),s===(0,Cf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Cf.resolveUrl)(this.opts.uriResolver,i,l)),new JL({schema:a,schemaId:u,root:e,baseId:i})}return U8.call(this,n,o)}}Au.resolveSchema=ZL;const Klt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function U8(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,_ue.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!Klt.has(a)&&l&&(t=(0,Cf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,_ue.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Cf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=ZL.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new JL({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const Xlt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",Qlt="Meta-schema for $data reference (JSON AnySchema extension proposal)",Jlt="object",Zlt=["$data"],ect={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},tct=!1,nct={$id:Xlt,description:Qlt,type:Jlt,required:Zlt,properties:ect,additionalProperties:tct};var JY={},d7={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(Ms,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Te=ee.length-1,Ce=1;Ce<Te;++Ce)ee[Ce]=ee[Ce].slice(1,-1);return ee[Te]=ee[Te].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Te in ee)ae[Te]=ee[Te];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Te=r(ae,"[A-Fa-f]"),Ce=i(i("%[EFef]"+Te+"%"+Te+Te+"%"+Te+Te)+"|"+i("%[89A-Fa-f]"+Te+"%"+Te+Te)+"|"+i("%"+Te+Te)),lt="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Xt=r(lt,St),Pn=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Fn=oe?"[\\uE000-\\uF8FF]":"[]",mn=r(ee,ae,"[\\-\\.\\_\\~]",Pn);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Ce+"|"+r(mn,St,"[\\:]"))+"*");var rr=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Rr=i(rr+"\\."+rr+"\\."+rr+"\\."+rr),Vt=i(Te+"{1,4}"),ir=i(i(Vt+"\\:"+Vt)+"|"+Rr),Hr=i(i(Vt+"\\:")+"{6}"+ir),Xn=i("\\:\\:"+i(Vt+"\\:")+"{5}"+ir),Ti=i(i(Vt)+"?\\:\\:"+i(Vt+"\\:")+"{4}"+ir),Ys=i(i(i(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{3}"+ir),Xr=i(i(i(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{2}"+ir),go=i(i(i(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+ir),Li=i(i(i(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+ir),Fi=i(i(i(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),qo=i(i(i(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),Ra=i([Hr,Xn,Ti,Ys,Xr,go,Li,Fi,qo].join("|")),Ks=i(i(mn+"|"+Ce)+"+");i("[vV]"+Te+"+\\."+r(mn,St,"[\\:]")+"+"),i(i(Ce+"|"+r(mn,St))+"*");var Jl=i(Ce+"|"+r(mn,St,"[\\:\\@]"));return i(i(Ce+"|"+r(mn,St,"[\\@]"))+"+"),i(i(Jl+"|"+r("[\\/\\?]",Fn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",mn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",mn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",mn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",mn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",mn,St,"[\\:\\@\\/\\?]",Fn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",mn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",mn,St),"g"),UNRESERVED:new RegExp(mn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",mn,Xt),"g"),PCT_ENCODED:new RegExp(Ce,"g"),IPV4ADDRESS:new RegExp("^("+Rr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ra+")"+i(i("\\%25|\\%(?!"+Te+"{2})")+"("+Ks+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Te=[],Ce=!0,lt=!1,St=void 0;try{for(var Xt=ee[Symbol.iterator](),Pn;!(Ce=(Pn=Xt.next()).done)&&(Te.push(Pn.value),!(ae&&Te.length===ae));Ce=!0);}catch(Fn){lt=!0,St=Fn}finally{try{!Ce&&Xt.return&&Xt.return()}finally{if(lt)throw St}}return Te}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,S="-",T=/^xn--/,C=/[^\0-\x7E]/,A=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},k=m-g,O=Math.floor,P=String.fromCharCode;function $(oe){throw new RangeError(N[oe])}function L(oe,ee){for(var ae=[],Te=oe.length;Te--;)ae[Te]=ee(oe[Te]);return ae}function M(oe,ee){var ae=oe.split("@"),Te="";ae.length>1&&(Te=ae[0]+"@",oe=ae[1]),oe=oe.replace(A,".");var Ce=oe.split("."),lt=L(Ce,ee).join(".");return Te+lt}function U(oe){for(var ee=[],ae=0,Te=oe.length;ae<Te;){var Ce=oe.charCodeAt(ae++);if(Ce>=55296&&Ce<=56319&&ae<Te){var lt=oe.charCodeAt(ae++);(lt&64512)==56320?ee.push(((Ce&1023)<<10)+(lt&1023)+65536):(ee.push(Ce),ae--)}else ee.push(Ce)}return ee}var B=function(ee){return String.fromCodePoint.apply(String,h(ee))},V=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},D=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Te){var Ce=0;for(ee=Te?O(ee/b):ee>>1,ee+=O(ee/ae);ee>k*y>>1;Ce+=m)ee=O(ee/k);return O(Ce+(k+1)*ee/(ee+v))},W=function(ee){var ae=[],Te=ee.length,Ce=0,lt=E,St=w,Xt=ee.lastIndexOf(S);Xt<0&&(Xt=0);for(var Pn=0;Pn<Xt;++Pn)ee.charCodeAt(Pn)>=128&&$("not-basic"),ae.push(ee.charCodeAt(Pn));for(var Fn=Xt>0?Xt+1:0;Fn<Te;){for(var mn=Ce,rr=1,Rr=m;;Rr+=m){Fn>=Te&&$("invalid-input");var Vt=V(ee.charCodeAt(Fn++));(Vt>=m||Vt>O((p-Ce)/rr))&&$("overflow"),Ce+=Vt*rr;var ir=Rr<=St?g:Rr>=St+y?y:Rr-St;if(Vt<ir)break;var Hr=m-ir;rr>O(p/Hr)&&$("overflow"),rr*=Hr}var Xn=ae.length+1;St=z(Ce-mn,Xn,mn==0),O(Ce/Xn)>p-lt&&$("overflow"),lt+=O(Ce/Xn),Ce%=Xn,ae.splice(Ce++,0,lt)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=U(ee);var Te=ee.length,Ce=E,lt=0,St=w,Xt=!0,Pn=!1,Fn=void 0;try{for(var mn=ee[Symbol.iterator](),rr;!(Xt=(rr=mn.next()).done);Xt=!0){var Rr=rr.value;Rr<128&&ae.push(P(Rr))}}catch(Oe){Pn=!0,Fn=Oe}finally{try{!Xt&&mn.return&&mn.return()}finally{if(Pn)throw Fn}}var Vt=ae.length,ir=Vt;for(Vt&&ae.push(S);ir<Te;){var Hr=p,Xn=!0,Ti=!1,Ys=void 0;try{for(var Xr=ee[Symbol.iterator](),go;!(Xn=(go=Xr.next()).done);Xn=!0){var Li=go.value;Li>=Ce&&Li<Hr&&(Hr=Li)}}catch(Oe){Ti=!0,Ys=Oe}finally{try{!Xn&&Xr.return&&Xr.return()}finally{if(Ti)throw Ys}}var Fi=ir+1;Hr-Ce>O((p-lt)/Fi)&&$("overflow"),lt+=(Hr-Ce)*Fi,Ce=Hr;var qo=!0,Ra=!1,Ks=void 0;try{for(var Jl=ee[Symbol.iterator](),Ed;!(qo=(Ed=Jl.next()).done);qo=!0){var Y=Ed.value;if(Y<Ce&&++lt>p&&$("overflow"),Y==Ce){for(var se=lt,Z=m;;Z+=m){var pe=Z<=St?g:Z>=St+y?y:Z-St;if(se<pe)break;var ye=se-pe,de=m-pe;ae.push(P(D(pe+ye%de,0))),se=O(ye/de)}ae.push(P(D(se,0))),St=z(lt,Fi,ir==Vt),lt=0,++ir}}}catch(Oe){Ra=!0,Ks=Oe}finally{try{!qo&&Jl.return&&Jl.return()}finally{if(Ra)throw Ks}}++lt,++Ce}return ae.join("")},q=function(ee){return M(ee,function(ae){return T.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return M(ee,function(ae){return C.test(ae)?"xn--"+j(ae):ae})},te={version:"2.1.0",ucs2:{decode:U,encode:B},decode:W,encode:j,toASCII:G,toUnicode:q},ve={};function he(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function ce(oe){for(var ee="",ae=0,Te=oe.length;ae<Te;){var Ce=parseInt(oe.substr(ae+1,2),16);if(Ce<128)ee+=String.fromCharCode(Ce),ae+=3;else if(Ce>=194&&Ce<224){if(Te-ae>=6){var lt=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Ce&31)<<6|lt&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Ce>=224){if(Te-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Xt=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Ce&15)<<12|(St&63)<<6|Xt&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function me(oe,ee){function ae(Te){var Ce=ce(Te);return Ce.match(ee.UNRESERVED)?Ce:Te}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,he).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,he).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,he).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,he).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,he).replace(ee.PCT_ENCODED,o)),oe}function Le(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function fe(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Te=d(ae,2),Ce=Te[1];return Ce?Ce.split(".").map(Le).join("."):oe}function ct(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Te=d(ae,3),Ce=Te[1],lt=Te[2];if(Ce){for(var St=Ce.toLowerCase().split("::").reverse(),Xt=d(St,2),Pn=Xt[0],Fn=Xt[1],mn=Fn?Fn.split(":").map(Le):[],rr=Pn.split(":").map(Le),Rr=ee.IPV4ADDRESS.test(rr[rr.length-1]),Vt=Rr?7:8,ir=rr.length-Vt,Hr=Array(Vt),Xn=0;Xn<Vt;++Xn)Hr[Xn]=mn[Xn]||rr[ir+Xn]||"";Rr&&(Hr[Vt-1]=fe(Hr[Vt-1],ee));var Ti=Hr.reduce(function(Fi,qo,Ra){if(!qo||qo==="0"){var Ks=Fi[Fi.length-1];Ks&&Ks.index+Ks.length===Ra?Ks.length++:Fi.push({index:Ra,length:1})}return Fi},[]),Ys=Ti.sort(function(Fi,qo){return qo.length-Fi.length})[0],Xr=void 0;if(Ys&&Ys.length>1){var go=Hr.slice(0,Ys.index),Li=Hr.slice(Ys.index+Ys.length);Xr=go.join(":")+"::"+Li.join(":")}else Xr=Hr.join(":");return lt&&(Xr+="%"+lt),Xr}else return oe}var ze=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,Ke="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Te=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Ce=oe.match(ze);if(Ce){Ke?(ae.scheme=Ce[1],ae.userinfo=Ce[3],ae.host=Ce[4],ae.port=parseInt(Ce[5],10),ae.path=Ce[6]||"",ae.query=Ce[7],ae.fragment=Ce[8],isNaN(ae.port)&&(ae.port=Ce[5])):(ae.scheme=Ce[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Ce[3]:void 0,ae.host=oe.indexOf("//")!==-1?Ce[4]:void 0,ae.port=parseInt(Ce[5],10),ae.path=Ce[6]||"",ae.query=oe.indexOf("?")!==-1?Ce[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Ce[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Ce[4]:void 0)),ae.host&&(ae.host=ct(fe(ae.host,Te),Te)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var lt=ve[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!lt||!lt.unicodeSupport)){if(ae.host&&(ee.domainHost||lt&&lt.domainHost))try{ae.host=te.toASCII(ae.host.replace(Te.PCT_ENCODED,ce).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}me(ae,c)}else me(ae,Te);lt&&lt.parse&&lt.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function De(oe,ee){var ae=ee.iri!==!1?f:c,Te=[];return oe.userinfo!==void 0&&(Te.push(oe.userinfo),Te.push("@")),oe.host!==void 0&&Te.push(ct(fe(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Ce,lt,St){return"["+lt+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Te.push(":"),Te.push(String(oe.port))),Te.length?Te.join(""):void 0}var Ae=/^\.\.?\//,Ge=/^\/\.(\/|$)/,ht=/^\/\.\.(\/|$)/,Ct=/^\/?(?:.|\n)*?(?=\/|$)/;function Se(oe){for(var ee=[];oe.length;)if(oe.match(Ae))oe=oe.replace(Ae,"");else if(oe.match(Ge))oe=oe.replace(Ge,"/");else if(oe.match(ht))oe=oe.replace(ht,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Ct);if(ae){var Te=ae[0];oe=oe.slice(Te.length),ee.push(Te)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function ue(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Te=[],Ce=ve[(ee.scheme||oe.scheme||"").toLowerCase()];if(Ce&&Ce.serialize&&Ce.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Ce&&Ce.domainHost)try{oe.host=ee.iri?te.toUnicode(oe.host):te.toASCII(oe.host.replace(ae.PCT_ENCODED,ce).toLowerCase())}catch(Xt){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Xt}}me(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Te.push(oe.scheme),Te.push(":"));var lt=De(oe,ee);if(lt!==void 0&&(ee.reference!=="suffix"&&Te.push("//"),Te.push(lt),oe.path&&oe.path.charAt(0)!=="/"&&Te.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!Ce||!Ce.absolutePath)&&(St=Se(St)),lt===void 0&&(St=St.replace(/^\/\//,"/%2F")),Te.push(St)}return oe.query!==void 0&&(Te.push("?"),Te.push(oe.query)),oe.fragment!==void 0&&(Te.push("#"),Te.push(oe.fragment)),Te.join("")}function Ve(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Te=arguments[3],Ce={};return Te||(oe=it(ue(oe,ae),ae),ee=it(ue(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Ce.scheme=ee.scheme,Ce.userinfo=ee.userinfo,Ce.host=ee.host,Ce.port=ee.port,Ce.path=Se(ee.path||""),Ce.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Ce.userinfo=ee.userinfo,Ce.host=ee.host,Ce.port=ee.port,Ce.path=Se(ee.path||""),Ce.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Ce.path=Se(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Ce.path="/"+ee.path:oe.path?Ce.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Ce.path=ee.path,Ce.path=Se(Ce.path)),Ce.query=ee.query):(Ce.path=oe.path,ee.query!==void 0?Ce.query=ee.query:Ce.query=oe.query),Ce.userinfo=oe.userinfo,Ce.host=oe.host,Ce.port=oe.port),Ce.scheme=oe.scheme),Ce.fragment=ee.fragment,Ce}function st(oe,ee,ae){var Te=u({scheme:"null"},ae);return ue(Ve(it(oe,Te),it(ee,Te),Te,!0),Te)}function ge(oe,ee){return typeof oe=="string"?oe=ue(it(oe,ee),ee):s(oe)==="object"&&(oe=it(ue(oe,ee),ee)),oe}function Ne(oe,ee,ae){return typeof oe=="string"?oe=ue(it(oe,ae),ae):s(oe)==="object"&&(oe=ue(oe,ae)),typeof ee=="string"?ee=ue(it(ee,ae),ae):s(ee)==="object"&&(ee=ue(ee,ae)),oe===ee}function qe(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,he)}function Je(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,ce)}var Et={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Te=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Te?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},wn={scheme:"https",domainHost:Et.domainHost,parse:Et.parse,serialize:Et.serialize};function vr(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var br={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Te=ee;return Te.secure=vr(Te),Te.resourceName=(Te.path||"/")+(Te.query?"?"+Te.query:""),Te.path=void 0,Te.query=void 0,Te},serialize:function(ee,ae){if((ee.port===(vr(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Te=ee.resourceName.split("?"),Ce=d(Te,2),lt=Ce[0],St=Ce[1];ee.path=lt&&lt!=="/"?lt:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},kr={scheme:"wss",domainHost:br.domainHost,parse:br.parse,serialize:br.serialize},Kt={},Tn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",tr="[0-9A-Fa-f]",nr=i(i("%[EFef]"+tr+"%"+tr+tr+"%"+tr+tr)+"|"+i("%[89A-Fa-f]"+tr+"%"+tr+tr)+"|"+i("%"+tr+tr)),Ho="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",Mi="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",es=r(Mi,'[\\"\\\\]'),Ln="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Hn=new RegExp(Tn,"g"),hs=new RegExp(nr,"g"),op=new RegExp(r("[^]",Ho,"[\\.]",'[\\"]',es),"g"),ol=new RegExp(r("[^]",Tn,Ln),"g"),wd=ol;function Sr(oe){var ee=ce(oe);return ee.match(Hn)?ee:oe}var Si={scheme:"mailto",parse:function(ee,ae){var Te=ee,Ce=Te.to=Te.path?Te.path.split(","):[];if(Te.path=void 0,Te.query){for(var lt=!1,St={},Xt=Te.query.split("&"),Pn=0,Fn=Xt.length;Pn<Fn;++Pn){var mn=Xt[Pn].split("=");switch(mn[0]){case"to":for(var rr=mn[1].split(","),Rr=0,Vt=rr.length;Rr<Vt;++Rr)Ce.push(rr[Rr]);break;case"subject":Te.subject=Je(mn[1],ae);break;case"body":Te.body=Je(mn[1],ae);break;default:lt=!0,St[Je(mn[0],ae)]=Je(mn[1],ae);break}}lt&&(Te.headers=St)}Te.query=void 0;for(var ir=0,Hr=Ce.length;ir<Hr;++ir){var Xn=Ce[ir].split("@");if(Xn[0]=Je(Xn[0]),ae.unicodeSupport)Xn[1]=Je(Xn[1],ae).toLowerCase();else try{Xn[1]=te.toASCII(Je(Xn[1],ae).toLowerCase())}catch(Ti){Te.error=Te.error||"Email address's domain name can not be converted to ASCII via punycode: "+Ti}Ce[ir]=Xn.join("@")}return Te},serialize:function(ee,ae){var Te=ee,Ce=a(ee.to);if(Ce){for(var lt=0,St=Ce.length;lt<St;++lt){var Xt=String(Ce[lt]),Pn=Xt.lastIndexOf("@"),Fn=Xt.slice(0,Pn).replace(hs,Sr).replace(hs,o).replace(op,he),mn=Xt.slice(Pn+1);try{mn=ae.iri?te.toUnicode(mn):te.toASCII(Je(mn,ae).toLowerCase())}catch(ir){Te.error=Te.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+ir}Ce[lt]=Fn+"@"+mn}Te.path=Ce.join(",")}var rr=ee.headers=ee.headers||{};ee.subject&&(rr.subject=ee.subject),ee.body&&(rr.body=ee.body);var Rr=[];for(var Vt in rr)rr[Vt]!==Kt[Vt]&&Rr.push(Vt.replace(hs,Sr).replace(hs,o).replace(ol,he)+"="+rr[Vt].replace(hs,Sr).replace(hs,o).replace(wd,he));return Rr.length&&(Te.query=Rr.join("&")),Te}},ai=/^([^\:]+)\:(.*)/,cu={scheme:"urn",parse:function(ee,ae){var Te=ee.path&&ee.path.match(ai),Ce=ee;if(Te){var lt=ae.scheme||Ce.scheme||"urn",St=Te[1].toLowerCase(),Xt=Te[2],Pn=lt+":"+(ae.nid||St),Fn=ve[Pn];Ce.nid=St,Ce.nss=Xt,Ce.path=void 0,Fn&&(Ce=Fn.parse(Ce,ae))}else Ce.error=Ce.error||"URN can not be parsed.";return Ce},serialize:function(ee,ae){var Te=ae.scheme||ee.scheme||"urn",Ce=ee.nid,lt=Te+":"+(ae.nid||Ce),St=ve[lt];St&&(ee=St.serialize(ee,ae));var Xt=ee,Pn=ee.nss;return Xt.path=(Ce||ae.nid)+":"+Pn,Xt}},Ia=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ka={scheme:"urn:uuid",parse:function(ee,ae){var Te=ee;return Te.uuid=Te.nss,Te.nss=void 0,!ae.tolerant&&(!Te.uuid||!Te.uuid.match(Ia))&&(Te.error=Te.error||"UUID is not valid."),Te},serialize:function(ee,ae){var Te=ee;return Te.nss=(ee.uuid||"").toLowerCase(),Te}};ve[Et.scheme]=Et,ve[wn.scheme]=wn,ve[br.scheme]=br,ve[kr.scheme]=kr,ve[Si.scheme]=Si,ve[cu.scheme]=cu,ve[ka.scheme]=ka,n.SCHEMES=ve,n.pctEncChar=he,n.pctDecChars=ce,n.parse=it,n.removeDotSegments=Se,n.serialize=ue,n.resolveComponents=Ve,n.resolve=st,n.normalize=ge,n.equal=Ne,n.escapeComponent=qe,n.unescapeComponent=Je,Object.defineProperty(n,"__esModule",{value:!0})})})(d7,d7.exports);var rct=d7.exports;Object.defineProperty(JY,"__esModule",{value:!0});const uSe=rct;uSe.code='require("ajv/dist/runtime/uri").default';JY.default=uSe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Uf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Nn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=ek,i=Vx,s=A1,o=Au,a=Nn,u=Io,l=Rs,c=_t,f=nct,d=JY,h=(D,z)=>new RegExp(D,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(D){var z,W,j,q,G,te,ve,he,ce,me,Le,fe,ct,ze,Ke,it,De,Ae,Ge,ht,Ct,Se,ue,Ve,st;const ge=D.strict,Ne=(z=D.code)===null||z===void 0?void 0:z.optimize,qe=Ne===!0||Ne===void 0?1:Ne||0,Je=(j=(W=D.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,Et=(q=D.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(te=(G=D.strictSchema)!==null&&G!==void 0?G:ge)!==null&&te!==void 0?te:!0,strictNumbers:(he=(ve=D.strictNumbers)!==null&&ve!==void 0?ve:ge)!==null&&he!==void 0?he:!0,strictTypes:(me=(ce=D.strictTypes)!==null&&ce!==void 0?ce:ge)!==null&&me!==void 0?me:"log",strictTuples:(fe=(Le=D.strictTuples)!==null&&Le!==void 0?Le:ge)!==null&&fe!==void 0?fe:"log",strictRequired:(ze=(ct=D.strictRequired)!==null&&ct!==void 0?ct:ge)!==null&&ze!==void 0?ze:!1,code:D.code?{...D.code,optimize:qe,regExp:Je}:{optimize:qe,regExp:Je},loopRequired:(Ke=D.loopRequired)!==null&&Ke!==void 0?Ke:v,loopEnum:(it=D.loopEnum)!==null&&it!==void 0?it:v,meta:(De=D.meta)!==null&&De!==void 0?De:!0,messages:(Ae=D.messages)!==null&&Ae!==void 0?Ae:!0,inlineRefs:(Ge=D.inlineRefs)!==null&&Ge!==void 0?Ge:!0,schemaId:(ht=D.schemaId)!==null&&ht!==void 0?ht:"$id",addUsedSchema:(Ct=D.addUsedSchema)!==null&&Ct!==void 0?Ct:!0,validateSchema:(Se=D.validateSchema)!==null&&Se!==void 0?Se:!0,validateFormats:(ue=D.validateFormats)!==null&&ue!==void 0?ue:!0,unicodeRegExp:(Ve=D.unicodeRegExp)!==null&&Ve!==void 0?Ve:!0,int32range:(st=D.int32range)!==null&&st!==void 0?st:!0,uriResolver:Et}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=N.call(this),z.formats&&C.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&A.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),T.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(me,Le){await G.call(this,me.$schema);const fe=this._addSchema(me,Le);return fe.validate||te.call(this,fe)}async function G(me){me&&!this.getSchema(me)&&await q.call(this,{$ref:me},!0)}async function te(me){try{return this._compileSchemaEnv(me)}catch(Le){if(!(Le instanceof i.default))throw Le;return ve.call(this,Le),await he.call(this,Le.missingSchema),te.call(this,me)}}function ve({missingSchema:me,missingRef:Le}){if(this.refs[me])throw new Error(`AnySchema ${me} is loaded but ${Le} cannot be resolved`)}async function he(me){const Le=await ce.call(this,me);this.refs[me]||await G.call(this,Le.$schema),this.refs[me]||this.addSchema(Le,me,W)}async function ce(me){const Le=this._loading[me];if(Le)return Le;try{return await(this._loading[me]=j(me))}finally{delete this._loading[me]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const te of z)this.addSchema(te,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:te}=this.opts;if(G=z[te],G!==void 0&&typeof G!="string")throw new Error(`schema ${te} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=S.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=S.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>L.call(this,G)),this;U.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>L.call(this,G,q):G=>q.type.forEach(te=>L.call(this,G,q,te))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let te=z;for(const ve of G)te=te[ve];for(const ve in j){const he=j[ve];if(typeof he!="object")continue;const{$data:ce}=he.definition,me=te[ve];ce&&me&&(te[ve]=V(me))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let te;const{schemaId:ve}=this.opts;if(typeof z=="object")te=z[ve];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let he=this._cache.get(z);if(he!==void 0)return he;j=(0,u.normalizeId)(te||j);const ce=u.getSchemaRefs.call(this,z,j);return he=new o.SchemaEnv({schema:z,schemaId:ve,meta:W,baseId:j,localRefs:ce}),this._cache.set(he.schema,he),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=he),q&&this.validateSchema(z,!0),he}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(D,z,W,j="error"){for(const q in D){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${D[G]}`)}}function S(D){return D=(0,u.normalizeId)(D),this.schemas[D]||this.refs[D]}function T(){const D=this.opts.schemas;if(D)if(Array.isArray(D))this.addSchema(D);else for(const z in D)this.addSchema(D[z],z)}function C(){for(const D in this.opts.formats){const z=this.opts.formats[D];z&&this.addFormat(D,z)}}function A(D){if(Array.isArray(D)){this.addVocabulary(D);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in D){const W=D[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function N(){const D={...this.opts};for(const z of p)delete D[z];return D}const k={log(){},warn(){},error(){}};function O(D){if(D===!1)return k;if(D===void 0)return console;if(D.log&&D.warn&&D.error)return D;throw new Error("logger must implement log, warn and error methods")}const P=/^[a-z_$][a-z0-9_$:-]*$/i;function $(D,z){const{RULES:W}=this;if((0,c.eachItem)(D,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!P.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function L(D,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let te=q?G.post:G.rules.find(({type:he})=>he===W);if(te||(te={type:W,rules:[]},G.rules.push(te)),G.keywords[D]=!0,!z)return;const ve={keyword:D,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?M.call(this,te,ve,z.before):te.rules.push(ve),G.all[D]=ve,(j=z.implements)===null||j===void 0||j.forEach(he=>this.addKeyword(he))}function M(D,z,W){const j=D.rules.findIndex(q=>q.keyword===W);j>=0?D.rules.splice(j,0,z):(D.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function U(D){let{metaSchema:z}=D;z!==void 0&&(D.$data&&this.opts.$data&&(z=V(z)),D.validateSchema=this.compile(z,!0))}const B={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function V(D){return{anyOf:[D,B]}}})(Rxe);var ZY={},eK={},tK={};Object.defineProperty(tK,"__esModule",{value:!0});const ict={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};tK.default=ict;var I1={};Object.defineProperty(I1,"__esModule",{value:!0});I1.callRef=I1.getValidate=void 0;const sct=Vx,wue=kn,vu=Nn,r_=Vh,Eue=Au,hN=_t,oct={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=Eue.resolveRef.call(u,l,i,n);if(c===void 0)throw new sct.default(r.opts.uriResolver,i,n);if(c instanceof Eue.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return eD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return eD(e,(0,vu._)`${p}.validate`,l,l.$async)}function d(p){const m=lSe(e,p);eD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,vu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:vu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function lSe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,vu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}I1.getValidate=lSe;function eD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?r_.default.this:vu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,vu._)`await ${(0,wue.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,vu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,wue.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,vu._)`${p}.errors`;i.assign(r_.default.vErrors,(0,vu._)`${r_.default.vErrors} === null ? ${m} : ${r_.default.vErrors}.concat(${m})`),i.assign(r_.default.errors,(0,vu._)`${r_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=hN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,vu._)`${p}.evaluated.props`);s.props=hN.mergeEvaluated.props(i,y,s.props,vu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=hN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,vu._)`${p}.evaluated.items`);s.items=hN.mergeEvaluated.items(i,y,s.items,vu.Name)}}}I1.callRef=eD;I1.default=oct;Object.defineProperty(eK,"__esModule",{value:!0});const act=tK,uct=I1,lct=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",act.default,uct.default];eK.default=lct;var nK={},rK={};Object.defineProperty(rK,"__esModule",{value:!0});const GO=Nn,og=GO.operators,YO={maximum:{okStr:"<=",ok:og.LTE,fail:og.GT},minimum:{okStr:">=",ok:og.GTE,fail:og.LT},exclusiveMaximum:{okStr:"<",ok:og.LT,fail:og.GTE},exclusiveMinimum:{okStr:">",ok:og.GT,fail:og.LTE}},cct={message:({keyword:e,schemaCode:t})=>(0,GO.str)`must be ${YO[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,GO._)`{comparison: ${YO[e].okStr}, limit: ${t}}`},fct={keyword:Object.keys(YO),type:"number",schemaType:"number",$data:!0,error:cct,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,GO._)`${n} ${YO[t].fail} ${r} || isNaN(${n})`)}};rK.default=fct;var iK={};Object.defineProperty(iK,"__esModule",{value:!0});const u2=Nn,dct={message:({schemaCode:e})=>(0,u2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,u2._)`{multipleOf: ${e}}`},hct={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:dct,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,u2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,u2._)`${o} !== parseInt(${o})`;e.fail$data((0,u2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};iK.default=hct;var sK={},oK={};Object.defineProperty(oK,"__esModule",{value:!0});function cSe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}oK.default=cSe;cSe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(sK,"__esModule",{value:!0});const kv=Nn,pct=_t,mct=oK,gct={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,kv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,kv._)`{limit: ${e}}`},yct={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:gct,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?kv.operators.GT:kv.operators.LT,o=i.opts.unicode===!1?(0,kv._)`${n}.length`:(0,kv._)`${(0,pct.useFunc)(e.gen,mct.default)}(${n})`;e.fail$data((0,kv._)`${o} ${s} ${r}`)}};sK.default=yct;var aK={};Object.defineProperty(aK,"__esModule",{value:!0});const vct=kn,KO=Nn,bct={message:({schemaCode:e})=>(0,KO.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,KO._)`{pattern: ${e}}`},_ct={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:bct,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,KO._)`(new RegExp(${i}, ${o}))`:(0,vct.usePattern)(e,r);e.fail$data((0,KO._)`!${a}.test(${t})`)}};aK.default=_ct;var uK={};Object.defineProperty(uK,"__esModule",{value:!0});const l2=Nn,wct={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,l2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,l2._)`{limit: ${e}}`},Ect={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:wct,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?l2.operators.GT:l2.operators.LT;e.fail$data((0,l2._)`Object.keys(${n}).length ${i} ${r}`)}};uK.default=Ect;var lK={};Object.defineProperty(lK,"__esModule",{value:!0});const sT=kn,c2=Nn,xct=_t,Sct={message:({params:{missingProperty:e}})=>(0,c2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,c2._)`{missingProperty: ${e}}`},Tct={keyword:"required",type:"object",schemaType:"array",$data:!0,error:Sct,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,xct.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(c2.nil,f);else for(const h of n)(0,sT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,sT.checkMissingProp)(e,n,h)),(0,sT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,sT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,sT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,c2.not)(p),()=>{e.error(),t.break()})},c2.nil)}}};lK.default=Tct;var cK={};Object.defineProperty(cK,"__esModule",{value:!0});const f2=Nn,Cct={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,f2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,f2._)`{limit: ${e}}`},Act={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:Cct,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?f2.operators.GT:f2.operators.LT;e.fail$data((0,f2._)`${n}.length ${i} ${r}`)}};cK.default=Act;var fK={},tk={};Object.defineProperty(tk,"__esModule",{value:!0});const fSe=YY;fSe.code='require("ajv/dist/runtime/equal").default';tk.default=fSe;Object.defineProperty(fK,"__esModule",{value:!0});const z8=Rs,Eo=Nn,Ict=_t,kct=tk,Rct={message:({params:{i:e,j:t}})=>(0,Eo.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Eo._)`{i: ${e}, j: ${t}}`},Nct={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:Rct,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,z8.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,Eo._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,Eo._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,Eo._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,z8.checkDataTypes)(l,g,a.opts.strictNumbers,z8.DataType.Wrong),v=t.const("indices",(0,Eo._)`{}`);t.for((0,Eo._)`;${p}--;`,()=>{t.let(g,(0,Eo._)`${n}[${p}]`),t.if(y,(0,Eo._)`continue`),l.length>1&&t.if((0,Eo._)`typeof ${g} == "string"`,(0,Eo._)`${g} += "_"`),t.if((0,Eo._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,Eo._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,Eo._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,Ict.useFunc)(t,kct.default),y=t.name("outer");t.label(y).for((0,Eo._)`;${p}--;`,()=>t.for((0,Eo._)`${m} = ${p}; ${m}--;`,()=>t.if((0,Eo._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};fK.default=Nct;var dK={};Object.defineProperty(dK,"__esModule",{value:!0});const h7=Nn,Pct=_t,Dct=tk,Oct={message:"must be equal to constant",params:({schemaCode:e})=>(0,h7._)`{allowedValue: ${e}}`},$ct={keyword:"const",$data:!0,error:Oct,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,h7._)`!${(0,Pct.useFunc)(t,Dct.default)}(${n}, ${i})`):e.fail((0,h7._)`${s} !== ${n}`)}};dK.default=$ct;var hK={};Object.defineProperty(hK,"__esModule",{value:!0});const YT=Nn,Mct=_t,Lct=tk,Fct={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,YT._)`{allowedValues: ${e}}`},jct={keyword:"enum",schemaType:"array",$data:!0,error:Fct,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,Mct.useFunc)(t,Lct.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,YT.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,YT._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,YT._)`${l()}(${n}, ${h}[${p}])`:(0,YT._)`${n} === ${m}`}}};hK.default=jct;Object.defineProperty(nK,"__esModule",{value:!0});const Bct=rK,Uct=iK,zct=sK,Vct=aK,Hct=uK,qct=lK,Wct=cK,Gct=fK,Yct=dK,Kct=hK,Xct=[Bct.default,Uct.default,zct.default,Vct.default,Hct.default,qct.default,Wct.default,Gct.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},Yct.default,Kct.default];nK.default=Xct;var pK={},Hx={};Object.defineProperty(Hx,"__esModule",{value:!0});Hx.validateAdditionalItems=void 0;const Rv=Nn,p7=_t,Qct={message:({params:{len:e}})=>(0,Rv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Rv._)`{limit: ${e}}`},Jct={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Qct,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,p7.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}dSe(e,r)}};function dSe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Rv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Rv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,p7.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Rv._)`${a} <= ${t.length}`);n.if((0,Rv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:p7.Type.Num},l),o.allErrors||n.if((0,Rv.not)(l),()=>n.break())})}}Hx.validateAdditionalItems=dSe;Hx.default=Jct;var mK={},qx={};Object.defineProperty(qx,"__esModule",{value:!0});qx.validateTuple=void 0;const xue=Nn,tD=_t,Zct=kn,eft={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return hSe(e,"additionalItems",t);n.items=!0,!(0,tD.alwaysValidSchema)(n,t)&&e.ok((0,Zct.validateArray)(e))}};function hSe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=tD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,xue._)`${s}.length`);n.forEach((f,d)=>{(0,tD.alwaysValidSchema)(a,f)||(r.if((0,xue._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,tD.checkStrictMode)(a,g,d.strictTuples)}}}qx.validateTuple=hSe;qx.default=eft;Object.defineProperty(mK,"__esModule",{value:!0});const tft=qx,nft={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,tft.validateTuple)(e,"items")};mK.default=nft;var gK={};Object.defineProperty(gK,"__esModule",{value:!0});const Sue=Nn,rft=_t,ift=kn,sft=Hx,oft={message:({params:{len:e}})=>(0,Sue.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Sue._)`{limit: ${e}}`},aft={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:oft,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,rft.alwaysValidSchema)(r,t)&&(i?(0,sft.validateAdditionalItems)(e,i):e.ok((0,ift.validateArray)(e)))}};gK.default=aft;var yK={};Object.defineProperty(yK,"__esModule",{value:!0});const uc=Nn,pN=_t,uft={message:({params:{min:e,max:t}})=>t===void 0?(0,uc.str)`must contain at least ${e} valid item(s)`:(0,uc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,uc._)`{minContains: ${e}}`:(0,uc._)`{minContains: ${e}, maxContains: ${t}}`},lft={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:uft,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,uc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,pN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,pN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,pN.alwaysValidSchema)(s,n)){let m=(0,uc._)`${c} >= ${o}`;a!==void 0&&(m=(0,uc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,uc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:pN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,uc._)`${m}++`),a===void 0?t.if((0,uc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,uc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,uc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};yK.default=lft;var pSe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Nn,n=_t,r=kn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(pSe);var vK={};Object.defineProperty(vK,"__esModule",{value:!0});const mSe=Nn,cft=_t,fft={message:"property name must be valid",params:({params:e})=>(0,mSe._)`{propertyName: ${e.propertyName}}`},dft={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:fft,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,cft.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,mSe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};vK.default=dft;var e6={};Object.defineProperty(e6,"__esModule",{value:!0});const mN=kn,lf=Nn,hft=Vh,gN=_t,pft={message:"must NOT have additional properties",params:({params:e})=>(0,lf._)`{additionalProperty: ${e.additionalProperty}}`},mft={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:pft,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,gN.alwaysValidSchema)(o,n))return;const l=(0,mN.allSchemaProperties)(r.properties),c=(0,mN.allSchemaProperties)(r.patternProperties);f(),e.ok((0,lf._)`${s} === ${hft.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,gN.schemaRefOrVal)(o,r.properties,"properties");y=(0,mN.isOwnProperty)(t,v,g)}else l.length?y=(0,lf.or)(...l.map(v=>(0,lf._)`${g} === ${v}`)):y=lf.nil;return c.length&&(y=(0,lf.or)(y,...c.map(v=>(0,lf._)`${(0,mN.usePattern)(e,v)}.test(${g})`))),(0,lf.not)(y)}function h(g){t.code((0,lf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,gN.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,lf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,lf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:gN.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};e6.default=mft;var bK={};Object.defineProperty(bK,"__esModule",{value:!0});const gft=Uf,Tue=kn,V8=_t,Cue=e6,yft={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Cue.default.code(new gft.KeywordCxt(s,Cue.default,"additionalProperties"));const o=(0,Tue.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=V8.mergeEvaluated.props(t,(0,V8.toHash)(o),s.props));const a=o.filter(f=>!(0,V8.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Tue.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};bK.default=yft;var _K={};Object.defineProperty(_K,"__esModule",{value:!0});const Aue=kn,yN=Nn,Iue=_t,kue=_t,vft={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Aue.allSchemaProperties)(n),u=a.filter(m=>(0,Iue.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof yN.Name)&&(s.props=(0,kue.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,Iue.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,yN._)`${(0,Aue.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:kue.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,yN._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,yN.not)(c),()=>t.break())})})}}};_K.default=vft;var wK={};Object.defineProperty(wK,"__esModule",{value:!0});const bft=_t,_ft={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,bft.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};wK.default=_ft;var EK={};Object.defineProperty(EK,"__esModule",{value:!0});const wft=kn,Eft={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:wft.validateUnion,error:{message:"must match a schema in anyOf"}};EK.default=Eft;var xK={};Object.defineProperty(xK,"__esModule",{value:!0});const nD=Nn,xft=_t,Sft={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,nD._)`{passingSchemas: ${e.passing}}`},Tft={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:Sft,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,xft.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,nD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,nD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,nD.Name)})})}}};xK.default=Tft;var SK={};Object.defineProperty(SK,"__esModule",{value:!0});const Cft=_t,Aft={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,Cft.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};SK.default=Aft;var TK={};Object.defineProperty(TK,"__esModule",{value:!0});const XO=Nn,gSe=_t,Ift={message:({params:e})=>(0,XO.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,XO._)`{failingKeyword: ${e.ifClause}}`},kft={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:Ift,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,gSe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Rue(r,"then"),s=Rue(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,XO.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,XO._)`${c}`):e.setParams({ifClause:c})}}}};function Rue(e,t){const n=e.schema[t];return n!==void 0&&!(0,gSe.alwaysValidSchema)(e,n)}TK.default=kft;var CK={};Object.defineProperty(CK,"__esModule",{value:!0});const Rft=_t,Nft={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,Rft.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};CK.default=Nft;Object.defineProperty(pK,"__esModule",{value:!0});const Pft=Hx,Dft=mK,Oft=qx,$ft=gK,Mft=yK,Lft=pSe,Fft=vK,jft=e6,Bft=bK,Uft=_K,zft=wK,Vft=EK,Hft=xK,qft=SK,Wft=TK,Gft=CK;function Yft(e=!1){const t=[zft.default,Vft.default,Hft.default,qft.default,Wft.default,Gft.default,Fft.default,jft.default,Lft.default,Bft.default,Uft.default];return e?t.push(Dft.default,$ft.default):t.push(Pft.default,Oft.default),t.push(Mft.default),t}pK.default=Yft;var AK={},IK={};Object.defineProperty(IK,"__esModule",{value:!0});const rs=Nn,Kft={message:({schemaCode:e})=>(0,rs.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,rs._)`{format: ${e}}`},Xft={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:Kft,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,rs._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,rs._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,rs._)`${m}.type || "string"`).assign(y,(0,rs._)`${m}.validate`),()=>n.assign(g,(0,rs._)`"string"`).assign(y,m)),e.fail$data((0,rs.or)(v(),b()));function v(){return u.strictSchema===!1?rs.nil:(0,rs._)`${o} && !${y}`}function b(){const w=c.$async?(0,rs._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,rs._)`${y}(${r})`,E=(0,rs._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,rs._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const S=E instanceof RegExp?(0,rs.regexpCode)(E):u.code.formats?(0,rs._)`${u.code.formats}${(0,rs.getProperty)(s)}`:void 0,T=n.scopeValue("formats",{key:s,ref:E,code:S});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,rs._)`${T}.validate`]:["string",E,T]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,rs._)`await ${y}(${r})`}return typeof g=="function"?(0,rs._)`${y}(${r})`:(0,rs._)`${y}.test(${r})`}}}};IK.default=Xft;Object.defineProperty(AK,"__esModule",{value:!0});const Qft=IK,Jft=[Qft.default];AK.default=Jft;var _E={};Object.defineProperty(_E,"__esModule",{value:!0});_E.contentVocabulary=_E.metadataVocabulary=void 0;_E.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];_E.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(ZY,"__esModule",{value:!0});const Zft=eK,edt=nK,tdt=pK,ndt=AK,Nue=_E,rdt=[Zft.default,edt.default,(0,tdt.default)(),ndt.default,Nue.metadataVocabulary,Nue.contentVocabulary];ZY.default=rdt;var kK={},t6={};Object.defineProperty(t6,"__esModule",{value:!0});t6.DiscrError=void 0;var Pue;(function(e){e.Tag="tag",e.Mapping="mapping"})(Pue||(t6.DiscrError=Pue={}));Object.defineProperty(kK,"__esModule",{value:!0});const C_=Nn,m7=t6,Due=Au,idt=Vx,sdt=_t,odt={message:({params:{discrError:e,tagName:t}})=>e===m7.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,C_._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},adt={keyword:"discriminator",type:"object",schemaType:"object",error:odt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,C_._)`${n}${(0,C_.getProperty)(a)}`);t.if((0,C_._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:m7.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,C_._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:m7.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,C_.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,sdt.schemaHasRulesButRef)(E,s.self.RULES)){const T=E.$ref;if(E=Due.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,T),E instanceof Due.SchemaEnv&&(E=E.schema),E===void 0)throw new idt.default(s.opts.uriResolver,s.baseId,T)}const S=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof S!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(S,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const S of w.enum)b(S,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};kK.default=adt;const udt="http://json-schema.org/draft-07/schema#",ldt="http://json-schema.org/draft-07/schema#",cdt="Core schema meta-schema",fdt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},ddt=["object","boolean"],hdt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},pdt={$schema:udt,$id:ldt,title:cdt,definitions:fdt,type:ddt,properties:hdt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=Rxe,r=ZY,i=kK,s=pdt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Uf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Nn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=ek;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=Vx;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(a7,a7.exports);var mdt=a7.exports;const ySe=nl(mdt),gdt="#/definitions/StudyConfig",ydt="http://json-schema.org/draft-07/schema#",vdt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": [       {         "label": "Europe",         "value": "Europe"       },       {         "label": "Japan",         "value": "Japan"       },       {         "label": "USA",         "value": "USA"       }     ],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  },  {    "label": "Option 3",    "value": "opt-3"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": [  {    "label": "Red",    "value": "red"  },  {    "label": "Blue",    "value": "blue"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": [      {        "label": "Man",        "value": "Man"      },      {        "label": "Woman",        "value": "Woman"      },      {        "label": "Genderqueer",        "value": "Genderqueer"      },      {        "label": "Third-gender",        "value": "Third-gender"      },      ... etc.    ]  } ] } ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": [  {    "label": "Option 1",    "value": "opt-1"  },  {    "label": "Option 2",    "value": "opt-2"  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{$ref:"#/definitions/StringOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.0/src/public/demo-brush-interactions/assets)",properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.0/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},recordStudyAudio:{type:"boolean"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},tasksToNotRecordAudio:{items:{type:"string"},type:"array"},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},recordAudio:{type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},bdt={$ref:gdt,$schema:ydt,definitions:vdt},_dt="#/definitions/GlobalConfig",wdt="http://json-schema.org/draft-07/schema#",Edt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},xdt={$ref:_dt,$schema:wdt,definitions:Edt},vSe=new ySe;vSe.addSchema(xdt);const Oue=vSe.getSchema("#/definitions/GlobalConfig"),bSe=new ySe;bSe.addSchema(bdt);const H8=bSe.getSchema("#/definitions/StudyConfig");function Sdt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function n6(e){return e.baseComponent!==void 0}function Tdt(e){const t=BY.parse(e),n=Oue(t),r=Sdt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Oue.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function _Se(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):_Se(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function Cdt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;n6(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=xxe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return _Se(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function Adt(e){let t=!1,n;try{n=BY.parse(e),t=H8(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=Cdt(n);r=[...H8.errors||[],...s],i=o}else r=H8.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function wSe(){const e=jm(),{setAlertModal:t}=Fl(),n=Oc();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var $ue=Object.prototype.hasOwnProperty;function Mue(e,t,n){for(n of e.keys())if(d2(n,t))return n}function d2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&d2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Mue(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Mue(t,i),!i)||!d2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if($ue.call(e,n)&&++r&&!$ue.call(t,n)||!(n in t)||!d2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function Idt(e){var t=I.useRef(e),n=I.useRef(0);return d2(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function kdt(e,t){return I.useEffect(e,Idt(t))}const Hv=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return kdt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Lue=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],ESe=["participantId","trialId","trialOrder","responseId"];function RK(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function Rdt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(kl(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=n6(u)&&u.baseComponent&&n.baseComponents?MY({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function Ndt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...ESe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await Rdt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function Pdt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...Lue].filter(h=>h!=="meta")),a=Di(),{value:u,status:l,error:c}=Hv(Ndt,[s,r,a.storageEngine,i]),f=I.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>p[m]).join(","))].join(`
`);RK(h,n)},[n,u]),d=I.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(Es,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(IG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Lue],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(LXe,{}),variant:"filled"}),_.jsx(Tc,{h:"md"}),_.jsxs(be,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(Zs,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(Zs.Thead,{children:_.jsx(Zs.Tr,{children:u.header.map(h=>_.jsx(Zs.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(fn,{direction:"row",justify:"space-between",align:"center",children:[h,!ESe.includes(h)&&_.jsx(jf,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(cwe,{size:16})})]})},h))})}),_.jsx(Zs.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(Zs.Tr,{children:u.header.map(m=>_.jsx(Zs.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(LI,{variant:"light",children:c.message}):null,_.jsx(Dc,{visible:l==="pending"||l==="idle"})]}),_.jsx(Tc,{h:"sm"}),_.jsx(fn,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(et,{children:d})}),_.jsx(Tc,{h:"md"}),_.jsxs(mr,{justify:"right",children:[_.jsx(On,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(On,{leftSection:_.jsx(uwe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function xSe(){const e=Qf(),{storageEngine:t}=Di(),{answers:n}=Fo(v=>v),[r,i]=I.useState(!1);I.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),wSe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=I.useCallback(async()=>{RK(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));I.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=vb(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx($l,{style:{height:"100%"},children:_.jsx(fn,{direction:"column",children:r||!g?_.jsx(et,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Xa,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(et,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(Tc,{h:"lg"}),_.jsx($l,{children:_.jsx(ju,{color:"blue"})})]})})})}function zf(e){return structuredClone(e)}const SSe=I.createContext(null);function Ddt(){const e=I.useContext(SSe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Fue(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Odt(){const e=jm(),t=$Y(),r=`${zh()}_${e}`,{trialValidation:i,sequence:s,answers:o}=Fo(S=>S),a=Oc(),{saveTrialAnswer:u,setIframeAnswers:l}=Fl(),{storageEngine:c}=Di(),f=vb(),[d,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const T=await c.getModes(f);h(T.dataCollectionEnabled)}})()},[c,f]);const p=Pat(r),m=typeof e!="number"||!p,g=FY(),y=Kl(),v=Qf(),b=I.useMemo(()=>Date.now(),[]),w=Ddt(),E=I.useCallback(()=>{if(typeof e!="number")return;const S=zf(i[r]),T=Object.values(S).reduce((L,M)=>Object.hasOwn(M,"values")?{...L,...M.values}:L,{}),{provenanceGraph:C}=S,A=Date.now(),N=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:T,startTime:b,endTime:A,provenanceGraph:C,windowEvents:N})),c&&c.saveAnswers({...o,[r]:{answer:T,startTime:b,endTime:A,provenanceGraph:C,windowEvents:N}}),a(l({})));let k=e+1;const O=kat(s,e),P=O!==null&&O.some(L=>Object.hasOwn(L.currentBlock,"skip")&&L.currentBlock.skip!==void 0),$={...o,[r]:{answer:T,startTime:b,endTime:A,provenanceGraph:C,windowEvents:N}};P&&[...O.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(U=>({...U,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let U=!1;const B=Object.fromEntries(Object.entries($).filter(([D])=>{const z=parseInt(D.slice(D.lastIndexOf("_")+1),10);return z>=M.firstIndex&&z<=e})),V=M.check!=="block"?Object.entries(B).filter(([D])=>D.slice(0,D.lastIndexOf("_"))===M.name):Object.entries(B);if(V.length===0)return!1;if(V.some(([D,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[D,z]=V[0];M.check==="response"?U=M.value!==z.answer[M.responseId]:U=!Fue(z.answer,D,v.components[D.slice(0,D.lastIndexOf("_"))],v)}else if(M.check==="block"||M.check==="repeatedComponent"){if(V.length<M.value)return!1;const D=V.map(([j,q])=>Fue(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=D.filter(j=>j).length,W=D.length-z;U=M.condition==="numCorrect"&&z===M.value||M.condition==="numIncorrect"&&W===M.value}if(U){const D=t.indexOf(M.to),z=D===-1?Rat(s,M.to):-1;return k=D===-1?z:D,!0}return!1}),y(`/${f}/${k}${window.location.search}`)},[i,r,w,g,e,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function $dt({label:e="Next",disabled:t=!1,setCheckClicked:n=()=>null,onClick:r}){const{isNextDisabled:i,goToNextStep:s}=Odt(),o=I.useCallback(()=>{n(!1),r&&r(),s()},[s,r,n]);return _.jsx(On,{type:"submit",disabled:t||i,onClick:o,children:e})}function Mdt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const Ldt=typeof window<"u"?I.useLayoutEffect:I.useEffect;function vo(e,t){Ldt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Fdt(e,t){e&&Mdt(e),vo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),vo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),vo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),vo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),vo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),vo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),vo(`mantine-form:${e}:clear-errors`,t.clearErrors),vo(`mantine-form:${e}:reset`,t.reset),vo(`mantine-form:${e}:validate`,t.validate),vo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),vo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),vo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),vo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),vo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),vo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),vo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),vo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function jdt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function g7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Bdt(e){const[t,n]=I.useState(g7(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=g7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function TSe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function jue(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Bue(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=TSe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=jue(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=jue(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Udt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Uue(e,t,n){typeof n.value=="object"&&(n.value=nw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function nw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(nw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(nw(a),nw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(nw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Uue(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Uue(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function CSe(e){return typeof e!="string"?[]:e.split(".")}function Nu(e,t){const n=CSe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function r6(e,t,n){const r=CSe(e);if(r.length===0)return n;const i=nw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function zdt(e,{from:t,to:n},r){const i=Nu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),r6(e,s,r)}function Vdt(e,t,n,r){const i=Nu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),r6(e,s,r)}function Hdt(e,t,n){const r=Nu(e,n);return Array.isArray(r)?r6(e,r.filter((i,s)=>s!==t),n):n}function qdt({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Udt(o,a,u)),e.setValues({values:zdt(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Bue(o,a,u,-1)),e.setValues({values:Hdt(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Bue(o,u,l,1)),e.setValues({values:Vdt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}function vN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Wdt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(E=>{const S=typeof E=="function"?E(u.current):E;u.current=S,n==="controlled"&&s(S)},[]),f=I.useCallback(E=>{const S=typeof E=="function"?E(l.current):E;l.current=S,n==="controlled"&&a(S)},[]),d=I.useCallback(()=>c({}),[]),h=E=>{const S=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(S),f({})},p=I.useCallback((E,S)=>{c(T=>vN(T,E)===S?T:{...T,[E]:S})},[]),m=I.useCallback((E,S)=>{f(T=>vN(T,E)===S?T:{...T,[E]:S})},[]),g=I.useCallback(E=>vN(u.current,E),[]),y=I.useCallback(E=>f(S=>{if(typeof E!="string")return S;const T=TSe(E,S);return delete T[E],JP(T,S)?S:T}),[]),v=I.useCallback(E=>{if(E){const T=Nu(E,l.current);if(typeof T=="boolean")return T;const C=Nu(E,r.refValues.current),A=Nu(E,r.valuesSnapshot.current);return!JP(C,A)}return Object.keys(l.current).length>0?vN(l.current):!JP(r.refValues.current,r.valuesSnapshot.current)},[]),b=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function Gdt({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=Nu(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=r6(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[u]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[u]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[u]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Ydt({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Nu(i,o.previousValues),value:Nu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function zue(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Vue(e){const t=g7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function y7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Nu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>y7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||y7(o,t,a,i)),i},r)}function v7(e,t){return Vue(typeof e=="function"?e(t):y7(e,t))}function bN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=v7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Kdt="__MANTINE_FORM_INDEX__";function Hue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Kdt}`)):!1:!1}function ASe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Bdt(r),p=Gdt({initialValues:n,onValuesChange:l,mode:t}),m=Wdt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=qdt({$values:p,$errors:h,$status:m}),y=Ydt({$status:m}),[v,b]=I.useState(0),[w,E]=I.useState({}),S=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(D=>D+1)},[]),T=I.useCallback(D=>{p.initialize(D,()=>t==="uncontrolled"&&b(z=>z+1))},[]),C=I.useCallback((D,z,W)=>{const j=Hue(D,a);m.clearFieldDirty(D),m.setFieldTouched(D,!0),!j&&o&&h.clearFieldError(D),p.setFieldValue({path:D,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(D),j?q=>{const G=bN(D,d,q.updatedValues);G.hasError?h.setFieldError(D,G.error):h.clearFieldError(D)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[D]:(q[D]||0)+1})):null]})},[l,d]),A=I.useCallback(D=>{const z=p.refValues.current;p.setValues({values:D,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Nu(W,p.refValues.current),q=Nu(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),N=I.useCallback(()=>{const D=v7(d,p.refValues.current);return h.setErrors(D.errors),D},[d]),k=I.useCallback(D=>{const z=bN(D,d,p.refValues.current);return z.hasError?h.setFieldError(D,z.error):h.clearFieldError(D),z},[d]),O=(D,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const te={onChange:jdt(ve=>C(D,ve,{forceUpdate:!1})),"data-path":zue(e,D)};return W&&(te.error=h.errorsState[D]),z==="checkbox"?te[t==="controlled"?"checked":"defaultChecked"]=Nu(D,p.refValues.current):te[t==="controlled"?"value":"defaultValue"]=Nu(D,p.refValues.current),j&&(te.onFocus=()=>m.setFieldTouched(D,!0),te.onBlur=()=>{if(Hue(D,u)){const ve=bN(D,d,p.refValues.current);ve.hasError?h.setFieldError(D,ve.error):h.clearFieldError(D)}}),Object.assign(te,f==null?void 0:f({inputProps:te,field:D,options:{type:z,withError:W,withFocus:j,...q},form:V}))},P=(D,z)=>W=>{W==null||W.preventDefault();const j=N();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):D==null||D(c(p.refValues.current),W)},$=D=>c(D||p.refValues.current),L=I.useCallback(D=>{D.preventDefault(),S()},[]),M=I.useCallback(D=>D?!bN(D,d,p.refValues.current).hasError:!v7(d,p.refValues.current).hasErrors,[d]),U=D=>`${v}-${D}-${w[D]||0}`,B=I.useCallback(D=>document.querySelector(`[data-path="${zue(e,D)}"]`),[]),V={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:T,setValues:A,setFieldValue:C,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:S,validate:N,validateField:k,getInputProps:O,onSubmit:P,onReset:L,isValid:M,getTransformedValues:$,key:U,getInputNode:B};return Fdt(e,V),V}function Xdt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Qdt(e){return Xdt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}const Jdt=new URLSearchParams(window.location.search),Zdt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Jdt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},eht=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function tht(e,t,n){const[r,i]=I.useState(null),s=ASe({initialValues:Zdt(e,n),validate:eht(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function bb(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function nht({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e;return _.jsx(fm.Group,{label:_.jsxs(fn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(be,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(be,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xa,{text:s,required:o})})]}),description:u,...n,error:bb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(mr,{mt:"xs",children:a.map(l=>_.jsx(fm,{disabled:t,value:l.value,label:l.label},l.value))})})}function rht({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e;return _.jsx(pE,{disabled:t,label:_.jsxs(fn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(be,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(be,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xa,{text:o,required:a})})]}),description:l,placeholder:s,data:u,radius:"md",size:"md",...n,error:bb(e,n,u)})}function iht({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(ri.Wrapper,{label:_.jsxs(fn,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(be,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(be,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xa,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Bf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Bf.Item,{children:a},a)):_.jsx(Bf.Item,{children:t.value})})})}function ISe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e;return _.jsx(T1.Group,{name:`radioInput${e.id}`,label:_.jsxs(fn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(be,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(be,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xa,{text:s,required:o})})]}),description:c,...n,error:bb(e,n,a),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(mr,{mt:"xs",children:[u?_.jsx(et,{style:{textAlign:"center"},children:u}):null,a.map(f=>_.jsx(T1,{disabled:t,value:f.value,label:f.label},f.label)),_.jsx(et,{children:l})]})},e.id)}function sht({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(ISe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function oht({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(RG,{disabled:t,placeholder:l,label:_.jsxs(fn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(be,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(be,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xa,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:bb(e,n)})}function aht({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=bb(e,n);return _.jsx(ri.Wrapper,{label:_.jsxs(fn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(be,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(be,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xa,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(FG,{disabled:t,marks:a,...n,h:40})})}function uht({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(l0,{disabled:t,placeholder:s,label:_.jsxs(fn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(be,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(be,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:bb(e,n)})}function lht({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(rA,{disabled:t,placeholder:s,label:_.jsxs(fn,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(be,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(be,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Xa,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:bb(e,n)})}function cht({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=ZG(),u=Qf().uiConfig.enumerateQuestions??!1,l=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(be,{mb:"md",children:[e.type==="numerical"&&_.jsx(oht,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(uht,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(lht,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(sht,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(rht,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(aht,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(ISe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(nht,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(iht,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function QO({config:e,location:t,status:n,style:r}){var w;const i=jm(),s=zh(),o=n==null?void 0:n.answer,a=e,u=I.useMemo(()=>{var E;return((E=a==null?void 0:a.response)==null?void 0:E.filter(S=>S.location?S.location===t:t==="belowStimulus"))||[]},[a==null?void 0:a.response,t]),l=Oc(),{updateResponseBlockValidation:c}=Fl(),f=tht(u,i,o||{}),[d,h]=I.useState(void 0),[p,m]=I.useState(!1),{iframeAnswers:g,iframeProvenance:y}=Fo(E=>E),v=(a==null?void 0:a.provideFeedback)&&(((w=a==null?void 0:a.correctAnswer)==null?void 0:w.length)||0)>0,b=t===((a==null?void 0:a.nextButtonLocation)||"belowStimulus");return I.useEffect(()=>{const E=u.find(S=>S.type==="iframe");if(g&&E){const S=E.id;f.setValues({...f.values,[S]:g[S]})}},[g]),I.useEffect(()=>{y&&h(y)},[y]),I.useEffect(()=>{l(c({location:t,identifier:`${s}_${i}`,status:f.isValid(),values:zf(f.values),provenanceGraph:d}))},[f.values,s,i,t,l,c,d]),_.jsxs("div",{style:r,children:[u.map((E,S)=>{var T,C;return _.jsx(Wi.Fragment,{children:E.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(cht,{storedAnswer:o?o[E.id]:void 0,answer:{...f.getInputProps(E.id,{type:E.type==="checkbox"?"checkbox":"input"})},response:E,index:S+1}),v&&p&&_.jsx(et,{children:`The correct answer is: ${(C=(T=a.correctAnswer)==null?void 0:T.find(A=>A.id===E.id))==null?void 0:C.answer}`})]})},`${E.id}-${i}`)}),_.jsxs(mr,{justify:"right",gap:"xs",children:[v&&b&&_.jsx(On,{onClick:()=>m(!0),disabled:!f.isValid(),children:"Check Answer"}),b&&_.jsx($dt,{disabled:v&&!p,setCheckClicked:m,label:a.nextButtonText||"Next"})]})]})}const kSe=I.createContext(null),NK=({id:e="waveform",children:t})=>Wi.createElement("div",{id:e},t),fht=["audioRate","audioContext","audioScriptProcessor","autoCenter","backend","backgroundColor","barGap","barHeight","barMinHeight","barRadius","barWidth","closeAudioContext","cursorColor","cursorWidth","fillParent","forceDecode","height","hideScrollbar","interact","loopSelection","maxCanvasWidth","mediaControls","mediaType","minPxPerSec","normalize","partialRender","pixelRatio","progressColor","removeMediaElementOnDestroy","renderer","responsive","scrollParent","skipLength","splitChannels","waveColor","autoCenterRate","autoCenterImmediately","drawingContextAttributes","duration","ignoreSilenceMode","rtl","splitChannelsOptions","vertical","xhr"],dht=e=>e?fht.reduce((t,n)=>Object.prototype.hasOwnProperty.call(e,n)?Object.assign(Object.assign({},t),{[n]:e[n]}):t,{}):{};var hht=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};function pht(e,t){return hht(this,void 0,void 0,function*(){const n=new AudioContext({sampleRate:t});return n.decodeAudioData(e).finally(()=>n.close())})}function mht(e){const t=e[0];if(t.some(n=>n>1||n<-1)){const n=t.length;let r=0;for(let i=0;i<n;i++){const s=Math.abs(t[i]);s>r&&(r=s)}for(const i of e)for(let s=0;s<n;s++)i[s]/=r}return e}function ght(e,t){return typeof e[0]=="number"&&(e=[e]),mht(e),{duration:t,length:e[0].length,sampleRate:e[0].length/t,numberOfChannels:e.length,getChannelData:n=>e==null?void 0:e[n],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}const q8={decode:pht,createBuffer:ght};var que=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};function yht(e,t,n){var r,i;return que(this,void 0,void 0,function*(){const s=yield fetch(e,n);{const o=(r=s.clone().body)===null||r===void 0?void 0:r.getReader(),a=Number((i=s.headers)===null||i===void 0?void 0:i.get("Content-Length"));let u=0;const l=(c,f)=>que(this,void 0,void 0,function*(){if(c)return;u+=(f==null?void 0:f.length)||0;const d=Math.round(u/a*100);return t(d),o==null?void 0:o.read().then(({done:h,value:p})=>l(h,p))});o==null||o.read().then(({done:c,value:f})=>l(c,f))}return s.blob()})}const vht={fetchBlob:yht};class i6{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r!=null&&r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}}class bht extends i6{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),t.playbackRate!=null&&this.onceMediaEvent("canplay",()=>{t.playbackRate!=null&&(this.media.playbackRate=t.playbackRate)})}onMediaEvent(t,n,r){return this.media.addEventListener(t,n,r),()=>this.media.removeEventListener(t,n)}onceMediaEvent(t,n){return this.onMediaEvent(t,n,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}setSrc(t,n){if(this.getSrc()===t)return;this.revokeSrc();const i=n instanceof Blob?URL.createObjectURL(n):t;this.media.src=i,this.media.load()}destroy(){this.media.pause(),!this.isExternalMedia&&(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(t,n){n!=null&&(this.media.preservesPitch=n),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}}function _ht(e,t,n,r,i=5){let s=()=>{};if(!e)return s;const o=a=>{if(a.button===2)return;a.preventDefault(),a.stopPropagation(),e.style.touchAction="none";let u=a.clientX,l=a.clientY,c=!1;const f=p=>{p.preventDefault(),p.stopPropagation();const m=p.clientX,g=p.clientY;if(c||Math.abs(m-u)>=i||Math.abs(g-l)>=i){const{left:y,top:v}=e.getBoundingClientRect();c||(c=!0,n==null||n(u-y,l-v)),t(m-u,g-l,m-y,g-v),u=m,l=g}},d=p=>{c&&(p.preventDefault(),p.stopPropagation())},h=()=>{e.style.touchAction="",c&&(r==null||r()),s()};document.addEventListener("pointermove",f),document.addEventListener("pointerup",h),document.addEventListener("pointerleave",h),document.addEventListener("click",d,!0),s=()=>{document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",h),document.removeEventListener("pointerleave",h),setTimeout(()=>{document.removeEventListener("click",d,!0)},10)}};return e.addEventListener("pointerdown",o),()=>{s(),e.removeEventListener("pointerdown",o)}}let RSe=class NSe extends i6{constructor(t,n){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=t;const r=this.parentFromOptionsContainer(t.container);this.parent=r;const[i,s]=this.initHtml();r.appendChild(i),this.container=i,this.scrollContainer=s.querySelector(".scroll"),this.wrapper=s.querySelector(".wrapper"),this.canvasWrapper=s.querySelector(".canvases"),this.progressWrapper=s.querySelector(".progress"),this.cursor=s.querySelector(".cursor"),n&&s.appendChild(n),this.initEvents()}parentFromOptionsContainer(t){let n;if(typeof t=="string"?n=document.querySelector(t):t instanceof HTMLElement&&(n=t),!n)throw new Error("Container not found");return n}initEvents(){const t=r=>{const i=this.wrapper.getBoundingClientRect(),s=r.clientX-i.left,o=r.clientX-i.left,a=s/i.width,u=o/i.height;return[a,u]};this.wrapper.addEventListener("click",r=>{const[i,s]=t(r);this.emit("click",i,s)}),this.wrapper.addEventListener("dblclick",r=>{const[i,s]=t(r);this.emit("dblclick",i,s)}),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:r,scrollWidth:i,clientWidth:s}=this.scrollContainer,o=r/i,a=(r+s)/i;this.emit("scroll",o,a)});const n=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{n(()=>this.reRender())}),this.resizeObserver.observe(this.scrollContainer)}initDrag(){_ht(this.wrapper,(t,n,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},()=>this.isDragging=!0,()=>this.isDragging=!1)}getHeight(){return this.options.height==null?128:isNaN(Number(this.options.height))?this.options.height==="auto"&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const t=document.createElement("div"),n=t.attachShadow({mode:"open"});return n.innerHTML=`
      <style>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight()}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[t,n]}setOptions(t){if(this.options.container!==t.container){const n=this.parentFromOptionsContainer(t.container);n.appendChild(this.container),this.parent=n}t.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var t;this.container.remove(),(t=this.resizeObserver)===null||t===void 0||t.disconnect()}createDelay(t=10){const n={};return this.timeouts.push(n),r=>{n.timeout&&clearTimeout(n.timeout),n.timeout=setTimeout(r,t)}}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const n=document.createElement("canvas"),i=n.getContext("2d").createLinearGradient(0,0,0,n.height),s=1/(t.length-1);return t.forEach((o,a)=>{const u=a*s;i.addColorStop(u,o)}),i}renderBarWaveform(t,n,r,i){const s=t[0],o=t[1]||t[0],a=s.length,{width:u,height:l}=r.canvas,c=l/2,f=window.devicePixelRatio||1,d=n.barWidth?n.barWidth*f:1,h=n.barGap?n.barGap*f:n.barWidth?d/2:0,p=n.barRadius||0,m=u/(d+h)/a,g=p&&"roundRect"in r?"roundRect":"rect";r.beginPath();let y=0,v=0,b=0;for(let w=0;w<=a;w++){const E=Math.round(w*m);if(E>y){const C=Math.round(v*c*i),A=Math.round(b*c*i),N=C+A||1;let k=c-C;n.barAlign==="top"?k=0:n.barAlign==="bottom"&&(k=l-N),r[g](y*(d+h),k,d,N,p),y=E,v=0,b=0}const S=Math.abs(s[w]||0),T=Math.abs(o[w]||0);S>v&&(v=S),T>b&&(b=T)}r.fill(),r.closePath()}renderLineWaveform(t,n,r,i){const s=o=>{const a=t[o]||t[0],u=a.length,{height:l}=r.canvas,c=l/2,f=r.canvas.width/u;r.moveTo(0,c);let d=0,h=0;for(let p=0;p<=u;p++){const m=Math.round(p*f);if(m>d){const y=Math.round(h*c*i)||1,v=c+y*(o===0?-1:1);r.lineTo(d,v),d=m,h=0}const g=Math.abs(a[p]||0);g>h&&(h=g)}r.lineTo(d,c)};r.beginPath(),s(0),s(1),r.fill(),r.closePath()}renderWaveform(t,n,r){if(r.fillStyle=this.convertColorValues(n.waveColor),n.renderFunction){n.renderFunction(t,r);return}let i=n.barHeight||1;if(n.normalize){const s=Array.from(t[0]).reduce((o,a)=>Math.max(o,Math.abs(a)),0);i=s?1/s:1}if(n.barWidth||n.barGap||n.barAlign){this.renderBarWaveform(t,n,r,i);return}this.renderLineWaveform(t,n,r,i)}renderSingleCanvas(t,n,r,i,s,o,a,u){const l=window.devicePixelRatio||1,c=document.createElement("canvas"),f=t[0].length;c.width=Math.round(r*(o-s)/f),c.height=i*l,c.style.width=`${Math.floor(c.width/l)}px`,c.style.height=`${i}px`,c.style.left=`${Math.floor(s*r/l/f)}px`,a.appendChild(c);const d=c.getContext("2d");if(this.renderWaveform(t.map(h=>h.slice(s,o)),n,d),c.width>0&&c.height>0){const h=c.cloneNode(),p=h.getContext("2d");p.drawImage(c,0,0),p.globalCompositeOperation="source-in",p.fillStyle=this.convertColorValues(n.progressColor),p.fillRect(0,0,c.width,c.height),u.appendChild(h)}}renderChannel(t,n,r){const i=document.createElement("div"),s=this.getHeight();i.style.height=`${s}px`,this.canvasWrapper.style.minHeight=`${s}px`,this.canvasWrapper.appendChild(i);const o=i.cloneNode();this.progressWrapper.appendChild(o);const{scrollLeft:a,scrollWidth:u,clientWidth:l}=this.scrollContainer,c=t[0].length,f=c/u;let d=Math.min(NSe.MAX_CANVAS_WIDTH,l);if(n.barWidth||n.barGap){const E=n.barWidth||.5,S=n.barGap||E/2,T=E+S;d%T!==0&&(d=Math.floor(d/T)*T)}const h=Math.floor(Math.abs(a)*f),p=Math.floor(h+d*f),m=p-h,g=(E,S)=>{this.renderSingleCanvas(t,n,r,s,Math.max(0,E),Math.min(S,c),i,o)},y=this.createDelay(),v=this.createDelay(),b=(E,S)=>{g(E,S),E>0&&y(()=>{b(E-m,S-m)})},w=(E,S)=>{g(E,S),S<c&&v(()=>{w(E+m,S+m)})};b(h,p),p<c&&w(p,p+m)}render(t){this.timeouts.forEach(a=>a.timeout&&clearTimeout(a.timeout)),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=window.devicePixelRatio||1,r=this.scrollContainer.clientWidth,i=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrolling=i>r;const s=this.options.fillParent&&!this.isScrolling,o=(s?r:i)*n;if(this.wrapper.style.width=s?"100%":`${i}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let a=0;a<t.numberOfChannels;a++){const u=Object.assign(Object.assign({},this.options),this.options.splitChannels[a]);this.renderChannel([t.getChannelData(a)],u,o)}else{const a=[t.getChannelData(0)];t.numberOfChannels>1&&a.push(t.getChannelData(1)),this.renderChannel(a,this.options,o)}this.audioData=t,this.emit("render")}reRender(){if(!this.audioData)return;const t=this.progressWrapper.clientWidth;this.render(this.audioData);const n=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=n-t}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,n=!1){const{clientWidth:r,scrollLeft:i,scrollWidth:s}=this.scrollContainer,o=s*t,a=r/2,u=n&&this.options.autoCenter&&!this.isDragging?a:r;if(o>i+u||o<i)if(this.options.autoCenter&&!this.isDragging){const l=a/20;o-(i+a)>=l&&o<i+r?this.scrollContainer.scrollLeft+=l:this.scrollContainer.scrollLeft=o-a}else this.isDragging?this.scrollContainer.scrollLeft=o<i?o-10:o-r+10:this.scrollContainer.scrollLeft=o;{const{scrollLeft:l}=this.scrollContainer,c=l/s,f=(l+r)/s;this.emit("scroll",c,f)}}renderProgress(t,n){if(isNaN(t))return;const r=t*100;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.marginLeft=Math.round(r)===100?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(t,n)}};RSe.MAX_CANVAS_WIDTH=4e3;let wht=class extends i6{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};var W8=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};class Eht extends i6{constructor(t=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return W8(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(t){this.currentSrc=t,fetch(t).then(n=>n.arrayBuffer()).then(n=>this.audioContext.decodeAudioData(n)).then(n=>{this.buffer=n,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play()})}_play(){var t;this.paused&&(this.paused=!1,(t=this.bufferNode)===null||t===void 0||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var t;this.paused||(this.paused=!0,(t=this.bufferNode)===null||t===void 0||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return W8(this,void 0,void 0,function*(){this._play(),this.emit("play")})}pause(){this._pause(),this.emit("pause")}setSinkId(t){return W8(this,void 0,void 0,function*(){return this.audioContext.setSinkId(t)})}get playbackRate(){var t,n;return(n=(t=this.bufferNode)===null||t===void 0?void 0:t.playbackRate.value)!==null&&n!==void 0?n:1}set playbackRate(t){this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(t){this.emit("seeking"),this.paused?this.playedDuration=t:(this._pause(),this.playedDuration=t,this._play()),this.emit("timeupdate")}get duration(){var t;return((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}getGainNode(){return this.gainNode}}var i_=function(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})};const xht={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};let Sht=class PSe extends bht{static create(t){return new PSe(t)}constructor(t){const n=t.media||(t.backend==="WebAudio"?new Eht:void 0);super({media:n,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},xht,t),this.timer=new wht;const r=n?void 0:this.getMediaElement();this.renderer=new RSe(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const i=this.options.url||this.getSrc();i?this.load(i,this.options.peaks,this.options.duration):this.options.peaks&&this.options.duration&&this.loadPredecoded()}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),!0),this.emit("timeupdate",t),this.emit("audioprocess",t)}))}initPlayerEvents(){this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),this.emit("timeupdate",t)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop()}),this.onMediaEvent("emptied",()=>{this.timer.stop()}),this.onMediaEvent("ended",()=>{this.emit("finish")}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(t,n)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,n))}),this.renderer.on("dblclick",(t,n)=>{this.emit("dblclick",t,n)}),this.renderer.on("scroll",(t,n)=>{const r=this.getDuration();this.emit("scroll",t*r,n*r)}),this.renderer.on("render",()=>{this.emit("redraw")}));{let t;this.subscriptions.push(this.renderer.on("drag",n=>{this.options.interact&&(this.renderer.renderProgress(n),clearTimeout(t),t=setTimeout(()=>{this.seekTo(n)},this.isPlaying()?0:200),this.emit("interaction",n*this.getDuration()),this.emit("drag",n))}))}}initPlugins(){var t;!((t=this.options.plugins)===null||t===void 0)&&t.length&&this.options.plugins.forEach(n=>{this.registerPlugin(n)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(t=>t()),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),t.mediaControls!=null&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t.init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==t)})),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadPredecoded(){return i_(this,void 0,void 0,function*(){this.options.peaks&&this.options.duration&&(this.decodedData=q8.createBuffer(this.options.peaks,this.options.duration),yield Promise.resolve(),this.renderDecoded())})}renderDecoded(){return i_(this,void 0,void 0,function*(){this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData))})}loadAudio(t,n,r,i){return i_(this,void 0,void 0,function*(){if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!n&&!r){const s=o=>this.emit("loading",o);n=yield vht.fetchBlob(t,s,this.options.fetchParams)}if(this.setSrc(t,n),i=(yield Promise.resolve(i||this.getDuration()))||(yield new Promise(s=>{this.onceMediaEvent("loadedmetadata",()=>s(this.getDuration()))}))||(yield Promise.resolve(0)),r)this.decodedData=q8.createBuffer(r,i);else if(n){const s=yield n.arrayBuffer();this.decodedData=yield q8.decode(s,this.options.sampleRate)}this.renderDecoded(),this.emit("ready",this.getDuration())})}load(t,n,r){return i_(this,void 0,void 0,function*(){yield this.loadAudio(t,void 0,n,r)})}loadBlob(t,n,r){return i_(this,void 0,void 0,function*(){yield this.loadAudio("blob",t,n,r)})}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:n=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const i=Math.min(t,this.decodedData.numberOfChannels),s=[];for(let o=0;o<i;o++){const a=this.decodedData.getChannelData(o),u=[],l=Math.round(a.length/n);for(let c=0;c<n;c++){const f=a.slice(c*l,(c+1)*l),d=Math.max(...f);u.push(Math.round(d*r)/r)}s.push(u)}return s}getDuration(){let t=super.getDuration()||0;return(t===0||t===1/0)&&this.decodedData&&(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}seekTo(t){const n=this.getDuration()*t;this.setTime(n)}playPause(){return i_(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}destroy(){this.emit("destroy"),this.plugins.forEach(t=>t.destroy()),this.subscriptions.forEach(t=>t()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}};function Tht(e){return Sht.create(e)}function Wue(e){const{plugin:t,options:n,creator:r="create"}=e,i=t[r];if(!t)throw new Error("Please pass a valid plugin in plugin list");if(!r)throw new Error("Please pass the creator function name in 'creator' property.");if(typeof i!="function")throw new Error(`"${r}" is not callable on given plugin. Please pass a valid 'creator' in plugins list.`);return i(n)}const Cht=(e,t)=>{const n=[...e],r=[...t],i=n.filter(o=>r.findIndex(a=>a.name===o.name)===-1),s=r.filter(o=>n.findIndex(a=>a.name===o.name)===-1);return{disabled:i,enabled:s}};var Aht=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function DSe(e){var{container:t,plugins:n=[],onMount:r}=e,i=Aht(e,["container","plugins","onMount"]);const s=I.useRef([]),[o,a]=I.useState(null);return I.useEffect(()=>{if(!t)return;let u=[];n&&(u=n.map(Wue)),s.current=u;const l=Tht(Object.assign(Object.assign({container:t},i),{plugins:u}));return r==null||r(l),a(l),()=>{l.destroy()}},[t]),I.useEffect(()=>{if(o){const u=n.map(Wue),{disabled:l,enabled:c}=Cht(s.current,u);s.current=u,l.forEach(f=>{f.name&&(o==null||o.destroyPlugin(f.name))}),c.forEach(f=>{f.name&&(o==null||o.addPlugin(f).initPlugin(f.name))})}},[n]),o}function Iht(e){return!!e&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&"type"in e&&"props"in e}var kht=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};const OSe=e=>{var{children:t,plugins:n=[],onMount:r}=e,i=kht(e,["children","plugins","onMount"]);const s=I.useMemo(()=>{let a={};return I.Children.forEach(t,u=>{if(typeof u!="object"||u===null||["string","number"].includes(typeof u)||!Iht(u))return;const{props:l,type:c}=u;if(c===NK){const{id:f}=l;a=dht(l),a=Object.assign(Object.assign({},a),{container:"#"+f})}}),a},[t]),o=DSe(Object.assign(Object.assign({plugins:n,onMount:r},i),s));return Wi.createElement(kSe.Provider,{value:o},t)};OSe.defaultProps={children:null,plugins:[]};function G8(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(l){try{u(r.next(l))}catch(c){s(c)}}function a(l){try{u(r.throw(l))}catch(c){s(c)}}function u(l){var c;l.done?i(l.value):(c=l.value,c instanceof n?c:new n(function(f){f(c)})).then(o,a)}u((r=r.apply(e,[])).next())})}let Rht=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,n,r){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(n),r==null?void 0:r.once){const i=()=>{this.removeEventListener(t,i),this.removeEventListener(t,n)};return this.addEventListener(t,i),i}return()=>this.removeEventListener(t,n)}removeEventListener(t,n){var r;(r=this.listeners[t])===null||r===void 0||r.delete(n)}once(t,n){return this.on(t,n,{once:!0})}unAll(){this.listeners={}}emit(t,...n){this.listeners[t]&&this.listeners[t].forEach(r=>r(...n))}},Nht=class extends Rht{constructor(t){super(),this.subscriptions=[],this.options=t}onInit(){}init(t){this.wavesurfer=t,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(t=>t())}};const Pht=["audio/webm","audio/wav","audio/mpeg","audio/mp4","audio/mp3"];let Dht=class $Se extends Nht{constructor(t){var n;super(Object.assign(Object.assign({},t),{audioBitsPerSecond:(n=t.audioBitsPerSecond)!==null&&n!==void 0?n:128e3})),this.stream=null,this.mediaRecorder=null}static create(t){return new $Se(t||{})}renderMicStream(t){const n=new AudioContext,r=n.createMediaStreamSource(t),i=n.createAnalyser();r.connect(i);const s=i.frequencyBinCount,o=new Float32Array(s),a=s/n.sampleRate;let u;const l=()=>{i.getFloatTimeDomainData(o),this.wavesurfer&&(this.wavesurfer.options.cursorWidth=0,this.wavesurfer.options.interact=!1,this.wavesurfer.load("",[o],a)),u=requestAnimationFrame(l)};return l(),()=>{cancelAnimationFrame(u),r==null||r.disconnect(),n==null||n.close()}}startMic(t){return G8(this,void 0,void 0,function*(){let n;try{n=yield navigator.mediaDevices.getUserMedia({audio:!(t!=null&&t.deviceId)||{deviceId:t.deviceId}})}catch(i){throw new Error("Error accessing the microphone: "+i.message)}const r=this.renderMicStream(n);return this.subscriptions.push(this.once("destroy",r)),this.stream=n,n})}stopMic(){this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=null,this.mediaRecorder=null)}startRecording(t){return G8(this,void 0,void 0,function*(){const n=this.stream||(yield this.startMic(t)),r=this.mediaRecorder||new MediaRecorder(n,{mimeType:this.options.mimeType||Pht.find(s=>MediaRecorder.isTypeSupported(s)),audioBitsPerSecond:this.options.audioBitsPerSecond});this.mediaRecorder=r,this.stopRecording();const i=[];r.ondataavailable=s=>{s.data.size>0&&i.push(s.data)},r.onstop=()=>{var s;const o=new Blob(i,{type:r.mimeType});this.emit("record-end",o),this.options.renderRecordedAudio!==!1&&((s=this.wavesurfer)===null||s===void 0||s.load(URL.createObjectURL(o)))},r.start(),this.emit("record-start")})}isRecording(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="recording"}isPaused(){var t;return((t=this.mediaRecorder)===null||t===void 0?void 0:t.state)==="paused"}stopRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.stop())}pauseRecording(){var t;this.isRecording()&&((t=this.mediaRecorder)===null||t===void 0||t.pause(),this.emit("record-pause"))}resumeRecording(){var t;this.isPaused()&&((t=this.mediaRecorder)===null||t===void 0||t.resume(),this.emit("record-resume"))}static getAvailableAudioDevices(){return G8(this,void 0,void 0,function*(){return navigator.mediaDevices.enumerateDevices().then(t=>t.filter(n=>n.kind==="audioinput"))})}destroy(){super.destroy(),this.stopRecording(),this.stopMic()}};function MSe({width:e=70,height:t=50}){const n=I.useRef(null),r=I.useCallback(i=>{n.current=i,n.current&&(n.current.registerPlugin(Dht.create({scrollingWaveform:!0,renderRecordedAudio:!1})).startRecording(),n.current.setOptions({height:50,waveColor:"#FA5252"}))},[]);return _.jsx(be,{style:{width:`${e}px`,height:`${t}px`},children:_.jsx(OSe,{onMount:r,children:_.jsx(NK,{id:"waveform"})})})}function Gue({parameters:e,setAnswer:t}){return I.useEffect(()=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{new MediaRecorder(r).start();const s=new AudioContext,o=s.createMediaStreamSource(r),a=s.createAnalyser();a.minDecibels=-45,o.connect(a);const u=a.frequencyBinCount,l=new Uint8Array(u);let c=!1;const f=()=>{if(!c){a.getByteFrequencyData(l);for(let d=0;d<u;d+=1)l[d]>0&&(c=!0,t({status:!0,provenanceGraph:void 0,answers:{audioTest:!0}}));window.requestAnimationFrame(f)}};window.requestAnimationFrame(f)})},[t]),_.jsx($l,{style:{height:"70%",width:"100%"},children:_.jsxs(ro,{children:[_.jsx(et,{ta:"center",children:"Please allow us to access your microphone. There may be a popup in your browser window asking for access, click accept."}),_.jsx(et,{ta:"center",children:"Once we can confirm that your microphone is on and we hear you say something, the continue button will become available."}),_.jsx(et,{ta:"center",fw:700,children:"If you are not comfortable or able to speak English during this study, please close it now."}),_.jsx($l,{children:_.jsx(MSe,{height:200,width:400})})]})})}const Oht=Object.freeze(Object.defineProperty({__proto__:null,AudioTest:Gue,default:Gue},Symbol.toStringTag,{value:"Module"})),bo={Purple:"#6D3E91",DarkOrange:"#C05917",LightTeal:"#58AC8C",Blue:"#286BBB",Maroon:"#883039",Camel:"#BC8E5A",MidnightBlue:"#00295B",DustyCoral:"#C15065",DarkOliveGreen:"#18470F",DarkCopper:"#9A5129",Peach:"#E56E5A",Mauve:"#A2559C",Turquoise:"#38AABA",OliveGreen:"#578145",Cherry:"#970046",Teal:"#00847E",RustyOrange:"#B13507",Denim:"#4C6A9C",Fuchsia:"#CF0A66",TealishGreen:"#00875E",Copper:"#B16214",DarkMauve:"#8C4569",Lime:"#3B8E1D",Coral:"#D73C50"},s_={DarkOrangeDarker:"#BE5915",PeachDarker:"#C4523E",LightTealDarker:"#2C8465",TurquoiseDarker:"#008291",CamelDarker:"#996D39",LimeDarker:"#338711"},PK=[bo.DustyCoral,s_.LightTealDarker,s_.DarkOrangeDarker,bo.Purple,bo.DarkOliveGreen,bo.Blue,bo.Maroon,s_.CamelDarker,bo.MidnightBlue,bo.DarkCopper,s_.PeachDarker,bo.Mauve,s_.TurquoiseDarker,bo.OliveGreen,bo.Cherry,bo.Teal,bo.RustyOrange,bo.Denim,bo.TealishGreen,bo.Copper,bo.DarkMauve,s_.LimeDarker,bo.Coral],$ht=Object.freeze(Object.defineProperty({__proto__:null,OwidDistinctLinesPalette:PK},Symbol.toStringTag,{value:"Module"}));function Kp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Mht(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wx(e){let t,n,r;e.length!==2?(t=Kp,n=(a,u)=>Kp(e(a),u),r=(a,u)=>e(a)-u):(t=e===Kp||e===Mht?e:Lht,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function Lht(){return 0}function LSe(e){return e===null?NaN:+e}function*Fht(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const FSe=Wx(Kp),P0=FSe.right,jht=FSe.left;Wx(LSe).center;function Bht(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Uht(e,t){const n=Bht(e,t);return n&&Math.sqrt(n)}function k1(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Ga{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class b7 extends Map{constructor(t,n=USe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(_7(this,t))}has(t){return super.has(_7(this,t))}set(t,n){return super.set(jSe(this,t),n)}delete(t){return super.delete(BSe(this,t))}}class JO extends Set{constructor(t,n=USe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(_7(this,t))}add(t){return super.add(jSe(this,t))}delete(t){return super.delete(BSe(this,t))}}function _7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function jSe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function BSe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function USe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function zht(e){return e}function Vht(e,t,...n){return Hht(e,zht,t,n)}function Hht(e,t,n,r){return function i(s,o){if(o>=r.length)return n(s);const a=new b7,u=r[o++];let l=-1;for(const c of s){const f=u(c,++l,s),d=a.get(f);d?d.push(c):a.set(f,[c])}for(const[c,f]of a)a.set(c,i(f,o));return t(a)}(e,0)}function qht(e,t){return Array.from(t,n=>e[n])}function Wht(e=Kp){if(e===Kp)return zSe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function zSe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Ght=Math.sqrt(50),Yht=Math.sqrt(10),Kht=Math.sqrt(2);function ZO(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Ght?10:s>=Yht?5:s>=Kht?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?ZO(e,t,n*2):[a,u,l]}function w7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?ZO(t,e,n):ZO(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function E7(e,t,n){return t=+t,e=+e,n=+n,ZO(e,t,n)[2]}function D0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?E7(t,e,n):E7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function uh(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function pA(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function VSe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?zSe:Wht(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));VSe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(oT(e,n,t),i(e[r],s)>0&&oT(e,n,r);o<a;){for(oT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?oT(e,n,a):(++a,oT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function oT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Rw(e,t,n){if(e=Float64Array.from(Fht(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return pA(e);if(t>=1)return uh(e);var r,i=(r-1)*t,s=Math.floor(i),o=uh(VSe(e,s).subarray(0,s+1)),a=pA(e.subarray(s+1));return o+(a-o)*(i-s)}}function HSe(e,t,n=LSe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Xht(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function qSe(e,t){return Rw(e,.5,t)}function*Qht(e){for(const t of e)yield*t}function WSe(e){return Array.from(Qht(e))}function Sl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function DK(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Jht(e,...t){e=new JO(e),t=t.map(Zht);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Zht(e){return e instanceof JO?e:new JO(e)}function ept(...e){const t=new JO;for(const n of e)for(const r of n)t.add(r);return t}var tpt={value:()=>{}};function GSe(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new rD(n)}function rD(e){this._=e}function npt(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}rD.prototype=GSe.prototype={constructor:rD,on:function(e,t){var n=this._,r=npt(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=rpt(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Yue(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Yue(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new rD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function rpt(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Yue(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=tpt,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}function Gx(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function nk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ey(){}var R1=.7,wE=1/R1,Nw="\\s*([+-]?\\d+)\\s*",mA="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",lh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ipt=/^#([0-9a-f]{3,8})$/,spt=new RegExp(`^rgb\\(${Nw},${Nw},${Nw}\\)$`),opt=new RegExp(`^rgb\\(${lh},${lh},${lh}\\)$`),apt=new RegExp(`^rgba\\(${Nw},${Nw},${Nw},${mA}\\)$`),upt=new RegExp(`^rgba\\(${lh},${lh},${lh},${mA}\\)$`),lpt=new RegExp(`^hsl\\(${mA},${lh},${lh}\\)$`),cpt=new RegExp(`^hsla\\(${mA},${lh},${lh},${mA}\\)$`),Kue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gx(Ey,gA,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Xue,formatHex:Xue,formatHex8:fpt,formatHsl:dpt,formatRgb:Que,toString:Que});function Xue(){return this.rgb().formatHex()}function fpt(){return this.rgb().formatHex8()}function dpt(){return YSe(this).formatHsl()}function Que(){return this.rgb().formatRgb()}function gA(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ipt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Jue(t):n===3?new io(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?_N(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?_N(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=spt.exec(e))?new io(t[1],t[2],t[3],1):(t=opt.exec(e))?new io(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=apt.exec(e))?_N(t[1],t[2],t[3],t[4]):(t=upt.exec(e))?_N(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lpt.exec(e))?tle(t[1],t[2]/100,t[3]/100,1):(t=cpt.exec(e))?tle(t[1],t[2]/100,t[3]/100,t[4]):Kue.hasOwnProperty(e)?Jue(Kue[e]):e==="transparent"?new io(NaN,NaN,NaN,0):null}function Jue(e){return new io(e>>16&255,e>>8&255,e&255,1)}function _N(e,t,n,r){return r<=0&&(e=t=n=NaN),new io(e,t,n,r)}function OK(e){return e instanceof Ey||(e=gA(e)),e?(e=e.rgb(),new io(e.r,e.g,e.b,e.opacity)):new io}function O0(e,t,n,r){return arguments.length===1?OK(e):new io(e,t,n,r??1)}function io(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Gx(io,O0,nk(Ey,{brighter(e){return e=e==null?wE:Math.pow(wE,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?R1:Math.pow(R1,e),new io(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new io(o1(this.r),o1(this.g),o1(this.b),e3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zue,formatHex:Zue,formatHex8:hpt,formatRgb:ele,toString:ele}));function Zue(){return`#${qv(this.r)}${qv(this.g)}${qv(this.b)}`}function hpt(){return`#${qv(this.r)}${qv(this.g)}${qv(this.b)}${qv((isNaN(this.opacity)?1:this.opacity)*255)}`}function ele(){const e=e3(this.opacity);return`${e===1?"rgb(":"rgba("}${o1(this.r)}, ${o1(this.g)}, ${o1(this.b)}${e===1?")":`, ${e})`}`}function e3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function o1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function qv(e){return e=o1(e),(e<16?"0":"")+e.toString(16)}function tle(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Af(e,t,n,r)}function YSe(e){if(e instanceof Af)return new Af(e.h,e.s,e.l,e.opacity);if(e instanceof Ey||(e=gA(e)),!e)return new Af;if(e instanceof Af)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new Af(o,a,u,e.opacity)}function yA(e,t,n,r){return arguments.length===1?YSe(e):new Af(e,t,n,r??1)}function Af(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gx(Af,yA,nk(Ey,{brighter(e){return e=e==null?wE:Math.pow(wE,e),new Af(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?R1:Math.pow(R1,e),new Af(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new io(Y8(e>=240?e-240:e+120,i,r),Y8(e,i,r),Y8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Af(nle(this.h),wN(this.s),wN(this.l),e3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=e3(this.opacity);return`${e===1?"hsl(":"hsla("}${nle(this.h)}, ${wN(this.s)*100}%, ${wN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function nle(e){return e=(e||0)%360,e<0?e+360:e}function wN(e){return Math.max(0,Math.min(1,e||0))}function Y8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const KSe=Math.PI/180,XSe=180/Math.PI,t3=18,QSe=.96422,JSe=1,ZSe=.82521,eTe=4/29,Pw=6/29,tTe=3*Pw*Pw,ppt=Pw*Pw*Pw;function nTe(e){if(e instanceof ch)return new ch(e.l,e.a,e.b,e.opacity);if(e instanceof $p)return rTe(e);e instanceof io||(e=OK(e));var t=J8(e.r),n=J8(e.g),r=J8(e.b),i=K8((.2225045*t+.7168786*n+.0606169*r)/JSe),s,o;return t===n&&n===r?s=o=i:(s=K8((.4360747*t+.3850649*n+.1430804*r)/QSe),o=K8((.0139322*t+.0971045*n+.7141733*r)/ZSe)),new ch(116*i-16,500*(s-i),200*(i-o),e.opacity)}function n3(e,t,n,r){return arguments.length===1?nTe(e):new ch(e,t,n,r??1)}function ch(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Gx(ch,n3,nk(Ey,{brighter(e){return new ch(this.l+t3*(e??1),this.a,this.b,this.opacity)},darker(e){return new ch(this.l-t3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=QSe*X8(t),e=JSe*X8(e),n=ZSe*X8(n),new io(Q8(3.1338561*t-1.6168667*e-.4906146*n),Q8(-.9787684*t+1.9161415*e+.033454*n),Q8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function K8(e){return e>ppt?Math.pow(e,1/3):e/tTe+eTe}function X8(e){return e>Pw?e*e*e:tTe*(e-eTe)}function Q8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function J8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function mpt(e){if(e instanceof $p)return new $p(e.h,e.c,e.l,e.opacity);if(e instanceof ch||(e=nTe(e)),e.a===0&&e.b===0)return new $p(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*XSe;return new $p(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function r3(e,t,n,r){return arguments.length===1?mpt(e):new $p(e,t,n,r??1)}function $p(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function rTe(e){if(isNaN(e.h))return new ch(e.l,0,0,e.opacity);var t=e.h*KSe;return new ch(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Gx($p,r3,nk(Ey,{brighter(e){return new $p(this.h,this.c,this.l+t3*(e??1),this.opacity)},darker(e){return new $p(this.h,this.c,this.l-t3*(e??1),this.opacity)},rgb(){return rTe(this).rgb()}}));var iTe=-.14861,$K=1.78277,MK=-.29227,s6=-.90649,vA=1.97294,rle=vA*s6,ile=vA*$K,sle=$K*MK-s6*iTe;function gpt(e){if(e instanceof a1)return new a1(e.h,e.s,e.l,e.opacity);e instanceof io||(e=OK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(sle*r+rle*t-ile*n)/(sle+rle-ile),s=r-i,o=(vA*(n-i)-MK*s)/s6,a=Math.sqrt(o*o+s*s)/(vA*i*(1-i)),u=a?Math.atan2(o,s)*XSe-120:NaN;return new a1(u<0?u+360:u,a,i,e.opacity)}function x7(e,t,n,r){return arguments.length===1?gpt(e):new a1(e,t,n,r??1)}function a1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gx(a1,x7,nk(Ey,{brighter(e){return e=e==null?wE:Math.pow(wE,e),new a1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?R1:Math.pow(R1,e),new a1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*KSe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new io(255*(t+n*(iTe*r+$K*i)),255*(t+n*(MK*r+s6*i)),255*(t+n*(vA*r)),this.opacity)}}));function sTe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function oTe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return sTe((n-r/t)*t,o,i,s,a)}}function aTe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return sTe((n-r/t)*t,i,s,o,a)}}const o6=e=>()=>e;function uTe(e,t){return function(n){return e+n*t}}function ypt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function a6(e,t){var n=t-e;return n?uTe(e,n>180||n<-180?n-360*Math.round(n/360):n):o6(isNaN(e)?t:e)}function vpt(e){return(e=+e)==1?so:function(t,n){return n-t?ypt(t,n,e):o6(isNaN(t)?n:t)}}function so(e,t){var n=t-e;return n?uTe(e,n):o6(isNaN(e)?t:e)}const S7=function e(t){var n=vpt(t);function r(i,s){var o=n((i=O0(i)).r,(s=O0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=so(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function lTe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=O0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var bpt=lTe(oTe),_pt=lTe(aTe);function LK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function cTe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wpt(e,t){return(cTe(t)?LK:fTe)(e,t)}function fTe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=xy(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function dTe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function xf(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hTe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=xy(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var T7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Z8=new RegExp(T7.source,"g");function Ept(e){return function(){return e}}function xpt(e){return function(t){return e(t)+""}}function pTe(e,t){var n=T7.lastIndex=Z8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=T7.exec(e))&&(i=Z8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:xf(r,i)})),n=Z8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?xpt(u[0].x):Ept(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function xy(e,t){var n=typeof t,r;return t==null||n==="boolean"?o6(t):(n==="number"?xf:n==="string"?(r=gA(t))?(t=r,S7):pTe:t instanceof gA?S7:t instanceof Date?dTe:cTe(t)?LK:Array.isArray(t)?fTe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hTe:xf)(e,t)}function Spt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Tpt(e,t){var n=a6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function rk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ole=180/Math.PI,C7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function mTe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ole,skewX:Math.atan(u)*ole,scaleX:o,scaleY:a}}var EN;function Cpt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?C7:mTe(t.a,t.b,t.c,t.d,t.e,t.f)}function Apt(e){return e==null||(EN||(EN=document.createElementNS("http://www.w3.org/2000/svg","g")),EN.setAttribute("transform",e),!(e=EN.transform.baseVal.consolidate()))?C7:(e=e.matrix,mTe(e.a,e.b,e.c,e.d,e.e,e.f))}function gTe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:xf(l,f)},{i:m-2,x:xf(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:xf(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:xf(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:xf(l,f)},{i:m-2,x:xf(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var Ipt=gTe(Cpt,"px, ","px)","deg)"),kpt=gTe(Apt,", ",")",")"),Rpt=1e-12;function ale(e){return((e=Math.exp(e))+1/e)/2}function Npt(e){return((e=Math.exp(e))-1/e)/2}function Ppt(e){return((e=Math.exp(2*e))-1)/(e+1)}const Dpt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Rpt)y=Math.log(d/l)/t,g=function(T){return[a+T*h,u+T*p,l*Math.exp(t*T*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),S=Math.log(Math.sqrt(w*w+1)-w);y=(S-E)/t,g=function(T){var C=T*y,A=ale(E),N=l/(n*v)*(A*Ppt(t*C+E)-Npt(E));return[a+N*h,u+N*p,l*A/ale(t*C+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function yTe(e){return function(t,n){var r=e((t=yA(t)).h,(n=yA(n)).h),i=so(t.s,n.s),s=so(t.l,n.l),o=so(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Opt=yTe(a6);var $pt=yTe(so);function Mpt(e,t){var n=so((e=n3(e)).l,(t=n3(t)).l),r=so(e.a,t.a),i=so(e.b,t.b),s=so(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function vTe(e){return function(t,n){var r=e((t=r3(t)).h,(n=r3(n)).h),i=so(t.c,n.c),s=so(t.l,n.l),o=so(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Lpt=vTe(a6);var Fpt=vTe(so);function bTe(e){return function t(n){n=+n;function r(i,s){var o=e((i=x7(i)).h,(s=x7(s)).h),a=so(i.s,s.s),u=so(i.l,s.l),l=so(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const jpt=bTe(a6);var Bpt=bTe(so);function FK(e,t){t===void 0&&(t=e,e=xy);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Upt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const zpt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:xy,interpolateArray:wpt,interpolateBasis:oTe,interpolateBasisClosed:aTe,interpolateCubehelix:jpt,interpolateCubehelixLong:Bpt,interpolateDate:dTe,interpolateDiscrete:Spt,interpolateHcl:Lpt,interpolateHclLong:Fpt,interpolateHsl:Opt,interpolateHslLong:$pt,interpolateHue:Tpt,interpolateLab:Mpt,interpolateNumber:xf,interpolateNumberArray:LK,interpolateObject:hTe,interpolateRgb:S7,interpolateRgbBasis:bpt,interpolateRgbBasisClosed:_pt,interpolateRound:rk,interpolateString:pTe,interpolateTransformCss:Ipt,interpolateTransformSvg:kpt,interpolateZoom:Dpt,piecewise:FK,quantize:Upt},Symbol.toStringTag,{value:"Module"}));var EE=0,KT=0,aT=0,_Te=1e3,i3,XT,s3=0,N1=0,u6=0,bA=typeof performance=="object"&&performance.now?performance:Date,wTe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jK(){return N1||(wTe(Vpt),N1=bA.now()+u6)}function Vpt(){N1=0}function o3(){this._call=this._time=this._next=null}o3.prototype=ETe.prototype={constructor:o3,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?jK():+n)+(t==null?0:+t),!this._next&&XT!==this&&(XT?XT._next=this:i3=this,XT=this),this._call=e,this._time=n,A7()},stop:function(){this._call&&(this._call=null,this._time=1/0,A7())}};function ETe(e,t,n){var r=new o3;return r.restart(e,t,n),r}function Hpt(){jK(),++EE;for(var e=i3,t;e;)(t=N1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--EE}function ule(){N1=(s3=bA.now())+u6,EE=KT=0;try{Hpt()}finally{EE=0,Wpt(),N1=0}}function qpt(){var e=bA.now(),t=e-s3;t>_Te&&(u6-=t,s3=e)}function Wpt(){for(var e,t=i3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:i3=n);XT=e,A7(r)}function A7(e){if(!EE){KT&&(KT=clearTimeout(KT));var t=e-N1;t>24?(e<1/0&&(KT=setTimeout(ule,e-bA.now()-u6)),aT&&(aT=clearInterval(aT))):(aT||(s3=bA.now(),aT=setInterval(qpt,_Te)),EE=1,wTe(ule))}}function Gpt(e,t,n){var r=new o3,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?jK():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}const I7=Math.PI,k7=2*I7,pv=1e-6,Ypt=k7-pv;function xTe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Kpt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xTe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let BK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xTe:Kpt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>pv)if(!(Math.abs(f*u-l*c)>pv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((I7-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>pv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>pv||Math.abs(this._y1-c)>pv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%k7+k7),d>Ypt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>pv&&this._append`A${r},${r},0,${+(d>=I7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function l6(){return new BK}l6.prototype=BK.prototype;const Xp=11102230246251565e-32,Zo=134217729,Xpt=(3+8*Xp)*Xp;function ej(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Qpt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function ik(e){return new Float64Array(e)}const Jpt=(3+16*Xp)*Xp,Zpt=(2+12*Xp)*Xp,emt=(9+64*Xp)*Xp*Xp,o_=ik(4),lle=ik(8),cle=ik(12),fle=ik(16),Pa=ik(4);function tmt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,S,T,C;const A=e-i,N=n-i,k=t-s,O=r-s;w=A*O,d=Zo*A,h=d-(d-A),p=A-h,d=Zo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),S=k*N,d=Zo*k,h=d-(d-k),p=k-h,d=Zo*N,m=d-(d-N),g=N-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,o_[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,o_[1]=b-(y+f)+(f-S),C=v+y,f=C-v,o_[2]=v-(C-f)+(y-f),o_[3]=C;let P=Qpt(4,o_),$=Zpt*o;if(P>=$||-P>=$||(f=e-A,a=e-(A+f)+(f-i),f=n-N,l=n-(N+f)+(f-i),f=t-k,u=t-(k+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=emt*o+Xpt*Math.abs(P),P+=A*c+O*a-(k*l+N*u),P>=$||-P>=$))return P;w=a*O,d=Zo*a,h=d-(d-a),p=a-h,d=Zo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),S=u*N,d=Zo*u,h=d-(d-u),p=u-h,d=Zo*N,m=d-(d-N),g=N-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Pa[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Pa[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const L=ej(4,o_,4,Pa,lle);w=A*c,d=Zo*A,h=d-(d-A),p=A-h,d=Zo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=k*l,d=Zo*k,h=d-(d-k),p=k-h,d=Zo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Pa[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Pa[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const M=ej(L,lle,4,Pa,cle);w=a*c,d=Zo*a,h=d-(d-a),p=a-h,d=Zo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),S=u*l,d=Zo*u,h=d-(d-u),p=u-h,d=Zo*l,m=d-(d-l),g=l-m,T=p*g-(S-h*m-p*m-h*g),y=E-T,f=E-y,Pa[0]=E-(y+f)+(f-T),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-S,f=b-y,Pa[1]=b-(y+f)+(f-S),C=v+y,f=C-v,Pa[2]=v-(C-f)+(y-f),Pa[3]=C;const U=ej(M,cle,4,Pa,fle);return fle[U-1]}function xN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=Jpt*l?u:-tmt(e,t,n,r,i,s,l)}const dle=Math.pow(2,-52),SN=new Uint32Array(512);class a3{static from(t,n=omt,r=amt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new a3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let A=0;A<o;A++){const N=t[2*A],k=t[2*A+1];N<a&&(a=N),k<u&&(u=k),N>l&&(l=N),k>c&&(c=k),this._ids[A]=A}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let A=0,N=1/0;A<o;A++){const k=tj(f,d,t[2*A],t[2*A+1]);k<N&&(h=A,N=k)}const g=t[2*h],y=t[2*h+1];for(let A=0,N=1/0;A<o;A++){if(A===h)continue;const k=tj(g,y,t[2*A],t[2*A+1]);k<N&&k>0&&(p=A,N=k)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let A=0;A<o;A++){if(A===h||A===p)continue;const N=imt(g,y,v,b,t[2*A],t[2*A+1]);N<w&&(m=A,w=N)}let E=t[2*m],S=t[2*m+1];if(w===1/0){for(let k=0;k<o;k++)this._dists[k]=t[2*k]-t[0]||t[2*k+1]-t[1];rw(this._ids,this._dists,0,o-1);const A=new Uint32Array(o);let N=0;for(let k=0,O=-1/0;k<o;k++){const P=this._ids[k],$=this._dists[P];$>O&&(A[N++]=P,O=$)}this.hull=A.subarray(0,N),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(xN(g,y,v,b,E,S)<0){const A=p,N=v,k=b;p=m,v=E,b=S,m=A,E=N,S=k}const T=smt(g,y,v,b,E,S);this._cx=T.x,this._cy=T.y;for(let A=0;A<o;A++)this._dists[A]=tj(t[2*A],t[2*A+1],T.x,T.y);rw(this._ids,this._dists,0,o-1),this._hullStart=h;let C=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,S)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let A=0,N,k;A<this._ids.length;A++){const O=this._ids[A],P=t[2*O],$=t[2*O+1];if(A>0&&Math.abs(P-N)<=dle&&Math.abs($-k)<=dle||(N=P,k=$,O===h||O===p||O===m))continue;let L=0;for(let D=0,z=this._hashKey(P,$);D<this._hashSize&&(L=s[(z+D)%this._hashSize],!(L!==-1&&L!==r[L]));D++);L=n[L];let M=L,U;for(;U=r[M],xN(P,$,t[2*M],t[2*M+1],t[2*U],t[2*U+1])>=0;)if(M=U,M===L){M=-1;break}if(M===-1)continue;let B=this._addTriangle(M,O,r[M],-1,-1,i[M]);i[O]=this._legalize(B+2),i[M]=B,C++;let V=r[M];for(;U=r[V],xN(P,$,t[2*V],t[2*V+1],t[2*U],t[2*U+1])<0;)B=this._addTriangle(V,O,U,i[O],-1,i[V]),i[O]=this._legalize(B+2),r[V]=V,C--,V=U;if(M===L)for(;U=n[M],xN(P,$,t[2*U],t[2*U+1],t[2*M],t[2*M+1])<0;)B=this._addTriangle(U,O,M,-1,i[M],i[U]),this._legalize(B+2),i[U]=B,r[M]=M,C--,M=U;this._hullStart=n[O]=M,r[M]=n[V]=O,r[O]=V,s[this._hashKey(P,$)]=O,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(C);for(let A=0,N=this._hullStart;A<C;A++)this.hull[A]=N,N=r[N];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(nmt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=SN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(rmt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<SN.length&&(SN[s++]=v)}else{if(s===0)break;t=SN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function nmt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function tj(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function rmt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function imt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function smt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function rw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;uT(e,i,s),t[e[n]]>t[e[r]]&&uT(e,n,r),t[e[s]]>t[e[r]]&&uT(e,s,r),t[e[n]]>t[e[s]]&&uT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;uT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(rw(e,t,s,r),rw(e,t,n,o-1)):(rw(e,t,n,o-1),rw(e,t,s,r))}}function uT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function omt(e){return e[0]}function amt(e){return e[1]}const hle=1e-6;class Wv{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>hle||Math.abs(this._y1-s)>hle)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class R7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let umt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,S=r[m+2]*2,T=t[w],C=t[w+1],A=t[E],N=t[E+1],k=t[S],O=t[S+1],P=A-T,$=N-C,L=k-T,M=O-C,U=(P*M-$*L)*2;if(Math.abs(U)<1e-9){if(s===void 0){s=o=0;for(const V of n)s+=t[V*2],o+=t[V*2+1];s/=n.length,o/=n.length}const B=1e9*Math.sign((s-T)*M-(o-C)*L);v=(T+k)/2-B*M,b=(C+O)/2+B*L}else{const B=1/U,V=P*P+$*$,D=L*L+M*M;v=T+(M*V-$*D)*B,b=C+(P*D-L*V)*B}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new Wv:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Wv:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Wv:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new R7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const lmt=2*Math.PI,a_=Math.pow;function cmt(e){return e[0]}function fmt(e){return e[1]}function dmt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function hmt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class UK{static from(t,n=cmt,r=fmt,i){return new UK("length"in t?pmt(t,n,r,i):Float64Array.from(mmt(t,n,r,i)))}constructor(t){this._delaunator=new a3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&dmt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=hmt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new a3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new umt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=a_(n-l[t*2],2)+a_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=a_(n-l[p*2],2)+a_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&a_(n-l[h*2],2)+a_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new Wv:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Wv:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,lmt)}return r&&r.value()}renderHull(t){const n=t==null?t=new Wv:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new R7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Wv:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new R7;return this.renderTriangle(t,n),n.value()}}function pmt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*mmt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var ple={},nj={},rj=34,lT=10,ij=13;function STe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function gmt(e,t){var n=STe(e);return function(r,i){return t(n(r),i,e)}}function mle(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function yu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function ymt(e){return e<0?"-"+yu(-e,6):e>9999?"+"+yu(e,6):yu(e,4)}function vmt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":ymt(e.getUTCFullYear())+"-"+yu(e.getUTCMonth()+1,2)+"-"+yu(e.getUTCDate(),2)+(i?"T"+yu(t,2)+":"+yu(n,2)+":"+yu(r,2)+"."+yu(i,3)+"Z":r?"T"+yu(t,2)+":"+yu(n,2)+":"+yu(r,2)+"Z":n||t?"T"+yu(t,2)+":"+yu(n,2)+"Z":"")}function TTe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?gmt(g,d):STe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===lT&&--p,f.charCodeAt(p-1)===ij&&--p;function w(){if(v)return nj;if(b)return b=!1,ple;var S,T=m,C;if(f.charCodeAt(T)===rj){for(;m++<p&&f.charCodeAt(m)!==rj||f.charCodeAt(++m)===rj;);return(S=m)>=p?v=!0:(C=f.charCodeAt(m++))===lT?b=!0:C===ij&&(b=!0,f.charCodeAt(m)===lT&&++m),f.slice(T+1,S-1).replace(/""/g,'"')}for(;m<p;){if((C=f.charCodeAt(S=m++))===lT)b=!0;else if(C===ij)b=!0,f.charCodeAt(m)===lT&&++m;else if(C!==n)continue;return f.slice(T,S)}return v=!0,f.slice(T,p)}for(;(y=w())!==nj;){for(var E=[];y!==ple&&y!==nj;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=mle(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=mle(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?vmt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var bmt=TTe(","),_mt=bmt.parse;function wmt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Emt(e,t){return fetch(e,t).then(wmt)}function xmt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Emt(t,n).then(function(i){return e(i,r)})}}var Smt=xmt(_mt);function Tmt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Cmt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return CTe(this.cover(t,n),t,n,e)}function CTe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Amt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)CTe(this,o[n],a[n],e[n]);return this}function Imt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function kmt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Rmt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function za(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Nmt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new za(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new za(h[3],g,y,u,l),new za(h[2],o,y,g,l),new za(h[1],g,a,u,y),new za(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function Pmt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function Dmt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Omt(){return this._root}function $mt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Mmt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new za(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new za(i,l,c,a,u)),(i=r[2])&&t.push(new za(i,s,c,l,u)),(i=r[1])&&t.push(new za(i,l,o,a,c)),(i=r[0])&&t.push(new za(i,s,o,l,c))}return this}function Lmt(e){var t=[],n=[],r;for(this._root&&t.push(new za(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new za(s,o,a,c,f)),(s=i[1])&&t.push(new za(s,c,a,u,f)),(s=i[2])&&t.push(new za(s,o,f,c,l)),(s=i[3])&&t.push(new za(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Fmt(e){return e[0]}function jmt(e){return arguments.length?(this._x=e,this):this._x}function Bmt(e){return e[1]}function Umt(e){return arguments.length?(this._y=e,this):this._y}function zK(e,t,n){var r=new VK(t??Fmt,n??Bmt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function VK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function gle(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var ou=zK.prototype=VK.prototype;ou.copy=function(){var e=new VK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=gle(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=gle(r));return e};ou.add=Cmt;ou.addAll=Amt;ou.cover=Imt;ou.data=kmt;ou.extent=Rmt;ou.find=Nmt;ou.remove=Pmt;ou.removeAll=Dmt;ou.root=Omt;ou.size=$mt;ou.visit=Mmt;ou.visitAfter=Lmt;ou.x=jmt;ou.y=Umt;function Ha(e){return function(){return e}}function zg(e){return(e()-.5)*1e-6}function zmt(e){return e.x+e.vx}function Vmt(e){return e.y+e.vy}function Hmt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ha(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=zK(t,zmt,Vmt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,S,T){var C=b.data,A=b.r,N=m+A;if(C){if(C.index>d.index){var k=h-C.x-C.vx,O=p-C.y-C.vy,P=k*k+O*O;P<N*N&&(k===0&&(k=zg(r),P+=k*k),O===0&&(O=zg(r),P+=O*O),P=(N-(P=Math.sqrt(P)))/P*i,d.vx+=(k*=P)*(N=(A*=A)/(g+A)),d.vy+=(O*=P)*N,C.vx-=k*(N=1-N),C.vy-=O*N)}return}return w>h+N||S<h-N||E>p+N||T<p-N}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ha(+l),u(),o):e},o}function qmt(e){return e.index}function yle(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Wmt(e){var t=qmt,n=f,r,i=Ha(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,S,T,C,A,N;b<v;++b)w=e[b],E=w.source,S=w.target,T=S.x+S.vx-E.x-E.vx||zg(l),C=S.y+S.vy-E.y-E.vy||zg(l),A=Math.sqrt(T*T+C*C),A=(A-s[b])/A*g*r[b],T*=A,C*=A,S.vx-=T*(N=u[b]),S.vy-=C*N,E.vx+=T*(N=1-N),E.vy+=C*N}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,S)=>[t(E,S,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=yle(b,w.source)),typeof w.target!="object"&&(w.target=yle(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ha(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ha(+g),m(),d):i},d}const Gmt=1664525,Ymt=1013904223,vle=4294967296;function Kmt(){let e=1;return()=>(e=(Gmt*e+Ymt)%vle)/vle}function Xmt(e){return e.x}function Qmt(e){return e.y}var Jmt=10,Zmt=Math.PI*(3-Math.sqrt(5));function egt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=ETe(f),l=GSe("tick","end"),c=Kmt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Jmt*Math.sqrt(.5+m),b=m*Zmt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,S,T,C;for(y==null?y=1/0:y*=y,v=0;v<b;++v)T=e[v],w=m-T.x,E=g-T.y,S=w*w+E*E,S<y&&(C=T,y=S);return C},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function tgt(){var e,t,n,r,i=Ha(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=zK(e,Xmt,Qmt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=zg(n),w+=y*y),v===0&&(v=zg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=zg(n),w+=y*y),v===0&&(v=zg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ha(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function ngt(e){var t=Ha(.1),n,r,i;typeof e!="function"&&(e=Ha(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ha(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ha(+a),o(),s):e},s}function rgt(e){var t=Ha(.1),n,r,i;typeof e!="function"&&(e=Ha(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ha(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ha(+a),o(),s):e},s}function igt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function u3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xE(e){return e=u3(Math.abs(e)),e?e[1]:NaN}function sgt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function ogt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var agt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function P1(e){if(!(t=agt.exec(e)))throw new Error("invalid format: "+e);var t;return new HK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}P1.prototype=HK.prototype;function HK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}HK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ugt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var ATe;function lgt(e,t){var n=u3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(ATe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+u3(e,Math.max(0,t+s-1))[0]}function ble(e,t){var n=u3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _le={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:igt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ble(e*100,t),r:ble,s:lgt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function wle(e){return e}var Ele=Array.prototype.map,xle=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ITe(e){var t=e.grouping===void 0||e.thousands===void 0?wle:sgt(Ele.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?wle:ogt(Ele.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=P1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):_le[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var S=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",T=m==="$"?r:/[%p]/.test(E)?o:"",C=_le[E],A=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function N(k){var O=S,P=T,$,L,M;if(E==="c")P=C(k)+P,k="";else{k=+k;var U=k<0||1/k<0;if(k=isNaN(k)?u:C(Math.abs(k),b),w&&(k=ugt(k)),U&&+k==0&&p!=="+"&&(U=!1),O=(U?p==="("?p:a:p==="-"||p==="("?"":p)+O,P=(E==="s"?xle[8+ATe/3]:"")+P+(U&&p==="("?")":""),A){for($=-1,L=k.length;++$<L;)if(M=k.charCodeAt($),48>M||M>57){P=(M===46?i+k.slice($+1):k.slice($))+P,k=k.slice(0,$);break}}}v&&!g&&(k=t(k,1/0));var B=O.length+k.length+P.length,V=B<y?new Array(y-B+1).join(d):"";switch(v&&g&&(k=t(V+k,V.length?y-P.length:1/0),V=""),h){case"<":k=O+k+P+V;break;case"=":k=O+V+k+P;break;case"^":k=V.slice(0,B=V.length>>1)+O+k+P+V.slice(B);break;default:k=V+O+k+P;break}return s(k)}return N.toString=function(){return f+""},N}function c(f,d){var h=l((f=P1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(xE(d)/3)))*3,m=Math.pow(10,-p),g=xle[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var TN,fh,qK;cgt({thousands:",",grouping:[3],currency:["$",""]});function cgt(e){return TN=ITe(e),fh=TN.format,qK=TN.formatPrefix,TN}function kTe(e){return Math.max(0,-xE(Math.abs(e)))}function RTe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xE(t)/3)))*3-xE(Math.abs(e)))}function NTe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xE(t)-xE(e))+1}var Bt=1e-6,l3=1e-12,Rn=Math.PI,Gi=Rn/2,c3=Rn/4,Qa=Rn*2,is=180/Rn,An=Rn/180,Yn=Math.abs,Yx=Math.atan,$c=Math.atan2,zt=Math.cos,CN=Math.ceil,PTe=Math.exp,N7=Math.hypot,f3=Math.log,sj=Math.pow,Lt=Math.sin,_c=Math.sign||function(e){return e>0?1:e<0?-1:0},Ja=Math.sqrt,WK=Math.tan;function DTe(e){return e>1?0:e<-1?Rn:Math.acos(e)}function Gu(e){return e>1?Gi:e<-1?-Gi:Math.asin(e)}function No(){}function d3(e,t){e&&Tle.hasOwnProperty(e.type)&&Tle[e.type](e,t)}var Sle={Feature:function(e,t){d3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)d3(n[r].geometry,t)}},Tle={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){P7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)P7(n[r],t,0)},Polygon:function(e,t){Cle(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Cle(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)d3(n[r],t)}};function P7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function Cle(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)P7(e[n],t,1);t.polygonEnd()}function Ap(e,t){e&&Sle.hasOwnProperty(e.type)?Sle[e.type](e,t):d3(e,t)}var h3=new Ga,p3=new Ga,OTe,$Te,D7,O7,$7,xh={point:No,lineStart:No,lineEnd:No,polygonStart:function(){h3=new Ga,xh.lineStart=fgt,xh.lineEnd=dgt},polygonEnd:function(){var e=+h3;p3.add(e<0?Qa+e:e),this.lineStart=this.lineEnd=this.point=No},sphere:function(){p3.add(Qa)}};function fgt(){xh.point=hgt}function dgt(){MTe(OTe,$Te)}function hgt(e,t){xh.point=MTe,OTe=e,$Te=t,e*=An,t*=An,D7=e,O7=zt(t=t/2+c3),$7=Lt(t)}function MTe(e,t){e*=An,t*=An,t=t/2+c3;var n=e-D7,r=n>=0?1:-1,i=r*n,s=zt(t),o=Lt(t),a=$7*o,u=O7*s+a*zt(i),l=a*r*Lt(i);h3.add($c(l,u)),D7=e,O7=s,$7=o}function pgt(e){return p3=new Ga,Ap(e,xh),p3*2}function m3(e){return[$c(e[1],e[0]),Gu(e[2])]}function D1(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Lt(t),Lt(n)]}function AN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function SE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function oj(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function IN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function g3(e){var t=Ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ci,Tu,ji,ml,mv,LTe,FTe,Dw,h2,_g,mm,xp={point:M7,lineStart:Ale,lineEnd:Ile,polygonStart:function(){xp.point=BTe,xp.lineStart=mgt,xp.lineEnd=ggt,h2=new Ga,xh.polygonStart()},polygonEnd:function(){xh.polygonEnd(),xp.point=M7,xp.lineStart=Ale,xp.lineEnd=Ile,h3<0?(Ci=-(ji=180),Tu=-(ml=90)):h2>Bt?ml=90:h2<-Bt&&(Tu=-90),mm[0]=Ci,mm[1]=ji},sphere:function(){Ci=-(ji=180),Tu=-(ml=90)}};function M7(e,t){_g.push(mm=[Ci=e,ji=e]),t<Tu&&(Tu=t),t>ml&&(ml=t)}function jTe(e,t){var n=D1([e*An,t*An]);if(Dw){var r=SE(Dw,n),i=[r[1],-r[0],0],s=SE(i,r);g3(s),s=m3(s);var o=e-mv,a=o>0?1:-1,u=s[0]*is*a,l,c=Yn(o)>180;c^(a*mv<u&&u<a*e)?(l=s[1]*is,l>ml&&(ml=l)):(u=(u+360)%360-180,c^(a*mv<u&&u<a*e)?(l=-s[1]*is,l<Tu&&(Tu=l)):(t<Tu&&(Tu=t),t>ml&&(ml=t))),c?e<mv?hl(Ci,e)>hl(Ci,ji)&&(ji=e):hl(e,ji)>hl(Ci,ji)&&(Ci=e):ji>=Ci?(e<Ci&&(Ci=e),e>ji&&(ji=e)):e>mv?hl(Ci,e)>hl(Ci,ji)&&(ji=e):hl(e,ji)>hl(Ci,ji)&&(Ci=e)}else _g.push(mm=[Ci=e,ji=e]);t<Tu&&(Tu=t),t>ml&&(ml=t),Dw=n,mv=e}function Ale(){xp.point=jTe}function Ile(){mm[0]=Ci,mm[1]=ji,xp.point=M7,Dw=null}function BTe(e,t){if(Dw){var n=e-mv;h2.add(Yn(n)>180?n+(n>0?360:-360):n)}else LTe=e,FTe=t;xh.point(e,t),jTe(e,t)}function mgt(){xh.lineStart()}function ggt(){BTe(LTe,FTe),xh.lineEnd(),Yn(h2)>Bt&&(Ci=-(ji=180)),mm[0]=Ci,mm[1]=ji,Dw=null}function hl(e,t){return(t-=e)<0?t+360:t}function ygt(e,t){return e[0]-t[0]}function kle(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function vgt(e){var t,n,r,i,s,o,a;if(ml=ji=-(Ci=Tu=1/0),_g=[],Ap(e,xp),n=_g.length){for(_g.sort(ygt),t=1,r=_g[0],s=[r];t<n;++t)i=_g[t],kle(r,i[0])||kle(r,i[1])?(hl(r[0],i[1])>hl(r[0],r[1])&&(r[1]=i[1]),hl(i[0],r[1])>hl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=hl(r[1],i[0]))>o&&(o=a,Ci=i[0],ji=r[1])}return _g=mm=null,Ci===1/0||Tu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ci,Tu],[ji,ml]]}var QT,y3,v3,b3,_3,w3,E3,x3,L7,F7,j7,UTe,zTe,ja,Ba,Ua,Pf={sphere:No,point:GK,lineStart:Rle,lineEnd:Nle,polygonStart:function(){Pf.lineStart=wgt,Pf.lineEnd=Egt},polygonEnd:function(){Pf.lineStart=Rle,Pf.lineEnd=Nle}};function GK(e,t){e*=An,t*=An;var n=zt(t);sk(n*zt(e),n*Lt(e),Lt(t))}function sk(e,t,n){++QT,v3+=(e-v3)/QT,b3+=(t-b3)/QT,_3+=(n-_3)/QT}function Rle(){Pf.point=bgt}function bgt(e,t){e*=An,t*=An;var n=zt(t);ja=n*zt(e),Ba=n*Lt(e),Ua=Lt(t),Pf.point=_gt,sk(ja,Ba,Ua)}function _gt(e,t){e*=An,t*=An;var n=zt(t),r=n*zt(e),i=n*Lt(e),s=Lt(t),o=$c(Ja((o=Ba*s-Ua*i)*o+(o=Ua*r-ja*s)*o+(o=ja*i-Ba*r)*o),ja*r+Ba*i+Ua*s);y3+=o,w3+=o*(ja+(ja=r)),E3+=o*(Ba+(Ba=i)),x3+=o*(Ua+(Ua=s)),sk(ja,Ba,Ua)}function Nle(){Pf.point=GK}function wgt(){Pf.point=xgt}function Egt(){VTe(UTe,zTe),Pf.point=GK}function xgt(e,t){UTe=e,zTe=t,e*=An,t*=An,Pf.point=VTe;var n=zt(t);ja=n*zt(e),Ba=n*Lt(e),Ua=Lt(t),sk(ja,Ba,Ua)}function VTe(e,t){e*=An,t*=An;var n=zt(t),r=n*zt(e),i=n*Lt(e),s=Lt(t),o=Ba*s-Ua*i,a=Ua*r-ja*s,u=ja*i-Ba*r,l=N7(o,a,u),c=Gu(l),f=l&&-c/l;L7.add(f*o),F7.add(f*a),j7.add(f*u),y3+=c,w3+=c*(ja+(ja=r)),E3+=c*(Ba+(Ba=i)),x3+=c*(Ua+(Ua=s)),sk(ja,Ba,Ua)}function Sgt(e){QT=y3=v3=b3=_3=w3=E3=x3=0,L7=new Ga,F7=new Ga,j7=new Ga,Ap(e,Pf);var t=+L7,n=+F7,r=+j7,i=N7(t,n,r);return i<l3&&(t=w3,n=E3,r=x3,y3<Bt&&(t=v3,n=b3,r=_3),i=N7(t,n,r),i<l3)?[NaN,NaN]:[$c(n,t)*is,Gu(r/i)*is]}function B7(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function U7(e,t){return Yn(e)>Rn&&(e-=Math.round(e/Qa)*Qa),[e,t]}U7.invert=U7;function HTe(e,t,n){return(e%=Qa)?t||n?B7(Dle(e),Ole(t,n)):Dle(e):t||n?Ole(t,n):U7}function Ple(e){return function(t,n){return t+=e,Yn(t)>Rn&&(t-=Math.round(t/Qa)*Qa),[t,n]}}function Dle(e){var t=Ple(e);return t.invert=Ple(-e),t}function Ole(e,t){var n=zt(e),r=Lt(e),i=zt(t),s=Lt(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Lt(a)*l,d=Lt(u),h=d*n+c*r;return[$c(f*i-h*s,c*n-d*r),Gu(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Lt(a)*l,d=Lt(u),h=d*i-f*s;return[$c(f*i+d*s,c*n+h*r),Gu(h*n-c*r)]},o}function Tgt(e){e=HTe(e[0]*An,e[1]*An,e.length>2?e[2]*An:0);function t(n){return n=e(n[0]*An,n[1]*An),n[0]*=is,n[1]*=is,n}return t.invert=function(n){return n=e.invert(n[0]*An,n[1]*An),n[0]*=is,n[1]*=is,n},t}function Cgt(e,t,n,r,i,s){if(n){var o=zt(t),a=Lt(t),u=r*n;i==null?(i=t+r*Qa,s=t-u/2):(i=$le(o,i),s=$le(o,s),(r>0?i<s:i>s)&&(i+=r*Qa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=m3([o,-a*zt(c),-a*Lt(c)]),e.point(l[0],l[1])}}function $le(e,t){t=D1(t),t[0]-=e,g3(t);var n=DTe(-t[1]);return((-t[2]<0?-n:n)+Qa-Bt)%Qa}function qTe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:No,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function iD(e,t){return Yn(e[0]-t[0])<Bt&&Yn(e[1]-t[1])<Bt}function kN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function WTe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(iD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Bt}s.push(v=new kN(g,p,null,!0)),o.push(v.o=new kN(g,null,v,!1)),s.push(v=new kN(y,p,null,!1)),o.push(v.o=new kN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Mle(s),Mle(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Mle(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function aj(e){return Yn(e[0])<=Rn?e[0]:_c(e[0])*((Yn(e[0])+Rn)%Qa-Rn)}function Agt(e,t){var n=aj(t),r=t[1],i=Lt(r),s=[Lt(n),-zt(n),0],o=0,a=0,u=new Ga;i===1?r=Gi+Bt:i===-1&&(r=-Gi-Bt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=aj(h),m=h[1]/2+c3,g=Lt(m),y=zt(m),v=0;v<d;++v,p=w,g=S,y=T,h=b){var b=f[v],w=aj(b),E=b[1]/2+c3,S=Lt(E),T=zt(E),C=w-p,A=C>=0?1:-1,N=A*C,k=N>Rn,O=g*S;if(u.add($c(O*A*Lt(N),y*T+O*zt(N))),o+=k?C+A*Qa:C,k^p>=n^w>=n){var P=SE(D1(h),D1(b));g3(P);var $=SE(s,P);g3($);var L=(k^C>=0?-1:1)*Gu($[2]);(r>L||r===L&&(P[0]||P[1]))&&(a+=k^C>=0?1:-1)}}return(o<-Bt||o<Bt&&u<-l3)^a&1}function GTe(e,t,n,r){return function(i){var s=t(i),o=qTe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=WSe(c);var w=Agt(l,r);c.length?(u||(i.polygonStart(),u=!0),WTe(c,kgt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),S,T=E.length,C,A,N;if(f.pop(),l.push(f),f=null,!!T){if(w&1){if(A=E[0],(C=A.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),S=0;S<C;++S)i.point((N=A[S])[0],N[1]);i.lineEnd()}return}T>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Igt))}}return d}}function Igt(e){return e.length>1}function kgt(e,t){return((e=e.x)[0]<0?e[1]-Gi-Bt:Gi-e[1])-((t=t.x)[0]<0?t[1]-Gi-Bt:Gi-t[1])}const Lle=GTe(function(){return!0},Rgt,Pgt,[-Rn,-Gi]);function Rgt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Rn:-Rn,u=Yn(s-t);Yn(u-Rn)<Bt?(e.point(t,n=(n+o)/2>0?Gi:-Gi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Rn&&(Yn(t-r)<Bt&&(t-=r*Bt),Yn(s-a)<Bt&&(s-=a*Bt),n=Ngt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Ngt(e,t,n,r){var i,s,o=Lt(e-n);return Yn(o)>Bt?Yx((Lt(t)*(s=zt(r))*Lt(n)-Lt(r)*(i=zt(t))*Lt(e))/(i*s*o)):(t+r)/2}function Pgt(e,t,n,r){var i;if(e==null)i=n*Gi,r.point(-Rn,i),r.point(0,i),r.point(Rn,i),r.point(Rn,0),r.point(Rn,-i),r.point(0,-i),r.point(-Rn,-i),r.point(-Rn,0),r.point(-Rn,i);else if(Yn(e[0]-t[0])>Bt){var s=e[0]<t[0]?Rn:-Rn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function Dgt(e){var t=zt(e),n=2*An,r=t>0,i=Yn(t)>Bt;function s(c,f,d,h){Cgt(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Rn:-Rn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||iD(f,b)||iD(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var S;!(E&d)&&(S=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(S[0][0],S[0][1]),c.point(S[1][0],S[1][1]),c.lineEnd()):(c.point(S[1][0],S[1][1]),c.lineEnd(),c.lineStart(),c.point(S[0][0],S[0][1],3)))}w&&(!f||!iD(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=D1(c),p=D1(f),m=[1,0,0],g=SE(h,p),y=AN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,S=SE(m,g),T=IN(m,w),C=IN(g,E);oj(T,C);var A=S,N=AN(T,A),k=AN(A,A),O=N*N-k*(AN(T,T)-1);if(!(O<0)){var P=Ja(O),$=IN(A,(-N-P)/k);if(oj($,T),$=m3($),!d)return $;var L=c[0],M=f[0],U=c[1],B=f[1],V;M<L&&(V=L,L=M,M=V);var D=M-L,z=Yn(D-Rn)<Bt,W=z||D<Bt;if(!z&&B<U&&(V=U,U=B,B=V),W?z?U+B>0^$[1]<(Yn($[0]-L)<Bt?U:B):U<=$[1]&&$[1]<=B:D>Rn^(L<=$[0]&&$[0]<=M)){var j=IN(A,(-N+P)/k);return oj(j,T),[$,m3(j)]}}}function l(c,f){var d=r?e:Rn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return GTe(o,a,s,r?[0,-e]:[-Rn,e-Rn])}function Ogt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var JT=1e9,RN=-JT;function YTe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Yn(l[0]-e)<Bt?c>0?0:3:Yn(l[0]-n)<Bt?c>0?2:1:Yn(l[1]-t)<Bt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=qTe(),d,h,p,m,g,y,v,b,w,E,S,T={point:C,lineStart:O,lineEnd:P,polygonStart:N,polygonEnd:k};function C(L,M){i(L,M)&&c.point(L,M)}function A(){for(var L=0,M=0,U=h.length;M<U;++M)for(var B=h[M],V=1,D=B.length,z=B[0],W,j,q=z[0],G=z[1];V<D;++V)W=q,j=G,z=B[V],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++L:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--L;return L}function N(){c=f,d=[],h=[],S=!0}function k(){var L=A(),M=S&&L,U=(d=WSe(d)).length;(M||U)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),U&&WTe(d,a,L,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){T.point=$,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function P(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),T.point=C,w&&c.lineEnd()}function $(L,M){var U=i(L,M);if(h&&p.push([L,M]),E)m=L,g=M,y=U,E=!1,U&&(c.lineStart(),c.point(L,M));else if(U&&w)c.point(L,M);else{var B=[v=Math.max(RN,Math.min(JT,v)),b=Math.max(RN,Math.min(JT,b))],V=[L=Math.max(RN,Math.min(JT,L)),M=Math.max(RN,Math.min(JT,M))];Ogt(B,V,e,t,n,r)?(w||(c.lineStart(),c.point(B[0],B[1])),c.point(V[0],V[1]),U||c.lineEnd(),S=!1):U&&(c.lineStart(),c.point(L,M),S=!1)}v=L,b=M,w=U}return T}}function Fle(e,t,n){var r=Sl(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function jle(e,t,n){var r=Sl(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function $gt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Sl(CN(r/c)*c,n,c).map(p).concat(Sl(CN(a/f)*f,o,f).map(m)).concat(Sl(CN(t/u)*u,e,u).filter(function(b){return Yn(b%c)>Bt}).map(d)).concat(Sl(CN(s/l)*l,i,l).filter(function(b){return Yn(b%f)>Bt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Fle(s,i,90),h=jle(t,e,g),p=Fle(a,o,90),m=jle(r,n,g),y):g},y.extentMajor([[-180,-90+Bt],[180,90-Bt]]).extentMinor([[-180,-80-Bt],[180,80+Bt]])}const _A=e=>e;var uj=new Ga,z7=new Ga,KTe,XTe,V7,H7,Ip={point:No,lineStart:No,lineEnd:No,polygonStart:function(){Ip.lineStart=Mgt,Ip.lineEnd=Fgt},polygonEnd:function(){Ip.lineStart=Ip.lineEnd=Ip.point=No,uj.add(Yn(z7)),z7=new Ga},result:function(){var e=uj/2;return uj=new Ga,e}};function Mgt(){Ip.point=Lgt}function Lgt(e,t){Ip.point=QTe,KTe=V7=e,XTe=H7=t}function QTe(e,t){z7.add(H7*e-V7*t),V7=e,H7=t}function Fgt(){QTe(KTe,XTe)}var TE=1/0,S3=TE,wA=-TE,T3=wA,C3={point:jgt,lineStart:No,lineEnd:No,polygonStart:No,polygonEnd:No,result:function(){var e=[[TE,S3],[wA,T3]];return wA=T3=-(S3=TE=1/0),e}};function jgt(e,t){e<TE&&(TE=e),e>wA&&(wA=e),t<S3&&(S3=t),t>T3&&(T3=t)}var q7=0,W7=0,ZT=0,A3=0,I3=0,iw=0,G7=0,Y7=0,eC=0,JTe,ZTe,Hd,qd,mc={point:O1,lineStart:Ble,lineEnd:Ule,polygonStart:function(){mc.lineStart=zgt,mc.lineEnd=Vgt},polygonEnd:function(){mc.point=O1,mc.lineStart=Ble,mc.lineEnd=Ule},result:function(){var e=eC?[G7/eC,Y7/eC]:iw?[A3/iw,I3/iw]:ZT?[q7/ZT,W7/ZT]:[NaN,NaN];return q7=W7=ZT=A3=I3=iw=G7=Y7=eC=0,e}};function O1(e,t){q7+=e,W7+=t,++ZT}function Ble(){mc.point=Bgt}function Bgt(e,t){mc.point=Ugt,O1(Hd=e,qd=t)}function Ugt(e,t){var n=e-Hd,r=t-qd,i=Ja(n*n+r*r);A3+=i*(Hd+e)/2,I3+=i*(qd+t)/2,iw+=i,O1(Hd=e,qd=t)}function Ule(){mc.point=O1}function zgt(){mc.point=Hgt}function Vgt(){eCe(JTe,ZTe)}function Hgt(e,t){mc.point=eCe,O1(JTe=Hd=e,ZTe=qd=t)}function eCe(e,t){var n=e-Hd,r=t-qd,i=Ja(n*n+r*r);A3+=i*(Hd+e)/2,I3+=i*(qd+t)/2,iw+=i,i=qd*e-Hd*t,G7+=i*(Hd+e),Y7+=i*(qd+t),eC+=i*3,O1(Hd=e,qd=t)}function tCe(e){this._context=e}tCe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Qa);break}}},result:No};var K7=new Ga,lj,nCe,rCe,tC,nC,EA={point:No,lineStart:function(){EA.point=qgt},lineEnd:function(){lj&&iCe(nCe,rCe),EA.point=No},polygonStart:function(){lj=!0},polygonEnd:function(){lj=null},result:function(){var e=+K7;return K7=new Ga,e}};function qgt(e,t){EA.point=iCe,nCe=tC=e,rCe=nC=t}function iCe(e,t){tC-=e,nC-=t,K7.add(Ja(tC*tC+nC*nC)),tC=e,nC=t}let zle,k3,Vle,Hle;class qle{constructor(t){this._append=t==null?sCe:Wgt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Vle||this._append!==k3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Vle=r,k3=this._append,Hle=this._,this._=i}this._+=Hle;break}}}result(){const t=this._;return this._="",t.length?t:null}}function sCe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Wgt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return sCe;if(t!==zle){const n=10**t;zle=t,k3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return k3}function oCe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Ap(a,i(s))),s.result()}return o.area=function(a){return Ap(a,i(Ip)),Ip.result()},o.measure=function(a){return Ap(a,i(EA)),EA.result()},o.bounds=function(a){return Ap(a,i(C3)),C3.result()},o.centroid=function(a){return Ap(a,i(mc)),mc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,_A):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new qle(n)):new tCe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new qle(n)),o},o.projection(e).digits(n).context(t)}function c6(e){return function(t){var n=new X7;for(var r in e)n[r]=e[r];return n.stream=t,n}}function X7(){}X7.prototype={constructor:X7,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function YK(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Ap(n,e.stream(C3)),t(C3.result()),r!=null&&e.clipExtent(r),e}function f6(e,t,n){return YK(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function KK(e,t,n){return f6(e,[[0,0],t],n)}function XK(e,t,n){return YK(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function QK(e,t,n){return YK(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Wle=16,Ggt=zt(30*An);function Gle(e,t){return+t?Kgt(e,t):Ygt(e)}function Ygt(e){return c6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Kgt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,S=u+p,T=Ja(w*w+E*E+S*S),C=Gu(S/=T),A=Yn(Yn(S)-1)<Bt||Yn(s-f)<Bt?(s+f)/2:$c(E,w),N=e(A,C),k=N[0],O=N[1],P=k-r,$=O-i,L=v*P-y*$;(L*L/b>t||Yn((y*P+v*$)/b-.5)>.3||o*d+a*h+u*p<Ggt)&&(n(r,i,s,o,a,u,k,O,A,w/=T,E/=T,S,m,g),g.point(k,O),n(k,O,A,w,E,S,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(C,A){C=e(C,A),r.point(C[0],C[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(C,A){var N=D1([C,A]),k=e(C,A);n(f,d,c,h,p,m,f=k[0],d=k[1],c=C,h=N[0],p=N[1],m=N[2],Wle,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=S,g.lineEnd=T}function S(C,A){b(i=C,A),s=f,o=d,a=h,u=p,l=m,g.point=b}function T(){n(f,d,c,h,p,m,s,o,i,a,u,l,Wle,r),g.lineEnd=w,w()}return g}}var Xgt=c6({point:function(e,t){this.stream.point(e*An,t*An)}});function Qgt(e){return c6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Jgt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Yle(e,t,n,r,i,s){if(!s)return Jgt(e,t,n,r,i);var o=zt(s),a=Lt(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Hh(e){return aCe(function(){return e})()}function aCe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Lle,g=null,y,v,b,w=_A,E=.5,S,T,C,A,N;function k(L){return C(L[0]*An,L[1]*An)}function O(L){return L=C.invert(L[0],L[1]),L&&[L[0]*is,L[1]*is]}k.stream=function(L){return A&&N===L?A:A=Xgt(Qgt(c)(m(S(w(N=L)))))},k.preclip=function(L){return arguments.length?(m=L,p=void 0,$()):m},k.postclip=function(L){return arguments.length?(w=L,g=y=v=b=null,$()):w},k.clipAngle=function(L){return arguments.length?(m=+L?Dgt(p=L*An):(p=null,Lle),$()):p*is},k.clipExtent=function(L){return arguments.length?(w=L==null?(g=y=v=b=null,_A):YTe(g=+L[0][0],y=+L[0][1],v=+L[1][0],b=+L[1][1]),$()):g==null?null:[[g,y],[v,b]]},k.scale=function(L){return arguments.length?(n=+L,P()):n},k.translate=function(L){return arguments.length?(r=+L[0],i=+L[1],P()):[r,i]},k.center=function(L){return arguments.length?(s=L[0]%360*An,o=L[1]%360*An,P()):[s*is,o*is]},k.rotate=function(L){return arguments.length?(a=L[0]%360*An,u=L[1]%360*An,l=L.length>2?L[2]%360*An:0,P()):[a*is,u*is,l*is]},k.angle=function(L){return arguments.length?(f=L%360*An,P()):f*is},k.reflectX=function(L){return arguments.length?(d=L?-1:1,P()):d<0},k.reflectY=function(L){return arguments.length?(h=L?-1:1,P()):h<0},k.precision=function(L){return arguments.length?(S=Gle(T,E=L*L),$()):Ja(E)},k.fitExtent=function(L,M){return f6(k,L,M)},k.fitSize=function(L,M){return KK(k,L,M)},k.fitWidth=function(L,M){return XK(k,L,M)},k.fitHeight=function(L,M){return QK(k,L,M)};function P(){var L=Yle(n,0,0,d,h,f).apply(null,t(s,o)),M=Yle(n,r-L[0],i-L[1],d,h,f);return c=HTe(a,u,l),T=B7(t,M),C=B7(c,T),S=Gle(T,E),$()}function $(){return A=N=null,k}return function(){return t=e.apply(this,arguments),k.invert=t.invert&&O,P()}}function JK(e){var t=0,n=Rn/3,r=aCe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*An,n=s[1]*An):[t*is,n*is]},i}function Zgt(e){var t=zt(e);function n(r,i){return[r*t,Lt(i)/t]}return n.invert=function(r,i){return[r/t,Gu(i*t)]},n}function e0t(e,t){var n=Lt(e),r=(n+Lt(t))/2;if(Yn(r)<Bt)return Zgt(e);var i=1+n*(2*r-n),s=Ja(i)/r;function o(a,u){var l=Ja(i-2*r*Lt(u))/r;return[l*Lt(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=$c(a,Yn(l))*_c(l);return l*r<0&&(c-=Rn*_c(a)*_c(l)),[c/r,Gu((i-(a*a+l*l)*r*r)/(2*r))]},o}function R3(){return JK(e0t).scale(155.424).center([0,33.6442])}function uCe(){return R3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function t0t(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function n0t(){var e,t,n=uCe(),r,i=R3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=R3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=t0t([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Bt,m+.12*h+Bt],[p-.214*h-Bt,m+.234*h-Bt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Bt,m+.166*h+Bt],[p-.115*h-Bt,m+.234*h-Bt]]).stream(l),f()},c.fitExtent=function(d,h){return f6(c,d,h)},c.fitSize=function(d,h){return KK(c,d,h)},c.fitWidth=function(d,h){return XK(c,d,h)},c.fitHeight=function(d,h){return QK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function lCe(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Lt(t),s*Lt(n)]}}function ok(e){return function(t,n){var r=Ja(t*t+n*n),i=e(r),s=Lt(i),o=zt(i);return[$c(t*s,r*o),Gu(r&&n*s/r)]}}var cCe=lCe(function(e){return Ja(2/(1+e))});cCe.invert=ok(function(e){return 2*Gu(e/2)});function r0t(){return Hh(cCe).scale(124.75).clipAngle(180-.001)}var fCe=lCe(function(e){return(e=DTe(e))&&e/Lt(e)});fCe.invert=ok(function(e){return e});function i0t(){return Hh(fCe).scale(79.4188).clipAngle(180-.001)}function d6(e,t){return[e,f3(WK((Gi+t)/2))]}d6.invert=function(e,t){return[e,2*Yx(PTe(t))-Gi]};function s0t(){return dCe(d6).scale(961/Qa)}function dCe(e){var t=Hh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Rn*r(),d=t(Tgt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===d6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function NN(e){return WK((Gi+e)/2)}function o0t(e,t){var n=zt(e),r=e===t?Lt(e):f3(n/zt(t))/f3(NN(t)/NN(e)),i=n*sj(NN(e),r)/r;if(!r)return d6;function s(o,a){i>0?a<-Gi+Bt&&(a=-Gi+Bt):a>Gi-Bt&&(a=Gi-Bt);var u=i/sj(NN(a),r);return[u*Lt(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=_c(r)*Ja(o*o+u*u),c=$c(o,Yn(u))*_c(u);return u*r<0&&(c-=Rn*_c(o)*_c(u)),[c/r,2*Yx(sj(i/l,1/r))-Gi]},s}function a0t(){return JK(o0t).scale(109.5).parallels([30,30])}function N3(e,t){return[e,t]}N3.invert=N3;function u0t(){return Hh(N3).scale(152.63)}function l0t(e,t){var n=zt(e),r=e===t?Lt(e):(n-zt(t))/(t-e),i=n/r+e;if(Yn(r)<Bt)return N3;function s(o,a){var u=i-a,l=r*o;return[u*Lt(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=$c(o,Yn(u))*_c(u);return u*r<0&&(l-=Rn*_c(o)*_c(u)),[l/r,i-_c(r)*Ja(o*o+u*u)]},s}function c0t(){return JK(l0t).scale(131.154).center([0,13.9389])}var p2=1.340264,m2=-.081106,g2=893e-6,y2=.003796,P3=Ja(3)/2,f0t=12;function hCe(e,t){var n=Gu(P3*Lt(t)),r=n*n,i=r*r*r;return[e*zt(n)/(P3*(p2+3*m2*r+i*(7*g2+9*y2*r))),n*(p2+m2*r+i*(g2+y2*r))]}hCe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<f0t&&(a=n*(p2+m2*r+i*(g2+y2*r))-t,u=p2+3*m2*r+i*(7*g2+9*y2*r),n-=o=a/u,r=n*n,i=r*r*r,!(Yn(o)<l3));++s);return[P3*e*(p2+3*m2*r+i*(7*g2+9*y2*r))/zt(n),Gu(Lt(n)/P3)]};function d0t(){return Hh(hCe).scale(177.158)}function pCe(e,t){var n=zt(t),r=zt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}pCe.invert=ok(Yx);function h0t(){return Hh(pCe).scale(144.049).clipAngle(60)}function p0t(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=c6({point:function(w,E){var S=b([w,E]);this.stream.point(S[0],S[1])}}),m=_A,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,S=w[1]*h;if(s){var T=S*o-E*a;E=E*o+S*a,S=T}return[E+t,S+n]}return b.invert=function(w){var E=w[0]-t,S=w[1]-n;if(s){var T=S*o+E*a;E=E*o-S*a,S=T}return[E/d,S/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,_A):YTe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*An,a=Lt(s),o=zt(s),v()):s*is},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return f6(b,w,E)},b.fitSize=function(w,E){return KK(b,w,E)},b.fitWidth=function(w,E){return XK(b,w,E)},b.fitHeight=function(w,E){return QK(b,w,E)},b}function mCe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}mCe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Yn(i)>Bt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function m0t(){return Hh(mCe).scale(175.295)}function gCe(e,t){return[zt(t)*Lt(e),Lt(t)]}gCe.invert=ok(Gu);function g0t(){return Hh(gCe).scale(249.5).clipAngle(90+Bt)}function yCe(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Lt(e)/r,Lt(t)/r]}yCe.invert=ok(function(e){return 2*Yx(e)});function y0t(){return Hh(yCe).scale(250).clipAngle(142)}function vCe(e,t){return[f3(WK((Gi+t)/2)),-e]}vCe.invert=function(e,t){return[-t,2*Yx(PTe(e))-Gi]};function v0t(){var e=dCe(vCe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function b0t(e,t){return e.parent===t.parent?1:2}function _0t(e){return e.reduce(w0t,0)/e.length}function w0t(e,t){return e+t.x}function E0t(e){return 1+e.reduce(x0t,0)}function x0t(e,t){return Math.max(e,t.y)}function S0t(e){for(var t;t=e.children;)e=t[0];return e}function T0t(e){for(var t;t=e.children;)e=t[t.length-1];return e}function C0t(){var e=b0t,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=_0t(h),d.y=E0t(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=S0t(s),l=T0t(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function A0t(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function I0t(){return this.eachAfter(A0t)}function k0t(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function R0t(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function N0t(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function P0t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function D0t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function O0t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function $0t(e){for(var t=this,n=M0t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function M0t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function L0t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function F0t(){return Array.from(this)}function j0t(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function B0t(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*U0t(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function ZK(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=H0t)):t===void 0&&(t=V0t);for(var n=new CE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new CE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(bCe)}function z0t(){return ZK(this).eachBefore(q0t)}function V0t(e){return e.children}function H0t(e){return Array.isArray(e)?e[1]:null}function q0t(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function bCe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function CE(e){this.data=e,this.depth=this.height=0,this.parent=null}CE.prototype=ZK.prototype={constructor:CE,count:I0t,each:k0t,eachAfter:N0t,eachBefore:R0t,find:P0t,sum:D0t,sort:O0t,path:$0t,ancestors:L0t,descendants:F0t,leaves:j0t,links:B0t,copy:z0t,[Symbol.iterator]:U0t};function sD(e){return e==null?null:_Ce(e)}function _Ce(e){if(typeof e!="function")throw new Error;return e}function Nv(){return 0}function A_(e){return function(){return e}}const W0t=1664525,G0t=1013904223,Kle=4294967296;function Y0t(){let e=1;return()=>(e=(W0t*e+G0t)%Kle)/Kle}function K0t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function X0t(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Q0t(e,t){for(var n=0,r=(e=X0t(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&wCe(o,s)?++n:(o=Z0t(i=J0t(i,s)),n=0);return o}function J0t(e,t){var n,r;if(cj(t,e))return[t];for(n=0;n<e.length;++n)if(PN(t,e[n])&&cj(rC(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(PN(rC(e[n],e[r]),t)&&PN(rC(e[n],t),e[r])&&PN(rC(e[r],t),e[n])&&cj(ECe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function PN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function wCe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function cj(e,t){for(var n=0;n<t.length;++n)if(!wCe(e,t[n]))return!1;return!0}function Z0t(e){switch(e.length){case 1:return eyt(e[0]);case 2:return rC(e[0],e[1]);case 3:return ECe(e[0],e[1],e[2])}}function eyt(e){return{x:e.x,y:e.y,r:e.r}}function rC(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function ECe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,S=(p*w-m*b)/(E*2)-r,T=(m*g-p*y)/E,C=(h*b-d*w)/(E*2)-i,A=(d*y-h*g)/E,N=T*T+A*A-1,k=2*(s+S*T+C*A),O=S*S+C*C-s*s,P=-(Math.abs(N)>1e-6?(k+Math.sqrt(k*k-4*N*O))/(2*N):O/k);return{x:r+S+T*P,y:i+C+A*P,r:P}}function Xle(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Qle(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function Jle(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function DN(e){this._=e,this.next=null,this.previous=null}function tyt(e,t){if(!(s=(e=K0t(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Xle(r,n,i=e[2]),n=new DN(n),r=new DN(r),i=new DN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Xle(n._,r._,i=e[u]),i=new DN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Qle(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Qle(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=Jle(n);(i=i.next)!==r;)(a=Jle(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Q0t(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function nyt(e){return Math.sqrt(e.value)}function ryt(){var e=null,t=1,n=1,r=Nv;function i(s){const o=Y0t();return s.x=t/2,s.y=n/2,e?s.eachBefore(Zle(e)).eachAfter(fj(r,.5,o)).eachBefore(ece(1)):s.eachBefore(Zle(nyt)).eachAfter(fj(Nv,1,o)).eachAfter(fj(r,s.r/Math.min(t,n),o)).eachBefore(ece(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=sD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:A_(+s),i):r},i}function Zle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function fj(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=tyt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function ece(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function xCe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function ak(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function iyt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(xCe),o}function s(o,a){return function(u){u.children&&ak(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var syt={depth:-1},tce={},dj={};function oyt(e){return e.id}function ayt(e){return e.parentId}function nce(){var e=oyt,t=ayt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>uyt(n(w,E,i))),v=y.map(rce),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(rce(w)),s.push(dj));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new CE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?tce:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===tce)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===dj&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===dj);--y)h.data=null}if(f.parent=syt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(bCe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=sD(i),r):e},r.parentId=function(i){return arguments.length?(t=sD(i),r):t},r.path=function(i){return arguments.length?(n=sD(i),r):n},r}function uyt(e){e=`${e}`;let t=e.length;return Q7(e,t-1)&&!Q7(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function rce(e){let t=e.length;if(t<2)return"";for(;--t>1&&!Q7(e,t););return e.slice(0,t)}function Q7(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function lyt(e,t){return e.parent===t.parent?1:2}function hj(e){var t=e.children;return t?t[0]:e.t}function pj(e){var t=e.children;return t?t[t.length-1]:e.t}function cyt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function fyt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function dyt(e,t,n){return e.a.parent===t.parent?e.a:n}function oD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}oD.prototype=Object.create(CE.prototype);function hyt(e){for(var t=new oD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new oD(s[o],o)),i.parent=n;return(t.parent=new oD(null,0)).children=[t],t}function pyt(){var e=lyt,t=1,n=1,r=null;function i(l){var c=hyt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){fyt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=pj(p),d=hj(d),p&&d;)m=hj(m),h=pj(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(cyt(dyt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!pj(h)&&(h.t=p,h.m+=v-y),d&&!hj(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function h6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var SCe=(1+Math.sqrt(5))/2;function TCe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,S;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),S=g*g*E,w=Math.max(v/S,S/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),S=g*g*E,b=Math.max(v/S,S/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?ak(u,n,r,i,m?r+=p*g/m:s):h6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const CCe=function e(t){function n(r,i,s,o,a){TCe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(SCe);function myt(){var e=CCe,t=!1,n=1,r=1,i=[0],s=Nv,o=Nv,a=Nv,u=Nv,l=Nv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(xCe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=_Ce(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:A_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:A_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:A_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:A_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:A_(+d),c):l},c}function gyt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,S=d-1;E<S;){var T=E+S>>>1;l[T]<w?E=T+1:S=T}w-l[E-1]<l[E]-w&&f+1<E&&--E;var C=l[E]-b,A=h-C;if(g-p>y-m){var N=h?(p*A+g*C)/h:g;c(f,E,C,p,m,N,y),c(E,d,A,N,m,g,y)}else{var k=h?(m*A+y*C)/h:y;c(f,E,C,p,m,g,k),c(E,d,A,p,k,g,y)}}}function yyt(e,t,n,r,i){(e.depth&1?h6:ak)(e,t,n,r,i)}const vyt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?ak(l,i,s,o,m?s+=(a-s)*l.value/m:a):h6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=TCe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(SCe);function qh(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Sy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const J7=Symbol("implicit");function uk(){var e=new b7,t=[],n=[],r=J7;function i(s){let o=e.get(s);if(o===void 0){if(r!==J7)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new b7;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return uk(t,n).unknown(r)},qh.apply(i,arguments),i}function byt(e){return function(){return e}}function Z7(e){return+e}var ice=[0,1];function Pu(e){return e}function ez(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:byt(isNaN(t)?NaN:.5)}function _yt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function wyt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=ez(i,r),s=n(o,s)):(r=ez(r,i),s=n(s,o)),function(a){return s(r(a))}}function Eyt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=ez(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=P0(e,a,1,r)-1;return s[u](i[u](a))}}function lk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function p6(){var e=ice,t=ice,n=xy,r,i,s,o=Pu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Pu&&(o=_yt(e[0],e[d-1])),a=d>2?Eyt:wyt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),xf)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,Z7),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=rk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Pu,c()):o!==Pu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function ACe(){return p6()(Pu,Pu)}function ICe(e,t,n,r){var i=D0(e,t,n),s;switch(r=P1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=RTe(i,o))&&(r.precision=s),qK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=NTe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=kTe(i))&&(r.precision=s-(r.type==="%")*2);break}}return fh(r)}function _b(e){var t=e.domain;return e.ticks=function(n){var r=t();return w7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return ICe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=E7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function wb(){var e=ACe();return e.copy=function(){return lk(e,wb())},qh.apply(e,arguments),_b(e)}function kCe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Z7),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return kCe(e).unknown(t)},e=arguments.length?Array.from(e,Z7):[0,1],_b(n)}function RCe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function sce(e){return Math.log(e)}function oce(e){return Math.exp(e)}function xyt(e){return-Math.log(-e)}function Syt(e){return-Math.exp(-e)}function Tyt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Cyt(e){return e===10?Tyt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Ayt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ace(e){return(t,n)=>-e(-t,n)}function eX(e){const t=e(sce,oce),n=t.domain;let r=10,i,s;function o(){return i=Ayt(r),s=Cyt(r),n()[0]<0?(i=ace(i),s=ace(s),e(xyt,Syt)):e(sce,oce),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=w7(l,c,g))}else y=w7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=P1(u)).precision==null&&(u.trim=!0),u=fh(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(RCe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function NCe(){const e=eX(p6()).domain([1,10]);return e.copy=()=>lk(e,NCe()).base(e.base()),qh.apply(e,arguments),e}function uce(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function lce(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function tX(e){var t=1,n=e(uce(t),lce(t));return n.constant=function(r){return arguments.length?e(uce(t=+r),lce(t)):t},_b(n)}function PCe(){var e=tX(p6());return e.copy=function(){return lk(e,PCe()).constant(e.constant())},qh.apply(e,arguments)}function cce(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Iyt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function kyt(e){return e<0?-e*e:e*e}function nX(e){var t=e(Pu,Pu),n=1;function r(){return n===1?e(Pu,Pu):n===.5?e(Iyt,kyt):e(cce(n),cce(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},_b(t)}function rX(){var e=nX(p6());return e.copy=function(){return lk(e,rX()).exponent(e.exponent())},qh.apply(e,arguments),e}function Ryt(){return rX.apply(null,arguments).exponent(.5)}function DCe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=HSe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[P0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(Kp),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return DCe().domain(e).range(t).unknown(r)},qh.apply(s,arguments)}function OCe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[P0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return OCe().domain([e,t]).range(i).unknown(s)},qh.apply(_b(o),arguments)}function $Ce(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[P0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return $Ce().domain(e).range(t).unknown(n)},qh.apply(i,arguments)}const mj=new Date,gj=new Date;function Ws(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Ws(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(mj.setTime(+s),gj.setTime(+o),e(mj),e(gj),Math.floor(n(mj,gj))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const AE=Ws(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);AE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ws(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):AE);AE.range;const Mp=1e3,wc=Mp*60,Lp=wc*60,gm=Lp*24,iX=gm*7,fce=gm*30,yj=gm*365,Fp=Ws(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Mp)},(e,t)=>(t-e)/Mp,e=>e.getUTCSeconds());Fp.range;const m6=Ws(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mp)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getMinutes());m6.range;const g6=Ws(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getUTCMinutes());g6.range;const y6=Ws(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Mp-e.getMinutes()*wc)},(e,t)=>{e.setTime(+e+t*Lp)},(e,t)=>(t-e)/Lp,e=>e.getHours());y6.range;const v6=Ws(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Lp)},(e,t)=>(t-e)/Lp,e=>e.getUTCHours());v6.range;const Qp=Ws(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wc)/gm,e=>e.getDate()-1);Qp.range;const h0=Ws(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gm,e=>e.getUTCDate()-1);h0.range;const MCe=Ws(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/gm,e=>Math.floor(e/gm));MCe.range;function Eb(e){return Ws(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wc)/iX)}const Kx=Eb(0),D3=Eb(1),Nyt=Eb(2),Pyt=Eb(3),IE=Eb(4),Dyt=Eb(5),Oyt=Eb(6);Kx.range;D3.range;Nyt.range;Pyt.range;IE.range;Dyt.range;Oyt.range;function xb(e){return Ws(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/iX)}const Xx=xb(0),O3=xb(1),$yt=xb(2),Myt=xb(3),kE=xb(4),Lyt=xb(5),Fyt=xb(6);Xx.range;O3.range;$yt.range;Myt.range;kE.range;Lyt.range;Fyt.range;const xA=Ws(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());xA.range;const SA=Ws(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());SA.range;const Sh=Ws(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Sh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ws(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Sh.range;const Th=Ws(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Th.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ws(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Th.range;function LCe(e,t,n,r,i,s){const o=[[Fp,1,Mp],[Fp,5,5*Mp],[Fp,15,15*Mp],[Fp,30,30*Mp],[s,1,wc],[s,5,5*wc],[s,15,15*wc],[s,30,30*wc],[i,1,Lp],[i,3,3*Lp],[i,6,6*Lp],[i,12,12*Lp],[r,1,gm],[r,2,2*gm],[n,1,iX],[t,1,fce],[t,3,3*fce],[e,1,yj]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=Wx(([,,g])=>g).right(o,d);if(h===o.length)return e.every(D0(l/yj,c/yj,f));if(h===0)return AE.every(Math.max(D0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[jyt,Byt]=LCe(Th,SA,Xx,MCe,v6,g6),[Uyt,zyt]=LCe(Sh,xA,Kx,Qp,y6,m6);function vj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function bj(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function cT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function FCe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=fT(i),c=dT(i),f=fT(s),d=dT(s),h=fT(o),p=dT(o),m=fT(a),g=dT(a),y=fT(u),v=dT(u),b={a:U,A:B,b:V,B:D,c:null,d:yce,e:yce,f:fvt,g:wvt,G:xvt,H:uvt,I:lvt,j:cvt,L:jCe,m:dvt,M:hvt,p:z,q:W,Q:_ce,s:wce,S:pvt,u:mvt,U:gvt,V:yvt,w:vvt,W:bvt,x:null,X:null,y:_vt,Y:Evt,Z:Svt,"%":bce},w={a:j,A:q,b:G,B:te,c:null,d:vce,e:vce,f:Ivt,g:Fvt,G:Bvt,H:Tvt,I:Cvt,j:Avt,L:UCe,m:kvt,M:Rvt,p:ve,q:he,Q:_ce,s:wce,S:Nvt,u:Pvt,U:Dvt,V:Ovt,w:$vt,W:Mvt,x:null,X:null,y:Lvt,Y:jvt,Z:Uvt,"%":bce},E={a:N,A:k,b:O,B:P,c:$,d:mce,e:mce,f:ivt,g:pce,G:hce,H:gce,I:gce,j:evt,L:rvt,m:Zyt,M:tvt,p:A,q:Jyt,Q:ovt,s:avt,S:nvt,u:Gyt,U:Yyt,V:Kyt,w:Wyt,W:Xyt,x:L,X:M,y:pce,Y:hce,Z:Qyt,"%":svt};b.x=S(n,b),b.X=S(r,b),b.c=S(t,b),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(ce,me){return function(Le){var fe=[],ct=-1,ze=0,Ke=ce.length,it,De,Ae;for(Le instanceof Date||(Le=new Date(+Le));++ct<Ke;)ce.charCodeAt(ct)===37&&(fe.push(ce.slice(ze,ct)),(De=dce[it=ce.charAt(++ct)])!=null?it=ce.charAt(++ct):De=it==="e"?" ":"0",(Ae=me[it])&&(it=Ae(Le,De)),fe.push(it),ze=ct+1);return fe.push(ce.slice(ze,ct)),fe.join("")}}function T(ce,me){return function(Le){var fe=cT(1900,void 0,1),ct=C(fe,ce,Le+="",0),ze,Ke;if(ct!=Le.length)return null;if("Q"in fe)return new Date(fe.Q);if("s"in fe)return new Date(fe.s*1e3+("L"in fe?fe.L:0));if(me&&!("Z"in fe)&&(fe.Z=0),"p"in fe&&(fe.H=fe.H%12+fe.p*12),fe.m===void 0&&(fe.m="q"in fe?fe.q:0),"V"in fe){if(fe.V<1||fe.V>53)return null;"w"in fe||(fe.w=1),"Z"in fe?(ze=bj(cT(fe.y,0,1)),Ke=ze.getUTCDay(),ze=Ke>4||Ke===0?O3.ceil(ze):O3(ze),ze=h0.offset(ze,(fe.V-1)*7),fe.y=ze.getUTCFullYear(),fe.m=ze.getUTCMonth(),fe.d=ze.getUTCDate()+(fe.w+6)%7):(ze=vj(cT(fe.y,0,1)),Ke=ze.getDay(),ze=Ke>4||Ke===0?D3.ceil(ze):D3(ze),ze=Qp.offset(ze,(fe.V-1)*7),fe.y=ze.getFullYear(),fe.m=ze.getMonth(),fe.d=ze.getDate()+(fe.w+6)%7)}else("W"in fe||"U"in fe)&&("w"in fe||(fe.w="u"in fe?fe.u%7:"W"in fe?1:0),Ke="Z"in fe?bj(cT(fe.y,0,1)).getUTCDay():vj(cT(fe.y,0,1)).getDay(),fe.m=0,fe.d="W"in fe?(fe.w+6)%7+fe.W*7-(Ke+5)%7:fe.w+fe.U*7-(Ke+6)%7);return"Z"in fe?(fe.H+=fe.Z/100|0,fe.M+=fe.Z%100,bj(fe)):vj(fe)}}function C(ce,me,Le,fe){for(var ct=0,ze=me.length,Ke=Le.length,it,De;ct<ze;){if(fe>=Ke)return-1;if(it=me.charCodeAt(ct++),it===37){if(it=me.charAt(ct++),De=E[it in dce?me.charAt(ct++):it],!De||(fe=De(ce,Le,fe))<0)return-1}else if(it!=Le.charCodeAt(fe++))return-1}return fe}function A(ce,me,Le){var fe=l.exec(me.slice(Le));return fe?(ce.p=c.get(fe[0].toLowerCase()),Le+fe[0].length):-1}function N(ce,me,Le){var fe=h.exec(me.slice(Le));return fe?(ce.w=p.get(fe[0].toLowerCase()),Le+fe[0].length):-1}function k(ce,me,Le){var fe=f.exec(me.slice(Le));return fe?(ce.w=d.get(fe[0].toLowerCase()),Le+fe[0].length):-1}function O(ce,me,Le){var fe=y.exec(me.slice(Le));return fe?(ce.m=v.get(fe[0].toLowerCase()),Le+fe[0].length):-1}function P(ce,me,Le){var fe=m.exec(me.slice(Le));return fe?(ce.m=g.get(fe[0].toLowerCase()),Le+fe[0].length):-1}function $(ce,me,Le){return C(ce,t,me,Le)}function L(ce,me,Le){return C(ce,n,me,Le)}function M(ce,me,Le){return C(ce,r,me,Le)}function U(ce){return o[ce.getDay()]}function B(ce){return s[ce.getDay()]}function V(ce){return u[ce.getMonth()]}function D(ce){return a[ce.getMonth()]}function z(ce){return i[+(ce.getHours()>=12)]}function W(ce){return 1+~~(ce.getMonth()/3)}function j(ce){return o[ce.getUTCDay()]}function q(ce){return s[ce.getUTCDay()]}function G(ce){return u[ce.getUTCMonth()]}function te(ce){return a[ce.getUTCMonth()]}function ve(ce){return i[+(ce.getUTCHours()>=12)]}function he(ce){return 1+~~(ce.getUTCMonth()/3)}return{format:function(ce){var me=S(ce+="",b);return me.toString=function(){return ce},me},parse:function(ce){var me=T(ce+="",!1);return me.toString=function(){return ce},me},utcFormat:function(ce){var me=S(ce+="",w);return me.toString=function(){return ce},me},utcParse:function(ce){var me=T(ce+="",!0);return me.toString=function(){return ce},me}}}var dce={"-":"",_:" ",0:"0"},po=/^\s*\d+/,Vyt=/^%/,Hyt=/[\\^$*+?|[\]().{}]/g;function gr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function qyt(e){return e.replace(Hyt,"\\$&")}function fT(e){return new RegExp("^(?:"+e.map(qyt).join("|")+")","i")}function dT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Wyt(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Gyt(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Yyt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Kyt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Xyt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function hce(e,t,n){var r=po.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function pce(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Qyt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Jyt(e,t,n){var r=po.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Zyt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function mce(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function evt(e,t,n){var r=po.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function gce(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function tvt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function nvt(e,t,n){var r=po.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function rvt(e,t,n){var r=po.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ivt(e,t,n){var r=po.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function svt(e,t,n){var r=Vyt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ovt(e,t,n){var r=po.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function avt(e,t,n){var r=po.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function yce(e,t){return gr(e.getDate(),t,2)}function uvt(e,t){return gr(e.getHours(),t,2)}function lvt(e,t){return gr(e.getHours()%12||12,t,2)}function cvt(e,t){return gr(1+Qp.count(Sh(e),e),t,3)}function jCe(e,t){return gr(e.getMilliseconds(),t,3)}function fvt(e,t){return jCe(e,t)+"000"}function dvt(e,t){return gr(e.getMonth()+1,t,2)}function hvt(e,t){return gr(e.getMinutes(),t,2)}function pvt(e,t){return gr(e.getSeconds(),t,2)}function mvt(e){var t=e.getDay();return t===0?7:t}function gvt(e,t){return gr(Kx.count(Sh(e)-1,e),t,2)}function BCe(e){var t=e.getDay();return t>=4||t===0?IE(e):IE.ceil(e)}function yvt(e,t){return e=BCe(e),gr(IE.count(Sh(e),e)+(Sh(e).getDay()===4),t,2)}function vvt(e){return e.getDay()}function bvt(e,t){return gr(D3.count(Sh(e)-1,e),t,2)}function _vt(e,t){return gr(e.getFullYear()%100,t,2)}function wvt(e,t){return e=BCe(e),gr(e.getFullYear()%100,t,2)}function Evt(e,t){return gr(e.getFullYear()%1e4,t,4)}function xvt(e,t){var n=e.getDay();return e=n>=4||n===0?IE(e):IE.ceil(e),gr(e.getFullYear()%1e4,t,4)}function Svt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+gr(t/60|0,"0",2)+gr(t%60,"0",2)}function vce(e,t){return gr(e.getUTCDate(),t,2)}function Tvt(e,t){return gr(e.getUTCHours(),t,2)}function Cvt(e,t){return gr(e.getUTCHours()%12||12,t,2)}function Avt(e,t){return gr(1+h0.count(Th(e),e),t,3)}function UCe(e,t){return gr(e.getUTCMilliseconds(),t,3)}function Ivt(e,t){return UCe(e,t)+"000"}function kvt(e,t){return gr(e.getUTCMonth()+1,t,2)}function Rvt(e,t){return gr(e.getUTCMinutes(),t,2)}function Nvt(e,t){return gr(e.getUTCSeconds(),t,2)}function Pvt(e){var t=e.getUTCDay();return t===0?7:t}function Dvt(e,t){return gr(Xx.count(Th(e)-1,e),t,2)}function zCe(e){var t=e.getUTCDay();return t>=4||t===0?kE(e):kE.ceil(e)}function Ovt(e,t){return e=zCe(e),gr(kE.count(Th(e),e)+(Th(e).getUTCDay()===4),t,2)}function $vt(e){return e.getUTCDay()}function Mvt(e,t){return gr(O3.count(Th(e)-1,e),t,2)}function Lvt(e,t){return gr(e.getUTCFullYear()%100,t,2)}function Fvt(e,t){return e=zCe(e),gr(e.getUTCFullYear()%100,t,2)}function jvt(e,t){return gr(e.getUTCFullYear()%1e4,t,4)}function Bvt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?kE(e):kE.ceil(e),gr(e.getUTCFullYear()%1e4,t,4)}function Uvt(){return"+0000"}function bce(){return"%"}function _ce(e){return+e}function wce(e){return Math.floor(+e/1e3)}var u_,sX,Vg,ck,VCe;zvt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function zvt(e){return u_=FCe(e),sX=u_.format,Vg=u_.parse,ck=u_.utcFormat,VCe=u_.utcParse,u_}function Vvt(e){return new Date(e)}function Hvt(e){return e instanceof Date?+e:+new Date(+e)}function oX(e,t,n,r,i,s,o,a,u,l){var c=ACe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(S){return(u(S)<S?h:a(S)<S?p:o(S)<S?m:s(S)<S?g:r(S)<S?i(S)<S?y:v:n(S)<S?b:w)(S)}return c.invert=function(S){return new Date(f(S))},c.domain=function(S){return arguments.length?d(Array.from(S,Hvt)):d().map(Vvt)},c.ticks=function(S){var T=d();return e(T[0],T[T.length-1],S??10)},c.tickFormat=function(S,T){return T==null?E:l(T)},c.nice=function(S){var T=d();return(!S||typeof S.range!="function")&&(S=t(T[0],T[T.length-1],S??10)),S?d(RCe(T,S)):c},c.copy=function(){return lk(c,oX(e,t,n,r,i,s,o,a,u,l))},c}function RE(){return qh.apply(oX(Uyt,zyt,Sh,xA,Kx,Qp,y6,m6,Fp,sX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function qvt(){return qh.apply(oX(jyt,Byt,Th,SA,Xx,h0,v6,g6,Fp,ck).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function b6(){var e=0,t=1,n,r,i,s,o=Pu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(xy),l.rangeRound=c(rk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Ty(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function aX(){var e=_b(b6()(Pu));return e.copy=function(){return Ty(e,aX())},Sy.apply(e,arguments)}function HCe(){var e=eX(b6()).domain([1,10]);return e.copy=function(){return Ty(e,HCe()).base(e.base())},Sy.apply(e,arguments)}function qCe(){var e=tX(b6());return e.copy=function(){return Ty(e,qCe()).constant(e.constant())},Sy.apply(e,arguments)}function uX(){var e=nX(b6());return e.copy=function(){return Ty(e,uX()).exponent(e.exponent())},Sy.apply(e,arguments)}function Wvt(){return uX.apply(null,arguments).exponent(.5)}function _6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Pu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=FK(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(xy),h.rangeRound=p(rk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function WCe(){var e=_b(_6()(Pu));return e.copy=function(){return Ty(e,WCe())},Sy.apply(e,arguments)}function GCe(){var e=eX(_6()).domain([.1,1,10]);return e.copy=function(){return Ty(e,GCe()).base(e.base())},Sy.apply(e,arguments)}function YCe(){var e=tX(_6());return e.copy=function(){return Ty(e,YCe()).constant(e.constant())},Sy.apply(e,arguments)}function lX(){var e=nX(_6());return e.copy=function(){return Ty(e,lX()).exponent(e.exponent())},Sy.apply(e,arguments)}function Gvt(){return lX.apply(null,arguments).exponent(.5)}function Wh(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const Yvt=Wh("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Kvt=Wh("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Xvt=Wh("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Qvt=Wh("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Jvt=Wh("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Zvt=Wh("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),e1t=Wh("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),t1t=Wh("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),n1t=Wh("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),r1t=Wh("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Cr(e){return function(){return e}}const Ece=Math.abs,ea=Math.atan2,Jy=Math.cos,i1t=Math.max,_j=Math.min,Td=Math.sin,Gv=Math.sqrt,ra=1e-12,NE=Math.PI,$3=NE/2,KCe=2*NE;function s1t(e){return e>1?0:e<-1?NE:Math.acos(e)}function xce(e){return e>=1?$3:e<=-1?-$3:Math.asin(e)}function w6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new BK(t)}function o1t(e){return e.innerRadius}function a1t(e){return e.outerRadius}function u1t(e){return e.startAngle}function l1t(e){return e.endAngle}function c1t(e){return e&&e.padAngle}function f1t(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ra))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function ON(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/Gv(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,S=d*m-p*h,T=(b<0?-1:1)*Gv(i1t(0,E*E*w-S*S)),C=(S*b-v*T)/w,A=(-S*v-b*T)/w,N=(S*b+v*T)/w,k=(-S*v+b*T)/w,O=C-g,P=A-y,$=N-g,L=k-y;return O*O+P*P>$*$+L*L&&(C=N,A=k),{cx:C,cy:A,x01:-c,y01:-f,x11:C*(i/E-1),y11:A*(i/E-1)}}function d1t(){var e=o1t,t=a1t,n=Cr(0),r=null,i=u1t,s=l1t,o=c1t,a=null,u=w6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-$3,m=s.apply(this,arguments)-$3,g=Ece(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ra))a.moveTo(0,0);else if(g>KCe-ra)a.moveTo(h*Jy(p),h*Td(p)),a.arc(0,0,h,p,m,!y),d>ra&&(a.moveTo(d*Jy(m),d*Td(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,S=g,T=g,C=o.apply(this,arguments)/2,A=C>ra&&(r?+r.apply(this,arguments):Gv(d*d+h*h)),N=_j(Ece(h-d)/2,+n.apply(this,arguments)),k=N,O=N,P,$;if(A>ra){var L=xce(A/d*Td(C)),M=xce(A/h*Td(C));(S-=L*2)>ra?(L*=y?1:-1,w+=L,E-=L):(S=0,w=E=(p+m)/2),(T-=M*2)>ra?(M*=y?1:-1,v+=M,b-=M):(T=0,v=b=(p+m)/2)}var U=h*Jy(v),B=h*Td(v),V=d*Jy(E),D=d*Td(E);if(N>ra){var z=h*Jy(b),W=h*Td(b),j=d*Jy(w),q=d*Td(w),G;if(g<NE)if(G=f1t(U,B,j,q,z,W,V,D)){var te=U-G[0],ve=B-G[1],he=z-G[0],ce=W-G[1],me=1/Td(s1t((te*he+ve*ce)/(Gv(te*te+ve*ve)*Gv(he*he+ce*ce)))/2),Le=Gv(G[0]*G[0]+G[1]*G[1]);k=_j(N,(d-Le)/(me-1)),O=_j(N,(h-Le)/(me+1))}else k=O=0}T>ra?O>ra?(P=ON(j,q,U,B,h,O,y),$=ON(z,W,V,D,h,O,y),a.moveTo(P.cx+P.x01,P.cy+P.y01),O<N?a.arc(P.cx,P.cy,O,ea(P.y01,P.x01),ea($.y01,$.x01),!y):(a.arc(P.cx,P.cy,O,ea(P.y01,P.x01),ea(P.y11,P.x11),!y),a.arc(0,0,h,ea(P.cy+P.y11,P.cx+P.x11),ea($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,ea($.y11,$.x11),ea($.y01,$.x01),!y))):(a.moveTo(U,B),a.arc(0,0,h,v,b,!y)):a.moveTo(U,B),!(d>ra)||!(S>ra)?a.lineTo(V,D):k>ra?(P=ON(V,D,z,W,d,-k,y),$=ON(U,B,j,q,d,-k,y),a.lineTo(P.cx+P.x01,P.cy+P.y01),k<N?a.arc(P.cx,P.cy,k,ea(P.y01,P.x01),ea($.y01,$.x01),!y):(a.arc(P.cx,P.cy,k,ea(P.y01,P.x01),ea(P.y11,P.x11),!y),a.arc(0,0,d,ea(P.cy+P.y11,P.cx+P.x11),ea($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,k,ea($.y11,$.x11),ea($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-NE/2;return[Jy(f)*c,Td(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Cr(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Cr(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:Cr(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:Cr(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Cr(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:Cr(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Cr(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function XCe(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function QCe(e){this._context=e}QCe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function cX(e){return new QCe(e)}function JCe(e){return e[0]}function ZCe(e){return e[1]}function Ow(e,t){var n=Cr(!0),r=null,i=cX,s=null,o=w6(a);e=typeof e=="function"?e:e===void 0?JCe:Cr(e),t=typeof t=="function"?t:t===void 0?ZCe:Cr(t);function a(u){var l,c=(u=XCe(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Cr(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:Cr(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:Cr(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function E6(e,t,n){var r=null,i=Cr(!0),s=null,o=cX,a=null,u=w6(l);e=typeof e=="function"?e:e===void 0?JCe:Cr(+e),t=typeof t=="function"?t:Cr(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?ZCe:Cr(+n);function l(f){var d,h,p,m=(f=XCe(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return Ow().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:Cr(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Cr(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Cr(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:Cr(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Cr(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Cr(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Cr(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}const h1t={draw(e,t){const n=Gv(t/NE);e.moveTo(n,0),e.arc(0,0,n,0,KCe)}};function p1t(e,t){let n=null,r=w6(i);e=typeof e=="function"?e:Cr(e||h1t),t=typeof t=="function"?t:Cr(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Cr(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Cr(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function $0(){}function M3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function x6(e){this._context=e}x6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:M3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:M3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Yv(e){return new x6(e)}function e2e(e){this._context=e}e2e.prototype={areaStart:$0,areaEnd:$0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:M3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m1t(e){return new e2e(e)}function t2e(e){this._context=e}t2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:M3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g1t(e){return new t2e(e)}function n2e(e,t){this._basis=new x6(e),this._beta=t}n2e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const y1t=function e(t){function n(r){return t===1?new x6(r):new n2e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function L3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function fX(e,t){this._context=e,this._k=(1-t)/6}fX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:L3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:L3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const v1t=function e(t){function n(r){return new fX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function dX(e,t){this._context=e,this._k=(1-t)/6}dX.prototype={areaStart:$0,areaEnd:$0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:L3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const b1t=function e(t){function n(r){return new dX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function hX(e,t){this._context=e,this._k=(1-t)/6}hX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:L3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const _1t=function e(t){function n(r){return new hX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function pX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ra){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ra){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function r2e(e,t){this._context=e,this._alpha=t}r2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:pX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const w1t=function e(t){function n(r){return t?new r2e(r,t):new fX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function i2e(e,t){this._context=e,this._alpha=t}i2e.prototype={areaStart:$0,areaEnd:$0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:pX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const E1t=function e(t){function n(r){return t?new i2e(r,t):new dX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function s2e(e,t){this._context=e,this._alpha=t}s2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:pX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const x1t=function e(t){function n(r){return t?new s2e(r,t):new hX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function o2e(e){this._context=e}o2e.prototype={areaStart:$0,areaEnd:$0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function S1t(e){return new o2e(e)}function Sce(e){return e<0?-1:1}function Tce(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Sce(s)+Sce(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Cce(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function wj(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function F3(e){this._context=e}F3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:wj(this,this._t0,Cce(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,wj(this,Cce(this,n=Tce(this,e,t)),n);break;default:wj(this,this._t0,n=Tce(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function a2e(e){this._context=new u2e(e)}(a2e.prototype=Object.create(F3.prototype)).point=function(e,t){F3.prototype.point.call(this,t,e)};function u2e(e){this._context=e}u2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function T1t(e){return new F3(e)}function C1t(e){return new a2e(e)}function l2e(e){this._context=e}l2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Ace(e),i=Ace(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Ace(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function A1t(e){return new l2e(e)}function S6(e,t){this._context=e,this._t=t}S6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function I1t(e){return new S6(e,.5)}function k1t(e){return new S6(e,0)}function R1t(e){return new S6(e,1)}function iC(e,t,n){this.k=e,this.x=t,this.y=n}iC.prototype={constructor:iC,scale:function(e){return e===1?this:new iC(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new iC(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};iC.prototype;function If(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function M0(e){return!!e&&!!e[vi]}function ym(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===j1t}(e)||Array.isArray(e)||!!e[Oce]||!!(!((t=e.constructor)===null||t===void 0)&&t[Oce])||mX(e)||gX(e))}function $1(e,t,n){n===void 0&&(n=!1),Qx(e)===0?(n?Object.keys:Mw)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function Qx(e){var t=e[vi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:mX(e)?2:gX(e)?3:0}function $w(e,t){return Qx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function N1t(e,t){return Qx(e)===2?e.get(t):e[t]}function c2e(e,t,n){var r=Qx(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function f2e(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function mX(e){return L1t&&e instanceof Map}function gX(e){return F1t&&e instanceof Set}function gv(e){return e.o||e.t}function yX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=h2e(e);delete t[vi];for(var n=Mw(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function vX(e,t){return t===void 0&&(t=!1),bX(e)||M0(e)||!ym(e)||(Qx(e)>1&&(e.set=e.add=e.clear=e.delete=P1t),Object.freeze(e),t&&$1(e,function(n,r){return vX(r,!0)},!0)),e}function P1t(){If(2)}function bX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function dh(e){var t=iz[e];return t||If(18,e),t}function D1t(e,t){iz[e]||(iz[e]=t)}function tz(){return TA}function Ej(e,t){t&&(dh("Patches"),e.u=[],e.s=[],e.v=t)}function j3(e){nz(e),e.p.forEach(O1t),e.p=null}function nz(e){e===TA&&(TA=e.l)}function Ice(e){return TA={p:[],l:TA,h:e,m:!0,_:0}}function O1t(e){var t=e[vi];t.i===0||t.i===1?t.j():t.g=!0}function xj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||dh("ES5").S(t,e,r),r?(n[vi].P&&(j3(t),If(4)),ym(e)&&(e=B3(t,e),t.l||U3(t,e)),t.u&&dh("Patches").M(n[vi].t,e,t.u,t.s)):e=B3(t,n,[]),j3(t),t.u&&t.v(t.u,t.s),e!==d2e?e:void 0}function B3(e,t,n){if(bX(t))return t;var r=t[vi];if(!r)return $1(t,function(a,u){return kce(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return U3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=yX(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),$1(s,function(a,u){return kce(e,r,i,a,u,n,o)}),U3(e,i,!1),n&&e.u&&dh("Patches").N(r,n,e.u,e.s)}return r.o}function kce(e,t,n,r,i,s,o){if(M0(i)){var a=B3(e,i,s&&t&&t.i!==3&&!$w(t.R,r)?s.concat(r):void 0);if(c2e(n,r,a),!M0(a))return;e.m=!1}else o&&n.add(i);if(ym(i)&&!bX(i)){if(!e.h.D&&e._<1)return;B3(e,i),t&&t.A.l||U3(e,i)}}function U3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&vX(t,n)}function Sj(e,t){var n=e[vi];return(n?gv(n):e)[t]}function Rce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Pg(e){e.P||(e.P=!0,e.l&&Pg(e.l))}function Tj(e){e.o||(e.o=yX(e.t))}function rz(e,t,n){var r=mX(t)?dh("MapSet").F(t,n):gX(t)?dh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:tz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=CA;o&&(u=[a],l=sC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):dh("ES5").J(t,n);return(n?n.A:tz()).p.push(r),r}function $1t(e){return M0(e)||If(22,e),function t(n){if(!ym(n))return n;var r,i=n[vi],s=Qx(n);if(i){if(!i.P&&(i.i<4||!dh("ES5").K(i)))return i.t;i.I=!0,r=Nce(n,s),i.I=!1}else r=Nce(n,s);return $1(r,function(o,a){i&&N1t(i.t,o)===a||c2e(r,o,t(a))}),s===3?new Set(r):r}(e)}function Nce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return yX(e)}function M1t(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[vi];return CA.get(u,s)},set:function(u){var l=this[vi];CA.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][vi];if(!a.P)switch(a.i){case 5:r(a)&&Pg(a);break;case 4:n(a)&&Pg(a)}}}function n(s){for(var o=s.t,a=s.k,u=Mw(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==vi){var f=o[c];if(f===void 0&&!$w(o,c))return!0;var d=a[c],h=d&&d[vi];if(h?h.t!==f:!f2e(d,f))return!0}}var p=!!o[vi];return u.length!==Mw(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};D1t("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=h2e(f);delete p[vi];for(var m=Mw(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:tz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,vi,{value:l,writable:!0}),u},S:function(s,o,a){a?M0(o)&&o[vi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[vi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)$1(d,function(b){b!==vi&&(f[b]!==void 0||$w(f,b)?h[b]||u(d[b]):(h[b]=!0,Pg(c)))}),$1(f,function(b){d[b]!==void 0||$w(d,b)||(h[b]=!1,Pg(c))});else if(p===5){if(r(c)&&(Pg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var Pce,TA,_X=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",L1t=typeof Map<"u",F1t=typeof Set<"u",Dce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",d2e=_X?Symbol.for("immer-nothing"):((Pce={})["immer-nothing"]=!0,Pce),Oce=_X?Symbol.for("immer-draftable"):"__$immer_draftable",vi=_X?Symbol.for("immer-state"):"__$immer_state",j1t=""+Object.prototype.constructor,Mw=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,h2e=Object.getOwnPropertyDescriptors||function(e){var t={};return Mw(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},iz={},CA={get:function(e,t){if(t===vi)return e;var n=gv(e);if(!$w(n,t))return function(i,s,o){var a,u=Rce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!ym(r)?r:r===Sj(e.t,t)?(Tj(e),e.o[t]=rz(e.A.h,r,e)):r},has:function(e,t){return t in gv(e)},ownKeys:function(e){return Reflect.ownKeys(gv(e))},set:function(e,t,n){var r=Rce(gv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Sj(gv(e),t),s=i==null?void 0:i[vi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(f2e(n,i)&&(n!==void 0||$w(e.t,t)))return!0;Tj(e),Pg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return Sj(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,Tj(e),Pg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=gv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){If(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){If(12)}},sC={};$1(CA,function(e,t){sC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),sC.deleteProperty=function(e,t){return sC.set.call(this,e,t,void 0)},sC.set=function(e,t,n){return CA.set.call(this,e[0],t,n,e[0])};var B1t=function(){function e(n){var r=this;this.O=Dce,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&If(6),o!==void 0&&typeof o!="function"&&If(7),ym(i)){var c=Ice(r),f=rz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?j3(c):nz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return Ej(c,o),xj(m,c)},function(m){throw j3(c),m}):(Ej(c,o),xj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===d2e&&(l=void 0),r.D&&vX(l,!0),o){var h=[],p=[];dh("Patches").M(i,l,h,p),o(h,p)}return l}If(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){ym(n)||If(8),M0(n)&&(n=$1t(n));var r=Ice(this),i=rz(this,n,void 0);return i[vi].C=!0,nz(r),i},t.finishDraft=function(n,r){var i=n&&n[vi],s=i.A;return Ej(s,r),xj(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Dce&&If(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=dh("Patches").$;return M0(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),jl=new B1t,U1t=jl.produce;jl.produceWithPatches.bind(jl);jl.setAutoFreeze.bind(jl);jl.setUseProxies.bind(jl);jl.applyPatches.bind(jl);jl.createDraft.bind(jl);jl.finishDraft.bind(jl);const p2e=U1t;function AA(e){"@babel/helpers - typeof";return AA=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AA(e)}function z1t(e,t){if(AA(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(AA(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V1t(e){var t=z1t(e,"string");return AA(t)=="symbol"?t:t+""}function H1t(e,t,n){return(t=V1t(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Mce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$ce(Object(n),!0).forEach(function(r){H1t(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$ce(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function sa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Lce=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Cj=function(){return Math.random().toString(36).substring(7).split("").join(".")},z3={INIT:"@@redux/INIT"+Cj(),REPLACE:"@@redux/REPLACE"+Cj(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Cj()}};function q1t(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function m2e(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(sa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(sa(1));return n(m2e)(e,t)}if(typeof e!="function")throw new Error(sa(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(sa(3));return s}function f(m){if(typeof m!="function")throw new Error(sa(4));if(u)throw new Error(sa(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(sa(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!q1t(m))throw new Error(sa(7));if(typeof m.type>"u")throw new Error(sa(8));if(u)throw new Error(sa(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(sa(10));i=m,d({type:z3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(sa(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Lce]=function(){return this},m}return d({type:z3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Lce]=p,r}function W1t(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:z3.INIT});if(typeof r>"u")throw new Error(sa(12));if(typeof n(void 0,{type:z3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(sa(13))})}function G1t(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{W1t(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(sa(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function V3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Y1t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(sa(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=V3.apply(void 0,a)(i.dispatch),Mce(Mce({},i),{},{dispatch:s})}}}function g2e(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var sz=g2e();sz.withExtraArgument=g2e;var y2e=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fk=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},M1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},K1t=Object.defineProperty,X1t=Object.defineProperties,Q1t=Object.getOwnPropertyDescriptors,Fce=Object.getOwnPropertySymbols,J1t=Object.prototype.hasOwnProperty,Z1t=Object.prototype.propertyIsEnumerable,jce=function(e,t,n){return t in e?K1t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},p0=function(e,t){for(var n in t||(t={}))J1t.call(t,n)&&jce(e,n,t[n]);if(Fce)for(var r=0,i=Fce(t);r<i.length;r++){var n=i[r];Z1t.call(t,n)&&jce(e,n,t[n])}return e},Aj=function(e,t){return X1t(e,Q1t(t))},dk=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},ebt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?V3:V3.apply(null,arguments)};function v2e(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var tbt=function(e){return e&&typeof e.match=="function"};function hh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return p0(p0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function nbt(e){return v2e(e)&&"type"in e}var rbt=function(e){y2e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,M1([void 0],n[0].concat(this)))):new(t.bind.apply(t,M1([void 0],n.concat(this))))},t}(Array),ibt=function(e){y2e(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,M1([void 0],n[0].concat(this)))):new(t.bind.apply(t,M1([void 0],n.concat(this))))},t}(Array);function oz(e){return ym(e)?p2e(e,function(){}):e}function sbt(e){return typeof e=="boolean"}function obt(){return function(t){return abt(t)}}function abt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new rbt;return n&&(sbt(n)?r.push(sz):r.push(sz.withExtraArgument(n.extraArgument))),r}var ubt=!0;function lbt(e){var t=obt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(v2e(i))h=G1t(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Y1t.apply(void 0,p),g=V3;u&&(g=ebt(p0({trace:!ubt},typeof u=="object"&&u)));var y=new ibt(m),v=y;Array.isArray(d)?v=M1([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return m2e(h,c,b)}function b2e(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function cbt(e){return typeof e=="function"}function fbt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?b2e(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(cbt(e))u=function(){return oz(e())};else{var l=oz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=M1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(M0(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(ym(p))return p2e(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function dbt(e,t){return e+"/"+t}function hbt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:oz(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=dbt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?hh(d,p):hh(d)});function u(){var c=typeof e.extraReducers=="function"?b2e(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=p0(p0({},d),o);return fbt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var S=E[w];v.addMatcher(S.matcher,S.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var pbt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",_2e=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=pbt[Math.random()*64|0];return t},mbt=["name","message","stack","code"],Ij=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Bce=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),gbt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=mbt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=hh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:Aj(p0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=hh(t+"/pending",function(l,c,f){return{payload:void 0,meta:Aj(p0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=hh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||gbt)(l||"Rejected"),meta:Aj(p0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):_2e(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return dk(this,null,function(){var v,b,w,E,S,T,C;return fk(this,function(A){switch(A.label){case 0:return A.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),vbt(E)?[4,E]:[3,2];case 1:E=A.sent(),A.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return S=new Promise(function(N,k){return p.signal.addEventListener("abort",function(){return k({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([S,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(N,k){return new Ij(N,k)},fulfillWithValue:function(N,k){return new Bce(N,k)}})).then(function(N){if(N instanceof Ij)throw N;return N instanceof Bce?i(N.payload,h,l,N.meta):i(N,h,l)})])];case 3:return w=A.sent(),[3,5];case 4:return T=A.sent(),w=T instanceof Ij?o(null,h,l,T.payload,T.meta):o(T,h,l),[3,5];case 5:return C=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,C||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(ybt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function ybt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function vbt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var bbt=function(e,t){return tbt(e)?e.match(t):e(t)};function Uce(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return bbt(r,n)})}}var wX=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},az=function(){},w2e=function(e,t){return t===void 0&&(t=az),e.catch(t),e},E2e=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},Lw=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},_bt="task",x2e="listener",S2e="completed",EX="cancelled",wbt="task-"+EX,Ebt="task-"+S2e,T2e=x2e+"-"+EX,xbt=x2e+"-"+S2e,T6=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=_bt+" "+EX+" (reason: "+t+")"}return e}(),Fw=function(e){if(e.aborted)throw new T6(e.reason)};function C2e(e,t){var n=az;return new Promise(function(r,i){var s=function(){return i(new T6(e.reason))};if(e.aborted){s();return}n=E2e(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=az})}var Sbt=function(e,t){return dk(void 0,null,function(){var n,r;return fk(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof T6?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},H3=function(e){return function(t){return w2e(C2e(e,t).then(function(n){return Fw(e),n}))}},A2e=function(e){var t=H3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},Tbt=Object.assign,zce={},hk="listenerMiddleware",Cbt=function(e,t){var n=function(r){return E2e(e,function(){return Lw(r,e.reason)})};return function(r,i){wX(r,"taskExecutor");var s=new AbortController;n(s);var o=Sbt(function(){return dk(void 0,null,function(){var a;return fk(this,function(u){switch(u.label){case 0:return Fw(e),Fw(s.signal),[4,r({pause:H3(s.signal),delay:A2e(s.signal),signal:s.signal})];case 1:return a=u.sent(),Fw(s.signal),[2,a]}})})},function(){return Lw(s,Ebt)});return i!=null&&i.autoJoin&&t.push(o),{result:H3(e)(o),cancel:function(){Lw(s,wbt)}}}},Abt=function(e,t){var n=function(r,i){return dk(void 0,null,function(){var s,o,a,u;return fk(this,function(l){switch(l.label){case 0:Fw(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,C2e(t,Promise.race(a))];case 2:return u=l.sent(),Fw(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return w2e(n(r,i))}},I2e=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=hh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return wX(s,"options.listener"),{predicate:i,type:t,effect:s}},Ibt=function(e){var t=I2e(e),n=t.type,r=t.predicate,i=t.effect,s=_2e(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},uz=function(e){e.pending.forEach(function(t){Lw(t,T2e)})},kbt=function(e){return function(){e.forEach(uz),e.clear()}},Vce=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},Rbt=hh(hk+"/add"),Nbt=hh(hk+"/removeAll"),Pbt=hh(hk+"/remove"),Dbt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,M1([hk+"/error"],e))};function Obt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?Dbt:i;wX(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&uz(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=Ibt(h)),o(p)},l=function(h){var p=I2e(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&uz(v)),!!v},c=function(h,p,m,g){return dk(t,null,function(){var y,v,b,w;return fk(this,function(E){switch(E.label){case 0:y=new AbortController,v=Abt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,Tbt({},m,{getOriginalState:g,condition:function(S,T){return v(S,T).then(Boolean)},take:v,delay:A2e(y.signal),pause:H3(y.signal),extra:r,signal:y.signal,fork:Cbt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(S,T,C){S!==y&&(Lw(S,T2e),C.delete(S))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof T6||Vce(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),Lw(y,xbt),h.pending.delete(y),[7];case 6:return[2]}})})},f=kbt(n),d=function(h){return function(p){return function(m){if(!nbt(m))return p(m);if(Rbt.match(m))return u(m.payload);if(Nbt.match(m)){f();return}if(Pbt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===zce)throw new Error(hk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,S=w;E<S.length;E++){var T=S[E],C=!1;try{C=T.predicate(m,b,g)}catch(A){C=!1,Vce(s,A,{raisedBy:"predicate"})}C&&c(T,m,h,y)}}finally{g=zce}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Hce;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);M1t();function $bt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let $N;const Mbt=new Uint8Array(16);function Lbt(){if(!$N&&($N=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!$N))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return $N(Mbt)}const _o=[];for(let e=0;e<256;++e)_o.push((e+256).toString(16).slice(1));function Fbt(e,t=0){return(_o[e[t+0]]+_o[e[t+1]]+_o[e[t+2]]+_o[e[t+3]]+"-"+_o[e[t+4]]+_o[e[t+5]]+"-"+_o[e[t+6]]+_o[e[t+7]]+"-"+_o[e[t+8]]+_o[e[t+9]]+"-"+_o[e[t+10]]+_o[e[t+11]]+_o[e[t+12]]+_o[e[t+13]]+_o[e[t+14]]+_o[e[t+15]]).toLowerCase()}const jbt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qce={randomUUID:jbt};function Wce(e,t,n){if(qce.randomUUID&&!t&&!e)return qce.randomUUID();e=e||{};const r=e.random||(e.rng||Lbt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Fbt(r)}class ph{static get(){let t=Wce();for(;this.ids.has(t);)t=Wce();return this.ids.set(t,!0),t}}ph.ids=new Map;function Vf(e){return"parent"in e}function Bbt(e){return!Vf(e)}function Ubt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:ph.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:ph.get(),createdOn:Date.now(),val:r}]:[];return{id:ph.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function zbt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:ph.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:ph.get(),createdOn:Date.now(),val:s}]:[];return{id:ph.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Hi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=Qbt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function L1(e){return!!e&&!!e[Bl]}function L0(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Jbt}(e)||Array.isArray(e)||!!e[v2]||!!(!((t=e.constructor)===null||t===void 0)&&t[v2])||C6(e)||A6(e))}function PE(e,t,n){n===void 0&&(n=!1),F0(e)===0?(n?Object.keys:IX)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function F0(e){var t=e[Bl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:C6(e)?2:A6(e)?3:0}function IA(e,t){return F0(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function aD(e,t){return F0(e)===2?e.get(t):e[t]}function k2e(e,t,n){var r=F0(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function Vbt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function C6(e){return Kbt&&e instanceof Map}function A6(e){return Xbt&&e instanceof Set}function yv(e){return e.o||e.t}function xX(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Zbt(e);delete t[Bl];for(var n=IX(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function SX(e,t){return t===void 0&&(t=!1),TX(e)||L1(e)||!L0(e)||(F0(e)>1&&(e.set=e.add=e.clear=e.delete=Hbt),Object.freeze(e),t&&PE(e,function(n,r){return SX(r,!0)},!0)),e}function Hbt(){Hi(2)}function TX(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function mh(e){var t=dz[e];return t||Hi(18,e),t}function qbt(e,t){dz[e]||(dz[e]=t)}function Gce(){return{}.NODE_ENV==="production"||DE||Hi(0),DE}function kj(e,t){t&&(mh("Patches"),e.u=[],e.s=[],e.v=t)}function q3(e){lz(e),e.p.forEach(Wbt),e.p=null}function lz(e){e===DE&&(DE=e.l)}function Yce(e){return DE={p:[],l:DE,h:e,m:!0,_:0}}function Wbt(e){var t=e[Bl];t.i===0||t.i===1?t.j():t.O=!0}function Rj(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||mh("ES5").S(t,e,r),r?(n[Bl].P&&(q3(t),Hi(4)),L0(e)&&(e=W3(t,e),t.l||G3(t,e)),t.u&&mh("Patches").M(n[Bl].t,e,t.u,t.s)):e=W3(t,n,[]),q3(t),t.u&&t.v(t.u,t.s),e!==AX?e:void 0}function W3(e,t,n){if(TX(t))return t;var r=t[Bl];if(!r)return PE(t,function(s,o){return Kce(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return G3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=xX(r.k):r.o;PE(r.i===3?new Set(i):i,function(s,o){return Kce(e,r,i,s,o,n)}),G3(e,i,!1),n&&e.u&&mh("Patches").R(r,n,e.u,e.s)}return r.o}function Kce(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Hi(5),L1(i)){var o=W3(e,i,s&&t&&t.i!==3&&!IA(t.D,r)?s.concat(r):void 0);if(k2e(n,r,o),!L1(o))return;e.m=!1}if(L0(i)&&!TX(i)){if(!e.h.F&&e._<1)return;W3(e,i),t&&t.A.l||G3(e,i)}}function G3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&SX(t,n)}function Nj(e,t){var n=e[Bl];return(n?yv(n):e)[t]}function Xce(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function cz(e){e.P||(e.P=!0,e.l&&cz(e.l))}function Pj(e){e.o||(e.o=xX(e.t))}function fz(e,t,n){var r=C6(t)?mh("MapSet").N(t,n):A6(t)?mh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Gce(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=hz;o&&(u=[a],l=oC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):mh("ES5").J(t,n);return(n?n.A:Gce()).p.push(r),r}function Gbt(e){return L1(e)||Hi(22,e),function t(n){if(!L0(n))return n;var r,i=n[Bl],s=F0(n);if(i){if(!i.P&&(i.i<4||!mh("ES5").K(i)))return i.t;i.I=!0,r=Qce(n,s),i.I=!1}else r=Qce(n,s);return PE(r,function(o,a){i&&aD(i.t,o)===a||k2e(r,o,t(a))}),s===3?new Set(r):r}(e)}function Qce(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return xX(e)}function Ybt(){function e(r){if(!L0(r))return r;if(Array.isArray(r))return r.map(e);if(C6(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(A6(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return IA(r,v2)&&(i[v2]=r[v2]),i}function t(r){return L1(r)?e(r):r}var n="add";qbt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=F0(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Hi(24),typeof u=="function"&&f==="prototype"&&Hi(24),typeof(u=aD(u,f))!="object"&&Hi(15,o.join("/"))}var d=F0(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Hi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Hi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;PE(a.D,function(h,p){var m=aD(f,h),g=aD(d,h),y=p?IA(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===AX?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Jce,DE,CX=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",Kbt=typeof Map<"u",Xbt=typeof Set<"u",Zce=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",AX=CX?Symbol.for("immer-nothing"):((Jce={})["immer-nothing"]=!0,Jce),v2=CX?Symbol.for("immer-draftable"):"__$immer_draftable",Bl=CX?Symbol.for("immer-state"):"__$immer_state",Qbt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Jbt=""+Object.prototype.constructor,IX=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Zbt=Object.getOwnPropertyDescriptors||function(e){var t={};return IX(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},dz={},hz={get:function(e,t){if(t===Bl)return e;var n=yv(e);if(!IA(n,t))return function(i,s,o){var a,u=Xce(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!L0(r)?r:r===Nj(e.t,t)?(Pj(e),e.o[t]=fz(e.A.h,r,e)):r},has:function(e,t){return t in yv(e)},ownKeys:function(e){return Reflect.ownKeys(yv(e))},set:function(e,t,n){var r=Xce(yv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=Nj(yv(e),t),s=i==null?void 0:i[Bl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(Vbt(n,i)&&(n!==void 0||IA(e.t,t)))return!0;Pj(e),cz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return Nj(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,Pj(e),cz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=yv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Hi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Hi(12)}},oC={};PE(hz,function(e,t){oC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),oC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Hi(13),oC.set.call(this,e,t,void 0)},oC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Hi(14),hz.set.call(this,e[0],t,n,e[0])};var e_t=function(){function e(n){var r=this;this.g=Zce,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Hi(6),o!==void 0&&typeof o!="function"&&Hi(7),L0(i)){var c=Yce(r),f=fz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?q3(c):lz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return kj(c,o),Rj(m,c)},function(m){throw q3(c),m}):(kj(c,o),Rj(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===AX&&(l=void 0),r.F&&SX(l,!0),o){var h=[],p=[];mh("Patches").M(i,l,h,p),o(h,p)}return l}Hi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){L0(n)||Hi(8),L1(n)&&(n=Gbt(n));var r=Yce(this),i=fz(this,n,void 0);return i[Bl].C=!0,lz(r),i},t.finishDraft=function(n,r){var i=n&&n[Bl];({}).NODE_ENV!=="production"&&(i&&i.C||Hi(9),i.I&&Hi(10));var s=i.A;return kj(s,r),Rj(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Zce&&Hi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=mh("Patches").$;return L1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Ul=new e_t,t_t=Ul.produce;Ul.produceWithPatches.bind(Ul);Ul.setAutoFreeze.bind(Ul);Ul.setUseProxies.bind(Ul);Ul.applyPatches.bind(Ul);Ul.createDraft.bind(Ul);Ul.finishDraft.bind(Ul);function n_t(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=Ubt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return hbt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:ph.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:ph.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function r_t(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=n_t(e),s=Obt();s.startListening({matcher:Uce(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Uce(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=lbt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:ph.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var i_t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),s_t=Object.prototype.hasOwnProperty;function pz(e,t){return s_t.call(e,t)}function mz(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)pz(e,i)&&r.push(i);return r}function Du(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function gz(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function vv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function R2e(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function yz(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(yz(e[t]))return!0}else if(typeof e=="object"){for(var r=mz(e),i=r.length,s=0;s<i;s++)if(yz(e[r[s]]))return!0}}return!1}function efe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var N2e=function(e){i_t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,efe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=efe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Bi=N2e,o_t=Du,sw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Y3(n,this.path);r&&(r=Du(r));var i=u1(n,{op:"remove",path:this.from}).removed;return u1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Y3(n,this.from);return u1(n,{op:"add",path:this.path,value:Du(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:kA(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},a_t={add:function(e,t,n){return gz(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:sw.move,copy:sw.copy,test:sw.test,_get:sw._get};function Y3(e,t){if(t=="")return e;var n={op:"_get",path:t};return u1(e,n),n.value}function u1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):K3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Y3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=kA(e,t.value),o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Du(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=K3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=R2e(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!gz(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);gz(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=a_t[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=sw[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function I6(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Du(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=u1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function u_t(e,t,n){var r=u1(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function K3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(sw[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&yz(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=P2e([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function P2e(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)I6(Du(t),Du(e),n||!0);else{n=n||K3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function kA(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!kA(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!kA(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const l_t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:kA,applyOperation:u1,applyPatch:I6,applyReducer:u_t,deepClone:o_t,getValueByPointer:Y3,validate:P2e,validator:K3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var kX=new WeakMap,c_t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),f_t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function d_t(e){return kX.get(e)}function h_t(e,t){return e.observers.get(t)}function p_t(e,t){e.observers.delete(t.callback)}function m_t(e,t){t.unobserve()}function g_t(e,t){var n=[],r,i=d_t(e);if(!i)i=new c_t(e),kX.set(e,i);else{var s=h_t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Du(e),t){r.callback=t,r.next=null;var o=function(){vz(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){vz(r),clearTimeout(r.next),p_t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new f_t(t,r)),r}function vz(e,t){t===void 0&&(t=!1);var n=kX.get(e.object);RX(n.value,e.object,e.patches,"",t),e.patches.length&&I6(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function RX(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=mz(t),o=mz(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(pz(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?RX(c,f,n,r+"/"+vv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+vv(l),value:Du(c)}),n.push({op:"replace",path:r+"/"+vv(l),value:Du(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+vv(l),value:Du(c)}),n.push({op:"remove",path:r+"/"+vv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!pz(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+vv(l),value:Du(t[l])})}}}function D2e(e,t,n){n===void 0&&(n=!1);var r=[];return RX(e,t,r,"",n),r}const y_t=Object.freeze(Object.defineProperty({__proto__:null,compare:D2e,generate:vz,observe:g_t,unobserve:m_t},Symbol.toStringTag,{value:"Module"}));Object.assign({},l_t,y_t,{JsonPatchError:N2e,deepClone:Du,escapePathComponent:vv,unescapePathComponent:R2e});var aC=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(aC||{});function uD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=O2e(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=uD(i,t);return I6(a,Du(o),!0,!1).newDocument}function v_t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function bz({registry:e,initialState:t}){let n=!1;const r=$bt(),i=r_t(t);function s(c){return i.backend.nodes[c]}r.listen(aC.TRAVERSAL_START,()=>{n=!0}),r.listen(aC.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return uD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=uD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=D2e(y,f);if(v_t(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=zbt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=uD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(aC.TRAVERSAL_START);const f=O2e(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);__t(p,m)?Vf(p)&&d.push(...p.sideEffects.undo):Vf(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(aC.TRAVERSAL_END)},undo(){const{current:c}=i;return Vf(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return $2e(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function b_t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;Vf(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)Vf(r)&&(r=n[r.parent]),Vf(i)&&(i=n[i.parent]);return r.id}function O2e(e,t,n){const r=b_t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),Vf(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),Vf(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function __t(e,t){if(Vf(e)&&e.parent===t.id)return!0;if(Vf(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function $2e(e,t){return{...e,children:e.children.map(n=>$2e(t[n],t)),name:`${e.label}`}}Ybt();function w_t(e){return e.length===2?t_t(e):e}class RA{static create(){return new RA}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:w_t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),hh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var E_t="Expected a function",tfe=NaN,x_t="[object Symbol]",S_t=/^\s+|\s+$/g,T_t=/^[-+]0x[0-9a-f]+$/i,C_t=/^0b[01]+$/i,A_t=/^0o[0-7]+$/i,I_t=parseInt,k_t=typeof Ms=="object"&&Ms&&Ms.Object===Object&&Ms,R_t=typeof self=="object"&&self&&self.Object===Object&&self,N_t=k_t||R_t||Function("return this")(),P_t=Object.prototype,D_t=P_t.toString,O_t=Math.max,$_t=Math.min,Dj=function(){return N_t.Date.now()};function M_t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(E_t);t=nfe(t)||0,_z(n)&&(c=!!n.leading,f="maxWait"in n,s=f?O_t(nfe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(S){var T=r,C=i;return r=i=void 0,l=S,o=e.apply(C,T),o}function p(S){return l=S,a=setTimeout(y,t),c?h(S):o}function m(S){var T=S-u,C=S-l,A=t-T;return f?$_t(A,s-C):A}function g(S){var T=S-u,C=S-l;return u===void 0||T>=t||T<0||f&&C>=s}function y(){var S=Dj();if(g(S))return v(S);a=setTimeout(y,m(S))}function v(S){return a=void 0,d&&r?h(S):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(Dj())}function E(){var S=Dj(),T=g(S);if(r=arguments,i=this,u=S,T){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function _z(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function L_t(e){return!!e&&typeof e=="object"}function F_t(e){return typeof e=="symbol"||L_t(e)&&D_t.call(e)==x_t}function nfe(e){if(typeof e=="number")return e;if(F_t(e))return tfe;if(_z(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=_z(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(S_t,"");var n=C_t.test(e);return n||A_t.test(e)?I_t(e.slice(2),n?2:8):T_t.test(e)?tfe:+e}var j_t=M_t;const pf=nl(j_t);function M2e({xScale:e,yRange:t,vertPosition:n,ticks:r,isDate:i=!1,showLines:s=!0}){const o=I.useMemo(()=>r.length>1?Math.abs(r[1].offset-r[0].offset):e.range()[0]-e.range()[1],[r,e]),a=I.useCallback(u=>(i?ck("%b%e, %Y"):fh(".2s"))(u),[i]);return _.jsxs(_.Fragment,{children:[s?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,r.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${l}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),s?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-o/2,y:10,width:o,height:20,children:_.jsx($l,{children:_.jsx(os,{withinPortal:!0,label:u,children:_.jsx(et,{px:2,fs:"10",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+u==0?0:a(i?new Date(u):u)})})})})]},`${u}test`))]})}const B_t=Object.freeze(Object.defineProperty({__proto__:null,XAxis:M2e},Symbol.toStringTag,{value:"Module"}));function L2e({dataset:e,yScale:t,xRange:n,horizontalPosition:r}){const i=I.useMemo(()=>t.ticks(6).map(o=>({value:o,yOffset:t(o)})),[t]),s=I.useMemo(()=>e==="clean_stocks"?fh(",.0%"):t.domain()[1]<5?fh(",.2r"):fh(",.0f"),[e,t]);return _.jsx(_.Fragment,{children:i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${r}, ${a})`,children:[_.jsx("line",{x2:`${n[1]-n[0]}`,stroke:`${o===0?"black":"gainsboro"}`,strokeWidth:o===0?1:.4}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-6px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))})}const U_t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:L2e},Symbol.toStringTag,{value:"Module"})),ta={top:30,left:40,right:80,bottom:50};function wz({parameters:e,data:t,dataname:n,items:r,selection:i,range:s,guardrail:o}){const[a,u]=I.useState(null),l=A=>i!=null&&i.includes(A)?!a||a.length===0?!0:a.includes(A):!1,c=I.useMemo(()=>{const A=r.filter(k=>i==null?void 0:i.includes(k.name)).map(k=>k.group);return r.filter(k=>A==null?void 0:A.includes(k.group)).filter(k=>!(i!=null&&i.includes(k.name))).map(k=>k.name)},[i,r,n]),f=I.useMemo(()=>{const A=r.map(P=>P.group),N=t.filter(P=>A==null?void 0:A.includes(P[e.group_var]));return[...Vht(N,P=>({mean:Rw(P,.5,$=>$[e.y_var]),upperq:Rw(P,.75,$=>$[e.y_var]),lowerq:Rw(P,.25,$=>$[e.y_var])}),P=>P[e.x_var])].flatMap(([P,$])=>({date:P,mean:$.mean,upperq:$.upperq,lowerq:$.lowerq}))},[t,r,e,n]),d=n==="clean_data"?800-ta.left-ta.right-60:800-ta.left-ta.right,h=400-ta.top-ta.bottom,{yMin:p,yMax:m}=I.useMemo(()=>{let A=[];switch(o){case"super_data":A=i==null?void 0:i.concat(c);break;default:A=i;break}const N=t.filter(U=>A.includes(U[e.cat_var])).map(U=>+U[e.y_var]).filter(U=>U!==null),[k,O]=n==="clean_stocks"?k1(N):[0,k1(N)[1]],[P,$]=[pA(f.map(U=>U.lowerq)),uh(f.map(U=>U.upperq))],L=o==="super_summ"?pA([k,P]):k,M=o==="super_summ"?uh([O,$]):O;return{yMin:L,yMax:M}},[t,i,o,f,c,e,n]),g=I.useMemo(()=>s?RE([ta.left,d+ta.left]).domain(s):RE([ta.left,d+ta.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[d,s,e,n]),y=I.useMemo(()=>wb([h+ta.top,ta.top]).domain([p,m]).nice(),[h,m,p,n]),v=I.useMemo(()=>{const A=Array.from(new Set(t.map(N=>N[e.cat_var])));return uk(PK).domain(A)},[t,e,n]),b=I.useMemo(()=>{if(!g||!y)return;const A=Ow();return A.x(k=>g(Vg("%Y-%m-%d")(k[e.x_var]))),A.y(k=>y(k[e.y_var])),A.curve(Yv),i==null?void 0:i.map(k=>({country:k,path:A(t.filter(O=>O[e.cat_var]===k))}))},[t,g,y,i,e,n]),w=I.useMemo(()=>{if(o!=="super_data")return null;const A=Ow();return A.x(k=>g(Vg("%Y-%m-%d")(k[e.x_var]))),A.y(k=>y(k[e.y_var])),A.curve(Yv),c==null?void 0:c.map(k=>({country:k,path:A(t.filter(O=>O[e.cat_var]===k))}))},[t,g,y,o,c,e,n]),E=I.useMemo(()=>{if(o!=="super_summ")return null;const A=Ow();A.x(P=>g(Vg("%Y-%m-%d")(P.date))),A.y(P=>y(P.mean)),A.curve(Yv);const N=A(f),k=E6();k.x(P=>g(Vg("%Y-%m-%d")(P.date))),k.y0(P=>y(P.lowerq)),k.y1(P=>y(P.upperq)),k.curve(Yv);const O=k(f);return{meanLine:N,confidenceBands:O,data:f}},[g,y,o,f,n]),S=I.useMemo(()=>n==="clean_stocks"?"Market Index":"Average",[n]),T=A=>A==="Eldoril North"?"Policy A":A.split(" ")[0]==="Silvoria"||A.split(" ")[0]==="Mystara"?"Policy C":A==="Average"?"all policies":"Policy B",C=I.useMemo(()=>{let N=null;switch(o){case"super_data":N=i==null?void 0:i.concat(w==null?void 0:w.map(O=>O.country));break;case"super_summ":N=i==null?void 0:i.concat([S]);break;default:N=i;break}const k=N==null?void 0:N.map(O=>({country:O,country_policy:n==="clean_data"?`${O} (${T(O)})`:O,label_pos:O===S?E==null?void 0:E.data.slice(-1).map(P=>y(P.mean))[0]:t.filter(P=>P[e.cat_var]===O).slice(-1).map(P=>y(P[e.y_var]))[0]})).sort((O,P)=>O.label_pos<P.label_pos?1:-1);if(!k)return k;for(let O=0;O<(k==null?void 0:k.length);O+=1){if(!k[O-1])continue;const P=k[O-1].label_pos-k[O].label_pos;P>=10||(k[O].label_pos=k[O].label_pos-10+P)}return k},[t,i,y,o,S,e,w,E,n]);return(i==null?void 0:i.length)===0?_.jsx($l,{style:{width:"800px",height:"400px"},children:_.jsx(et,{fs:"italic",c:"dimmed",children:"Select an item to view the chart."})}):_.jsxs("svg",{id:"baseLineChart",style:{height:"400px",width:"800px",fontFamily:'"Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsxs("g",{id:"axes",children:[_.jsx(M2e,{isDate:!0,xScale:g,yRange:y.range(),vertPosition:h+ta.top,showLines:!1,ticks:g.ticks(6).map(A=>({value:A.toString(),offset:g(A)}))}),_.jsx(L2e,{dataset:n,yScale:y,horizontalPosition:ta.left,xRange:g.range()})]}),_.jsx("svg",{style:{width:`${d}`},children:w==null?void 0:w.map(A=>_.jsx("g",{children:_.jsx("path",{id:`${A.country}`,fill:"none",stroke:l(A.country)?v(A.country):"gray",strokeDasharray:"4,1",strokeWidth:.5,d:A.path},`${A.country}_key`)},`${A.country}_g`))},"control_lines"),_.jsx("svg",{style:{width:`${d}`},children:E?_.jsxs("g",{children:[_.jsx("path",{id:"confidenceBands",fill:"lightgray",opacity:.25,stroke:"none",d:E.confidenceBands},"confidenceBands_key"),_.jsx("path",{id:"meanLine",fill:"none",stroke:"gray",strokeDasharray:"4,1",strokeWidth:.5,d:E.meanLine},"meanLine_key")]},"summary_g"):null},"control_bands"),_.jsxs("svg",{style:{width:`${d}`},children:[b==null?void 0:b.map(A=>_.jsx("g",{children:_.jsx("path",{id:`${A.country}`,fill:"none",stroke:l(A.country)?v(A.country):"gainsboro",strokeWidth:a!=null&&a.includes(A.country)?2:1.5,d:A.path},`${A.country}_key`)},`${A.country}_g`)),C==null?void 0:C.map(A=>_.jsx("foreignObject",{x:d+ta.left+5,y:A.label_pos-7,width:ta.right+60,height:20,children:_.jsx(et,{px:2,fs:"10",color:l(A.country)?v(A.country):"silver",onMouseOver:N=>{const k=N.target;i!=null&&i.includes(k.innerText)&&u([k.innerText])},onMouseOut:()=>u([]),children:A.country_policy})},`${A.country}_label`))]},"lines")]})}const z_t=Object.freeze(Object.defineProperty({__proto__:null,LineChart:wz,default:wz},Symbol.toStringTag,{value:"Module"})),l_={top:0,left:0,right:0,bottom:0},rfe=20,Oj=60;function Ez({parameters:e,data:t,dataname:n,items:r,selection:i,setSelection:s,trackSelection:o,range:a,guardrail:u}){const l=I.useMemo(()=>a?RE([l_.left,Oj+l_.left]).domain(a):RE([l_.left,Oj+l_.left]).domain([new Date(e.start_date),new Date(e.end_date)]),[e,a]),c=I.useMemo(()=>{const p=t.filter(y=>r==null?void 0:r.map(v=>v.name).includes(y[e.cat_var])).map(y=>+y[e.y_var]).filter(y=>y!==null),[m,g]=k1(p);return wb([rfe+l_.top,l_.top]).domain([m,g]).nice()},[e,t,r]),f=I.useMemo(()=>{const p=Array.from(new Set(t.map(m=>m[e.cat_var])));return uk(PK).domain(p)},[e,t]),d=I.useMemo(()=>{if(u!=="juxt_data")return null;const p=E6();p.x(y=>l(Vg("%Y-%m-%d")(y[e.x_var]))),p.y0(()=>c(0)),p.y1(y=>c(y[e.y_var])),p.curve(Yv);const m=Ow();return m.x(y=>l(Vg("%Y-%m-%d")(y[e.x_var]))),m.y(y=>c(y[e.y_var])),m.curve(Yv),r==null?void 0:r.map(y=>({country:y.name,path:m(t.filter(v=>v[e.cat_var]===y.name)),area:p(t.filter(v=>v[e.cat_var]===y.name))}))},[e,u,t,r,l,c]),h=I.useMemo(()=>e.allow_selection===!1?"none":"block",[e]);return _.jsx(fm.Group,{defaultValue:i,dir:"vertical",onChange:p=>{s(p),o(p)},styles:e.allow_selection===!1?{root:{pointerEvents:"none"}}:{root:{pointerEvents:"auto"}},children:r==null?void 0:r.map(p=>_.jsxs(_.Fragment,{children:[p.name==="Eldoril North"?_.jsx(u0,{size:"xs",label:"Policy A",labelPosition:"left",color:"black"}):null,p.name==="Eldoril West"?_.jsx(u0,{size:"xs",label:"Policy B",labelPosition:"left",color:"black"}):null,p.name==="Silvoria North"?_.jsx(u0,{size:"xs",label:"Policy C",labelPosition:"left",color:"black"}):null,_.jsxs(Va,{grow:!0,gutter:8,columns:2,children:[_.jsx(Va.Col,{span:1,children:_.jsx(fm,{value:p.name,label:p.name,color:e.allow_selection?"blue":"gray",styles:{root:{display:"flex",alignItems:"flex-end",padding:"2px 0"},inner:{display:h}},children:p.name},`${p.name}_checkbox`)},`${p.name}_grid1`),_.jsx(Va.Col,{span:u==="juxt_data"?"auto":3,children:_.jsxs("svg",{style:{width:`${Oj}`,height:`${rfe}`},children:[_.jsx("path",{id:`${p.name}_sparkarea`,fill:i!=null&&i.includes(p.name)?f(p.name):"gray",stroke:"none",opacity:.25,d:d==null?void 0:d.filter(m=>m.country===p.name)[0].area},`${p.name}_sparkarea`),_.jsx("path",{id:`${p.name}_spark`,fill:"none",stroke:i!=null&&i.includes(p.name)?f(p.name):"gray",strokeWidth:.75,d:d==null?void 0:d.filter(m=>m.country===p.name)[0].path},`${p.name}_spark`)]},`${p.name}_sparksvg`)},`${p.name}_grid2`)]},`${p.name}_grid`)]}))},`${n}_checkboxgroup`)}const V_t=Object.freeze(Object.defineProperty({__proto__:null,Sidebar:Ez,default:Ez},Symbol.toStringTag,{value:"Module"}));function xz({parameters:e,setRange:t,trackRange:n}){function r(s){return RE([0,100]).domain([new Date(e.start_date),new Date(e.end_date)]).invert(s)}function i(s){const o=r(s);return ck("%b %e, %Y")(o)}return _.jsx(jG,{defaultValue:[0,100],label:s=>i(s),labelAlwaysOn:!0,disabled:!e.allow_time_slider,onChange:([s,o])=>{t([r(s),r(o)]),n([r(s),r(o)])}})}const H_t=Object.freeze(Object.defineProperty({__proto__:null,RangeSelector:xz,default:xz},Symbol.toStringTag,{value:"Module"}));function Sz({guardrail:e,setGuardrail:t,dataname:n,setDataname:r,setSelection:i}){return _.jsxs(_.Fragment,{children:[_.jsx(et,{children:"Data:"}),_.jsx(kO,{value:n,onChange:s=>{r(s),i([])},data:[{value:"clean_data",label:"Viral"},{value:"clean_stocks",label:"Stock"}]}),_.jsx(et,{children:"Guardrail:"}),_.jsx(kO,{value:e,onChange:s=>{t(s)},data:[{value:"none",label:"None"},{value:"super_data",label:"Sup. Data"},{value:"super_summ",label:"Sup. Summ."},{value:"juxt_data",label:"Juxt. Data"},{value:"juxt_summ",label:"Juxt. Summ."}]})]})}const q_t=Object.freeze(Object.defineProperty({__proto__:null,Selector:Sz,default:Sz},Symbol.toStringTag,{value:"Module"})),fr=Array.isArray;function Yu(e){return e!=null?fr(e)?e:[e]:[]}function W_t(e=0,t=1/0){return`${ife(e)} < row_number() && row_number() <= ${ife(t)}`}function ife(e){return e<0?`count() + ${e}`:e}class F2e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(W_t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Yu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Sn(e){throw Error(e)}function Za(e){return typeof e=="number"}function mi(e){return typeof e=="function"}function k6(e,t){const n=Array(e);if(mi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let G_t=class extends F2e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Sn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Sn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Sn("Not implemented")}getter(t){Sn("Not implemented")}objects(t){Sn("Not implemented")}object(t){Sn("Not implemented")}[Symbol.iterator](){Sn("Not implemented")}print(t={}){Za(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=k6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},Y_t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},K_t=function(e){return e&&mi(e.get)?e:new Y_t(e)};function vm(e){return e instanceof Date}function Ea(e){return e===Object(e)}function X3(e){return e instanceof RegExp}function zo(e){return typeof e=="string"}function X_t(e,t){const n=r=>Sn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?sfe(e.entries(),t):vm(e)?n("Date"):X3(e)?n("RegExp"):zo(e)?n():fr(e)?Q_t(e,t):mi(e[Symbol.iterator])?J_t(e,t):Ea(e)?sfe(Object.entries(e),t):n()}function sfe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function Q_t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function J_t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:Z_t}=Object.prototype;function Jf(e,t){return Z_t.call(e,t)}function Xl(e){return e?new ofe({...e.data()},e.columnNames()):new ofe}class ofe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Jf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const or=void 0,ewt=Object.getPrototypeOf(Int8Array);function pk(e){return e instanceof ewt}function Kv(e){return fr(e)||pk(e)}function Df(e){return e!=null&&e===e}const hT=e=>Kv(e)||zo(e),twt={compact:e=>Kv(e)?e.filter(t=>Df(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>hT(e)?e.includes(t,n):!1,indexof:(e,t)=>hT(e)?e.indexOf(t):-1,join:(e,t)=>Kv(e)?e.join(t):or,lastindexof:(e,t)=>hT(e)?e.lastIndexOf(t):-1,length:e=>hT(e)?e.length:0,pluck:(e,t)=>Kv(e)?e.map(n=>Df(n)?n[t]:or):or,reverse:e=>Kv(e)?e.slice().reverse():zo(e)?e.split("").reverse().join(""):or,slice:(e,t,n)=>hT(e)?e.slice(t,n):or};function nwt(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function lD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Cd=e=>(e<10?"0":"")+e,rwt=e=>e<0?"-"+lD(-e,6):e>9999?"+"+lD(e,6):lD(e,4);function j2e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return rwt(e)+"-"+Cd(t+1)+"-"+Cd(n)+(!u||o?"T"+Cd(r)+":"+Cd(i)+":"+Cd(s)+"."+lD(o,3)+l:s?"T"+Cd(r)+":"+Cd(i)+":"+Cd(s)+l:i||r||!a?"T"+Cd(r)+":"+Cd(i)+l:"")}function B2e(e,t){return isNaN(e)?"Invalid Date":j2e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function R6(e,t){return isNaN(e)?"Invalid Date":j2e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const iwt=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function swt(e){return e.match(iwt)&&!isNaN(Date.parse(e))}function owt(e,t=Date.parse){return swt(e)?t(e):e}const U2e=6e4,z2e=864e5,V2e=6048e5,Vi=new Date,qi=new Date,ns=e=>(Vi.setTime(typeof e=="string"?owt(e):e),Vi);function awt(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function uwt(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function lwt(e){qi.setTime(+e),qi.setHours(0,0,0,0),Vi.setTime(+qi),Vi.setMonth(0),Vi.setDate(1);const t=(qi.getTimezoneOffset()-Vi.getTimezoneOffset())*U2e;return Math.floor(1+(qi-Vi-t)/z2e)}function cwt(e){qi.setTime(+e),qi.setUTCHours(0,0,0,0);const t=Date.UTC(qi.getUTCFullYear(),0,1);return Math.floor(1+(qi-t)/z2e)}function fwt(e,t){const n=t||0;qi.setTime(+e),qi.setDate(qi.getDate()-(qi.getDay()+7-n)%7),qi.setHours(0,0,0,0),Vi.setTime(+e),Vi.setMonth(0),Vi.setDate(1),Vi.setDate(1-(Vi.getDay()+7-n)%7),Vi.setHours(0,0,0,0);const r=(qi.getTimezoneOffset()-Vi.getTimezoneOffset())*U2e;return Math.floor((1+(qi-Vi)-r)/V2e)}function dwt(e,t){const n=t||0;return qi.setTime(+e),qi.setUTCDate(qi.getUTCDate()-(qi.getUTCDay()+7-n)%7),qi.setUTCHours(0,0,0,0),Vi.setTime(+e),Vi.setUTCMonth(0),Vi.setUTCDate(1),Vi.setUTCDate(1-(Vi.getUTCDay()+7-n)%7),Vi.setUTCHours(0,0,0,0),Math.floor((1+(qi-Vi))/V2e)}const hwt={format_date:(e,t)=>B2e(ns(e),!t),format_utcdate:(e,t)=>R6(ns(e),!t),timestamp:e=>+ns(e),year:e=>ns(e).getFullYear(),quarter:e=>Math.floor(ns(e).getMonth()/3),month:e=>ns(e).getMonth(),date:e=>ns(e).getDate(),dayofweek:e=>ns(e).getDay(),hours:e=>ns(e).getHours(),minutes:e=>ns(e).getMinutes(),seconds:e=>ns(e).getSeconds(),milliseconds:e=>ns(e).getMilliseconds(),utcyear:e=>ns(e).getUTCFullYear(),utcquarter:e=>Math.floor(ns(e).getUTCMonth()/3),utcmonth:e=>ns(e).getUTCMonth(),utcdate:e=>ns(e).getUTCDate(),utcdayofweek:e=>ns(e).getUTCDay(),utchours:e=>ns(e).getUTCHours(),utcminutes:e=>ns(e).getUTCMinutes(),utcseconds:e=>ns(e).getUTCSeconds(),utcmilliseconds:e=>ns(e).getUTCMilliseconds(),datetime:awt,dayofyear:lwt,week:fwt,utcdatetime:uwt,utcdayofyear:cwt,utcweek:dwt,now:Date.now};function NX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:vm(e)||vm(t)?+e==+t:X3(e)&&X3(t)?e+""==t+"":Ea(e)&&Ea(t)?pwt(e,t):!1}function pwt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return afe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!afe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!NX(e[o],t[o]))return!1}return!0}function afe(e,t,n=NX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const mwt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let gwt=Math.random;function Jx(){return gwt()}const ywt={random:Jx,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function PX(e){return e instanceof Map}function vwt(e){return e instanceof Set}function cD(e){return PX(e)||vwt(e)}function $j(e){return Array.from(e)}const bwt={has:(e,t)=>cD(e)?e.has(t):e!=null?Jf(e,t):!1,keys:e=>PX(e)?$j(e.keys()):e!=null?Object.keys(e):[],values:e=>cD(e)?$j(e.values()):e!=null?Object.values(e):[],entries:e=>cD(e)?$j(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):or};function _wt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Jf(t,e))return t[e];return n!==void 0?n:e}function wwt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const Ewt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},ow={bin:nwt,equal:NX,recode:_wt,sequence:wwt,...twt,...hwt,...mwt,...ywt,...bwt,...Ewt};function NA(e){return typeof e=="bigint"}function Ch(e){return e===void 0?e+"":NA(e)?e+"n":JSON.stringify(e)}function vn(e,t=[],n=[]){return new xwt(e,Yu(t),Yu(n))}let xwt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Ch(n)}]`),...this.params.map(Ch)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const H2e=e=>vn("any",e),q2e=()=>vn("count"),W2e=e=>vn("array_agg",e),G2e=e=>vn("array_agg_distinct",e),Y2e=(e,t)=>vn("map_agg",[e,t]),K2e=(e,t)=>vn("object_agg",[e,t]),X2e=(e,t)=>vn("entries_agg",[e,t]);({...ow});function Swt(e,t){e=cD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function Twt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function Cwt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function Awt(e,t,n,r){const i=r==="map"||r===!0?Y2e:r==="entries"?X2e:r==="object"?K2e:Sn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=Swt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:W2e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const Iwt="ArrayPattern",kwt="ArrowFunctionExpression",Rwt="FunctionExpression",m0="Identifier",Zx="Literal",Q2e="MemberExpression",Nwt="ObjectExpression",J2e="ObjectPattern",Z2e="Property",mk="Column",Pwt="Constant",Dwt="Dictionary",Owt="Function",$wt="Parameter",eAe="Op",Zr=(e,t)=>{const n=Mwt[e.type];return n?n(e,t):Sn(`Unsupported expression construct: ${e.type}`)},Mj=(e,t)=>"("+Zr(e.left,t)+" "+e.operator+" "+Zr(e.right,t)+")",Lj=(e,t)=>"("+Dd(e.params,t)+")=>"+Zr(e.body,t),ufe=(e,t)=>Zr(e.callee,t)+"("+Dd(e.arguments,t)+")",Dd=(e,t,n=",")=>e.map(r=>Zr(r,t)).join(n),tAe=e=>e.computed?`[${Ch(e.name)}]`:`.${e.name}`,lfe=(e,t,n)=>{const r=e.table||"";return`data${r}${tAe(e)}.${n}(${t.index}${r})`},Mwt={Constant:e=>e.raw,Column:(e,t)=>lfe(e,t,"get"),Dictionary:(e,t)=>lfe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${tAe(e)}`,Op:(e,t)=>`op(${Ch(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Zr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Zr(e.object,t),i=Zr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:ufe,NewExpression:(e,t)=>"new "+ufe(e,t),ArrayExpression:(e,t)=>"["+Dd(e.elements,t)+"]",AssignmentExpression:Mj,BinaryExpression:Mj,LogicalExpression:Mj,UnaryExpression:(e,t)=>"("+e.operator+Zr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Zr(e.test,t)+"?"+Zr(e.consequent,t)+":"+Zr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Dd(e.properties,t)+"})",Property:(e,t)=>{const n=Zr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Zr(e.value,t)},ArrowFunctionExpression:Lj,FunctionExpression:Lj,FunctionDeclaration:Lj,ArrayPattern:(e,t)=>"["+Dd(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Dd(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Dd(e.declarations,t,","),VariableDeclarator:(e,t)=>Zr(e.id,t)+"="+Zr(e.init,t),SpreadElement:(e,t)=>"..."+Zr(e.argument,t),BlockStatement:(e,t)=>"{"+Dd(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Zr(e.expression,t),IfStatement:(e,t)=>"if ("+Zr(e.test,t)+")"+Zr(e.consequent,t)+(e.alternate?" else "+Zr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Zr(e.discriminant,t)+") {"+Dd(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Zr(e.test,t):"default")+": "+Dd(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Zr(e.argument,t),Program:(e,t)=>Zr(e.body[0],t)};function Q3(e,t={index:"row"}){return Zr(e,t)}function Lwt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function OE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:vm(e)?+e:fr(e)||pk(e)?`[${e.map(OE)}]`:X3(e)?e+"":Fwt(e)}function Fwt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${OE(e[r])}`;return t+="}",t}function J3(e,t){const n=e.length;return n===1?(r,i)=>OE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=OE(a)}return s}}function jwt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=OE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=OE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Sp(){}function Bwt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Cs(e){return e.init=e.init||Sp,e.add=e.add||Sp,e.rem=e.rem||Sp,e}function cfe(e,t){return e.product_v=!1,e.product=t}const nAe={count:{create:()=>Cs({value:e=>e.count}),param:[]},array_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Cs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:or}),param:[1]},valid:{create:()=>Cs({value:e=>e.valid}),param:[1]},invalid:{create:()=>Cs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=jwt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Cs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Cs({value:e=>{let t=or,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:or,add:(e,t)=>NA(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>cfe(e,1),value:e=>e.valid?e.product_v?cfe(e,Bwt(e.list.values())):e.product:void 0,add:(e,t)=>NA(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:or,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Cs({value:e=>e.valid?e.mean:or}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):or,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Cs({value:e=>e.valid>1?e.dev/e.valid:or}),param:[1],req:["variance"]},stdev:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):or}),param:[1],req:["variance"]},stdevp:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):or}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=or,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===or)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=or,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===or)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Cs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Cs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):or,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Cs({value:e=>e.valid>1?e.cov/e.valid:or}),param:[2],req:["covariance"]},corr:{create:()=>Cs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):or}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Cs({value:i=>Lwt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},ffe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},dfe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},rAe={row_number:{create(){return{init:Sp,value:e=>e.index+1}},param:[]},rank:ffe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=ffe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:dfe,ntile:{create(e){e=+e,e>0||Sn("ntile num must be greater than zero.");const{init:t,value:n}=dfe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=or){return e=+e||1,{init:Sp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=or){return e=+e||1,{init:Sp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Sp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Sp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Sn("nth_value nth must be greater than zero."),{init:Sp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):or}}},param:[1,1]},fill_down:{create(e=or){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Df(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=or){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Uwt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Uwt(e,t,n){for(const r=e.size;n<r;++n)if(Df(e.value(n,t)))return n;return-1}function DX(e){return Jf(nAe,e)}function OX(e){return Jf(rAe,e)}function iAe(e){return Jf(ow,e)||e==="row_object"}function sAe(e){return DX(e)&&nAe[e]}function oAe(e){return OX(e)&&rAe[e]}function pT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const $X={escape:(e,t,n)=>pT(e,t,n),expr:(e,t)=>pT(`(row,data,op)=>${e}`,ow,t),expr2:(e,t)=>pT(`(row0,data0,row,data)=>${e}`,ow,t),join:(e,t)=>pT(`(row1,data1,row2,data2)=>${e}`,ow,t),param:(e,t)=>pT(e,ow,t)},zwt={"==":1,"!=":1,"===":1,"!==":1};function aAe(e,t,n=0,r,i){if(e.type=mk,e.name=t,e.table=n,i&&r&&mi(r.keyFor)){const s=zwt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===Zx&&Vwt(i,e,s,r.keyFor(s.value))}return e}function Vwt(e,t,n,r){return r<0?(e.type=Zx,e.value=!1,e.raw="false"):(t.type=Dwt,n.value=r,n.raw=r+""),!0}function N6(e){return fr(e)?e:PX(e)?e.entries():e?Object.entries(e):[]}const uAe="row_object";function lAe(e,t){e.type=Nwt;const n=e.properties=[];for(const r of N6(t)){const[i,s]=fr(r)?r:[r,r];n.push({type:Z2e,key:{type:Zx,raw:Ch(s)},value:aAe({computed:!0},i)})}return e}function cAe(e){return Q3(lAe({},e))}function fAe(e){return $X.expr(cAe(e))}const Hwt=new TextDecoder("utf-8"),Tz=e=>Hwt.decode(e),qwt=new TextEncoder,P6=e=>qwt.encode(e),Wwt=e=>typeof e=="boolean",wu=e=>typeof e=="function",Cy=e=>e!=null&&Object(e)===e,D6=e=>Cy(e)&&wu(e.then),MX=e=>Cy(e)&&wu(e[Symbol.iterator]),O6=e=>Cy(e)&&wu(e[Symbol.asyncIterator]),Gwt=e=>Cy(e)&&"done"in e&&"value"in e,dAe=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Ywt=e=>Cy(e)&&wu(e.abort)&&wu(e.getWriter)&&!dAe(e),Kwt=e=>Cy(e)&&wu(e.end)&&wu(e.write)&&Wwt(e.writable)&&!dAe(e),Xwt=e=>Cy(e)&&wu(e.clear)&&wu(e.bytes)&&wu(e.position)&&wu(e.setPosition)&&wu(e.capacity)&&wu(e.getBufferIdentifier)&&wu(e.createLong),LX=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Qwt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function Cz(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Ah(e,t){const n=Qwt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?Cz(o,s,a):o=s;break}Cz(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Is(e,t){let n=Gwt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=P6(n)),n instanceof ArrayBuffer?new e(n):n instanceof LX?new e(n):Xwt(n)?Is(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const mT=e=>Is(Int32Array,e),hfe=e=>Is(BigInt64Array,e),Jn=e=>Is(Uint8Array,e),Az=e=>(e.next(),e);function*Jwt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof LX?n(t):MX(t)?t:n(t);return yield*Az(function*(i){let s=null;do s=i.next(yield Is(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Zwt=e=>Jwt(Uint8Array,e);function hAe(e,t){return Bv(this,arguments,function*(){if(D6(t))return yield Gn(yield Gn(yield*J5(YC(hAe(e,yield Gn(t))))));const r=function(o){return Bv(this,arguments,function*(){yield yield Gn(yield Gn(o))})},i=function(o){return Bv(this,arguments,function*(){yield Gn(yield*J5(YC(Az(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof LX?r(t):MX(t)?i(t):O6(t)?t:r(t);return yield Gn(yield*J5(YC(Az(function(o){return Bv(this,arguments,function*(){let a=null;do a=yield Gn(o.next(yield yield Gn(Is(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Gn(new e)})}const eEt=e=>hAe(Uint8Array,e);function pAe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function tEt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const pfe={fromIterable(e){return MN(nEt(e))},fromAsyncIterable(e){return MN(rEt(e))},fromDOMStream(e){return MN(iEt(e))},fromNodeStream(e){return MN(oEt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},MN=e=>(e.next(),e);function*nEt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Ah(r,o)[0]:([i,r,a]=Ah(r,o),i)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const l=Zwt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function rEt(e){return Bv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Ah(i,a)[0]:([s,i,u]=Ah(i,a),s)}({cmd:o,size:a}=(yield yield Gn(null))||{cmd:"read",size:0});const c=eEt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gn(c.next()):yield Gn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Gn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Gn(c.return(new Uint8Array(0))))}return yield Gn(null)})}function iEt(e){return Bv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Ah(i,a)[0]:([s,i,u]=Ah(i,a),s)}({cmd:o,size:a}=(yield yield Gn(null))||{cmd:"read",size:0});const c=new sEt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Gn(c.read()):yield Gn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Jn(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Gn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Gn(c.cancel(f)))}finally{r===!1?yield Gn(c.cancel()):e.locked&&c.releaseLock()}return yield Gn(null)})}class sEt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Cp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Cp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Jn(n)),n})}}const Fj=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function oEt(e){return Bv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Ah(l,a)[0]:([c,l,u]=Ah(l,a),c)}if({cmd:o,size:a}=(yield yield Gn(null))||{cmd:"read",size:0},e.isTTY)return yield yield Gn(new Uint8Array(0)),yield Gn(null);try{n[0]=Fj(e,"end"),n[1]=Fj(e,"error");do{if(n[2]=Fj(e,"readable"),[r,s]=yield Gn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Jn(e.read(a-u)),c.byteLength<a-u&&(c=Jn(e.read()))):c=Jn(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Gn(f()));while(a<u)}while(!i)}finally{yield Gn(d(n,r==="error"?s:null))}return yield Gn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ds;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ds||(Ds={}));var eu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(eu||(eu={}));var Bs;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Bs||(Bs={}));var Mc;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Mc||(Mc={}));var jt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(jt||(jt={}));var Lc;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Lc||(Lc={}));const jj=2,Wd=4,kp=4,Ir=4,wg=new Int32Array(2),mfe=new Float32Array(wg.buffer),gfe=new Float64Array(wg.buffer),LN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Iz;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Iz||(Iz={}));let Z3=class mAe{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new mAe(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return wg[0]=this.readInt32(t),mfe[0]}readFloat64(t){return wg[LN?0:1]=this.readInt32(t),wg[LN?1:0]=this.readInt32(t+4),gfe[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){mfe[0]=n,this.writeInt32(t,wg[0])}writeFloat64(t,n){gfe[0]=n,this.writeInt32(t,wg[LN?0:1]),this.writeInt32(t+4,wg[LN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Wd+kp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<kp;n++)t+=String.fromCharCode(this.readInt8(this.position_+Wd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Wd;const i=this.bytes_.subarray(t,t+r);return n===Iz.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Wd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=kp)throw new Error("FlatBuffers: file identifier must be length "+kp);for(let n=0;n<kp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Wd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},gAe=class yAe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=Z3.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=yAe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=Z3.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Wd,0),this.writeInt32(this.offset()-t+Wd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*jj;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=jj;l<s;l+=jj)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Ir:0;if(n){const s=n;if(this.prep(this.minalign,Wd+kp+i),s.length!=kp)throw new TypeError("FlatBuffers: file identifier must be length "+kp);for(let o=kp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Wd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Wd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};var e$;(function(e){e[e.BUFFER=0]="BUFFER"})(e$||(e$={}));var t$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(t$||(t$={}));class Eg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Eg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Ir),(n||new Eg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):t$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):e$.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,t$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,e$.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Eg.startBodyCompression(t),Eg.addCodec(t,n),Eg.addMethod(t,r),Eg.endBodyCompression(t)}}let vAe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},bAe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},bp=class kz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new kz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Ir),(n||new kz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new bAe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new vAe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Eg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},I_=class Rz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Rz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Ir),(n||new Rz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new bp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var $E;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})($E||($E={}));var n$;(function(e){e[e.DenseArray=0]="DenseArray"})(n$||(n$={}));class gl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new gl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Ir),(n||new gl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return gl.startInt(t),gl.addBitWidth(t,n),gl.addIsSigned(t,r),gl.endInt(t)}}class Rp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Ir),(n||new Rp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new gl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):n$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,n$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class Ns{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Ir),(n||new Ns).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Ns.startKeyValue(t),Ns.addKey(t,n),Ns.addValue(t,r),Ns.endKeyValue(t)}}let yfe=class uC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new uC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Ir),(n||new uC).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return uC.startBinary(t),uC.endBinary(t)}},vfe=class lC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new lC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Ir),(n||new lC).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return lC.startBool(t),lC.endBool(t)}},fD=class k_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Ir),(n||new k_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Mc.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Mc.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return k_.startDate(t),k_.addUnit(t,n),k_.endDate(t)}},R_=class hg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new hg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Ir),(n||new hg).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return hg.startDecimal(t),hg.addPrecision(t,n),hg.addScale(t,r),hg.addBitWidth(t,i),hg.endDecimal(t)}},dD=class N_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new N_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Ir),(n||new N_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jt.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,jt.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return N_.startDuration(t),N_.addUnit(t,n),N_.endDuration(t)}},hD=class P_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new P_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Ir),(n||new P_).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return P_.startFixedSizeBinary(t),P_.addByteWidth(t,n),P_.endFixedSizeBinary(t)}},pD=class D_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new D_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Ir),(n||new D_).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return D_.startFixedSizeList(t),D_.addListSize(t,n),D_.endFixedSizeList(t)}};class Gd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Ir),(n||new Gd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Bs.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,Bs.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Gd.startFloatingPoint(t),Gd.addPrecision(t,n),Gd.endFloatingPoint(t)}}class Yd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Ir),(n||new Yd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Lc.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,Lc.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Yd.startInterval(t),Yd.addUnit(t,n),Yd.endInterval(t)}}let bfe=class cC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeBinary(t,n){return(n||new cC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeBinary(t,n){return t.setPosition(t.position()+Ir),(n||new cC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeBinary(t){t.startObject(0)}static endLargeBinary(t){return t.endObject()}static createLargeBinary(t){return cC.startLargeBinary(t),cC.endLargeBinary(t)}},_fe=class fC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsLargeUtf8(t,n){return(n||new fC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsLargeUtf8(t,n){return t.setPosition(t.position()+Ir),(n||new fC).__init(t.readInt32(t.position())+t.position(),t)}static startLargeUtf8(t){t.startObject(0)}static endLargeUtf8(t){return t.endObject()}static createLargeUtf8(t){return fC.startLargeUtf8(t),fC.endLargeUtf8(t)}},wfe=class dC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new dC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Ir),(n||new dC).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return dC.startList(t),dC.endList(t)}},mD=class O_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new O_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Ir),(n||new O_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return O_.startMap(t),O_.addKeysSorted(t,n),O_.endMap(t)}},Efe=class hC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new hC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Ir),(n||new hC).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return hC.startNull(t),hC.endNull(t)}};class Xv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Ir),(n||new Xv).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Xv.startStruct_(t),Xv.endStruct_(t)}}let pC=class bv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new bv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Ir),(n||new bv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jt.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,jt.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return bv.startTime(t),bv.addUnit(t,n),bv.addBitWidth(t,r),bv.endTime(t)}},mC=class _v{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new _v).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Ir),(n||new _v).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):jt.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,jt.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return _v.startTimestamp(t),_v.addUnit(t,n),_v.addTimezone(t,r),_v.endTimestamp(t)}},wv=class Ev{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Ev).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Ir),(n||new Ev).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):eu.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,eu.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Ev.startUnion(t),Ev.addMode(t,n),Ev.addTypeIds(t,r),Ev.endUnion(t)}},xfe=class gC{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new gC).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Ir),(n||new gC).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return gC.startUtf8(t),gC.endUtf8(t)}};var Jr;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(Jr||(Jr={}));let ic=class gD{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new gD).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Ir),(n||new gD).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):Jr.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Rp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new gD).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,Jr.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Od=class yp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new yp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Ir),(n||new yp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):$E.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ic).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,$E.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return yp.startSchema(t),yp.addEndianness(t,n),yp.addFields(t,r),yp.addCustomMetadata(t,i),yp.addFeatures(t,s),yp.endSchema(t)}};var vs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(vs||(vs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var _p;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(_p||(_p={}));const aEt=void 0;function F1(e){if(e===null)return"null";if(e===aEt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>F1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const uEt=Symbol.for("isArrowBigNum");function dd(e,...t){return t.length===0?Object.setPrototypeOf(Is(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}dd.prototype[uEt]=!0;dd.prototype.toJSON=function(){return`"${DA(this)}"`};dd.prototype.valueOf=function(){return _Ae(this)};dd.prototype.toString=function(){return DA(this)};dd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return _Ae(this);case"string":return DA(this);case"default":return lEt(this)}return DA(this)};function jw(...e){return dd.apply(this,e)}function Bw(...e){return dd.apply(this,e)}function PA(...e){return dd.apply(this,e)}Object.setPrototypeOf(jw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Bw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(PA.prototype,Object.create(Uint32Array.prototype));Object.assign(jw.prototype,dd.prototype,{constructor:jw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Bw.prototype,dd.prototype,{constructor:Bw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(PA.prototype,dd.prototype,{constructor:PA,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function _Ae(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const DA=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return Bj(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return Bj(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${Bj(t)}`},lEt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:DA(e);function Bj(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class FX{static new(t,n){switch(n){case!0:return new jw(t);case!1:return new Bw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new jw(t)}return t.byteLength===16?new PA(t):new Bw(t)}static signed(t){return new jw(t)}static unsigned(t){return new Bw(t)}static decimal(t){return new PA(t)}constructor(t,n){return FX.new(t,n)}}function jo(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var wAe,EAe,xAe,SAe,TAe,CAe,AAe,IAe,kAe,RAe,NAe,PAe,DAe,OAe,$Ae,MAe,LAe,FAe,jAe,BAe,UAe,zAe;class dn{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isLargeBinary(t){return(t==null?void 0:t.typeId)===re.LargeBinary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isLargeUtf8(t){return(t==null?void 0:t.typeId)===re.LargeUtf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return dn.isUnion(t)&&t.mode===eu.Dense}static isSparseUnion(t){return dn.isUnion(t)&&t.mode===eu.Sparse}constructor(t){this.typeId=t}}wAe=Symbol.toStringTag;dn[wAe]=(e=>(e.children=null,e.ArrayType=Array,e.OffsetArrayType=Int32Array,e[Symbol.toStringTag]="DataType"))(dn.prototype);class bm extends dn{constructor(){super(re.Null)}toString(){return"Null"}}EAe=Symbol.toStringTag;bm[EAe]=(e=>e[Symbol.toStringTag]="Null")(bm.prototype);class tu extends dn{constructor(t,n){super(re.Int),this.isSigned=t,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}xAe=Symbol.toStringTag;tu[xAe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(tu.prototype);class jX extends tu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class BX extends tu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class j0 extends tu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class UX extends tu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class zX extends tu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class VX extends tu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class HX extends tu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class qX extends tu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(jX.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(BX.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(j0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(UX.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(zX.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(VX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(HX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(qX.prototype,"ArrayType",{value:BigUint64Array});class B0 extends dn{constructor(t){super(re.Float),this.precision=t}get ArrayType(){switch(this.precision){case Bs.HALF:return Uint16Array;case Bs.SINGLE:return Float32Array;case Bs.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}SAe=Symbol.toStringTag;B0[SAe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(B0.prototype);class VAe extends B0{constructor(){super(Bs.HALF)}}class WX extends B0{constructor(){super(Bs.SINGLE)}}class GX extends B0{constructor(){super(Bs.DOUBLE)}}Object.defineProperty(VAe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(WX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(GX.prototype,"ArrayType",{value:Float64Array});class OA extends dn{constructor(){super(re.Binary)}toString(){return"Binary"}}TAe=Symbol.toStringTag;OA[TAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(OA.prototype);class r$ extends dn{constructor(){super(re.LargeBinary)}toString(){return"LargeBinary"}}CAe=Symbol.toStringTag;r$[CAe]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeBinary"))(r$.prototype);class ME extends dn{constructor(){super(re.Utf8)}toString(){return"Utf8"}}AAe=Symbol.toStringTag;ME[AAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(ME.prototype);class i$ extends dn{constructor(){super(re.LargeUtf8)}toString(){return"LargeUtf8"}}IAe=Symbol.toStringTag;i$[IAe]=(e=>(e.ArrayType=Uint8Array,e.OffsetArrayType=BigInt64Array,e[Symbol.toStringTag]="LargeUtf8"))(i$.prototype);class $A extends dn{constructor(){super(re.Bool)}toString(){return"Bool"}}kAe=Symbol.toStringTag;$A[kAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))($A.prototype);class s$ extends dn{constructor(t,n,r=128){super(re.Decimal),this.scale=t,this.precision=n,this.bitWidth=r}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}RAe=Symbol.toStringTag;s$[RAe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(s$.prototype);class LE extends dn{constructor(t){super(re.Date),this.unit=t}toString(){return`Date${(this.unit+1)*32}<${Mc[this.unit]}>`}}NAe=Symbol.toStringTag;LE[NAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(LE.prototype);class cEt extends LE{constructor(){super(Mc.DAY)}}class fEt extends LE{constructor(){super(Mc.MILLISECOND)}}class _m extends dn{constructor(t,n){super(re.Time),this.unit=t,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${jt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}PAe=Symbol.toStringTag;_m[PAe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(_m.prototype);class dEt extends _m{constructor(){super(jt.SECOND,32)}}class hEt extends _m{constructor(){super(jt.MILLISECOND,32)}}class pEt extends _m{constructor(){super(jt.MICROSECOND,64)}}class mEt extends _m{constructor(){super(jt.NANOSECOND,64)}}class o$ extends dn{constructor(t,n){super(re.Timestamp),this.unit=t,this.timezone=n}toString(){return`Timestamp<${jt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}DAe=Symbol.toStringTag;o$[DAe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(o$.prototype);class FE extends dn{constructor(t){super(re.Interval),this.unit=t}toString(){return`Interval<${Lc[this.unit]}>`}}OAe=Symbol.toStringTag;FE[OAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(FE.prototype);class gEt extends FE{constructor(){super(Lc.DAY_TIME)}}class yEt extends FE{constructor(){super(Lc.YEAR_MONTH)}}class a$ extends dn{constructor(t){super(re.Duration),this.unit=t}toString(){return`Duration<${jt[this.unit]}>`}}$Ae=Symbol.toStringTag;a$[$Ae]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(a$.prototype);class jE extends dn{constructor(t){super(re.List),this.children=[t]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}MAe=Symbol.toStringTag;jE[MAe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(jE.prototype);class da extends dn{constructor(t){super(re.Struct),this.children=t}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}LAe=Symbol.toStringTag;da[LAe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(da.prototype);class MA extends dn{constructor(t,n,r){super(re.Union),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}FAe=Symbol.toStringTag;MA[FAe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(MA.prototype);class u$ extends dn{constructor(t){super(re.FixedSizeBinary),this.byteWidth=t}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}jAe=Symbol.toStringTag;u$[jAe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(u$.prototype);class BE extends dn{constructor(t,n){super(re.FixedSizeList),this.listSize=t,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}BAe=Symbol.toStringTag;BE[BAe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(BE.prototype);class LA extends dn{constructor(t,n=!1){var r,i,s;if(super(re.Map),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}UAe=Symbol.toStringTag;LA[UAe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(LA.prototype);const vEt=(e=>()=>++e)(-1);class U0 extends dn{constructor(t,n,r,i){super(re.Dictionary),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?vEt():jo(r)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}zAe=Symbol.toStringTag;U0[zAe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(U0.prototype);function Md(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class In{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return bEt(this,t,n)}getVisitFnByTypeId(t,n=!0){return $_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitLargeUtf8(t,...n){return null}visitBinary(t,...n){return null}visitLargeBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function bEt(e,t,n=!0){return typeof t=="number"?$_(e,t,n):typeof t=="string"&&t in re?$_(e,re[t],n):t&&t instanceof dn?$_(e,Sfe(t),n):t!=null&&t.type&&t.type instanceof dn?$_(e,Sfe(t.type),n):$_(e,re.NONE,n)}function $_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.LargeUtf8:r=e.visitLargeUtf8;break;case re.Binary:r=e.visitBinary;break;case re.LargeBinary:r=e.visitLargeBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Sfe(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Bs.HALF:return re.Float16;case Bs.SINGLE:return re.Float32;case Bs.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.LargeBinary:return re.LargeBinary;case re.Utf8:return re.Utf8;case re.LargeUtf8:return re.LargeUtf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case jt.SECOND:return re.TimeSecond;case jt.MILLISECOND:return re.TimeMillisecond;case jt.MICROSECOND:return re.TimeMicrosecond;case jt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case jt.SECOND:return re.TimestampSecond;case jt.MILLISECOND:return re.TimestampMillisecond;case jt.MICROSECOND:return re.TimestampMicrosecond;case jt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Mc.DAY:return re.DateDay;case Mc.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Lc.DAY_TIME:return re.IntervalDayTime;case Lc.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case jt.SECOND:return re.DurationSecond;case jt.MILLISECOND:return re.DurationMillisecond;case jt.MICROSECOND:return re.DurationMicrosecond;case jt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case eu.Dense:return re.DenseUnion;case eu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}In.prototype.visitInt8=null;In.prototype.visitInt16=null;In.prototype.visitInt32=null;In.prototype.visitInt64=null;In.prototype.visitUint8=null;In.prototype.visitUint16=null;In.prototype.visitUint32=null;In.prototype.visitUint64=null;In.prototype.visitFloat16=null;In.prototype.visitFloat32=null;In.prototype.visitFloat64=null;In.prototype.visitDateDay=null;In.prototype.visitDateMillisecond=null;In.prototype.visitTimestampSecond=null;In.prototype.visitTimestampMillisecond=null;In.prototype.visitTimestampMicrosecond=null;In.prototype.visitTimestampNanosecond=null;In.prototype.visitTimeSecond=null;In.prototype.visitTimeMillisecond=null;In.prototype.visitTimeMicrosecond=null;In.prototype.visitTimeNanosecond=null;In.prototype.visitDenseUnion=null;In.prototype.visitSparseUnion=null;In.prototype.visitIntervalDayTime=null;In.prototype.visitIntervalYearMonth=null;In.prototype.visitDuration=null;In.prototype.visitDurationSecond=null;In.prototype.visitDurationMillisecond=null;In.prototype.visitDurationMicrosecond=null;In.prototype.visitDurationNanosecond=null;const HAe=new Float64Array(1),c_=new Uint32Array(HAe.buffer);function qAe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function WAe(e){if(e!==e)return 32256;HAe[0]=e;const t=(c_[1]&2147483648)>>16&65535;let n=c_[1]&2146435072,r=0;return n>=1089470464?c_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(c_[1]&1048575)>>10):n<=1056964608?(r=1048576+(c_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(c_[1]&1048575)+512>>10),t|n|r&65535}class Qt extends In{}function en(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const _Et=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},YX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},wEt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},EEt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},GAe=(e,t,n,r)=>{if(n+1<t.length){const i=jo(t[n]),s=jo(t[n+1]);e.set(r.subarray(0,s-i),i)}},xEt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Bm=({values:e},t,n)=>{e[t]=n},KX=({values:e},t,n)=>{e[t]=n},YAe=({values:e},t,n)=>{e[t]=WAe(n)},SEt=(e,t,n)=>{switch(e.type.precision){case Bs.HALF:return YAe(e,t,n);case Bs.SINGLE:case Bs.DOUBLE:return KX(e,t,n)}},XX=({values:e},t,n)=>{_Et(e,t,n.valueOf())},QX=({values:e},t,n)=>{YX(e,t*2,n.valueOf())},KAe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},XAe=({values:e,valueOffsets:t},n,r)=>GAe(e,t,n,r),QAe=({values:e,valueOffsets:t},n,r)=>GAe(e,t,n,P6(r)),JAe=(e,t,n)=>{e.type.unit===Mc.DAY?XX(e,t,n):QX(e,t,n)},JX=({values:e},t,n)=>YX(e,t*2,n/1e3),ZX=({values:e},t,n)=>YX(e,t*2,n),eQ=({values:e},t,n)=>wEt(e,t*2,n),tQ=({values:e},t,n)=>EEt(e,t*2,n),ZAe=(e,t,n)=>{switch(e.type.unit){case jt.SECOND:return JX(e,t,n);case jt.MILLISECOND:return ZX(e,t,n);case jt.MICROSECOND:return eQ(e,t,n);case jt.NANOSECOND:return tQ(e,t,n)}},nQ=({values:e},t,n)=>{e[t]=n},rQ=({values:e},t,n)=>{e[t]=n},iQ=({values:e},t,n)=>{e[t]=n},sQ=({values:e},t,n)=>{e[t]=n},eIe=(e,t,n)=>{switch(e.type.unit){case jt.SECOND:return nQ(e,t,n);case jt.MILLISECOND:return rQ(e,t,n);case jt.MICROSECOND:return iQ(e,t,n);case jt.NANOSECOND:return sQ(e,t,n)}},tIe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},TEt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Fc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},CEt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Fc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},AEt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),IEt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),kEt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),REt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),NEt=(e,t,n)=>{const r=e.type.children.map(s=>Fc.getVisitFn(s.type)),i=n instanceof Map?kEt(t,n):n instanceof dr?IEt(t,n):Array.isArray(n)?AEt(t,n):REt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},PEt=(e,t,n)=>{e.type.mode===eu.Dense?nIe(e,t,n):rIe(e,t,n)},nIe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Fc.visit(i,e.valueOffsets[t],n)},rIe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Fc.visit(i,t,n)},DEt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},iIe=(e,t,n)=>{e.type.unit===Lc.DAY_TIME?oQ(e,t,n):aQ(e,t,n)},oQ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},aQ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},uQ=({values:e},t,n)=>{e[t]=n},lQ=({values:e},t,n)=>{e[t]=n},cQ=({values:e},t,n)=>{e[t]=n},fQ=({values:e},t,n)=>{e[t]=n},sIe=(e,t,n)=>{switch(e.type.unit){case jt.SECOND:return uQ(e,t,n);case jt.MILLISECOND:return lQ(e,t,n);case jt.MICROSECOND:return cQ(e,t,n);case jt.NANOSECOND:return fQ(e,t,n)}},OEt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Fc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Qt.prototype.visitBool=en(xEt);Qt.prototype.visitInt=en(Bm);Qt.prototype.visitInt8=en(Bm);Qt.prototype.visitInt16=en(Bm);Qt.prototype.visitInt32=en(Bm);Qt.prototype.visitInt64=en(Bm);Qt.prototype.visitUint8=en(Bm);Qt.prototype.visitUint16=en(Bm);Qt.prototype.visitUint32=en(Bm);Qt.prototype.visitUint64=en(Bm);Qt.prototype.visitFloat=en(SEt);Qt.prototype.visitFloat16=en(YAe);Qt.prototype.visitFloat32=en(KX);Qt.prototype.visitFloat64=en(KX);Qt.prototype.visitUtf8=en(QAe);Qt.prototype.visitLargeUtf8=en(QAe);Qt.prototype.visitBinary=en(XAe);Qt.prototype.visitLargeBinary=en(XAe);Qt.prototype.visitFixedSizeBinary=en(KAe);Qt.prototype.visitDate=en(JAe);Qt.prototype.visitDateDay=en(XX);Qt.prototype.visitDateMillisecond=en(QX);Qt.prototype.visitTimestamp=en(ZAe);Qt.prototype.visitTimestampSecond=en(JX);Qt.prototype.visitTimestampMillisecond=en(ZX);Qt.prototype.visitTimestampMicrosecond=en(eQ);Qt.prototype.visitTimestampNanosecond=en(tQ);Qt.prototype.visitTime=en(eIe);Qt.prototype.visitTimeSecond=en(nQ);Qt.prototype.visitTimeMillisecond=en(rQ);Qt.prototype.visitTimeMicrosecond=en(iQ);Qt.prototype.visitTimeNanosecond=en(sQ);Qt.prototype.visitDecimal=en(tIe);Qt.prototype.visitList=en(TEt);Qt.prototype.visitStruct=en(NEt);Qt.prototype.visitUnion=en(PEt);Qt.prototype.visitDenseUnion=en(nIe);Qt.prototype.visitSparseUnion=en(rIe);Qt.prototype.visitDictionary=en(DEt);Qt.prototype.visitInterval=en(iIe);Qt.prototype.visitIntervalDayTime=en(oQ);Qt.prototype.visitIntervalYearMonth=en(aQ);Qt.prototype.visitDuration=en(sIe);Qt.prototype.visitDurationSecond=en(uQ);Qt.prototype.visitDurationMillisecond=en(lQ);Qt.prototype.visitDurationMicrosecond=en(cQ);Qt.prototype.visitDurationNanosecond=en(fQ);Qt.prototype.visitFixedSizeList=en(OEt);Qt.prototype.visitMap=en(CEt);const Fc=new Qt,vf=Symbol.for("parent"),Uw=Symbol.for("rowIndex");class dQ{constructor(t,n){return this[vf]=t,this[Uw]=n,new Proxy(this,new MEt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Uw],n=this[vf],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Ku.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${F1(t)}: ${F1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new $Et(this[vf],this[Uw])}}class $Et{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ku.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(dQ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[vf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Uw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class MEt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[vf].type.children.map(n=>n.name)}has(t,n){return t[vf].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[vf].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[vf].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Ku.visit(t[vf].children[r],t[Uw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[vf].type.children.findIndex(s=>s.name===n);return i!==-1?(Fc.visit(t[vf].children[i],t[Uw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class qt extends In{}function Jt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const LEt=(e,t)=>864e5*e[t],hQ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),FEt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,jEt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,oIe=e=>new Date(e),BEt=(e,t)=>oIe(LEt(e,t)),UEt=(e,t)=>oIe(hQ(e,t)),zEt=(e,t)=>null,aIe=(e,t,n)=>{if(n+1>=t.length)return null;const r=jo(t[n]),i=jo(t[n+1]);return e.subarray(r,i)},VEt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},uIe=({values:e},t)=>BEt(e,t),lIe=({values:e},t)=>UEt(e,t*2),Ay=({stride:e,values:t},n)=>t[e*n],HEt=({stride:e,values:t},n)=>qAe(t[e*n]),cIe=({values:e},t)=>e[t],qEt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),fIe=({values:e,valueOffsets:t},n)=>aIe(e,t,n),dIe=({values:e,valueOffsets:t},n)=>{const r=aIe(e,t,n);return r!==null?Tz(r):null},WEt=({values:e},t)=>e[t],GEt=({type:e,values:t},n)=>e.precision!==Bs.HALF?t[n]:qAe(t[n]),YEt=(e,t)=>e.type.unit===Mc.DAY?uIe(e,t):lIe(e,t),hIe=({values:e},t)=>1e3*hQ(e,t*2),pIe=({values:e},t)=>hQ(e,t*2),mIe=({values:e},t)=>FEt(e,t*2),gIe=({values:e},t)=>jEt(e,t*2),KEt=(e,t)=>{switch(e.type.unit){case jt.SECOND:return hIe(e,t);case jt.MILLISECOND:return pIe(e,t);case jt.MICROSECOND:return mIe(e,t);case jt.NANOSECOND:return gIe(e,t)}},yIe=({values:e},t)=>e[t],vIe=({values:e},t)=>e[t],bIe=({values:e},t)=>e[t],_Ie=({values:e},t)=>e[t],XEt=(e,t)=>{switch(e.type.unit){case jt.SECOND:return yIe(e,t);case jt.MILLISECOND:return vIe(e,t);case jt.MICROSECOND:return bIe(e,t);case jt.NANOSECOND:return _Ie(e,t)}},QEt=({values:e,stride:t},n)=>FX.decimal(e.subarray(t*n,t*(n+1))),JEt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new dr([u])},ZEt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new $6(o.slice(i,s-i))},ext=(e,t)=>new dQ(e,t),txt=(e,t)=>e.type.mode===eu.Dense?wIe(e,t):EIe(e,t),wIe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ku.visit(r,e.valueOffsets[t])},EIe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ku.visit(r,t)},nxt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},rxt=(e,t)=>e.type.unit===Lc.DAY_TIME?xIe(e,t):SIe(e,t),xIe=({values:e},t)=>e.subarray(2*t,2*(t+1)),SIe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},TIe=({values:e},t)=>e[t],CIe=({values:e},t)=>e[t],AIe=({values:e},t)=>e[t],IIe=({values:e},t)=>e[t],ixt=(e,t)=>{switch(e.type.unit){case jt.SECOND:return TIe(e,t);case jt.MILLISECOND:return CIe(e,t);case jt.MICROSECOND:return AIe(e,t);case jt.NANOSECOND:return IIe(e,t)}},sxt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new dr([s])};qt.prototype.visitNull=Jt(zEt);qt.prototype.visitBool=Jt(VEt);qt.prototype.visitInt=Jt(WEt);qt.prototype.visitInt8=Jt(Ay);qt.prototype.visitInt16=Jt(Ay);qt.prototype.visitInt32=Jt(Ay);qt.prototype.visitInt64=Jt(cIe);qt.prototype.visitUint8=Jt(Ay);qt.prototype.visitUint16=Jt(Ay);qt.prototype.visitUint32=Jt(Ay);qt.prototype.visitUint64=Jt(cIe);qt.prototype.visitFloat=Jt(GEt);qt.prototype.visitFloat16=Jt(HEt);qt.prototype.visitFloat32=Jt(Ay);qt.prototype.visitFloat64=Jt(Ay);qt.prototype.visitUtf8=Jt(dIe);qt.prototype.visitLargeUtf8=Jt(dIe);qt.prototype.visitBinary=Jt(fIe);qt.prototype.visitLargeBinary=Jt(fIe);qt.prototype.visitFixedSizeBinary=Jt(qEt);qt.prototype.visitDate=Jt(YEt);qt.prototype.visitDateDay=Jt(uIe);qt.prototype.visitDateMillisecond=Jt(lIe);qt.prototype.visitTimestamp=Jt(KEt);qt.prototype.visitTimestampSecond=Jt(hIe);qt.prototype.visitTimestampMillisecond=Jt(pIe);qt.prototype.visitTimestampMicrosecond=Jt(mIe);qt.prototype.visitTimestampNanosecond=Jt(gIe);qt.prototype.visitTime=Jt(XEt);qt.prototype.visitTimeSecond=Jt(yIe);qt.prototype.visitTimeMillisecond=Jt(vIe);qt.prototype.visitTimeMicrosecond=Jt(bIe);qt.prototype.visitTimeNanosecond=Jt(_Ie);qt.prototype.visitDecimal=Jt(QEt);qt.prototype.visitList=Jt(JEt);qt.prototype.visitStruct=Jt(ext);qt.prototype.visitUnion=Jt(txt);qt.prototype.visitDenseUnion=Jt(wIe);qt.prototype.visitSparseUnion=Jt(EIe);qt.prototype.visitDictionary=Jt(nxt);qt.prototype.visitInterval=Jt(rxt);qt.prototype.visitIntervalDayTime=Jt(xIe);qt.prototype.visitIntervalYearMonth=Jt(SIe);qt.prototype.visitDuration=Jt(ixt);qt.prototype.visitDurationSecond=Jt(TIe);qt.prototype.visitDurationMillisecond=Jt(CIe);qt.prototype.visitDurationMicrosecond=Jt(AIe);qt.prototype.visitDurationNanosecond=Jt(IIe);qt.prototype.visitFixedSizeList=Jt(sxt);qt.prototype.visitMap=Jt(ZEt);const Ku=new qt,kf=Symbol.for("keys"),zw=Symbol.for("vals");class $6{constructor(t){return this[kf]=new dr([t.children[0]]).memoize(),this[zw]=t.children[1],new Proxy(this,new axt)}[Symbol.iterator](){return new oxt(this[kf],this[zw])}get size(){return this[kf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[kf],n=this[zw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Ku.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${F1(t)}: ${F1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class oxt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ku.visit(this.vals,t)]})}}class axt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[kf].toArray().map(String)}has(t,n){return t[kf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[kf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[kf].indexOf(n);if(r!==-1){const i=Ku.visit(Reflect.get(t,zw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[kf].indexOf(n);return i!==-1?(Fc.visit(Reflect.get(t,zw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties($6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[kf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[zw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Tfe;function kIe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Tfe=s,s=o,o=Tfe),o>i&&(o=i),r?r(e,s,o):[s,o]}const Cfe=e=>e!==e;function eS(e){if(typeof e!=="object"||e===null)return Cfe(e)?Cfe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?tEt(e,n):!1:e instanceof Map?lxt(e):Array.isArray(e)?uxt(e):e instanceof dr?cxt(e):fxt(e,!0)}function uxt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=eS(e[n]);return M6(t)}function lxt(e){let t=-1;const n=[];for(const r of e.values())n[++t]=eS(r);return M6(n)}function cxt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=eS(e.get(n));return M6(t)}function fxt(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=eS(e[n[i]]);return M6(r,n)}function M6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return dxt(e,n);case Map:return Afe(e,n,n.keys());case $6:case dQ:case Object:case void 0:return Afe(e,n,t||Object.keys(n))}return n instanceof dr?hxt(e,n):!1}}function dxt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function hxt(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function Afe(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function RIe(e,t,n,r){return(n&1<<r)!==0}function pxt(e,t,n,r){return(n&1<<r)>>r}function l$(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):NIe(new pQ(n,e,t,null,RIe)).subarray(0,r)),i}return n}function NIe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class pQ{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Nz(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new pQ(e,t,n-t,e,pxt))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return Nz(e,t,i)+Nz(e,r,n)+mxt(e,i>>3,r-i>>3)}function mxt(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=Uj(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=Uj(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=Uj(s.getUint8(i)),i+=1;return r}function Uj(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const gxt=-1;class _r{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return dn.isSparseUnion(t)?this.children.some(n=>n.nullable):dn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(dn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=gxt&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-Nz(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof _r?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Md(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(dn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===eu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(dn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===eu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(l$(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new _r(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(l$(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[_p.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[_p.TYPE])&&(o[_p.TYPE]=s.subarray(t,t+n)),(s=o[_p.OFFSET])&&(o[_p.OFFSET]=s.subarray(t,t+n+1))||(s=o[_p.DATA])&&(o[_p.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}_r.prototype.children=Object.freeze([]);class b2 extends In{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new _r(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.data),s=Jn(t.nullBitmap),o=mT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new _r(n,r,a,u,[o,i,s])}visitLargeUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.data),s=Jn(t.nullBitmap),o=hfe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new _r(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.data),s=Jn(t.nullBitmap),o=mT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new _r(n,r,a,u,[o,i,s])}visitLargeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.data),s=Jn(t.nullBitmap),o=hfe(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new _r(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Jn(t.nullBitmap),o=mT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new _r(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Jn(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Is(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(dn.isSparseUnion(n))return new _r(n,r,o,a,[void 0,void 0,void 0,s],i);const u=mT(t.valueOffsets);return new _r(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.indices.ArrayType,t.data),{["dictionary"]:o=new dr([new b2().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new _r(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Jn(t.nullBitmap),s=Is(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new b2().visit({type:n.valueType})}=t,s=Jn(t.nullBitmap),{["length"]:o=i.length/Md(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new _r(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new b2().visit({type:n.childType})}=t,s=Jn(t.nullBitmap),o=mT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new _r(n,r,a,u,[o,void 0,s],[i])}}const yxt=new b2;function aa(e){return yxt.visit(e)}class Ife{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function vxt(e){return e.some(t=>t.nullable)}function PIe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function DIe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function OIe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function mQ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function gQ(e,t){return e.getValid(t)}function c$(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return mQ(r,this._offsets,n,t)}}function $Ie(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=mQ(s,this._offsets,r,n);return t=void 0,o}}function MIe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):mQ(s,this._offsets,i,n);return t=void 0,o}}class Wt extends In{}function bxt(e,t){return t===null&&e.length>0?0:-1}function _xt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new pQ(n,e.offset+(t||0),e.length,n,RIe)){if(!i)return r;++r}return-1}function sn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return _xt(e,n)}const r=Ku.getVisitFn(e),i=eS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function LIe(e,t,n){const r=Ku.getVisitFn(e),i=eS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Wt.prototype.visitNull=bxt;Wt.prototype.visitBool=sn;Wt.prototype.visitInt=sn;Wt.prototype.visitInt8=sn;Wt.prototype.visitInt16=sn;Wt.prototype.visitInt32=sn;Wt.prototype.visitInt64=sn;Wt.prototype.visitUint8=sn;Wt.prototype.visitUint16=sn;Wt.prototype.visitUint32=sn;Wt.prototype.visitUint64=sn;Wt.prototype.visitFloat=sn;Wt.prototype.visitFloat16=sn;Wt.prototype.visitFloat32=sn;Wt.prototype.visitFloat64=sn;Wt.prototype.visitUtf8=sn;Wt.prototype.visitLargeUtf8=sn;Wt.prototype.visitBinary=sn;Wt.prototype.visitLargeBinary=sn;Wt.prototype.visitFixedSizeBinary=sn;Wt.prototype.visitDate=sn;Wt.prototype.visitDateDay=sn;Wt.prototype.visitDateMillisecond=sn;Wt.prototype.visitTimestamp=sn;Wt.prototype.visitTimestampSecond=sn;Wt.prototype.visitTimestampMillisecond=sn;Wt.prototype.visitTimestampMicrosecond=sn;Wt.prototype.visitTimestampNanosecond=sn;Wt.prototype.visitTime=sn;Wt.prototype.visitTimeSecond=sn;Wt.prototype.visitTimeMillisecond=sn;Wt.prototype.visitTimeMicrosecond=sn;Wt.prototype.visitTimeNanosecond=sn;Wt.prototype.visitDecimal=sn;Wt.prototype.visitList=sn;Wt.prototype.visitStruct=sn;Wt.prototype.visitUnion=sn;Wt.prototype.visitDenseUnion=LIe;Wt.prototype.visitSparseUnion=LIe;Wt.prototype.visitDictionary=sn;Wt.prototype.visitInterval=sn;Wt.prototype.visitIntervalDayTime=sn;Wt.prototype.visitIntervalYearMonth=sn;Wt.prototype.visitDuration=sn;Wt.prototype.visitDurationSecond=sn;Wt.prototype.visitDurationMillisecond=sn;Wt.prototype.visitDurationMicrosecond=sn;Wt.prototype.visitDurationNanosecond=sn;Wt.prototype.visitFixedSizeList=sn;Wt.prototype.visitMap=sn;const f$=new Wt;class Gt extends In{}function Zt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof tu&&t.bitWidth!==64||t instanceof _m&&t.bitWidth!==64||t instanceof B0&&t.precision!==Bs.HALF))return new Ife(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Ife(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new wxt(o)})}class wxt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Gt.prototype.visitNull=Zt;Gt.prototype.visitBool=Zt;Gt.prototype.visitInt=Zt;Gt.prototype.visitInt8=Zt;Gt.prototype.visitInt16=Zt;Gt.prototype.visitInt32=Zt;Gt.prototype.visitInt64=Zt;Gt.prototype.visitUint8=Zt;Gt.prototype.visitUint16=Zt;Gt.prototype.visitUint32=Zt;Gt.prototype.visitUint64=Zt;Gt.prototype.visitFloat=Zt;Gt.prototype.visitFloat16=Zt;Gt.prototype.visitFloat32=Zt;Gt.prototype.visitFloat64=Zt;Gt.prototype.visitUtf8=Zt;Gt.prototype.visitLargeUtf8=Zt;Gt.prototype.visitBinary=Zt;Gt.prototype.visitLargeBinary=Zt;Gt.prototype.visitFixedSizeBinary=Zt;Gt.prototype.visitDate=Zt;Gt.prototype.visitDateDay=Zt;Gt.prototype.visitDateMillisecond=Zt;Gt.prototype.visitTimestamp=Zt;Gt.prototype.visitTimestampSecond=Zt;Gt.prototype.visitTimestampMillisecond=Zt;Gt.prototype.visitTimestampMicrosecond=Zt;Gt.prototype.visitTimestampNanosecond=Zt;Gt.prototype.visitTime=Zt;Gt.prototype.visitTimeSecond=Zt;Gt.prototype.visitTimeMillisecond=Zt;Gt.prototype.visitTimeMicrosecond=Zt;Gt.prototype.visitTimeNanosecond=Zt;Gt.prototype.visitDecimal=Zt;Gt.prototype.visitList=Zt;Gt.prototype.visitStruct=Zt;Gt.prototype.visitUnion=Zt;Gt.prototype.visitDenseUnion=Zt;Gt.prototype.visitSparseUnion=Zt;Gt.prototype.visitDictionary=Zt;Gt.prototype.visitInterval=Zt;Gt.prototype.visitIntervalDayTime=Zt;Gt.prototype.visitIntervalYearMonth=Zt;Gt.prototype.visitDuration=Zt;Gt.prototype.visitDurationSecond=Zt;Gt.prototype.visitDurationMillisecond=Zt;Gt.prototype.visitDurationMicrosecond=Zt;Gt.prototype.visitDurationNanosecond=Zt;Gt.prototype.visitFixedSizeList=Zt;Gt.prototype.visitMap=Zt;const yQ=new Gt;var FIe;const jIe={},BIe={};class dr{constructor(t){var n,r,i;const s=t[0]instanceof dr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof _r)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l}=jIe[o.typeId],c=s[0];this.isValid=f=>gQ(c,f),this.get=f=>a(c,f),this.set=(f,d)=>u(c,f,d),this.indexOf=f=>l(c,f),this._offsets=[0,c.length];break}default:Object.setPrototypeOf(this,BIe[o.typeId]),this._offsets=DIe(s);break}this.data=s,this.type=o,this.stride=Md(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullable(){return vxt(this.data)}get nullCount(){return PIe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}[Symbol.iterator](){return yQ.visit(this)}concat(...t){return new dr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new dr(kIe(this,t,n,({data:r,_offsets:i},s,o)=>OIe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new dr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return dn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(dn.isDictionary(this.type)){const t=new d$(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new dr(n)}return new d$(this)}unmemoize(){if(dn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new dr(n)}return this}}FIe=Symbol.toStringTag;dr[FIe]=(e=>{e.type=dn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Ku.getVisitFnByTypeId(n),i=Fc.getVisitFnByTypeId(n),s=f$.getVisitFnByTypeId(n);jIe[n]={get:r,set:i,indexOf:s},BIe[n]=Object.create(e,{isValid:{value:c$(gQ)},get:{value:c$(Ku.getVisitFnByTypeId(n))},set:{value:$Ie(Fc.getVisitFnByTypeId(n))},indexOf:{value:MIe(f$.getVisitFnByTypeId(n))}})}return"Vector"})(dr.prototype);class d$ extends dr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new d$(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new dr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function Ext(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${xxt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function xxt(e){return typeof e!="bigint"?F1(e):`${F1(e)}n`}function zj(e,t){const n=Math.ceil(e)*t-1;return(n-n%64+64||64)/t}function kfe(e,t=0){return e.length>=t?e.subarray(0,t):Cz(new e.constructor(t),e,0)}class gk{constructor(t,n=0,r=1){this.length=Math.ceil(n/r),this.buffer=new t(this.length),this.stride=r,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?zj(r*1,this.BYTES_PER_ELEMENT):zj(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=zj(t*this.stride,this.BYTES_PER_ELEMENT);const n=kfe(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this.buffer=new this.ArrayType,this}_resize(t){return this.buffer=kfe(this.buffer,t)}}class yk extends gk{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class UIe extends yk{constructor(){super(Uint8Array,0,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class zIe extends yk{constructor(t){super(t.OffsetArrayType,1,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&r>=0&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,this.BYTES_PER_ELEMENT>4?BigInt(0):0),super.flush(t+1)}}let rl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Md(t),this._nulls=new UIe,n&&n.length>0&&(this._isValid=Ext(n))}toVector(){return new dr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),aa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};rl.prototype.length=1;rl.prototype.stride=1;rl.prototype.children=null;rl.prototype.finished=!1;rl.prototype.nullValues=null;rl.prototype._isValid=()=>!0;class Um extends rl{constructor(t){super(t),this._values=new yk(this.ArrayType,0,this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class tS extends rl{constructor(t){super(t),this._pendingLength=0,this._offsets=new zIe(t.type)}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof $6?n[kf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class Pz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}class fl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new fl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Ir),(n||new fl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ds.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Od).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Pz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new Pz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ds.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Ar{constructor(t=[],n,r,i=Ds.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Oz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ar(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ar(n,this.metadata)}assign(...t){const n=t[0]instanceof Ar?t[0]:Array.isArray(t[0])?new Ar(t[0]):new Ar(t),r=[...this.fields],i=FN(FN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:FN(FN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=Oz(s,new Map);return new Ar([...r,...s],i,new Map([...this.dictionaries,...o]))}}Ar.prototype.fields=null;Ar.prototype.metadata=null;Ar.prototype.dictionaries=null;let Br=class Dz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new Dz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],Dz.new(n,r,i,s)}};Br.prototype.type=null;Br.prototype.name=null;Br.prototype.nullable=null;Br.prototype.metadata=null;function FN(e,t){return new Map([...e||new Map,...t||new Map])}function Oz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(dn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Oz(s.children,t)}return t}var Sxt=gAe,Txt=Z3;class $z{static decode(t){t=new Txt(Jn(t));const n=fl.getRootAsFooter(t),r=Ar.decode(n.schema(),new Map,n.version());return new Cxt(r,n)}static encode(t){const n=new Sxt,r=Ar.encode(n,t.schema);fl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())z0.encode(n,o);const i=n.endVector();fl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())z0.encode(n,o);const s=n.endVector();return fl.startFooter(n),fl.addSchema(n,r),fl.addVersion(n,Ds.V5),fl.addRecordBatches(n,i),fl.addDictionaries(n,s),fl.finishFooterBuffer(n,fl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ds.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class Cxt extends $z{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return z0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return z0.decode(n)}return null}}class z0{static decode(t){return new z0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return Pz.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=jo(r),this.bodyLength=jo(n)}}const jN=Object.freeze({done:!0,value:void 0});class VIe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Axt extends VIe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Cp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(jN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return pfe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return pfe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Cp(this,void 0,void 0,function*(){return yield this.abort(t),jN})}return(t){return Cp(this,void 0,void 0,function*(){return yield this.close(),jN})}read(t){return Cp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Cp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(jN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Vj extends Axt{write(t){if((t=Jn(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?Tz(this.toUint8Array(!0)):this.toUint8Array(!1).then(Tz)}toUint8Array(t=!1){return t?Ah(this._values)[0]:Cp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=YC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Ah(o,a)[0]})}}class HIe extends tS{constructor(t){super(t),this._values=new gk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Jn(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class qIe extends tS{constructor(t){super(t),this._values=new gk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Jn(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,BigInt(0));else{const u=a.length;i.set(a,s),r.set(o,BigInt(u)),s+=u}}}class Ixt extends rl{constructor(t){super(t),this._values=new UIe}setValue(t,n){this._values.set(t,+n)}}class L6 extends Um{}L6.prototype._setValue=JAe;class WIe extends L6{}WIe.prototype._setValue=XX;class GIe extends L6{}GIe.prototype._setValue=QX;class YIe extends Um{}YIe.prototype._setValue=tIe;class kxt extends rl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new U0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=h$({type:this.type.indices,nullValues:n}),this.dictionary=h$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class KIe extends Um{}KIe.prototype._setValue=KAe;class Rxt extends rl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new BE(this.type.listSize,new Br(n,t.type,!0)),r}}class F6 extends Um{setValue(t,n){this._values.set(t,n)}}class Nxt extends F6{setValue(t,n){super.setValue(t,WAe(n))}}class Pxt extends F6{}class Dxt extends F6{}class j6 extends Um{}j6.prototype._setValue=iIe;class XIe extends j6{}XIe.prototype._setValue=oQ;class QIe extends j6{}QIe.prototype._setValue=aQ;class nS extends Um{}nS.prototype._setValue=sIe;class JIe extends nS{}JIe.prototype._setValue=uQ;class ZIe extends nS{}ZIe.prototype._setValue=lQ;class eke extends nS{}eke.prototype._setValue=cQ;class tke extends nS{}tke.prototype._setValue=fQ;class zm extends Um{setValue(t,n){this._values.set(t,n)}}class Oxt extends zm{}class $xt extends zm{}class Mxt extends zm{}class Lxt extends zm{}class Fxt extends zm{}class jxt extends zm{}class Bxt extends zm{}class Uxt extends zm{}class zxt extends tS{constructor(t){super(t),this._offsets=new zIe(t.type)}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new jE(new Br(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class Vxt extends tS{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new LA(new Br(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class Hxt extends rl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class qxt extends rl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new da([...this.type.children,new Br(n,t.type,!0)]),r}}class rS extends Um{}rS.prototype._setValue=ZAe;class nke extends rS{}nke.prototype._setValue=JX;class rke extends rS{}rke.prototype._setValue=ZX;class ike extends rS{}ike.prototype._setValue=eQ;class ske extends rS{}ske.prototype._setValue=tQ;class iS extends Um{}iS.prototype._setValue=eIe;class oke extends iS{}oke.prototype._setValue=nQ;class ake extends iS{}ake.prototype._setValue=rQ;class uke extends iS{}uke.prototype._setValue=iQ;class lke extends iS{}lke.prototype._setValue=sQ;class vQ extends rl{constructor(t){super(t),this._typeIds=new yk(Int8Array,0,1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Br(n,t.type)];return this.type=new MA(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class Wxt extends vQ{}class Gxt extends vQ{constructor(t){super(t),this._offsets=new yk(Int32Array)}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class cke extends tS{constructor(t){super(t),this._values=new gk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,P6(n))}_flushPending(t,n){}}cke.prototype._flushPending=HIe.prototype._flushPending;class fke extends tS{constructor(t){super(t),this._values=new gk(Uint8Array)}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,P6(n))}_flushPending(t,n){}}fke.prototype._flushPending=qIe.prototype._flushPending;class Yxt extends In{visitNull(){return Hxt}visitBool(){return Ixt}visitInt(){return zm}visitInt8(){return Oxt}visitInt16(){return $xt}visitInt32(){return Mxt}visitInt64(){return Lxt}visitUint8(){return Fxt}visitUint16(){return jxt}visitUint32(){return Bxt}visitUint64(){return Uxt}visitFloat(){return F6}visitFloat16(){return Nxt}visitFloat32(){return Pxt}visitFloat64(){return Dxt}visitUtf8(){return cke}visitLargeUtf8(){return fke}visitBinary(){return HIe}visitLargeBinary(){return qIe}visitFixedSizeBinary(){return KIe}visitDate(){return L6}visitDateDay(){return WIe}visitDateMillisecond(){return GIe}visitTimestamp(){return rS}visitTimestampSecond(){return nke}visitTimestampMillisecond(){return rke}visitTimestampMicrosecond(){return ike}visitTimestampNanosecond(){return ske}visitTime(){return iS}visitTimeSecond(){return oke}visitTimeMillisecond(){return ake}visitTimeMicrosecond(){return uke}visitTimeNanosecond(){return lke}visitDecimal(){return YIe}visitList(){return zxt}visitStruct(){return qxt}visitUnion(){return vQ}visitDenseUnion(){return Gxt}visitSparseUnion(){return Wxt}visitDictionary(){return kxt}visitInterval(){return j6}visitIntervalDayTime(){return XIe}visitIntervalYearMonth(){return QIe}visitDuration(){return nS}visitDurationSecond(){return JIe}visitDurationMillisecond(){return ZIe}visitDurationMicrosecond(){return eke}visitDurationNanosecond(){return tke}visitFixedSizeList(){return Rxt}visitMap(){return Vxt}}const Kxt=new Yxt;class Yt extends In{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function au(e,t){return t instanceof e.constructor}function Sb(e,t){return e===t||au(e,t)}function Vm(e,t){return e===t||au(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function B6(e,t){return e===t||au(e,t)&&e.precision===t.precision}function Xxt(e,t){return e===t||au(e,t)&&e.byteWidth===t.byteWidth}function bQ(e,t){return e===t||au(e,t)&&e.unit===t.unit}function vk(e,t){return e===t||au(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function bk(e,t){return e===t||au(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Qxt(e,t){return e===t||au(e,t)&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}function Jxt(e,t){return e===t||au(e,t)&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}function _Q(e,t){return e===t||au(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&V0.compareManyFields(e.children,t.children)}function Zxt(e,t){return e===t||au(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&V0.visit(e.indices,t.indices)&&V0.visit(e.dictionary,t.dictionary)}function wQ(e,t){return e===t||au(e,t)&&e.unit===t.unit}function _k(e,t){return e===t||au(e,t)&&e.unit===t.unit}function eSt(e,t){return e===t||au(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}function tSt(e,t){return e===t||au(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&V0.compareManyFields(e.children,t.children)}Yt.prototype.visitNull=Sb;Yt.prototype.visitBool=Sb;Yt.prototype.visitInt=Vm;Yt.prototype.visitInt8=Vm;Yt.prototype.visitInt16=Vm;Yt.prototype.visitInt32=Vm;Yt.prototype.visitInt64=Vm;Yt.prototype.visitUint8=Vm;Yt.prototype.visitUint16=Vm;Yt.prototype.visitUint32=Vm;Yt.prototype.visitUint64=Vm;Yt.prototype.visitFloat=B6;Yt.prototype.visitFloat16=B6;Yt.prototype.visitFloat32=B6;Yt.prototype.visitFloat64=B6;Yt.prototype.visitUtf8=Sb;Yt.prototype.visitLargeUtf8=Sb;Yt.prototype.visitBinary=Sb;Yt.prototype.visitLargeBinary=Sb;Yt.prototype.visitFixedSizeBinary=Xxt;Yt.prototype.visitDate=bQ;Yt.prototype.visitDateDay=bQ;Yt.prototype.visitDateMillisecond=bQ;Yt.prototype.visitTimestamp=vk;Yt.prototype.visitTimestampSecond=vk;Yt.prototype.visitTimestampMillisecond=vk;Yt.prototype.visitTimestampMicrosecond=vk;Yt.prototype.visitTimestampNanosecond=vk;Yt.prototype.visitTime=bk;Yt.prototype.visitTimeSecond=bk;Yt.prototype.visitTimeMillisecond=bk;Yt.prototype.visitTimeMicrosecond=bk;Yt.prototype.visitTimeNanosecond=bk;Yt.prototype.visitDecimal=Sb;Yt.prototype.visitList=Qxt;Yt.prototype.visitStruct=Jxt;Yt.prototype.visitUnion=_Q;Yt.prototype.visitDenseUnion=_Q;Yt.prototype.visitSparseUnion=_Q;Yt.prototype.visitDictionary=Zxt;Yt.prototype.visitInterval=wQ;Yt.prototype.visitIntervalDayTime=wQ;Yt.prototype.visitIntervalYearMonth=wQ;Yt.prototype.visitDuration=_k;Yt.prototype.visitDurationSecond=_k;Yt.prototype.visitDurationMillisecond=_k;Yt.prototype.visitDurationMicrosecond=_k;Yt.prototype.visitDurationNanosecond=_k;Yt.prototype.visitFixedSizeList=eSt;Yt.prototype.visitMap=tSt;const V0=new Yt;function Mz(e,t){return V0.compareSchemas(e,t)}function h$(e){const t=e.type,n=new(Kxt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(h$(Object.assign(Object.assign({},l),{type:u})))}}return n}function Hj(e,t){return nSt(e,t.map(n=>n.data.concat()))}function nSt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=rSt(n,o,c,t,i),o>0&&(r[s++]=aa({type:new da(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new yl(e,f))]}function rSt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:aa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var dke;class Cu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Ar([]),this._offsets=[0],this;let i,s;t[0]instanceof Ar&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof yl)return[u];if(u instanceof Cu)return u.batches;if(u instanceof _r){if(u.type instanceof da)return[new yl(new Ar(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new dr([u[h]])),f=i??new Ar(l.map((h,p)=>new Br(String(h),c[p].type,c[p].nullable))),[,d]=Hj(f,c);return d.length===0?[new yl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Ar([]),!(i instanceof Ar))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof yl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Mz(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??DIe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=PIe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}[Symbol.iterator](){return this.batches.length>0?yQ.visit(new dr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Cu(n,r.map(i=>new yl(n,i)))}slice(t,n){const r=this.schema;[t,n]=kIe({length:this.numRows},t,n);const i=OIe(this.data,this._offsets,t,n);return new Cu(r,i.map(s=>new yl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=aa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new dr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new dr([aa({type:new bm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=Hj(r,a)}return new Cu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Cu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Cu(...Hj(s,o))}}dke=Symbol.toStringTag;Cu[dke]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=c$(gQ),e.get=c$(Ku.getVisitFn(re.Struct)),e.set=$Ie(Fc.getVisitFn(re.Struct)),e.indexOf=MIe(f$.getVisitFn(re.Struct)),"Table"))(Cu.prototype);var hke;let yl=class yC{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ar))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=aa({nullCount:0,type:new da(this.schema.fields),children:this.schema.fields.map(n=>aa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof _r))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Rfe(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Br.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Ar(r),a=aa({type:new da(r),length:s,children:i,nullCount:0});[this.schema,this.data]=Rfe(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=pke(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ku.visit(this.data,t)}set(t,n){return Fc.visit(this.data,t,n)}indexOf(t,n){return f$.visit(this.data,t,n)}[Symbol.iterator](){return yQ.visit(new dr([this.data]))}toArray(){return[...this]}concat(...t){return new Cu(this.schema,[this,...t])}slice(t,n){const[r]=new dr([this.data]).slice(t,n).data;return new yC(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new dr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new dr([aa({type:new bm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Ar(s,new Map(this.schema.metadata)),i=aa({type:new da(s),children:o})}return new yC(r,i)}select(t){const n=this.schema.select(t),r=new da(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new yC(n,aa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=aa({type:new da(n.fields),length:this.numRows,children:r});return new yC(n,i)}};hke=Symbol.toStringTag;yl[hke]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(yl.prototype);function Rfe(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:aa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),aa({type:new da(i),length:n,children:s})]}function pke(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])pke(a.children,l==null?void 0:l.children,n);if(dn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class iSt extends yl{constructor(t){const n=t.fields.map(i=>aa({type:i.type})),r=aa({type:new da(t.fields),nullCount:0,children:n});super(t,r)}}let ag=class Id{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new Id).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Ir),(n||new Id).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ds.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):vs.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Ns).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ds.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,vs.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return Id.startMessage(t),Id.addVersion(t,n),Id.addHeaderType(t,r),Id.addHeader(t,i),Id.addBodyLength(t,s),Id.addCustomMetadata(t,o),Id.endMessage(t)}};class sSt extends In{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return Efe.startNull(n),Efe.endNull(n)}visitInt(t,n){return gl.startInt(n),gl.addBitWidth(n,t.bitWidth),gl.addIsSigned(n,t.isSigned),gl.endInt(n)}visitFloat(t,n){return Gd.startFloatingPoint(n),Gd.addPrecision(n,t.precision),Gd.endFloatingPoint(n)}visitBinary(t,n){return yfe.startBinary(n),yfe.endBinary(n)}visitLargeBinary(t,n){return bfe.startLargeBinary(n),bfe.endLargeBinary(n)}visitBool(t,n){return vfe.startBool(n),vfe.endBool(n)}visitUtf8(t,n){return xfe.startUtf8(n),xfe.endUtf8(n)}visitLargeUtf8(t,n){return _fe.startLargeUtf8(n),_fe.endLargeUtf8(n)}visitDecimal(t,n){return R_.startDecimal(n),R_.addScale(n,t.scale),R_.addPrecision(n,t.precision),R_.addBitWidth(n,t.bitWidth),R_.endDecimal(n)}visitDate(t,n){return fD.startDate(n),fD.addUnit(n,t.unit),fD.endDate(n)}visitTime(t,n){return pC.startTime(n),pC.addUnit(n,t.unit),pC.addBitWidth(n,t.bitWidth),pC.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return mC.startTimestamp(n),mC.addUnit(n,t.unit),r!==void 0&&mC.addTimezone(n,r),mC.endTimestamp(n)}visitInterval(t,n){return Yd.startInterval(n),Yd.addUnit(n,t.unit),Yd.endInterval(n)}visitDuration(t,n){return dD.startDuration(n),dD.addUnit(n,t.unit),dD.endDuration(n)}visitList(t,n){return wfe.startList(n),wfe.endList(n)}visitStruct(t,n){return Xv.startStruct_(n),Xv.endStruct_(n)}visitUnion(t,n){wv.startTypeIdsVector(n,t.typeIds.length);const r=wv.createTypeIdsVector(n,t.typeIds);return wv.startUnion(n),wv.addMode(n,t.mode),wv.addTypeIds(n,r),wv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Rp.startDictionaryEncoding(n),Rp.addId(n,BigInt(t.id)),Rp.addIsOrdered(n,t.isOrdered),r!==void 0&&Rp.addIndexType(n,r),Rp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return hD.startFixedSizeBinary(n),hD.addByteWidth(n,t.byteWidth),hD.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return pD.startFixedSizeList(n),pD.addListSize(n,t.listSize),pD.endFixedSizeList(n)}visitMap(t,n){return mD.startMap(n),mD.addKeysSorted(n,t.keysSorted),mD.endMap(n)}}const qj=new sSt;function oSt(e,t=new Map){return new Ar(uSt(e,t),yD(e.metadata),t)}function mke(e){return new zl(e.count,gke(e.columns),yke(e.columns))}function aSt(e){return new Ih(mke(e.data),e.id,e.isDelta)}function uSt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Br.fromJSON(n,t))}function Nfe(e,t){return(e.children||[]).filter(Boolean).map(n=>Br.fromJSON(n,t))}function gke(e){return(e||[]).reduce((t,n)=>[...t,new H0(n.count,lSt(n.VALIDITY)),...gke(n.children)],[])}function yke(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Zd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Zd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Zd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Zd(t.length,i.DATA.length)),t=yke(i.children,t)}return t}function lSt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function cSt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=Dfe(e,Nfe(e,t)),i=new Br(e.name,o,e.nullable,yD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Pfe(r):new j0,a=new U0(t.get(n),r,n,s.isOrdered),i=new Br(e.name,a,e.nullable,yD(e.metadata))):(r=(r=s.indexType)?Pfe(r):new j0,t.set(n,o=Dfe(e,Nfe(e,t))),a=new U0(o,r,n,s.isOrdered),i=new Br(e.name,a,e.nullable,yD(e.metadata))),i||null}function yD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Pfe(e){return new tu(e.isSigned,e.bitWidth)}function Dfe(e,t){const n=e.type.name;switch(n){case"NONE":return new bm;case"null":return new bm;case"binary":return new OA;case"largebinary":return new r$;case"utf8":return new ME;case"largeutf8":return new i$;case"bool":return new $A;case"list":return new jE((t||[])[0]);case"struct":return new da(t||[]);case"struct_":return new da(t||[])}switch(n){case"int":{const r=e.type;return new tu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new B0(Bs[r.precision])}case"decimal":{const r=e.type;return new s$(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new LE(Mc[r.unit])}case"time":{const r=e.type;return new _m(jt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new o$(jt[r.unit],r.timezone)}case"interval":{const r=e.type;return new FE(Lc[r.unit])}case"duration":{const r=e.type;return new a$(jt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new MA(eu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new u$(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new BE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new LA((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var fSt=gAe,dSt=Z3;class Kd{static fromJSON(t,n){const r=new Kd(0,Ds.V5,n);return r._createHeader=hSt(t,n),r}static decode(t){t=new dSt(Jn(t));const n=ag.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Kd(r,i,s);return o._createHeader=pSt(n,s),o}static encode(t){const n=new fSt;let r=-1;return t.isSchema()?r=Ar.encode(n,t.header()):t.isRecordBatch()?r=zl.encode(n,t.header()):t.isDictionaryBatch()&&(r=Ih.encode(n,t.header())),ag.startMessage(n),ag.addVersion(n,Ds.V5),ag.addHeader(n,r),ag.addHeaderType(n,t.headerType),ag.addBodyLength(n,BigInt(t.bodyLength)),ag.finishMessageBuffer(n,ag.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Ar)return new Kd(0,Ds.V5,vs.Schema,t);if(t instanceof zl)return new Kd(n,Ds.V5,vs.RecordBatch,t);if(t instanceof Ih)return new Kd(n,Ds.V5,vs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===vs.Schema}isRecordBatch(){return this.headerType===vs.RecordBatch}isDictionaryBatch(){return this.headerType===vs.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=jo(t)}}class zl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=jo(t)}}class Ih{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=jo(n)}}class Zd{constructor(t,n){this.offset=jo(t),this.length=jo(n)}}class H0{constructor(t,n){this.length=jo(t),this.nullCount=jo(n)}}function hSt(e,t){return()=>{switch(t){case vs.Schema:return Ar.fromJSON(e);case vs.RecordBatch:return zl.fromJSON(e);case vs.DictionaryBatch:return Ih.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${vs[t]}, type: ${t} }`)}}function pSt(e,t){return()=>{switch(t){case vs.Schema:return Ar.decode(e.header(new Od),new Map,e.version());case vs.RecordBatch:return zl.decode(e.header(new bp),e.version());case vs.DictionaryBatch:return Ih.decode(e.header(new I_),e.version())}throw new Error(`Unrecognized Message type: { name: ${vs[t]}, type: ${t} }`)}}Br.encode=TSt;Br.decode=xSt;Br.fromJSON=cSt;Ar.encode=SSt;Ar.decode=mSt;Ar.fromJSON=oSt;zl.encode=CSt;zl.decode=gSt;zl.fromJSON=mke;Ih.encode=ASt;Ih.decode=ySt;Ih.fromJSON=aSt;H0.encode=ISt;H0.decode=bSt;Zd.encode=kSt;Zd.decode=vSt;function mSt(e,t=new Map,n=Ds.V5){const r=ESt(e,t);return new Ar(r,vD(e),t,n)}function gSt(e,t=Ds.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new zl(e.length(),_St(e),wSt(e,t))}function ySt(e,t=Ds.V5){return new Ih(zl.decode(e.data(),t),e.id(),e.isDelta())}function vSt(e){return new Zd(e.offset(),e.length())}function bSt(e){return new H0(e.length(),e.nullCount())}function _St(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=H0.decode(n));return t}function wSt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ds.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Zd.decode(r));return n}function ESt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Br.decode(r,t));return n}function Ofe(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Br.decode(r,t));return n}function xSt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=Mfe(e,Ofe(e,t)),r=new Br(e.name(),i,e.nullable(),vD(e))):t.has(n=jo(a.id()))?(s=(s=a.indexType())?$fe(s):new j0,o=new U0(t.get(n),s,n,a.isOrdered()),r=new Br(e.name(),o,e.nullable(),vD(e))):(s=(s=a.indexType())?$fe(s):new j0,t.set(n,i=Mfe(e,Ofe(e,t))),o=new U0(i,s,n,a.isOrdered()),r=new Br(e.name(),o,e.nullable(),vD(e))),r||null}function vD(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function $fe(e){return new tu(e.isSigned(),e.bitWidth())}function Mfe(e,t){const n=e.typeType();switch(n){case Jr.NONE:return new bm;case Jr.Null:return new bm;case Jr.Binary:return new OA;case Jr.LargeBinary:return new r$;case Jr.Utf8:return new ME;case Jr.LargeUtf8:return new i$;case Jr.Bool:return new $A;case Jr.List:return new jE((t||[])[0]);case Jr.Struct_:return new da(t||[])}switch(n){case Jr.Int:{const r=e.type(new gl);return new tu(r.isSigned(),r.bitWidth())}case Jr.FloatingPoint:{const r=e.type(new Gd);return new B0(r.precision())}case Jr.Decimal:{const r=e.type(new R_);return new s$(r.scale(),r.precision(),r.bitWidth())}case Jr.Date:{const r=e.type(new fD);return new LE(r.unit())}case Jr.Time:{const r=e.type(new pC);return new _m(r.unit(),r.bitWidth())}case Jr.Timestamp:{const r=e.type(new mC);return new o$(r.unit(),r.timezone())}case Jr.Interval:{const r=e.type(new Yd);return new FE(r.unit())}case Jr.Duration:{const r=e.type(new dD);return new a$(r.unit())}case Jr.Union:{const r=e.type(new wv);return new MA(r.mode(),r.typeIdsArray()||[],t||[])}case Jr.FixedSizeBinary:{const r=e.type(new hD);return new u$(r.byteWidth())}case Jr.FixedSizeList:{const r=e.type(new pD);return new BE(r.listSize(),(t||[])[0])}case Jr.Map:{const r=e.type(new mD);return new LA((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${Jr[n]}" (${n})`)}function SSt(e,t){const n=t.fields.map(s=>Br.encode(e,s));Od.startFieldsVector(e,n.length);const r=Od.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Od.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Ns.startKeyValue(e),Ns.addKey(e,a),Ns.addValue(e,u),Ns.endKeyValue(e)})):-1;return Od.startSchema(e),Od.addFields(e,r),Od.addEndianness(e,RSt?$E.Little:$E.Big),i!==-1&&Od.addCustomMetadata(e,i),Od.endSchema(e)}function TSt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;dn.isDictionary(s)?(o=s.dictionary.typeId,i=qj.visit(s,e),r=qj.visit(s.dictionary,e)):r=qj.visit(s,e);const a=(s.children||[]).map(c=>Br.encode(e,c)),u=ic.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?ic.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Ns.startKeyValue(e),Ns.addKey(e,d),Ns.addValue(e,h),Ns.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),ic.startField(e),ic.addType(e,r),ic.addTypeType(e,o),ic.addChildren(e,u),ic.addNullable(e,!!t.nullable),n!==-1&&ic.addName(e,n),i!==-1&&ic.addDictionary(e,i),l!==-1&&ic.addCustomMetadata(e,l),ic.endField(e)}function CSt(e,t){const n=t.nodes||[],r=t.buffers||[];bp.startNodesVector(e,n.length);for(const o of n.slice().reverse())H0.encode(e,o);const i=e.endVector();bp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Zd.encode(e,o);const s=e.endVector();return bp.startRecordBatch(e),bp.addLength(e,BigInt(t.length)),bp.addNodes(e,i),bp.addBuffers(e,s),bp.endRecordBatch(e)}function ASt(e,t){const n=zl.encode(e,t.data);return I_.startDictionaryBatch(e),I_.addId(e,BigInt(t.id)),I_.addIsDelta(e,t.isDelta),I_.addData(e,n),I_.endDictionaryBatch(e)}function ISt(e,t){return bAe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function kSt(e,t){return vAe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const RSt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),Lz="ARROW1",EQ=new Uint8Array(Lz.length);for(let e=0;e<Lz.length;e+=1)EQ[e]=Lz.codePointAt(e);EQ.length;class Oi extends In{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof yl?s.data.children:s.data),r=new Oi;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof dr)return this.visitMany(t.data),this;const{type:n}=t;if(!dn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(dn.isUnion(n))this.nodes.push(new H0(r,0));else{const{nullCount:i}=t;dn.isNull(n)||Hf.call(this,i<=0?new Uint8Array(0):l$(t.offset,r,t.nullBitmap)),this.nodes.push(new H0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Hf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Zd(this._byteLength,t)),this._byteLength+=t,this}function NSt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Hf.call(this,i),n.mode===eu.Sparse)return Fz.call(this,e);if(n.mode===eu.Dense){if(e.offset<=0)return Hf.call(this,s),Fz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Hf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function PSt(e){let t;return e.nullCount>=e.length?Hf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Hf.call(this,l$(e.offset,e.length,t)):Hf.call(this,NIe(e.values))}function Hm(e){return Hf.call(this,e.values.subarray(0,e.length*e.stride))}function U6(e){const{length:t,values:n,valueOffsets:r}=e,i=jo(r[0]),s=jo(r[t]),o=Math.min(s-i,n.byteLength-i);return Hf.call(this,pAe(-i,t+1,r)),Hf.call(this,n.subarray(i,i+o)),this}function xQ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Hf.call(this,pAe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Fz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}Oi.prototype.visitBool=PSt;Oi.prototype.visitInt=Hm;Oi.prototype.visitFloat=Hm;Oi.prototype.visitUtf8=U6;Oi.prototype.visitLargeUtf8=U6;Oi.prototype.visitBinary=U6;Oi.prototype.visitLargeBinary=U6;Oi.prototype.visitFixedSizeBinary=Hm;Oi.prototype.visitDate=Hm;Oi.prototype.visitTimestamp=Hm;Oi.prototype.visitTime=Hm;Oi.prototype.visitDecimal=Hm;Oi.prototype.visitList=xQ;Oi.prototype.visitStruct=Fz;Oi.prototype.visitUnion=NSt;Oi.prototype.visitInterval=Hm;Oi.prototype.visitDuration=Hm;Oi.prototype.visitFixedSizeList=xQ;Oi.prototype.visitMap=xQ;class vke extends VIe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new Vj,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Cy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return D6(t)?t.then(n=>this.writeAll(n)):O6(t)?AQ(this,t):CQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof Vj?this._sink=t:(this._sink=new Vj,t&&Ywt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Kwt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Mz(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Cu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof yl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Mz(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof yl?t instanceof iSt||this._writeRecordBatch(t):t instanceof Cu?this.writeAll(t.batches):MX(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Kd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===vs.RecordBatch?this._recordBatchBlocks.push(new z0(a,t.bodyLength,this._position)):t.headerType===vs.DictionaryBatch&&this._dictionaryBlocks.push(new z0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Jn(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Kd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(EQ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=Oi.assemble(t),o=new zl(t.numRows,r,i),a=Kd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=Oi.assemble(new dr([t])),u=new zl(t.length,s,o),l=new Ih(u,n,r),c=Kd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class SQ extends vke{static writeAll(t,n){const r=new SQ(n);return D6(t)?t.then(i=>r.writeAll(i)):O6(t)?AQ(r,t):CQ(r,t)}}class TQ extends vke{static writeAll(t){const n=new TQ;return D6(t)?t.then(r=>n.writeAll(r)):O6(t)?AQ(n,t):CQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=$z.encode(new $z(t,Ds.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function CQ(e,t){let n=t;t instanceof Cu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function AQ(e,t){var n,r,i,s,o,a,u;return Cp(this,void 0,void 0,function*(){try{for(n=!0,r=YC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function DSt(e,t="stream"){return(t==="stream"?SQ:TQ).writeAll(e).toUint8Array(!0)}function IQ(e,t=1){return(e*t+63&-64||64)/t}function q0(e,t,n=e.BYTES_PER_ELEMENT){return new e(IQ(t,n))}function kQ(e){return e instanceof _r?e:new _r(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function OSt(e){return new dr([kQ(e)])}const RQ=new TextEncoder;function $St(e,t,n){const r=RQ.encode(n);return e.set(r,t),r.length}function MSt(e,t,n){return RQ.encodeInto(n,e.subarray(t)).written}const LSt=RQ.encodeInto?MSt:$St;function Lfe(e,t){const n=q0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function FSt(e,t){const n=q0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function jSt(e,t){const n=q0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function BSt(e,t){const n=q0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function USt(e){const t=h$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function zSt(e,t,n){const r=q0(Int32Array,t+1),i=q0(Uint8Array,3*n);let s=0;return{set(o,a){s+=LSt(i,s,o),r[a+1]=s},data:()=>{const o=IQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function VSt(e,t){const n=[],r=q0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:HSt(e.dictionary,n,o)})}}function HSt(e,t,n){const r=zSt(e,t.length,n);return t.forEach(r.set),OSt(r.data())}function qSt(e,t){const n=q0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function WSt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?Lfe:null;break;case re.Float:r=e.precision>0?Lfe:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?VSt:null;break;case re.Bool:r=FSt;break;case re.Date:r=e.unit?BSt:jSt;break}return r==null?USt(e):n?qSt(r(e,t),t):r(e,t)}function GSt(e,t){const n=e.length,r=IQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),kQ({type:t,length:n,buffers:[null,i]})}function bke(e,t,n,r,i=!0){const s=WSt(r,e,i);return t(n,s.set),kQ(s.data())}function NQ(e){if(e instanceof dn||e==null)return e;switch(e){case re.Binary:return new OA;case re.Bool:return new $A;case re.DateDay:return new cEt;case re.DateMillisecond:case re.Date:return new fEt;case re.Dictionary:return new U0(new ME,new j0);case re.Float16:return new VAe;case re.Float32:return new WX;case re.Float64:case re.Float:return new GX;case re.Int8:return new jX;case re.Int16:return new BX;case re.Int32:case re.Int:return new j0;case re.Int64:return new UX;case re.IntervalDayTime:return new gEt;case re.Interval:case re.IntervalYearMonth:return new yEt;case re.Null:return new bm;case re.TimeMicrosecond:return new pEt;case re.TimeMillisecond:case re.Time:return new hEt;case re.TimeNanosecond:return new mEt;case re.TimeSecond:return new dEt;case re.Uint8:return new zX;case re.Uint16:return new VX;case re.Uint32:return new HX;case re.Uint64:return new qX;case re.Utf8:return new ME;default:Sn(`Unsupported type code: ${Ch(e)}. Use a data type constructor instead?`)}}function YSt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function _ke(e,t){const n=jz();return e(t,n.add),n}function jz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(vm(t))++e.dates,YSt(t)&&++e.utcdays;else if(Kv(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=jz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=jz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return NQ(KSt(e))}};return e}function KSt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:Sn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:Sn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Br.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new BE(e.minlen,n):new jE(n)}else if(e.structs===t){const n=e.struct_prof;return new da(Object.keys(n).map(r=>Br.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;Sn("Type inference failure")}}}}function XSt(e,t,n,r,i,s=!0){if(i=NQ(i),!i){const o=_ke(r,t);s=o.nulls>0,i=o.type()}return bke(n,r,t,i,s)}function QSt(e,t,n,r,i,s=!0){i=NQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=JSt(o);if(u&&a&&Ffe(u.type,i))return u;const l=o.data;if(pk(l)){const c=ZSt(l);if(a&&c&&Ffe(c,i))return GSt(l,c);i=i||c,s=!1}if(!i){const c=_ke(r,o);s=c.nulls>0,i=c.type()}return bke(n,r,o,i,s)}function JSt(e){return e instanceof dr?e:e.vector instanceof dr?e.vector:null}function ZSt(e){const n={Float32Array:WX,Float64Array:GX,Int8Array:jX,Int16Array:BX,Int32Array:j0,Uint8Array:zX,Uint16Array:VX,Uint32Array:HX,BigInt64Array:UX,BigUint64Array:qX}[e.constructor.name];return n?new n:null}function Ffe(e,t){return!e||!t?!0:e.compareTo(t)}function eTt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function tTt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&Kv(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const nTt=()=>Sn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function rTt(){try{return Cu}catch{nTt()}}function wke(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=iTt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Sn("Column length mismatch"),a[l]=c});const u=rTt();return new u(a)}function iTt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=mi(n)?n(e):fr(n)?n:null;if(fr(e))return{dataFrom:XSt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:eTt(e,r,i)};if(sTt(e))return{dataFrom:QSt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:tTt(e,r,i)};Sn("Unsupported input data type")}function sTt(e){return e&&mi(e.reify)}function oTt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return DSt(wke(e,r),n)}function aTt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function uTt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&vm(u))++i,aTt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function z6(e,t){return mi(t)?t(e):t||e.columnNames()}function Eke(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=uTt(lTt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function lTt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function PQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function cTt(e,t={}){const n=z6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":vm(l)?R6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return PQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function xke(e,t={}){if(mi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(vm(e))return t.utc?R6(e):B2e(e);{const r=JSON.stringify(e,(s,o)=>pk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function V6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function fTt(e,t={}){const n=z6(e,t.columns),{align:r,format:i}=Eke(e,n,t),s=dTt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(xke(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return PQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function dTt(e){return V6(e.style,t=>mi(t)?t:()=>t)}function hTt(e,t=!0,n=!1){return e===void 0||e?t:n}const pTt=e=>vm(e)?R6(e,!0):e;function mTt(e,t={}){const n=hTt(t.schema),r=t.format||{},i=z6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||pTt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function gTt(e,t={}){const n=z6(e,t.columns),{align:r,format:i}=Eke(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return PQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(xke(u,i[l]))+"|"}}),a+`
`}function Ske(e,t){for(const[n,r]of N6(t))e.set(n,r);return e}function yTt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function wm(e,t,n=new Map){return t=Za(t)?e.columnName(t):t,zo(t)?n.set(t,t):fr(t)?t.forEach(r=>wm(e,r,n)):mi(t)?wm(e,t(e),n):Ea(t)?Ske(n,t):Sn(`Invalid column selection: ${Ch(t)}`),n}function H6(e,t){return e.toObject=t,e}function Tke(e){return fr(e)?e.map(Tke):e&&e.toObject?e.toObject():e}function UE(){return H6(e=>e.columnNames(),()=>({all:[]}))}function Cke(...e){return e=e.flat(),H6(t=>{const n=wm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:Tke(e)}))}function vTt(e,t){return H6(n=>{let r=Za(e)?e:n.columnIndex(e),i=Za(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function bTt(e){return zo(e)&&(e=RegExp(yTt(e))),H6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function _Tt(e){return pk(e.data)?e.data.constructor:Array}class Np extends G_t{static from(t,n){return new Np(X_t(t,n),n)}static new(t,n){if(t instanceof Np)return t;const r={},i=[];for(const[s,o]of N6(t))r[s]=o,i.push(s);return new Np(r,n||i)}constructor(t,n,r,i,s,o){V6(t,K_t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Np(t||this._data,n||(t?null:this._names),o,i!==void 0?i:Twt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Xl(r).groupby(r.groups());return t.forEach(s=>{s=Np.new(s),s.numRows()!==n&&Sn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Sn(`Unrecognized column: ${t}`)}object(t=0){return jfe(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=wm(this,t.columns||UE()),o=fAe(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),Awt(this,u,a,n)}return a}*[Symbol.iterator](){const t=jfe(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(_Tt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=Cwt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return wke(this,t)}toArrowBuffer(t){return oTt(this,t)}toCSV(t){return cTt(this,t)}toHTML(t){return fTt(this,t)}toJSON(t){return mTt(this,t)}toMarkdown(t){return gTt(this,t)}}function jfe(e){let t=e._builder;if(!t){const n=fAe(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class wTt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function Zn(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=ETt[e.type];s&&s(e,t,n)}const BN=(e,t,n)=>{Zn(e.argument,t,n,e)},Wj=(e,t,n)=>{Zn(e.left,t,n,e),Zn(e.right,t,n,e)},Bfe=(e,t,n)=>{Zn(e.test,t,n,e),Zn(e.consequent,t,n,e),e.alternate&&Zn(e.alternate,t,n,e)},Gj=(e,t,n)=>{$d(e.params,t,n,e),Zn(e.body,t,n,e)},Ufe=(e,t,n)=>{Zn(e.callee,t,n,e),$d(e.arguments,t,n,e)},$d=(e,t,n,r)=>{e.forEach(i=>Zn(i,t,n,r))},ETt={TemplateLiteral:(e,t,n)=>{$d(e.expressions,t,n,e),$d(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{Zn(e.object,t,n,e),Zn(e.property,t,n,e)},CallExpression:Ufe,NewExpression:Ufe,ArrayExpression:(e,t,n)=>{$d(e.elements,t,n,e)},AssignmentExpression:Wj,AwaitExpression:BN,BinaryExpression:Wj,LogicalExpression:Wj,UnaryExpression:BN,UpdateExpression:BN,ConditionalExpression:Bfe,ObjectExpression:(e,t,n)=>{$d(e.properties,t,n,e)},Property:(e,t,n)=>{Zn(e.key,t,n,e),Zn(e.value,t,n,e)},ArrowFunctionExpression:Gj,FunctionExpression:Gj,FunctionDeclaration:Gj,VariableDeclaration:(e,t,n)=>{$d(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{Zn(e.id,t,n,e),Zn(e.init,t,n,e)},SpreadElement:(e,t,n)=>{Zn(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{$d(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{Zn(e.expression,t,n,e)},IfStatement:Bfe,ForStatement:(e,t,n)=>{Zn(e.init,t,n,e),Zn(e.test,t,n,e),Zn(e.update,t,n,e),Zn(e.body,t,n,e)},WhileStatement:(e,t,n)=>{Zn(e.test,t,n,e),Zn(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{Zn(e.body,t,n,e),Zn(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{Zn(e.discriminant,t,n,e),$d(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&Zn(e.test,t,n,e),$d(e.consequent,t,n,e)},ReturnStatement:BN,Program:(e,t,n)=>{Zn(e.body[0],t,n,e)}};function Ake(e){delete e.start,delete e.end,delete e.optional}function zfe(e){Ake(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function xTt(e){return Zn(e,null,{Column:zfe,Constant:zfe,Default:Ake}),e}function Os(e,t){return t&&t.type===e}function STt(e){return Os(Rwt,e)||Os(kwt,e)}function TTt(e){return mi(e)?e:()=>e}const CTt="Escaped functions are not valid as rollup or pivot values.";function ATt(e,t,n){e.aggronly&&Sn(CTt);const r="(row,data)=>fn("+cAe(e.table.columnNames())+",$)";return{escape:$X.escape(r,TTt(t.expr),n)}}var ITt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],Ike=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],kTt="-----------------------------------------------------------------------------------------------------------------------------------------------------",kke="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Yj={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Kj="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",RTt={5:Kj,"5module":Kj+" export import",6:Kj+" const class extends export import super"},NTt=/^in(stanceof)?$/,PTt=new RegExp("["+kke+"]"),DTt=new RegExp("["+kke+kTt+"]");function Bz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function Em(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&PTt.test(String.fromCharCode(e)):t===!1?!1:Bz(e,Ike)}function zE(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&DTt.test(String.fromCharCode(e)):t===!1?!1:Bz(e,Ike)||Bz(e,ITt)}var sr=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ec(e,t){return new sr(e,{beforeExpr:!0,binop:t})}var tc={beforeExpr:!0},mu={startsExpr:!0},DQ={};function qn(e,t){return t===void 0&&(t={}),t.keyword=e,DQ[e]=new sr(e,t)}var K={num:new sr("num",mu),regexp:new sr("regexp",mu),string:new sr("string",mu),name:new sr("name",mu),privateId:new sr("privateId",mu),eof:new sr("eof"),bracketL:new sr("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new sr("]"),braceL:new sr("{",{beforeExpr:!0,startsExpr:!0}),braceR:new sr("}"),parenL:new sr("(",{beforeExpr:!0,startsExpr:!0}),parenR:new sr(")"),comma:new sr(",",tc),semi:new sr(";",tc),colon:new sr(":",tc),dot:new sr("."),question:new sr("?",tc),questionDot:new sr("?."),arrow:new sr("=>",tc),template:new sr("template"),invalidTemplate:new sr("invalidTemplate"),ellipsis:new sr("...",tc),backQuote:new sr("`",mu),dollarBraceL:new sr("${",{beforeExpr:!0,startsExpr:!0}),eq:new sr("=",{beforeExpr:!0,isAssign:!0}),assign:new sr("_=",{beforeExpr:!0,isAssign:!0}),incDec:new sr("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new sr("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ec("||",1),logicalAND:ec("&&",2),bitwiseOR:ec("|",3),bitwiseXOR:ec("^",4),bitwiseAND:ec("&",5),equality:ec("==/!=/===/!==",6),relational:ec("</>/<=/>=",7),bitShift:ec("<</>>/>>>",8),plusMin:new sr("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ec("%",10),star:ec("*",10),slash:ec("/",10),starstar:new sr("**",{beforeExpr:!0}),coalesce:ec("??",1),_break:qn("break"),_case:qn("case",tc),_catch:qn("catch"),_continue:qn("continue"),_debugger:qn("debugger"),_default:qn("default",tc),_do:qn("do",{isLoop:!0,beforeExpr:!0}),_else:qn("else",tc),_finally:qn("finally"),_for:qn("for",{isLoop:!0}),_function:qn("function",mu),_if:qn("if"),_return:qn("return",tc),_switch:qn("switch"),_throw:qn("throw",tc),_try:qn("try"),_var:qn("var"),_const:qn("const"),_while:qn("while",{isLoop:!0}),_with:qn("with"),_new:qn("new",{beforeExpr:!0,startsExpr:!0}),_this:qn("this",mu),_super:qn("super",mu),_class:qn("class",mu),_extends:qn("extends",tc),_export:qn("export"),_import:qn("import",mu),_null:qn("null",mu),_true:qn("true",mu),_false:qn("false",mu),_in:qn("in",{beforeExpr:!0,binop:7}),_instanceof:qn("instanceof",{beforeExpr:!0,binop:7}),_typeof:qn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:qn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:qn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Qc=/\r\n?|\n|\u2028|\u2029/,OTt=new RegExp(Qc.source,"g");function sS(e){return e===10||e===13||e===8232||e===8233}function Rke(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(sS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var Nke=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,dc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Pke=Object.prototype,$Tt=Pke.hasOwnProperty,MTt=Pke.toString,wk=Object.hasOwn||function(e,t){return $Tt.call(e,t)},Vfe=Array.isArray||function(e){return MTt.call(e)==="[object Array]"},Hfe=Object.create(null);function Hg(e){return Hfe[e]||(Hfe[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function W0(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var LTt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,FA=function(t,n){this.line=t,this.column=n};FA.prototype.offset=function(t){return new FA(this.line,this.column+t)};var q6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function Dke(e,t){for(var n=1,r=0;;){var i=Rke(e,r,t);if(i<0)return new FA(n,t-r);++n,r=i}}var Uz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},qfe=!1;function FTt(e){var t={};for(var n in Uz)t[n]=e&&wk(e,n)?e[n]:Uz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!qfe&&typeof console=="object"&&console.warn&&(qfe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Vfe(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Vfe(t.onComment)&&(t.onComment=jTt(t,t.onComment)),t}function jTt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new q6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var jA=1,oS=2,OQ=4,Oke=8,$ke=16,Mke=32,$Q=64,Lke=128,Ek=256,MQ=jA|oS|Ek;function LQ(e,t){return oS|(e?OQ:0)|(t?Oke:0)}var p$=0,FQ=1,qm=2,Fke=3,jke=4,Bke=5,Hs=function(t,n,r){this.options=t=FTt(t),this.sourceFile=t.sourceFile,this.keywords=Hg(RTt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=Yj[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Hg(i);var s=(i?i+" ":"")+Yj.strict;this.reservedWordsStrict=Hg(s),this.reservedWordsStrictBind=Hg(s+" "+Yj.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Qc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(jA),this.regexpState=null,this.privateNameStack=[]},Gh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Hs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Gh.inFunction.get=function(){return(this.currentVarScope().flags&oS)>0};Gh.inGenerator.get=function(){return(this.currentVarScope().flags&Oke)>0&&!this.currentVarScope().inClassFieldInit};Gh.inAsync.get=function(){return(this.currentVarScope().flags&OQ)>0&&!this.currentVarScope().inClassFieldInit};Gh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&Ek)return!1;if(t.flags&oS)return(t.flags&OQ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Gh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&$Q)>0||n||this.options.allowSuperOutsideMethod};Gh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&Lke)>0};Gh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Gh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(oS|Ek))>0||n};Gh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Ek)>0};Hs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Hs.parse=function(t,n){return new this(n,t).parse()};Hs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Hs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Hs.prototype,Gh);var uu=Hs.prototype,BTt=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;uu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){dc.lastIndex=e,e+=dc.exec(this.input)[0].length;var t=BTt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){dc.lastIndex=e+t[0].length;var n=dc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Qc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,dc.lastIndex=e,e+=dc.exec(this.input)[0].length,this.input[e]===";"&&e++}};uu.eat=function(e){return this.type===e?(this.next(),!0):!1};uu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};uu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};uu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};uu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Qc.test(this.input.slice(this.lastTokEnd,this.start))};uu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};uu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};uu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};uu.expect=function(e){this.eat(e)||this.unexpected()};uu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var W6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};uu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};uu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};uu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};uu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var Ot=Hs.prototype;Ot.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var jQ={kind:"loop"},UTt={kind:"switch"};Ot.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;dc.lastIndex=this.pos;var t=dc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(Em(r,!0)){for(var i=n+1;zE(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!NTt.test(s))return!0}return!1};Ot.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;dc.lastIndex=this.pos;var e=dc.exec(this.input),t=this.pos+e[0].length,n;return!Qc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(zE(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};Ot.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){dc.lastIndex=this.pos;var o=dc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};Ot.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};Ot.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};Ot.parseDoStatement=function(e){return this.next(),this.labels.push(jQ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};Ot.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(jQ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=this.containsEsc,u=new W6,l=this.start,c=t>-1?this.parseExprSubscripts(u,"await"):this.parseExpression(!0,u);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(t>-1?(this.type===K._in&&this.unexpected(t),e.await=!0):o&&this.options.ecmaVersion>=8&&(c.start===l&&!a&&c.type==="Identifier"&&c.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(e.await=!1)),s&&o&&this.raise(c.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(c,!1,u),this.checkLValPattern(c),this.parseForIn(e,c)):(this.checkExpressionErrors(u,!0),t>-1&&this.unexpected(t),this.parseFor(e,c))};Ot.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,_2|(n?0:zz),!1,t)};Ot.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};Ot.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};Ot.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(UTt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};Ot.parseThrowStatement=function(e){return this.next(),Qc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var zTt=[];Ot.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?Mke:0),this.checkLValPattern(e,t?jke:qm),this.expect(K.parenR),e};Ot.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};Ot.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};Ot.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(jQ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};Ot.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};Ot.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};Ot.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};Ot.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};Ot.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};Ot.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};Ot.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};Ot.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};Ot.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?FQ:qm,!1)};var _2=1,zz=2,Uke=4;Ot.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&zz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&_2&&(e.id=t&Uke&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&zz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?FQ:qm:Fke));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(LQ(e.async,e.generator)),t&_2||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&_2?"FunctionDeclaration":"FunctionExpression")};Ot.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};Ot.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&VTt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};Ot.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&m$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};Ot.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};Ot.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};Ot.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&m$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};Ot.parseClassField=function(e){if(m$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&m$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};Ot.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(Ek|$Q);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};Ot.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,qm,!1)):(t===!0&&this.unexpected(),e.id=null)};Ot.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};Ot.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};Ot.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];wk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function VTt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function m$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}Ot.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};Ot.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};Ot.parseExportDeclaration=function(e){return this.parseStatement(null)};Ot.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,_2|Uke,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};Ot.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),wk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};Ot.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};Ot.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};Ot.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};Ot.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};Ot.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};Ot.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=zTt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};Ot.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,qm),this.finishNode(e,"ImportSpecifier")};Ot.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,qm),this.finishNode(e,"ImportDefaultSpecifier")};Ot.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,qm),this.finishNode(e,"ImportNamespaceSpecifier")};Ot.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};Ot.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return LTt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};Ot.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};Ot.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Jc=Hs.prototype;Jc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Jc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Jc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Jc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Jc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Jc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Jc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Jc.parseBindingListItem=function(e){return e};Jc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Jc.checkLValSimple=function(e,t,n){t===void 0&&(t=p$);var r=t!==p$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===qm&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(wk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==Bke&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Jc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=p$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Jc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=p$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var cf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},wi={b_stat:new cf("{",!1),b_expr:new cf("{",!0),b_tmpl:new cf("${",!1),p_stat:new cf("(",!1),p_expr:new cf("(",!0),q_tmpl:new cf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new cf("function",!1),f_expr:new cf("function",!0),f_expr_gen:new cf("function",!0,!1,null,!0),f_gen:new cf("function",!1,!1,null,!0)},aS=Hs.prototype;aS.initialContext=function(){return[wi.b_stat]};aS.curContext=function(){return this.context[this.context.length-1]};aS.braceIsBlock=function(e){var t=this.curContext();return t===wi.f_expr||t===wi.f_stat?!0:e===K.colon&&(t===wi.b_stat||t===wi.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Qc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===wi.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};aS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};aS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};aS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===wi.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?wi.b_stat:wi.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(wi.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?wi.p_stat:wi.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==wi.p_stat)&&!(e===K._return&&Qc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===wi.b_stat)?this.context.push(wi.f_expr):this.context.push(wi.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===wi.q_tmpl?this.context.pop():this.context.push(wi.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===wi.f_expr?this.context[t]=wi.f_expr_gen:this.context[t]=wi.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ln=Hs.prototype;ln.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};ln.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};ln.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new W6,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};ln.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};ln.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};ln.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};ln.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};ln.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&zke(a.argument)?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&Vz(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function zke(e){return e.type==="Identifier"||e.type==="ParenthesizedExpression"&&zke(e.expression)}function Vz(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&Vz(e.expression)||e.type==="ParenthesizedExpression"&&Vz(e.expression)}ln.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};ln.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};ln.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};ln.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};ln.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new W6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};ln.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(wi.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(wi.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};ln.parseExprAtomDefault=function(){this.unexpected()};ln.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};ln.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};ln.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};ln.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};ln.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};ln.shouldParseArrow=function(e){return!this.canInsertSemicolon()};ln.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new W6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};ln.parseParenItem=function(e){return e};ln.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var HTt=[];ln.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=HTt,this.finishNode(e,"NewExpression")};ln.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};ln.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};ln.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Qc.test(this.input.slice(this.lastTokEnd,this.start))};ln.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};ln.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};ln.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};ln.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};ln.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};ln.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};ln.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(LQ(t,r.generator)|$Q|(n?Lke:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};ln.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(LQ(n,!1)|$ke),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};ln.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,Bke),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};ln.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};ln.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,FQ,t?null:n)}};ln.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};ln.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};ln.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};ln.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};ln.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};ln.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};ln.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var g$=Hs.prototype;g$.raise=function(e,t){var n=Dke(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};g$.raiseRecoverable=g$.raise;g$.curPosition=function(){if(this.options.locations)return new FA(this.curLine,this.pos-this.lineStart)};var Iy=Hs.prototype,qTt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Iy.enterScope=function(e){this.scopeStack.push(new qTt(e))};Iy.exitScope=function(){this.scopeStack.pop()};Iy.treatFunctionsAsVarInScope=function(e){return e.flags&oS||!this.inModule&&e.flags&jA};Iy.declareName=function(e,t,n){var r=!1;if(t===qm){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&jA&&delete this.undefinedExports[e]}else if(t===jke){var s=this.currentScope();s.lexical.push(e)}else if(t===Fke){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&Mke&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&jA&&delete this.undefinedExports[e],u.flags&MQ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Iy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Iy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Iy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&MQ)return t}};Iy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&MQ&&!(t.flags&$ke))return t}};var G6=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new q6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},xk=Hs.prototype;xk.startNode=function(){return new G6(this,this.start,this.startLoc)};xk.startNodeAt=function(e,t){return new G6(this,e,t)};function Vke(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}xk.finishNode=function(e,t){return Vke.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};xk.finishNodeAt=function(e,t,n,r){return Vke.call(this,e,t,n,r)};xk.copyNode=function(e){var t=new G6(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var Hke="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",qke=Hke+" Extended_Pictographic",Wke=qke,Gke=Wke+" EBase EComp EMod EPres ExtPict",Yke=Gke,WTt=Yke,GTt={9:Hke,10:qke,11:Wke,12:Gke,13:Yke,14:WTt},YTt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",KTt={9:"",10:"",11:"",12:"",13:"",14:YTt},Wfe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Kke="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Xke=Kke+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Qke=Xke+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Jke=Qke+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Zke=Jke+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",XTt=Zke+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",QTt={9:Kke,10:Xke,11:Qke,12:Jke,13:Zke,14:XTt},eRe={};function JTt(e){var t=eRe[e]={binary:Hg(GTt[e]+" "+Wfe),binaryOfStrings:Hg(KTt[e]),nonBinary:{General_Category:Hg(Wfe),Script:Hg(QTt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var Xj=0,Gfe=[9,10,11,12,13,14];Xj<Gfe.length;Xj+=1){var ZTt=Gfe[Xj];JTt(ZTt)}var At=Hs.prototype,y$=function(t,n){this.parent=t,this.base=n||this};y$.prototype.separatedFrom=function(t){for(var n=this;n;n=n.parent)for(var r=t;r;r=r.parent)if(n.base===r.base&&n!==r)return!0;return!1};y$.prototype.sibling=function(){return new y$(this.parent,this.base)};var Yh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=eRe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};Yh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Yh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Yh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Yh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Yh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Yh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Yh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Yh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Yh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};function eCt(e){for(var t in e)return!0;return!1}At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&eCt(e.groupNames)&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames=Object.create(null),e.backReferenceNames.length=0,e.branchID=null,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames[r]||e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){var t=this.options.ecmaVersion>=16;for(t&&(e.branchID=new y$(e.branchID,null)),this.regexp_alternative(e);e.eat(124);)t&&(e.branchID=e.branchID.sibling()),this.regexp_alternative(e);t&&(e.branchID=e.branchID.parent),this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return tRe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function tRe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!tRe(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){this.regexp_eatGroupName(e)||e.raise("Invalid group");var t=this.options.ecmaVersion>=16,n=e.groupNames[e.lastStringValue];if(n)if(t)for(var r=0,i=n;r<i.length;r+=1){var s=i[r];s.separatedFrom(e.branchID)||e.raise("Duplicate capture group name")}else e.raise("Duplicate capture group name");t?(n||(e.groupNames[e.lastStringValue]=[])).push(e.branchID):e.groupNames[e.lastStringValue]=!0}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=W0(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=W0(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),tCt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function tCt(e){return Em(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),nCt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function nCt(e){return zE(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!Y6(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return nRe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function nRe(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&rCt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function rCt(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var rRe=0,xm=1,gc=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(iCt(t))return e.lastIntValue=-1,e.advance(),xm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===gc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return rRe};function iCt(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),xm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return rRe};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){wk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return xm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return gc;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";iRe(t=e.current());)e.lastStringValue+=W0(t),e.advance();return e.lastStringValue!==""};function iRe(e){return nRe(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";sCt(t=e.current());)e.lastStringValue+=W0(t),e.advance();return e.lastStringValue!==""};function sCt(e){return iRe(e)||Y6(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===gc&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?xm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),xm)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||aRe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=xm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===gc&&(t=gc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==gc&&(t=xm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===gc&&(t=gc)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?xm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===gc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===gc&&(t=gc);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?xm:gc};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&oCt(n)||aCt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function oCt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function aCt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return uCt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function uCt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return Y6(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Y6(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Y6(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;sRe(n=e.current());)e.lastIntValue=16*e.lastIntValue+oRe(n),e.advance();return e.pos!==t};function sRe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function oRe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return aRe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function aRe(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!sRe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+oRe(i),e.advance()}return!0};var BQ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new q6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Vn=Hs.prototype;Vn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new BQ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Vn.getToken=function(){return this.next(),new BQ(this)};typeof Symbol<"u"&&(Vn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Vn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Vn.readToken=function(e){return Em(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Vn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Vn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=Rke(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Vn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!sS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Vn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&Nke.test(String.fromCharCode(e)))++this.pos;else break e}}};Vn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Vn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Vn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Vn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Vn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Vn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Vn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Qc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Vn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Vn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Vn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Vn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),Em(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+W0(t)+"'")};Vn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+W0(e)+"'")};Vn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Vn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Qc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Yh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Vn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function lCt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function uRe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Vn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=uRe(this.input.slice(t,this.pos)),++this.pos):Em(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Vn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=uRe(this.input.slice(t,this.pos));return++this.pos,Em(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Em(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=lCt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Vn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Vn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(sS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var lRe={};Vn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===lRe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Vn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw lRe;this.raise(e,t)};Vn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(sS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Vn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")};Vn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return W0(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return sS(t)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(t)}};Vn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Vn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(zE(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Em:zE)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=W0(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Vn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=DQ[e]),this.finishToken(t,e)};var cCt="8.12.1";Hs.acorn={Parser:Hs,version:cCt,defaultOptions:Uz,Position:FA,SourceLocation:q6,getLineInfo:Dke,Node:G6,TokenType:sr,tokTypes:K,keywordTypes:DQ,TokContext:cf,tokContexts:wi,isIdentifierChar:zE,isIdentifierStart:Em,Token:BQ,isNewLine:sS,lineBreak:Qc,lineBreakG:OTt,nonASCIIwhitespace:Nke};function fCt(e,t){return Hs.parse(e,t)}const UQ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},dCt={ecmaVersion:11},Yfe="$",hCt="d",pCt="d1",mCt="d2",To=e=>(t,n)=>n.error(t,e+" not allowed"),gCt=To("Aggregate function"),yCt=To("Window function"),vCt="Invalid argument",zQ="Invalid column reference",bCt=zQ+" (must be input to an aggregate function)",cRe="Invalid function call",_Ct="Invalid member expression",wCt="Invalid operator parameter",ECt="Invalid param reference",xCt="Invalid variable reference",SCt="Variable not accessible in operator call",TCt="Unsupported variable declaration",CCt="Unsupported destructuring pattern",fRe="Table expressions do not support closures",dRe="Use aq.escape(fn) to use a function as-is (including closures)",ACt="use table.params({ name: value }) to define dynamic parameters",ICt="use aq.addFunction(name, fn) to add new op functions",kCt=`
Note: ${fRe}. ${dRe}, or ${ACt}.`,hRe=`
Note: ${fRe}. ${dRe}, or ${ICt}.`,RCt=`The ${uAe} method is not valid in multi-table expressions.`;function NCt(e,t){const n=PCt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,STt(r)?(OCt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=pCt),e.scope.add(e.tuple2=mCt),e.scope.add(e.$param=Yfe)):(e.scope.add(e.tuple=hCt),e.scope.add(e.$param=Yfe)),Zn(r,e,VQ),e.root}function PCt(e){try{const t=e.field?DCt(e):fr(e)?Ch(e):e;return fCt(`expr=(${t})`,dCt).body[0].expression.right}catch{Sn(`Expression parse error: ${e+""}`)}}function DCt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const VQ={FunctionDeclaration:To("Function definitions"),ForStatement:To("For loops"),ForOfStatement:To("For-of loops"),ForInStatement:To("For-in loops"),WhileStatement:To("While loops"),DoWhileStatement:To("Do-while loops"),AwaitExpression:To("Await expressions"),ArrowFunctionExpression:To("Function definitions"),AssignmentExpression:To("Assignments"),FunctionExpression:To("Function definitions"),NewExpression:To('Use of "new"'),UpdateExpression:To("Update expressions"),VariableDeclarator(e,t){Wz(e.id,t)},Identifier(e,t,n){gRe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,xCt,kCt)},CallExpression(e,t){const n=pRe(e.callee),r=sAe(n)||oAe(n);if(r){if((t.join||t.aggregate===!1)&&DX(n)&&gCt(e,t),(t.join||t.window===!1)&&OX(n)&&yCt(e,t),t.$op=1,t.ast)qz(e,n,t),e.arguments.forEach(i=>Zn(i,t,Hz));else{const i=t.op($Ct(t,r,n,e.arguments));Object.assign(e,{type:eAe,name:i.id})}return t.$op=0,!1}else iAe(n)?qz(e,n,t):t.error(e,cRe,hRe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Os(m0,r))return;const{name:s}=r;if(mRe(e)&&Os(m0,i)&&Jf(UQ,i.name)){bRe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return Kfe(e,o,t,yRe,n);if(s===t.$param)return Kfe(e,o,t,LCt);t.paramsRef.has(s)?BA(e,t.paramsRef.get(s)):t.columnRef.has(s)?vRe(r,s,t,e):Jf(t.params,s)&&BA(r,s)}};function Kfe(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Os(Zx,s))a=s.value;else try{Zn(s,n,VQ,e),a=n.param(s)}catch{n.error(e,_Ct)}return r(e,a,t,n,i),!1}const Hz={...VQ,VariableDeclarator:To("Variable declaration in operator call"),Identifier(e,t,n){gRe(e,t,n)&&t.error(e,SCt)},CallExpression(e,t){const n=pRe(e.callee);iAe(n)?qz(e,n,t):t.error(e,cRe,hRe)}};function OCt(e,t){e.generator&&To("Generator functions")(e,t),e.async&&To("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(gT(t,n[0],"tuple1",i(1)),r>1&&gT(t,n[1],"tuple2",i(2)),r>2&&gT(t,n[2],"$param",s)):(gT(t,n[0],"tuple",i(0)),r>1&&gT(t,n[1],"$param",s))),t.root=e.body}function gT(e,t,n,r){Os(m0,t)?(e.scope.add(t.name),e[n]=t.name):Os(J2e,t)&&t.properties.forEach(i=>{const s=Os(m0,i.key)?i.key.name:Os(Zx,i.key)?i.key.value:e.error(i,vCt);Os(m0,i.value)||e.error(i.value,CCt),r(i.value.name,s)})}function $Ct(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(Zn(u,e,Hz),i.push(e.field(u))):l<a?(Zn(u,e,Hz),s.push(e.param(u))):e.error(u,wCt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function pRe(e){return Os(m0,e)?e.name:Os(Q2e,e)?mRe(e)?MCt(e.property.name):e.property.name:null}function mRe(e){return Os(m0,e.object)&&e.object.name==="Math"}function MCt(e){return e==="max"?"greatest":e==="min"?"least":e}function gRe(e,t,n){const{name:r}=e;if(!(Os(Q2e,n)&&n.property===e)){if(!(Os(Z2e,n)&&n.key===e))if(t.paramsRef.has(r))BA(e,t.paramsRef.get(r));else if(t.columnRef.has(r))vRe(e,r,t,n);else if(Jf(t.params,r))BA(e,r);else if(Jf(UQ,r))bRe(e,r);else return!0}}function yRe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,zQ),r.aggronly&&!r.$op&&r.error(e,bCt),aAe(e,t,n,o,i)}function vRe(e,t,n,r){const[i,s]=n.columnRef.get(t);yRe(e,i,s,n,r)}function LCt(e,t,n,r){r.params&&!Jf(r.params,t)&&r.error(e,ECt),BA(e,t)}function BA(e,t){e.type=$wt,e.name=t}function bRe(e,t){e.type=Pwt,e.name=t,e.raw=UQ[t]}function qz(e,t,n){if(t===uAe){const r=n.table;r||n.error(e,RCt),lAe(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Za(s)?r.columnName(s):s;return r.column(o)||n.error(i,zQ),o}):r.columnNames())}else e.callee={type:Owt,name:t}}function Wz(e,t){Os(m0,e)?t.scope.add(e.name):Os(Iwt,e)?e.elements.forEach(n=>Wz(n,t)):Os(J2e,e)?e.properties.forEach(n=>Wz(n.value,t)):t.error(e.id,TCt)}const FCt={[mk]:1,[eAe]:1};function Xu(e,t={}){const n=t.generate||Q3,r=t.compiler||$X,i=BCt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=jCt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Os(Zx,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?xTt(g):f(n(g),i));u.push(y),FCt[g.type]&&y!==g&&Ea(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);Sn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of N6(e))d.value(m+"",g.escape?ATt(d,g,i):NCt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function jCt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function BCt(e){return(e.table?Qj(e.table):e.join?{...Qj(e.join[1]),...Qj(e.join[0])}:{})||{}}function Qj(e){return e&&mi(e.params)?e.params():{}}const _Re="Expr",ff="ExprList",wRe="ExprNumber",vC="ExprObject",aw="JoinKeys",v$="JoinValues",sc="Options",HQ="OrderKeys",pg="SelectionList",Pv="TableRef",uw="TableRefList",UCt="Descending",zCt="Query",VCt="Selection",HCt="Verb",qCt="Window";function K6(e,t){return e&&e.expr?new Xfe({...e,...t}):new Xfe(t,e)}class Xfe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...mi(this.expr)?{func:!0}:{}}}}function WCt(e){return K6(e,{desc:!0})}function j1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return K6(e,t?{expr:t,...r}:r)}function GCt(e,t,n){return K6(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function YCt(e){const t=n=>n;return t.toString=()=>e,t}function Qfe(e,t){return t=t&&mi(t.query)?t.query():t,t&&mi(t.evaluate)?t.evaluate(null,e):e(t)}function ERe(e){return Ea(e)&&(fr(e.all)||fr(e.matches)||fr(e.not)||fr(e.range))}function UA(e){return e&&mi(e.toObject)?e.toObject():mi(e)?{expr:String(e),func:!0}:fr(e)?e.map(UA):Ea(e)?V6(e,t=>UA(t)):e}function qQ(e){return fr(e)?e.map(qQ):Ea(e)?fr(e.verbs)?GQ.from(e):fr(e.all)?UE():fr(e.range)?vTt(...e.range):fr(e.match)?bTt(RegExp(...e.match)):fr(e.not)?Cke(e.not.map(UA)):KCt(e):e}function KCt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=j1(n):e.func===!0&&(t=n=YCt(n)),Ea(e.window)){const{frame:r,peers:i}=e.window;t=n=GCt(n,r,i)}e.desc===!0&&(t=WCt(n))}return e===t?V6(e,r=>qQ(r)):t}function XCt(e){return fr(e)?e.map(QCt):e}function QCt(e){const t=[];return Yu(e).forEach(n=>{Za(n)?t.push(n):zo(n)?t.push(j1(n,null)):Ea(n)&&n.expr||mi(n)?t.push(n):Sn(`Invalid key value: ${n+""}`)}),t}function JCt(e){return fr(e)?e.map(ZCt):e}function ZCt(e,t){return t<2?Yu(e):e}function e2t(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(Ea(r)&&!mi(r))for(const i in r)t.push(r[i]);else n=Za(r)?r:zo(r)?j1(n):mi(r)?n:Sn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const t2t={[_Re]:CRe,[ff]:VE,[wRe]:a2t,[vC]:G0,[aw]:u2t,[v$]:l2t,[HQ]:VE,[pg]:s2t};function n2t(e,t,n){return t===Pv?Jfe(e):t===uw?e.map(Jfe):xRe(UA(e),t,n)}function xRe(e,t,n){return t===sc?e&&r2t(e,n):t2t[t](e)}function r2t(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?xRe(i,t[r]):i}return n}function i2t(e,t){return Xu({expr:e},{...t,ast:!0}).exprs[0]}function WQ(e){return{type:mk,name:e}}function SRe(e){return{type:mk,index:e}}function G0(e,t){if(zo(e))return i2t(e,t);if(e.expr){let n;if(e.field===!0?n=WQ(e.expr):e.func===!0&&(n=G0(e.expr,t)),n)return e.desc&&(n={type:UCt,expr:n}),e.window&&(n={type:qCt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...G0(e[n],t),as:n}))}function TRe(e){const t=VCt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:VE(e.not)}:e.range?{type:t,operator:"range",arguments:VE(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Sn("Invalid input")}function s2t(e){return Yu(e).map(o2t).flat()}function o2t(e){return ERe(e)?TRe(e):Za(e)?SRe(e):zo(e)?WQ(e):Ea(e)?Object.keys(e).map(t=>({type:mk,name:t,as:e[t]})):Sn("Invalid input")}function CRe(e){return ERe(e)?TRe(e):Za(e)?SRe(e):zo(e)?WQ(e):Ea(e)?G0(e):Sn("Invalid input")}function VE(e){return Yu(e).map(CRe).flat()}function a2t(e){return Za(e)?e:G0(e)}function u2t(e){return fr(e)?e.map(VE):G0(e,{join:!0})}function l2t(e){return fr(e)?e.map((t,n)=>n<2?VE(t):G0(t,{join:!0})):G0(e,{join:!0})}function Jfe(e){return e&&mi(e.toAST)?e.toAST():e}class ARe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===aw?XCt(a):o===v$?JCt(a):o===HQ?e2t(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=Gz[t.verb],r=(n.schema||[]).map(({name:i})=>qQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Pv?Qfe(n,o):s===uw?o.map(a=>Qfe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=UA(this[n])}),t}toAST(){const t={type:HCt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=n2t(this[n],r,i)}),t}}function Fr(e,t){return Object.assign((...n)=>new ARe(e,t,n),{schema:t})}const Gz={count:Fr("count",[{name:"options",type:sc}]),derive:Fr("derive",[{name:"values",type:vC},{name:"options",type:sc,props:{before:pg,after:pg}}]),filter:Fr("filter",[{name:"criteria",type:vC}]),groupby:Fr("groupby",[{name:"keys",type:ff}]),orderby:Fr("orderby",[{name:"keys",type:HQ}]),relocate:Fr("relocate",[{name:"columns",type:pg},{name:"options",type:sc,props:{before:pg,after:pg}}]),rename:Fr("rename",[{name:"columns",type:pg}]),rollup:Fr("rollup",[{name:"values",type:vC}]),sample:Fr("sample",[{name:"size",type:wRe},{name:"options",type:sc,props:{weight:_Re}}]),select:Fr("select",[{name:"columns",type:pg}]),ungroup:Fr("ungroup"),unorder:Fr("unorder"),reify:Fr("reify"),dedupe:Fr("dedupe",[{name:"keys",type:ff,default:[]}]),impute:Fr("impute",[{name:"values",type:vC},{name:"options",type:sc,props:{expand:ff}}]),fold:Fr("fold",[{name:"values",type:ff},{name:"options",type:sc}]),pivot:Fr("pivot",[{name:"keys",type:ff},{name:"values",type:ff},{name:"options",type:sc}]),spread:Fr("spread",[{name:"values",type:ff},{name:"options",type:sc}]),unroll:Fr("unroll",[{name:"values",type:ff},{name:"options",type:sc,props:{drop:ff}}]),lookup:Fr("lookup",[{name:"table",type:Pv},{name:"on",type:aw},{name:"values",type:ff}]),join:Fr("join",[{name:"table",type:Pv},{name:"on",type:aw},{name:"values",type:v$},{name:"options",type:sc}]),cross:Fr("cross",[{name:"table",type:Pv},{name:"values",type:v$},{name:"options",type:sc}]),semijoin:Fr("semijoin",[{name:"table",type:Pv},{name:"on",type:aw}]),antijoin:Fr("antijoin",[{name:"table",type:Pv},{name:"on",type:aw}]),concat:Fr("concat",[{name:"tables",type:uw}]),union:Fr("union",[{name:"tables",type:uw}]),intersect:Fr("intersect",[{name:"tables",type:uw}]),except:Fr("except",[{name:"tables",type:uw}])};let GQ=class IRe extends F2e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new IRe(t.map(ARe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Zfe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Zfe(this,"toAST",{type:zCt})}};function Zfe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function c2t(e,t){return new GQ(e._verbs.concat(t),e._params,e._table)}for(const e in Gz){const t=Gz[e];GQ.prototype["__"+e]=function(n,...r){return c2t(n,t(...r))}}function uS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function f2t(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function YQ(e,t){const n=Xl();return t.forEach((r,i)=>{const s=zo(r)?r:i;if(s){const o=e.column(i)||Sn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function kRe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Sn("relocate requires a before or after option."),i&&s&&Sn("relocate accepts only one of the before or after options."),t=wm(e,t);const o=[...wm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),YQ(e,u)}function Sk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function KQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function d2t(e,t=0,n=e.length){let r=n?e[t++]:or;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function h2t(e,t=0,n=e.length){let r=n?e[t++]:or;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function UN(e){return NA(e)?e:+e}function p2t(e,t){const n=e.length;if(!n)return or;if((t=+t)<=0||n<2)return UN(e[0]);if(t>=1)return UN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=UN(e[i]);return NA(s)?s:s+(UN(e[i+1])-s)*(r-i)}class m2t{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:d2t(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:h2t(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(KQ)),p2t(this._sorted,t)}}const b$=(e,t,n)=>uS(t,"{"+Sk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function g2t(e,t){const{ops:n,output:r}=y2t(e,t),i=e[0].fields,s=i.length,o=s===0?XQ:s===1?v2t:s===2?b2t:Sn("Unsupported field count: "+s);return new o(i,n,r,t)}function y2t(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=sAe(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class XQ extends wTt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new m2t),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class v2t extends XQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=b$(n,s,"add"),this._rem=b$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Df(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Df(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class b2t extends XQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=b$(n,s,"add"),this._rem=b$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Df(i)&&Df(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Df(i)&&Df(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Tb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=lS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function lS(e,t,n){if(!t.length)return n;const r=RRe(t),i=e.groups(),s=i?i.size:1;return n=n||k6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=PRe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=NRe(e,o);o.write(a,n,0)}),n}function RRe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(g2t(r[i],t));return n}function NRe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function PRe(e,t,n){const{keys:r,size:i}=n,s=k6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function DRe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function ORe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const ede=ORe(KQ);function _2t(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?uS(["w","r","k"],"{"+Sk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=ede.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=ede.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const S=i[E],T=a[E];for(let C=b;C<p.i0;++C)S.rem(T,s[C],e);for(let C=w;C<p.i1;++C)S.add(T,s[C],e);S.write(T,u,l)}return h(p,u,l),u}};return p}const w2t=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),E2t=e=>!!e.peers;function x2t(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=oAe(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function S2t(e,t,n,r={},i){const s=e.data(),o=T2t(i,s),a=o.length,u=uS(["r","d","op"],"{"+Sk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=C2t(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function T2t(e,t){const n={};return e.forEach(r=>{const i=w2t(r),s=E2t(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});DX(r.name)?a.push(r):u.push(x2t(r))}),Object.values(n).map(r=>_2t(t,r.frame,r.peers,r.winOps,RRe(r.aggOps,r.frame[0]!=null?-1:1)))}function C2t(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function A2t(e){return OX(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function QQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Xl(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=I2t(r),c=e.isGrouped()?e.groups().size:1,f=lS(e,u,k6(r.length,()=>Array(c)));return l.length?S2t(e,a,n,f,l):k2t(e,a,n,f),e.create(o)}function I2t(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(A2t(s)?n:t).push(s)}return[t,n]}function k2t(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function R2t(e,t,n={}){const r=QQ(e,Xu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:kRe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function N2t(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const zN=2147483648,P2t=4294967295;class $Re{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&zN>>>t}set(t){this._bits[t>>5]|=zN>>>t}clear(t){this._bits[t>>5]&=~(zN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&P2t>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=zN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function D2t(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new $Re(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function O2t(e,t){const n=Xu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=QQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return D2t(e,r)}function MRe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Tb(e,r,n),l=Xl(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let S=0;S<g;++S)d[S].length=m+E,d[S].fill(f[S].get(w),m,m+E)},b=p?(w,E)=>{for(let S=0;S<E;++S)p[w+S]=S}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((S,T)=>{const C=Yu(w(S,T)),A=Math.min(C.length,s);v(S,A);for(let N=0;N<A;++N)E[m+N]=C[N];b(m,A),m+=A})}else e.scan((w,E)=>{let S=0;const T=u.map(C=>{const A=Yu(C(w,E));return S=Math.min(Math.max(S,A.length),s),A});v(w,S);for(let C=0;C<y;++C){const A=h[C],N=T[C];for(let k=0;k<S;++k)A[m+k]=N[k]}b(m,S),m+=S});return e.create(l.new())}function $2t(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Tb(e,r,n);return MRe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Zf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Za(o)?t.columnName(o):o,zo(o)?i.set(o,j1(o)):mi(o)?wm(t,o).forEach(s):Ea(o)?Ske(i,o):Sn(`Invalid ${e} value: ${o+""}`)};return Yu(n).forEach(s),r.preparse&&r.preparse(i),Xu(i,{table:t,...r})}function M2t(e,t,n){return $2t(e,Zf("fold",e,t),n)}function tde(e,t,n,r){const i=n&&n.length;return L2t(i?F2t(e,n,r):e,t,i)}function L2t(e,{names:t,exprs:n,ops:r},i){const s=Tb(e,r,n),o=i?null:Xl(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Df(p)?p:d(h)})}),i?e:e.create(o)}function F2t(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=J3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Xl(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=J3(o.map((p,m)=>g=>g[m])),h=uS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),nde(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else nde(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function nde(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function JQ(e,{names:t,exprs:n,ops:r}){const i=Xl(),s=e.groups();return s&&DRe(i,s),j2t(t,n,s,lS(e,r),i),e.create(i.new())}function j2t(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function B2t(e,t,n={}){if(t=Xu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Sn(`Invalid impute column ${Ch(r)}`)),n.expand){const r={preparse:U2t,aggronly:!0},i=Zf("impute",e,n.expand,r),s=JQ(e.ungroup(),i);return tde(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return tde(e,t)}function U2t(e){e.forEach((t,n)=>t.field?e.set(n,G2e(t+"")):0)}function z2t(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function LRe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function V2t(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function H2t(e,t){const n=["i","a","j","b"];return uS(n,"{"+Sk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function q2t(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Xl(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=H2t(g,y);if((fr(n)?G2t:W2t)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function W2t(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function G2t(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(S,T,C,A)=>e(C,A,S,T));const w=V2t(v,m,g),E=p.length;for(let S=0;S<E;++S){const T=p[S],C=w.get(d(T,f));if(C){const A=C.length;for(let N=0;N<A;++N){const k=C[N];b(T,f,v[k],m),y[k]=1}h[S]=1}}}function _$(e,t,n){const r=new Map;Yu(n).forEach((s,o)=>{s=Za(s)?t.columnName(s):s,zo(s)?r.set(o,j1(s)):mi(s)||Ea(s)&&s.expr?r.set(o,s):Sn(`Invalid ${e} key value: ${s+""}`)});const i=Xu(r,{table:t,aggregate:!1,window:!1});return J3(i.exprs,!0)}function Y2t(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function ZQ(e,t,n){if(n)zo(n)?n=[n,n]:fr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=Y2t(e.columnNames(),t.columnNames());r.length||Sn("Natural join requires shared column names."),n=[r,r]}return n}function FRe(e,t,n,r){return n.length!==r.length&&Sn("Mismatched number of join keys"),[_$("join",e,n),_$("join",t,r)]}const K2t={aggregate:!1,window:!1},X2t={...K2t,index:1};function rde(e,t,n,r,i={}){n=ZQ(e,t,n);const s={join:[e,t]};let o;if(fr(n)){const[a,u]=n.map(Yu);o=FRe(e,t,a,u),r||(r=Q2t(e,a,u,i))}else o=Xu({on:n},s).exprs[0],r||(r=[UE(),UE()]);return q2t(e,t,o,J2t(e,t,r,s,i&&i.suffix),i)}function Q2t(e,t,n,r){const i=[];t.forEach((o,a)=>zo(o)&&o===n[a]?i.push(o):0);const s=Cke(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Ch(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,UE()]:[UE(),s]}function J2t(e,t,n,r,i=[]){if(fr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Zf("join",e,n[0],r)),u--&&(o=Zf("join",t,n[1],X2t)),u--&&(a=Xu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&ide(s.names,l,i[0]||"_1"),i[1]!==""&&ide(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Xu(n,r)}function ide(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function Z2t(e,t,n,r={}){const i=new $Re(e.totalRows());return(fr(n)?eAt:tAt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function eAt(e,t,n,[r,i]){const s=LRe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function tAt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function sde(e,t,n,r){n=ZQ(e,t,n);const i=fr(n)?FRe(e,t,...n.map(Yu)):Xu({on:n},{join:[e,t]}).exprs[0];return Z2t(e,t,i,r)}function nAt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Xl(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(or)));const l=LRe(t,r),c=uS(["lr","rr","data"],"{"+Sk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Tb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function rAt(e,t,n,r){return n=ZQ(e,t,n),nAt(e,t,[_$("lookup",e,n[0]),_$("lookup",t,n[1])],Zf("lookup",t,r))}const Yz=(e,t)=>e??t;function iAt(e,t,n,r={}){const{keys:i,keyColumn:s}=sAt(e,t,r),o=Yz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>lS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(oAt(n,a,e.groups(),u))}function sAt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=Yz(n.sort,!0),s=Yz(n.keySeparator,"_"),o=Tb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=lS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function oAt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Xl(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&DRe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function aAt(e,t,n,r){return iAt(e,Zf("fold",e,t),Zf("fold",e,n,{preparse:uAt,aggronly:!0}),r)}function uAt(e){e.forEach((t,n)=>t.field?e.set(n,H2e(t+"")):0)}function lAt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),YQ(e,wm(e,t,n))}function ode(e,t){return JQ(e,Xu(t,{table:e,aggronly:!0,window:!1}))}function cAt(e,t,n,r){return(t?r?dAt:fAt:r?pAt:hAt)(e.length,e,n,r)}function fAt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*Jx()|0];return t}function dAt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=ORe(KQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*Jx())];return t}function hAt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*Jx();s<e&&(t[s|0]=n[i])}return t}function pAt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(Jx())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function mAt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=Jx()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function gAt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):cAt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&mAt(u),e.reify(u)}function yAt(e,t,n={}){return gAt(e,vAt(e,t),bAt(e,n.weight),n)}const jRe=e=>t=>e.get(t)||0;function vAt(e,t){return Za(t)?()=>t:jRe(JQ(e,Xu({size:t},{table:e,window:!1})).column("size"))}function bAt(e,t){return t==null?null:(t=Za(t)?e.columnName(t):t,jRe(zo(t)?e.column(t):QQ(e,Xu({w:t},{table:e}),{drop:!0}).column("w")))}function _At(e,t){return YQ(e,wm(e,t))}function wAt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Tb(e,r,n),l=Xl(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=EAt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function EAt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Yu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(or));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function xAt(e,t,n){return wAt(e,Zf("spread",e,t),n)}function SAt(e,t){return e.concat(t).dedupe()}function TAt(e,t,n){return MRe(e,Zf("unroll",e,t),n&&n.drop?{...n,drop:Zf("unroll",e,n.drop).names}:n)}function CAt(e,t){return e.create({groups:AAt(e,t)})}function AAt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Tb(e,r,n);const o=J3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function IAt(e,t){return CAt(e,Zf("groupby",e,t))}function kAt(e,t){return e.create({order:t})}const RAt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function NAt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Xu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([Q3(p,{index:"a",op:o}),Q3(p,{index:"b",op:a})])},window:!1}),l=lS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=RAt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function PAt(e,t){return kAt(e,DAt(e,t))}function DAt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(Ea(o)&&!mi(o))for(const a in o)i(o[a]);else i(Za(o)?j1(s,e.columnName(o)):zo(o)?j1(s):mi(o)?s:Sn(`Invalid orderby field: ${s+""}`))}),NAt(e,r)}function OAt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Xl();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>or};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function $At(e,t){const n=Xl(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?PRe(e,t,r):[NRe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function MAt(e){return e.isGrouped()?e.create({groups:null}):e}function LAt(e){return e.isOrdered()?e.create({order:null}):e}const FAt={__antijoin:(e,t,n)=>sde(e,t,n,{anti:!0}),__count:(e,t={})=>ode(e,{[t.as||"count"]:q2e()}),__cross:(e,t,n,r)=>rde(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:OAt,__dedupe:f2t,__derive:R2t,__except:N2t,__filter:O2t,__fold:M2t,__impute:B2t,__intersect:z2t,__join:rde,__lookup:rAt,__pivot:aAt,__relocate:kRe,__rename:lAt,__rollup:ode,__sample:yAt,__select:_At,__semijoin:sde,__spread:xAt,__union:SAt,__unroll:TAt,__groupby:IAt,__orderby:PAt,__ungroup:MAt,__unorder:LAt,__reduce:$At};Object.assign(Np.prototype,FAt);function jAt(e,t){return Np.from(e,t)}function BAt(e){return K6(e,{escape:!0,toString(){Sn("Escaped values can not be serialized.")}})}Np.prototype;const of={top:30,left:60,right:80,bottom:50};function BRe({data:e,selection:t,parameters:n,dataname:r}){const o=I.useMemo(()=>{const c=e.map(f=>({...f,value:+f[n.y_var]}));return jAt(c)},[e,n]),a=I.useMemo(()=>{const c=k1(o.filter(BAt(f=>t.includes(f[n.cat_var]))).array("value"));return r==="clean_stocks"?c:[0,c[1]]},[o,t,n,r]),u=I.useMemo(()=>wb([of.top,400-of.bottom]).domain(k1(o.array("value")).reverse()),[o,400]),l=fh(r==="clean_stocks"?".0%":",.0f");return(t==null?void 0:t.length)===0?null:_.jsxs("svg",{style:{height:"400px",width:"60px",overflow:"visible"},children:[_.jsx("rect",{y:u(a[1]),height:u(a[0])-u(a[1]),x:of.left-10,width:10,opacity:.1,fill:"black"}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",textAnchor:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:25,y:of.top-5,children:l(u.domain()[0])}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",textAnchor:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:25,y:400-of.bottom+8,children:l(u.domain()[1])}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:of.left-5,y:u(a[0]),children:l(a[0])}),_.jsx("text",{style:{fontSize:10,dominantBaseline:"middle",fontFamily:'"Helvetica Neue", Helvetica, Arial, sans-serif'},x:of.left-5,y:u(a[1]),children:l(a[1])}),e.map(c=>_.jsx("rect",{opacity:.2,fill:+c[n.y_var]>0?"steelblue":"firebrick",x:0,width:50,y:u(+c[n.y_var]),height:1},"strip")),_.jsx("line",{strokeWidth:2,stroke:"black",style:{fontSize:10,dominantBaseline:"middle"},x1:0,x2:50,y1:u(a[0]),y2:u(a[0])}),_.jsx("line",{strokeWidth:2,stroke:"black",x1:0,x2:50,y1:u(a[1]),y2:u(a[1])}),_.jsx("line",{strokeWidth:2,stroke:"black",x1:0,x2:0,y1:u(a[1]),y2:u(a[0])}),_.jsx("line",{strokeWidth:2,stroke:"black",x1:50,x2:50,y1:u(a[1]),y2:u(a[0])}),_.jsx("path",{fill:"black",opacity:"0.1",d:`M${of.left}, ${u(a[1])} L 113, ${of.top} L 113, ${400-of.bottom} L ${of.left}, ${u(a[0])}`})]})}const UAt=Object.freeze(Object.defineProperty({__proto__:null,StripPlot:BRe},Symbol.toStringTag,{value:"Module"}));function ade({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState(e.dataset),[o,a]=I.useState(e.initial_selection),[u,l]=I.useState(null),[c,f]=I.useState([new Date(e.start_date),new Date(e.end_date)]),[d,h]=I.useState(e.guardrail);I.useEffect(()=>{Smt(`./data/${i}.csv`).then(E=>{r(E),l(Array.from(new Set(E.map(S=>JSON.stringify({name:S[e.cat_var],group:S[e.group_var]})))).map(S=>JSON.parse(S)))})},[i,e]);const p=I.useMemo(()=>n&&c?n.filter(E=>new Date(E[e.x_var]).getTime()>=c[0].getTime()).filter(E=>new Date(E[e.x_var]).getTime()<=c[1].getTime()):null,[n,c,e.x_var,i]),m=E=>{s(E),a([])},{actions:g,trrack:y}=I.useMemo(()=>{const E=RA.create(),S=E.register("selection",(A,N)=>(A.selection=N,A)),T=E.register("range",(A,N)=>(A.range=N,A)),C=bz({registry:E,initialState:{selection:[],range:[e.start_date,e.end_date]}});return{actions:{selection:S,range:T},trrack:C}},[e.end_date,e.start_date]),v=I.useCallback(E=>{y.apply("Change daterange",g.range([E[0].toISOString().slice(0,10),E[1].toISOString().slice(0,10)]))},[y,g]),b=I.useMemo(()=>pf(v,200),[v]),w=I.useCallback(E=>{y.apply("Change selection",g.selection(E)),t({status:!0,provenanceGraph:y.graph.backend,answers:{}})},[y,g,t]);return p&&u&&c&&o?_.jsxs(ro,{pb:50,children:[e.allow_guardrail_selector?_.jsx(uE,{shadow:"sm",radius:"md",p:"md",style:{width:"500px"},children:_.jsx(Sz,{guardrail:d,setGuardrail:h,dataname:i,setDataname:m,setSelection:a})}):null,_.jsx(fn,{children:_.jsxs(uE,{shadow:"md",radius:"md",p:"md",withBorder:!0,children:[e.caption===""?null:_.jsx(fn,{style:{width:"800px"},mb:"xl",children:_.jsx(uG,{children:e.caption})}),_.jsxs(mr,{wrap:"nowrap",children:[e.allow_selection===!1&&e.guardrail!=="juxt_data"?null:_.jsx(mr,{wrap:"nowrap",children:_.jsx(Ez,{parameters:e,data:p,dataname:i,items:u,selection:o,setSelection:a,trackSelection:w,range:c,guardrail:d})}),e.allow_selection===!1&&e.guardrail!=="juxt_data"?null:_.jsx(u0,{orientation:"vertical",size:"xs"}),_.jsxs(ro,{children:[_.jsx(mr,{justify:"apart",children:_.jsxs(ro,{gap:0,justify:"flex-start",children:[_.jsx(et,{fw:600,children:i==="clean_stocks"?"Percent change in stock price":"Infections per million people"}),d==="super_summ"?_.jsx(et,{fz:"xs",c:"dimmed",children:"Shaded area represents the middle 50% of all values."}):null,d==="juxt_summ"?_.jsx(et,{fz:"xs",c:"dimmed",children:"Bar on the left highlights the range of selection among all data."}):null]})}),_.jsxs(ro,{children:[_.jsxs(mr,{wrap:"nowrap",children:[d==="juxt_summ"?_.jsx(BRe,{parameters:e,data:p,selection:o,dataname:i}):null,_.jsx(wz,{parameters:e,data:p,dataname:i,items:u,selection:o,range:c,guardrail:d})]}),e.allow_time_slider?_.jsx("div",{style:{width:"500px"},children:_.jsx(xz,{parameters:e,setRange:f,trackRange:b})}):null]})]})]})]})})]}):_.jsx(ju,{})}const zAt=Object.freeze(Object.defineProperty({__proto__:null,DataExplorer:ade,default:ade},Symbol.toStringTag,{value:"Module"}));function VAt({parameters:e}){const t=e.dataset==="clean_data"?_.jsxs(ew,{children:["Select any subset of countries to the left of the visualization to support the prompt at the top of the page.",_.jsx("h4",{children:"Background:"}),"You live in a fantasy world that consists of your home country, as well as other 15 countries located across 5 continents: Eldoril, Thundoril, Aerion, Silvoria, and Mystara. Countries within each continent are similar to each other in size and demographics.",_.jsx("h4",{children:"Scenario:"}),"You are an analyst for the Viral Disease Policy Center of your home country at time when there is a new viral disease called",_.jsx("i",{children:" Celestial Sniffles"}),". Luckily, your country has not been affected yet and has time to prepare and decide on a policy to combat it. You have access to the infection data from other countries that implemented one of the 3 available policies: A, B, or C. However, due to socioeconomic factors, the Surgeon General in your country has",_.jsx("i",{children:" already decided on a policy"}),".",_.jsx("h4",{children:"Task:"}),"You are tasked with leading the promotion efforts that make the case for the chosen policy. In the experiment, you will use an interactive data explorer that shows infection data from other countries. You should select a view that best shows (and convinces the population) that your country's"," ",_.jsx("b",{children:"chosen policy is the best policy to combat the disease"}),". After finalizing the view, click the camera button and add a caption or a slogan that will go along with your visualization."]}):_.jsxs(ew,{children:["Select any subset of stocks to the left of the visualization to support the prompt at the top of the page.",_.jsx("h4",{children:"Scenario:"})," ","You are a financial advisor. Your client approached you asking for help in picking a new investmentan industry fund that equally invests within a single industry. The client prefers to make their decisions"," ",_.jsx("i",{children:"solely based on the data"}),", and not based on any inside knowledge about the type of industry. However, your boss"," ",_.jsx("i",{children:"does"})," ","have inside knowledge and orders you to recommend a specific industry (which is ultimately in the best interest of the client). You cannot disclose this to the client and have to use data to support your recommendations.",_.jsx("h4",{children:"Task:"})," ","In the experiment, you will use an interactive data explorer that shows performance of different stocks from a variety of industries. You should select a view that best shows (and convinces your client) that"," ",_.jsx("b",{children:"the chosen industry fund would be the best investment with the highest returns"}),". After finalizing the view, click the camera button and add a caption or a slogan that will go along with your visualization."]}),n=e.dataset==="clean_data"?_.jsxs(ew,{children:[_.jsx("h4",{children:"Background:"}),"You live in a fantasy world that consists of your home country, as well as other 15 countries located across 5 continents: Eldoril, Thundoril, Aerion, Silvoria, and Mystara. Countries within each continent are similar to each other in size and demographics.",_.jsx("h4",{children:"Scenario:"}),"There's a new viral disease called"," ",_.jsx("i",{children:"Celestial Sniffles"}),". Most countries in the world have adopted one of 3 major disease containment policies: A, B, or C. Luckily, your country has not been affected yet but you may need to travel to one of the affected countries for work. Afraid of getting sick and stuck abroad with a huge hospital bill, you decide to purchase a traveler's health insurance policy. The price of the policy is very flexible and depends on the amount of coverage you'll get: anywhere between $0 (no coverage) to $100 (full coverage). Since you are not familiar with the disease trends or containment policies, you turn to social media to read what people shared about recent infection rates.",_.jsx("h4",{children:"Task:"}),"In the experiment, you will see a set of visualizations that show infection rates in different countries that adopted one of the containment policies A, B, or C. You can refer to the list of countries to the left of the visualization to see which country adopted which Policy. Based on each visualization, you will be asked to decide"," ",_.jsx("b",{children:"how much to spend on your insurance policy"})," ","and"," ",_.jsx("b",{children:"answer a short survey"}),"."]}):_.jsxs(ew,{children:[_.jsx("h4",{children:"Scenario:"}),"You have $100 that you would like to invest in"," ",_.jsx("i",{children:"industry funds"})," ","but are not sure how to best allocate that money. An industry fund is composed of all individual stocks pertaining to that industry (e.g., a Pharma fund is composed of Pharma A, Pharma B, and Pharma C stocks). Since you are not familiar with the current market, you turn to social media to read what people shared about recent stock performance.",_.jsx("h4",{children:"Task:"}),"In the experiment, you will see a set of visualizations that show performance of different stocks from a variety of industries. Based on each visualization, you will be asked to decide"," ",_.jsx("b",{children:"how much to invest in a given industry fund"})," ","and"," ",_.jsx("b",{children:"answer a short survey"}),"."]});return _.jsx(mr,{justify:"right",children:_.jsxs(i1,{width:800,shadow:"md",children:[_.jsx(i1.Target,{children:_.jsx(On,{variant:"light",color:"gray",size:"compact-sm",children:"Help"})}),_.jsx(i1.Dropdown,{children:_.jsx(et,{size:"sm",children:e.allow_selection?t:n})})]})})}const HAt=Object.freeze(Object.defineProperty({__proto__:null,Help:VAt},Symbol.toStringTag,{value:"Module"}));var URe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:Ms,()=>(()=>{var n={d:(c,f)=>{for(var d in f)n.o(f,d)&&!n.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:f[d]})},o:(c,f)=>Object.prototype.hasOwnProperty.call(c,f),r:c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})}},r={};function i(c){return i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},i(c)}function s(c){return function(f){if(Array.isArray(f))return o(f)}(c)||function(f){if(typeof Symbol<"u"&&f[Symbol.iterator]!=null||f["@@iterator"]!=null)return Array.from(f)}(c)||function(f,d){if(f){if(typeof f=="string")return o(f,d);var h=Object.prototype.toString.call(f).slice(8,-1);if(h==="Object"&&f.constructor&&(h=f.constructor.name),h==="Map"||h==="Set")return Array.from(f);if(h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h))return o(f,d)}}(c)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function o(c,f){(f==null||f>c.length)&&(f=c.length);for(var d=0,h=new Array(f);d<f;d++)h[d]=c[d];return h}function a(c,f){if(!(c instanceof f))throw new TypeError("Cannot call a class as a function")}function u(c,f){for(var d=0;d<f.length;d++){var h=f[d];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(c,(p=h.key,m=void 0,m=function(g,y){if(i(g)!=="object"||g===null)return g;var v=g[Symbol.toPrimitive];if(v!==void 0){var b=v.call(g,y||"default");if(i(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return(y==="string"?String:Number)(g)}(p,"string"),i(m)==="symbol"?m:String(m)),h)}var p,m}n.r(r),n.d(r,{default:()=>l});var l=function(){function c(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},p=h.sampleRate;a(this,c),this._context=this._createContext(p),p||(p=this._context.sampleRate),this._sampleRate=p}var f,d;return f=c,d=[{key:"_createContext",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:44100;return window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext,new AudioContext({sampleRate:h})}},{key:"context",get:function(){return this._context}},{key:"fetchAudio",value:async function(){for(var h=this,p=arguments.length,m=new Array(p),g=0;g<p;g++)m[g]=arguments[g];return await Promise.all(m.map(async function(y){var v;return v=y instanceof File||y instanceof Blob?await y.arrayBuffer():await fetch(y).then(function(b){return b.headers.has("Content-Type")&&!b.headers.get("Content-Type").includes("audio/")&&console.warn("Crunker: Attempted to fetch an audio file, but its MIME type is `".concat(b.headers.get("Content-Type").split(";")[0],"`. We'll try and continue anyway. (file: \"").concat(y,'")')),b.arrayBuffer()}),await h._context.decodeAudioData(v)}))}},{key:"mergeAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._sampleRate*this._maxDuration(h),this._sampleRate);return h.forEach(function(m){for(var g=0;g<m.numberOfChannels;g++){for(var y=p.getChannelData(g),v=m.getChannelData(g),b=m.getChannelData(g).length-1;b>=0;b--)y[b]+=v[b];p.getChannelData(g).set(y)}}),p}},{key:"concatAudio",value:function(h){var p=this._context.createBuffer(this._maxNumberOfChannels(h),this._totalLength(h),this._sampleRate),m=0;return h.forEach(function(g){for(var y=0;y<g.numberOfChannels;y++)p.getChannelData(y).set(g.getChannelData(y),m);m+=g.length}),p}},{key:"padAudio",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;if(m===0)return h;if(p<0)throw new Error('Crunker: Parameter "padStart" in padAudio must be positive');if(m<0)throw new Error('Crunker: Parameter "seconds" in padAudio must be positive');for(var g=this._context.createBuffer(h.numberOfChannels,Math.ceil(h.length+m*h.sampleRate),h.sampleRate),y=0;y<h.numberOfChannels;y++){var v=h.getChannelData(y);g.getChannelData(y).set(v.subarray(0,Math.ceil(p*h.sampleRate)+1),0),g.getChannelData(y).set(v.subarray(Math.ceil(p*h.sampleRate)+2,g.length+1),Math.ceil((p+m)*h.sampleRate))}return g}},{key:"sliceAudio",value:function(h,p,m){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(p>=m)throw new Error('Crunker: "start" time should be less than "end" time in sliceAudio method');for(var v=Math.round((m-p)*this._sampleRate),b=Math.round(p*this._sampleRate),w=this._context.createBuffer(h.numberOfChannels,v,this._sampleRate),E=0;E<h.numberOfChannels;E++)for(var S=h.getChannelData(E),T=w.getChannelData(E),C=0;C<v;C++)T[C]=S[b+C],C<g*this._sampleRate&&(T[C]*=C/(g*this._sampleRate)),C>v-y*this._sampleRate&&(T[C]*=(v-C)/(y*this._sampleRate));return w}},{key:"play",value:function(h){var p=this._context.createBufferSource();return p.buffer=h,p.connect(this._context.destination),p.start(),p}},{key:"export",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"audio/wav",m=this._interleave(h),g=this._writeHeaders(m,h.numberOfChannels,h.sampleRate),y=new Blob([g],{type:p});return{blob:y,url:this._renderURL(y),element:this._renderAudioElement(y)}}},{key:"download",value:function(h){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"crunker",m=document.createElement("a");return m.style.display="none",m.href=this._renderURL(h),m.download="".concat(p,".").concat(h.type.split("/")[1]),m.click(),m}},{key:"notSupported",value:function(h){return this._isSupported()?void 0:h()}},{key:"close",value:function(){return this._context.close(),this}},{key:"_maxDuration",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.duration})))}},{key:"_maxNumberOfChannels",value:function(h){return Math.max.apply(Math,s(h.map(function(p){return p.numberOfChannels})))}},{key:"_totalLength",value:function(h){return h.map(function(p){return p.length}).reduce(function(p,m){return p+m},0)}},{key:"_isSupported",value:function(){return"AudioContext"in window||"webkitAudioContext"in window||"mozAudioContext"in window}},{key:"_writeHeaders",value:function(h,p,m){var g=2*p,y=2*h.length,v=36+y,b=new ArrayBuffer(8+v),w=new DataView(b);return this._writeString(w,0,"RIFF"),w.setUint32(4,v,!0),this._writeString(w,8,"WAVE"),this._writeString(w,12,"fmt "),w.setUint32(16,16,!0),w.setUint16(20,1,!0),w.setUint16(22,p,!0),w.setUint32(24,m,!0),w.setUint32(28,m*g,!0),w.setUint16(32,g,!0),w.setUint16(34,16,!0),this._writeString(w,36,"data"),w.setUint32(40,y,!0),this._floatTo16BitPCM(w,h,44)}},{key:"_floatTo16BitPCM",value:function(h,p,m){for(var g=0;g<p.length;g++,m+=2){var y=Math.max(-1,Math.min(1,p[g]));h.setInt16(m,y<0?32768*y:32767*y,!0)}return h}},{key:"_writeString",value:function(h,p,m){for(var g=0;g<m.length;g++)h.setUint8(p+g,m.charCodeAt(g))}},{key:"_interleave",value:function(h){if(h.numberOfChannels===1)return h.getChannelData(0);for(var p=[],m=0;m<h.numberOfChannels;m++)p.push(h.getChannelData(m));for(var g=p.reduce(function(w,E){return w+E.length},0),y=new Float32Array(g),v=0,b=0;v<g;)p.forEach(function(w){y[v++]=w[b]}),b++;return y}},{key:"_renderAudioElement",value:function(h){var p=document.createElement("audio");return p.controls=!0,p.src=this._renderURL(h),p}},{key:"_renderURL",value:function(h){return(window.URL||window.webkitURL).createObjectURL(h)}}],d&&u(f.prototype,d),Object.defineProperty(f,"prototype",{writable:!1}),c}();return r})())})(URe);var qAt=URe.exports;const WAt=nl(qAt),VN=3,f_=25,HN=25,qN=20,ude=1;function GAt({xScale:e,answer:t,name:n,height:r,setSelectedTask:i,isSelected:s,labelHeight:o=0}){const[a,u]=I.useState(!1),[l,{width:c}]=KM();return _.jsxs("g",{onClick:()=>i(n),onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[_.jsx("rect",{opacity:1,fill:a||s?"cornflowerblue":"lightgray",x:e(t.startTime)+ude,width:e(t.endTime)-e(t.startTime)-ude*2,y:r-f_,height:f_}),_.jsx("rect",{rx:3,opacity:1,x:e(t.startTime)-VN,width:c+VN*2,y:r-f_-HN-o,height:qN,fill:"whitesmoke"}),_.jsx("line",{stroke:"black",strokeWidth:1,x1:e(t.startTime)-VN,x2:c+e(t.startTime)+VN,y1:r-f_-HN+qN-o,y2:r-f_-HN+qN-o}),_.jsx("foreignObject",{x:e(t.startTime),width:c,y:r-f_-HN-o,height:qN,children:_.jsx($l,{style:{width:"fit-content"},children:_.jsx(et,{lineClamp:1,ref:l,mx:0,style:{width:"fit-content",fontWeight:600},size:"12px",children:n})})})]})}function YAt({xScale:e,answer:t,height:n,labelHeight:r=0}){return _.jsx("g",{children:_.jsx("line",{stroke:"gray",strokeWidth:1,x1:e(t.startTime)+2,x2:e(t.startTime)+2,y1:n-45-r,y2:n-25})})}const lde=25,KAt=8;function zRe({xScale:e,participantData:t,width:n,height:r,setSelectedTask:i,trialFilter:s}){const{analysisTrialName:o}=Fo(l=>l),a=I.useMemo(()=>{let l=0;const c=Object.entries(t.answers||{}).filter(f=>s?f[0]===s:!0).sort((f,d)=>f[1].startTime-d[1].startTime);return c.map((f,d)=>{const[h,p]=f,m=d>0?c[d-l-1]:null;return m&&m[0].length*KAt+e(m[1].startTime)>e(p.startTime)?l+=1:l=0,{line:_.jsx(YAt,{labelHeight:l*lde,answer:p,height:r,xScale:e},h),label:_.jsx(GAt,{labelHeight:l*lde,isSelected:s?!1:o===h,setSelectedTask:i,answer:p,height:r,name:h,xScale:e},h)}})},[r,t.answers,o,i,s,e]),u=I.useMemo(()=>Object.entries(t.answers||{}).sort((c,f)=>c[1].startTime-f[1].startTime).map(c=>{const[f,d]=c,h=[];let p=[-1,-1],m="visible";if(d.windowEvents)for(let g=0;g<d.windowEvents.length;g+=1)d.windowEvents[g][1]==="visibility"&&(d.windowEvents[g][2]==="hidden"&&m==="visible"?(p=[d.windowEvents[g][0],-1],m="hidden"):d.windowEvents[g][2]==="visible"&&m==="hidden"&&(p[1]=d.windowEvents[g][0],h.push(p),p=[-1,-1],m="visible"));return h.map((g,y)=>_.jsx(os,{withinPortal:!0,label:"Browsed away",children:_.jsx("rect",{x:e(g[0]),width:e(g[1])-e(g[0]),y:r-5,height:10})},y))}),[r,t,e]);return s?null:_.jsxs("svg",{style:{width:n,height:r,overflow:"visible"},children:[a.map(l=>l.line),a.map(l=>l.label),u]})}function XAt({cx:e,cy:t,r:n,color:r}){return _.jsx("circle",{cx:e,cy:t,r:n,fill:r})}function QAt({xScale:e,answer:t,height:n,currentNode:r,setCurrentNode:i,taskName:s}){return _.jsxs("g",{style:{cursor:"pointer"},children:[t.provenanceGraph?Object.entries(t.provenanceGraph.nodes).map(o=>{const[a,u]=o;return _.jsx("g",{onClick:()=>i(a,u.createdOn,s),children:_.jsx(XAt,{color:a===r?"cornflowerblue":"lightgray",cx:e(u.createdOn),cy:n/2,r:5})},a)}):null,r&&t.provenanceGraph&&t.provenanceGraph.nodes[r]?_.jsx("circle",{fill:"cornflowerblue",cx:e(t.provenanceGraph.nodes[r].createdOn),cy:n/2,r:5}):null]})}const cde={left:5,top:0,right:5,bottom:0};function JAt({xScale:e,participantData:t,width:n,height:r,currentNode:i,setCurrentNode:s,playTime:o,setPlayTime:a,isPlaying:u,setIsPlaying:l,setSelectedTask:c}){const f=I.useMemo(()=>e.domain()[1]-e.domain()[0],[e]),{index:d}=Eh(),h=zh(),p=d?h:null,m=I.useMemo(()=>!p||!t?null:Object.keys(t.answers).find(v=>v.startsWith(p))||null,[t,p]);I.useEffect(()=>{if(!m||!t)return;const v=t.answers[m].provenanceGraph;if(!v)return;const{startTime:b}=t.answers.introduction_0,w=b+o;if(!i||!v.nodes[i]){s(v.root);return}let E=v.nodes[i];for(;;)if(w<E.createdOn){if(Bbt(E))break;{const S=E.parent;if(w<v.nodes[S].createdOn)E=v.nodes[S];else break}}else if(E.children.length>0){const S=E.children[0];if(w>v.nodes[S].createdOn)E=v.nodes[S];else break}else break;E.id!==i&&s(E.id)},[i,t,o,s,m]);const g=I.useCallback((v,b)=>{a(b,(b-e.domain()[0])/f),s(v)},[s,a,f,e]),y=I.useMemo(()=>Object.entries(t.answers).filter(v=>m?m===v[0]:!0).map(v=>{const[b,w]=v;return _.jsx(QAt,{taskName:b,answer:w,height:r,currentNode:i,setCurrentNode:g,xScale:e},b)}),[i,g,r,t.answers,m,e]);return _.jsx(ro,{children:_.jsxs("svg",{style:{width:n,height:r},children:[_.jsx("line",{stroke:"black",strokeWidth:1,x1:cde.left,x2:n+cde.left,y1:r/2,y2:r/2}),y]})})}function M_(e){const t=I.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return I.useLayoutEffect(()=>{t.current=e}),I.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}const fde={top:5,left:5,right:5,bottom:5};function ZAt({transcriptLines:e,xScale:t,startTime:n,currentShownTranscription:r}){const i=I.useMemo(()=>e.map(s=>_.jsxs("g",{children:[_.jsx("line",{stroke:r>=s.lineStart&&r<=s.lineEnd?"cornflowerblue":"lightgray",strokeWidth:5,y1:fde.top,y2:fde.top,x1:t(n+s.start*1e3)+2,x2:t(n+s.end*1e3)-2}),s.tags.map((o,a)=>_.jsx("g",{children:o.map((u,l)=>{const c=t(n+s.start*1e3),f=t(n+s.end*1e3);return u?_.jsx("foreignObject",{x:c+(f-c)/s.tags.length*(a+.5)-6+(-(o.length-1)*15/2+l*15),y:30,height:"20px",width:"20px",children:_.jsx(os,{label:u.name,withArrow:!0,arrowSize:6,children:_.jsx(ah,{size:12,color:u.color})})},u.name):null})},a))]},s.start)),[r,n,e,t]);return _.jsx("svg",{style:{width:"100%",height:"50px"},children:i})}function eIt({selectedTags:e,removeFunc:t,isLink:n=!1,participantId:r="",currentTask:i="",size:s="md"}){return e.map((o,a)=>{if(!o||!o.id)return null;const u=yA(o.color).l;return _.jsx(os,{label:o.name,withinPortal:!0,children:_.jsx(S1,{size:s,component:n?swe:null,style:{width:"80px"},to:`${cd}ThinkAloud/analysis/${r}/ui/reviewer-${i}`,target:"_blank",withRemoveButton:!!t,styles:{root:{backgroundColor:o.color,color:u>.7?"black":"white"}},onRemove:()=>t?t(o.id):null,children:o.name},o.id+a)},r+i+a)})}function VRe({tags:e,selectedTags:t,onSelectTags:n,disabled:r=!1,taskTags:i,partTags:s}){const o=oL(),a=h=>n([...t,[...e,...i||[],...s||[]].find(p=>p.id===h)]),u=h=>n(t.filter(p=>p!==void 0&&p.id!==h)),l=_.jsx(eIt,{selectedTags:t,removeFunc:u}),c=e.filter(h=>h!==void 0&&!t.find(p=>p&&p.id===h.id)).map(h=>_.jsx(tn.Option,{value:h.id,children:_.jsxs(mr,{gap:"sm",children:[_.jsx(ah,{size:10,color:h.color}),_.jsx("span",{children:h.name})]})},h.id)),f=i?i.filter(h=>!t.find(p=>p.id===h.id)).map(h=>_.jsx(tn.Option,{value:h.id,children:_.jsxs(mr,{gap:"sm",children:[_.jsx(ah,{size:10,color:h.color}),_.jsx("span",{children:h.name})]})},h.id)):null,d=s?s.filter(h=>!t.find(p=>p.id===h.id)).map(h=>_.jsx(tn.Option,{value:h.id,children:_.jsxs(mr,{gap:"sm",children:[_.jsx(ah,{size:10,color:h.color}),_.jsx("span",{children:h.name})]})},h.id)):null;return _.jsxs(tn,{disabled:r,width:300,store:o,onOptionSubmit:a,withinPortal:!0,children:[_.jsx(tn.DropdownTarget,{children:_.jsx(hE,{style:{width:"400px"},pointer:!0,onClick:()=>o.toggleDropdown(),children:_.jsxs(S1.Group,{children:[t.length>0?l:_.jsx(ri.Placeholder,{children:"Add tags"}),_.jsx(tn.EventsTarget,{children:_.jsx(hE.Field,{type:"hidden",onBlur:()=>o.closeDropdown()})})]})})}),_.jsx(tn.Dropdown,{children:_.jsxs(tn.Options,{children:[c.length===0?_.jsx(tn.Empty,{children:"No additional tags"}):i||s?_.jsx(tn.Group,{label:"Text Tags",children:c}):c,i?_.jsx(tn.Group,{label:"Task Tags",children:f}):null,s?_.jsx(tn.Group,{label:"Participant Tags",children:d}):null]})})]})}function tIt({annotation:e,setAnnotation:t,start:n,current:r,end:i,text:s,tags:o,selectedTags:a,onTextChange:u,deleteRowCallback:l,addRowCallback:c,onSelectTags:f,addRef:d}){const[h,p]=I.useState(e);return _.jsxs(mr,{justify:"space-between",style:{width:"100%"},wrap:"nowrap",children:[_.jsx(mr,{wrap:"nowrap",gap:0,style:{width:"100%",backgroundColor:r>=n&&r<=i?"rgba(100, 149, 237, 0.3)":"white"},children:_.jsx(rA,{ref:m=>m?d(m):null,autosize:!0,minRows:1,maxRows:3,style:{width:"100%"},variant:"unstyled",value:s,onChange:m=>{u(m.currentTarget.value)},onKeyDown:m=>{m.key==="Enter"&&m.currentTarget.selectionStart!==null?c(m.currentTarget.selectionStart):m.key==="Backspace"&&m.currentTarget.selectionStart===0&&m.currentTarget.selectionEnd===0&&(l(),m.preventDefault(),m.stopPropagation())}})}),_.jsxs(mr,{wrap:"nowrap",style:{width:"300px"},children:[_.jsx(u0,{orientation:"vertical",size:"xs"}),_.jsx(VRe,{onSelectTags:f,selectedTags:a,tags:o}),_.jsxs(xn,{children:[_.jsx(xn.Target,{children:_.jsx(VXe,{style:{color:e.length>0?"cornflowerblue":"lightgray",cursor:"pointer"}})}),_.jsx(xn.Dropdown,{children:_.jsx(rA,{value:h,onChange:m=>p(m.currentTarget.value),placeholder:"Add Annotation",onBlur:()=>t(h)})})]})]})]})}var wo=[];for(var Jj=0;Jj<256;++Jj)wo.push((Jj+256).toString(16).slice(1));function nIt(e,t=0){return(wo[e[t+0]]+wo[e[t+1]]+wo[e[t+2]]+wo[e[t+3]]+"-"+wo[e[t+4]]+wo[e[t+5]]+"-"+wo[e[t+6]]+wo[e[t+7]]+"-"+wo[e[t+8]]+wo[e[t+9]]+"-"+wo[e[t+10]]+wo[e[t+11]]+wo[e[t+12]]+wo[e[t+13]]+wo[e[t+14]]+wo[e[t+15]]).toLowerCase()}var WN,rIt=new Uint8Array(16);function iIt(){if(!WN&&(WN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!WN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return WN(rIt)}var sIt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const dde={randomUUID:sIt};function zA(e,t,n){if(dde.randomUUID&&!t&&!e)return dde.randomUUID();e=e||{};var r=e.random||(e.rng||iIt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,nIt(r)}function hde({addTagCallback:e,currentNames:t,editTag:n=!1,editableTag:r}){const[i,s]=I.useState(n?r.name:""),[o,a]=I.useState(n?r.color:"#fd7e14"),u=I.useCallback(()=>{const l=zA();e({color:o,name:i,id:l})},[e,o,i]);return _.jsxs(ro,{gap:"xs",children:[_.jsxs(mr,{children:[_.jsx(ah,{color:o}),_.jsx(l0,{required:!0,placeholder:"Enter tag name",value:i,onChange:l=>s(l.currentTarget.value),error:t.includes(i)&&(!n||r.name!==i)?"Tag with this name already exists":null})]}),_.jsx(gG,{withPicker:n,style:{width:"100%"},value:o,onChange:l=>a(l),swatches:["#2e2e2e","#868e96","#fa5252","#e64980","#be4bdb","#7950f2","#4c6ef5","#228be6","#15aabf","#12b886","#40c057","#82c91e","#fab005","#fd7e14"]}),_.jsx(On,{disabled:n&&o===r.color&&(i.length===0||t.includes(i)),size:"compact-sm",onClick:()=>u(),children:n?"Edit Tag":"Add Tag"})]})}function oIt({createTagCallback:e,editTagCallback:t,tags:n,email:r=""}){const[i,s]=I.useState(!1);return _.jsxs(xn,{withinPortal:!1,children:[_.jsx(xn.Target,{children:_.jsxs(ro,{justify:"center",style:{width:"300px",cursor:"pointer"},children:[_.jsxs(mr,{children:[_.jsx(jXe,{}),_.jsx(et,{children:"Tags"})]}),r?_.jsx(et,{ta:"center",style:{justifyContent:"end",alignContent:"end"},c:"dimmed",children:r}):null]})}),n?_.jsx(xn.Dropdown,{children:_.jsxs(ro,{style:{width:"300px"},gap:"xs",children:[n.length===0?_.jsx(et,{color:"dimmed",children:"No tags found. Create new tags below."}):null,n.map(o=>_.jsxs(mr,{justify:"space-between",children:[_.jsxs(mr,{children:[_.jsx(ah,{color:o.color}),_.jsx(et,{children:o.name})]}),_.jsxs(xn,{trapFocus:!0,withinPortal:!1,children:[_.jsx(xn.Target,{children:_.jsx($Xe,{color:"lightgray"})}),_.jsx(xn.Dropdown,{children:_.jsx(hde,{editTag:!0,currentNames:n.map(a=>a.name),addTagCallback:a=>{t(o,{...a,id:o.id})},editableTag:o})})]})]},o.id)),_.jsxs(xn,{trapFocus:!0,opened:i,withinPortal:!1,children:[_.jsx(xn.Target,{children:_.jsx(On,{variant:"light",onClick:()=>s(!i),children:"Create new tag"})}),_.jsx(xn.Dropdown,{children:_.jsx(hde,{currentNames:n.map(o=>o.name),addTagCallback:o=>{s(!1),e(o)}})})]})]})}):_.jsx(ju,{})]})}var pde={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HRe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},aIt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},eJ={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(HRe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):aIt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new uIt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class uIt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const lIt=function(e){const t=HRe(e);return eJ.encodeByteArray(t,!0)},w$=function(e){return lIt(e).replace(/\./g,"")},qRe=function(e){try{return eJ.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WRe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cIt=()=>WRe().__FIREBASE_DEFAULTS__,fIt=()=>{if(typeof process>"u"||typeof pde>"u")return;const e=pde.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},dIt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&qRe(e[1]);return t&&JSON.parse(t)},X6=()=>{try{return cIt()||fIt()||dIt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},GRe=e=>{var t,n;return(n=(t=X6())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},hIt=e=>{const t=GRe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},YRe=()=>{var e;return(e=X6())===null||e===void 0?void 0:e.config},KRe=e=>{var t;return(t=X6())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pIt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[w$(JSON.stringify(n)),w$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function mIt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Bo())}function gIt(){var e;const t=(e=X6())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function yIt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function vIt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bIt(){const e=Bo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _It(){return!gIt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function tJ(){try{return typeof indexedDB=="object"}catch{return!1}}function wIt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EIt="FirebaseError";class Kh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=EIt,Object.setPrototypeOf(this,Kh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cS.prototype.create)}}class cS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?xIt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Kh(i,a,r)}}function xIt(e,t){return e.replace(SIt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const SIt=/\{\$([^}]+)}/g;function TIt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function HA(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(mde(s)&&mde(o)){if(!HA(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function mde(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function CIt(e,t){const n=new AIt(e,t);return n.subscribe.bind(n)}class AIt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");IIt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=Zj),i.error===void 0&&(i.error=Zj),i.complete===void 0&&(i.complete=Zj);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IIt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function Zj(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kIt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RIt=1e3,NIt=2,PIt=4*60*60*1e3,DIt=.5;function OIt(e,t=RIt,n=NIt){const r=t*Math.pow(n,e),i=Math.round(DIt*r*(Math.random()-.5)*2);return Math.min(PIt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(e){return e&&e._delegate?e._delegate:e}class kh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $It{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new VA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(LIt(t))try{this.getOrInitializeService({instanceIdentifier:xv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=xv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=xv){return this.instances.has(t)}getOptions(t=xv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:MIt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=xv){return this.component?this.component.multipleInstances?t:xv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function MIt(e){return e===xv?void 0:e}function LIt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FIt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new $It(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Wn||(Wn={}));const jIt={debug:Wn.DEBUG,verbose:Wn.VERBOSE,info:Wn.INFO,warn:Wn.WARN,error:Wn.ERROR,silent:Wn.SILENT},BIt=Wn.INFO,UIt={[Wn.DEBUG]:"log",[Wn.VERBOSE]:"log",[Wn.INFO]:"info",[Wn.WARN]:"warn",[Wn.ERROR]:"error"},zIt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=UIt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Q6{constructor(t){this.name=t,this._logLevel=BIt,this._logHandler=zIt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Wn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?jIt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Wn.DEBUG,...t),this._logHandler(this,Wn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Wn.VERBOSE,...t),this._logHandler(this,Wn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Wn.INFO,...t),this._logHandler(this,Wn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Wn.WARN,...t),this._logHandler(this,Wn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Wn.ERROR,...t),this._logHandler(this,Wn.ERROR,...t)}}const VIt=(e,t)=>t.some(n=>e instanceof n);let gde,yde;function HIt(){return gde||(gde=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qIt(){return yde||(yde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const XRe=new WeakMap,Kz=new WeakMap,QRe=new WeakMap,e9=new WeakMap,nJ=new WeakMap;function WIt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(g0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&XRe.set(n,e)}).catch(()=>{}),nJ.set(t,e),t}function GIt(e){if(Kz.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});Kz.set(e,t)}let Xz={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return Kz.get(e);if(t==="objectStoreNames")return e.objectStoreNames||QRe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function YIt(e){Xz=e(Xz)}function KIt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(t9(this),t,...n);return QRe.set(r,t.sort?t.sort():[t]),g0(r)}:qIt().includes(e)?function(...t){return e.apply(t9(this),t),g0(XRe.get(this))}:function(...t){return g0(e.apply(t9(this),t))}}function XIt(e){return typeof e=="function"?KIt(e):(e instanceof IDBTransaction&&GIt(e),VIt(e,HIt())?new Proxy(e,Xz):e)}function g0(e){if(e instanceof IDBRequest)return WIt(e);if(e9.has(e))return e9.get(e);const t=XIt(e);return t!==e&&(e9.set(e,t),nJ.set(t,e)),t}const t9=e=>nJ.get(e);function QIt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=g0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(g0(o.result),u.oldVersion,u.newVersion,g0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const JIt=["get","getKey","getAll","getAllKeys","count"],ZIt=["put","add","delete","clear"],n9=new Map;function vde(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(n9.get(t))return n9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=ZIt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||JIt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return n9.set(t,s),s}YIt(e=>({...e,get:(t,n,r)=>vde(t,n)||e.get(t,n,r),has:(t,n)=>!!vde(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ekt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(tkt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function tkt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Qz="@firebase/app",bde="0.10.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Q6("@firebase/app"),nkt="@firebase/app-compat",rkt="@firebase/analytics-compat",ikt="@firebase/analytics",skt="@firebase/app-check-compat",okt="@firebase/app-check",akt="@firebase/auth",ukt="@firebase/auth-compat",lkt="@firebase/database",ckt="@firebase/database-compat",fkt="@firebase/functions",dkt="@firebase/functions-compat",hkt="@firebase/installations",pkt="@firebase/installations-compat",mkt="@firebase/messaging",gkt="@firebase/messaging-compat",ykt="@firebase/performance",vkt="@firebase/performance-compat",bkt="@firebase/remote-config",_kt="@firebase/remote-config-compat",wkt="@firebase/storage",Ekt="@firebase/storage-compat",xkt="@firebase/firestore",Skt="@firebase/vertexai-preview",Tkt="@firebase/firestore-compat",Ckt="firebase",Akt="10.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz="[DEFAULT]",Ikt={[Qz]:"fire-core",[nkt]:"fire-core-compat",[ikt]:"fire-analytics",[rkt]:"fire-analytics-compat",[okt]:"fire-app-check",[skt]:"fire-app-check-compat",[akt]:"fire-auth",[ukt]:"fire-auth-compat",[lkt]:"fire-rtdb",[ckt]:"fire-rtdb-compat",[fkt]:"fire-fn",[dkt]:"fire-fn-compat",[hkt]:"fire-iid",[pkt]:"fire-iid-compat",[mkt]:"fire-fcm",[gkt]:"fire-fcm-compat",[ykt]:"fire-perf",[vkt]:"fire-perf-compat",[bkt]:"fire-rc",[_kt]:"fire-rc-compat",[wkt]:"fire-gcs",[Ekt]:"fire-gcs-compat",[xkt]:"fire-fst",[Tkt]:"fire-fst-compat",[Skt]:"fire-vertex","fire-js":"fire-js",[Ckt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$=new Map,kkt=new Map,Zz=new Map;function _de(e,t){try{e.container.addComponent(t)}catch(n){B1.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Sm(e){const t=e.name;if(Zz.has(t))return B1.debug(`There were multiple attempts to register component ${t}.`),!1;Zz.set(t,e);for(const n of E$.values())_de(n,e);for(const n of kkt.values())_de(n,e);return!0}function fS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function eh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rkt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},y0=new cS("app","Firebase",Rkt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nkt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new kh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw y0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=Akt;function JRe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:Jz,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw y0.create("bad-app-name",{appName:String(i)});if(n||(n=YRe()),!n)throw y0.create("no-options");const s=E$.get(i);if(s){if(HA(n,s.options)&&HA(r,s.config))return s;throw y0.create("duplicate-app",{appName:i})}const o=new FIt(i);for(const u of Zz.values())o.addComponent(u);const a=new Nkt(n,r,o);return E$.set(i,a),a}function rJ(e=Jz){const t=E$.get(e);if(!t&&e===Jz&&YRe())return JRe();if(!t)throw y0.create("no-app",{appName:e});return t}function qf(e,t,n){var r;let i=(r=Ikt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),B1.warn(a.join(" "));return}Sm(new kh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pkt="firebase-heartbeat-database",Dkt=1,qA="firebase-heartbeat-store";let r9=null;function ZRe(){return r9||(r9=QIt(Pkt,Dkt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(qA)}catch(n){console.warn(n)}}}}).catch(e=>{throw y0.create("idb-open",{originalErrorMessage:e.message})})),r9}async function Okt(e){try{const n=(await ZRe()).transaction(qA),r=await n.objectStore(qA).get(eNe(e));return await n.done,r}catch(t){if(t instanceof Kh)B1.warn(t.message);else{const n=y0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});B1.warn(n.message)}}}async function wde(e,t){try{const r=(await ZRe()).transaction(qA,"readwrite");await r.objectStore(qA).put(t,eNe(e)),await r.done}catch(n){if(n instanceof Kh)B1.warn(n.message);else{const r=y0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});B1.warn(r.message)}}}function eNe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $kt=1024,Mkt=30*24*60*60*1e3;class Lkt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new jkt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Ede();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Mkt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Ede(),{heartbeatsToSend:r,unsentEntries:i}=Fkt(this._heartbeatsCache.heartbeats),s=w$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Ede(){return new Date().toISOString().substring(0,10)}function Fkt(e,t=$kt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),xde(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),xde(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class jkt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return tJ()?wIt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Okt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return wde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function xde(e){return w$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bkt(e){Sm(new kh("platform-logger",t=>new ekt(t),"PRIVATE")),Sm(new kh("heartbeat",t=>new Lkt(t),"PRIVATE")),qf(Qz,bde,e),qf(Qz,bde,"esm2017"),qf("fire-js","")}Bkt("");function tNe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ukt=tNe,nNe=new cS("auth","Firebase",tNe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$=new Q6("@firebase/auth");function zkt(e,...t){x$.logLevel<=Wn.WARN&&x$.warn(`Auth (${Cb}): ${e}`,...t)}function bD(e,...t){x$.logLevel<=Wn.ERROR&&x$.error(`Auth (${Cb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rh(e,...t){throw sJ(e,...t)}function Wf(e,...t){return sJ(e,...t)}function iJ(e,t,n){const r=Object.assign(Object.assign({},Ukt()),{[t]:n});return new cS("auth","Firebase",r).create(t,{appName:e.name})}function v0(e){return iJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Vkt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Rh(e,"argument-error"),iJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return nNe.create(e,...t)}function an(e,t,...n){if(!e)throw sJ(t,...n)}function jp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw bD(t),new Error(t)}function Tm(e,t){e||jp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Hkt(){return Sde()==="http:"||Sde()==="https:"}function Sde(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qkt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hkt()||yIt()||"connection"in navigator)?navigator.onLine:!0}function Wkt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(t,n){this.shortDelay=t,this.longDelay=n,Tm(n>t,"Short delay should be less than long delay!"),this.isMobile=mIt()||vIt()}get(){return qkt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oJ(e,t){Tm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rNe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;jp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;jp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;jp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gkt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ykt=new Ck(3e4,6e4);function J6(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function dS(e,t,n,r,i={}){return iNe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Tk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),rNe.fetch()(oNe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function iNe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Gkt),t);try{const i=new Kkt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw GN(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw GN(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw GN(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw GN(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw iJ(e,c,l);Rh(e,c)}}catch(i){if(i instanceof Kh)throw i;Rh(e,"network-request-failed",{message:String(i)})}}async function sNe(e,t,n,r,i={}){const s=await dS(e,t,n,r,i);return"mfaPendingCredential"in s&&Rh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function oNe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?oJ(e.config,i):`${e.config.apiScheme}://${i}`}class Kkt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Wf(this.auth,"network-request-failed")),Ykt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function GN(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Wf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xkt(e,t){return dS(e,"POST","/v1/accounts:delete",t)}async function aNe(e,t){return dS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Qkt(e,t=!1){const n=si(e),r=await n.getIdToken(t),i=aJ(r);an(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:w2(i9(i.auth_time)),issuedAtTime:w2(i9(i.iat)),expirationTime:w2(i9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function i9(e){return Number(e)*1e3}function aJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return bD("JWT malformed, contained fewer than 3 sections"),null;try{const i=qRe(n);return i?JSON.parse(i):(bD("Failed to decode base64 JWT payload"),null)}catch(i){return bD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Tde(e){const t=aJ(e);return an(t,"internal-error"),an(typeof t.exp<"u","internal-error"),an(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WA(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Kh&&Jkt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Jkt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zkt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=w2(this.lastLoginAt),this.creationTime=w2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await WA(e,aNe(n,{idToken:r}));an(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?uNe(s.providerUserInfo):[],a=tRt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new tV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function eRt(e){const t=si(e);await S$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function tRt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function uNe(e){return e.map(t=>{var{providerId:n}=t,r=PI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nRt(e,t){const n=await iNe(e,{},async()=>{const r=Tk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=oNe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",rNe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function rRt(e,t){return dS(e,"POST","/v2/accounts:revokeToken",J6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){an(t.idToken,"internal-error"),an(typeof t.idToken<"u","internal-error"),an(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Tde(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){an(t.length!==0,"internal-error");const n=Tde(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(an(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await nRt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Vw;return r&&(an(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(an(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(an(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new Vw,this.toJSON())}_performRefresh(){return jp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ug(e,t){an(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Bp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=PI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Zkt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new tV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await WA(this,this.stsTokenManager.getToken(this.auth,t));return an(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Qkt(this,t)}reload(){return eRt(this)}_assign(t){this!==t&&(an(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Bp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await S$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(eh(this.auth.app))return Promise.reject(v0(this.auth));const t=await this.getIdToken();return await WA(this,Xkt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:S,stsTokenManager:T}=n;an(b&&T,t,"internal-error");const C=Vw.fromJSON(this.name,T);an(typeof b=="string",t,"internal-error"),ug(f,t.name),ug(d,t.name),an(typeof w=="boolean",t,"internal-error"),an(typeof E=="boolean",t,"internal-error"),ug(h,t.name),ug(p,t.name),ug(m,t.name),ug(g,t.name),ug(y,t.name),ug(v,t.name);const A=new Bp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:C,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(A.providerData=S.map(N=>Object.assign({},N))),g&&(A._redirectEventId=g),A}static async _fromIdTokenResponse(t,n,r=!1){const i=new Vw;i.updateFromServerResponse(n);const s=new Bp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await S$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];an(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?uNe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new Vw;a.updateFromIdToken(r);const u=new Bp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new tV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cde=new Map;function Up(e){Tm(e instanceof Function,"Expected a class definition");let t=Cde.get(e);return t?(Tm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Cde.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lNe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}lNe.type="NONE";const Ade=lNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _D(e,t,n){return`firebase:${e}:${t}:${n}`}class Hw{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=_D(this.userKey,i.apiKey,s),this.fullPersistenceKey=_D("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Bp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new Hw(Up(Ade),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Up(Ade);const o=_D(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Bp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Hw(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new Hw(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ide(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(dNe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(cNe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pNe(t))return"Blackberry";if(mNe(t))return"Webos";if(uJ(t))return"Safari";if((t.includes("chrome/")||fNe(t))&&!t.includes("edge/"))return"Chrome";if(hNe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function cNe(e=Bo()){return/firefox\//i.test(e)}function uJ(e=Bo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function fNe(e=Bo()){return/crios\//i.test(e)}function dNe(e=Bo()){return/iemobile/i.test(e)}function hNe(e=Bo()){return/android/i.test(e)}function pNe(e=Bo()){return/blackberry/i.test(e)}function mNe(e=Bo()){return/webos/i.test(e)}function Z6(e=Bo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function iRt(e=Bo()){var t;return Z6(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function sRt(){return bIt()&&document.documentMode===10}function gNe(e=Bo()){return Z6(e)||hNe(e)||mNe(e)||pNe(e)||/windows phone/i.test(e)||dNe(e)}function oRt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yNe(e,t=[]){let n;switch(e){case"Browser":n=Ide(Bo());break;case"Worker":n=`${Ide(Bo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Cb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aRt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uRt(e,t={}){return dS(e,"GET","/v2/passwordPolicy",J6(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lRt=6;class cRt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:lRt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fRt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new kde(this),this.idTokenSubscription=new kde(this),this.beforeStateQueue=new aRt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=nNe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Up(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Hw.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await aNe(this,{idToken:t}),r=await Bp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(eh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await S$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Wkt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(eh(this.app))return Promise.reject(v0(this));const n=t?si(t):null;return n&&an(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&an(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return eh(this.app)?Promise.reject(v0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return eh(this.app)?Promise.reject(v0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Up(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await uRt(this),n=new cRt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new cS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await rRt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Up(t)||this._popupRedirectResolver;an(n,this,"argument-error"),this.redirectPersistenceManager=await Hw.create(this,[Up(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=yNe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&zkt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ak(e){return si(e)}class kde{constructor(t){this.auth=t,this.observer=null,this.addObserver=CIt(n=>this.observer=n)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dRt(e){lJ=e}function hRt(e){return lJ.loadJS(e)}function pRt(){return lJ.gapiScript}function mRt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gRt(e,t){const n=fS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(HA(s,t??{}))return i;Rh(i,"already-initialized")}return n.initialize({options:t})}function yRt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Up);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function vRt(e,t,n){const r=Ak(e);an(r._canInitEmulator,r,"emulator-config-failed"),an(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=vNe(t),{host:o,port:a}=bRt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),_Rt()}function vNe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function bRt(e){const t=vNe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Rde(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Rde(o)}}}function Rde(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function _Rt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bNe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return jp("not implemented")}_getIdTokenResponse(t){return jp("not implemented")}_linkToIdToken(t,n){return jp("not implemented")}_getReauthenticationResolver(t){return jp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qw(e,t){return sNe(e,"POST","/v1/accounts:signInWithIdp",J6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wRt="http://localhost";class U1 extends bNe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new U1(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Rh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=PI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new U1(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return qw(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,qw(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,qw(t,n)}buildRequest(){const t={requestUri:wRt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Tk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik extends cJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg extends Ik{constructor(){super("facebook.com")}static credential(t){return U1._fromParams({providerId:Dg.PROVIDER_ID,signInMethod:Dg.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Dg.credentialFromTaggedObject(t)}static credentialFromError(t){return Dg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Dg.credential(t.oauthAccessToken)}catch{return null}}}Dg.FACEBOOK_SIGN_IN_METHOD="facebook.com";Dg.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp extends Ik{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return U1._fromParams({providerId:Pp.PROVIDER_ID,signInMethod:Pp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Pp.credentialFromTaggedObject(t)}static credentialFromError(t){return Pp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Pp.credential(n,r)}catch{return null}}}Pp.GOOGLE_SIGN_IN_METHOD="google.com";Pp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og extends Ik{constructor(){super("github.com")}static credential(t){return U1._fromParams({providerId:Og.PROVIDER_ID,signInMethod:Og.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Og.credentialFromTaggedObject(t)}static credentialFromError(t){return Og.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Og.credential(t.oauthAccessToken)}catch{return null}}}Og.GITHUB_SIGN_IN_METHOD="github.com";Og.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g extends Ik{constructor(){super("twitter.com")}static credential(t,n){return U1._fromParams({providerId:$g.PROVIDER_ID,signInMethod:$g.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return $g.credentialFromTaggedObject(t)}static credentialFromError(t){return $g.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return $g.credential(n,r)}catch{return null}}}$g.TWITTER_SIGN_IN_METHOD="twitter.com";$g.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ERt(e,t){return sNe(e,"POST","/v1/accounts:signUp",J6(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Bp._fromIdTokenResponse(t,r,i),o=Nde(r);return new Y0({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Nde(r);return new Y0({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Nde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xRt(e){var t;if(eh(e.app))return Promise.reject(v0(e));const n=Ak(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new Y0({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await ERt(n,{returnSecureToken:!0}),i=await Y0._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T$ extends Kh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,T$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new T$(t,n,r,i)}}function _Ne(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?T$._fromErrorAndOperation(e,s,t,r):s})}async function SRt(e,t,n=!1){const r=await WA(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Y0._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TRt(e,t,n=!1){const{auth:r}=e;if(eh(r.app))return Promise.reject(v0(r));const i="reauthenticate";try{const s=await WA(e,_Ne(r,i,t,e),n);an(s.idToken,r,"internal-error");const o=aJ(s.idToken);an(o,r,"internal-error");const{sub:a}=o;return an(e.uid===a,r,"user-mismatch"),Y0._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CRt(e,t,n=!1){if(eh(e.app))return Promise.reject(v0(e));const r="signIn",i=await _Ne(e,r,t),s=await Y0._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function ARt(e,t,n,r){return si(e).onIdTokenChanged(t,n,r)}function IRt(e,t,n){return si(e).beforeAuthStateChanged(t,n)}function kRt(e,t,n,r){return si(e).onAuthStateChanged(t,n,r)}function RRt(e){return si(e).signOut()}const C$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wNe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(C$,"1"),this.storage.removeItem(C$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NRt(){const e=Bo();return uJ(e)||Z6(e)}const PRt=1e3,DRt=10;class ENe extends wNe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=NRt()&&oRt(),this.fallbackToPolling=gNe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);sRt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,DRt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},PRt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}ENe.type="LOCAL";const ORt=ENe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xNe extends wNe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}xNe.type="SESSION";const SNe=xNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Rt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new e4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await $Rt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}e4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MRt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=fJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(){return window}function LRt(e){gh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TNe(){return typeof gh().WorkerGlobalScope<"u"&&typeof gh().importScripts=="function"}async function FRt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function jRt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function BRt(){return TNe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CNe="firebaseLocalStorageDb",URt=1,A$="firebaseLocalStorage",ANe="fbase_key";class kk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function t4(e,t){return e.transaction([A$],t?"readwrite":"readonly").objectStore(A$)}function zRt(){const e=indexedDB.deleteDatabase(CNe);return new kk(e).toPromise()}function nV(){const e=indexedDB.open(CNe,URt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(A$,{keyPath:ANe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(A$)?t(r):(r.close(),await zRt(),t(await nV()))})})}async function Pde(e,t,n){const r=t4(e,!0).put({[ANe]:t,value:n});return new kk(r).toPromise()}async function VRt(e,t){const n=t4(e,!1).get(t),r=await new kk(n).toPromise();return r===void 0?null:r.value}function Dde(e,t){const n=t4(e,!0).delete(t);return new kk(n).toPromise()}const HRt=800,qRt=3;class INe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await nV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>qRt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TNe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=e4._getInstance(BRt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await FRt(),!this.activeServiceWorker)return;this.sender=new MRt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||jRt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await nV();return await Pde(t,C$,"1"),await Dde(t,C$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Pde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>VRt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Dde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=t4(i,!1).getAll();return new kk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),HRt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}INe.type="LOCAL";const WRt=INe;new Ck(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kNe(e,t){return t?Up(t):(an(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dJ extends bNe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return qw(t,this._buildIdpRequest())}_linkToIdToken(t,n){return qw(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return qw(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function GRt(e){return CRt(e.auth,new dJ(e),e.bypassAuthState)}function YRt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),TRt(n,new dJ(e),e.bypassAuthState)}async function KRt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),SRt(n,new dJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RNe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return GRt;case"linkViaPopup":case"linkViaRedirect":return KRt;case"reauthViaPopup":case"reauthViaRedirect":return YRt;default:Rh(this.auth,"internal-error")}}resolve(t){Tm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Tm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XRt=new Ck(2e3,1e4);async function QRt(e,t,n){if(eh(e.app))return Promise.reject(Wf(e,"operation-not-supported-in-this-environment"));const r=Ak(e);Vkt(e,t,cJ);const i=kNe(r,n);return new Qv(r,"signInViaPopup",t,i).executeNotNull()}class Qv extends RNe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Qv.currentPopupAction&&Qv.currentPopupAction.cancel(),Qv.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return an(t,this.auth,"internal-error"),t}async onExecution(){Tm(this.filter.length===1,"Popup operations only handle one event");const t=fJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Wf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Wf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qv.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Wf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,XRt.get())};t()}}Qv.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JRt="pendingRedirect",wD=new Map;class ZRt extends RNe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=wD.get(this.auth._key());if(!t){try{const r=await eNt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}wD.set(this.auth._key(),t)}return this.bypassAuthState||wD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function eNt(e,t){const n=rNt(t),r=nNt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function tNt(e,t){wD.set(e._key(),t)}function nNt(e){return Up(e._redirectPersistence)}function rNt(e){return _D(JRt,e.config.apiKey,e.name)}async function iNt(e,t,n=!1){if(eh(e.app))return Promise.reject(v0(e));const r=Ak(e),i=kNe(r,t),o=await new ZRt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sNt=10*60*1e3;class oNt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!aNt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!NNe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Wf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=sNt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ode(t))}saveEventToCache(t){this.cachedEventUids.add(Ode(t)),this.lastProcessedEventTime=Date.now()}}function Ode(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function NNe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function aNt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return NNe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uNt(e,t={}){return dS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lNt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,cNt=/^https?/;async function fNt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await uNt(e);for(const n of t)try{if(dNt(n))return}catch{}Rh(e,"unauthorized-domain")}function dNt(e){const t=eV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!cNt.test(n))return!1;if(lNt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hNt=new Ck(3e4,6e4);function $de(){const e=gh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function pNt(e){return new Promise((t,n)=>{var r,i,s;function o(){$de(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{$de(),n(Wf(e,"network-request-failed"))},timeout:hNt.get()})}if(!((i=(r=gh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=gh().gapi)===null||s===void 0)&&s.load)o();else{const a=mRt("iframefcb");return gh()[a]=()=>{gapi.load?o():n(Wf(e,"network-request-failed"))},hRt(`${pRt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw ED=null,t})}let ED=null;function mNt(e){return ED=ED||pNt(e),ED}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gNt=new Ck(5e3,15e3),yNt="__/auth/iframe",vNt="emulator/auth/iframe",bNt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},_Nt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function wNt(e){const t=e.config;an(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?oJ(t,vNt):`https://${e.config.authDomain}/${yNt}`,r={apiKey:t.apiKey,appName:e.name,v:Cb},i=_Nt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Tk(r).slice(1)}`}async function ENt(e){const t=await mNt(e),n=gh().gapi;return an(n,e,"internal-error"),t.open({where:document.body,url:wNt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bNt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Wf(e,"network-request-failed"),a=gh().setTimeout(()=>{s(o)},gNt.get());function u(){gh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xNt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},SNt=500,TNt=600,CNt="_blank",ANt="http://localhost";class Mde{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function INt(e,t,n,r=SNt,i=TNt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},xNt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Bo().toLowerCase();n&&(a=fNe(l)?CNt:n),cNe(l)&&(t=t||ANt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(iRt(l)&&a!=="_self")return kNt(t||"",a),new Mde(null);const f=window.open(t||"",a,c);an(f,e,"popup-blocked");try{f.focus()}catch{}return new Mde(f)}function kNt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RNt="__/auth/handler",NNt="emulator/auth/handler",PNt=encodeURIComponent("fac");async function Lde(e,t,n,r,i,s){an(e.config.authDomain,e,"auth-domain-config-required"),an(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Cb,eventId:i};if(t instanceof cJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",TIt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof Ik){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${PNt}=${encodeURIComponent(u)}`:"";return`${DNt(e)}?${Tk(a).slice(1)}${l}`}function DNt({config:e}){return e.emulator?oJ(e,NNt):`https://${e.authDomain}/${RNt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s9="webStorageSupport";class ONt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=SNe,this._completeRedirectFn=iNt,this._overrideRedirectResult=tNt}async _openPopup(t,n,r,i){var s;Tm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Lde(t,n,r,eV(),i);return INt(t,o,fJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Lde(t,n,r,eV(),i);return LRt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Tm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await ENt(t),r=new oNt(t);return n.register("authEvent",i=>(an(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(s9,{type:s9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[s9];o!==void 0&&n(!!o),Rh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=fNt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return gNe()||uJ()||Z6()}}const PNe=ONt;var Fde="@firebase/auth",jde="1.7.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Nt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MNt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LNt(e){Sm(new kh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;an(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yNe(e)},l=new fRt(r,i,s,u);return yRt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Sm(new kh("auth-internal",t=>{const n=Ak(t.getProvider("auth").getImmediate());return(r=>new $Nt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),qf(Fde,jde,MNt(e)),qf(Fde,jde,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FNt=5*60,jNt=KRe("authIdTokenMaxAge")||FNt;let Bde=null;const BNt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jNt)return;const i=n==null?void 0:n.token;Bde!==i&&(Bde=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function I$(e=rJ()){const t=fS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=gRt(e,{popupRedirectResolver:PNe,persistence:[WRt,ORt,SNe]}),r=KRe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=BNt(s.toString());IRt(n,o,()=>o(n.currentUser)),ARt(n,a=>o(a))}}const i=GRe("auth");return i&&vRt(n,`http://${i}`),n}function UNt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}dRt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Wf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",UNt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LNt("Browser");var zNt="firebase",VNt="10.12.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */qf(zNt,VNt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DNe="firebasestorage.googleapis.com",ONe="storageBucket",HNt=2*60*1e3,qNt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Kh{constructor(t,n,r=0){super(o9(t),`Firebase Storage: ${n} (${o9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return o9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Qi;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Qi||(Qi={}));function o9(e){return"storage/"+e}function hJ(){const e="An unknown error occurred, please check the error payload for server response.";return new Zi(Qi.UNKNOWN,e)}function WNt(e){return new Zi(Qi.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function GNt(e){return new Zi(Qi.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function YNt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zi(Qi.UNAUTHENTICATED,e)}function KNt(){return new Zi(Qi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function XNt(e){return new Zi(Qi.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function QNt(){return new Zi(Qi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function JNt(){return new Zi(Qi.CANCELED,"User canceled the upload/download.")}function ZNt(e){return new Zi(Qi.INVALID_URL,"Invalid URL '"+e+"'.")}function ePt(e){return new Zi(Qi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function tPt(){return new Zi(Qi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ONe+"' property when initializing the app?")}function nPt(){return new Zi(Qi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rPt(){return new Zi(Qi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function iPt(e){return new Zi(Qi.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function rV(e){return new Zi(Qi.INVALID_ARGUMENT,e)}function $Ne(){return new Zi(Qi.APP_DELETED,"The Firebase app was deleted.")}function sPt(e){return new Zi(Qi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function E2(e,t){return new Zi(Qi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function yT(e){throw new Zi(Qi.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=qa.makeFromUrl(t,n)}catch{return new qa(t,"")}if(r.path==="")return r;throw ePt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===DNe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],S=E.regex.exec(t);if(S){const T=S[E.indices.bucket];let C=S[E.indices.path];C||(C=""),r=new qa(T,C),E.postModify(r);break}}if(r==null)throw ZNt(t);return r}}class oPt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aPt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function uPt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lPt(e){return e!==void 0}function cPt(e){return typeof e=="object"&&!Array.isArray(e)}function pJ(e){return typeof e=="string"||e instanceof String}function Ude(e){return mJ()&&e instanceof Blob}function mJ(){return typeof Blob<"u"}function iV(e,t,n,r){if(r<t)throw rV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw rV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function MNe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var l1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(l1||(l1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fPt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dPt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new YN(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===l1.NO_ERROR,u=s.getStatus();if(!a||fPt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===l1.ABORT;r(!1,new YN(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new YN(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());lPt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=hJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?$Ne():JNt();o(u)}else{const u=QNt();o(u)}};this.canceled_?n(!1,new YN(!1,null,!0)):this.backoffId_=aPt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&uPt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class YN{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function hPt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function pPt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function mPt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function gPt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function yPt(e,t,n,r,i,s,o=!0){const a=MNe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return mPt(l,t),hPt(l,n),pPt(l,s),gPt(l,r),new dPt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vPt(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function bPt(...e){const t=vPt();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(mJ())return new Blob(e);throw new Zi(Qi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function _Pt(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wPt(e){if(typeof atob>"u")throw iPt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class a9{constructor(t,n){this.data=t,this.contentType=n||null}}function EPt(e,t){switch(e){case th.RAW:return new a9(LNe(t));case th.BASE64:case th.BASE64URL:return new a9(FNe(e,t));case th.DATA_URL:return new a9(SPt(t),TPt(t))}throw hJ()}function LNe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function xPt(e){let t;try{t=decodeURIComponent(e)}catch{throw E2(th.DATA_URL,"Malformed data URL.")}return LNe(t)}function FNe(e,t){switch(e){case th.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw E2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case th.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw E2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=wPt(t)}catch(i){throw i.message.includes("polyfill")?i:E2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class jNe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw E2(th.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=CPt(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function SPt(e){const t=new jNe(e);return t.base64?FNe(th.BASE64,t.rest):xPt(t.rest)}function TPt(e){return new jNe(e).contentType}function CPt(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(t,n){let r=0,i="";Ude(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(Ude(this.data_)){const r=this.data_,i=_Pt(r,t,n);return i===null?null:new Mg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Mg(r,!0)}}static getBlob(...t){if(mJ()){const n=t.map(r=>r instanceof Mg?r.data_:r);return new Mg(bPt.apply(null,n))}else{const n=t.map(o=>pJ(o)?EPt(th.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Mg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gJ(e){let t;try{t=JSON.parse(e)}catch{return null}return cPt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function APt(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function IPt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function BNe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kPt(e,t){return t}class Da{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||kPt}}let KN=null;function RPt(e){return!pJ(e)||e.length<2?e:BNe(e)}function UNe(){if(KN)return KN;const e=[];e.push(new Da("bucket")),e.push(new Da("generation")),e.push(new Da("metageneration")),e.push(new Da("name","fullPath",!0));function t(s,o){return RPt(o)}const n=new Da("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Da("size");return i.xform=r,e.push(i),e.push(new Da("timeCreated")),e.push(new Da("updated")),e.push(new Da("md5Hash",null,!0)),e.push(new Da("cacheControl",null,!0)),e.push(new Da("contentDisposition",null,!0)),e.push(new Da("contentEncoding",null,!0)),e.push(new Da("contentLanguage",null,!0)),e.push(new Da("contentType",null,!0)),e.push(new Da("metadata","customMetadata",!0)),KN=e,KN}function NPt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new qa(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function PPt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return NPt(r,e),r}function zNe(e,t,n){const r=gJ(t);return r===null?null:PPt(e,r,n)}function DPt(e,t,n,r){const i=gJ(t);if(i===null||!pJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=Rk(d,n,r),p=MNe({alt:"media",token:l});return h+p})[0]}function OPt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zde="prefixes",Vde="items";function $Pt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[zde])for(const i of n[zde]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new qa(t,s));r.prefixes.push(o)}if(n[Vde])for(const i of n[Vde]){const s=e._makeStorageReference(new qa(t,i.name));r.items.push(s)}return r}function MPt(e,t,n){const r=gJ(n);return r===null?null:$Pt(e,t,r)}class n4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yJ(e){if(!e)throw hJ()}function LPt(e,t){function n(r,i){const s=zNe(e,i,t);return yJ(s!==null),s}return n}function FPt(e,t){function n(r,i){const s=MPt(e,t,i);return yJ(s!==null),s}return n}function jPt(e,t){function n(r,i){const s=zNe(e,i,t);return yJ(s!==null),DPt(s,i,e.host,e._protocol)}return n}function vJ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=KNt():i=YNt():n.getStatus()===402?i=GNt(e.bucket):n.getStatus()===403?i=XNt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function VNe(e){const t=vJ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=WNt(e.path)),s.serverResponse=i.serverResponse,s}return n}function BPt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=Rk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new n4(a,u,FPt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=vJ(t),c}function UPt(e,t,n){const r=t.fullServerUrl(),i=Rk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new n4(i,s,jPt(e,n),o);return a.errorHandler=VNe(t),a}function zPt(e,t){const n=t.fullServerUrl(),r=Rk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new n4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=VNe(t),a}function VPt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function HPt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=VPt(null,t)),r}function qPt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=HPt(t,r,i),c=OPt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Mg.getBlob(f,r,d);if(h===null)throw nPt();const p={name:l.fullPath},m=Rk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new n4(m,g,LPt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=vJ(t),v}class WPt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=l1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=l1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=l1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw yT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class GPt extends WPt{initXhr(){this.xhr_.responseType="text"}}function r4(){return new GPt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z1{constructor(t,n){this._service=t,n instanceof qa?this._location=n:this._location=qa.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new z1(t,n)}get root(){const t=new qa(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return BNe(this._location.path)}get storage(){return this._service}get parent(){const t=APt(this._location.path);if(t===null)return null;const n=new qa(this._location.bucket,t);return new z1(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw sPt(t)}}function YPt(e,t,n){e._throwIfRoot("uploadBytes");const r=qPt(e.storage,e._location,UNe(),new Mg(t,!0),n);return e.storage.makeRequestWithTokens(r,r4).then(i=>({metadata:i,ref:e}))}function KPt(e){const t={prefixes:[],items:[]};return HNe(e,t).then(()=>t)}async function HNe(e,t,n){const i=await XPt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await HNe(e,t,i.nextPageToken)}function XPt(e,t){t!=null&&typeof t.maxResults=="number"&&iV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=BPt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,r4)}function QPt(e){e._throwIfRoot("getDownloadURL");const t=UPt(e.storage,e._location,UNe());return e.storage.makeRequestWithTokens(t,r4).then(n=>{if(n===null)throw rPt();return n})}function JPt(e){e._throwIfRoot("deleteObject");const t=zPt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,r4)}function ZPt(e,t){const n=IPt(e._location.path,t),r=new qa(e._location.bucket,n);return new z1(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eDt(e){return/^[A-Za-z]+:\/\//.test(e)}function tDt(e,t){return new z1(e,t)}function qNe(e,t){if(e instanceof bJ){const n=e;if(n._bucket==null)throw tPt();const r=new z1(n,n._bucket);return t!=null?qNe(r,t):r}else return t!==void 0?ZPt(e,t):e}function nDt(e,t){if(t&&eDt(t)){if(e instanceof bJ)return tDt(e,t);throw rV("To use ref(service, url), the first argument must be a Storage instance.")}else return qNe(e,t)}function Hde(e,t){const n=t==null?void 0:t[ONe];return n==null?null:qa.makeFromBucketSpec(n,e)}function rDt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:pIt(i,e.app.options.projectId))}class bJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=DNe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=HNt,this._maxUploadRetryTime=qNt,this._requests=new Set,i!=null?this._bucket=qa.makeFromBucketSpec(i,this._host):this._bucket=Hde(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=qa.makeFromBucketSpec(this._url,t):this._bucket=Hde(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){iV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){iV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new z1(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new oPt($Ne());{const o=yPt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const qde="@firebase/storage",Wde="0.12.6";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WNe="storage";function Zy(e,t,n){return e=si(e),YPt(e,t,n)}function vT(e){return e=si(e),KPt(e)}function ev(e){return e=si(e),QPt(e)}function Gde(e){return e=si(e),JPt(e)}function Qr(e,t){return e=si(e),nDt(e,t)}function d_(e=rJ(),t){e=si(e);const r=fS(e,WNe).getImmediate({identifier:t}),i=hIt("storage");return i&&iDt(r,...i),r}function iDt(e,t,n,r={}){rDt(e,t,n,r)}function sDt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new bJ(n,r,i,t,Cb)}function oDt(){Sm(new kh(WNe,sDt,"PUBLIC").setMultipleInstances(!0)),qf(qde,Wde,""),qf(qde,Wde,"esm2017")}oDt();var Yde=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var c1,GNe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(T,C){function A(){}A.prototype=C.prototype,T.D=C.prototype,T.prototype=new A,T.prototype.constructor=T,T.C=function(N,k,O){for(var P=Array(arguments.length-2),$=2;$<arguments.length;$++)P[$-2]=arguments[$];return C.prototype[k].apply(N,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,C,A){A||(A=0);var N=Array(16);if(typeof C=="string")for(var k=0;16>k;++k)N[k]=C.charCodeAt(A++)|C.charCodeAt(A++)<<8|C.charCodeAt(A++)<<16|C.charCodeAt(A++)<<24;else for(k=0;16>k;++k)N[k]=C[A++]|C[A++]<<8|C[A++]<<16|C[A++]<<24;C=T.g[0],A=T.g[1],k=T.g[2];var O=T.g[3],P=C+(O^A&(k^O))+N[0]+3614090360&4294967295;C=A+(P<<7&4294967295|P>>>25),P=O+(k^C&(A^k))+N[1]+3905402710&4294967295,O=C+(P<<12&4294967295|P>>>20),P=k+(A^O&(C^A))+N[2]+606105819&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(C^k&(O^C))+N[3]+3250441966&4294967295,A=k+(P<<22&4294967295|P>>>10),P=C+(O^A&(k^O))+N[4]+4118548399&4294967295,C=A+(P<<7&4294967295|P>>>25),P=O+(k^C&(A^k))+N[5]+1200080426&4294967295,O=C+(P<<12&4294967295|P>>>20),P=k+(A^O&(C^A))+N[6]+2821735955&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(C^k&(O^C))+N[7]+4249261313&4294967295,A=k+(P<<22&4294967295|P>>>10),P=C+(O^A&(k^O))+N[8]+1770035416&4294967295,C=A+(P<<7&4294967295|P>>>25),P=O+(k^C&(A^k))+N[9]+2336552879&4294967295,O=C+(P<<12&4294967295|P>>>20),P=k+(A^O&(C^A))+N[10]+4294925233&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(C^k&(O^C))+N[11]+2304563134&4294967295,A=k+(P<<22&4294967295|P>>>10),P=C+(O^A&(k^O))+N[12]+1804603682&4294967295,C=A+(P<<7&4294967295|P>>>25),P=O+(k^C&(A^k))+N[13]+4254626195&4294967295,O=C+(P<<12&4294967295|P>>>20),P=k+(A^O&(C^A))+N[14]+2792965006&4294967295,k=O+(P<<17&4294967295|P>>>15),P=A+(C^k&(O^C))+N[15]+1236535329&4294967295,A=k+(P<<22&4294967295|P>>>10),P=C+(k^O&(A^k))+N[1]+4129170786&4294967295,C=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(C^A))+N[6]+3225465664&4294967295,O=C+(P<<9&4294967295|P>>>23),P=k+(C^A&(O^C))+N[11]+643717713&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^C&(k^O))+N[0]+3921069994&4294967295,A=k+(P<<20&4294967295|P>>>12),P=C+(k^O&(A^k))+N[5]+3593408605&4294967295,C=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(C^A))+N[10]+38016083&4294967295,O=C+(P<<9&4294967295|P>>>23),P=k+(C^A&(O^C))+N[15]+3634488961&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^C&(k^O))+N[4]+3889429448&4294967295,A=k+(P<<20&4294967295|P>>>12),P=C+(k^O&(A^k))+N[9]+568446438&4294967295,C=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(C^A))+N[14]+3275163606&4294967295,O=C+(P<<9&4294967295|P>>>23),P=k+(C^A&(O^C))+N[3]+4107603335&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^C&(k^O))+N[8]+1163531501&4294967295,A=k+(P<<20&4294967295|P>>>12),P=C+(k^O&(A^k))+N[13]+2850285829&4294967295,C=A+(P<<5&4294967295|P>>>27),P=O+(A^k&(C^A))+N[2]+4243563512&4294967295,O=C+(P<<9&4294967295|P>>>23),P=k+(C^A&(O^C))+N[7]+1735328473&4294967295,k=O+(P<<14&4294967295|P>>>18),P=A+(O^C&(k^O))+N[12]+2368359562&4294967295,A=k+(P<<20&4294967295|P>>>12),P=C+(A^k^O)+N[5]+4294588738&4294967295,C=A+(P<<4&4294967295|P>>>28),P=O+(C^A^k)+N[8]+2272392833&4294967295,O=C+(P<<11&4294967295|P>>>21),P=k+(O^C^A)+N[11]+1839030562&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^C)+N[14]+4259657740&4294967295,A=k+(P<<23&4294967295|P>>>9),P=C+(A^k^O)+N[1]+2763975236&4294967295,C=A+(P<<4&4294967295|P>>>28),P=O+(C^A^k)+N[4]+1272893353&4294967295,O=C+(P<<11&4294967295|P>>>21),P=k+(O^C^A)+N[7]+4139469664&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^C)+N[10]+3200236656&4294967295,A=k+(P<<23&4294967295|P>>>9),P=C+(A^k^O)+N[13]+681279174&4294967295,C=A+(P<<4&4294967295|P>>>28),P=O+(C^A^k)+N[0]+3936430074&4294967295,O=C+(P<<11&4294967295|P>>>21),P=k+(O^C^A)+N[3]+3572445317&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^C)+N[6]+76029189&4294967295,A=k+(P<<23&4294967295|P>>>9),P=C+(A^k^O)+N[9]+3654602809&4294967295,C=A+(P<<4&4294967295|P>>>28),P=O+(C^A^k)+N[12]+3873151461&4294967295,O=C+(P<<11&4294967295|P>>>21),P=k+(O^C^A)+N[15]+530742520&4294967295,k=O+(P<<16&4294967295|P>>>16),P=A+(k^O^C)+N[2]+3299628645&4294967295,A=k+(P<<23&4294967295|P>>>9),P=C+(k^(A|~O))+N[0]+4096336452&4294967295,C=A+(P<<6&4294967295|P>>>26),P=O+(A^(C|~k))+N[7]+1126891415&4294967295,O=C+(P<<10&4294967295|P>>>22),P=k+(C^(O|~A))+N[14]+2878612391&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~C))+N[5]+4237533241&4294967295,A=k+(P<<21&4294967295|P>>>11),P=C+(k^(A|~O))+N[12]+1700485571&4294967295,C=A+(P<<6&4294967295|P>>>26),P=O+(A^(C|~k))+N[3]+2399980690&4294967295,O=C+(P<<10&4294967295|P>>>22),P=k+(C^(O|~A))+N[10]+4293915773&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~C))+N[1]+2240044497&4294967295,A=k+(P<<21&4294967295|P>>>11),P=C+(k^(A|~O))+N[8]+1873313359&4294967295,C=A+(P<<6&4294967295|P>>>26),P=O+(A^(C|~k))+N[15]+4264355552&4294967295,O=C+(P<<10&4294967295|P>>>22),P=k+(C^(O|~A))+N[6]+2734768916&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~C))+N[13]+1309151649&4294967295,A=k+(P<<21&4294967295|P>>>11),P=C+(k^(A|~O))+N[4]+4149444226&4294967295,C=A+(P<<6&4294967295|P>>>26),P=O+(A^(C|~k))+N[11]+3174756917&4294967295,O=C+(P<<10&4294967295|P>>>22),P=k+(C^(O|~A))+N[2]+718787259&4294967295,k=O+(P<<15&4294967295|P>>>17),P=A+(O^(k|~C))+N[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+O&4294967295}r.prototype.u=function(T,C){C===void 0&&(C=T.length);for(var A=C-this.blockSize,N=this.B,k=this.h,O=0;O<C;){if(k==0)for(;O<=A;)i(this,T,O),O+=this.blockSize;if(typeof T=="string"){for(;O<C;)if(N[k++]=T.charCodeAt(O++),k==this.blockSize){i(this,N),k=0;break}}else for(;O<C;)if(N[k++]=T[O++],k==this.blockSize){i(this,N),k=0;break}}this.h=k,this.o+=C},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;var A=8*this.o;for(C=T.length-8;C<T.length;++C)T[C]=A&255,A/=256;for(this.u(T),T=Array(16),C=A=0;4>C;++C)for(var N=0;32>N;N+=8)T[A++]=this.g[C]>>>N&255;return T};function s(T,C){var A=a;return Object.prototype.hasOwnProperty.call(A,T)?A[T]:A[T]=C(T)}function o(T,C){this.h=C;for(var A=[],N=!0,k=T.length-1;0<=k;k--){var O=T[k]|0;N&&O==C||(A[k]=O,N=!1)}this.g=A}var a={};function u(T){return-128<=T&&128>T?s(T,function(C){return new o([C|0],0>C?-1:0)}):new o([T|0],0>T?-1:0)}function l(T){if(isNaN(T)||!isFinite(T))return f;if(0>T)return g(l(-T));for(var C=[],A=1,N=0;T>=A;N++)C[N]=T/A|0,A*=4294967296;return new o(C,0)}function c(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return g(c(T.substring(1),C));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=l(Math.pow(C,8)),N=f,k=0;k<T.length;k+=8){var O=Math.min(8,T.length-k),P=parseInt(T.substring(k,k+O),C);8>O?(O=l(Math.pow(C,O)),N=N.j(O).add(l(P))):(N=N.j(A),N=N.add(l(P)))}return N}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var T=0,C=1,A=0;A<this.g.length;A++){var N=this.i(A);T+=(0<=N?N:4294967296+N)*C,C*=4294967296}return T},e.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(p(this))return"0";if(m(this))return"-"+g(this).toString(T);for(var C=l(Math.pow(T,6)),A=this,N="";;){var k=w(A,C).g;A=y(A,k.j(C));var O=((0<A.g.length?A.g[0]:A.h)>>>0).toString(T);if(A=k,p(A))return O+N;for(;6>O.length;)O="0"+O;N=O+N}},e.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function p(T){if(T.h!=0)return!1;for(var C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function m(T){return T.h==-1}e.l=function(T){return T=y(this,T),m(T)?-1:p(T)?0:1};function g(T){for(var C=T.g.length,A=[],N=0;N<C;N++)A[N]=~T.g[N];return new o(A,~T.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],N=0,k=0;k<=C;k++){var O=N+(this.i(k)&65535)+(T.i(k)&65535),P=(O>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);N=P>>>16,O&=65535,P&=65535,A[k]=P<<16|O}return new o(A,A[A.length-1]&-2147483648?-1:0)};function y(T,C){return T.add(g(C))}e.j=function(T){if(p(this)||p(T))return f;if(m(this))return m(T)?g(this).j(g(T)):g(g(this).j(T));if(m(T))return g(this.j(g(T)));if(0>this.l(h)&&0>T.l(h))return l(this.m()*T.m());for(var C=this.g.length+T.g.length,A=[],N=0;N<2*C;N++)A[N]=0;for(N=0;N<this.g.length;N++)for(var k=0;k<T.g.length;k++){var O=this.i(N)>>>16,P=this.i(N)&65535,$=T.i(k)>>>16,L=T.i(k)&65535;A[2*N+2*k]+=P*L,v(A,2*N+2*k),A[2*N+2*k+1]+=O*L,v(A,2*N+2*k+1),A[2*N+2*k+1]+=P*$,v(A,2*N+2*k+1),A[2*N+2*k+2]+=O*$,v(A,2*N+2*k+2)}for(N=0;N<C;N++)A[N]=A[2*N+1]<<16|A[2*N];for(N=C;N<2*C;N++)A[N]=0;return new o(A,0)};function v(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function b(T,C){this.g=T,this.h=C}function w(T,C){if(p(C))throw Error("division by zero");if(p(T))return new b(f,f);if(m(T))return C=w(g(T),C),new b(g(C.g),g(C.h));if(m(C))return C=w(T,g(C)),new b(g(C.g),C.h);if(30<T.g.length){if(m(T)||m(C))throw Error("slowDivide_ only works with positive integers.");for(var A=d,N=C;0>=N.l(T);)A=E(A),N=E(N);var k=S(A,1),O=S(N,1);for(N=S(N,2),A=S(A,2);!p(N);){var P=O.add(N);0>=P.l(T)&&(k=k.add(A),O=P),N=S(N,1),A=S(A,1)}return C=y(T,k.j(C)),new b(k,C)}for(k=f;0<=T.l(C);){for(A=Math.max(1,Math.floor(T.m()/C.m())),N=Math.ceil(Math.log(A)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),O=l(A),P=O.j(C);m(P)||0<P.l(T);)A-=N,O=l(A),P=O.j(C);p(O)&&(O=d),k=k.add(O),T=y(T,P)}return new b(k,T)}e.A=function(T){return w(this,T).h},e.and=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],N=0;N<C;N++)A[N]=this.i(N)&T.i(N);return new o(A,this.h&T.h)},e.or=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],N=0;N<C;N++)A[N]=this.i(N)|T.i(N);return new o(A,this.h|T.h)},e.xor=function(T){for(var C=Math.max(this.g.length,T.g.length),A=[],N=0;N<C;N++)A[N]=this.i(N)^T.i(N);return new o(A,this.h^T.h)};function E(T){for(var C=T.g.length+1,A=[],N=0;N<C;N++)A[N]=T.i(N)<<1|T.i(N-1)>>>31;return new o(A,T.h)}function S(T,C){var A=C>>5;C%=32;for(var N=T.g.length-A,k=[],O=0;O<N;O++)k[O]=0<C?T.i(O+A)>>>C|T.i(O+A+1)<<32-C:T.i(O+A);return new o(k,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,GNe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,c1=o}).apply(typeof Yde<"u"?Yde:typeof self<"u"?self:typeof window<"u"?window:{});var XN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var YNe,KNe,bC,XNe,xD,sV,QNe,JNe,ZNe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,F,H){return x==Array.prototype||x==Object.prototype||(x[F]=H.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof XN=="object"&&XN];for(var F=0;F<x.length;++F){var H=x[F];if(H&&H.Math==Math)return H}throw Error("Cannot find global object")}var r=n(this);function i(x,F){if(F)e:{var H=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var _e=x[Q];if(!(_e in H))break e;H=H[_e]}x=x[x.length-1],Q=H[x],F=F(Q),F!=Q&&F!=null&&t(H,x,{configurable:!0,writable:!0,value:F})}}function s(x,F){x instanceof String&&(x+="");var H=0,Q=!1,_e={next:function(){if(!Q&&H<x.length){var Pe=H++;return{value:F(Pe,x[Pe]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return _e[Symbol.iterator]=function(){return _e},_e}i("Array.prototype.values",function(x){return x||function(){return s(this,function(F,H){return H})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var F=typeof x;return F=F!="object"?F:x?Array.isArray(x)?"array":F:"null",F=="array"||F=="object"&&typeof x.length=="number"}function l(x){var F=typeof x;return F=="object"&&x!=null||F=="function"}function c(x,F,H){return x.call.apply(x.bind,arguments)}function f(x,F,H){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var _e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_e,Q),x.apply(F,_e)}}return function(){return x.apply(F,arguments)}}function d(x,F,H){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,F){var H=Array.prototype.slice.call(arguments,1);return function(){var Q=H.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,F){function H(){}H.prototype=F.prototype,x.aa=F.prototype,x.prototype=new H,x.prototype.constructor=x,x.Qb=function(Q,_e,Pe){for(var pt=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)pt[Gr-2]=arguments[Gr];return F.prototype[_e].apply(Q,pt)}}function m(x){const F=x.length;if(0<F){const H=Array(F);for(let Q=0;Q<F;Q++)H[Q]=x[Q];return H}return[]}function g(x,F){for(let H=1;H<arguments.length;H++){const Q=arguments[H];if(u(Q)){const _e=x.length||0,Pe=Q.length||0;x.length=_e+Pe;for(let pt=0;pt<Pe;pt++)x[_e+pt]=Q[pt]}else x.push(Q)}}class y{constructor(F,H){this.i=F,this.j=H,this.h=0,this.g=null}get(){let F;return 0<this.h?(this.h--,F=this.g,this.g=F.next,F.next=null):F=this.i(),F}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function S(x,F,H){for(const Q in x)F.call(H,x[Q],Q,x)}function T(x,F){for(const H in x)F.call(void 0,x[H],H,x)}function C(x){const F={};for(const H in x)F[H]=x[H];return F}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(x,F){let H,Q;for(let _e=1;_e<arguments.length;_e++){Q=arguments[_e];for(H in Q)x[H]=Q[H];for(let Pe=0;Pe<A.length;Pe++)H=A[Pe],Object.prototype.hasOwnProperty.call(Q,H)&&(x[H]=Q[H])}}function k(x){var F=1;x=x.split(":");const H=[];for(;0<F&&x.length;)H.push(x.shift()),F--;return x.length&&H.push(x.join(":")),H}function O(x){a.setTimeout(()=>{throw x},0)}function P(){var x=V;let F=null;return x.g&&(F=x.g,x.g=x.g.next,x.g||(x.h=null),F.next=null),F}class ${constructor(){this.h=this.g=null}add(F,H){const Q=L.get();Q.set(F,H),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var L=new y(()=>new M,x=>x.reset());class M{constructor(){this.next=this.g=this.h=null}set(F,H){this.h=F,this.g=H,this.next=null}reset(){this.next=this.g=this.h=null}}let U,B=!1,V=new $,D=()=>{const x=a.Promise.resolve(void 0);U=()=>{x.then(z)}};var z=()=>{for(var x;x=P();){try{x.h.call(x.g)}catch(H){O(H)}var F=L;F.j(x),100>F.h&&(F.h++,x.next=F.g,F.g=x)}B=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,F){this.type=x,this.g=this.target=F,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,F=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const H=()=>{};a.addEventListener("test",H,F),a.removeEventListener("test",H,F)}catch{}return x}();function G(x,F){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var H=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=F,F=x.relatedTarget){if(E){e:{try{w(F.nodeName);var _e=!0;break e}catch{}_e=!1}_e||(F=null)}}else H=="mouseover"?F=x.fromElement:H=="mouseout"&&(F=x.toElement);this.relatedTarget=F,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:te[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var te={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),he=0;function ce(x,F,H,Q,_e){this.listener=x,this.proxy=null,this.src=F,this.type=H,this.capture=!!Q,this.ha=_e,this.key=++he,this.da=this.fa=!1}function me(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Le(x){this.src=x,this.g={},this.h=0}Le.prototype.add=function(x,F,H,Q,_e){var Pe=x.toString();x=this.g[Pe],x||(x=this.g[Pe]=[],this.h++);var pt=ct(x,F,Q,_e);return-1<pt?(F=x[pt],H||(F.fa=!1)):(F=new ce(F,this.src,Pe,!!Q,_e),F.fa=H,x.push(F)),F};function fe(x,F){var H=F.type;if(H in x.g){var Q=x.g[H],_e=Array.prototype.indexOf.call(Q,F,void 0),Pe;(Pe=0<=_e)&&Array.prototype.splice.call(Q,_e,1),Pe&&(me(F),x.g[H].length==0&&(delete x.g[H],x.h--))}}function ct(x,F,H,Q){for(var _e=0;_e<x.length;++_e){var Pe=x[_e];if(!Pe.da&&Pe.listener==F&&Pe.capture==!!H&&Pe.ha==Q)return _e}return-1}var ze="closure_lm_"+(1e6*Math.random()|0),Ke={};function it(x,F,H,Q,_e){if(Array.isArray(F)){for(var Pe=0;Pe<F.length;Pe++)it(x,F[Pe],H,Q,_e);return null}return H=st(H),x&&x[ve]?x.K(F,H,l(Q)?!!Q.capture:!!Q,_e):De(x,F,H,!1,Q,_e)}function De(x,F,H,Q,_e,Pe){if(!F)throw Error("Invalid event type");var pt=l(_e)?!!_e.capture:!!_e,Gr=ue(x);if(Gr||(x[ze]=Gr=new Le(x)),H=Gr.add(F,H,Q,pt,Pe),H.proxy)return H;if(Q=Ae(),H.proxy=Q,Q.src=x,Q.listener=H,x.addEventListener)q||(_e=pt),_e===void 0&&(_e=!1),x.addEventListener(F.toString(),Q,_e);else if(x.attachEvent)x.attachEvent(Ct(F.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return H}function Ae(){function x(H){return F.call(x.src,x.listener,H)}const F=Se;return x}function Ge(x,F,H,Q,_e){if(Array.isArray(F))for(var Pe=0;Pe<F.length;Pe++)Ge(x,F[Pe],H,Q,_e);else Q=l(Q)?!!Q.capture:!!Q,H=st(H),x&&x[ve]?(x=x.i,F=String(F).toString(),F in x.g&&(Pe=x.g[F],H=ct(Pe,H,Q,_e),-1<H&&(me(Pe[H]),Array.prototype.splice.call(Pe,H,1),Pe.length==0&&(delete x.g[F],x.h--)))):x&&(x=ue(x))&&(F=x.g[F.toString()],x=-1,F&&(x=ct(F,H,Q,_e)),(H=-1<x?F[x]:null)&&ht(H))}function ht(x){if(typeof x!="number"&&x&&!x.da){var F=x.src;if(F&&F[ve])fe(F.i,x);else{var H=x.type,Q=x.proxy;F.removeEventListener?F.removeEventListener(H,Q,x.capture):F.detachEvent?F.detachEvent(Ct(H),Q):F.addListener&&F.removeListener&&F.removeListener(Q),(H=ue(F))?(fe(H,x),H.h==0&&(H.src=null,F[ze]=null)):me(x)}}}function Ct(x){return x in Ke?Ke[x]:Ke[x]="on"+x}function Se(x,F){if(x.da)x=!0;else{F=new G(F,this);var H=x.listener,Q=x.ha||x.src;x.fa&&ht(x),x=H.call(Q,F)}return x}function ue(x){return x=x[ze],x instanceof Le?x:null}var Ve="__closure_events_fn_"+(1e9*Math.random()>>>0);function st(x){return typeof x=="function"?x:(x[Ve]||(x[Ve]=function(F){return x.handleEvent(F)}),x[Ve])}function ge(){W.call(this),this.i=new Le(this),this.M=this,this.F=null}p(ge,W),ge.prototype[ve]=!0,ge.prototype.removeEventListener=function(x,F,H,Q){Ge(this,x,F,H,Q)};function Ne(x,F){var H,Q=x.F;if(Q)for(H=[];Q;Q=Q.F)H.push(Q);if(x=x.M,Q=F.type||F,typeof F=="string")F=new j(F,x);else if(F instanceof j)F.target=F.target||x;else{var _e=F;F=new j(Q,x),N(F,_e)}if(_e=!0,H)for(var Pe=H.length-1;0<=Pe;Pe--){var pt=F.g=H[Pe];_e=qe(pt,Q,!0,F)&&_e}if(pt=F.g=x,_e=qe(pt,Q,!0,F)&&_e,_e=qe(pt,Q,!1,F)&&_e,H)for(Pe=0;Pe<H.length;Pe++)pt=F.g=H[Pe],_e=qe(pt,Q,!1,F)&&_e}ge.prototype.N=function(){if(ge.aa.N.call(this),this.i){var x=this.i,F;for(F in x.g){for(var H=x.g[F],Q=0;Q<H.length;Q++)me(H[Q]);delete x.g[F],x.h--}}this.F=null},ge.prototype.K=function(x,F,H,Q){return this.i.add(String(x),F,!1,H,Q)},ge.prototype.L=function(x,F,H,Q){return this.i.add(String(x),F,!0,H,Q)};function qe(x,F,H,Q){if(F=x.i.g[String(F)],!F)return!0;F=F.concat();for(var _e=!0,Pe=0;Pe<F.length;++Pe){var pt=F[Pe];if(pt&&!pt.da&&pt.capture==H){var Gr=pt.listener,yo=pt.ha||pt.src;pt.fa&&fe(x.i,pt),_e=Gr.call(yo,Q)!==!1&&_e}}return _e&&!Q.defaultPrevented}function Je(x,F,H){if(typeof x=="function")H&&(x=d(x,H));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(F)?-1:a.setTimeout(x,F||0)}function Et(x){x.g=Je(()=>{x.g=null,x.i&&(x.i=!1,Et(x))},x.l);const F=x.h;x.h=null,x.m.apply(null,F)}class wn extends W{constructor(F,H){super(),this.m=F,this.l=H,this.h=null,this.i=!1,this.g=null}j(F){this.h=arguments,this.g?this.i=!0:Et(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vr(x){W.call(this),this.h=x,this.g={}}p(vr,W);var br=[];function kr(x){S(x.g,function(F,H){this.g.hasOwnProperty(H)&&ht(F)},x),x.g={}}vr.prototype.N=function(){vr.aa.N.call(this),kr(this)},vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=a.JSON.stringify,Tn=a.JSON.parse,tr=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function nr(){}nr.prototype.h=null;function Ho(x){return x.h||(x.h=x.i())}function Mi(){}var es={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ln(){j.call(this,"d")}p(Ln,j);function Hn(){j.call(this,"c")}p(Hn,j);var hs={},op=null;function ol(){return op=op||new ge}hs.La="serverreachability";function wd(x){j.call(this,hs.La,x)}p(wd,j);function Sr(x){const F=ol();Ne(F,new wd(F))}hs.STAT_EVENT="statevent";function Si(x,F){j.call(this,hs.STAT_EVENT,x),this.stat=F}p(Si,j);function ai(x){const F=ol();Ne(F,new Si(F,x))}hs.Ma="timingevent";function cu(x,F){j.call(this,hs.Ma,x),this.size=F}p(cu,j);function Ia(x,F){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},F)}function ka(){this.g=!0}ka.prototype.xa=function(){this.g=!1};function oe(x,F,H,Q,_e,Pe){x.info(function(){if(x.g)if(Pe)for(var pt="",Gr=Pe.split("&"),yo=0;yo<Gr.length;yo++){var cr=Gr[yo].split("=");if(1<cr.length){var Yo=cr[0];cr=cr[1];var Ko=Yo.split("_");pt=2<=Ko.length&&Ko[1]=="type"?pt+(Yo+"="+cr+"&"):pt+(Yo+"=redacted&")}}else pt=null;else pt=Pe;return"XMLHTTP REQ ("+Q+") [attempt "+_e+"]: "+F+`
`+H+`
`+pt})}function ee(x,F,H,Q,_e,Pe,pt){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+_e+"]: "+F+`
`+H+`
`+Pe+" "+pt})}function ae(x,F,H,Q){x.info(function(){return"XMLHTTP TEXT ("+F+"): "+Ce(x,H)+(Q?" "+Q:"")})}function Te(x,F){x.info(function(){return"TIMEOUT: "+F})}ka.prototype.info=function(){};function Ce(x,F){if(!x.g)return F;if(!F)return null;try{var H=JSON.parse(F);if(H){for(x=0;x<H.length;x++)if(Array.isArray(H[x])){var Q=H[x];if(!(2>Q.length)){var _e=Q[1];if(Array.isArray(_e)&&!(1>_e.length)){var Pe=_e[0];if(Pe!="noop"&&Pe!="stop"&&Pe!="close")for(var pt=1;pt<_e.length;pt++)_e[pt]=""}}}}return Kt(H)}catch{return F}}var lt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xt;function Pn(){}p(Pn,nr),Pn.prototype.g=function(){return new XMLHttpRequest},Pn.prototype.i=function(){return{}},Xt=new Pn;function Fn(x,F,H,Q){this.j=x,this.i=F,this.l=H,this.R=Q||1,this.U=new vr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mn}function mn(){this.i=null,this.g="",this.h=!1}var rr={},Rr={};function Vt(x,F,H){x.L=1,x.v=jn(Ye(F)),x.m=H,x.P=!0,ir(x,null)}function ir(x,F){x.F=Date.now(),Ti(x),x.A=Ye(x.v);var H=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),CR(H.i,"t",Q),x.C=0,H=x.j.J,x.h=new mn,x.g=tie(x.j,H?F:null,!x.m),0<x.O&&(x.M=new wn(d(x.Y,x,x.g),x.O)),F=x.U,H=x.g,Q=x.ca;var _e="readystatechange";Array.isArray(_e)||(_e&&(br[0]=_e.toString()),_e=br);for(var Pe=0;Pe<_e.length;Pe++){var pt=it(H,_e[Pe],Q||F.handleEvent,!1,F.h||F);if(!pt)break;F.g[pt.key]=pt}F=x.H?C(x.H):{},x.m?(x.u||(x.u="POST"),F["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,F)):(x.u="GET",x.g.ea(x.A,x.u,null,F)),Sr(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}Fn.prototype.ca=function(x){x=x.target;const F=this.M;F&&ts(x)==3?F.j():this.Y(x)},Fn.prototype.Y=function(x){try{if(x==this.g)e:{const Ko=ts(this.g);var F=this.g.Ba();const Yb=this.g.Z();if(!(3>Ko)&&(Ko!=3||this.g&&(this.h.h||this.g.oa()||Go(this.g)))){this.J||Ko!=4||F==7||(F==8||0>=Yb?Sr(3):Sr(2)),Xr(this);var H=this.g.Z();this.X=H;t:if(Hr(this)){var Q=Go(this.g);x="";var _e=Q.length,Pe=ts(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),go(this);var pt="";break t}this.h.i=new a.TextDecoder}for(F=0;F<_e;F++)this.h.h=!0,x+=this.h.i.decode(Q[F],{stream:!(Pe&&F==_e-1)});Q.length=0,this.h.g+=x,this.C=0,pt=this.h.g}else pt=this.g.oa();if(this.o=H==200,ee(this.i,this.u,this.A,this.l,this.R,Ko,H),this.o){if(this.T&&!this.K){t:{if(this.g){var Gr,yo=this.g;if((Gr=yo.g?yo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Gr)){var cr=Gr;break t}}cr=null}if(H=cr)ae(this.i,this.l,H,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,H);else{this.o=!1,this.s=3,ai(12),Li(this),go(this);break e}}if(this.P){H=!0;let nf;for(;!this.J&&this.C<pt.length;)if(nf=Xn(this,pt),nf==Rr){Ko==4&&(this.s=4,ai(14),H=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(nf==rr){this.s=4,ai(15),ae(this.i,this.l,pt,"[Invalid Chunk]"),H=!1;break}else ae(this.i,this.l,nf,null),Fi(this,nf);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ko!=4||pt.length!=0||this.h.h||(this.s=1,ai(16),H=!1),this.o=this.o&&H,!H)ae(this.i,this.l,pt,"[Invalid Chunked Response]"),Li(this),go(this);else if(0<pt.length&&!this.W){this.W=!0;var Yo=this.j;Yo.g==this&&Yo.ba&&!Yo.M&&(Yo.j.info("Great, no buffering proxy detected. Bytes received: "+pt.length),S5(Yo),Yo.M=!0,ai(11))}}else ae(this.i,this.l,pt,null),Fi(this,pt);Ko==4&&Li(this),this.o&&!this.J&&(Ko==4?Qre(this.j,this):(this.o=!1,Ti(this)))}else Ky(this.g),H==400&&0<pt.indexOf("Unknown SID")?(this.s=3,ai(12)):(this.s=0,ai(13)),Li(this),go(this)}}}catch{}finally{}};function Hr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Xn(x,F){var H=x.C,Q=F.indexOf(`
`,H);return Q==-1?Rr:(H=Number(F.substring(H,Q)),isNaN(H)?rr:(Q+=1,Q+H>F.length?Rr:(F=F.slice(Q,Q+H),x.C=Q+H,F)))}Fn.prototype.cancel=function(){this.J=!0,Li(this)};function Ti(x){x.S=Date.now()+x.I,Ys(x,x.I)}function Ys(x,F){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Ia(d(x.ba,x),F)}function Xr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}Fn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Te(this.i,this.A),this.L!=2&&(Sr(),ai(17)),Li(this),this.s=2,go(this)):Ys(this,this.S-x)};function go(x){x.j.G==0||x.J||Qre(x.j,x)}function Li(x){Xr(x);var F=x.M;F&&typeof F.ma=="function"&&F.ma(),x.M=null,kr(x.U),x.g&&(F=x.g,x.g=null,F.abort(),F.ma())}function Fi(x,F){try{var H=x.j;if(H.G!=0&&(H.g==x||Ed(H.h,x))){if(!x.K&&Ed(H.h,x)&&H.G==3){try{var Q=H.Da.g.parse(F)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var _e=Q;if(_e[0]==0){e:if(!H.u){if(H.g)if(H.g.F+3e3<x.F)DR(H),NR(H);else break e;x5(H),ai(18)}}else H.za=_e[1],0<H.za-H.T&&37500>_e[2]&&H.F&&H.v==0&&!H.C&&(H.C=Ia(d(H.Za,H),6e3));if(1>=Jl(H.h)&&H.ca){try{H.ca()}catch{}H.ca=void 0}}else Xy(H,11)}else if((x.K||H.g==x)&&DR(H),!v(F))for(_e=H.Da.g.parse(F),F=0;F<_e.length;F++){let cr=_e[F];if(H.T=cr[0],cr=cr[1],H.G==2)if(cr[0]=="c"){H.K=cr[1],H.ia=cr[2];const Yo=cr[3];Yo!=null&&(H.la=Yo,H.j.info("VER="+H.la));const Ko=cr[4];Ko!=null&&(H.Aa=Ko,H.j.info("SVER="+H.Aa));const Yb=cr[5];Yb!=null&&typeof Yb=="number"&&0<Yb&&(Q=1.5*Yb,H.L=Q,H.j.info("backChannelRequestTimeoutMs_="+Q)),Q=H;const nf=x.g;if(nf){const $R=nf.g?nf.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($R){var Pe=Q.h;Pe.g||$R.indexOf("spdy")==-1&&$R.indexOf("quic")==-1&&$R.indexOf("h2")==-1||(Pe.j=Pe.l,Pe.g=new Set,Pe.h&&(Y(Pe,Pe.h),Pe.h=null))}if(Q.D){const T5=nf.g?nf.g.getResponseHeader("X-HTTP-Session-Id"):null;T5&&(Q.ya=T5,Pt(Q.I,Q.D,T5))}}H.G=3,H.l&&H.l.ua(),H.ba&&(H.R=Date.now()-x.F,H.j.info("Handshake RTT: "+H.R+"ms")),Q=H;var pt=x;if(Q.qa=eie(Q,Q.J?Q.ia:null,Q.W),pt.K){se(Q.h,pt);var Gr=pt,yo=Q.L;yo&&(Gr.I=yo),Gr.B&&(Xr(Gr),Ti(Gr)),Q.g=pt}else Kre(Q);0<H.i.length&&PR(H)}else cr[0]!="stop"&&cr[0]!="close"||Xy(H,7);else H.G==3&&(cr[0]=="stop"||cr[0]=="close"?cr[0]=="stop"?Xy(H,7):Wb(H):cr[0]!="noop"&&H.l&&H.l.ta(cr),H.v=0)}}Sr(4)}catch{}}var qo=class{constructor(x,F){this.g=x,this.map=F}};function Ra(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ks(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Jl(x){return x.h?1:x.g?x.g.size:0}function Ed(x,F){return x.h?x.h==F:x.g?x.g.has(F):!1}function Y(x,F){x.g?x.g.add(F):x.h=F}function se(x,F){x.h&&x.h==F?x.h=null:x.g&&x.g.has(F)&&x.g.delete(F)}Ra.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let F=x.i;for(const H of x.g.values())F=F.concat(H.D);return F}return m(x.i)}function pe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var F=[],H=x.length,Q=0;Q<H;Q++)F.push(x[Q]);return F}F=[],H=0;for(Q in x)F[H++]=x[Q];return F}function ye(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var F=[];x=x.length;for(var H=0;H<x;H++)F.push(H);return F}F=[],H=0;for(const Q in x)F[H++]=Q;return F}}}function de(x,F){if(x.forEach&&typeof x.forEach=="function")x.forEach(F,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,F,void 0);else for(var H=ye(x),Q=pe(x),_e=Q.length,Pe=0;Pe<_e;Pe++)F.call(void 0,Q[Pe],H&&H[Pe],x)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function He(x,F){if(x){x=x.split("&");for(var H=0;H<x.length;H++){var Q=x[H].indexOf("="),_e=null;if(0<=Q){var Pe=x[H].substring(0,Q);_e=x[H].substring(Q+1)}else Pe=x[H];F(Pe,_e?decodeURIComponent(_e.replace(/\+/g," ")):"")}}}function We(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof We){this.h=x.h,ut(this,x.j),this.o=x.o,this.g=x.g,wt(this,x.s),this.l=x.l;var F=x.i,H=new Zl;H.i=F.i,F.g&&(H.g=new Map(F.g),H.h=F.h),gn(this,H),this.m=x.m}else x&&(F=String(x).match(Oe))?(this.h=!1,ut(this,F[1]||"",!0),this.o=Nr(F[2]||""),this.g=Nr(F[3]||"",!0),wt(this,F[4]),this.l=Nr(F[5]||"",!0),gn(this,F[6]||"",!0),this.m=Nr(F[7]||"")):(this.h=!1,this.i=new Zl(null,this.h))}We.prototype.toString=function(){var x=[],F=this.j;F&&x.push(Pr(F,xd,!0),":");var H=this.g;return(H||F=="file")&&(x.push("//"),(F=this.o)&&x.push(Pr(F,xd,!0),"@"),x.push(encodeURIComponent(String(H)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),H=this.s,H!=null&&x.push(":",String(H))),(H=this.l)&&(this.g&&H.charAt(0)!="/"&&x.push("/"),x.push(Pr(H,H.charAt(0)=="/"?FS:ap,!0))),(H=this.i.toString())&&x.push("?",H),(H=this.m)&&x.push("#",Pr(H,TR)),x.join("")};function Ye(x){return new We(x)}function ut(x,F,H){x.j=H?Nr(F,!0):F,x.j&&(x.j=x.j.replace(/:$/,""))}function wt(x,F){if(F){if(F=Number(F),isNaN(F)||0>F)throw Error("Bad port number "+F);x.s=F}else x.s=null}function gn(x,F,H){F instanceof Zl?(x.i=F,jS(x.i,x.h)):(H||(F=Pr(F,qy)),x.i=new Zl(F,x.h))}function Pt(x,F,H){x.i.set(F,H)}function jn(x){return Pt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Nr(x,F){return x?F?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Pr(x,F,H){return typeof x=="string"?(x=encodeURI(x).replace(F,Wo),H&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Wo(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var xd=/[#\/\?@]/g,ap=/[#\?:]/g,FS=/[#\?]/g,qy=/[#\?@]/g,TR=/#/g;function Zl(x,F){this.h=this.g=null,this.i=x||null,this.j=!!F}function fu(x){x.g||(x.g=new Map,x.h=0,x.i&&He(x.i,function(F,H){x.add(decodeURIComponent(F.replace(/\+/g," ")),H)}))}e=Zl.prototype,e.add=function(x,F){fu(this),this.i=null,x=lp(this,x);var H=this.g.get(x);return H||this.g.set(x,H=[]),H.push(F),this.h+=1,this};function up(x,F){fu(x),F=lp(x,F),x.g.has(F)&&(x.i=null,x.h-=x.g.get(F).length,x.g.delete(F))}function Hb(x,F){return fu(x),F=lp(x,F),x.g.has(F)}e.forEach=function(x,F){fu(this),this.g.forEach(function(H,Q){H.forEach(function(_e){x.call(F,_e,Q,this)},this)},this)},e.na=function(){fu(this);const x=Array.from(this.g.values()),F=Array.from(this.g.keys()),H=[];for(let Q=0;Q<F.length;Q++){const _e=x[Q];for(let Pe=0;Pe<_e.length;Pe++)H.push(F[Q])}return H},e.V=function(x){fu(this);let F=[];if(typeof x=="string")Hb(this,x)&&(F=F.concat(this.g.get(lp(this,x))));else{x=Array.from(this.g.values());for(let H=0;H<x.length;H++)F=F.concat(x[H])}return F},e.set=function(x,F){return fu(this),this.i=null,x=lp(this,x),Hb(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[F]),this.h+=1,this},e.get=function(x,F){return x?(x=this.V(x),0<x.length?String(x[0]):F):F};function CR(x,F,H){up(x,F),0<H.length&&(x.i=null,x.g.set(lp(x,F),m(H)),x.h+=H.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],F=Array.from(this.g.keys());for(var H=0;H<F.length;H++){var Q=F[H];const Pe=encodeURIComponent(String(Q)),pt=this.V(Q);for(Q=0;Q<pt.length;Q++){var _e=Pe;pt[Q]!==""&&(_e+="="+encodeURIComponent(String(pt[Q]))),x.push(_e)}}return this.i=x.join("&")};function lp(x,F){return F=String(F),x.j&&(F=F.toLowerCase()),F}function jS(x,F){F&&!x.j&&(fu(x),x.i=null,x.g.forEach(function(H,Q){var _e=Q.toLowerCase();Q!=_e&&(up(this,Q),CR(this,_e,H))},x)),x.j=F}function AR(x,F){const H=new ka;if(a.Image){const Q=new Image;Q.onload=h(du,H,"TestLoadImage: loaded",!0,F,Q),Q.onerror=h(du,H,"TestLoadImage: error",!1,F,Q),Q.onabort=h(du,H,"TestLoadImage: abort",!1,F,Q),Q.ontimeout=h(du,H,"TestLoadImage: timeout",!1,F,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else F(!1)}function cp(x,F){const H=new ka,Q=new AbortController,_e=setTimeout(()=>{Q.abort(),du(H,"TestPingServer: timeout",!1,F)},1e4);fetch(x,{signal:Q.signal}).then(Pe=>{clearTimeout(_e),Pe.ok?du(H,"TestPingServer: ok",!0,F):du(H,"TestPingServer: server error",!1,F)}).catch(()=>{clearTimeout(_e),du(H,"TestPingServer: error",!1,F)})}function du(x,F,H,Q,_e){try{_e&&(_e.onload=null,_e.onerror=null,_e.onabort=null,_e.ontimeout=null),Q(H)}catch{}}function E5(){this.g=new tr}function IR(x,F,H){const Q=H||"";try{de(x,function(_e,Pe){let pt=_e;l(_e)&&(pt=Kt(_e)),F.push(Q+Pe+"="+encodeURIComponent(pt))})}catch(_e){throw F.push(Q+"type="+encodeURIComponent("_badmap")),_e}}function Wy(x){this.l=x.Ub||null,this.j=x.eb||!1}p(Wy,nr),Wy.prototype.g=function(){return new Gy(this.l,this.j)},Wy.prototype.i=function(x){return function(){return x}}({});function Gy(x,F){ge.call(this),this.D=x,this.o=F,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Gy,ge),e=Gy.prototype,e.open=function(x,F){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=F,this.readyState=1,tg(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const F={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(F.body=x),(this.D||a).fetch(new Request(this.A,F)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Yy(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,tg(this)),this.g&&(this.readyState=3,tg(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;kR(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function kR(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var F=x.value?x.value:new Uint8Array(0);(F=this.v.decode(F,{stream:!x.done}))&&(this.response=this.responseText+=F)}x.done?Yy(this):tg(this),this.readyState==3&&kR(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,Yy(this))},e.Qa=function(x){this.g&&(this.response=x,Yy(this))},e.ga=function(){this.g&&Yy(this)};function Yy(x){x.readyState=4,x.l=null,x.j=null,x.v=null,tg(x)}e.setRequestHeader=function(x,F){this.u.append(x,F)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],F=this.h.entries();for(var H=F.next();!H.done;)H=H.value,x.push(H[0]+": "+H[1]),H=F.next();return x.join(`\r
`)};function tg(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Gy.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function RR(x){let F="";return S(x,function(H,Q){F+=Q,F+=":",F+=H,F+=`\r
`}),F}function ne(x,F,H){e:{for(Q in H){var Q=!1;break e}Q=!0}Q||(H=RR(H),typeof x=="string"?H!=null&&encodeURIComponent(String(H)):Pt(x,F,H))}function le(x){ge.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(le,ge);var Ie=/^https?$/i,It=["POST","PUT"];e=le.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,F,H,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);F=F?F.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xt.g(),this.v=this.o?Ho(this.o):Ho(Xt),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(F,String(x),!0),this.B=!1}catch(Pe){Dn(this,Pe);return}if(x=H||"",H=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var _e in Q)H.set(_e,Q[_e]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Pe of Q.keys())H.set(Pe,Q.get(Pe));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(H.keys()).find(Pe=>Pe.toLowerCase()=="content-type"),_e=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(It,F,void 0))||Q||_e||H.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Pe,pt]of H)this.g.setRequestHeader(Pe,pt);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wr(this),this.u=!0,this.g.send(x),this.u=!1}catch(Pe){Dn(this,Pe)}};function Dn(x,F){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=F,x.m=5,Tr(x),Bn(x)}function Tr(x){x.A||(x.A=!0,Ne(x,"complete"),Ne(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ne(this,"complete"),Ne(this,"abort"),Bn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bn(this,!0)),le.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qr(this):this.bb())},e.bb=function(){qr(this)};function qr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||ts(x)!=4||x.Z()!=2)){if(x.u&&ts(x)==4)Je(x.Ea,0,x);else if(Ne(x,"readystatechange"),ts(x)==4){x.h=!1;try{const pt=x.Z();e:switch(pt){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var F=!0;break e;default:F=!1}var H;if(!(H=F)){var Q;if(Q=pt===0){var _e=String(x.D).match(Oe)[1]||null;!_e&&a.self&&a.self.location&&(_e=a.self.location.protocol.slice(0,-1)),Q=!Ie.test(_e?_e.toLowerCase():"")}H=Q}if(H)Ne(x,"complete"),Ne(x,"success");else{x.m=6;try{var Pe=2<ts(x)?x.g.statusText:""}catch{Pe=""}x.l=Pe+" ["+x.Z()+"]",Tr(x)}}finally{Bn(x)}}}}function Bn(x,F){if(x.g){Wr(x);const H=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,F||Ne(x,"ready");try{H.onreadystatechange=Q}catch{}}}function Wr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function ts(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<ts(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var F=this.g.responseText;return x&&F.indexOf(x)==0&&(F=F.substring(x.length)),Tn(F)}};function Go(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Ky(x){const F={};x=(x.g&&2<=ts(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var H=k(x[Q]);const _e=H[0];if(H=H[1],typeof H!="string")continue;H=H.trim();const Pe=F[_e]||[];F[_e]=Pe,Pe.push(H)}T(F,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fp(x,F,H){return H&&H.internalChannelParams&&H.internalChannelParams[x]||F}function qb(x){this.Aa=0,this.i=[],this.j=new ka,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fp("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fp("baseRetryDelayMs",5e3,x),this.cb=fp("retryDelaySeedMs",1e4,x),this.Wa=fp("forwardChannelMaxRetries",2,x),this.wa=fp("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Ra(x&&x.concurrentRequestLimit),this.Da=new E5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=qb.prototype,e.la=8,e.G=1,e.connect=function(x,F,H,Q){ai(0),this.W=x,this.H=F||{},H&&Q!==void 0&&(this.H.OSID=H,this.H.OAID=Q),this.F=this.X,this.I=eie(this,null,this.W),PR(this)};function Wb(x){if(Wre(x),x.G==3){var F=x.U++,H=Ye(x.I);if(Pt(H,"SID",x.K),Pt(H,"RID",F),Pt(H,"TYPE","terminate"),BS(x,H),F=new Fn(x,x.j,F),F.L=2,F.v=jn(Ye(H)),H=!1,a.navigator&&a.navigator.sendBeacon)try{H=a.navigator.sendBeacon(F.v.toString(),"")}catch{}!H&&a.Image&&(new Image().src=F.v,H=!0),H||(F.g=tie(F.j,null),F.g.ea(F.v)),F.F=Date.now(),Ti(F)}Zre(x)}function NR(x){x.g&&(S5(x),x.g.cancel(),x.g=null)}function Wre(x){NR(x),x.u&&(a.clearTimeout(x.u),x.u=null),DR(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function PR(x){if(!Ks(x.h)&&!x.s){x.s=!0;var F=x.Ga;U||D(),B||(U(),B=!0),V.add(F,x),x.B=0}}function P8e(x,F){return Jl(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=F.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Ia(d(x.Ga,x,F),Jre(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const _e=new Fn(this,this.j,x);let Pe=this.o;if(this.S&&(Pe?(Pe=C(Pe),N(Pe,this.S)):Pe=this.S),this.m!==null||this.O||(_e.H=Pe,Pe=null),this.P)e:{for(var F=0,H=0;H<this.i.length;H++){t:{var Q=this.i[H];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(F+=Q,4096<F){F=H;break e}if(F===4096||H===this.i.length-1){F=H+1;break e}}F=1e3}else F=1e3;F=Yre(this,_e,F),H=Ye(this.I),Pt(H,"RID",x),Pt(H,"CVER",22),this.D&&Pt(H,"X-HTTP-Session-Id",this.D),BS(this,H),Pe&&(this.O?F="headers="+encodeURIComponent(String(RR(Pe)))+"&"+F:this.m&&ne(H,this.m,Pe)),Y(this.h,_e),this.Ua&&Pt(H,"TYPE","init"),this.P?(Pt(H,"$req",F),Pt(H,"SID","null"),_e.T=!0,Vt(_e,H,null)):Vt(_e,H,F),this.G=2}}else this.G==3&&(x?Gre(this,x):this.i.length==0||Ks(this.h)||Gre(this))};function Gre(x,F){var H;F?H=F.l:H=x.U++;const Q=Ye(x.I);Pt(Q,"SID",x.K),Pt(Q,"RID",H),Pt(Q,"AID",x.T),BS(x,Q),x.m&&x.o&&ne(Q,x.m,x.o),H=new Fn(x,x.j,H,x.B+1),x.m===null&&(H.H=x.o),F&&(x.i=F.D.concat(x.i)),F=Yre(x,H,1e3),H.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,H),Vt(H,Q,F)}function BS(x,F){x.H&&S(x.H,function(H,Q){Pt(F,Q,H)}),x.l&&de({},function(H,Q){Pt(F,Q,H)})}function Yre(x,F,H){H=Math.min(x.i.length,H);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var _e=x.i;let Pe=-1;for(;;){const pt=["count="+H];Pe==-1?0<H?(Pe=_e[0].g,pt.push("ofs="+Pe)):Pe=0:pt.push("ofs="+Pe);let Gr=!0;for(let yo=0;yo<H;yo++){let cr=_e[yo].g;const Yo=_e[yo].map;if(cr-=Pe,0>cr)Pe=Math.max(0,_e[yo].g-100),Gr=!1;else try{IR(Yo,pt,"req"+cr+"_")}catch{Q&&Q(Yo)}}if(Gr){Q=pt.join("&");break e}}}return x=x.i.splice(0,H),F.D=x,Q}function Kre(x){if(!x.g&&!x.u){x.Y=1;var F=x.Fa;U||D(),B||(U(),B=!0),V.add(F,x),x.v=0}}function x5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Ia(d(x.Fa,x),Jre(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Xre(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Ia(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ai(10),NR(this),Xre(this))};function S5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function Xre(x){x.g=new Fn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var F=Ye(x.qa);Pt(F,"RID","rpc"),Pt(F,"SID",x.K),Pt(F,"AID",x.T),Pt(F,"CI",x.F?"0":"1"),!x.F&&x.ja&&Pt(F,"TO",x.ja),Pt(F,"TYPE","xmlhttp"),BS(x,F),x.m&&x.o&&ne(F,x.m,x.o),x.L&&(x.g.I=x.L);var H=x.g;x=x.ia,H.L=1,H.v=jn(Ye(F)),H.m=null,H.P=!0,ir(H,x)}e.Za=function(){this.C!=null&&(this.C=null,NR(this),x5(this),ai(19))};function DR(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function Qre(x,F){var H=null;if(x.g==F){DR(x),S5(x),x.g=null;var Q=2}else if(Ed(x.h,F))H=F.D,se(x.h,F),Q=1;else return;if(x.G!=0){if(F.o)if(Q==1){H=F.m?F.m.length:0,F=Date.now()-F.F;var _e=x.B;Q=ol(),Ne(Q,new cu(Q,H)),PR(x)}else Kre(x);else if(_e=F.s,_e==3||_e==0&&0<F.X||!(Q==1&&P8e(x,F)||Q==2&&x5(x)))switch(H&&0<H.length&&(F=x.h,F.i=F.i.concat(H)),_e){case 1:Xy(x,5);break;case 4:Xy(x,10);break;case 3:Xy(x,6);break;default:Xy(x,2)}}}function Jre(x,F){let H=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(H*=2),H*F}function Xy(x,F){if(x.j.info("Error code "+F),F==2){var H=d(x.fb,x),Q=x.Xa;const _e=!Q;Q=new We(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ut(Q,"https"),jn(Q),_e?AR(Q.toString(),H):cp(Q.toString(),H)}else ai(2);x.G=0,x.l&&x.l.sa(F),Zre(x),Wre(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),ai(2)):(this.j.info("Failed to ping google.com"),ai(1))};function Zre(x){if(x.G=0,x.ka=[],x.l){const F=Z(x.h);(F.length!=0||x.i.length!=0)&&(g(x.ka,F),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function eie(x,F,H){var Q=H instanceof We?Ye(H):new We(H);if(Q.g!="")F&&(Q.g=F+"."+Q.g),wt(Q,Q.s);else{var _e=a.location;Q=_e.protocol,F=F?F+"."+_e.hostname:_e.hostname,_e=+_e.port;var Pe=new We(null);Q&&ut(Pe,Q),F&&(Pe.g=F),_e&&wt(Pe,_e),H&&(Pe.l=H),Q=Pe}return H=x.D,F=x.ya,H&&F&&Pt(Q,H,F),Pt(Q,"VER",x.la),BS(x,Q),Q}function tie(x,F,H){if(F&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return F=x.Ca&&!x.pa?new le(new Wy({eb:H})):new le(x.pa),F.Ha(x.J),F}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function nie(){}e=nie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function OR(){}OR.prototype.g=function(x,F){return new al(x,F)};function al(x,F){ge.call(this),this.g=new qb(F),this.l=x,this.h=F&&F.messageUrlParams||null,x=F&&F.messageHeaders||null,F&&F.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=F&&F.initMessageHeaders||null,F&&F.messageContentType&&(x?x["X-WebChannel-Content-Type"]=F.messageContentType:x={"X-WebChannel-Content-Type":F.messageContentType}),F&&F.va&&(x?x["X-WebChannel-Client-Profile"]=F.va:x={"X-WebChannel-Client-Profile":F.va}),this.g.S=x,(x=F&&F.Sb)&&!v(x)&&(this.g.m=x),this.v=F&&F.supportsCrossDomainXhr||!1,this.u=F&&F.sendRawJson||!1,(F=F&&F.httpSessionIdParam)&&!v(F)&&(this.g.D=F,x=this.h,x!==null&&F in x&&(x=this.h,F in x&&delete x[F])),this.j=new Gb(this)}p(al,ge),al.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},al.prototype.close=function(){Wb(this.g)},al.prototype.o=function(x){var F=this.g;if(typeof x=="string"){var H={};H.__data__=x,x=H}else this.u&&(H={},H.__data__=Kt(x),x=H);F.i.push(new qo(F.Ya++,x)),F.G==3&&PR(F)},al.prototype.N=function(){this.g.l=null,delete this.j,Wb(this.g),delete this.g,al.aa.N.call(this)};function rie(x){Ln.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var F=x.__sm__;if(F){e:{for(const H in F){x=H;break e}x=void 0}(this.i=x)&&(x=this.i,F=F!==null&&x in F?F[x]:void 0),this.data=F}else this.data=x}p(rie,Ln);function iie(){Hn.call(this),this.status=1}p(iie,Hn);function Gb(x){this.g=x}p(Gb,nie),Gb.prototype.ua=function(){Ne(this.g,"a")},Gb.prototype.ta=function(x){Ne(this.g,new rie(x))},Gb.prototype.sa=function(x){Ne(this.g,new iie)},Gb.prototype.ra=function(){Ne(this.g,"b")},OR.prototype.createWebChannel=OR.prototype.g,al.prototype.send=al.prototype.o,al.prototype.open=al.prototype.m,al.prototype.close=al.prototype.close,ZNe=function(){return new OR},JNe=function(){return ol()},QNe=hs,sV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},lt.NO_ERROR=0,lt.TIMEOUT=8,lt.HTTP_ERROR=6,xD=lt,St.COMPLETE="complete",XNe=St,Mi.EventType=es,es.OPEN="a",es.CLOSE="b",es.ERROR="c",es.MESSAGE="d",ge.prototype.listen=ge.prototype.K,bC=Mi,KNe=Wy,le.prototype.listenOnce=le.prototype.L,le.prototype.getLastError=le.prototype.Ka,le.prototype.getLastErrorCode=le.prototype.Ba,le.prototype.getStatus=le.prototype.Z,le.prototype.getResponseJson=le.prototype.Oa,le.prototype.getResponseText=le.prototype.oa,le.prototype.send=le.prototype.ea,le.prototype.setWithCredentials=le.prototype.Ha,YNe=le}).apply(typeof XN<"u"?XN:typeof self<"u"?self:typeof window<"u"?window:{});const Kde="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}bu.UNAUTHENTICATED=new bu(null),bu.GOOGLE_CREDENTIALS=new bu("google-credentials-uid"),bu.FIRST_PARTY=new bu("first-party-uid"),bu.MOCK_USER=new bu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hS="10.12.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1=new Q6("@firebase/firestore");function bT(){return V1.logLevel}function kt(e,...t){if(V1.logLevel<=Wn.DEBUG){const n=t.map(_J);V1.debug(`Firestore (${hS}): ${e}`,...n)}}function Cm(e,...t){if(V1.logLevel<=Wn.ERROR){const n=t.map(_J);V1.error(`Firestore (${hS}): ${e}`,...n)}}function GA(e,...t){if(V1.logLevel<=Wn.WARN){const n=t.map(_J);V1.warn(`Firestore (${hS}): ${e}`,...n)}}function _J(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(e="Unexpected state"){const t=`FIRESTORE (${hS}) INTERNAL ASSERTION FAILED: `+e;throw Cm(t),new Error(t)}function ii(e,t){e||un()}function pn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Kh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aDt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class uDt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(bu.UNAUTHENTICATED))}shutdown(){}}class lDt{constructor(t){this.t=t,this.currentUser=bu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Jp;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Jp,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{kt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(kt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Jp)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(kt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ii(typeof r.accessToken=="string"),new aDt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ii(t===null||typeof t=="string"),new bu(t)}}class cDt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=bu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class fDt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new cDt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(bu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class dDt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class hDt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&kt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,kt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{kt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):kt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ii(typeof n.token=="string"),this.R=n.token,new dDt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pDt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ePe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=pDt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function wr(e,t){return e<t?-1:e>t?1:0}function HE(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Us.fromMillis(Date.now())}static fromDate(t){return Us.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Us(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?wr(this.nanoseconds,t.nanoseconds):wr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new hn(t)}static min(){return new hn(new Us(0,0))}static max(){return new hn(new Us(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(t,n,r){n===void 0?n=0:n>t.length&&un(),r===void 0?r=t.length-n:r>t.length-n&&un(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return YA.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof YA?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class fi extends YA{construct(t,n,r){return new fi(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new fi(n)}static emptyPath(){return new fi([])}}const mDt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ro extends YA{construct(t,n,r){return new Ro(t,n,r)}static isValidIdentifier(t){return mDt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ro.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ro(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Ue.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Ue.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Ue.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ro(n)}static emptyPath(){return new Ro([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(fi.fromString(t))}static fromName(t){return new Ut(fi.fromString(t).popFirst(5))}static empty(){return new Ut(fi.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&fi.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return fi.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new fi(t.slice()))}}function gDt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=hn.fromTimestamp(r===1e9?new Us(n+1,0):new Us(n,r));return new K0(i,Ut.empty(),t)}function yDt(e){return new K0(e.readTime,e.key,-1)}class K0{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new K0(hn.min(),Ut.empty(),-1)}static max(){return new K0(hn.max(),Ut.empty(),-1)}}function vDt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:wr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bDt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _Dt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nk(e){if(e.code!==Ue.FAILED_PRECONDITION||e.message!==bDt)throw e;kt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&un(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Qe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Qe?n:Qe.resolve(n)}catch(n){return Qe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Qe.reject(n)}static resolve(t){return new Qe((n,r)=>{n(t)})}static reject(t){return new Qe((n,r)=>{r(t)})}static waitFor(t){return new Qe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Qe.resolve(!1);for(const r of t)n=n.next(i=>i?Qe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Qe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Qe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function wDt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Pk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}wJ.oe=-1;function i4(e){return e==null}function k$(e){return e===0&&1/e==-1/0}function EDt(e){return typeof e=="number"&&Number.isInteger(e)&&!k$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xde(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ab(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function tPe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(t,n){this.comparator=t,this.root=n||Co.EMPTY}insert(t,n){return new $i(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Co.BLACK,null,null))}remove(t){return new $i(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Co.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new QN(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new QN(this.root,t,this.comparator,!1)}getReverseIterator(){return new QN(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new QN(this.root,t,this.comparator,!0)}}class QN{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Co{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??Co.RED,this.left=i??Co.EMPTY,this.right=s??Co.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new Co(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Co.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return Co.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Co.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Co.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw un();const t=this.left.check();if(t!==this.right.check())throw un();return t+(this.isRed()?0:1)}}Co.EMPTY=null,Co.RED=!0,Co.BLACK=!1;Co.EMPTY=new class{constructor(){this.size=0}get key(){throw un()}get value(){throw un()}get color(){throw un()}get left(){throw un()}get right(){throw un()}copy(t,n,r,i,s){return this}insert(t,n,r){return new Co(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(t){this.comparator=t,this.data=new $i(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qde(this.data.getIterator())}getIteratorFrom(t){return new Qde(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Oo)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Oo(this.comparator);return n.data=t,n}}class Qde{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this.fields=t,t.sort(Ro.comparator)}static empty(){return new Tl([])}unionWith(t){let n=new Oo(Ro.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Tl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return HE(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nPe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nPe("Invalid base64 string: "+s):s}}(t);return new xa(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new xa(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return wr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}xa.EMPTY_BYTE_STRING=new xa("");const xDt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function X0(e){if(ii(!!e),typeof e=="string"){let t=0;const n=xDt.exec(e);if(ii(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ys(e.seconds),nanos:ys(e.nanos)}}function ys(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function H1(e){return typeof e=="string"?xa.fromBase64String(e):xa.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function xJ(e){const t=e.mapValue.fields.__previous_value__;return EJ(t)?xJ(t):t}function KA(e){const t=X0(e.mapValue.fields.__local_write_time__.timestampValue);return new Us(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SDt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class XA{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new XA("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof XA&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JN={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function q1(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?EJ(e)?4:TDt(e)?9007199254740991:10:un()}function Nh(e,t){if(e===t)return!0;const n=q1(e);if(n!==q1(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return KA(e).isEqual(KA(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=X0(i.timestampValue),a=X0(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return H1(i.bytesValue).isEqual(H1(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return ys(i.geoPointValue.latitude)===ys(s.geoPointValue.latitude)&&ys(i.geoPointValue.longitude)===ys(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return ys(i.integerValue)===ys(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=ys(i.doubleValue),a=ys(s.doubleValue);return o===a?k$(o)===k$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return HE(e.arrayValue.values||[],t.arrayValue.values||[],Nh);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Xde(o)!==Xde(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Nh(o[u],a[u])))return!1;return!0}(e,t);default:return un()}}function QA(e,t){return(e.values||[]).find(n=>Nh(n,t))!==void 0}function qE(e,t){if(e===t)return 0;const n=q1(e),r=q1(t);if(n!==r)return wr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return wr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=ys(s.integerValue||s.doubleValue),u=ys(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return Jde(e.timestampValue,t.timestampValue);case 4:return Jde(KA(e),KA(t));case 5:return wr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=H1(s),u=H1(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=wr(a[l],u[l]);if(c!==0)return c}return wr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=wr(ys(s.latitude),ys(o.latitude));return a!==0?a:wr(ys(s.longitude),ys(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=qE(a[l],u[l]);if(c)return c}return wr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===JN.mapValue&&o===JN.mapValue)return 0;if(s===JN.mapValue)return 1;if(o===JN.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=wr(u[f],c[f]);if(d!==0)return d;const h=qE(a[u[f]],l[c[f]]);if(h!==0)return h}return wr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw un()}}function Jde(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return wr(e,t);const n=X0(e),r=X0(t),i=wr(n.seconds,r.seconds);return i!==0?i:wr(n.nanos,r.nanos)}function WE(e){return oV(e)}function oV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=X0(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return H1(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=oV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${oV(n.fields[o])}`;return i+"}"}(e.mapValue):un()}function Zde(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function aV(e){return!!e&&"integerValue"in e}function SJ(e){return!!e&&"arrayValue"in e}function ehe(e){return!!e&&"nullValue"in e}function the(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function SD(e){return!!e&&"mapValue"in e}function x2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ab(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=x2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=x2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function TDt(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iu{constructor(t){this.value=t}static empty(){return new Iu({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!SD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=x2(n)}setAll(t){let n=Ro.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=x2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());SD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Nh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];SD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Ab(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new Iu(x2(this.value))}}function rPe(e){const t=[];return Ab(e.fields,(n,r)=>{const i=new Ro([n]);if(SD(r)){const s=rPe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Tl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new fa(t,0,hn.min(),hn.min(),hn.min(),Iu.empty(),0)}static newFoundDocument(t,n,r,i){return new fa(t,1,n,hn.min(),r,i,0)}static newNoDocument(t,n){return new fa(t,2,n,hn.min(),hn.min(),Iu.empty(),0)}static newUnknownDocument(t,n){return new fa(t,3,n,hn.min(),hn.min(),Iu.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(hn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Iu.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Iu.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=hn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof fa&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new fa(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let R$=class{constructor(t,n){this.position=t,this.inclusive=n}};function nhe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=qE(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function rhe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Nh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t,n="asc"){this.field=t,this.dir=n}}function CDt(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let iPe=class{};class _s extends iPe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new IDt(t,n,r):n==="array-contains"?new NDt(t,r):n==="in"?new PDt(t,r):n==="not-in"?new DDt(t,r):n==="array-contains-any"?new ODt(t,r):new _s(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new kDt(t,r):new RDt(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qE(n,this.value)):n!==null&&q1(this.value)===q1(n)&&this.matchesComparison(qE(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return un()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ed extends iPe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new ed(t,n)}matches(t){return sPe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function sPe(e){return e.op==="and"}function oPe(e){return ADt(e)&&sPe(e)}function ADt(e){for(const t of e.filters)if(t instanceof ed)return!1;return!0}function uV(e){if(e instanceof _s)return e.field.canonicalString()+e.op.toString()+WE(e.value);if(oPe(e))return e.filters.map(t=>uV(t)).join(",");{const t=e.filters.map(n=>uV(n)).join(",");return`${e.op}(${t})`}}function aPe(e,t){return e instanceof _s?function(r,i){return i instanceof _s&&r.op===i.op&&r.field.isEqual(i.field)&&Nh(r.value,i.value)}(e,t):e instanceof ed?function(r,i){return i instanceof ed&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&aPe(o,i.filters[a]),!0):!1}(e,t):void un()}function uPe(e){return e instanceof _s?function(n){return`${n.field.canonicalString()} ${n.op} ${WE(n.value)}`}(e):e instanceof ed?function(n){return n.op.toString()+" {"+n.getFilters().map(uPe).join(" ,")+"}"}(e):"Filter"}class IDt extends _s{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class kDt extends _s{constructor(t,n){super(t,"in",n),this.keys=lPe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class RDt extends _s{constructor(t,n){super(t,"not-in",n),this.keys=lPe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function lPe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class NDt extends _s{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return SJ(n)&&QA(n.arrayValue,this.value)}}class PDt extends _s{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&QA(this.value.arrayValue,n)}}class DDt extends _s{constructor(t,n){super(t,"not-in",n)}matches(t){if(QA(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!QA(this.value.arrayValue,n)}}class ODt extends _s{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!SJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>QA(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Dt{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function ihe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new $Dt(e,t,n,r,i,s,o)}function TJ(e){const t=pn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>uV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),i4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>WE(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>WE(r)).join(",")),t.ue=n}return t.ue}function CJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!CDt(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!aPe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!rhe(e.startAt,t.startAt)&&rhe(e.endAt,t.endAt)}function lV(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function MDt(e,t,n,r,i,s,o,a){return new pS(e,t,n,r,i,s,o,a)}function AJ(e){return new pS(e)}function she(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function cPe(e){return e.collectionGroup!==null}function S2(e){const t=pn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Oo(Ro.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new JA(s,r))}),n.has(Ro.keyField().canonicalString())||t.ce.push(new JA(Ro.keyField(),r))}return t.ce}function yh(e){const t=pn(e);return t.le||(t.le=LDt(t,S2(e))),t.le}function LDt(e,t){if(e.limitType==="F")return ihe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new JA(i.field,s)});const n=e.endAt?new R$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new R$(e.startAt.position,e.startAt.inclusive):null;return ihe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function cV(e,t){const n=e.filters.concat([t]);return new pS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function fV(e,t,n){return new pS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function s4(e,t){return CJ(yh(e),yh(t))&&e.limitType===t.limitType}function fPe(e){return`${TJ(yh(e))}|lt:${e.limitType}`}function L_(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>uPe(i)).join(", ")}]`),i4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>WE(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>WE(i)).join(",")),`Target(${r})`}(yh(e))}; limitType=${e.limitType})`}function o4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of S2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=nhe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,S2(r),i)||r.endAt&&!function(o,a,u){const l=nhe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,S2(r),i))}(e,t)}function FDt(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function dPe(e){return(t,n)=>{let r=!1;for(const i of S2(e)){const s=jDt(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function jDt(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?qE(u,l):un()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return un()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Ab(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return tPe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BDt=new $i(Ut.comparator);function Am(){return BDt}const hPe=new $i(Ut.comparator);function _C(...e){let t=hPe;for(const n of e)t=t.insert(n.key,n);return t}function pPe(e){let t=hPe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Jv(){return T2()}function mPe(){return T2()}function T2(){return new mS(e=>e.toString(),(e,t)=>e.isEqual(t))}const UDt=new $i(Ut.comparator),zDt=new Oo(Ut.comparator);function Un(...e){let t=zDt;for(const n of e)t=t.add(n);return t}const VDt=new Oo(wr);function HDt(){return VDt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gPe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:k$(t)?"-0":t}}function yPe(e){return{integerValue:""+e}}function qDt(e,t){return EDt(t)?yPe(t):gPe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(){this._=void 0}}function WDt(e,t,n){return e instanceof ZA?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&EJ(s)&&(s=xJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof eI?bPe(e,t):e instanceof tI?_Pe(e,t):function(i,s){const o=vPe(i,s),a=ohe(o)+ohe(i.Pe);return aV(o)&&aV(i.Pe)?yPe(a):gPe(i.serializer,a)}(e,t)}function GDt(e,t,n){return e instanceof eI?bPe(e,t):e instanceof tI?_Pe(e,t):n}function vPe(e,t){return e instanceof N$?function(r){return aV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class ZA extends a4{}class eI extends a4{constructor(t){super(),this.elements=t}}function bPe(e,t){const n=wPe(t);for(const r of e.elements)n.some(i=>Nh(i,r))||n.push(r);return{arrayValue:{values:n}}}class tI extends a4{constructor(t){super(),this.elements=t}}function _Pe(e,t){let n=wPe(t);for(const r of e.elements)n=n.filter(i=>!Nh(i,r));return{arrayValue:{values:n}}}class N$ extends a4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function ohe(e){return ys(e.integerValue||e.doubleValue)}function wPe(e){return SJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YDt{constructor(t,n){this.field=t,this.transform=n}}function KDt(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof eI&&i instanceof eI||r instanceof tI&&i instanceof tI?HE(r.elements,i.elements,Nh):r instanceof N$&&i instanceof N$?Nh(r.Pe,i.Pe):r instanceof ZA&&i instanceof ZA}(e.transform,t.transform)}class XDt{constructor(t,n){this.version=t,this.transformResults=n}}class zu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new zu}static exists(t){return new zu(void 0,t)}static updateTime(t){return new zu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function TD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class u4{}function EPe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new l4(e.key,zu.none()):new Dk(e.key,e.data,zu.none());{const n=e.data,r=Iu.empty();let i=new Oo(Ro.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ky(e.key,r,new Tl(i.toArray()),zu.none())}}function QDt(e,t,n){e instanceof Dk?function(i,s,o){const a=i.value.clone(),u=uhe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof ky?function(i,s,o){if(!TD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=uhe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(xPe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function C2(e,t,n,r){return e instanceof Dk?function(s,o,a,u){if(!TD(s.precondition,o))return a;const l=s.value.clone(),c=lhe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof ky?function(s,o,a,u){if(!TD(s.precondition,o))return a;const l=lhe(s.fieldTransforms,u,o),c=o.data;return c.setAll(xPe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return TD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function JDt(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=vPe(r.transform,i||null);s!=null&&(n===null&&(n=Iu.empty()),n.set(r.field,s))}return n||null}function ahe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&HE(r,i,(s,o)=>KDt(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Dk extends u4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ky extends u4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function xPe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function uhe(e,t,n){const r=new Map;ii(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,GDt(o,a,n[i]))}return r}function lhe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,WDt(s,o,t))}return r}class l4 extends u4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ZDt extends u4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eOt{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&QDt(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=C2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=C2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=mPe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=EPe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(hn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Un())}isEqual(t){return this.batchId===t.batchId&&HE(this.mutations,t.mutations,(n,r)=>ahe(n,r))&&HE(this.baseMutations,t.baseMutations,(n,r)=>ahe(n,r))}}class IJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ii(t.mutations.length===r.length);let i=function(){return UDt}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new IJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tOt{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nOt{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ps,Qn;function rOt(e){switch(e){default:return un();case Ue.CANCELLED:case Ue.UNKNOWN:case Ue.DEADLINE_EXCEEDED:case Ue.RESOURCE_EXHAUSTED:case Ue.INTERNAL:case Ue.UNAVAILABLE:case Ue.UNAUTHENTICATED:return!1;case Ue.INVALID_ARGUMENT:case Ue.NOT_FOUND:case Ue.ALREADY_EXISTS:case Ue.PERMISSION_DENIED:case Ue.FAILED_PRECONDITION:case Ue.ABORTED:case Ue.OUT_OF_RANGE:case Ue.UNIMPLEMENTED:case Ue.DATA_LOSS:return!0}}function SPe(e){if(e===void 0)return Cm("GRPC error has no .code"),Ue.UNKNOWN;switch(e){case ps.OK:return Ue.OK;case ps.CANCELLED:return Ue.CANCELLED;case ps.UNKNOWN:return Ue.UNKNOWN;case ps.DEADLINE_EXCEEDED:return Ue.DEADLINE_EXCEEDED;case ps.RESOURCE_EXHAUSTED:return Ue.RESOURCE_EXHAUSTED;case ps.INTERNAL:return Ue.INTERNAL;case ps.UNAVAILABLE:return Ue.UNAVAILABLE;case ps.UNAUTHENTICATED:return Ue.UNAUTHENTICATED;case ps.INVALID_ARGUMENT:return Ue.INVALID_ARGUMENT;case ps.NOT_FOUND:return Ue.NOT_FOUND;case ps.ALREADY_EXISTS:return Ue.ALREADY_EXISTS;case ps.PERMISSION_DENIED:return Ue.PERMISSION_DENIED;case ps.FAILED_PRECONDITION:return Ue.FAILED_PRECONDITION;case ps.ABORTED:return Ue.ABORTED;case ps.OUT_OF_RANGE:return Ue.OUT_OF_RANGE;case ps.UNIMPLEMENTED:return Ue.UNIMPLEMENTED;case ps.DATA_LOSS:return Ue.DATA_LOSS;default:return un()}}(Qn=ps||(ps={}))[Qn.OK=0]="OK",Qn[Qn.CANCELLED=1]="CANCELLED",Qn[Qn.UNKNOWN=2]="UNKNOWN",Qn[Qn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qn[Qn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qn[Qn.NOT_FOUND=5]="NOT_FOUND",Qn[Qn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qn[Qn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qn[Qn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qn[Qn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qn[Qn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qn[Qn.ABORTED=10]="ABORTED",Qn[Qn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qn[Qn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qn[Qn.INTERNAL=13]="INTERNAL",Qn[Qn.UNAVAILABLE=14]="UNAVAILABLE",Qn[Qn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iOt(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sOt=new c1([4294967295,4294967295],0);function che(e){const t=iOt().encode(e),n=new GNe;return n.update(t),new Uint8Array(n.digest())}function fhe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new c1([n,r],0),new c1([i,s],0)]}class kJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new wC(`Invalid padding: ${n}`);if(r<0)throw new wC(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new wC(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new wC(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=c1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(c1.fromNumber(r)));return i.compare(sOt)===1&&(i=new c1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=che(t),[r,i]=fhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new kJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=che(t),[r,i]=fhe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class wC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Ok.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new c4(hn.min(),i,new $i(wr),Am(),Un())}}class Ok{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ok(r,n,Un(),Un(),Un())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class TPe{constructor(t,n){this.targetId=t,this.me=n}}class CPe{constructor(t,n,r=xa.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class dhe{constructor(){this.fe=0,this.ge=phe(),this.pe=xa.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=Un(),n=Un(),r=Un();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:un()}}),new Ok(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=phe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ii(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class oOt{constructor(t){this.Le=t,this.Be=new Map,this.ke=Am(),this.qe=hhe(),this.Qe=new $i(wr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:un()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(lV(s))if(r===0){const o=new Ut(s.path);this.Ue(n,o,fa.newNoDocument(o,hn.min()))}else ii(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=H1(r).toUint8Array()}catch(u){if(u instanceof nPe)return GA("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new kJ(o,i,s)}catch(u){return GA(u instanceof wC?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&lV(a.target)){const u=new Ut(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,fa.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=Un();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new c4(t,n,this.Qe,this.ke,r);return this.ke=Am(),this.qe=hhe(),this.Qe=new $i(wr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new dhe,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Oo(wr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||kt("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new dhe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function hhe(){return new $i(Ut.comparator)}function phe(){return new $i(Ut.comparator)}const aOt={asc:"ASCENDING",desc:"DESCENDING"},uOt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lOt={and:"AND",or:"OR"};class cOt{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function dV(e,t){return e.useProto3Json||i4(t)?t:{value:t}}function P$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function APe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fOt(e,t){return P$(e,t.toTimestamp())}function vh(e){return ii(!!e),hn.fromTimestamp(function(n){const r=X0(n);return new Us(r.seconds,r.nanos)}(e))}function RJ(e,t){return hV(e,t).canonicalString()}function hV(e,t){const n=function(i){return new fi(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function IPe(e){const t=fi.fromString(e);return ii(DPe(t)),t}function pV(e,t){return RJ(e.databaseId,t.path)}function u9(e,t){const n=IPe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(RPe(n))}function kPe(e,t){return RJ(e.databaseId,t)}function dOt(e){const t=IPe(e);return t.length===4?fi.emptyPath():RPe(t)}function mV(e){return new fi(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function RPe(e){return ii(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function mhe(e,t,n){return{name:pV(e,t),fields:n.value.mapValue.fields}}function hOt(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:un()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ii(c===void 0||typeof c=="string"),xa.fromBase64String(c||"")):(ii(c===void 0||c instanceof Buffer||c instanceof Uint8Array),xa.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Ue.UNKNOWN:SPe(l.code);return new bt(c,l.message||"")}(o);n=new CPe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=u9(e,r.document.name),s=vh(r.document.updateTime),o=r.document.createTime?vh(r.document.createTime):hn.min(),a=new Iu({mapValue:{fields:r.document.fields}}),u=fa.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new CD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=u9(e,r.document),s=r.readTime?vh(r.readTime):hn.min(),o=fa.newNoDocument(i,s),a=r.removedTargetIds||[];n=new CD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=u9(e,r.document),s=r.removedTargetIds||[];n=new CD([],s,i,null)}else{if(!("filter"in t))return un();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new nOt(i,s),a=r.targetId;n=new TPe(a,o)}}return n}function pOt(e,t){let n;if(t instanceof Dk)n={update:mhe(e,t.key,t.value)};else if(t instanceof l4)n={delete:pV(e,t.key)};else if(t instanceof ky)n={update:mhe(e,t.key,t.data),updateMask:xOt(t.fieldMask)};else{if(!(t instanceof ZDt))return un();n={verify:pV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ZA)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof eI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof tI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof N$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw un()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:fOt(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:un()}(e,t.precondition)),n}function mOt(e,t){return e&&e.length>0?(ii(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?vh(i.updateTime):vh(s);return o.isEqual(hn.min())&&(o=vh(s)),new XDt(o,i.transformResults||[])}(n,t))):[]}function gOt(e,t){return{documents:[kPe(e,t.path)]}}function yOt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=kPe(e,i);const s=function(l){if(l.length!==0)return PPe(ed.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:F_(d.field),direction:_Ot(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=dV(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function vOt(e){let t=dOt(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ii(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=NPe(f);return d instanceof ed&&oPe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new JA(j_(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,i4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new R$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new R$(h,d)}(n.endAt)),MDt(t,i,o,s,a,"F",u,l)}function bOt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return un()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function NPe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=j_(n.unaryFilter.field);return _s.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=j_(n.unaryFilter.field);return _s.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=j_(n.unaryFilter.field);return _s.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=j_(n.unaryFilter.field);return _s.create(o,"!=",{nullValue:"NULL_VALUE"});default:return un()}}(e):e.fieldFilter!==void 0?function(n){return _s.create(j_(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return un()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return ed.create(n.compositeFilter.filters.map(r=>NPe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return un()}}(n.compositeFilter.op))}(e):un()}function _Ot(e){return aOt[e]}function wOt(e){return uOt[e]}function EOt(e){return lOt[e]}function F_(e){return{fieldPath:e.canonicalString()}}function j_(e){return Ro.fromServerFormat(e.fieldPath)}function PPe(e){return e instanceof _s?function(n){if(n.op==="=="){if(the(n.value))return{unaryFilter:{field:F_(n.field),op:"IS_NAN"}};if(ehe(n.value))return{unaryFilter:{field:F_(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(the(n.value))return{unaryFilter:{field:F_(n.field),op:"IS_NOT_NAN"}};if(ehe(n.value))return{unaryFilter:{field:F_(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:F_(n.field),op:wOt(n.op),value:n.value}}}(e):e instanceof ed?function(n){const r=n.getFilters().map(i=>PPe(i));return r.length===1?r[0]:{compositeFilter:{op:EOt(n.op),filters:r}}}(e):un()}function xOt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function DPe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(t,n,r,i,s=hn.min(),o=hn.min(),a=xa.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new qg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new qg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new qg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new qg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SOt{constructor(t){this.ct=t}}function TOt(e){const t=vOt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?fV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class COt{constructor(){this._n=new AOt}addToCollectionParentIndex(t,n){return this._n.add(n),Qe.resolve()}getCollectionParents(t,n){return Qe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Qe.resolve()}deleteFieldIndex(t,n){return Qe.resolve()}deleteAllFieldIndexes(t){return Qe.resolve()}createTargetIndexes(t,n){return Qe.resolve()}getDocumentsMatchingTarget(t,n){return Qe.resolve(null)}getIndexType(t,n){return Qe.resolve(0)}getFieldIndexes(t,n){return Qe.resolve([])}getNextCollectionGroupToUpdate(t){return Qe.resolve(null)}getMinOffset(t,n){return Qe.resolve(K0.min())}getMinOffsetFromCollectionGroup(t,n){return Qe.resolve(K0.min())}updateCollectionGroup(t,n,r){return Qe.resolve()}updateIndexEntries(t,n){return Qe.resolve()}}class AOt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Oo(fi.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Oo(fi.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new GE(0)}static Ln(){return new GE(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IOt{constructor(){this.changes=new mS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,fa.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Qe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kOt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ROt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&C2(r.mutation,i,Tl.empty(),Us.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Un()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Un()){const i=Jv();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=_C();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=Jv();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Un()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Am();const o=T2(),a=function(){return T2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof ky)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),C2(c.mutation,l,c.mutation.getFieldMask(),Us.now())):o.set(l.key,Tl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new kOt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=T2();let i=new $i((o,a)=>o-a),s=Un();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Tl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Un()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=mPe();c.forEach(d=>{if(!s.has(d)){const h=EPe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Qe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):cPe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Qe.resolve(Jv());let a=-1,u=s;return o.next(l=>Qe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Qe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Un())).next(c=>({batchId:a,changes:pPe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=_C();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=_C();return this.indexManager.getCollectionParents(t,s).next(a=>Qe.forEach(a,u=>{const l=function(f,d){return new pS(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,fa.newInvalidDocument(c)))});let a=_C();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&C2(c.mutation,l,Tl.empty(),Us.now()),o4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NOt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Qe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:vh(i.createTime)}}(n)),Qe.resolve()}getNamedQuery(t,n){return Qe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:TOt(i.bundledQuery),readTime:vh(i.readTime)}}(n)),Qe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class POt{constructor(){this.overlays=new $i(Ut.comparator),this.hr=new Map}getOverlay(t,n){return Qe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Jv();return Qe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Qe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Qe.resolve()}getOverlaysForCollection(t,n,r){const i=Jv(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Qe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new $i((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=Jv(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Jv(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Qe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new tOt(n,r));let s=this.hr.get(n);s===void 0&&(s=Un(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NJ{constructor(){this.Pr=new Oo(Qs.Ir),this.Tr=new Oo(Qs.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Qs(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Qs(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Ut(new fi([])),r=new Qs(n,t),i=new Qs(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Ut(new fi([])),r=new Qs(n,t),i=new Qs(n,t+1);let s=Un();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Qs(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Qs{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Ut.comparator(t.key,n.key)||wr(t.pr,n.pr)}static Er(t,n){return wr(t.pr,n.pr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Oo(Qs.Ir)}checkEmpty(t){return Qe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new eOt(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Qs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Qe.resolve(o)}lookupMutationBatch(t,n){return Qe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Qe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Qe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Qe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Qs(n,0),i=new Qs(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Qe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Oo(wr);return n.forEach(i=>{const s=new Qs(i,0),o=new Qs(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Qe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Qs(new Ut(s),0);let a=new Oo(wr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Qe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ii(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Qe.forEach(n.mutations,i=>{const s=new Qs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Qs(n,0),i=this.wr.firstAfterOrEqual(r);return Qe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Qe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OOt{constructor(t){this.vr=t,this.docs=function(){return new $i(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Qe.resolve(r?r.document.mutableCopy():fa.newInvalidDocument(n))}getEntries(t,n){let r=Am();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():fa.newInvalidDocument(i))}),Qe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Am();const o=n.path,a=new Ut(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||vDt(yDt(c),r)<=0||(i.has(c.key)||o4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Qe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){un()}Fr(t,n){return Qe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new $Ot(this)}getSize(t){return Qe.resolve(this.size)}}class $Ot extends IOt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Qe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MOt{constructor(t){this.persistence=t,this.Mr=new mS(n=>TJ(n),CJ),this.lastRemoteSnapshotVersion=hn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new NJ,this.targetCount=0,this.Lr=GE.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Qe.resolve()}getLastRemoteSnapshotVersion(t){return Qe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Qe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Qe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Qe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new GE(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Qe.resolve()}updateTargetData(t,n){return this.qn(n),Qe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Qe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Qe.waitFor(s).next(()=>i)}getTargetCount(t){return Qe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Qe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Qe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Qe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Qe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Qe.resolve(r)}containsKey(t,n){return Qe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LOt{constructor(t,n){this.Br={},this.overlays={},this.kr=new wJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new MOt(this),this.indexManager=new COt,this.remoteDocumentCache=function(i){return new OOt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new SOt(n),this.$r=new NOt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new POt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new DOt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){kt("MemoryPersistence","Starting transaction:",t);const i=new FOt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Qe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class FOt extends _Dt{constructor(t){super(),this.currentSequenceNumber=t}}class PJ{constructor(t){this.persistence=t,this.zr=new NJ,this.jr=null}static Hr(t){return new PJ(t)}get Jr(){if(this.jr)return this.jr;throw un()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Qe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Qe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Qe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Qe.forEach(this.Jr,r=>{const i=Ut.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,hn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Qe.or([()=>Qe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DJ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=Un(),i=Un();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new DJ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jOt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BOt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return _It()?8:wDt(Bo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new jOt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(bT()<=Wn.DEBUG&&kt("QueryEngine","SDK will not create cache indexes for query:",L_(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Qe.resolve()):(bT()<=Wn.DEBUG&&kt("QueryEngine","Query:",L_(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(bT()<=Wn.DEBUG&&kt("QueryEngine","The SDK decides to create cache indexes for query:",L_(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,yh(n))):Qe.resolve())}ji(t,n){if(she(n))return Qe.resolve(null);let r=yh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=fV(n,null,"F"),r=yh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Un(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,fV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return she(n)||i.isEqual(hn.min())?Qe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Qe.resolve(null):(bT()<=Wn.DEBUG&&kt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),L_(n)),this.es(t,o,n,gDt(i,-1)).next(a=>a))})}Zi(t,n){let r=new Oo(dPe(t));return n.forEach((i,s)=>{o4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return bT()<=Wn.DEBUG&&kt("QueryEngine","Using full collection scan to execute query:",L_(n)),this.zi.getDocumentsMatchingQuery(t,n,K0.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UOt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new $i(wr),this.rs=new mS(s=>TJ(s),CJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ROt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function zOt(e,t,n,r){return new UOt(e,t,n,r)}async function OPe(e,t){const n=pn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Un();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function VOt(e,t){const n=pn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Qe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ii(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Un();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function $Pe(e){const t=pn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function HOt(e,t){const n=pn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(xa.EMPTY_BYTE_STRING,hn.min()).withLastLimboFreeSnapshotVersion(hn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=Am(),l=Un();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(qOt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(hn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Qe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function qOt(e,t,n){let r=Un(),i=Un();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Am();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(hn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):kt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function WOt(e,t){const n=pn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function GOt(e,t){const n=pn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Qe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new qg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function gV(e,t,n){const r=pn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Pk(o))throw o;kt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function ghe(e,t,n){const r=pn(e);let i=hn.min(),s=Un();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=pn(u),d=f.rs.get(c);return d!==void 0?Qe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,yh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:hn.min(),n?s:Un())).next(a=>(YOt(r,FDt(t),a),{documents:a,hs:s})))}function YOt(e,t,n){let r=e.ss.get(t)||hn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class yhe{constructor(){this.activeTargetIds=HDt()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class KOt{constructor(){this.no=new yhe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new yhe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XOt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vhe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){kt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){kt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ZN=null;function l9(){return ZN===null?ZN=function(){return 268435456+Math.round(2147483648*Math.random())}():ZN++,"0x"+ZN.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QOt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JOt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const na="WebChannelConnection";class ZOt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=l9(),u=this.vo(n,r.toUriEncodedString());kt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(kt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw GA("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+hS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=QOt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=l9();return new Promise((o,a)=>{const u=new YNe;u.setWithCredentials(!0),u.listenOnce(XNe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case xD.NO_ERROR:const c=u.getResponseJson();kt(na,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case xD.TIMEOUT:kt(na,`RPC '${t}' ${s} timed out`),a(new bt(Ue.DEADLINE_EXCEEDED,"Request time out"));break;case xD.HTTP_ERROR:const f=u.getStatus();if(kt(na,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Ue).indexOf(y)>=0?y:Ue.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Ue.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Ue.UNAVAILABLE,"Connection failed."));break;default:un()}}finally{kt(na,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);kt(na,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=l9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=ZNe(),a=JNe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new KNe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");kt(na,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new JOt({lo:g=>{h?kt(na,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(kt(na,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),kt(na,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,bC.EventType.OPEN,()=>{h||(kt(na,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,bC.EventType.CLOSE,()=>{h||(h=!0,kt(na,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,bC.EventType.ERROR,g=>{h||(h=!0,GA(na,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Ue.UNAVAILABLE,"The operation could not be completed")))}),m(f,bC.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ii(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){kt(na,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let S=function(A){const N=ps[A];if(N!==void 0)return SPe(N)}(E),T=w.message;S===void 0&&(S=Ue.INTERNAL,T="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(S,T)),f.close()}else kt(na,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,QNe.STAT_EVENT,g=>{g.stat===sV.PROXY?kt(na,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===sV.NOPROXY&&kt(na,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function c9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f4(e){return new cOt(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MPe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&kt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LPe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new MPe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Ue.RESOURCE_EXHAUSTED?(Cm(n.toString()),Cm("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return kt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(kt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e3t extends LPe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=hOt(this.serializer,t),r=function(s){if(!("targetChange"in s))return hn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?hn.min():o.readTime?vh(o.readTime):hn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=mV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=lV(u)?{documents:gOt(s,u)}:{query:yOt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=APe(s,o.resumeToken);const l=dV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(hn.min())>0){a.readTime=P$(s,o.snapshotVersion.toTimestamp());const l=dV(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=bOt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=mV(this.serializer),n.removeTarget=t,this.i_(n)}}class t3t extends LPe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ii(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=mOt(t.writeResults,t.commitTime),r=vh(t.commitTime);return this.listener.A_(r,n)}return ii(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=mV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>pOt(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3t extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,hV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Ue.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,hV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Ue.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class r3t{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Cm(n),this.y_=!1):kt("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i3t{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Ib(this)&&(kt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=pn(u);l.M_.add(4),await Mk(l),l.N_.set("Unknown"),l.M_.delete(4),await $k(l)}(this))})}),this.N_=new r3t(r,i)}}async function $k(e){if(Ib(e))for(const t of e.x_)await t(!0)}async function Mk(e){for(const t of e.x_)await t(!1)}function FPe(e,t){const n=pn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),LJ(n)?MJ(n):gS(n).Xo()&&$J(n,t))}function OJ(e,t){const n=pn(e),r=gS(n);n.F_.delete(t),r.Xo()&&jPe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Ib(n)&&n.N_.set("Unknown"))}function $J(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(hn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}gS(e).P_(t)}function jPe(e,t){e.L_.xe(t),gS(e).I_(t)}function MJ(e){e.L_=new oOt({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),gS(e).start(),e.N_.w_()}function LJ(e){return Ib(e)&&!gS(e).Zo()&&e.F_.size>0}function Ib(e){return pn(e).M_.size===0}function BPe(e){e.L_=void 0}async function s3t(e){e.N_.set("Online")}async function o3t(e){e.F_.forEach((t,n)=>{$J(e,t)})}async function a3t(e,t){BPe(e),LJ(e)?(e.N_.D_(t),MJ(e)):e.N_.set("Unknown")}async function u3t(e,t,n){if(e.N_.set("Online"),t instanceof CPe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){kt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await D$(e,r)}else if(t instanceof CD?e.L_.Ke(t):t instanceof TPe?e.L_.He(t):e.L_.We(t),!n.isEqual(hn.min()))try{const r=await $Pe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(xa.EMPTY_BYTE_STRING,c.snapshotVersion)),jPe(s,u);const f=new qg(c.target,u,l,c.sequenceNumber);$J(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){kt("RemoteStore","Failed to raise snapshot:",r),await D$(e,r)}}async function D$(e,t,n){if(!Pk(t))throw t;e.M_.add(1),await Mk(e),e.N_.set("Offline"),n||(n=()=>$Pe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{kt("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await $k(e)})}function UPe(e,t){return t().catch(n=>D$(e,n,t))}async function d4(e){const t=pn(e),n=Q0(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;l3t(t);)try{const i=await WOt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,c3t(t,i)}catch(i){await D$(t,i)}zPe(t)&&VPe(t)}function l3t(e){return Ib(e)&&e.v_.length<10}function c3t(e,t){e.v_.push(t);const n=Q0(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function zPe(e){return Ib(e)&&!Q0(e).Zo()&&e.v_.length>0}function VPe(e){Q0(e).start()}async function f3t(e){Q0(e).V_()}async function d3t(e){const t=Q0(e);for(const n of e.v_)t.d_(n.mutations)}async function h3t(e,t,n){const r=e.v_.shift(),i=IJ.from(r,t,n);await UPe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await d4(e)}async function p3t(e,t){t&&Q0(e).E_&&await async function(r,i){if(function(o){return rOt(o)&&o!==Ue.ABORTED}(i.code)){const s=r.v_.shift();Q0(r).t_(),await UPe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await d4(r)}}(e,t),zPe(e)&&VPe(e)}async function bhe(e,t){const n=pn(e);n.asyncQueue.verifyOperationInProgress(),kt("RemoteStore","RemoteStore received new credentials");const r=Ib(n);n.M_.add(3),await Mk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await $k(n)}async function m3t(e,t){const n=pn(e);t?(n.M_.delete(2),await $k(n)):t||(n.M_.add(2),await Mk(n),n.N_.set("Unknown"))}function gS(e){return e.B_||(e.B_=function(n,r,i){const s=pn(n);return s.f_(),new e3t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:s3t.bind(null,e),To:o3t.bind(null,e),Ao:a3t.bind(null,e),h_:u3t.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),LJ(e)?MJ(e):e.N_.set("Unknown")):(await e.B_.stop(),BPe(e))})),e.B_}function Q0(e){return e.k_||(e.k_=function(n,r,i){const s=pn(n);return s.f_(),new t3t(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:f3t.bind(null,e),Ao:p3t.bind(null,e),R_:d3t.bind(null,e),A_:h3t.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await d4(e)):(await e.k_.stop(),e.v_.length>0&&(kt("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FJ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Jp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new FJ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Ue.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function jJ(e,t){if(Cm("AsyncQueue",`${t}: ${e}`),Pk(e))return new bt(Ue.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=_C(),this.sortedSet=new $i(this.comparator)}static emptySet(t){return new Ww(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ww)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Ww;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _he{constructor(){this.q_=new $i(Ut.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):un():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class YE{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new YE(t,n,Ww.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&s4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g3t{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class y3t{constructor(){this.queries=new mS(t=>fPe(t),s4),this.onlineState="Unknown",this.z_=new Set}}async function HPe(e,t){const n=pn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new g3t,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=jJ(o,`Initialization of query '${L_(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&BJ(n)}async function qPe(e,t){const n=pn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function v3t(e,t){const n=pn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&BJ(n)}function b3t(e,t,n){const r=pn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function BJ(e){e.z_.forEach(t=>{t.next()})}var yV,whe;(whe=yV||(yV={})).J_="default",whe.Cache="cache";class WPe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new YE(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=YE.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==yV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GPe{constructor(t){this.key=t}}class YPe{constructor(t){this.key=t}}class _3t{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=Un(),this.mutatedKeys=Un(),this.Ia=dPe(t),this.Ta=new Ww(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new _he,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=o4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return un()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new YE(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new _he,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=Un(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new YPe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new GPe(r))}),n}pa(t){this.la=t.hs,this.Pa=Un();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return YE.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class w3t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class E3t{constructor(t){this.key=t,this.wa=!1}}class x3t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new mS(a=>fPe(a),s4),this.Da=new Map,this.Ca=new Set,this.va=new $i(Ut.comparator),this.Fa=new Map,this.Ma=new NJ,this.xa={},this.Oa=new Map,this.Na=GE.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function S3t(e,t,n=!0){const r=eDe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await KPe(r,t,n,!0),i}async function T3t(e,t){const n=eDe(e);await KPe(n,t,!0,!1)}async function KPe(e,t,n,r){const i=await GOt(e.localStore,yh(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await C3t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&FPe(e.remoteStore,i),a}async function C3t(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await ghe(m.localStore,g.query,!1).then(({documents:T})=>g.view.da(T,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,S=g.view.applyChanges(b,m.isPrimaryClient,w,E);return xhe(m,g.targetId,S.fa),S.snapshot}(e,f,d,h);const s=await ghe(e.localStore,t,!0),o=new _3t(t,s.hs),a=o.da(s.documents),u=Ok.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);xhe(e,n,l.fa);const c=new w3t(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function A3t(e,t,n){const r=pn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!s4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await gV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&OJ(r.remoteStore,i.targetId),vV(r,i.targetId)}).catch(Nk)):(vV(r,i.targetId),await gV(r.localStore,i.targetId,!0))}async function I3t(e,t){const n=pn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),OJ(n.remoteStore,r.targetId))}async function k3t(e,t,n){const r=M3t(e);try{const i=await function(o,a){const u=pn(o),l=Us.now(),c=a.reduce((h,p)=>h.add(p.key),Un());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Am(),m=Un();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=JDt(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new ky(v.key,b,rPe(b.value.mapValue),zu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:pPe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new $i(wr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Lk(r,i.changes),await d4(r.remoteStore)}catch(i){const s=jJ(i,"Failed to persist write");n.reject(s)}}async function XPe(e,t){const n=pn(e);try{const r=await HOt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ii(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ii(o.wa):i.removedDocuments.size>0&&(ii(o.wa),o.wa=!1))}),await Lk(n,r,t)}catch(r){await Nk(r)}}function Ehe(e,t,n){const r=pn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=pn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&BJ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function R3t(e,t,n){const r=pn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new $i(Ut.comparator);o=o.insert(s,fa.newNoDocument(s,hn.min()));const a=Un().add(s),u=new c4(hn.min(),new Map,new $i(wr),o,a);await XPe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),UJ(r)}else await gV(r.localStore,t,!1).then(()=>vV(r,t,n)).catch(Nk)}async function N3t(e,t){const n=pn(e),r=t.batch.batchId;try{const i=await VOt(n.localStore,t);JPe(n,r,null),QPe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Lk(n,i)}catch(i){await Nk(i)}}async function P3t(e,t,n){const r=pn(e);try{const i=await function(o,a){const u=pn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ii(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);JPe(r,t,n),QPe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Lk(r,i)}catch(i){await Nk(i)}}function QPe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function JPe(e,t,n){const r=pn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function vV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||ZPe(e,r)})}function ZPe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(OJ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),UJ(e))}function xhe(e,t,n){for(const r of n)r instanceof GPe?(e.Ma.addReference(r.key,t),D3t(e,r)):r instanceof YPe?(kt("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||ZPe(e,r.key)):un()}function D3t(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(kt("SyncEngine","New document in limbo: "+n),e.Ca.add(r),UJ(e))}function UJ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ut(fi.fromString(t)),r=e.Na.next();e.Fa.set(r,new E3t(n)),e.va=e.va.insert(n,r),FPe(e.remoteStore,new qg(yh(AJ(n.path)),r,"TargetPurposeLimboResolution",wJ.oe))}}async function Lk(e,t,n){const r=pn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=DJ.Ki(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=pn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Qe.forEach(l,d=>Qe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Qe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!Pk(f))throw f;kt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function O3t(e,t){const n=pn(e);if(!n.currentUser.isEqual(t)){kt("SyncEngine","User change. New user:",t.toKey());const r=await OPe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Ue.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Lk(n,r.us)}}function $3t(e,t){const n=pn(e),r=n.Fa.get(t);if(r&&r.wa)return Un().add(r.key);{let i=Un();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function eDe(e){const t=pn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=XPe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=$3t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=R3t.bind(null,t),t.Sa.h_=v3t.bind(null,t.eventManager),t.Sa.ka=b3t.bind(null,t.eventManager),t}function M3t(e){const t=pn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=N3t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=P3t.bind(null,t),t}class She{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=f4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return zOt(this.persistence,new BOt,t.initialUser,this.serializer)}createPersistence(t){return new LOt(PJ.Hr,this.serializer)}createSharedClientState(t){return new KOt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class L3t{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Ehe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=O3t.bind(null,this.syncEngine),await m3t(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new y3t}()}createDatastore(t){const n=f4(t.databaseInfo.databaseId),r=function(s){return new ZOt(s)}(t.databaseInfo);return function(s,o,a,u){return new n3t(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new i3t(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Ehe(this.syncEngine,n,0),function(){return vhe.D()?new vhe:new XOt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new x3t(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=pn(r);kt("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Mk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tDe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Cm("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3t{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=bu.UNAUTHENTICATED,this.clientId=ePe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{kt("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(kt("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Jp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=jJ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function f9(e,t){e.asyncQueue.verifyOperationInProgress(),kt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await OPe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function The(e,t){e.asyncQueue.verifyOperationInProgress();const n=await nDe(e);kt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>bhe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>bhe(t.remoteStore,i)),e._onlineComponents=t}function j3t(e){return e.name==="FirebaseError"?e.code===Ue.FAILED_PRECONDITION||e.code===Ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function nDe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){kt("FirestoreClient","Using user provided OfflineComponentProvider");try{await f9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!j3t(n))throw n;GA("Error using user provided cache. Falling back to memory cache: "+n),await f9(e,new She)}}else kt("FirestoreClient","Using default OfflineComponentProvider"),await f9(e,new She);return e._offlineComponents}async function zJ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(kt("FirestoreClient","Using user provided OnlineComponentProvider"),await The(e,e._uninitializedComponentsProvider._online)):(kt("FirestoreClient","Using default OnlineComponentProvider"),await The(e,new L3t))),e._onlineComponents}function B3t(e){return nDe(e).then(t=>t.persistence)}function U3t(e){return zJ(e).then(t=>t.remoteStore)}function z3t(e){return zJ(e).then(t=>t.syncEngine)}async function rDe(e){const t=await zJ(e),n=t.eventManager;return n.onListen=S3t.bind(null,t.syncEngine),n.onUnlisten=A3t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=T3t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=I3t.bind(null,t.syncEngine),n}function V3t(e){return e.asyncQueue.enqueue(async()=>{const t=await B3t(e),n=await U3t(e);return t.setNetworkEnabled(!0),function(i){const s=pn(i);return s.M_.delete(0),$k(s)}(n)})}function H3t(e,t,n={}){const r=new Jp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new tDe({next:d=>{o.enqueueAndForget(()=>qPe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Ue.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new WPe(AJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return HPe(s,f)}(await rDe(e),e.asyncQueue,t,n,r)),r.promise}function q3t(e,t,n={}){const r=new Jp;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new tDe({next:d=>{o.enqueueAndForget(()=>qPe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new WPe(a,c,{includeMetadataChanges:!0,ra:!0});return HPe(s,f)}(await rDe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iDe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Che=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sDe(e,t,n){if(!n)throw new bt(Ue.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function W3t(e,t,n,r){if(t===!0&&r===!0)throw new bt(Ue.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Ahe(e){if(!Ut.isDocumentKey(e))throw new bt(Ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Ihe(e){if(Ut.isDocumentKey(e))throw new bt(Ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function h4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":un()}function td(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=h4(e);throw new bt(Ue.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class khe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}W3t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iDe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Ue.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class VJ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new khe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new khe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new uDt;switch(r.type){case"firstParty":return new fDt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Che.get(n);r&&(kt("ComponentProvider","Removing Datastore"),Che.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new kb(this.firestore,t,this._query)}}class Ya{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new b0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ya(this.firestore,t,this._key)}}class b0 extends kb{constructor(t,n,r){super(t,n,AJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ya(this.firestore,null,new Ut(t))}withConverter(t){return new b0(this.firestore,t,this._path)}}function af(e,t,...n){if(e=si(e),sDe("collection","path",t),e instanceof VJ){const r=fi.fromString(t,...n);return Ihe(r),new b0(e,null,r)}{if(!(e instanceof Ya||e instanceof b0))throw new bt(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(fi.fromString(t,...n));return Ihe(r),new b0(e.firestore,null,r)}}function As(e,t,...n){if(e=si(e),arguments.length===1&&(t=ePe.newId()),sDe("doc","path",t),e instanceof VJ){const r=fi.fromString(t,...n);return Ahe(r),new Ya(e,null,new Ut(r))}{if(!(e instanceof Ya||e instanceof b0))throw new bt(Ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(fi.fromString(t,...n));return Ahe(r),new Ya(e.firestore,e instanceof b0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3t{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new MPe(this,"async_queue_retry"),this.hu=()=>{const n=c9();n&&kt("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=c9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=c9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new Jp;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Pk(t))throw t;kt("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Cm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=FJ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&un()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Ry extends VJ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new G3t}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||oDe(this),this._firestoreClient.terminate()}}function Y3t(e,t,n){n||(n="(default)");const r=fS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(HA(s,t))return i;throw new bt(Ue.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Ue.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function Fk(e){return e._firestoreClient||oDe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function oDe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new SDt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,iDe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new F3t(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function K3t(e){return V3t(Fk(e=td(e,Ry)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(t){this._byteString=t}static fromBase64String(t){try{return new KE(xa.fromBase64String(t))}catch(n){throw new bt(Ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new KE(xa.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ro(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let HJ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return wr(this._lat,t._lat)||wr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X3t=/^__.*__$/;class Q3t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new ky(t,this.data,this.fieldMask,n,this.fieldTransforms):new Dk(t,this.data,n,this.fieldTransforms)}}class aDe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new ky(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function uDe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw un()}}class qJ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new qJ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return O$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(uDe(this.fu)&&X3t.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class J3t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||f4(t)}Fu(t,n,r,i=!1){return new qJ({fu:t,methodName:n,vu:r,path:Ro.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function m4(e){const t=e._freezeSettings(),n=f4(e._databaseId);return new J3t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function lDe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);GJ("Data must be an object, but it was:",o,r);const a=dDe(r,o);let u,l;if(s.merge)u=new Tl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=bV(t,f,n);if(!o.contains(d))throw new bt(Ue.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);pDe(c,d)||c.push(d)}u=new Tl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new Q3t(new Iu(a),u,l)}class g4 extends p4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof g4}}class WJ extends p4{_toFieldTransform(t){return new YDt(t.path,new ZA)}isEqual(t){return t instanceof WJ}}function cDe(e,t,n,r){const i=e.Fu(1,t,n);GJ("Data must be an object, but it was:",i,r);const s=[],o=Iu.empty();Ab(r,(u,l)=>{const c=YJ(t,u,n);l=si(l);const f=i.Su(c);if(l instanceof g4)s.push(c);else{const d=Bk(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Tl(s);return new aDe(o,a,i.fieldTransforms)}function fDe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[bV(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Ue.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(bV(t,s[d])),u.push(s[d+1]);const l=[],c=Iu.empty();for(let d=a.length-1;d>=0;--d)if(!pDe(l,a[d])){const h=a[d];let p=u[d];p=si(p);const m=o.Su(h);if(p instanceof g4)l.push(h);else{const g=Bk(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Tl(l);return new aDe(c,f,o.fieldTransforms)}function Z3t(e,t,n,r=!1){return Bk(n,e.Fu(r?4:3,t))}function Bk(e,t){if(hDe(e=si(e)))return GJ("Unsupported field value:",t,e),dDe(e,t);if(e instanceof p4)return function(r,i){if(!uDe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Bk(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=si(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return qDt(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Us.fromDate(r);return{timestampValue:P$(i.serializer,s)}}if(r instanceof Us){const s=new Us(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:P$(i.serializer,s)}}if(r instanceof HJ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof KE)return{bytesValue:APe(i.serializer,r._byteString)};if(r instanceof Ya){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:RJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${h4(r)}`)}(e,t)}function dDe(e,t){const n={};return tPe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ab(e,(r,i)=>{const s=Bk(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function hDe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Us||e instanceof HJ||e instanceof KE||e instanceof Ya||e instanceof p4)}function GJ(e,t,n){if(!hDe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=h4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function bV(e,t,n){if((t=si(t))instanceof jk)return t._internalPath;if(typeof t=="string")return YJ(e,t);throw O$("Field path arguments must be of type string or ",e,!1,void 0,n)}const e$t=new RegExp("[~\\*/\\[\\]]");function YJ(e,t,n){if(t.search(e$t)>=0)throw O$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new jk(...t.split("."))._internalPath}catch{throw O$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function O$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Ue.INVALID_ARGUMENT,a+e+u)}function pDe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mDe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ya(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new t$t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(y4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class t$t extends mDe{data(){return super.data()}}function y4(e,t){return typeof t=="string"?YJ(e,t):t instanceof jk?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n$t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class KJ{}class gDe extends KJ{}function Rhe(e,t,...n){let r=[];t instanceof KJ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof XJ).length,a=s.filter(u=>u instanceof v4).length;if(o>1||o>0&&a>0)throw new bt(Ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class v4 extends gDe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new v4(t,n,r)}_apply(t){const n=this._parse(t);return yDe(t._query,n),new kb(t.firestore,t.converter,cV(t._query,n))}_parse(t){const n=m4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Phe(f,c);const h=[];for(const p of f)h.push(Nhe(u,s,p));d={arrayValue:{values:h}}}else d=Nhe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Phe(f,c),d=Z3t(a,o,f,c==="in"||c==="not-in");return _s.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function r$t(e,t,n){const r=t,i=y4("where",e);return v4._create(i,r,n)}class XJ extends KJ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new XJ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ed.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)yDe(o,u),o=cV(o,u)}(t._query,n),new kb(t.firestore,t.converter,cV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QJ extends gDe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new QJ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new JA(s,o)}(t._query,this._field,this._direction);return new kb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new pS(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function i$t(e,t="asc"){const n=t,r=y4("orderBy",e);return QJ._create(r,n)}function Nhe(e,t,n){if(typeof(n=si(n))=="string"){if(n==="")throw new bt(Ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cPe(t)&&n.indexOf("/")!==-1)throw new bt(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(fi.fromString(n));if(!Ut.isDocumentKey(r))throw new bt(Ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Zde(e,new Ut(r))}if(n instanceof Ya)return Zde(e,n._key);throw new bt(Ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${h4(n)}.`)}function Phe(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function yDe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Ue.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class s$t{convertValue(t,n="none"){switch(q1(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ys(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(H1(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw un()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Ab(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new HJ(ys(t.latitude),ys(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=xJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(KA(t));default:return null}}convertTimestamp(t){const n=X0(t);return new Us(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=fi.fromString(t);ii(DPe(r));const i=new XA(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||Cm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vDe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class bDe extends mDe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new AD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(y4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class AD extends bDe{data(t={}){return super.data(t)}}class o$t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new EC(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new AD(this._firestore,this._userDataWriter,r.key,r,new EC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new AD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new EC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new AD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new EC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:a$t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function a$t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return un()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d9(e){e=td(e,Ya);const t=td(e.firestore,Ry);return H3t(Fk(t),e._key).then(n=>c$t(t,e,n))}class _De extends s$t{constructor(t){super(),this.firestore=t}convertBytes(t){return new KE(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ya(this.firestore,null,n)}}function _T(e){e=td(e,kb);const t=td(e.firestore,Ry),n=Fk(t),r=new _De(t);return n$t(e._query),q3t(n,e._query).then(i=>new o$t(t,r,e,i))}function ul(e,t,n){e=td(e,Ya);const r=td(e.firestore,Ry),i=vDe(e.converter,t,n);return b4(r,[lDe(m4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,zu.none())])}function u$t(e,t,n,...r){e=td(e,Ya);const i=td(e.firestore,Ry),s=m4(i);let o;return o=typeof(t=si(t))=="string"||t instanceof jk?fDe(s,"updateDoc",e._key,t,n,r):cDe(s,"updateDoc",e._key,t),b4(i,[o.toMutation(e._key,zu.exists(!0))])}function l$t(e){return b4(td(e.firestore,Ry),[new l4(e._key,zu.none())])}function b4(e,t){return function(r,i){const s=new Jp;return r.asyncQueue.enqueueAndForget(async()=>k3t(await z3t(r),i,s)),s.promise}(Fk(e),t)}function c$t(e,t,n){const r=n.docs.get(t._key),i=new _De(e);return new bDe(e,i,t._key,r,new EC(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f$t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=m4(t)}set(t,n,r){this._verifyNotCommitted();const i=h9(t,this._firestore),s=vDe(i.converter,n,r),o=lDe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,zu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=h9(t,this._firestore);let o;return o=typeof(n=si(n))=="string"||n instanceof jk?fDe(this._dataReader,"WriteBatch.update",s._key,n,r,i):cDe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,zu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=h9(t,this._firestore);return this._mutations=this._mutations.concat(new l4(n._key,zu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function h9(e,t){if((e=si(e)).firestore!==t)throw new bt(Ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function d$t(){return new WJ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dhe(e){return Fk(e=td(e,Ry)),new f$t(e,t=>b4(e,t))}(function(t,n=!0){(function(i){hS=i})(Cb),Sm(new kh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Ry(new lDt(r.getProvider("auth-internal")),new hDt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new XA(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),qf(Kde,"4.6.4",t),qf(Kde,"4.6.4","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new Map,wDe={activated:!1,tokenObservers:[]},h$t={initialized:!1,enabled:!1};function zs(e){return _V.get(e)||Object.assign({},wDe)}function p$t(e,t){return _V.set(e,t),_V.get(e)}function _4(){return h$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EDe="https://content-firebaseappcheck.googleapis.com/v1",m$t="exchangeRecaptchaV3Token",g$t="exchangeDebugToken",Ohe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},y$t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v$t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new VA,this.pending.promise.catch(n=>{}),await b$t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new VA,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function b$t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Ou=new cS("appCheck","AppCheck",_$t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $he(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function JJ(e){if(!zs(e).activated)throw Ou.create("use-before-activation",{appName:e.name})}function xDe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=eP(n)+"d:"),r&&(o+=eP(r)+"h:"),o+=eP(i)+"m:"+eP(s)+"s",o}function eP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZJ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Ou.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Ou.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Ou.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Ou.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function w$t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${EDe}/projects/${n}/apps/${r}:${m$t}?key=${i}`,body:{recaptcha_v3_token:t}}}function SDe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${EDe}/projects/${n}/apps/${r}:${g$t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E$t="firebase-app-check-database",x$t=1,nI="firebase-app-check-store",TDe="debug-token";let tP=null;function CDe(){return tP||(tP=new Promise((e,t)=>{try{const n=indexedDB.open(E$t,x$t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Ou.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(nI,{keyPath:"compositeKey"})}}}catch(n){t(Ou.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),tP)}function S$t(e){return IDe(kDe(e))}function T$t(e,t){return ADe(kDe(e),t)}function C$t(e){return ADe(TDe,e)}function A$t(){return IDe(TDe)}async function ADe(e,t){const r=(await CDe()).transaction(nI,"readwrite"),s=r.objectStore(nI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Ou.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function IDe(e){const n=(await CDe()).transaction(nI,"readonly"),i=n.objectStore(nI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Ou.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function kDe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new Q6("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I$t(e){if(tJ()){let t;try{t=await S$t(e)}catch(n){rI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function p9(e,t){return tJ()?T$t(e,t).catch(n=>{rI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function k$t(){let e;try{e=await A$t()}catch{}if(e)return e;{const t=kIt();return C$t(t).catch(n=>rI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eZ(){return _4().enabled}async function tZ(){const e=_4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function R$t(){const e=WRe(),t=_4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new VA;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(k$t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N$t={error:"UNKNOWN_ERROR"};function P$t(e){return eJ.encodeString(JSON.stringify(e),!1)}async function wV(e,t=!1){const n=e.app;JJ(n);const r=zs(n);let i=r.token,s;if(i&&!lw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(lw(u)?i=u:await p9(n,void 0))}if(!t&&i&&lw(i))return{token:i.token};let o=!1;if(eZ()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ZJ(SDe(n,await tZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await p9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await zs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?rI.warn(u.message):rI.error(u),s=u}let a;return i?s?lw(i)?a={token:i.token,internalError:s}:a=Lhe(s):(a={token:i.token},r.token=i,await p9(n,i)):a=Lhe(s),o&&PDe(n,a),a}async function D$t(e){const t=e.app;JJ(t);const{provider:n}=zs(t);if(eZ()){const r=await tZ(),{token:i}=await ZJ(SDe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function RDe(e,t,n,r){const{app:i}=e,s=zs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&lw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Mhe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Mhe(e))}function NDe(e,t){const n=zs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Mhe(e){const{app:t}=e,n=zs(t);let r=n.tokenRefresher;r||(r=O$t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function O$t(e){const{app:t}=e;return new v$t(async()=>{const n=zs(t);let r;if(n.token?r=await wV(e,!0):r=await wV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=zs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Ohe.RETRIAL_MIN_WAIT,Ohe.RETRIAL_MAX_WAIT)}function PDe(e,t){const n=zs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function lw(e){return e.expireTimeMillis-Date.now()>0}function Lhe(e){return{token:P$t(N$t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $$t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=zs(this.app);for(const n of t)NDe(this.app,n.next);return Promise.resolve()}}function M$t(e,t){return new $$t(e,t)}function L$t(e){return{getToken:t=>wV(e,t),getLimitedUseToken:()=>D$t(e),addTokenListener:t=>RDe(e,"INTERNAL",t),removeTokenListener:t=>NDe(e.app,t)}}const F$t="@firebase/app-check",j$t="0.8.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B$t="https://www.google.com/recaptcha/api.js";function U$t(e,t){const n=new VA,r=zs(e);r.reCAPTCHAState={initialized:n};const i=z$t(e),s=$he(!1);return s?Fhe(e,t,s,i,n):q$t(()=>{const o=$he(!1);if(!o)throw new Error("no recaptcha");Fhe(e,t,o,i,n)}),n.promise}function Fhe(e,t,n,r,i){n.ready(()=>{H$t(e,t,n,r),i.resolve(n)})}function z$t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function V$t(e){JJ(e);const n=await zs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=zs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function H$t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{zs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{zs(e).reCAPTCHAState.succeeded=!1}}),s=zs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function q$t(e){const t=document.createElement("script");t.src=B$t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;G$t(this._throttleData);const i=await V$t(this._app).catch(o=>{throw Ou.create("recaptcha-error")});if(!(!((t=zs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Ou.create("recaptcha-error");let s;try{s=await ZJ(w$t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=W$t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Ou.create("throttled",{time:xDe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=fS(t,"heartbeat"),U$t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof nZ?this._siteKey===t._siteKey:!1}}function W$t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+y$t,httpStatus:e};{const n=t?t.backoffCount:0,r=OIt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function G$t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Ou.create("throttled",{time:xDe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$t(e=rJ(),t){e=si(e);const n=fS(e,"app-check");if(_4().initialized||R$t(),eZ()&&tZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Ou.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return K$t(e,t.provider,t.isTokenAutoRefreshEnabled),zs(e).isTokenAutoRefreshEnabled&&RDe(r,"INTERNAL",()=>{}),r}function K$t(e,t,n){const r=p$t(e,Object.assign({},wDe));r.activated=!0,r.provider=t,r.cachedTokenPromise=I$t(e).then(i=>(i&&lw(i)&&(r.token=i,PDe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const X$t="app-check",jhe="app-check-internal";function Q$t(){Sm(new kh(X$t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return M$t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(jhe).initialize()})),Sm(new kh(jhe,e=>{const t=e.getProvider("app-check").getImmediate();return L$t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),qf(F$t,j$t)}Q$t();function nP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var DDe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof nP=="function"&&nP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof nP=="function"&&nP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof Ms<"u"?Ms:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,S){if(typeof E!="function"&&this.state===l||typeof S!="function"&&this.state===u)return this;var T=new this.constructor(o);if(this.state!==c){var C=this.state===l?E:S;h(T,C,this.outcome)}else this.queue.push(new d(T,E,S));return T};function d(E,S,T){this.promise=E,typeof S=="function"&&(this.onFulfilled=S,this.callFulfilled=this.otherCallFulfilled),typeof T=="function"&&(this.onRejected=T,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,S,T){s(function(){var C;try{C=S(T)}catch(A){return a.reject(E,A)}C===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,C)})}a.resolve=function(E,S){var T=g(p,S);if(T.status==="error")return a.reject(E,T.value);var C=T.value;if(C)m(E,C);else{E.state=l,E.outcome=S;for(var A=-1,N=E.queue.length;++A<N;)E.queue[A].callFulfilled(S)}return E},a.reject=function(E,S){E.state=u,E.outcome=S;for(var T=-1,C=E.queue.length;++T<C;)E.queue[T].callRejected(S);return E};function p(E){var S=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof S=="function")return function(){S.apply(E,arguments)}}function m(E,S){var T=!1;function C(O){T||(T=!0,a.reject(E,O))}function A(O){T||(T=!0,a.resolve(E,O))}function N(){S(A,C)}var k=g(N);k.status==="error"&&C(k.value)}function g(E,S){var T={};try{T.value=E(S),T.status="success"}catch(C){T.status="error",T.value=C}return T}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var S=new this(o);return a.reject(S,E)}f.all=b;function b(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,C=!1;if(!T)return this.resolve([]);for(var A=new Array(T),N=0,k=-1,O=new this(o);++k<T;)P(E[k],k);return O;function P($,L){S.resolve($).then(M,function(U){C||(C=!0,a.reject(O,U))});function M(U){A[L]=U,++N===T&&!C&&(C=!0,a.resolve(O,A))}}}f.race=w;function w(E){var S=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var T=E.length,C=!1;if(!T)return this.resolve([]);for(var A=-1,N=new this(o);++A<T;)k(E[A]);return N;function k(O){S.resolve(O).then(function(P){C||(C=!0,a.resolve(N,P))},function(P){C||(C=!0,a.reject(N,P))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof Ms<"u"?Ms:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(de){if(de.name!=="TypeError")throw de;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,pe=new Z,ye=0;ye<Y.length;ye+=1)pe.append(Y[ye]);return pe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function S(Y){for(var se=Y.length,Z=new ArrayBuffer(se),pe=new Uint8Array(Z),ye=0;ye<se;ye++)pe[ye]=Y.charCodeAt(ye);return Z}function T(Y){return new f(function(se){var Z=Y.transaction(g,E),pe=c([""]);Z.objectStore(g).put(pe,"key"),Z.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),se(!1)},Z.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),de=navigator.userAgent.match(/Edge\//);se(de||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function C(Y){return typeof y=="boolean"?f.resolve(y):T(Y).then(function(se){return y=se,y})}function A(Y){var se=v[Y.name],Z={};Z.promise=new f(function(pe,ye){Z.resolve=pe,Z.reject=ye}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function N(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function k(Y,se){var Z=v[Y.name],pe=Z.deferredOperations.pop();if(pe)return pe.reject(se),pe.promise}function O(Y,se){return new f(function(Z,pe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)A(Y),Y.db.close();else return Z(Y.db);var ye=[Y.name];se&&ye.push(Y.version);var de=u.open.apply(u,ye);se&&(de.onupgradeneeded=function(Oe){var He=de.result;try{He.createObjectStore(Y.storeName),Oe.oldVersion<=1&&He.createObjectStore(g)}catch(We){if(We.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw We}}),de.onerror=function(Oe){Oe.preventDefault(),pe(de.error)},de.onsuccess=function(){var Oe=de.result;Oe.onversionchange=function(He){He.target.close()},Z(Oe),N(Y)}})}function P(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function L(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),pe=Y.version<Y.db.version,ye=Y.version>Y.db.version;if(pe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ye||Z){if(Z){var de=Y.db.version+1;de>Y.version&&(Y.version=de)}return!0}return!1}function M(Y){return new f(function(se,Z){var pe=new FileReader;pe.onerror=Z,pe.onloadend=function(ye){var de=btoa(ye.target.result||"");se({__local_forage_encoded_blob:!0,data:de,type:Y.type})},pe.readAsBinaryString(Y)})}function U(Y){var se=S(atob(Y.data));return c([se],{type:Y.type})}function B(Y){return Y&&Y.__local_forage_encoded_blob}function V(Y){var se=this,Z=se._initReady().then(function(){var pe=v[se._dbInfo.name];if(pe&&pe.dbReady)return pe.dbReady});return h(Z,Y,Y),Z}function D(Y){A(Y);for(var se=v[Y.name],Z=se.forages,pe=0;pe<Z.length;pe++){var ye=Z[pe];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return Y.db=null,P(Y).then(function(de){return Y.db=de,L(Y)?$(Y):de}).then(function(de){Y.db=se.db=de;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=de}).catch(function(de){throw k(Y,de),de})}function z(Y,se,Z,pe){pe===void 0&&(pe=1);try{var ye=Y.db.transaction(Y.storeName,se);Z(null,ye)}catch(de){if(pe>0&&(!Y.db||de.name==="InvalidStateError"||de.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||de.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return D(Y).then(function(){z(Y,se,Z,pe-1)})}).catch(Z);Z(de)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var pe in Y)Z[pe]=Y[pe];var ye=v[Z.name];ye||(ye=W(),v[Z.name]=ye),ye.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=V);var de=[];function Oe(){return f.resolve()}for(var He=0;He<ye.forages.length;He++){var We=ye.forages[He];We!==se&&de.push(We._initReady().catch(Oe))}var Ye=ye.forages.slice(0);return f.all(de).then(function(){return Z.db=ye.db,P(Z)}).then(function(ut){return Z.db=ut,L(Z,se._defaultConfig.version)?$(Z):ut}).then(function(ut){Z.db=ye.db=ut,se._dbInfo=Z;for(var wt=0;wt<Ye.length;wt++){var gn=Ye[wt];gn!==se&&(gn._dbInfo.db=Z.db,gn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var pe=new f(function(ye,de){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,He){if(Oe)return de(Oe);try{var We=He.objectStore(Z._dbInfo.storeName),Ye=We.get(Y);Ye.onsuccess=function(){var ut=Ye.result;ut===void 0&&(ut=null),B(ut)&&(ut=U(ut)),ye(ut)},Ye.onerror=function(){de(Ye.error)}}catch(ut){de(ut)}})}).catch(de)});return d(pe,se),pe}function G(Y,se){var Z=this,pe=new f(function(ye,de){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,He){if(Oe)return de(Oe);try{var We=He.objectStore(Z._dbInfo.storeName),Ye=We.openCursor(),ut=1;Ye.onsuccess=function(){var wt=Ye.result;if(wt){var gn=wt.value;B(gn)&&(gn=U(gn));var Pt=Y(gn,wt.key,ut++);Pt!==void 0?ye(Pt):wt.continue()}else ye()},Ye.onerror=function(){de(Ye.error)}}catch(wt){de(wt)}})}).catch(de)});return d(pe,se),pe}function te(Y,se,Z){var pe=this;Y=p(Y);var ye=new f(function(de,Oe){var He;pe.ready().then(function(){return He=pe._dbInfo,b.call(se)==="[object Blob]"?C(He.db).then(function(We){return We?se:M(se)}):se}).then(function(We){z(pe._dbInfo,E,function(Ye,ut){if(Ye)return Oe(Ye);try{var wt=ut.objectStore(pe._dbInfo.storeName);We===null&&(We=void 0);var gn=wt.put(We,Y);ut.oncomplete=function(){We===void 0&&(We=null),de(We)},ut.onabort=ut.onerror=function(){var Pt=gn.error?gn.error:gn.transaction.error;Oe(Pt)}}catch(Pt){Oe(Pt)}})}).catch(Oe)});return d(ye,Z),ye}function ve(Y,se){var Z=this;Y=p(Y);var pe=new f(function(ye,de){Z.ready().then(function(){z(Z._dbInfo,E,function(Oe,He){if(Oe)return de(Oe);try{var We=He.objectStore(Z._dbInfo.storeName),Ye=We.delete(Y);He.oncomplete=function(){ye()},He.onerror=function(){de(Ye.error)},He.onabort=function(){var ut=Ye.error?Ye.error:Ye.transaction.error;de(ut)}}catch(ut){de(ut)}})}).catch(de)});return d(pe,se),pe}function he(Y){var se=this,Z=new f(function(pe,ye){se.ready().then(function(){z(se._dbInfo,E,function(de,Oe){if(de)return ye(de);try{var He=Oe.objectStore(se._dbInfo.storeName),We=He.clear();Oe.oncomplete=function(){pe()},Oe.onabort=Oe.onerror=function(){var Ye=We.error?We.error:We.transaction.error;ye(Ye)}}catch(Ye){ye(Ye)}})}).catch(ye)});return d(Z,Y),Z}function ce(Y){var se=this,Z=new f(function(pe,ye){se.ready().then(function(){z(se._dbInfo,w,function(de,Oe){if(de)return ye(de);try{var He=Oe.objectStore(se._dbInfo.storeName),We=He.count();We.onsuccess=function(){pe(We.result)},We.onerror=function(){ye(We.error)}}catch(Ye){ye(Ye)}})}).catch(ye)});return d(Z,Y),Z}function me(Y,se){var Z=this,pe=new f(function(ye,de){if(Y<0){ye(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,He){if(Oe)return de(Oe);try{var We=He.objectStore(Z._dbInfo.storeName),Ye=!1,ut=We.openKeyCursor();ut.onsuccess=function(){var wt=ut.result;if(!wt){ye(null);return}Y===0||Ye?ye(wt.key):(Ye=!0,wt.advance(Y))},ut.onerror=function(){de(ut.error)}}catch(wt){de(wt)}})}).catch(de)});return d(pe,se),pe}function Le(Y){var se=this,Z=new f(function(pe,ye){se.ready().then(function(){z(se._dbInfo,w,function(de,Oe){if(de)return ye(de);try{var He=Oe.objectStore(se._dbInfo.storeName),We=He.openKeyCursor(),Ye=[];We.onsuccess=function(){var ut=We.result;if(!ut){pe(Ye);return}Ye.push(ut.key),ut.continue()},We.onerror=function(){ye(We.error)}}catch(ut){ye(ut)}})}).catch(ye)});return d(Z,Y),Z}function fe(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var pe=this,ye;if(!Y.name)ye=f.reject("Invalid arguments");else{var de=Y.name===Z.name&&pe._dbInfo.db,Oe=de?f.resolve(pe._dbInfo.db):P(Y).then(function(He){var We=v[Y.name],Ye=We.forages;We.db=He;for(var ut=0;ut<Ye.length;ut++)Ye[ut]._dbInfo.db=He;return He});Y.storeName?ye=Oe.then(function(He){if(He.objectStoreNames.contains(Y.storeName)){var We=He.version+1;A(Y);var Ye=v[Y.name],ut=Ye.forages;He.close();for(var wt=0;wt<ut.length;wt++){var gn=ut[wt];gn._dbInfo.db=null,gn._dbInfo.version=We}var Pt=new f(function(jn,Nr){var Pr=u.open(Y.name,We);Pr.onerror=function(Wo){var xd=Pr.result;xd.close(),Nr(Wo)},Pr.onupgradeneeded=function(){var Wo=Pr.result;Wo.deleteObjectStore(Y.storeName)},Pr.onsuccess=function(){var Wo=Pr.result;Wo.close(),jn(Wo)}});return Pt.then(function(jn){Ye.db=jn;for(var Nr=0;Nr<ut.length;Nr++){var Pr=ut[Nr];Pr._dbInfo.db=jn,N(Pr._dbInfo)}}).catch(function(jn){throw(k(Y,jn)||f.resolve()).catch(function(){}),jn})}}):ye=Oe.then(function(He){A(Y);var We=v[Y.name],Ye=We.forages;He.close();for(var ut=0;ut<Ye.length;ut++){var wt=Ye[ut];wt._dbInfo.db=null}var gn=new f(function(Pt,jn){var Nr=u.deleteDatabase(Y.name);Nr.onerror=function(){var Pr=Nr.result;Pr&&Pr.close(),jn(Nr.error)},Nr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Nr.onsuccess=function(){var Pr=Nr.result;Pr&&Pr.close(),Pt(Pr)}});return gn.then(function(Pt){We.db=Pt;for(var jn=0;jn<Ye.length;jn++){var Nr=Ye[jn];N(Nr._dbInfo)}}).catch(function(Pt){throw(k(Y,Pt)||f.resolve()).catch(function(){}),Pt})})}return d(ye,se),ye}var ct={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:te,removeItem:ve,clear:he,length:ce,key:me,keys:Le,dropInstance:fe};function ze(){return typeof openDatabase=="function"}var Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",De=/^~~local_forage_type~([^~]+)~/,Ae="__lfsc__:",Ge=Ae.length,ht="arbf",Ct="blob",Se="si08",ue="ui08",Ve="uic8",st="si16",ge="si32",Ne="ur16",qe="ui32",Je="fl32",Et="fl64",wn=Ge+ht.length,vr=Object.prototype.toString;function br(Y){var se=Y.length*.75,Z=Y.length,pe,ye=0,de,Oe,He,We;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ye=new ArrayBuffer(se),ut=new Uint8Array(Ye);for(pe=0;pe<Z;pe+=4)de=Ke.indexOf(Y[pe]),Oe=Ke.indexOf(Y[pe+1]),He=Ke.indexOf(Y[pe+2]),We=Ke.indexOf(Y[pe+3]),ut[ye++]=de<<2|Oe>>4,ut[ye++]=(Oe&15)<<4|He>>2,ut[ye++]=(He&3)<<6|We&63;return Ye}function kr(Y){var se=new Uint8Array(Y),Z="",pe;for(pe=0;pe<se.length;pe+=3)Z+=Ke[se[pe]>>2],Z+=Ke[(se[pe]&3)<<4|se[pe+1]>>4],Z+=Ke[(se[pe+1]&15)<<2|se[pe+2]>>6],Z+=Ke[se[pe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function Kt(Y,se){var Z="";if(Y&&(Z=vr.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&vr.call(Y.buffer)==="[object ArrayBuffer]")){var pe,ye=Ae;Y instanceof ArrayBuffer?(pe=Y,ye+=ht):(pe=Y.buffer,Z==="[object Int8Array]"?ye+=Se:Z==="[object Uint8Array]"?ye+=ue:Z==="[object Uint8ClampedArray]"?ye+=Ve:Z==="[object Int16Array]"?ye+=st:Z==="[object Uint16Array]"?ye+=Ne:Z==="[object Int32Array]"?ye+=ge:Z==="[object Uint32Array]"?ye+=qe:Z==="[object Float32Array]"?ye+=Je:Z==="[object Float64Array]"?ye+=Et:se(new Error("Failed to get type for BinaryArray"))),se(ye+kr(pe))}else if(Z==="[object Blob]"){var de=new FileReader;de.onload=function(){var Oe=it+Y.type+"~"+kr(this.result);se(Ae+Ct+Oe)},de.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function Tn(Y){if(Y.substring(0,Ge)!==Ae)return JSON.parse(Y);var se=Y.substring(wn),Z=Y.substring(Ge,wn),pe;if(Z===Ct&&De.test(se)){var ye=se.match(De);pe=ye[1],se=se.substring(ye[0].length)}var de=br(se);switch(Z){case ht:return de;case Ct:return c([de],{type:pe});case Se:return new Int8Array(de);case ue:return new Uint8Array(de);case Ve:return new Uint8ClampedArray(de);case st:return new Int16Array(de);case Ne:return new Uint16Array(de);case ge:return new Int32Array(de);case qe:return new Uint32Array(de);case Je:return new Float32Array(de);case Et:return new Float64Array(de);default:throw new Error("Unkown type: "+Z)}}var tr={serialize:Kt,deserialize:Tn,stringToBuffer:br,bufferToString:kr};function nr(Y,se,Z,pe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,pe)}function Ho(Y){var se=this,Z={db:null};if(Y)for(var pe in Y)Z[pe]=typeof Y[pe]!="string"?Y[pe].toString():Y[pe];var ye=new f(function(de,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(He){return Oe(He)}Z.db.transaction(function(He){nr(He,Z,function(){se._dbInfo=Z,de()},function(We,Ye){Oe(Ye)})},Oe)});return Z.serializer=tr,ye}function Mi(Y,se,Z,pe,ye,de){Y.executeSql(Z,pe,ye,function(Oe,He){He.code===He.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(We,Ye){Ye.rows.length?de(We,He):nr(We,se,function(){We.executeSql(Z,pe,ye,de)},de)},de):de(Oe,He)},de)}function es(Y,se){var Z=this;Y=p(Y);var pe=new f(function(ye,de){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(He){Mi(He,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(We,Ye){var ut=Ye.rows.length?Ye.rows.item(0).value:null;ut&&(ut=Oe.serializer.deserialize(ut)),ye(ut)},function(We,Ye){de(Ye)})})}).catch(de)});return d(pe,se),pe}function Ln(Y,se){var Z=this,pe=new f(function(ye,de){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(He){Mi(He,Oe,"SELECT * FROM "+Oe.storeName,[],function(We,Ye){for(var ut=Ye.rows,wt=ut.length,gn=0;gn<wt;gn++){var Pt=ut.item(gn),jn=Pt.value;if(jn&&(jn=Oe.serializer.deserialize(jn)),jn=Y(jn,Pt.key,gn+1),jn!==void 0){ye(jn);return}}ye()},function(We,Ye){de(Ye)})})}).catch(de)});return d(pe,se),pe}function Hn(Y,se,Z,pe){var ye=this;Y=p(Y);var de=new f(function(Oe,He){ye.ready().then(function(){se===void 0&&(se=null);var We=se,Ye=ye._dbInfo;Ye.serializer.serialize(se,function(ut,wt){wt?He(wt):Ye.db.transaction(function(gn){Mi(gn,Ye,"INSERT OR REPLACE INTO "+Ye.storeName+" (key, value) VALUES (?, ?)",[Y,ut],function(){Oe(We)},function(Pt,jn){He(jn)})},function(gn){if(gn.code===gn.QUOTA_ERR){if(pe>0){Oe(Hn.apply(ye,[Y,We,Z,pe-1]));return}He(gn)}})})}).catch(He)});return d(de,Z),de}function hs(Y,se,Z){return Hn.apply(this,[Y,se,Z,1])}function op(Y,se){var Z=this;Y=p(Y);var pe=new f(function(ye,de){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(He){Mi(He,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ye()},function(We,Ye){de(Ye)})})}).catch(de)});return d(pe,se),pe}function ol(Y){var se=this,Z=new f(function(pe,ye){se.ready().then(function(){var de=se._dbInfo;de.db.transaction(function(Oe){Mi(Oe,de,"DELETE FROM "+de.storeName,[],function(){pe()},function(He,We){ye(We)})})}).catch(ye)});return d(Z,Y),Z}function wd(Y){var se=this,Z=new f(function(pe,ye){se.ready().then(function(){var de=se._dbInfo;de.db.transaction(function(Oe){Mi(Oe,de,"SELECT COUNT(key) as c FROM "+de.storeName,[],function(He,We){var Ye=We.rows.item(0).c;pe(Ye)},function(He,We){ye(We)})})}).catch(ye)});return d(Z,Y),Z}function Sr(Y,se){var Z=this,pe=new f(function(ye,de){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(He){Mi(He,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(We,Ye){var ut=Ye.rows.length?Ye.rows.item(0).key:null;ye(ut)},function(We,Ye){de(Ye)})})}).catch(de)});return d(pe,se),pe}function Si(Y){var se=this,Z=new f(function(pe,ye){se.ready().then(function(){var de=se._dbInfo;de.db.transaction(function(Oe){Mi(Oe,de,"SELECT key FROM "+de.storeName,[],function(He,We){for(var Ye=[],ut=0;ut<We.rows.length;ut++)Ye.push(We.rows.item(ut).key);pe(Ye)},function(He,We){ye(We)})})}).catch(ye)});return d(Z,Y),Z}function ai(Y){return new f(function(se,Z){Y.transaction(function(pe){pe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,de){for(var Oe=[],He=0;He<de.rows.length;He++)Oe.push(de.rows.item(He).name);se({db:Y,storeNames:Oe})},function(ye,de){Z(de)})},function(pe){Z(pe)})})}function cu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var pe=this,ye;return Y.name?ye=new f(function(de){var Oe;Y.name===Z.name?Oe=pe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?de({db:Oe,storeNames:[Y.storeName]}):de(ai(Oe))}).then(function(de){return new f(function(Oe,He){de.db.transaction(function(We){function Ye(Pt){return new f(function(jn,Nr){We.executeSql("DROP TABLE IF EXISTS "+Pt,[],function(){jn()},function(Pr,Wo){Nr(Wo)})})}for(var ut=[],wt=0,gn=de.storeNames.length;wt<gn;wt++)ut.push(Ye(de.storeNames[wt]));f.all(ut).then(function(){Oe()}).catch(function(Pt){He(Pt)})},function(We){He(We)})})}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Ia={_driver:"webSQLStorage",_initStorage:Ho,_support:ze(),iterate:Ln,getItem:es,setItem:hs,removeItem:op,clear:ol,length:wd,key:Sr,keys:Si,dropInstance:cu};function ka(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Te(Y){var se=this,Z={};if(Y)for(var pe in Y)Z[pe]=Y[pe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=tr,f.resolve()):f.reject()}function Ce(Y){var se=this,Z=se.ready().then(function(){for(var pe=se._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var de=localStorage.key(ye);de.indexOf(pe)===0&&localStorage.removeItem(de)}});return d(Z,Y),Z}function lt(Y,se){var Z=this;Y=p(Y);var pe=Z.ready().then(function(){var ye=Z._dbInfo,de=localStorage.getItem(ye.keyPrefix+Y);return de&&(de=ye.serializer.deserialize(de)),de});return d(pe,se),pe}function St(Y,se){var Z=this,pe=Z.ready().then(function(){for(var ye=Z._dbInfo,de=ye.keyPrefix,Oe=de.length,He=localStorage.length,We=1,Ye=0;Ye<He;Ye++){var ut=localStorage.key(Ye);if(ut.indexOf(de)===0){var wt=localStorage.getItem(ut);if(wt&&(wt=ye.serializer.deserialize(wt)),wt=Y(wt,ut.substring(Oe),We++),wt!==void 0)return wt}}});return d(pe,se),pe}function Xt(Y,se){var Z=this,pe=Z.ready().then(function(){var ye=Z._dbInfo,de;try{de=localStorage.key(Y)}catch{de=null}return de&&(de=de.substring(ye.keyPrefix.length)),de});return d(pe,se),pe}function Pn(Y){var se=this,Z=se.ready().then(function(){for(var pe=se._dbInfo,ye=localStorage.length,de=[],Oe=0;Oe<ye;Oe++){var He=localStorage.key(Oe);He.indexOf(pe.keyPrefix)===0&&de.push(He.substring(pe.keyPrefix.length))}return de});return d(Z,Y),Z}function Fn(Y){var se=this,Z=se.keys().then(function(pe){return pe.length});return d(Z,Y),Z}function mn(Y,se){var Z=this;Y=p(Y);var pe=Z.ready().then(function(){var ye=Z._dbInfo;localStorage.removeItem(ye.keyPrefix+Y)});return d(pe,se),pe}function rr(Y,se,Z){var pe=this;Y=p(Y);var ye=pe.ready().then(function(){se===void 0&&(se=null);var de=se;return new f(function(Oe,He){var We=pe._dbInfo;We.serializer.serialize(se,function(Ye,ut){if(ut)He(ut);else try{localStorage.setItem(We.keyPrefix+Y,Ye),Oe(de)}catch(wt){(wt.name==="QuotaExceededError"||wt.name==="NS_ERROR_DOM_QUOTA_REACHED")&&He(wt),He(wt)}})})});return d(ye,Z),ye}function Rr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var pe=this,ye;return Y.name?ye=new f(function(de){Y.storeName?de(oe(Y,pe._defaultConfig)):de(Y.name+"/")}).then(function(de){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var He=localStorage.key(Oe);He.indexOf(de)===0&&localStorage.removeItem(He)}}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Vt={_driver:"localStorageWrapper",_initStorage:Te,_support:ka(),iterate:St,getItem:lt,setItem:rr,removeItem:mn,clear:Ce,length:Fn,key:Xt,keys:Pn,dropInstance:Rr},ir=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Hr=function(se,Z){for(var pe=se.length,ye=0;ye<pe;){if(ir(se[ye],Z))return!0;ye++}return!1},Xn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Ti={},Ys={},Xr={INDEXEDDB:ct,WEBSQL:Ia,LOCALSTORAGE:Vt},go=[Xr.INDEXEDDB._driver,Xr.WEBSQL._driver,Xr.LOCALSTORAGE._driver],Li=["dropInstance"],Fi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Li),qo={description:"",driver:go.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ra(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Ks(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Xn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var Jl=function(){function Y(se){o(this,Y);for(var Z in Xr)if(Xr.hasOwnProperty(Z)){var pe=Xr[Z],ye=pe._driver;this[Z]=ye,Ti[ye]||this.defineDriver(pe)}this._defaultConfig=Ks({},qo),this._config=Ks({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var pe in Z){if(pe==="storeName"&&(Z[pe]=Z[pe].replace(/\W/g,"_")),pe==="version"&&typeof Z[pe]!="number")return new Error("Database version must be a number.");this._config[pe]=Z[pe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,pe,ye){var de=new f(function(Oe,He){try{var We=Z._driver,Ye=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){He(Ye);return}for(var ut=Fi.concat("_initStorage"),wt=0,gn=ut.length;wt<gn;wt++){var Pt=ut[wt],jn=!Hr(Li,Pt);if((jn||Z[Pt])&&typeof Z[Pt]!="function"){He(Ye);return}}var Nr=function(){for(var xd=function(Zl){return function(){var fu=new Error("Method "+Zl+" is not implemented by the current driver"),up=f.reject(fu);return d(up,arguments[arguments.length-1]),up}},ap=0,FS=Li.length;ap<FS;ap++){var qy=Li[ap];Z[qy]||(Z[qy]=xd(qy))}};Nr();var Pr=function(xd){Ti[We]&&console.info("Redefining LocalForage driver: "+We),Ti[We]=Z,Ys[We]=xd,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Pr,He):Pr(!!Z._support):Pr(!0)}catch(Wo){He(Wo)}});return h(de,pe,ye),de},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,pe,ye){var de=Ti[Z]?f.resolve(Ti[Z]):f.reject(new Error("Driver not found."));return h(de,pe,ye),de},Y.prototype.getSerializer=function(Z){var pe=f.resolve(tr);return h(pe,Z),pe},Y.prototype.ready=function(Z){var pe=this,ye=pe._driverSet.then(function(){return pe._ready===null&&(pe._ready=pe._initDriver()),pe._ready});return h(ye,Z,Z),ye},Y.prototype.setDriver=function(Z,pe,ye){var de=this;Xn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function He(){de._config.driver=de.driver()}function We(wt){return de._extend(wt),He(),de._ready=de._initStorage(de._config),de._ready}function Ye(wt){return function(){var gn=0;function Pt(){for(;gn<wt.length;){var jn=wt[gn];return gn++,de._dbInfo=null,de._ready=null,de.getDriver(jn).then(We).catch(Pt)}He();var Nr=new Error("No available storage method found.");return de._driverSet=f.reject(Nr),de._driverSet}return Pt()}}var ut=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=ut.then(function(){var wt=Oe[0];return de._dbInfo=null,de._ready=null,de.getDriver(wt).then(function(gn){de._driver=gn._driver,He(),de._wrapLibraryMethodsWithReady(),de._initDriver=Ye(Oe)})}).catch(function(){He();var wt=new Error("No available storage method found.");return de._driverSet=f.reject(wt),de._driverSet}),h(this._driverSet,pe,ye),this._driverSet},Y.prototype.supports=function(Z){return!!Ys[Z]},Y.prototype._extend=function(Z){Ks(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var pe=[],ye=0,de=Z.length;ye<de;ye++){var Oe=Z[ye];this.supports(Oe)&&pe.push(Oe)}return pe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,pe=Fi.length;Z<pe;Z++)Ra(this,Fi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),Ed=new Jl;r.exports=Ed},{3:3}]},{},[4])(4)})})(DDe);var J$t=DDe.exports;const B_=nl(J$t);class ODe{constructor(t){hu(this,"engine");hu(this,"connected",!1);hu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function $$(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function wT(e){return e.participantId!==void 0}class hc extends ODe{constructor(){super("firebase");hu(this,"RECAPTCHAV3TOKEN","6LeSJBYqAAAAADYgJYYVaLhVACl5Jy1sidBF7BsC");hu(this,"firestore");hu(this,"collectionPrefix","prod-");hu(this,"studyCollection");hu(this,"storage");hu(this,"studyId","");hu(this,"localForage",B_.createInstance({name:"currentParticipantId"}));hu(this,"participantData",null);const n=BY.parse(`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`),r=JRe(n);this.firestore=Y3t(r,{}),this.storage=d_();try{Y$t(r,{provider:new nZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async saveAllParticipantAndTaskTags(n){const r=zf(n);Object.values(r).forEach(o=>{o.partTags=o.partTags.map(a=>a.id),Object.values(o.taskTags).forEach(a=>{a=a.map(u=>u.id)})});const i=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),s=new Blob([JSON.stringify(r)],{type:"application/json"});await Zy(i,s)}async getAllParticipantAndTaskTags(){const n=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/_participantTags`),r=await this._getFromFirebaseStorageByRef(n,"config"),i=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/participant/tags`),s=await this._getFromFirebaseStorageByRef(i,"config"),o=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/task/tags`),a=await this._getFromFirebaseStorageByRef(o,"config");return Object.values(r).forEach(u=>{u.partTags=u.partTags.map(l=>s?s.find(c=>c.id===l):l),Object.values(u.taskTags).forEach(l=>{l=l.map(c=>a?a.find(f=>f.id===c):c)})}),Promise.resolve(r)}async saveTags(n,r){const i=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${r}/tags`),s=new Blob([JSON.stringify(n)],{type:"application/json"});await Zy(i,s)}async getTags(n){const r=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/${n}/tags`),i=await this._getFromFirebaseStorageByRef(r,"config");return Array.isArray(i)?Promise.resolve(i):Promise.resolve([])}async saveEditedTranscript(n,r,i,s){const o=s.map(l=>({...l,selectedTags:l.selectedTags.filter(c=>c!==void 0).map(c=>c.id)})),a=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),u=new Blob([JSON.stringify(o)],{type:"application/json"});await Zy(a,u)}async getEditedTranscript(n,r,i){const s=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/${r}/${n}/${i}`),o=await this._getFromFirebaseStorageByRef(s,"config");if(!Array.isArray(o))return[];const a=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/transcriptAndTags/tags/text/tags`),u=await this._getFromFirebaseStorageByRef(a,"config"),l=o.map(c=>({...c,selectedTags:c.selectedTags.map(f=>u.find(d=>f===d.id))}));return Promise.resolve(l)}async connect(){try{await K3t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=I$();if(!i.currentUser&&(await xRt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await $$(JSON.stringify(r));if(this.studyCollection=af(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async _getFirebaseProvenance(n){const r=d_(),i=Qr(r,`${this.studyId}/${n}_provenance`);let s={};try{const o=await ev(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async _getFirebaseWindowEvents(n){const r=d_(),i=Qr(r,`${this.studyId}/${n}_windowEvents`);let s={};try{const o=await ev(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`Participant ${n} does not have a provenance graph for ${this.studyId}.`)}return s}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(wT(a))return this.participantData=a,a;const l=await $$(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=Qr(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=zA(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async saveAudio(n,r){n.addEventListener("dataavailable",i=>{const s=d_(),o=Qr(s,`${this.studyId}/audio/${this.currentParticipantId}_${r}`);Zy(o,i.data).then(()=>{console.warn("Uploaded a blob or file!")})}),n.stop(),n.stream.getTracks().forEach(i=>i.stop())}async getAudio(n,r){const i=d_(),s=await Promise.all(n.map(async a=>await ev(Qr(i,`${this.studyId}/audio/${r}_${a}`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{const c=l.response,f=URL.createObjectURL(c);u(f)},l.open("GET",a),l.send()})))}async getTranscription(n,r){const i=d_(),s=await Promise.all(n.map(async a=>await ev(Qr(i,`${this.studyId}/audio/${r}_${a}.wav_transcription.txt`))));return Promise.all(s.map(a=>new Promise(u=>{const l=new XMLHttpRequest;l.responseType="blob",l.onload=()=>{l.response.text().then(f=>{u(f)})},l.open("GET",a),l.send()})))}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.getSequenceArray();if(!r)throw new Error("Latin square not initialized");const i=await this.getModes(this.studyId),s=As(this.studyCollection,"sequenceAssignment");await ul(s,{});const o=af(s,"sequenceAssignment"),a=As(o,this.currentParticipantId),u=Rhe(o,r$t("participantId","==","")),l=await _T(u);if(l.docs.length>0){const g=l.docs[0],y=g.data().timestamp;i.dataCollectionEnabled&&(await l$t(g.ref),await ul(a,{participantId:this.currentParticipantId,timestamp:y}))}else i.dataCollectionEnabled&&await ul(a,{participantId:this.currentParticipantId,timestamp:d$t()});const c=Rhe(o,i$t("timestamp","asc")),h=(await _T(c)).docs.map(g=>g.data()).findIndex(g=>g.participantId===n||this.currentParticipantId)%r.length,p=h===-1?Math.floor(Math.random()*r.length-1):h,m=r[p];if(!m)throw new Error("Latin square is empty");return m}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await vT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");wT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const r=await this._getFromFirebaseStorage(`participants/${n||this.currentParticipantId}`,"participantData");return wT(r)?r:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=zA();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=af(this.firestore,"user-management"),i=await _T(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await ul(As(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await ul(As(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await ul(As(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await ul(As(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await ul(As(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=Qr(this.storage,`${this.collectionPrefix}${n}/participants`),i=await vT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");wT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=af(this.firestore,`${this.collectionPrefix}${n}`),s=Qr(this.storage,`${this.collectionPrefix}${n}/participants/${r}`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!wT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=As(i,"sequenceAssignment"),u=af(a,"sequenceAssignment"),l=As(u,r);await u$t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=As(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await ul(s,{[r]:i},{merge:!0})}async getModes(n){const r=As(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await d9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await ul(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),!1;const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;return await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h),r&&await this.removeSnapshotOrLive(i,!1),!0}async removeSnapshotOrLive(n,r){const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i)}async getSnapshots(n){try{const r=As(this.firestore,"metadata","collections"),i=await d9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(a=>a.startsWith(`${this.collectionPrefix}${n}-snapshot`)).sort().reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;await this.createSnapshot(n,!0),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i)}async _addDirectoryNameToMetadata(n){try{const r=As(this.firestore,"metadata","collections");await ul(r,{[n]:!0},{merge:!0})}catch(r){console.error("Error adding collection to metadata:",r)}}async _removeNameFromMetadata(n){try{const r=As(this.firestore,"metadata","collections"),i=await d9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await ul(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=Qr(this.storage,n),s=(await vT(r)).items.map(o=>Gde(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=Qr(this.storage,n),o=(await vT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=Qr(this.storage,n),s=Qr(this.storage,r),o=await ev(i),u=await(await fetch(o)).blob();await Zy(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=af(this.firestore,n),s=As(i,"sequenceAssignment"),o=af(s,"sequenceAssignment"),a=af(this.firestore,r),u=As(a,"sequenceAssignment");await ul(u,{});const l=af(u,"sequenceAssignment"),c=await _T(o),f=Dhe(this.firestore);c.docs.forEach(d=>{const h=As(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=af(this.firestore,n),i=As(r,"sequenceAssignment"),s=af(i,"sequenceAssignment"),o=await _T(s),a=Dhe(this.firestore);o.forEach(u=>{const l=As(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=Qr(this.storage,n);return(await vT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await ev(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await ev(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await Zy(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await Zy(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=Qr(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await Gde(i)}}const $De=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Ny=()=>I.useContext($De);function Z$t({children:e}){const t={user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1},n={user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},r={user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0},[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=Di(),l=async()=>{const h=I$();try{await RRt(h)}catch(p){console.error(`There was an issue signing-out the user: ${p.message}`)}finally{s(n)}},c=()=>{a(!0)},f=async h=>u?await u.validateUser(h):!1;I.useEffect(()=>{s(t);let h;if(u instanceof hc)try{h=I$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof hc){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=kRt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i]);return _.jsx($De.Provider,{value:d,children:i.determiningStatus?_.jsx(Dc,{visible:!0}):e})}async function eMt(e){return e?await e.getTags("text"):[]}function tMt({participant:e,playTime:t,setTranscriptLines:n,currentShownTranscription:r,setCurrentShownTranscription:i,transcriptList:s,setTranscriptList:o}){var O;const[a,u]=I.useState(null),l=Ny(),{trrackId:c,studyId:f,index:d}=Eh(),h=zh(),p=d?h:null,{storageEngine:m}=Di(),{value:g,execute:y}=Hv(eMt,[m]),v=I.useCallback(P=>{m&&m.saveTags(P,"text").then(()=>y(m))},[y,m]),b=Qf(),w=I.useRef([]),E=I.useMemo(()=>!p||!e?null:Object.keys(e.answers).find(P=>P.startsWith(p))||null,[e,p]),S=M_((P,$)=>{const L=[...s];L[P].text=$,o(L)}),T=M_((P,$)=>{const L=[...s];L[P].selectedTags=$,o(L)}),C=M_((P,$)=>{const L=[...s];L[P].annotation=$,o(L)}),A=M_(P=>{if(P===0)return;const $=structuredClone(s);$[P-1].text=s[P-1].text+s[P].text,$[P-1].transcriptMappingEnd=s[P].transcriptMappingEnd,$[P-1].selectedTags=[...s[P-1].selectedTags,...s[P].selectedTags.filter(L=>!s[P-1].selectedTags.find(M=>M.id===L.id))],$.splice(P,1),$.filter(L=>L.transcriptMappingStart===$[P-1].transcriptMappingStart).forEach(L=>{L.transcriptMappingEnd=$[P-1].transcriptMappingEnd}),o($),setTimeout(()=>{w.current[P-1].focus(),w.current[P-1].setSelectionRange(s[P-1].text.length,s[P-1].text.length,"none")})}),N=M_((P,$)=>{const L=structuredClone(s),M=L[P];L.splice(P+1,0,{transcriptMappingEnd:M.transcriptMappingEnd,transcriptMappingStart:M.transcriptMappingStart,text:M.text.slice($),selectedTags:M.selectedTags,annotation:""}),L[P].text=L[P].text.slice(0,$),o(L),setTimeout(()=>{w.current[P+1].focus(),w.current[P+1].setSelectionRange(0,0)})});I.useEffect(()=>{const P=[];a&&s.length>a.results.length||(s.forEach(($,L)=>{a&&(L===0||$.transcriptMappingStart!==s[L-1].transcriptMappingStart)&&P.push({start:L===0?0:a.results[$.transcriptMappingStart-1].resultEndTime,end:a.results[$.transcriptMappingEnd].resultEndTime,lineStart:$.transcriptMappingStart,lineEnd:$.transcriptMappingEnd,tags:s.filter(M=>M.transcriptMappingStart===$.transcriptMappingStart&&M.transcriptMappingEnd===$.transcriptMappingEnd).map(M=>M.selectedTags)})}),n(P))},[s,n,a]),I.useEffect(()=>{f&&c&&e&&(m==null||m.getTranscription(kl(e.sequence).filter(P=>b.tasksToNotRecordAudio===void 0||!b.tasksToNotRecordAudio.includes(P)).filter(P=>p?P===p:!0),c).then(P=>{const $=P.map(U=>JSON.parse(U));let L=0;const M=$.map(U=>{const B=U.results.map(V=>({...V,resultEndTime:+V.resultEndTime.split("s")[0]+L}));return L+=+U.results[U.results.length-1].resultEndTime.split("s")[0],B}).flat();u({results:M}),s.length===0&&o(M.map((U,B)=>{var V;return{transcriptMappingStart:B,transcriptMappingEnd:B,text:((V=U.alternatives[0].transcript)==null?void 0:V.trim())||"",selectedTags:[],annotation:""}})),i(0)}))},[m,f,c,b.tasksToNotRecordAudio,e,p,o,i,s.length]),I.useEffect(()=>{if(a&&r!==null&&e&&t>0){let P=r;const $=E?e.answers[E].startTime:e.answers.audioTest.startTime,L=Math.abs(t-$)/1e3;if(L>a.results[P].resultEndTime){for(;L>a.results[P].resultEndTime;)if(P+=1,P>a.results.length-1){P=a.results.length-1;break}}else if(P>0&&L<a.results[P-1].resultEndTime)for(;P>0&&L<a.results[P-1].resultEndTime;)P-=1;if(r===P)return;i(P)}},[r,e,t,i,a,E]);const k=I.useCallback((P,$)=>{if(!g)return;const L=g.findIndex(B=>B.id===P.id),M=Array.from(g);M[L]=$;const U=Array.from(s);U.forEach(B=>{B.selectedTags=B.selectedTags.map(V=>V.id===P.id?$:V)}),o(U),v(M)},[v,o,g,s]);return _.jsxs(ro,{gap:0,children:[_.jsxs(mr,{mb:"sm",justify:"space-between",wrap:"nowrap",children:[_.jsx(et,{style:{flexGrow:1,textAlign:"center"},children:"Transcript"}),_.jsx(oIt,{createTagCallback:P=>{v([...g||[],P])},editTagCallback:k,tags:g||[],email:((O=l.user.user)==null?void 0:O.email)||""})]}),_.jsx(ro,{gap:5,children:g?s.map((P,$)=>_.jsx(tIt,{annotation:P.annotation,setAnnotation:L=>C($,L),addRef:L=>{w.current[$]=L},onSelectTags:L=>T($,L),addRowCallback:L=>N($,L),deleteRowCallback:()=>A($),onTextChange:L=>S($,L),tags:g,selectedTags:P.selectedTags,text:P.text,start:P.transcriptMappingStart,end:P.transcriptMappingEnd,current:r===null?0:r},$)):_.jsx(ju,{})})]})}const m9={left:5,top:0,right:5,bottom:0};function nMt(e,t){return t?t.getParticipantData(e):null}async function rMt(e,t,n,r){return e&&t&&n&&r?await e.getEditedTranscript(t,r,n):null}async function iMt(e,t){return t&&e?await t.getAllParticipantAndTaskTags():null}async function sMt(e,t){return e?await e.getTags(t):[]}const Bhe=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],Uhe=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function MDe({mini:e}){var ht,Ct;const{trrackId:t,index:n}=Eh(),r=zh(),i=Ny(),s=I.useMemo(()=>n?r:null,[r,n]),{storageEngine:o}=Di(),[a,u]=I.useState(0),[l,{width:c}]=KM(),[f,d]=I.useState(null),{value:h,status:p}=Hv(nMt,[t,o]),{value:m,execute:g}=Hv(iMt,[t,o]),{saveAnalysisState:y}=Fl(),v=Oc(),[b,w]=I.useState(!1),[E,S]=_Ue(0,50),T=I.useRef(null),C=Qf(),A=Kl(),{analysisTrialName:N,analysisWaveformTime:k}=Fo(Se=>Se),{setAnalysisTrialName:O,setAnalysisParticipantName:P,setAnalysisWaveformTime:$}=Fl(),{value:L,execute:M}=Hv(sMt,[o,"task"]),[U,B]=I.useState(!0),V=I.useRef(null),[D,z]=I.useState([]),[W,j]=I.useState(null),q=I.useMemo(()=>o&&t&&r?pf(Se=>{var ue;return o.saveEditedTranscript(t,((ue=i.user.user)==null?void 0:ue.email)||"temp",r,Se)},1e3,{maxWait:5e3}):Se=>null,[r,(ht=i.user.user)==null?void 0:ht.email,o,t]),G=I.useCallback(Se=>{j(Se),q(Se)},[q]),{value:te,status:ve}=Hv(rMt,[o,h==null?void 0:h.participantId,r,(Ct=i.user.user)==null?void 0:Ct.email]);I.useEffect(()=>{j(te&&ve==="success"?te:null)},[te,ve]);const he=I.useMemo(()=>[...Bhe,...Uhe],[]),ce=I.useMemo(()=>!s||!h?null:Object.keys(h.answers).find(Se=>Se.startsWith(s))||null,[h,s]);I.useEffect(()=>{if(ce&&h){const Se=RA.create(),ue=bz({registry:Se,initialState:{}});h.answers[ce].provenanceGraph&&(ue.importObject(zf(h.answers[ce].provenanceGraph)),V.current=ue)}},[h,ce]);const me=I.useCallback(Se=>{var ue;Se&&(ce&&h&&V.current&&(v(y(V.current.getState((ue=h.answers[ce].provenanceGraph)==null?void 0:ue.nodes[Se]))),V.current.to(Se)),d(Se))},[h,y,v,ce]),Le=I.useCallback(Se=>{var ue;if(!e){v(O(Se)),v(y(null)),u(0);const Ve=h?Object.keys(h.answers).find(st=>st.startsWith(Se)):"";if(h&&Ve&&h.answers[Ve].provenanceGraph){const st=RA.create(),ge=bz({registry:st,initialState:{}});ge.importObject(zf(h.answers[Ve].provenanceGraph)),V.current=ge,me(((ue=h.answers[Ve].provenanceGraph)==null?void 0:ue.root)||"")}else v(y(null)),d(null),V.current=null}},[me,e,h,y,O,v]);I.useEffect(()=>{s&&Le(s)},[Le,s]);const fe=M_((Se,ue=!0)=>{if(h&&s&&ce&&(h.answers[ce].endTime-h.answers.audioTest_2.startTime)/1e3<Se){const Ve=kl(h.sequence);Le(Ve[Ve.indexOf(s)+1])}else h&&s&&V.current&&V.current.current.children.length>0&&(V.current.graph.backend.nodes[V.current.current.children[0]].createdOn-h.answers.audioTest_2.startTime)/1e3<Se&&me(V.current.current.children[0]);if(h&&s){const Ve=ce?h.answers[ce].startTime:h.answers.audioTest_2.startTime;S(Se*1e3+Ve)}ue&&v($(Se))}),ct=I.useCallback(Se=>{if(Se&&h&&t){const ue=new WAt;o==null||o.getAudio(kl(h.sequence).filter(Ve=>C.tasksToNotRecordAudio===void 0||!C.tasksToNotRecordAudio.includes(Ve)).filter(Ve=>s?Ve===s:!0),t).then(Ve=>{Se&&ue.fetchAudio(...Ve).then(st=>ue.concatAudio(st)).then(st=>ue.export(st,"audio/mp3")).then(st=>Se.loadBlob(st.blob).then(()=>{B(!1)})).catch(st=>{throw new Error(st)}),Se.on("timeupdate",fe)})}},[C.tasksToNotRecordAudio,h,o,fe,s,t]),ze=I.useMemo(()=>[],[]),Ke=DSe({container:T.current,plugins:ze,onMount:ct,progressColor:"cornflowerblue",waveColor:"lightgray"}),it=I.useCallback((Se,ue)=>{S(Se),Ke&&ue&&setTimeout(()=>{Ke.seekTo(ue)})},[S,Ke]),De=I.useCallback(Se=>{w(Se),Ke&&(Se?Ke.play():Ke.pause())},[Ke]);I.useEffect(()=>{fe(k,!1),Ke&&Math.abs(Ke.getCurrentTime()-k)>.8&&setTimeout(()=>{Ke.setTime(k)})},[k,fe,Ke]);const Ae=I.useMemo(()=>{if(!h)return null;const Se=Object.values(h.answers||{}).map(st=>[st.startTime,st.endTime]).flat(),ue=k1(Se);return wb([m9.left,c+m9.left+m9.right]).domain(ce?[h.answers[ce].startTime,h.answers[ce].endTime]:ue).clamp(!0)},[h,ce,c]);I.useEffect(()=>{ct(Ke)},[ct,h,Ke]),I.useCallback(Se=>{var ue;if(Se&&ce&&h&&V.current&&Ae){const Ve=h.answers[ce].provenanceGraph.nodes[Se];v(y(V.current.getState((ue=h.answers[ce].provenanceGraph)==null?void 0:ue.nodes[Se]))),V.current.to(Se);const st=Ae.domain()[1]-Ae.domain()[0];it(Ve.createdOn+1,(Ve.createdOn-Ae.domain()[0])/st)}},[it,h,y,v,ce,Ae]);const Ge=I.useCallback(Se=>{if(!h)return;const ue=he.indexOf(h.participantId);Se?A(`../../${s?"../":""}${he[ue+1]}/ui/reviewer-${s||""}`,{relative:"path"}):A(`../../${s?"../":""}${he[ue-1]}/ui/reviewer-${s||""}`,{relative:"path"})},[he,A,h,s]);return _.jsx(mr,{wrap:"nowrap",gap:25,children:_.jsxs(ro,{ref:l,style:{width:"100%"},gap:e?0:25,children:[e?null:_.jsx($l,{children:_.jsxs(mr,{children:[_.jsx(jf,{children:_.jsx(SXe,{onClick:()=>Ge(!1)})}),_.jsx(pE,{style:{width:"300px"},value:h==null?void 0:h.participantId,onChange:Se=>{v(P(Se)),A(`../../${s?"../":""}${Se}/ui/reviewer-${s||""}`,{relative:"path"})},data:[...Bhe,...Uhe]}),_.jsx(pE,{style:{width:"300px"},clearable:!0,value:s,data:h?[...kl(h.sequence)]:[],onChange:Se=>A(`${s?"../":""}reviewer-${Se||""}`,{relative:"path"})}),_.jsx(jf,{children:_.jsx(TXe,{onClick:()=>Ge(!0)})})]})}),p==="success"&&h&&Ae?e?null:_.jsx(zRe,{trialFilter:ce,xScale:Ae,setSelectedTask:Le,participantData:h,width:c,height:200}):e?null:_.jsx($l,{style:{height:"275px"},children:_.jsx(ju,{})}),Ae&&h!==null?_.jsxs(_.Fragment,{children:[_.jsxs(be,{ref:T,ml:h&&Ae?Ae(h.answers.audioTest_2.startTime):0,mr:h&&Ae?Ae(h.answers["post-study-survey_13"].startTime):0,style:{overflow:"visible",width:`${h&&!s?Ae(h.answers["post-study-survey_13"].startTime)-Ae(h.answers.audioTest_2.startTime):Ae.range()[1]-Ae.range()[0]}px`},children:[_.jsx(kSe.Provider,{value:Ke,children:_.jsx(NK,{id:"waveform"})}),U?_.jsx(ju,{}):null]}),e?null:_.jsx(ZAt,{startTime:s?Ae.domain()[0]:h.answers.audioTest_2.startTime,xScale:Ae,transcriptLines:D,currentShownTranscription:a})]}):null,p==="success"&&h&&Ae?_.jsx(JAt,{xScale:Ae,setSelectedTask:Le,playTime:E-h.answers.introduction_0.startTime,setPlayTime:it,isPlaying:b,setIsPlaying:De,currentNode:f,setCurrentNode:me,participantData:h,width:c,height:50}):null,_.jsxs(mr,{align:"center",justify:"center",children:[_.jsx(jf,{variant:"light",size:50,onClick:()=>De(!b),children:b?_.jsx(WXe,{}):_.jsx(GXe,{})}),L&&m&&s&&t?_.jsx(VRe,{tags:L||[],onSelectTags:Se=>{if(o&&m){const ue=zf(m);ue[t]||(ue[t]={partTags:[],taskTags:{}}),ue[t].taskTags[s]=Se,o.saveAllParticipantAndTaskTags(ue).then(()=>{g(t,o)})}},selectedTags:m&&m[t]?m[t].taskTags[s]||[]:[]}):null]}),s?_.jsx(ro,{children:h&&te&&ve==="success"&&W&&!e?_.jsx(tMt,{transcriptList:W,setTranscriptList:G,setCurrentShownTranscription:u,currentShownTranscription:a,participant:h,playTime:E,setTranscriptLines:z}):e?null:_.jsx(ju,{})}):null]})})}const zhe=Object.assign({"../public/viz-guardrails/AudioTest.tsx":Oht,"../public/viz-guardrails/Color.tsx":$ht,"../public/viz-guardrails/DataExplorer.tsx":zAt,"../public/viz-guardrails/Help.tsx":HAt,"../public/viz-guardrails/LineChart.tsx":z_t,"../public/viz-guardrails/RangeSelector.tsx":H_t,"../public/viz-guardrails/Selector.tsx":q_t,"../public/viz-guardrails/Sidebar.tsx":V_t,"../public/viz-guardrails/StripPlot.tsx":UAt,"../public/viz-guardrails/XAxis.tsx":B_t,"../public/viz-guardrails/YAxis.tsx":U_t});function oMt({currentConfig:e,provState:t}){const n=jm(),r=zh(),i=`../public/${e.path}`,s=i in zhe?zhe[i].default:null,o=Oc(),{updateResponseBlockValidation:a,setIframeAnswers:u}=Fl(),l=I.useCallback(({status:c,provenanceGraph:f,answers:d})=>{o(a({location:"sidebar",identifier:`${r}_${n}`,status:c,values:d,provenanceGraph:f})),o(u(d))},[o,a,r,n,u]);return _.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[s?_.jsx(s,{parameters:e.parameters,setAnswer:l,provenanceState:t}):_.jsx(JI,{path:e.path}),n.toString().startsWith("reviewer-")?_.jsx(pr.Footer,{p:"md",children:_.jsx(MDe,{mini:!0})}):null]})}function Vhe({provState:e}){var A;const t=Qf(),n=Di(),r=jm(),i=zh()||"Notfound",s=t.components[i],o=FY(),a=s&&n6(s)&&t.baseComponents?MY({},(A=t.baseComponents)==null?void 0:A[s.baseComponent],s):s,u=(a==null?void 0:a.instruction)||"",l=a==null?void 0:a.instructionLocation,c=t.uiConfig.sidebar&&(l==="sidebar"||l===void 0),[f,d]=I.useState(null),h=Oc(),{setIsRecording:p}=Fl(),{analysisTrialName:m,analysisProvState:g,analysisParticipantName:y}=Fo(N=>N),{trrackId:v}=Eh(),b=Kl(),[w,E]=I.useState(null);I.useEffect(()=>{i&&m&&v&&(i!==m||v!==y)&&b(`../../${y||v}/reviewer-${m}`,{relative:"path"})},[y,g,m,i,r,b,v]),I.useEffect(()=>{!r||!t||!t.recordStudyAudio||!n.storageEngine||(f&&w&&n.storageEngine.saveAudio(f,w),s&&!s.recordAudio?(f==null||f.stop(),E(null),d(null),h(p(!1))):(navigator.mediaDevices.getUserMedia({audio:!0}).then(k=>{const O=new MediaRecorder(k);O.start(),d(O),h(p(!0))}),E(i)))},[i]),wSe();const{storageEngine:S}=Di(),T=Oc(),{setAlertModal:C}=Fl();return I.useEffect(()=>{(S==null?void 0:S.getEngine())!=="firebase"&&T(C({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[C,S,T]),i==="end"?_.jsx(xSe,{}):i==="Notfound"?_.jsx(JI,{email:t.uiConfig.contactEmail}):_.jsxs(_.Fragment,{children:[l==="aboveStimulus"&&_.jsx(Xa,{text:u}),_.jsx(QO,{status:o,config:a,location:"aboveStimulus"},`${r}-above-response-block`),_.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[a.type==="markdown"&&_.jsx(Fat,{currentConfig:a}),a.type==="website"&&_.jsx($at,{currentConfig:a}),a.type==="image"&&_.jsx(Lat,{currentConfig:a}),a.type==="react-component"&&_.jsx(oMt,{currentConfig:a,provState:g})]},`${r}-stimulus`),(l==="belowStimulus"||l===void 0&&!c)&&_.jsx(Xa,{text:u}),_.jsx(QO,{status:o,config:a,location:"belowStimulus"},`${r}-below-response-block`)]})}function EV(e){const[t]=ZG();return _.jsx(JG,{...e,to:{pathname:e.to,search:t.toString()}})}function aMt(e,t=!1){return typeof e=="number"?Hhe(e,t):Hhe(e.length,t).map(r=>r.map(i=>e[i]))}function Hhe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function LDe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=LDe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function uMt(e,t){const n=zf(e);return LDe(n,t,"root")}function FDe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&FDe(s,t,i,o)})}function lMt(e){const t=[];return FDe(e,t,"",0),t}function qhe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return aMt(i.sort(()=>.5-Math.random()),!0)}function cMt(e){const n=lMt(e.sequence).map(s=>({[s]:qhe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=uMt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=qhe(e,o))})}),i}function jDe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=jDe(o,t,n,r),r.includes(o.orderPath))break}return i}function BDe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=BDe(s,r)}}),n}function fMt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function dMt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,subSequence:s,participantView:o}){const a=vb(),u=Kl(),l=jm(),c=Qf(),[f,{close:d,open:h}]=n1(!1),p=e in c.components&&c.components[e],m=s&&s.components.slice(r).includes(e)?jDe(n,e,r,s.orderPath):-1,g=o?l===m:l===`reviewer-${e}`;return _.jsxs(xn,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:f,offset:20,children:[_.jsx(xn.Target,{children:_.jsx(be,{onMouseEnter:h,onMouseLeave:d,children:_.jsx(TL,{active:g,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(be,{children:[i&&_.jsx(IXe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),g?_.jsx(et,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(et,{size:"sm",display:"inline",children:e})]}),onClick:()=>u(o?`/${a}/${m}`:`/${a}/reviewer-${e}`),disabled:t})})}),p&&(p.description||p.meta)&&_.jsx(xn.Dropdown,{onMouseLeave:d,children:_.jsx(et,{size:"sm",children:_.jsxs(be,{children:[p.description&&_.jsxs(be,{children:[_.jsx(et,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(et,{fw:400,component:"span",children:p.description})]}),p.meta&&_.jsxs(et,{children:[_.jsx(et,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(et,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(p.meta,null,2)}`})]})]})})})]})}function UDe({configSequence:e,fullSequence:t,participantSequence:n,participantView:r}){var s;let i=zf(e.components);return n&&r&&(i=fMt(zf(e.components),zf(n.components))),r||(i=[...((s=e.interruptions)==null?void 0:s.flatMap(o=>o.components))||[],...i]),_.jsx("div",{children:i.map((o,a)=>{if(typeof o=="string")return r&&(n==null?void 0:n.components[a])!==o?null:_.jsx(dMt,{step:o,disabled:r&&(n==null?void 0:n.components[a])!==o,fullSequence:t,startIndex:a,interruption:e.interruptions&&e.interruptions.findIndex(f=>f.components.includes(o))>-1||!1,subSequence:n,participantView:r},a);const u=n==null?void 0:n.components.find(f=>typeof f!="string"&&f.orderPath===o.orderPath),l=u?kl(u).length-BDe(o,u):0,c=kl(o);return _.jsx(TL,{label:_.jsxs(be,{style:{opacity:l>0?1:.5},children:[_.jsx(et,{size:"sm",display:"inline",children:o.order}),o.order==="random"||o.order==="latinSquare"?_.jsx(CXe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(Wp,{ml:5,variant:"light",children:[l,"/",c.length]}),r&&o.interruptions&&_.jsx(Wp,{ml:5,color:"orange",variant:"light",children:(u==null?void 0:u.components.filter(f=>{var d;return typeof f=="string"&&((d=o.interruptions)==null?void 0:d.flatMap(h=>h.components).includes(f))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(be,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(UDe,{configSequence:o,participantSequence:u,fullSequence:t,participantView:r})})},a)})})}function zDe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function VDe(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>VDe(n,`${t}-${r}`))}}function Whe({text:e}){return _.jsx(os,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(owe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function hMt(){const{sequence:e,metadata:t}=Fo(f=>f),{toggleStudyBrowser:n}=Fl(),r=Qf(),i=Oc(),s=vb(),o=QG(`/${s}`),{storageEngine:a}=Di(),u=I.useMemo(()=>{let f=zf(r.sequence);return f=VDe(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=I.useState("participant");return _.jsxs(pr.Aside,{p:"0",children:[_.jsx(pr.Section,{children:_.jsxs(fn,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(et,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(On,{variant:"light",leftSection:_.jsx(tY,{size:14}),onClick:()=>zDe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(gy,{onClick:()=>i(n()),mt:1})]})}),_.jsx(pr.Section,{grow:!0,component:hb,p:"xs",pt:0,children:_.jsxs(gs,{value:l,onChange:c,children:[_.jsx(be,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(gs.List,{grow:!0,children:[_.jsxs(gs.Tab,{value:"participant",children:["Participant View",_.jsx(Whe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(gs.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Whe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(gs.Panel,{value:"participant",children:_.jsx(UDe,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0})})]})})]})}function pMt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=Fo(S=>S),i=$Y(),s=Oc(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Fl(),{storageEngine:u}=Di(),l=Fo(S=>S.isRecording),c=jm(),f=i.length-1,d=typeof c=="number"?c/f*100:0,[h,p]=I.useState(!1),m=n==null?void 0:n.uiConfig.logoPath,g=n==null?void 0:n.uiConfig.withProgressBar,y=vb(),v=QG(`/${y}`),b=I.useRef(null),[w,E]=I.useState(!1);return I.useEffect(()=>{const S=b.current;S&&E(S.scrollWidth>S.offsetWidth)},[n]),_.jsx(pr.Header,{p:"md",children:_.jsxs(Va,{mt:-7,align:"center",children:[_.jsx(Va.Col,{span:4,children:_.jsxs(fn,{align:"center",children:[_.jsx(vy,{w:40,src:`${cd}${m}`,alt:"Study Logo"}),_.jsx(Tc,{w:"md"}),_.jsx(ki,{order:4,children:n==null?void 0:n.studyMetadata.title}),l?_.jsxs(mr,{ml:"xl",gap:20,wrap:"nowrap",children:[_.jsx(et,{color:"red",children:"Recording audio"}),_.jsx(MSe,{})]}):null]})}),_.jsx(Va.Col,{span:4,children:g&&_.jsx($x,{radius:"md",size:"lg",value:d})}),_.jsx(Va.Col,{span:4,children:_.jsxs(mr,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(os,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(Wp,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(On,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Su,{shadow:"md",width:200,withinPortal:!0,opened:h,onChange:p,children:[_.jsx(Su.Target,{children:_.jsx(jf,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(OXe,{})})}),_.jsxs(Su.Dropdown,{children:[e&&_.jsx(Su.Item,{leftSection:_.jsx(zXe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Su.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(FXe,{size:14}),children:"Contact"}),e&&_.jsx(Su.Item,{leftSection:_.jsx(tY,{size:14}),onClick:()=>zDe(u,n,r,v),children:"Next Participant"})]})]})]})})]})})}function mMt(){var u;const e=(u=Qf())==null?void 0:u.uiConfig.sidebar,t=Qf(),n=zh(),r=t.components[n],i=I.useMemo(()=>{var l;return r?n6(r)&&t.baseComponents?MY({},(l=t.baseComponents)==null?void 0:l[r.baseComponent],r):r:null},[r,t.baseComponents]),s=FY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(pr.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(pr.Section,{bg:"gray.3",p:"md",children:_.jsxs(et,{c:"gray.9",children:[_.jsx(et,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Xa,{text:o})]})}),_.jsx(pr.Section,{p:"md",children:_.jsx(QO,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(pr.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(QO,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function gMt(){const{showHelpText:e,config:t}=Fo(u=>u),n=Oc(),{toggleShowHelpText:r}=Fl(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await LY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(Es,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Xa,{text:i}):_.jsx(JI,{path:t.uiConfig.helpTextPath})})}function yMt(){const{alertModal:e}=Fo(o=>o),{setAlertModal:t}=Fl(),n=Oc(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),_.jsx(Es,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(LI,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(xXe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(et,{my:"md",children:e.message}),_.jsx(mr,{w:"100%",justify:"end",children:_.jsx(On,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function vMt(){const e=I.useRef([]),t=Qf(),n=t.uiConfig.windowEventDebounceTime??100,r=Fo(d=>d.showStudyBrowser);I.useEffect(()=>{const d=pf(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=pf(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=pf(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=pf(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=pf(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=pf(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=pf(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=pf(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=pf(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=Di(),o=vb(),[a,u]=I.useState(!1),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=I.useMemo(()=>a&&r,[a,r]);return _.jsx(SSe.Provider,{value:e,children:_.jsxs(pr,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(mMt,{}),_.jsx(hMt,{}),_.jsx(pMt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(gMt,{}),_.jsx(yMt,{}),_.jsx(pr.Main,{children:_.jsx(nXe,{})})]})})}const g9={left:5,top:0,right:5,bottom:0};function bMt(e){const t=Math.floor(e/1e3/60/60),n=Math.floor((e/1e3/60/60-t)*60),r=Math.floor(((e/1e3/60/60-t)*60-n)*60),i=r<10?`0${r}`:`${r}`,s=n<10?`0${n}`:`${n}`;return`${t<10?`0${t}`:`${t}`}h ${s}m ${i}s`}function _Mt({participant:e,maxDuration:t}){const n=Kl(),r=Fm(),i=I.useMemo(()=>{if(!e.answers||Object.entries(e.answers).length===0)return 0;const l=Object.values(e.answers).sort((c,f)=>c.startTime-f.startTime);return new Date(l[l.length-1].endTime-(l[1]?l[1].startTime:0)).getTime()},[e]),[s,{width:o}]=KM(),a=I.useMemo(()=>!e.answers||Object.entries(e.answers).length===0?0:DK(Object.values(e.answers).map(c=>c.provenanceGraph?Object.keys(c.provenanceGraph.nodes).length:0)),[e]),u=I.useMemo(()=>{if(!e)return null;const l=Object.values(e.answers||{}).map(d=>[d.startTime,d.endTime]).flat(),c=k1(l);return wb([g9.left,o+g9.left+g9.right]).domain(c).clamp(!0)},[e,o]);return _.jsx($l,{children:_.jsxs(ro,{gap:25,ref:s,style:{width:"75%"},children:[_.jsxs(mr,{justify:"space-between",children:[_.jsx(Rx,{size:"25px",component:swe,target:"_blank",to:`${r.pathname}/${e.participantId}/ui`,onClick:()=>n(`${e.participantId}/reviewer-${kl(e.sequence)[0]}`),children:e.participantId}),_.jsx(et,{size:"xl",children:`${a}`}),_.jsx(et,{size:"xl",children:`${bMt(i)}`})]}),u?_.jsx(zRe,{xScale:u,setSelectedTask:()=>null,participantData:e,width:o,height:250}):null]},e.participantId)})}function wMt(e){return e?e.getAllParticipantsData():null}const EMt=["participant1","participant2","participant3","participant4","participant5","participant6","participant7","participant8","participant9","participant10","participant11"],xMt=["64889a71fa7592ae332fa34f","63626a68cf44b4184483c8e8","5c838a63532afd001506fd34","6171849094893d838e6e6f62","5b14898a30d562000155f1e9","5ba42e35984ec30001c6018d","5e690f83d1e0d41a69f00db8","65c10e659858a125507f47f7","616c844bac81732b87340f97","63f7a3b799889de3f13622db","65a4333efc75f965e7fc0cb5","65dca61cadaa2dd820a0f28c","65a00ba072965b5ce928d307","5cb3cdc781f3750001043bf2","5d76ac914c93440001c03fd7","65c691b5ca603ec8e389700e","5d31dc6e42678e001a0bdedd","6294ce94ea81c4554b141010","60743e408fd768b1a939ed4c","638a8c63c74f91261108cebf","5780d9a1900cc80001d2d1c2","5fa07c635b16f50d21483d5e","63ee65e3470c23cb401ca89a","5b99663d4cefb60001e7a214","63162bda14b96736b08a554d","6554e79557e3d6be08e32ceb","63d5021468a31efc02740c1e","63fbf0e3b18cc14adc0dbfb6","63beebaa4c5884797ff00a98","64217d8202361ad4dbed3596","58ff31a1d10e2b000108579e","63f779d27ba18edb4b6e5a57","62e023ae6d022e4d7bfc5db1","5e5521580ee1b951df544c3c","5bb756696322c5000159756c","637545d6428d85daeedc3df5","641ecfa9f83175a3d9f63636","611a8d23c1d17506a23df589","605e622287f0e806ffe04590"];function SMt(){const{storageEngine:e}=Di(),{value:t,status:n}=Hv(wMt,[e]),r=I.useMemo(()=>{if(!(n!=="success"||!t))return uh(t==null?void 0:t.map(i=>{if(!i.answers||Object.entries(i.answers).length===0)return 0;const s=Object.values(i.answers).sort((o,a)=>o.startTime-a.startTime);return new Date(s[s.length-1].endTime-s[0].startTime).getTime()}))},[t,n]);return n==="success"&&t?_.jsx(ro,{gap:50,style:{width:"100%"},children:t==null?void 0:t.filter(i=>xMt.includes(i.participantId)||EMt.includes(i.participantId)).map(i=>_.jsx(_Mt,{maxDuration:r,participant:i},i.participantId))}):_.jsx(ju,{})}function TMt({setProvState:e}){return _.jsx("div",{children:_.jsx(pr.Main,{p:"sm",children:_.jsx(MDe,{mini:!1})})})}var CMt={VITE_BASE_PATH:"/guardrails-think-aloud/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyC2_p8u5-7qcczQFzjlJSyhW4IM033QSuc",
  authDomain: "think-aloud-study.firebaseapp.com",
  projectId: "think-aloud-study",
  storageBucket: "think-aloud-study.appspot.com",
  messagingSenderId: "864986161913",
  appId: "1:864986161913:web:f70b4b25c3262928e53828",
  measurementId: "G-DNH5M7FC68"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LeSJBYqAAAAADYgJYYVaLhVACl5Jy1sidBF7BsC",VITE_REVISIT_MODE:"private",BASE_URL:"/guardrails-think-aloud/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function AMt(e){const t=await(await fetch(`${cd}${e}`)).text();return Adt(t)}async function w4(e,t){const n=t.configsList.find(r=>fwe(r)===e);if(n){const r=t.configs[n];return await AMt(`${r.path}`)}return null}async function IMt(e){const t={},n=e.configsList.filter(i=>CMt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>w4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function kMt({studyId:e,config:t}){const{sequence:n}=Fo(i=>i),r=I.useMemo(()=>{if(e&&t&&n){const i=[];return i.push({path:"/",element:_.jsx(EV,{to:"0",replace:!0})}),i.push({path:"/:index",element:t.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(ki,{order:2,mb:8,children:"Error loading config"}),_.jsx(YU,{issues:t.errors,type:"error"})]}):_.jsx(Vhe,{})}),i.push({path:"/analysis/:trrackId/:index/",element:_.jsx(Vhe,{})}),i.push({path:"/analysis/:trrackId/ui/:index?/",element:_.jsx(pr,{header:{height:70},navbar:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},aside:{collapsed:{desktop:!0,mobile:!0},width:0,breakpoint:"xs"},children:_.jsx(TMt,{setProvState:()=>null})})}),i.push({path:"/analysis",element:_.jsx(SMt,{})}),i.push({path:"/end",element:_.jsx(xSe,{})}),[{element:_.jsx(vMt,{}),children:i}]}return[]},[t,n,e]);return nwe(r)}function RMt({globalConfig:e}){const t=vb(),[n,r]=I.useState(null);e.configsList.includes(t),I.useEffect(()=>{w4(t,e).then(l=>{r(l)})},[e,t]);const[i,s]=I.useState(null),{storageEngine:o}=Di(),[a]=ZG();return I.useEffect(()=>{async function l(){if(!o||!n||!t)return;await o.initializeStudyDb(t,n),await o.getSequenceArray()||await o.setSequenceArray(await cMt(n));const f=n.uiConfig.urlParticipantIdParam&&a.get(n.uiConfig.urlParticipantIdParam)||void 0,d=Object.fromEntries(a.entries()),h=await fetch("https://api.ipify.org?format=json").catch(v=>""),p=h instanceof Response?await h.json():{ip:""},m={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:p.ip},g=await o.initializeParticipantSession(t,d,n,m,f),y=await Nat(t,n,g.sequence,m,g.answers);s(y)}l()},[o,n,t,a]),i?_.jsx(Cxe.Provider,{value:i,children:_.jsx(tst,{store:i.store,children:_.jsx(kMt,{studyId:t,config:n})})}):_.jsx(Dc,{visible:!0})}function A2({studyIds:e}){const t=Kl(),{studyId:n}=Eh(),r=Fm(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=Di(),{user:o,logout:a}=Ny(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(MXe,{}),href:"/",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(kXe,{}),href:"/analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(awe,{}),href:"/settings",needAdmin:!0}];return _.jsx(pr.Header,{p:"md",children:_.jsxs(Va,{mt:-7,align:"center",children:[_.jsx(Va.Col,{span:6,children:_.jsxs(fn,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(vy,{w:40,src:`${cd}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(Tc,{w:"md"}),_.jsx(ki,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Va.Col,{span:6,children:_.jsxs(fn,{justify:"flex-end",direction:"row",children:[c&&_.jsx(pE,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(lG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(jh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(fn,{direction:"column",mt:20,children:[_.jsx(et,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(On,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`):null:_.jsx(On,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:()=>{t(d.href),l(!1)},children:d.name},`menu-item-${d.name}`)),_.jsxs(be,{ml:10,children:[_.jsx(u0,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}const h_=14;function HDe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(fn,{ml:4,gap:4,children:[_.jsx(os,{label:"Completed",children:_.jsx(Wp,{variant:"light",color:"green",leftSection:_.jsx(PXe,{width:h_,height:h_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(os,{label:"In Progress",children:_.jsx(Wp,{variant:"light",color:"orange",leftSection:_.jsx(BXe,{width:h_,height:h_,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(os,{label:"Rejected",children:_.jsx(Wp,{variant:"light",color:"red",leftSection:_.jsx(cwe,{width:h_,height:h_,style:{paddingTop:1}}),pb:1,children:n})})]})}function NMt({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(""),[c,f]=I.useState([]),[d,h]=I.useState(""),[p,m]=I.useState(!1),[g,y]=I.useState(!1),{storageEngine:v}=Di(),b=v,w=I.useCallback(async()=>{y(!0);const O=await b.getSnapshots(e);f(O),y(!1)},[b,e]);I.useEffect(()=>{w()},[w]);const E=async()=>{m(!0),await b.createSnapshot(e,!1),w(),m(!1),await t()},S=async()=>{m(!0),h(""),r(!1),await b.createSnapshot(e,!0),w(),m(!1),await t()},T=async O=>{m(!0),await b.restoreSnapshot(e,O),w(),m(!1),await t()},C=async()=>{m(!0),h(""),s(!1),await b.removeSnapshotOrLive(u,!0),w(),m(!1),await t()},A=async()=>{m(!0),h(""),a(!1),await b.removeSnapshotOrLive(e,!0),w(),m(!1),await t()},N=()=>Noe({title:"Create a Snapshot",children:_.jsx(et,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>E()}),k=O=>Noe({title:"Restore Snapshot",children:_.jsx(et,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>T(O)});return _.jsxs(_.Fragment,{children:[_.jsx(Dc,{visible:p}),_.jsxs(fn,{justify:"space-between",align:"center",children:[_.jsxs(be,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Create a Snapshot"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(et,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(os,{label:"Create a snapshot",children:_.jsx(On,{onClick:N,children:"Snapshot"})})]}),_.jsx(Tc,{h:"lg"}),_.jsxs(fn,{justify:"space-between",align:"center",children:[_.jsxs(be,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Archive Data"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(os,{label:"Snapshot and Delete Data",children:_.jsx(On,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(Tc,{h:"lg"}),_.jsxs(fn,{justify:"space-between",align:"center",children:[_.jsxs(be,{style:{width:"70%"},children:[_.jsx(ki,{order:5,children:"Delete Data"}),_.jsxs(et,{children:["This will delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(os,{label:"Delete Data",children:_.jsx(On,{color:"red",onClick:()=>a(!0),children:"Delete"})})]}),_.jsx(Tc,{h:"xl"}),_.jsxs(fn,{direction:"column",children:[_.jsx(fn,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(ki,{order:5,children:"Snapshots"})}),_.jsxs(be,{style:{position:"relative"},children:[_.jsx(Dc,{visible:g}),c.length>0?c.map(O=>_.jsxs(fn,{justify:"space-between",mb:"xs",children:[_.jsx(et,{children:O}),_.jsxs(fn,{direction:"row",gap:"xs",children:[_.jsx(os,{label:"Restore Snapshot",children:_.jsx(jf,{color:"blue",variant:"subtle",onClick:()=>{k(O)},children:_.jsx(UXe,{})})}),_.jsx(os,{label:"Delete Snapshot",children:_.jsx(jf,{color:"red",variant:"subtle",onClick:()=>{s(!0),l(O)},children:_.jsx(lwe,{})})})]})]},O)):_.jsx(et,{children:"No snapshots."})]})]}),_.jsxs(Es,{opened:n,onClose:()=>{r(!1),h("")},title:_.jsx(et,{children:"Archive Data"}),children:[_.jsx(et,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(l0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(fn,{mt:"sm",justify:"right",children:[_.jsx(On,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),h("")},children:"Cancel"}),_.jsx(On,{color:"red",onClick:S,disabled:d!==e,children:"Archive"})]})]}),_.jsxs(Es,{opened:i,onClose:()=>{s(!1),h("")},title:_.jsx(et,{children:"Delete Snapshot"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(l0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(fn,{mt:"sm",justify:"right",children:[_.jsx(On,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),h("")},children:"Cancel"}),_.jsx(On,{color:"red",onClick:C,disabled:d!==e,children:"Delete"})]})]}),_.jsxs(Es,{opened:o,onClose:()=>{a(!1),h("")},title:_.jsx(et,{children:"Delete Live Data"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(l0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:O=>h(O.target.value)}),_.jsxs(fn,{mt:"sm",justify:"right",children:[_.jsx(On,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),h("")},children:"Cancel"}),_.jsx(On,{color:"red",onClick:A,disabled:d!==e,children:"Delete"})]})]})]})}function PMt({studyId:e}){const{storageEngine:t}=Di(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(ro,{children:[_.jsx(Sw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(Sw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(Sw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function DMt({studyId:e,refresh:t}){const{storageEngine:n}=Di();return _.jsx(ld,{children:_.jsxs(_u,{multiple:!0,variant:"contained",children:[_.jsxs(_u.Item,{value:"ReVISit Modes",children:[_.jsx(_u.Control,{children:_.jsx(ki,{order:5,children:"ReVISit Modes"})}),_.jsx(_u.Panel,{children:_.jsx(PMt,{studyId:e})})]},"modes"),_.jsxs(_u.Item,{value:"Data Management",children:[_.jsx(_u.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(ki,{order:5,children:"Data Management"})}),_.jsx(_u.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(NMt,{studyId:e,refresh:t})})]},"dataManagement")]})})}function OMt(e){const{globalConfig:t}=e,{studyId:n}=Eh(),[r,i]=I.useState([]),[s,o]=I.useState(void 0),[a,u]=I.useState(!1),{storageEngine:l}=Di(),c=Kl(),{tab:f}=Eh(),{user:d}=Ny(),h=I.useCallback(async()=>{if(u(!0),n){const y=await w4(n,t);if(!y||!l)return;await l.initializeStudyDb(n,y);const v=await l.getAllParticipantsData();i(v),o(y),u(!1)}},[t,l,n]);I.useEffect(()=>{h()},[t,l,n,h]);const[p,m,g]=I.useMemo(()=>{const y=r.filter(w=>!w.rejected&&w.completed),v=r.filter(w=>!w.rejected&&!w.completed),b=r.filter(w=>w.rejected);return[y,v,b]},[r]);return _.jsxs(pr,{style:{height:"100%"},children:[_.jsx(A2,{studyIds:e.globalConfig.configsList}),_.jsx(pr.Main,{children:_.jsxs(be,{p:"sm",style:{height:"100%",minHeight:"100%",width:"100%"},children:[_.jsx(Dc,{visible:a}),_.jsxs(fn,{direction:"row",align:"center",children:[_.jsx(ki,{order:5,children:n}),_.jsx(HDe,{completed:p.length,inProgress:m.length,rejected:g.length})]}),_.jsx(Tc,{h:"xs"}),_.jsxs(gs,{variant:"outline",value:f,onChange:y=>c(`./../${y}`),style:{height:"100%"},children:[_.jsxs(gs.List,{children:[_.jsx(gs.Tab,{value:"table",leftSection:_.jsx(HXe,{size:16}),children:"Table View"}),_.jsx(os,{label:"Coming soon",position:"bottom",children:_.jsx(gs.Tab,{value:"stats",leftSection:_.jsx(RXe,{size:16}),disabled:!0,children:"Trial Stats"})}),_.jsx(os,{label:"Coming soon",position:"bottom",children:_.jsx(gs.Tab,{value:"replay",leftSection:_.jsx(Ooe,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(gs.Tab,{value:"thinkAloud",leftSection:_.jsx(Ooe,{size:16}),children:"Think Aloud"}),_.jsx(gs.Tab,{value:"manage",leftSection:_.jsx(awe,{size:16}),disabled:!d.isAdmin,children:"Manage"})]}),_.jsx(gs.Panel,{value:"stats",pt:"xs",children:"statsboard"}),_.jsx(gs.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(gs.Panel,{value:"manage",pt:"xs",children:n&&d.isAdmin?_.jsx(DMt,{studyId:n,refresh:h}):_.jsx(ld,{mt:20,children:_.jsx(LI,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(owe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Ghe({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=Ny(),{storageEngine:o}=Di(),[a,u]=I.useState(!1),l=Eh();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[r.isAdmin,a]),r.determiningStatus||!o?_.jsx(Dc,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(JG,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function qDe(e,t,n){if(e instanceof hc){t(!0);const r=new Pp,i=I$();try{await QRt(i,r,PNe)}catch(s){n&&n(s.message)}finally{t(!1)}return i.currentUser}return null}function $Mt(){const{user:e}=Ny(),[t,n]=I.useState(null),[r,i]=I.useState(!1),{storageEngine:s}=Di();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&n("You are not authorized to use this application.")},[e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(JG,{to:"/"}):_.jsx(ld,{children:_.jsx(pb,{padding:"lg",children:_.jsxs(fn,{align:"center",direction:"column",justify:"center",children:[_.jsx(vy,{maw:200,mt:50,mb:100,src:`${cd}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(et,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(On,{onClick:()=>qDe(s,i,n),leftSection:_.jsx(qXe,{}),variant:"filled",children:"Sign In With Google"})]}),t?_.jsx(Wp,{size:"lg",color:"red",mt:30,children:t}):null,_.jsx(Dc,{visible:r})]})})})}var WDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ms,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var L=["th","st","nd","rd"],M=$%100;return"["+$+(L[(M-20)%10]||L[M]||L[0])+"]"}},b=function($,L,M){var U=String($);return!U||U.length>=L?$:""+Array(L+1-U.length).join(M)+$},w={s:b,z:function($){var L=-$.utcOffset(),M=Math.abs(L),U=Math.floor(M/60),B=M%60;return(L<=0?"+":"-")+b(U,2,"0")+":"+b(B,2,"0")},m:function $(L,M){if(L.date()<M.date())return-$(M,L);var U=12*(M.year()-L.year())+(M.month()-L.month()),B=L.clone().add(U,f),V=M-B<0,D=L.clone().add(U+(V?-1:1),f);return+(-(U+(M-B)/(V?B-D:D-B))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",S={};S[E]=v;var T="$isDayjsObject",C=function($){return $ instanceof O||!(!$||!$[T])},A=function $(L,M,U){var B;if(!L)return E;if(typeof L=="string"){var V=L.toLowerCase();S[V]&&(B=V),M&&(S[V]=M,B=V);var D=L.split("-");if(!B&&D.length>1)return $(D[0])}else{var z=L.name;S[z]=L,B=z}return!U&&B&&(E=B),B||!U&&E},N=function($,L){if(C($))return $.clone();var M=typeof L=="object"?L:{};return M.date=$,M.args=arguments,new O(M)},k=w;k.l=A,k.i=C,k.w=function($,L){return N($,{locale:L.$L,utc:L.$u,x:L.$x,$offset:L.$offset})};var O=function(){function $(M){this.$L=A(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[T]=!0}var L=$.prototype;return L.parse=function(M){this.$d=function(U){var B=U.date,V=U.utc;if(B===null)return new Date(NaN);if(k.u(B))return new Date;if(B instanceof Date)return new Date(B);if(typeof B=="string"&&!/Z$/i.test(B)){var D=B.match(g);if(D){var z=D[2]-1||0,W=(D[7]||"0").substring(0,3);return V?new Date(Date.UTC(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)):new Date(D[1],z,D[3]||1,D[4]||0,D[5]||0,D[6]||0,W)}}return new Date(B)}(M),this.init()},L.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},L.$utils=function(){return k},L.isValid=function(){return this.$d.toString()!==m},L.isSame=function(M,U){var B=N(M);return this.startOf(U)<=B&&B<=this.endOf(U)},L.isAfter=function(M,U){return N(M)<this.startOf(U)},L.isBefore=function(M,U){return this.endOf(U)<N(M)},L.$g=function(M,U,B){return k.u(M)?this[U]:this.set(B,M)},L.unix=function(){return Math.floor(this.valueOf()/1e3)},L.valueOf=function(){return this.$d.getTime()},L.startOf=function(M,U){var B=this,V=!!k.u(U)||U,D=k.p(M),z=function(ce,me){var Le=k.w(B.$u?Date.UTC(B.$y,me,ce):new Date(B.$y,me,ce),B);return V?Le:Le.endOf(l)},W=function(ce,me){return k.w(B.toDate()[ce].apply(B.toDate("s"),(V?[0,0,0,0]:[23,59,59,999]).slice(me)),B)},j=this.$W,q=this.$M,G=this.$D,te="set"+(this.$u?"UTC":"");switch(D){case h:return V?z(1,0):z(31,11);case f:return V?z(1,q):z(0,q+1);case c:var ve=this.$locale().weekStart||0,he=(j<ve?j+7:j)-ve;return z(V?G-he:G+(6-he),q);case l:case p:return W(te+"Hours",0);case u:return W(te+"Minutes",1);case a:return W(te+"Seconds",2);case o:return W(te+"Milliseconds",3);default:return this.clone()}},L.endOf=function(M){return this.startOf(M,!1)},L.$set=function(M,U){var B,V=k.p(M),D="set"+(this.$u?"UTC":""),z=(B={},B[l]=D+"Date",B[p]=D+"Date",B[f]=D+"Month",B[h]=D+"FullYear",B[u]=D+"Hours",B[a]=D+"Minutes",B[o]=D+"Seconds",B[s]=D+"Milliseconds",B)[V],W=V===l?this.$D+(U-this.$W):U;if(V===f||V===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},L.set=function(M,U){return this.clone().$set(M,U)},L.get=function(M){return this[k.p(M)]()},L.add=function(M,U){var B,V=this;M=Number(M);var D=k.p(U),z=function(q){var G=N(V);return k.w(G.date(G.date()+Math.round(q*M)),V)};if(D===f)return this.set(f,this.$M+M);if(D===h)return this.set(h,this.$y+M);if(D===l)return z(1);if(D===c)return z(7);var W=(B={},B[a]=r,B[u]=i,B[o]=n,B)[D]||1,j=this.$d.getTime()+M*W;return k.w(j,this)},L.subtract=function(M,U){return this.add(-1*M,U)},L.format=function(M){var U=this,B=this.$locale();if(!this.isValid())return B.invalidDate||m;var V=M||"YYYY-MM-DDTHH:mm:ssZ",D=k.z(this),z=this.$H,W=this.$m,j=this.$M,q=B.weekdays,G=B.months,te=B.meridiem,ve=function(me,Le,fe,ct){return me&&(me[Le]||me(U,V))||fe[Le].slice(0,ct)},he=function(me){return k.s(z%12||12,me,"0")},ce=te||function(me,Le,fe){var ct=me<12?"AM":"PM";return fe?ct.toLowerCase():ct};return V.replace(y,function(me,Le){return Le||function(fe){switch(fe){case"YY":return String(U.$y).slice(-2);case"YYYY":return k.s(U.$y,4,"0");case"M":return j+1;case"MM":return k.s(j+1,2,"0");case"MMM":return ve(B.monthsShort,j,G,3);case"MMMM":return ve(G,j);case"D":return U.$D;case"DD":return k.s(U.$D,2,"0");case"d":return String(U.$W);case"dd":return ve(B.weekdaysMin,U.$W,q,2);case"ddd":return ve(B.weekdaysShort,U.$W,q,3);case"dddd":return q[U.$W];case"H":return String(z);case"HH":return k.s(z,2,"0");case"h":return he(1);case"hh":return he(2);case"a":return ce(z,W,!0);case"A":return ce(z,W,!1);case"m":return String(W);case"mm":return k.s(W,2,"0");case"s":return String(U.$s);case"ss":return k.s(U.$s,2,"0");case"SSS":return k.s(U.$ms,3,"0");case"Z":return D}return null}(me)||D.replace(":","")})},L.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},L.diff=function(M,U,B){var V,D=this,z=k.p(U),W=N(M),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return k.m(D,W)};switch(z){case h:V=G()/12;break;case f:V=G();break;case d:V=G()/3;break;case c:V=(q-j)/6048e5;break;case l:V=(q-j)/864e5;break;case u:V=q/i;break;case a:V=q/r;break;case o:V=q/n;break;default:V=q}return B?V:k.a(V)},L.daysInMonth=function(){return this.endOf(f).$D},L.$locale=function(){return S[this.$L]},L.locale=function(M,U){if(!M)return this.$L;var B=this.clone(),V=A(M,U,!0);return V&&(B.$L=V),B},L.clone=function(){return k.w(this.$d,this)},L.toDate=function(){return new Date(this.valueOf())},L.toJSON=function(){return this.isValid()?this.toISOString():null},L.toISOString=function(){return this.$d.toISOString()},L.toString=function(){return this.$d.toUTCString()},$}(),P=O.prototype;return N.prototype=P,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){P[$[1]]=function(L){return this.$g(L,$[0],$[1])}}),N.extend=function($,L){return $.$i||($(L,O,N),$.$i=!0),N},N.locale=A,N.isDayjs=C,N.unix=function($){return N(1e3*$)},N.en=S[E],N.Ls=S,N.p={},N})})(WDe);var MMt=WDe.exports;const Tt=nl(MMt);function LMt({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function FMt({formatter:e,...t}){return(e||LMt)(t)}function jMt({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function GDe({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=jMt({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?GDe({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function BMt(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function UMt(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function rZ({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=BMt(i.key);if(s){i.preventDefault();const o=UMt(e);GDe({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var YDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ms,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],S=E===24?0:E,T=m[0]+"-"+m[1]+"-"+m[2]+" "+S+":"+m[4]+":"+m[5]+":000",C=+d;return(o.utc(T).valueOf()-(C-=C%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(S,T,C){var A=S-60*T*1e3,N=l(A,C);if(T===N)return[A,T];var k=l(A-=60*(N-T)*1e3,C);return N===k?[A,N]:[S-60*Math.min(N,k)*1e3,Math.max(N,k)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(YDe);var zMt=YDe.exports;const VMt=nl(zMt);var KDe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ms,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var S=E.match(r);if(!S)return null;var T=(""+S[0]).match(i)||["-",0,0],C=T[0],A=60*+T[1]+ +T[2];return A===0?0:C==="+"?A:-A}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(KDe);var HMt=KDe.exports;const qMt=nl(HMt);Tt.extend(qMt);Tt.extend(VMt);function WMt(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Yhe=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=WMt(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function _0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Yhe(i,n,e)):Yhe(t,n,e)}function GMt({minDate:e,maxDate:t,timezone:n}){const r=_0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const YMt={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},KMt=I.createContext(YMt);function Ql(){const e=I.useContext(KMt),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function XMt(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function XDe({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:XMt(e,t),name:n,form:r})}XDe.displayName="@mantine/dates/HiddenDatesInput";var QDe={day:"m_396ce5cb"};const QMt={},JMt=(e,{size:t})=>({day:{"--day-size":Ht(t,"day-size")}}),iZ=Me((e,t)=>{const n=we("Day",QMt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,highlightToday:E,...S}=n,T=mt({name:f||"Day",classes:QDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JMt,rootSelector:"day"}),C=Ql();return _.jsx(ws,{...T("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(_0("add",new Date,C.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-highlight-today":E||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...S,children:(m==null?void 0:m(l))||l.getDate()})});iZ.classes=QDe;iZ.displayName="@mantine/dates/Day";function ZMt({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var JDe={weekday:"m_18a3eca"};const eLt={},tLt=(e,{size:t})=>({weekdaysRow:{"--wr-fz":co(t),"--wr-spacing":qu(t)}}),sZ=Me((e,t)=>{const n=we("WeekdaysRow",eLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=mt({name:h||"WeekdaysRow",classes:JDe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tLt,rootSelector:"weekdaysRow"}),g=Ql(),y=ZMt({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(be,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});sZ.classes=JDe;sZ.displayName="@mantine/dates/WeekdaysRow";function nLt(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function rLt(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function iLt({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=nLt(s,t),a=rLt(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function ZDe(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function eOe(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function tOe(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function sLt(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return tOe(c,n)&&eOe(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||ZDe(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var nOe={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const oLt={withCellSpacing:!0},E4=Me((e,t)=>{const n=we("Month",oLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:S,static:T,__getDayRef:C,__onDayKeyDown:A,__onDayClick:N,__onDayMouseEnter:k,__preventFocus:O,__stopPropagation:P,withCellSpacing:$,size:L,highlightToday:M,...U}=n,B=mt({name:l||"Month",classes:nOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),V=Ql(),D=iLt({month:h,firstDayOfWeek:V.getFirstDayOfWeek(f),consistentWeeks:V.consistentWeeks}),z=sLt(D,y,v,m,g,w,h),{resolvedClassNames:W,resolvedStyles:j}=Pm({classNames:r,styles:o,props:n}),q=D.map((G,te)=>{const ve=G.map((he,ce)=>{const me=!ZDe(he,h),Le=(S==null?void 0:S(he))||Tt(he).locale(c||V.locale).format("D MMMM YYYY"),fe=m==null?void 0:m(he),ct=Tt(he).isSame(z,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(iZ,{__staticSelector:l||"Month",classNames:W,styles:j,unstyled:a,"data-mantine-stop-propagation":P||void 0,highlightToday:M,renderDay:b,date:he,size:L,weekend:V.getWeekendDays(p).includes(he.getDay()),outside:me,hidden:w?me:!1,"aria-label":Le,static:T,disabled:(g==null?void 0:g(he))||!tOe(he,v)||!eOe(he,y),ref:ze=>C==null?void 0:C(te,ce,ze),...fe,onKeyDown:ze=>{var Ke;(Ke=fe==null?void 0:fe.onKeyDown)==null||Ke.call(fe,ze),A==null||A(ze,{rowIndex:te,cellIndex:ce,date:he})},onMouseEnter:ze=>{var Ke;(Ke=fe==null?void 0:fe.onMouseEnter)==null||Ke.call(fe,ze),k==null||k(ze,he)},onClick:ze=>{var Ke;(Ke=fe==null?void 0:fe.onClick)==null||Ke.call(fe,ze),N==null||N(ze,he)},onMouseDown:ze=>{var Ke;(Ke=fe==null?void 0:fe.onMouseDown)==null||Ke.call(fe,ze),O&&ze.preventDefault()},tabIndex:O||!ct?-1:0})},he.toString())});return _.jsx("tr",{...B("monthRow"),children:ve},te)});return _.jsxs(be,{component:"table",...B("month"),size:L,ref:t,...U,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(sZ,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:L,classNames:W,styles:j,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:q})]})});E4.classes=nOe;E4.displayName="@mantine/dates/Month";var rOe={pickerControl:"m_dc6a3c71"};const aLt={},uLt=(e,{size:t})=>({pickerControl:{"--dpc-fz":co(t),"--dpc-size":Ht(t,"dpc-size")}}),x4=Me((e,t)=>{const n=we("PickerControl",aLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=mt({name:d||"PickerControl",classes:rOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uLt,rootSelector:"pickerControl"});return _.jsx(ws,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});x4.classes=rOe;x4.displayName="@mantine/dates/PickerControl";function iOe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function lLt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!iOe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function sOe(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var oOe={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const cLt={yearsListFormat:"YYYY",withCellSpacing:!0},S4=Me((e,t)=>{const n=we("YearsList",cLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...C}=n,A=mt({name:m||"YearsList",classes:oOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),N=Ql(),k=sOe(l),O=lLt(k,d,h,p),P=k.map(($,L)=>{const M=$.map((U,B)=>{const V=p==null?void 0:p(U),D=Tt(U).isSame(O,"year");return _.jsx("td",{...A("yearsListCell"),"data-with-spacing":S||void 0,children:_.jsx(x4,{...A("yearsListControl"),size:T,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:iOe(U,d,h),ref:z=>g==null?void 0:g(L,B,z),...V,onKeyDown:z=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,z),y==null||y(z,{rowIndex:L,cellIndex:B,date:U})},onClick:z=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,z),v==null||v(z,U)},onMouseEnter:z=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,z),b==null||b(z,U)},onMouseDown:z=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(U).locale(N.getLocale(f)).format(c)})},B)});return _.jsx("tr",{...A("yearsListRow"),children:M},L)});return _.jsx(be,{component:"table",ref:t,size:T,...A("yearsList"),...C,children:_.jsx("tbody",{children:P})})});S4.classes=oOe;S4.displayName="@mantine/dates/YearsList";function aOe(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function fLt(e,t,n,r){const i=e.flat().filter(a=>{var u;return!aOe(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function dLt(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var uOe={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const hLt={monthsListFormat:"MMM",withCellSpacing:!0},T4=Me((e,t)=>{const n=we("MonthsList",hLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:S,size:T,...C}=n,A=mt({name:l||"MonthsList",classes:uOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),N=Ql(),k=dLt(c),O=fLt(k,h,p,m),P=k.map(($,L)=>{const M=$.map((U,B)=>{const V=m==null?void 0:m(U),D=Tt(U).isSame(O,"month");return _.jsx("td",{...A("monthsListCell"),"data-with-spacing":S||void 0,children:_.jsx(x4,{...A("monthsListControl"),size:T,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:aOe(U,h,p),ref:z=>g==null?void 0:g(L,B,z),...V,onKeyDown:z=>{var W;(W=V==null?void 0:V.onKeyDown)==null||W.call(V,z),y==null||y(z,{rowIndex:L,cellIndex:B,date:U})},onClick:z=>{var W;(W=V==null?void 0:V.onClick)==null||W.call(V,z),v==null||v(z,U)},onMouseEnter:z=>{var W;(W=V==null?void 0:V.onMouseEnter)==null||W.call(V,z),b==null||b(z,U)},onMouseDown:z=>{var W;(W=V==null?void 0:V.onMouseDown)==null||W.call(V,z),w&&z.preventDefault()},tabIndex:w||!D?-1:0,children:Tt(U).locale(N.getLocale(d)).format(f)})},B)});return _.jsx("tr",{...A("monthsListRow"),children:M},L)});return _.jsx(be,{component:"table",ref:t,size:T,...A("monthsList"),...C,children:_.jsx("tbody",{children:P})})});T4.classes=uOe;T4.displayName="@mantine/dates/MonthsList";var lOe={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const pLt={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},mLt=(e,{size:t})=>({calendarHeader:{"--dch-control-size":Ht(t,"dch-control-size"),"--dch-fz":co(t)}}),Py=Me((e,t)=>{const n=we("CalendarHeader",pLt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:S,__staticSelector:T,__preventFocus:C,__stopPropagation:A,...N}=n,k=mt({name:T||"CalendarHeader",classes:lOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mLt,rootSelector:"calendarHeader"}),O=C?P=>P.preventDefault():void 0;return _.jsxs(be,{...k("calendarHeader"),ref:t,...N,children:[S&&_.jsx(ws,{...k("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:C||v?-1:0,"data-mantine-stop-propagation":A||void 0,children:c||_.jsx(fE,{...k("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(ws,{component:b?"button":"div",...k("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:C||!b?-1:0,"data-mantine-stop-propagation":A||void 0,children:g}),E&&_.jsx(ws,{...k("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:C||y?-1:0,"data-mantine-stop-propagation":A||void 0,children:l||_.jsx(fE,{...k("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});Py.classes=lOe;Py.displayName="@mantine/dates/CalendarHeader";function gLt(e){const t=sOe(e);return[t[0][0],t[3][0]]}const yLt={decadeLabelFormat:"YYYY"},C4=Me((e,t)=>{const n=we("DecadeLevel",yLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:S,levelControlAriaLabel:T,withNext:C,withPrevious:A,decadeLabelFormat:N,classNames:k,styles:O,unstyled:P,__staticSelector:$,__stopPropagation:L,size:M,...U}=n,B=Ql(),[V,D]=gLt(r),z={__staticSelector:$||"DecadeLevel",classNames:k,styles:O,unstyled:P,size:M},W=typeof E=="boolean"?E:o?!Tt(D).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(V).startOf("year").isAfter(s):!1,q=(G,te)=>Tt(G).locale(i||B.locale).format(te);return _.jsxs(be,{"data-decade-level":!0,size:M,ref:t,...U,children:[_.jsx(Py,{label:typeof N=="function"?N(V,D):`${q(V,N)}  ${q(D,N)}`,__preventFocus:p,__stopPropagation:L,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:T,withNext:C,withPrevious:A,...z}),_.jsx(S4,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:L,withCellSpacing:h,...z})]})});C4.classes={...S4.classes,...Py.classes};C4.displayName="@mantine/dates/DecadeLevel";const vLt={yearLabelFormat:"YYYY"},A4=Me((e,t)=>{const n=we("YearLevel",vLt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:S,previousDisabled:T,hasNextLevel:C,levelControlAriaLabel:A,withNext:N,withPrevious:k,yearLabelFormat:O,__staticSelector:P,__stopPropagation:$,size:L,classNames:M,styles:U,unstyled:B,...V}=n,D=Ql(),z={__staticSelector:P||"YearLevel",classNames:M,styles:U,unstyled:B,size:L},W=typeof S=="boolean"?S:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(be,{"data-year-level":!0,size:L,ref:t,...V,children:[_.jsx(Py,{label:typeof O=="function"?O(r):Tt(r).locale(i||D.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:C,levelControlAriaLabel:A,withNext:N,withPrevious:k,...z}),_.jsx(T4,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...z})]})});A4.classes={...Py.classes,...T4.classes};A4.displayName="@mantine/dates/YearLevel";const bLt={monthLabelFormat:"MMMM YYYY"},I4=Me((e,t)=>{const n=we("MonthLevel",bLt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,highlightToday:E,__preventFocus:S,__stopPropagation:T,nextIcon:C,previousIcon:A,nextLabel:N,previousLabel:k,onNext:O,onPrevious:P,onLevelClick:$,nextDisabled:L,previousDisabled:M,hasNextLevel:U,levelControlAriaLabel:B,withNext:V,withPrevious:D,monthLabelFormat:z,classNames:W,styles:j,unstyled:q,__staticSelector:G,size:te,static:ve,...he}=n,ce=Ql(),me={__staticSelector:G||"MonthLevel",classNames:W,styles:j,unstyled:q,size:te},Le=typeof L=="boolean"?L:f?!Tt(r).endOf("month").isBefore(f):!1,fe=typeof M=="boolean"?M:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(be,{"data-month-level":!0,size:te,ref:t,...he,children:[_.jsx(Py,{label:typeof z=="function"?z(r):Tt(r).locale(i||ce.locale).format(z),__preventFocus:S,__stopPropagation:T,nextIcon:C,previousIcon:A,nextLabel:N,previousLabel:k,onNext:O,onPrevious:P,onLevelClick:$,nextDisabled:Le,previousDisabled:fe,hasNextLevel:U,levelControlAriaLabel:B,withNext:V,withPrevious:D,...me}),_.jsx(E4,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:S,__stopPropagation:T,static:ve,withCellSpacing:w,highlightToday:E,...me})]})});I4.classes={...E4.classes,...Py.classes};I4.displayName="@mantine/dates/MonthLevel";var cOe={levelsGroup:"m_30b26e33"};const _Lt={},Dy=Me((e,t)=>{const n=we("LevelsGroup",_Lt,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=mt({name:l||"LevelsGroup",classes:cOe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(be,{ref:t,...f("levelsGroup"),...c})});Dy.classes=cOe;Dy.displayName="@mantine/dates/LevelsGroup";const wLt={numberOfColumns:1},k4=Me((e,t)=>{const n=we("DecadeLevelGroup",wLt,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:S,unstyled:T,__staticSelector:C,__stopPropagation:A,numberOfColumns:N,levelControlAriaLabel:k,decadeLabelFormat:O,size:P,vars:$,...L}=n,M=I.useRef([]),U=Array(N).fill(0).map((B,V)=>{const D=Tt(r).add(V*10,"years").toDate();return _.jsx(C4,{size:P,yearsListFormat:a,decade:D,withNext:V===N-1,withPrevious:V===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>rZ({levelIndex:V,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:M}),__getControlRef:(z,W,j)=>{Array.isArray(M.current[V])||(M.current[V]=[]),Array.isArray(M.current[V][z])||(M.current[V][z]=[]),M.current[V][z][W]=j},levelControlAriaLabel:typeof k=="function"?k(D):k,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:A,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:C||"DecadeLevelGroup",classNames:E,styles:S,unstyled:T,withCellSpacing:f},V)});return _.jsx(Dy,{classNames:E,styles:S,__staticSelector:C||"DecadeLevelGroup",ref:t,size:P,unstyled:T,...L,children:U})});k4.classes={...Dy.classes,...C4.classes};k4.displayName="@mantine/dates/DecadeLevelGroup";const ELt={numberOfColumns:1},R4=Me((e,t)=>{const n=we("YearLevelGroup",ELt,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,classNames:T,styles:C,unstyled:A,__staticSelector:N,__stopPropagation:k,numberOfColumns:O,levelControlAriaLabel:P,yearLabelFormat:$,size:L,vars:M,...U}=n,B=I.useRef([]),V=Array(O).fill(0).map((D,z)=>{const W=Tt(r).add(z,"years").toDate();return _.jsx(A4,{size:L,monthsListFormat:a,year:W,withNext:z===O-1,withPrevious:z===0,yearLabelFormat:$,__stopPropagation:k,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>rZ({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:B}),__getControlRef:(j,q,G)=>{Array.isArray(B.current[z])||(B.current[z]=[]),Array.isArray(B.current[z][j])||(B.current[z][j]=[]),B.current[z][j][q]=G},levelControlAriaLabel:typeof P=="function"?P(W):P,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:S,getMonthControlProps:u,classNames:T,styles:C,unstyled:A,__staticSelector:N||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(Dy,{classNames:T,styles:C,__staticSelector:N||"YearLevelGroup",ref:t,size:L,unstyled:A,...U,children:V})});R4.classes={...A4.classes,...Dy.classes};R4.displayName="@mantine/dates/YearLevelGroup";const xLt={numberOfColumns:1},N4=Me((e,t)=>{const n=we("MonthLevelGroup",xLt,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,highlightToday:b,__preventFocus:w,nextIcon:E,previousIcon:S,nextLabel:T,previousLabel:C,onNext:A,onPrevious:N,onLevelClick:k,nextDisabled:O,previousDisabled:P,hasNextLevel:$,classNames:L,styles:M,unstyled:U,numberOfColumns:B,levelControlAriaLabel:V,monthLabelFormat:D,__staticSelector:z,__stopPropagation:W,size:j,static:q,vars:G,...te}=n,ve=I.useRef([]),he=Array(B).fill(0).map((ce,me)=>{const Le=Tt(r).add(me,"months").toDate();return _.jsx(I4,{month:Le,withNext:me===B-1,withPrevious:me===0,monthLabelFormat:D,__stopPropagation:W,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(fe,ct)=>rZ({levelIndex:me,rowIndex:ct.rowIndex,cellIndex:ct.cellIndex,event:fe,controlsRef:ve}),__getDayRef:(fe,ct,ze)=>{Array.isArray(ve.current[me])||(ve.current[me]=[]),Array.isArray(ve.current[me][fe])||(ve.current[me][fe]=[]),ve.current[me][fe][ct]=ze},levelControlAriaLabel:typeof V=="function"?V(Le):V,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:w,nextIcon:E,previousIcon:S,nextLabel:T,previousLabel:C,onNext:A,onPrevious:N,onLevelClick:k,nextDisabled:O,previousDisabled:P,hasNextLevel:$,classNames:L,styles:M,unstyled:U,__staticSelector:z||"MonthLevelGroup",size:j,static:q,withCellSpacing:v,highlightToday:b},me)});return _.jsx(Dy,{classNames:L,styles:M,__staticSelector:z||"MonthLevelGroup",ref:t,size:j,...te,children:he})});N4.classes={...Dy.classes,...I4.classes};N4.displayName="@mantine/dates/MonthLevelGroup";var fOe={input:"m_6fa5e2aa"};const SLt={},P4=Me((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:S,value:T,name:C,form:A,type:N,...k}=wbe("PickerInputBase",SLt,e),O=b||(g&&w&&!E&&!S?_.jsx(gy,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),P=()=>{N==="range"&&Array.isArray(T)&&T[0]&&!T[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(Es,{opened:p,onClose:P,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(ri.Wrapper,{...r,children:_.jsxs(xn,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),P()},children:[_.jsx(xn.Target,{children:_.jsx(ri,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:S,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Xi(fOe.input,s==null?void 0:s.input)},...k,children:d||_.jsx(ri.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(xn.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(XDe,{value:T,name:C,form:A,type:N})]})});P4.classes=fOe;P4.displayName="@mantine/dates/PickerInputBase";const Khe=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function oZ({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=Ql(),[a,u,l]=ls({value:_0("add",t,o.getTimezone(),!i),defaultValue:_0("add",n,o.getTimezone(),!i),finalValue:Khe(e),onChange:f=>{r==null||r(_0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Khe(e),u(c))),[c,u,l]}function y9(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function TLt(e){return e===0?"month":e===1?"year":"decade"}function ET(e,t,n){return TLt(vc(y9(e,0),y9(t,0),y9(n,2)))}const CLt={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},D4=Me((e,t)=>{const n=we("Calendar",CLt,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:C,excludeDate:A,renderDay:N,hideOutsideDates:k,hideWeekdays:O,getDayAriaLabel:P,monthLabelFormat:$,nextIcon:L,previousIcon:M,__onDayClick:U,__onDayMouseEnter:B,withCellSpacing:V,highlightToday:D,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:te,classNames:ve,styles:he,unstyled:ce,minDate:me,maxDate:Le,locale:fe,__staticSelector:ct,size:ze,__preventFocus:Ke,__stopPropagation:it,onNextDecade:De,onPreviousDecade:Ae,onNextYear:Ge,onPreviousYear:ht,onNextMonth:Ct,onPreviousMonth:Se,static:ue,__timezoneApplied:Ve,...st}=n,{resolvedClassNames:ge,resolvedStyles:Ne}=Pm({classNames:ve,styles:he,props:n}),[qe,Je]=ls({value:a?ET(a,s,i):void 0,defaultValue:o?ET(o,s,i):void 0,finalValue:ET(void 0,s,i),onChange:u}),[Et,wn]=oZ({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!Ve}),vr={__staticSelector:ct||"Calendar",styles:Ne,classNames:ge,unstyled:ce,size:ze},br=Ql(),kr=h||d||1,Kt=Et||_0("add",new Date,br.getTimezone()),Tn=()=>{const Ln=Tt(Kt).add(kr,"month").toDate();Ct==null||Ct(Ln),wn(Ln)},tr=()=>{const Ln=Tt(Kt).subtract(kr,"month").toDate();Se==null||Se(Ln),wn(Ln)},nr=()=>{const Ln=Tt(Kt).add(kr,"year").toDate();Ge==null||Ge(Ln),wn(Ln)},Ho=()=>{const Ln=Tt(Kt).subtract(kr,"year").toDate();ht==null||ht(Ln),wn(Ln)},Mi=()=>{const Ln=Tt(Kt).add(10*kr,"year").toDate();De==null||De(Ln),wn(Ln)},es=()=>{const Ln=Tt(Kt).subtract(10*kr,"year").toDate();Ae==null||Ae(Ln),wn(Ln)};return _.jsxs(be,{ref:t,size:ze,"data-calendar":!0,...st,children:[qe==="month"&&_.jsx(N4,{month:Kt,minDate:me,maxDate:Le,firstDayOfWeek:E,weekdayFormat:S,weekendDays:T,getDayProps:C,excludeDate:A,renderDay:N,hideOutsideDates:k,hideWeekdays:O,getDayAriaLabel:P,onNext:Tn,onPrevious:tr,hasNextLevel:i!=="month",onLevelClick:()=>Je("year"),numberOfColumns:d,locale:fe,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:L,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:U,__onDayMouseEnter:B,__preventFocus:Ke,__stopPropagation:it,static:ue,withCellSpacing:V,highlightToday:D,...vr}),qe==="year"&&_.jsx(R4,{year:Kt,numberOfColumns:d,minDate:me,maxDate:Le,monthsListFormat:z,getMonthControlProps:W,locale:fe,onNext:nr,onPrevious:Ho,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>Je("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:L,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:j,__onControlMouseEnter:v,__onControlClick:(Ln,Hn)=>{w&&wn(Hn),Je(ET("month",s,i)),g==null||g(Hn)},__preventFocus:Ke,__stopPropagation:it,withCellSpacing:V,...vr}),qe==="decade"&&_.jsx(k4,{decade:Kt,minDate:me,maxDate:Le,yearsListFormat:q,getYearControlProps:G,locale:fe,onNext:Mi,onPrevious:es,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:L,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:te,__onControlMouseEnter:y,__onControlClick:(Ln,Hn)=>{b&&wn(Hn),Je(ET("year",s,i)),m==null||m(Hn)},__preventFocus:Ke,__stopPropagation:it,withCellSpacing:V,...vr})]})});D4.classes={...k4.classes,...R4.classes,...N4.classes};D4.displayName="@mantine/dates/Calendar";function ALt(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:C,highlightToday:A,__updateDateOnYearSelect:N,__updateDateOnMonthSelect:k,firstDayOfWeek:O,weekdayFormat:P,weekendDays:$,getDayProps:L,excludeDate:M,renderDay:U,hideOutsideDates:B,hideWeekdays:V,getDayAriaLabel:D,monthLabelFormat:z,monthsListFormat:W,getMonthControlProps:j,yearLabelFormat:q,yearsListFormat:G,getYearControlProps:te,decadeLabelFormat:ve,allowSingleDateInRange:he,allowDeselect:ce,minDate:me,maxDate:Le,locale:fe,...ct}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:S,onPreviousDecade:T,withCellSpacing:C,highlightToday:A,__updateDateOnYearSelect:N,__updateDateOnMonthSelect:k,firstDayOfWeek:O,weekdayFormat:P,weekendDays:$,getDayProps:L,excludeDate:M,renderDay:U,hideOutsideDates:B,hideWeekdays:V,getDayAriaLabel:D,monthLabelFormat:z,monthsListFormat:W,getMonthControlProps:j,yearLabelFormat:q,yearsListFormat:G,getYearControlProps:te,decadeLabelFormat:ve,allowSingleDateInRange:he,allowDeselect:ce,minDate:me,maxDate:Le,locale:fe},others:ct}}function Xhe(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function ILt({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=oZ({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=S=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(S).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const T=[S,f];T.sort((C,A)=>C.getTime()-A.getTime()),c(T),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(S).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([S,null]),p(null),d(S);return}if(e==="multiple"){l.some(T=>Tt(T).isSame(S,t))?c(l.filter(T=>!Tt(T).isSame(S,t))):c([...l,S]);return}l&&o&&Tt(S).isSame(l,t)?c(null):c(S)},g=S=>f instanceof Date&&h instanceof Date?Xhe(S,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?Xhe(S,l):!1,y=e==="range"?S=>{a==null||a(S),p(null)}:a,v=S=>l[0]instanceof Date&&Tt(S).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=S=>l[1]instanceof Date?Tt(S).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(S).isSame(l[0],t),w=S=>{if(e==="range")return{selected:l.some(C=>C&&Tt(C).isSame(S,t)),inRange:g(S),firstInRange:v(S),lastInRange:b(S),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};if(e==="multiple")return{selected:l.some(C=>C&&Tt(C).isSame(S,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(S,t)||void 0};const T=Tt(l).isSame(S,t);return{selected:T,"data-autofocus":T||void 0}},E=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const kLt={type:"default",defaultLevel:"month",numberOfColumns:1},O4=Me((e,t)=>{const n=we("DatePicker",kLt,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:S,onHoveredDateChange:T,getControlProps:C}=ILt({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:A,resolvedStyles:N}=Pm({classNames:r,styles:i,props:n}),k=Ql();return _.jsx(D4,{ref:t,minLevel:"month",classNames:A,styles:N,__staticSelector:c||"DatePicker",onMouseLeave:S,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,P)=>{T(P),y==null||y(O,P)},__onDayClick:(O,P)=>{E(P),v==null||v(O,P)},getDayProps:O=>({...C(O),...f==null?void 0:f(O)}),...w,date:_0("add",w.date,k.getTimezone(),b),__timezoneApplied:!0})});O4.classes=D4.classes;O4.displayName="@mantine/dates/DatePicker";function RLt({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Ql(),[f,d]=n1(!1),[h,p]=oZ({type:e,value:t,defaultValue:n,onChange:r}),m=FMt({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const NLt={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},aZ=Me((e,t)=>{const n=we("DatePickerInput",NLt,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:S,...T}=n,{resolvedClassNames:C,resolvedStyles:A}=Pm({classNames:c,styles:f,props:n}),{calendarProps:N,others:k}=ALt(T),{_value:O,setValue:P,formattedValue:$,dropdownHandlers:L,dropdownOpened:M,onClear:U,shouldClear:B}=RLt({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:S}),V=Array.isArray(O)?O[0]||E:O||E,D=Ql();return _.jsx(P4,{formattedValue:$,dropdownOpened:M,dropdownHandlers:L,classNames:C,styles:A,unstyled:d,ref:t,onClear:U,shouldClear:B,value:O,size:p,variant:m,dropdownType:g,...k,type:r,__staticSelector:"DatePickerInput",children:_.jsx(O4,{...N,size:p,variant:m,type:r,value:O,defaultDate:V||GMt({maxDate:b,minDate:v,timezone:D.getTimezone()}),onChange:P,locale:l,classNames:C,styles:A,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:_0("add",N.date,D.getTimezone()),__timezoneApplied:!0})})});aZ.classes={...P4.classes,...O4.classes};aZ.displayName="@mantine/dates/DatePickerInput";var dOe={exports:{}},PLt="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",DLt=PLt,OLt=DLt;function hOe(){}function pOe(){}pOe.resetWarningCache=hOe;var $Lt=function(){function e(r,i,s,o,a,u){if(u!==OLt){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:pOe,resetWarningCache:hOe};return n.PropTypes=n,n};dOe.exports=$Lt();var MLt=dOe.exports;const Qhe=nl(MLt),Jhe={};function xV(e,t){e===void 0&&(e=Jhe),t===void 0&&(t=Jhe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var LLt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),FLt=Object.prototype.hasOwnProperty;function SV(e,t){return FLt.call(e,t)}function TV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)SV(e,i)&&r.push(i);return r}function Cl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function CV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Sv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function mOe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function AV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(AV(e[t]))return!0}else if(typeof e=="object"){for(var r=TV(e),i=r.length,s=0;s<i;s++)if(AV(e[r[s]]))return!0}}return!1}function Zhe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var gOe=function(e){LLt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Zhe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Zhe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ui=gOe,jLt=Cl,cw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=M$(n,this.path);r&&(r=Cl(r));var i=f1(n,{op:"remove",path:this.from}).removed;return f1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=M$(n,this.from);return f1(n,{op:"add",path:this.path,value:Cl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:iI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},BLt={add:function(e,t,n){return CV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:cw.move,copy:cw.copy,test:cw.test,_get:cw._get};function M$(e,t){if(t=="")return e;var n={op:"_get",path:t};return f1(e,n),n.value}function f1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):L$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=M$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=iI(e,t.value),o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Cl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=L$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=mOe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!CV(h))throw new Ui("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);CV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ui("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=BLt[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=cw[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ui("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function $4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Cl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=f1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function ULt(e,t,n){var r=f1(e,t);if(r.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function L$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ui("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(cw[e.op]){if(typeof e.path!="string")throw new Ui("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ui('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ui("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&AV(e.value))throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ui("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ui("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=yOe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ui("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function yOe(e,t,n){try{if(!Array.isArray(e))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)$4(Cl(t),Cl(e),n||!0);else{n=n||L$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ui)return i;throw i}}function iI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!iI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!iI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const zLt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ui,_areEquals:iI,applyOperation:f1,applyPatch:$4,applyReducer:ULt,deepClone:jLt,getValueByPointer:M$,validate:yOe,validator:L$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var uZ=new WeakMap,VLt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),HLt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function qLt(e){return uZ.get(e)}function WLt(e,t){return e.observers.get(t)}function GLt(e,t){e.observers.delete(t.callback)}function YLt(e,t){t.unobserve()}function KLt(e,t){var n=[],r,i=qLt(e);if(!i)i=new VLt(e),uZ.set(e,i);else{var s=WLt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Cl(e),t){r.callback=t,r.next=null;var o=function(){IV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){IV(r),clearTimeout(r.next),GLt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new HLt(t,r)),r}function IV(e,t){t===void 0&&(t=!1);var n=uZ.get(e.object);lZ(n.value,e.object,e.patches,"",t),e.patches.length&&$4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function lZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=TV(t),o=TV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(SV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?lZ(c,f,n,r+"/"+Sv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Sv(l),value:Cl(c)}),n.push({op:"replace",path:r+"/"+Sv(l),value:Cl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Sv(l),value:Cl(c)}),n.push({op:"remove",path:r+"/"+Sv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!SV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Sv(l),value:Cl(t[l])})}}}function XLt(e,t,n){n===void 0&&(n=!1);var r=[];return lZ(e,t,r,"",n),r}const QLt=Object.freeze(Object.defineProperty({__proto__:null,compare:XLt,generate:IV,observe:KLt,unobserve:YLt},Symbol.toStringTag,{value:"Module"}));Object.assign({},zLt,QLt,{JsonPatchError:gOe,deepClone:Cl,escapePathComponent:Sv,unescapePathComponent:mOe});var JLt=/("(?:[^\\"]|\\.)*")|[:,]/g,ZLt=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(JLt,function(S,T){return T||S+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const v9=nl(ZLt);function il(e,t,n){return e.fields=t||[],e.fname=n,e}function Ki(e){return e==null?null:e.fname}function ya(e){return e==null?null:e.fields}function vOe(e){return e.length===1?e6t(e[0]):t6t(e)}const e6t=e=>function(t){return t[e]},t6t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Fe(e){throw Error(e)}function Xh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Fe("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Fe("Access path missing closing bracket: "+e),r&&Fe("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function jc(e,t,n){const r=Xh(e);return e=r.length===1?r[0]:e,il((n&&n.get||vOe)(r),[e],t||e)}const Uk=jc("id"),Sa=il(e=>e,[],"identity"),Lg=il(()=>0,[],"zero"),yS=il(()=>1,[],"one"),Bc=il(()=>!0,[],"true"),mg=il(()=>!1,[],"false");function n6t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const bOe=0,cZ=1,fZ=2,_Oe=3,wOe=4;function dZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:n6t,r=e||bOe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=cZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=fZ&&n(t||"warn","WARN",arguments),this},info(){return r>=_Oe&&n(t||"log","INFO",arguments),this},debug(){return r>=wOe&&n(t||"log","DEBUG",arguments),this}}}var Be=Array.isArray;function gt(e){return e===Object(e)}const epe=e=>e!=="__proto__";function vS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=r6t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;bS(r,s,i[s],o)}return r},{})}function bS(e,t,n,r){if(!epe(t))return;let i,s;if(gt(n)&&!Be(n)){s=gt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?bS(s,i,n[i]):epe(i)&&(s[i]=n[i])}else e[t]=n}function r6t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Kn(e){return e[e.length-1]}function pa(e){return e==null||e===""?null:+e}const EOe=e=>t=>e*Math.exp(t),xOe=e=>t=>Math.log(e*t),SOe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),TOe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,F$=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function M4(e,t,n,r){const i=n(e[0]),s=n(Kn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function COe(e,t){return M4(e,t,pa,Sa)}function AOe(e,t){var n=Math.sign(e[0]);return M4(e,t,xOe(n),EOe(n))}function IOe(e,t,n){return M4(e,t,F$(n),F$(1/n))}function kOe(e,t,n){return M4(e,t,SOe(n),TOe(n))}function L4(e,t,n,r,i){const s=r(e[0]),o=r(Kn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function hZ(e,t,n){return L4(e,t,n,pa,Sa)}function pZ(e,t,n){const r=Math.sign(e[0]);return L4(e,t,n,xOe(r),EOe(r))}function j$(e,t,n,r){return L4(e,t,n,F$(r),F$(1/r))}function mZ(e,t,n,r){return L4(e,t,n,SOe(r),TOe(r))}function ROe(e){return 1+~~(new Date(e).getMonth()/3)}function NOe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function yt(e){return e!=null?Be(e)?e:[e]:[]}function POe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function _n(e){return typeof e=="function"}const i6t="descending";function gZ(e,t,n){n=n||{},t=yt(t)||[];const r=[],i=[],s={},o=n.comparator||s6t;return yt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===i6t?-1:1),i.push(a=_n(a)?a:jc(a,null,n)),(ya(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:il(o(i,r),Object.keys(s))}const F4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),s6t=(e,t)=>e.length===1?o6t(e[0],t[0]):a6t(e,t,e.length),o6t=(e,t)=>function(n,r){return F4(e(n),e(r))*t},a6t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=F4(s(r),s(i));return o*t[a]});function Ta(e){return _n(e)?e:()=>e}function yZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function bn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Ph(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function DOe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const u6t=Object.prototype.hasOwnProperty;function Ft(e,t){return u6t.call(e,t)}const rP={};function _S(e){let t={},n;function r(s){return Ft(t,s)&&t[s]!==rP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===rP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=rP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==rP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function OOe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Kn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function ft(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),bn(r,n)}function fw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Oy(e){return typeof e=="boolean"}function w0(e){return Object.prototype.toString.call(e)==="[object Date]"}function $Oe(e){return e&&_n(e[Symbol.iterator])}function ur(e){return typeof e=="number"}function MOe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function vt(e){return typeof e=="string"}function vZ(e,t,n){e&&(e=t?yt(e).map(a=>a.replace(/\\(.)/g,"$1")):yt(e));const r=e&&e.length,i=n&&n.get||vOe,s=a=>i(t?[a]:Xh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return il(o,e,"key")}function LOe(e,t){const n=e[0],r=Kn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const l6t=1e4;function FOe(e){e=+e||l6t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>Ft(t,o)||Ft(n,o),get:o=>Ft(t,o)?t[o]:Ft(n,o)?s(o,n[o]):void 0,set:(o,a)=>Ft(t,o)?t[o]=a:s(o,a)}}function jOe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function xC(e,t){let n="";for(;--t>=0;)n+=e;return n}function BOe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?xC(i,o)+s:r==="center"?xC(i,~~(o/2))+s+xC(i,Math.ceil(o/2)):s+xC(i,o)}function zk(e){return e&&Kn(e)-e[0]||0}function at(e){return Be(e)?"["+e.map(at)+"]":gt(e)||vt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function bZ(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const c6t=e=>ur(e)||w0(e)?e:Date.parse(e);function _Z(e,t){return t=t||c6t,e==null||e===""?null:t(e)}function wZ(e){return e==null||e===""?null:e+""}function nd(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function UOe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function xg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function f6t(e){return e}function d6t(e){if(e==null)return f6t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function h6t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function p6t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return tpe(e,n)})}:tpe(e,t)}function tpe(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=zOe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function zOe(e,t){var n=d6t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&h6t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function m6t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function g6t(e){return zOe(e,y6t.apply(this,arguments))}function y6t(e,t,n){var r,i,s;if(arguments.length>1)r=v6t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:m6t(e,r)}}function v6t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const $o="year",Qu="quarter",va="month",Fs="week",Ju="date",ha="day",Dh="dayofyear",Vl="hours",Hl="minutes",Uc="seconds",rd="milliseconds",EZ=[$o,Qu,va,Fs,Ju,ha,Dh,Vl,Hl,Uc,rd],b9=EZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function xZ(e){const t=yt(e).slice(),n={};return t.length||Fe("Missing time unit."),t.forEach(i=>{Ft(b9,i)?n[i]=1:Fe(`Invalid time unit: ${i}.`)}),(n[Fs]||n[ha]?1:0)+(n[Qu]||n[va]||n[Ju]?1:0)+(n[Dh]?1:0)>1&&Fe(`Incompatible time units: ${e}`),t.sort((i,s)=>b9[i]-b9[s]),t}const b6t={[$o]:"%Y ",[Qu]:"Q%q ",[va]:"%b ",[Ju]:"%d ",[Fs]:"W%U ",[ha]:"%a ",[Dh]:"%j ",[Vl]:"%H:00",[Hl]:"00:%M",[Uc]:":%S",[rd]:".%L",[`${$o}-${va}`]:"%Y-%m ",[`${$o}-${va}-${Ju}`]:"%Y-%m-%d ",[`${Vl}-${Hl}`]:"%H:%M"};function VOe(e,t){const n=bn({},b6t,t),r=xZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const Dv=new Date;function SZ(e){return Dv.setFullYear(e),Dv.setMonth(0),Dv.setDate(1),Dv.setHours(0,0,0,0),Dv}function HOe(e){return WOe(new Date(e))}function qOe(e){return kV(new Date(e))}function WOe(e){return Qp.count(SZ(e.getFullYear())-1,e)}function kV(e){return Kx.count(SZ(e.getFullYear())-1,e)}function RV(e){return SZ(e).getDay()}function _6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function GOe(e){return KOe(new Date(e))}function YOe(e){return NV(new Date(e))}function KOe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return h0.count(t-1,e)}function NV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Xx.count(t-1,e)}function PV(e){return Dv.setTime(Date.UTC(e,0,1)),Dv.getUTCDay()}function w6t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function XOe(e,t,n,r,i){const s=t||1,o=Kn(e),a=(y,v,b)=>(b=b||y,E6t(n[b],r[b],y===o&&s,v)),u=new Date,l=nd(e),c=l[$o]?a($o):Ta(2012),f=l[va]?a(va):l[Qu]?a(Qu):Lg,d=l[Fs]&&l[ha]?a(ha,1,Fs+ha):l[Fs]?a(Fs,1):l[ha]?a(ha,1):l[Ju]?a(Ju,1):l[Dh]?a(Dh,1):yS,h=l[Vl]?a(Vl):Lg,p=l[Hl]?a(Hl):Lg,m=l[Uc]?a(Uc):Lg,g=l[rd]?a(rd):Lg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function E6t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function XE(e,t,n){return t+e*7-(n+6)%7}const x6t={[$o]:e=>e.getFullYear(),[Qu]:e=>Math.floor(e.getMonth()/3),[va]:e=>e.getMonth(),[Ju]:e=>e.getDate(),[Vl]:e=>e.getHours(),[Hl]:e=>e.getMinutes(),[Uc]:e=>e.getSeconds(),[rd]:e=>e.getMilliseconds(),[Dh]:e=>WOe(e),[Fs]:e=>kV(e),[Fs+ha]:(e,t)=>XE(kV(e),e.getDay(),RV(t)),[ha]:(e,t)=>XE(1,e.getDay(),RV(t))},S6t={[Qu]:e=>3*e,[Fs]:(e,t)=>XE(e,0,RV(t))};function QOe(e,t){return XOe(e,t||1,x6t,S6t,_6t)}const T6t={[$o]:e=>e.getUTCFullYear(),[Qu]:e=>Math.floor(e.getUTCMonth()/3),[va]:e=>e.getUTCMonth(),[Ju]:e=>e.getUTCDate(),[Vl]:e=>e.getUTCHours(),[Hl]:e=>e.getUTCMinutes(),[Uc]:e=>e.getUTCSeconds(),[rd]:e=>e.getUTCMilliseconds(),[Dh]:e=>KOe(e),[Fs]:e=>NV(e),[ha]:(e,t)=>XE(1,e.getUTCDay(),PV(t)),[Fs+ha]:(e,t)=>XE(NV(e),e.getUTCDay(),PV(t))},C6t={[Qu]:e=>3*e,[Fs]:(e,t)=>XE(e,0,PV(t))};function JOe(e,t){return XOe(e,t||1,T6t,C6t,w6t)}const A6t={[$o]:Sh,[Qu]:xA.every(3),[va]:xA,[Fs]:Kx,[Ju]:Qp,[ha]:Qp,[Dh]:Qp,[Vl]:y6,[Hl]:m6,[Uc]:Fp,[rd]:AE},I6t={[$o]:Th,[Qu]:SA.every(3),[va]:SA,[Fs]:Xx,[Ju]:h0,[ha]:h0,[Dh]:h0,[Vl]:v6,[Hl]:g6,[Uc]:Fp,[rd]:AE};function wS(e){return A6t[e]}function ES(e){return I6t[e]}function ZOe(e,t,n){return e?e.offset(t,n):void 0}function e3e(e,t,n){return ZOe(wS(e),t,n)}function t3e(e,t,n){return ZOe(ES(e),t,n)}function n3e(e,t,n,r){return e?e.range(t,n,r):void 0}function r3e(e,t,n,r){return n3e(wS(e),t,n,r)}function i3e(e,t,n,r){return n3e(ES(e),t,n,r)}const SC=1e3,TC=SC*60,CC=TC*60,j4=CC*24,k6t=j4*7,npe=j4*30,DV=j4*365,s3e=[$o,va,Ju,Vl,Hl,Uc,rd],AC=s3e.slice(0,-1),IC=AC.slice(0,-1),kC=IC.slice(0,-1),R6t=kC.slice(0,-1),N6t=[$o,Fs],rpe=[$o,va],o3e=[$o],xT=[[AC,1,SC],[AC,5,5*SC],[AC,15,15*SC],[AC,30,30*SC],[IC,1,TC],[IC,5,5*TC],[IC,15,15*TC],[IC,30,30*TC],[kC,1,CC],[kC,3,3*CC],[kC,6,6*CC],[kC,12,12*CC],[R6t,1,j4],[N6t,1,k6t],[rpe,1,npe],[rpe,3,3*npe],[o3e,1,DV]];function a3e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(zk(t))/n;let i=Wx(a=>a[2]).right(xT,r),s,o;return i===xT.length?(s=o3e,o=D0(t[0]/DV,t[1]/DV,n)):i?(i=xT[r/xT[i-1][2]<xT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=s3e,o=Math.max(D0(t[0],t[1],n),1)),{units:s,step:o}}function RC(e){const t={};return n=>t[n]||(t[n]=e(n))}function P6t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=D6t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function D6t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function u3e(e){const t=RC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=P1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return P6t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=P1(o??",f");const a=D0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=RTe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=NTe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=kTe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let OV;l3e();function l3e(){return OV=u3e({format:fh,formatPrefix:qK})}function c3e(e){return u3e(ITe(e))}function B$(e){return arguments.length?OV=c3e(e):OV}function ipe(e,t,n){n=n||{},gt(n)||Fe(`Invalid time multi-format specifier: ${n}`);const r=t(Uc),i=t(Hl),s=t(Vl),o=t(Ju),a=t(Fs),u=t(va),l=t(Qu),c=t($o),f=e(n[rd]||".%L"),d=e(n[Uc]||":%S"),h=e(n[Hl]||"%I:%M"),p=e(n[Vl]||"%I %p"),m=e(n[Ju]||n[ha]||"%a %d"),g=e(n[Fs]||"%b %d"),y=e(n[va]||"%B"),v=e(n[Qu]||"%B"),b=e(n[$o]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function f3e(e){const t=RC(e.format),n=RC(e.utcFormat);return{timeFormat:r=>vt(r)?t(r):ipe(t,wS,r),utcFormat:r=>vt(r)?n(r):ipe(n,ES,r),timeParse:RC(e.parse),utcParse:RC(e.utcParse)}}let $V;d3e();function d3e(){return $V=f3e({format:sX,parse:Vg,utcFormat:ck,utcParse:VCe})}function h3e(e){return f3e(FCe(e))}function sI(e){return arguments.length?$V=h3e(e):$V}const MV=(e,t)=>bn({},e,t);function p3e(e,t){const n=e?c3e(e):B$(),r=t?h3e(t):sI();return MV(n,r)}function TZ(e,t){const n=arguments.length;return n&&n!==2&&Fe("defaultLocale expects either zero or two arguments."),n?MV(B$(e),sI(t)):MV(B$(),sI())}function O6t(){return l3e(),d3e(),TZ()}const $6t=/^(data:|([A-Za-z]+:)?\/\/)/,M6t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,L6t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,spe="file://";function F6t(e,t){return n=>({options:n||{},sanitize:B6t,load:j6t,fileAccess:!!t,file:U6t(t),http:V6t(e)})}async function j6t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function B6t(e,t){t=bn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=M6t.test(e.replace(L6t,""));(e==null||typeof e!="string"||!a)&&Fe("Sanitize failure, invalid URI: "+at(e));const u=$6t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(spe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(spe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function U6t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):z6t}async function z6t(){Fe("No file system access.")}function V6t(e){return e?async function(t,n){const r=bn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?_n(s[i])?s[i]():s.text():Fe(s.status+""+s.statusText)}:H6t}async function H6t(){Fe("No HTTP fetch method available.")}const q6t=e=>e!=null&&e===e,W6t=e=>e==="true"||e==="false"||e===!0||e===!1,G6t=e=>!Number.isNaN(Date.parse(e)),m3e=e=>!Number.isNaN(+e)&&!(e instanceof Date),Y6t=e=>m3e(e)&&Number.isInteger(+e),LV={boolean:bZ,integer:pa,number:pa,date:_Z,string:wZ,unknown:Sa},iP=[W6t,Y6t,m3e,G6t],K6t=["boolean","integer","number","date"];function g3e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=iP.length,i=iP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&q6t(u)&&!iP[a](u)&&(i[a]=0,++o,o===iP.length))return"string";return K6t[i.reduce((s,o)=>s===0?o:s,0)-1]}function y3e(e,t){return t.reduce((n,r)=>(n[r]=g3e(e,r),n),{})}function ope(e){const t=function(n,r){const i={delimiter:e};return CZ(n,r?bn(r,i):i)};return t.responseType="text",t}function CZ(e,t){return t.header&&(e=t.header.map(at).join(t.delimiter)+`
`+e),TTe(t.delimiter).parse(e+"")}CZ.responseType="text";function X6t(e){return typeof Buffer=="function"&&_n(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function AZ(e,t){const n=t&&t.property?jc(t.property):Sa;return gt(e)&&!X6t(e)?Q6t(n(e),t):n(JSON.parse(e))}AZ.responseType="json";function Q6t(e,t){return!Be(e)&&$Oe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const J6t={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function v3e(e,t){let n,r,i,s;return e=AZ(e,t),t&&t.feature?(n=p6t,i=t.feature):t&&t.mesh?(n=g6t,i=t.mesh,s=J6t[t.filter]):Fe("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Fe("Invalid TopoJSON object: "+i),r&&r.features||[r]}v3e.responseType="json";const ID={dsv:CZ,csv:ope(","),tsv:ope("	"),json:AZ,topojson:v3e};function IZ(e,t){return arguments.length>1?(ID[e]=t,this):Ft(ID,e)?ID[e]:null}function b3e(e){const t=IZ(e);return t&&t.responseType||"text"}function _3e(e,t,n,r){t=t||{};const i=IZ(t.type||"json");return i||Fe("Unknown data format type: "+t.type),e=i(e,t),t.parse&&Z6t(e,t.parse,n,r),Ft(e,"columns")&&delete e.columns,e}function Z6t(e,t,n,r){if(!e.length)return;const i=sI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=y3e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!LV[p])throw Error("Illegal format pattern: "+h+":"+p);return LV[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const B4=F6t(typeof fetch<"u"&&fetch,null);function U4(e){const t=e||Sa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function kD(e,t){try{await t(e)}catch(n){e.error(n)}}const w3e=Symbol("vega_id");let e4t=1;function z4(e){return!!(e&&Mt(e))}function Mt(e){return e[w3e]}function E3e(e,t){return e[w3e]=t,e}function xr(e){const t=e===Object(e)?e:{data:e};return Mt(t)?t:E3e(t,e4t++)}function kZ(e){return V4(e,xr({}))}function V4(e,t){for(const n in e)t[n]=e[n];return t}function x3e(e,t){return E3e(t,Mt(e))}function Rb(e,t){return e?t?(n,r)=>e(n,r)||Mt(t(n))-Mt(t(r)):(n,r)=>e(n,r)||Mt(n)-Mt(r):null}function S3e(e){return e&&e.constructor===Nb}function Nb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Nb,insert(a){const u=yt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=_n(a)?r:t,l=yt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Ta(l)};return _n(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return _n(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Mt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Mt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Mt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Mt(m),l[g]?l[g]=1:a.add.push(xr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Mt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Mt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Mt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Mt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Mt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const RD="_:mod:_";function H4(){Object.defineProperty(this,RD,{writable:!0,value:{}})}H4.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[RD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=Be(n)?1+n.length:-1),i},modified(e,t){const n=this[RD];if(arguments.length){if(Be(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[RD]={},this}};let t4t=0;const n4t="pulse",r4t=new H4,i4t=1,s4t=2;function Kr(e,t,n,r){this.id=++t4t,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function ape(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Kr.prototype={targets(){return this._targets||(this._targets=U4(Uk))},set(e){return this.value!==e?(this.value=e,1):0},skip:ape(i4t),modified:ape(s4t),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new H4,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Kr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===n4t)yt(a).forEach(f=>{f instanceof Kr?f!==this&&(f.targets().add(this),s.push(f)):Fe("Pulse parameters must be operator instances.")}),this.source=a;else if(Be(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||r4t,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function o4t(e,t,n,r){let i=1,s;return e instanceof Kr?s=e:e&&e.prototype instanceof Kr?s=new e:_n(e)?s=new Kr(null,e):(i=0,s=new Kr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function a4t(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let u4t=0;function q4(e,t,n){this.id=++u4t,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function gg(e,t,n){return new q4(e,t,n)}q4.prototype={_filter:Bc,_apply:Sa,targets(){return this._targets||(this._targets=U4(Uk))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=gg(e);return this.targets().add(t),t},apply(e){const t=gg(null,e);return this.targets().add(t),t},merge(){const e=gg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=gg();return this.targets().add(gg(null,null,yZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(gg(null,null,()=>n=!0)),t.targets().add(gg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Bc,this._targets=null}};function l4t(e,t,n,r){const i=this,s=gg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=yt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function c4t(e,t){const n=this.locale();return _3e(e,t,n.timeParse,n.utcParse)}function f4t(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function d4t(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:b3e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function h4t(e,t,n){const r=this,i=r._pending||p4t(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Bc).insert(s.data||[])),i.done(),s}function p4t(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const m4t={skip:!0};function g4t(e,t,n,r,i){return(e instanceof Kr?v4t:y4t)(this,e,t,n,r,i),this}function y4t(e,t,n,r,i,s){const o=bn({},s,m4t);let a,u;_n(n)||(n=Ta(n)),r===void 0?a=l=>e.touch(n(l)):_n(r)?(u=new Kr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;S3e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function v4t(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Kr(null,b4t(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function b4t(e,t){return t=_n(t)?t:Ta(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function _4t(e){e.rank=++this._rank}function w4t(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Fe("Cycle detected in dataflow graph.")}const U$={},Ld=1,Sg=2,wp=4,E4t=Ld|Sg,upe=Ld|wp,p_=Ld|Sg|wp,lpe=8,ST=16,cpe=32,fpe=64;function E0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function _9(e,t){const n=[];return xg(e,t,r=>n.push(r)),n}function dpe(e,t){const n={};return e.visit(t,r=>{n[Mt(r)]=1}),r=>n[Mt(r)]?null:r}function sP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}E0.prototype={StopPropagation:U$,ADD:Ld,REM:Sg,MOD:wp,ADD_REM:E4t,ADD_MOD:upe,ALL:p_,REFLOW:lpe,SOURCE:ST,NO_SOURCE:cpe,NO_FIELDS:fpe,fork(e){return new E0(this.dataflow).init(this,e)},clone(){const e=this.fork(p_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(p_|ST)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new E0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&fpe)&&(n.fields=e.fields),t&Ld?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Sg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&wp?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&cpe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||p_;return t&Ld&&this.add.length||t&Sg&&this.rem.length||t&wp&&this.mod.length},reflow(e){if(e)return this.fork(p_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(wp,dpe(this,Ld))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return Be(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?Be(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ld&&(n.addF=sP(n.addF,t)),e&Sg&&(n.remF=sP(n.remF,t)),e&wp&&(n.modF=sP(n.modF,t)),e&ST&&(n.srcF=sP(n.srcF,t)),n},materialize(e){e=e||p_;const t=this;return e&Ld&&t.addF&&(t.add=_9(t.add,t.addF),t.addF=null),e&Sg&&t.remF&&(t.rem=_9(t.rem,t.remF),t.remF=null),e&wp&&t.modF&&(t.mod=_9(t.mod,t.modF),t.modF=null),e&ST&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&ST)return xg(n.source,n.srcF,r),n;e&Ld&&xg(n.add,n.addF,r),e&Sg&&xg(n.rem,n.remF,r),e&wp&&xg(n.mod,n.modF,r);const i=n.source;if(e&lpe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?xg(i,dpe(n,upe),r):xg(i,n.srcF,r))}return n}};function RZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}ft(RZ,E0,{fork(e){const t=new E0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?Be(e)?e.some(r=>n[r]):n[e]:0},filter(){Fe("MultiPulse does not support filtering.")},materialize(){Fe("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function x4t(e,t,n){const r=this,i=[];if(r._pulse)return T3e(r);if(r._pending&&await r._pending,t&&await kD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new E0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=U4(Uk);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=U$),u!==U$&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await kD(r,c[f].callback)}return n&&await kD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function S4t(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function T4t(e,t,n){return this._pulse?T3e(this):(this.evaluate(e,t,n),this)}function C4t(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function T3e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function A4t(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function I4t(e,t){const n=e.source,r=this._clock;return n&&Be(n)?new RZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||k4t(this._pulse,n&&n.pulse)}function k4t(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==U$&&(e.source=t.source),e)}const NZ={skip:!1,force:!1};function R4t(e,t){const n=t||NZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function N4t(e,t,n){const r=n||NZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function P4t(e,t,n){this.touch(e,n||NZ);const r=new E0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function D4t(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),C3e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,O4t(t,0,e)):r=n,r}}}function C3e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function O4t(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,C3e(e,r,t,n)}function Gw(){this.logger(dZ()),this.logLevel(cZ),this._clock=0,this._rank=0,this._locale=TZ();try{this._loader=B4()}catch{}this._touched=U4(Uk),this._input={},this._pulse=null,this._heap=D4t((e,t)=>e.qrank-t.qrank),this._postrun=[]}function TT(e){return function(){return this._log[e].apply(this,arguments)}}Gw.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:TT("error"),warn:TT("warn"),info:TT("info"),debug:TT("debug"),logLevel:TT("level"),cleanThreshold:1e4,add:o4t,connect:a4t,rank:_4t,rerank:w4t,pulse:P4t,touch:R4t,update:N4t,changeset:Nb,ingest:f4t,parse:c4t,preload:h4t,request:d4t,events:l4t,on:g4t,evaluate:x4t,run:T4t,runAsync:S4t,runAfter:C4t,_enqueue:A4t,_getPulse:I4t};function Re(e,t){Kr.call(this,e,null,t)}ft(Re,Kr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const QE={};function A3e(e){const t=I3e(e);return t&&t.Definition||null}function I3e(e){return e=e&&e.toLowerCase(),Ft(QE,e)?QE[e]:null}function*k3e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function PZ(e,t,n){const r=Float64Array.from(k3e(e,n));return r.sort(Kp),t.map(i=>HSe(r,i))}function DZ(e,t){return PZ(e,[.25,.5,.75],t)}function OZ(e,t){const n=e.length,r=Uht(e,t),i=DZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function R3e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var zc=Math.random;function $4t(e){zc=e}function N3e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(k3e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(zc()*s)];c[l]=a/s}return c.sort(Kp),[Rw(c,n/2),Rw(c,1-n/2)]}function P3e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?M4t(s,t+t/4):s}function M4t(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function L4t(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function F4t(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*zc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const D3e=Math.sqrt(2*Math.PI),j4t=Math.SQRT2;let CT=NaN;function W4(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(CT===CT)n=CT,CT=NaN;else{do n=zc()*2-1,r=zc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,CT=r*s}return e+n*t}function $Z(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*D3e)}function G4(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function Y4(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*j4t*B4t(2*e-1)}function B4t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function MZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>W4(n,r),pdf:s=>$Z(s,n,r),cdf:s=>G4(s,n,r),icdf:s=>Y4(s,n,r)};return i.mean(e).stdev(t)}function LZ(e,t){const n=MZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=OZ(e)),i):t},sample(){return e[~~(zc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function FZ(e,t){return e=e||0,t=t??1,Math.exp(e+W4()*t)}function jZ(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*D3e*e)}function BZ(e,t,n){return G4(Math.log(e),t,n)}function UZ(e,t,n){return Math.exp(Y4(e,t,n))}function O3e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>FZ(n,r),pdf:s=>jZ(s,n,r),cdf:s=>BZ(s,n,r),icdf:s=>UZ(s,n,r)};return i.mean(e).stdev(t)}function $3e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=zc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function zZ(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*zc()}function VZ(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function HZ(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function qZ(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function M3e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>zZ(n,r),pdf:s=>VZ(s,n,r),cdf:s=>HZ(s,n,r),icdf:s=>qZ(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function WZ(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Vk(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function K4(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function Hk(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function xS(e,t,n,r,i){let s=0,o=0;return Hk(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function GZ(e,t,n){let r=0,i=0,s=0,o=0,a=0;Hk(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Vk(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:xS(e,t,n,i,l)}}function L3e(e,t,n){let r=0,i=0,s=0,o=0,a=0;Hk(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=Vk(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:xS(e,t,n,i,l)}}function F3e(e,t,n){const[r,i,s,o]=K4(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;Hk(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=Vk(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:xS(e,t,n,o,y)}}function j3e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;Hk(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=Vk(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:xS(e,t,n,a,c)}}function YZ(e,t,n){const[r,i,s,o]=K4(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,S=T=>(T=T-s,b*T*T+w*T+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:S,rSquared:xS(e,t,n,o,S)}}function B3e(e,t,n,r){if(r===0)return WZ(e,t,n);if(r===1)return GZ(e,t,n);if(r===2)return YZ(e,t,n);const[i,s,o,a]=K4(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=z4t(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:U4t(f,y,-o,a),predict:v,rSquared:xS(e,t,n,a,v)}}function U4t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function z4t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const hpe=2,ppe=1e-12;function U3e(e,t,n,r){const[i,s,o,a]=K4(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=hpe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,S=0,T=0,C=0,A=0;const N=1/Math.abs(i[w]-y||1);for(let P=v;P<=b;++P){const $=i[P],L=s[P],M=V4t(Math.abs(y-$)*N)*d[P],U=$*M;E+=M,S+=U,T+=L*M,C+=L*U,A+=$*U}const[k,O]=Vk(S/E,T/E,C/E,A/E);c[g]=k+O*y,f[g]=Math.abs(s[g]-c[g]),H4t(i,g+1,p)}if(h===hpe)break;const m=qSe(f);if(Math.abs(m)<ppe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?ppe:(v=1-y*y)*v}return q4t(i,c,o,a)}function V4t(e){return(e=1-e*e*e)*e*e}function H4t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function q4t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const W4t=.5*Math.PI/180;function X4(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=G4t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&Y4t(f,m,d,h,p)>W4t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function G4t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function Y4t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function K4t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function FV(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:K4t(e)}function z3e(e,t,n){return n||e+(t?"_"+t:"")}const w9=()=>{},X4t={init:w9,add:w9,rem:w9,idx:0},oI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},qk=Object.keys(oI).filter(e=>e!=="__count__");function Q4t(e,t){return(n,r)=>bn({name:e,aggregate_param:r,out:n||e},X4t,t)}[...qk,"__count__"].forEach(e=>{oI[e]=Q4t(e,oI[e])});function V3e(e,t,n){return oI[e](n,t)}function H3e(e,t){return e.idx-t.idx}function J4t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=oI[i]())})};return e.forEach(n),Object.values(t).sort(H3e)}function Z4t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function eFt(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function tFt(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function nFt(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function q3e(e,t){const n=t||Sa,r=J4t(e),i=e.slice().sort(H3e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=Z4t,s.prototype.add=eFt,s.prototype.rem=tFt,s.prototype.set=nFt,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function KZ(e){this._key=e?jc(e):Mt,this.reset()}const Vo=KZ.prototype;Vo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Vo.add=function(e){this._add.push(e)};Vo.rem=function(e){this._rem.push(e)};Vo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Vo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",Ft(n,s)||(n[s]=1,++i);return i};Vo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=DOe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Vo.argmin=function(e){return this.extent(e)[0]||{}};Vo.argmax=function(e){return this.extent(e)[1]||{}};Vo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Vo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Vo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=DZ(this.values(),e),this._get=e),this._q};Vo.q1=function(e){return this.quartile(e)[0]};Vo.q2=function(e){return this.quartile(e)[1]};Vo.q3=function(e){return this.quartile(e)[2]};Vo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=N3e(this.values(),1e3,.05,e),this._get=e),this._ci};Vo.ci0=function(e){return this.ci(e)[0]};Vo.ci1=function(e){return this.ci(e)[1]};function J0(e){Re.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}J0.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:qk},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ft(J0,Re,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=yt(ya(v)),w=b.length;let E=0,S;for(;E<w;++E)r[S=b[E]]||(r[S]=1,t.push(S))}this._dims=yt(e.groupby),this._dnames=this._dims.map(v=>{const b=Ki(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:FV(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Fe("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Fe("Null aggregate field specified."),m=Ki(f),g=z3e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(V3e(d,h,g))}return this._measures=this._measures.map(v=>q3e(v,v.field)),Object.create(null)},cellkey:FV(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new KZ),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?x3e(t.tuple,s):xr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const rFt=1e-14;function XZ(e){Re.call(this,null,e)}XZ.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ft(XZ,Re,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(ya(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=R3e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=pa(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(rFt+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=il(u,ya(t),e.name||"bin_"+Ki(t))}});function W3e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?jOe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function QZ(e){Re.call(this,[],e)}QZ.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ft(QZ,Re,{transform(e,t){const n=t.fork(t.ALL),r=W3e(Mt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Rb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function G3e(e){Kr.call(this,null,iFt,e)}ft(G3e,Kr);function iFt(e){return this.value&&!e.modified()?this.value:gZ(e.fields,e.orders)}function JZ(e){Re.call(this,null,e)}JZ.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function sFt(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ft(JZ,Re,{transform(e,t){const n=f=>d=>{for(var h=sFt(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=xr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function ZZ(e){Re.call(this,null,e)}ZZ.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ft(ZZ,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=oFt(a,i,s,e.filter||Bc)):n.mod=a,n.source=this.value,n.modifies(r)}});function oFt(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(xr(s)),s={},s[t]=l);return i}const mpe={kde:LZ,mixture:$3e,normal:MZ,lognormal:O3e,uniform:M3e},aFt="distributions",gpe="function",uFt="field";function Y3e(e,t){const n=e[gpe];Ft(mpe,n)||Fe("Unknown distribution function: "+n);const r=mpe[n]();for(const i in e)i===uFt?r.data((e.from||t()).map(e[i])):i===aFt?r[i](e[i].map(s=>Y3e(s,t))):typeof r[i]===gpe&&r[i](e[i]);return r}function eee(e){Re.call(this,null,e)}const K3e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],lFt={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:K3e},{name:"weights",type:"number",array:!0}]};eee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:K3e.concat(lFt)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ft(eee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=Y3e(e.distribution,cFt(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Fe("Invalid density method: "+o),!e.extent&&!r.data&&Fe("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Ph(r.data()),l=X4(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],xr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function cFt(e){return()=>e.materialize(e.SOURCE).source}function X3e(e,t){return e?e.map((n,r)=>t[r]||Ki(n)):null}function tee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const Q3e="bin";function nee(e){Re.call(this,null,e)}nee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:Q3e}]};const fFt=(e,t)=>zk(Ph(e,t))/30;ft(nee,Re,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=tee(t.source,e.groupby,Sa),i=e.smooth||!1,s=e.field,o=e.step||fFt(n,s),a=Rb((p,m)=>s(p)-s(m)),u=e.as||Q3e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of P3e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function J3e(e){Kr.call(this,null,dFt,e),this.modified(!0)}ft(J3e,Kr);function dFt(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:il(n=>t(n,e),ya(t),Ki(t))}function ree(e){Re.call(this,[void 0,void 0],e)}ree.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ft(ree,Re,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=pa(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Ki(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function iee(e,t){Kr.call(this,e),this.parent=t,this.count=0}ft(iee,Kr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function Q4(e){Re.call(this,{},e),this._keys=_S();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ft(Q4,Re,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=Ft(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new iee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Mt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Mt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Mt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Mt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Mt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function Z3e(e){Kr.call(this,null,hFt,e)}ft(Z3e,Kr);function hFt(e){return this.value&&!e.modified()?this.value:Be(e.name)?yt(e.name).map(t=>jc(t)):jc(e.name,e.as)}function see(e){Re.call(this,_S(),e)}see.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ft(see,Re,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Mt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Mt(f),1)});function c(f){const d=Mt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function oee(e){Re.call(this,[],e)}oee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ft(oee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=X3e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=kZ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function aee(e){Re.call(this,[],e)}aee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ft(aee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Ki),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=kZ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function uee(e){Re.call(this,null,e)}uee.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ft(uee,Re,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function e$e(e){Re.call(this,[],e)}ft(e$e,Re,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=xr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const oP={value:"value",median:qSe,mean:Xht,min:pA,max:uh},pFt=[];function lee(e){Re.call(this,[],e)}lee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function mFt(e){var t=e.method||oP.value,n;if(oP[t]==null)Fe("Unrecognized imputation method: "+t);else return t===oP.value?(n=e.value!==void 0?e.value:0,()=>n):oP[t]}function gFt(e){const t=e.field;return n=>n?t(n):NaN}ft(lee,Re,{transform(e,t){var n=t.fork(t.ALL),r=mFt(e),i=gFt(e),s=Ki(e.field),o=Ki(e.key),a=(e.groupby||[]).map(Ki),u=yFt(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(xr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function yFt(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):pFt)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function cee(e){J0.call(this,e)}cee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:qk},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ft(cee,J0,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{bn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function fee(e){Re.call(this,null,e)}fee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ft(fee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=tee(r,e.groupby,e.field),s=(e.groupby||[]).map(Ki),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Fe("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Ph(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=LZ(h,o)[a],m=e.counts?h.length:1,g=c||Ph(h);X4(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(xr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function t$e(e){Kr.call(this,null,vFt,e)}ft(t$e,Kr);function vFt(e){return this.value&&!e.modified()?this.value:vZ(e.fields,e.flat)}function n$e(e){Re.call(this,[],e),this._pending=null}ft(n$e,Re,{transform(e,t){const n=t.dataflow;return this._pending?E9(this,t,this._pending):bFt(e)?t.StopPropagation:e.values?E9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=yt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>E9(this,t,yt(r.data)))}});function bFt(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function E9(e,t,n){n.forEach(xr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function dee(e){Re.call(this,{},e)}dee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ft(dee,Re,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Fe('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Fe('The "as" parameter has too few output field names.'),c=c||i.map(Ki),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Fe("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function r$e(e){Kr.call(this,null,_Ft,e)}ft(r$e,Kr);function _Ft(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function i$e(e){Kr.call(this,null,wFt,e)}ft(i$e,Kr);function wFt(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function s$e(e){Re.call(this,null,e)}ft(s$e,Re,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function hee(e){J0.call(this,e)}hee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:qk,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ft(hee,J0,{_transform:J0.prototype.transform,transform(e,t){return this._transform(EFt(e,t),t)}});function EFt(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=ya(n).concat(ya(r)),o=SFt(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>xFt(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function xFt(e,t,n,r){return il(i=>t(i)===e?n(i):NaN,r,e+"")}function SFt(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(F4),t?i.slice(0,t):i}function o$e(e){Q4.call(this,e)}ft(o$e,Q4,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Mt(s),n,t,s);return(e.modified("field")||r&&t.modified(ya(r)))&&Fe("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(xr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function pee(e){Re.call(this,null,e)}pee.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ft(pee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=X3e(e.fields,e.as||[]),s=r?(a,u)=>TFt(a,u,r,i):V4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Mt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,xr({}));o[Mt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Mt(a)]))}),n}});function TFt(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function a$e(e){Re.call(this,null,e)}ft(a$e,Re,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function mee(e){Re.call(this,null,e)}mee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const CFt=1e-14;ft(mee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=tee(i,e.groupby,e.field),o=(e.groupby||[]).map(Ki),a=[],u=e.step||.01,l=e.probs||Sl(u/2,1-CFt,u),c=l.length;return s.forEach(f=>{const d=PZ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(xr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function u$e(e){Re.call(this,null,e)}ft(u$e,Re,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Mt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=kZ(i);r[Mt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Mt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function gee(e){Re.call(this,[],e),this.count=0}gee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ft(gee,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Mt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*zc()),d<o.length&&d>=u&&(f=o[d],s[Mt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Mt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Mt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Mt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Mt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Mt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Mt(c)])),this.count=a,this.value=n.source=o,n}});function yee(e){Re.call(this,null,e)}yee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ft(yee,Re,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Sl(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,xr(s)}),n.add=t.add.concat(this.value),n}});function l$e(e){Re.call(this,null,e),this.modified(!0)}ft(l$e,Re,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function vee(e){Re.call(this,null,e)}const c$e=["unit0","unit1"];vee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:EZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:c$e}]};ft(vee,Re,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?ES:wS)(s.unit).offset,a=e.as||c$e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ya(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:a3e({extent:e.extent||Ph(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=xZ(r),o=this.value||{},a=(n?JOe:QOe)(s,i);return a.unit=Kn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function f$e(e){Re.call(this,_S(),e)}ft(f$e,Re,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function d$e(e){Re.call(this,null,e)}ft(d$e,Re,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Rb(e.sort)):t.source).map(e.field))}});function AFt(e,t,n,r){const i=aI[e](t,n);return{init:i.init||Lg,update:function(s,o){o[r]=i.next(s)}}}const aI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=aI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Fe("ntile num must be greater than zero.");const n=aI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Fe("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=IFt(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function IFt(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const kFt=Object.keys(aI);function h$e(e){const t=yt(e.ops),n=yt(e.fields),r=yt(e.params),i=yt(e.aggregate_params),s=yt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){yt(ya(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Ki(g),w=z3e(p,b,s[m]);if(h(g),o.push(w),Ft(aI,p))a.push(AFt(p,g,y,w));else{if(g==null&&p!=="count"&&Fe("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(V3e(p,v,w))}}),(c.length||f.length)&&(this.cell=RFt(f,c,d)),this.inputs=Object.keys(u)}const p$e=h$e.prototype;p$e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};p$e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function RFt(e,t,n){e=e.map(u=>q3e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new KZ;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function bee(e){Re.call(this,{},e),this._mlen=0,this._mods=[]}bee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:kFt.concat(qk)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ft(bee,Re,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Rb(e.sort),i=FV(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new h$e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)NFt(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=W3e(Mt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function NFt(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?Wx(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ta(-1)};t.init();for(let f=0;f<u;++f)PFt(c,o,f,u),s&&DFt(c,l),t.update(c,a[f])}function PFt(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function DFt(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const OFt=Object.freeze(Object.defineProperty({__proto__:null,aggregate:J0,bin:XZ,collect:QZ,compare:G3e,countpattern:JZ,cross:ZZ,density:eee,dotbin:nee,expression:J3e,extent:ree,facet:Q4,field:Z3e,filter:see,flatten:oee,fold:aee,formula:uee,generate:e$e,impute:lee,joinaggregate:cee,kde:fee,key:t$e,load:n$e,lookup:dee,multiextent:r$e,multivalues:i$e,params:s$e,pivot:hee,prefacet:o$e,project:pee,proxy:a$e,quantile:mee,relay:u$e,sample:gee,sequence:yee,sieve:l$e,subflow:iee,timeunit:vee,tupleindex:f$e,values:d$e,window:bee},Symbol.toStringTag,{value:"Module"}));function x0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const $Ft=()=>typeof Image<"u"?Image:null;function _ee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const MFt="identity",JE="linear",Im="log",Wk="pow",Gk="sqrt",J4="symlog",W1="time",G1="utc",bh="sequential",SS="diverging",ZE="quantile",Z4="quantize",eF="threshold",wee="ordinal",jV="point",m$e="band",Eee="bin-ordinal",Gs="continuous",Yk="discrete",Kk="discretizing",Zc="interpolating",xee="temporal";function LFt(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function FFt(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function See(){const e=uk().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=_ee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Sl(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,P0(h,m)-1),v=m===g?y:P0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return See().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function g$e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return g$e(t())},e}function jFt(){return g$e(See().paddingInner(1))}var BFt=Array.prototype.map;function UFt(e){return BFt.call(e,pa)}const zFt=Array.prototype.slice;function y$e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(P0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=UFt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=zFt.call(r),n):t.slice()},n.tickFormat=function(r,i){return ICe(e[0],Kn(e),r??10,i)},n.copy=function(){return y$e().domain(n.domain()).range(n.range())},n}const z$=new Map,v$e=Symbol("vega_scale");function b$e(e){return e[v$e]=!0,e}function VFt(e){return e&&e[v$e]===!0}function HFt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?LFt(s):s.invertExtent?FFt(s):void 0),s.type=e,b$e(s)};return r.metadata=nd(yt(n)),r}function yr(e,t,n){return arguments.length>1?(z$.set(e,HFt(e,t,n)),this):_$e(e)?z$.get(e):void 0}yr(MFt,kCe);yr(JE,wb,Gs);yr(Im,NCe,[Gs,Im]);yr(Wk,rX,Gs);yr(Gk,Ryt,Gs);yr(J4,PCe,Gs);yr(W1,RE,[Gs,xee]);yr(G1,qvt,[Gs,xee]);yr(bh,aX,[Gs,Zc]);yr(`${bh}-${JE}`,aX,[Gs,Zc]);yr(`${bh}-${Im}`,HCe,[Gs,Zc,Im]);yr(`${bh}-${Wk}`,uX,[Gs,Zc]);yr(`${bh}-${Gk}`,Wvt,[Gs,Zc]);yr(`${bh}-${J4}`,qCe,[Gs,Zc]);yr(`${SS}-${JE}`,WCe,[Gs,Zc]);yr(`${SS}-${Im}`,GCe,[Gs,Zc,Im]);yr(`${SS}-${Wk}`,lX,[Gs,Zc]);yr(`${SS}-${Gk}`,Gvt,[Gs,Zc]);yr(`${SS}-${J4}`,YCe,[Gs,Zc]);yr(ZE,DCe,[Kk,ZE]);yr(Z4,OCe,Kk);yr(eF,$Ce,Kk);yr(Eee,y$e,[Yk,Kk]);yr(wee,uk,Yk);yr(m$e,See,Yk);yr(jV,jFt,Yk);function _$e(e){return z$.has(e)}function Pb(e,t){const n=z$.get(e);return n&&n.metadata[t]}function Tee(e){return Pb(e,Gs)}function ex(e){return Pb(e,Yk)}function BV(e){return Pb(e,Kk)}function w$e(e){return Pb(e,Im)}function qFt(e){return Pb(e,xee)}function E$e(e){return Pb(e,Zc)}function x$e(e){return Pb(e,ZE)}const WFt=["clamp","base","constant","exponent"];function S$e(e,t){const n=t[0],r=Kn(t)-n;return function(i){return e(n+i*r)}}function tF(e,t,n){return FK(Cee(t||"rgb",n),e)}function T$e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function C$e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Ta(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=yr(s)().domain([t,n]).range([0,1]),WFt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function Cee(e,t){const n=zpt[GFt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function GFt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const YFt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},KFt={accent:Kvt,category10:Yvt,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Xvt,observable10:Qvt,paired:Jvt,pastel1:Zvt,pastel2:e1t,set1:t1t,set2:n1t,set3:r1t,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function A$e(e){if(Be(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function I$e(e,t){for(const n in e)Aee(n,t(e[n]))}const ype={};I$e(KFt,A$e);I$e(YFt,e=>tF(A$e(e)));function Aee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(ype[e]=t,this):ype[e]}const ND="symbol",XFt="discrete",QFt="gradient",JFt=e=>Be(e)?e.map(t=>String(t)):String(e),ZFt=(e,t)=>e[1]-t[1],e5t=(e,t)=>t[1]-e[1];function Iee(e,t,n){let r;return ur(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(zk(e.domain())/n||1)+1))),gt(t)&&(r=t.step,t=t.interval),vt(t)&&(t=e.type===W1?wS(t):e.type==G1?ES(t):Fe("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function k$e(e,t,n){let r=e.range(),i=r[0],s=Kn(r),o=ZFt;if(i>s&&(r=s,s=i,i=r,o=e5t),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Kn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function kee(e,t){return e.bins?k$e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function R$e(e,t,n,r,i,s){const o=t.type;let a=JFt;if(o===W1||i===W1)a=e.timeFormat(r);else if(o===G1||i===G1)a=e.utcFormat(r);else if(w$e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=N$e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function N$e(e,t,n){const r=kee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const UV={[ZE]:"quantiles",[Z4]:"thresholds",[eF]:"domain"},P$e={[ZE]:"quantiles",[Z4]:"domain"};function D$e(e,t){return e.bins?r5t(e.bins):e.type===Im?N$e(e,t,!0):UV[e.type]?n5t(e[UV[e.type]]()):kee(e,t)}function t5t(e,t,n){const r=t[P$e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function n5t(e){const t=[-1/0].concat(e);return t.max=1/0,t}function r5t(e){const t=e.slice(0,-1);return t.max=Kn(e),t}const i5t=e=>UV[e.type]||e.bins;function O$e(e,t,n,r,i,s,o){const a=P$e[t.type]&&s!==W1&&s!==G1?t5t(e,t,i):R$e(e,t,n,i,s,o);return r===ND&&i5t(t)?s5t(a):r===XFt?o5t(a):a5t(a)}const s5t=e=>(t,n,r)=>{const i=vpe(r[n+1],vpe(r.max,1/0)),s=bpe(t,e),o=bpe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},vpe=(e,t)=>e??t,o5t=e=>(t,n)=>n?e(t):null,a5t=e=>t=>e(t),bpe=(e,t)=>Number.isFinite(e)?t(e):null;function u5t(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Kn(t),s=i-r;if(e.type===eF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function l5t(e,t,n,r){const i=r||t.type;return vt(n)&&qFt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===W1?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===G1?e.utcFormat("%A, %d %B %Y, %X UTC"):O$e(e,t,5,null,n,r,!0)}function $$e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=l5t(e,t,n.format,n.formatType);if(BV(t.type)){const s=D$e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(ex(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Kn(s))}`}}let M$e=0;function c5t(){M$e=0}const V$="p_";function Ree(e){return e&&e.gradient}function L$e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?V$:"";return i||(i=e.id="gradient_"+M$e++,r==="radial"?(e.x1=Ad(e.x1,.5),e.y1=Ad(e.y1,.5),e.r1=Ad(e.r1,0),e.x2=Ad(e.x2,.5),e.y2=Ad(e.y2,.5),e.r2=Ad(e.r2,.5),s=V$):(e.x1=Ad(e.x1,0),e.y1=Ad(e.y1,0),e.x2=Ad(e.x2,1),e.y2=Ad(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Ad(e,t){return e??t}function F$e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const _pe={basis:{curve:Yv},"basis-closed":{curve:m1t},"basis-open":{curve:g1t},bundle:{curve:y1t,tension:"beta",value:.85},cardinal:{curve:v1t,tension:"tension",value:0},"cardinal-open":{curve:_1t,tension:"tension",value:0},"cardinal-closed":{curve:b1t,tension:"tension",value:0},"catmull-rom":{curve:w1t,tension:"alpha",value:.5},"catmull-rom-closed":{curve:E1t,tension:"alpha",value:.5},"catmull-rom-open":{curve:x1t,tension:"alpha",value:.5},linear:{curve:cX},"linear-closed":{curve:S1t},monotone:{horizontal:C1t,vertical:T1t},natural:{curve:A1t},step:{curve:I1t},"step-after":{curve:R1t},"step-before":{curve:k1t}};function Nee(e,t,n){var r=Ft(_pe,e)&&_pe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const f5t={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},d5t=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,h5t=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,p5t=/^((\s+,?\s*)|(,\s*))/,m5t=/^[01]/;function tx(e){const t=[];return(e.match(d5t)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=f5t[s],a=g5t(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function g5t(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?m5t:h5t,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(p5t);u!==null&&(i+=u[0].length)}return r}const Z0=Math.PI/180,y5t=1e-14,Ov=Math.PI/2,Xd=Math.PI*2,m_=Math.sqrt(3)/2;var x9={},S9={},j$e=[].join;function v5t(e,t,n,r,i,s,o,a,u){const l=j$e.call(arguments);if(x9[l])return x9[l];const c=o*Z0,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,S=g*e+y*t,T=v*e+b*t;let A=1/((S-w)*(S-w)+(T-E)*(T-E))-.25;A<0&&(A=0);let N=Math.sqrt(A);s==i&&(N=-N);const k=.5*(w+S)-N*(T-E),O=.5*(E+T)+N*(S-w),P=Math.atan2(E-O,w-k);let L=Math.atan2(T-O,S-k)-P;L<0&&s===1?L+=Xd:L>0&&s===0&&(L-=Xd);const M=Math.ceil(Math.abs(L/(Ov+.001))),U=[];for(let B=0;B<M;++B){const V=P+B*L/M,D=P+(B+1)*L/M;U[B]=[k,O,V,D,n,r,f,d]}return x9[l]=U}function b5t(e){const t=j$e.call(e);if(S9[t])return S9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,S=r+m+w*p,T=n+g,C=r+y,A=T+w*y,N=C-w*g;return S9[t]=[c*E+f*S,d*E+h*S,c*A+f*N,d*A+h*N,c*T+f*C,d*T+h*C]}const nc=["l",0,0,0,0,0,0,0];function _5t(e,t,n){const r=nc[0]=e[0];if(r==="a"||r==="A")nc[1]=t*e[1],nc[2]=n*e[2],nc[3]=e[3],nc[4]=e[4],nc[5]=e[5],nc[6]=t*e[6],nc[7]=n*e[7];else if(r==="h"||r==="H")nc[1]=t*e[1];else if(r==="v"||r==="V")nc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)nc[i]=(i%2==1?t:n)*e[i];return nc}function uI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=_5t(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":wpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":wpe(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function wpe(e,t,n,r){const i=v5t(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=b5t(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Epe=.5773502691896257,xpe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Xd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*Epe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n,i=r-n*Epe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=m_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function B$e(e){return Ft(xpe,e)?xpe[e]:w5t(e)}var T9={};function w5t(e){if(!Ft(T9,e)){const t=tx(e);T9[e]={draw:function(n,r){uI(n,t,0,0,Math.sqrt(r)/2)}}}return T9[e]}const lg=.448084975506;function E5t(e){return e.x}function x5t(e){return e.y}function S5t(e){return e.width}function T5t(e){return e.height}function dp(e){return typeof e=="function"?e:()=>+e}function aP(e,t,n){return Math.max(t,Math.min(e,n))}function U$e(){var e=E5t,t=x5t,n=S5t,r=T5t,i=dp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=aP(+i.call(this,c),0,v),w=aP(+s.call(this,c),0,v),E=aP(+o.call(this,c),0,v),S=aP(+a.call(this,c),0,v);if(u||(u=h=l6()),b<=0&&w<=0&&E<=0&&S<=0)u.rect(p,m,g,y);else{var T=p+g,C=m+y;u.moveTo(p+b,m),u.lineTo(T-w,m),u.bezierCurveTo(T-lg*w,m,T,m+lg*w,T,m+w),u.lineTo(T,C-S),u.bezierCurveTo(T,C-lg*S,T-lg*S,C,T-S,C),u.lineTo(p+E,C),u.bezierCurveTo(p+lg*E,C,p,C-lg*E,p,C-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+lg*b,p+lg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=dp(c),l):e},l.y=function(c){return arguments.length?(t=dp(c),l):t},l.width=function(c){return arguments.length?(n=dp(c),l):n},l.height=function(c){return arguments.length?(r=dp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=dp(c),s=f!=null?dp(f):i,a=d!=null?dp(d):i,o=h!=null?dp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function z$e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Xd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=l6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function Xk(e,t){return e??t}const Qk=e=>e.x||0,Jk=e=>e.y||0,C5t=e=>e.width||0,A5t=e=>e.height||0,I5t=e=>(e.x||0)+(e.width||0),k5t=e=>(e.y||0)+(e.height||0),R5t=e=>e.startAngle||0,N5t=e=>e.endAngle||0,P5t=e=>e.padAngle||0,D5t=e=>e.innerRadius||0,O5t=e=>e.outerRadius||0,$5t=e=>e.cornerRadius||0,M5t=e=>Xk(e.cornerRadiusTopLeft,e.cornerRadius)||0,L5t=e=>Xk(e.cornerRadiusTopRight,e.cornerRadius)||0,F5t=e=>Xk(e.cornerRadiusBottomRight,e.cornerRadius)||0,j5t=e=>Xk(e.cornerRadiusBottomLeft,e.cornerRadius)||0,B5t=e=>Xk(e.size,64),U5t=e=>e.size||1,nF=e=>e.defined!==!1,z5t=e=>B$e(e.shape||"circle"),V5t=d1t().startAngle(R5t).endAngle(N5t).padAngle(P5t).innerRadius(D5t).outerRadius(O5t).cornerRadius($5t),H5t=E6().x(Qk).y1(Jk).y0(k5t).defined(nF),q5t=E6().y(Jk).x1(Qk).x0(I5t).defined(nF),W5t=Ow().x(Qk).y(Jk).defined(nF),G5t=U$e().x(Qk).y(Jk).width(C5t).height(A5t).cornerRadius(M5t,L5t,F5t,j5t),Y5t=p1t().type(z5t).size(B5t),K5t=z$e().x(Qk).y(Jk).defined(nF).size(U5t);function Pee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function X5t(e,t){return V5t.context(e)(t)}function Q5t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?q5t:H5t).curve(Nee(r,n.orient,n.tension)).context(e)(t)}function J5t(e,t){const n=t[0],r=n.interpolate||"linear";return W5t.curve(Nee(r,n.orient,n.tension)).context(e)(t)}function TS(e,t,n,r){return G5t.context(e)(t,n,r)}function Z5t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function e8t(e,t){return Y5t.context(e)(t)}function t8t(e,t){return K5t.context(e)(t)}var V$e=1;function H$e(){V$e=1}function Dee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+V$e++),o=i.clipping[s]||(i.clipping[s]={id:s});return _n(r)?o.path=r(null):Pee(n)?o.path=TS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function xs(e){this.clear(),e&&this.union(e)}xs.prototype={clone(){return new xs(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function rF(e){this.mark=e,this.bounds=this.bounds||new xs}function iF(e){rF.call(this,e),this.items=this.items||[]}ft(iF,rF);class q$e{constructor(t){this._pending=0,this._loader=t||B4()}pending(){return this._pending}sanitizeURL(t){const n=this;return Spe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(AT(n),r)).catch(()=>(AT(n),null))}loadImage(t){const n=this,r=$Ft();return Spe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=Ft(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>AT(n),o.onerror=()=>AT(n),o.src=s,o}).catch(i=>(AT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function Spe(e){e._pending+=1}function AT(e){e._pending-=1}function Wm(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?n8t(t,r):0))}return e}function n8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const r8t=Xd-1e-8;let sF,PD,DD,Zv,zV,OD,VV,HV;const Wg=(e,t)=>sF.add(e,t),$D=(e,t)=>Wg(PD=e,DD=t),Tpe=e=>Wg(e,sF.y1),Cpe=e=>Wg(sF.x1,e),$v=(e,t)=>zV*e+VV*t,Mv=(e,t)=>OD*e+HV*t,C9=(e,t)=>Wg($v(e,t),Mv(e,t)),A9=(e,t)=>$D($v(e,t),Mv(e,t));function Zk(e,t){return sF=e,t?(Zv=t*Z0,zV=HV=Math.cos(Zv),OD=Math.sin(Zv),VV=-OD):(zV=HV=1,Zv=OD=VV=0),i8t}const i8t={beginPath(){},closePath(){},moveTo:A9,lineTo:A9,rect(e,t,n,r){Zv?(C9(e+n,t),C9(e+n,t+r),C9(e,t+r),A9(e,t)):(Wg(e+n,t+r),$D(e,t))},quadraticCurveTo(e,t,n,r){const i=$v(e,t),s=Mv(e,t),o=$v(n,r),a=Mv(n,r);Ape(PD,i,o,Tpe),Ape(DD,s,a,Cpe),$D(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=$v(e,t),a=Mv(e,t),u=$v(n,r),l=Mv(n,r),c=$v(i,s),f=Mv(i,s);Ipe(PD,o,u,c,Tpe),Ipe(DD,a,l,f,Cpe),$D(c,f)},arc(e,t,n,r,i,s){if(r+=Zv,i+=Zv,PD=n*Math.cos(i)+e,DD=n*Math.sin(i)+t,Math.abs(i-r)>r8t)Wg(e-n,t-n),Wg(e+n,t+n);else{const o=l=>Wg(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Xd,r<0&&(r+=Xd),i=i%Xd,i<0&&(i+=Xd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Xd,a=r-r%Ov,u=0;u<4&&a>i;++u,a-=Ov)o(a);else for(a=r-r%Ov+Ov,u=0;u<4&&a<i;++u,a=a+Ov)o(a)}}};function Ape(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Ipe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>y5t?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(kpe(u,e,t,n,r)),0<l&&l<1&&i(kpe(l,e,t,n,r))}function kpe(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var S0=(S0=x0(1,1))?S0.getContext("2d"):null;const qV=new xs;function Oee(e){return function(t,n){if(!S0)return!0;e(S0,t),qV.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=qV;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(S0.isPointInPath(u,a))return!0;return!1}}function $ee(e,t){return t.contains(e.x||0,e.y||0)}function W$e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(qV.set(n,r,n+i,r+s))}function G$e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return dw(t,n,r,i,s)}function dw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function nx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function df(e,t){return e??t}function Rpe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function s8t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+df(t.x1,.5)*r,n.y1+df(t.y1,.5)*i,Math.max(r,i)*df(t.r1,0),n.x1+df(t.x2,.5)*r,n.y1+df(t.y2,.5)*i,Math.max(r,i)*df(t.r2,.5));else{const o=df(t.x1,0),a=df(t.y1,0),u=df(t.x2,1),l=df(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=x0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Rpe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Rpe(s,t.stops)}function Y$e(e,t,n){return Ree(n)?s8t(e,n,t.bounds):n}function H$(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=Y$e(e,t,t.fill),!0):!1}var o8t=[];function rx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=Y$e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||o8t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function a8t(e,t){return e.zindex-t.zindex||e.index-t.index}function Mee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(a8t)}function id(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Mee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function q$(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Mee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Lee(e){return function(t,n,r){id(n,i=>{(!r||r.intersects(i.bounds))&&K$e(e,t,i,i)})}}function u8t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&K$e(e,t,n.items[0],n.items)}}function K$e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(nx(t,n),n.fill&&H$(t,n,i)&&t.fill(),n.stroke&&rx(t,n,i)&&t.stroke()))}function oF(e){return e=e||Bc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,q$(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function eR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function Fee(e){return oF(eR(e))}function d1(e,t){return"translate("+e+","+t+")"}function jee(e){return"rotate("+e+")"}function l8t(e,t){return"scale("+e+","+t+")"}function X$e(e){return d1(e.x||0,e.y||0)}function c8t(e){return d1(e.x||0,e.y||0)+(e.angle?" "+jee(e.angle):"")}function f8t(e){return d1(e.x||0,e.y||0)+(e.angle?" "+jee(e.angle):"")+(e.scaleX||e.scaleY?" "+l8t(e.scaleX||1,e.scaleY||1):"")}function Bee(e,t,n){function r(o,a){o("transform",c8t(a)),o("d",t(null,a))}function i(o,a){return t(Zk(o,a.angle),a),Wm(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Z0),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Lee(s),pick:Fee(s),isect:n||Oee(s)}}var d8t=Bee("arc",X5t);function h8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function p8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function m8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function Uee(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(Zk(u),c),Wm(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=eR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:u8t(s),pick:a,isect:$ee,tip:n}}var g8t=Uee("area",Q5t,h8t);function y8t(e,t){var n=t.clip;e.save(),_n(n)?(e.beginPath(),n(e),e.clip()):Q$e(e,t.group)}function Q$e(e,t){e.beginPath(),Pee(t)?TS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function J$e(e){const t=df(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function v8t(e,t){e("transform",X$e(t))}function Z$e(e,t){const n=J$e(t);e("d",TS(null,t,n,n))}function b8t(e,t){e("class","background"),e("aria-hidden",!0),Z$e(e,t)}function _8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?Z$e(e,t):e("d","")}function w8t(e,t,n){const r=t.clip?Dee(n,t,t):null;e("clip-path",r)}function E8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Wm(e,t),e.translate(t.x||0,t.y||0)}function lI(e,t,n,r){const i=J$e(t);e.beginPath(),TS(e,t,(n||0)+i,(r||0)+i)}const x8t=eR(lI),S8t=eR(lI,!1),T8t=eR(lI,!0);function C8t(e,t,n,r){id(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(lI(e,i,s,o),nx(e,i),i.fill&&H$(e,i,u)&&e.fill(),i.stroke&&!a&&rx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&Q$e(e,i),n&&n.translate(-s,-o),id(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(lI(e,i,s,o),nx(e,i),rx(e,i,u)&&e.stroke())})}function A8t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return q$(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Pee(u)&&!T8t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&S8t(e,u,o,a)?(e.restore(),u):(l=q$(u,v=>I8t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&x8t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function I8t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var k8t={type:"group",tag:"g",nested:!1,attr:v8t,bound:E8t,draw:C8t,pick:A8t,isect:W$e,content:w8t,background:b8t,foreground:_8t},cI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function zee(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function Vee(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Hee(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function aF(e,t){return e==="center"?t/2:e==="right"?t:0}function uF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function R8t(e,t,n){const r=zee(t,n),i=Vee(t,r),s=Hee(t,r),o=(t.x||0)-aF(t.align,i),a=(t.y||0)-uF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,cI["xmlns:xlink"],"xlink:href"),e("transform",d1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function N8t(e,t){const n=t.image,r=Vee(t,n),i=Hee(t,n),s=(t.x||0)-aF(t.align,r),o=(t.y||0)-uF(t.baseline,i);return e.set(s,o,s+r,o+i)}function P8t(e,t,n){id(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=zee(r,this);let s=Vee(r,i),o=Hee(r,i);if(s===0||o===0)return;let a=(r.x||0)-aF(r.align,s),u=(r.y||0)-uF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(nx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var D8t={type:"image",tag:"image",nested:!1,attr:R8t,bound:N8t,draw:P8t,pick:oF(),isect:Bc,get:zee,xOffset:aF,yOffset:uF},O8t=Uee("line",J5t,p8t);function $8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",f8t(t)),e("d",t.path)}function MD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Z0,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=tx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),uI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):uI(e,u,r,i,s,o)}function M8t(e,t){return MD(Zk(e,t.angle),t)?e.set(0,0,0,0):Wm(e,t,!0)}var L8t={type:"path",tag:"path",nested:!1,attr:$8t,bound:M8t,draw:Lee(MD),pick:Fee(MD),isect:Oee(MD)};function F8t(e,t){e("d",TS(null,t))}function j8t(e,t){var n,r;return Wm(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Npe(e,t){e.beginPath(),TS(e,t)}var B8t={type:"rect",tag:"path",nested:!1,attr:F8t,bound:j8t,draw:Lee(Npe),pick:Fee(Npe),isect:W$e};function U8t(e,t){e("transform",X$e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function z8t(e,t){var n,r;return Wm(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function eMe(e,t,n){var r,i,s,o;return t.stroke&&rx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function V8t(e,t,n){id(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&eMe(e,r,i)&&(nx(e,r),e.stroke())}})}function H8t(e,t,n,r){return e.isPointInStroke?eMe(e,t,1)&&e.isPointInStroke(n,r):!1}var q8t={type:"rule",tag:"line",nested:!1,attr:U8t,bound:z8t,draw:V8t,pick:oF(H8t),isect:G$e},W8t=Bee("shape",Z5t),G8t=Bee("symbol",e8t,$ee);const Ppe=FOe();var Rl={height:Qh,measureWidth:qee,estimateWidth:W$,width:W$,canvas:tMe};tMe(!0);function tMe(e){Rl.width=e&&S0?qee:W$}function W$(e,t){return nMe(ty(e,t),Qh(e))}function nMe(e,t){return~~(.8*e.length*t)}function qee(e,t){return Qh(e)<=0||!(t=ty(e,t))?0:rMe(t,lF(e))}function rMe(e,t){const n=`(${t}) ${e}`;let r=Ppe.get(n);return r===void 0&&(S0.font=t,r=S0.measureText(e).width,Ppe.set(n,r)),r}function Qh(e){return e.fontSize!=null?+e.fontSize||0:11}function ey(e){return e.lineHeight!=null?e.lineHeight:Qh(e)+2}function Y8t(e){return Be(e)?e.length>1?e:e[0]:e}function tR(e){return Y8t(e.lineBreak&&e.text&&!Be(e.text)?e.text.split(e.lineBreak):e.text)}function Wee(e){const t=tR(e);return(Be(t)?t.length-1:0)*ey(e)}function ty(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?X8t(e,n):n}function K8t(e){if(Rl.width===qee){const t=lF(e);return n=>rMe(n,t)}else if(Rl.width===W$){const t=Qh(e);return n=>nMe(n,t)}else return t=>Rl.width(e,t)}function X8t(e,t){var n=+e.limit,r=K8t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function nR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function lF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Qh(e)+"px "+nR(e,t)}function Gee(e){var t=e.baseline,n=Qh(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*ey(e):t==="line-bottom"?.29*n-.5*ey(e):0)}const Q8t={left:"start",center:"middle",right:"end"},I2=new xs;function cF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Ov,t+=r*Math.cos(i),n+=r*Math.sin(i)),I2.x1=t,I2.y1=n,I2}function J8t(e,t){var n=t.dx||0,r=(t.dy||0)+Gee(t),i=cF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",Q8t[t.align]||"start"),a?(u=d1(s,o)+" "+jee(a),(n||r)&&(u+=" "+d1(n,r))):u=d1(s+n,o+r),e("transform",u)}function Yee(e,t,n){var r=Rl.height(t),i=t.align,s=cF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Gee(t)-Math.round(.8*r),c=tR(t),f;if(Be(c)?(r+=ey(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Rl.width(t,h)),0)):f=Rl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Z0,o,a);else if(n===2)return e.rotatedPoints(t.angle*Z0,o,a);return e}function Z8t(e,t,n){id(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=lF(r),e.textAlign=r.align||"left",s=cF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Z0),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Gee(r),c=tR(r),nx(e,r),Be(c))for(l=ey(r),u=0;u<c.length;++u)f=ty(r,c[u]),r.fill&&H$(e,r,i)&&e.fillText(f,o,a),r.stroke&&rx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=ty(r,c),r.fill&&H$(e,r,i)&&e.fillText(f,o,a),r.stroke&&rx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function ejt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=cF(t),a=o.x1,u=o.y1,l=Yee(I2,t,1),c=-t.angle*Z0,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function tjt(e,t){const n=Yee(I2,e,2);return dw(t,n[0],n[1],n[2],n[3])||dw(t,n[0],n[1],n[4],n[5])||dw(t,n[4],n[5],n[6],n[7])||dw(t,n[2],n[3],n[6],n[7])}var njt={type:"text",tag:"text",nested:!1,attr:J8t,bound:Yee,draw:Z8t,pick:oF(ejt),isect:tjt},rjt=Uee("trail",t8t,m8t),ql={arc:d8t,area:g8t,group:k8t,image:D8t,line:O8t,path:L8t,rect:B8t,rule:q8t,shape:W8t,symbol:G8t,text:njt,trail:rjt};function WV(e,t,n){var r=ql[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new xs),e,n)}var Dpe={mark:null};function iMe(e,t,n){var r=ql[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Dpe.mark=e,l=Dpe),c=WV(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new xs,o)for(a=0,u=s.length;a<u;++a)t.union(WV(s[a],i,n));return e.bounds=t}const ijt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function sMe(e,t){return JSON.stringify(e,ijt,t)}function oMe(e){const t=typeof e=="string"?JSON.parse(e):e;return aMe(t)}function aMe(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&aMe(n[i]);return t&&iMe(e),e}class uMe{constructor(t){arguments.length?this.root=oMe(t):(this.root=Ope({marktype:"group",name:"root",role:"frame"}),this.root.items=[new iF(this.root)])}toJSON(t){return sMe(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Ope(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Ope(e,t){const n={bounds:new xs,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Gg(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function Kee(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function $s(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=Gg(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function pc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function lMe(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function fF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function sjt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=ql[i.marktype]).tip){for(o=fF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Xee=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||B4(),this._tooltip=n||ojt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=Gg(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=sjt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function ojt(e,t,n,r){e.element().setAttribute("title",r||"")}class rR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new q$e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const ajt="keydown",ujt="keypress",ljt="keyup",cMe="dragenter",LD="dragleave",fMe="dragover",GV="pointerdown",cjt="pointerup",G$="pointermove",FD="pointerout",dMe="pointerover",YV="mousedown",fjt="mouseup",hMe="mousemove",Y$="mouseout",pMe="mouseover",K$="click",djt="dblclick",hjt="wheel",mMe="mousewheel",X$="touchstart",Q$="touchmove",J$="touchend",pjt=[ajt,ujt,ljt,cMe,LD,fMe,GV,cjt,G$,FD,dMe,YV,fjt,hMe,Y$,pMe,K$,djt,hjt,mMe,X$,Q$,J$],KV=G$,k2=Y$,XV=K$;class iR extends Xee{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=pjt,this.pointermove=Mpe([G$,hMe],[dMe,pMe],[FD,Y$]),this.dragover=Mpe([fMe],[cMe],[LD]),this.pointerout=Lpe([FD,Y$]),this.dragleave=Lpe([LD])}initialize(t,n,r){return this._canvas=t&&Kee(t,"canvas"),[K$,YV,GV,G$,FD,LD].forEach(i=>$pe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(mMe,t)}pointerdown(t){this._down=this._active,this.fire(GV,t)}mousedown(t){this._down=this._active,this.fire(YV,t)}click(t){this._down===this._active&&(this.fire(K$,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(X$,t,!0)}touchmove(t){this.fire(Q$,t,!0)}touchend(t){this.fire(J$,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===XV&&i&&i.href?this.handleHref(n,i,i.href):(t===KV||t===k2)&&this.handleTooltip(n,i,t!==k2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&($pe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=fF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return ql[t.marktype].pick.call(this,o,t,n,r,i,s)}}const mjt=e=>e===X$||e===Q$||e===J$?[X$,Q$,J$]:[e];function $pe(e,t){mjt(t).forEach(n=>gjt(e,n))}function gjt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function NC(e,t,n){t.forEach(r=>e.fire(r,n))}function Mpe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?NC(this,e,r):((!i||!i.exit)&&NC(this,n,r),this._active=s,NC(this,t,r),NC(this,e,r))}}function Lpe(e){return function(t){NC(this,e,t),this._active=null}}function yjt(){return typeof window<"u"&&window.devicePixelRatio||1}function vjt(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?yjt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class Z$ extends rR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new xs,this._tempb=new xs}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:x0(1,1,this._options.type),t&&this._canvas&&(pc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)vjt(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Fe("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=bjt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):_jt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=ql[n.marktype];n.clip&&y8t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const bjt=(e,t,n)=>new xs().set(0,0,t,n).translate(-e[0],-e[1]);function _jt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class gMe extends Xee{constructor(t,n){super(t,n);const r=this;r._hrefHandler=I9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=I9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==k2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(XV,this._hrefHandler),i.removeEventListener(KV,this._tooltipHandler),i.removeEventListener(k2,this._tooltipHandler)),this._svg=i=t&&Kee(t,"svg"),i&&(i.addEventListener(XV,this._hrefHandler),i.addEventListener(KV,this._tooltipHandler),i.addEventListener(k2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:I9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const I9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},yMe="aria-hidden",Qee="aria-label",Jee="role",Zee="aria-roledescription",vMe="graphics-object",ete="graphics-symbol",bMe=(e,t,n)=>({[Jee]:e,[Zee]:t,[Qee]:n||void 0}),wjt=nd(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Fpe={axis:{desc:"axis",caption:Sjt},legend:{desc:"legend",caption:Tjt},"title-text":{desc:"title",caption:e=>`Title text '${Bpe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Bpe(e)}'`}},jpe={ariaRole:Jee,ariaRoleDescription:Zee,description:Qee};function _Me(e,t){const n=t.aria===!1;if(e(yMe,n||void 0),n||t.description==null)for(const r in jpe)e(jpe[r],void 0);else{const r=t.mark.marktype;e(Qee,t.description),e(Jee,t.ariaRole||(r==="group"?vMe:ete)),e(Zee,t.ariaRoleDescription||`${r} mark`)}}function wMe(e){return e.aria===!1?{[yMe]:!0}:wjt[e.role]?null:Fpe[e.role]?xjt(e,Fpe[e.role]):Ejt(e)}function Ejt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return bMe(n?vMe:ete,`${t} mark container`,e.description)}function xjt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return bMe(t.role||ete,t.desc,n.description||r(n))}catch{return null}}function Bpe(e){return yt(e.text).join(" ")}function Sjt(e){const t=e.datum,n=e.orient,r=t.title?EMe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${ex(a)?"discrete":a} scale with ${$$e(o,s,e)}`}function Tjt(e){const t=e.datum,n=t.title?EMe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return Ajt(r)+(n?` titled '${n}'`:"")+` for ${Cjt(s)} with ${$$e(u,a,e)}`}function EMe(e){try{return yt(Kn(e.items).items[0].text).join(" ")}catch{return null}}function Cjt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Kn(e)}function Ajt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const xMe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Ijt=e=>xMe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function tte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${Ijt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=xMe(u),a),toString:()=>e};return a}const SMe=e=>TMe(tte(),e)+"";function TMe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):TMe(e,r)}return e.close()}const eM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},tM={blend:"mix-blend-mode"},CMe={fill:"none","stroke-miterlimit":10},IT=0,Upe="http://www.w3.org/2000/xmlns/",Ps=cI.xmlns;class nte extends rR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=$s(t,0,"svg",Ps),this._svg.setAttributeNS(Upe,"xmlns",Ps),this._svg.setAttributeNS(Upe,"xmlns:xlink",cI["xmlns:xlink"]),this._svg.setAttribute("version",cI.version),this._svg.setAttribute("class","marks"),pc(t,1),this._root=$s(this._svg,IT,"g",Ps),Yg(this._root,CMe),pc(this._svg,IT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(Yg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=$s(t,IT,"rect",Ps),Yg(r,{width:this._width,height:this._height,fill:n}));const i=SMe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),pc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=ql[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,zpe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,zpe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=ql[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Vpe(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return pc(c,0),n._svg;c.setAttribute("class",lMe(n));const f=wMe(n);for(const m in f)$a(c,m,f[m]);l||$a(c,"pointer-events",u),$a(c,"clip-path",n.clip?Dee(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Vpe(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&Njt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):id(n,p),pc(c,h),c}_update(t,n,r){zp=n,oa=n.__values__,_Me(R2,r),t.attr(R2,r,this);const i=Djt[t.type];i&&i.call(this,t,n,r),zp&&this.style(zp,r)}style(t,n){if(n!=null){for(const r in eM){let i=r==="font"?nR(n):n[r];if(i===oa[r])continue;const s=eM[r];i==null?t.removeAttribute(s):(Ree(i)&&(i=L$e(i,this._defs.gradient,AMe())),t.setAttribute(s,i+"")),oa[r]=i}for(const r in tM)jD(t,tM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=$s(t,IT+1,"defs",Ps)),i=kjt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=$s(t,IT+1,"defs",Ps)),i=Rjt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):pc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function zpe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function kjt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=$s(e,n++,"pattern",Ps);Yg(o,{id:V$+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=$s(o,0,"rect",Ps),Yg(o,{width:1,height:1,fill:`url(${AMe()}#${t.id})`}),e=$s(e,n++,"radialGradient",Ps),Yg(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=$s(e,n++,"linearGradient",Ps),Yg(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=$s(e,r,"stop",Ps),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return pc(e,r),n}function Rjt(e,t,n){let r;return e=$s(e,n,"clipPath",Ps),e.setAttribute("id",t.id),t.path?(r=$s(e,0,"path",Ps),r.setAttribute("d",t.path)):(r=$s(e,0,"rect",Ps),Yg(r,{x:0,y:0,width:t.width,height:t.height})),pc(e,1),n+1}function Njt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;id(n,o=>{i=e.mark(t,o,i,r),++s}),pc(t,1+s)}function Vpe(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=Gg(o,r,Ps),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=Gg(o,"path",Ps);s.appendChild(a),a.__data__=e;const u=Gg(o,"g",Ps);s.appendChild(u),u.__data__=e;const l=Gg(o,"path",Ps);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||Pjt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function Pjt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let zp=null,oa=null;const Djt={group(e,t,n){const r=zp=t.childNodes[2];oa=r.__values__,e.foreground(R2,n,this),oa=t.__values__,zp=t.childNodes[1],e.content(R2,n,this);const i=zp=t.childNodes[0];e.background(R2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==oa.events&&($a(r,"pointer-events",s),$a(i,"pointer-events",s),oa.events=s),n.strokeForeground&&n.stroke){const o=n.fill;$a(r,"display",null),this.style(i,n),$a(i,"stroke",null),o&&(n.fill=null),oa=r.__values__,this.style(r,n),o&&(n.fill=o),zp=null}else $a(r,"display","none")},image(e,t,n){n.smooth===!1?(jD(t,"image-rendering","optimizeSpeed"),jD(t,"image-rendering","pixelated")):jD(t,"image-rendering",null)},text(e,t,n){const r=tR(n);let i,s,o,a;Be(r)?(s=r.map(u=>ty(n,u)),i=s.join(`
`),i!==oa.text&&(pc(t,0),o=t.ownerDocument,a=ey(n),s.forEach((u,l)=>{const c=Gg(o,"tspan",Ps);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),oa.text=i)):(s=ty(n,r),s!==oa.text&&(t.textContent=s,oa.text=s)),$a(t,"font-family",nR(n)),$a(t,"font-size",Qh(n)+"px"),$a(t,"font-style",n.fontStyle),$a(t,"font-variant",n.fontVariant),$a(t,"font-weight",n.fontWeight)}};function R2(e,t,n){t!==oa[e]&&(n?Ojt(zp,e,t,n):$a(zp,e,t),oa[e]=t)}function jD(e,t,n){n!==oa[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),oa[t]=n)}function Yg(e,t){for(const n in t)$a(e,n,t[n])}function $a(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function Ojt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function AMe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class IMe extends rR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=tte();n.open("svg",bn({},cI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",CMe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=ql[n.marktype],i=r.tag,s=[_Me,r.attr];t.open("g",{class:lMe(n),"clip-path":n.clip?Dee(this,n,n.group):null},wMe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=tR(a);if(Be(l)){const c={x:0,dy:ey(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(ty(a,l[f])).close()}else t.text(ty(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),id(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):id(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&$jt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:V$+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function $jt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=nR(t),e["font-size"]=Qh(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in eM){let a=t[o];const u=eM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Ree(a)&&(a=L$e(a,i.gradient,"")),e[u]=a)}for(const o in tM){const a=t[o];a!=null&&(s=s||[],s.push(`${tM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const bf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Mjt(e){bf.svgMarkTypes=e.svgMarkTypes??["text"],bf.svgOnTop=e.svgOnTop??!0,bf.debug=e.debug??!1}class QV extends rR{constructor(t){super(t),this._svgRenderer=new nte(t),this._canvasRenderer=new Z$(t)}initialize(t,n,r,i,s){this._root_el=$s(t,0,"div");const o=$s(this._root_el,0,"div"),a=$s(this._root_el,1,"div");return this._root_el.style.position="relative",bf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=bf.svgOnTop?a:o,this._canvasEl=bf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return bf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!bf.svgMarkTypes.includes(s));this._svgRenderer.render(t,bf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return bf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class kMe extends iR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=$s($s(t,0,"div"),bf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const RMe="canvas",NMe="hybrid",PMe="png",DMe="svg",OMe="none",Kg={Canvas:RMe,PNG:PMe,SVG:DMe,Hybrid:NMe,None:OMe},Y1={};Y1[RMe]=Y1[PMe]={renderer:Z$,headless:Z$,handler:iR};Y1[DMe]={renderer:nte,headless:IMe,handler:gMe};Y1[NMe]={renderer:QV,headless:QV,handler:kMe};Y1[OMe]={};function dF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Y1[e]=t,this):Y1[e]}function $Me(e,t,n){const r=[],i=new xs().union(t),s=e.marktype;return s?MMe(e,i,n,r):s==="group"?LMe(e,i,n,r):Fe("Intersect scene must be mark node or group item.")}function MMe(e,t,n,r){if(Ljt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)LMe(i[a],t,n,r);else for(const u=ql[s].isect;a<o;++a){const l=i[a];FMe(l,t,u)&&r.push(l)}}return r}function Ljt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function LMe(e,t,n,r){n&&n(e.mark)&&FMe(e,t,ql.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)MMe(i[u],t,n,r);t.translate(o,a)}return r}function FMe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const k9=new xs;function jMe(e){const t=e.clip;if(_n(t))t(Zk(k9.clear()));else if(t)k9.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(k9)}const Fjt=1e-9;function rte(e,t,n){return e===t?!0:n==="path"?BMe(e,t):e instanceof Date&&t instanceof Date?+e==+t:ur(e)&&ur(t)?Math.abs(e-t)<=Fjt:!e||!t||!gt(e)&&!gt(t)?e==t:jjt(e,t)}function BMe(e,t){return rte(tx(e),tx(t))}function jjt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!rte(e[i],t[i],i))return!1;return typeof e==typeof t}function Bjt(){H$e(),c5t()}const ix="top",Rf="left",Of="right",ny="bottom",Ujt="top-left",zjt="top-right",Vjt="bottom-left",Hjt="bottom-right",ite="start",JV="middle",Fa="end",qjt="x",Wjt="y",hF="group",ste="axis",ote="title",Gjt="frame",Yjt="scope",ate="legend",UMe="row-header",zMe="row-footer",VMe="row-title",HMe="column-header",qMe="column-footer",WMe="column-title",Kjt="padding",Xjt="symbol",GMe="fit",YMe="fit-x",KMe="fit-y",Qjt="pad",ute="none",uP="all",ZV="each",lte="flush",Xg="column",Qg="row";function XMe(e){Re.call(this,null,e)}ft(XMe,Re,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=ql[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=lP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===hF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(lP(l,o))),r.role){case ste:case ate:case ote:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(lP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(lP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return jMe(r),t.modifies("bounds")}});function lP(e,t,n){return t(e.bounds.clear(),e,n)}const Hpe=":vega_identifier:";function cte(e){Re.call(this,0,e)}cte.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ft(cte,Re,{transform(e,t){const n=Jjt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function Jjt(e){return e._signals[Hpe]||(e._signals[Hpe]=e.add(0))}function QMe(e){Re.call(this,null,e)}ft(QMe,Re,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Zjt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===hF?iF:rF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Zjt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function JMe(e){Re.call(this,null,e)}const qpe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!ZMe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},ZMe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Wpe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(ZMe(i,s=e[n].bounds,t))return!0},e9t=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},t9t=(e,t,n)=>{var r=e.range(),i=new xs;return t===ix||t===ny?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Gpe=e=>(e.forEach(t=>t.opacity=1),e),Ype=(e,t)=>e.reflow(t.modified()).modifies("opacity");ft(JMe,Re,{transform(e,t){const n=qpe[e.method]||qpe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Gpe(i),t=Ype(t,e)),t;if(i=i.filter(e9t),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Gpe(i),t=Ype(t,e),s.length>=3&&Wpe(s,r)){do s=n(s,r);while(s.length>=3&&Wpe(s,r));s.length<3&&!Kn(i).opacity&&(s.length>1&&(Kn(s).opacity=0),Kn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=t9t(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function eLe(e){Re.call(this,null,e)}ft(eLe,Re,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const ia=new xs;function hw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function n9t(e){var t=e.items[0].orient;return t===Rf||t===Of}function r9t(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function i9t(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=r9t(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Wee(p),v=0,b=0,w,E;switch(ia.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case ix:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&cP(e,p,E,m,y,0,-1,g);break;case Rf:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&cP(e,p,E,m,y,1,-1,g);break;case Of:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&cP(e,p,E,m,y,1,1,g);break;case ny:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&cP(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return Wm(g.translate(v,b),i),hw(i,"x",v+o)|hw(i,"y",b+o)&&(i.bounds=ia,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function cP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Kpe=(e,t)=>Math.floor(Math.min(e,t)),Xpe=(e,t)=>Math.ceil(Math.max(e,t));function s9t(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===hF)switch(i.role){case ste:case ate:case ote:break;case UMe:o.rowheaders.push(...s);break;case zMe:o.rowfooters.push(...s);break;case HMe:o.colheaders.push(...s);break;case qMe:o.colfooters.push(...s);break;case VMe:o.rowtitle=s[0];break;case WMe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function o9t(e){return new xs().set(0,0,e.width||0,e.height||0)}function a9t(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function yi(e,t,n){const r=gt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Qpe(e){return e<0?Math.ceil(-e):0}function tLe(e,t,n){var r=!n.nodirty,i=n.bounds===lte?o9t:a9t,s=ia.set(0,0,0,0),o=yi(n.align,Xg),a=yi(n.align,Qg),u=yi(n.padding,Xg),l=yi(n.padding,Qg),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),S,T,C,A,N,k,O,P,$,L,M;for(T=0;T<c;++T)p[T]=0;for(T=0;T<f;++T)y[T]=0;for(T=0;T<d;++T)k=t[T],N=E[T]=i(k),k.x=k.x||0,b[T]=0,k.y=k.y||0,w[T]=0,C=T%c,A=~~(T/c),m=Math.max(m,O=Math.ceil(N.x2)),v=Math.max(v,P=Math.ceil(N.y2)),p[C]=Math.max(p[C],O),y[A]=Math.max(y[A],P),h[T]=u+Qpe(N.x1),g[T]=l+Qpe(N.y1),r&&e.dirty(t[T]);for(T=0;T<d;++T)T%c===0&&(h[T]=0),T<c&&(g[T]=0);if(o===ZV)for(C=1;C<c;++C){for(M=0,T=C;T<d;T+=c)M<h[T]&&(M=h[T]);for(T=C;T<d;T+=c)h[T]=M+p[C-1]}else if(o===uP){for(M=0,T=0;T<d;++T)T%c&&M<h[T]&&(M=h[T]);for(T=0;T<d;++T)T%c&&(h[T]=M+m)}else for(o=!1,C=1;C<c;++C)for(T=C;T<d;T+=c)h[T]+=p[C-1];if(a===ZV)for(A=1;A<f;++A){for(M=0,T=A*c,S=T+c;T<S;++T)M<g[T]&&(M=g[T]);for(T=A*c;T<S;++T)g[T]=M+y[A-1]}else if(a===uP){for(M=0,T=c;T<d;++T)M<g[T]&&(M=g[T]);for(T=c;T<d;++T)g[T]=M+v}else for(a=!1,A=1;A<f;++A)for(T=A*c,S=T+c;T<S;++T)g[T]+=y[A-1];for($=0,T=0;T<d;++T)$=h[T]+(T%c?$:0),b[T]+=$-t[T].x;for(C=0;C<c;++C)for(L=0,T=C;T<d;T+=c)L+=g[T],w[T]+=L-t[T].y;if(o&&yi(n.center,Xg)&&f>1)for(T=0;T<d;++T)N=o===uP?m:p[T%c],$=N-E[T].x2-t[T].x-b[T],$>0&&(b[T]+=$/2);if(a&&yi(n.center,Qg)&&c!==1)for(T=0;T<d;++T)N=a===uP?v:y[~~(T/c)],L=N-E[T].y2-t[T].y-w[T],L>0&&(w[T]+=L/2);for(T=0;T<d;++T)s.union(E[T].translate(b[T],w[T]));switch($=yi(n.anchor,qjt),L=yi(n.anchor,Wjt),yi(n.anchor,Xg)){case Fa:$-=s.width();break;case JV:$-=s.width()/2}switch(yi(n.anchor,Qg)){case Fa:L-=s.height();break;case JV:L-=s.height()/2}for($=Math.round($),L=Math.round(L),s.clear(),T=0;T<d;++T)t[T].mark.bounds.clear();for(T=0;T<d;++T)k=t[T],k.x+=b[T]+=$,k.y+=w[T]+=L,s.union(k.mark.bounds.union(k.bounds.translate(b[T],w[T]))),r&&e.dirty(k);return s}function u9t(e,t,n){var r=s9t(t),i=r.marks,s=n.bounds===lte?l9t:c9t,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=tLe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=yi(n.headerBand,Qg,null),c=fP(e,r.rowheaders,i,a,u,-yi(o,"rowHeader"),Kpe,0,s,"x1",0,a,1,m)),r.colheaders&&(m=yi(n.headerBand,Xg,null),f=fP(e,r.colheaders,i,a,a,-yi(o,"columnHeader"),Kpe,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=yi(n.footerBand,Qg,null),d=fP(e,r.rowfooters,i,a,u,yi(o,"rowFooter"),Xpe,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=yi(n.footerBand,Xg,null),h=fP(e,r.colfooters,i,a,a,yi(o,"columnFooter"),Xpe,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=yi(n.titleAnchor,Qg),g=yi(o,"rowTitle"),g=p===Fa?d+g:c-g,m=yi(n.titleBand,Qg,.5),Jpe(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=yi(n.titleAnchor,Xg),g=yi(o,"columnTitle"),g=p===Fa?h+g:f-g,m=yi(n.titleBand,Xg,.5),Jpe(e,r.coltitle,g,1,y,m))}function l9t(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function c9t(e,t){return e.bounds[t]}function fP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,S,T,C,A;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(S=t[v],E=S.mark.bounds,b=y;b>=0&&(T=n[b])==null;b-=d);a?(C=h==null?T.x:Math.round(T.bounds.x1+h*T.bounds.width()),A=m):(C=m,A=h==null?T.y:Math.round(T.bounds.y1+h*T.bounds.height())),E.union(S.bounds.translate(C-(S.x||0),A-(S.y||0))),S.x=C,S.y=A,e.dirty(S),g=o(g,E[l])}return g}function Jpe(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function f9t(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function d9t(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function h9t(e,t,n,r,i,s,o){const a=f9t(n,t),u=d9t(e,a("offset",0)),l=a("anchor",ite),c=l===Fa?1:l===JV?.5:0,f={align:ZV,bounds:a("bounds",lte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Rf:f.anchor={x:Math.floor(r.x1)-u,column:Fa,y:c*(o||r.height()+2*r.y1),row:l};break;case Of:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case ix:f.anchor={y:Math.floor(i.y1)-u,row:Fa,x:c*(s||i.width()+2*i.x1),column:l};break;case ny:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case Ujt:f.anchor={x:u,y:u};break;case zjt:f.anchor={x:s-u,y:u,column:Fa};break;case Vjt:f.anchor={x:u,y:o-u,row:Fa};break;case Hjt:f.anchor={x:s-u,y:o-u,column:Fa,row:Fa};break}return f}function p9t(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),g9t(e,n,n.items[0].items[0]),s=m9t(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===Xjt&&y9t(n.items[0].items[0].items[0].items),i!==ute&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,Wm(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function m9t(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function g9t(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&kT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Rf:i+=Math.ceil(o.bounds.width())+u;break;case Of:case ny:break;default:s+=o.bounds.height()+u}switch((i||s)&&kT(e,n,i,s),o.orient){case Rf:c+=g_(t,n,o,a,1,1);break;case Of:l+=g_(t,n,o,Fa,0,0)+u,c+=g_(t,n,o,a,1,1);break;case ny:l+=g_(t,n,o,a,0,0),c+=g_(t,n,o,Fa,-1,0,1)+u;break;default:l+=g_(t,n,o,a,0,0)}(l||c)&&kT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(kT(e,n,-l,0),kT(e,o,-l,0))}}function g_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Wee(n);return Math.round(r===ite?f:r===Fa?d-h:.5*(c-h))}function kT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function y9t(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function v9t(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Rf||a===Of?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==hF?a===Rf?(p=i.y2,h=i.y1):a===Of?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Rf&&(p=r,h=0),b=u===ite?p:u===Fa?h:(p+h)/2,d&&d.text){switch(a){case ix:case ny:v=f.bounds.height()+c;break;case Rf:y=f.bounds.width()+c;break;case Of:y=-f.bounds.width()-c;break}ia.clear().union(d.bounds),ia.translate(y-(d.x||0),v-(d.y||0)),hw(d,"x",y)|hw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(ia),d.mark.bounds.clear().union(ia),e.dirty(d)),ia.clear().union(d.bounds)}else ia.clear();switch(ia.union(f.bounds),a){case ix:m=b,g=i.y1-ia.height()-l;break;case Rf:m=i.x1-ia.width()-l,g=b;break;case Of:m=i.x2+ia.width()+l,g=b;break;case ny:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return hw(s,"x",m)|hw(s,"y",g)&&(ia.translate(m,g),e.dirty(s),s.bounds.clear().union(ia),t.bounds.clear().union(ia),e.dirty(s)),s.bounds}function nLe(e){Re.call(this,null,e)}ft(nLe,Re,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&u9t(n,r,e.layout),_9t(n,r,e)}),b9t(e.mark.group)?t.reflow():t}});function b9t(e){return e&&e.mark.role!=="legend-entry"}function _9t(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new xs().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case ste:h=n9t(f)?a:u,h.union(i9t(e,f,i,s));break;case ote:c=f;break;case ate:l.push(p9t(e,f));break;case Gjt:case Yjt:case UMe:case zMe:case VMe:case HMe:case qMe:case WMe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Of,d!==ute&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];tLe(e,v,h9t(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===GMe||n.autosize.type===YMe||n.autosize.type===KMe))switch(y.orient){case Rf:case Of:o.add(v.x1,0).add(v.x2,0);break;case ix:case ny:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(v9t(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),w9t(e,t,o,n)}function w9t(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===Kjt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===ute?(l=0,f=0,u=o,c=a):s===GMe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===YMe?(u=Math.max(0,o-l-d),a=c+f+h):s===KMe?(o=u+l+d,c=Math.max(0,a-f-h)):s===Qjt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const E9t=Object.freeze(Object.defineProperty({__proto__:null,bound:XMe,identifier:cte,mark:QMe,overlap:JMe,render:eLe,viewlayout:nLe},Symbol.toStringTag,{value:"Module"}));function rLe(e){Re.call(this,null,e)}ft(rLe,Re,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Iee(s,o,e.minstep),u=e.format||R$e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?k$e(s,e.values,a):kee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>xr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(xr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function iLe(e){Re.call(this,null,e)}function x9t(){return xr({})}function S9t(e){const t=_S().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ft(iLe,Re,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||x9t,s=e.key||Mt,o=this.value;return Be(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Fe("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=S9t(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function sLe(e){Re.call(this,null,e)}ft(sLe,Re,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(Be(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||mg,u=i.enter||mg,l=i.exit||mg,c=(s&&!o?i[s]:a)||mg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==mg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==mg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==mg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function oLe(e){Re.call(this,[],e)}ft(oLe,Re,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||ND,o=e.scale,a=+e.limit,u=Iee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===ND,c=e.format||O$e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||D$e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===ND?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,_n(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Ta(m=p||8),i=i.map((y,v)=>xr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(xr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===QFt?(d=o.domain(),h=C$e(o,d[0],Kn(d)),f.length<3&&!e.values&&d[0]!==Kn(d)&&(f=[d[0],Kn(d)]),i=f.map((y,v)=>xr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=u5t(o),i=f.map((y,v)=>xr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const T9t=e=>e.source.x,C9t=e=>e.source.y,A9t=e=>e.target.x,I9t=e=>e.target.y;function fte(e){Re.call(this,{},e)}fte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ft(fte,Re,{transform(e,t){var n=e.sourceX||T9t,r=e.sourceY||C9t,i=e.targetX||A9t,s=e.targetY||I9t,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Zpe.get(u+"-"+a)||Zpe.get(u);return l||Fe("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const aLe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,k9t=(e,t,n,r)=>aLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),uLe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},R9t=(e,t,n,r)=>uLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),lLe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},N9t=(e,t,n,r)=>lLe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),P9t=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,D9t=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,O9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},$9t=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},M9t=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},L9t=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Zpe=_S({line:aLe,"line-radial":k9t,arc:uLe,"arc-radial":R9t,curve:lLe,"curve-radial":N9t,"orthogonal-horizontal":P9t,"orthogonal-vertical":D9t,"orthogonal-radial":O9t,"diagonal-horizontal":$9t,"diagonal-vertical":M9t,"diagonal-radial":L9t});function dte(e){Re.call(this,null,e)}dte.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ft(dte,Re,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||yS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/DK(l),h=Sl(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const F9t=5;function j9t(e){const t=e.type;return!e.bins&&(t===JE||t===Wk||t===Gk)}function cLe(e){return Tee(e)&&e!==bh}const B9t=nd(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function fLe(e){Re.call(this,null,e),this.modified(!0)}ft(fLe,Re,{transform(e,t){var n=t.dataflow,r=this.value,i=U9t(e);(!r||i!==r.type)&&(this.value=r=yr(i)());for(i in e)if(!B9t[i]){if(i==="padding"&&cLe(r.type))continue;_n(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return G9t(r,e,W9t(r,e,V9t(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function U9t(e){var t=e.type,n="",r;return t===bh?bh+"-"+JE:(z9t(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?bh+"-":r===3?SS+"-":""),(n+t||JE).toLowerCase())}function z9t(e){const t=e.type;return Tee(t)&&t!==W1&&t!==G1&&(e.scheme||e.range&&e.range.length&&e.range.every(vt))}function V9t(e,t,n){const r=H9t(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&j9t(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return cLe(s)&&t.padding&&i[0]!==Kn(i)&&(i=q9t(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(dLe(s,i,n)),s===wee&&e.unknown(t.domainImplicit?J7:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Iee(e,t.nice)||null),i.length}function H9t(e,t,n){return t?(e.domain(dLe(e.type,t,n)),t.length):-1}function q9t(e,t,n,r,i,s){var o=Math.abs(Kn(n)-n[0]),a=o/(o-2*r),u=e===Im?pZ(t,null,a):e===Gk?j$(t,null,a,.5):e===Wk?j$(t,null,a,i||1):e===J4?mZ(t,null,a,s||1):hZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function dLe(e,t,n){if(w$e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+at(t))}return t}function W9t(e,t,n){let r=t.bins;if(r&&!Be(r)){const i=e.domain(),s=i[0],o=Kn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Fe("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Sl(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Eee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function G9t(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Y9t(r,t,n);else if(t.scheme&&(s=K9t(r,t,n),_n(s))){if(e.interpolator)return e.interpolator(s);Fe(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&E$e(r))return e.interpolator(tF(eH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(Cee(t.interpolate,t.interpolateGamma)):_n(e.round)?e.round(i):_n(e.rangeRound)&&e.interpolate(i?rk:xy),s&&e.range(eH(s,t.reverse))}function Y9t(e,t,n){e!==m$e&&e!==jV&&Fe("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===jV?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*_ee(n,i,r)]}function K9t(e,t,n){var r=t.schemeExtent,i,s;return Be(t.scheme)?s=tF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Aee(i),s||Fe(`Unrecognized scheme name: ${t.scheme}`)),n=e===eF?n+1:e===Eee?n-1:e===ZE||e===Z4?+t.schemeCount||F9t:n,E$e(e)?eme(s,r,t.reverse):_n(s)?T$e(eme(s,r),n):e===wee?s:s.slice(0,n)}function eme(e,t,n){return _n(e)&&(t||n)?S$e(e,eH(t||[0,1],n)):e}function eH(e,t){return t?e.slice().reverse():e}function hLe(e){Re.call(this,null,e)}ft(hLe,Re,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Rb(e.sort)),this.modified(n),t}});const tme="zero",pLe="center",mLe="normalize",gLe=["y0","y1"];function hte(e){Re.call(this,null,e)}hte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:tme,values:[tme,pLe,mLe]},{name:"as",type:"string",array:!0,length:2,default:gLe}]};ft(hte,Re,{transform(e,t){var n=e.as||gLe,r=n[0],i=n[1],s=Rb(e.sort),o=e.field||yS,a=e.offset===pLe?X9t:e.offset===mLe?Q9t:J9t,u,l,c,f;for(u=Z9t(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function X9t(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Q9t(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function J9t(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function Z9t(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const eBt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:rLe,datajoin:iLe,encode:sLe,legendentries:oLe,linkpath:fte,pie:dte,scale:fLe,sortitems:hLe,stack:hte},Symbol.toStringTag,{value:"Module"}));var tBt=Math.abs,tH=Math.cos,nM=Math.sin,nBt=1e-6,yLe=Math.PI,nH=yLe/2,nme=rBt(2);function rme(e){return e>1?nH:e<-1?-nH:Math.asin(e)}function rBt(e){return e>0?Math.sqrt(e):0}function iBt(e,t){var n=e*nM(t),r=30,i;do t-=i=(t+nM(t)-n)/(1+tH(t));while(tBt(i)>nBt&&--r>0);return t/2}function sBt(e,t,n){function r(i,s){return[e*i*tH(s=iBt(n,s)),t*nM(s)]}return r.invert=function(i,s){return s=rme(s/t),[i/(e*tH(s)),rme((2*s+nM(2*s))/n)]},r}var oBt=sBt(nme/nH,nme,yLe);function aBt(){return Hh(oBt).scale(169.529)}const uBt=oCe(),rH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function lBt(e,t){return function n(){const r=t();return r.type=e,r.path=oCe().projection(r),r.copy=r.copy||function(){const i=n();return rH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},b$e(r)}}function pte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(rM[e]=lBt(e,t),this):rM[e]||null}function vLe(e){return e&&e.path||uBt}const rM={albers:uCe,albersusa:n0t,azimuthalequalarea:r0t,azimuthalequidistant:i0t,conicconformal:a0t,conicequalarea:R3,conicequidistant:c0t,equalEarth:d0t,equirectangular:u0t,gnomonic:h0t,identity:p0t,mercator:s0t,mollweide:aBt,naturalEarth1:m0t,orthographic:g0t,stereographic:y0t,transversemercator:v0t};for(const e in rM)pte(e,rM[e]);function cBt(){}const hp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function bLe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),fBt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(dBt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=[],d=[],h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,hp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,hp[m|g<<1].forEach(b);for(hp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,hp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,hp[m|g<<1|y<<2|v<<3].forEach(b);hp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,hp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,hp[y<<2|v<<3].forEach(b);hp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],S=[w[1][0]+h,w[1][1]+p],T=o(E),C=o(S),A,N;(A=d[T])?(N=f[C])?(delete d[A.end],delete f[N.start],A===N?(A.ring.push(S),c(A.ring)):f[A.start]=d[N.end]={start:A.start,end:N.end,ring:A.ring.concat(N.ring)}):(delete d[A.end],A.ring.push(S),d[A.end=C]=A):(A=f[C])?(N=d[T])?(delete f[A.start],delete d[N.end],A===N?(A.ring.push(S),c(A.ring)):f[N.start]=d[A.end]={start:N.start,end:A.end,ring:N.ring.concat(A.ring)}):(delete f[A.start],A.ring.unshift(E),f[A.start=T]=A):f[T]=d[C]={start:T,end:C,ring:[E,S]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Fe("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:cBt,r):n===a},r}function fBt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function dBt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=hBt(e,t[n]))return i;return 0}function hBt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(pBt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function pBt(e,t,n){var r;return mBt(e,t,n)&&gBt(e[r=+(e[0]===t[0])],n[r],t[r])}function mBt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function gBt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function _Le(e,t,n){return function(r){var i=Ph(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?D0(s,o,e):a/(e+1);return Sl(s+u,o,u)}}function mte(e){Re.call(this,null,e)}mte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ft(mte,Re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Sa,s=bLe().smooth(e.smooth!==!1),o=e.thresholds||yBt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,Be(o)?o:o(c.values));vBt(f,c,l,e),f.forEach(d=>{u.push(V4(l,xr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function yBt(e,t,n){const r=_Le(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>uh(t(i).values)))}function vBt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(_n(i)&&(i=i(n,r)),_n(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(ur(i)?i:i[0])||1,a=(ur(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(wLe(t,o,a,u,l))}function wLe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function ime(e,t,n){const r=e>=0?e:OZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function R9(e){return _n(e)?e:Ta(+e)}function ELe(){var e=u=>u[0],t=u=>u[1],n=yS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=ime(r[0],u,e)>>o,f=ime(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),S=h+(+t(w)>>o);E>=0&&E<p&&S>=0&&S<m&&(g[E+S*p]+=+n(w))}),c>0&&f>0?(y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f),y_(p,m,g,y,c),v_(p,m,y,g,f)):c>0?(y_(p,m,g,y,c),y_(p,m,y,g,c),y_(p,m,g,y,c),v=y):f>0&&(v_(p,m,g,y,f),v_(p,m,y,g,f),v_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/DK(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=R9(u),a):e},a.y=function(u){return arguments.length?(t=R9(u),a):t},a.weight=function(u){return arguments.length?(n=R9(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Fe("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Fe("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=yt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Fe("invalid bandwidth"),r=u,a):r},a}function y_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function v_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function gte(e){Re.call(this,null,e)}gte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const bBt=["x","y","weight","size","cellSize","bandwidth"];function xLe(e,t){return bBt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ft(gte,Re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=_Bt(r,e.groupby),s=(e.groupby||[]).map(Ki),o=xLe(ELe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>xr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function _Bt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function yte(e){Re.call(this,null,e)}yte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ft(yte,Re,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=bLe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||_Le(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=xLe(ELe(),e)(i,!0),u=wLe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=Be(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(xr),n}});const iH="Feature",vte="FeatureCollection",wBt="MultiPoint";function bte(e){Re.call(this,null,e)}bte.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ft(bte,Re,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Sa,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(ya(a))||s&&t.modified(ya(s))||o&&t.modified(ya(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:iH,geometry:{type:wBt,coordinates:r}})),this.value={type:vte,features:n}}});function _te(e){Re.call(this,null,e)}_te.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ft(_te,Re,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Sa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=vLe(e.projection),n.materialize().reflow()):o=i===Sa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=EBt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function EBt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function wte(e){Re.call(this,null,e)}wte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ft(wte,Re,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Ete(e){Re.call(this,null,e)}Ete.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ft(Ete,Re,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=xBt(vLe(e.projection),e.field||jc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function xBt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function xte(e){Re.call(this,[],e),this.generator=$gt()}xte.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ft(xte,Re,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)_n(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(x3e(n[0],i)):t.add.push(xr(i)),n[0]=i,t}});function Ste(e){Re.call(this,null,e)}Ste.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ft(Ste,Re,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Sa,s=TBt(e.opacity,e),o=SBt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?uh(n.map(l=>uh(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=bn({},l,u);r||(f.$max=uh(c.values||[])),l[a]=CBt(c,f,o.dep?o:Ta(o(f)),s.dep?s:Ta(s(f)))}),t.reflow(!0).modifies(a)}});function SBt(e,t){let n;return _n(e)?(n=r=>O0(e(r,t)),n.dep=SLe(e)):n=Ta(O0(e||"#888")),n}function TBt(e,t){let n;return _n(e)?(n=r=>e(r,t),n.dep=SLe(e)):e?n=Ta(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function SLe(e){if(!_n(e))return!1;const t=nd(ya(e));return t.$x||t.$y||t.$value||t.$max}function CBt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:Lg,d=x0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function TLe(e){Re.call(this,null,e),this.modified(!0)}ft(TLe,Re,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=IBt(e.type),rH.forEach(r=>{e[r]!=null&&sme(n,r,e[r])})):rH.forEach(r=>{e.modified(r)&&sme(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&ABt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function ABt(e,t){const n=kBt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function IBt(e){const t=pte((e||"mercator").toLowerCase());return t||Fe("Unrecognized projection type: "+e),t()}function sme(e,t,n){_n(e[t])&&e[t](n)}function kBt(e){return e=yt(e),e.length===1?e[0]:{type:vte,features:e.reduce((t,n)=>t.concat(RBt(n)),[])}}function RBt(e){return e.type===vte?e.features:yt(e).filter(t=>t!=null).map(t=>t.type===iH?t:{type:iH,geometry:t})}const NBt=Object.freeze(Object.defineProperty({__proto__:null,contour:yte,geojson:bte,geopath:_te,geopoint:wte,geoshape:Ete,graticule:xte,heatmap:Ste,isocontour:mte,kde2d:gte,projection:TLe},Symbol.toStringTag,{value:"Module"})),ome={center:Tmt,collide:Hmt,nbody:tgt,link:Wmt,x:ngt,y:rgt},PC="forces",sH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],PBt=["static","iterations"],CLe=["x","y","vx","vy"];function Tte(e){Re.call(this,null,e)}Tte.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:CLe}]};ft(Tte,Re,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(sH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&ALe(n,e,0,t)):(this.value=n=OBt(t.source,e),n.on("tick",DBt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(PBt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==PC||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(CLe)}});function DBt(e,t){return()=>e.touch(t).run()}function OBt(e,t){const n=egt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),ALe(n,t,!0).on("end",()=>s=!0)}function ALe(e,t,n,r){var i=yt(t.forces),s,o,a,u;for(s=0,o=sH.length;s<o;++s)a=sH[s],a!==PC&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=PC+s,a=n||t.modified(PC,s)?MBt(i[s]):r&&$Bt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(PC+s,null);return e.numForces=i.length,e}function $Bt(e,t){var n,r;for(n in e)if(_n(r=e[n])&&t.modified(ya(r)))return 1;return 0}function MBt(e){var t,n;Ft(ome,e.force)||Fe("Unrecognized force: "+e.force),t=ome[e.force]();for(n in e)_n(t[n])&&LBt(t[n],e[n],e);return t}function LBt(e,t,n){e(_n(t)?r=>t(r,n):t)}const FBt=Object.freeze(Object.defineProperty({__proto__:null,force:Tte},Symbol.toStringTag,{value:"Module"}));function oH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function Cte(e){Re.call(this,null,e)}Cte.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const jBt=e=>e.values;ft(Cte,Re,{transform(e,t){t.source||Fe("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&z4(o.data)&&i.rem.push(o.data)}),this.value=s=ZK({values:yt(e.keys).reduce((o,a)=>(o.key(a),o),BBt()).entries(i.source)},jBt),n&&s.each(o=>{o.children&&(o=xr(o.data),i.add.push(o),i.source.push(o))}),oH(s,Mt,Mt)),i.source.root=s,i}});function BBt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function Gm(e){Re.call(this,null,e)}const UBt=(e,t)=>e.parent===t.parent?1:2;ft(Gm,Re,{transform(e,t){(!t.source||!t.source.root)&&Fe(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Rb(e.sort,o=>o.data)),zBt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?UBt:yS);try{this.value=n(i)}catch(o){Fe(o)}return i.each(o=>VBt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function zBt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function VBt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const aH=["x","y","r","depth","children"];function Ate(e){Gm.call(this,e)}Ate.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:aH.length,default:aH}]};ft(Ate,Gm,{layout:ryt,params:["radius","size","padding"],fields:aH});const uH=["x0","y0","x1","y1","depth","children"];function Ite(e){Gm.call(this,e)}Ite.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:uH.length,default:uH}]};ft(Ite,Gm,{layout:iyt,params:["size","round","padding"],fields:uH});function kte(e){Re.call(this,null,e)}kte.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ft(kte,Re,{transform(e,t){t.source||Fe("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?oH(nce().id(e.key).parentId(e.parentKey)(i.source),e.key,Bc):oH(nce()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const ame={tidy:pyt,cluster:C0t},lH=["x","y","depth","children"];function Rte(e){Gm.call(this,e)}Rte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:lH.length,default:lH}]};ft(Rte,Gm,{layout(e){const t=e||"tidy";if(Ft(ame,t))return ame[t]();Fe("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:lH});function Nte(e){Re.call(this,[],e)}Nte.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ft(Nte,Re,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Fe("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Mt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Mt(a)]&&s[Mt(u)]&&i.add.push(xr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Mt(o)]=1),n.forEach(o=>{(s[Mt(o.source)]||s[Mt(o.target)])&&i.mod.push(o)})),i}});const ume={binary:gyt,dice:ak,slice:h6,slicedice:yyt,squarify:CCe,resquarify:vyt},cH=["x0","y0","x1","y1","depth","children"];function Pte(e){Gm.call(this,e)}Pte.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:cH.length,default:cH}]};ft(Pte,Gm,{layout(){const e=myt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ft(ume,t)?e.tile(ume[t]):Fe("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:cH});const HBt=Object.freeze(Object.defineProperty({__proto__:null,nest:Cte,pack:Ate,partition:Ite,stratify:kte,tree:Rte,treelinks:Nte,treemap:Pte},Symbol.toStringTag,{value:"Module"})),N9=4278190080;function qBt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function WBt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=x0(s,o).getContext("2d"),l=x0(s,o).getContext("2d"),c=a&&x0(s,o).getContext("2d");n.forEach(C=>BD(u,C,!1)),BD(l,t,!1),a&&BD(c,t,!0);const f=P9(u,s,o),d=P9(l,s,o),h=a&&P9(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,S,T;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&N9,T=d[w]&N9,S=a&&h[w]&N9,(E||S||T)&&(v=e(g),b=e(y),!i&&(E||T)&&p.set(v,b),a&&(E||S)&&m.set(v,b));return[p,m]}function P9(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function BD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>BD(e,s.items,n))}):ql[r].draw(e,{items:n?t.map(GBt):t})}function GBt(e){const t=V4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const pp=5,Oa=31,fI=32,Tg=new Uint32Array(fI+1),Sf=new Uint32Array(fI+1);Sf[0]=0;Tg[0]=~Sf[0];for(let e=1;e<=fI;++e)Sf[e]=Sf[e-1]<<1|1,Tg[e]=~Sf[e];function YBt(e,t){const n=new Uint32Array(~~((e*t+fI)/fI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>pp]&1<<(a&Oa)},set:(s,o)=>{const a=o*e+s;r(a>>>pp,1<<(a&Oa))},clear:(s,o)=>{const a=o*e+s;i(a>>>pp,~(1<<(a&Oa)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>pp,h=f>>>pp,d===h){if(n[d]&Tg[c&Oa]&Sf[(f&Oa)+1])return!0}else{if(n[d]&Tg[c&Oa]||n[h]&Sf[(f&Oa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>pp,d=c>>>pp,f===d)r(f,Tg[l&Oa]&Sf[(c&Oa)+1]);else for(r(f,Tg[l&Oa]),r(d,Sf[(c&Oa)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>pp,d=c>>>pp,f===d)i(f,Sf[l&Oa]|Tg[(c&Oa)+1]);else for(i(f,Sf[l&Oa]),i(d,Tg[(c&Oa)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function KBt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>YBt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function XBt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Rl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function iM(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function Jg(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function QBt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!iM(p,m,d,h,i,s)&&!Jg(e,p,m,h,d,g,o,a)&&!Jg(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,Jg(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Rl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,S,T,C,A,N,k,O,P,$,L,M,U,B;for(let V=0;V<f;++V){for(v=c[V].x,w=c[V].y,b=c[V].x2===void 0?v:c[V].x2,E=c[V].y2===void 0?w:c[V].y2,v>b&&(B=v,v=b,b=B),w>E&&(B=w,w=E,E=B),N=e(v),O=e(b),k=~~((N+O)/2),P=e(w),L=e(E),$=~~((P+L)/2),C=k;C>=N;--C)for(A=$;A>=P;--A)U=u(C,A,p,h,d),U&&([l.x,l.y,p,m]=U);for(C=k;C<=O;++C)for(A=$;A<=L;++A)U=u(C,A,p,h,d),U&&([l.x,l.y,p,m]=U);!m&&!n&&(M=Math.abs(b-v+E-w),S=(v+b)/2,T=(w+E)/2,M>=y&&!iM(S,T,h,d,i,s)&&!Jg(e,S,T,d,h,d,o,null)&&(y=M,l.x=S,l.y=T,g=!0))}return m||g?(S=h/2,T=d/2,o.setRange(e(l.x-S),e(l.y-T),e(l.x+S),e(l.y+T)),l.align="center",l.baseline="middle",!0):!1}}const JBt=[-1,-1,1,1],ZBt=[-1,1,-1,1];function eUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Rl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,S,T,C,A,N,k,O,P,$;for(let L=0;L<f;++L){for(b=c[L].x,E=c[L].y,w=c[L].x2===void 0?b:c[L].x2,S=c[L].y2===void 0?E:c[L].y2,p.push([e((b+w)/2),e((E+S)/2)]);p.length;)if([A,N]=p.pop(),!(o.get(A,N)||a.get(A,N)||u.get(A,N))){u.set(A,N);for(let M=0;M<4;++M)T=A+JBt[M],C=N+ZBt[M],u.outOfBounds(T,C,T,C)||p.push([T,C]);if(T=e.invert(A),C=e.invert(N),k=m,O=s,!iM(T,C,h,d,i,s)&&!Jg(e,T,C,d,h,k,o,a)&&!Jg(e,T,C,d,h,d,o,null)){for(;O-k>=1;)P=(k+O)/2,Jg(e,T,C,d,h,P,o,a)?O=P:k=P;k>m&&(l.x=T,l.y=C,m=k,g=!0)}}!g&&!n&&($=Math.abs(w-b+S-E),T=(b+w)/2,C=(E+S)/2,$>=v&&!iM(T,C,h,d,i,s)&&!Jg(e,T,C,d,h,d,o,null)&&(v=$,l.x=T,l.y=C,y=!0))}return g||y?(T=h/2,C=d/2,o.setRange(e(l.x-T),e(l.y-C),e(l.x+T),e(l.y+C)),l.align="center",l.baseline="middle",!0):!1}}const tUt=["right","center","left"],nUt=["bottom","middle","top"];function rUt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,S,T,C,A,N,k;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,T=c[4+p]+y*f*p/2+r[O]*p*g,w=T-f/2,E=T+f/2,C=e(v),N=e(w),k=e(E),!d)if(lme(C,C,N,k,o,a,v,v,w,E,c,m))d=Rl.width(l.datum,l.datum.text);else continue;if(S=v+y*d*h/2,v=S-d/2,b=S+d/2,C=e(v),A=e(b),lme(C,A,N,k,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:S,l.y=p?p*y<0?E:w:T,l.align=tUt[h*y+1],l.baseline=nUt[p*y+1],o.setRange(C,N,A,k),!0}return!1}}function lme(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const D9=0,O9=4,$9=8,M9=0,L9=1,F9=2,iUt={"top-left":D9+M9,top:D9+L9,"top-right":D9+F9,left:O9+M9,middle:O9+L9,right:O9+F9,"bottom-left":$9+M9,bottom:$9+L9,"bottom-right":$9+F9},sUt={naive:XBt,"reduced-search":QBt,floodfill:eUt};function oUt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=aUt(r,f),h=uUt(i,f),p=lUt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=cUt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const S=e.map(N=>{const k=v?Rl.width(N,N.text):void 0;return w=Math.max(w,k),E=Math.max(E,N.fontSize),{datum:N,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(N),textWidth:k}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const T=KBt(t[0],t[1],l);let C;if(!b){n&&S.sort((O,P)=>n(O.datum,P.datum));let N=!1;for(let O=0;O<h.length&&!N;++O)N=h[O]===5||d[O]<0;const k=(p&&o||g)&&e.map(O=>O.datum);C=s.length||k?WBt(T,k||[],s,N,g):qBt(T,o&&S)}const A=g?sUt[c](T,C,o,u):rUt(T,C,h,d);return S.forEach(N=>N.opacity=+A(N)),S}function aUt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function uUt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=iUt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function lUt(e){return e&&e.mark&&e.mark.marktype}function cUt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const fH=["x","y","opacity","align","baseline"],ILe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Dte(e){Re.call(this,null,e)}Dte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:ILe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:fH.length,default:fH}]};ft(Dte,Re,{transform(e,t){function n(s){const o=e[s];return _n(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Fe("Size parameter should be specified as a [width, height] array.");const i=e.as||fH;return oUt(t.materialize(t.SOURCE).source||[],e.size,e.sort,yt(e.offset==null?1:e.offset),yt(e.anchor||ILe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const fUt=Object.freeze(Object.defineProperty({__proto__:null,label:Dte},Symbol.toStringTag,{value:"Module"}));function kLe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Ote(e){Re.call(this,null,e)}Ote.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ft(Ote,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kLe(r,e.groupby),s=(e.groupby||[]).map(Ki),o=s.length,a=e.as||[Ki(e.x),Ki(e.y)],u=[];i.forEach(l=>{U3e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(xr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const dH={constant:WZ,linear:GZ,log:L3e,exp:F3e,pow:j3e,quad:YZ,poly:B3e},dUt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function $te(e){Re.call(this,null,e)}$te.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(dH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ft($te,Re,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=kLe(r,e.groupby),s=(e.groupby||[]).map(Ki),o=e.method||"linear",a=e.order==null?3:e.order,u=dUt(o,a),l=e.as||[Ki(e.x),Ki(e.y)],c=dH[o],f=[];let d=e.extent;Ft(dH,o)||Fe("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(xr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Ph(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(xr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):X4(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const hUt=Object.freeze(Object.defineProperty({__proto__:null,loess:Ote,regression:$te},Symbol.toStringTag,{value:"Module"}));function Mte(e){Re.call(this,null,e)}Mte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const pUt=[-1e5,-1e5,1e5,1e5];ft(Mte,Re,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:pUt;const s=this.value=UK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!gUt(u)?mUt(u):null}return t.reflow(e.modified()).modifies(n)}});function mUt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function gUt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const yUt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Mte},Symbol.toStringTag,{value:"Module"}));var j9=Math.PI/180,DC=64,UD=2048;function vUt(){var e=[256,256],t,n,r,i,s,o,a,u=RLe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(x0()),m=SUt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(S=>({text:t(S),font:n(S),style:i(S),weight:s(S),rotate:o(S),size:~~(r(S)+1e-14),padding:a(S),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:S})).sort((S,T)=>T.size-S.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,bUt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?wUt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(DC<<5)/m,p.height=UD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.hypot(e[0],e[1]),w=u(e),E=c()<.5?1:-1,S=-E,T,C,A;(T=w(S+=E))&&(C=~~T[0],A=~~T[1],!(Math.min(Math.abs(C),Math.abs(A))>=b));)if(m.x=y+C,m.y=v+A,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!_Ut(m,p,e[0]))&&(!g||EUt(m,g))){for(var N=m.sprite,k=m.width>>5,O=e[0]>>5,P=m.x-(k<<4),$=P&127,L=32-$,M=m.y1-m.y0,U=(m.y+m.y0)*O+(P>>5),B,V=0;V<M;V++){B=0;for(var D=0;D<=k;D++)p[U+D]|=B<<L|(D<k?(B=N[V*k+D])>>>$:0);U+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=tv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=tv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=tv(p),f):s},f.rotate=function(p){return arguments.length?(o=tv(p),f):o},f.text=function(p){return arguments.length?(t=tv(p),f):t},f.spiral=function(p){return arguments.length?(u=TUt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=tv(p),f):r},f.padding=function(p){return arguments.length?(a=tv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function bUt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(DC<<5)/s,UD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*j9),g=Math.cos(t.rotate*j9),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=DC<<5&&(o=0,a+=u,u=0),a+d>=UD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*j9),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(DC<<5)/s,UD/s).data,S=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)S[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var T=0,C=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var A=f*p+(h>>5),N=E[(a+p)*(DC<<5)+(o+h)<<2]?1<<31-h%32:0;S[A]|=N,T|=N}T?C=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+C,t.sprite=S.slice(0,(t.y1-t.y0)*f)}}}function _Ut(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function wUt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function EUt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function RLe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function xUt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function SUt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function tv(e){return typeof e=="function"?e:function(){return e}}var TUt={archimedean:RLe,rectangular:xUt};const NLe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],CUt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Lte(e){Re.call(this,vUt(),e)}Lte.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:NLe}]};ft(Lte,Re,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Fe("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return _n(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||CUt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||NLe;let a=e.fontSize||14,u;if(_n(a)?u=e.fontSizeRange:a=Ta(a),u){const p=a,m=yr("sqrt")().domain(Ph(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(zc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const AUt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Lte},Symbol.toStringTag,{value:"Module"})),IUt=e=>new Uint8Array(e),kUt=e=>new Uint16Array(e),N2=e=>new Uint32Array(e);function RUt(){let e=8,t=[],n=N2(0),r=dP(0,e),i=dP(0,e);return{data:()=>t,seen:()=>n=NUt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=dP(s,e,r),i=dP(s,e))}}}function NUt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function dP(e,t,n){const r=(t<257?IUt:t<65537?kUt:N2)(e);return n&&r.set(n),r}function cme(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function fme(){let e=N2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=N2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=PUt(h,d),c)p=t,m=e,t=Array(c+f),e=N2(c+f),DUt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[jht(u,a[0],0,l),P0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function PUt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),qht(e,t)}function DUt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function Fte(e){Re.call(this,RUt(),e),this._indices=null,this._dims=null}Fte.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ft(Fte,Re,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=fme()),s.push(cme(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,S,T;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,S=v.length;E<S;++E)w[v[E]._index]=1;for(E=0;E<h;++E)T=r[E],(!o[E]||e.modified("fields",E)||t.modified(T.fields))&&(y=T.fname,(m=p[y])||(s[y]=g=fme(),p[y]=m=g.insert(T,t.source,0)),o[E]=cme(g,E,i[E]).onAdd(m,u));for(E=0,S=a.data().length;E<S;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function jte(e){Re.call(this,null,e)}jte.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ft(jte,Re,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const OUt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:Fte,resolvefilter:jte},Symbol.toStringTag,{value:"Module"})),$Ut="RawCode",K1="Literal",MUt="Property",LUt="Identifier",FUt="ArrayExpression",jUt="BinaryExpression",PLe="CallExpression",BUt="ConditionalExpression",UUt="LogicalExpression",zUt="MemberExpression",VUt="ObjectExpression",HUt="UnaryExpression";function hd(e){this.type=e}hd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=qUt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function qUt(e){switch(e.type){case FUt:return e.elements;case jUt:case UUt:return[e.left,e.right];case PLe:return[e.callee].concat(e.arguments);case BUt:return[e.test,e.consequent,e.alternate];case zUt:return[e.object,e.property];case VUt:return e.properties;case MUt:return[e.key,e.value];case HUt:return[e.argument];case LUt:case K1:case $Ut:default:return[]}}var Jh,Rt,$e,ba,Dr,pF=1,sR=2,X1=3,$y=4,mF=5,Db=6,Eu=7,oR=8,WUt=9;Jh={};Jh[pF]="Boolean";Jh[sR]="<end>";Jh[X1]="Identifier";Jh[$y]="Keyword";Jh[mF]="Null";Jh[Db]="Numeric";Jh[Eu]="Punctuator";Jh[oR]="String";Jh[WUt]="RegularExpression";var GUt="ArrayExpression",YUt="BinaryExpression",KUt="CallExpression",XUt="ConditionalExpression",DLe="Identifier",QUt="Literal",JUt="LogicalExpression",ZUt="MemberExpression",e7t="ObjectExpression",t7t="Property",n7t="UnaryExpression",oo="Unexpected token %0",r7t="Unexpected number",i7t="Unexpected string",s7t="Unexpected identifier",o7t="Unexpected reserved word",a7t="Unexpected end of input",hH="Invalid regular expression",B9="Invalid regular expression: missing /",OLe="Octal literals are not allowed in strict mode.",u7t="Duplicate data property in object literal not allowed in strict mode",Po="ILLEGAL",dI="Disabled.",l7t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),c7t=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function gF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Tp(e){return e>=48&&e<=57}function Bte(e){return"0123456789abcdefABCDEF".includes(e)}function P2(e){return"01234567".includes(e)}function f7t(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function hI(e){return e===10||e===13||e===8232||e===8233}function aR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&l7t.test(String.fromCharCode(e))}function sM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&c7t.test(String.fromCharCode(e))}const d7t={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function $Le(){for(;$e<ba;){const e=Rt.charCodeAt($e);if(f7t(e)||hI(e))++$e;else break}}function pH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<ba&&Bte(Rt[$e])?(r=Rt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):hr({},oo,Po);return String.fromCharCode(i)}function h7t(){var e,t,n,r;for(e=Rt[$e],t=0,e==="}"&&hr({},oo,Po);$e<ba&&(e=Rt[$e++],!!Bte(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&hr({},oo,Po),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function MLe(){var e,t;for(e=Rt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(Rt.charCodeAt($e)!==117&&hr({},oo,Po),++$e,e=pH("u"),(!e||e==="\\"||!aR(e.charCodeAt(0)))&&hr({},oo,Po),t=e);$e<ba&&(e=Rt.charCodeAt($e),!!sM(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Rt.charCodeAt($e)!==117&&hr({},oo,Po),++$e,e=pH("u"),(!e||e==="\\"||!sM(e.charCodeAt(0)))&&hr({},oo,Po),t+=e);return t}function p7t(){var e,t;for(e=$e++;$e<ba;){if(t=Rt.charCodeAt($e),t===92)return $e=e,MLe();if(sM(t))++$e;else break}return Rt.slice(e,$e)}function m7t(){var e,t,n;return e=$e,t=Rt.charCodeAt($e)===92?MLe():p7t(),t.length===1?n=X1:d7t.hasOwnProperty(t)?n=$y:t==="null"?n=mF:t==="true"||t==="false"?n=pF:n=X1,{type:n,value:t,start:e,end:$e}}function U9(){var e=$e,t=Rt.charCodeAt($e),n,r=Rt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Eu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=Rt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Eu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,Rt.charCodeAt($e)===61&&++$e,{type:Eu,value:Rt.slice(e,$e),start:e,end:$e}}}if(o=Rt.substr($e,4),o===">>>=")return $e+=4,{type:Eu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Eu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return $e+=2,{type:Eu,value:i,start:e,end:$e};if(i==="//"&&hr({},oo,Po),"<>=!+-*%&|^/".includes(r))return++$e,{type:Eu,value:r,start:e,end:$e};hr({},oo,Po)}function g7t(e){let t="";for(;$e<ba&&Bte(Rt[$e]);)t+=Rt[$e++];return t.length===0&&hr({},oo,Po),aR(Rt.charCodeAt($e))&&hr({},oo,Po),{type:Db,value:parseInt("0x"+t,16),start:e,end:$e}}function y7t(e){let t="0"+Rt[$e++];for(;$e<ba&&P2(Rt[$e]);)t+=Rt[$e++];return(aR(Rt.charCodeAt($e))||Tp(Rt.charCodeAt($e)))&&hr({},oo,Po),{type:Db,value:parseInt(t,8),octal:!0,start:e,end:$e}}function dme(){var e,t,n;if(n=Rt[$e],gF(Tp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=Rt[$e++],n=Rt[$e],e==="0"){if(n==="x"||n==="X")return++$e,g7t(t);if(P2(n))return y7t(t);n&&Tp(n.charCodeAt(0))&&hr({},oo,Po)}for(;Tp(Rt.charCodeAt($e));)e+=Rt[$e++];n=Rt[$e]}if(n==="."){for(e+=Rt[$e++];Tp(Rt.charCodeAt($e));)e+=Rt[$e++];n=Rt[$e]}if(n==="e"||n==="E")if(e+=Rt[$e++],n=Rt[$e],(n==="+"||n==="-")&&(e+=Rt[$e++]),Tp(Rt.charCodeAt($e)))for(;Tp(Rt.charCodeAt($e));)e+=Rt[$e++];else hr({},oo,Po);return aR(Rt.charCodeAt($e))&&hr({},oo,Po),{type:Db,value:parseFloat(e),start:t,end:$e}}function v7t(){var e="",t,n,r,i,s=!1;for(t=Rt[$e],gF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<ba;)if(r=Rt[$e++],r===t){t="";break}else if(r==="\\")if(r=Rt[$e++],!r||!hI(r.charCodeAt(0)))switch(r){case"u":case"x":Rt[$e]==="{"?(++$e,e+=h7t()):e+=pH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:P2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<ba&&P2(Rt[$e])&&(s=!0,i=i*8+"01234567".indexOf(Rt[$e++]),"0123".includes(r)&&$e<ba&&P2(Rt[$e])&&(i=i*8+"01234567".indexOf(Rt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Rt[$e]===`
`&&++$e;else{if(hI(r.charCodeAt(0)))break;e+=r}return t!==""&&hr({},oo,Po),{type:oR,value:e,octal:s,start:n,end:$e}}function b7t(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";hr({},hH)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{hr({},hH)}try{return new RegExp(e,t)}catch{return null}}function _7t(){var e,t,n,r,i;for(e=Rt[$e],gF(e==="/","Regular expression literal must start with a slash"),t=Rt[$e++],n=!1,r=!1;$e<ba;)if(e=Rt[$e++],t+=e,e==="\\")e=Rt[$e++],hI(e.charCodeAt(0))&&hr({},B9),t+=e;else if(hI(e.charCodeAt(0)))hr({},B9);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||hr({},B9),i=t.substr(1,t.length-2),{value:i,literal:t}}function w7t(){var e,t,n;for(t="",n="";$e<ba&&(e=Rt[$e],!!sM(e.charCodeAt(0)));)++$e,e==="\\"&&$e<ba?hr({},oo,Po):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&hr({},hH,n),{value:n,literal:t}}function E7t(){var e,t,n,r;return Dr=null,$Le(),e=$e,t=_7t(),n=w7t(),r=b7t(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function x7t(e){return e.type===X1||e.type===$y||e.type===pF||e.type===mF}function LLe(){if($Le(),$e>=ba)return{type:sR,start:$e,end:$e};const e=Rt.charCodeAt($e);return aR(e)?m7t():e===40||e===41||e===59?U9():e===39||e===34?v7t():e===46?Tp(Rt.charCodeAt($e+1))?dme():U9():Tp(e)?dme():U9()}function ku(){const e=Dr;return $e=e.end,Dr=LLe(),$e=e.end,e}function FLe(){const e=$e;Dr=LLe(),$e=e}function S7t(e){const t=new hd(GUt);return t.elements=e,t}function hme(e,t,n){const r=new hd(e==="||"||e==="&&"?JUt:YUt);return r.operator=e,r.left=t,r.right=n,r}function T7t(e,t){const n=new hd(KUt);return n.callee=e,n.arguments=t,n}function C7t(e,t,n){const r=new hd(XUt);return r.test=e,r.consequent=t,r.alternate=n,r}function Ute(e){const t=new hd(DLe);return t.name=e,t}function OC(e){const t=new hd(QUt);return t.value=e.value,t.raw=Rt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function pme(e,t,n){const r=new hd(ZUt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function A7t(e){const t=new hd(e7t);return t.properties=e,t}function mme(e,t,n){const r=new hd(t7t);return r.key=t,r.value=n,r.kind=e,r}function I7t(e,t){const n=new hd(n7t);return n.operator=e,n.argument=t,n.prefix=!0,n}function hr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(gF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function yF(e){e.type===sR&&hr(e,a7t),e.type===Db&&hr(e,r7t),e.type===oR&&hr(e,i7t),e.type===X1&&hr(e,s7t),e.type===$y&&hr(e,o7t),hr(e,oo,e.value)}function _a(e){const t=ku();(t.type!==Eu||t.value!==e)&&yF(t)}function di(e){return Dr.type===Eu&&Dr.value===e}function z9(e){return Dr.type===$y&&Dr.value===e}function k7t(){const e=[];for($e=Dr.start,_a("[");!di("]");)di(",")?(ku(),e.push(null)):(e.push(Q1()),di("]")||_a(","));return ku(),S7t(e)}function gme(){$e=Dr.start;const e=ku();return e.type===oR||e.type===Db?(e.octal&&hr(e,OLe),OC(e)):Ute(e.value)}function R7t(){var e,t,n,r;if($e=Dr.start,e=Dr,e.type===X1)return n=gme(),_a(":"),r=Q1(),mme("init",n,r);if(e.type===sR||e.type===Eu)yF(e);else return t=gme(),_a(":"),r=Q1(),mme("init",t,r)}function N7t(){var e=[],t,n,r,i={},s=String;for($e=Dr.start,_a("{");!di("}");)t=R7t(),t.key.type===DLe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?hr({},u7t):i[r]=!0,e.push(t),di("}")||_a(",");return _a("}"),A7t(e)}function P7t(){_a("(");const e=zte();return _a(")"),e}const D7t={if:1};function O7t(){var e,t,n;if(di("("))return P7t();if(di("["))return k7t();if(di("{"))return N7t();if(e=Dr.type,$e=Dr.start,e===X1||D7t[Dr.value])n=Ute(ku().value);else if(e===oR||e===Db)Dr.octal&&hr(Dr,OLe),n=OC(ku());else{if(e===$y)throw new Error(dI);e===pF?(t=ku(),t.value=t.value==="true",n=OC(t)):e===mF?(t=ku(),t.value=null,n=OC(t)):di("/")||di("/=")?(n=OC(E7t()),FLe()):yF(ku())}return n}function $7t(){const e=[];if(_a("("),!di(")"))for(;$e<ba&&(e.push(Q1()),!di(")"));)_a(",");return _a(")"),e}function M7t(){$e=Dr.start;const e=ku();return x7t(e)||yF(e),Ute(e.value)}function L7t(){return _a("."),M7t()}function F7t(){_a("[");const e=zte();return _a("]"),e}function j7t(){var e,t,n;for(e=O7t();;)if(di("."))n=L7t(),e=pme(".",e,n);else if(di("("))t=$7t(),e=T7t(e,t);else if(di("["))n=F7t(),e=pme("[",e,n);else break;return e}function yme(){const e=j7t();if(Dr.type===Eu&&(di("++")||di("--")))throw new Error(dI);return e}function zD(){var e,t;if(Dr.type!==Eu&&Dr.type!==$y)t=yme();else{if(di("++")||di("--"))throw new Error(dI);if(di("+")||di("-")||di("~")||di("!"))e=ku(),t=zD(),t=I7t(e.value,t);else{if(z9("delete")||z9("void")||z9("typeof"))throw new Error(dI);t=yme()}}return t}function vme(e){let t=0;if(e.type!==Eu&&e.type!==$y)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function B7t(){var e,t,n,r,i,s,o,a,u,l;if(e=Dr,u=zD(),r=Dr,i=vme(r),i===0)return u;for(r.prec=i,ku(),t=[e,Dr],o=zD(),s=[u,r,o];(i=vme(Dr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=hme(a,u,o),s.push(n);r=ku(),r.prec=i,s.push(r),t.push(Dr),n=zD(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=hme(s[l-1].value,s[l-2],n),l-=2;return n}function Q1(){var e,t,n;return e=B7t(),di("?")&&(ku(),t=Q1(),_a(":"),n=Q1(),e=C7t(e,t,n)),e}function zte(){const e=Q1();if(di(","))throw new Error(dI);return e}function Vte(e){Rt=e,$e=0,ba=Rt.length,Dr=null,FLe();const t=zte();if(Dr.type!==sR)throw new Error("Unexpect token after expression.");return t}var jLe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function BLe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Fe("Missing arguments to clamp function."),o.length>3&&Fe("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Fe("Missing arguments to if function."),o.length>3&&Fe("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function U7t(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function ULe(e){e=e||{};const t=e.allowed?nd(e.allowed):{},n=e.forbidden?nd(e.forbidden):{},r=e.constants||jLe,i=(e.functions||BLe)(f),s=e.globalvar,o=e.fieldvar,a=_n(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(vt(p))return p;const m=d[p.type];return m==null&&Fe("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:Ft(n,m)?Fe("Illegal identifier: "+m):Ft(r,m)?r[m]:Ft(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[U7t(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Fe("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=Ft(i,m)&&i[m];return y||Fe("Unrecognized function: "+m),_n(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const bme=Symbol("vega_selection_getter");function zLe(e){return(!e.getter||!e.getter[bme])&&(e.getter=jc(e.field),e.getter[bme]=!0),e.getter}const Hte="intersect",_me="union",z7t="vlMulti",V7t="vlPoint",wme="or",H7t="and",jd="_vgsid_",pI=jc(jd),q7t="E",W7t="R",G7t="R-E",Y7t="R-LE",K7t="R-RE",oM="index:unit";function Eme(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=zLe(a)(e),w0(o)&&(o=pa(o)),w0(r[s])&&(r[s]=pa(r[s])),Be(r[s])&&w0(r[s][0])&&(r[s]=r[s].map(pa)),a.type===q7t){if(Be(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===W7t){if(!fw(o,r[s]))return!1}else if(a.type===K7t){if(!fw(o,r[s],!0,!1))return!1}else if(a.type===G7t){if(!fw(o,r[s],!1,!1))return!1}else if(a.type===Y7t&&!fw(o,r[s],!1,!0))return!1;return!0}function X7t(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[oM]&&r[oM].value:void 0,o=n===Hte,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Eme(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Eme(t,l),o^h)return h;return a&&o}const VLe=Wx(pI),Q7t=VLe.left,J7t=VLe.right;function Z7t(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[oM]&&r[oM].value:void 0,o=n===Hte,a=pI(t),u=Q7t(i,a);if(u===i.length||pI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(J7t(i,a)-u<s.size)return!1}return!0}function ezt(e,t){return e.map(n=>bn(t.fields?{values:t.fields.map(r=>zLe(r)(n.datum))}:{[jd]:pI(n.datum)},t))}function tzt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,S;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,S=c.length;E<S;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=V9[`${y}_union`],m[d]=v(g,yt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(yt(f).reduce((T,C,A)=>(T[c[A].field]=C,T),{})))}else h=jd,p=pI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[jd]:p}));if(t=t||_me,o[jd]?o[jd]=V9[`${jd}_${t}`](...Object.values(o[jd])):Object.keys(o).forEach(T=>{o[T]=Object.keys(o[T]).map(C=>o[T][C]).reduce((C,A)=>C===void 0?A:V9[`${u[T]}_${t}`](C,A))}),s=Object.keys(a),n&&s.length){const T=r?V7t:z7t;o[T]=t===_me?{[wme]:s.reduce((C,A)=>(C.push(...a[A]),C),[])}:{[H7t]:s.map(C=>({[wme]:a[C]}))}}return o}var V9={[`${jd}_union`]:ept,[`${jd}_intersect`]:Jht,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=pa(t[0]),r=pa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=pa(t[0]),r=pa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const nzt=":",rzt="@";function qte(e,t,n,r){t[0].type!==K1&&Fe("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Kn(t).value,o="unit",a=rzt+o,u=nzt+i;s===Hte&&!Ft(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),Ft(r,u)||(r[u]=n.getData(i).tuplesRef())}function HLe(e){const t=this.context.data[e];return t?t.values.value:[]}function izt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function szt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Bc).insert(t)),1}function ozt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const uR=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},azt=uR("format"),qLe=uR("timeFormat"),uzt=uR("utcFormat"),lzt=uR("timeParse"),czt=uR("utcParse"),hP=new Date(2e3,0,1);function vF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(hP.setYear(2e3),hP.setMonth(e),hP.setDate(t),qLe.call(this,hP,n))}function fzt(e){return vF.call(this,e,1,"%B")}function dzt(e){return vF.call(this,e,1,"%b")}function hzt(e){return vF.call(this,0,2+e,"%A")}function pzt(e){return vF.call(this,0,2+e,"%a")}const mzt=":",gzt="@",mH="%",WLe="$";function Wte(e,t,n,r){t[0].type!==K1&&Fe("First argument to data functions must be a string literal.");const i=t[0].value,s=mzt+i;if(!Ft(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function yzt(e,t,n,r){t[0].type!==K1&&Fe("First argument to indata must be a string literal."),t[1].type!==K1&&Fe("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=gzt+s;Ft(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ka(e,t,n,r){if(t[0].type===K1)xme(n,r,t[0].value);else for(e in n.scales)xme(n,r,e)}function xme(e,t,n){const r=mH+n;if(!Ft(t,r))try{t[r]=e.scaleRef(n)}catch{}}function Zh(e,t){if(_n(e))return e;if(vt(e)){const n=t.scales[e];return n&&VFt(n.value)?n.value:void 0}}function vzt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ka,n._range=Ka,n._scale=Ka;const r=i=>"_["+(i.type===K1?at(mH+i.value):at(mH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Gte(e,t){return function(n,r,i){if(n){const s=Zh(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const bzt=Gte("area",pgt),_zt=Gte("bounds",vgt),wzt=Gte("centroid",Sgt);function Ezt(e,t){const n=Zh(e,(t||this).context);return n&&n.scale()}function xzt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Yte(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Szt(){return Yte(this.context.dataflow,"warn",arguments)}function Tzt(){return Yte(this.context.dataflow,"info",arguments)}function Czt(){return Yte(this.context.dataflow,"debug",arguments)}function H9(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function gH(e){const t=O0(e),n=H9(t.r),r=H9(t.g),i=H9(t.b);return .2126*n+.7152*r+.0722*i}function Azt(e,t){const n=gH(e),r=gH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function Izt(){const e=[].slice.call(arguments);return e.unshift({}),bn(...e)}function GLe(e,t){return e===t||e!==e&&t!==t?!0:Be(e)?Be(t)&&e.length===t.length?kzt(e,t):!1:gt(e)&&gt(t)?YLe(e,t):!1}function kzt(e,t){for(let n=0,r=e.length;n<r;++n)if(!GLe(e[n],t[n]))return!1;return!0}function YLe(e,t){for(const n in e)if(!GLe(e[n],t[n]))return!1;return!0}function Sme(e){return t=>YLe(e,t)}function Rzt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Bc:Be(n)||z4(n)?n:Sme(n),c.remove(f)),t&&c.insert(t),r&&(f=Sme(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function Nzt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Pzt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Tme={};function Dzt(e,t){const n=Tme[t]||(Tme[t]=jc(t));return Be(e)?e.map(n):n(e)}function Kte(e){return Be(e)||ArrayBuffer.isView(e)?e:null}function Xte(e){return Kte(e)||(vt(e)?e:null)}function Ozt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Kte(e).join(...n)}function $zt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xte(e).indexOf(...n)}function Mzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xte(e).lastIndexOf(...n)}function Lzt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Xte(e).slice(...n)}function Fzt(e,t,n){return _n(n)&&Fe("Function argument passed to replace."),String(e).replace(t,n)}function jzt(e){return Kte(e).slice().reverse()}function Bzt(e,t,n){return _ee(e||0,t||0,n||0)}function Uzt(e,t){const n=Zh(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function zzt(e,t){const n=Zh(e,(t||this).context);return n?n.copy():void 0}function Vzt(e,t){const n=Zh(e,(t||this).context);return n?n.domain():[]}function Hzt(e,t,n){const r=Zh(e,(n||this).context);return r?Be(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function qzt(e,t){const n=Zh(e,(t||this).context);return n&&n.range?n.range():[]}function Wzt(e,t,n){const r=Zh(e,(n||this).context);return r?r(t):void 0}function Gzt(e,t,n,r,i){e=Zh(e,(i||this).context);const s=F$e(t,n);let o=e.domain(),a=o[0],u=Kn(o),l=Sa;return u-a?l=C$e(e,a,u):e=(e.interpolator?yr("sequential")().interpolator(e.interpolator()):yr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Kn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function Yzt(e,t,n){const r=Zh(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Kzt(e){let t=null;return function(n){return n?uI(n,t=t||tx(e)):e}}const KLe=e=>e.data;function XLe(e,t){const n=HLe.call(t,e);return n.root&&n.root.lookup||{}}function Xzt(e,t,n){const r=XLe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(KLe):void 0}function Qzt(e,t){const n=XLe(e,this)[t];return n?n.ancestors().map(KLe):void 0}const QLe=()=>typeof window<"u"&&window||null;function Jzt(){const e=QLe();return e?e.screen:{}}function Zzt(){const e=QLe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function eVt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function JLe(e,t,n){if(!e)return[];const[r,i]=e,s=new xs().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return $Me(o,s,tVt(t))}function tVt(e){let t=null;if(e){const n=yt(e.marktype),r=yt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function nVt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=yt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function rVt(e){return yt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function iVt(e,t,n){const{x:r,y:i,mark:s}=n,o=new xs().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),JLe([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>sVt(u.x,u.y,t))}function sVt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const mI={random(){return zc()},cumulativeNormal:G4,cumulativeLogNormal:BZ,cumulativeUniform:HZ,densityNormal:$Z,densityLogNormal:jZ,densityUniform:VZ,quantileNormal:Y4,quantileLogNormal:UZ,quantileUniform:qZ,sampleNormal:W4,sampleLogNormal:FZ,sampleUniform:zZ,isArray:Be,isBoolean:Oy,isDate:w0,isDefined(e){return e!==void 0},isNumber:ur,isObject:gt,isRegExp:MOe,isString:vt,isTuple:z4,isValid(e){return e!=null&&e===e},toBoolean:bZ,toDate(e){return _Z(e)},toNumber:pa,toString:wZ,indexof:$zt,join:Ozt,lastindexof:Mzt,replace:Fzt,reverse:jzt,slice:Lzt,flush:OOe,lerp:LOe,merge:Izt,pad:BOe,peek:Kn,pluck:Dzt,span:zk,inrange:fw,truncate:UOe,rgb:O0,lab:n3,hcl:r3,hsl:yA,luminance:gH,contrast:Azt,sequence:Sl,format:azt,utcFormat:uzt,utcParse:czt,utcOffset:t3e,utcSequence:i3e,timeFormat:qLe,timeParse:lzt,timeOffset:e3e,timeSequence:r3e,timeUnitSpecifier:VOe,monthFormat:fzt,monthAbbrevFormat:dzt,dayFormat:hzt,dayAbbrevFormat:pzt,quarter:ROe,utcquarter:NOe,week:qOe,utcweek:YOe,dayofyear:HOe,utcdayofyear:GOe,warn:Szt,info:Tzt,debug:Czt,extent(e){return Ph(e)},inScope:xzt,intersect:JLe,clampRange:POe,pinchDistance:Nzt,pinchAngle:Pzt,screen:Jzt,containerSize:eVt,windowSize:Zzt,bandspace:Bzt,setdata:szt,pathShape:Kzt,panLinear:COe,panLog:AOe,panPow:IOe,panSymlog:kOe,zoomLinear:hZ,zoomLog:pZ,zoomPow:j$,zoomSymlog:mZ,encode:ozt,modify:Rzt,lassoAppend:nVt,lassoPath:rVt,intersectLasso:iVt},oVt=["view","item","group","xy","x","y"],aVt="event.vega.",ZLe="this.",Qte={},e6e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${at(WLe+e)}]`,functions:uVt,constants:jLe,visitors:Qte},yH=ULe(e6e);function uVt(e){const t=BLe(e);oVt.forEach(n=>t[n]=aVt+n);for(const n in mI)t[n]=ZLe+n;return bn(t,vzt(e,mI,Qte)),t}function ds(e,t,n){return arguments.length===1?mI[e]:(mI[e]=t,n&&(Qte[e]=n),yH&&(yH.functions[e]=ZLe+e),this)}ds("bandwidth",Uzt,Ka);ds("copy",zzt,Ka);ds("domain",Vzt,Ka);ds("range",qzt,Ka);ds("invert",Hzt,Ka);ds("scale",Wzt,Ka);ds("gradient",Gzt,Ka);ds("geoArea",bzt,Ka);ds("geoBounds",_zt,Ka);ds("geoCentroid",wzt,Ka);ds("geoShape",Yzt,Ka);ds("geoScale",Ezt,Ka);ds("indata",izt,yzt);ds("data",HLe,Wte);ds("treePath",Xzt,Wte);ds("treeAncestors",Qzt,Wte);ds("vlSelectionTest",X7t,qte);ds("vlSelectionIdTest",Z7t,qte);ds("vlSelectionResolve",tzt,qte);ds("vlSelectionTuples",ezt);function Oh(e,t){const n={};let r;try{e=vt(e)?e:at(e)+"",r=Vte(e)}catch{Fe("Expression parse error: "+e)}r.visit(s=>{if(s.type!==PLe)return;const o=s.callee.name,a=e6e.visitors[o];a&&a(o,s.arguments,t,n)});const i=yH(r);return i.globals.forEach(s=>{const o=WLe+s;!Ft(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:bn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function lVt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const cVt=nd(["rule"]),Cme=nd(["group","image","rect"]);function fVt(e,t){let n="";return cVt[t]||(e.x2&&(e.x?(Cme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Cme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Jte(e){return(e+"").toLowerCase()}function dVt(e){return Jte(e)==="operator"}function hVt(e){return Jte(e)==="collect"}function RT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function pVt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var mVt={operator:(e,t)=>RT(e,["_"],t.code),parameter:(e,t)=>RT(e,["datum","_"],t.code),event:(e,t)=>RT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return RT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+at(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=fVt(r,n),i+="return m;",RT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(at).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),pVt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function gVt(e){const t=this;dVt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function yVt(e){const t=this;if(e.params){const n=t.get(e.id);n||Fe("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function vVt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=Be(i)?i.map(s=>Ame(s,n,t)):Ame(i,n,t)}return t}function Ame(e,t,n){if(!e||!gt(e))return e;for(let r=0,i=Ime.length,s;r<i;++r)if(s=Ime[r],Ft(e,s.key))return s.parse(e,t,n);return e}var Ime=[{key:"$ref",parse:bVt},{key:"$key",parse:wVt},{key:"$expr",parse:_Vt},{key:"$field",parse:EVt},{key:"$encode",parse:SVt},{key:"$compare",parse:xVt},{key:"$context",parse:TVt},{key:"$subflow",parse:CVt},{key:"$tupleid",parse:AVt}];function bVt(e,t){return t.get(e.$ref)||Fe("Operator not defined: "+e.$ref)}function _Vt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=il(t.parameterExpression(e.$expr),e.$fields))}function wVt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=vZ(e.$key,e.$flat,t.expr.codegen))}function EVt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=jc(e.$field,e.$name,t.expr.codegen))}function xVt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=yt(e.$compare).map(i=>i&&i.$tupleid?Mt:i);return t.fn[n]||(t.fn[n]=gZ(r,e.$order,t.expr.codegen))}function SVt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=il(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function TVt(e,t){return t}function CVt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function AVt(){return Mt}function IVt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Fe("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function kVt(e){var t=this,n=gt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Fe("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const RVt={skip:!0};function NVt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function PVt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],RVt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Bc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function t6e(e,t,n,r){return new n6e(e,t,n,r)}function n6e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||mVt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function kme(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}n6e.prototype=kme.prototype={fork(){const e=new kme(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),hVt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Jte(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:lVt,parseOperator:gVt,parseOperatorParameters:yVt,parseParameters:vVt,parseStream:IVt,parseUpdate:kVt,getState:NVt,setState:PVt};function DVt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),r6e(t,e.description()))}function r6e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function OVt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const q9="default";function $Vt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:q9,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?vt(i)?i:i.user:q9,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return vt(r)||(i=r.item,r=r.user),vH(e,r&&r!==q9?r:i||r),i},{cursor:t})}function vH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function aM(e,t){var n=e._runtime.data;return Ft(n,t)||Fe("Unrecognized data set: "+t),n[t]}function MVt(e,t){return arguments.length<2?aM(this,e).values.value:bF.call(this,e,Nb().remove(Bc).insert(t))}function bF(e,t){S3e(t)||Fe("Second argument to changes must be a changeset.");const n=aM(this,e);return n.modified=!0,this.pulse(n.input,t)}function LVt(e,t){return bF.call(this,e,Nb().insert(t))}function FVt(e,t){return bF.call(this,e,Nb().remove(t))}function i6e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function s6e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function _F(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function jVt(e){var t=_F(e),n=i6e(e),r=s6e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function BVt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=_F(e),o=t.changedTouches?t.changedTouches[0]:t,s=fF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=UVt(e,n,s),t}function UVt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;vt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ta(e),item:Ta(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const Rme="view",zVt="timer",VVt="window",HVt={trap:!1};function qVt(e){const t=bn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{Be(r[s])&&(r[s]=nd(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function o6e(e,t,n,r){e._eventListeners.push({type:n,sources:yt(t),handler:r})}function WVt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function pP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||gt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function GVt(e,t,n){var r=this,i=new q4(n),s=function(l,c){r.runAsync(null,()=>{e===Rme&&WVt(r,t)&&l.preventDefault(),i.receive(BVt(r,l,c))})},o;if(e===zVt)pP(r,"timer",t)&&r.timer(s,t);else if(e===Rme)pP(r,"view",t)&&r.addEventListener(t,s,HVt);else if(e===VVt?pP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&pP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);o6e(r,o,t,s)}return i}function Nme(e){return e.item}function Pme(e){return e.item.mark.source}function Dme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function YVt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Nme),Pme,Dme(e)),this.on(this.events("view","pointerout",Nme),Pme,Dme(t)),this}function KVt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Nl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const XVt="vega-bind",QVt="vega-bind-name",JVt="vega-bind-radio";function ZVt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=yZ(r.debounce,i.update))),(r.input==null&&r.element?eHt:nHt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function eHt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),o6e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(tHt(i))}}function tHt(e){return typeof Event<"u"?new Event(e):{type:e}}function nHt(e,t,n,r){const i=r.signal(n.signal),s=Nl("div",{class:XVt}),o=n.input==="radio"?s:s.appendChild(Nl("label"));o.appendChild(Nl("span",{class:QVt},n.name||n.signal)),t.appendChild(s);let a=rHt;switch(n.input){case"checkbox":a=iHt;break;case"select":a=sHt;break;case"radio":a=oHt;break;case"range":a=aHt;break}a(e,o,n,i)}function rHt(e,t,n,r){const i=Nl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function iHt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Nl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function sHt(e,t,n,r){const i=Nl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};uM(o,r)&&(u.selected=!0),i.appendChild(Nl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(uM(n.options[a],o)){i.selectedIndex=a;return}}}function oHt(e,t,n,r){const i=Nl("span",{class:JVt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};uM(o,r)&&(u.checked=!0);const l=Nl("input",u);l.addEventListener("change",()=>e.update(o));const c=Nl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)uM(a[l].value,o)&&(a[l].checked=!0)}}function aHt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||D0(s,i,100),a=Nl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Nl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function uM(e,t){return e===t||e+""==t+""}function a6e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,i6e(e),s6e(e),_F(e),i,s).background(e.background())}function Zte(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function uHt(e,t,n,r){const i=new r(e.loader(),Zte(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,_F(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function lHt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=dF(r);e=n._el=e?W9(n,e,!0):null,DVt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||iR,a=e?s.renderer:s.headless;return n._renderer=a?a6e(n,n._renderer,e,a):null,n._handler=uHt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=W9(n,t,!0):e.appendChild(Nl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=W9(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{ZVt(n,u.element||t,u)})),n}function W9(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const NT=e=>+e||0,cHt=e=>({top:e,bottom:e,left:e,right:e});function Ome(e){return gt(e)?{top:NT(e.top),bottom:NT(e.bottom),left:NT(e.left),right:NT(e.right)}:cHt(NT(e))}async function ene(e,t,n,r){const i=dF(t),s=i&&i.headless;return s||Fe("Unrecognized renderer type: "+t),await e.runAsync(),a6e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function fHt(e,t){e!==Kg.Canvas&&e!==Kg.SVG&&e!==Kg.PNG&&Fe("Unrecognized image type: "+e);const n=await ene(this,e,t);return e===Kg.SVG?dHt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function dHt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function hHt(e,t){return(await ene(this,Kg.Canvas,e,t)).canvas()}async function pHt(e){return(await ene(this,Kg.SVG,e)).svg()}function mHt(e,t,n){return t6e(e,QE,mI,n).parse(t)}function gHt(e){var t=this._runtime.scales;return Ft(t,e)||Fe("Unrecognized scale or projection: "+e),t[e].value}var u6e="width",l6e="height",tne="padding",$me={skip:!0};function c6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===tne?r.left+r.right:0)}function f6e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===tne?r.top+r.bottom:0)}function yHt(e){var t=e._signals,n=t[u6e],r=t[l6e],i=t[tne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=c6e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=f6e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function vHt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(u6e,n,$me),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(l6e,r,$me),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function bHt(e){return this._runtime.getState(e||{data:_Ht,signals:wHt,recurse:!0})}function _Ht(e,t){return t.modified&&Be(t.input.value)&&!e.startsWith("_:vega:_")}function wHt(e,t){return!(e==="parent"||t instanceof QE.proxy)}function EHt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function xHt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Gpt(n,t))}function SHt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",THt(r))}function THt(e){return e==null?"":Be(e)?d6e(e):gt(e)&&!w0(e)?CHt(e):e+""}function CHt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(Be(n)?d6e(n):h6e(n))}).join(`
`)}function d6e(e){return"["+e.map(h6e).join(", ")+"]"}function h6e(e){return Be(e)?"[]":gt(e)&&!w0(e)?"{}":e}function AHt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function p6e(e,t){const n=this;if(t=t||{},Gw.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=bn({},e.locale,t.locale);n.locale(p3e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Kg.Canvas,n._scenegraph=new uMe;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||SHt,n._redraw=!0,n._handler=new iR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=qVt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=mHt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:bn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=c6e(n,n._width),n._viewHeight=f6e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,yHt(n),OVt(n),$Vt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function mP(e,t){return Ft(e._signals,t)?e._signals[t]:Fe("Unrecognized signal name: "+at(t))}function m6e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Mme(e,t,n,r){let i=m6e(n,r);return i||(i=Zte(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function Lme(e,t,n){const r=m6e(t,n);return r&&t._targets.remove(r),e}ft(p6e,Gw,{async evaluate(e,t,n){if(await Gw.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,jVt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&kD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&r6e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=mP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",Ome(e)):Ome(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(dF(e)||Fe("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Gw.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(mP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:vHt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Zte(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Mme(this,e,mP(this,e),t)},removeSignalListener(e,t){return Lme(this,mP(this,e),t)},addDataListener(e,t){return Mme(this,e,aM(this,e).values,t)},removeDataListener(e,t){return Lme(this,aM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=vH(this,null);this._globalCursor=!!e,t&&vH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:xHt,events:GVt,finalize:KVt,hover:YVt,data:MVt,change:bF,insert:LVt,remove:FVt,scale:gHt,initialize:lHt,toImageURL:fHt,toCanvas:hHt,toSVG:pHt,getState:bHt,setState:EHt,_watchPixelRatio:AHt});const IHt="view",lM="[",cM="]",g6e="{",y6e="}",kHt=":",v6e=",",RHt="@",NHt=">",PHt=/[[\]{}]/,DHt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let b6e,_6e;function My(e,t,n){return b6e=t||IHt,_6e=n||DHt,w6e(e.trim()).map(bH)}function OHt(e){return _6e[e]}function D2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function w6e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=D2(e,i,v6e,lM+g6e,cM+y6e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function bH(e){return e[0]==="["?$Ht(e):MHt(e)}function $Ht(e){const t=e.length;let n=1,r;if(n=D2(e,n,cM,lM,cM),n===t)throw"Empty between selector: "+e;if(r=w6e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==NHt)throw"Expected '>' after between selector: "+e;r=r.map(bH);const i=bH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function MHt(e){const t={source:b6e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===y6e){if(a=e.lastIndexOf(g6e),a>=0){try{r=LHt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===RHt&&(i=++a),u=D2(e,a,kHt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=D2(e,a,lM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=D2(e,a,cM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==lM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||PHt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):OHt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function LHt(e){const t=e.split(v6e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function FHt(e){return gt(e)?e:{type:e||"pad"}}const PT=e=>+e||0,jHt=e=>({top:e,bottom:e,left:e,right:e});function BHt(e){return gt(e)?e.signal?e:{top:PT(e.top),bottom:PT(e.bottom),left:PT(e.left),right:PT(e.right)}:jHt(PT(e))}const ao=e=>gt(e)&&!Be(e)?bn({},e):{value:e};function Fme(e,t,n,r){return n!=null?(gt(n)&&!Be(n)||Be(n)&&n.length&&gt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Uo(e,t,n){for(const r in t)Fme(e,r,t[r]);for(const r in n)Fme(e,r,n[r],"update")}function CS(e,t,n){for(const r in t)n&&Ft(n,r)||(e[r]=bn(e[r]||{},t[r]));return e}function U_(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const nne="mark",rne="frame",ine="scope",UHt="axis",zHt="axis-domain",VHt="axis-grid",HHt="axis-label",qHt="axis-tick",WHt="axis-title",GHt="legend",YHt="legend-band",KHt="legend-entry",XHt="legend-gradient",E6e="legend-label",QHt="legend-symbol",JHt="legend-title",ZHt="title",eqt="title-text",tqt="title-subtitle";function nqt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!U_(u,e)&&G9(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===rne?i.group:n===nne?bn({},i.mark,i[t]):null;for(u in c)l=U_(u,e)||(u==="fill"||u==="stroke")&&(U_("fill",e)||U_("stroke",e)),l||G9(s,u,c[u]);yt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)U_(h,e)||G9(s,h,d[h])}),e=bn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=bn(o,e.enter),a&&(e.update=bn(a,e.update)),e}function G9(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const x6e=e=>vt(e)?at(e):e.signal?`(${e.signal})`:S6e(e);function wF(e){if(e.gradient!=null)return iqt(e);let t=e.signal?`(${e.signal})`:e.color?rqt(e.color):e.field!=null?S6e(e.field):e.value!==void 0?at(e.value):void 0;return e.scale!=null&&(t=sqt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${VD(e.exponent)})`),e.mult!=null&&(t+=`*${VD(e.mult)}`),e.offset!=null&&(t+=`+${VD(e.offset)}`),e.round&&(t=`round(${t})`),t}const gP=(e,t,n,r)=>`(${e}(${[t,n,r].map(wF).join(",")})+'')`;function rqt(e){return e.c?gP("hcl",e.h,e.c,e.l):e.h||e.s?gP("hsl",e.h,e.s,e.l):e.l||e.a?gP("lab",e.l,e.a,e.b):e.r||e.g||e.b?gP("rgb",e.r,e.g,e.b):null}function iqt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:at(n));for(;t.length&&Kn(t)==null;)t.pop();return t.unshift(x6e(e.gradient)),`gradient(${t.join(",")})`}function VD(e){return gt(e)?"("+wF(e)+")":e}function S6e(e){return T6e(gt(e)?e:{datum:e})}function T6e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Fe("Invalid field reference: "+at(e));return e.signal||(r=vt(r)?Xh(r).map(at).join("]["):T6e(r)),t+"["+r+"]"}function sqt(e,t){const n=x6e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+VD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function oqt(e){let t="";return e.forEach(n=>{const r=wF(n);t+=n.test?`(${n.test})?${r}:`:r}),Kn(t)===":"&&(t+="null"),t}function C6e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=nqt(e,t,n,r,i.config);for(const a in e)o[a]=aqt(e[a],t,s,i);return s}function aqt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=lqt(uqt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function uqt(e){return Be(e)?oqt(e):wF(e)}function lqt(e,t,n,r){const i=Oh(e,t);return i.$fields.forEach(s=>r[s]=1),bn(n,i.$params),i.$expr}const cqt="outer",fqt=["value","update","init","react","bind"];function jme(e,t){Fe(e+' for "outer" push: '+at(t))}function A6e(e,t){const n=e.name;if(e.push===cqt)t.signals[n]||jme("No prior signal definition",n),fqt.forEach(r=>{e[r]!==void 0&&jme("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function _H(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function EF(e,t,n,r){return new _H(e,t,n,r)}function fM(e,t){return EF("operator",e,t)}function $t(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function gI(e,t){return t?{$field:e,$name:t}:{$field:e}}const wH=gI("key");function Bme(e,t){return{$compare:e,$order:t}}function dqt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const hqt="ascending",pqt="descending";function mqt(e){return gt(e)?(e.order===pqt?"-":"+")+xF(e.op,e.field):""}function xF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const sne="scope",EH="view";function Vs(e){return e&&e.signal}function gqt(e){return e&&e.expr}function HD(e){if(Vs(e))return!0;if(gt(e)){for(const t in e)if(HD(e[t]))return!0}return!1}function _f(e,t){return e??t}function h1(e){return e&&e.signal||e}const Ume="timer";function yI(e,t){return(e.merge?vqt:e.stream?bqt:e.type?_qt:Fe("Invalid stream specification: "+at(e)))(e,t)}function yqt(e){return e===sne?EH:e||EH}function vqt(e,t){const n=e.merge.map(i=>yI(i,t)),r=one({merge:n},e,t);return t.addStream(r).id}function bqt(e,t){const n=yI(e.stream,t),r=one({stream:n},e,t);return t.addStream(r).id}function _qt(e,t){let n;e.type===Ume?(n=t.event(Ume,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(yqt(e.source),e.type);const r=one({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function one(e,t,n){let r=t.between;return r&&(r.length!==2&&Fe('Stream "between" parameter must have 2 entries: '+at(t)),e.between=[yI(r[0],n),yI(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(wqt(t.marktype,t.markname,t.markrole)),t.source===sne&&r.push("inScope(event.item)"),r.length&&(e.filter=Oh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function wqt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Eqt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function xqt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Fe("Signal update missing events specification."),vt(s)&&(s=My(s,t.isSubscope()?sne:EH)),s=yt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[Tqt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Fe("Signal encode and update are mutually exclusive."),o="encode(item(),"+at(r)+")"),i.update=vt(o)?Oh(o,t):o.expr!=null?Oh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Eqt,$params:{$value:t.signalRef(o.signal)}}:Fe("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(bn(Sqt(u,t),i)))}function Sqt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):yI(e,t)}}function Tqt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Cqt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Fe("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Oh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>xqt(i,t,n.id))}const Vr=e=>(t,n,r)=>EF(e,n,t||void 0,r),I6e=Vr("aggregate"),Aqt=Vr("axisticks"),k6e=Vr("bound"),pd=Vr("collect"),zme=Vr("compare"),Iqt=Vr("datajoin"),R6e=Vr("encode"),kqt=Vr("expression"),Rqt=Vr("facet"),Nqt=Vr("field"),Pqt=Vr("key"),Dqt=Vr("legendentries"),Oqt=Vr("load"),$qt=Vr("mark"),Mqt=Vr("multiextent"),Lqt=Vr("multivalues"),Fqt=Vr("overlap"),jqt=Vr("params"),N6e=Vr("prefacet"),Bqt=Vr("projection"),Uqt=Vr("proxy"),zqt=Vr("relay"),P6e=Vr("render"),Vqt=Vr("scale"),Ob=Vr("sieve"),Hqt=Vr("sortitems"),D6e=Vr("viewlayout"),qqt=Vr("values");let Wqt=0;const O6e={min:"min",max:"max",count:"sum"};function Gqt(e,t){const n=e.type||"linear";_$e(n)||Fe("Unrecognized scale type: "+at(n)),t.addScale(e.name,{type:n,domain:void 0})}function Yqt(e,t){const n=t.getScale(e.name).params;let r;n.domain=$6e(e.domain,e,t),e.range!=null&&(n.range=L6e(e,t,n)),e.interpolate!=null&&iWt(e.interpolate,n),e.nice!=null&&(n.nice=rWt(e.nice,t)),e.bins!=null&&(n.bins=nWt(e.bins,t));for(r in e)Ft(n,r)||r==="name"||(n[r]=Ec(e[r],t))}function Ec(e,t){return gt(e)?e.signal?t.signalRef(e.signal):Fe("Unsupported object: "+at(e)):e}function qD(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Ec(n,t))}function SF(e){Fe("Can not find data set: "+at(e))}function $6e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Fe("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(Be(e)?Kqt:e.fields?Qqt:Xqt)(e,t,n)}function Kqt(e,t,n){return e.map(r=>Ec(r,n))}function Xqt(e,t,n){const r=n.getData(e.data);return r||SF(e.data),ex(t.type)?r.valuesRef(n,e.field,M6e(e.sort,!1)):x$e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function Qqt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=vt(o)?{data:r,field:o}:Be(o)||o.signal?Jqt(o,n):o,s.push(o),s),[]);return(ex(t.type)?Zqt:x$e(t.type)?eWt:tWt)(e,n,i)}function Jqt(e,t){const n="_:vega:_"+Wqt++,r=pd({});if(Be(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+at(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Ob({})]),{data:n,field:"data"}}function Zqt(e,t,n){const r=M6e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||SF(l.data),c.countsRef(t,l.field,r)}),a={groupby:wH,pulse:o};r&&(i=r.op||"count",s=r.field?xF(i,r.field):"count",a.ops=[O6e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(I6e(a));const u=t.add(pd({pulse:$t(i)}));return s=t.add(qqt({field:wH,sort:t.sortRef(r),pulse:$t(u)})),$t(s)}function M6e(e,t){return e&&(!e.field&&!e.op?gt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Fe("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!O6e[e.op]&&Fe("Multiple domain scales can not be sorted using "+e.op)),e}function eWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||SF(i.data),s.domainRef(t,i.field)});return $t(t.add(Lqt({values:r})))}function tWt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||SF(i.data),s.extentRef(t,i.field)});return $t(t.add(Mqt({extents:r})))}function nWt(e,t){return e.signal||Be(e)?qD(e,t):t.objectProperty(e)}function rWt(e,t){return e.signal?t.signalRef(e.signal):gt(e)?{interval:Ec(e.interval),step:Ec(e.step)}:Ec(e)}function iWt(e,t){t.interpolate=Ec(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ec(e.gamma))}function L6e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(vt(i)){if(r&&Ft(r,i))return e=bn({},e,{range:r[i]}),L6e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=ex(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Fe("Unrecognized scale range value: "+at(i))}else if(i.scheme){n.scheme=Be(i.scheme)?qD(i.scheme,t):Ec(i.scheme,t),i.extent&&(n.schemeExtent=qD(i.extent,t)),i.count&&(n.schemeCount=Ec(i.count,t));return}else if(i.step){n.rangeStep=Ec(i.step,t);return}else{if(ex(e.type)&&!Be(i))return $6e(i,e,t);Be(i)||Fe("Unsupported range type: "+at(i))}return i.map(s=>(Be(s)?qD:Ec)(s,t))}function sWt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=xH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=xH(n[i],i,t));t.addProjection(e.name,r)}function xH(e,t,n){return Be(e)?e.map(r=>xH(r,t,n)):gt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Fe("Unsupported parameter object: "+at(e)):e}const md="top",AS="left",IS="right",ry="bottom",F6e="center",oWt="vertical",aWt="start",uWt="middle",lWt="end",SH="index",ane="label",cWt="offset",sx="perc",fWt="perc2",Cc="value",lR="guide-label",une="guide-title",dWt="group-title",hWt="group-subtitle",Vme="symbol",WD="gradient",TH="discrete",CH="size",pWt="shape",mWt="fill",gWt="stroke",yWt="strokeWidth",vWt="strokeDash",bWt="opacity",lne=[CH,pWt,mWt,gWt,yWt,vWt,bWt],cR={name:1,style:1,interactive:1},er={value:0},Ac={value:1},TF="group",j6e="rect",cne="rule",_Wt="symbol",$b="text";function vI(e){return e.type=TF,e.interactive=e.interactive||!1,e}function sl(e,t){const n=(r,i)=>_f(e[r],_f(t[r],i));return n.isVertical=r=>oWt===_f(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>_f(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>_f(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>_f(e.columns,_f(t.columns,+n.isVertical(!0))),n}function B6e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function wWt(e,t,n){const r=t.config.style[n];return r&&r[e]}function CF(e,t,n){return`item.anchor === '${aWt}' ? ${e} : item.anchor === '${lWt}' ? ${t} : ${n}`}const fne=CF(at(AS),at(IS),at(F6e));function EWt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},gt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function U6e(e,t){return t?e?gt(e)?Object.assign({},e,{offset:U6e(e.offset,t)}):{value:e,offset:t}:t:e}function Wl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=CS(e.encode,t,cR)):e.interactive=!1,e}function xWt(e,t,n,r){const i=sl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:er,x:er,y:er,width:ao(f),height:ao(d)},update:bn({},u,{opacity:Ac,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:er}};return Uo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Wl({type:j6e,role:XHt,encode:h},r)}function SWt(e,t,n,r,i){const s=sl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:er,fill:{scale:t,field:Cc}};p[l]={signal:h+"datum."+sx,mult:u},p[c]=er,p[f]={signal:h+"datum."+fWt,mult:u},p[d]=ao(a);const m={enter:p,update:bn({},p,{opacity:Ac}),exit:{opacity:er}};return Uo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Wl({type:j6e,role:YHt,key:Cc,from:i,encode:m},r)}const TWt=`datum.${sx}<=0?"${AS}":datum.${sx}>=1?"${IS}":"${F6e}"`,CWt=`datum.${sx}<=0?"${ry}":datum.${sx}>=1?"${md}":"${uWt}"`;function Hme(e,t,n,r){const i=sl(e,t),s=i.isVertical(),o=ao(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:er},update:c={opacity:Ac,text:{field:ane}},exit:{opacity:er}};return Uo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:_f(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:CWt},f="y",d="x",h="1-"):(l.align=c.align={signal:TWt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+sx,mult:a},l[d]=c[d]=o,o.offset=_f(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+SH}:void 0,Wl({type:$b,role:E6e,style:lR,key:Cc,from:r,encode:p,overlap:u},n)}function AWt(e,t,n,r,i){const s=sl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${cWt} : datum.${CH}`,h=l?ao(l):{field:CH},p=`datum.${SH}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:er,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Ac,x:y.x,y:y.y},exit:{opacity:er}};let E=null,S=null;e.fill||(E=t.symbolBaseFillColor,S=t.symbolBaseStrokeColor),Uo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",S),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),lne.forEach(N=>{e[N]&&(v[N]=y[N]={scale:e[N],field:Cc})});const T=Wl({type:_Wt,role:QHt,key:Cc,from:f,clip:l?!0:void 0,encode:g},n.symbols),C=ao(c);C.offset=s("labelOffset"),g={enter:y={opacity:er,x:{signal:d,offset:C},y:h},update:v={opacity:Ac,text:{field:ane},x:y.x,y:y.y},exit:{opacity:er}},Uo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const A=Wl({type:$b,role:E6e,style:lR,key:Cc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:er,height:l?ao(l):er,opacity:er},exit:{opacity:er},update:v={opacity:Ac,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:SH}},vI({role:ine,from:r,encode:CS(g,o,cR),marks:[T,A],name:u,interactive:a,sort:w})}function IWt(e,t){const n=sl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const dne='item.orient === "left"',hne='item.orient === "right"',AF=`(${dne} || ${hne})`,kWt=`datum.vgrad && ${AF}`,RWt=CF('"top"','"bottom"','"middle"'),NWt=CF('"right"','"left"','"center"'),PWt=`datum.vgrad && ${hne} ? (${NWt}) : (${AF} && !(datum.vgrad && ${dne})) ? "left" : ${fne}`,DWt=`item._anchor || (${AF} ? "middle" : "start")`,OWt=`${kWt} ? (${dne} ? -90 : 90) : 0`,$Wt=`${AF} ? (datum.vgrad ? (${hne} ? "bottom" : "top") : ${RWt}) : "top"`;function MWt(e,t,n,r){const i=sl(e,t),s={enter:{opacity:er},update:{opacity:Ac,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:er}};return Uo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:DWt},angle:{signal:OWt},align:{signal:PWt},baseline:{signal:$Wt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Wl({type:$b,role:JHt,style:une,from:r,encode:s},n)}function LWt(e,t){let n;return gt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+qme(e.path)+")":e.sphere&&(n="geoShape("+qme(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function qme(e){return gt(e)&&e.signal?e.signal:at(e)}function z6e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===TF?ine:t||nne}function FWt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||z6e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function jWt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function pne(e,t){const n=A3e(e.type);n||Fe("Unrecognized transform type: "+at(e.type));const r=EF(n.type.toLowerCase(),null,V6e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function V6e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=BWt(o,t,n)}return r}function BWt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return UWt(e,t,n);if(i===void 0){e.required&&Fe("Missing required "+at(t.type)+" parameter: "+at(e.name));return}else{if(r==="param")return zWt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Vs(i)?i.map(s=>Wme(e,s,n)):Wme(e,i,n)}function Wme(e,t,n){const r=e.type;if(Vs(t))return Yme(r)?Fe("Expression references can not be signals."):Y9(r)?n.fieldRef(t):Kme(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Y9(r);return i&&VWt(t)?n.exprRef(t.expr,t.as):i&&HWt(t)?gI(t.field,t.as):Yme(r)?Oh(t,n):qWt(r)?$t(n.getData(t).values):Y9(r)?gI(t):Kme(r)?n.compareRef(t):t}}function UWt(e,t,n){return vt(t.from)||Fe('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function zWt(e,t,n){const r=t[e.name];return e.array?(Be(r)||Fe("Expected an array of sub-parameters. Instead: "+at(r)),r.map(i=>Gme(e,i,n))):Gme(e,r,n)}function Gme(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Fe("Unsupported parameter: "+at(t));const s=bn(V6e(i,t,n),i.key);return $t(n.add(jqt(s)))}const VWt=e=>e&&e.expr,HWt=e=>e&&e.field,qWt=e=>e==="data",Yme=e=>e==="expr",Y9=e=>e==="field",Kme=e=>e==="compare";function WWt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Fe("Only group marks can be faceted."),r.field!=null?o=a=GD(r,n):(e.data?a=$t(n.getData(e.data).aggregate):(s=pne(bn({type:"aggregate",groupby:yt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=GD(r,n),o=a=$t(n.add(s))),i=n.keyRef(r.groupby,!0))):o=$t(n.add(pd(null,[{}]))),o||(o=GD(e,n)),{key:i,pulse:o,parent:a}}function GD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:$t(t.getData(e.data).output)}function J1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}J1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=$t(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new J1(e,s,i,r,o)};function H6e(e){return vt(e)?e:null}function Xme(e,t,n){const r=xF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function DT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=mqt(s);let l=H6e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:wH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:$t(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(EF(r,void 0,d)),o&&(t.index[i]=f),c=$t(f),l!=null&&(a[l]=c)}return c}J1.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=H6e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&Xme(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:$t(r.output)},n&&n.field&&Xme(e,u,n),a=e.add(I6e(u)),o=e.add(pd({pulse:$t(a)})),o={agg:a,ref:$t(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return $t(this.values)},extentRef(e,t){return DT(e,this,"extent","extent",t,!1)},domainRef(e,t){return DT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return DT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return DT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return DT(e,this,"indata","tupleindex",t,!0,!0)}};function GWt(e,t,n){const r=e.from.facet,i=r.name,s=GD(r,t);let o;r.name||Fe("Facet must have a name: "+at(r)),r.data||Fe("Facet must reference a data set: "+at(r)),r.field?o=t.add(N6e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(Rqt({key:t.keyRef(r.groupby),group:$t(t.proxy(n.parent)),pulse:s})):Fe("Facet must specify groupby or field: "+at(r));const a=t.fork(),u=a.add(pd()),l=a.add(Ob({pulse:$t(u)}));a.addData(i,new J1(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function YWt(e,t,n){const r=t.add(N6e({pulse:n.pulse})),i=t.fork();i.add(Ob()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function q6e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(fM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Oh(l,t);u.update=c.$expr,u.params=c.$params}function IF(e,t){const n=z6e(e),r=e.type===TF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===ine||n===rne,a,u,l,c,f,d,h;const p=n===nne||o||i,m=WWt(e.from,r,t);u=t.add(Iqt({key:m.key||(e.key?gI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=$t(u);u=l=t.add(pd({pulse:g})),u=t.add($qt({markdef:FWt(e),interactive:jWt(e.interactive,t),clip:LWt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:$t(u)}));const y=$t(u);u=c=t.add(R6e(C6e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(S=>{const T=pne(S,t),C=T.metadata;(C.generates||C.changes)&&Fe("Mark transforms should not generate new data."),C.nomod||(c.params.mod=!0),T.params.pulse=$t(u),t.add(u=T)}),e.sort&&(u=t.add(Hqt({sort:t.compareRef(e.sort),pulse:$t(u)})));const v=$t(u);(i||o)&&(o=t.add(D6e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=$t(o));const b=t.add(k6e({mark:y,pulse:d||v}));h=$t(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?GWt(e,t,m):p?YWt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=KWt(s,h,t));const w=t.add(P6e({pulse:h})),E=t.add(Ob({pulse:$t(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new J1(t,l,w,E)),e.on&&e.on.forEach(S=>{(S.insert||S.remove||S.toggle)&&Fe("Marks only support modify triggers."),q6e(S,t,f)}))}function KWt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Vs(s)?n.signalRef(s.signal):s,method:Vs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Vs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return $t(n.add(Fqt(o)))}function XWt(e,t){const n=t.config.legend,r=e.encode||{},i=sl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;lne.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Fe("Missing valid scale for legend.");const p=QWt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=$t(t.add(pd(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=$t(t.add(Dqt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===WD?(h=[xWt(e,c,n,r.gradient),Hme(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${h1(i.gradientLength())})/100))`)):p===TH?h=[SWt(e,c,n,r.gradient,v),Hme(e,n,r.labels,v)]:(f=IWt(e,n),h=[AWt(e,n,r,v,h1(f.columns))],d.size=eGt(e,t,h[0].marks)),h=[vI({role:KHt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(MWt(e,n,r.title,g)),IF(vI({role:GHt,from:g,encode:CS(ZWt(i,e,n),s,cR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function QWt(e,t){let n=e.type||Vme;return!e.type&&JWt(e)===1&&(e.fill||e.stroke)&&(n=Tee(t)?WD:BV(t)?TH:Vme),n!==WD?n:BV(t)?TH:WD}function JWt(e){return lne.reduce((t,n)=>t+(e[n]?1:0),0)}function ZWt(e,t,n){const r={enter:{},update:{}};return Uo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function eGt(e,t,n){const r=h1(Qme("size",e,n)),i=h1(Qme("strokeWidth",e,n)),s=h1(tGt(n[1].encode,t,lR));return Oh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Qme(e,t,n){return t[e]?`scale("${t[e]}",datum)`:B6e(e,n[0].encode)}function tGt(e,t,n){return B6e("fontSize",e)||wWt("fontSize",t,n)}const nGt=`item.orient==="${AS}"?-90:item.orient==="${IS}"?90:0`;function rGt(e,t){e=vt(e)?{text:e}:e;const n=sl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=$t(t.add(pd(null,[l])));return u.push(oGt(e,n,iGt(e),c)),e.subtitle&&u.push(aGt(e,n,r.subtitle,c)),IF(vI({role:ZHt,from:c,encode:sGt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function iGt(e){const t=e.encode;return t&&t.title||bn({name:e.name,interactive:e.interactive,style:e.style},t)}function sGt(e,t){const n={enter:{},update:{}};return Uo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:fne},angle:{signal:nGt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),CS(n,t,cR)}function oGt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Uo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Wl({type:$b,role:eqt,style:dWt,from:r,encode:o},n)}function aGt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Uo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Wl({type:$b,role:tqt,style:hWt,from:r,encode:o},n)}function uGt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(pne(r,t))}),e.on&&e.on.forEach(r=>{q6e(r,t,e.name)}),t.addDataPipeline(e.name,lGt(e,t,n))}function lGt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Vs(e.values)||HD(e.format)?(r.push(Jme(t,e)),r.push(i=nv())):r.push(i=nv({$ingest:e.values,$format:e.format})):e.url?HD(e.url)||HD(e.format)?(r.push(Jme(t,e)),r.push(i=nv())):r.push(i=nv({$request:e.url,$format:e.format})):e.source&&(i=a=yt(e.source).map(d=>$t(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=nv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=zqt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,nv())),i||r.push(nv()),r.push(Ob({})),r}function nv(e){const t=pd({},e);return t.metadata={source:!0},t}function Jme(e,t){return Oqt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const W6e=e=>e===ry||e===md,kF=(e,t,n)=>Vs(e)?hGt(e.signal,t,n):e===AS||e===md?t:n,uo=(e,t,n)=>Vs(e)?fGt(e.signal,t,n):W6e(e)?t:n,Gf=(e,t,n)=>Vs(e)?dGt(e.signal,t,n):W6e(e)?n:t,G6e=(e,t,n)=>Vs(e)?pGt(e.signal,t,n):e===md?{value:t}:{value:n},cGt=(e,t,n)=>Vs(e)?mGt(e.signal,t,n):e===IS?{value:t}:{value:n},fGt=(e,t,n)=>Y6e(`${e} === '${md}' || ${e} === '${ry}'`,t,n),dGt=(e,t,n)=>Y6e(`${e} !== '${md}' && ${e} !== '${ry}'`,t,n),hGt=(e,t,n)=>mne(`${e} === '${AS}' || ${e} === '${md}'`,t,n),pGt=(e,t,n)=>mne(`${e} === '${md}'`,t,n),mGt=(e,t,n)=>mne(`${e} === '${IS}'`,t,n),Y6e=(e,t,n)=>(t=t!=null?ao(t):t,n=n!=null?ao(n):n,Zme(t)&&Zme(n)?(t=t?t.signal||at(t.value):null,n=n?n.signal||at(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[bn({test:e},t)].concat(n||[])),Zme=e=>e==null||Object.keys(e).length===1,mne=(e,t,n)=>({signal:`${e} ? (${pw(t)}) : (${pw(n)})`}),gGt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${AS}' ? (${pw(r)}) : `:"")+(n!=null?`${e} === '${ry}' ? (${pw(n)}) : `:"")+(i!=null?`${e} === '${IS}' ? (${pw(i)}) : `:"")+(t!=null?`${e} === '${md}' ? (${pw(t)}) : `:"")+"(null)"}),pw=e=>Vs(e)?e.signal:e==null?null:at(e),yGt=(e,t)=>t===0?0:Vs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Yw=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function b_(e,t,n,r){let i;if(t&&Ft(t,e))return t[e];if(Ft(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[une][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[lR][i]}return null}function ege(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function vGt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Vs(o)){const f=ege([n.axisX,n.axisY]),d=ege([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=uo(o,b_(l,n.axisX,i,r),b_(l,n.axisY,i,r));u={};for(l of d)u[l]=gGt(o.signal,b_(l,n.axisTop,i,r),b_(l,n.axisBottom,i,r),b_(l,n.axisLeft,i,r),b_(l,n.axisRight,i,r))}else a=o===md||o===ry?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?bn({},i,a,u,s):i}function bGt(e,t,n,r){const i=sl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:er},update:a={opacity:Ac},exit:{opacity:er}};Uo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=tge(e,0),c=tge(e,1);return o.x=a.x=uo(s,l,er),o.x2=a.x2=uo(s,c),o.y=a.y=Gf(s,l,er),o.y2=a.y2=Gf(s,c),Wl({type:cne,role:zHt,from:r,encode:u},n)}function tge(e,t){return{scale:e.scale,range:t}}function _Gt(e,t,n,r,i){const s=sl(e,t),o=e.orient,a=e.gridScale,u=kF(o,1,-1),l=wGt(e.offset,u);let c,f,d;const h={enter:c={opacity:er},update:d={opacity:Ac},exit:f={opacity:er}};Uo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Cc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=uo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:bn(m,{mult:u,offset:l});return c.x=d.x=uo(o,p,g),c.y=d.y=Gf(o,p,g),c.x2=d.x2=Gf(o,y),c.y2=d.y2=uo(o,y),f.x=uo(o,p),f.y=Gf(o,p),Wl({type:cne,role:VHt,key:Cc,from:r,encode:h},n)}function wGt(e,t){if(t!==1)if(!gt(e))e=Vs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=bn({},e);for(;n.mult!=null;)if(gt(n.mult))n=n.mult=bn({},n.mult);else return n.mult=Vs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function EGt(e,t,n,r,i,s){const o=sl(e,t),a=e.orient,u=kF(a,-1,1);let l,c,f;const d={enter:l={opacity:er},update:f={opacity:Ac},exit:c={opacity:er}};Uo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=ao(i);h.mult=u;const p={scale:e.scale,field:Cc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=uo(a,er,p),f.y2=l.y2=uo(a,h),c.x=uo(a,p),f.x=l.x=Gf(a,er,p),f.x2=l.x2=Gf(a,h),c.y=Gf(a,p),Wl({type:cne,role:qHt,key:Cc,from:r,encode:d},n)}function K9(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function xGt(e,t,n,r,i,s){const o=sl(e,t),a=e.orient,u=e.scale,l=kF(a,-1,1),c=h1(o("labelFlush")),f=h1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=ao(i);g.mult=l,g.offset=ao(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Cc,band:.5,offset:U6e(s.offset,o("labelOffset"))},v=uo(a,p?K9(u,c,'"left"','"right"','"center"'):{value:"center"},cGt(a,"left","right")),b=uo(a,G6e(a,"bottom","top"),p?K9(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=K9(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:er,x:uo(a,y,g),y:Gf(a,y,g)},S={enter:E,update:m={opacity:Ac,text:{field:ane},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:er,x:E.x,y:E.y}};Uo(S,{dx:!d&&p?uo(a,w):null,dy:!h&&p?Gf(a,w):null}),Uo(S,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const T=o("labelBound");let C=o("labelOverlap");return C=C||T?{separation:o("labelSeparation"),method:C,order:"datum.index",bound:T?{scale:u,orient:a,tolerance:T}:null}:void 0,m.align!==v&&(m.align=Yw(m.align,v)),m.baseline!==b&&(m.baseline=Yw(m.baseline,b)),Wl({type:$b,role:HHt,style:lR,key:Cc,from:r,encode:S,overlap:C},n)}function SGt(e,t,n,r){const i=sl(e,t),s=e.orient,o=kF(s,-1,1);let a,u;const l={enter:a={opacity:er,anchor:ao(i("titleAnchor",null)),align:{signal:fne}},update:u=bn({},a,{opacity:Ac,text:ao(e.title)}),exit:{opacity:er}},c={signal:`lerp(range("${e.scale}"), ${CF(0,1,.5)})`};return u.x=uo(s,c),u.y=Gf(s,c),a.angle=uo(s,er,yGt(o,90)),a.baseline=uo(s,G6e(s,ry,md),{value:ry}),u.angle=a.angle,u.baseline=a.baseline,Uo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),TGt(i,s,l,n),l.update.align=Yw(l.update.align,a.align),l.update.angle=Yw(l.update.angle,a.angle),l.update.baseline=Yw(l.update.baseline,a.baseline),Wl({type:$b,role:WHt,style:une,from:r,encode:l},n)}function TGt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=Yw(ao(a),n.update[u]),!1):!U_(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?ao(o):uo(t,ao(o),ao(s))}function CGt(e,t){const n=vGt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=sl(e,n),l=EWt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=$t(t.add(pd({},[c]))),d=$t(t.add(Aqt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(_Gt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(EGt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(xGt(e,n,r.labels,d,p,l))),c.domain&&h.push(bGt(e,n,r.domain,f)),c.title&&h.push(SGt(e,n,r.title,f)),IF(vI({role:UHt,from:f,encode:CS(AGt(u,e),i,cR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function AGt(e,t){const n={enter:{},update:{}};return Uo(n,{orient:e("orient"),offset:e("offset")||0,position:_f(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function K6e(e,t,n){const r=yt(e.signals),i=yt(e.scales);return n||r.forEach(s=>A6e(s,t)),yt(e.projections).forEach(s=>sWt(s,t)),i.forEach(s=>Gqt(s,t)),yt(e.data).forEach(s=>uGt(s,t)),i.forEach(s=>Yqt(s,t)),(n||r).forEach(s=>Cqt(s,t)),yt(e.axes).forEach(s=>CGt(s,t)),yt(e.marks).forEach(s=>IF(s,t)),yt(e.legends).forEach(s=>XWt(s,t)),e.title&&rGt(e.title,t),t.parseLambdas(),t}const IGt=e=>CS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function kGt(e,t){const n=t.config,r=$t(t.root=t.add(fM())),i=RGt(e,n);i.forEach(l=>A6e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(pd()),o=t.add(R6e(C6e(IGt(e.encode),TF,rne,e.style,t,{pulse:$t(s)}))),a=t.add(D6e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:$t(o)}));t.operators.pop(),t.pushState($t(o),$t(a),null),K6e(e,t,i),t.operators.push(a);let u=t.add(k6e({mark:r,pulse:$t(a)}));return u=t.add(P6e({pulse:$t(u)})),u=t.add(Ob({pulse:$t(u)})),t.addData("root",new J1(t,s,s,u)),t}function OT(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function RGt(e,t){const n=o=>_f(e[o],t[o]),r=[OT("background",n("background")),OT("autosize",FHt(n("autosize"))),OT("padding",BHt(n("padding"))),OT("width",n("width")||0),OT("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return yt(e.signals).forEach(o=>{Ft(i,o.name)?o=bn(i[o.name],o):r.push(o),s[o.name]=o}),yt(t.signals).forEach(o=>{!Ft(s,o.name)&&!Ft(i,o.name)&&r.push(o)}),r}function X6e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function nge(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}X6e.prototype=nge.prototype={parse(e){return K6e(e,this)},fork(){return new nge(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof _H?$t(e):e;return this.add(Uqt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push($t(this.add(Ob({pulse:e})))),this._parent.push(t),this._lookup.push(n?$t(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Kn(this._parent)},encode(){return Kn(this._encode)},lookup(){return Kn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(vt(e))return gI(e,t);e.signal||Fe("Unsupported field reference: "+at(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=$t(this.add(Nqt(i)))}return r},compareRef(e){let t=!1;const n=s=>Vs(s)?(t=!0,this.signalRef(s.signal)):gqt(s)?(t=!0,this.exprRef(s.expr)):s,r=yt(e.field).map(n),i=yt(e.order).map(n);return t?$t(this.add(zme({fields:r,orders:i}))):Bme(r,i)},keyRef(e,t){let n=!1;const r=s=>Vs(s)?(n=!0,$t(i[s.signal])):s,i=this.signals;return e=yt(e).map(r),n?$t(this.add(Pqt({fields:e,flat:t}))):dqt(e,t)},sortRef(e){if(!e)return e;const t=xF(e.op,e.field),n=e.order||hqt;return n.signal?$t(this.add(zme({fields:t,orders:this.signalRef(n.signal)}))):Bme(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return Ft(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Fe("Duplicate signal name: "+at(e));const n=t instanceof _H?t:this.add(fM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Fe("Unrecognized signal name: "+at(e)),this.signals[e]},signalRef(e){return this.signals[e]?$t(this.signals[e]):(Ft(this.lambdas,e)||(this.lambdas[e]=this.add(fM(null))),$t(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Oh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!gt(e)?e:this.signalRef(e.signal||gne(e))},exprRef(e,t){const n={expr:Oh(e,this)};return t&&(n.expr.$name=t),$t(this.add(kqt(n)))},addBinding(e,t){this.bindings||Fe("Nested signals do not support binding: "+at(e)),this.bindings.push(bn({signal:e},t))},addScaleProj(e,t){Ft(this.scales,e)&&Fe("Duplicate scale or projection name: "+at(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Vqt(t))},addProjection(e,t){this.addScaleProj(e,Bqt(t))},getScale(e){return this.scales[e]||Fe("Unrecognized scale name: "+at(e)),this.scales[e]},scaleRef(e){return $t(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ft(this.data,e)&&Fe("Duplicate data set name: "+at(e)),this.data[e]=t},getData(e){return this.data[e]||Fe("Undefined data set name: "+at(e)),this.data[e]},addDataPipeline(e,t){return Ft(this.data,e)&&Fe("Duplicate data set name: "+at(e)),this.addData(e,J1.fromEntries(this,t))}};function gne(e){return(Be(e)?NGt:PGt)(e)}function NGt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(gt(i)?i.signal||gne(i):at(i))}return n+"]"}function PGt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+at(r)+":"+(gt(i)?i.signal||gne(i):at(i));return t+"}"}function DGt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function OGt(e,t,n){return gt(e)||Fe("Input Vega specification must be an object."),t=vS(DGt(),t,e.config),kGt(e,new X6e(t,n)).toRuntime()}var $Gt="5.30.0";bn(QE,OFt,E9t,eBt,NBt,FBt,fUt,HBt,hUt,yUt,AUt,OUt);const MGt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:xs,CanvasHandler:iR,CanvasRenderer:Z$,DATE:Ju,DAY:ha,DAYOFYEAR:Dh,Dataflow:Gw,Debug:wOe,Error:cZ,EventStream:q4,Gradient:F$e,GroupItem:iF,HOURS:Vl,Handler:Xee,HybridHandler:kMe,HybridRenderer:QV,Info:_Oe,Item:rF,MILLISECONDS:rd,MINUTES:Hl,MONTH:va,Marks:ql,MultiPulse:RZ,None:bOe,Operator:Kr,Parameters:H4,Pulse:E0,QUARTER:Qu,RenderType:Kg,Renderer:rR,ResourceLoader:q$e,SECONDS:Uc,SVGHandler:gMe,SVGRenderer:nte,SVGStringRenderer:IMe,Scenegraph:uMe,TIME_UNITS:EZ,Transform:Re,View:p6e,WEEK:Fs,Warn:fZ,YEAR:$o,accessor:il,accessorFields:ya,accessorName:Ki,array:yt,ascending:F4,bandwidthNRD:OZ,bin:R3e,bootstrapCI:N3e,boundClip:jMe,boundContext:Zk,boundItem:WV,boundMark:iMe,boundStroke:Wm,changeset:Nb,clampRange:POe,codegenExpression:ULe,compare:gZ,constant:Ta,cumulativeLogNormal:BZ,cumulativeNormal:G4,cumulativeUniform:HZ,dayofyear:HOe,debounce:yZ,defaultLocale:TZ,definition:A3e,densityLogNormal:jZ,densityNormal:$Z,densityUniform:VZ,domChild:$s,domClear:pc,domCreate:Gg,domFind:Kee,dotbin:P3e,error:Fe,expressionFunction:ds,extend:bn,extent:Ph,extentIndex:DOe,falsy:mg,fastmap:_S,field:jc,flush:OOe,font:lF,fontFamily:nR,fontSize:Qh,format:ID,formatLocale:B$,formats:IZ,hasOwnProperty:Ft,id:Uk,identity:Sa,inferType:g3e,inferTypes:y3e,ingest:xr,inherits:ft,inrange:fw,interpolate:Cee,interpolateColors:tF,interpolateRange:S$e,intersect:$Me,intersectBoxLine:dw,intersectPath:Oee,intersectPoint:$ee,intersectRule:G$e,isArray:Be,isBoolean:Oy,isDate:w0,isFunction:_n,isIterable:$Oe,isNumber:ur,isObject:gt,isRegExp:MOe,isString:vt,isTuple:z4,key:vZ,lerp:LOe,lineHeight:ey,loader:B4,locale:p3e,logger:dZ,lruCache:FOe,markup:tte,merge:jOe,mergeConfig:vS,multiLineOffset:Wee,one:yS,pad:BOe,panLinear:COe,panLog:AOe,panPow:IOe,panSymlog:kOe,parse:OGt,parseExpression:Vte,parseSelector:My,path:l6,pathCurves:Nee,pathEqual:BMe,pathParse:tx,pathRectangle:U$e,pathRender:uI,pathSymbols:B$e,pathTrail:z$e,peek:Kn,point:fF,projection:pte,quantileLogNormal:UZ,quantileNormal:Y4,quantileUniform:qZ,quantiles:PZ,quantizeInterpolator:T$e,quarter:ROe,quartiles:DZ,get random(){return zc},randomInteger:F4t,randomKDE:LZ,randomLCG:L4t,randomLogNormal:O3e,randomMixture:$3e,randomNormal:MZ,randomUniform:M3e,read:_3e,regressionConstant:WZ,regressionExp:F3e,regressionLinear:GZ,regressionLoess:U3e,regressionLog:L3e,regressionPoly:B3e,regressionPow:j3e,regressionQuad:YZ,renderModule:dF,repeat:xC,resetDefaultLocale:O6t,resetSVGClipId:H$e,resetSVGDefIds:Bjt,responseType:b3e,runtimeContext:t6e,sampleCurve:X4,sampleLogNormal:FZ,sampleNormal:W4,sampleUniform:zZ,scale:yr,sceneEqual:rte,sceneFromJSON:oMe,scenePickVisit:q$,sceneToJSON:sMe,sceneVisit:id,sceneZOrder:Mee,scheme:Aee,serializeXML:SMe,setHybridRendererOptions:Mjt,setRandom:$4t,span:zk,splitAccessPath:Xh,stringValue:at,textMetrics:Rl,timeBin:a3e,timeFloor:QOe,timeFormatLocale:sI,timeInterval:wS,timeOffset:e3e,timeSequence:r3e,timeUnitSpecifier:VOe,timeUnits:xZ,toBoolean:bZ,toDate:_Z,toNumber:pa,toSet:nd,toString:wZ,transform:I3e,transforms:QE,truncate:UOe,truthy:Bc,tupleid:Mt,typeParsers:LV,utcFloor:JOe,utcInterval:ES,utcOffset:t3e,utcSequence:i3e,utcdayofyear:GOe,utcquarter:NOe,utcweek:YOe,version:$Gt,visitArray:xg,week:qOe,writeConfig:bS,zero:Lg,zoomLinear:hZ,zoomLog:pZ,zoomPow:j$,zoomSymlog:mZ},Symbol.toStringTag,{value:"Module"}));function LGt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var FGt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},jGt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},BGt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const UGt=Array.prototype.slice,rv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,UGt.call(t,1))},zGt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var VGt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:zGt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return rv("join",arguments)},indexof:function(){return rv("indexOf",arguments)},lastindexof:function(){return rv("lastIndexOf",arguments)},slice:function(){return rv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return rv("substring",arguments,String)},split:function(){return rv("split",arguments,String)},replace:function(){return rv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const HGt=["view","item","group","xy","x","y"],AH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&AH.add(setImmediate);const qGt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:FGt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),AH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||VGt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>jGt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>BGt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,AH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function $T(e,t,n,r,i,s){const o=a=>qGt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,HGt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var WGt={operator(e,t){const n=t.ast,r=e.functions;return i=>$T(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>$T(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>$T(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return $T(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=$T(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&LGt(o,r,s),l}}};const GGt="vega-lite",YGt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',KGt="5.19.0",XGt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],QGt="https://vega.github.io/vega-lite/",JGt="Vega-Lite is a concise high-level language for interactive visualization.",ZGt=["vega","chart","visualization"],eYt="build/vega-lite.js",tYt="build/vega-lite.min.js",nYt="build/vega-lite.min.js",rYt="build/src/index",iYt="build/src/index.d.ts",sYt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},oYt=["bin","build","src","vega-lite*","tsconfig.json"],aYt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},uYt={type:"git",url:"https://github.com/vega/vega-lite.git"},lYt="BSD-3-Clause",cYt={url:"https://github.com/vega/vega-lite/issues"},fYt={"@babel/core":"^7.24.7","@babel/preset-env":"^7.24.7","@babel/preset-typescript":"^7.24.7","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.13.0","@typescript-eslint/parser":"^7.13.0",ajv:"^8.16.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.3.2",puppeteer:"^15.0.0","release-it":"17.2.1",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.1","ts-jest":"^29.1.4","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},dYt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.3","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},hYt={vega:"^5.24.0"},pYt={node:">=18"},mYt="yarn@1.22.19",gYt={name:GGt,author:YGt,version:KGt,collaborators:XGt,homepage:QGt,description:JGt,keywords:ZGt,main:eYt,unpkg:tYt,jsdelivr:nYt,module:rYt,types:iYt,bin:sYt,files:oYt,scripts:aYt,repository:uYt,license:lYt,bugs:cYt,devDependencies:fYt,dependencies:dYt,peerDependencies:hYt,engines:pYt,packageManager:mYt};function yne(e){return!!e.or}function vne(e){return!!e.and}function bne(e){return!!e.not}function YD(e,t){if(bne(e))YD(e.not,t);else if(vne(e))for(const n of e.and)YD(n,t);else if(yne(e))for(const n of e.or)YD(n,t);else t(e)}function Kw(e,t){return bne(e)?{not:Kw(e.not,t)}:vne(e)?{and:e.and.map(n=>Kw(n,t))}:yne(e)?{or:e.or.map(n=>Kw(n,t))}:t(e)}const rn=structuredClone;function Q6e(e){throw new Error(e)}function ox(e,t){const n={};for(const r of t)Ft(e,r)&&(n[r]=e[r]);return n}function Vu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>zr(e)).join(",")})`};function zn(e){if(ur(e))return e;const t=vt(e)?e:zr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function IH(e){return e===!1||e===null}function $n(e,t){return e.includes(t)}function ax(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function _ne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function J6e(e,...t){for(const n of t)yYt(e,n??{});return e}function yYt(e,t){for(const n of Xe(t))bS(e,n,t[n],!0)}function nh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function vYt(e,t){const n=Xe(e),r=Xe(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function Z6e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function wne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function kH(e){const t=new Set;for(const n of e){const i=Xh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Ene(e,t){return e===void 0||t===void 0?!0:wne(kH(e),kH(t))}function Ur(e){return Xe(e).length===0}const Xe=Object.keys,Mo=Object.values,iy=Object.entries;function bI(e){return e===!0||e===!1}function Ei(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function O2(e,t){return bne(e)?`!(${O2(e.not,t)})`:vne(e)?`(${e.and.map(n=>O2(n,t)).join(") && (")})`:yne(e)?`(${e.or.map(n=>O2(n,t)).join(") || (")})`:t(e)}function dM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&dM(e[n],t)&&delete e[n],Ur(e)}function fR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function xne(e,t="datum"){const n=Xh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(at).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function e4e(e,t="datum"){return`${t}[${at(Xh(e).join("."))}]`}function bYt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Vc(e){return`${Xh(e).map(bYt).join("\\.")}`}function Z1(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function kS(e){return`${Xh(e).join(".")}`}function ux(e){return e?Xh(e).length:0}function cs(...e){for(const t of e)if(t!==void 0)return t}let t4e=42;function n4e(e){const t=++t4e;return e?String(e)+t:t}function _Yt(){t4e=42}function r4e(e){return i4e(e)?e:`__${e}`}function i4e(e){return e.startsWith("__")}function _I(e){if(e!==void 0)return(e%360+360)%360}function RF(e){return ur(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const rge=Object.getPrototypeOf(structuredClone({}));function Al(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Al(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Al(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==rge.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==rge.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Al(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function zr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const Zp="row",em="column",NF="facet",xi="x",mo="y",gd="x2",ep="y2",Ly="xOffset",RS="yOffset",yd="radius",Ym="radius2",ef="theta",Km="theta2",vd="latitude",bd="longitude",_d="latitude2",Hc="longitude2",Zu="color",tp="fill",np="stroke",el="shape",Xm="size",Mb="angle",Qm="opacity",Fy="fillOpacity",jy="strokeOpacity",By="strokeWidth",Uy="strokeDash",dR="text",lx="order",hR="detail",PF="key",eb="tooltip",DF="href",OF="url",$F="description",wYt={x:1,y:1,x2:1,y2:1},s4e={theta:1,theta2:1,radius:1,radius2:1};function o4e(e){return e in s4e}const Sne={longitude:1,longitude2:1,latitude:1,latitude2:1};function a4e(e){switch(e){case vd:return"y";case _d:return"y2";case bd:return"x";case Hc:return"x2"}}function u4e(e){return e in Sne}const EYt=Xe(Sne),Tne={...wYt,...s4e,...Sne,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Xw(e){return e===Zu||e===tp||e===np}const l4e={row:1,column:1,facet:1},xc=Xe(l4e),Cne={...Tne,...l4e},xYt=Xe(Cne),{order:qsn,detail:Wsn,tooltip:Gsn,...SYt}=Cne,{row:Ysn,column:Ksn,facet:Xsn,...TYt}=SYt;function CYt(e){return!!TYt[e]}function c4e(e){return!!Cne[e]}const AYt=[gd,ep,_d,Hc,Km,Ym];function f4e(e){return Lb(e)!==e}function Lb(e){switch(e){case gd:return xi;case ep:return mo;case _d:return vd;case Hc:return bd;case Km:return ef;case Ym:return yd}return e}function sy(e){if(o4e(e))switch(e){case ef:return"startAngle";case Km:return"endAngle";case yd:return"outerRadius";case Ym:return"innerRadius"}return e}function rp(e){switch(e){case xi:return gd;case mo:return ep;case vd:return _d;case bd:return Hc;case ef:return Km;case yd:return Ym}}function tl(e){switch(e){case xi:case gd:return"width";case mo:case ep:return"height"}}function d4e(e){switch(e){case xi:return"xOffset";case mo:return"yOffset";case gd:return"x2Offset";case ep:return"y2Offset";case ef:return"thetaOffset";case yd:return"radiusOffset";case Km:return"theta2Offset";case Ym:return"radius2Offset"}}function Ane(e){switch(e){case xi:return"xOffset";case mo:return"yOffset"}}function IYt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const kYt=Xe(Tne),{x:Qsn,y:Jsn,x2:Zsn,y2:eon,xOffset:ton,yOffset:non,latitude:ron,longitude:ion,latitude2:son,longitude2:oon,theta:aon,theta2:uon,radius:lon,radius2:con,...Ine}=Tne,RYt=Xe(Ine),kne={x:1,y:1},Jm=Xe(kne);function fs(e){return e in kne}const Rne={theta:1,radius:1},NYt=Xe(Rne);function MF(e){return e==="width"?xi:mo}const h4e={xOffset:1,yOffset:1};function pR(e){return e in h4e}const{text:fon,tooltip:don,href:hon,url:pon,description:mon,detail:gon,key:yon,order:von,...p4e}=Ine,PYt=Xe(p4e);function DYt(e){return!!Ine[e]}function OYt(e){switch(e){case Zu:case tp:case np:case Xm:case el:case Qm:case By:case Uy:return!0;case Fy:case jy:case Mb:return!1}}const m4e={...kne,...Rne,...h4e,...p4e},Nne=Xe(m4e);function ip(e){return!!m4e[e]}function $Yt(e,t){return LYt(e)[t]}const g4e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:bon,...MYt}=g4e;function LYt(e){switch(e){case Zu:case tp:case np:case $F:case hR:case PF:case eb:case DF:case lx:case Qm:case Fy:case jy:case By:case NF:case Zp:case em:return g4e;case xi:case mo:case Ly:case RS:case vd:case bd:return MYt;case gd:case ep:case _d:case Hc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Xm:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Uy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case el:return{point:"always",geoshape:"always"};case dR:return{text:"always"};case Mb:return{point:"always",square:"always",text:"always"};case OF:return{image:"always"};case ef:return{text:"always",arc:"always"};case yd:return{text:"always",arc:"always"};case Km:case Ym:return{arc:"always"}}}function X9(e){switch(e){case xi:case mo:case ef:case yd:case Ly:case RS:case Xm:case Mb:case By:case Qm:case Fy:case jy:case gd:case ep:case Km:case Ym:return;case NF:case Zp:case em:case el:case Uy:case dR:case eb:case DF:case OF:case $F:return"discrete";case Zu:case tp:case np:return"flexible";case vd:case bd:case _d:case Hc:case hR:case PF:case lx:return}}const FYt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},jYt={count:1,min:1,max:1};function km(e){return!!e&&!!e.argmin}function zy(e){return!!e&&!!e.argmax}function Pne(e){return vt(e)&&!!FYt[e]}const BYt=new Set(["count","valid","missing","distinct"]);function LF(e){return vt(e)&&BYt.has(e)}function UYt(e){return vt(e)&&$n(["min","max"],e)}const zYt=new Set(["count","sum","distinct","valid","missing"]),VYt=new Set(["mean","average","median","q1","q3","min","max"]);function y4e(e){return Oy(e)&&(e=XF(e,void 0)),"bin"+Xe(e).map(t=>FF(e[t])?Ei(`_${t}_${iy(e[t])}`):Ei(`_${t}_${e[t]}`)).join("")}function oi(e){return e===!0||Fb(e)&&!e.binned}function Ao(e){return e==="binned"||Fb(e)&&e.binned===!0}function Fb(e){return gt(e)}function FF(e){return e==null?void 0:e.param}function ige(e){switch(e){case Zp:case em:case Xm:case Zu:case tp:case np:case By:case Qm:case Fy:case jy:case el:return 6;case Uy:return 4;default:return 10}}function mR(e){return!!(e!=null&&e.expr)}function ua(e,{level:t}={level:0}){const n=Xe(e||{}),r={};for(const i of n)r[i]=t===0?vl(e[i]):ua(e[i],{level:t-1});return r}function v4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=ox(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Cg(e){return vt(e)||Be(e)&&vt(e[0])}function Nt(e){return!!(e!=null&&e.signal)}function Vy(e){return!!e.step}function HYt(e){return Be(e)?!1:"fields"in e&&!("data"in e)}function qYt(e){return Be(e)?!1:"fields"in e&&"data"in e}function Vp(e){return Be(e)?!1:"field"in e&&"data"in e}const WYt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},GYt=Xe(WYt),YYt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},RH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function b4e(e){const t=Be(e.condition)?e.condition.map(sge):sge(e.condition);return{...vl(e),condition:t}}function vl(e){if(mR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function sge(e){if(mR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function hi(e){if(mR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Nt(e)?e:e!==void 0?{value:e}:void 0}function KYt(e){return Nt(e)?e.signal:at(e)}function oge(e){return Nt(e)?e.signal:at(e.value)}function $f(e){return Nt(e)?e.signal:e==null?null:at(e)}function XYt(e,t,n){for(const r of n){const i=$h(r,t.markDef,t.config);i!==void 0&&(e[r]=hi(i))}return e}function _4e(e){return[].concat(e.type,e.style??[])}function Or(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:$h(e,t,n,r)}function $h(e,t,n,{vgChannel:r}={}){return cs(r?hM(e,t,n.style):void 0,hM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function hM(e,t,n){return w4e(e,_4e(t),n)}function w4e(e,t,n){t=yt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function E4e(e,t){return yt(e).reduce((n,r)=>(n.field.push(dt(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function x4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Al(i,r))return;n.push(r)}),n}function S4e(e,t){return Al(e,t)||!t?e:e?[...yt(e),...yt(t)].join(", "):t}function T4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Cg(n)||Nt(n))&&(Cg(r)||Nt(r)))return{explicit:e.explicit,value:S4e(n,r)};if(Cg(n)||Nt(n))return{explicit:e.explicit,value:n};if(Cg(r)||Nt(r))return{explicit:e.explicit,value:r};if(!Cg(n)&&!Nt(n)&&!Cg(r)&&!Nt(r))return{explicit:e.explicit,value:x4e(n,r)};throw new Error("It should never reach here")}function Dne(e){return`Invalid specification ${zr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const QYt='Autosize "fit" only works for single views and layered views.';function age(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function uge(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function lge(e){return e?`Dropping "fit-${e}" because spec has discrete ${tl(e)}.`:'Dropping "fit" because spec has discrete size.'}function One(e){return`Unknown field for ${e}. Cannot calculate view size.`}function cge(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function JYt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function ZYt(e){return`The "nearest" transform is not supported for ${e} marks.`}function C4e(e){return`Selection not supported for ${e} yet.`}function eKt(e){return`Cannot find a selection named "${e}".`}const tKt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",nKt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",rKt="Legend bindings are only supported for selections over an individual field or encoding channel.";function iKt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function sKt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const oKt="The same selection must be used to override scale domains in a layered view.",aKt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function uKt(e){return`Unknown repeated value "${e}".`}function fge(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const lKt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function cKt(e){return`Unrecognized parse "${e}".`}function dge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const fKt="Attempt to add the same child twice.";function dKt(e){return`Ignoring an invalid transform: ${zr(e)}.`}const hKt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function hge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function pKt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${zr(t)} is overridden by a child projection ${zr(n)}.`}const mKt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function gKt(e){return`${e}Offset dropped because ${e} is continuous`}function yKt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${zr(n)}}.`}function A4e(e){return`Invalid field type "${e}".`}function vKt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function bKt(e){return`Invalid aggregation operator "${e}".`}function I4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function _Kt(e){return`Position range does not support relative band size for ${e}.`}function NH(e,t){return`Dropping ${zr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const wKt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function jF(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function EKt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function xKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function SKt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function TKt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function Q9(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function CKt(e){return`The ${e} for range marks cannot be an expression`}function AKt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function IKt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function kKt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function RKt(e){return`Cannot use the relative band size with ${e} scale.`}function NKt(e){return`Using unaggregated domain with raw field has no effect (${zr(e)}).`}function PKt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function DKt(e){return`Unaggregated domain is currently unsupported for log scale (${zr(e)}).`}function OKt(e){return`Cannot apply size to non-oriented mark "${e}".`}function $Kt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function MKt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function k4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function R4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function LKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${zr(n)} and ${zr(r)}). Using ${zr(n)}.`}function FKt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${zr(n)} and ${zr(r)}). Using the union of the two domains.`}function jKt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function BKt(e){return`Dropping sort property ${zr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const pge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",UKt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",zKt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",VKt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function HKt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function qKt(e){return`Stack is applied to a non-linear scale (${e}).`}function WKt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function pM(e,t){return`Invalid ${e}: ${zr(t)}.`}function GKt(e){return`Dropping day from datetime ${zr(e)} as day cannot be combined with other units.`}function YKt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function KKt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function XKt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function mge(e){return`1D error band does not support ${e}.`}function N4e(e){return`Channel ${e} is required for "binned" bin.`}function QKt(e){return`Channel ${e} should not be used with "binned" bin.`}function JKt(e){return`Domain for ${e} is required for threshold scale.`}const P4e=dZ(fZ);let cx=P4e;function ZKt(e){return cx=e,cx}function eXt(){return cx=P4e,cx}function tt(...e){cx.warn(...e)}function tXt(...e){cx.debug(...e)}function jb(e){if(e&&gt(e)){for(const t of Mne)if(t in e)return!0}return!1}const D4e=["january","february","march","april","may","june","july","august","september","october","november","december"],nXt=D4e.map(e=>e.substr(0,3)),O4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],rXt=O4e.map(e=>e.substr(0,3));function iXt(e){if(RF(e)&&(e=+e),ur(e))return e>4&&tt(pM("quarter",e)),e-1;throw new Error(pM("quarter",e))}function sXt(e){if(RF(e)&&(e=+e),ur(e))return e-1;{const t=e.toLowerCase(),n=D4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=nXt.indexOf(r);if(i!==-1)return i;throw new Error(pM("month",e))}}function oXt(e){if(RF(e)&&(e=+e),ur(e))return e%7;{const t=e.toLowerCase(),n=O4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=rXt.indexOf(r);if(i!==-1)return i;throw new Error(pM("day",e))}}function $ne(e,t){const n=[];if(t&&e.day!==void 0&&Xe(e).length>1&&(tt(GKt(e)),e=rn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?sXt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?iXt(e.quarter):e.quarter;n.push(ur(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?oXt(e.day):e.day;n.push(ur(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function tb(e){const n=$ne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function aXt(e){const n=$ne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function uXt(e){const t=$ne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const $4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Mne=Xe($4e);function lXt(e){return!!$4e[e]}function Bb(e){return gt(e)?e.binned:M4e(e)}function M4e(e){return e&&e.startsWith("binned")}function Lne(e){return e.startsWith("utc")}function cXt(e){return e.substring(3)}const fXt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function BF(e){return Mne.filter(t=>F4e(e,t))}function L4e(e){const t=BF(e);return t[t.length-1]}function F4e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function dXt(e,t,{end:n}={end:!1}){const r=xne(t),i=Lne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Mne)F4e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),aXt(a)}function j4e(e){if(!e)return;const t=BF(e);return`timeUnitSpecifier(${zr(t)}, ${zr(fXt)})`}function hXt(e,t,n){if(!e)return;const r=j4e(e);return`${n||Lne(e)?"utc":"time"}Format(${t}, ${r})`}function fo(e){if(!e)return;let t;return vt(e)?M4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:gt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Lne(t.unit)&&(t.utc=!0,t.unit=cXt(t.unit)),t}function pXt(e){const{utc:t,...n}=fo(e);return n.unit?(t?"utc":"")+Xe(n).map(r=>Ei(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Xe(n).map(r=>Ei(`_${r}_${n[r]}`)).join("")}function B4e(e,t=n=>n){const n=fo(e),r=L4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=U4e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(tb(a))} - ${t(tb(i))}`}}const mXt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function gXt(e){return!!mXt[e]}function U4e(e,t=1){if(gXt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function yXt(e){return e==null?void 0:e.param}function Fne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function jne(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function Bne(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function Une(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function zne(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Vne(e){if(e!=null&&e.field){if(Be(e.range)&&e.range.length===2)return!0;if(Nt(e.range))return!0}return!1}function Hne(e){return!!(e!=null&&e.field)&&(Be(e.oneOf)||Be(e.in))}function vXt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function z4e(e){return Hne(e)||Fne(e)||Vne(e)||jne(e)||Une(e)||Bne(e)||zne(e)}function kd(e,t){return QF(e,{timeUnit:t,wrapTime:!0})}function bXt(e,t){return e.map(n=>kd(n,t))}function V4e(e,t=!0){const{field:n}=e,r=fo(e.timeUnit),{unit:i,binned:s}=r||{},o=dt(e,{expr:"datum"}),a=i?`time(${s?o:dXt(i,n)})`:o;if(Fne(e))return`${a}===${kd(e.equal,i)}`;if(jne(e)){const u=e.lt;return`${a}<${kd(u,i)}`}else if(Une(e)){const u=e.gt;return`${a}>${kd(u,i)}`}else if(Bne(e)){const u=e.lte;return`${a}<=${kd(u,i)}`}else if(zne(e)){const u=e.gte;return`${a}>=${kd(u,i)}`}else{if(Hne(e))return`indexof([${bXt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(vXt(e))return UF(a,e.valid);if(Vne(e)){const{range:u}=e,l=Nt(u)?{signal:`${u.signal}[0]`}:u[0],c=Nt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+kd(l,i)+", "+kd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${kd(l,i)}`),c!==null&&f.push(`${a} <= ${kd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${zr(e)}`)}function UF(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function _Xt(e){return z4e(e)&&e.timeUnit?{...e,timeUnit:fo(e.timeUnit)}:e}const gR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function wXt(e){return e==="quantitative"||e==="temporal"}function H4e(e){return e==="ordinal"||e==="nominal"}const nb=gR.quantitative,qne=gR.ordinal,fx=gR.temporal,Wne=gR.nominal,NS=gR.geojson;function EXt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case nb:return"quantitative";case"t":case fx:return"temporal";case"o":case qne:return"ordinal";case"n":case Wne:return"nominal";case NS:return"geojson"}}const ko={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},PH={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function xXt(e,t){const n=PH[e],r=PH[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const SXt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function gge(e){return SXt[e]}const q4e=new Set(["linear","log","pow","sqrt","symlog"]),W4e=new Set([...q4e,"time","utc"]);function G4e(e){return q4e.has(e)}const Y4e=new Set(["quantile","quantize","threshold"]),TXt=new Set([...W4e,...Y4e,"sequential","identity"]),CXt=new Set(["ordinal","bin-ordinal","point","band"]);function ho(e){return CXt.has(e)}function sd(e){return TXt.has(e)}function rh(e){return W4e.has(e)}function dx(e){return Y4e.has(e)}const AXt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function IXt(e){return!vt(e)&&!!e.name}function K4e(e){return e==null?void 0:e.param}function kXt(e){return e==null?void 0:e.unionWith}function RXt(e){return gt(e)&&"field"in e}const NXt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:_on,domain:won,range:Eon,rangeMax:xon,rangeMin:Son,scheme:Ton,...PXt}=NXt,DXt=Xe(PXt);function DH(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return rh(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return rh(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return rh(e);case"nice":return rh(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return sd(e)&&!$n(["log","time","utc","threshold","quantile"],e)}}function X4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Xw(e)?void 0:kKt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function OXt(e,t){return $n([qne,Wne],t)?e===void 0||ho(e):t===fx?$n([ko.TIME,ko.UTC,void 0],e):t===nb?G4e(e)||dx(e)||e===void 0:!0}function $Xt(e,t,n=!1){if(!ip(e))return!1;switch(e){case xi:case mo:case Ly:case RS:case ef:case yd:return rh(t)||t==="band"?!0:t==="point"?!n:!1;case Xm:case By:case Qm:case Fy:case jy:case Mb:return rh(t)||dx(t)||$n(["band","point","ordinal"],t);case Zu:case tp:case np:return t!=="band";case Uy:case el:return t==="ordinal"||dx(t)}}function MXt(e){return gt(e)&&"value"in e}const lu={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Q4e=lu.arc,zF=lu.area,VF=lu.bar,LXt=lu.image,HF=lu.line,qF=lu.point,FXt=lu.rect,mM=lu.rule,J4e=lu.text,Gne=lu.tick,jXt=lu.trail,Yne=lu.circle,Kne=lu.square,Z4e=lu.geoshape;function Hy(e){return["line","area","trail"].includes(e)}function wI(e){return["rect","bar","image","arc"].includes(e)}const BXt=new Set(Xe(lu));function Mh(e){return e.type}const UXt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],zXt=["fill","fillOpacity"],VXt=[...UXt,...zXt],HXt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},yge=Xe(HXt),qXt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},WXt={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},GXt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},eFe=Xe(GXt);function rb(e){return e&&e.band!=null}const YXt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},tFe=5,KXt={binSpacing:1,continuousBandSize:tFe,minBandSize:.25,timeUnitBandPosition:.5},XXt={binSpacing:0,continuousBandSize:tFe,minBandSize:.25,timeUnitBandPosition:.5},QXt={thickness:1};function JXt(e){return Mh(e)?e.type:e}function nFe(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function Xne({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){var a,u;if(!r||!sd(r)||i)return"always-valid";const s=nFe(Or("invalid",e,t),{isPath:Hy(e.type)});return((u=(a=t.scale)==null?void 0:a.invalid)==null?void 0:u[n])!==void 0?"show":s}function ZXt(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function rFe({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,s=`peek(${r})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:s})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:s})`}}function iFe({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:s}){var c;const o=n==null?void 0:n.get("type"),a=ad(t),u=LF(a==null?void 0:a.aggregate),l=Xne({scaleChannel:e,markDef:i,config:s,scaleType:o,isCountAggregate:u});if(a&&l==="show"){const f=((c=s.scale.invalid)==null?void 0:c[e])??"zero-or-min";return{test:UF(dt(a,{expr:"datum"}),!1),...eQt(f,n,r)}}}function eQt(e,t,n){if(MXt(e)){const{value:r}=e;return Nt(r)?{signal:r.signal}:{value:r}}return rFe({scale:t,scaleName:n,mode:"zeroOrMin"})}function Qne(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:s,config:o}=e,a=Lb(t),u=Jne(e),l=iFe({scaleChannel:a,channelDef:n,scale:i,scaleName:s,markDef:r,config:o});return l!==void 0?[l,u]:u}function tQt(e){const{datum:t}=e;return jb(t)?tb(t):`${zr(t)}`}function p1(e,t,n,r){const i={};if(t&&(i.scale=t),sp(e)){const{datum:s}=e;jb(s)?i.signal=tb(s):Nt(s)?i.signal=s.signal:mR(s)?i.signal=s.expr:i.value=s}else i.field=dt(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function gM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Nt(o)&&0<o&&o<1?"datum":void 0,u=dt(t,{expr:a,suffix:i}),l=n!==void 0?dt(n,{expr:a}):dt(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Nt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function nQt({scaleName:e,fieldDef:t}){const n=dt(t,{expr:"datum"}),r=dt(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function Jne({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(cn(t)){const f=o==null?void 0:o.get("type");if(nu(t)){c??(c=oy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(oi(d)||c&&h&&p===fx)return a!=null&&a.impute?p1(t,s,{binSuffix:"mid"},{offset:u}):c&&!ho(f)?gM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):p1(t,s,_R(t,e)?{binSuffix:"range"}:{},{offset:u});if(Ao(d)){if(nt(n))return gM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});tt(N4e(e===xi?gd:ep))}}return p1(t,s,ho(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(od(t)){const f=t.value,d=u?{offset:u}:{};return{...$2(e,f),...d}}}return _n(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function $2(e,t){return $n(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:$n(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:hi(t)}function ib(e){return e&&e!=="number"&&e!=="time"}function sFe(e,t,n){return`${e}(${t}${n?`, ${zr(n)}`:""})`}const rQt="  ";function Zne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(ib(n))return Mf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=oFe(e,r,i),a=hx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Mf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Mf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&nt(e)&&e.timeUnit===void 0)return Mf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(mx(e)){const c=sQt({field:o,timeUnit:nt(e)?(u=fo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:Ub(e)&&((l=e.scale)==null?void 0:l.type)===ko.UTC});return c?{signal:c}:void 0}if(t=OH({type:a,specifiedFormat:t,config:s,normalizeStack:i}),nt(e)&&oi(e.bin)){const c=dt(e,{expr:r,binSuffix:"end"});return{signal:yR(o,c,t,n,s)}}else return t||hx(e)==="quantitative"?{signal:`${lFe(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function oFe(e,t,n){return nt(e)?n?`${dt(e,{expr:t,suffix:"end"})}-${dt(e,{expr:t,suffix:"start"})}`:dt(e,{expr:t}):tQt(e)}function Mf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=oFe(e,r,i)),o!=="datum.value"&&nt(e)&&oi(e.bin)){const a=dt(e,{expr:r,binSuffix:"end"});return{signal:yR(o,a,t,n,s)}}return{signal:sFe(n,o,t)}}function aFe(e,t,n,r,i,s){var o;if(!(vt(r)&&ib(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&hx(e)==="quantitative"&&(i.normalizedNumberFormatType&&px(e)&&e.stack==="normalize"||i.numberFormatType))){if(px(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return OH({type:"quantitative",config:i,normalizeStack:!0});if(mx(e)){const a=nt(e)?(o=fo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:iQt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return OH({type:t,specifiedFormat:n,config:i})}}function uFe(e,t,n){var r;if(e&&(Nt(e)||e==="number"||e==="time"))return e;if(mx(t)&&n!=="time"&&n!=="utc")return nt(t)&&((r=fo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function OH({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(vt(t))return t;if(e===nb)return r?n.normalizedNumberFormat:n.numberFormat}function iQt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:j4e(t)}:r?void 0:n.timeFormat)}function lFe(e,t){return`format(${e}, "${t||""}")`}function vge(e,t,n,r){return ib(n)?sFe(n,e,t):lFe(e,(vt(t)?t:void 0)??r.numberFormat)}function yR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return yR(e,t,i.numberFormat,i.numberFormatType,i);const s=vge(e,n,r,i),o=vge(t,n,r,i);return`${UF(e,!1)} ? "null" : ${s} + "${rQt}" + ${o}`}function sQt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=vt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):hXt(t,e,s)}const WF="min",oQt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function bge(e){return e in oQt}function aQt(e){return!!(e!=null&&e.encoding)}function tm(e){return e&&(e.op==="count"||!!e.field)}function cFe(e){return e&&Be(e)}function vR(e){return"row"in e||"column"in e}function ere(e){return!!e&&"header"in e}function GF(e){return"facet"in e}function uQt(e){return e.param}function lQt(e){return e&&!vt(e)&&"repeat"in e}function _ge(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function tre(e){return"sort"in e}function oy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(cn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(nt(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return $h("timeUnitBandPosition",n,r);if(oi(s))return .5}}function fFe({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=tl(e),u=Or(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(nt(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:$h("timeUnitBandSize",r,i)};if(oi(h)&&!ho(s))return{band:1}}if(wI(r.type))return s?ho(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function dFe(e,t,n,r){return oi(e.bin)||e.timeUnit&&nu(e)&&e.type==="temporal"?oy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function hFe(e){return e&&!!e.sort&&!e.field}function YF(e){return e&&"condition"in e}function KF(e){const t=e==null?void 0:e.condition;return!!t&&!Be(t)&&nt(t)}function bR(e){const t=e==null?void 0:e.condition;return!!t&&!Be(t)&&cn(t)}function cQt(e){const t=e==null?void 0:e.condition;return!!t&&(Be(t)||od(t))}function nt(e){return e&&(!!e.field||e.aggregate==="count")}function hx(e){return e==null?void 0:e.type}function sp(e){return e&&"datum"in e}function Zg(e){return nu(e)&&!vM(e)||yM(e)}function wge(e){return nu(e)&&e.type==="quantitative"&&!e.bin||yM(e)}function yM(e){return sp(e)&&ur(e.datum)}function cn(e){return nt(e)||sp(e)}function nu(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function od(e){return e&&"value"in e&&"value"in e}function Ub(e){return e&&("scale"in e||"sort"in e)}function px(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function pFe(e){return e&&"legend"in e}function mFe(e){return e&&("format"in e||"formatType"in e)}function fQt(e){return Vu(e,["legend","axis","header","scale"])}function dQt(e){return"op"in e}function dt(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(pQt(e))n=r4e("count");else{let o;if(!t.nofn)if(dQt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;oi(a)?(o=y4e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?zy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):km(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!Bb(l)&&(o=pXt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?kS(n):t.expr?e4e(n,t.expr)+s:Vc(n)+s}function vM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return nt(e)&&!!e.bin;case"temporal":return!1}throw new Error(A4e(e.type))}function hQt(e){var t;return Ub(e)&&dx((t=e.scale)==null?void 0:t.type)}function pQt(e){return e.aggregate==="count"}function mQt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(oi(r))return`${n} (binned)`;if(i&&!Bb(i)){const a=(o=fo(i))==null?void 0:o.unit;if(a)return`${n} (${BF(a).join("-")})`}else if(s)return zy(s)?`${n} for max ${s.argmax}`:km(s)?`${n} for min ${s.argmin}`:`${fR(s)} of ${n}`;return n}function gQt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(zy(t))return`${i} for argmax(${t.argmax})`;if(km(t))return`${i} for argmin(${t.argmin})`;const s=r&&!Bb(r)?fo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||oi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const gFe=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return gQt(e);default:return mQt(e,t)}};let yFe=gFe;function vFe(e){yFe=e}function yQt(){vFe(gFe)}function Qw(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=nre(e))==null?void 0:a.title;if(!nt(e))return i??e.title;const s=e,o=r?rre(s,t):void 0;return n?cs(i,s.title,o):i??s.title??o}function nre(e){if(px(e)&&e.axis)return e.axis;if(pFe(e)&&e.legend)return e.legend;if(ere(e)&&e.header)return e.header}function rre(e,t){return yFe(e,t)}function bM(e){if(mFe(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=nre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function vQt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(tre(e)&&Be(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!zy(n)&&!km(n))return"quantitative";if(Ub(e)&&((s=e.scale)!=null&&s.type))switch(PH[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ad(e){if(nt(e))return e;if(KF(e))return e.condition}function js(e){if(cn(e))return e;if(bR(e))return e.condition}function bFe(e,t,n,r={}){if(vt(e)||ur(e)||Oy(e)){const i=vt(e)?"string":ur(e)?"number":"boolean";return tt(yKt(t,i,e)),{value:e}}return cn(e)?_M(e,t,n,r):bR(e)?{...e,condition:_M(e.condition,t,n,r)}:e}function _M(e,t,n,r){if(mFe(e)){const{format:i,formatType:s,...o}=e;if(ib(s)&&!n.customFormatTypes)return tt(hge(t)),_M(o,t,n,r)}else{const i=px(e)?"axis":pFe(e)?"legend":ere(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(ib(o)&&!n.customFormatTypes)return tt(hge(t)),_M({...e,[i]:a},t,n,r)}}return nt(e)?ire(e,t,r):bQt(e)}function bQt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ur(n)?"quantitative":vt(n)?"nominal":jb(n)?"temporal":void 0,{...e,type:t}}function ire(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Pne(r)&&!zy(r)&&!km(r)&&(tt(bKt(r)),delete a.aggregate),i&&(a.timeUnit=fo(i)),o&&(a.field=`${o}`),oi(s)&&(a.bin=XF(s,t)),Ao(s)&&!fs(t)&&tt(QKt(t)),nu(a)){const{type:u}=a,l=EXt(u);u!==l&&(a.type=l),u!=="quantitative"&&LF(r)&&(tt(vKt(u,r)),a.type="quantitative")}else if(!f4e(t)){const u=vQt(a,t);a.type=u}if(nu(a)){const{compatible:u,warning:l}=_Qt(a,t)||{};u===!1&&tt(l)}if(tre(a)&&vt(a.sort)){const{sort:u}=a;if(bge(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&bge(l))return{...a,sort:{encoding:l,order:"descending"}}}if(ere(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function XF(e,t){return Oy(e)?{maxbins:ige(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:ige(t)}:e}const __={compatible:!0};function _Qt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Zp:case em:case NF:return vM(e)?__:{compatible:!1,warning:xKt(t)};case xi:case mo:case Ly:case RS:case Zu:case tp:case np:case dR:case hR:case PF:case eb:case DF:case OF:case Mb:case ef:case yd:case $F:return __;case bd:case Hc:case vd:case _d:return n!==nb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:__;case Qm:case Fy:case jy:case By:case Xm:case Km:case Ym:case gd:case ep:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:__;case el:case Uy:return!vM(e)&&!hQt(e)?{compatible:!1,warning:SKt(t)}:__;case lx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:__}}function mx(e){const{formatType:t}=bM(e);return t==="time"||!t&&wQt(e)}function wQt(e){return e&&(e.type==="temporal"||nt(e)&&!!e.timeUnit)}function QF(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=fo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return mR(e)?a=e.expr:Nt(e)?a=e.signal:jb(e)?(o=!0,a=tb(e)):(vt(e)||ur(e))&&o&&(a=`datetime(${zr(e)})`,lXt(s)&&(ur(e)&&e<1e4||vt(e)&&isNaN(Date.parse(e)))&&(a=tb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:zr(e)}function _Fe(e,t){const{type:n}=e;return t.map(r=>{const i=nt(e)&&!Bb(e.timeUnit)?e.timeUnit:void 0,s=QF(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function _R(e,t){return oi(e.bin)?ip(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Ege={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function wR(e){return e==null?void 0:e.condition}const wFe=["domain","grid","labels","ticks","title"],EQt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},EFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},xQt={...EFe,style:1,labelExpr:1,encoding:1};function xge(e){return!!xQt[e]}const SQt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},xFe=Xe(SQt);function Zm(e){return"mark"in e}class JF{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Zm(t)?JXt(t.mark)===this.name:!1}}function m1(e,t){const n=e&&e[t];return n?Be(n)?ax(n,r=>!!r.field):nt(n)||KF(n):!1}function SFe(e,t){const n=e&&e[t];return n?Be(n)?ax(n,r=>!!r.field):nt(n)||sp(n)||bR(n):!1}function TFe(e,t){if(fs(t)){const n=e[t];if((nt(n)||sp(n))&&(H4e(n.type)||nt(n)&&n.timeUnit)){const r=Ane(t);return SFe(e,r)}}return!1}function CFe(e){return ax(xYt,t=>{if(m1(e,t)){const n=e[t];if(Be(n))return ax(n,r=>!!r.aggregate);{const r=ad(n);return r&&!!r.aggregate}}return!1})}function AFe(e,t){const n=[],r=[],i=[],s=[],o={};return sre(e,(a,u)=>{if(nt(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=nre(a),m=p==null?void 0:p.title;let g=dt(a,{forAs:!0});const y={...m?[]:{title:Qw(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(zy(c)?(v="argmax",g=dt({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):km(c)?(v="argmin",g=dt({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),nu(a)&&oi(f)){if(r.push({bin:f,field:l,as:g}),n.push(dt(a,{binSuffix:"end"})),_R(a,u)&&n.push(dt(a,{binSuffix:"range"})),fs(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",f4e(u)||(y.type=nb)}else if(d&&!Bb(d)){i.push({timeUnit:d,field:l,as:g});const v=nu(a)&&a.type!==fx&&"time";v&&(u===dR||u===eb?y.formatType=v:DYt(u)?y.legend={formatType:v,...y.legend}:fs(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function TQt(e,t,n){const r=$Yt(t,n);if(r){if(r==="binned"){const i=e[t===gd?xi:mo];return!!(nt(i)&&nt(e[t])&&Ao(i.bin))}}else return!1;return!0}function CQt(e,t,n,r){const i={};for(const s of Xe(e))c4e(s)||tt(EKt(s));for(let s of kYt){if(!e[s])continue;const o=e[s];if(pR(s)){const a=IYt(s),u=i[a];if(nt(u)&&wXt(u.type)&&nt(o)&&!u.timeUnit){tt(gKt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(tt(mKt),s=ef),!TQt(e,s,t)){tt(jF(s,t));continue}if(s===Xm&&t==="line"){const a=ad(e[s]);if(a!=null&&a.aggregate){tt(wKt);continue}}if(s===Zu&&(n?"fill"in e:"stroke"in e)){tt(I4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===hR||s===lx&&!Be(o)&&!od(o)||s===eb&&Be(o)){if(o){if(s===lx){const a=e[s];if(hFe(a)){i[s]=a;continue}}i[s]=yt(o).reduce((a,u)=>(nt(u)?a.push(ire(u,s)):tt(NH(u,s)),a),[])}}else{if(s===eb&&o===null)i[s]=null;else if(!nt(o)&&!sp(o)&&!od(o)&&!YF(o)&&!Nt(o)){tt(NH(o,s));continue}i[s]=bFe(o,s,r)}}return i}function ZF(e,t){const n={};for(const r of Xe(e)){const i=bFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function AQt(e){const t=[];for(const n of Xe(e))if(m1(e,n)){const r=e[n],i=yt(r);for(const s of i)nt(s)?t.push(s):KF(s)&&t.push(s.condition)}return t}function sre(e,t,n){if(e)for(const r of Xe(e)){const i=e[r];if(Be(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function IQt(e,t,n,r){return e?Xe(e).reduce((i,s)=>{const o=e[s];return Be(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function IFe(e,t){return Xe(t).reduce((n,r)=>{switch(r){case xi:case mo:case DF:case $F:case OF:case gd:case ep:case Ly:case RS:case ef:case Km:case yd:case Ym:case vd:case bd:case _d:case Hc:case dR:case el:case Mb:case eb:return n;case lx:if(e==="line"||e==="trail")return n;case hR:case PF:{const i=t[r];if(Be(i)||nt(i))for(const s of yt(i))s.aggregate||n.push(dt(s,{}));return n}case Xm:if(e==="trail")return n;case Zu:case tp:case np:case Qm:case Fy:case jy:case Uy:case By:{const i=ad(t[r]);return i&&!i.aggregate&&n.push(dt(i,{})),n}}},[])}function kQt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(Be(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return Be(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function $H(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${ore(t)}`:"";return{field:o+t.field,type:t.type,title:Nt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=AQt(n).map(fQt);return{tooltip:[...i,...nh(s,zn)]}}function ore(e){const{title:t,field:n}=e;return cs(t,n)}function are(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=ore(n);return kFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...vt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function kFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Mh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Oy(e[t])?{}:e[t]}}]:[]}function RFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:yP(s,n),continuousAxisChannelDef2:yP(o,n),continuousAxisChannelDefError:yP(a,n),continuousAxisChannelDefError2:yP(u,n),continuousAxis:i}}function yP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&tt(XKt(n,t)),r}else return e}function NFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Mh(n)&&n.orient)return n.orient;if(Zg(i)){if(Zg(s)){const o=nt(i)&&i.aggregate,a=nt(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return mx(s)&&!mx(i)?"horizontal":"vertical"}return"horizontal"}else{if(Zg(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const wM="boxplot",RQt=["box","median","outliers","rule","ticks"],NQt=new JF(wM,DFe);function PFe(e){return ur(e)?"tukey":e}function DFe(e,{config:t}){e={...e,encoding:ZF(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Mh(n)?n:{type:n};i&&tt(C4e("boxplot"));const u=a.extent??t.boxplot.extent,l=Or("size",a,t),c=a.invalid,f=PFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:S}=PQt(e,u,t),T=kS(m.field),{color:C,size:A,...N}=b,k=Ae=>are(a,g,m,Ae,t.boxplot),O=k(N),P=k(b),$=(gt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",L=k({...N,...A?{size:A}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...C||{value:$}}}}),M=$H([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),U={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},B=f==="min-max"?M:$H([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),V=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:B}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:B}),...O({partName:"ticks",mark:U,positionPrefix:"lower_whisker",extraEncoding:B}),...O({partName:"ticks",mark:U,positionPrefix:"upper_whisker",extraEncoding:B})],D=[...f!=="tukey"?V:[],...P({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...L({partName:"median",mark:{type:"tick",invalid:c,...gt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:D};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,te=`datum["${m.field}"]`,ve={joinaggregate:OFe(m.field),groupby:y},he={transform:[{filter:`(${q} <= ${te}) && (${te} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${T}`},{op:"max",field:m.field,as:`upper_whisker_${T}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${T}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${T}`},...v],groupby:y}],layer:V},{tooltip:ce,...me}=N,{scale:Le,axis:fe}=m,ct=ore(m),ze=Vu(fe,["title"]),Ke=kFe(a,"outliers",t.boxplot,{transform:[{filter:`(${te} < ${q}) || (${te} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...ct!==void 0?{title:ct}:{},...Le!==void 0?{scale:Le}:{},...Ur(ze)?{}:{axis:ze}},...me,...C?{color:C}:{},...S?{tooltip:S}:{}}})[0];let it;const De=[...d,...h,ve];return Ke?it={transform:De,layer:[Ke,he]}:(it=he,it.transform.unshift(...De)),{...o,layer:[it,{transform:p,layer:D}]}}function OFe(e){const t=kS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function PQt(e,t,n){const r=NFe(e,wM),{continuousAxisChannelDef:i,continuousAxis:s}=RFe(e,r,wM),o=i.field,a=kS(o),u=PFe(t),l=[...OFe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=kQt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=AFe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,S=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:S,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const ure="errorbar",DQt=["ticks","rule"],OQt=new JF(ure,$Fe);function $Fe(e,{config:t}){e={...e,encoding:ZF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=MFe(e,ure,t);delete s.size;const c=are(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function $Qt(e,t){const{encoding:n}=e;if(MQt(n))return{orient:NFe(e,t),inputType:"raw"};const r=LQt(n),i=FQt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(cn(a)&&cn(u))throw new Error(`${t} cannot have both x2 and y2`);if(cn(a)){if(Zg(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(cn(u)){if(Zg(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(cn(u)&&!cn(a))throw new Error(`${t} cannot have xError2 without xError`);if(cn(c)&&!cn(l))throw new Error(`${t} cannot have yError2 without yError`);if(cn(a)&&cn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(cn(a)){if(Zg(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(cn(l)){if(Zg(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function MQt(e){return(cn(e.x)||cn(e.y))&&!cn(e.x2)&&!cn(e.y2)&&!cn(e.xError)&&!cn(e.xError2)&&!cn(e.yError)&&!cn(e.yError2)}function LQt(e){return cn(e.x2)||cn(e.y2)}function FQt(e){return cn(e.xError)||cn(e.xError2)||cn(e.yError)||cn(e.yError2)}function MFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Mh(r)?r:{type:r};s&&tt(C4e(t));const{orient:l,inputType:c}=$Qt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=RFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=jQt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:S,[m==="x"?"xError2":"yError2"]:T,...C}=i,{bins:A,timeUnits:N,aggregate:k,groupby:O,encoding:P}=AFe(C,n),$=[...k,...g],L=c!=="raw"?[]:O,M=$H(v,f,P,b);return{transform:[...a.transform??[],...A,...N,...$.length===0?[]:[{aggregate:$,groupby:L}],...y],groupby:L,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:P,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:M}}function jQt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&tt(KKt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:fR(h)},{fieldPrefix:"upper_",titlePrefix:Sge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:Sge(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Qw({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Qw({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Qw({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&tt(YKt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Z1(Z1(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function Sge(e,t,n){return`${fR(e)} ${n} ${t}`}const lre="errorband",BQt=["band","borders"],UQt=new JF(lre,LFe);function LFe(e,{config:t}){e={...e,encoding:ZF(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=MFe(e,lre,t),l=o,c=are(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?tt(mge("interpolate")):l.tension&&tt(mge("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const FFe={};function cre(e,t,n){const r=new JF(e,t);FFe[e]={normalizer:r,parts:n}}function zQt(){return Xe(FFe)}cre(wM,DFe,RQt);cre(ure,$Fe,DQt);cre(lre,LFe,BQt);const VQt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],jFe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},BFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},HQt=Xe(jFe),qQt=Xe(BFe),WQt={header:1,headerRow:1,headerColumn:1,headerFacet:1},UFe=Xe(WQt),zFe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],GQt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},YQt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ud="_vgsid_",KQt={point:{on:"click",fields:[ud],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function fre(e){return e==="legend"||!!(e!=null&&e.legend)}function J9(e){return fre(e)&&gt(e)}function dre(e){return!!(e!=null&&e.select)}function VFe(e){const t=[];for(const n of e||[]){if(dre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function XQt(e){return e5(e)||pre(e)||hre(e)}function hre(e){return"concat"in e}function e5(e){return"vconcat"in e}function pre(e){return"hconcat"in e}function HFe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Lh(e){return gt(e)&&e.step!==void 0}function Tge(e){return e.view||e.width||e.height}const Cge=20,QQt={align:1,bounds:1,center:1,columns:1,spacing:1},JQt=Xe(QQt);function ZQt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(GF(e)&&!vR(e.facet)||hre(e))&&(i.columns=o),e5(e)&&(i.columns=1);for(const a of JQt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=ur(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function MH(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function EM(e,t){const n=xM(e,t);return Lh(n)?n.step:qFe}function xM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return cs(n,{step:e.step})}const qFe=20,eJt={continuousWidth:200,continuousHeight:200,step:qFe},tJt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:eJt,mark:WXt,arc:{},area:{},bar:KXt,circle:{},geoshape:{},image:{},line:{},point:{},rect:XXt,rule:{color:"black"},square:{},text:{color:"black"},tick:QXt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:AXt,projection:{},legend:GQt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:KQt,style:{},title:{},facet:{spacing:Cge},concat:{spacing:Cge},normalizedNumberFormat:".0%"},mp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Age={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Ige={blue:mp[0],orange:mp[1],red:mp[2],teal:mp[3],green:mp[4],yellow:mp[5],purple:mp[6],pink:mp[7],brown:mp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function nJt(e={}){return{signals:[{name:"color",value:gt(e)?{...Ige,...e}:Ige}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function rJt(e){return{signals:[{name:"fontSize",value:gt(e)?{...Age,...e}:Age}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function iJt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function WFe(e){const t=Xe(e||{}),n={};for(const r of t){const i=e[r];n[r]=wR(i)?b4e(i):vl(i)}return n}function sJt(e){const t=Xe(e),n={};for(const r of t)n[r]=WFe(e[r]);return n}const oJt=[...eFe,...xFe,...UFe,"background","padding","legend","lineBreak","scale","style","title","view"];function GFe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=vS({},rn(tJt),n?iJt(n):{},t?nJt(t):{},r?rJt(r):{},s||{});i&&bS(o,"selection",i,!0);const a=Vu(o,oJt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=vl(o[u]));for(const u of eFe)o[u]&&(a[u]=ua(o[u]));for(const u of xFe)o[u]&&(a[u]=WFe(o[u]));for(const u of UFe)o[u]&&(a[u]=ua(o[u]));if(o.legend&&(a.legend=ua(o.legend)),o.scale){const{invalid:u,...l}=o.scale,c=ua(u,{level:1});a.scale={...ua(l),...Xe(c).length>0?{invalid:c}:{}}}return o.style&&(a.style=sJt(o.style)),o.title&&(a.title=ua(o.title)),o.view&&(a.view=ua(o.view)),a}const aJt=new Set(["view",...BXt]),uJt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],lJt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...qXt};function cJt(e){e=rn(e);for(const t of uJt)delete e[t];if(e.axis)for(const t in e.axis)wR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of VQt)delete e.legend[t];if(e.mark){for(const t of yge)delete e.mark[t];e.mark.tooltip&&gt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(VFe(e.params)),delete e.params);for(const t of aJt){for(const r of yge)delete e[t][r];const n=lJt[t];if(n)for(const r of n)delete e[t][r];dJt(e,t)}for(const t of zQt())delete e[t];fJt(e);for(const t in e)gt(e[t])&&Ur(e[t])&&delete e[t];return Ur(e)?void 0:e}function fJt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=v4e(e.title);Ur(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Ur(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Ur(r)?delete e.title:e.title=r}function dJt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Ur(s)||(e.style[n??t]=s),delete e[t]}function t5(e){return"layer"in e}function hJt(e){return"repeat"in e}function pJt(e){return!Be(e.repeat)&&e.repeat.layer}class mre{map(t,n){return GF(t)?this.mapFacet(t,n):hJt(t)?this.mapRepeat(t,n):pre(t)?this.mapHConcat(t,n):e5(t)?this.mapVConcat(t,n):hre(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(t5(t))return this.mapLayer(t,n);if(Zm(t))return this.mapUnit(t,n);throw new Error(Dne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const mJt={zero:1,center:1,normalize:1};function gJt(e){return e in mJt}const yJt=new Set([Q4e,VF,zF,mM,qF,Yne,Kne,HF,J4e,Gne]),vJt=new Set([VF,zF,Q4e]);function w_(e){return nt(e)&&hx(e)==="quantitative"&&!e.bin}function kge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(nt(o)&&nt(a))if(w_(o)&&w_(a)){if(o.stack)return t;if(a.stack)return i;const u=nt(o)&&!!o.aggregate,l=nt(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(w_(o))return t;if(w_(a))return i}else{if(w_(o))return s&&n==="vertical"?void 0:t;if(w_(a))return s&&n==="horizontal"?void 0:i}}function bJt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function YFe(e,t){var m,g;const n=Mh(e)?e:{type:e},r=n.type;if(!yJt.has(r))return null;const i=kge(t,"x",n)||kge(t,"theta",n);if(!i)return null;const s=t[i],o=nt(s)?dt(s,{}):void 0,a=bJt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=nt(y)?dt(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=nt(f)?dt(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=RYt.reduce((y,v)=>{if(v!=="tooltip"&&m1(t,v)){const b=t[v];for(const w of yt(b)){const E=ad(w);if(E.aggregate)continue;const S=dt(E,{});(!S||!l.has(S))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Oy(s.stack)?p=s.stack?"zero":null:p=s.stack:vJt.has(r)&&(p="zero"),!p||!gJt(p)||CFe(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==ko.LINEAR&&s!=null&&s.stack&&tt(qKt(s.scale.type)),cn(t[rp(i)])?(s.stack!==void 0&&tt(HKt(i)),null):(nt(s)&&s.aggregate&&!zYt.has(s.aggregate)&&tt(WKt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:Hy(r),stackBy:h,offset:p}))}function KFe(e,t,n){const r=ua(e),i=Or("orient",r,n);if(r.orient=xJt(r.type,t,i),i!==void 0&&i!==r.orient&&tt(IKt(r.orient,i)),r.type==="bar"&&r.orient){const u=Or("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:YXt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Or("opacity",r,n),o=Or("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=wJt(r.type,t)),Or("cursor",r,n)===void 0&&(r.cursor=_Jt(r,t,n)),r}function _Jt(e,t,n){return t.href||e.href||Or("href",e,n)?"pointer":e.cursor}function wJt(e,t){if($n([qF,Gne,Yne,Kne],e)&&!CFe(t))return .7}function EJt(e,t,{graticule:n}){if(n)return!1;const r=$h("filled",e,t),i=e.type;return cs(r,i!==qF&&i!==HF&&i!==mM)}function xJt(e,t,n){switch(e){case qF:case Yne:case Kne:case J4e:case FXt:case LXt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case VF:if(nt(r)&&(Ao(r.bin)||nt(i)&&i.aggregate&&!r.aggregate))return"vertical";if(nt(i)&&(Ao(i.bin)||nt(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(nt(r)&&r.type===nb&&!oi(r.bin)||yM(r))&&nt(i)&&Ao(i.bin)?"horizontal":"vertical";if(!o)return(nt(i)&&i.type===nb&&!oi(i.bin)||yM(i))&&nt(r)&&Ao(r.bin)?"vertical":"horizontal"}case mM:if(s&&!(nt(r)&&Ao(r.bin))&&o&&!(nt(i)&&Ao(i.bin)))return;case zF:if(o)return nt(i)&&Ao(i.bin)?"horizontal":"vertical";if(s)return nt(r)&&Ao(r.bin)?"vertical":"horizontal";if(e===mM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case HF:case Gne:{const a=wge(r),u=wge(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=nu(r)&&r.type===fx,c=nu(i)&&i.type===fx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function SJt(e){const{point:t,line:n,...r}=e;return Xe(r).length>1?r:r.type}function TJt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Vu(e[t],["point","line"])});return e}function Z9(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?gt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?gt(t.point)?t.point:{}:void 0}function Rge(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class CJt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Zm(t)){const{mark:r,encoding:i}=t,s=Mh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!Z9(s,n[s.type],i);case"area":return!!Z9(s,n[s.type],i)||!!Rge(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=ZF(l,i),d=Mh(a)?a:{type:a},h=Z9(d,i[d.type],f),p=d.type==="area"&&Rge(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:SJt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Vu(f,["shape"])}],g=YFe(KFe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Vu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...ox(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...ox(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:TJt(i)})}}function AJt(e,t){return t?vR(e)?QFe(e,t):XFe(e,t):e}function eB(e,t){return t?QFe(e,t):e}function LH(e,t,n){const r=t[e];if(lQt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};tt(uKt(r.repeat));return}return t}function XFe(e,t){if(e=LH("field",e,t),e!==void 0){if(e===null)return null;if(tre(e)&&tm(e.sort)){const n=LH("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Nge(e,t){if(nt(e))return XFe(e,t);{const n=LH("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Pge(e,t){if(cn(e)){const n=Nge(e,t);if(n)return n;if(YF(e))return{condition:e.condition}}else{if(bR(e)){const n=Nge(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function QFe(e,t){const n={};for(const r in e)if(Ft(e,r)){const i=e[r];if(Be(i))n[r]=i.map(s=>Pge(s,t)).filter(s=>s);else{const s=Pge(i,t);s!==void 0&&(n[r]=s)}}return n}class IJt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Zm(t)){const{encoding:n,mark:r}=t;if(r==="line"||Mh(r)&&r.type==="line")for(const i of AYt){const s=Lb(i),o=n[s];if(n[i]&&(nt(o)&&!Ao(o.bin)||sp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return tt(AKt(!!i.x2,!!i.y2)),r({...t,mark:gt(s)?{...s,type:"rule"}:"rule"},n)}}class kJt extends mre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[NQt,OQt,UQt,new CJt,new IJt]}map(t,n){if(Zm(t)){const r=m1(t.encoding,Zp),i=m1(t.encoding,em),s=m1(t.encoding,NF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=eB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return pJt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ei(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!Be(r)&&t.columns&&(t=Vu(t,["columns"]),tt(fge("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!Be(r)&&r.row||[u?u.row:null],f=!Be(r)&&r.column||[u?u.column:null],d=Be(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(Be(r)?`${Ei(p)}`:(r.row?`row_${Ei(m)}`:"")+(r.column?`column_${Ei(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Vu(b,["data"]))}const h=Be(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return vR(r)&&t.columns&&(t=Vu(t,["columns"]),tt(fge("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Oge({parentProjection:o,projection:i}),l=Dge({parentEncoding:s,encoding:eB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=eB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&tt(TKt([...r?[Zp]:[],...i?[em]:[]]));const o={},a={};for(const u of[Zp,em]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:AJt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Dge({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Oge({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Dge({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Xe(e),...Xe(t)]);for(const s of i){const o=t[s],a=e[s];if(cn(o)){const u={...a,...o};r[s]=u}else bR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||od(a)||Nt(a)||cn(a)||Be(a))&&(r[s]=a)}}else r=t;return!r||Ur(r)?void 0:r}function Oge(e){const{parentProjection:t,projection:n}=e;return t&&n&&tt(pKt({parentProjection:t,projection:n})),n??t}function gre(e){return"filter"in e}function RJt(e){return(e==null?void 0:e.stop)!==void 0}function JFe(e){return"lookup"in e}function NJt(e){return"data"in e}function PJt(e){return"param"in e}function DJt(e){return"pivot"in e}function OJt(e){return"density"in e}function $Jt(e){return"quantile"in e}function MJt(e){return"regression"in e}function LJt(e){return"loess"in e}function FJt(e){return"sample"in e}function jJt(e){return"window"in e}function BJt(e){return"joinaggregate"in e}function UJt(e){return"flatten"in e}function zJt(e){return"calculate"in e}function ZFe(e){return"bin"in e}function VJt(e){return"impute"in e}function HJt(e){return"timeUnit"in e}function qJt(e){return"aggregate"in e}function WJt(e){return"stack"in e}function GJt(e){return"fold"in e}function YJt(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function KJt(e){return e.map(t=>gre(t)?{filter:Kw(t.filter,_Xt)}:t)}class XJt extends mre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=$ge(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=$ge(t,n),t.encoding){const r={};for(const[i,s]of iy(t.encoding))r[i]=e5e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:iy(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of Mo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function $ge(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(gre(s))return{filter:FH(s,t)};if(ZFe(s)&&Fb(s.bin))return{...s,bin:t5e(s.bin)};if(JFe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function e5e(e,t){var r,i;const n=rn(e);if(nt(n)&&Fb(n.bin)&&(n.bin=t5e(n.bin)),Ub(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(YF(n))if(Be(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:FH(s,t)}});else{const{selection:s,param:o,test:a,...u}=e5e(n.condition,t);n.condition=o?n.condition:{...u,test:FH(n.condition,t)}}return n}function t5e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function FH(e,t){const n=r=>Kw(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Kw(e.test||e.filter,r=>r.selection?n(r.selection):r)}class jH extends mre{map(t,n){const r=n.selections??[];if(t.params&&!Zm(t)){const i=[];for(const s of t.params)dre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(vt(a)&&(a===t.name||i.includes(a))||Be(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=jH.prototype[e];jH.prototype[e]=function(n,r){return t.call(this,n,QJt(n,r))}}function QJt(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function n5e(e,t){t===void 0&&(t=GFe(e.config));const n=tZt(e,t),{width:r,height:i}=e,s=nZt(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const JJt=new kJt,ZJt=new XJt,eZt=new jH;function tZt(e,t={}){const n={config:t};return eZt.map(JJt.map(ZJt.map(e,n),n),n)}function Mge(e){return vt(e)?{type:e}:e??{}}function nZt(e,t,n){let{width:r,height:i}=t;const s=Zm(e)||t5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(tt(age("width")),r=void 0),i=="container"&&(tt(age("height")),i=void 0));const a={type:"pad",...o,...n?Mge(n.autosize):{},...Mge(e.autosize)};if(a.type==="fit"&&!s&&(tt(QYt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&tt(uge("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&tt(uge("height")),!Al(a,{type:"pad"}))return a}function rZt(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function iZt(e){return e?`fit-${MF(e)}`:"fit"}const sZt=["background","padding"];function Lge(e,t){const n={};for(const r of sZt)e&&e[r]!==void 0&&(n[r]=vl(e[r]));return t&&(n.params=e.params),n}class eg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new eg(rn(this.explicit),rn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return cs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Xe(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Fd(e){return{explicit:!0,value:e}}function cl(e){return{explicit:!1,value:e}}function r5e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:n5(t,n,r,i)}}function n5(e,t,n,r){return e.explicit&&t.explicit&&tt(LKt(n,r,e.value,t.value)),e}function ay(e,t,n,r,i=n5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Al(e.value,t.value)?e:i(e,t,n,r)}class oZt extends eg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function gx(e){return"url"in e}function EI(e){return"values"in e}function i5e(e){return"name"in e&&!gx(e)&&!EI(e)&&!T0(e)}function T0(e){return e&&(s5e(e)||o5e(e)||yre(e))}function s5e(e){return"sequence"in e}function o5e(e){return"sphere"in e}function yre(e){return"graticule"in e}var Yi;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Yi||(Yi={}));function a5e({invalid:e,isPath:t}){switch(nFe(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function aZt(e){const{marks:t,scales:n}=a5e(e);return t===n?Yi.Main:n==="include-invalid-values"?Yi.PreFilterInvalid:Yi.PostFilterInvalid}function u5e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Vc(i.field),i}function sb(e,t=!0,n=Sa){if(Be(e)){const r=e.map(i=>sb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(jb(e))return n(t?tb(e):uXt(e));return t?n(zr(e)):e}function uZt(e,t){for(const n of Mo(e.component.selection??{})){const r=n.name;let i=`${r}${ly}, ${n.resolve==="global"?"true":`{unit: ${g1(e)}}`}`;for(const s of o5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+FZt,on:[{events:{signal:n.name+ly},update:`modify(${at(n.name+ob)}, ${i})`}]})}return vre(t)}function lZt(e,t){if(e.component.selection&&Xe(e.component.selection).length){const n=at(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:My("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return vre(t)}function cZt(e,t){let n=!1;for(const r of Mo(e.component.selection??{})){const i=r.name,s=at(i+ob);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${C5e}(${s}, ${at(a)}${u}`})}n=!0;for(const a of o5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),vre(t)}function fZt(e,t){const n=[...t],r=g1(e,{escape:!1});for(const i of Mo(e.component.selection??{})){const s={name:i.name+ob};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ud}}]),i.init){const a=i.project.items.map(u5e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[ud]:sb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:sb(u,!1)}))}n.filter(a=>a.name===i.name+ob).length||n.push(s)}return n}function l5e(e,t){for(const n of Mo(e.component.selection??{}))for(const r of o5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function dZt(e,t){for(const n of e.children)Ii(n)&&(t=l5e(n,t));return t}function hZt(e,t,n,r){const i=N5e(e,t.param,t);return{signal:sd(n.get("type"))&&Be(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function vre(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Lr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){tt(fKt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Hu extends Lr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${n4e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function tB(e){return e.as!==void 0}function Fge(e){return`${e}_end`}class _h extends Lr{clone(){return new _h(null,rn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(Bb(u)){if(Ii(n)){const{mark:c,markDef:f,config:d}=n,h=oy({fieldDef:s,markDef:f,config:d});(wI(c)||h)&&(l={timeUnit:fo(u),field:a})}}else l={as:dt(s,{forAs:!0}),field:a,timeUnit:u};if(Ii(n)){const{mark:c,markDef:f,config:d}=n,h=oy({fieldDef:s,markDef:f,config:d});wI(c)&&fs(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[zn(l)]=l)}return i},{});return Ur(r)?null:new _h(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=fo(r),o={...i,timeUnit:s};return new _h(t,{[zn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of iy(this.timeUnits)){const s=tB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(Mo(this.timeUnits).map(t=>tB(t)?t.as:Fge(t.field)))}dependentFields(){return new Set(Mo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${zn(this.timeUnits)}`}assemble(){const t=[];for(const n of Mo(this.timeUnits)){const{rectBandPosition:r}=n,i=fo(n.timeUnit);if(tB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Vc(s),type:"timeunit",...a?{units:BF(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...jge(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=c5e({timeUnit:i,field:o}),u=Fge(o);t.push({type:"formula",expr:a,as:u}),t.push(...jge([o,u],r,i))}}return t}}const r5="offsetted_rect_start",i5="offsetted_rect_end";function c5e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=L4e(r),{part:o,step:a}=U4e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function jge([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Bge([c5e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${r5}`},{type:"formula",expr:Bge([i,s],n+.5),as:`${e}_${i5}`}]}return[]}function Bge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const ER="_tuple_fields";class pZt{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const mZt={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new pZt),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ei(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ei(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?yt(n.value):null;let{fields:d,encodings:h}=gt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(gt(p))for(const m of Xe(p))CYt(m)?(h||(h=[])).push(m):l==="interval"?(tt(aKt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){tt(JYt(p,m.aggregate));continue}else if(!g){tt(cge(p));continue}if(m.timeUnit&&!Bb(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[zn(y)]=y}if(!s[g]){const y=l==="interval"&&ip(p)&&sd(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===ud,u4e(p)?(v.geoChannel=p,v.channel=a4e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else tt(cge(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===ud}f&&(t.init=f.map(p=>i.items.map(m=>gt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Ur(o)||(i.timeUnit=new _h(null,o))},signals:(e,t,n)=>{const r=t.name+ER;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(u5e)})}},nm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!ip(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&tt(nKt),!s||!sd(o)){tt(tKt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Uge(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(C5e)>=0)i.update=`{${r.map(o=>`${at(Vc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${at(Vc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Uge(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function BH(e,t){return`domain(${at(e.scaleName(t))})`}function Uge(e){return e.parent&&MS(e.parent)&&!e.parent.parent}const Jw="_brush",f5e="_scale_trigger",MT="geo_interval_init_tick",d5e="_init",gZt="_center",yZt={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...gt(n.select)?n.select:{}};i.fields=[ud],i.encodings||(i.encodings=n.value?Xe(n.value):[bd,vd]),n.select={type:"interval",...i}}if(t.translate&&!nm.defined(t)){const i=`!event.item || event.item.mark.name !== ${at(t.name+Jw)}`;for(const s of t.events){if(!s.between){tt(`${s} is not an ordered event stream for interval selections.`);continue}const o=yt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+ly,s=Mo(t.project.hasChannel).filter(a=>a.channel===xi||a.channel===mo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(vZt(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=at(e.projectionName()),u=e.projectionName()+gZt,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+d5e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(S=>S.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${at(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${g1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:MT}]:[]],update:b}]})}else{if(!nm.defined(t)){const l=r+f5e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=at(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=sd(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${g1(e)}, fields: ${r+ER}, values`;return n.concat({name:i,...o?{init:`{${u}: ${sb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ii(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===MT).length||n.unshift({name:MT,value:null,on:[{events:"timer{1}",update:`${MT} === null ? {} : ${MT}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${at(t.name+ob)})`;if(nm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Xe(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${g1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Xe(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+Jw}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Jw,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function vZt(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=at(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===xi?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=nm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:sb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+f5e},update:sd(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:sb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===xi?0:1,h=t.name+d5e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const bZt={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+ER,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=Mo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+Jw):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${g1(e)}, `;if(t.project.hasSelectionId)l+=`${ud}: ${o}[${at(ud)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${at(e.vgField(d.channel,{}))}], ${o}[${at(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${at(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+ly,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function PS({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const s=YF(t)&&t.condition;let o=[];s&&(o=yt(s).map(l=>{const c=i(l);if(uQt(l)){const{param:f,empty:d}=l;return{test:R5e(e,{param:f,empty:d}),...c}}else return{test:CM(e,l.test),...c}})),r!==void 0&&o.push(r);const a=i(t);return a!==void 0&&o.push(a),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function bre(e,t="text"){const n=e.encoding[t];return PS({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>s5(r,e.config),invalidValueRef:void 0})}function s5(e,t,n="datum"){if(e){if(od(e))return hi(e.value);if(cn(e)){const{format:r,formatType:i}=bM(e);return Zne({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function h5e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(Be(o))return{tooltip:zge({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return PS({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const c=s5(l,i,a);if(c)return c;if(l===null)return;let f=Or("tooltip",r,i);if(f===!0&&(f={content:"encoding"}),vt(f))return{value:f};if(gt(f))return Nt(f)?f:f.content==="encoding"?zge(n,s,i,t):{signal:a}},invalidValueRef:void 0})}}function p5e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=Lb(f),h=nu(c)?c:{...c,type:e[d].type},p=h.title||rre(h,i),m=yt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(fs(f)){const y=f==="x"?"x2":"y2",v=ad(e[y]);if(Ao(h.bin)&&v){const b=dt(h,{expr:o}),w=dt(v,{expr:o}),{format:E,formatType:S}=bM(h);g=yR(b,w,E,S,i),s[y]=!0}}if((fs(f)||f===ef||f===yd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=bM(h);g=Zne({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=s5(h,i,o).signal),a.push({channel:f,key:m,value:g})}sre(e,(c,f)=>{nt(c)?u(c,f):KF(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function zge(e,t,n,{reactiveGeom:r}={}){const i=p5e(e,t,n,{reactiveGeom:r}),s=iy(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function _Zt(e){const{markDef:t,config:n}=e,r=Or("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...wZt(e),...EZt(e)}}function wZt(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Or("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in YYt?{}:{ariaRoleDescription:{value:t}}}function EZt(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return PS({model:e,channelDef:s,vgChannel:"description",mainRefFn:u=>s5(u,e.config),invalidValueRef:void 0});const o=Or("description",n,r);if(o!=null)return{description:hi(o)};if(r.aria===!1)return{};const a=p5e(t,i,r);if(!Ur(a))return{description:{signal:iy(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function no(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Or(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=hi(u)));const l=i[e],c={markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},f=iFe({...c,scaleChannel:e,channelDef:l});return PS({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:f,mainRefFn:h=>Jne({...c,channel:e,channelDef:h,stack:null,defaultRef:a})})}function m5e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Or("filled",n,i),a=$n(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Or(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Or(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:hi(u)}:{},...l?{stroke:hi(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&tt(I4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...no("color",e,{vgChannel:c,defaultValue:o?u:l}),...no("fill",e,{defaultValue:r.fill?u:void 0}),...no("stroke",e,{defaultValue:r.stroke?l:void 0})}}function xZt(e){const{encoding:t,mark:n}=e,r=t.order;return!Hy(n)&&od(r)?PS({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>hi(i.value),invalidValueRef:void 0}):{}}function yx({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:Jne({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:hi(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ma(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[rp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=yx({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=_re({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&fs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:SZt({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function SZt(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(cn(n)&&i&&t===i.fieldChannel){if(nt(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return gM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return p1(n,r,{suffix:"end"},{offset:s})}return Qne(e)}function _re({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=Lb(n),u=sy(n),l=Or(n,s,o,{vgChannel:u});if(l!==void 0)return $2(n,l);switch(t){case"zeroOrMin":return Vge({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:a,config:o});case"zeroOrMax":return Vge({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:a,config:o});case"mid":return{...e[tl(n)],mult:.5}}}}function Vge({mainChannel:e,config:t,...n}){const r=rFe(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:s,heightSignal:o}=i.zeroOrMax;return{signal:`min(${s},${o})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const TZt={left:"x",center:"xc",right:"x2"},CZt={top:"y",middle:"yc",bottom:"y2"};function g5e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return sy(e);const i=e==="x"?"align":"baseline",s=Or(i,t,n);let o;return Nt(s)?(tt(CKt(i)),o=void 0):o=s,e==="x"?TZt[o||(r==="top"?"left":"center")]:CZt[o||r]}function SM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?y5e(e,t,{defaultPos:n,defaultPos2:r}):ma(e,t,{defaultPos:n})}function y5e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=rp(e),a=tl(e),u=AZt(t,r,o),l=u[a]?g5e(e,i,s):sy(e);return{...ma(e,t,{defaultPos:n,vgChannel:l}),...u}}function AZt(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=Lb(n),l=tl(n),c=sy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?yx({channel:n,markDef:s,encoding:r,model:e}):yx({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=tl(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=IZt({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:vP(n,s)||vP(n,{[n]:hM(n,s,a.style),[l]:hM(l,s,a.style)})||vP(n,a[i])||vP(n,a.mark)||{[c]:_re({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function IZt({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return cn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?p1(t,s,{suffix:"start"},{offset:u}):Qne({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function vP(e,t){const n=tl(e),r=sy(e);if(t[r]!==void 0)return{[r]:$2(e,t[r])};if(t[e]!==void 0)return{[r]:$2(e,t[e])};if(t[n]){const i=t[n];if(rb(i))tt(_Kt(n));else return{[n]:$2(e,i)}}}function uy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=rp(t),a=tl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Or("size",i,n,{vgChannel:a}),p=d4e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return nt(u)&&(oi(u.bin)||Ao(u.bin)||u.timeUnit&&!l)&&!(h&&!rb(h))&&!r[p]&&!ho(f)?NZt({fieldDef:u,fieldDef2:l,channel:t,model:e}):(cn(u)&&ho(f)||m)&&!l?RZt(u,t,e):y5e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function kZt(e,t,n,r,i,s,o){if(rb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=$h("minBandSize",{type:o},r);return{signal:c?`max(${$f(c)}, ${l})`:l}}else i.band!==1&&(tt(RKt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Nt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Vy(u)&&ur(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=cs(u,o==="bar"?l:c);if(Nt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(ur(f))return{signal:`${1-f} * ${e}`}}return{value:EM(r.view,e)-2}}function RZt(e,t,n){var A,N;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=tl(t),f=rp(t),d=d4e(t),h=n.scaleName(d),p=n.getScaleComponent(Ane(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=no("size",n,{vgChannel:c,defaultRef:hi(r.size)}):tt(OKt(r.type)));const y=!!g,v=fFe({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(A=l||p)==null?void 0:A.get("type"),useVlSizeChannel:m});g=g||{[c]:kZt(c,h||u,p||l,s,v,!!e,r.type)};const b=((N=l||p)==null?void 0:N.get("type"))==="band"&&rb(v)&&!y?"top":"middle",w=g5e(t,r,s,b),E=w==="xc"||w==="yc",{offset:S,offsetType:T}=yx({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),C=Qne({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:S,defaultRef:_re({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?T==="encoding"?0:.5:Nt(v)?{signal:`(1-${v})/2`}:rb(v)?(1-v.band)/2:0});if(c)return{[w]:C,...g};{const k=sy(f),O=g[c],P=S?{...O,offset:S}:O;return{[w]:C,[k]:Be(C)?[C[0],{...C[1],offset:P}]:{...C,offset:P}}}}function Hge(e,t,n,r,i,s,o){if(o4e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Nt(n)||Nt(i)||Nt(r)||s){const l=$f(n),c=$f(i),f=$f(r),d=$f(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function NZt({fieldDef:e,fieldDef2:t,channel:n,model:r}){var N;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=fFe({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(N=r.component.axes[n])==null?void 0:N[0],h=(d==null?void 0:d.get("translate"))??.5,p=fs(n)?Or("binSpacing",s,i)??0:0,m=rp(n),g=sy(n),y=sy(m),v=$h("minBandSize",s,i),{offset:b}=yx({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=yx({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=nQt({fieldDef:e,scaleName:u}),S=Hge(n,p,c,h,b,v,E),T=Hge(m,p,c,h,w??b,v,E),C=Nt(f)?{signal:`(1-${f.signal})/2`}:rb(f)?(1-f.band)/2:.5,A=oy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(oi(e.bin)||e.timeUnit){const k=e.timeUnit&&A!==.5;return{[y]:qge({fieldDef:e,scaleName:u,bandPosition:C,offset:T,useRectOffsetField:k}),[g]:qge({fieldDef:e,scaleName:u,bandPosition:Nt(C)?{signal:`1-${C.signal}`}:1-C,offset:S,useRectOffsetField:k})}}else if(Ao(e.bin)){const k=p1(e,u,{},{offset:T});if(nt(t))return{[y]:k,[g]:p1(t,u,{},{offset:S})};if(Fb(e.bin)&&e.bin.step)return{[y]:k,[g]:{signal:`scale("${u}", ${dt(e,{expr:"datum"})} + ${e.bin.step})`,offset:S}}}tt(N4e(m))}function qge({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return gM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:r5,endSuffix:i5}:{}})}const PZt=new Set(["aria","width","height"]);function tf(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?m5e(e):{};return{...DZt(e.markDef,t),...Wge("fill",n),...Wge("stroke",r),...no("opacity",e),...no("fillOpacity",e),...no("strokeOpacity",e),...no("strokeWidth",e),...no("strokeDash",e),...xZt(e),...h5e(e),...bre(e,"href"),..._Zt(e)}}function Wge(e,t){return t?{[e]:t}:{}}function DZt(e,t){return GYt.reduce((n,r)=>(!PZt.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=hi(e[r])),n),{})}function wre(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,s)=>{var l;let o;if(!ip(s)||!(o=e.getScaleType(s)))return;const a=LF(i.aggregate),u=Xne({scaleChannel:s,markDef:n,config:t,scaleType:o,isCountAggregate:a});if(ZXt(u)){const c=e.vgField(s,{expr:"datum",binSuffix:(l=e.stack)!=null&&l.impute?"mid":void 0});c&&r.add(c)}}),r.size>0)return{defined:{signal:[...r].map(s=>UF(s,!0)).join(" && ")}}}function Gge(e,t){if(t!==void 0)return{[e]:hi(t)}}const nB="voronoi",v5e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(nB)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(Hy(s))return tt(ZYt(s)),n;const o={name:e.getName(nB),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...h5e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(nB)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},b5e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!fre(e.bind),parse:(e,t,n)=>A5e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=v5e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ei(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:sb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${at(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+ly)[0],o=r+ER,a=i.items.map(l=>Ei(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},TM="_toggle",_5e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+TM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+ly,r=t.name+TM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${g1(e)}}, `)+`${r} ? ${n} : null`}},OZt={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=vt(t.clear)?My(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(b5e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ei(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+ly);r(i,"null"),_5e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+TM),r(i,"false"))}return n}},w5e={defined:e=>{const t=e.resolve==="global"&&e.bind&&fre(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ud;return t&&!n&&tt(rKt),t&&n},parse:(e,t,n)=>{const r=rn(n);if(r.select=vt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},A5e(t,r),gt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=yt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=J9(t.bind)?t.bind.legend:"click",s=vt(i)?My(i,"view"):yt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=J9(t.bind)&&t.bind.legend,s=o=>a=>{const u=rn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ei(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+ly),o=r+ER,a=i.items.filter(d=>d.hasLegend).map(d=>Ei(`${r}_${Ei(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+TM),f=J9(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function $Zt(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of Mo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&w5e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const E5e="_translate_anchor",x5e="_translate_delta",MZt={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+E5e,{x:o,y:a}=t.project.hasChannel;let u=My(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+Jw,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?BH(e,xi):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?BH(e,mo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+x5e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Yge(e,t,o,"width",n),a!==void 0&&Yge(e,t,a,"height",n),n}};function Yge(e,t,n,r,i){const s=t.name,o=s+E5e,a=s+x5e,u=n.channel,l=nm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===xi?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const S5e="_zoom_anchor",T5e="_zoom_delta",LZt={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=nm.defined(t),s=r+T5e,{x:o,y:a}=t.project.hasChannel,u=at(e.scaleName(xi)),l=at(e.scaleName(mo));let c=My(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+Jw,f))),n.push({name:r+S5e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Kge(e,t,o,"width",n),a!==void 0&&Kge(e,t,a,"height",n),n}};function Kge(e,t,n,r,i){const s=t.name,o=n.channel,a=nm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?BH(e,o):u.name,h=s+T5e,p=`${s}${S5e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const ob="_store",ly="_tuple",FZt="_modify",C5e="vlSelectionResolve",o5=[bZt,yZt,mZt,_5e,b5e,nm,w5e,OZt,MZt,LZt,v5e];function jZt(e){let t=e.parent;for(;t&&!Pl(t);)t=t.parent;return t}function g1(e,{escape:t}={escape:!0}){let n=t?at(e.name):e.name;const r=jZt(e);if(r){const{facet:i}=r;for(const s of xc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${at(r.vgField(s))}])`)}return n}function Ere(e){return Mo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function A5e(e,t){(vt(t.select)||!t.select.on)&&delete e.events,(vt(t.select)||!t.select.clear)&&delete e.clear,(vt(t.select)||!t.select.toggle)&&delete e.toggle}function UH(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...UH(e.object)),t.push(...UH(e.property))),t)}function I5e(e){return e.object.type==="MemberExpression"?I5e(e.object):e.object.name==="datum"}function k5e(e){const t=Vte(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&I5e(r)&&n.add(UH(r).slice(1).join("."))}),n}class DS extends Lr{clone(){return new DS(null,this.model,rn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=CM(this.model,this.filter,this),this._dependentFields=k5e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function BZt(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ei(i.name),o=i.select,a=vt(o)?o:o.type,u=gt(o)?rn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=rn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:vt(u.on)?My(u.on,"scope"):yt(rn(u.on))},f=rn(i);for(const d of o5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function R5e(e,t,n,r="datum"){const i=vt(t)?t:t.param,s=Ei(i),o=at(s+ob);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${at(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function N5e(e,t,n){const r=Ei(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&tt(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${at(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,tt((a.length?"Multiple ":"No ")+`matching ${at(i)} encoding found for selection ${at(n.param)}. Using "field": ${at(s)}.`)):s=a[0].field}return`${o.name}[${at(Vc(s))}]`}function UZt(e,t){for(const[n,r]of iy(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Hu(new DS(t,e,{param:n}),i,Yi.Lookup,e.component.data.outputNodeRefCounts)}}function CM(e,t,n){return O2(t,r=>vt(r)?r:yXt(r)?R5e(e,r,n):V4e(r))}function zZt(e,t){if(e)return Be(e)&&!Cg(e)?e.map(n=>rre(n,t)).join(", "):e}function rB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function $C(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=EQt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(wR(m)){const{condition:g,...y}=m,v=yt(g),b=Ege[h];if(b){const{vgProp:w,part:E}=b,S=[...v.map(T=>{const{test:C,...A}=T;return{test:CM(null,C),...A}}),y];rB(c,E,w,S),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:S,...T}=E;return`${CM(null,S)} ? ${oge(T)} : `}).join("")+oge(y)};c[h]=w}}else if(Nt(m)){const g=Ege[h];if(g){const{vgProp:y,part:v}=g;rB(c,v,y,m),delete c[h]}}$n(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Ur(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:cs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Nt(c.encode.labels.update.text)&&(p=Z1(a,"datum.label",c.encode.labels.update.text.signal)),rB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of wFe)e.hasAxisPart(p)||delete c.encode[p];Ur(c.encode)&&delete c.encode}const h=zZt(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:cs(l,0)}}}}function P5e(e){const{axes:t}=e.component,n=[];for(const r of Jm)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function VZt(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>$C(i,"grid",t)),...r.map(i=>$C(i,"grid",t)),...n.map(i=>$C(i,"main",t)),...r.map(i=>$C(i,"main",t))].filter(i=>i)}function Xge(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Xe(o),...Xe(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${$f(o[c])} : ${$f(a[c])}`};return l}return t[i]})])}function HZt(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:G4e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Nt(n)?"axisOrient":`axis${fR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Xge(a,r,e,n),vgAxisConfig:Xge(u,r,e,n),axisConfigStyle:qZt([...u,...a],r)}}function qZt(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=yt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function zH(e,t,n,r={}){var s;const i=w4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Qge={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??WZt(n,e),gridScale:({model:e,channel:t})=>GZt(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||O5e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||D5e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??KZt(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??XZt(t.type,n,nt(t)&&!!t.timeUnit,nt(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??JZt({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:ZZt,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=$5e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return x4e(i?[_ge(i)]:[],nt(o)?[_ge(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>een(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??ten(n,t)};function WZt(e,t){return!ho(e)&&nt(t)&&!oi(t==null?void 0:t.bin)&&!Ao(t==null?void 0:t.bin)}function GZt(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function YZt(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Nt(s)?s:_I(s);{const{configValue:o}=zH("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?_I(o):n===xi&&$n([Wne,qne],e.type)&&!(nt(e)&&e.timeUnit)?270:void 0}}function VH(e){return`(((${e.signal} % 360) + 360) % 360)`}function D5e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Nt(e)){const i=VH(e),s=Nt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Nt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Nt(e)){const i=VH(e),s=Nt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Nt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function O5e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Nt(e)){const o=VH(e),a=Nt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Nt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function KZt(e,t){if(t==="x"&&$n(["quantitative","temporal"],e))return!0}function XZt(e,t,n,r){if(n&&!gt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function QZt(e){return e==="x"?"bottom":"left"}function JZt({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!ho(t)&&t!=="log"){if(nt(e)){if(oi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&$n(["month","hours","day","quarter"],(i=fo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function ZZt({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(nt(t)){const{timeUnit:n}=t;if(n){const r=B4e(n);if(r)return{signal:r}}}}function $5e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return S4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function een(e,t){const n=e.values;if(Be(n))return _Fe(t,n);if(Nt(n))return n}function ten(e,t){return e==="rect"&&vM(t)?1:0}class vx extends Lr{clone(){return new vx(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=k5e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Ub(r)&&cFe(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${V4e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new vx(t,{calculate:u,as:bx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${zn(this.transform)}`}}function bx(e,t,n){return dt(e,{prefix:t,suffix:"sort_index",...n})}function a5(e,t){return $n(["top","bottom"],t)?"column":$n(["left","right"],t)||e==="row"?"row":"column"}function _x(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return cs((t||{})[e],i[e],n.header[e])}function u5(e,t,n,r){const i={};for(const s of e){const o=_x(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const xre=["row","column"],Sre=["header","footer"];function nen(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=u5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=a5(t,a),l=_I(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...L5e(l,u),...M5e(u,l,s),...F5e(r,i,t,HQt,jFe)}}}function M5e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=O5e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function L5e(e,t){const n=D5e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function ren(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Sre)if(n[i])for(const s of n[i]){const o=sen(e,t,i,n,s);o!=null&&r.push(o)}return r}function ien(e,t){const{sort:n}=e;return tm(n)?{field:dt(n,{expr:"datum"}),order:n.order??"ascending"}:Be(n)?{field:bx(e,t,{expr:"datum"}),order:"ascending"}:{field:dt(e,{expr:"datum"}),order:n??"ascending"}}function HH(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=u5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Zne({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=a5(t,a);return{text:{signal:u?Z1(Z1(u,"datum.label",l),"datum.value",dt(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...L5e(s,c),...M5e(c,s,o),...F5e(n,e,t,qQt,BFe)}}function sen(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=u5(["labelOrient"],o.header,a,t);(t==="row"&&!$n(["top","bottom"],f)||t==="column"&&!$n(["left","right"],f))&&(s=HH(o,t,a))}const u=Pl(e)&&!vR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:ien(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const oen={column:{start:0,end:1},row:{start:1,end:0}};function aen(e,t){return oen[t][e]}function uen(e,t){const n={};for(const r of xc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=u5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=a5(r,o),u=aen(s,a);u!==void 0&&(n[a]=u)}}return Ur(n)?void 0:n}function F5e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=_x(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function Tre(e){return[...bP(e,"width"),...bP(e,"height"),...bP(e,"childWidth"),...bP(e,"childHeight")]}function bP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(ho(o)&&Vy(a)){const u=e.scaleName(n);return Pl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Jge(u,a)]:[Jge(u,a),{name:i,update:j5e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=MH(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Jge(e,t){const n=`${e}_step`;return Nt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function j5e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=cs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${$f(o)}, ${$f(s)}) * ${e}_step`}function B5e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function U5e(e,t){return Xe(e).reduce((n,r)=>({...n,...PS({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>hi(i.value),invalidValueRef:void 0})}),{})}function z5e(e,t){if(Pl(t))return e==="theta"?"independent":"shared";if(MS(t))return"shared";if(Pre(t))return fs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Cre(e,t){const n=e.scale[t],r=fs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&tt(jKt(t)),"independent"):e[r][t]||"shared"}const len={...YQt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},V5e=Xe(len);class cen extends eg{}const Zge={symbols:fen,gradient:den,labels:hen,entries:pen};function fen(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...XYt({},n,VXt),...m5e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?H5e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===Zu)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=hi(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=hi(m??1));else if(Be(f.fill)){const g=qH(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=hi(g))}}if(f.stroke){if(r==="stroke"||!c&&r===Zu)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(Be(f.stroke)){const g=cs(qH(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==Qm){const g=nt(t)&&W5e(n,i,t);g?f.opacity=[{test:g,...hi(m??1)},hi(u.legend.unselectedOpacity)]:m&&(f.opacity=hi(m))}return f={...f,...e},Ur(f)?void 0:f}function den(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?H5e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=hi(l)),a={...a,...e},Ur(a)?void 0:a}function hen(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=nt(t)?W5e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;ib(c)?f=Mf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Mf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&nt(t)&&t.timeUnit===void 0&&(f=Mf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Ur(d)?void 0:d}function pen(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function H5e(e){return q5e(e,(t,n)=>Math.max(t,n.value))}function qH(e){return q5e(e,(t,n)=>cs(t,n.value))}function q5e(e,t){if(cQt(e))return yt(e.condition).reduce(t,e.value);if(od(e))return e.value}function W5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=at(n.field);return r.map(s=>`(!length(data(${at(Ei(s)+ob)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const e0e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return aFe(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return uFe(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??wen(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Een(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??gen(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Qw(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Xw(n)&&rh(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>men(t,e)};function men(e,t){const n=e.values;if(Be(n))return _Fe(t,n);if(Nt(n))return n}function gen(e,t,n,r){if(t!=="shape"){const i=qH(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function yen(e){const{legend:t}=e;return cs(t.type,ven(e))}function ven({channel:e,timeUnit:t,scaleType:n}){if(Xw(e)){if($n(["quarter","month","day"],t))return"symbol";if(rh(n))return"gradient"}return"symbol"}function ben({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??_en(n,t)}function _en(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function wen({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(rh(i))return n==="horizontal"?r==="top"||r==="bottom"?t0e(t,"width",o,s):o:t0e(t,"height",u,a)}function t0e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Een(e){if($n(["quantile","threshold","log","symlog"],e))return"greedy"}function G5e(e){const t=Ii(e)?xen(e):Aen(e);return e.component.legends=t,t}function xen(e){const{encoding:t}=e,n={};for(const r of[Zu,...zFe]){const i=js(t[r]);!i||!e.getScaleComponent(r)||r===el&&nt(i)&&i.type===NS||(n[r]=Cen(e,r))}return n}function Sen(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Ten(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Cen(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new cen({},Sen(e,t));$Zt(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=js(i[t]),f=nt(c)?(w=fo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=yen({legend:n,channel:t,timeUnit:f,scaleType:l}),p=ben({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of V5e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const S=E in e0e?e0e[E](m):n[E];if(S!==void 0){const T=Ten(S,E,n,e.fieldDef(t));(T||s.legend[E]===void 0)&&a.set(E,S,T)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const S=U5e(g[E]??{},e),T=E in Zge?Zge[E](S,b):S;T!==void 0&&!Ur(T)&&(v[E]={...y!=null&&y.length&&nt(c)?{name:`${Ei(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:T})}return Ur(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Aen(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){G5e(r);for(const i of Xe(r.component.legends))n.legend[i]=Cre(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=Y5e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Xe(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function Y5e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of V5e){const c=ay(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return Ien(f,d);case"title":return T4e(f,d);case"type":return i=!0,cl("symbol")}return n5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&dM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&dM(e.explicit,["encode","gradient"])),e}function Ien(e,t){return t.value==="circle"?t:e}function ken(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function K5e(e){const t=e.component.legends,n={};for(const i of Xe(t)){const s=e.getScaleComponent(i),o=zr(s.get("domains"));if(n[o])for(const a of n[o])Y5e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return Mo(n).flat().map(i=>Ren(i,e.config)).filter(i=>i!==void 0)}function Ren(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of zFe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Nt(s.encode.labels.update.text)&&(l=Z1(r,"datum.label",s.encode.labels.update.text.signal)),ken(s,"labels","text",{signal:l})}return s}}function Nen(e){return MS(e)||Pre(e)?Pen(e):X5e(e)}function Pen(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),X5e(e))}function X5e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Nt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return $n(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Den=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Q5e extends eg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function J5e(e){e.component.projection=Ii(e)?Oen(e):Len(e)}function Oen(e){if(e.hasProjection){const t=ua(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?$en(e):void 0,s=new Q5e(e.projectionName(!0),{...ua(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function $en(e){const t=[],{encoding:n}=e;for(const r of[[bd,vd],[Hc,_d]])(js(n[r[0]])||js(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(el)&&e.typedFieldDef(el).type===NS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Yi.Main)),t}function Men(e,t){const n=_ne(Den,i=>!!(!Ft(e.explicit,i)&&!Ft(t.explicit,i)||Ft(e.explicit,i)&&Ft(t.explicit,i)&&Al(e.get(i),t.get(i))));if(Al(e.size,t.size)){if(n)return e;if(Al(e.explicit,{}))return t;if(Al(t.explicit,{}))return e}return null}function Len(e){if(e.children.length===0)return;let t;for(const r of e.children)J5e(r);const n=_ne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Men(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new Q5e(r,t.specifiedProjection,t.size,rn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Fen(e,t,n,r){if(_R(t,n)){const i=Ii(e)?e.axis(n)??e.legend(n)??{}:{},s=dt(t,{expr:"datum"}),o=dt(t,{expr:"datum",binSuffix:"end"});return{formulaAs:dt(t,{binSuffix:"range",forAs:!0}),formula:yR(s,o,i.format,i.formatType,r)}}return{}}function Z5e(e,t){return`${y4e(e)}_${t}`}function jen(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Are(e,t,n){const r=XF(n,void 0)??{},i=Z5e(r,t);return e.getName(`${i}_bins`)}function Ben(e){return"as"in e}function n0e(e,t,n){let r,i;Ben(e)?r=vt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[dt(e,{forAs:!0}),dt(e,{binSuffix:"end",forAs:!0})];const s={...XF(t,void 0)},o=Z5e(s,e.field),{signal:a,extentSignal:u}=jen(n,o);if(FF(s.extent)){const c=s.extent;i=N5e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class wh extends Lr{clone(){return new wh(null,rn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(nu(s)&&oi(s.bin)){const{key:a,binComponent:u}=n0e(s,s.bin,n);i[a]={...u,...i[a],...Fen(n,s,o,n.config)}}return i},{});return Ur(r)?null:new wh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=n0e(n,n.bin,r);return new wh(t,{[i]:s})}merge(t,n){for(const r of Xe(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=nh([...this.bins[r].as,...t.bins[r].as],zn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(Mo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Mo(this.bins).map(t=>t.field))}hash(){return`Bin ${zn(this.bins)}`}assemble(){return Mo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Vc(t.field),as:r,signal:t.signal,...FF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Vc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:dt({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function Uen(e,t,n,r){var s;const i=Ii(r)?r.encoding[rp(t)]:void 0;if(nu(n)&&Ii(r)&&dFe(n,i,r.markDef,r.config)){e.add(dt(n,{})),e.add(dt(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=oy({fieldDef:n,markDef:a,config:u});wI(o)&&l!==.5&&fs(t)&&(e.add(dt(n,{suffix:r5})),e.add(dt(n,{suffix:i5}))),n.bin&&_R(n,t)&&e.add(dt(n,{binSuffix:"range"}))}else if(u4e(t)){const o=a4e(t);e.add(r.getName(o))}else e.add(dt(n));return Ub(n)&&RXt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function zen(e,t){for(const n of Xe(t)){const r=t[n];for(const i of Xe(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Yf extends Lr{clone(){return new Yf(null,new Set(this.dimensions),rn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([dt(o,{forAs:!0})]);else{if(km(u)||zy(u)){const c=km(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([dt({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([dt(o,{forAs:!0})]);ip(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([dt({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([dt({field:l,aggregate:"max"},{forAs:!0})]))}else Uen(s,a,o,n)}),s.size+Xe(i).length===0)?null:new Yf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||dt(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||dt(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Xe(i).length===0?null:new Yf(t,r,i)}merge(t){return Z6e(this.dimensions,t.dimensions)?(zen(this.measures,t.measures),!0):(tXt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Xe(this.measures)])}producedFields(){const t=new Set;for(const n of Xe(this.measures))for(const r of Xe(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${zn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Xe(this.measures))for(const o of Xe(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Vc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Vc),ops:t,fields:n,as:r}}}class OS extends Lr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of xc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[dt(o),...oi(a)?[dt(o,{binSuffix:"end"})]:[]],...tm(u)?{sortField:u}:Be(u)?{sortIndexField:bx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of xc)this[n]&&(t+=` ${n.charAt(0)}:${zn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of xc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of xc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Jm){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(ho(i)&&Vy(s)){const o=l5(this.childModel,n),a=Nre(o);a?t[n]=a:tt(One(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=WF,field:f}=u;s.push(f),o.push(c),a.push(dt(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of xre){for(const c of Sre){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[em,Zp])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function r0e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Ven(e,t){const n=xne(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=r0e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=r0e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return tt(cKt(t)),null}function Hen(e){const t={};return YD(e.filter,n=>{if(z4e(n)){let r=null;Fne(n)?r=vl(n.equal):Bne(n)?r=vl(n.lte):jne(n)?r=vl(n.lt):Une(n)?r=vl(n.gt):zne(n)?r=vl(n.gte):Vne(n)?r=n.range[0]:Hne(n)&&(r=(n.oneOf??n.in)[0]),r&&(jb(r)?t[n.field]="date":ur(r)?t[n.field]="number":vt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function qen(e){const t={};function n(r){mx(r)?t[r.field]="date":r.type==="quantitative"&&UYt(r.aggregate)?t[r.field]="number":ux(r.field)>1?r.field in t||(t[r.field]="flatten"):Ub(r)&&tm(r.sort)&&ux(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ii(e)||Pl(e))&&e.forEachFieldDef((r,i)=>{if(nu(r))n(r);else{const s=Lb(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Ii(e)){const{mark:r,markDef:i,encoding:s}=e;if(Hy(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];nt(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Wen(e){const t={};if(Ii(e)&&e.component.selection)for(const n of Xe(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&ux(i.field)>1&&(t[i.field]="flatten")}return t}class ga extends Lr{clone(){return new ga(null,rn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${zn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!T0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Xe(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:tt(dge(a,r[a],u.value)))}for(const a of Xe(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:tt(dge(a,n[a],u)))}const s=new eg(n,r);i.copyAll(s);const o={};for(const a of Xe(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Xe(o).length===0||i.parseNothing?null:new ga(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Xe(this._parse)){const r=this._parse[n];ux(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Xe(this._parse))}dependentFields(){return new Set(Xe(this._parse))}assembleTransforms(t=!1){return Xe(this._parse).filter(n=>t?ux(n)>1:!0).map(n=>{const r=Ven(n,this._parse[n]);return r?{type:"formula",expr:r,as:kS(n)}:null}).filter(n=>n!==null)}}class cy extends Lr{clone(){return new cy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ud])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ud}}}class xR extends Lr{clone(){return new xR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${zn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class SR extends Lr{clone(){return new SR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${zn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class ab extends Lr{constructor(t){super(null),t??(t={name:"source"});let n;if(T0(t)||(n=t.format?{...Vu(t.format,["parse"])}:{}),EI(t))this._data={values:t.values};else if(gx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];$n(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else o5e(t)?this._data={values:[{type:"Sphere"}]}:(i5e(t)||T0(t))&&(this._data={});this._generator=T0(t),t.name&&(this._name=t.name),n&&!Ur(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var i0e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Gen=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},MC;function Ire(e){return e instanceof ab||e instanceof xR||e instanceof SR}class kre{constructor(){MC.set(this,void 0),i0e(this,MC,!1,"f")}setModified(){i0e(this,MC,!0,"f")}get modifiedFlag(){return Gen(this,MC,"f")}}MC=new WeakMap;class zb extends kre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Rre extends kre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Yen extends Rre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Xe(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Ken extends Rre{constructor(t){super(),this.requiresSelectionId=t&&Ere(t)}run(t){t instanceof cy&&(this.requiresSelectionId&&(Ire(t.parent)||t.parent instanceof Yf||t.parent instanceof ga)||(this.setModified(),t.remove()))}}class Xen extends kre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof _h&&(r=t.producedFields(),wne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Qen extends Rre{constructor(){super()}run(t){t instanceof Hu&&!t.isRequired()&&(this.setModified(),t.remove())}}class Jen extends zb{run(t){if(!Ire(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ga)if(t instanceof ga)this.setModified(),t.merge(n);else{if(Ene(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class Zen extends zb{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ga);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Xe(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Ur(i)){this.setModified();const o=new ga(t,i);for(const a of n){if(a instanceof ga)for(const u of Xe(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ga&&Xe(a.parse).length===0&&a.remove()}}}}}class etn extends zb{run(t){t instanceof Hu||t.numChildren()>0||t instanceof OS||t instanceof ab||(this.setModified(),t.remove())}}class ttn extends zb{run(t){const n=t.children.filter(i=>i instanceof _h),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class ntn extends zb{run(t){const n=t.children.filter(i=>i instanceof Yf),r={};for(const i of n){const s=zn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Xe(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class rtn extends zb{constructor(t){super(),this.model=t}run(t){const n=!(Ire(t)||t instanceof DS||t instanceof ga||t instanceof cy),r=[],i=[];for(const s of t.children)s instanceof wh&&(n&&!Ene(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof wh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class itn extends zb{run(t){const n=[...t.children];if(!ax(n,o=>o instanceof Hu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Hu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Hu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class Vb extends Lr{clone(){return new Vb(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=nh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??dt(t)}hash(){return`JoinAggregateTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class wx extends Lr{clone(){return new wx(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:s}=n,{marks:o,scales:a}=r;if(o==="include-invalid-values"&&a==="include-invalid-values")return null;const u=n.reduceFieldDef((l,c,f)=>{const d=ip(f)&&n.getScaleComponent(f);if(d){const h=d.get("type"),{aggregate:p}=c,m=Xne({scaleChannel:f,markDef:s,config:i,scaleType:h,isCountAggregate:LF(p)});m!=="show"&&m!=="always-valid"&&(l[c.field]=c)}return l},{});return Xe(u).length?new wx(t,u):null}dependentFields(){return new Set(Xe(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${zn(this.filter)}`}assemble(){const t=Xe(this.filter).reduce((n,r)=>{const i=this.filter[r],s=dt(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (${WH(s)}))`):i.type==="quantitative"&&n.push(WH(s))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function WH(e){return`isValid(${e}) && isFinite(+${e})`}function stn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=dt(r);return i&&t.push(i),t},[])}function otn(e){return Be(e)&&e.every(t=>vt(t))&&e.length>1}class rm extends Lr{clone(){return new rm(null,rn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(cs(f.order,"ascending"));const l={field:a,order:u};let c;return otn(s)?c=s:vt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new rm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return ad(p)}).filter(h=>!!h),c=stn(n),f=n.encoding.order;let d;if(Be(f)||nt(f))d=E4e(f);else{const h=hFe(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new rm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${zn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[dt(i,{binSuffix:"mid"})]:[dt(i,{}),dt(i,{binSuffix:"end"})]:[dt(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=dt(c,{expr:"datum"}),p=dt(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${WH(h)} ? ${f}*${h}+${1-f}*${p} : ${h}`,as:dt(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:dt(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class $S extends Lr{clone(){return new $S(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=nh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??dt(t)}hash(){return`WindowTransform ${zn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Pne(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function atn(e){function t(n){if(!(n instanceof OS)){const r=n.clone();if(r instanceof Hu){const i=YH+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Yf||r instanceof rm||r instanceof $S||r instanceof Vb)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function GH(e){if(e instanceof OS)if(e.numChildren()===1&&!(e.children[0]instanceof Hu)){const t=e.children[0];(t instanceof Yf||t instanceof rm||t instanceof $S||t instanceof Vb)&&t.addDimensions(e.fields),t.swapWithParent(),GH(e)}else{const t=e.model.component.data.main;e8e(t);const n=atn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(GH)}function e8e(e){if(e instanceof Hu&&e.type===Yi.Main&&e.numChildren()===1){const t=e.children[0];t instanceof OS||(t.swapWithParent(),e8e(e))}}const YH="scale_",_P=5;function KH(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!KH(t.children))return!1}return!0}function uf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function s0e(e,t,n){let r=e.sources,i=!1;return i=uf(new Qen,r)||i,i=uf(new Ken(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=uf(new etn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=uf(new Jen,r)||i,i=uf(new rtn(t),r)||i,i=uf(new Xen,r)||i,i=uf(new Zen,r)||i,i=uf(new ntn,r)||i,i=uf(new ttn,r)||i,i=uf(new Yen,r)||i,i=uf(new itn,r)||i),e.sources=r,i}function utn(e,t){KH(e.sources);let n=0,r=0;for(let i=0;i<_P&&s0e(e,t,!0);i++)n++;e.sources.map(GH);for(let i=0;i<_P&&s0e(e,t,!1);i++)r++;KH(e.sources),Math.max(n,r)===_P&&tt(`Maximum optimization runs(${_P}) reached.`)}class eo{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new eo(()=>t(n))}}function t8e(e){Ii(e)?ltn(e):ctn(e)}function ltn(e){const t=e.component.scales;for(const n of Xe(t)){const r=dtn(e,n);if(t[n].setWithExplicit("domains",r),ptn(e,n),e.component.data.isFaceted){let s=e;for(;!Pl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Vp(a)&&(a.data=YH+a.data.replace(YH,""))}}}function ctn(e){for(const n of e.children)t8e(n);const t=e.component.scales;for(const n of Xe(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=ay(r,o.getWithExplicit("domains"),"domains","scale",XH);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&tt(oKt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function ftn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=o0e(t,n);if(!i){tt(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=o0e(t,n);if(i)return"unaggregated"}return e}function dtn(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=ftn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&js(r.x2)?js(r.x)?ay(yg(n,i,e,"x"),yg(n,i,e,"x2"),"domain","scale",XH):yg(n,i,e,"x2"):t==="y"&&js(r.y2)?js(r.y)?ay(yg(n,i,e,"y"),yg(n,i,e,"y2"),"domain","scale",XH):yg(n,i,e,"y2"):yg(n,i,e,t)}function htn(e,t,n){return e.map(r=>({signal:`{data: ${QF(r,{timeUnit:n,type:t})}}`}))}function iB(e,t,n){var i;const r=(i=fo(n))==null?void 0:i.unit;return t==="temporal"||r?htn(e,t,r):[e]}function yg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=js(i[r]),{type:c}=l,f=l.timeUnit,d=aZt({invalid:$h("invalid",s,a),isPath:Hy(o)});if(kXt(t)){const m=yg(e,void 0,n,r),g=iB(t.unionWith,c,f);return Fd([...g,...m.value])}else{if(Nt(t))return Fd([t]);if(t&&t!=="unaggregated"&&!K4e(t))return Fd(iB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return cl([[0,1]]);const m=n.requestDataName(d);return cl([{data:m,field:n.vgField(r,{suffix:"start"})},{data:m,field:n.vgField(r,{suffix:"end"})}])}const h=ip(r)&&nt(l)?mtn(n,r,e):void 0;if(sp(l)){const m=iB([l.datum],c,f);return cl(m)}const p=l;if(t==="unaggregated"){const{field:m}=l;return cl([{data:n.requestDataName(d),field:dt({field:m,aggregate:"min"})},{data:n.requestDataName(d),field:dt({field:m,aggregate:"max"})}])}else if(oi(p.bin)){if(ho(e))return cl(e==="bin-ordinal"?[]:[{data:bI(h)?n.requestDataName(d):n.requestDataName(Yi.Raw),field:n.vgField(r,_R(p,r)?{binSuffix:"range"}:{}),sort:h===!0||!gt(h)?{field:n.vgField(r,{}),op:"min"}:h}]);{const{bin:m}=p;if(oi(m)){const g=Are(n,p.field,m);return cl([new eo(()=>{const y=n.getSignalName(g);return`[${y}.start, ${y}.stop]`})])}else return cl([{data:n.requestDataName(d),field:n.vgField(r,{})}])}}else if(p.timeUnit&&$n(["time","utc"],e)){const m=i[rp(r)];if(dFe(p,m,s,a)){const g=n.requestDataName(d),y=oy({fieldDef:p,fieldDef2:m,markDef:s,config:a}),v=wI(o)&&y!==.5&&fs(r);return cl([{data:g,field:n.vgField(r,v?{suffix:r5}:{})},{data:g,field:n.vgField(r,{suffix:v?i5:"end"})}])}}return cl(h?[{data:bI(h)?n.requestDataName(d):n.requestDataName(Yi.Raw),field:n.vgField(r),sort:h}]:[{data:n.requestDataName(d),field:n.vgField(r)}])}function sB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":WF),...r?{field:Vc(r)}:{},...i?{order:i}:{}}}function ptn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=K4e(r)&&r,o=Fb(i)&&FF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function mtn(e,t,n){if(!ho(n))return;const r=e.fieldDef(t),i=r.sort;if(cFe(i))return{op:"min",field:bx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(tm(i)){const a=s&&!o.has(i.field);return sB(i,a)}else if(aQt(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(km(c)||zy(c))return sB({field:dt(l),order:u},d);if(Pne(c)||!c)return sB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if($n(["ascending",void 0],i))return!0}}function o0e(e,t){const{aggregate:n,type:r}=e;return n?vt(n)&&!VYt.has(n)?{valid:!1,reason:PKt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:DKt(e)}:{valid:!0}:{valid:!1,reason:NKt(e)}}function XH(e,t,n,r){return e.explicit&&t.explicit&&tt(FKt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function gtn(e){const t=nh(e.map(o=>{if(Vp(o)){const{sort:a,...u}=o;return u}return o}),zn),n=nh(e.map(o=>{if(Vp(o)){const a=o.sort;return a!==void 0&&!bI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),zn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Vp(o)&&n.length>0){let a=n[0];if(n.length>1){tt(pge);const u=n.filter(l=>gt(l)&&"op"in l&&l.op!=="min");n.every(l=>gt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(gt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=nh(n.map(o=>bI(o)||!("op"in o)||vt(o.op)&&o.op in jYt?o:(tt(BKt(o)),!0)),zn);let i;r.length===1?i=r[0]:r.length>1&&(tt(pge),i=!0);const s=nh(e.map(o=>Vp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Nre(e){if(Vp(e)&&vt(e.field))return e.field;if(HYt(e)){let t;for(const n of e.fields)if(Vp(n)&&vt(n.field)){if(!t)t=n.field;else if(t!==n.field)return tt(UKt),t}return tt(zKt),t}else if(qYt(e)){tt(VKt);const t=e.fields[0];return vt(t)?t:void 0}}function l5(e,t){const r=e.component.scales[t].get("domains").map(i=>(Vp(i)&&(i.data=e.lookupDataSource(i.data)),i));return gtn(r)}function n8e(e){return MS(e)||Pre(e)?e.children.reduce((t,n)=>t.concat(n8e(n)),a0e(e)):a0e(e)}function a0e(e){return Xe(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=ytn(i.range,s,n,e),h=l5(e,n),p=a?hZt(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function ytn(e,t,n,r){if(fs(n)){if(Vy(e))return{step:{signal:`${t}_step`}}}else if(gt(e)&&Vp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class r8e extends eg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if($n([ko.LOG,ko.TIME,ko.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&$n([ko.LINEAR,ko.SQRT,ko.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,s=!1,o=!1;for(const a of r){if(Be(a)){const u=a[0],l=a[a.length-1];if(ur(u)&&ur(l))if(u<=0&&l>=0){i=!0;continue}else{s=!0;continue}}o=!0}if(i)return"definitely";if(s&&!o)return"definitely-not"}return"maybe"}}const vtn=["range","scheme"];function btn(e){const t=e.component.scales;for(const n of Nne){const r=t[n];if(!r)continue;const i=_tn(n,e);r.setWithExplicit("range",i)}}function u0e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=tl(t),o=e.getName(s);if(gt(r)&&r.binned&&r.step!==void 0)return new eo(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(oi(r)){const a=Are(e,i,r);return new eo(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function _tn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of vtn)if(n[f]!==void 0){const d=DH(s,f),h=X4e(e,f);if(!d)tt(k4e(s,f,e));else if(h)tt(h);else switch(f){case"range":{const p=n.range;if(Be(p)){if(fs(e))return Fd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return eo.fromName(y,g)}return m}))}else if(gt(p))return Fd({data:t.requestDataName(Yi.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Fd(p)}case"scheme":return Fd(wtn(n[f]))}}const o=e===xi||e==="xOffset"?"width":"height",a=r[o];if(Lh(a)){if(fs(e))if(ho(s)){const f=s8e(a,t,e);if(f)return Fd({step:f})}else tt(R4e(o));else if(pR(e)){const f=e===Ly?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=o8e(a,s);if(p)return Fd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Etn(e,t);return(u!==void 0||l!==void 0)&&DH(s,"rangeMin")&&Be(c)&&c.length===2?Fd([u??c[0],l??c[1]]):cl(c)}function wtn(e){return IXt(e)?{scheme:e.name,...Vu(e,["name"])}:{scheme:e}}function i8e(e,t,n,{center:r}={}){const i=tl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===mo&&sd(n)?r?[eo.fromName(a=>`${o(a)}/2`,s),eo.fromName(a=>`-${o(a)}/2`,s)]:[eo.fromName(o,s),0]:r?[eo.fromName(a=>`-${o(a)}/2`,s),eo.fromName(a=>`${o(a)}/2`,s)]:[0,eo.fromName(o,s)]}function Etn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=js(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case xi:case mo:{if($n(["point","band"],u)){const f=a8e(e,n,r.view);if(Lh(f))return{step:s8e(f,t,e)}}return i8e(e,t,u)}case Ly:case RS:return xtn(e,t,u);case Xm:{const f=Ctn(i,r),d=Atn(i,n,t,r);return dx(u)?Ttn(f,d,Stn(u,r,l,e)):[f,d]}case ef:return[0,Math.PI*2];case Mb:return[0,360];case yd:return[0,new eo(()=>{const f=t.getSignalName(Pl(t.parent)?"child_width":"width"),d=t.getSignalName(Pl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case By:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Uy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case el:return"symbol";case Zu:case tp:case np:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case Qm:case Fy:case jy:return[r.scale.minOpacity,r.scale.maxOpacity]}}function s8e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Ane(n),o=r[s];if(HFe({step:e,offsetIsDiscrete:cn(o)&&H4e(o.type)})==="offset"&&SFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${KYt(f)})`}}else return e.step}function o8e(e,t){if(HFe({step:e,offsetIsDiscrete:ho(t)})==="offset")return{step:e.step}}function xtn(e,t,n){const r=e===Ly?"x":"y",i=t.getScaleComponent(r);if(!i)return i8e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=a8e(r,t.size,t.config.view);if(Lh(l)){const c=o8e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(nt(l)&&l.timeUnit){const c=B4e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=oy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Nt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Nt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return Q6e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function a8e(e,t,n){const r=e===xi?"width":"height",i=t[r];return i||xM(n,r)}function Stn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&Be(n)?n.length+1:(tt(JKt(r)),3)}}function Ttn(e,t,n){const r=()=>{const i=$f(t),s=$f(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Nt(t)?new eo(r):{signal:r()}}function Ctn(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(jF("size",e))}const l0e=.95;function Atn(e,t,n,r){const i={x:u0e(n,"x"),y:u0e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=c0e(t,i,r.view);return ur(s)?s-1:new eo(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=c0e(t,i,r.view);return ur(s)?Math.pow(l0e*s,2):new eo(()=>`pow(${l0e} * ${s.signal}, 2)`)}}throw new Error(jF("size",e))}function c0e(e,t,n){const r=Lh(e.width)?e.width.step:EM(n,"width"),i=Lh(e.height)?e.height.step:EM(n,"height");return t.x||t.y?new eo(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function u8e(e,t){Ii(e)?Itn(e,t):c8e(e,t)}function Itn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Xe(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=js(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=DH(h,t),y=X4e(a,t);if(d!==void 0&&(g?y&&tt(y):tt(k4e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":jb(u[t])||b==="temporal"||v?l.set(t,{signal:QF(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in f0e?f0e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:TFe(i,a),hasSecondaryRangeChannel:!!i[rp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const f0e={bins:({model:e,fieldOrDatumDef:t})=>nt(t)?ktn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Rtn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Ntn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Ptn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Dtn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Otn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=nt(e)?e.sort:void 0;return $tn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Mtn(e,t,n,r,i,s.scale,o)};function l8e(e){Ii(e)?btn(e):c8e(e,"range")}function c8e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?l8e(r):u8e(r,t);for(const r of Xe(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=ay(i,a,t,"scale",r5e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function ktn(e,t){const n=t.bin;if(oi(n)){const r=Are(e,t.field,n);return new eo(()=>e.getSignalName(r))}else if(Ao(n)&&Fb(n)&&n.step!==void 0)return{step:n.step}}function Rtn(e,t){if($n([Zu,tp,np],e)&&t!=="nominal")return"hcl"}function Ntn(e,t,n,r,i,s){var o;if(!((o=ad(s))!=null&&o.bin||Be(n)||i!=null||r!=null||$n([ko.TIME,ko.UTC],e)))return fs(t)?!0:void 0}function Ptn(e,t,n,r,i,s){if(fs(e)){if(rh(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(nt(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===ko.POINT)return n.pointPadding}}function Dtn(e,t,n,r,i,s=!1){if(e===void 0){if(fs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:cs(o,n==="bar"?a:u)}else if(pR(t)&&r===ko.BAND)return i.offsetBandPaddingInner}}function Otn(e,t,n,r,i,s=!1){if(e===void 0){if(fs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===ko.BAND)return cs(o,Nt(r)?{signal:`${r.signal}/2`}:r/2)}else if(pR(t)){if(n===ko.POINT)return .5;if(n===ko.BAND)return i.offsetBandPaddingOuter}}}function $tn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return sd(e)&&t==="descending"?Nt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(sd(e)&&t==="descending")return!0}function Mtn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&sd(i)){if(Be(n)){const u=n[0],l=n[n.length-1];if(ur(u)&&u<=0&&ur(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!dx(i))return!0;if(!(nt(t)&&t.bin)&&$n([...Jm,...NYt],e)){const{orient:u,type:l}=r;return $n(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:$n(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Ltn(e,t,n,r,i=!1){const s=Ftn(t,n,r,i),{type:o}=e;return ip(t)?o!==void 0?$Xt(t,o)?nt(n)&&!OXt(o,n.type)?(tt(MKt(o,s)),s):o:(tt($Kt(t,o,s)),s):s:null}function Ftn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(Xw(e)||X9(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&tt(Q9(e,"ordinal")),"ordinal";if(fs(e)||pR(e)){if($n(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Rne)return"band";const s=n[tl(e)];return rb(s)||px(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return Xw(e)?"time":X9(e)==="discrete"?(tt(Q9(e,"temporal")),"ordinal"):nt(t)&&t.timeUnit&&fo(t.timeUnit).utc?"utc":"time";case"quantitative":return Xw(e)?nt(t)&&oi(t.bin)?"bin-ordinal":"linear":X9(e)==="discrete"?(tt(Q9(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(A4e(t.type))}function jtn(e,{ignoreRange:t}={}){f8e(e),t8e(e);for(const n of DXt)u8e(e,n);t||l8e(e)}function f8e(e){Ii(e)?e.component.scales=Btn(e):e.component.scales=ztn(e)}function Btn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of Nne){const o=js(t[s]);if(o&&n===Z4e&&s===el&&o.type===NS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=TFe(t,s),l=Ltn(a,s,o,r,u);i[s]=new r8e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Utn=r5e((e,t)=>gge(e)-gge(t));function ztn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){f8e(s);for(const o of Xe(s.component.scales))if((t=i.scale)[o]??(t[o]=z5e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?xXt(a.value,u.value)?r[o]=ay(a,u,"type","scale",Utn):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Xe(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new r8e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class oB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ii(e){return(e==null?void 0:e.type)==="unit"}function Pl(e){return(e==null?void 0:e.type)==="facet"}function Pre(e){return(e==null?void 0:e.type)==="concat"}function MS(e){return(e==null?void 0:e.type)==="layer"}class Dre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=ua(a),this.name=t.name??i,this.title=Cg(t.title)?{text:t.title}:t.title?ua(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new oB,this.projectionNameMap=r?r.projectionNameMap:new oB,this.signalNameMap=r?r.signalNameMap:new oB,this.data=t.data,this.description=t.description,this.transforms=KJt(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:ZQt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:GF(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new eg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?rn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){jtn(this)}parseProjection(){J5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){G5e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Xe(r)){const o=r[s];o!==void 0&&(i[s]=hi(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=hi(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Ur(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=uen(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of xc)t[r].title&&n.push(nen(this,r));for(const r of xre)n=n.concat(ren(this,r));return n}assembleAxes(){return VZt(this.component.axes,this.config)}assembleLegends(){return K5e(this)}assembleProjections(){return Nen(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...v4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return $n(["unit","layer"],this.type)?$n(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Ur(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Pl(this.parent)?n8e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ei((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Yi[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Pl(this.parent)){const n=B5e(t),r=MF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(ho(s)&&Vy(o)){const a=i.get("name"),u=l5(this,r),l=Nre(u);if(l){const c=dt({aggregate:"distinct",field:l},{expr:"datum"});return{signal:j5e(a,i,c)}}else return tt(One(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(c4e(t)&&ip(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(eKt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class d8e extends Dre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return dt(r,n)}reduceFieldDef(t,n){return IQt(this.getMapping(),(r,i,s)=>{const o=ad(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){sre(this.getMapping(),(r,i)=>{const s=ad(r);s&&t(s,i)},n)}}class c5 extends Lr{clone(){return new c5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${zn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class f5 extends Lr{clone(){return new f5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${zn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class d5 extends Lr{clone(){return new d5(this.parent,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${zn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class h5 extends Lr{clone(){return new h5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${zn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Zw extends Lr{clone(){return new Zw(null,rn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[bd,vd],[Hc,_d]]){const s=i.map(o=>{const a=js(n.encoding[o]);return nt(a)?a.field:sp(a)?{expr:`${a.datum}`}:od(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new Zw(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(el)){const i=n.typedFieldDef(el);i.type===NS&&(t=new Zw(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(vt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${zn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class xI extends Lr{clone(){return new xI(null,this.projection,rn(this.fields),rn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[bd,vd],[Hc,_d]]){const i=r.map(o=>{const a=js(n.encoding[o]);return nt(a)?a.field:sp(a)?{expr:`${a.datum}`}:od(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Hc?"2":"";(i[0]||i[1])&&(t=new xI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(vt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${zn(this.fields)} ${zn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class y1 extends Lr{clone(){return new y1(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new y1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(nt(i)&&nt(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=IFe(n.mark,r);return new y1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${zn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:RJt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class p5 extends Lr{clone(){return new p5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${zn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class SI extends Lr{clone(){return new SI(null,rn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(NJt(o)){let u=m8e(o.data,s);u||(u=new ab(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Hu(u,l,Yi.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(PJt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ei(u),u)}catch{throw new Error(iKt(u))}if(a=l.materialized,!a)throw new Error(sKt(u))}return new SI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?yt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${zn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:yt(this.transform.as)}:{}};else{let n=this.transform.as;vt(n)||(tt(hKt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class m5 extends Lr{clone(){return new m5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${zn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class g5 extends Lr{clone(){return new g5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${zn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class y5 extends Lr{clone(){return new y5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=nh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${zn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class v5 extends Lr{clone(){return new v5(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${zn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function h8e(e){let t=0;function n(r,i){if(r instanceof ab&&!r.isGenerator&&!gx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ga&&(r.parent instanceof ab&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof OS){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof xR||r instanceof SR||r instanceof wx||r instanceof DS||r instanceof vx||r instanceof xI||r instanceof Yf||r instanceof SI||r instanceof $S||r instanceof Vb||r instanceof h5||r instanceof d5||r instanceof c5||r instanceof p5||r instanceof m5||r instanceof g5||r instanceof cy||r instanceof v5||r instanceof y5||r instanceof f5)&&i.transform.push(r.assemble()),(r instanceof wh||r instanceof _h||r instanceof y1||r instanceof rm||r instanceof Zw)&&i.transform.push(...r.assemble()),r instanceof Hu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Hu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Hu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Vtn(e){const t=[],n=h8e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Htn(e,t){const n=[],r=h8e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function qtn(e){return e==="top"||e==="left"||Nt(e)?"header":"footer"}function Wtn(e){for(const t of xc)Gtn(e,t);d0e(e,"x"),d0e(e,"y")}function Gtn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=_x("title",null,r,t);let l=Qw(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=Be(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=_x("labelOrient",a.header,r,t),f=a.header!==null?cs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=$n(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[p8e(e,t,f)]}}}function p8e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function d0e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Cre(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=qtn(a.get("orient"));o[u]??(o[u]=[p8e(e,s,!1)]);const l=$C(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Ytn(e){Ore(e),AM(e,"width"),AM(e,"height")}function Ktn(e){Ore(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";AM(e,t),AM(e,n)}function Ore(e){for(const t of e.children)t.parseLayoutSize()}function AM(e,t){const n=B5e(t),r=MF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??z5e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=ay(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Xtn(e){const{size:t,component:n}=e;for(const r of Jm){const i=tl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Lh(s)?"step":s,!0)}else{const s=Qtn(e,i);n.layoutSize.set(i,s,!1)}}}function Qtn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(ho(s)){const a=xM(r.view,t);return Vy(o)||Lh(a)?"step":a}else return MH(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return MH(r.view,t);{const s=xM(r.view,t);return Lh(s)?s.step:s}}}function QH(e,t,n){return dt(t,{suffix:`by_${dt(e)}`,...n})}class M2 extends d8e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=jre(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!vR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Xe(t),r={};for(const i of n){if(![Zp,em].includes(i)){tt(jF(i,"facet"));break}const s=t[i];if(s.field===void 0){tt(NH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=ire(t,n);return r.header?r.header=ua(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=b5(this),this.child.parseData()}parseLayoutSize(){Ore(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Wtn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of xc)for(const r of Sre){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=_x("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=a5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof M2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof M2?{...this.channelHasField("column")?{encode:{update:{columns:{field:dt(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof M2){if(this.child.channelHasField("column")){const i=dt(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of Jm){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(ho(o)&&Vy(a)){const u=l5(this.child,i),l=Nre(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):tt(One(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of xc){const f=this.facet[c];if(f){u.push(dt(f));const{bin:d,sort:h}=f;if(oi(d)&&u.push(dt(f,{binSuffix:"end"})),tm(h)){const{field:p,op:m=WF}=h,g=QH(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(Be(h)){const p=bx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?tm(r.sort)?[QH(r,r.sort,{expr:"datum"})]:Be(r.sort)?[bx(r,t,{expr:"datum"})]:[dt(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(tm(i)?i.order:!Be(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return HH(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of xre)if(t[s]){const o=_x("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return HH(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Vtn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:xc.map(u=>this.facetSortFields(u)).flat(),order:xc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(lZt(this,[]))}]}getMapping(){return this.facet}}function Jtn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(tm(s.sort)){const{field:o,op:a=WF}=s.sort;e=i=new Vb(e,{joinaggregate:[{op:a,field:o,as:QH(s,s.sort,{forAs:!0})}],groupby:[dt(s)]})}return i}return null}function m8e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(EI(e)&&EI(a)){if(Al(e.values,a.values))return o}else if(gx(e)&&gx(a)){if(e.url===a.url)return o}else if(i5e(e)&&e.name===o.dataName)return o}}return null}function Ztn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new ab({values:[]});return t.push(r),r}const n=m8e(e.data,t);if(n)return T0(e.data)||(n.data.format=J6e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new ab(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function enn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(zJt(i))o=e=new vx(e,i),s="derived";else if(gre(i)){const a=Hen(i);o=e=ga.makeWithAncestors(e,{},a,n)??e,e=new DS(e,t,i.filter)}else if(ZFe(i))o=e=wh.makeFromTransform(e,i,t),s="number";else if(HJt(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ga(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=_h.makeFromTransform(e,i);else if(qJt(i))o=e=Yf.makeFromTransform(e,i),s="number",Ere(t)&&(e=new cy(e));else if(JFe(i))o=e=SI.make(e,t,i,r++),s="derived";else if(jJt(i))o=e=new $S(e,i),s="number";else if(BJt(i))o=e=new Vb(e,i),s="number";else if(WJt(i))o=e=rm.makeFromTransform(e,i),s="derived";else if(GJt(i))o=e=new h5(e,i),s="derived";else if(YJt(i))o=e=new f5(e,i),s="derived";else if(UJt(i))o=e=new d5(e,i),s="derived";else if(DJt(i))o=e=new y5(e,i),s="derived";else if(FJt(i))e=new v5(e,i);else if(VJt(i))o=e=y1.makeFromTransform(e,i),s="derived";else if(OJt(i))o=e=new c5(e,i),s="derived";else if($Jt(i))o=e=new m5(e,i),s="derived";else if(MJt(i))o=e=new g5(e,i),s="derived";else if(LJt(i))o=e=new p5(e,i),s="derived";else{tt(dKt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function b5(e){var g;let t=Ztn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(T0(i)||gx(i)||EI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new oZt;T0(i)?(s5e(i)?t=new SR(t,i.sequence):yre(i)&&(t=new xR(t,i.graticule)),o.parseNothing=!0):((g=i==null?void 0:i.format)==null?void 0:g.parse)===null&&(o.parseNothing=!0),t=ga.makeExplicit(t,e,o)??t,t=new cy(t);const a=e.parent&&MS(e.parent);(Ii(e)||Pl(e))&&a&&(t=wh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=enn(t,e,o));const u=Wen(e),l=qen(e);t=ga.makeWithAncestors(t,{},{...u,...l},o)??t,Ii(e)&&(t=Zw.parseAll(t,e),t=xI.parseAll(t,e)),(Ii(e)||Pl(e))&&(a||(t=wh.makeFromEncoding(t,e)??t),t=_h.makeFromEncoding(t,e)??t,t=vx.parseAllForSortIndex(t,e));const c=t=wP(Yi.Raw,e,t);if(Ii(e)){const y=Yf.makeFromEncoding(t,e);y&&(t=y,Ere(e)&&(t=new cy(t))),t=y1.makeFromEncoding(t,e)??t,t=rm.makeFromEncoding(t,e)??t}let f,d;if(Ii(e)){const{markDef:y,mark:v,config:b}=e,w=Or("invalid",y,b),{marks:E,scales:S}=d=a5e({invalid:w,isPath:Hy(v)});E!==S&&S==="include-invalid-values"&&(f=t=wP(Yi.PreFilterInvalid,e,t)),E==="exclude-invalid-values"&&(t=wx.make(t,e,d)??t)}const h=t=wP(Yi.Main,e,t);let p;if(Ii(e)&&d){const{marks:y,scales:v}=d;y==="include-invalid-values"&&v==="exclude-invalid-values"&&(t=wx.make(t,e,d)??t,p=t=wP(Yi.PostFilterInvalid,e,t))}Ii(e)&&UZt(e,h);let m=null;if(Pl(e)){const y=e.getName("facet");t=Jtn(t,e.facet)??t,m=new OS(t,e,y,h.getSource()),n[y]=m}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:h,facetRoot:m,ancestorParse:o,preFilterInvalid:f,postFilterInvalid:p}}function wP(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Hu(n,s,e,i);return r[s]=o,o}class tnn extends Dre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&tt(lKt),this.children=this.getChildren(t).map((l,c)=>jre(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=b5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Xe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return e5(t)?t.vconcat:pre(t)?t.hconcat:t.concat}parseLayoutSize(){Ktn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Tre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function nnn(e){return e===!1||e===null}const rnn={disable:1,gridScale:1,scale:1,...EFe,labelExpr:1,encode:1},g8e=Xe(rnn);class $re extends eg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new $re(rn(this.explicit),rn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!nnn(this.get(t))}hasOrientSignalRef(){return Nt(this.explicit.orient)}}function inn(e,t,n){const{encoding:r,config:i}=e,s=js(r[t])??js(r[rp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(ib(u))return{text:Mf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(hx(s)==="quantitative"){if(px(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Mf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Mf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(hx(s)==="temporal"&&i.timeFormatType&&nt(s)&&!s.timeUnit)return{text:Mf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function snn(e){return Jm.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[dnn(n,e)]),t),{})}const onn={bottom:"top",top:"bottom",left:"right",right:"left"};function ann(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Xe(i.component.axes))n.axis[s]=Cre(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=unn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of Jm){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Nt(a)){if(r[a]>0&&!u){const l=onn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function unn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=lnn(i,s)}}}else return t.map(n=>n.clone());return e}function lnn(e,t){for(const n of g8e){const r=ay(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return T4e(i,s);case"gridScale":return{explicit:i.explicit,value:cs(i.value,s.value)}}return n5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function cnn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Nt(n.labelAngle)?n.labelAngle:_I(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===$5e(r,i))return!0}return e===n[t]}const fnn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function dnn(e,t){var y,v;let n=t.axis(e);const r=new $re,i=js(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||QZt(e),u=t.getScaleComponent(e).get("type"),l=HZt(e,u,a,t.config),c=n!==void 0?!n:zH("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=YZt(i,n,e,o.style,l),d=uFe(n.formatType,i,u),h=aFe(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of g8e){const w=b in Qge?Qge[b](p):xge(b)?n[b]:void 0,E=w!==void 0,S=cnn(w,b,n,t,e);if(E&&S)r.set(b,w,S);else{const{configValue:T=void 0,configFrom:C=void 0}=xge(b)&&b!=="values"?zH(b,o.style,n.style,l):{},A=T!==void 0;E&&!A?r.set(b,w,S):(C!=="vgAxisConfig"||fnn.has(b)&&A||wR(T)||Nt(T))&&r.set(b,T,!1)}}const m=n.encoding??{},g=wFe.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=U5e(m[w]??{},t),S=w==="labels"?inn(t,e,E):E;return S!==void 0&&!Ur(S)&&(b[w]={update:S}),b},{});return Ur(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function hnn({encoding:e,size:t}){for(const n of Jm){const r=tl(n);Lh(t[r])&&Zg(e[n])&&(delete t[r],tt(R4e(r)))}return t}const pnn={vgMark:"arc",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...uy(e,"radius"),...uy(e,"theta")})},mnn={vgMark:"area",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...SM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...SM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...wre(e)})},gnn={vgMark:"rect",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...uy(e,"x"),...uy(e,"y")})},ynn={vgMark:"shape",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&nt(n)&&n.type===NS?{field:dt(n,{expr:"datum"})}:{}}]}},vnn={vgMark:"image",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...uy(e,"x"),...uy(e,"y"),...bre(e,"url")})},bnn={vgMark:"line",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...no("size",e,{vgChannel:"strokeWidth"}),...wre(e)})},_nn={vgMark:"trail",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...no("size",e),...wre(e)})};function Mre(e,t){const{config:n}=e;return{...tf(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...no("size",e),...no("angle",e),...wnn(e,n,t)}}function wnn(e,t,n){return n?{shape:{value:n}}:no("shape",e)}const Enn={vgMark:"symbol",encodeEntry:e=>Mre(e)},xnn={vgMark:"symbol",encodeEntry:e=>Mre(e,"circle")},Snn={vgMark:"symbol",encodeEntry:e=>Mre(e,"square")},Tnn={vgMark:"rect",encodeEntry:e=>({...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...uy(e,"x"),...uy(e,"y")})},Cnn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...SM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...SM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...no("size",e,{vgChannel:"strokeWidth"})}}},Ann={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...tf(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ma("x",e,{defaultPos:"mid"}),...ma("y",e,{defaultPos:"mid"}),...bre(e),...no("size",e,{vgChannel:"fontSize"}),...no("angle",e),...Gge("align",Inn(e.markDef,n,t)),...Gge("baseline",knn(e.markDef,n,t)),...ma("radius",e,{defaultPos:null}),...ma("theta",e,{defaultPos:null})}}};function Inn(e,t,n){if(Or("align",e,n)===void 0)return"center"}function knn(e,t,n){if(Or("baseline",e,n)===void 0)return"middle"}const Rnn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...tf(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ma("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ma("y",e,{defaultPos:"mid",vgChannel:"yc"}),...no("size",e,{defaultValue:Nnn(e),vgChannel:i}),[s]:hi(Or("thickness",n,t))}}};function Nnn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Or("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Vy(a)&&ur(a.step)?a.step*3/4:EM(t.view,i)*3/4}}const EP={arc:pnn,area:mnn,bar:gnn,circle:xnn,geoshape:ynn,image:vnn,line:bnn,point:Enn,rect:Tnn,rule:Cnn,square:Snn,text:Ann,tick:Rnn,trail:_nn};function Pnn(e){if($n([HF,zF,jXt],e.mark)){const t=IFe(e.mark,e.encoding);if(t.length>0)return Dnn(e,t)}else if(e.mark===VF){const t=RH.some(n=>Or(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Onn(e)}return Lre(e)}const h0e="faceted_path_";function Dnn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:h0e+e.requestDataName(Yi.Main),data:e.requestDataName(Yi.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Lre(e,{fromPrefix:h0e})}]}const p0e="stack_group_";function Onn(e){var l;const[t]=Lre(e,{fromPrefix:p0e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...ox(t.encode.update,["y","yc","y2","height",...RH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Vu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...ox(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Vu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of RH){const f=$h(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=hi(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=dt(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(dt(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=$h(f,e.markDef,e.config);return d!==void 0?{...c,[f]:hi(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Yi.Main),name:p0e+e.requestDataName(Yi.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function $nn(e){const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!Be(o)&&od(o)&&IH(o.value)||!o&&IH(Or("order",i,s)))){if((Be(o)||nt(o))&&!n)return E4e(o,{expr:"datum"});if(Hy(r)){const a=i.orient==="horizontal"?"y":"x",u=t[a];if(nt(u))return{field:a}}}}function Lre(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=cs(r.clip,Mnn(e),Lnn(e)),a=_4e(r),u=i.key,l=$nn(e),c=Fnn(e),f=Or("aria",r,s),d=EP[n].postEncodingTransform?EP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:EP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Yi.Main)},encode:{update:EP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Mnn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Lnn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Fnn(e){if(!e.component.selection)return null;const t=Xe(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Xe(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class y8e extends d8e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Tge(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Mh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=EJt(o,s,{graticule:t.data&&yre(t.data)}));const u=this.encoding=CQt(t.encoding||{},a,o.filled,s);this.markDef=KFe(o,u,s),this.size=hnn({encoding:u,size:Tge(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=YFe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>dre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===Z4e,r=t&&EYt.some(i=>cn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return Nne.reduce((r,i)=>{const s=js(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=ua(t);return Be(n)&&(i.domain=n.map(vl)),Be(r)&&(i.range=r.map(vl)),i}initAxes(t){return Jm.reduce((n,r)=>{const i=t[r];if(cn(i)||r===xi&&cn(t.x2)||r===mo&&cn(t.y2)){const s=cn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Xe(t),r={};for(const i of n){const s=t[i];r[i]=wR(s)?b4e(s):vl(s)}return r}initLegends(t){return PYt.reduce((n,r)=>{const i=js(t[r]);if(i&&OYt(r)){const s=i.legend;n[r]=s&&ua(s)}return n},{})}parseData(){this.component.data=b5(this)}parseLayoutSize(){Xtn(this)}parseSelections(){this.component.selection=BZt(this,this.selection)}parseMarkGroup(){this.component.mark=Pnn(this)}parseAxesAndHeaders(){this.component.axes=snn(this)}assembleSelectionTopLevelSignals(t){return cZt(this,t)}assembleSignals(){return[...P5e(this),...uZt(this,[])]}assembleSelectionData(t){return fZt(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Tre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!MS(this.parent))&&(t=l5e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return m1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ad(n)}typedFieldDef(t){const n=this.fieldDef(t);return nu(n)?n:null}}class Fre extends Dre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(t5(a))return new Fre(a,this,this.getName(`layer_${u}`),o,s);if(Zm(a))return new y8e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Dne(a))})}parseData(){this.component.data=b5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Ytn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Xe(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){ann(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),P5e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Tre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of yt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return dZt(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),K5e(this))}}function jre(e,t,n,r,i){if(GF(e))return new M2(e,t,n,i);if(t5(e))return new Fre(e,t,n,r,i);if(Zm(e))return new y8e(e,t,n,r,i);if(XQt(e))return new tnn(e,t,n,i);throw new Error(Dne(e))}function jnn(e,t={}){t.logger&&ZKt(t.logger),t.fieldTitle&&vFe(t.fieldTitle);try{const n=GFe(vS(t.config,e.config)),r=n5e(e,n),i=jre(r,null,"",void 0,n);return i.parse(),utn(i.component.data,i),{spec:Unn(i,Bnn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&eXt(),t.fieldTitle&&yQt()}}function Bnn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):vt(t)&&(t={type:t}),i&&s&&rZt(t.type)){if(i==="step"&&s==="step")tt(lge()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";tt(lge(MF(o)));const a=o==="width"?"height":"width";t.type=iZt(a)}}return{...Xe(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Lge(n,!1),...Lge(e,!0)}}function Unn(e,t,n={},r){const i=e.config?cJt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Htn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...VFe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const znn=gYt.version,Vnn=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ux,accessPathWithDatum:xne,compile:jnn,contains:$n,deepEqual:Al,deleteNestedProperty:dM,duplicate:rn,entries:iy,every:_ne,fieldIntersection:Ene,flatAccessWithDatum:e4e,getFirstDefined:cs,hasIntersection:wne,hash:zn,internalField:r4e,isBoolean:bI,isEmpty:Ur,isEqual:vYt,isInternalField:i4e,isNullOrFalse:IH,isNumeric:RF,keys:Xe,logicalExpr:O2,mergeDeep:J6e,never:Q6e,normalize:n5e,normalizeAngle:_I,omit:Vu,pick:ox,prefixGenerator:kH,removePathFromField:kS,replaceAll:Z1,replacePathInField:Vc,resetIdCounter:_Yt,setEqual:Z6e,some:ax,stringify:zr,titleCase:fR,unique:nh,uniqueId:n4e,vals:Mo,varName:Ei,version:znn},Symbol.toStringTag,{value:"Module"}));function v8e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Hnn="vega-themes",qnn="2.15.0",Wnn="Themes for stylized Vega and Vega-Lite visualizations.",Gnn=["vega","vega-lite","themes","style"],Ynn="BSD-3-Clause",Knn={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Xnn=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Qnn="build/vega-themes.js",Bre="build/vega-themes.module.js",Jnn="build/vega-themes.min.js",Znn="build/vega-themes.min.js",ern="build/vega-themes.module.d.ts",trn={type:"git",url:"https://github.com/vega/vega-themes.git"},nrn=["src","build"],rrn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},irn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},srn={vega:"*","vega-lite":"*"},orn={},arn={name:Hnn,version:qnn,description:Wnn,keywords:Gnn,license:Ynn,author:Knn,contributors:Xnn,main:Qnn,module:Bre,unpkg:Jnn,jsdelivr:Znn,types:ern,repository:trn,files:nrn,scripts:rrn,devDependencies:irn,peerDependencies:srn,dependencies:orn};const E_="#fff",m0e="#888",urn={background:"#333",view:{stroke:m0e},title:{color:E_,subtitleColor:E_},style:{"guide-label":{fill:E_},"guide-title":{fill:E_}},axis:{domainColor:E_,gridColor:m0e,tickColor:E_}},iv="#4572a7",lrn={background:"#fff",arc:{fill:iv},area:{fill:iv},line:{stroke:iv,strokeWidth:2},path:{stroke:iv},rect:{fill:iv},shape:{stroke:iv},symbol:{fill:iv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},sv="#30a2da",aB="#cbcbcb",crn="#999",frn="#333",g0e="#f0f0f0",y0e="#333",drn={arc:{fill:sv},area:{fill:sv},axis:{domainColor:aB,grid:!0,gridColor:aB,gridWidth:1,labelColor:crn,labelFontSize:10,titleColor:frn,tickColor:aB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:g0e,group:{fill:g0e},legend:{labelColor:y0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:y0e,titleFontSize:14,titlePadding:10},line:{stroke:sv,strokeWidth:2},path:{stroke:sv,strokeWidth:.5},rect:{fill:sv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:sv},bar:{binSpacing:2,fill:sv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ov="#000",hrn={group:{fill:"#e5e5e5"},arc:{fill:ov},area:{fill:ov},line:{stroke:ov},path:{stroke:ov},rect:{fill:ov},shape:{stroke:ov},symbol:{fill:ov,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},prn=22,mrn="normal",v0e="Benton Gothic, sans-serif",b0e=11.5,grn="normal",av="#82c6df",uB="Benton Gothic Bold, sans-serif",_0e="normal",w0e=13,LT={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},yrn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:uB,fontSize:prn,fontWeight:mrn},arc:{fill:av},area:{fill:av},line:{stroke:av,strokeWidth:2},path:{stroke:av},rect:{fill:av},shape:{stroke:av},symbol:{fill:av,size:30},axis:{labelFont:v0e,labelFontSize:b0e,labelFontWeight:grn,titleFont:uB,titleFontSize:w0e,titleFontWeight:_0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:v0e,labelFontSize:b0e,symbolType:"square",titleFont:uB,titleFontSize:w0e,titleFontWeight:_0e},range:{category:LT["category-6"],diverging:LT["fireandice-6"],heatmap:LT["fire-7"],ordinal:LT["fire-7"],ramp:LT["fire-7"]}},uv="#ab5787",xP="#979797",vrn={background:"#f9f9f9",arc:{fill:uv},area:{fill:uv},line:{stroke:uv},path:{stroke:uv},rect:{fill:uv},shape:{stroke:uv},symbol:{fill:uv,size:30},axis:{domainColor:xP,domainWidth:.5,gridWidth:.2,labelColor:xP,tickColor:xP,tickWidth:.2,titleColor:xP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},lv="#3e5c69",brn={background:"#fff",arc:{fill:lv},area:{fill:lv},line:{stroke:lv},path:{stroke:lv},rect:{fill:lv},shape:{stroke:lv},symbol:{fill:lv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},rc="#1696d2",E0e="#000000",_rn="#FFFFFF",SP="Lato",lB="Lato",wrn="Lato",Ern="#DEDDDD",xrn=18,FT={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Srn={background:_rn,title:{anchor:"start",fontSize:xrn,font:SP},axisX:{domain:!0,domainColor:E0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:lB,labelAngle:0,tickColor:E0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:SP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Ern,gridWidth:1,labelFontSize:12,labelFont:lB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:SP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:lB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:SP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:FT["six-groups-cat-1"],diverging:FT["diverging-colors"],heatmap:FT["diverging-colors"],ordinal:FT["six-groups-seq"],ramp:FT["shades-blue"]},area:{fill:rc},rect:{fill:rc},line:{color:rc,stroke:rc,strokeWidth:5},trail:{color:rc,stroke:rc,strokeWidth:0,size:1},path:{stroke:rc,strokeWidth:.5},point:{filled:!0},text:{font:wrn,color:rc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:rc,stroke:null}},arc:{fill:rc},shape:{stroke:rc},symbol:{fill:rc,size:30}},cv="#3366CC",x0e="#ccc",TP="Arial, sans-serif",Trn={arc:{fill:cv},area:{fill:cv},path:{stroke:cv},rect:{fill:cv},shape:{stroke:cv},symbol:{stroke:cv},circle:{fill:cv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:TP,fontSize:12},"guide-title":{font:TP,fontSize:12},"group-title":{font:TP,fontSize:12}},title:{font:TP,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:x0e,tickColor:x0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Ure=e=>e*(1/3+1),S0e=Ure(9),T0e=Ure(10),C0e=Ure(12),jT="Segoe UI",A0e="wf_standard-font, helvetica, arial, sans-serif",I0e="#252423",BT="#605E5C",k0e="transparent",Crn="#C8C6C4",hf="#118DFF",Arn="#12239E",Irn="#E66C37",krn="#6B007B",Rrn="#E044A7",Nrn="#744EC2",Prn="#D9B300",Drn="#D64550",b8e=hf,_8e="#DEEFFF",R0e=[_8e,b8e],Orn=[_8e,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",b8e],$rn={view:{stroke:k0e},background:k0e,font:jT,header:{titleFont:A0e,titleFontSize:C0e,titleColor:I0e,labelFont:jT,labelFontSize:T0e,labelColor:BT},axis:{ticks:!1,grid:!1,domain:!1,labelColor:BT,labelFontSize:S0e,titleFont:A0e,titleColor:I0e,titleFontSize:C0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Crn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:hf},line:{stroke:hf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:jT,fontSize:S0e,fill:BT},arc:{fill:hf},area:{fill:hf,line:!0,opacity:.6},path:{stroke:hf},rect:{fill:hf},point:{fill:hf,filled:!0,size:75},shape:{stroke:hf},symbol:{fill:hf,strokeWidth:1.5,size:50},legend:{titleFont:jT,titleFontWeight:"bold",titleColor:BT,labelFont:jT,labelFontSize:T0e,labelColor:BT,symbolType:"circle",symbolSize:75},range:{category:[hf,Arn,Irn,krn,Rrn,Nrn,Prn,Drn],diverging:R0e,heatmap:R0e,ordinal:Orn}},cB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Mrn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',fB=400,CP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Lrn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Frn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function _5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=CP.gridBg[e],i=CP.textPrimary[e],s=CP.textSecondary[e],o=n==="dark"?Lrn:Frn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:cB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Mrn,labelFontWeight:fB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:CP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:cB,fill:s,fontWeight:fB},"guide-title":{font:cB,fill:s,fontWeight:fB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const jrn=_5({theme:"white",background:"#ffffff"}),Brn=_5({theme:"g10",background:"#f4f4f4"}),Urn=_5({theme:"g90",background:"#262626"}),zrn=_5({theme:"g100",background:"#161616"}),Vrn=arn.version,Hrn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Brn,carbong100:zrn,carbong90:Urn,carbonwhite:jrn,dark:urn,excel:lrn,fivethirtyeight:drn,ggplot2:hrn,googlecharts:Trn,latimes:yrn,powerbi:$rn,quartz:vrn,urbaninstitute:Srn,version:Vrn,vox:brn},Symbol.toStringTag,{value:"Module"}));function qrn(e,t,n,r){if(Be(e))return`[${e.map(i=>t(vt(i)?i:N0e(i,n))).join(", ")}]`;if(gt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(gt(c)&&(c=N0e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Wrn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function N0e(e,t){return JSON.stringify(e,Wrn(t))}var Grn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const w8e="vg-tooltip-element",Yrn={offsetX:10,offsetY:10,id:w8e,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Krn,maxDepth:2,formatTooltip:qrn,baseURL:""};function Krn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Xrn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Grn.toString().replace(w8e,e)}function Qrn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Jrn{constructor(t){this.options={...Yrn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Xrn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Qrn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var dB={};function Zrn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}class ein{constructor(){this.max=1e3,this.map=new Map}get(t){const n=this.map.get(t);if(n!==void 0)return this.map.delete(t),this.map.set(t,n),n}delete(t){return this.map.delete(t)}set(t,n){if(!this.delete(t)&&n!==void 0){if(this.map.size>=this.max){const i=this.map.keys().next().value;this.delete(i)}this.map.set(t,n)}return this}}var tin=ein;const nin=Object.freeze({loose:!0}),rin=Object.freeze({}),iin=e=>e?typeof e!="object"?nin:e:rin;var zre=iin,JH={exports:{}};const sin="2.0.0",E8e=256,oin=Number.MAX_SAFE_INTEGER||9007199254740991,ain=16,uin=E8e-6,lin=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Vre={MAX_LENGTH:E8e,MAX_SAFE_COMPONENT_LENGTH:ain,MAX_SAFE_BUILD_LENGTH:uin,MAX_SAFE_INTEGER:oin,RELEASE_TYPES:lin,SEMVER_SPEC_VERSION:sin,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const cin=typeof process=="object"&&dB&&dB.NODE_DEBUG&&/\bsemver\b/i.test(dB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var w5=cin;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Vre,s=w5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(JH,JH.exports);var Hre=JH.exports;const P0e=/^[0-9]+$/,x8e=(e,t)=>{const n=P0e.test(e),r=P0e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},fin=(e,t)=>x8e(t,e);var din={compareIdentifiers:x8e,rcompareIdentifiers:fin};const AP=w5,{MAX_LENGTH:D0e,MAX_SAFE_INTEGER:IP}=Vre,{safeRe:O0e,t:$0e}=Hre,hin=zre,{compareIdentifiers:x_}=din;let pin=class Rd{constructor(t,n){if(n=hin(n),t instanceof Rd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>D0e)throw new TypeError(`version is longer than ${D0e} characters`);AP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?O0e[$0e.LOOSE]:O0e[$0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>IP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>IP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>IP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<IP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(AP("SemVer.compare",this.version,this.options,t),!(t instanceof Rd)){if(typeof t=="string"&&t===this.version)return 0;t=new Rd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Rd||(t=new Rd(t,this.options)),x_(this.major,t.major)||x_(this.minor,t.minor)||x_(this.patch,t.patch)}comparePre(t){if(t instanceof Rd||(t=new Rd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(AP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return x_(r,i)}while(++n)}compareBuild(t){t instanceof Rd||(t=new Rd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(AP("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return x_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),x_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var qre=pin;const M0e=qre,min=(e,t,n)=>new M0e(e,n).compare(new M0e(t,n));var LS=min;const gin=LS,yin=(e,t,n)=>gin(e,t,n)===0;var vin=yin;const bin=LS,_in=(e,t,n)=>bin(e,t,n)!==0;var win=_in;const Ein=LS,xin=(e,t,n)=>Ein(e,t,n)>0;var Sin=xin;const Tin=LS,Cin=(e,t,n)=>Tin(e,t,n)>=0;var Ain=Cin;const Iin=LS,kin=(e,t,n)=>Iin(e,t,n)<0;var Rin=kin;const Nin=LS,Pin=(e,t,n)=>Nin(e,t,n)<=0;var Din=Pin;const Oin=vin,$in=win,Min=Sin,Lin=Ain,Fin=Rin,jin=Din,Bin=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Oin(e,n,r);case"!=":return $in(e,n,r);case">":return Min(e,n,r);case">=":return Lin(e,n,r);case"<":return Fin(e,n,r);case"<=":return jin(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Uin=Bin,hB,L0e;function zin(){if(L0e)return hB;L0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}hB=t;const n=zre,{safeRe:r,t:i}=Hre,s=Uin,o=w5,a=qre,u=S8e();return hB}var pB,F0e;function S8e(){if(F0e)return pB;F0e=1;class e{constructor($,L){if(L=r(L),$ instanceof e)return $.loose===!!L.loose&&$.includePrerelease===!!L.includePrerelease?$:new e($.raw,L);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(U=>!p(U[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const U of this.set)if(U.length===1&&m(U[0])){this.set=[U];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,U=n.get(M);if(U)return U;const B=this.options.loose,V=B?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(V,k(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let D=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>N(q,this.options));B&&(D=D.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",D);const z=new Map,W=D.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(M,j),j}intersects($,L){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,L)&&$.set.some(U=>g(U,L)&&M.every(B=>U.every(V=>B.intersects(V,L)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(O(this.set[L],$,this.options))return!0;return!1}}pB=e;const t=tin,n=new t,r=zre,i=zin(),s=w5,o=qre,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Hre,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Vre,p=P=>P.value==="<0.0.0-0",m=P=>P.value==="",g=(P,$)=>{let L=!0;const M=P.slice();let U=M.pop();for(;L&&M.length;)L=M.every(B=>U.intersects(B,$)),U=M.pop();return L},y=(P,$)=>(s("comp",P,$),P=E(P,$),s("caret",P),P=b(P,$),s("tildes",P),P=T(P,$),s("xrange",P),P=A(P,$),s("stars",P),P),v=P=>!P||P.toLowerCase()==="x"||P==="*",b=(P,$)=>P.trim().split(/\s+/).map(L=>w(L,$)).join(" "),w=(P,$)=>{const L=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return P.replace(L,(M,U,B,V,D)=>{s("tilde",P,M,U,B,V,D);let z;return v(U)?z="":v(B)?z=`>=${U}.0.0 <${+U+1}.0.0-0`:v(V)?z=`>=${U}.${B}.0 <${U}.${+B+1}.0-0`:D?(s("replaceTilde pr",D),z=`>=${U}.${B}.${V}-${D} <${U}.${+B+1}.0-0`):z=`>=${U}.${B}.${V} <${U}.${+B+1}.0-0`,s("tilde return",z),z})},E=(P,$)=>P.trim().split(/\s+/).map(L=>S(L,$)).join(" "),S=(P,$)=>{s("caret",P,$);const L=$.loose?a[u.CARETLOOSE]:a[u.CARET],M=$.includePrerelease?"-0":"";return P.replace(L,(U,B,V,D,z)=>{s("caret",P,U,B,V,D,z);let W;return v(B)?W="":v(V)?W=`>=${B}.0.0${M} <${+B+1}.0.0-0`:v(D)?B==="0"?W=`>=${B}.${V}.0${M} <${B}.${+V+1}.0-0`:W=`>=${B}.${V}.0${M} <${+B+1}.0.0-0`:z?(s("replaceCaret pr",z),B==="0"?V==="0"?W=`>=${B}.${V}.${D}-${z} <${B}.${V}.${+D+1}-0`:W=`>=${B}.${V}.${D}-${z} <${B}.${+V+1}.0-0`:W=`>=${B}.${V}.${D}-${z} <${+B+1}.0.0-0`):(s("no pr"),B==="0"?V==="0"?W=`>=${B}.${V}.${D}${M} <${B}.${V}.${+D+1}-0`:W=`>=${B}.${V}.${D}${M} <${B}.${+V+1}.0-0`:W=`>=${B}.${V}.${D} <${+B+1}.0.0-0`),s("caret return",W),W})},T=(P,$)=>(s("replaceXRanges",P,$),P.split(/\s+/).map(L=>C(L,$)).join(" ")),C=(P,$)=>{P=P.trim();const L=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return P.replace(L,(M,U,B,V,D,z)=>{s("xRange",P,M,U,B,V,D,z);const W=v(B),j=W||v(V),q=j||v(D),G=q;return U==="="&&G&&(U=""),z=$.includePrerelease?"-0":"",W?U===">"||U==="<"?M="<0.0.0-0":M="*":U&&G?(j&&(V=0),D=0,U===">"?(U=">=",j?(B=+B+1,V=0,D=0):(V=+V+1,D=0)):U==="<="&&(U="<",j?B=+B+1:V=+V+1),U==="<"&&(z="-0"),M=`${U+B}.${V}.${D}${z}`):j?M=`>=${B}.0.0${z} <${+B+1}.0.0-0`:q&&(M=`>=${B}.${V}.0${z} <${B}.${+V+1}.0-0`),s("xRange return",M),M})},A=(P,$)=>(s("replaceStars",P,$),P.trim().replace(a[u.STAR],"")),N=(P,$)=>(s("replaceGTE0",P,$),P.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),k=P=>($,L,M,U,B,V,D,z,W,j,q,G)=>(v(M)?L="":v(U)?L=`>=${M}.0.0${P?"-0":""}`:v(B)?L=`>=${M}.${U}.0${P?"-0":""}`:V?L=`>=${L}`:L=`>=${L}${P?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:P?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${L} ${z}`.trim()),O=(P,$,L)=>{for(let M=0;M<P.length;M++)if(!P[M].test($))return!1;if($.prerelease.length&&!L.includePrerelease){for(let M=0;M<P.length;M++)if(s(P[M].semver),P[M].semver!==i.ANY&&P[M].semver.prerelease.length>0){const U=P[M].semver;if(U.major===$.major&&U.minor===$.minor&&U.patch===$.patch)return!0}return!1}return!0};return pB}const Vin=S8e(),Hin=(e,t,n)=>{try{t=new Vin(t,n)}catch{return!1}return t.test(e)};var qin=Hin,T8e=Zrn(qin);function Win(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var Gin=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function C8e(e,...t){for(const n of t)Yin(e,n);return e}function Yin(e,t){for(const n of Object.keys(t))bS(e,n,t[n],!0)}const gf=MGt;let TI=Vnn;const kP=typeof window<"u"?window:void 0;var V0e;TI===void 0&&((V0e=kP==null?void 0:kP.vl)!=null&&V0e.compile)&&(TI=kP.vl);const Kin={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Xin={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},LC={vega:"Vega","vega-lite":"Vega-Lite"},IM={vega:gf.version,"vega-lite":TI?TI.version:"not available"},Qin={vega:e=>e,"vega-lite":(e,t)=>TI.compile(e,{config:t}).spec},Jin=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,Zin="chart-wrapper";function esn(e){return typeof e=="function"}function j0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${LC[r]} JSON Source`}function tsn(e,t){if(e.$schema){const n=v8e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${LC[n.library]}, but mode argument sets ${LC[t]??t}.`);const r=n.library;return T8e(IM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${LC[r]} ${n.version}, but the current version of ${LC[r]} is v${IM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function A8e(e){return!!(e&&"load"in e)}function B0e(e){return A8e(e)?e:gf.loader(e)}function nsn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return vt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function rsn(e,t,n={}){let r,i;vt(t)?(i=B0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=nsn(r),o=s.loader;(!i||o)&&(i=B0e(n.loader??o));const a=await U0e(s,i),u=await U0e(n,i),l={...C8e(u,a),config:vS(u.config??{},a.config??{})};return await ssn(e,r,l,i)}async function U0e(e,t){const n=vt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=vt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function isn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function ssn(e,t,n={},r){const i=n.theme?vS(Hrn[n.theme],n.config??{}):n.config,s=Oy(n.actions)?n.actions:C8e({},Kin,n.actions??{}),o={...Xin,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??gf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:S,rootContainer:T}=isn(c);if(!S.getElementById(E)){const C=document.createElement("style");C.id=E,C.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?Gin.toString():n.defaultStyle,T.appendChild(C)}}const f=tsn(t,n.mode);let d=Qin[f](t,i);if(f==="vega-lite"&&d.$schema){const E=v8e(d.$schema);T8e(IM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${IM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(Zin),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):$4(d,p,!0,!1).newDocument),n.formatLocale&&gf.formatLocale(n.formatLocale),n.timeFormatLocale&&gf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const S=n.expressionFunctions[E];"fn"in S?gf.expressionFunction(E,S.fn,S.visitor):S instanceof Function&&gf.expressionFunction(E,S)}const{ast:m}=n,g=gf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||gf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:gf.expressionInterpreter??n.expr??WGt}:{}});if(y.addSignalListener("autosize",(E,S)=>{const{type:T}=S;T=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):T=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):T=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:S}=n,T=E&&!A8e(E)?E==null?void 0:E.baseURL:void 0,C=esn(S)?S:new Jrn({baseURL:T,...S===!0?{}:S}).call;y.tooltip(C)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:S}=typeof v=="boolean"?{}:v;y.hover(E,S)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const T=document.createElement("details");T.title=o.CLICK_TO_VIEW_ACTIONS,c.append(T),E=T;const C=document.createElement("summary");C.innerHTML=Jin,T.append(C),b=A=>{T.contains(A.target)||T.removeAttribute("open")},document.addEventListener("click",b)}const S=document.createElement("div");if(E.append(S),S.classList.add("vega-actions"),s===!0||s.export!==!1){for(const T of["svg","png"])if(s===!0||s.export===!0||s.export[T]){const C=o[`${T.toUpperCase()}_ACTION`],A=document.createElement("a"),N=gt(n.scaleFactor)?n.scaleFactor[T]:n.scaleFactor;A.text=C,A.href="#",A.target="_blank",A.download=`${l}.${T}`,A.addEventListener("mousedown",async function(k){k.preventDefault();const O=await y.toImageURL(T,N);this.href=O}),S.append(A)}}if(s===!0||s.source!==!1){const T=document.createElement("a");T.text=o.SOURCE_ACTION,T.href="#",T.addEventListener("click",function(C){j0e(v9(t),n.sourceHeader??"",n.sourceFooter??"",f),C.preventDefault()}),S.append(T)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const T=document.createElement("a");T.text=o.COMPILED_ACTION,T.href="#",T.addEventListener("click",function(C){j0e(v9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),C.preventDefault()}),S.append(T)}if(s===!0||s.editor!==!1){const T=n.editorUrl??"https://vega.github.io/editor/",C=document.createElement("a");C.text=o.EDITOR_ACTION,C.href="#",C.addEventListener("click",function(A){Win(window,T,{config:i,mode:p?"vega":f,renderer:a,spec:v9(p?d:t)}),A.preventDefault()}),S.append(C)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function osn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function asn(e,t,n){n&&(osn(n)?n(e.data(t)):e.change(t,gf.changeset().remove(()=>!0).insert(n)))}function usn(e,t){Object.keys(t).forEach(n=>{asn(e,n,t[n])})}function I8e(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const k8e=()=>{};function mB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function lsn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=I8e([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!JP(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function z0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function gB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function FC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class R8e extends Wi.PureComponent{constructor(){super(...arguments),FC(this,"containerRef",Wi.createRef()),FC(this,"resultPromise",void 0),FC(this,"handleError",t=>{const{onError:n=k8e}=this.props;n(t,this.containerRef.current),console.warn(t)}),FC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=I8e([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=lsn(gB(this.props),gB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!xV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&z0e(a,s),i&&mB(a,i)),a.run()})}else xV(i,s)||this.modifyView(o=>{s&&z0e(o,s),i&&mB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=gB(this.props);this.resultPromise=rsn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;mB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return Wi.createElement("div",{ref:this.containerRef,className:t,style:n})}}FC(R8e,"propTypes",{className:Qhe.string,onError:Qhe.func});function ZH(){return ZH=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZH.apply(this,arguments)}function eq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const csn={};class N8e extends Wi.PureComponent{constructor(){super(...arguments),eq(this,"vegaEmbed",Wi.createRef()),eq(this,"handleNewView",t=>{this.update();const{onNewView:n=k8e}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){xV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{usn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return Wi.createElement(R8e,ZH({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}eq(N8e,"defaultProps",{data:csn});function tq(){return tq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tq.apply(this,arguments)}function fsn(e){return Wi.createElement(N8e,tq({},e,{mode:"vega-lite"}))}function dsn({allParticipants:e,studyId:t}){const[n,{close:r,open:i}]=n1(!1),[s,{close:o,open:a}]=n1(!1),[u,{open:l,close:c}]=n1(!1);return _.jsxs(_.Fragment,{children:[_.jsxs(mr,{children:[_.jsxs(xn,{opened:n,children:[_.jsx(xn.Target,{children:_.jsx(On,{variant:"light",disabled:e.length===0,onClick:()=>{RK(JSON.stringify(e,null,2),`${t}_all.json`)},onMouseEnter:i,onMouseLeave:r,px:4,children:_.jsx(DXe,{})})}),_.jsx(xn.Dropdown,{children:_.jsx(et,{children:"Download all participants data as JSON"})})]}),_.jsxs(xn,{opened:s,children:[_.jsx(xn.Target,{children:_.jsx(On,{variant:"light",disabled:e.length===0,onClick:l,onMouseEnter:a,onMouseLeave:o,px:4,children:_.jsx(uwe,{})})}),_.jsx(xn.Dropdown,{children:_.jsx(et,{children:"Download all participants data as a tidy CSV"})})]})]}),u&&_.jsx(Pdt,{opened:u,close:c,filename:`${t}_all_tidy.csv`,data:e,studyId:t})]})}function hsn(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function psn(e){const{studyId:t,allParticipants:n,config:r}=e,i=Kl(),[s,o]=KM(),a=n.filter(b=>b.completed).map(b=>Math.max(...Object.values(b.answers).map(w=>w.endTime).filter(w=>w!==void 0))).filter(b=>Number.isFinite(b)),[u,l]=I.useState([new Date(new Date(Math.min(...a.length>0?a:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...a.length>0?a:[new Date().getTime()])).setHours(24,0,0,0))]),[c,f,d,h]=I.useMemo(()=>{const b=n.filter(S=>!S.rejected&&S.completed),w=n.filter(S=>!S.rejected&&!S.completed),E=n.filter(S=>S.rejected);return[b,w,E,b.filter(S=>hsn(S.answers,u))]},[n,u]),p=I.useMemo(()=>{var b,w;return h.length>0?[{Date:(b=u[0])==null?void 0:b.getTime(),Participants:0},...h.map(E=>Math.max(...Object.values(E.answers).map(S=>S.endTime).flat())).sort((E,S)=>E-S).map((E,S)=>({Date:E,Participants:S})),{Date:(w=u[1])==null?void 0:w.getTime(),Participants:h.length}]:[]},[h,u]),m=I.useMemo(()=>{var b,w;return{width:o.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(b=u[0])==null?void 0:b.getTime(),(w=u[1])==null?void 0:w.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:p}}},[o.width,u,p]),[g,{close:y,open:v}]=n1(!1);return _.jsx(ld,{children:_.jsxs(pb,{ref:s,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(fn,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(fn,{direction:"row",align:"center",children:[_.jsx(ki,{order:5,children:t}),_.jsx(HDe,{completed:c.length,inProgress:f.length,rejected:d.length,filteredCompleted:h.length})]}),_.jsxs(mr,{children:[_.jsx(dsn,{allParticipants:n,studyId:t}),_.jsxs(xn,{opened:g,children:[_.jsx(xn.Target,{children:_.jsx(On,{onClick:()=>i(`/analysis/stats/${t}`),onMouseEnter:v,onMouseLeave:y,px:4,children:_.jsx(NXe,{})})}),_.jsx(xn.Dropdown,{children:_.jsx(et,{children:"Analyze and manage study data"})})]})]})]}),_.jsx(aZ,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:u,onChange:l}),p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{mt:16,children:"Finished Participants"}),_.jsx(fsn,{spec:m,actions:!1})]}):_.jsx(be,{h:293.4,children:_.jsx($l,{style:{height:"100%"},children:_.jsx(et,{children:"Not enough participants for chart"})})})]})})}function msn(e){const{globalConfig:t}=e,[n,r]=I.useState(!1),[i,s]=I.useState({}),[o,a]=I.useState({}),[u,l]=I.useState({}),{storageEngine:c}=Di(),{user:f}=Ny();I.useEffect(()=>{(async()=>{r(!0);const p={},m={},g={},y=async b=>{const w=await w4(b,t);if(c){if(p[b]=await c.getAllParticipantsDataByStudy(b),w===null)return;if(m[b]=w,c instanceof hc){const E=await c.getModes(b);g[b]=E.analyticsInterfacePubliclyAccessible}}};await(async()=>{const b=t.configsList.map(w=>y(w));try{await Promise.all(b),s(p),a(m),l(g)}catch(w){console.error("Error fetching data:",w)}finally{r(!1)}})()})()},[t,c]);const d=t.configsList.map(h=>i[h]&&(u[h]||f.isAdmin?_.jsx(Va.Col,{span:{md:12,xl:6},children:_.jsx(psn,{studyId:h,allParticipants:i[h],config:o[h]})},`${h}-panel`):null));return _.jsxs(be,{children:[_.jsx(ki,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Va,{children:[d.length>0?d:_.jsx(ld,{mt:100,children:_.jsx(et,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(Dc,{visible:n})]})]})}function gsn({globalConfig:e}){return _.jsxs(pr,{children:[_.jsx(A2,{studyIds:e.configsList}),_.jsx(pr.Main,{children:_.jsx(ld,{fluid:!0,children:_.jsx(msn,{globalConfig:e})})})]})}function ysn(){const{user:e,triggerAuth:t}=Ny(),{storageEngine:n}=Di(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(""),[y,v]=I.useState(null),b=ASe({initialValues:{email:""},validate:{email:Qdt("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof hc){const k=await(n==null?void 0:n.getUserManagementData("authentication"));i(k==null?void 0:k.isEnabled);const O=await(n==null?void 0:n.getUserManagementData("adminUsers"));O&&O.adminUsersList&&o(O==null?void 0:O.adminUsersList.map(P=>P.email))}else i(!1);u(!1)})()},[n]);const w=async()=>{if(u(!0),n instanceof hc){const N=await qDe(n,u);N&&N.email&&v({email:N.email,uid:N.uid}),p(!0)}u(!1)},E=async N=>{u(!0),n instanceof hc&&N&&(await n.changeAuth(!0),await n.addAdminUser(N),o([N.email]),i(!0),t()),p(!1),u(!1)},S=async()=>{if(u(!0),n instanceof hc){await n.addAdminUser({email:b.values.email,uid:null});const N=await n.getUserManagementData("adminUsers");o(N==null?void 0:N.adminUsersList.map(k=>k.email))}u(!1),c(!1),b.setValues({email:""})},T=N=>{d(!0),g(N)},C=async()=>{if(u(!0),n instanceof hc){await n.removeAdminUser(m);const N=await n.getUserManagementData("adminUsers");o(N==null?void 0:N.adminUsersList.map(k=>k.email))}d(!1),u(!1)},A=I.useMemo(()=>n instanceof hc,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(ld,{children:_.jsxs(pb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(ki,{mb:20,order:3,children:"Authentication"}),r?_.jsx(fn,{children:_.jsx(et,{children:"Authentication is enabled."})}):_.jsxs(fn,{justify:"space-between",children:[_.jsx(be,{children:_.jsx(et,{children:"Authentication is currently disabled."})}),_.jsx(os,{label:"You can only enable auth when using Firebase",disabled:A,children:_.jsx(On,{onClick:N=>A?w():N.preventDefault(),color:"green","data-disabled":A?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(fn,{mt:40,direction:"column",children:[_.jsxs(fn,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(ki,{order:6,children:"Enabled Users"}),_.jsx(tY,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(N=>{var k;return _.jsxs(fn,{justify:"space-between",mb:10,children:[_.jsx(et,{children:N}),N===((k=e.user)==null?void 0:k.email)?_.jsx(et,{color:"blue",size:"xs",children:"You"}):_.jsx(jf,{variant:"subtle",onClick:()=>T(N),children:_.jsx(lwe,{color:"red"})})]},N)}):null]}):null]})}),_.jsx(Es,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(be,{component:"form",onSubmit:b.onSubmit(()=>S()),children:[_.jsx(l0,{leftSection:_.jsx(AXe,{}),placeholder:"User Gmail Account",...b.getInputProps("email")}),_.jsxs(fn,{mt:30,justify:"right",children:[_.jsx(On,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(On,{type:"submit",children:"Save"})]})]})}),_.jsxs(Es,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(et,{fw:700,children:["Remove",m,"?"]}),children:[_.jsxs(et,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:m})," ","as an administrator?"]}),_.jsxs(fn,{mt:40,justify:"right",children:[_.jsx(On,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(On,{onClick:()=>C(),children:"Yes, I'm sure."})]})]}),_.jsxs(Es,{opened:h,size:"md",onClose:()=>d(!1),title:_.jsx(et,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(et,{mt:40,children:["User"," ",_.jsx("b",{children:y==null?void 0:y.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(fn,{mt:40,justify:"right",children:[_.jsx(On,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(On,{onClick:()=>E(y),children:"Yes, I'm sure."})]})]}),_.jsx(Dc,{visible:a})]})}class vsn extends ODe{constructor(){super("localStorage");hu(this,"studyDatabase");hu(this,"studyId")}saveAllParticipantAndTaskTags(n){throw new Error("Method not implemented.")}getAllParticipantAndTaskTags(){throw new Error("Method not implemented.")}saveTags(n){throw new Error("Method not implemented.")}getTags(){throw new Error("Method not implemented.")}getEditedTranscript(n){throw new Error("Method not implemented.")}saveEditedTranscript(n,r,i,s){throw new Error("Method not implemented.")}getAudio(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}getTranscription(n,r){return console.warn("not yet implemented",r),Promise.resolve(["not implemented"])}saveAudio(n){return console.warn("not yet implemented",n),Promise.resolve()}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await B_.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await $$(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await $$(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await B_.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=zA();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=B_.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=zA();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await B_.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await B_.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function bsn(){let e,t=!1;{const n=new hc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new vsn;await n.connect(),e=n}return e}async function _sn(){const t=await(await fetch(`${cd}global.json`)).text();return Tdt(t)}function wsn(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await IMt(e))}a()},[e]),I.useEffect(()=>{e||_sn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=Di();I.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await bsn();s(u)}a()},[s,i]);const o=async a=>i instanceof hc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(dXe,{basename:cd,children:_.jsx(Z$t,{children:_.jsx(wXe,{children:_.jsx(pr,{padding:"md",header:{height:70},children:_.jsxs(iXe,{children:[_.jsx(gp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(A2,{studyIds:e.configsList}),_.jsx(Dit,{globalConfig:e,studyConfigs:n})]})}),_.jsx(gp,{path:"/:studyId/*",element:_.jsx(RMt,{globalConfig:e})}),_.jsx(gp,{path:"/analysis/dashboard",element:_.jsx(gsn,{globalConfig:e})}),_.jsx(gp,{path:"/analysis",element:_.jsx(EV,{to:"/analysis/dashboard"})}),_.jsx(gp,{path:"/analysis/stats/:studyId/:tab",element:_.jsx(Ghe,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(OMt,{globalConfig:e})})}),_.jsx(gp,{path:"/analysis/stats/:studyId",element:_.jsx(EV,{to:"./table",replace:!0})}),_.jsx(gp,{path:"/settings",element:_.jsx(pr,{children:_.jsxs(Ghe,{children:[_.jsx(A2,{studyIds:e.configsList}),_.jsx(pr.Main,{children:_.jsx(ysn,{})})]})})}),_.jsx(gp,{path:"/login",element:_.jsxs(pr,{children:[_.jsx(A2,{studyIds:e.configsList}),_.jsx(pr.Main,{children:_.jsx($Mt,{})})]})})]})})})})}):null}yB.createRoot(document.getElementById("root")).render(_.jsx(Wi.StrictMode,{children:_.jsx(mKe,{children:_.jsx(T1e,{children:_.jsx(wsn,{})})})}))});export default Esn();
